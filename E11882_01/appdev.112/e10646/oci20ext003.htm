<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Cartridge Services &mdash; Maintaining Context</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-07-18T15:18:44Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Call Interface Programmer's Guide" />
<meta name="dcterms.identifier" content="E10646-15" />
<meta name="dcterms.isVersionOf" content="LNOCI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="oci20ext002.htm" title="Previous" type="text/html" />
<link rel="Next" href="oci20ext004.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10646.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">53/79</span> <!-- End Header --><a id="i449037"></a>
<div id="LNOCI193" class="refsect1">
<h1 class="refsect1">Cartridge Services &mdash; Maintaining Context</h1>
<p><a href="#CIHGFGHE">Table 20-3</a> lists the maintaining context functions that are described in this section.</p>
<div id="LNOCI17547" class="tblformalwide">
<p class="titleintable"><a id="sthref4622"></a><a id="CIHGFGHE"></a>Table 20-3 Maintaining Context Functions</p>
<table class="cellalignment1011" title="Maintaining Context Functions" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1005">
<th class="cellalignment1012" id="r1c1-t9">Function</th>
<th class="cellalignment1012" id="r1c2-t9">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r2c1-t9" headers="r1c1-t9">
<p><a href="#i449004">"OCIContextClearValue()"</a></p>
</td>
<td class="cellalignment1013" headers="r2c1-t9 r1c2-t9">
<p>Remove the value stored in the context</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r3c1-t9" headers="r1c1-t9">
<p><a href="#i449011">"OCIContextGenerateKey()"</a></p>
</td>
<td class="cellalignment1013" headers="r3c1-t9 r1c2-t9">
<p>Return a unique 4-byte value each time it is called</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r4c1-t9" headers="r1c1-t9">
<p><a href="#i448997">"OCIContextGetValue()"</a></p>
</td>
<td class="cellalignment1013" headers="r4c1-t9 r1c2-t9">
<p>Return the value stored in the context</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r5c1-t9" headers="r1c1-t9">
<p><a href="#i448978">"OCIContextSetValue()"</a></p>
</td>
<td class="cellalignment1013" headers="r5c1-t9 r1c2-t9">
<p>Save a value (or address) for a particular duration</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADDCI4663" href="../../appdev.112/e10765/cart_services.htm#ADDCI4663"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a> for more information about using these functions</div>
<div id="LNOCI17550" class="refsect2"><a id="i449004"></a>
<h2 class="refsect2"><a id="sthref4623"></a>OCIContextClearValue()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4624"></a>Purpose</p>
<p>Removes the value that is stored in the context associated with the given key (by calling <code>OCIContextSetValue()</code>).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4625"></a>Syntax</p>
<pre>
sword OCIContextClearValue( void     *hndl, 
                            OCIError *err, 
                            ub1      *key, 
                            ub1      keylen );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4626"></a>Parameters</p>
<dl>
<dt>hndl (IN)</dt>
<dd>
<p>The OCI environment or user session handle.</p>
</dd>
<dt>err (IN)</dt>
<dd>
<p>The error handle.</p>
</dd>
<dt>key (IN)</dt>
<dd>
<p>Unique key value.</p>
</dd>
<dt>keylen (IN)</dt>
<dd>
<p>Length of the key. Maximum is 64 bits.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4627"></a>Comments</p>
<p>An error is returned when a nonexistent key is passed.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4628"></a>Returns</p>
<ul>
<li>
<p>If the operation succeeds, the function returns <code>OCI_SUCCESS</code>.</p>
</li>
<li>
<p>If the operation fails, the function returns <code>OCI_ERROR</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17551" class="refsect2"><a id="i449011"></a>
<h2 class="refsect2"><a id="sthref4629"></a>OCIContextGenerateKey()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4630"></a>Purpose</p>
<p>Returns a unique, 4-byte value each time it is called.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4631"></a>Syntax</p>
<pre>
sword OCIContextGenerateKey( void     *hndl, 
                             OCIError *err, 
                             ub4      *key );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4632"></a>Parameters</p>
<dl>
<dt>hndl (IN)</dt>
<dd>
<p>The OCI environment or user session handle.</p>
</dd>
<dt>err (IN)</dt>
<dd>
<p>The error handle.</p>
</dd>
<dt>key (IN)</dt>
<dd>
<p>Unique key value.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4633"></a>Comments</p>
<p>This value is unique for each session.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4634"></a>Returns</p>
<ul>
<li>
<p>If the operation succeeds, the function returns <code>OCI_SUCCESS</code>.</p>
</li>
<li>
<p>If the operation fails, the function returns <code>OCI_ERROR</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17549" class="refsect2"><a id="i448997"></a>
<h2 class="refsect2"><a id="sthref4635"></a>OCIContextGetValue()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4636"></a>Purpose</p>
<p>Returns the value that is stored in the context associated with the given key (by calling <code>OCIContextSetValue()</code>).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4637"></a>Syntax</p>
<pre>
sword OCIContextGetValue( void       *hndl, 
                          OCIError   *err, 
                          ub1        *key, 
                          ub1        keylen, 
                          void       **ctx_value );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4638"></a>Parameters</p>
<dl>
<dt>hndl (IN)</dt>
<dd>
<p>The OCI environment or user session handle.</p>
</dd>
<dt>err (IN)</dt>
<dd>
<p>The error handle.</p>
</dd>
<dt>key (IN)</dt>
<dd>
<p>Unique key value.</p>
</dd>
<dt>keylen (IN)</dt>
<dd>
<p>Length of the key. Maximum is 64 bits.</p>
</dd>
<dt>ctx_value (IN)</dt>
<dd>
<p>Pointer to the value stored in the context (<code>NULL</code> if no value was stored).</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4639"></a>Comments</p>
<p>For <code>ctx_value</code>, a pointer to a preallocated pointer for the stored context to be returned is required.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4640"></a>Returns</p>
<ul>
<li>
<p>If the operation succeeds, the function returns <code>OCI_SUCCESS</code>.</p>
</li>
<li>
<p>If the operation fails, the function returns <code>OCI_ERROR</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17548" class="refsect2"><a id="i448978"></a>
<h2 class="refsect2"><a id="sthref4641"></a>OCIContextSetValue()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4642"></a>Purpose</p>
<p>Saves a value (or address) for a particular duration.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4643"></a>Syntax</p>
<pre>
sword OCIContextSetValue( void        *hndl, 
                          OCIError    *err, 
                          OCIDuration duration, 
                          ub1         *key, 
                          ub1         keylen, 
                          void        *ctx_value );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4644"></a>Parameters</p>
<dl>
<dt>hndl (IN)</dt>
<dd>
<p>The OCI environment or user session handle.</p>
</dd>
<dt>err (IN)</dt>
<dd>
<p>The error handle.</p>
</dd>
<dt>duration (IN)</dt>
<dd>
<p>One of these values (a previously created user duration):</p>
<p><code>OCI_DURATION_STATEMENT</code></p>
<p><code>OCI_DURATION_SESSION</code></p>
</dd>
<dt>key (IN)</dt>
<dd>
<p>Unique key value.</p>
</dd>
<dt>keylen (IN)</dt>
<dd>
<p>Length of the key. Maximum is 64 bits.</p>
</dd>
<dt>ctx_value (IN)</dt>
<dd>
<p>Pointer that is saved in the context.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4645"></a>Comments</p>
<p>The context value being stored must be allocated out of memory of duration greater than or equal to the duration being passed in. The key being passed in should be unique in this session. Trying to save a context value under the same key and duration again results in overwriting the old context value with the new one. Typically, a client allocates a structure, stores its address in the context using this call, and gets this address in a separate call using <a href="#i448997">OCIContextGetValue()</a>. The (key, value) association can be explicitly removed by calling <a href="#i449004">OCIContextClearValue()</a>, or else it goes away at the end of the duration.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4646"></a>Returns</p>
<ul>
<li>
<p>If the operation succeeds, the function returns <code>OCI_SUCCESS</code>.</p>
</li>
<li>
<p>If the operation fails, the function returns <code>OCI_ERROR</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1004">
<tr>
<td class="cellalignment1013">
<table class="cellalignment1009">
<tr>
<td class="cellalignment1008"><a href="oci20ext002.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1008"><a href="oci20ext004.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1015">
<table class="cellalignment1007">
<tr>
<td class="cellalignment1008"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1008"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1008"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1008"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1008"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1008"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
