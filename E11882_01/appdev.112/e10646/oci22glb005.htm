<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>OCI Character Set Conversion Functions</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-07-18T15:18:46Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Call Interface Programmer's Guide" />
<meta name="dcterms.identifier" content="E10646-15" />
<meta name="dcterms.isVersionOf" content="LNOCI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="oci22glb004.htm" title="Previous" type="text/html" />
<link rel="Next" href="oci22glb006.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10646.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">66/79</span> <!-- End Header --><a id="i531650"></a>
<div id="LNOCI215" class="refsect1">
<h1 class="refsect1">OCI Character Set Conversion Functions</h1>
<p>Conversion between Oracle Database character sets and Unicode (16-bit, fixed-width Unicode encoding) is supported. Replacement characters are used if a character has no mapping from Unicode to the Oracle Database character set. Therefore, conversion back to the original character set is not always possible without data loss.</p>
<p><a href="#g566952">Table 22-6</a> lists the OCI character set conversion functions.</p>
<div id="LNOCI17685" class="tblformalwide">
<p class="titleintable"><a id="sthref5211"></a><a id="g566952"></a>Table 22-6 OCI Character Set Conversion Functions</p>
<table class="cellalignment1011" title="OCI Character Set Conversion Functions " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1005">
<th class="cellalignment1012" id="r1c1-t9">Function</th>
<th class="cellalignment1012" id="r1c2-t9">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r2c1-t9" headers="r1c1-t9">
<p><a href="#i531610">"OCICharSetConversionIsReplacementUsed()"</a></p>
</td>
<td class="cellalignment1013" headers="r2c1-t9 r1c2-t9">
<p>Indicate whether replacement characters were used for characters that could not be converted in the last invocation of <code>OCINlsCharSetConvert()</code> or <code>OCICharSetToUnicode()</code></p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r3c1-t9" headers="r1c1-t9">
<p><a href="#i531617">"OCICharSetToUnicode()"</a></p>
</td>
<td class="cellalignment1013" headers="r3c1-t9 r1c2-t9">
<p>Convert a multibyte string to Unicode</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r4c1-t9" headers="r1c1-t9">
<p><a href="#i531621">"OCINlsCharSetConvert()"</a></p>
</td>
<td class="cellalignment1013" headers="r4c1-t9 r1c2-t9">
<p>Convert a string from one character set to another</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r5c1-t9" headers="r1c1-t9">
<p><a href="#i531636">"OCIUnicodeToCharSet()"</a></p>
</td>
<td class="cellalignment1013" headers="r5c1-t9 r1c2-t9">
<p>Convert a Unicode string into multibyte</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div id="LNOCI17686" class="refsect2"><a id="i531610"></a>
<h2 class="refsect2"><a id="sthref5212"></a>OCICharSetConversionIsReplacementUsed()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5213"></a>Purpose</p>
<p>Indicates whether the replacement character was used for characters that could not be converted during the last invocation of <a href="#i531617">OCICharSetToUnicode()</a> or <a href="#i531621">OCINlsCharSetConvert()</a>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5214"></a>Syntax</p>
<pre>
boolean OCICharSetConversionIsReplacementUsed ( void *hndl );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5215"></a>Parameters</p>
<dl>
<dt>hndl (IN/OUT)</dt>
<dd>
<p>Pointer to an OCI environment or user session handle.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5216"></a>Comments</p>
<p>Conversion between the Oracle Database character set and Unicode (16-bit, fixed-width Unicode encoding) is supported. Replacement characters are used if there is no mapping for a character from Unicode to the Oracle Database character set. Thus, not every character can make a round-trip conversion to the original character. Data loss occurs with certain characters.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5217"></a>Returns</p>
<p>The function returns <code>TRUE</code> if the replacement character was used when <a href="#i531621">OCINlsCharSetConvert()</a> or <a href="#i531617">OCICharSetToUnicode()</a> was last invoked. Otherwise the function returns <code>FALSE</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17687" class="refsect2"><a id="i531617"></a>
<h2 class="refsect2"><a id="sthref5218"></a>OCICharSetToUnicode()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5219"></a>Purpose</p>
<p>Converts a multibyte string pointed to by <code>src</code> to Unicode out to the array pointed to by <code>dst</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5220"></a>Syntax</p>
<pre>
sword OCICharSetToUnicode ( void              *hndl, 
                            ub2               *dst, 
                            size_t            dstlen, 
                            const OraText     *src, 
                            size_t            srclen, 
                            size_t            *rsize );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5221"></a>Parameters</p>
<dl>
<dt>hndl (IN/OUT)</dt>
<dd>
<p>Pointer to an OCI environment or user session handle.</p>
</dd>
<dt>dst (OUT)</dt>
<dd>
<p>Pointer to a destination buffer.</p>
</dd>
<dt>dstlen (IN)</dt>
<dd>
<p>The size of the destination buffer in characters.</p>
</dd>
<dt>src (IN)</dt>
<dd>
<p>Pointer to a multibyte source string.</p>
</dd>
<dt>srclen (IN)</dt>
<dd>
<p>The size of the source string in bytes.</p>
</dd>
<dt>rsize (OUT<code>)</code></dt>
<dd>
<p>The number of characters converted. If it is a <code>NULL</code> pointer, then nothing is returned.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5222"></a>Comments</p>
<p>The conversion stops when it reaches the source limitation or destination limitation. The function returns the number of characters converted into a Unicode string. If <code>dstlen</code> is <code>0</code>, then the function scans the string, counts the number of characters, and returns the number of characters out to <code>rsize</code>, but does not convert the string.</p>
<p>If <code>OCI_UTF16ID</code> is specified for SQL <code>CHAR</code> data in the <a href="oci16rel001.htm#i562098">OCIEnvNlsCreate()</a> function, then this function produces an error.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5223"></a>Returns</p>
<p><code>OCI_SUCCESS</code>, <code>OCI_INVALID_HANDLE</code>, or <code>OCI_ERROR</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17688" class="refsect2"><a id="i531621"></a>
<h2 class="refsect2"><a id="sthref5224"></a>OCINlsCharSetConvert()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5225"></a>Purpose</p>
<p>Converts a string pointed to by <code>src</code> in the character set specified by <code>srcid</code> to the array pointed to by <code>dst</code> in the character set specified by <code>dstid</code>. The conversion stops when it reaches the data size limitation of either the source or the destination. The function returns the number of bytes converted into the destination buffer.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5226"></a>Syntax</p>
<pre>
sword OCINlsCharSetConvert ( void          *hndl, 
                             OCIError      *errhp,
                             ub2           dstid, 
                             void          *dstp, 
                             size_t        dstlen,
                             ub2           srcid, 
                             const void    *srcp, 
                             size_t        srclen, 
                             size_t        *rsize );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5227"></a>Parameters</p>
<dl>
<dt>hndl (IN/OUT)</dt>
<dd>
<p>Pointer to an OCI environment or user session handle.</p>
</dd>
<dt>errhp (IN/OUT)</dt>
<dd>
<p>OCI error handle. If there is an error, then it is recorded in <code>errhp</code> and the function returns a <code>NULL</code> pointer. Diagnostic information can be obtained by calling <a href="oci17msc007.htm#i540516">OCIErrorGet()</a>.</p>
</dd>
<dt>dstid (IN)</dt>
<dd>
<p>Character set ID for the destination buffer.</p>
</dd>
<dt>dstp (OUT)</dt>
<dd>
<p>Pointer to the destination buffer.</p>
</dd>
<dt>dstlen (IN)</dt>
<dd>
<p>The maximum size in bytes of the destination buffer.</p>
</dd>
<dt>srcid (IN)</dt>
<dd>
<p>Character set ID for the source buffer.</p>
</dd>
<dt>srcp (IN)</dt>
<dd>
<p>Pointer to the source buffer.</p>
</dd>
<dt>srclen (IN)</dt>
<dd>
<p>The length in bytes of the source buffer.</p>
</dd>
<dt>rsize (OUT)</dt>
<dd>
<p>The number of characters converted. If the pointer is <code>NULL</code>, then nothing is returned.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5228"></a>Comments</p>
<p>Although either the source or the destination character set ID can be specified as <code>OCI_UTF16ID</code>, the length of the original and the converted data is represented in bytes, rather than number of characters. Note that the conversion does not stop when it encounters null data. To get the character set ID from the character set name, use <a href="oci22glb001.htm#i529139">OCINlsCharSetNameToId()</a>. To check if derived data in the destination buffer contains replacement characters, use <a href="#i531610">OCICharSetConversionIsReplacementUsed()</a>. The buffers should be aligned with the byte boundaries appropriate for the character sets. For example, the <code>ub2</code> data type is necessary to hold strings in UTF-16.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5229"></a>Returns</p>
<p><code>OCI_SUCCESS</code> or <code>OCI_ERROR</code>; number of bytes converted.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17689" class="refsect2"><a id="i531636"></a>
<h2 class="refsect2"><a id="sthref5230"></a>OCIUnicodeToCharSet()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5231"></a>Purpose</p>
<p>Converts a Unicode string to a multibyte string out to an array.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5232"></a>Syntax</p>
<pre>
sword OCIUnicodeToCharSet ( void        *hndl, 
                            OraText     *dst, 
                            size_t      dstlen, 
                            const ub2   *src, 
                            size_t      srclen, 
                            size_t      *rsize );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5233"></a>Parameters</p>
<dl>
<dt>hndl (IN/OUT)</dt>
<dd>
<p>Pointer to an OCI environment or user session handle.</p>
</dd>
<dt>dst (OUT)</dt>
<dd>
<p>Pointer to a destination buffer.</p>
</dd>
<dt>dstlen (IN)</dt>
<dd>
<p>The size of the destination buffer in bytes.</p>
</dd>
<dt>src (IN)</dt>
<dd>
<p>Pointer to a Unicode string.</p>
</dd>
<dt>srclen (IN)</dt>
<dd>
<p>The size of the source string in characters.</p>
</dd>
<dt>rsize (OUT)</dt>
<dd>
<p>The number of bytes converted. If it is a <code>NULL</code> pointer, then nothing is returned.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5234"></a>Comments</p>
<p>The conversion stops when it reaches the source limitation or destination limitation. The function returns the number of bytes converted into a multibyte string. If <code>dstlen</code> is zero, then the function returns the number of bytes out to <code>rsize</code> without conversion.</p>
<p>If a Unicode character is not convertible for the character set specified in OCI environment or user session handle, then a replacement character is used. In this case, <a href="#i531610">OCICharSetConversionIsReplacementUsed()</a> returns <code>TRUE</code>.</p>
<p>If <code>OCI_UTF16ID</code> is specified for SQL <code>CHAR</code> data in the <a href="oci16rel001.htm#i562098">OCIEnvNlsCreate()</a> function, then this function produces an error.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5235"></a>Returns</p>
<p><code>OCI_SUCCESS</code>; <code>OCI_INVALID_HANDLE</code>; or <code>OCI_ERROR</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1004">
<tr>
<td class="cellalignment1013">
<table class="cellalignment1009">
<tr>
<td class="cellalignment1008"><a href="oci22glb004.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1008"><a href="oci22glb006.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1015">
<table class="cellalignment1007">
<tr>
<td class="cellalignment1008"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1008"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1008"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1008"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1008"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1008"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
