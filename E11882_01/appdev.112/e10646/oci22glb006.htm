<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>OCI Messaging Functions</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-07-18T15:18:46Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Call Interface Programmer's Guide" />
<meta name="dcterms.identifier" content="E10646-15" />
<meta name="dcterms.isVersionOf" content="LNOCI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="oci22glb005.htm" title="Previous" type="text/html" />
<link rel="Next" href="oci23xml.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10646.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">67/79</span> <!-- End Header --><a id="BGBIAJDG"></a>
<div id="LNOCI216" class="refsect1">
<h1 class="refsect1">OCI Messaging Functions</h1>
<p>The user message API provides a simple interface for cartridge developers to retrieve their own messages and Oracle Database messages.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADDCI4937" href="../../appdev.112/e10765/serv_c_java_ref.htm#ADDCI4937"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a></div>
<p><a href="#g568734">Table 22-7</a> lists the OCI messaging functions that are described in this section.</p>
<div id="LNOCI17690" class="tblformalwide">
<p class="titleintable"><a id="sthref5236"></a><a id="g568734"></a>Table 22-7 OCI Messaging Functions</p>
<table class="cellalignment1011" title="OCI Messaging Functions " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1005">
<th class="cellalignment1012" id="r1c1-t11">Function</th>
<th class="cellalignment1012" id="r1c2-t11">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r2c1-t11" headers="r1c1-t11">
<p><a href="#i531843">"OCIMessageClose()"</a></p>
</td>
<td class="cellalignment1013" headers="r2c1-t11 r1c2-t11">
<p>Close a message handle and free any memory associated with the handle</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r3c1-t11" headers="r1c1-t11">
<p><a href="#i531850">"OCIMessageGet()"</a></p>
</td>
<td class="cellalignment1013" headers="r3c1-t11 r1c2-t11">
<p>Retrieve a message. If the buffer is not zero, then the function copies the message into the buffer</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r4c1-t11" headers="r1c1-t11">
<p><a href="#i531857">"OCIMessageOpen()"</a></p>
</td>
<td class="cellalignment1013" headers="r4c1-t11 r1c2-t11">
<p>Open a message handle in a specified language</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div id="LNOCI17691" class="refsect2"><a id="i531843"></a>
<h2 class="refsect2"><a id="sthref5237"></a>OCIMessageClose()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5238"></a>Purpose</p>
<p>Closes a message handle and frees any memory associated with this handle.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5239"></a>Syntax</p>
<pre>
sword OCIMessageClose ( void      *hndl, 
                        OCIError  *errhp, 
                        OCIMsg    *msgh );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5240"></a>Parameters</p>
<dl>
<dt>hndl (IN/OUT)</dt>
<dd>
<p>Pointer to an OCI environment or user session handle for the message language.</p>
</dd>
<dt>errhp (IN/OUT)</dt>
<dd>
<p>The OCI error handle. If there is an error, then it is recorded in <code>errhp</code>, and the function returns a <code>NULL</code> pointer. Diagnostic information can be obtained by calling <a href="oci17msc007.htm#i540516">OCIErrorGet()</a>.</p>
</dd>
<dt>msgh (IN/OUT)</dt>
<dd>
<p>A pointer to a message handle that was previously opened by <a href="#i531857">OCIMessageOpen()</a>.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5241"></a>Returns</p>
<p><code>OCI_SUCCESS</code>; <code>OCI_INVALID_HANDLE</code>; or <code>OCI_ERROR</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17692" class="refsect2"><a id="i531850"></a>
<h2 class="refsect2"><a id="sthref5242"></a>OCIMessageGet()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5243"></a>Purpose</p>
<p>Gets a message with the given message number.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5244"></a>Syntax</p>
<pre>
OraText *OCIMessageGet ( OCIMsg      *msgh, 
                         ub4         msgno, 
                         OraText     *msgbuf, 
                         size_t      buflen );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5245"></a>Parameters</p>
<dl>
<dt>msgh (IN/OUT)</dt>
<dd>
<p>Pointer to a message handle that was previously opened by <a href="#i531857">OCIMessageOpen()</a>.</p>
</dd>
<dt>msgno (IN)</dt>
<dd>
<p>The message number.</p>
</dd>
<dt>msgbuf (OUT)</dt>
<dd>
<p>Pointer to a destination buffer for the retrieved message. If <code>buflen</code> is zero, then it can be a <code>NULL</code> pointer.</p>
</dd>
<dt>buflen (IN)</dt>
<dd>
<p>The size of the destination buffer.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5246"></a>Comments</p>
<p>If <code>buflen</code> is not zero, then the function copies the message into the buffer pointed to by <code>msgbuf</code>. If <code>buflen</code> is zero, then the message is copied into a message buffer inside the message handle pointed to by <code>msgh</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5247"></a>Returns</p>
<p>It returns the pointer to the <code>NULL</code>-terminated message string. If the translated message cannot be found, then it tries to return the equivalent English message. If the equivalent English message cannot be found, then it returns a <code>NULL</code> pointer.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17693" class="refsect2"><a id="i531857"></a>
<h2 class="refsect2"><a id="sthref5248"></a>OCIMessageOpen()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5249"></a>Purpose</p>
<p>Opens a message-handling facility in a specified language.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5250"></a>Syntax</p>
<pre>
sword OCIMessageOpen ( void             *hndl, 
                       OCIError         *errhp, 
                       OCIMsg           *msghp, 
                       const OraText    *product, 
                       const OraText    *facility, 
                       OCIDuration      dur );
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5251"></a>Parameters</p>
<dl>
<dt>hndl (IN/OUT)</dt>
<dd>
<p>Pointer to an OCI environment or user session handle for the message language.</p>
</dd>
<dt>errhp (IN/OUT)</dt>
<dd>
<p>The OCI error handle. If there is an error, then it is recorded in <code>errhp</code>, and the function returns a <code>NULL</code> pointer. Diagnostic information can be obtained by calling <a href="oci17msc007.htm#i540516">OCIErrorGet()</a>.</p>
</dd>
<dt>msghp (OUT)</dt>
<dd>
<p>A message handle for return.</p>
</dd>
<dt>product (IN)</dt>
<dd>
<p>A pointer to a product name. The product name is used to locate the directory for messages. Its location depends on the operating system. For example, in Solaris, the directory of message files for the <code>rdbms</code> product is <code>$ORACLE_HOME/rdbms</code>.</p>
</dd>
<dt>facility (IN)</dt>
<dd>
<p>A pointer to a facility name in the product. It is used to construct a message file name. A message file name follows the conversion with <code>facility</code> as prefix. For example, the message file name for the <code>img</code> facility in the American language is <code>imgus.msb</code>, where <code>us</code> is the abbreviation for the American language and <code>msb</code> is the message binary file extension.</p>
</dd>
<dt>dur (IN)</dt>
<dd>
<p>The duration for memory allocation for the return message handle. It can have the following values:</p>
</dd>
</dl>
<ul>
<li>
<p><code>OCI_DURATION_PROCESS</code></p>
</li>
<li>
<p><code>OCI_DURATION_SESSION</code></p>
</li>
<li>
<p><code>OCI_DURATION_STATEMENT</code></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5252"></a>Comments</p>
<p><code>OCIMessageOpen()</code> first tries to open the message file corresponding to <code>hndl</code>. If it succeeds, then it uses that file to initialize a message handle. If it cannot find the message file that corresponds to the language, then it looks for a primary language file as a fallback. For example, if the Latin American Spanish file is not found, then it tries to open the Spanish file. If the fallback fails, then it uses the default message file, whose language is <code>AMERICAN</code>. The function returns a pointer to a message handle into the <code>msghp</code> parameter.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5253"></a>Returns</p>
<p><code>OCI_SUCCESS</code>; <code>OCI_INVALID_HANDLE</code>; or <code>OCI_ERROR</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<!-- class="chapter" -->
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1004">
<tr>
<td class="cellalignment1013">
<table class="cellalignment1009">
<tr>
<td class="cellalignment1008"><a href="oci22glb005.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1008"><a href="oci23xml.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1015">
<table class="cellalignment1007">
<tr>
<td class="cellalignment1008"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1008"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1008"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1008"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1008"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1008"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
