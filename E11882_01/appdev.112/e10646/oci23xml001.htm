<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>OCI XML DB Functions</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-07-18T15:18:46Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Call Interface Programmer's Guide" />
<meta name="dcterms.identifier" content="E10646-15" />
<meta name="dcterms.isVersionOf" content="LNOCI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="oci23xml.htm" title="Previous" type="text/html" />
<link rel="Next" href="ociaahan.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10646.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">69/79</span> <!-- End Header --><a id="CIHFHIBC"></a>
<div id="LNOCI221" class="refsect1">
<h1 class="refsect1">OCI XML DB Functions<a id="sthref5258"></a><a id="sthref5259"></a></h1>
<p><a href="#CIHEIJHJ">Table 23-2</a> lists the OCI XML DB functions that are described in this chapter.</p>
<div id="LNOCI17703" class="tblformalwide">
<p class="titleintable"><a id="sthref5260"></a><a id="CIHEIJHJ"></a>Table 23-2 OCI XML DB Functions &nbsp;</p>
<table class="cellalignment1011" title="OCI XML DB Functions &nbsp;" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1005">
<th class="cellalignment1012" id="r1c1-t5">Function</th>
<th class="cellalignment1012" id="r1c2-t5">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r2c1-t5" headers="r1c1-t5">
<p><a href="#CHDBFBBH">"OCIBinXmlCreateReposCtxFromConn()"</a></p>
</td>
<td class="cellalignment1013" headers="r2c1-t5 r1c2-t5">
<p>Create metadata connection context</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r3c1-t5" headers="r1c1-t5">
<p><a href="#CHDBJBEG">"OCIBinXmlCreateReposCtxFromCPool()"</a></p>
</td>
<td class="cellalignment1013" headers="r3c1-t5 r1c2-t5">
<p>Create metadata connection context connection pool</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r4c1-t5" headers="r1c1-t5">
<p><a href="#CHDBACCB">"OCIBinXmlSetFormatPref()"</a></p>
</td>
<td class="cellalignment1013" headers="r4c1-t5 r1c2-t5">
<p>Specify that images transferred are in binary XML format</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r5c1-t5" headers="r1c1-t5">
<p><a href="#CHDBCIFG">"OCIBinXmlSetReposCtxForConn()"</a></p>
</td>
<td class="cellalignment1013" headers="r5c1-t5 r1c2-t5">
<p>Associate data connection with the metadata connection</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r6c1-t5" headers="r1c1-t5">
<p><a href="#i530442">"OCIXmlDbFreeXmlCtx()"</a></p>
</td>
<td class="cellalignment1013" headers="r6c1-t5 r1c2-t5">
<p>Free an XML context</p>
</td>
</tr>
<tr class="cellalignment1005">
<td class="cellalignment1013" id="r7c1-t5" headers="r1c1-t5">
<p><a href="#i530458">"OCIXmlDbInitXmlCtx()"</a></p>
</td>
<td class="cellalignment1013" headers="r7c1-t5 r1c2-t5">
<p>Initialize an XML context for XML data from the database</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div id="LNOCI17704" class="refsect2"><a id="CHDBFBBH"></a>
<h2 class="refsect2"><a id="sthref5261"></a>OCIBinXmlCreateReposCtxFromConn()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5262"></a>Purpose</p>
<p>Creates a metadata connection context (<code>OCIBinXmlReposCtx</code>) from the specified <code>OCIEnv</code>/<code>OCISvcCtx</code> dedicated OCI connection. Note that this connection is dedicated to metadata use.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5263"></a>Syntax</p>
<pre>
sword OCIBinXmlCreateReposCtxFromConn (   OCIEnv             *env, 
                                          OCISvcCtx          *svcctx,
                                          OCIError           *err,
                                          OCIBinXmlReposCtx  **ctx);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5264"></a>Parameters</p>
<dl>
<dt>env (IN)</dt>
<dd>
<p>The environment handle.</p>
</dd>
</dl>
<dl>
<dt>svcctx (IN)</dt>
<dd>
<p>The handle to the connection to be used to access the metadata.</p>
</dd>
</dl>
<dl>
<dt>err (IN)</dt>
<dd>
<p>The error handle.</p>
</dd>
</dl>
<dl>
<dt>ctx (OUT)</dt>
<dd>
<p>The metadata context that is created and returned.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5265"></a>Returns</p>
<p>Returns -1 for error, 0 for success. The <code>err</code> parameter contains more information about the error.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5266"></a>Related Functions</p>
<p><a href="#CHDBJBEG">OCIBinXmlCreateReposCtxFromCPool()</a></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17705" class="refsect2"><a id="CHDBJBEG"></a>
<h2 class="refsect2"><a id="sthref5267"></a>OCIBinXmlCreateReposCtxFromCPool()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5268"></a>Purpose</p>
<p>Creates a metadata connection context (<code>OCIBinXmlReposCtx</code>) from the specified connection pool. A connection from the connection pool is used whenever any information from the token repository is needed.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5269"></a>Syntax</p>
<pre>
sword OCIBinXmlCreateReposCtxFromCPool (   OCIEnv             *env, 
                                           OCICPool           *cpool,
                                           OCIError           *err,
                                           OCIBinXmlReposCtx  **ctx);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5270"></a>Parameters</p>
<dl>
<dt>env (IN)</dt>
<dd>
<p>The environment handle.</p>
</dd>
</dl>
<dl>
<dt>cpool (IN)</dt>
<dd>
<p>The handle to the connection to be used to access the metadata.</p>
</dd>
</dl>
<dl>
<dt>err (IN)</dt>
<dd>
<p>The error handle.</p>
</dd>
</dl>
<dl>
<dt>ctx (OUT)</dt>
<dd>
<p>The metadata context that is created and returned.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5271"></a>Returns</p>
<p>Returns -1 for error, 0 for success. The <code>err</code> parameter contains more information about the error.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5272"></a>Related Functions</p>
<p><a href="#CHDBFBBH">OCIBinXmlCreateReposCtxFromConn()</a></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17707" class="refsect2"><a id="CHDBACCB"></a>
<h2 class="refsect2"><a id="sthref5273"></a>OCIBinXmlSetFormatPref()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5274"></a>Purpose</p>
<p>Specifies that the images being transferred between client and server for the XML document be in binary XML format. In the future, all communication will be in the binary XML format. Binary XML-aware applications can set this.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5275"></a>Syntax</p>
<pre>
sword OCIBinXmlSetFormatPref (   xmldomdoc   *doc,
                                 ub4         formattype);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5276"></a>Parameters</p>
<dl>
<dt>doc (IN)</dt>
<dd>
<p>The pointer to the <code>domdoc</code> to which the preference is to be applied.</p>
</dd>
</dl>
<dl>
<dt>formattype (IN)</dt>
<dd>
<p>The type of format to be used for pickling. Currently the only values allowed are <code>OCIXML_FORMATTYPE_TEXT</code> and <code>OCIXML_FORMATTYPE_BINXML</code>.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5277"></a>Returns</p>
<p>Returns -1 for error, 0 for success.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5278"></a>Related Functions</p>
<p><a href="#CHDBCIFG">OCIBinXmlSetReposCtxForConn()</a></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17706" class="refsect2"><a id="CHDBCIFG"></a>
<h2 class="refsect2"><a id="sthref5279"></a>OCIBinXmlSetReposCtxForConn()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5280"></a>Purpose</p>
<p>Associates the data connection with the metadata connection. Note that with a dedicated connection, the environment handle must be the same for the data connection and for the metadata connection.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5281"></a>Syntax</p>
<pre>
sword OCIBinXmlSetReposCtxForConn (   OCISvcCtx          *dataconn,
                                      OCIBinXmlReposCtx  *reposctx);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5282"></a>Parameters</p>
<dl>
<dt>dataconn (IN)</dt>
<dd>
<p>The data connection handle.</p>
</dd>
</dl>
<dl>
<dt>reposctx (IN)</dt>
<dd>
<p>The pointer to the metadata connection.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5283"></a>Returns</p>
<p>Returns -1 for error, 0 for success. The <code>err</code> parameter contains more information about the error.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5284"></a>Related Functions</p>
<p><a href="#CHDBACCB">OCIBinXmlSetFormatPref()</a></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17708" class="refsect2"><a id="i530442"></a>
<h2 class="refsect2"><a id="sthref5285"></a>OCIXmlDbFreeXmlCtx()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5286"></a>Purpose</p>
<p>Frees any allocations made by the call to <code>OCIXmlDbInitXmlCtx()</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5287"></a>Syntax</p>
<pre>
void OCIXmlDbFreeXmlCtx ( xmlct   *xctx ); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5288"></a>Parameters</p>
<dl>
<dt>xctx (IN)</dt>
<dd>
<p>The XML context to terminate.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5289"></a>Comments</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="oci14oca.htm#CHDJEAJI">"Using OCI XML DB Functions"</a> for a usage example</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5290"></a>Returns</p>
<p>Returns -1 for error, 0 for success.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5291"></a>Related Functions</p>
<p><a href="#i530458">OCIXmlDbInitXmlCtx()</a></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="LNOCI17709" class="refsect2"><a id="i530458"></a>
<h2 class="refsect2"><a id="sthref5292"></a>OCIXmlDbInitXmlCtx()</h2>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5293"></a>Purpose</p>
<p>Initializes an XML context for XML data from the database.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5294"></a>Syntax</p>
<pre>
xmlctx *OCIXmlDbInitXmlCtx (   OCIEnv                *envhp,
                               OCISvcCtx             *svchp,
                               OCIError              *errhp,
                               ocixmldbparam         *params,
                               ub4                   num_params ); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5295"></a>Parameters</p>
<dl>
<dt>envhp (IN)</dt>
<dd>
<p>The OCI environment handle.</p>
</dd>
<dt>svchp (IN)</dt>
<dd>
<p>The OCI service handle.</p>
</dd>
<dt>errhp (IN)</dt>
<dd>
<p>The OCI error handle.</p>
</dd>
<dt>params (IN)</dt>
<dd>
<p>The optional possible values in this array are pointers to either the OCI duration, in which the default value is <code>OCI_DURATION_SESSION</code>, or to an error handler that is a user-registered callback of prototype:</p>
<pre>
void (*err_handler) (sword errcode, (const OraText *) errmsg);
</pre>
<p>The two parameters of <code>err_handler</code> are:</p>
</dd>
<dt>errcode (OUT)</dt>
<dd>
<p>A numeric error value.</p>
</dd>
<dt>errmsg (OUT)</dt>
<dd>
<p>The error message text.</p>
</dd>
<dt>num_params (IN)</dt>
<dd>
<p>Number of parameters to be read from <code>params.</code> If the value of <code>num_params</code> exceeds the size of array <code>params</code>, unexpected behavior results.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5296"></a>Comments</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="oci14oca.htm#CHDJEAJI">"Using OCI XML DB Functions"</a> for a usage example</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5297"></a>Returns</p>
<p>Returns either:</p>
<ul>
<li>
<p>A pointer to structure <code>xmlctx</code>, with error handler and callbacks populated with appropriate values. This is later used for all OCI calls.</p>
</li>
<li>
<p>NULL, if no database connection is available.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5298"></a>Related Functions</p>
<p><a href="#i530442">OCIXmlDbFreeXmlCtx()</a></p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<!-- class="chapter" -->
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1004">
<tr>
<td class="cellalignment1013">
<table class="cellalignment1009">
<tr>
<td class="cellalignment1008"><a href="oci23xml.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1008"><a href="ociaahan.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1015">
<table class="cellalignment1007">
<tr>
<td class="cellalignment1008"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1008"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1008"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1008"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1008"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1008"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
