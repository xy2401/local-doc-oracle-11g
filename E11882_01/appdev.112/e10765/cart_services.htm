<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Using Cartridge Services</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1" />
<meta name="dcterms.created" content="2010-03-08T13:16:27Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Data Cartridge Developer's Guide" />
<meta name="dcterms.identifier" content="E10765-02" />
<meta name="dcterms.isVersionOf" content="ADDCI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="aggr_functions.htm" title="Previous" type="text/html" />
<link rel="Next" href="pipe_paral_tbl.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10765.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">21/36</span> <!-- End Header --><a id="CHDJCGBG"></a><a id="ADDCI2130"></a><a id="i1004860"></a>
<h1 class="chapter"><span class="secnum">12</span> Using Cartridge Services</h1>
<p>This chapter describes how to use cartridge services.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CHDDABAJ">Introduction to Cartridge Services</a></p>
</li>
<li>
<p><a href="#i1004630">Cartridge Handle</a></p>
</li>
<li>
<p><a href="#i1004665">Memory Services</a></p>
</li>
<li>
<p><a href="#i1004665">Memory Services</a></p>
</li>
<li>
<p><a href="#CHDIGCEB">Maintaining Context</a></p>
</li>
<li>
<p><a href="#i1004695">Globalization Support</a></p>
</li>
<li>
<p><a href="#i1004714">Parameter Manager Interface</a></p>
</li>
<li>
<p><a href="#CHDIJGCJ">File I/O</a></p>
</li>
<li>
<p><a href="#i1004795">String Formatting</a></p>
</li>
</ul>
<a id="CHDDABAJ"></a><a id="ADDCI4646"></a>
<div class="sect1">
<h2 class="sect1">Introduction to Cartridge Services</h2>
<p>This chapter describes a set of services that help you create data cartridges in the Oracle Extensibility framework.</p>
<p>Using Oracle Cartridge Services offers you the following advantages:</p>
<p class="subhead2"><a id="ADDCI4647"></a><a id="sthref519"></a>Portability</p>
<p>Oracle Cartridge Services offers you the flexibility to work across different machine architectures</p>
<p class="subhead2"><a id="ADDCI4648"></a><a id="sthref520"></a>Flexibility Within Oracle Environments</p>
<p>Another type of flexibility is offered to you in terms of the fact that all cartridge services work with your Oracle Database, irrespective of the configuration of operations that has been purchased by your client.</p>
<p class="subhead2"><a id="ADDCI4649"></a><a id="sthref521"></a>Language Independence</p>
<p>The use of the Globalization Support services lets you internationalize your cartridge. Language independence means that you can have different instances of your cartridge operating in different language environments.</p>
<p class="subhead2"><a id="ADDCI4650"></a><a id="sthref522"></a>Tight Integration with the Server</p>
<p>Various cartridge services have been designed to facilitate access with Oracle ORDBMS. This offers far superior performance to client -side programs attempting to perform the same operations.</p>
<p class="subhead2"><a id="ADDCI4651"></a><a id="sthref523"></a>Guaranteed Compatibility</p>
<p>Oracle Database is a rapidly evolving technology and it is likely that your clients might be operating with different releases of Oracle. The cartridge services operate with all versions of Oracle Database.</p>
<p class="subhead2"><a id="ADDCI4652"></a><a id="sthref524"></a>Integration of Different Cartridges</p>
<p>The integration of cartridge services lets you produce a uniform integration of different data cartridges.</p>
<p>The following sections provide a brief introduction to the set of services that you can use as part of your data cartridge. The APIs that describe these interfaces are in <a href="serv_c_java_ref.htm#CIHIFJEJ">Chapter 18, "Cartridge Services Using C, C++ and Java"</a></p>
</div>
<!-- class="sect1" -->
<a id="i1004630"></a><a id="ADDCI4653"></a>
<div class="sect1">
<h2 class="sect1">Cartridge Handle</h2>
<p>Cartridge services require various handles that are encapsulated inside two types of OCI handles:</p>
<p class="subhead2"><a id="ADDCI4654"></a><a id="sthref525"></a>Environment Handle</p>
<p>The environment handle is either <code>OCIEnv</code> or <code>OCI_HTYPE_ENV</code>. Various cartridge services are required at the process level when no session is available. The <code>OCIInitialize</code>() should use the <code>OCI_OBJECT</code> option for cartridge service.</p>
<p class="subhead2"><a id="ADDCI4655"></a><a id="sthref526"></a>User Session handle</p>
<p>The user session handle is either <code>OCISession</code> or <code>OCI_HTYPE_SESSION</code>. In a callout, the services can be used when the handle is allocated even without opening a connection back to the database.</p>
<p>All cartridge service calls take a <code>void</code> <code>*</code> OCI handle as one of the arguments that may be either an environment or a session handle. While most service calls are allowed with either of the handles, certain calls may not be valid with one of the handles. For example, it may be an error to allocate <code>OCI_DURATION_SESSION</code> with an environment handle. An error is typically returned in an error handle.</p>
<a id="ADDCI4656"></a>
<div class="sect2"><a id="sthref527"></a>
<h3 class="sect2">Client Side Usage</h3>
<p>Most of the cartridge service can also be used on the client side code. Refer to individual services for restrictions. To use cartridge service on the client side, the OCI environment has to be initialized with <code>OCI_OBJECT</code> option. This is automatically effected in a cartridge.</p>
</div>
<!-- class="sect2" -->
<a id="ADDCI4657"></a>
<div class="sect2"><a id="sthref528"></a>
<h3 class="sect2">Cartridge Side Usage</h3>
<p>Most of the services listed in this document can be used in developing a database cartridge, but please refer to documentation of each individual service for restrictions. New service calls are available to obtain the session handle in a callout. The session handle is available without opening a connection back to the server.</p>
</div>
<!-- class="sect2" -->
<a id="ADDCI4658"></a>
<div class="sect2"><a id="sthref529"></a>
<h3 class="sect2">Service Calls</h3>
<p>Before using any service, the OCI environment handle must be initialized. All the services take an OCI environment (or user_session) handle as an argument. Errors are returned in an OCI error handle. The sub handles required for various service calls are not allocated along with the OCI environment handle. Services which must initialize an environment provide methods to initialize it. <a href="#CHDJIIJH">Example 12-1</a> demonstrates the initialization of these handles.</p>
<div class="example">
<p class="titleinexample"><a id="CHDJIIJH"></a><a id="ADDCI4659"></a>Example 12-1 Initializing OCI Handles</p>
<pre>
{
  OCIEnv *envhp;
  OCIError *errhp;
  (void) OCIInitialize(OCI_OBJECT, (dvoid *)0, 0, 0, 0);
  (void) OCIEnvInit(&amp;envhp, OCI_OBJECT, (size_t)0, (dvoid **)0);
  (void) OCIHandleAlloc((dvoid *)envhp, (dvoid **)errhp,   OCI_HTYPE_ERROR, 
      (size_t)0, (dvoid **)0);
  /* ... use the handles ... */
  (void) OCIHandleFree((dvoid *)errhp, OCI_HTYPE_ERROR);
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="ADDCI4660"></a>
<div class="sect2"><a id="sthref530"></a>
<h3 class="sect2">Error Handling</h3>
<p>Routines that return errors generally return <code>OCI_SUCCESS</code> or <code>OCI_ERROR</code>. Some routines may return <code>OCI_SUCCESS_WITH_INFO</code>, <code>OCI_INVALID_HANDLE</code>, or <code>OCI_NO_DATA</code>. If <code>OCI_ERROR</code> or <code>OCI_SUCCESS_WITH_INFO</code> is returned, then an error code, an error facility, and possibly an error message can be retrieved by calling <code>OCIErrorGet</code>, as demonstrated in <a href="#CHDDFJII">Example 12-2</a>.</p>
<div class="example">
<p class="titleinexample"><a id="CHDDFJII"></a><a id="ADDCI4661"></a>Example 12-2 Retrieving Error Information Using OCIErrorGet()</p>
<pre>
{
  OCIError *errhp;
  ub4 errcode;
  text buffer[512];
  (void) OCIErrorGet((dvoid *)errhp, 1, (text *)NULL, &amp;errcode, buffer,
      sizeof(buffer), OCI_HTYPE_ERROR);
}
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1004665"></a><a id="ADDCI4662"></a>
<div class="sect1">
<h2 class="sect1">Memory Services</h2>
<p>The memory service allows the client to allocate or free memory chunks. Each memory chunk is associated with a duration. This allows clients to automatically free all memory associated with a duration (at the end of the duration). The duration determines the heap that is used to allocate the memory. The memory service predefines three kinds of durations: call (<code>OCI_DURATION_CALL</code>), statement (<code>OCI_DURATION_STATEMENT</code>) and session (<code>OCI_DURATION_SESSION</code>).</p>
<p>The client can also create a user duration. The client has to explicitly start and terminate a user duration. Thus, the client can control the length of a user duration. Like the predefined durations, a user duration can be used to specify the allocation duration (for example, memory chunks are freed at the end of the user duration).</p>
<p>Each user duration has a parent duration. A user duration terminates implicitly when its parent duration terminates. A parent duration can be call, statement, transaction, session or any other user duration. Memory allocated in the user duration comes from the heap of its parent duration.</p>
<p>The Oracle RDBMS memory manager supports a variety of memory models. Currently callouts support memory for the duration of that callout. With the extension of row sources to support external indexing, there is a need for memory of durations greater than a callout.</p>
<p>The following functionality is supported:</p>
<ul>
<li>
<p>Allocate (permanent and friable) memory of following durations</p>
<ul>
<li>
<p>call to agent process</p>
</li>
<li>
<p>statement</p>
</li>
<li>
<p>session</p>
</li>
<li>
<p>shared attributes (metadata) for cartridges</p>
</li>
</ul>
</li>
<li>
<p>Ability to re-allocate memory</p>
</li>
<li>
<p>Ability to create a subduration memory, a sub heap which gets freed up when the parent heap gets freed up. Memory for this sub heap can be allocated and freed.</p>
</li>
<li>
<p>Ability to specify zeroed memory</p>
</li>
<li>
<p>Ability to allocate large contiguous memory</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDIGCEB"></a><a id="ADDCI4663"></a>
<div class="sect1">
<h2 class="sect1">Maintaining Context</h2>
<p>Context management allows the clients to store values across calls. Cartridge services provide a mechanism for saving and restoring context.</p>
<p>Most operating systems that support threads have the concept of thread context. Threads can store thread specific data in this context (or state) and retrieve it at any point. This provides a notion of thread global variable. Typically a pointer which points to the root of a structure is stored in the context.</p>
<p>When the row source mechanism is externalized, you must have a mechanism to maintain state between multiple calls to the same row source.</p>
<p>You must maintain session, statement and process states. Session state includes information about multiple statements that are open, message files based on sessions' Globalization Support settings, and so on. Process state includes shared metadata (including systemwide metadata), message files, and so on. Depending on whether the cartridge application is truly multi threaded, information sharing can be at a process level or system level.</p>
<p>Since a user can be using multiple cartridges at any time, the state must be maintained for each cartridge. This is done by requiring the user to supply a key for each duration.</p>
<a id="ADDCI4664"></a>
<div class="sect2"><a id="sthref531"></a>
<h3 class="sect2">Durations</h3>
<p>There are various predefined types of durations supported on memory and context management calls. An additional parameter in all these calls is a context.</p>
<ul>
<li>
<p><code>OCI_DURATION_CALL</code>. The duration of this operation is that of a callout.</p>
</li>
<li>
<p><code>OCI_DURATION_STATEMENT</code>. The duration of this operation is the external row source.</p>
</li>
<li>
<p><code>OCI_DURATION_SESSION</code>. The duration of this operation is the user session.</p>
</li>
<li>
<p><code>OCI_DURATION_PROCESS</code>. The duration of this is agent process.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1004695"></a><a id="ADDCI4665"></a>
<div class="sect1">
<h2 class="sect1">Globalization Support</h2>
<p>To support multilingual application, Globalization Support functionality is required for cartridges and callouts. <code>NLSRTL</code> is a multiplatform, multilingual library current used in RDBMS and provides consistent Globalization Support behavior to all Oracle products.</p>
<p>Globalization Support basic services provide the following language and cultural sensitive functionality:</p>
<ul>
<li>
<p>Locale information retrieval.</p>
</li>
<li>
<p>String manipulation in the format of multibyte and wide-char.</p>
</li>
<li>
<p>Character set conversion including Unicode support.</p>
</li>
<li>
<p>Messaging mechanism.</p>
</li>
</ul>
<a id="ADDCI4666"></a>
<div class="sect2"><a id="sthref532"></a>
<h3 class="sect2">Globalization Support Language Information Retrieval</h3>
<p>An Oracle locale consists of language, territory and character set definitions. The locale determines conventions such as native day and month names; and date, time, number, and currency formats. An internationalized application obeys a user's locale setting and cultural convention. For example, in a German locale setting, users expect to see day and month names in German spelling. The following interface provides a simple way to retrieve local sensitive information.</p>
</div>
<!-- class="sect2" -->
<a id="ADDCI4667"></a>
<div class="sect2"><a id="sthref533"></a>
<h3 class="sect2">String Manipulation</h3>
<p>Two types of data structure are supported for string manipulation: multibyte string and wide char string. Multibyte string is in native Oracle character set encoding, and functions operated on it take the string as a whole unit. Wide char string function provides more flexibility in string manipulation and supports character-based and string-based operations.</p>
<p>The wide char data type we use here is Oracle-specific and not to be confused with the <code>wchar_t</code> defined by the ANSI/ISO C standard. The Oracle wide char is always 4 bytes in all the platforms, while <code>wchar_t</code> is dependent on the implementation and platform. The idea of Oracle wide char is to normalize multibyte characters to have a fixed-width for easy processing. Round-trip conversion between Oracle wide char and native character set is guaranteed.</p>
<p>The string manipulation can be classified into the following categories:</p>
<ul>
<li>
<p>Conversion of string between multibyte and wide char.</p>
</li>
<li>
<p>Character classifications.</p>
</li>
<li>
<p>Case conversion.</p>
</li>
<li>
<p>Display length calculation.</p>
</li>
<li>
<p>General string manipulation, such as compare, concatenation and searching.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1004714"></a><a id="ADDCI4668"></a>
<div class="sect1">
<h2 class="sect1">Parameter Manager Interface</h2>
<p>The parameter manager provides a set of routines to process parameters from a file or a string. Routines are provided to process the input and to obtain key and value pairs. These key and value pairs are stored in memory and routines are provided which can access the values of the stored parameters.</p>
<p>The input processing routines match the contents of the file or the string against an existing grammar and compare the key names found in the input against the list of known keys that the user has registered. The behavior of the input processing routines can be configured depending on the bits that are set in the flag argument.</p>
<p>The parameters can be retrieved either one at a time, or all at the same time by calling a function that iterates over the stored parameters.</p>
<a id="ADDCI4669"></a>
<div class="sect2"><a id="sthref534"></a>
<h3 class="sect2">Input Processing</h3>
<p>Parameters consist of a key, or parameter name, type, and a value and must be specified by the format <code><span class="codeinlineitalic">key</span></code> <code>=</code> <code><span class="codeinlineitalic">value</span></code>.</p>
<p>Parameters can optionally accept lists of values which may be surrounded by parentheses, either as <code><span class="codeinlineitalic">key</span></code> <code>= (</code><code><span class="codeinlineitalic">value1</span></code><code>, ...,</code> <code><span class="codeinlineitalic">valuen</span></code>) or as <code><span class="codeinlineitalic">key</span></code> <code>=</code> <code><span class="codeinlineitalic">value1</span></code><code>, ...,</code> <code><span class="codeinlineitalic">valuen</span></code>.</p>
<p>A value can be a string, integer, <code>OCINumber</code>, or Boolean. A boolean value starting with '<code>y</code>' or '<code>t</code>' maps to <code>TRUE</code> and a boolean value starting with '<code>n</code>' or '<code>f</code>' maps to <code>FALSE</code>. The matching for boolean values is case insensitive.</p>
<p>The parameter manager views certain characters as special characters which are not parsed literally. The special characters and their meanings are indicated in <a href="#CHDEFAIA">Table 12-1</a>.</p>
<div class="tblformal">
<p class="titleintable"><a id="ADDCI4670"></a><a id="sthref535"></a><a id="CHDEFAIA"></a>Table 12-1 Special Characters</p>
<table class="cellalignment1246" title="Special Characters" summary="Lists characters that are special to the parameter manager along with the meaning of each" dir="ltr">
<thead>
<tr class="cellalignment1237">
<th class="cellalignment1247" id="r1c1-t2">Character</th>
<th class="cellalignment1247" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r2c1-t2" headers="r1c1-t2">
<p><code>#</code></p>
</td>
<td class="cellalignment1243" headers="r2c1-t2 r1c2-t2">
<p>Comment (only for files)</p>
</td>
</tr>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r3c1-t2" headers="r1c1-t2">
<p><code>(</code></p>
</td>
<td class="cellalignment1243" headers="r3c1-t2 r1c2-t2">
<p>Start a list of values</p>
</td>
</tr>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r4c1-t2" headers="r1c1-t2">
<p><code>)</code></p>
</td>
<td class="cellalignment1243" headers="r4c1-t2 r1c2-t2">
<p>End a list of values</p>
</td>
</tr>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r5c1-t2" headers="r1c1-t2">
<p><code>"</code></p>
</td>
<td class="cellalignment1243" headers="r5c1-t2 r1c2-t2">
<p>Start or end of quoted string</p>
</td>
</tr>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r6c1-t2" headers="r1c1-t2">
<p><code>'</code></p>
</td>
<td class="cellalignment1243" headers="r6c1-t2 r1c2-t2">
<p>Start or end of quoted string</p>
</td>
</tr>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r7c1-t2" headers="r1c1-t2">
<p><code>=</code></p>
</td>
<td class="cellalignment1243" headers="r7c1-t2 r1c2-t2">
<p>Separator of keyword and value</p>
</td>
</tr>
<tr class="cellalignment1237">
<td class="cellalignment1243" id="r8c1-t2" headers="r1c1-t2">
<p><code>\</code></p>
</td>
<td class="cellalignment1243" headers="r8c1-t2 r1c2-t2">
<p>Escape character</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>If a special character must be treated literally, then it must either be prefaced by the escape character or the entire string must be surrounded by single or double quotes.</p>
<p>A key string can contain alphanumeric characters only. A value can contain any characters. However, the value cannot contain special characters unless they are quoted or escaped.</p>
</div>
<!-- class="sect2" -->
<a id="ADDCI4671"></a>
<div class="sect2"><a id="sthref536"></a>
<h3 class="sect2">Parameter Manager Behavior Flag</h3>
<p>The routines to process a file or a string use a behavior flag that alters default characteristics of the parameter manager. These bits can be set in the flag:</p>
<ul>
<li>
<p><code>OCI_EXTRACT_CASE_SENSITIVE</code>. All comparisons are case sensitive. The default is to use case insensitive comparisons.</p>
</li>
<li>
<p><code>OCI_EXTRACT_UNIQUE_ABBREVS</code>. Unique abbreviations are allowed for keys. The default is that unique abbreviations are not allowed.</p>
</li>
<li>
<p><code>OCI_EXTRACT_APPEND_VALUES</code>. If a value or values are stored for a particular key, then any new values for this key should be appended. The default is to return an error.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="ADDCI4672"></a>
<div class="sect2"><a id="sthref537"></a>
<h3 class="sect2">Key Registration</h3>
<p>Before invoking the input processing routines (<code>OCIExtractFromFile()</code> or <code>OCIExtractFromString()</code>, all of the keys must be registered by calling <code>OCIExtractSetNumKeys()</code> followed by <code>OCIExtractSetKey()</code>, which requires:</p>
<ul>
<li>
<p>Name of the key</p>
</li>
<li>
<p>Type of the key (<code>integer</code>, <code>string</code>, <code>boolean</code>, <code>OCINumber</code>)</p>
</li>
<li>
<p><code>OCI_EXTRACT_MULTIPLE</code> is set for the flag value if multiple values are allowed (default: only one value allowed)</p>
</li>
<li>
<p>Default value to be used for the key (may be <code>NULL</code>)</p>
</li>
<li>
<p>Range of allowable integer values specified by starting and ending values, inclusive (may be <code>NULL</code>)</p>
</li>
<li>
<p>List of allowable string values (may be <code>NULL</code>)</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="ADDCI4673"></a>
<div class="sect2"><a id="sthref538"></a>
<h3 class="sect2">Parameter Storage and Retrieval</h3>
<p>The results of processing the input into a set of keys and values are stored. The validity of the parameters is checked before storing the parameters in memory. The values are checked to see if they are of the proper type. In addition, if you wish, the values can be checked to see if they fall within a certain range of integer values or are members of a list of enumerated string values. Also, if you do not specify that a key can accept multiple values, then an error is returned if a key is specified more than one time in a particular input source. Also, an error is returned if the key is unknown. Values of keys can be retrieved when processing is completed, using specific routines for retrieving string, integer, <code>OCINumber</code>, or boolean values.</p>
<p>It is possible to retrieve all parameters at the same timr. The function <code>OCIExtractToList()</code> must first be called to generate a list of parameters that is created from the parameter structures stored in memory. <code>OCIExtractToList()</code> returns the number of unique keys stored in memory, and then <code>OCIExtractFromList()</code> can be called to return the list of values associated with each key.</p>
</div>
<!-- class="sect2" -->
<a id="ADDCI4674"></a>
<div class="sect2"><a id="sthref539"></a>
<h3 class="sect2">Parameter Manager Context</h3>
<p>The parameter manager maintains its own context within the <code>OCI</code> environment handle. This context stores all the processed parameter information and some internal information. It must be initialized with a call to <code>OCIExtractInit()</code> and cleaned up with a call to <code>OCIExtractTerm()</code>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDIJGCJ"></a><a id="ADDCI4675"></a>
<div class="sect1">
<h2 class="sect1">File I/O</h2>
<p>The OCI file I/O package is designed to make it easier for you to write portable code that interacts with the file system by providing a consistent view of file I/O across multiple platforms.</p>
<p>You must be aware of two issues when using this package in a data cartridge environment. The first issue is that this package does not provide any security when opening files for writing or when creating new files in a directory other than the security provided by the operating system protections on the file and directory. The second issue is that this package does not support the use of file descriptors across calls in a multithreaded server environment.</p>
</div>
<!-- class="sect1" -->
<a id="i1004795"></a><a id="ADDCI4676"></a>
<div class="sect1">
<h2 class="sect1">String Formatting</h2>
<p>The OCI string formatting package facilitates writing portable code that handles string manipulation by means of the <code>OCIFormatString()</code> routine. This is an improved and portable version of <code>sprintf</code> that incorporates additional functionality and error checking that the standard <code>sprintf</code> does not. This additional functionality includes:</p>
<ul>
<li>
<p>Arbitrary argument selection.</p>
</li>
<li>
<p>Variable width and precision specification.</p>
</li>
<li>
<p>Length checking of the buffer.</p>
</li>
<li>
<p>Oracle Globalization Support for internationalization.</p>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1236">
<tr>
<td class="cellalignment1243">
<table class="cellalignment1241">
<tr>
<td class="cellalignment1240"><a href="aggr_functions.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1240"><a href="pipe_paral_tbl.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1245">
<table class="cellalignment1239">
<tr>
<td class="cellalignment1240"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1240"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1240"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1240"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1240"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1240"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
