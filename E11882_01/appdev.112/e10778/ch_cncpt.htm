<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Multimedia DICOM Concepts</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 009" />
<meta name="dcterms.created" content="2010-08-02T8:12:20Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Multimedia DICOM Developer's Guide" />
<meta name="dcterms.identifier" content="E10778-03" />
<meta name="dcterms.isVersionOf" content="IMDCM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="dm_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="ch_intro.htm" title="Previous" type="text/html" />
<link rel="Next" href="ch_gen_over.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10778.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/31</span> <!-- End Header --><a id="BCEDHGAF"></a><a id="IMDCM1500"></a>
<h1 class="chapter"><span class="secnum">2</span> Oracle Multimedia DICOM Concepts</h1>
<p>This chapter describes Oracle Multimedia DICOM at a conceptual level.</p>
<p>This chapter includes these sections:</p>
<ul>
<li>
<p><a href="#BCEGCEBF">Oracle Multimedia DICOM Architecture</a></p>
</li>
<li>
<p><a href="#BCEFHCDF">Oracle Multimedia DICOM Storage</a></p>
</li>
<li>
<p><a href="#BCEDIBFD">Model-Driven Design</a></p>
</li>
<li>
<p><a href="#BCEECDHF">DICOM Data Model Repository</a></p>
</li>
<li>
<p><a href="#BCEDAJAH">Extraction of Metadata from DICOM Content</a></p>
</li>
<li>
<p><a href="#BCECDBHJ">Validation of DICOM Content</a></p>
</li>
<li>
<p><a href="#BCEDEGDF">Image Conversion and Creation of New DICOM Content</a></p>
</li>
<li>
<p><a href="#BCECBGBF">Making DICOM Content Anonymous</a></p>
</li>
<li>
<p><a href="#BABDHBGE">Extraction of DICOM Metadata for Partitioning</a></p>
</li>
</ul>
<a id="BCEGCEBF"></a><a id="IMDCM1510"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.1</span> Oracle Multimedia DICOM Architecture</h2>
<p>Oracle Multimedia DICOM enables Oracle Database to store, manage, and retrieve DICOM content such as single-frame and multiframe images, waveforms, slices of 3-D volumes, video segments, and structured reports<a id="sthref33"></a>.</p>
<p>The Oracle Multimedia DICOM architecture defines the framework (see <a href="#BCEJCHIE">Figure 2-1</a>) through which DICOM content is supported in the database. This DICOM content can then be securely shared across multiple applications written with popular languages and tools, easily managed and administered by relational database management and administration technologies, and offered on a scalable database that supports thousands of users.</p>
<p><a href="#BCEJCHIE">Figure 2-1</a> shows the Oracle Multimedia DICOM architecture from a two-tier perspective:</p>
<ol>
<li>
<p>Database tier (Oracle Database)</p>
</li>
<li>
<p>Client tier (Thick Clients)</p>
</li>
</ol>
<p>In the database tier, using Oracle Multimedia DICOM, Oracle Database holds DICOM content in tables. As illustrated, DICOM content stored in a column of a table can include DICOM data such as X-rays, ultrasound images, and magnetic resonance images. In the table, a separate column stores a JPEG thumbnail image of the DICOM image. Another column stores the XML metadata documents associated with each image. Within a Java Virtual Machine (JVM), there is a server-side DICOM data model repository and a <a href="dm_glossary.htm#BGBFDBJB"><span class="xrefglossterm">DICOM parser</span></a><a id="sthref34"></a>, a <a href="dm_glossary.htm#BGBBIJHC"><span class="xrefglossterm">DICOM XML encoder</span></a><a id="sthref35"></a>, a <a href="dm_glossary.htm#BGBFAICE"><span class="xrefglossterm">DICOM conformance validator</span></a><a id="sthref36"></a>, and an <a href="dm_glossary.htm#BGBBCECD"><span class="xrefglossterm">image processor</span></a><a id="sthref37"></a>. The DICOM parser extracts metadata from DICOM content. The DICOM XML encoder maps the extracted DICOM attributes into an XML document, in accordance with the mapping rules defined in the <a href="dm_glossary.htm#BGBJFFCA"><span class="xrefglossterm">data model repository</span></a><a id="sthref38"></a>. The DICOM conformance validator checks the syntactical and semantic consistency of DICOM content in accordance with the constraint rules specified in the data model repository. The image processor includes Java Advanced Imaging (JAI), and provides image processing for operations such as producing thumbnail-size images and converting between DICOM and other supported image formats. Using Oracle Multimedia DICOM methods enables import and export operations between the database and external file storage systems. The double-sided arrow connecting Oracle Database with External File Storage in <a href="#BCEJCHIE">Figure 2-1</a> shows this type of data communication.Through JDBC calls, thick clients can access the content stored in an Oracle database and perform procedures such as image processing outside of the database. Other means of interacting with Oracle Database, such as the OCI call interface, can also be used to access DICOM content stored in an Oracle database. These types of data access can also be used to integrate Oracle Database with third-party media processors.</p>
<p>In the client tier, the ability to access ORDDicom objects in the database is supported through Oracle Multimedia DICOM Java API. Oracle Multimedia DICOM Java API supplies direct access to ORDDicom objects from Java applications.</p>
<div class="figure">
<p class="titleinfigure"><a id="BCEJCHIE"></a><a id="IMDCM13322"></a>Figure 2-1 Oracle Multimedia DICOM Architecture</p>
<img width="477" height="549" src="img/dicom001.gif" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" /><br />
<a id="sthref39" href="img_text/dicom001.htm">Description of "Figure 2-1 Oracle Multimedia DICOM Architecture"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Oracle Multimedia User's Guide</span> for a view and description of the complete architecture for Oracle Multimedia</p>
</li>
<li>
<p><a class="olink IMDJC" href="../e10781/toc.htm"><span class="italic">Oracle Multimedia DICOM Java API Reference</span></a> for information about using Oracle Multimedia DICOM with the Java programming language</p>
</li>
<li>
<p><code><a href="http://java.sun.com/">http://java.sun.com/</a></code> for more information about Java Advanced Imaging (JAI)</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BCEFHCDF"></a><a id="IMDCM1520"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.2</span> Oracle Multimedia DICOM Storage</h2>
<p>When using the object interface, you must create an ORDDicom object in a table before you can perform Oracle Multimedia DICOM operations on DICOM content. Oracle Multimedia defines the ORDDicom object type, which is similar to a Java or C++ class, to contain DICOM content.</p>
<p><a href="#BCEIABIE">Figure 2-2</a> shows an ORDDicom object <a id="sthref40"></a>at a very high level. Items in <a href="#BCEIABIE">Figure 2-2</a> are numbered to help identify the items in this description. An instance of an ORDDicom object type (Item 1) consists of methods and attributes. Methods are functions or procedures that can be performed on the ORDDicom object, such as makeAnonymous( ) and setProperties( ). The attributes include the following:</p>
<ul>
<li>
<p>Extracted DICOM attributes represented as an XML metadata document (Item 2)</p>
</li>
<li>
<p>The DICOM content (Item 3), which is the original DICOM content in unmodified form stored within the database, under transaction control as a BLOB (recommended), or stored in an operating system-specific file in a local file system with pointers stored in the database</p>
</li>
<li>
<p>Certain frequently accessed general attributes (Item 4), such as SOP Class UID, which are extracted and stored for ease of access and indexing</p>
</li>
<li>
<p>Miscellaneous attributes (Item 5) that are meant for Oracle internal use</p>
</li>
</ul>
<div class="figure">
<p class="titleinfigure"><a id="BCEIABIE"></a><a id="IMDCM13323"></a>Figure 2-2 ORDDicom Object</p>
<img width="179" height="236" src="img/dicom007.gif" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" /><br />
<a id="sthref41" href="img_text/dicom007.htm">Description of "Figure 2-2 ORDDicom Object"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Similar to the NUMBER or BLOB data types, you can use the ORDDicom data type as the data type of a table column.</p>
<p><a href="#BCEEACJG">Figure 2-3</a> shows the structure of a simple table in a medical database that contains an ORDDicom object<a id="sthref42"></a>. Items in <a href="#BCEEACJG">Figure 2-3</a> are numbered to help identify the items in this description. Item 1 represents the medical image database. Item 2 represents a simple medical image table managed by the database. This table contains two columns: ID (Item 3) and Image (Item 4). Item 3 represents the identifier for a specified DICOM image in the database. Item 4 represents the DICOM content in the database, which can be stored as an ORDDicom object (Item 5). Thus, the column type for the Image column is ORDDicom.</p>
<div class="figure">
<p class="titleinfigure"><a id="BCEEACJG"></a><a id="IMDCM13324"></a>Figure 2-3 Table in a Medical Image Database</p>
<img width="440" height="141" src="img/dicom008.gif" alt="Description of Figure 2-3 follows" title="Description of Figure 2-3 follows" /><br />
<a id="sthref43" href="img_text/dicom008.htm">Description of "Figure 2-3 Table in a Medical Image Database"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="BCEDIBFD"></a><a id="IMDCM1530"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.3</span> Model-Driven Design</h2>
<p>Oracle Multimedia DICOM is designed with a model-driven software architecture. Thus, the run-time behavior of Oracle Multimedia DICOM is controlled by a domain-specific data model. The DICOM data model<a id="sthref44"></a> is a collection of XML documents that are managed in the data model repository. DICOM administrators can manage and modify the DICOM data model. The XML documents that comprise the data model can be inserted and deleted at run time when multiple user sessions are accessing the data model. Changes to the data model are protected with database transaction semantics, and each user session can refresh to the latest data model when necessary or desired.</p>
<p><a href="#BCEHCCAA">Figure 2-4</a> illustrates the principles of model-driven software architecture using the DICOM metadata extraction feature. The items above the dotted line show the portions of the data model that are related to the metadata extraction feature. The items below the dotted line show the software run-time components of the extract metadata feature that access the data model. A line that connects an item of the data model and an item of the run-time component shows the run-time access to the corresponding item that is managed by the data model repository.</p>
<p>At design time, DICOM administrators can change the DICOM data model. Publishing these changes affects the run-time behavior of the extract metadata feature, and other DICOM operations.</p>
<p><a href="#BCEHCCAA">Figure 2-4</a> shows three components of the data model. Items in <a href="#BCEHCCAA">Figure 2-4</a> are numbered to help identify the items in this description. Item 1 represents the DICOM data dictionary, which provides the definitions for DICOM standard and private attributes. Item 2 represents a mapping document, which describes how an attribute is to be mapped into an XML document. Item 3 represents a sample DICOM XML metadata schema, which defines the structure and data type of an XML document that is used to store DICOM attributes. The lines connecting elements of Item 2 and Item 3 show the mapping between a DICOM attribute stored in DICOM content and an XML element stored in an XML document that conforms to the XML schema.</p>
<p>The process of converting DICOM content (Item 4) into an XML metadata document (Item 8) is shown in the bottom half of <a href="#BCEHCCAA">Figure 2-4</a>. Solid lines connecting items show the flow of data between run-time components. Two of the attributes of the sample DICOM content are shown in Item 5. The first attribute contains the attribute tag <code>(0010,0010)</code>, the data type <code>PN</code>, the length in bytes <code>12</code>, and the value <code>Joe Smith</code>. This attribute is encoded in the DICOM content, although its data type might not be encoded in the DICOM content. The parser (Item 6) can find an attribute definition by looking it up in the DICOM data dictionary (Item 1) using the attribute tag <code>(0010,0010)</code>. The attribute definition determines the interpretation of the DICOM content. The result is passed to an XML encoder (Item 7). Similarly, the XML encoder looks up the data model (Item 2) to find the XML encoding guidelines for the attribute, and produces an XML document accordingly. Finally, an XML schema validator (Item 9) can validate the generated document against the XML metadata schema (Item 3).</p>
<p>In <a href="#BCEHCCAA">Figure 2-4</a>, everything that controls the run-time behavior is part of the data model, which can be configured by a DICOM administrator.</p>
<div class="figure">
<p class="titleinfigure"><a id="BCEHCCAA"></a><a id="IMDCM13325"></a>Figure 2-4 DICOM Model-Based Parsing Details</p>
<img width="666" height="407" src="img/dicom002.gif" alt="Description of Figure 2-4 follows" title="Description of Figure 2-4 follows" /><br />
<a id="sthref45" href="img_text/dicom002.htm">Description of "Figure 2-4 DICOM Model-Based Parsing Details"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="BCEECDHF"></a><a id="IMDCM1540"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.4</span> DICOM Data Model Repository</h2>
<p>A key feature of Oracle Multimedia DICOM is that its run-time behavior is determined by a set of user-configurable documents (a data model). This set of documents is managed collectively in the data model repository. Administrators can update the data model repository to configure Oracle Multimedia DICOM for a particular database instance. With this design, customers can perform tasks such as upgrading Oracle Multimedia DICOM to a new version of the DICOM standard or adding new conformance validation rules at any time, without interfering with a running DICOM archive. Each database has its own set of configuration documents<a id="sthref46"></a>. Each organization or enterprise can customize the installed configuration documents according to its needs.</p>
<p>The following subsections describe these DICOM data model repository concepts:</p>
<ul>
<li>
<p><a href="#CIHIAJJC">Configuration Documents in the Repository</a></p>
</li>
<li>
<p><a href="#CIHCFFBA">Administrator and User Sessions in the Repository</a></p>
</li>
</ul>
<a id="CIHIAJJC"></a><a id="IMDCM13326"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">2.4.1</span> Configuration Documents in the Repository</h3>
<p>The set of configuration documents that comprises the data model repository includes anonymity documents, constraint documents, mapping documents, preference documents, private and standard dictionary documents, stored tag list documents, and UID definition documents. Each <a href="dm_glossary.htm#BGBBGEIG"><span class="xrefglossterm">configuration document</span></a> comes with an XML schema definition. Other documents can be added to the repository as needed.</p>
<p>Oracle ships a set of default configuration documents with each software release. All schemas corresponding to the default documents are registered during installation. All schemas are fixed and must not be modified for a database installation.</p>
<p><a href="#BCEBDCBI">Table 2-1</a> lists the document type, the default XML document name, and the XML schema definition name for each type of document in the data model repository.</p>
<div class="tblformal">
<p class="titleintable"><a id="IMDCM13327"></a><a id="sthref47"></a><a id="BCEBDCBI"></a>Table 2-1 Configuration Documents and Their XML Schemas</p>
<table class="cellalignment1199" title="Configuration Documents and Their XML Schemas" summary="List of configuration documents" dir="ltr">
<thead>
<tr class="cellalignment1190">
<th class="cellalignment1200" id="r1c1-t3">Document Type</th>
<th class="cellalignment1200" id="r1c2-t3">Default XML Document</th>
<th class="cellalignment1200" id="r1c3-t3">XML Schema Definition</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r2c1-t3" headers="r1c1-t3">
<p>Anonymity</p>
</td>
<td class="cellalignment1196" headers="r2c1-t3 r1c2-t3">
<p><code>ordcman.xml</code></p>
</td>
<td class="cellalignment1196" headers="r2c1-t3 r1c3-t3">
<p><code>ordcman.xsd</code> (See <a href="ap_schemas.htm#BABJHBCF">Example B-1</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r3c1-t3" headers="r1c1-t3">
<p>Constraint</p>
</td>
<td class="cellalignment1196" headers="r3c1-t3 r1c2-t3">
<p><code>ordcmct.xml</code></p>
<p><code>ordcmcmd.xml</code></p>
<p><code>ordcmcmc.xml</code></p>
</td>
<td class="cellalignment1196" headers="r3c1-t3 r1c3-t3">
<p><code>ordcmct.xsd</code> (See <a href="ap_schemas.htm#BABGBEJH">Example B-2</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r4c1-t3" headers="r1c1-t3">
<p>Mapping</p>
</td>
<td class="cellalignment1196" headers="r4c1-t3 r1c2-t3">
<p><code>ordcmmp.xml</code></p>
</td>
<td class="cellalignment1196" headers="r4c1-t3 r1c3-t3">
<p><code>ordcmmp.xsd</code> (See <a href="ap_schemas.htm#BABFDCDC">Example B-6</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r5c1-t3" headers="r1c1-t3">
<p>Preference</p>
</td>
<td class="cellalignment1196" headers="r5c1-t3 r1c2-t3">
<p><code>ordcmpf.xml</code></p>
</td>
<td class="cellalignment1196" headers="r5c1-t3 r1c3-t3">
<p><code>ordcmpf.xsd</code> (See <a href="ap_schemas.htm#BCFHABBB">Example B-8</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r6c1-t3" headers="r1c1-t3">
<p>Private Dictionary</p>
</td>
<td class="cellalignment1196" headers="r6c1-t3 r1c2-t3">
<p><code>ordcmpv.xml</code></p>
</td>
<td class="cellalignment1196" headers="r6c1-t3 r1c3-t3">
<p><code>ordcmpv.xsd</code> (See <a href="ap_schemas.htm#BABJIJED">Example B-9</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r7c1-t3" headers="r1c1-t3">
<p>Standard Dictionary</p>
</td>
<td class="cellalignment1196" headers="r7c1-t3 r1c2-t3">
<p><code>ordcmsd.xml</code></p>
</td>
<td class="cellalignment1196" headers="r7c1-t3 r1c3-t3">
<p><code>ordcmsd.xsd</code> (See <a href="ap_schemas.htm#BABEBCCC">Example B-10</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r8c1-t3" headers="r1c1-t3">
<p>Stored Tag List</p>
</td>
<td class="cellalignment1196" headers="r8c1-t3 r1c2-t3">
<p>None</p>
</td>
<td class="cellalignment1196" headers="r8c1-t3 r1c3-t3">
<p><code>ordcmstl.xsd</code> (See <a href="ap_schemas.htm#BCFFCCCC">Example B-11</a>)</p>
</td>
</tr>
<tr class="cellalignment1190">
<td class="cellalignment1196" id="r9c1-t3" headers="r1c1-t3">
<p>UID Definition</p>
</td>
<td class="cellalignment1196" headers="r9c1-t3 r1c2-t3">
<p><code>ordcmui.xml</code></p>
</td>
<td class="cellalignment1196" headers="r9c1-t3 r1c3-t3">
<p><code>ordcmui.xsd</code> (See <a href="ap_schemas.htm#BABIGGCA">Example B-12</a>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>An <a href="dm_glossary.htm#BGBCEBAA"><span class="xrefglossterm"><span class="bold">anonymity document</span></span></a><a id="sthref48"></a><a id="sthref49"></a> is an XML document that specifies the set of attributes to be made anonymous, and defines the actions required to make those attributes anonymous. The default anonymity document, <code>ordcman.xml</code>, lists a subset of the attributes defined in the Basic Application Level Confidentiality Profile in Part 15 of the DICOM standard.</p>
<p>A <a href="dm_glossary.htm#BGBCJFIE"><span class="xrefglossterm">constraint document</span></a><a id="sthref50"></a><a id="sthref51"></a> is an XML document that defines a collection of rules that check the conformance of DICOM content, according to the DICOM standard. The constraint document specifies attribute relationships and semantic constraints that cannot be expressed by the DICOM metadata schema. The default constraint documents, <code>ordcmct.xml</code>, <code>ordcmcmd.xml</code>, and <code>ordcmcmc.xml</code>, show a sample set of validation rules defined in accordance with a subset of Part 3 of the DICOM standard.</p>
<p>A <a href="dm_glossary.htm#BGBEFIDJ"><span class="xrefglossterm">mapping document</span></a><a id="sthref52"></a><a id="sthref53"></a> is an XML document that defines how each attribute maps to a particular element in a DICOM XML metadata document. This document determines the structure of the extracted XML representation of the DICOM metadata. The default mapping document, <code>ordcmmp.xml</code>, defines the mapping from DICOM content to XML, which is represented as a flat list where all XML encoded DICOM attributes are included under the root element <code>&lt;DICOM_OBJECT&gt;</code>.</p>
<p>A <a href="dm_glossary.htm#BGBCJIGE"><span class="xrefglossterm">preference document</span></a><a id="sthref54"></a><a id="sthref55"></a> is an XML document that defines run-time parameters, such as the size limits for DICOM attributes to omit when encoding to XML or whether to validate XML documents used in DICOM functions and procedures. The default preference document is <code>ordcmpf.xml</code>.</p>
<p>A <a href="dm_glossary.htm#BGBGFFAG"><span class="xrefglossterm">private dictionary document</span></a><a id="sthref56"></a><a id="sthref57"></a> is an XML document that enables users to extend the standard dictionary document definitions by adding manufacturer-specific or enterprise-specific attributes to DICOM content. The default private dictionary document, <code>ordcmpv.xml</code>, defines Oracle private attributes.</p>
<p>A <a href="dm_glossary.htm#BGBCCBBF"><span class="xrefglossterm">standard dictionary document</span></a><a id="sthref58"></a><a id="sthref59"></a> is an XML document that lists the standard attributes defined in Part 6 of the DICOM standard, and that can be used to reflect updates to the DICOM standard. The default standard dictionary document is <code>ordcmsd.xml</code>.</p>
<p>A <a href="dm_glossary.htm#BABGCABA"><span class="xrefglossterm">stored tag list document</span></a><a id="sthref60"></a><a id="sthref61"></a> is an optional XML document that specifies the DICOM attributes to be extracted from the embedded DICOM content and stored in the XML metadata attribute of the ORDDicom object when the setProperties( ) method is called. Generally, stored tag list documents contain the attribute tags used in mapping and constraint documents.</p>
<p>A <a href="dm_glossary.htm#BGBDEFAH"><span class="xrefglossterm">UID definition document</span></a><a id="sthref62"></a><a id="sthref63"></a> is an XML document that lists unique identifiers (UIDs) defined by the DICOM standard or a private organization. The UID is based on an ISO object identifier (OID). Rather than defining the DICOM content UIDs, the UID definition document contains a registry of standard UIDs that classify the DICOM content and express standard semantics. The default UID definition document, <code>ordcmui.xml</code>, lists UIDs defined by Part 6 of the DICOM standard.</p>
<p>See <a href="ap_confg_docs.htm#BEIECEEI">Appendix A</a> and <a href="ap_schemas.htm#BABEBCJJ">Appendix B</a>, respectively, for more information about the installed configuration documents and their related XML schema definitions.</p>
</div>
<!-- class="sect2" -->
<a id="CIHCFFBA"></a><a id="IMDCM13328"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">2.4.2</span> Administrator and User Sessions in the Repository</h3>
<p>Administrators can manage configuration documents using the data model repository interface.</p>
<p>The data model repository must be loaded before any Oracle Multimedia DICOM methods, procedures, or functions are invoked. Loading the repository is accomplished through a DICOM package interface, using the setDataModel( ) procedure.</p>
<p><a href="#BCEBHHIB">Figure 2-5</a> uses a Unified Modeling Language (UML) sequence diagram to show the state of the DICOM data model repository in its installed state and in various states after being updated. Also shown are two administrator sessions and two user sessions working with one data model repository. The numbered items in <a href="#BCEBHHIB">Figure 2-5</a> represent various components of, or operations on, the data model repository. The numbered items in the following list correspond to the numbered items in <a href="#BCEBHHIB">Figure 2-5</a>, respectively.</p>
<p class="subhead2"><a id="IMDCM13329"></a>Data Model States:</p>
<p>In Item 10, all the boxes in this column represent the data model repository in the following states:</p>
<ul>
<li>
<p><span class="bold">State 0</span>: the installed version.</p>
</li>
<li>
<p><span class="bold">State 1</span>: the version that includes updates from the <span class="bold">Admin Session 1</span> editing session <span class="bold">XG1</span>.</p>
</li>
<li>
<p><span class="bold">State 2</span>: the version that includes updates from the <span class="bold">Admin Session 1</span> editing session <span class="bold">XG1</span> and the <span class="bold">Admin Session 2</span> editing session <span class="bold">XG2</span>.</p>
</li>
<li>
<p><span class="bold">State 3</span>: the version that includes updates from the <span class="bold">Admin Session 1</span> editing sessions <span class="bold">XG1</span> and <span class="bold">XG3</span> and updates from the <span class="bold">Admin Session 2</span> editing session <span class="bold">XG2</span>.</p>
</li>
</ul>
<p class="subhead2"><a id="IMDCM13330"></a>Administrator Sessions:</p>
<ul>
<li>
<p>Item 1: All boxes in this column represent tasks performed by <span class="bold">Admin Session 1</span>.</p>
</li>
<li>
<p>Item 6: All boxes in this column represent tasks performed by <span class="bold">Admin Session 2</span>.</p>
</li>
<li>
<p>Item 2: <span class="bold">Admin Session 1</span> calls the editDataModel( ) procedure to begin editing session <span class="bold">XG1</span>. This locks the installed version of the data model (<span class="bold">State 0</span>) and prevents other administrators from editing the data model. During this time, users can view only the installed version of the data model (<span class="bold">State 0</span>). <span class="bold">Admin Session 1</span> edits the data model.</p>
</li>
<li>
<p>Item 3: <span class="bold">Admin Session 1</span> completes editing session <span class="bold">XG1</span> and calls the publishDataModel( ) procedure to publish the changes to the data model. The data model is updated to <span class="bold">State 1</span> and the lock is released. Other administrators can now lock the data model for editing. And, other users can now view the updated data model by calling the setDataModel( ) procedure.</p>
</li>
<li>
<p>Item 7: <span class="bold">Admin Session 2</span> calls the editDataModel( ) procedure to begin editing session <span class="bold">XG2</span>. This locks the data model (<span class="bold">State 1</span>) and prevents other administrators from editing the data model. During this time, users can view <span class="bold">State 1</span> of the data model. <span class="bold">Admin Session 2</span> edits the data model.</p>
</li>
<li>
<p>Item 8: <span class="bold">Admin Session 2</span> completes editing session <span class="bold">XG2</span> and calls the publishDataModel( ) procedure to publish the changes to the data model. The data model is updated to <span class="bold">State 2</span> and the lock is released.</p>
</li>
<li>
<p>Item 4: <span class="bold">Admin Session 1</span> calls the editDataModel( ) procedure to begin editing session <span class="bold">XG3</span>. This locks the data model (<span class="bold">State 2</span>) and prevents other administrators from editing the data model. During this time, users can view <span class="bold">State 2</span> of the data model. <span class="bold">Admin Session 1</span> edits the data model.</p>
</li>
<li>
<p>Item 9: <span class="bold">Admin Session 2</span> calls the editDataModel( ) procedure to begin editing session <span class="bold">XG4</span>. Because <span class="bold">Admin Session 1</span> has locked the data model, <span class="bold">Admin Session 2</span> cannot obtain the lock, and the call to the editDataModel( ) procedure fails.</p>
</li>
<li>
<p>Item 5: <span class="bold">Admin Session 1</span> completes editing session <span class="bold">XG3</span> and calls the publishDataModel( ) procedure to publish the changes to the data model. The data model is updated to <span class="bold">State 3</span> and the lock is released.</p>
</li>
</ul>
<p class="subhead2"><a id="IMDCM13331"></a>User Sessions:</p>
<ul>
<li>
<p>Item 11: All boxes in this column represent tasks performed by <span class="bold">User Session 1</span>.</p>
</li>
<li>
<p>Item 15: All boxes in this column represent tasks performed by <span class="bold">User Session 2</span>.</p>
</li>
<li>
<p>Item 12: <span class="bold">User Session 1</span> calls the setDataModel( ) procedure to load the data model. The data model is still at the installed version (<span class="bold">State 0</span>) because <span class="bold">Admin Session 1</span> has not yet published the changes for editing session <span class="bold">XG1</span>.</p>
</li>
<li>
<p>Item 16: <span class="bold">User Session 2</span> calls the setDataModel( ) procedure to load the data model. The data model is at <span class="bold">State 1</span>, which reflects the published changes from editing session <span class="bold">XG1</span>.</p>
</li>
<li>
<p>Item 13: <span class="bold">User Session 1</span> calls the setDataModel( ) procedure again. The data model is now at <span class="bold">State 1</span>, which reflects the published changes from editing session <span class="bold">XG1</span>.</p>
</li>
<li>
<p>Item 17: <span class="bold">User Session 2</span> calls the setDataModel( ) procedure again. The data model is still at <span class="bold">State 1</span> because <span class="bold">Admin Session 2</span> has not yet published the changes for editing session <span class="bold">XG2</span>.</p>
</li>
<li>
<p>Item 14: <span class="bold">User Session 1</span> calls the setDataModel( ) procedure again. The data model is now at <span class="bold">State 2</span>, which reflects the published changes from editing sessions <span class="bold">XG1</span> and <span class="bold">XG2</span>.</p>
</li>
<li>
<p>Item 18: <span class="bold">User Session 2</span> calls the setDataModel( ) procedure again. The data model is now at <span class="bold">State 3</span>, which reflects the published changes from editing sessions <span class="bold">XG1</span>, <span class="bold">XG2</span>, and <span class="bold">XG3</span>.</p>
</li>
</ul>
<div class="figure">
<p class="titleinfigure"><a id="BCEBHHIB"></a><a id="IMDCM13332"></a>Figure 2-5 DICOM Data Model Repository</p>
<img width="659" height="512" src="img/dicom003.gif" alt="Description of Figure 2-5 follows" title="Description of Figure 2-5 follows" /><br />
<a id="sthref64" href="img_text/dicom003.htm">Description of "Figure 2-5 DICOM Data Model Repository"</a><br />
<br /></div>
<!-- class="figure" -->
<p>As shown in <a href="#BCEBHHIB">Figure 2-5</a>, the setDataModel( ) procedure is invoked during user sessions. Applications must call this procedure at the beginning of each database session to load the repository from the database into memory structures. This procedure can also be called whenever the application requires the new data model changes. This procedure is available to users through the DICOM data model utility in the ORD_DICOM package interface.</p>
<p>See <a href="ch_adm_ref.htm#CHDCJFFF">Chapter 12</a> for more information about the data model repository administration interface. See <a href="ch_dtmod_ref.htm#CHEEADBC">Chapter 4</a> for more information about the DICOM data model utility in the ORD_DICOM package interface.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCEDAJAH"></a><a id="IMDCM1550"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.5</span> Extraction of Metadata from DICOM Content</h2>
<p>Extracting metadata from DICOM content involves several operations using an XML metadata schema and a mapping document.</p>
<p>A <a href="dm_glossary.htm#BGBEBCEF"><span class="xrefglossterm">DICOM metadata document</span></a><a id="sthref65"></a> is an XML document that contains the metadata extracted from DICOM content. Optionally, each metadata document can be constrained by an XML schema. Each XML metadata schema has a matching XML mapping document.</p>
<p>The mapping of DICOM content to the DICOM metadata document is defined by a mapping document. The mapping document defines how attributes from the DICOM content are to be mapped into an XML document that conforms to the schema. Like other configuration documents, mapping documents are managed by the DICOM data model repository (see <a href="#BCEECDHF">Section 2.4</a>).</p>
<p>Oracle provides a default XML metadata schema (<code>ordcmmd.xsd</code>) and a matching XML mapping document (<code>ordcmmp.xml</code>). Application designers who create their own metadata schemas must ensure that their schema definition and mapping documents are compatible. They must also ensure that their data type definitions are compatible with the Oracle data type definitions (<code>ordcmmddt.xsd</code>).</p>
<p>The following subsections describe these key extraction and mapping concepts:</p>
<ul>
<li>
<p><a href="#CIHDDDFJ">Overview of the Metadata Extraction and XML Mapping Process</a></p>
</li>
<li>
<p><a href="#CIHGBEEH">Sample XML Documents Used in the Extraction and Mapping Process</a></p>
</li>
</ul>
<a id="CIHDDDFJ"></a><a id="IMDCM13801"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">2.5.1</span> Overview of the Metadata Extraction and XML Mapping Process</h3>
<p><a href="#CIHEBGFD">Figure 2-6</a> shows the components involved in the metadata extraction and XML mapping process. Each numbered item in <a href="#CIHEBGFD">Figure 2-6</a> represents a component in this process.</p>
<div class="figure">
<p class="titleinfigure"><a id="CIHEBGFD"></a><a id="IMDCM13802"></a>Figure 2-6 DICOM Metadata Extraction and XML Mapping</p>
<img width="698" height="566" src="img/dicom004.gif" alt="Description of Figure 2-6 follows" title="Description of Figure 2-6 follows" /><br />
<a id="sthref66" href="img_text/dicom004.htm">Description of "Figure 2-6 DICOM Metadata Extraction and XML Mapping"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The input is DICOM content (Item 1) in binary format, which can be stored in an ORDDicom object, or directly in a BLOB or a BFILE. The output is an XML metadata document (Items 7 and 8). The layout of the metadata document is specified by the mapping document (Item 3). Metadata extraction uses a mapping option parameter that specifies which group of attributes to include in the output metadata document. The solid lines connecting items (Items 4, 5, and 6) show the flow of data from the DICOM content to the XML metadata document. Item 3 can also be interpreted as a processing engine that performs metadata extraction according to the specifications of the mapping document.</p>
<p>The DICOM content (Item 1) encodes a DICOM data element (Item 2) in binary code. At run time, the parser reads the binary stream of DICOM content, and builds a representation of the DICOM data element (Item 2) in memory. To map the in-memory representation of each DICOM attribute into an XML element, the XML encoder looks up the definition of the attribute in the mapping document (Item 3) that is stored in the data model repository.</p>
<p>For example, the first entry of this mapping document maps the DICOM attribute <code>Patient's Name</code> (<code>0010,0010</code>) to the XML path <code>/DICOM/Patient/Name</code>, where <code>Name</code> is a subelement of the <code>Patient</code> element, and <code>Patient</code> is the child element of the document root element <code>DICOM</code>.</p>
<p>Attributes that are part of a DICOM data element and whose XML paths are explicitly defined in a mapping document are called <a href="dm_glossary.htm#CHDJEJEI"><span class="xrefglossterm">mapped attribute</span></a>s. Attributes that are part of a DICOM data element but whose XML paths are <span class="italic">not</span> explicitly defined in a mapping document are called <a href="dm_glossary.htm#CHDIIIIE"><span class="xrefglossterm">unmapped attribute</span></a>s.</p>
<p>Based on the mapping document, each DICOM metadata document can contain two sections: a mapped section and an optional, unmapped section. In the mapped section (Item 7), attributes are organized according to a predefined hierarchy. Attributes in the mapped section can be addressed with a fixed XPath query. In the unmapped section (Item 8), attributes are sorted by attribute tag and listed by <a href="dm_glossary.htm#BABFHHBE"><span class="xrefglossterm">value representation</span></a>. Attributes in the unmapped section can be addressed by an XPath query of the element tag in the following form:</p>
<p><code>/DICOM/Other/VR_TYPE(tag=='HHHHHHHH')</code></p>
<p>In this query, <code>HHHHHHHH</code> is the hexadecimal attribute tag, and <code>/DICOM/Other</code> is the specified path for the unmapped section. See <a href="ch_dtmod_docs.htm#BGBGGFCJ">Section 10.2.3</a> for information about how to create a your own mapping document.</p>
<p>The mapping option of the extract metadata function specifies which group of attributes to include in the output XML metadata document. The three mapping options are mapped, standard, or all.</p>
<p>If the extract option is <code>mapped</code> (Item 4), then only mapped attributes are included in the XML metadata document. This option is useful when the application using the metadata document has a fixed set of required attributes. The resulting metadata document (Item 7) has a well-defined tree structure.</p>
<p>If the extract option is <code>standard</code> (Item 5), then all mapped attributes and all unmapped attributes that are defined by the DICOM standard are extracted into the XML metadata document. Private attributes whose mappings are not defined are excluded from the output. This option is useful when an application such as a full-text search can use all standard attributes that are included in the DICOM content.</p>
<p>If the extract option is <code>all</code> (Item 6), then all attributes that are included in the DICOM content are extracted and encoded into the XML metadata document. This option provides lossless mapping of DICOM attributes from binary to XML.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Attributes whose binary length exceeds the user-specified limit are not included in the XML metadata document. See <a href="ch_dtmod_docs.htm#BGBBBGBI">Section 10.2.6</a> for more information about specifying these limits within a preference document.</div>
<p>If the mapping option is all or standard, then unmapped attributes of the DICOM data element are stored under the XML element <code>Other</code> (Item 8). The resulting XML document can be stored in a database table, indexed, and queried using keywords or XPath query statements. To define alternative mapping structures and element names for mapped and unmapped sections, see <a href="ch_dtmod_docs.htm#BGBGGFCJ">Section 10.2.3</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGBEEH"></a><a id="IMDCM13803"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">2.5.2</span> Sample XML Documents Used in the Extraction and Mapping Process</h3>
<p>Using an XML mapping document to extract mapped metadata, you can generate an XML metadata document. <a href="#CIHFDGHC">Example 2-1</a> shows a sample XML mapping document<a id="sthref67"></a> (<code>sample_map.xml</code>).</p>
<div class="example">
<p class="titleinexample"><a id="CIHFDGHC"></a><a id="IMDCM13804"></a>Example 2-1 Sample XML Mapping Document</p>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;XML_MAPPING_DOCUMENT xmlns="http://xmlns.oracle.com/ord/dicom/mapping_1_0"
 xmlns:dt="http://xmlns.oracle.com/ord/dicom/datatype_1_0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://xmlns.oracle.com/ord/dicom/mapping_1_0
 http://xmlns.oracle.com/ord/dicom/mapping_1_0"&gt;
  &lt;DOCUMENT_HEADER&gt;
    &lt;dt:DOCUMENT_CHANGE_LOG&gt;
      &lt;dt:DOCUMENT_MODIFIER&gt;Dongbai Guo&lt;/dt:DOCUMENT_MODIFIER&gt;
      &lt;dt:DOCUMENT_MODIFICATION_DATE&gt;2006-01-13&lt;/dt:DOCUMENT_MODIFICATION_DATE&gt;
      &lt;dt:DOCUMENT_VERSION&gt;0.0&lt;/dt:DOCUMENT_VERSION&gt;
      &lt;dt:MODIFICATION_COMMENT&gt;Sample mapping document for metadata schema definition
1&lt;/dt:MODIFICATION_COMMENT&gt;
    &lt;/dt:DOCUMENT_CHANGE_LOG&gt;
  &lt;/DOCUMENT_HEADER&gt;
 
  &lt;NAMESPACE&gt;http://xmlns.oracle.com/ord/dicom/metatest1&lt;/NAMESPACE&gt;
  &lt;ROOT_ELEM_TAG&gt;DICOM_OBJECT&lt;/ROOT_ELEM_TAG&gt;
  &lt;UNMAPPED_ELEM&gt;OTHER_ATTRIBUTES&lt;/UNMAPPED_ELEM&gt;
  &lt;MAPPED_ELEM&gt;KEY_ATTRIBUTES&lt;/MAPPED_ELEM&gt;
 
  &lt;MAPPED_PATH occurs="true" notEmpty="true" writeTag="true" writeDefiner="true" 
    writeName="true" writeRawValue="true"&gt;
    &lt;ATTRIBUTE_TAG&gt;00020002&lt;/ATTRIBUTE_TAG&gt;
    &lt;PATH&gt;MEDIA_STORAGE_SOP_CLASS_UID&lt;/PATH&gt;
  &lt;/MAPPED_PATH&gt;
 
  &lt;MAPPED_PATH occurs="true" notEmpty="true"&gt;
    &lt;ATTRIBUTE_TAG&gt;00020003&lt;/ATTRIBUTE_TAG&gt;
    &lt;PATH&gt;MEDIA_STORAGE_SOP_INSTANCE_UID&lt;/PATH&gt;
  &lt;/MAPPED_PATH&gt;
 
  &lt;MAPPED_PATH writeTag="true" writeDefiner="true" writeName="true" writeRawValue="true"&gt;
    &lt;ATTRIBUTE_TAG&gt;00100010&lt;/ATTRIBUTE_TAG&gt;
    &lt;PATH&gt;PATIENT_NAME&lt;/PATH&gt;
  &lt;/MAPPED_PATH&gt;
 
&lt;/XML_MAPPING_DOCUMENT&gt;
</pre></div>
<!-- class="example" -->
<p>In <a href="#CIHFDGHC">Example 2-1</a>, the DICOM standard attribute SOP_CLASS_UID that has the DICOM attribute tag (<code>0002,0002</code>) maps to the XML metadata element <code>MEDIA_STORAGE_SOP_CLASS_UID</code> at the XML tree location <code>/DICOM_OBJECT/KEY_ATTRIBUTES/</code>. Similarly, the DICOM standard attribute SOP_INSTANCE_UID (<code>0002,0003</code>) maps to the XML metadata element <code>MEDIA_STORAGE_SOP_INSTANCE_UID</code>. The DICOM standard attribute study date (<code>0008,0020</code>) has not been listed by the XML mapping document. Thus, if it exists in the DICOM content, it appears in the unmapped section of the DICOM metadata document under the XML tree location (<code>/DICOM_OBJECT/OTHER_ATTRIBUTES</code>).</p>
<p><a href="#CIHCDICJ">Example 2-2</a> shows a sample XML metadata document<a id="sthref68"></a> that can be generated by extracting mapped metadata using the XML mapping document shown in <a href="#CIHFDGHC">Example 2-1</a>.</p>
<div class="example">
<p class="titleinexample"><a id="CIHCDICJ"></a><a id="IMDCM13805"></a>Example 2-2 Sample XML Metadata Document</p>
<pre>
&lt;?xml version="1.0" encoding="DEC-MCS"?&gt;
&lt;DICOM_OBJECT xmlns="http://xmlns.oracle.com/ord/dicom/metatest1"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://xmlns.oracle.com/ord/dicom/metatest1
 http://xmlns.oracle.com/ord/dicom/metatest1"&gt;
 
  &lt;KEY_ATTRIBUTES&gt;
 
    &lt;MEDIA_STORAGE_SOP_CLASS_UID definer="DICOM" tag="00020002" 
     name="Media Storage SOP Class UID"&gt;1.2.840.10008.5.1.4.1.1.1&lt;/MEDIA_STORAGE_SOP_CLASS_UID&gt;
 
    &lt;MEDIA_STORAGE_SOP_INSTANCE_UID tag="00020003" definer="DICOM" 
     name="media storage SOP instance UID"&gt;1.3.6.1.4.1.5962.1.1.10.1.2.20040119072730.12322
    &lt;/MEDIA_STORAGE_SOP_INSTANCE_UID&gt;
 
    &lt;PATIENT_NAME definer="DICOM" tag="00100010" name="Patient&amp;apos;s Name"&gt;
 
      &lt;NAME type="unibyte"&gt;
 
        &lt;FAMILY&gt;CompressedSamples&lt;/FAMILY&gt;
 
        &lt;GIVEN&gt;RG2&lt;/GIVEN&gt;
 
      &lt;/NAME&gt;
 
      &lt;VALUE&gt;CompressedSamples^RG2&lt;/VALUE&gt;
 
    &lt;/PATIENT_NAME&gt;
 
  &lt;/KEY_ATTRIBUTES&gt;
 
&lt;/DICOM_OBJECT&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCECDBHJ"></a><a id="IMDCM1560"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.6</span> Validation of DICOM Content</h2>
<p>Validating DICOM content involves verifying that the data conforms to a specified set of constraint rules.</p>
<p>There are several advantages of implementing <a href="dm_glossary.htm#BGBCAJFH"><span class="xrefglossterm">conformance validation</span></a><a id="sthref69"></a> in the database instead of in the middle tier or the application tier. First, validating DICOM content can ensure the integrity and consistency of archived DICOM content by enabling a database to accept DICOM content from all sources and to check the integrity of that content. With this feature, the database can act as the centralized data store, connecting a variety of DICOM content sources while enforcing enterprise data constraint rules. Large organizations or government branches can establish their own sets of constraint rules that are more or less restrictive than the rules in the DICOM standard, and then enforce conformance with those constraint rules. In new areas, such as life sciences, where the DICOM standard is still being developed, constraint rules can serve as transitional tools to enforce a conventional representation of the DICOM content, thereby simplifying future transition to the DICOM standard. Finally, database systemwide conformance can greatly simplify enterprise (application) integration and data mining.</p>
<p>DICOM constraint documents define one or more constraint rules to check the conformance of DICOM content according to the DICOM standard or the guidelines for a particular organization or enterprise. <a href="#BCEHJHBH">Example 2-3</a> shows a sample constraint document<a id="sthref70"></a> (<code>sample_ct.xml</code>).</p>
<div class="example">
<p class="titleinexample"><a id="BCEHJHBH"></a><a id="IMDCM13336"></a>Example 2-3 Sample Constraint Document</p>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- Copyright (c) 2007, Oracle. All rights reserved.
  NAME
  sample_ct.xml - Oracle Multimedia DICOM sample constraint document
--&gt;
 
&lt;CONFORMANCE_CONSTRAINT_DEFINITION xmlns="http://xmlns.oracle.com/ord/dicom/constraint_1_0"
 xmlns:dt="http://xmlns.oracle.com/ord/dicom/datatype_1_0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://xmlns.oracle.com/ord/dicom/constraint_1_0
 http://xmlns.oracle.com/ord/dicom/constraint_1_0"&gt;

     &lt;GLOBAL_RULE name="findJoeSmith"&gt;
        &lt;PREDICATE&gt;
            &lt;DESCRIPTION&gt;An example to find an object that has (patientName="Joe Smith" 
              AND patientSex=="M")&lt;/DESCRIPTION&gt;
            &lt;LOGICAL operator="and"&gt;
                &lt;PREDICATE&gt;
                    &lt;RELATIONAL operator="eq"&gt;
                        &lt;ATTRIBUTE_TAG&gt;00100010&lt;/ATTRIBUTE_TAG&gt;
                        &lt;XML_VALUE&gt;
                            &lt;dt:PERSON_NAME&gt;
                                &lt;dt:NAME&gt;
                                    &lt;dt:FAMILY&gt;Smith&lt;/dt:FAMILY&gt;
                                    &lt;dt:GIVEN&gt;Joe&lt;/dt:GIVEN&gt;
                                &lt;/dt:NAME&gt;
                            &lt;/dt:PERSON_NAME&gt;
                        &lt;/XML_VALUE&gt;
                    &lt;/RELATIONAL&gt;
                &lt;/PREDICATE&gt;
                &lt;PREDICATE&gt;
                    &lt;RELATIONAL operator="eq"&gt;
                        &lt;ATTRIBUTE_TAG&gt;00100040&lt;/ATTRIBUTE_TAG&gt;
                        &lt;XML_VALUE&gt;
                            &lt;dt:CODE_STRING&gt;M&lt;/dt:CODE_STRING&gt;
                        &lt;/XML_VALUE&gt;
                    &lt;/RELATIONAL&gt;
                &lt;/PREDICATE&gt;
            &lt;/LOGICAL&gt;
        &lt;/PREDICATE&gt;
        &lt;ACTION action="log" when="true"&gt;Found Joe Smith&lt;/ACTION&gt;
     &lt;/GLOBAL_RULE&gt;
&lt;/CONFORMANCE_CONSTRAINT_DEFINITION&gt;
</pre></div>
<!-- class="example" -->
<p>After a constraint document has been inserted into the repository, users can validate DICOM content against the global constraint rules defined in the constraint document. (Global constraint rules are defined with the &lt;GLOBAL_RULE&gt; tag.) For example, users can check whether the DICOM content conforms to the global constraint rule named <code>findJoeSmith</code>, in <a href="#BCEHJHBH">Example 2-3</a>.</p>
</div>
<!-- class="sect1" -->
<a id="BCEDEGDF"></a><a id="IMDCM1570"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.7</span> Image Conversion and Creation of New DICOM Content</h2>
<p>ORDDicom objects can be processed and converted to other image formats. <a id="sthref71"></a>In addition, new ORDDicom objects can be created from existing ORDDicom objects. <a href="#BCEEFFDB">Figure 2-7</a> shows these operations.</p>
<div class="figure">
<p class="titleinfigure"><a id="BCEEFFDB"></a><a id="IMDCM13337"></a>Figure 2-7 Image Conversion Process</p>
<img width="503" height="300" src="img/dicom006.gif" alt="Description of Figure 2-7 follows" title="Description of Figure 2-7 follows" /><br />
<a id="sthref72" href="img_text/dicom006.htm">Description of "Figure 2-7 Image Conversion Process"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The following text describes <a href="#BCEEFFDB">Figure 2-7</a> and discusses each of the components. The numbered items in the following text correspond to the numbered items in <a href="#BCEEFFDB">Figure 2-7</a>. The lines connecting the items in <a href="#BCEEFFDB">Figure 2-7</a> show the direction for the flow of data.</p>
<p>The image converter (Item 2) can take DICOM content, specifically a DICOM image (Item 1), and processing commands (Item 3), and convert the DICOM content into an image (Item 4) of another format that is supported by Oracle Multimedia (for example: JPEG or GIF formats) for display in a Web browser or an application.</p>
<p>This process can also be reversed. Using an image such as an ORDImage object storing a JPEG file, TIFF file, or other supported image file (Item 4) and a DICOM metadata document (Item 5), the image converter can merge the two items and produce DICOM content that can be used to create a new ORDDicom object (Item 1). Similarly, the image converter (Item 2) can copy and convert the DICOM content (Item 4) and an XML metadata document (Item 5) into a new ORDDicom object (Item 1). Common uses of this type of process can include lossless compression on the converted image to save disk space, translation into a different type of transfer syntax to enable cross-platform image exchanging, or metadata updating.</p>
<p>When processing, the embedded image content can contain one or more frames. Depending on the processing command for frames, the image converter can read the pixel content of one or all the frames in an image. After the embedded DICOM image is written to an ORDImage object or a BLOB in a format such as GIF or JPEG, you can use existing Oracle Multimedia features to display the converted image on the Web with Oracle Multimedia JavaServer Pages (JSP) tag libraries or other tools.</p>
<p>In addition, multiframe DICOM images, such as MRIs, CTs, and Ultrasound videos, can be processed and converted to the Microsoft Video for Windows Audio Video Interleave (AVI) format. See <a href="ch_gen_over.htm#BGBBDBHE">Chapter 3</a> and <a href="ap_img_proc.htm#CIHJIGGI">Appendix D</a> for more information about these and other DICOM processing operations.</p>
</div>
<!-- class="sect1" -->
<a id="BCECBGBF"></a><a id="IMDCM1580"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.8</span> Making DICOM Content Anonymous</h2>
<p>Government regulations, such as the Health Insurance Portability and Accountability Act (HIPAA) in the U. S., mandate the protection of confidential data about patients. Sharing DICOM content with external resources often requires making confidential patient data anonymous. Making DICOM content anonymous in the database avoids exposing confidential patient data outside of the database, simplifying the protection of that information.</p>
<p>The process of making DICOM content anonymous can be customized using the data model repository. Users can create different anonymity documents in XML. Each anonymity document lists a set of attributes to be made anonymous, and the type of actions to be taken to make the attributes anonymous. Supported actions are remove and replace. The remove action is the default action that deletes an attribute or sets it to zero length in the DICOM content and in the ORDDicom object attributes. The replace action replaces an attribute with a string, which can either be empty or contain a user-defined string in the DICOM content and in the ORDDicom object attributes. <a href="#BCEHDJGE">Example 2-4</a> shows a sample anonymity document<a id="sthref73"></a>.</p>
<div class="example">
<p class="titleinexample"><a id="BCEHDJGE"></a><a id="IMDCM13338"></a>Example 2-4 Sample Anonymity Document</p>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- Copyright (c) 2006, 2007, Oracle. All rights reserved.  --&gt;
&lt;ANONYMITY_RULE_DOCUMENT xmlns="http://xmlns.oracle.com/ord/dicom/anonymity_1_0"
 xmlns:dt="http://xmlns.oracle.com/ord/dicom/datatype_1_0"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://xmlns.oracle.com/ord/dicom/anonymity_1_0
 http://xmlns.oracle.com/ord/dicom/anonymity_1_0"&gt;
 &lt;DOCUMENT_HEADER&gt;
  &lt;dt:DOCUMENT_CHANGE_LOG&gt;
   &lt;dt:DOCUMENT_MODIFIER&gt;Dongbai Guo&lt;/dt:DOCUMENT_MODIFIER&gt;
   &lt;dt:DOCUMENT_MODIFICATION_DATE&gt;2006-02-06&lt;/dt:DOCUMENT_MODIFICATION_DATE&gt;
   &lt;dt:DOCUMENT_VERSION&gt;0.1&lt;/dt:DOCUMENT_VERSION&gt;
   &lt;dt:MODIFICATION_COMMENT&gt;Sample anonymity document&lt;/dt:MODIFICATION_COMMENT&gt;
   &lt;dt:BASE_DOCUMENT&gt;Test Document&lt;/dt:BASE_DOCUMENT&gt;
   &lt;dt:BASE_DOCUMENT_RELEASE_DATE&gt;2004-01-01&lt;/dt:BASE_DOCUMENT_RELEASE_DATE&gt;
   &lt;dt:BASE_DOCUMENT_DESCRIPTION&gt;Same as ordcman.xml from label 070321&lt;/dt:BASE_DOCUMENT_DESCRIPTION&gt;
  &lt;/dt:DOCUMENT_CHANGE_LOG&gt;
 &lt;/DOCUMENT_HEADER&gt;
 &lt;PRIVATE_ATTRIBUTES action="remove"&gt;&lt;/PRIVATE_ATTRIBUTES&gt;
 &lt;UNDEFINED_STANDARD_ATTRIBUTES action="remove"&gt;&lt;/UNDEFINED_STANDARD_ATTRIBUTES&gt;
 &lt;UNDEFINED_PRIVATE_ATTRIBUTES action="remove"&gt;&lt;/UNDEFINED_PRIVATE_ATTRIBUTES&gt;
 &lt;INDIVIDUAL_ATTRIBUTE&gt;
  &lt;ATTRIBUTE_TAG&gt;00100010&lt;/ATTRIBUTE_TAG&gt;
  &lt;DESCRIPTION&gt;Patient Name&lt;/DESCRIPTION&gt;
  &lt;ANONYMITY_ACTION action="replace"&gt;Smith^Joe&lt;/ANONYMITY_ACTION&gt;
 &lt;/INDIVIDUAL_ATTRIBUTE&gt;
 &lt;INDIVIDUAL_ATTRIBUTE&gt;
  &lt;ATTRIBUTE_TAG&gt;00100020&lt;/ATTRIBUTE_TAG&gt;
  &lt;DESCRIPTION&gt;Patient ID&lt;/DESCRIPTION&gt;
  &lt;ANONYMITY_ACTION action="replace"&gt;madeAnonymous&lt;/ANONYMITY_ACTION&gt;
 &lt;/INDIVIDUAL_ATTRIBUTE&gt;
 &lt;INDIVIDUAL_ATTRIBUTE&gt;
  &lt;ATTRIBUTE_TAG&gt;00100030&lt;/ATTRIBUTE_TAG&gt;
  &lt;DESCRIPTION&gt;Patient Birth Date&lt;/DESCRIPTION&gt;
  &lt;ANONYMITY_ACTION action="remove"&gt;&lt;/ANONYMITY_ACTION&gt;
 &lt;/INDIVIDUAL_ATTRIBUTE&gt;
&lt;/ANONYMITY_RULE_DOCUMENT&gt;
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<p><code><a href="http://www.hhs.gov/ocr/privacy/index.html">http://www.hhs.gov/ocr/privacy/index.html</a></code> for more information about the HIPAA regulations in the U. S.</p>
</div>
</div>
<!-- class="sect1" -->
<a id="BABDHBGE"></a><a id="IMDCM13570"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.9</span> Extraction of DICOM Metadata for Partitioning</h2>
<p>Oracle Multimedia enables the extraction of DICOM metadata outside the database by a client tool or in the middle tier. This feature enables the extraction of DICOM metadata before the data is loaded into the database, facilitating metadata-based partitioning of DICOM data in the database.</p>
<p>Partitioning supports very large tables and indexes by enabling you to reorganize them into smaller, and thus more usable, chunks called partitions. Partitioning can make your data more available, easier to manage, and faster to query.</p>
<p>You can include DICOM metadata attributes in the partition key, a set of one or more columns that determines the partition in which each row in a partitioned table is stored. To ensure that data is stored in the correct partition, you must provide values for the partition key when the data is loaded.</p>
<p>Oracle Multimedia DICOM includes the Oracle Multimedia Mid-Tier Java API. This client application programming interface for the middle tier enables developers to write Java applications to extract DICOM metadata outside of Oracle Database. This API enables the extraction of DICOM attributes that constitute the partition key before the data is loaded into the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink IMMTJ" href="../e17343/toc.htm"><span class="italic">Oracle Multimedia Mid-Tier Java API Reference</span></a> for reference information</p>
</li>
<li>
<p><a class="olink VLDBG" href="../../server.112/e25523/toc.htm"><span class="italic">Oracle Database VLDB and Partitioning Guide</span></a> for more information about partitioning</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1189">
<tr>
<td class="cellalignment1196">
<table class="cellalignment1194">
<tr>
<td class="cellalignment1193"><a href="ch_intro.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1193"><a href="ch_gen_over.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1198">
<table class="cellalignment1192">
<tr>
<td class="cellalignment1193"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1193"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1193"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1193"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1193"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1193"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
