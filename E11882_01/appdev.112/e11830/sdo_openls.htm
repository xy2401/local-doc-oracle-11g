<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>OpenLS Support</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 743" />
<meta name="description" content="Provides usage and reference information for indexing and storing spatial data and for developing spatial applications using Oracle Spatial and Graph and Oracle Locator." />
<meta name="dcterms.created" content="2013-11-26T3:11:45Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Spatial Developer's Guide" />
<meta name="dcterms.identifier" content="E11830-15" />
<meta name="dcterms.isVersionOf" content="SPATL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="sdo_route_server.htm" title="Previous" type="text/html" />
<link rel="Next" href="sdo_wfs.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e11830.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">23/51</span> <!-- End Header -->
<div id="SPATL410" class="chapter"><a id="BABFAEBE"></a>
<h1 class="chapter"><span class="secnum">14</span> OpenLS Support</h1>
<p>This chapter describes the Oracle Spatial support for Web services based on the Open Location Services Initiative (OpenLS) of the Open GeoSpatial Consortium (OGC), versions 1.0 and 1.1. For a description of OpenLS, see <code><a href="http://www.opengeospatial.org/standards/ols">http://www.opengeospatial.org/standards/ols</a></code>, which includes links for downloads and schemas.</p>
<p>This chapter includes the following major sections:</p>
<ul>
<li>
<p><a href="#BABHCAGC">Section 14.1, "Supported OpenLS Services"</a></p>
</li>
<li>
<p><a href="#BABHBHCC">Section 14.2, "OpenLS Application Programming Interfaces"</a></p>
</li>
<li>
<p><a href="#BABJEAJE">Section 14.3, "OpenLS Service Support and Examples"</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you use OpenLS, be sure that you understand the concepts described in <a href="sdo_webserv_intro.htm#CHDGBDCE">Chapter 10, "Introduction to Spatial Web Services"</a>, and that you have performed any necessary configuration work as described in that chapter.</div>
<a id="BABHCAGC"></a>
<div id="SPATL906" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">14.1</span> Supported OpenLS Services</h2>
<p>Spatial supports the following OGC OpenLS services:</p>
<ul>
<li>
<p>Location Utility Service (geocoding)</p>
</li>
<li>
<p>Presentation Service (mapping)</p>
</li>
<li>
<p>Route Service (driving directions)</p>
</li>
<li>
<p>Directory Service (YP, or "Yellow Pages")</p>
</li>
</ul>
<p>Spatial does not currently support the OGC OpenLS Gateway Service (mobile positioning).</p>
<p>For all supported services except Directory Service (YP, or Yellow Pages), you must first perform certain operations, which might included acquiring and loading third-party data, as well as configuring and deploying underlying technology on which the Spatial OpenLS service is based. <a href="#BABBBGCC">Table 14-1</a> lists the Spatial OpenLS services, and the chapter or manual that documents the requirements and underlying technologies.</p>
<div id="SPATL907" class="tblformal">
<p class="titleintable"><a id="sthref882"></a><a id="BABBBGCC"></a>Table 14-1 Spatial OpenLS Services Dependencies</p>
<table class="cellalignment740" title="Spatial OpenLS Services Dependencies" summary="Spatial OpenLS services dependent on underlying technologies" dir="ltr">
<thead>
<tr class="cellalignment734">
<th class="cellalignment741" id="r1c1-t3">Spatial OpenLS Service</th>
<th class="cellalignment741" id="r1c2-t3">Depends On</th>
<th class="cellalignment741" id="r1c3-t3">Documented In</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment734">
<td class="cellalignment742" id="r2c1-t3" headers="r1c1-t3">
<p>Geocoding</p>
</td>
<td class="cellalignment742" headers="r2c1-t3 r1c2-t3">
<p>Geocoding metadata and data</p>
</td>
<td class="cellalignment742" headers="r2c1-t3 r1c3-t3">
<p><a href="sdo_geocode_concepts.htm#CIHECECC">Chapter 11, "Geocoding Address Data"</a></p>
</td>
</tr>
<tr class="cellalignment734">
<td class="cellalignment742" id="r3c1-t3" headers="r1c1-t3">
<p>Mapping</p>
</td>
<td class="cellalignment742" headers="r3c1-t3 r1c2-t3">
<p>Oracle MapViewer</p>
</td>
<td class="cellalignment742" headers="r3c1-t3 r1c3-t3">
<p><a class="olink JIMPV" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=JIMPV"><span class="italic">Oracle Fusion Middleware User's Guide for Oracle MapViewer</span></a></p>
</td>
</tr>
<tr class="cellalignment734">
<td class="cellalignment742" id="r4c1-t3" headers="r1c1-t3">
<p>Driving directions</p>
</td>
<td class="cellalignment742" headers="r4c1-t3 r1c2-t3">
<p>Routing engine</p>
</td>
<td class="cellalignment742" headers="r4c1-t3 r1c3-t3">
<p><a href="sdo_route_server.htm#CCHGDJJD">Chapter 13, "Routing Engine"</a></p>
</td>
</tr>
<tr class="cellalignment734">
<td class="cellalignment742" id="r5c1-t3" headers="r1c1-t3">
<p>Business directory (YP, or Yellow Pages)</p>
</td>
<td class="cellalignment742" headers="r5c1-t3 r1c2-t3">
<p>Data from an external provider</p>
</td>
<td class="cellalignment742" headers="r5c1-t3 r1c3-t3">
<p><a href="sdo_yp.htm#CHDEJBHH">Chapter 12, "Business Directory (Yellow Pages) Support"</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect1" -->
<a id="BABHBHCC"></a>
<div id="SPATL908" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">14.2</span> OpenLS Application Programming Interfaces</h2>
<p>Two application programming interfaces (APIs) are provided using Spatial OpenLS services: a Web services API and a PL/SQL API.</p>
<p>The Web services API uses the same SOAP envelope as Web feature services (described in <a href="sdo_wfs.htm#CIHEFGJJ">Chapter 15</a>). You enable authentication and authorization using WSS and proxy authentication and user management.</p>
<p>The PL/SQL API is a convenient alternative to Web services. Authentication and authorization are enabled through the database connection that you use to call a PL/SQL subprogram to submit an OpenLS request and return the result. The PL/SQL API is implemented in the SDO_OLS package, which is documented in <a href="sdo_ols_ref.htm#CACHHADI">Chapter 27</a>.</p>
</div>
<!-- class="sect1" -->
<a id="BABJEAJE"></a>
<div id="SPATL909" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">14.3</span> OpenLS Service Support and Examples</h2>
<p>This section describes the support provided for geocoding, mapping, routing, and directory service (YP). It also contains examples of OpenLS Web services API requests and responses.</p>
<div id="SPATL910" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref883"></a>
<h3 class="sect2"><span class="secnum">14.3.1</span> OpenLS Geocoding</h3>
<p>An OpenLS geocoding <code>&lt;Request&gt;</code> element includes the <code>methodName</code> attribute with a value of either <code>GeocodeRequest</code> or <code>ReverseGeocodeRequest</code>, and corresponding a top-level element named <code>&lt;GeocodeRequest&gt;</code> or <code>&lt;ReverseGeocodeRequest&gt;</code>.</p>
<p>If the <code>methodName</code> attribute value is <code>GeocodeRequest</code>, the <code>&lt;GeocodeRequest&gt;</code> element contains an <code>&lt;Address&gt;</code> element that can specify a free-form address, a street address, or an intersection address, with zero or more <code>&lt;Place&gt;</code> elements and an optional <code>&lt;PostalCode&gt;</code> element. The <code>&lt;Address&gt;</code> element has the required attribute <code>countryCode</code>, and several optional attributes.</p>
<p>If the <code>methodName</code> attribute value is <code>GeocodeRequest</code>, the <code>&lt;ReverseGeocodeRequest&gt;</code> element contains a <code>&lt;Position&gt;</code> element for identifying the location to be reverse geocoded, and an optional <code>&lt;ReverseGeocodePreference&gt;</code> element for specifying the information to be returned (default = a street address).</p>
<p><a href="#BABHFAAG">Example 14-1</a> is a request to geocode two addresses in San Francisco, California.</p>
<div id="SPATL911" class="example">
<p class="titleinexample"><a id="BABHFAAG"></a>Example 14-1 OpenLS Geocoding Request</p>
<pre>
&lt;XLS
  xmlns=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  xsi:schemaLocation="http://www.opengis.net/xls &hellip;"
  version="1.0"&gt;
  &lt;RequestHeader clientName="someName" clientPassword="<span class="italic">password</span>"/&gt;
  &lt;Request
    maximumResponses="10"
    methodName="GeocodeRequest"
    requestID="123"
    version="1.0"&gt;
    &lt;GeocodeRequest&gt;
      &lt;Address countryCode="US"&gt;
        &lt;StreetAddress&gt;
          &lt;Building number="400"/&gt;
          &lt;Street&gt;Post Street&lt;/Street&gt;
        &lt;/StreetAddress&gt;
        &lt;Place type="CountrySubdivision"&gt;CA&lt;/Place&gt;
        &lt;Place type="Municipality"&gt;San Francisco&lt;/Place&gt;
        &lt;PostalCode&gt;94102&lt;/PostalCode&gt;
      &lt;/Address&gt;
      &lt;Address countryCode="US"&gt;
        &lt;StreetAddress&gt;
          &lt;Building number="233"/&gt;
          &lt;Street&gt;Winston Drive&lt;/Street&gt;
        &lt;/StreetAddress&gt;
        &lt;Place type="CountrySubdivision"&gt;CA&lt;/Place&gt;
        &lt;Place type="Municipality"&gt;San Francisco&lt;/Place&gt;
        &lt;PostalCode&gt;94132&lt;/PostalCode&gt;
      &lt;/Address&gt;
    &lt;/GeocodeRequest&gt;
  &lt;/Request&gt;
&lt;/XLS&gt;
</pre></div>
<!-- class="example" -->
<p><a href="#BABCGGDG">Example 14-2</a> is the response to the request in <a href="#BABHFAAG">Example 14-1</a>. The longitude and latitude coordinates are returned for the two addresses (<code>-122.4083257 37.788208</code> for the first, <code>-122.4753965 37.7269066</code> for the second).</p>
<div id="SPATL912" class="example">
<p class="titleinexample"><a id="BABCGGDG"></a>Example 14-2 OpenLS Geocoding Response</p>
<pre>
&lt;xls:XLS
  xmlns:xls=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  version="1.0"&gt;
  &lt;xls:ResponseHeader/&gt;
  &lt;xls:Response requestID="123" version="1.0"&gt;
    &lt;xls:GeocodeResponse xmlns:xls="http://www.opengis.net/xls"&gt;
      &lt;xls:GeocodeResponseList
        xmlns:xls=http://www.opengis.net/xls
        numberOfGeocodedAddresses="1"&gt;
        &lt;xls:GeocodedAddress&gt;
          &lt;gml:Point xmlns:gml="http://www.opengis.net/gml"&gt;
            &lt;gml:pos dimension="2" srsName="4326"&gt;-122.4083257 37.788208&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
          &lt;xls:Address countryCode="US"&gt;
            &lt;xls:StreetAddress&gt;
              &lt;xls:Building number="400"/&gt;
              &lt;xls:Street&gt;POST ST&lt;/xls:Street&gt;
            &lt;/xls:StreetAddress&gt;
            &lt;xls:Place type="CountrySubdivision"&gt;CA&lt;/xls:Place&gt;
            &lt;xls:Place type="Municipality"&gt;SAN FRANCISCO&lt;/xls:Place&gt;
            &lt;xls:PostalCode&gt;94102&lt;/xls:PostalCode&gt;
          &lt;/xls:Address&gt;
        &lt;/xls:GeocodedAddress&gt;
      &lt;/xls:GeocodeResponseList&gt;
      &lt;xls:GeocodeResponseList
        xmlns:xls=http://www.opengis.net/xls
        numberOfGeocodedAddresses="1"&gt;
        &lt;xls:GeocodedAddress&gt;
          &lt;gml:Point xmlns:gml="http://www.opengis.net/gml"&gt;
            &lt;gml:pos dimension="2" srsName="4326"&gt;-122.4753965 37.7269066&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
          &lt;xls:Address countryCode="US"&gt;
            &lt;xls:StreetAddress&gt;
              &lt;xls:Building number="233"/&gt;
              &lt;xls:Street&gt;WINSTON DR&lt;/xls:Street&gt;
            &lt;/xls:StreetAddress&gt;
            &lt;xls:Place type="CountrySubdivision"&gt;CA&lt;/xls:Place&gt;
            &lt;xls:Place type="Municipality"&gt;SAN FRANCISCO&lt;/xls:Place&gt;
            &lt;xls:PostalCode&gt;94132&lt;/xls:PostalCode&gt;
          &lt;/xls:Address&gt;
        &lt;/xls:GeocodedAddress&gt;
      &lt;/xls:GeocodeResponseList&gt;
    &lt;/xls:GeocodeResponse&gt;
  &lt;/xls:Response&gt;
&lt;/xls:XLS&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="SPATL913" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref884"></a>
<h3 class="sect2"><span class="secnum">14.3.2</span> OpenLS Mapping</h3>
<p>An OpenLS mapping <code>&lt;Request&gt;</code> element includes the <code>methodName</code> attribute with a value of <code>PortrayMapRequest</code>, and a top-level element named <code>&lt;PortrayMapRequest&gt;</code>.</p>
<p>The <code>&lt;PortrayMapRequest&gt;</code> element contains an <code>&lt;Output&gt;</code> element that specifies the output of the map to be generated, including the center point of the map.</p>
<p>The <code>&lt;PortrayMapRequest&gt;</code> element can contain a <code>&lt;Basemap&gt;</code> element specifying a MapViewer base map and one or more themes, and zero or more <code>&lt;Overlay&gt;</code> elements, each specifying information to be overlaid on the base map.</p>
<p><a href="#BABEBJBC">Example 14-3</a> is a request to portray a map image. The image is to be centered at a specified longitude/latitude point, to use a base map and two MapViewer themes, and identify three points on the map.</p>
<div id="SPATL914" class="example">
<p class="titleinexample"><a id="BABEBJBC"></a>Example 14-3 OpenLS Mapping Request</p>
<pre>
&lt;XLS
  xmlns=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  xsi:schemaLocation="http://www.opengis.net/xls &hellip;"
  version="1.1"&gt;
  &lt;RequestHeader clientName="someName" clientPassword="<span class="italic">password</span>"/&gt;
  &lt;Request
    maximumResponses="1"
    methodName="PortrayMapRequest"
    requestID="456"
    version="1.1"&gt;
    &lt;PortrayMapRequest&gt;
      &lt;Output
        BGcolor="#a6cae0"
        content="URL"
        format="GIF_URL"
        height="600"
        transparent="false"
        width="800"&gt;
        &lt;CenterContext SRS="8307"&gt;
          &lt;CenterPoint srsName="8307"&gt;
            &lt;gml:pos&gt;-122.2615 37.5266&lt;/gml:pos&gt;
          &lt;/CenterPoint&gt;
          &lt;Radius unit="M"&gt;50000&lt;/Radius&gt;
        &lt;/CenterContext&gt;
      &lt;/Output&gt;
      &lt;Basemap filter="Include"&gt;
        &lt;Layer name="mvdemo.demo_map.THEME_DEMO_COUNTIES"/&gt;
        &lt;Layer name="mvdemo.demo_map.THEME_DEMO_HIGHWAYS"/&gt;
      &lt;/Basemap&gt;
      &lt;Overlay zorder="1"&gt;
        &lt;POI
          ID="123"
          description="description"
          phoneNumber="1234"
          POIName="Books at Post Str (point)"&gt;
          &lt;gml:Point srsName="4326"&gt;
            &lt;gml:pos&gt;-122.4083257 37.788208&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
        &lt;/POI&gt;
      &lt;/Overlay&gt;
      &lt;Overlay zorder="2"&gt;
        &lt;POI
          ID="456"
          description="description"
          phoneNumber="1234"
          POIName="Books at Winston Dr (address)"&gt;
          &lt;Address countryCode="US"&gt;
            &lt;StreetAddress&gt;
              &lt;Building number="233"/&gt;
              &lt;Street&gt;Winston Drive&lt;/Street&gt;
            &lt;/StreetAddress&gt;
            &lt;Place type="CountrySubdivision"&gt;CA&lt;/Place&gt;
            &lt;Place type="CountrySecondarySubdivision"/&gt;
            &lt;Place type="Municipality"&gt;San Francisco&lt;/Place&gt;
            &lt;Place type="MunicipalitySubdivision"/&gt;
            &lt;PostalCode&gt;94132&lt;/PostalCode&gt;
          &lt;/Address&gt;
        &lt;/POI&gt;
      &lt;/Overlay&gt;
      &lt;Overlay zorder="3"&gt;
        &lt;Position levelOfConf="1"&gt;
          &lt;gml:Point gid="a boat (point)" srsName="4326"&gt;
            &lt;gml:pos&gt;-122.8053965 37.388208&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
        &lt;/Position&gt;
      &lt;/Overlay&gt;
    &lt;/PortrayMapRequest&gt;
  &lt;/Request&gt;
&lt;/XLS&gt;
</pre></div>
<!-- class="example" -->
<p><a href="#BABEAIED">Example 14-4</a> is the response to the request in <a href="#BABEBJBC">Example 14-3</a>.; however, in an actual response, the line <code>&lt;xls:URL&gt;Actual URL replaced with constant string for test&lt;/xls:URL&gt;</code> would contain the actual URL of the map image.</p>
<div id="SPATL915" class="example">
<p class="titleinexample"><a id="BABEAIED"></a>Example 14-4 OpenLS Mapping Response</p>
<pre>
&lt;xls:XLS
  xmlns:xls=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  xsi:schemaLocation="http://www.opengis.net/xls &hellip;"
  version="1.1"&gt;
  &lt;xls:ResponseHeader/&gt;
  &lt;xls:Response numberOfResponses="1" requestID="456" version="1.1"&gt;
    &lt;xls:PortrayMapResponse&gt;
      &lt;xls:Map&gt;
        &lt;xls:Content format="GIF_URL" height="600" width="800"&gt;
          &lt;xls:URL&gt;Actual URL replaced with constant string for test&lt;/xls:URL&gt;
        &lt;/xls:Content&gt;
        &lt;xls:BBoxContext srsName="4326"&gt;
          &lt;gml:pos&gt;-122.86037685607968 37.07744235794024&lt;/gml:pos&gt;
          &lt;gml:pos&gt;-121.66262314392031 37.97575764205976&lt;/gml:pos&gt;
        &lt;/xls:BBoxContext&gt;
      &lt;/xls:Map&gt;
    &lt;/xls:PortrayMapResponse&gt;
  &lt;/xls:Response&gt;
&lt;/xls:XLS&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="SPATL916" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref885"></a>
<h3 class="sect2"><span class="secnum">14.3.3</span> OpenLS Routing</h3>
<p>An OpenLS routing <code>&lt;Request&gt;</code> element includes the <code>methodName</code> attribute with a value of <code>DetermineRouteRequest</code>, and a top-level element named <code>&lt;DetermineRouteRequest&gt;</code>.</p>
<p>The <code>&lt;DetermineRouteRequest&gt;</code> element contains a <code>&lt;RoutePlan&gt;</code> element that specifies the route preference and points to be included (and optionally avoided) in the route, with at least the start and end points.</p>
<p>The <code>&lt;DetermineRouteRequest&gt;</code> element can also contain zero or more of the following elements: <code>&lt;RouteGeometryRequest&gt;</code> to return the line string geometry representing the route, <code>&lt;RouteMapRequest&gt;</code> to request a map image of the route, and <code>&lt;RouteInstructionsRequest&gt;</code> to request driving directions for the route.</p>
<p><a href="#BABBBIGI">Example 14-5</a> is a request for the route geometry and map image for the fastest route between an address in Cambridge, Massachusetts and an address in Nashua, New Hampshire.</p>
<div id="SPATL917" class="example">
<p class="titleinexample"><a id="BABBBIGI"></a>Example 14-5 OpenLS Routing Request</p>
<pre>
&lt;XLS
  xmlns=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  xsi:schemaLocation="http://www.opengis.net/xls &hellip;"
  version="1.1"&gt;
  &lt;RequestHeader clientName="someName" clientPassword="<span class="italic">password</span>"/&gt;
    &lt;Request
      maximumResponses="10"
      methodName="DetermineRouteRequest"
      requestID="12345"
      version="1.0"&gt;
      &lt;DetermineRouteRequest&gt;
        &lt;RoutePlan&gt;
          &lt;RoutePreference&gt;Fastest&lt;/RoutePreference&gt;
          &lt;WayPointList&gt;
            &lt;StartPoint&gt;
              &lt;POI description="Borders" ID="1" phoneNumber="12345" POIName="Borders"&gt;
                &lt;Address countryCode="US"&gt;
                  &lt;StreetAddress&gt;
                    &lt;Building number="100"/&gt;
                    &lt;Street&gt;Cambridgeside Pl&lt;/Street&gt;
                  &lt;/StreetAddress&gt;
                  &lt;Place type="CountrySubdivision"&gt;MA&lt;/Place&gt;
                  &lt;Place type="Municipality"&gt;Cambridge&lt;/Place&gt;
                  &lt;PostalCode&gt;02141&lt;/PostalCode&gt;
                &lt;/Address&gt;
              &lt;/POI&gt;
            &lt;/StartPoint&gt;
            &lt;EndPoint&gt;
              &lt;Address countryCode="US"&gt;
                &lt;StreetAddress&gt;
                  &lt;Building number="1"/&gt;
                  &lt;Street&gt;Oracle Dr&lt;/Street&gt;
                &lt;/StreetAddress&gt;
                &lt;Place type="CountrySubdivision"&gt;New Hampshire&lt;/Place&gt;
                &lt;Place type="Municipality"&gt;Nashua&lt;/Place&gt;
                &lt;PostalCode&gt;03062&lt;/PostalCode&gt;
              &lt;/Address&gt;
            &lt;/EndPoint&gt;
          &lt;/WayPointList&gt;
          &lt;AvoidList/&gt;
        &lt;/RoutePlan&gt;
      &lt;RouteGeometryRequest maxPoints="100" provideStartingPortion="true" scale="1"&gt;
        &lt;BoundingBox&gt;
          &lt;gml:pos/&gt;
          &lt;gml:pos/&gt;
        &lt;/BoundingBox&gt;
      &lt;/RouteGeometryRequest&gt;
      &lt;RouteMapRequest&gt;
        &lt;Output BGcolor="" format="" height="600" transparent="false" width="800"/&gt;
      &lt;/RouteMapRequest&gt;
    &lt;/DetermineRouteRequest&gt;
  &lt;/Request&gt;
&lt;/XLS&gt;
</pre></div>
<!-- class="example" -->
<p><a href="#BABIJJJJ">Example 14-6</a> is part of the response to the request in <a href="#BABBBIGI">Example 14-5</a>. <a href="#BABIJJJJ">Example 14-6</a> shows the total estimated driving time, the total distance, the lower-left and upper-right longitude/latitude coordinates of the minimum bounding rectangle that encloses the route, and the longitude/latitude coordinates of the first few points along the line geometry representing the route.</p>
<div id="SPATL918" class="example">
<p class="titleinexample"><a id="BABIJJJJ"></a>Example 14-6 OpenLS Routing Response</p>
<pre>
&lt;xls:XLS
  xmlns:xls=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  xsi:schemaLocation="http://www.opengis.net/xls &hellip;"
  version="1.1"&gt;
  &lt;xls:ResponseHeader/&gt;
  &lt;xls:Response numberOfResponses="1" requestID="12345" version="1.0"&gt;
    &lt;xls:DetermineRouteResponse&gt;
      &lt;xls:RouteSummary&gt;
        &lt;xls:TotalTime&gt;P0DT0H42M26S&lt;/xls:TotalTime&gt;
        &lt;xls:TotalDistance uom="M" value="61528.7"/&gt;
        &lt;xls:BoundingBox srsName="4326"&gt;
          &lt;gml:pos dimension="2" srsName="4326"&gt;-71.45937289088023 42.36694&lt;/gml:pos&gt;
          &lt;gml:pos dimension="2" srsName="4326"&gt;-71.06754 42.70824&lt;/gml:pos&gt;
        &lt;/xls:BoundingBox&gt;
      &lt;/xls:RouteSummary&gt;
      &lt;xls:RouteGeometry&gt;
        &lt;gml:LineString srsName="4326"&gt;
          &lt;gml:pos
            xmlns:gml=http://www.opengis.net/gml
            dimension="2"
            srsName="4326"&gt;-71.07444,42.36792&lt;/gml:pos&gt;
          &lt;gml:pos
            xmlns:gml=http://www.opengis.net/gml
            dimension="2"
            srsName="4326"&gt;-71.07162,42.37082&lt;/gml:pos&gt;
          &lt;gml:pos
            xmlns:gml=http://www.opengis.net/gml
            dimension="2"
            srsName="4326"&gt;-71.06954,42.37333&lt;/gml:pos&gt;
. . .
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="SPATL919" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref886"></a>
<h3 class="sect2"><span class="secnum">14.3.4</span> <a id="sthref887"></a>OpenLS Directory Service (YP)</h3>
<p>An OpenLS directory service <code>&lt;Request&gt;</code> element includes the <code>methodName</code> attribute with a value of <code>DirectoryRequest</code>, and a top-level element named <code>&lt;DirectoryRequest&gt;</code>.</p>
<p>The <code>&lt;DirectoryRequest&gt;</code> element contains a <code>&lt;POILocation&gt;</code> element that specifies the location of a point of interest, that is, the center point from which to compute distances of returned businesses.</p>
<p>The <code>&lt;DirectoryRequest&gt;</code> element also contains a <code>&lt;POIProperties&gt;</code> element that specifies one or more <code>&lt;POIProperty&gt;</code> elements, each of which contains a <code>name</code> attribute identifying a property and a <code>value</code> attribute identifying the value for the property. The <code>name</code> attribute can specify any of the following strings: <code>ID</code>, <code>POIName</code>, <code>PhoneNumber</code>, <code>Keyword</code>, <code>NAICS_type</code>, <code>NAICS_subType</code>, <code>NAICS_category</code>, <code>SIC_type</code>, <code>SIC_subType</code>, <code>SIC_category</code>, <code>SIC_code</code>, or <code>other</code>.</p>
<p><a href="#BABEBAGD">Example 14-7</a> is a request for information about business that have either or both of two specified SIC (Standard Industrial Classification) codes. For this example, the two SIC codes (<code>1234567890</code> and <code>1234567891</code>) are fictitious, and they are being used with a limited test data set in which these codes have been applied to categories (<span class="italic">Book stores</span> and <span class="italic">Cafes &amp; Cafeterias</span>) that do not have these SIC codes in the real world.</p>
<div id="SPATL920" class="example">
<p class="titleinexample"><a id="BABEBAGD"></a>Example 14-7 OpenLS Directory Service (YP) Request</p>
<pre>
&lt;XLS
  xmlns=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  xsi:schemaLocation="http://www.opengis.net/xls &hellip;"
  version="1.0"&gt;
  &lt;RequestHeader clientName="someName" clientPassword="<span class="italic">password</span>"/&gt;
  &lt;Request
    requestID="123"
    maximumResponses="100"
    version="1.1"
    methodName="DirectoryRequest"&gt;
    &lt;DirectoryRequest&gt;
      &lt;POILocation&gt;
        &lt;Address countryCode="US"&gt;
        &lt;/Address&gt;
      &lt;/POILocation&gt;
      &lt;POIProperties&gt;
        &lt;POIProperty name="SIC_code" value="1234567890"/&gt;
        &lt;POIProperty name="SIC_code" value="1234567891"/&gt;
      &lt;/POIProperties&gt;
    &lt;/DirectoryRequest&gt;
  &lt;/Request&gt;
&lt;/XLS&gt;
</pre></div>
<!-- class="example" -->
<p><a href="#BABGEAIA">Example 14-8</a> is the response to the request in <a href="#BABEBAGD">Example 14-7</a>. The response contains information about two businesses for which either or both of the specific SIC codes apply.</p>
<div id="SPATL921" class="example">
<p class="titleinexample"><a id="BABGEAIA"></a>Example 14-8 OpenLS Directory Service (YP) Response</p>
<pre>
&lt;xls:XLS
  xmlns:xls=http://www.opengis.net/xls
  xmlns:gml=http://www.opengis.net/gml
  xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance
  version="1.0"&gt;
  &lt;xls:ResponseHeader/&gt;
  &lt;xls:Response requestID="123" version="1.1"&gt;
    &lt;DirectoryResponse xmlns="http://www.opengis.net/xls"&gt;
      &lt;xls:POIContext xmlns:xls="http://www.opengis.net/xls"&gt;
        &lt;xls:POI
          ID="1"
          POIName="Borders Books &amp;amp; More"
          phoneNumber="415-731-0665"
          description="Books &amp;amp; more"&gt;
          &lt;POIAttributeList xmlns="http://www.opengis.net/xls"&gt;
            &lt;xls:SIC
              xmlns:xls=http://www.opengis.net/xls
              category="Book stores"
              code="1234567890"
              subType=""
              type=""/&gt;
            &lt;xls:SIC
              xmlns:xls=http://www.opengis.net/xls
              category="Cafes &amp;amp; Cafeterias"
              code="1234567891"
              subType="" type=""/&gt;
          &lt;/POIAttributeList&gt;
          &lt;gml:Point xmlns:gml="http://www.opengis.net/gml"&gt;
            &lt;gml:pos dimension="2" srsName="4326"&gt;-122.4753965 37.7269066&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
          &lt;xls:Address countryCode="US"&gt;
            &lt;xls:StreetAddress&gt;
              &lt;xls:Building number="233"/&gt;
              &lt;xls:Street&gt;Winston Drive&lt;/xls:Street&gt;
            &lt;/xls:StreetAddress&gt;
            &lt;xls:Place type="CountrySubdivision"&gt;CA&lt;/xls:Place&gt;
            &lt;xls:Place type="CountrySecondarySubdivision"/&gt;
            &lt;xls:Place type="Municipality"&gt;San Francisco&lt;/xls:Place&gt;
            &lt;xls:Place type="MunicipalitySubdivision"/&gt;
            &lt;xls:PostalCode&gt;94132&lt;/xls:PostalCode&gt;
          &lt;/xls:Address&gt;
        &lt;/xls:POI&gt;
      &lt;/xls:POIContext&gt;
      &lt;xls:POIContext xmlns:xls="http://www.opengis.net/xls"&gt;
        &lt;xls:POI
          ID="2"
          POIName="Borders Books &amp;amp; More"
          phoneNumber="415-399-1633"
          description="Books &amp;amp; more"&gt;
          &lt;POIAttributeList xmlns="http://www.opengis.net/xls"&gt;
            &lt;xls:SIC
              xmlns:xls=http://www.opengis.net/xls
              category="Book stores"
              code="1234567890"
              subType=""
              type=""/&gt;
            &lt;xls:SIC
              xmlns:xls=http://www.opengis.net/xls
              category="Cafes &amp;amp; Cafeterias"
              code="1234567891"
              subType=""
              type=""/&gt;
          &lt;/POIAttributeList&gt;
          &lt;gml:Point xmlns:gml="http://www.opengis.net/gml"&gt;
            &lt;gml:pos dimension="2" srsName="4326"&gt;-122.4083257 37.788208&lt;/gml:pos&gt;
          &lt;/gml:Point&gt;
          &lt;xls:Address countryCode="US"&gt;
            &lt;xls:StreetIntersection&gt;
              &lt;xls:Street&gt;Post St&lt;/xls:Street&gt;
              &lt;xls:IntersectingStreet&gt;Powell St&lt;/xls:IntersectingStreet&gt;
            &lt;/xls:StreetIntersection&gt;
            &lt;xls:Place type="CountrySubdivision"&gt;CA&lt;/xls:Place&gt;
            &lt;xls:Place type="CountrySecondarySubdivision"/&gt;
            &lt;xls:Place type="Municipality"&gt;San Francisco&lt;/xls:Place&gt;
            &lt;xls:Place type="MunicipalitySubdivision"/&gt;
            &lt;xls:PostalCode&gt;94102&lt;/xls:PostalCode&gt;
          &lt;/xls:Address&gt;
        &lt;/xls:POI&gt;
      &lt;/xls:POIContext&gt;
    &lt;/DirectoryResponse&gt;
  &lt;/xls:Response&gt;
&lt;/xls:XLS&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment733">
<tr>
<td class="cellalignment742">
<table class="cellalignment738">
<tr>
<td class="cellalignment737"><a href="sdo_route_server.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment737"><a href="sdo_wfs.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment744">
<table class="cellalignment736">
<tr>
<td class="cellalignment737"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment737"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment737"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment737"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment737"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment737"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
