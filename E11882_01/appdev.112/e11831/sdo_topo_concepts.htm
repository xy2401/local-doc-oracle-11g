<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Topology Data Model Overview</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="description" content="Provides usage and reference information about the Topology Data Model and Network Data Model Graph features of Oracle Spatial and Graph." />
<meta name="dcterms.created" content="2014-07-09T11:54:29Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Spatial Topology and Network Data Models Developer's Guide" />
<meta name="dcterms.identifier" content="E11831-07" />
<meta name="dcterms.isVersionOf" content="TOPOL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="sdo_prttopo.htm" title="Previous" type="text/html" />
<link rel="Next" href="sdo_topo_editing.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e11831.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/17</span> <!-- End Header -->
<div id="TOPOL100" class="chapter"><a id="BABDHJAF"></a>
<h1 class="chapter"><span class="secnum">1</span> Topology <a id="sthref20"></a>Data Model Overview</h1>
<p>The topology data model of Oracle Spatial lets you work with data about nodes, edges, and faces in a topology. For example, United States Census geographic data is provided in terms of nodes, chains, and polygons, and this data can be represented using the Spatial topology data model. You can store information about topological elements and geometry layers in Oracle Spatial tables and metadata views. You can then perform certain Spatial operations referencing the topological elements, for example, finding which chains (such as streets) have any spatial interaction with a specific polygon entity (such as a park).</p>
<p>This chapter describes the Spatial data structures and data types that support the topology data model, and what you need to do to populate and manipulate the structures. You can use this information to write a program to convert your topological data into formats usable with Spatial.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Although this chapter discusses some topology terms as they relate to Oracle Spatial, it assumes that you are familiar with basic topology concepts.
<p>It also assumes that you are familiar with the main Spatial concepts, data types, and operations, as documented in <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a>.</p>
</div>
<p>This chapter contains the following major sections:</p>
<ul>
<li>
<p><a href="#CIHBIADE">Section 1.1, "Main Steps in Using Topology Data"</a></p>
</li>
<li>
<p><a href="#CIHIBIFG">Section 1.2, "Topology Data Model Concepts"</a></p>
</li>
<li>
<p><a href="#CIHBJJGD">Section 1.3, "Topology Geometries and Layers"</a></p>
</li>
<li>
<p><a href="#CIHHGJAB">Section 1.4, "Topology Geometry Layer Hierarchy"</a></p>
</li>
<li>
<p><a href="#BABBBDBJ">Section 1.5, "Topology Data Model Tables"</a></p>
</li>
<li>
<p><a href="#CIHHFJCB">Section 1.6, "Topology Data Types"</a></p>
</li>
<li>
<p><a href="#CIHJACAC">Section 1.7, "Topology Metadata Views"</a></p>
</li>
<li>
<p><a href="#CIHFGFIA">Section 1.8, "Topology Application Programming Interface"</a></p>
</li>
<li>
<p><a href="#CIHDEGAC">Section 1.9, "Exporting and Importing Topology Data"</a></p>
</li>
<li>
<p><a href="#CIHIGDGC">Section 1.10, "Cross-Schema Topology Usage and Editing"</a></p>
</li>
<li>
<p><a href="#CIHFIFCH">Section 1.11, "Function-Based Indexes Not Supported"</a></p>
</li>
<li>
<p><a href="#i885918">Section 1.12, "Topology Examples (PL/SQL)"</a></p>
</li>
<li>
<p><a href="#CIHBGAEB">Section 1.13, "README File for Spatial and Related Features"</a></p>
</li>
</ul>
<a id="CIHBIADE"></a>
<div id="TOPOL724" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.1</span> <a id="sthref21"></a>Main Steps in Using Topology Data</h2>
<p>This section summarizes the main steps for working with topology data in Oracle Spatial. It refers to important concepts, structures, and operations that are described in detail in other sections.</p>
<p>The specific main steps depend on which of two basic approaches you follow, which depend on the kind of data you will use to build the topology:</p>
<ul>
<li>
<p>If you have data about the edges, nodes, and faces (but not spatial geometry data), follow the steps in <a href="#CIHFBBBG">Section 1.1.1, "Using a Topology Built from Topology Data"</a>.</p>
</li>
<li>
<p>If you will build the topology from Spatial geometries that will become topology features, follow the steps in <a href="#CIHCDCFD">Section 1.1.2, "Using a Topology Built from Spatial Geometries"</a>.</p>
</li>
</ul>
<p>You can use the topology data model PL/SQL and Java APIs to update the topology (for example, to change the data about an edge, node, or face). The PL/SQL API for most editing operations is the SDO_TOPO_MAP package, which is documented in <a href="sdo_topo_map_ref.htm#CACDEDEE">Chapter 4</a>. The Java API is described in <a href="#CIHBEHFI">Section 1.8.2</a>.</p>
<a id="CIHFBBBG"></a>
<div id="TOPOL725" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.1.1</span> Using a Topology Built from Topology Data</h3>
<p>The main steps for working with a topology built from topology data are as follows:</p>
<ol>
<li>
<p>Create the topology, using the <a href="sdo_topo_ref.htm#CHEIBHDI">SDO_TOPO.CREATE_TOPOLOGY</a> procedure. This causes the &lt;topology-name&gt;_EDGE$, &lt;topology-name&gt;_NODE$, &lt;topology-name&gt;_FACE$, and &lt;topology-name&gt;_HISTORY$ tables to be created. (These tables are described in <a href="#BABHGFAA">Section 1.5.1</a>, <a href="#BABHHHEB">Section 1.5.2</a>, <a href="#BABCICEI">Section 1.5.3</a>, and <a href="#CIHJICHI">Section 1.5.5</a>, respectively.)</p>
</li>
<li>
<p>Load topology data into the node, edge, and face tables created in Step 1. This is typically done using a bulk-load utility, but it can be done using SQL INSERT statements.</p>
</li>
<li>
<p>Create a feature table for each type of topology geometry layer in the topology. For example, a city data topology might have separate feature tables for land parcels, streets, and traffic signs.</p>
</li>
<li>
<p>Associate the feature tables with the topology, using the <a href="sdo_topo_ref.htm#CACJJACH">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</a> procedure for each feature table. This causes the &lt;topology-name&gt;_RELATION$ table to be created. (This table is described in <a href="#BABIGFIG">Section 1.5.4</a>.)</p>
</li>
<li>
<p>Initialize topology metadata, using the <a href="sdo_topo_ref.htm#CACJJFFE">SDO_TOPO.INITIALIZE_METADATA</a> procedure. (This procedure also creates spatial indexes on the &lt;topology-name&gt;_EDGE$, &lt;topology-name&gt;_NODE$, and &lt;topology-name&gt;_FACE$ tables, and additional B-tree indexes on the &lt;topology-name&gt;_EDGE$ and &lt;topology-name&gt;_NODE$ tables.)</p>
</li>
<li>
<p>Load the feature tables using the SDO_TOPO_GEOMETRY constructor. (This constructor is described in <a href="#CIHJJCGB">Section 1.6.2</a>.)</p>
</li>
<li>
<p>Query the topology data (for example, using one of topology operators described in <a href="#CIHCDHID">Section 1.8.1</a>).</p>
</li>
<li>
<p>Optionally, edit topology data using the PL/SQL or Java application programming interfaces (APIs).</p>
</li>
</ol>
<p><a href="#CIHCEGJI">Section 1.12.1</a> contains a PL/SQL example that performs these main steps.</p>
</div>
<!-- class="sect2" -->
<a id="CIHCDCFD"></a>
<div id="TOPOL726" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.1.2</span> Using a Topology Built from Spatial Geometries</h3>
<p>To build a topology from spatial geometries, you must first perform the standard operations for preparing data for use with Oracle Spatial, as described in <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a>:</p>
<ol>
<li>
<p>Create the spatial tables.</p>
</li>
<li>
<p>Update the spatial metadata (USER_SDO_GEOM_METADATA view).</p>
</li>
<li>
<p>Load data into the spatial tables.</p>
</li>
<li>
<p>Validate the spatial data.</p>
</li>
<li>
<p>Create the spatial indexes.</p>
</li>
</ol>
<p>The main steps for working with a topology built from Oracle Spatial geometries are as follows:</p>
<ol>
<li>
<p>Create the topology, using the <a href="sdo_topo_ref.htm#CHEIBHDI">SDO_TOPO.CREATE_TOPOLOGY</a> procedure. This causes the &lt;topology-name&gt;_EDGE$, &lt;topology-name&gt;_NODE$, &lt;topology-name&gt;_FACE$, and &lt;topology-name&gt;_HISTORY$ tables to be created. (These tables are described in <a href="#BABHGFAA">Section 1.5.1</a>, <a href="#BABHHHEB">Section 1.5.2</a>, <a href="#BABCICEI">Section 1.5.3</a>, and <a href="#CIHJICHI">Section 1.5.5</a>, respectively.)</p>
</li>
<li>
<p>Create the universe face (F0, defined in <a href="#CIHIBIFG">Section 1.2</a>).</p>
</li>
<li>
<p>Create a feature table for each type of topology geometry layer in the topology. For example, a city data topology might have separate feature tables for land parcels, streets, and traffic signs.</p>
</li>
<li>
<p>Associate the feature tables with the topology, using the <a href="sdo_topo_ref.htm#CACJJACH">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</a> procedure for each feature table. This causes the &lt;topology-name&gt;_RELATION$ table to be created. (This table is described in <a href="#BABIGFIG">Section 1.5.4</a>.)</p>
</li>
<li>
<p>Create a TopoMap object and load the whole topology into cache.</p>
</li>
<li>
<p>Initialize topology metadata, using the <a href="sdo_topo_ref.htm#CACJJFFE">SDO_TOPO.INITIALIZE_METADATA</a> procedure. (This procedure also creates spatial indexes on the &lt;topology-name&gt;_EDGE$, &lt;topology-name&gt;_NODE$, and &lt;topology-name&gt;_FACE$ tables, and additional B-tree indexes on the &lt;topology-name&gt;_EDGE$ and &lt;topology-name&gt;_NODE$ tables.)</p>
</li>
<li>
<p>Load the feature tables, inserting data from the spatial tables and using the <a href="sdo_topo_map_ref.htm#CACIJGEA">SDO_TOPO_MAP.CREATE_FEATURE</a> function.</p>
</li>
<li>
<p>Query the topology data (using one of topology operators described in <a href="#CIHCDHID">Section 1.8.1</a>).</p>
</li>
<li>
<p>Optionally, edit topology data using the PL/SQL or Java application programming interfaces (APIs).</p>
</li>
</ol>
<p><a href="#CIHBGDEC">Section 1.12.2</a> contains a PL/SQL example that performs these main steps.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHIBIFG"></a>
<div id="TOPOL727" class="sect1">
<h2 class="sect1"><span class="secnum">1.2</span> <a id="sthref22"></a>Topology Data Model Concepts</h2>
<p>Topology is a branch of mathematics concerned with objects in space. Topological relationships include such relationships as <span class="italic">contains</span>, <span class="italic">inside</span>, <span class="italic">covers</span>, <span class="italic">covered by</span>, <span class="italic">touch</span>, and <span class="italic">overlap with boundaries intersecting</span>. Topological relationships remain constant when the coordinate space is deformed, such as by twisting or stretching. (Examples of relationships that are not topological include <span class="italic">length of</span>, <span class="italic">distance between</span>, and <span class="italic">area of</span>.)</p>
<p>The basic elements in a topology are its nodes, edges, and faces.</p>
<p><a id="sthref23"></a>A <span class="bold">node</span>, represented by a point, can be isolated or it can be used to bound edges. Two or more edges meet at a non-isolated node. A node has a coordinate pair associated with it that describes the spatial location for that node. Examples of geographic entities that might be represented as nodes include start and end points of streets, places of historical interest, and airports (if the map scale is sufficiently large).</p>
<p><a id="sthref24"></a>An <span class="bold">edge</span> is bounded by two nodes: the start (origin) node and the end (terminal) node. An edge has an associated geometric object, usually a coordinate string that describes the spatial representation of the edge. An edge may have several vertices making up a line string. (Circular arcs are not supported for topologies.) Examples of geographic entities that might be represented as edges include segments of streets and rivers.</p>
<p><a id="sthref25"></a><a id="sthref26"></a>The order of the coordinates gives a <span class="bold">direction</span> to an edge, and direction is important in determining topological relationships. The positive direction agrees with the orientation of the underlying edge, and the negative direction reverses this orientation. Each orientation of an edge is referred to as a <span class="bold">directed edge</span>, and each directed edge is the mirror image of its other directed edge. The start node of the positive directed edge is the end node of the negative directed edge. An edge also lies between two faces and has references to both of them. Each directed edge contains a reference to the next edge in the contiguous perimeter of the face on its left side.A <span class="bold"><a id="sthref27"></a>face</span>, corresponding to a polygon, has a reference to one directed edge of its outer boundary. If any island nodes or island edges are present, the face also has a reference to one directed edge on the boundary of each island. Examples of geographic entities that might be represented as faces include parks, lakes, counties, and states.</p>
<p><a href="#BABCJFAD">Figure 1-1</a> shows a simplified topology containing nodes, edges, and faces. The arrowheads on each edge indicate the positive direction of the edge (or, more precisely, the orientation of the underlying line string or curve geometry for positive direction of the edge).</p>
<div id="TOPOL728" class="figure">
<p class="titleinfigure"><a id="BABCJFAD"></a>Figure 1-1 Simplified Topology</p>
<img width="576" height="406" src="img/topo_node_edge_face.gif" alt="Description of Figure 1-1 follows" /><br />
<a id="sthref28" href="img_text/topo_node_edge_face.htm">Description of "Figure 1-1 Simplified Topology"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Notes on <a href="#BABCJFAD">Figure 1-1</a>:</p>
<ul>
<li>
<p><span class="italic">E</span> elements (E1, E2, and so on) are edges, <span class="italic">F</span> elements (F0, F1, and so on) are faces, and <span class="italic">N</span> elements (N1, N2, and so on) are nodes.</p>
</li>
<li>
<p><span class="bold"><a id="sthref29"></a><a id="sthref30"></a>F0</span> (face zero) is created for every topology. It is the universe face containing everything else in the topology. There is no geometry associated with the universe face. F0 has the face ID value of -1 (negative 1).</p>
</li>
<li>
<p>There is a node created for every point geometry and for every start and end node of an edge. For example, face F1 has only an edge (a closed edge), E1, that has the same node as the start and end nodes (N1). F1 also has edge E25, with start node N21 and end node N22.</p>
</li>
<li>
<p>An <span class="bold">isolated node</span> (also called an <a id="sthref31"></a><a id="sthref32"></a><a id="sthref33"></a><span class="bold">island node</span>) is a node that is isolated in a face. For example, node N4 is an isolated node in face F2.</p>
</li>
<li>
<p>An <span class="bold">isolated edge</span> (also called an <span class="bold"><a id="sthref34"></a><a id="sthref35"></a><a id="sthref36"></a>island edge</span>) is an edge that is isolated in a face. For example, edge E25 is an isolated edge in face F1.</p>
</li>
<li>
<p>A <span class="bold"><a id="sthref37"></a><a id="sthref38"></a>loop edge</span> is an edge that has the same node as its start node and end node. For example, edge E1 is a loop edge starting and ending at node N1.</p>
</li>
<li>
<p>An edge cannot have an isolated (island) node on it. The edge can be broken up into two edges by adding a node on the edge. For example, if there was originally a single edge between nodes N16 and N18, adding node N17 resulted in two edges: E6 and E7.</p>
</li>
<li>
<p>Information about the topological relationships is stored in special edge, face, and node information tables. For example, the edge information table contains the following information about edges E9 and E10. (Note the direction of the arrowheads for each edge.) The next and previous edges are based on the left and right faces of the edge.</p>
<p>For edge E9, the start node is N15 and the end node is N14, the next left edge is E19 and the previous left edge is -E21, the next right edge is -E22 and the previous right edge is E20, the left face is F3 and the right face is F6.</p>
<p>For edge E10, the start node is N13 and the end node is N14, the next left edge is -E20 and the previous left edge is E18, the next right edge is E17 and the previous right edge is -E19, the left face is F7 and the right face is F4.</p>
<p>For additional examples of edge-related data, including an illustration and explanations, see <a href="#BABHGFAA">Section 1.5.1</a>.</p>
</li>
</ul>
<p><a href="#CIHDGFGC">Figure 1-2</a> shows the same topology illustrated in <a href="#BABCJFAD">Figure 1-1</a>, but it adds a grid and unit numbers along the x-axis and y-axis. <a href="#CIHDGFGC">Figure 1-2</a> is useful for understanding the output of some of the examples in <a href="sdo_topo_ref.htm#CACFCFHG">Chapter 3</a> and <a href="sdo_topo_map_ref.htm#CACDEDEE">Chapter 4</a>.</p>
<div id="TOPOL729" class="figure">
<p class="titleinfigure"><a id="CIHDGFGC"></a>Figure 1-2 Simplified Topology, with Grid Lines and Unit Numbers</p>
<img width="636" height="469" src="img/topo_xy_axes.gif" alt="Description of Figure 1-2 follows" /><br />
<a id="sthref39" href="img_text/topo_xy_axes.htm">Description of "Figure 1-2 Simplified Topology, with Grid Lines and Unit Numbers"</a><br />
<br /></div>
<!-- class="figure" -->
<a id="BABIEJGD"></a>
<div id="TOPOL730" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.2.1</span> <a id="sthref40"></a>Tolerance in the Topology Data Model</h3>
<p>Tolerance is used to associate a level of precision with spatial data. <span class="bold">Tolerance</span> reflects the <span class="italic">distance that two points can be apart and still be considered the same</span> (for example, to accommodate rounding errors). The tolerance value must be a positive number greater than zero.</p>
<p>However, in the topology data model, tolerance can have two meanings depending on the operation being performed: one meaning is the traditional Oracle Spatial definition of tolerance, and the other is a fixed tolerance value of 10E-15.</p>
<ul>
<li>
<p>The tolerance value specified in the call to the <a href="sdo_topo_ref.htm#CHEIBHDI">SDO_TOPO.CREATE_TOPOLOGY</a> procedure refers to the traditional Oracle Spatial definition, as explained in <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a>. This value is used when indexes are created in the node, edge, and face tables, and when spatial operators are used to query these tables.</p>
</li>
<li>
<p>The tolerance value used for internal computations (for example, finding edge intersections) during topology editing operations is always 10E-15 (based on Java double precision arithmetic). This value is used during the validation checks performed by the <a href="sdo_topo_map_ref.htm#CACJAICB">SDO_TOPO_MAP.VALIDATE_TOPO_MAP</a> and <a href="sdo_topo_map_ref.htm#CHEBDBEA">SDO_TOPO_MAP.VALIDATE_TOPOLOGY</a> functions.</p>
</li>
</ul>
<p>Thus, for example, an edge geometry that is considered valid by the <a href="sdo_topo_map_ref.htm#CACJAICB">SDO_TOPO_MAP.VALIDATE_TOPO_MAP</a> or <a href="sdo_topo_map_ref.htm#CHEBDBEA">SDO_TOPO_MAP.VALIDATE_TOPOLOGY</a> function might not be valid if that geometry is passed to the SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT function.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHBJJGD"></a>
<div id="TOPOL731" class="sect1">
<h2 class="sect1"><span class="secnum">1.3</span> <a id="sthref41"></a><a id="sthref42"></a>Topology Geometries and Layers</h2>
<p>A <span class="bold">topology</span> <span class="bold">geometry</span> (also referred to as a <span class="bold">feature</span>) is a spatial representation of a real world object. For example, <span class="italic">Main Street</span> and <span class="italic">Walden State Park</span> might be the names of topology geometries. The geometry is stored as a set of <span class="bold">topological elements</span> (nodes, edges, and faces), which are sometimes also referred to as <span class="italic">primitives</span>. Each topology geometry has a unique ID (assigned by Spatial when records are imported or loaded) associated with it.</p>
<p>A <a id="sthref43"></a><a id="sthref44"></a><a id="sthref45"></a><span class="bold">topology geometry layer</span> consists of topology geometries, usually of a specific topology geometry type, although it can be a collection of multiple types (see <a href="#CIHIFCBG">Section 1.3.2</a> for information about collection layers). For example, <span class="italic">Streets</span> might be the topology geometry layer that includes the <span class="italic">Main Street</span> topology geometry, and <span class="italic">State Parks</span> might be the topology geometry layer that includes the <span class="italic">Walden State Park</span> topology geometry. Each topology geometry layer has a unique ID (assigned by Spatial) associated with it. The data for each topology geometry layer is stored in a <a id="sthref46"></a><span class="bold">feature table</span>. For example, a feature table named CITY_STREETS might contain information about all topology geometries (individual roads or streets) in the <span class="italic">Streets</span> topology geometry layer.</p>
<p>Each topology geometry (feature) is defined as an object of type SDO_TOPO_GEOMETRY (described in <a href="#BABHHIDJ">Section 1.6.1</a>), which identifies the topology geometry type, topology geometry ID, topology geometry layer ID, and topology ID for the topology.</p>
<p>Topology metadata is automatically maintained by Spatial in the USER_SDO_TOPO_METADATA and ALL_SDO_TOPO_METADATA views, which are described in <a href="#BABHDJDG">Section 1.7.2</a>. The USER_SDO_TOPO_INFO and ALL_SDO_TOPO_INFO views (described in <a href="#BABCDJJC">Section 1.7.1</a>) contain a subset of this topology metadata.</p>
<a id="CIHGIBFE"></a>
<div id="TOPOL732" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.3.1</span> Features</h3>
<p>Often, there are fewer features in a topology than there are topological elements (nodes, edges, and faces). For example, a road feature may consist of many edges, an area feature such as a park may consist of many faces, and some nodes may not be associated with point features. <a href="#CIHHABGI">Figure 1-3</a> shows point, line, and area features associated with the topology that was shown in <a href="#BABCJFAD">Figure 1-1</a> in <a href="#CIHIBIFG">Section 1.2</a>.</p>
<div id="TOPOL733" class="figure">
<p class="titleinfigure"><a id="CIHHABGI"></a>Figure 1-3 Features in a Topology</p>
<img width="576" height="406" src="img/topo_features.gif" alt="Description of Figure 1-3 follows" /><br />
<a id="sthref47" href="img_text/topo_features.htm">Description of "Figure 1-3 Features in a Topology"</a><br />
<br /></div>
<!-- class="figure" -->
<p><a href="#CIHHABGI">Figure 1-3</a> shows the following kinds of features in the topology:</p>
<ul>
<li>
<p>Point features (traffic signs), shown as dark circles: <code>S1</code>, <code>S2</code>, <code>S3</code>, and <code>S4</code></p>
</li>
<li>
<p>Linear features (roads or streets), shown as dashed lines: <code>R1</code>, <code>R2</code>, <code>R3</code>, and <code>R4</code></p>
</li>
<li>
<p>Area features (land parcels), shown as rectangles: <code>P1</code>, <code>P2</code>, <code>P3</code>, <code>P4</code>, and <code>P5</code></p>
<p>Land parcel <code>P5</code> does not include the shaded area within its area. (Specifically, <code>P5</code> includes face <code>F1</code> but not face <code>F9</code>. These faces are shown in <a href="#BABCJFAD">Figure 1-1</a> in <a href="#CIHIBIFG">Section 1.2</a>.)</p>
</li>
</ul>
<p><a href="#CIHDDJBA">Example 1-12</a> in <a href="#CIHCEGJI">Section 1.12.1</a> defines these features.</p>
</div>
<!-- class="sect2" -->
<a id="CIHIFCBG"></a>
<div id="TOPOL734" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.3.2</span> <a id="sthref48"></a><a id="sthref49"></a>Collection Layers</h3>
<p>A <span class="bold">collection layer</span> is a topology geometry layer that can contain topological elements of different topology geometry types. For example, using the <code>CITY_DATA</code> topology from the examples in <a href="#i885918">Section 1.12</a>, you could create a collection layer to contain specific land parcel, city street, and traffic sign elements.</p>
<p>To create a collection layer, follow essentially the same steps for creating other types of layers. Create a feature table for the layer, as in the following example:</p>
<pre>
CREATE TABLE collected_features ( -- Selected heterogeneous features
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
</pre>
<p>Associate the feature table with the topology, specifying <code>COLLECTION</code> for the <code>topo_geometry_layer_type</code> parameter in the call to the <a href="sdo_topo_ref.htm#CACJJACH">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</a> procedure, as in the following example:</p>
<pre>
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', COLLECTED_FEATURES', 'FEATURE', 'COLLECTION');
</pre>
<p>To load the feature table for the collection layer, insert the necessary rows, as shown in <a href="#CIHDJHIJ">Example 1-1</a>.</p>
<div id="TOPOL735" class="example">
<p class="titleinexample"><a id="CIHDJHIJ"></a>Example 1-1 Loading the Feature Table for a Collection Layer</p>
<pre>
-- Take R5 from the CITY_STREETS layer.
INSERT INTO collected_features VALUES(
  'C_R5',
  SDO_TOPO_GEOMETRY('CITY_DATA',
    2,  -- tg_type = line/multiline
    4,  -- tg_layer_id
    SDO_TOPO_OBJECT_ARRAY(
      SDO_TOPO_OBJECT(20, 2),
      SDO_TOPO_OBJECT(-9, 2)))
);
 
-- Take S3 from the TRAFFIC_SIGNS layer.
INSERT INTO collected_features VALUES(
  'C_S3',
  SDO_TOPO_GEOMETRY('CITY_DATA',
    1,  -- tg_type = point/multipoint 
    4,  -- topo layer id
    SDO_TOPO_OBJECT_ARRAY(
       SDO_TOPO_OBJECT(6, 1)))
);
 
-- Take P3 from the LAND_PARCELS layer.
INSERT INTO collected_features VALUES(
  'C_P3',
  SDO_TOPO_GEOMETRY('CITY_DATA',
    3,  -- tg_type = (multi)polygon
    4,
    SDO_TOPO_OBJECT_ARRAY(
      SDO_TOPO_OBJECT(5, 3),
      SDO_TOPO_OBJECT(8, 3)))
);
 
-- Create a collection from a polygon and a point.
INSERT INTO collected_features VALUES(
  'C1',
  SDO_TOPO_GEOMETRY('CITY_DATA',
    4,  -- tg_type = collection
    4,
    SDO_TOPO_OBJECT_ARRAY(
      SDO_TOPO_OBJECT(5, 3),
      SDO_TOPO_OBJECT(6, 1)))
);
 
-- Create a collection from a polygon and a line.
INSERT INTO collected_features VALUES(
  'C2',
  SDO_TOPO_GEOMETRY('CITY_DATA',
    4,  -- tg_type = collection
    4,
    SDO_TOPO_OBJECT_ARRAY(
      SDO_TOPO_OBJECT(8, 3),
      SDO_TOPO_OBJECT(10, 2)))
);
                  
-- Create a collection from a line and a point.
INSERT INTO collected_features VALUES(
  'C3',
  SDO_TOPO_GEOMETRY('CITY_DATA',
     4,  -- tg_type = collection
     4,
     SDO_TOPO_OBJECT_ARRAY(
       SDO_TOPO_OBJECT(-5, 2),
       SDO_TOPO_OBJECT(10, 1)))
);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHHGJAB"></a>
<div id="TOPOL736" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.4</span> <a id="sthref50"></a><a id="sthref51"></a><a id="sthref52"></a>Topology Geometry Layer Hierarchy</h2>
<p>In some topologies, the topology geometry layers (feature layers) have one or more parent-child relationships in a <span class="bold">topology hierarchy</span>. That is, the layer at the topmost level consists of features in its child layer at the next level down in the hierarchy; the child layer might consist of features in its child layer at the next layer farther down; and so on. For example, a land use topology might have the following topology geometry layers at different levels of hierarchy:</p>
<ul>
<li>
<p>States at the highest level, which consists of features from its child layer, Counties</p>
</li>
<li>
<p>Counties at the next level down, which consists of features from its child layer, Tracts</p>
</li>
<li>
<p>Tracts at the next level down, which consists of features from its child layer, Block Groups</p>
</li>
<li>
<p>Block Groups at the next level down, which consists of features from its child layer, Land Parcels</p>
</li>
<li>
<p>Land Parcels at the lowest level of the hierarchy</p>
</li>
</ul>
<p>If the topology geometry layers in a topology have this hierarchical relationship, it is far more efficient if you model the layers as hierarchical than if you specify all topology geometry layers at a single level (that is, with no hierarchy). For example, it is more efficient to construct SDO_TOPO_GEOMETRY objects for counties by specifying only the tracts in the county than by specifying all land parcels in all block groups in all tracts in the county.</p>
<p><a id="sthref53"></a><a id="sthref54"></a>The lowest level (for the topology geometry layer containing the smallest kinds of features) in a hierarchy is level 0, and successive higher levels are numbered 1, 2, and so on. Topology geometry layers at adjacent levels of a hierarchy have a parent-child relationship. Each topology geometry layer at the higher level is the <span class="bold">parent layer</span> for one layer at the lower level, which is its <span class="bold">child layer</span>. A parent layer can have only one child layer, but a child layer can have one or more parent layers. Using the preceding example, the Counties layer can have only one child layer, Tracts; however, the Tracts layer could have parent layers named Counties and Water Districts.</p>
<div align="center">
<div class="inftblinformal"><br />
<table class="cellalignment788">
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785">
<p class="notep1">Note:</p>
Topology geometry layer hierarchy is somewhat similar to network hierarchy, which is described in <a href="sdo_net_concepts.htm#CIHDHHGB">Section 5.5</a>; however, there are significant differences, and you should not confuse the two. For example, the lowest topology geometry layer hierarchy level is 0, and the lowest network hierarchy level is 1; and in a topology geometry layer hierarchy each parent must have one child and each child can have many parents, while in a network hierarchy each parent can have many children and each child must have one parent.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<p><a href="#CIHIFGJE">Figure 1-4</a> shows the preceding example topology geometry layer hierarchy. Each level of the hierarchy shows the level number and the topology geometry layer in that level.</p>
<div id="TOPOL737" class="figure">
<p class="titleinfigure"><a id="CIHIFGJE"></a>Figure 1-4 Topology Geometry Layer Hierarchy</p>
<img width="306" height="472" src="img/topo_hier.gif" alt="Description of Figure 1-4 follows" /><br />
<a id="sthref55" href="img_text/topo_hier.htm">Description of "Figure 1-4 Topology Geometry Layer Hierarchy"</a><br />
<br /></div>
<!-- class="figure" -->
<p>To model topology geometry layers as hierarchical, specify the child layer in the <code>child_layer_id</code> parameter when you call the <a href="sdo_topo_ref.htm#CACJJACH">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</a> procedure to add a parent topology geometry layer to the topology. Add the lowest-level (level 0) topology geometry layer first; then add the level 1 layer, specifying the level 0 layer as its child; then add the level 2 layer, specifying the level 1 layer as its child; and so on. <a href="#CIHGEIDI">Example 1-2</a> shows five topology geometry layers being added so that the 5-level hierarchy is established.</p>
<div id="TOPOL738" class="example">
<p class="titleinexample"><a id="CIHGEIDI"></a>Example 1-2 Modeling a Topology Geometry Layer Hierarchy</p>
<pre>
-- Create the topology. (Null SRID in this example.)
EXECUTE SDO_TOPO.CREATE_TOPOLOGY('LAND_USE_HIER', 0.00005);
 
-- Create feature tables.
CREATE TABLE land_parcels ( -- Land parcels (selected faces)
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE block_groups (
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE tracts (
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE counties (
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE states (
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
-- (Other steps not shown here, such as populating the feature tables
-- and initializing the metadata.)
. . .
-- Associate feature tables with the topology; include hierarchy information.

DECLARE
  land_parcels_id NUMBER;
  block_groups_id NUMBER;
  tracts_id NUMBER;
  counties_id NUMBER;
BEGIN
SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('LAND_USE_HIER', 'LAND_PARCELS',
  'FEATURE','POLYGON');
SELECT tg_layer_id INTO land_parcels_id FROM user_sdo_topo_info 
  WHERE topology = 'LAND_USE_HIER' AND table_name = 'LAND_PARCELS';
SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('LAND_USE_HIER', 'BLOCK_GROUPS',
  'FEATURE','POLYGON', NULL, land_parcels_id);
SELECT tg_layer_id INTO block_groups_id FROM user_sdo_topo_info 
  WHERE topology = 'LAND_USE_HIER' AND table_name = 'BLOCK_GROUPS';
SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('LAND_USE_HIER', 'TRACTS',
  'FEATURE','POLYGON', NULL, block_groups_id);
SELECT tg_layer_id INTO tracts_id FROM user_sdo_topo_info 
  WHERE topology = 'LAND_USE_HIER' AND table_name = 'TRACTS';
SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('LAND_USE_HIER', 'COUNTIES',
  'FEATURE','POLYGON', NULL, tracts_id);
SELECT tg_layer_id INTO counties_id FROM user_sdo_topo_info 
  WHERE topology = 'LAND_USE_HIER' AND table_name = 'COUNTIES';
SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('LAND_USE_HIER', 'STATES',
  'FEATURE','POLYGON', NULL, counties_id);
END;/
 
</pre></div>
<!-- class="example" -->
<p>Within each level above level 0, each layer can contain features built from features at the next lower level (as is done in <a href="#CIHGEIDI">Example 1-2</a>), features built from topological elements (faces, nodes, edges), or a combination of these. For example, a tracts layer can contain tracts built from block groups or tracts built from faces, or both. However, each feature within the layer must be built only either from features from the next lower level or from topological elements. For example, a specific tract can consist of block groups or it can consist of faces, but it cannot consist of a combination of block groups and faces.</p>
<p>To insert or update topology geometry objects in feature tables for the levels in a hierarchy, use the appropriate forms of the SDO_TOPO_GEOMETRY constructor. Feature tables are described in <a href="#CIHBJJGD">Section 1.3</a>, and SDO_TOPO_GEOMETRY constructors are described in <a href="#CIHJJCGB">Section 1.6.2</a>.</p>
<div align="center">
<div class="inftblinformal"><br />
<table class="cellalignment788">
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785">
<p class="notep1">Note:</p>
The TOPO_ID and TOPO_TYPE attributes in the relationship information table have special meanings when applied to parent layers in a topology with a topology geometry layer hierarchy. See the explanations of these attributes in <a href="#CIHHEAAE">Table 1-5</a> in <a href="#BABIGFIG">Section 1.5.4</a>.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
</div>
<!-- class="sect1" -->
<a id="BABBBDBJ"></a>
<div id="TOPOL739" class="sect1">
<h2 class="sect1"><span class="secnum">1.5</span> Topology Data Model Tables</h2>
<p>To use the Spatial topology capabilities, you must first insert data into special edge, node, and face tables, which are created by Spatial when you create a topology. The edge, node, and face tables are described in <a href="#BABHGFAA">Section 1.5.1</a>, <a href="#BABHHHEB">Section 1.5.2</a>, and <a href="#BABCICEI">Section 1.5.3</a>, respectively.</p>
<p>Spatial automatically maintains a relationship information (&lt;topology-name&gt;_RELATION$) table for each topology, which is created the first time that a feature table is associated with a topology (that is, at the first call to the <a href="sdo_topo_ref.htm#CACJJACH">SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER</a> procedure that specifies the topology). The relationship information table is described in <a href="#BABIGFIG">Section 1.5.4</a>.</p>
<p><a href="#CIHIBGIJ">Figure 1-5</a> shows the role of the relationship information table in connecting information in a feature table with information in its associated node, edge, or face table.</p>
<div id="TOPOL740" class="figure">
<p class="titleinfigure"><a id="CIHIBGIJ"></a>Figure 1-5 Mapping Between Feature Tables and Topology Tables</p>
<img width="504" height="138" src="img/feat_topo_rel.gif" alt="Description of Figure 1-5 follows" /><br />
<a id="sthref56" href="img_text/feat_topo_rel.htm">Description of "Figure 1-5 Mapping Between Feature Tables and Topology Tables"</a><br />
<br /></div>
<!-- class="figure" -->
<p>As shown in <a href="#CIHIBGIJ">Figure 1-5</a>, the mapping between feature tables and the topology node, edge, and face tables occurs through the &lt;topology-name&gt;_RELATION$ table. In particular:</p>
<ul>
<li>
<p>Each feature table includes a column of type SDO_TOPO_GEOMETRY. This type includes a TG_LAYER_ID attribute (the unique ID assigned by Oracle Spatial when the layer is created), as well as a TG_ID attribute (the unique ID assigned to each feature in a layer). The values in these two columns have corresponding values in the TG_LAYER_ID and TG_ID columns in the &lt;topology-name&gt;_RELATION$ table.</p>
</li>
<li>
<p>Each feature has one or more rows in the &lt;topology-name&gt;_RELATION$ table.</p>
</li>
<li>
<p>Given the TG_LAYER_ID and TG_ID values for a feature, the set of nodes, faces, and edges associated with the feature can be determined by matching the TOPO_ID value (the node, edge, or face ID) in the &lt;topology-name&gt;_RELATION$ table with the corresponding ID value in the &lt;topology-name&gt;_NODE$, &lt;topology-name&gt;_EDGE$, or &lt;topology-name&gt;_FACE$ table.</p>
</li>
</ul>
<p><a id="sthref57"></a>The following considerations apply to schema, table, and column names that are stored in any Oracle Spatial metadata views. For example, these considerations apply to the names of edge, node, face, relationship, and history information tables, and to the names of any columns in these tables and schemas for these tables that are stored in the topology metadata views described in <a href="#CIHJACAC">Section 1.7</a>.</p>
<ul>
<li>
<p>The name must contain only letters, numbers, and underscores. For example, the name cannot contain a space ( ), an apostrophe (<code>'</code>), a quotation mark (<code>"</code>), or a comma (<code>,</code>).</p>
</li>
<li>
<p>All letters in the names are converted to uppercase before the names are stored in metadata views or before the tables are accessed. This conversion also applies to any schema name specified with the table name.</p>
</li>
</ul>
<a id="BABHGFAA"></a>
<div id="TOPOL741" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.1</span> <a id="sthref58"></a><a id="sthref59"></a>Edge Information Table</h3>
<p>You must store information about the edges in a topology in the &lt;topology-name&gt;_EDGE$ table, where <span class="italic">&lt;topology-name&gt;</span> is the name of the topology as specified in the call to the <a href="sdo_topo_ref.htm#CHEIBHDI">SDO_TOPO.CREATE_TOPOLOGY</a> procedure. Each edge information table has the columns shown in <a href="#BABBEDCB">Table 1-1</a>.</p>
<div id="TOPOL742" class="tblformal">
<p class="titleintable"><a id="sthref60"></a><a id="BABBEDCB"></a>Table 1-1 Columns in the &lt;topology-name&gt;_EDGE$ Table</p>
<table class="cellalignment789" title="Columns in the &lt;topology-name&gt;_EDGE$ Table" summary="Columns in the &lt;topology-name&gt;_EDGE Table" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t5">Column Name</th>
<th class="cellalignment790" id="r1c2-t5">Data Type</th>
<th class="cellalignment790" id="r1c3-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t5" headers="r1c1-t5">
<p>EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r2c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r2c1-t5 r1c3-t5">
<p>Unique ID number for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t5" headers="r1c1-t5">
<p>START_NODE_ID</p>
</td>
<td class="cellalignment785" headers="r3c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r3c1-t5 r1c3-t5">
<p>ID number of the start node for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t5" headers="r1c1-t5">
<p>END_NODE_ID</p>
</td>
<td class="cellalignment785" headers="r4c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r4c1-t5 r1c3-t5">
<p>ID number of the end node for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t5" headers="r1c1-t5">
<p>NEXT_LEFT_EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r5c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r5c1-t5 r1c3-t5">
<p>ID number (signed) of the next left edge for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r6c1-t5" headers="r1c1-t5">
<p>PREV_LEFT_EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r6c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r6c1-t5 r1c3-t5">
<p>ID number (signed) of the previous left edge for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r7c1-t5" headers="r1c1-t5">
<p>NEXT_RIGHT_EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r7c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r7c1-t5 r1c3-t5">
<p>ID number (signed) of the next right edge for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r8c1-t5" headers="r1c1-t5">
<p>PREV_RIGHT_EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r8c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r8c1-t5 r1c3-t5">
<p>ID number (signed) of the previous right edge for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r9c1-t5" headers="r1c1-t5">
<p>LEFT_FACE_ID</p>
</td>
<td class="cellalignment785" headers="r9c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r9c1-t5 r1c3-t5">
<p>ID number of the left face for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r10c1-t5" headers="r1c1-t5">
<p>RIGHT_FACE_ID</p>
</td>
<td class="cellalignment785" headers="r10c1-t5 r1c2-t5">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r10c1-t5 r1c3-t5">
<p>ID number of the right face for this edge</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r11c1-t5" headers="r1c1-t5">
<p>GEOMETRY</p>
</td>
<td class="cellalignment785" headers="r11c1-t5 r1c2-t5">
<p>SDO_GEOMETRY</p>
</td>
<td class="cellalignment785" headers="r11c1-t5 r1c3-t5">
<p>Geometry object (line string) representing this edge, listing the coordinates in the natural order for the positive directed edge</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The NEXT_LEFT_EDGE_ID and NEXT_RIGHT_EDGE_ID values refer to the next directed edges in the counterclockwise delineation of the perimeters of the left and right faces, respectively. The PREV_LEFT_EDGE_ID and PREV_RIGHT_EDGE_ID values refer to the previous directed edges in the counterclockwise delineation of the perimeters of the left and right faces, respectively. The LEFT_FACE_ID value refers to the face to the left of the positive directed edge, and the RIGHT_FACE_ID value refers to the face to the left of the negative directed edge. For any numeric ID value, the sign indicates which orientation of the target edge is being referred to.</p>
<p><a href="#CIHDGGDF">Figure 1-6</a> shows nodes, edges, and faces that illustrate the relationships among the various ID columns in the edge information table. (In <a href="#CIHDGGDF">Figure 1-6</a>, thick lines show the edges, and thin lines with arrowheads show the direction of each edge.)</p>
<div id="TOPOL743" class="figure">
<p class="titleinfigure"><a id="CIHDGGDF"></a>Figure 1-6 Nodes, Edges, and Faces</p>
<img width="293" height="191" src="img/edge_table.gif" alt="Description of Figure 1-6 follows" /><br />
<a id="sthref61" href="img_text/edge_table.htm">Description of "Figure 1-6 Nodes, Edges, and Faces"</a><br />
<br /></div>
<!-- class="figure" -->
<p><a href="#CIHDFHFF">Table 1-2</a> shows the ID column values in the edge information table for edges E4 and E8 in <a href="#CIHDGGDF">Figure 1-6</a>. (For clarity, <a href="#CIHDFHFF">Table 1-2</a> shows ID column values with alphabetical characters, such as E4 and N1; however, the ID columns actually contain numeric values only, specifically the numeric ID value associated with each named object.)</p>
<div id="TOPOL744" class="tblformal">
<p class="titleintable"><a id="sthref62"></a><a id="CIHDFHFF"></a>Table 1-2 Edge Table ID Column Values</p>
<table class="cellalignment789" title="Edge Table ID Column Values" summary="Edge Table ID Column Values" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t6">EDGE_ID</th>
<th class="cellalignment790" id="r1c2-t6">START_NODE_ID</th>
<th class="cellalignment790" id="r1c3-t6">END_NODE_ID</th>
<th class="cellalignment790" id="r1c4-t6">NEXT_LEFT_EDGE_ID</th>
<th class="cellalignment790" id="r1c5-t6">PREV_LEFT_EDGE_ID</th>
<th class="cellalignment790" id="r1c6-t6">NEXT_RIGHT_EDGE_ID</th>
<th class="cellalignment790" id="r1c7-t6">PREV_RIGHT_EDGE_ID</th>
<th class="cellalignment790" id="r1c8-t6">LEFT_FACE_ID</th>
<th class="cellalignment790" id="r1c9-t6">RIGHT_FACE_ID</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t6" headers="r1c1-t6">
<p>E4</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c2-t6">
<p>N1</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c3-t6">
<p>N2</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c4-t6">
<p>-E5</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c5-t6">
<p>E3</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c6-t6">
<p>E2</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c7-t6">
<p>-E6</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c8-t6">
<p>F1</p>
</td>
<td class="cellalignment785" headers="r2c1-t6 r1c9-t6">
<p>F2</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t6" headers="r1c1-t6">
<p>E8</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c2-t6">
<p>N4</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c3-t6">
<p>N3</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c4-t6">
<p>-E8</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c5-t6">
<p>-E8</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c6-t6">
<p>E8</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c7-t6">
<p>E8</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c8-t6">
<p>F2</p>
</td>
<td class="cellalignment785" headers="r3c1-t6 r1c9-t6">
<p>F2</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>In <a href="#CIHDGGDF">Figure 1-6</a> and <a href="#CIHDFHFF">Table 1-2</a>:</p>
<ul>
<li>
<p>The start node and end node for edge E4 are N1 and N2, respectively. The next left edge for edge E4 is E5, but its direction is the opposite of edge E4, and therefore the next left edge for E4 is stored as -E5 (negative E5).</p>
</li>
<li>
<p>The previous left edge for edge E4 is E3, and because it has the same direction as edge E4, the previous left edge for E4 is stored as E3.</p>
</li>
<li>
<p>The next right face is determined using the negative directed edge of E4. This can be viewed as reversing the edge direction and taking the next left edge and previous left edge. In this case, the next right edge is E2 and the previous right edge is -E6 (the direction of edge E6 is opposite the negative direction of edge E4). For edge E4, the left face is F1 and the right face is F2.</p>
</li>
<li>
<p>Edges E1 and E7 are neither leftmost nor rightmost edges with respect to edge E4, and therefore they do not appear in the edge table row associated with edge E4.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABHHHEB"></a>
<div id="TOPOL745" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.2</span> <a id="sthref63"></a><a id="sthref64"></a>Node Information Table</h3>
<p>You must store information about the nodes in a topology in the &lt;topology-name&gt;_NODE$ table, where <span class="italic">&lt;topology-name&gt;</span> is the name of the topology as specified in the call to the <a href="sdo_topo_ref.htm#CHEIBHDI">SDO_TOPO.CREATE_TOPOLOGY</a> procedure. Each node information table has the columns shown in <a href="#BABCDIBA">Table 1-3</a>.</p>
<div id="TOPOL746" class="tblformal">
<p class="titleintable"><a id="sthref65"></a><a id="BABCDIBA"></a>Table 1-3 Columns in the &lt;topology-name&gt;_NODE$ Table</p>
<table class="cellalignment789" title="Columns in the &lt;topology-name&gt;_NODE$ Table" summary="Columns in the &lt;topology-name&gt;_NODE$ Table" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t7">Column Name</th>
<th class="cellalignment790" id="r1c2-t7">Data Type</th>
<th class="cellalignment790" id="r1c3-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t7" headers="r1c1-t7">
<p>NODE_ID</p>
</td>
<td class="cellalignment785" headers="r2c1-t7 r1c2-t7">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r2c1-t7 r1c3-t7">
<p>Unique ID number for this node</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t7" headers="r1c1-t7">
<p>EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r3c1-t7 r1c2-t7">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r3c1-t7 r1c3-t7">
<p>ID number (signed) of the edge (if any) associated with this node</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t7" headers="r1c1-t7">
<p>FACE_ID</p>
</td>
<td class="cellalignment785" headers="r4c1-t7 r1c2-t7">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r4c1-t7 r1c3-t7">
<p>ID number of the face (if any) associated with this node</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t7" headers="r1c1-t7">
<p>GEOMETRY</p>
</td>
<td class="cellalignment785" headers="r5c1-t7 r1c2-t7">
<p>SDO_GEOMETRY</p>
</td>
<td class="cellalignment785" headers="r5c1-t7 r1c3-t7">
<p>Geometry object (point) representing this node</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>For each node, the EDGE_ID or FACE_ID value (but not both) must be null:</p>
<ul>
<li>
<p>If the EDGE_ID value is null, the node is an isolated node (that is, isolated in a face).</p>
</li>
<li>
<p>If the FACE_ID value is null, the node is not an isolated node, but rather the start node or end node of an edge.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABCICEI"></a>
<div id="TOPOL747" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.3</span> <a id="sthref66"></a><a id="sthref67"></a>Face Information Table</h3>
<p>You must store information about the faces in a topology in the &lt;topology-name&gt;_FACE$ table, where <span class="italic">&lt;topology-name&gt;</span> is the name of the topology as specified in the call to the <a href="sdo_topo_ref.htm#CHEIBHDI">SDO_TOPO.CREATE_TOPOLOGY</a> procedure. Each face information table has the columns shown in <a href="#BABFDFIA">Table 1-4</a>.</p>
<div id="TOPOL748" class="tblformal">
<p class="titleintable"><a id="sthref68"></a><a id="BABFDFIA"></a>Table 1-4 Columns in the &lt;topology-name&gt;_FACE$ Table</p>
<table class="cellalignment789" title="Columns in the &lt;topology-name&gt;_FACE$ Table" summary="Columns in the &lt;topology-name&gt;_FACE$ Table" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t8">Column Name</th>
<th class="cellalignment790" id="r1c2-t8">Data Type</th>
<th class="cellalignment790" id="r1c3-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t8" headers="r1c1-t8">
<p>FACE_ID</p>
</td>
<td class="cellalignment785" headers="r2c1-t8 r1c2-t8">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r2c1-t8 r1c3-t8">
<p>Unique ID number for this face</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t8" headers="r1c1-t8">
<p>BOUNDARY_EDGE_ID</p>
</td>
<td class="cellalignment785" headers="r3c1-t8 r1c2-t8">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r3c1-t8 r1c3-t8">
<p>ID number of the boundary edge for this face. The sign of this number (which is ignored for use as a key) indicates which orientation is being used for this boundary component (positive numbers indicate the left of the edge, and negative numbers indicate the right of the edge).</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t8" headers="r1c1-t8">
<p>ISLAND_EDGE_ID_LIST</p>
</td>
<td class="cellalignment785" headers="r4c1-t8 r1c2-t8">
<p>SDO_LIST_TYPE</p>
</td>
<td class="cellalignment785" headers="r4c1-t8 r1c3-t8">
<p>Island edges (if any) in this face. (The SDO_LIST_TYPE type is described in <a href="#BABJAIJI">Section 1.6.6</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t8" headers="r1c1-t8">
<p>ISLAND_NODE_ID_LIST</p>
</td>
<td class="cellalignment785" headers="r5c1-t8 r1c2-t8">
<p>SDO_LIST_TYPE</p>
</td>
<td class="cellalignment785" headers="r5c1-t8 r1c3-t8">
<p>Island nodes (if any) in this face. (The SDO_LIST_TYPE type is described in <a href="#BABJAIJI">Section 1.6.6</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r6c1-t8" headers="r1c1-t8">
<p>MBR_GEOMETRY</p>
</td>
<td class="cellalignment785" headers="r6c1-t8 r1c2-t8">
<p>SDO_GEOMETRY</p>
</td>
<td class="cellalignment785" headers="r6c1-t8 r1c3-t8">
<p>Minimum bounding rectangle (MBR) that encloses this face. (This is required, except for the universe face.) The MBR must be stored as an optimized rectangle (a rectangle in which only the lower-left and the upper-right corners are specified). The <a href="sdo_topo_ref.htm#CACJJFFE">SDO_TOPO.INITIALIZE_METADATA</a> procedure creates a spatial index on this column.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="BABIGFIG"></a>
<div id="TOPOL749" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.4</span> <a id="sthref69"></a>Relationship Information Table</h3>
<p>As you work with topological elements, Spatial automatically maintains information about each object in &lt;topology-name&gt;_RELATION$ tables, where <span class="italic">&lt;topology-name&gt;</span> is the name of the topology and there is one such table for each topology. Each row in the table uniquely identifies a topology geometry with respect to its topology geometry layer and topology. Each relationship information table has the columns shown in <a href="#CIHHEAAE">Table 1-5</a>.</p>
<div id="TOPOL750" class="tblformal">
<p class="titleintable"><a id="sthref70"></a><a id="CIHHEAAE"></a>Table 1-5 Columns in the &lt;topology-name&gt;_RELATION$ Table</p>
<table class="cellalignment789" title="Columns in the &lt;topology-name&gt;_RELATION$ Table" summary="Columns in the &lt;topology-name&gt;_RELATION$ Table" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t9">Column Name</th>
<th class="cellalignment790" id="r1c2-t9">Data Type</th>
<th class="cellalignment790" id="r1c3-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t9" headers="r1c1-t9">
<p>TG_LAYER_ID</p>
</td>
<td class="cellalignment785" headers="r2c1-t9 r1c2-t9">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r2c1-t9 r1c3-t9">
<p>ID number of the topology geometry layer to which the topology geometry belongs</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t9" headers="r1c1-t9">
<p>TG_ID</p>
</td>
<td class="cellalignment785" headers="r3c1-t9 r1c2-t9">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r3c1-t9 r1c3-t9">
<p>ID number of the topology geometry</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t9" headers="r1c1-t9">
<p>TOPO_ID</p>
</td>
<td class="cellalignment785" headers="r4c1-t9 r1c2-t9">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r4c1-t9 r1c3-t9">
<p>For a topology that does not have a topology geometry layer hierarchy: ID number of a topological element in the topology geometry</p>
<p>For a topology that has a topology geometry layer hierarchy: Reserved for Oracle use</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t9" headers="r1c1-t9">
<p>TOPO_TYPE</p>
</td>
<td class="cellalignment785" headers="r5c1-t9 r1c2-t9">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r5c1-t9 r1c3-t9">
<p>For a topology that does not have a topology geometry layer hierarchy: 1 = node, 2 = edge, 3 = face</p>
<p>For a topology that has a topology geometry layer hierarchy: Reserved for Oracle use</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r6c1-t9" headers="r1c1-t9">
<p>TOPO_ATTRIBUTE</p>
</td>
<td class="cellalignment785" headers="r6c1-t9 r1c2-t9">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r6c1-t9 r1c3-t9">
<p>Reserved for Oracle use</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="CIHJICHI"></a>
<div id="TOPOL751" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.5</span> <a id="sthref71"></a>History Information Table</h3>
<p>The history information table for a topology contains information about editing operations that are not recorded in other information tables. Thus, the history information table is not a comprehensive record of topology modifications. Instead, it contains rows for node, edge, or face editing operations only when one or more feature tables are associated with the topology and any of the following conditions are met:</p>
<ul>
<li>
<p>An existing face or edge is split as a result of the operation.</p>
</li>
<li>
<p>A single face or edge is created by merging two faces or two edges as a result of the operation.</p>
</li>
</ul>
<p>Spatial automatically maintains information about these operations in &lt;topology-name&gt;_HISTORY$ tables, where <span class="italic">&lt;topology-name&gt;</span> is the name of the topology and there is one such table for each topology. Each row in the table uniquely identifies an editing operation on a topological element, although an editing operation (such as using the <a href="sdo_topo_map_ref.htm#CACFGIFG">SDO_TOPO_MAP.ADD_POLYGON_GEOMETRY</a> function) can add multiple rows. (Topology editing is discussed in <a href="sdo_topo_editing.htm#CEGEHADJ">Chapter 2</a>.) Each history information table has the columns shown in <a href="#CIHEEGEF">Table 1-6</a>.</p>
<div id="TOPOL752" class="tblformal">
<p class="titleintable"><a id="sthref72"></a><a id="CIHEEGEF"></a>Table 1-6 Columns in the &lt;topology-name&gt;_HISTORY$ Table</p>
<table class="cellalignment789" title="Columns in the &lt;topology-name&gt;_HISTORY$ Table" summary="Columns in the &lt;topology-name&gt;_HISTORY$ Table" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t10">Column Name</th>
<th class="cellalignment790" id="r1c2-t10">Data Type</th>
<th class="cellalignment790" id="r1c3-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t10" headers="r1c1-t10">
<p>TOPO_TX_ID</p>
</td>
<td class="cellalignment785" headers="r2c1-t10 r1c2-t10">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r2c1-t10 r1c3-t10">
<p>ID number of the transaction that was started by a call to the <a href="sdo_topo_map_ref.htm#CACBEHDF">SDO_TOPO_MAP.LOAD_TOPO_MAP</a> function or procedure or to the loadWindow or loadTopology Java method. Each transaction can consist of several editing operations. You can get the transaction ID number for the current updatable TopoMap object by calling the <a href="sdo_topo_map_ref.htm#CACGJFJB">SDO_TOPO_MAP.GET_TOPO_TRANSACTION_ID</a> function.</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t10" headers="r1c1-t10">
<p>TOPO_SEQUENCE</p>
</td>
<td class="cellalignment785" headers="r3c1-t10 r1c2-t10">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r3c1-t10 r1c3-t10">
<p>Sequence number assigned to an editing operation within the transaction</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t10" headers="r1c1-t10">
<p>TOPOLOGY</p>
</td>
<td class="cellalignment785" headers="r4c1-t10 r1c2-t10">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r4c1-t10 r1c3-t10">
<p>ID of the topology containing the objects being edited</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t10" headers="r1c1-t10">
<p>TOPO_ID</p>
</td>
<td class="cellalignment785" headers="r5c1-t10 r1c2-t10">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r5c1-t10 r1c3-t10">
<p>ID number of a topological element in the topology geometry</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r6c1-t10" headers="r1c1-t10">
<p>TOPO_TYPE</p>
</td>
<td class="cellalignment785" headers="r6c1-t10 r1c2-t10">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r6c1-t10 r1c3-t10">
<p>Type of topological element: 1 = node, 2 = edge, 3 = face</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r7c1-t10" headers="r1c1-t10">
<p>TOPO_OP</p>
</td>
<td class="cellalignment785" headers="r7c1-t10 r1c2-t10">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r7c1-t10 r1c3-t10">
<p>Type of editing operation that was performed on the topological element: <code>I</code> for insert or <code>D</code> for delete</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r8c1-t10" headers="r1c1-t10">
<p>PARENT_ID</p>
</td>
<td class="cellalignment785" headers="r8c1-t10 r1c2-t10">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r8c1-t10 r1c3-t10">
<p>For an insert operation, the ID of the parent topological element from which the current topological element is derived; for a delete operation, the ID of the resulting topological element</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Consider the following examples:</p>
<ul>
<li>
<p>Adding a node to break edge E2, generating edge E3: The TOPO_ID value of the new edge is the ID of E3, the TOPO_TYPE value is 2, the PARENT_ID value is the ID of E2, and the TOPO_OP value is <code>I</code>.</p>
</li>
<li>
<p>Deleting a node to merge edges E6 and E7, resulting in E7: The TOPO_ID value is the ID of E6, the TOPO_TYPE value is 2, the PARENT_ID value is the ID of E7, and the TOPO_OP value is <code>D</code>.</p>
</li>
</ul>
<p>To further illustrate the effect of editing operations on the history information table, a test procedure was created to perform various editing operations on a simple topology, and to examine the effect on the history information table for the topology. The procedure performed these main steps:</p>
<ol>
<li>
<p>It created and initialized a non-geodetic topology with a universe face, and added a line feature layer and an area feature layer to the topology.</p>
</li>
<li>
<p>It created a rectangular area by adding four isolated nodes and four edges connecting the isolated nodes. This caused a face (consisting of the rectangle) to be created, and it caused one row to be added to the history information table: an insert operation for the new face, whose parent is the universe face.</p>
<p>The following statement shows the history information table row added by this insertion:</p>
<pre>
SELECT topo_id, topo_type, topo_op, parent_id
  FROM hist_test_history$ ORDER BY topo_tx_id, topo_sequence, topology;
 
   TOPO_ID  TOPO_TYPE TOP  PARENT_ID
---------- ---------- --- ----------
         1          3 I           -1
 
1 row selected.
</pre></li>
<li>
<p>It split the rectangular face into two smaller rectangular faces (side-by-side) by adding two nodes and a vertical edge connecting these nodes, which caused two edges (the top and bottom edges) and the face to be split. Three rows were added to the history information table: an insert operation for each of the two new edges (with the parent of each new edge being the existing edge that was split), and an insert operation for the new face (whose parent is the original rectangular face that was split).</p>
<p>The following statement shows the history information table rows added thus far. The rows added by this step are shown in bold:</p>
<pre>
SELECT topo_id, topo_type, topo_op, parent_id
  FROM hist_test_history$ ORDER BY topo_tx_id, topo_sequence, topology;
 
   TOPO_ID  TOPO_TYPE TOP  PARENT_ID
---------- ---------- --- ----------
         1          3 I           -1
         <span class="bold">6          2 I            2</span>
         <span class="bold">7          2 I            4</span>
         <span class="bold">2          3 I            1</span>
 
4 rows selected.
</pre></li>
<li>
<p>It added a diagonal edge to small rectangular face on the left (using the existing nodes), and it removed the vertical edge that was added in Step 3. Two rows were added to the history information table: an insert operation for the new face created as a result of the edge addition (with the parent of each new face being the small rectangular face on the left that was split), and a delete operation as a result of the edge removal (with the resulting face taking its topological object ID from one of the "parent" faces that were merged).</p>
<p>The following statement shows the history information table rows added thus far. The rows added by this step are shown in bold:</p>
<pre>
SELECT topo_id, topo_type, topo_op, parent_id
  FROM hist_test_history$ ORDER BY topo_tx_id, topo_sequence, topology;
 
   TOPO_ID  TOPO_TYPE TOP  PARENT_ID
---------- ---------- --- ----------
         1          3 I           -1
         6          2 I            2
         7          2 I            4
         2          3 I            1
         <span class="bold">3          3 I            2</span>
         <span class="bold">1          3 D            2</span>
 
6 rows selected.
</pre></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHHFJCB"></a>
<div id="TOPOL120" class="sect1">
<h2 class="sect1"><span class="secnum">1.6</span> Topology <a id="sthref73"></a>Data Types</h2>
<p>The main data type associated with the topology data model is SDO_TOPO_GEOMETRY, which describes a topology geometry. The SDO_TOPO_GEOMETRY type has several constructors and member functions. This section describes the topology model types, constructors, and member functions.</p>
<a id="BABHHIDJ"></a>
<div id="TOPOL753" class="sect2">
<h3 class="sect2"><span class="secnum">1.6.1</span> <a id="sthref74"></a>SDO_TOPO_GEOMETRY Type</h3>
<p>The description of a topology geometry is stored in a single row, in a single column of object type SDO_TOPO_GEOMETRY in a user-defined table. The object type SDO_TOPO_GEOMETRY is defined as:</p>
<pre>
CREATE TYPE sdo_topo_geometry AS OBJECT
  (tg_type      NUMBER,
   tg_id        NUMBER,
   tg_layer_id  NUMBER,
   topology_id  NUMBER);
</pre>
<p>The SDO_TOPO_GEOMETRY type has the attributes shown in <a href="#BABEFGAJ">Table 1-7</a>.</p>
<div id="TOPOL754" class="tblformal">
<p class="titleintable"><a id="sthref75"></a><a id="BABEFGAJ"></a>Table 1-7 SDO_TOPO_GEOMETRY Type Attributes</p>
<table class="cellalignment789" title="SDO_TOPO_GEOMETRY Type Attributes" summary="SDO_TOPO_GEOMETRY Type Attributes" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t11">Attribute</th>
<th class="cellalignment790" id="r1c2-t11">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t11" headers="r1c1-t11">
<p><a id="sthref76"></a>TG_TYPE</p>
</td>
<td class="cellalignment785" headers="r2c1-t11 r1c2-t11">
<p>Type of topology geometry: 1 = point or multipoint, 2 = line string or multiline string, 3 = polygon or multipolygon, 4 = heterogeneous collection</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t11" headers="r1c1-t11">
<p><a id="sthref77"></a>TG_ID</p>
</td>
<td class="cellalignment785" headers="r3c1-t11 r1c2-t11">
<p>Unique ID number (generated by Spatial) for the topology geometry</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t11" headers="r1c1-t11">
<p><a id="sthref78"></a>TG_LAYER_ID</p>
</td>
<td class="cellalignment785" headers="r4c1-t11 r1c2-t11">
<p>ID number for the topology geometry layer to which the topology geometry belongs. (This number is generated by Spatial, and it is unique within the topology geometry layer.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t11" headers="r1c1-t11">
<p><a id="sthref79"></a>TOPOLOGY_ID</p>
</td>
<td class="cellalignment785" headers="r5c1-t11 r1c2-t11">
<p>Unique ID number (generated by Spatial) for the topology</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Each topology geometry in a topology is uniquely identified by the combination of its TG_ID and TG_LAYER_ID values.</p>
<p>You can use an attribute name in a query on an object of SDO_TOPO_GEOMETRY. <a href="#CIHBHFBB">Example 1-3</a> shows SELECT statements that query each attribute of the FEATURE column of the CITY_STREETS table, which is defined in <a href="#CIHDDJBA">Example 1-12</a> in <a href="#i885918">Section 1.12</a>.</p>
<div id="TOPOL755" class="example">
<p class="titleinexample"><a id="CIHBHFBB"></a>Example 1-3 SDO_TOPO_GEOMETRY Attributes in Queries</p>
<pre>
SELECT s.feature.tg_type FROM city_streets s;
SELECT s.feature.tg_id FROM city_streets s;
SELECT s.feature.tg_layer_id FROM city_streets s;
SELECT s.feature.topology_id FROM city_streets s;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHJJCGB"></a>
<div id="TOPOL756" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.6.2</span> <a id="sthref80"></a>SDO_TOPO_GEOMETRY Constructors</h3>
<p>The SDO_TOPO_GEOMETRY type has constructors for inserting and updating topology geometry objects. The constructors can be classified into two types, depending on the kind of objects they use:</p>
<ul>
<li>
<p>Constructors that specify the lowest-level topological elements (nodes, edges, and faces). These constructors have at least one attribute of type SDO_TOPO_OBJECT_ARRAY and no attributes of type SDO_TGL_OBJECT_ARRAY.</p>
</li>
<li>
<p>Constructors that specify elements in the child level. These constructors have at least one attribute of type SDO_TGL_OBJECT_ARRAY and no attributes of type SDO_TOPO_OBJECT_ARRAY.</p>
</li>
</ul>
<p>To insert and update topology geometry objects when the topology does not have a topology geometry layer hierarchy or when the operation affects the lowest level (level 0) in the hierarchy, you must use constructors that specify the lowest-level topological elements (nodes, edges, and faces). (Topology geometry layer hierarchy is explained in <a href="#CIHHGJAB">Section 1.4</a>.)</p>
<p>To insert and update topology geometry objects when the topology has a topology geometry layer hierarchy and the operation affects a level other than the lowest in the hierarchy, you can use either or both types of constructor. That is, for each topology geometry object to be inserted or updated, you can use either of the following:</p>
<ul>
<li>
<p>To insert and update a topology geometry object consisting of the lowest-level topological elements (for example, to create a tract from faces), use the format that has at least one attribute of type SDO_TOPO_OBJECT_ARRAY and no attributes of type SDO_TGL_OBJECT_ARRAY.</p>
</li>
<li>
<p>To insert and update a topology geometry object consisting of features at the next lower level (for example, create a tract from block groups), use the format that has at least one attribute of type SDO_TGL_OBJECT_ARRAY and no attributes of type SDO_TOPO_OBJECT_ARRAY.</p>
</li>
</ul>
<p>This section describes the available SDO_TOPO_GEOMETRY constructors.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
An additional SDO_TOPO_GEOMETRY constructor with the same attributes as the type definition (<code>tg_type, tg_id, tg_layer_id, topology_id</code>) is for Oracle internal use only.</div>
<a id="CIHFEFFJ"></a>
<div id="TOPOL757" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">1.6.2.1</span> Constructors for Insert Operations: Specifying Topological Elements</h4>
<p>The SDO_TOPO_GEOMETRY type has the following constructors for insert operations in which you specify topological elements (faces, nodes, or edges). You must use one of these formats to create new topology geometry objects when the topology does not have a topology geometry layer hierarchy or when the operation affects the lowest level (level 0) in the hierarchy, and you can use one of these formats to create new topology geometry objects when the operation affects a level higher than level 0 in the hierarchy:</p>
<pre>
SDO_TOPO_GEOMETRY (topology     VARCHAR2,
                   tg_type      NUMBER,
                   tg_layer_id  NUMBER,
                   topo_ids     SDO_TOPO_OBJECT_ARRAY)

SDO_TOPO_GEOMETRY (topology      VARCHAR2,
                   table_name    VARCHAR2,
                   column_name   VARCHAR2,
                   tg_type       NUMBER,
                   topo_ids      SDO_TOPO_OBJECT_ARRAY)
</pre>
<p><a id="sthref81"></a><a id="sthref82"></a>The SDO_TOPO_OBJECT_ARRAY type is defined as a VARRAY of SDO_TOPO_OBJECT objects.</p>
<p>The SDO_TOPO_OBJECT type has the following two attributes:</p>
<pre>
(topo_id NUMBER, topo_type NUMBER)
</pre>
<p>The TG_TYPE and TOPO_IDS attribute values must be within the range of values from the &lt;topology-name&gt;_RELATION$ table (described in <a href="#BABIGFIG">Section 1.5.4</a>) for the specified topology.</p>
<p><a href="#CIHDAFBG">Example 1-4</a> shows two SDO_TOPO_GEOMETRY constructors, one in each format. Each constructor inserts a topology geometry into the LAND_PARCELS table, which is defined in <a href="#CIHDDJBA">Example 1-12</a> in <a href="#i885918">Section 1.12</a>.</p>
<div id="TOPOL758" class="example">
<p class="titleinexample"><a id="CIHDAFBG"></a>Example 1-4 INSERT Using Constructor with SDO_TOPO_OBJECT_ARRAY</p>
<pre>
INSERT INTO land_parcels VALUES ('P1', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (3, 3), -- face_id = 3
      SDO_TOPO_OBJECT (6, 3))) -- face_id = 6
);

INSERT INTO land_parcels VALUES ('P1A', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    'LAND_PARCELS', -- Table name
    'FEATURE', -- Column name
    3, -- Topology geometry type (polygon/multipolygon)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (3, 3), -- face_id = 3
      SDO_TOPO_OBJECT (6, 3))) -- face_id = 6
);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<a id="CIHJDFHG"></a>
<div id="TOPOL759" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">1.6.2.2</span> Constructors for Insert Operations: Specifying Lower-Level Features</h4>
<p>The SDO_TOPO_GEOMETRY type has the following constructors for insert operations in which you specify features in the next lower level of the hierarchy. You can use one of these formats to create new topology geometry objects when the operation affects a level higher than level 0 in the hierarchy:</p>
<pre>
SDO_TOPO_GEOMETRY (topology     VARCHAR2,
                   tg_type      NUMBER,
                   tg_layer_id  NUMBER,
                   topo_ids     SDO_TGL_OBJECT_ARRAY)

SDO_TOPO_GEOMETRY (topology      VARCHAR2,
                   table_name    VARCHAR2,
                   column_name   VARCHAR2,
                   tg_type       NUMBER,
                   topo_ids      SDO_TGL_OBJECT_ARRAY)
</pre>
<p><a id="sthref83"></a><a id="sthref84"></a>The SDO_TGL_OBJECT_ARRAY type is defined as a VARRAY of SDO_TGL_OBJECT objects.</p>
<p>The SDO_TGL_OBJECT type has the following two attributes:</p>
<pre>
(tgl_id NUMBER, tg_id NUMBER)
</pre>
<p><a href="#CIHCABII">Example 1-5</a> shows an SDO_TOPO_GEOMETRY constructor that inserts a row into the BLOCK_GROUPS table, which is the feature table for the Block Groups level in the topology geometry layer hierarchy. The Block Groups level is the parent of the Land Parcels level at the bottom of the hierarchy.</p>
<div id="TOPOL760" class="example">
<p class="titleinexample"><a id="CIHCABII"></a>Example 1-5 INSERT Using Constructor with SDO_TGL_OBJECT_ARRAY</p>
<pre>
INSERT INTO block_groups VALUES ('BG1', -- Feature name
  SDO_TOPO_GEOMETRY('LAND_USE_HIER',
    3, -- Topology geometry type (polygon/multipolygon)
    2, -- TG_LAYER_ID for block groups (from ALL_SDO_TOPO_METADATA)
    SDO_TGL_OBJECT_ARRAY (
      SDO_TGL_OBJECT (1, 1), -- land parcel ID = 1
      SDO_TGL_OBJECT (1, 2))) -- land parcel ID = 2
);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<div id="TOPOL761" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref85"></a>
<h4 class="sect3"><span class="secnum">1.6.2.3</span> Constructors for Update Operations: Specifying Topological Elements</h4>
<p>The SDO_TOPO_GEOMETRY type has the following constructors for update operations in which you specify topological elements (faces, nodes, or edges). You must use one of these formats to update topology geometry objects when the topology does not have a topology geometry layer hierarchy or when the operation affects the lowest level (level 0) in the hierarchy, and you can use one of these formats to update topology geometry objects when the operation affects a level higher than level 0 in the hierarchy:</p>
<pre>
SDO_TOPO_GEOMETRY (topology         VARCHAR2,
                   tg_type          NUMBER,
                   tg_layer_id      NUMBER,
                   add_topo_ids     SDO_TOPO_OBJECT_ARRAY,
                   delete_topo_ids  SDO_TOPO_OBJECT_ARRAY)

SDO_TOPO_GEOMETRY (topology         VARCHAR2,
                   table_name       VARCHAR2,
                   column_name      VARCHAR2,
                   tg_type          NUMBER,
                   add_topo_ids     SDO_TOPO_OBJECT_ARRAY,
                   delete_topo_ids  SDO_TOPO_OBJECT_ARRAY)
</pre>
<p>For example, you could use one of these constructor formats to add an edge to a linear feature or to remove an obsolete edge from a feature.</p>
<p>The SDO_TOPO_OBJECT_ARRAY type definition and the requirements for the TG_TYPE and TOPO_IDS attribute values are as described in <a href="#CIHFEFFJ">Section 1.6.2.1</a>.</p>
<p>You can specify values for both the ADD_TOPO_IDS and DELETE_TOPO_IDS attributes, or you can specify values for one attribute and specify the other as null; however, you cannot specify null values for both ADD_TOPO_IDS and DELETE_TOPO_IDS.</p>
<p><a href="#CIHCBJED">Example 1-6</a> shows two SDO_TOPO_GEOMETRY constructors, one in each format. Each constructor removes two faces from the <code>CITY_DATA</code> topology in the LAND_PARCELS table, which is defined in <a href="#CIHDDJBA">Example 1-12</a> in <a href="#i885918">Section 1.12</a>.</p>
<div id="TOPOL762" class="example">
<p class="titleinexample"><a id="CIHCBJED"></a>Example 1-6 UPDATE Using Constructor with SDO_TOPO_OBJECT_ARRAY</p>
<pre>
UPDATE land_parcels l SET l.feature = SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    NULL, -- No topological elements to be added
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (3, 3), -- face_id = 3
      SDO_TOPO_OBJECT (6, 3))) -- face_id = 6
WHERE l.feature_name = 'P1';
 
UPDATE land_parcels l SET l.feature = SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    'LAND_PARCELS', -- Table name
    'FEATURE', -- Column name
    3, -- Topology geometry type (polygon/multipolygon)
    NULL, -- No topological elements to be added
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (3, 3), -- face_id = 3
      SDO_TOPO_OBJECT (6, 3))) -- face_id = 6
WHERE l.feature_name = 'P1A';
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<div id="TOPOL763" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref86"></a>
<h4 class="sect3"><span class="secnum">1.6.2.4</span> Constructors for Update Operations: Specifying Lower-Level Features</h4>
<p>The SDO_TOPO_GEOMETRY type has the following constructors for update operations in which you specify features in the next lower level of the hierarchy. You can use one of these formats to update topology geometry objects when the operation affects a level higher than level 0 in the hierarchy:</p>
<pre>
SDO_TOPO_GEOMETRY (topology         VARCHAR2,
                   tg_type          NUMBER,
                   tg_layer_id      NUMBER,
                   add_topo_ids     SDO_TGL_OBJECT_ARRAY,
                   delete_topo_ids  SDO_TGL_OBJECT_ARRAY)

SDO_TOPO_GEOMETRY (topology         VARCHAR2,
                   table_name       VARCHAR2,
                   column_name      VARCHAR2,
                   tg_type          NUMBER,
                   add_topo_ids     SDO_TGL_OBJECT_ARRAY,
                   delete_topo_ids  SDO_TGL_OBJECT_ARRAY)
</pre>
<p>For example, you could use one of these constructor formats to add an edge to a linear feature or to remove an obsolete edge from a feature.</p>
<p>The SDO_TGL_OBJECT_ARRAY type definition and the requirements for its attribute values are as described in <a href="#CIHJDFHG">Section 1.6.2.2</a>.</p>
<p>You can specify values for both the ADD_TOPO_IDS and DELETE_TOPO_IDS attributes, or you can specify values for one attribute and specify the other as null; however, you cannot specify null values for both ADD_TOPO_IDS and DELETE_TOPO_IDS.</p>
<p><a href="#CIHHCGFH">Example 1-7</a> shows two SDO_TOPO_GEOMETRY constructors, one in each format. Each constructor deletes the land parcel with the ID value of 2 from a feature (named <code>BG1</code> in the first format and <code>BG1A</code> in the second format, though each feature has the same definition) from the <code>CITY_DATA</code> topology in the BLOCK_GROUPS table, which is the feature table for the Block Groups level in the topology geometry layer hierarchy. The Block Groups level is the parent of the Land Parcels level at the bottom of the hierarchy.</p>
<div id="TOPOL764" class="example">
<p class="titleinexample"><a id="CIHHCGFH"></a>Example 1-7 UPDATE Using Constructor with SDO_TGL_OBJECT_ARRAY</p>
<pre>
UPDATE block_groups b SET b.feature = SDO_TOPO_GEOMETRY(
  'LAND_USE_HIER',
  3, -- Topology geometry type (polygon/multipolygon)
  2, -- TG_LAYER_ID for block groups (from ALL_SDO_TOPO_METADATA)
  null, -- No IDs to add
  SDO_TGL_OBJECT_ARRAY (
    SDO_TGL_OBJECT (1, 2)) -- land parcel ID = 2
  )
WHERE b.feature_name = 'BG1';
 
UPDATE block_groups b SET b.feature = SDO_TOPO_GEOMETRY(
  'LAND_USE_HIER',
  'BLOCK_GROUPS', -- Feature table
  'FEATURE', -- Feature column
  3, -- Topology geometry type (polygon/multipolygon)
  null, -- No IDs to add
  SDO_TGL_OBJECT_ARRAY (
    SDO_TGL_OBJECT (1, 2)) -- land parcel ID = 2
  )
WHERE b.feature_name = 'BG1A';
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="TOPOL765" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref87"></a>
<h3 class="sect2"><span class="secnum">1.6.3</span> <a id="sthref88"></a><a id="sthref89"></a>GET_GEOMETRY Member Function</h3>
<p>The SDO_TOPO_GEOMETRY type has a member function GET_GEOMETRY, which you can use to return the SDO_GEOMETRY object for the topology geometry object.</p>
<p><a href="#CIHFAEFB">Example 1-8</a> uses the GET_GEOMETRY member function to return the SDO_GEOMETRY object for the topology geometry object associated with the land parcel named <code>P1</code>.</p>
<div id="TOPOL766" class="example">
<p class="titleinexample"><a id="CIHFAEFB"></a>Example 1-8 GET_GEOMETRY Member Function</p>
<pre>
SELECT l.feature_name, l.feature.get_geometry()
  FROM land_parcels l WHERE l.feature_name = 'P1';
 
FEATURE_NAME                                                                    
------------------------------                                                  
L.FEATURE.GET_GEOMETRY()(SDO_GTYPE, SDO_SRID, SDO_POINT(X, Y, Z), SDO_ELEM_INFO,
--------------------------------------------------------------------------------
P1                                                                              
SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 3, 1), SDO_ORDINATE_ARRAY(
21, 14, 21, 22, 9, 22, 9, 14, 9, 6, 21, 6, 21, 14)) 
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHIEDEC"></a>
<div id="TOPOL767" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.6.4</span> <a id="sthref90"></a><a id="sthref91"></a>GET_TGL_OBJECTS Member Function</h3>
<p>The SDO_TOPO_GEOMETRY type has a member function GET_TGL_OBJECTS, which you can use to return the SDO_TOPO_OBJECT_ARRAY object for a topology geometry object in a geometry layer with a hierarchy level greater than 0 (zero) in a topology with a topology geometry layer hierarchy. (If the layer is at hierarchy level 0 or is in a topology that does not have a topology geometry layer hierarchy, this method returns a null value.)</p>
<p>The SDO_TGL_OBJECT_ARRAY type is described in <a href="#CIHJDFHG">Section 1.6.2.2</a>.</p>
<p><a href="#CIHCDBEG">Example 1-9</a> uses the GET_TGL_OBJECTS member function to return the SDO_TOPO_OBJECT_ARRAY object for the topology geometry object associated with the block group named <code>BG2</code>.</p>
<div id="TOPOL768" class="example">
<p class="titleinexample"><a id="CIHCDBEG"></a>Example 1-9 GET_TGL_OBJECTS Member Function</p>
<pre>
SELECT bg.feature_name, bg.feature.get_tgl_objects()
  FROM block_groups bg WHERE bg.feature_name = 'BG2';
 
FEATURE_NAME                                                                    
------------------------------                                                  
BG.FEATURE.GET_TGL_OBJECTS()(TGL_ID, TG_ID)                                     
--------------------------------------------------------------------------------
BG2                                                                             
SDO_TGL_OBJECT_ARRAY(SDO_TGL_OBJECT(1, 3), SDO_TGL_OBJECT(1, 4))
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="TOPOL769" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref92"></a>
<h3 class="sect2"><span class="secnum">1.6.5</span> <a id="sthref93"></a><a id="sthref94"></a>GET_TOPO_ELEMENTS Member Function</h3>
<p>The SDO_TOPO_GEOMETRY type has a member function GET_TOPO_ELEMENTS, which you can use to return the SDO_TOPO_OBJECT_ARRAY object for the topology geometry object.</p>
<p>The SDO_TOPO_OBJECT_ARRAY type is described in <a href="#CIHFEFFJ">Section 1.6.2.1</a>.</p>
<p><a href="#CIHFAEFB">Example 1-8</a> uses the GET_TOPO_ELEMENTS member function to return the SDO_TOPO_OBJECT_ARRAY object for the topology geometry object associated with the land parcel named <code>P1</code>.</p>
<div id="TOPOL770" class="example">
<p class="titleinexample"><a id="sthref95"></a>Example 1-10 GET_TOPO_ELEMENTS Member Function</p>
<pre>
SELECT l.feature_name, l.feature.get_topo_elements()
  FROM land_parcels l WHERE l.feature_name = 'P1';
 
FEATURE_NAME                                                                    
------------------------------                                                  
L.FEATURE.GET_TOPO_ELEMENTS()(TOPO_ID, TOPO_TYPE)                               
--------------------------------------------------------------------------------
P1                                                                              
SDO_TOPO_OBJECT_ARRAY(SDO_TOPO_OBJECT(3, 3), SDO_TOPO_OBJECT(6, 3))
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABJAIJI"></a>
<div id="TOPOL771" class="sect2">
<h3 class="sect2"><span class="secnum">1.6.6</span> <a id="sthref96"></a>SDO_LIST_TYPE Type</h3>
<p>The SDO_LIST_TYPE type is used to store the EDGE_ID values of island edges and NODE_ID values of island nodes in a face. The SDO_LIST_TYPE type is defined as:</p>
<pre>
CREATE TYPE sdo_list_type as VARRAY(2147483647) OF NUMBER;
</pre></div>
<!-- class="sect2" -->
<a id="CIHJECCE"></a>
<div id="TOPOL772" class="sect2">
<h3 class="sect2"><span class="secnum">1.6.7</span> <a id="sthref97"></a><a id="sthref98"></a>SDO_EDGE_ARRAY and SDO_NUMBER_ARRAY Types</h3>
<p>The SDO_EDGE_ARRAY type is used to specify the coordinates of attached edges affected by a node move operation. The SDO_EDGE_ARRAY type is defined as:</p>
<pre>
CREATE TYPE sdo_edge_array as VARRAY(1000000) OF MDSYS.SDO_NUMBER_ARRAY;
</pre>
<p>The SDO_NUMBER_ARRAY type is a general-purpose type used by Spatial for arrays. The SDO_NUMBER_ARRAY type is defined as:</p>
<pre>
CREATE TYPE sdo_number_array as VARRAY(1048576) OF NUMBER;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHJACAC"></a>
<div id="TOPOL773" class="sect1">
<h2 class="sect1"><span class="secnum">1.7</span> Topology Metadata Views</h2>
<p>There are two sets of topology metadata views for each schema (user): xxx_SDO_TOPO_INFO and xxx_SDO_TOPO_METADATA, where <span class="italic">xxx</span> can be USER or ALL. These views are read-only to users; they are created and maintained by Spatial.</p>
<p>The xxx_SDO_TOPO_METADATA views contain the most detailed information, and each xxx_SDO_TOPO_INFO view contains a subset of the information in its corresponding xxx_SDO_TOPO_METADATA view.</p>
<a id="BABCDJJC"></a>
<div id="TOPOL774" class="sect2">
<h3 class="sect2"><span class="secnum">1.7.1</span> xxx_SDO_TOPO_INFO Views</h3>
<p>The following views contain basic information about topologies:</p>
<ul>
<li>
<p><a id="sthref99"></a>USER_SDO_TOPO_INFO contains topology information for all feature tables owned by the user.</p>
</li>
<li>
<p><a id="sthref100"></a>ALL_SDO_TOPO_INFO contains topology information for all feature tables on which the user has SELECT permission.</p>
</li>
</ul>
<p>The USER_SDO_TOPO_INFO and ALL_SDO_TOPO_INFO views contain the same columns, as shown <a href="#BABFBAFF">Table 1-8</a>. (The columns are listed in their order in the view definition.)</p>
<div id="TOPOL775" class="tblformal">
<p class="titleintable"><a id="sthref101"></a><a id="BABFBAFF"></a>Table 1-8 Columns in the xxx_SDO_TOPO_INFO Views</p>
<table class="cellalignment789" title="Columns in the xxx_SDO_TOPO_INFO Views" summary="Columns in the xxx_SDO_TOPO_INFO Views" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t13">Column Name</th>
<th class="cellalignment790" id="r1c2-t13">Data Type</th>
<th class="cellalignment790" id="r1c3-t13">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t13" headers="r1c1-t13">
<p>OWNER</p>
</td>
<td class="cellalignment785" headers="r2c1-t13 r1c2-t13">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r2c1-t13 r1c3-t13">
<p>Owner of the topology</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t13" headers="r1c1-t13">
<p>TOPOLOGY</p>
</td>
<td class="cellalignment785" headers="r3c1-t13 r1c2-t13">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r3c1-t13 r1c3-t13">
<p>Name of the topology</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t13" headers="r1c1-t13">
<p>TOPOLOGY_ID</p>
</td>
<td class="cellalignment785" headers="r4c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r4c1-t13 r1c3-t13">
<p>ID number of the topology</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t13" headers="r1c1-t13">
<p>TOLERANCE</p>
</td>
<td class="cellalignment785" headers="r5c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r5c1-t13 r1c3-t13">
<p>Tolerance value associated with topology geometries in the topology. (Tolerance is explained in <a href="#BABIEJGD">Section 1.2.1</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r6c1-t13" headers="r1c1-t13">
<p>SRID</p>
</td>
<td class="cellalignment785" headers="r6c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r6c1-t13 r1c3-t13">
<p>Coordinate system (spatial reference system) associated with all topology geometry layers in the topology. Is null if no coordinate system is associated; otherwise, it contains a value from the SRID column of the MDSYS.CS_SRS table (described in <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a>).</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r7c1-t13" headers="r1c1-t13">
<p>TABLE_SCHEMA</p>
</td>
<td class="cellalignment785" headers="r7c1-t13 r1c2-t13">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r7c1-t13 r1c3-t13">
<p>Name of the schema that owns the table containing the topology geometry layer column</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r8c1-t13" headers="r1c1-t13">
<p>TABLE_NAME</p>
</td>
<td class="cellalignment785" headers="r8c1-t13 r1c2-t13">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r8c1-t13 r1c3-t13">
<p>Name of the table containing the topology geometry layer column</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r9c1-t13" headers="r1c1-t13">
<p>COLUMN_NAME</p>
</td>
<td class="cellalignment785" headers="r9c1-t13 r1c2-t13">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r9c1-t13 r1c3-t13">
<p>Name of the column containing the topology geometry layer data</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r10c1-t13" headers="r1c1-t13">
<p>TG_LAYER_ID</p>
</td>
<td class="cellalignment785" headers="r10c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r10c1-t13 r1c3-t13">
<p>ID number of the topology geometry layer</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r11c1-t13" headers="r1c1-t13">
<p>TG_LAYER_TYPE</p>
</td>
<td class="cellalignment785" headers="r11c1-t13 r1c2-t13">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r11c1-t13 r1c3-t13">
<p>Contains one of the following: POINT, LINE, CURVE, POLYGON, or COLLECTION. (LINE and CURVE have the same meaning.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r12c1-t13" headers="r1c1-t13">
<p>TG_LAYER_LEVEL</p>
</td>
<td class="cellalignment785" headers="r12c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r12c1-t13 r1c3-t13">
<p>Hierarchy level number of this topology geometry layer. (Topology geometry layer hierarchy is explained in <a href="#CIHHGJAB">Section 1.4</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r13c1-t13" headers="r1c1-t13">
<p>CHILD_LAYER_ID</p>
</td>
<td class="cellalignment785" headers="r13c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r13c1-t13 r1c3-t13">
<p>ID number of the topology geometry layer that is the child layer of this layer in the topology geometry layer hierarchy. Null if this layer has no child layer or if the topology does not have a topology geometry layer hierarchy. (Topology geometry layer hierarchy is explained in <a href="#CIHHGJAB">Section 1.4</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r14c1-t13" headers="r1c1-t13">
<p>DIGITS_RIGHT_OF_DECIMAL</p>
</td>
<td class="cellalignment785" headers="r14c1-t13 r1c2-t13">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r14c1-t13 r1c3-t13">
<p>Number of digits permitted to the right of the decimal point in the expression of any coordinate position when features are added to an existing topology. All incoming features (those passed as arguments to the <code>addLinearGeometry</code>, <code>addPolygonGeometry</code>, or <code>addPointGeometry</code> method in the Java API or the equivalent PL/SQL subprograms) are automatically snapped (truncated) to the number of digits right of the decimal. Default: 16.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="BABHDJDG"></a>
<div id="TOPOL776" class="sect2">
<h3 class="sect2"><span class="secnum">1.7.2</span> xxx_SDO_TOPO_METADATA Views</h3>
<p>The following views contain detailed information about topologies:</p>
<ul>
<li>
<p><a id="sthref102"></a>USER_SDO_TOPO_METADATA contains topology information for all tables owned by the user.</p>
</li>
<li>
<p><a id="sthref103"></a>ALL_SDO_TOPO_METADATA contains topology information for all tables on which the user has SELECT permission.</p>
</li>
</ul>
<p>The USER_SDO_TOPO_METADATA and ALL_SDO_TOPO_METADATA views contain the same columns, as shown <a href="#BABIAAAH">Table 1-9</a>. (The columns are listed in their order in the view definition.)</p>
<div id="TOPOL777" class="tblformal">
<p class="titleintable"><a id="sthref104"></a><a id="BABIAAAH"></a>Table 1-9 Columns in the xxx_SDO_TOPO_METADATA Views</p>
<table class="cellalignment789" title="Columns in the xxx_SDO_TOPO_METADATA Views" summary="Columns in the xxx_SDO_TOPO_METADATA Views" dir="ltr">
<thead>
<tr class="cellalignment779">
<th class="cellalignment790" id="r1c1-t14">Column Name</th>
<th class="cellalignment790" id="r1c2-t14">Data Type</th>
<th class="cellalignment790" id="r1c3-t14">Purpose</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment779">
<td class="cellalignment785" id="r2c1-t14" headers="r1c1-t14">
<p>OWNER</p>
</td>
<td class="cellalignment785" headers="r2c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r2c1-t14 r1c3-t14">
<p>Owner of the topology</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r3c1-t14" headers="r1c1-t14">
<p>TOPOLOGY</p>
</td>
<td class="cellalignment785" headers="r3c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r3c1-t14 r1c3-t14">
<p>Name of the topology</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r4c1-t14" headers="r1c1-t14">
<p>TOPOLOGY_ID</p>
</td>
<td class="cellalignment785" headers="r4c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r4c1-t14 r1c3-t14">
<p>ID number of the topology</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r5c1-t14" headers="r1c1-t14">
<p>TOLERANCE</p>
</td>
<td class="cellalignment785" headers="r5c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r5c1-t14 r1c3-t14">
<p>Tolerance value associated with topology geometries in the topology. (Tolerance is explained in <a href="#BABIEJGD">Section 1.2.1</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r6c1-t14" headers="r1c1-t14">
<p>SRID</p>
</td>
<td class="cellalignment785" headers="r6c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r6c1-t14 r1c3-t14">
<p>Coordinate system (spatial reference system) associated with all topology geometry layers in the topology. Is null if no coordinate system is associated; otherwise, contains a value from the SRID column of the MDSYS.CS_SRS table (described in <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a>).</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r7c1-t14" headers="r1c1-t14">
<p>TABLE_SCHEMA</p>
</td>
<td class="cellalignment785" headers="r7c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r7c1-t14 r1c3-t14">
<p>Name of the schema that owns the table containing the topology geometry layer column</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r8c1-t14" headers="r1c1-t14">
<p>TABLE_NAME</p>
</td>
<td class="cellalignment785" headers="r8c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r8c1-t14 r1c3-t14">
<p>Name of the table containing the topology geometry layer column</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r9c1-t14" headers="r1c1-t14">
<p>COLUMN_NAME</p>
</td>
<td class="cellalignment785" headers="r9c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r9c1-t14 r1c3-t14">
<p>Name of the column containing the topology geometry layer data</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r10c1-t14" headers="r1c1-t14">
<p>TG_LAYER_ID</p>
</td>
<td class="cellalignment785" headers="r10c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r10c1-t14 r1c3-t14">
<p>ID number of the topology geometry layer</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r11c1-t14" headers="r1c1-t14">
<p>TG_LAYER_TYPE</p>
</td>
<td class="cellalignment785" headers="r11c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r11c1-t14 r1c3-t14">
<p>Contains one of the following: POINT, LINE, CURVE, POLYGON, or COLLECTION. (LINE and CURVE have the same meaning.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r12c1-t14" headers="r1c1-t14">
<p>TG_LAYER_LEVEL</p>
</td>
<td class="cellalignment785" headers="r12c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r12c1-t14 r1c3-t14">
<p>Hierarchy level number of this topology geometry layer. (Topology geometry layer hierarchy is explained in <a href="#CIHHGJAB">Section 1.4</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r13c1-t14" headers="r1c1-t14">
<p>CHILD_LAYER_ID</p>
</td>
<td class="cellalignment785" headers="r13c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r13c1-t14 r1c3-t14">
<p>ID number of the topology geometry layer that is the child layer of this layer in the topology geometry layer hierarchy. Null if this layer has no child layer or if the topology does not have a geometry layer hierarchy. (Topology geometry layer hierarchy is explained in <a href="#CIHHGJAB">Section 1.4</a>.)</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r14c1-t14" headers="r1c1-t14">
<p>NODE_SEQUENCE</p>
</td>
<td class="cellalignment785" headers="r14c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r14c1-t14 r1c3-t14">
<p>Name of the sequence containing the next available node ID number</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r15c1-t14" headers="r1c1-t14">
<p>EDGE_SEQUENCE</p>
</td>
<td class="cellalignment785" headers="r15c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r15c1-t14 r1c3-t14">
<p>Name of the sequence containing the next available edge ID number</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r16c1-t14" headers="r1c1-t14">
<p>FACE_SEQUENCE</p>
</td>
<td class="cellalignment785" headers="r16c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r16c1-t14 r1c3-t14">
<p>Name of the sequence containing the next available face ID number</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r17c1-t14" headers="r1c1-t14">
<p>TG_SEQUENCE</p>
</td>
<td class="cellalignment785" headers="r17c1-t14 r1c2-t14">
<p>VARCHAR2</p>
</td>
<td class="cellalignment785" headers="r17c1-t14 r1c3-t14">
<p>Name of the sequence containing the next available topology geometry ID number</p>
</td>
</tr>
<tr class="cellalignment779">
<td class="cellalignment785" id="r18c1-t14" headers="r1c1-t14">
<p>DIGITS_RIGHT_OF_DECIMAL</p>
</td>
<td class="cellalignment785" headers="r18c1-t14 r1c2-t14">
<p>NUMBER</p>
</td>
<td class="cellalignment785" headers="r18c1-t14 r1c3-t14">
<p>Number of digits permitted to the right of the decimal point in the expression of any coordinate position when features are added to an existing topology. All incoming features (those passed as arguments to the <code>addLinearGeometry</code>, <code>addPolygonGeometry</code>, or <code>addPointGeometry</code> method in the Java API or the equivalent PL/SQL subprograms) are automatically snapped (truncated) to the number of digits right of the decimal. Default: 16</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHFGFIA"></a>
<div id="TOPOL778" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.8</span> <a id="sthref105"></a><a id="sthref106"></a><a id="sthref107"></a>Topology Application Programming Interface</h2>
<p>The topology data model application programming interface (API) consists of the following:</p>
<ul>
<li>
<p>PL/SQL functions and procedures in the SDO_TOPO package (described in <a href="sdo_topo_ref.htm#CACFCFHG">Chapter 3</a>) and the SDO_TOPO_MAP package (described in <a href="sdo_topo_map_ref.htm#CACDEDEE">Chapter 4</a>)</p>
</li>
<li>
<p>PL/SQL topology operators (described in <a href="#CIHCDHID">Section 1.8.1</a>)</p>
</li>
<li>
<p>Java API (described in <a href="#CIHBEHFI">Section 1.8.2</a>)</p>
</li>
</ul>
<a id="CIHCDHID"></a>
<div id="TOPOL300" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.8.1</span> Topology <a id="sthref108"></a><a id="sthref109"></a>Operators</h3>
<p>With the topology data model PL/SQL API, you can use the Oracle Spatial operators, except for the following:</p>
<ul>
<li>
<p>SDO_RELATE (but you can use the SDO_RELATE convenience operators that do not use the <code>mask</code> parameter)</p>
</li>
<li>
<p>SDO_NN</p>
</li>
<li>
<p>SDO_NN_DISTANCE</p>
</li>
<li>
<p>SDO_WITHIN_DISTANCE</p>
</li>
</ul>
<p>To use spatial operators with the topology data model, you must understand the usage and reference information about Spatial operators, which are documented in <a class="olink SPATL110" href="../../appdev.112/e11830/sdo_operat.htm#SPATL110"><span class="italic">Oracle Spatial Developer's Guide</span></a>. This section describes only additional information or differences that apply to using spatial operators with topologies. Otherwise, unless this section specifies otherwise, the operator-related information in <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a> applies to the use of operators with topology data.</p>
<p>When you use spatial operators with topologies, the formats of the first two parameters can be any one of the following:</p>
<ul>
<li>
<p>Two topology geometry objects (type SDO_TOPO_GEOMETRY)</p>
<p>For example, the following statement finds all city streets features that have any interaction with a land parcel feature named P3. (This example uses definitions and data from <a href="#CIHCEGJI">Section 1.12.1</a>.)</p>
<pre>
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_ANYINTERACT (c.feature, l.feature) = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1 
</pre></li>
<li>
<p>A topology geometry object (type SDO_TOPO_GEOMETRY) as the first parameter and a spatial geometry (type SDO_GEOMETRY) as the second parameter</p>
<p>For example, the following statement finds all city streets features that have any interaction with a geometry object that happens to be a polygon identical to the boundary of the land parcel feature named P3. (This example uses definitions and data from <a href="#CIHBGDEC">Section 1.12.2</a>.)</p>
<pre>
SELECT c.feature_name FROM city_streets c
  WHERE SDO_ANYINTERACT (c.feature,
    SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,1),
      SDO_ORDINATE_ARRAY(35,6, 47,6, 47,14, 47,22, 35,22, 35,14, 35,6))) = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1
</pre></li>
<li>
<p>A topology geometry object (type SDO_TOPO_GEOMETRY) as the first parameter and a topology object array object (type SDO_TOPO_OBJECT_ARRAY) as the second parameter</p>
<p>For example, the following statement finds all city streets features that have any interaction with an SDO_TOPO_OBJECT_ARRAY object that happens to be identical to the land parcel feature named P3. (This example uses definitions and data from <a href="#CIHBGDEC">Section 1.12.2</a>.)</p>
<pre>
SELECT c.feature_name FROM city_streets c WHERE
  SDO_ANYINTERACT (c.feature,
   SDO_TOPO_OBJECT_ARRAY (SDO_TOPO_OBJECT (5, 3), SDO_TOPO_OBJECT (8, 3)))
   = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1
</pre></li>
</ul>
<p><a href="#CIHCFHFD">Example 1-11</a> shows different topology operators checking for a specific relationship between city streets features and the land parcel named P3. The first statement shows the SDO_FILTER operator, and the remaining statements show the SDO_RELATE convenience operators that include the "mask" in the operator name. With the convenience operators in this example, only SDO_ANYINTERACT, SDO_OVERLAPBDYINTERSECT, and SDO_OVERLAPS return any resulting feature data. (As <a href="#CIHHABGI">Figure 1-3</a> in <a href="#CIHGIBFE">Section 1.3.1</a> shows, the only street feature to have any interaction with land parcel P3 is R1.) All statements in <a href="#CIHCFHFD">Example 1-11</a> use the format where the first two parameters are topology geometry objects.</p>
<div id="TOPOL779" class="example">
<p class="titleinexample"><a id="CIHCFHFD"></a>Example 1-11 Topology Operators</p>
<pre>
-- SDO_FILTER
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_FILTER (c.feature, l.feature) = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1                                                                              
 
-- SDO_RELATE convenience operators
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_ANYINTERACT (c.feature, l.feature) = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1                                                                              
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_CONTAINS (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_COVEREDBY (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_COVERS (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_EQUAL (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_INSIDE (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_ON (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_OVERLAPBDYINTERSECT (c.feature, l.feature) = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1                                                                              
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_OVERLAPBDYDISJOINT (c.feature, l.feature) = 'TRUE';
 
no rows selected
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_OVERLAPS (c.feature, l.feature) = 'TRUE';
 
FEATURE_NAME                                                                    
------------------------------                                                  
R1                                                                              
 
SELECT c.feature_name FROM city_streets c, land_parcels l
  WHERE l.feature_name = 'P3' AND
    SDO_TOUCH (c.feature, l.feature) = 'TRUE';
 
no rows selected
</pre></div>
<!-- class="example" -->
<p>See also the usage notes for the <a href="sdo_topo_ref.htm#BGHCDIDG">SDO_TOPO.RELATE</a> function in <a href="sdo_topo_ref.htm#CACFCFHG">Chapter 3</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CIHBEHFI"></a>
<div id="TOPOL780" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.8.2</span> <a id="sthref110"></a><a id="sthref111"></a>Topology Data Model Java Interface</h3>
<p>The Java client interface for the topology data model consists of the following classes:</p>
<ul>
<li>
<p><code>TopoMap</code>: class that stores edges, nodes, and faces, and provides methods for adding and deleting elements while maintaining topological consistency both in the cache and in the underlying database tables</p>
</li>
<li>
<p><code>Edge</code>: class for an edge</p>
</li>
<li>
<p><code>Face</code>: class for a face</p>
</li>
<li>
<p><code>Node</code>: class for a node</p>
</li>
<li>
<p><code>Point2DD</code>: class for a point</p>
</li>
<li>
<p><code>CompGeom</code>: class for static computational geometry methods</p>
</li>
<li>
<p><code>InvalidTopoOperationException</code>: class for the invalid topology operation exception</p>
</li>
<li>
<p><code>TopoValidationException</code>: class for the topology validation failure exception</p>
</li>
<li>
<p><code>TopoEntityNotFoundException</code>: class for the entity not found exception</p>
</li>
<li>
<p><code>TopoDataException</code>: class for the invalid input exception</p>
</li>
</ul>
<p>For detailed reference information about the topology data model classes, as well as some usage information about the Java API, see the Javadoc-generated API documentation in <a class="olink SPAJV" href="../e11829/toc.htm"><span class="italic">Oracle Spatial Java API Reference</span></a>.</p>
<p>The Spatial Java class libraries are in .jar files under the <code>&lt;ORACLE_HOME&gt;/md/jlib/</code> directory.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDEGAC"></a>
<div id="TOPOL781" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.9</span> Exporting and Importing Topology Data</h2>
<p>You can export a topology from one database and import it into a new topology with the same name, structures, and data in another database, as long as the target database does not already contain a topology with the same name as the exported topology. To export topology data from one database and import it into another database, follow the steps in this section.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The steps are required regardless of whether the topology data is transported using transportable tablespaces. (For detailed information about transportable tablespaces and transporting tablespaces to other databases, see <a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>.)</div>
<p>In the database with the topology data to be exported, perform the following actions:</p>
<ol>
<li>
<p>Connect to the database as the owner of the topology.</p>
</li>
<li>
<p>Execute the <a href="sdo_topo_ref.htm#CACJEDEH">SDO_TOPO.PREPARE_FOR_EXPORT</a> procedure (documented in <a href="sdo_topo_ref.htm#CACFCFHG">Chapter 3</a>), to create the <a id="sthref112"></a><a id="sthref113"></a>topology export information table, with a name in the format &lt;topology-name&gt;_EXP$. (This table contains the same columns as the USER_SDO_TOPO_INFO and ALL_SDO_TOPO_INFO views. These columns are described in <a href="#BABFBAFF">Table 1-8</a> in <a href="#BABCDJJC">Section 1.7.1</a>.)</p>
<p>For example, preparing the sample <code>CITY_DATA</code> topology for export creates the CITY_DATA_EXP$ table.</p>
</li>
<li>
<p>Export all tables related to the topology, including the feature tables and the &lt;topology-name&gt;_EDGE$, &lt;topology-name&gt;_FACE$, &lt;topology-name&gt;_HISTORY$, &lt;topology-name&gt;_NODE$, &lt;topology-name&gt;_RELATION$, and &lt;topology-name&gt;_EXP$ tables. The names of feature tables (if they exist) are stored in the topology metadata.</p>
<p>This creates a file with the extension <code>.dmp</code> (for example, <code>city_data.dmp</code>).</p>
</li>
</ol>
<p>In the database into which to import the topology data, perform the following actions:</p>
<ol>
<li>
<p>Connect to the target database, that is, the database in which to create a topology with the same name, structures, and data as the topology exported from the source database. Connect as the user for the schema that is to own the topology to be created.</p>
</li>
<li>
<p>Ensure that the target database does not already contain a topology with the same name as the topology in the <code>.dmp</code> file.</p>
</li>
<li>
<p>Import the tables from the <code>.dmp</code> file that you created when you exported the topology data. Specify the <code>indexes=N</code> option.</p>
</li>
<li>
<p>If you have imported the topology tables into a different schema than the one used for the topology in the source database, update the values in the OWNER and TABLE_SCHEMA columns in all rows of the &lt;topology-name&gt;_EXP$ table to reflect the table owner and schema names in the current (target) database.</p>
</li>
<li>
<p>Execute the <a href="sdo_topo_ref.htm#CACJICCC">SDO_TOPO.INITIALIZE_AFTER_IMPORT</a> procedure, which creates the topology and performs other operations, as necessary, to make the topology ready for use.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHIGDGC"></a>
<div id="TOPOL782" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.10</span> Cross-Schema Topology Usage and Editing</h2>
<p>This section contains requirements and guidelines for using and editing topologies when multiple database users (schemas) are involved.</p>
<div id="TOPOL783" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref114"></a>
<h3 class="sect2"><span class="secnum">1.10.1</span> <a id="sthref115"></a>Cross-Schema Topology Usage</h3>
<p>The following considerations apply when one user owns a topology and another user owns a topology geometry layer table. In the following, assume that user A owns the <code>CITY_DATA</code> topology and that user B owns the CITY_STREETS topology geometry layer table.</p>
<ul>
<li>
<p>The owner of the topology must create the topology and initialize the metadata. In this example, user A must perform these actions.</p>
</li>
<li>
<p>Only the owner of a topology can add layers to or delete layers from the topology. Therefore, if you add a table owned by another user to a topology, or when you remove such a table from the topology, you must qualify the table name with the schema name. For example, user A could add the CITY_STREETS table owned by user B to the <code>CITY_DATA</code> topology with the following statement:</p>
<pre>
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'B.CITY_STREETS', 'FEATURE', 'LINE');
</pre>
<p>User A could delete the CITY_STREETS table owned by user B from the <code>CITY_DATA</code> topology with the following statement:</p>
<pre>
EXECUTE SDO_TOPO.DELETE_TOPO_GEOMETRY_LAYER('CITY_DATA', 'B.CITY_STREETS', 'FEATURE');
</pre></li>
<li>
<p>The owner of the topology should grant the SELECT privilege on the node, edge, and face information tables to the owner of the topology geometry layer table. For example, user A should grant the SELECT privilege on the CITY_DATA_NODE$, CITY_DATA_EDGE$, and CITY_DATA_FACE$ tables to user B.</p>
</li>
<li>
<p>The owner of the topology geometry layer table should grant the SELECT and INDEX privileges on that table to the owner of the topology. For example, user B should grant the SELECT and INDEX privileges on the CITY_STREETS table to user A.</p>
<p>The owner of the topology geometry layer table should also grant appropriate privileges to other users that need to access the table. For read-only access, grant the SELECT privilege on the table to a user; for read/write access, grant the INSERT, SELECT, and UPDATE privileges.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHEEIJH"></a>
<div id="TOPOL784" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.10.2</span> <a id="sthref116"></a>Cross-Schema Topology Editing</h3>
<p>The following considerations apply when one user owns a topology and another user wants to edit the topology. In the following, assume that user A owns the <code>CITY_DATA</code> topology and that user B wants to edit that topology.</p>
<ul>
<li>
<p><a id="sthref117"></a><a id="sthref118"></a>The <a id="sthref119"></a><a id="sthref120"></a>owner of the topology should grant the following privileges to users who can edit the topology: INSERT, SELECT, and UPDATE on the node, edge, face, and relationship information tables, and SELECT on the node, edge, and face sequences used to generate ID numbers for the topology primitives. For example, user A could grant the following privileges to user B, where the table names end with <code>$</code> and the sequence names end with <code>_S</code>:</p>
<pre>
GRANT insert,select,update ON city_data_node$ TO b;
GRANT insert,select,update ON city_data_edge$ TO b;
GRANT insert,select,update ON city_data_face$ TO b;
GRANT insert,select,update ON city_data_relation$ TO b;
GRANT select ON city_data_node_s TO b;
GRANT select ON city_data_edge_s TO b;
GRANT select ON city_data_face_s TO b;
</pre></li>
<li>
<p>When a user who does not own the topology edits that topology, the owner's schema name should be specified with the topology name in functions and procedures that accept the topology name as an input parameter. For example, user B should specify the topology as <code>A.CITY_DATA</code>, not just <code>CITY_DATA</code>.</p>
</li>
</ul>
<p>For information about editing topologies, see <a href="sdo_topo_editing.htm#CEGEHADJ">Chapter 2</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHFIFCH"></a>
<div id="TOPOL785" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.11</span> <a id="sthref121"></a>Function-Based Indexes Not Supported</h2>
<p>You cannot create a function-based index on a column of type SDO_TOPO_GEOMETRY. (Function-based indexes are explained in <a class="olink ADFNS" href="../e41502/toc.htm"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> and <a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>.)</p>
</div>
<!-- class="sect1" -->
<a id="i885918"></a>
<div id="TOPOL786" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.12</span> Topology Examples (PL/SQL)</h2>
<p><a id="sthref122"></a><a id="sthref123"></a>This section presents simplified PL/SQL examples that perform topology data model operations. The examples refer to concepts that are explained in this chapter. They use SDO_TOPO and SDO_TOPO_MAP functions and procedures, which are documented in <a href="sdo_topo_ref.htm#CACFCFHG">Chapter 3</a> and <a href="sdo_topo_map_ref.htm#CACDEDEE">Chapter 4</a>, and the SDO_ANYINTERACT topology operator (see <a href="#CIHCDHID">Section 1.8.1</a>).</p>
<p>Both examples are based on the "city data" topology shown in <a href="#BABCJFAD">Figure 1-1</a> in <a href="#CIHIBIFG">Section 1.2</a>, and the features shown in <a href="#CIHHABGI">Figure 1-3</a> in <a href="#CIHGIBFE">Section 1.3.1</a>. However, the topologies created are not identical, because the topology built from Spatial geometries (<a href="#CIHEIGCD">Example 1-13</a>) does not contain all the edges, nodes, and faces that are defined for the topology build from topology data (<a href="#CIHDDJBA">Example 1-12</a>).</p>
<a id="CIHCEGJI"></a>
<div id="TOPOL787" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.12.1</span> Topology Built from Topology Data</h3>
<p><a href="#CIHDDJBA">Example 1-12</a> uses a topology built from edge, node, and face data.</p>
<div id="TOPOL788" class="example">
<p class="titleinexample"><a id="CIHDDJBA"></a>Example 1-12 Topology Built from Topology Data</p>
<pre>
------------------------------
-- Main steps for using the topology data model with a topology
-- built from edge, node, and face data
------------------------------
-- 1. Create a topology.
-- 2. Load (normally bulk-load) topology data (node, edge, and face tables).
-- 3. Create feature tables.
-- 4. Associate feature tables with the topology.
-- 5. Initialize topology metadata.
-- 6. Load feature tables using the SDO_TOPO_GEOMETRY constructor.
-- 7. Query the data.
-- 8. Optionally, edit data using the PL/SQL or Java API.
 
-- 1. Create the topology. (Null SRID in this example.)
EXECUTE SDO_TOPO.CREATE_TOPOLOGY('CITY_DATA', 0.00005);
 
-- 2. Load topology data (node, edge, and face tables).
--  Use INSERT statements here instead of a bulk-load utility.
 
-- 2A. Insert data into &lt;topology_name&gt;_EDGE$ table.
 
-- E1
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(1, 1, 1, 1, 1, -1, -1, 1, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(8,30, 16,30, 16,38, 3,38, 3,30, 8,30)));
-- E2
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(2, 2, 2, 3, -3, -2, -2, 2, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(25,30, 31,30, 31,40, 17,40, 17,30, 25,30)));
-- E3
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(3, 2, 3, -3, 2, 2, 3, 2, 2,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(25,30, 25,35)));
-- E4
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(4, 5, 6, -5, -4, 4, 5, -1, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(36,38, 38,35, 41,34, 42,33, 45,32, 47,28, 50,28, 52,32,
57,33)));
-- E5
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(5, 7, 6, -4, -5, 5, 4, -1, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(41,40, 45,40, 47,42, 62,41, 61,38, 59,39, 57,36,
57,33)));
-- E6
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(6, 16, 17, 7, 21, -21, 19, -1, 3,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,22, 21,22)));
-- E7
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(7, 17, 18, 8, 6, -19, 17, -1, 4,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(21,22, 35,22)));
-- E8
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(8, 18, 19, -15, 7, -17, 15, -1, 5,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(35,22, 47,22)));
-- E9
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(9, 15, 14, 19, -21, -22, 20, 3, 6,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,14, 21,14)));
-- E10
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(10, 13, 14, -20, 18, 17, -19, 7, 4,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(35,14, 21,14)));
-- E11
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(11, 13, 12, 15, -17, -18, 16, 5, 8,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(35,14, 47,14)));
-- E12
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(12, 8, 9, 20, -22, 22, -13, 6, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,6, 21,6)));
-- E13
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(13, 9, 10, 18, -20, -12, -14, 7, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(21,6, 35,6)));
-- E14
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(14, 10, 11, 16, -18, -13, -16, 8, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(35,6, 47,6)));
-- E15
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(15, 12, 19, -8, 11, -16, 8, 5, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(47,14, 47,22)));
-- E16
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(16, 11, 12, -11, 14, -14, -15, 8, -1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(47,6, 47,14)));
-- E17
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(17, 13, 18, -7, -10, 11, -8, 4, 5,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(35,14, 35,22)));
-- E18
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(18, 10, 13, 10, 13, 14, -11, 7, 8,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(35,6, 35,14)));
-- E19
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(19, 14, 17, -6, 9, -10, -7, 3, 4,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(21,14, 21,22)));
-- E20
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(20, 9, 14, -9, 12, 13, 10, 6, 7,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(21,6, 21,14)));
-- E21
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(21, 15, 16, 6, 22, 9, -6, -1, 3,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,14, 9,22)));
-- E22
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(22, 8, 15, 21, -12, 12, -9, -1, 6,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,6, 9,14)));
-- E25
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(25, 21, 22, -25, -25, 25, 25, 1, 1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,35, 13,35)));
-- E26
INSERT INTO city_data_edge$ (edge_id, start_node_id, end_node_id, 
    next_left_edge_id, prev_left_edge_id, next_right_edge_id, 
    prev_right_edge_id, left_face_id, right_face_id, geometry)
 VALUES(26, 20, 20, 26, 26, -26, -26, 9, 1,
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(4,31, 7,31, 7,34, 4,34, 4,31)));
 
-- 2B. Insert data into &lt;topology_name&gt;_NODE$ table.
 
-- N1
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(1, 1, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(8,30,NULL), NULL, NULL));
-- N2
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(2, 2, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(25,30,NULL), NULL, NULL));
-- N3
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(3, -3, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(25,35,NULL), NULL, NULL));
-- N4
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(4, NULL, 2,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(20,37,NULL), NULL, NULL));
-- N5
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(5, 4, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(36,38,NULL), NULL, NULL));
-- N6
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(6, -4, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(57,33,NULL), NULL, NULL));
-- N7
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(7, 5, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(41,40,NULL), NULL, NULL));
-- N8
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(8, 12, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(9,6,NULL), NULL, NULL));
-- N9
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(9, 20, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(21,6,NULL), NULL, NULL));
-- N10
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(10, 18, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(35,6,NULL), NULL, NULL));
-- N11
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(11, -14, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(47,6,NULL), NULL, NULL));
-- N12
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(12, 15, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(47,14,NULL), NULL, NULL));
-- N13
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(13, 17, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(35,14,NULL), NULL, NULL));
-- N14
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(14, 19, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(21,14,NULL), NULL, NULL));
-- N15
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(15, 21, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(9,14,NULL), NULL, NULL));
-- N16
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(16, 6, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(9,22,NULL), NULL, NULL));
-- N17
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(17, 7, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(21,22,NULL), NULL, NULL));
-- N18
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(18, 8, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(35,22,NULL), NULL, NULL));
-- N19
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(19, -15, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(47,22,NULL), NULL, NULL));
-- N20
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(20, 26, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(4,31,NULL), NULL, NULL));
-- N21
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(21, 25, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(9,35,NULL), NULL, NULL));
-- N22
INSERT INTO city_data_node$ (node_id, edge_id, face_id, geometry) 
 VALUES(22, -25, NULL,
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(13,35,NULL), NULL, NULL));
 
-- 2C. Insert data into &lt;topology_name&gt;_FACE$ table.
 
-- F0 (id = -1, not 0)
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(-1, NULL, SDO_LIST_TYPE(-1, -2, 4, 6), 
   SDO_LIST_TYPE(), NULL);
-- F1
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(1, 1, SDO_LIST_TYPE(25, -26), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(3,30, 15,38)));
-- F2
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(2, 2, SDO_LIST_TYPE(), SDO_LIST_TYPE(4),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(17,30, 31,40)));
-- F3
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(3, 19, SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(9,14, 21,22)));
-- F4
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(4, 17, SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(21,14, 35,22)));
-- F5
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(5, 15, SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(35,14, 47,22)));
-- F6
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(6, 20, SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(9,6, 21,14)));
-- F7
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(7, 10, SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(21,6, 35,14)));
-- F8
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(8, 16, SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(35,6, 47,14)));
-- F9
INSERT INTO city_data_face$ (face_id, boundary_edge_id, 
    island_edge_id_list, island_node_id_list, mbr_geometry) 
 VALUES(9,26,SDO_LIST_TYPE(), SDO_LIST_TYPE(),
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,3),
    SDO_ORDINATE_ARRAY(4,31, 7,34)));
 
-- 3. Create feature tables.
 
CREATE TABLE land_parcels ( -- Land parcels (selected faces)
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE city_streets ( -- City streets (selected edges)
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE traffic_signs ( -- Traffic signs (selected nodes)
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
-- 4. Associate feature tables with the topology.
--    Add the three topology geometry layers to the CITY_DATA topology.
--    Any order is OK.
 
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'LAND_PARCELS','FEATURE', 'POLYGON');
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'TRAFFIC_SIGNS','FEATURE', 'POINT');
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'CITY_STREETS', 'FEATURE','LINE');
 
--  As a result, Spatial generates a unique TG_LAYER_ID for each layer in 
--  the topology metadata (USER/ALL_SDO_TOPO_METADATA).
 
-- 5. Initialize topology metadata.
EXECUTE SDO_TOPO.INITIALIZE_METADATA('CITY_DATA');
 
-- 6. Load feature tables using the SDO_TOPO_GEOMETRY constructor.
 
-- Each topology feature can consist of one or more objects (face, edge, node)
-- of an appropriate type. For example, a land parcel can consist of one face,
-- or two or more faces, as specified in the SDO_TOPO_OBJECT_ARRAY.
 
-- There are typically fewer features than there are faces, nodes, and edges.
-- In this example, the only features are these:
-- Area features (land parcels): P1, P2, P3, P4, P5
-- Point features (traffic signs): S1, S2, S3, S4
-- Linear features (roads/streets): R1, R2, R3, R4

-- 6A. Load LAND_PARCELS table.
 
-- P1
INSERT INTO land_parcels VALUES ('P1', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (3, 3), -- face_id = 3
      SDO_TOPO_OBJECT (6, 3))) -- face_id = 6
);
-- P2
INSERT INTO land_parcels VALUES ('P2', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (4, 3), -- face_id = 4
      SDO_TOPO_OBJECT (7, 3))) -- face_id = 7
);
-- P3
INSERT INTO land_parcels VALUES ('P3', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (5, 3), -- face_id = 5
      SDO_TOPO_OBJECT (8, 3))) -- face_id = 8
);
-- P4
INSERT INTO land_parcels VALUES ('P4', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (2, 3))) -- face_id = 2
);
-- P5 (Includes F1, but not F9.)
INSERT INTO land_parcels VALUES ('P5', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    3, -- Topology geometry type (polygon/multipolygon)
    1, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (1, 3))) -- face_id = 1
);
 
-- 6B. Load TRAFFIC_SIGNS table.
 
-- S1
INSERT INTO traffic_signs VALUES ('S1', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    1, -- Topology geometry type (point)
    2, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (14, 1))) -- node_id = 14
);
-- S2
INSERT INTO traffic_signs VALUES ('S2', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    1, -- Topology geometry type (point)
    2, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (13, 1))) -- node_id = 13
);
-- S3
INSERT INTO traffic_signs VALUES ('S3', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    1, -- Topology geometry type (point)
    2, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (6, 1))) -- node_id = 6
);
-- S4
INSERT INTO traffic_signs VALUES ('S4', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    1, -- Topology geometry type (point)
    2, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (4, 1))) -- node_id = 4
);
 
-- 6C. Load CITY_STREETS table.
-- (Note: "R" in feature names is for "Road", because "S" is used for signs.)
 
-- R1
INSERT INTO city_streets VALUES ('R1', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    2, -- Topology geometry type (line string)
    3, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (9, 2),
      SDO_TOPO_OBJECT (-10, 2),
      SDO_TOPO_OBJECT (11, 2))) -- edge_ids = 9, -10, 11
);
-- R2
INSERT INTO city_streets VALUES ('R2', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    2, -- Topology geometry type (line string)
    3, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (4, 2),
      SDO_TOPO_OBJECT (-5, 2))) -- edge_ids = 4, -5
);
-- R3
INSERT INTO city_streets VALUES ('R3', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    2, -- Topology geometry type (line string)
    3, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (25, 2))) -- edge_id = 25
);
-- R4
INSERT INTO city_streets VALUES ('R4', -- Feature name
  SDO_TOPO_GEOMETRY(
    'CITY_DATA', -- Topology name
    2, -- Topology geometry type (line string)
    3, -- TG_LAYER_ID for this topology (from ALL_SDO_TOPO_METADATA)
    SDO_TOPO_OBJECT_ARRAY (
      SDO_TOPO_OBJECT (3, 2))) -- edge_id = 3
);
 
-- 7. Query the data.
 
SELECT a.feature_name, a.feature.tg_id, a.feature.get_geometry()
FROM land_parcels a;
 
/* Window is city_streets */
SELECT  a.feature_name, b.feature_name
  FROM city_streets b,
     land_parcels a
  WHERE  b.feature_name like 'R%' AND 
     sdo_anyinteract(a.feature, b.feature) = 'TRUE'
  ORDER BY b.feature_name, a.feature_name;
 
-- Find all streets that have any interaction with land parcel P3.
-- (Should return only R1.)
SELECT c.feature_name FROM city_streets c, land_parcels l 
  WHERE l.feature_name = 'P3' AND
   SDO_ANYINTERACT (c.feature, l.feature) = 'TRUE';
 
-- Find all land parcels that have any interaction with traffic sign S1.
-- (Should return P1 and P2.)
SELECT l.feature_name FROM land_parcels l, traffic_signs t 
  WHERE t.feature_name = 'S1' AND
   SDO_ANYINTERACT (l.feature, t.feature) = 'TRUE';
 
-- Get the geometry for land parcel P1.
SELECT l.feature_name, l.feature.get_geometry()
  FROM land_parcels l WHERE l.feature_name = 'P1';
 
-- Get the boundary of face with face_id 3.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 3) FROM DUAL;
 
-- Get the topological elements for land parcel P2.
-- CITY_DATA layer, land parcels (tg_ layer_id = 1), parcel P2 (tg_id = 2)
SELECT SDO_TOPO.GET_TOPO_OBJECTS('CITY_DATA', 1, 2) FROM DUAL;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHBGDEC"></a>
<div id="TOPOL789" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">1.12.2</span> Topology Built from Spatial Geometries</h3>
<p><a href="#CIHEIGCD">Example 1-13</a> uses a topology built from Oracle Spatial geometry data.</p>
<div id="TOPOL790" class="example">
<p class="titleinexample"><a id="CIHEIGCD"></a>Example 1-13 Topology Built from Spatial Geometries</p>
<pre>
------------------------------
-- Main steps for using the topology data model with a topology
-- built from Spatial geometry data
------------------------------
-- 1. Create the topology.
-- 2. Insert the universe face (F0). (id = -1, not 0)
-- 3. Create feature tables.
-- 4. Associate feature tables with the topology.
-- 5. Create a TopoMap object and load the whole topology into 
--     cache for updating.
-- 6. Load feature tables, inserting data from the spatial tables and 
--     using SDO_TOPO_MAP.CREATE_FEATURE.
-- 7. Initialize topology metadata.
-- 8. Query the data.
-- 9. Optionally, edit the data using the PL/SQL or Java API.
 
-- Preliminary work for this example (things normally done to use
-- data with Oracle Spatial): 
-- * Create the spatial tables.
-- * Update the Spatial metadata (USER_SDO_GEOM_METADATA).
-- * Load data into the spatial tables.
-- * Validate the spatial data (validate the layers).
-- * Create the spatial indexes.
 
-- Create spatial tables of geometry features: names and geometries.
 
CREATE TABLE city_streets_geom ( -- City streets/roads
  name VARCHAR2(30) PRIMARY KEY,
  geometry SDO_GEOMETRY);
 
CREATE TABLE traffic_signs_geom ( -- Traffic signs
  name VARCHAR2(30) PRIMARY KEY,
  geometry SDO_GEOMETRY);
 
CREATE TABLE land_parcels_geom ( -- Land parcels
  name VARCHAR2(30) PRIMARY KEY,
  geometry SDO_GEOMETRY);
 
INSERT INTO user_sdo_geom_metadata
    (TABLE_NAME,
     COLUMN_NAME,
     DIMINFO,
     SRID)
  VALUES (
    'CITY_STREETS_GEOM',
    'GEOMETRY',
    SDO_DIM_ARRAY(
      SDO_DIM_ELEMENT('X', 0, 65, 0.005),
      SDO_DIM_ELEMENT('Y', 0, 45, 0.005)
      ),
    NULL -- SRID
  );
 
INSERT INTO user_sdo_geom_metadata
    (TABLE_NAME,
     COLUMN_NAME,
     DIMINFO,
     SRID)
  VALUES (
    'TRAFFIC_SIGNS_GEOM',
    'GEOMETRY',
    SDO_DIM_ARRAY(
      SDO_DIM_ELEMENT('X', 0, 65, 0.005),
      SDO_DIM_ELEMENT('Y', 0, 45, 0.005)
      ),
    NULL -- SRID
  );
 
INSERT INTO user_sdo_geom_metadata
    (TABLE_NAME,
     COLUMN_NAME,
     DIMINFO,
     SRID)
  VALUES (
    'LAND_PARCELS_GEOM',
    'GEOMETRY',
    SDO_DIM_ARRAY(
      SDO_DIM_ELEMENT('X', 0, 65, 0.005),
      SDO_DIM_ELEMENT('Y', 0, 45, 0.005)
      ),
    NULL -- SRID
  );
 
-- Load these tables (names and geometries for city streets/roads,
-- traffic signs, and land parcels).
 
-- Insert data into city street line geometries.
 
-- R1 
INSERT INTO city_streets_geom VALUES('R1',
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,14, 21,14, 35,14, 47,14)));
 
-- R2
INSERT INTO city_streets_geom VALUES('R2',
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(36,38, 38,35, 41,34, 42,33, 45,32, 47,28, 50,28, 52,32,
57,33, 57,36, 59,39, 61,38, 62,41, 47,42, 45,40, 41,40)));
 
-- R3
INSERT INTO city_streets_geom VALUES('R3',
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(9,35, 13,35)));
 
-- R4
INSERT INTO city_streets_geom VALUES('R4',
  SDO_GEOMETRY(2002, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 2, 1),
    SDO_ORDINATE_ARRAY(25,30, 25,35)));
 
-- Insert data into traffic sign point geometries.
 
-- S1
INSERT INTO traffic_signs_geom VALUES('S1',
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(21,14,NULL), NULL, NULL));
 
-- S2
INSERT INTO traffic_signs_geom VALUES('S2',
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(35,14,NULL), NULL, NULL));
 
-- S3
INSERT INTO traffic_signs_geom VALUES('S3',
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(57,33,NULL), NULL, NULL));
 
-- S4
INSERT INTO traffic_signs_geom VALUES('S4',
  SDO_GEOMETRY(2001, NULL, SDO_POINT_TYPE(20,37,NULL), NULL, NULL));
 
-- Insert data into land parcel polygon geometries.
 
-- P1
INSERT INTO land_parcels_geom VALUES('P1',
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1, 1003, 1), 
    SDO_ORDINATE_ARRAY(9,6, 21,6, 21,14, 21,22, 9,22, 9,14, 9,6)));
 
-- P2
INSERT INTO land_parcels_geom VALUES('P2',
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,1),
    SDO_ORDINATE_ARRAY(21,6, 35,6, 35,14, 35,22, 21,22, 21,14, 21,6)));
 
-- P3
INSERT INTO land_parcels_geom VALUES('P3',
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,1),
    SDO_ORDINATE_ARRAY(35,6, 47,6, 47,14, 47,22, 35,22, 35,14, 35,6)));
 
-- P4
INSERT INTO land_parcels_geom VALUES('P4',
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,1),
    SDO_ORDINATE_ARRAY(17,30, 31,30, 31,40, 17,40, 17,30)));
 
-- P5 (polygon with a hole; exterior ring and one interior ring)
INSERT INTO land_parcels_geom VALUES('P5',
  SDO_GEOMETRY(2003, NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1003,1, 11,2003,1), 
      SDO_ORDINATE_ARRAY(3,30, 16,30, 16,38, 3,38, 3,30, 4,31, 4,34, 7,34, 7,31, 4,31)));
 
-- Validate the layers.
create table val_results (sdo_rowid ROWID, result VARCHAR2(2000));
call SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT('CITY_STREETS_GEOM','GEOMETRY','VAL_RESULTS');
SELECT * from val_results;
truncate table val_results;
call SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT('TRAFFIC_SIGNS_GEOM','GEOMETRY','VAL_RESULTS');
SELECT * from val_results;
truncate table val_results;
call SDO_GEOM.VALIDATE_LAYER_WITH_CONTEXT('LAND_PARCELS_GEOM','GEOMETRY','VAL_RESULTS');
SELECT * from val_results;
drop table val_results;
 
-- Create the spatial indexes.
CREATE INDEX city_streets_geom_idx ON city_streets_geom(geometry)
  INDEXTYPE IS MDSYS.SPATIAL_INDEX;
CREATE INDEX traffic_signs_geom_idx ON traffic_signs_geom(geometry)
  INDEXTYPE IS MDSYS.SPATIAL_INDEX;
CREATE INDEX land_parcels_geom_idx ON land_parcels_geom(geometry)
  INDEXTYPE IS MDSYS.SPATIAL_INDEX;
 
-- Start the main steps for using the topology data model with a
-- topology built from Spatial geometry data.
 
-- 1. Create the topology. (Null SRID in this example.)
EXECUTE SDO_TOPO.CREATE_TOPOLOGY('CITY_DATA', 0.00005);
 
-- 2. Insert the universe face (F0). (id = -1, not 0)
INSERT INTO CITY_DATA_FACE$ values (
  -1, NULL, SDO_LIST_TYPE(), SDO_LIST_TYPE(), NULL);
 
COMMIT;
 
-- 3. Create feature tables.
 
CREATE TABLE city_streets ( -- City streets/roads
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE traffic_signs ( -- Traffic signs
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
CREATE TABLE land_parcels ( -- Land parcels
  feature_name VARCHAR2(30) PRIMARY KEY,
  feature SDO_TOPO_GEOMETRY);
 
-- 4. Associate feature tables with the topology.
--    Add the three topology geometry layers to the CITY_DATA topology.
--    Any order is OK.
 
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'CITY_STREETS', 'FEATURE','LINE');
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'TRAFFIC_SIGNS','FEATURE', 'POINT');
EXECUTE SDO_TOPO.ADD_TOPO_GEOMETRY_LAYER('CITY_DATA', 'LAND_PARCELS','FEATURE', 'POLYGON');
 
--  As a result, Spatial generates a unique TG_LAYER_ID for each layer in 
--  the topology metadata (USER/ALL_SDO_TOPO_METADATA).
 
-- 5. Create a TopoMap object and load the whole topology into cache for updating.
 
EXECUTE SDO_TOPO_MAP.CREATE_TOPO_MAP('CITY_DATA', 'CITY_DATA_TOPOMAP');
EXECUTE SDO_TOPO_MAP.LOAD_TOPO_MAP('CITY_DATA_TOPOMAP', 'true');
 
-- 6. Load feature tables, inserting data from the spatial tables and 
--     using SDO_TOPO_MAP.CREATE_FEATURE.
 
BEGIN
  FOR street_rec IN (SELECT name, geometry FROM city_streets_geom) LOOP
   INSERT INTO city_streets VALUES(street_rec.name,
     SDO_TOPO_MAP.CREATE_FEATURE('CITY_DATA', 'CITY_STREETS', 'FEATURE',
         street_rec.geometry));
  END LOOP;
 
  FOR sign_rec IN (SELECT name, geometry FROM traffic_signs_geom) LOOP
   INSERT INTO traffic_signs VALUES(sign_rec.name,
     SDO_TOPO_MAP.CREATE_FEATURE('CITY_DATA', 'TRAFFIC_SIGNS', 'FEATURE',
         sign_rec.geometry));
  END LOOP;
 
  FOR parcel_rec IN (SELECT name, geometry FROM land_parcels_geom) LOOP
   INSERT INTO land_parcels VALUES(parcel_rec.name,
     SDO_TOPO_MAP.CREATE_FEATURE('CITY_DATA', 'LAND_PARCELS', 'FEATURE',
         parcel_rec.geometry));
  END LOOP;
END;
/
 
CALL SDO_TOPO_MAP.COMMIT_TOPO_MAP();
CALL SDO_TOPO_MAP.DROP_TOPO_MAP('CITY_DATA_TOPOMAP');
 
-- 7. Initialize topology metadata.
EXECUTE SDO_TOPO.INITIALIZE_METADATA('CITY_DATA');
 
-- 8. Query the data.
 
SELECT a.feature_name, a.feature.tg_id, a.feature.get_geometry()
FROM land_parcels a;
 
SELECT a.feature_name, a.feature.tg_id, a.feature.get_geometry()
FROM city_streets a;
 
SELECT a.feature_name, a.feature.tg_id, a.feature.get_geometry()
FROM traffic_signs a;
 
SELECT sdo_topo.get_face_boundary('CITY_DATA', face_id), face_id
FROM city_data_face$;
 
SELECT sdo_topo.get_face_boundary('CITY_DATA', face_id), face_id
FROM city_data_face$;
 
SELECT sdo_topo.get_face_boundary('CITY_DATA', face_id, 'TRUE'), face_id
FROM city_data_face$;
 
-- Get topological elements.
SELECT a.FEATURE_NAME,
 sdo_topo.get_topo_objects('CITY_DATA', a.feature.TG_LAYER_ID, a.feature.TG_ID)
FROM land_parcels a;
 
SELECT a.FEATURE_NAME, 
 sdo_topo.get_topo_objects('CITY_DATA', a.feature.TG_LAYER_ID, a.feature.TG_ID)
FROM city_streets a;
 
SELECT a.FEATURE_NAME, 
 sdo_topo.get_topo_objects('CITY_DATA', a.feature.TG_LAYER_ID, a.feature.TG_ID)
FROM traffic_signs a;
 
SELECT sdo_topo.get_topo_objects('CITY_DATA', sdo_geometry(2003,null, null,
       sdo_elem_info_array(1,1003,3),
        sdo_ordinate_array(1,1, 20,20)))
        FROM DUAL;
 
SELECT sdo_topo.get_topo_objects('CITY_DATA', sdo_geometry(2003,null, null,
       sdo_elem_info_array(1,1003,3),
        sdo_ordinate_array(17,30, 31,40)))
        FROM DUAL;
 
-- Find all city streets interacting with a query window.
SELECT c.feature_name FROM city_streets c WHERE
  SDO_ANYINTERACT(
    c.feature,
    SDO_GEOMETRY(2003, NULL, NULL,
      SDO_ELEM_INFO_ARRAY(1, 1003, 3),
      SDO_ORDINATE_ARRAY(5,5, 30,40)))
= 'TRUE';
 
-- Find all streets that have any interaction with land parcel P3.
-- (Should return only R1.)
SELECT c.feature_name FROM city_streets c, land_parcels l 
  WHERE l.feature_name = 'P3' AND
   SDO_ANYINTERACT (c.feature, l.feature) = 'TRUE';
 
-- Find all land parcels that have any interaction with traffic sign S1.
-- (Should return P1 and P2.)
SELECT l.feature_name FROM land_parcels l, traffic_signs t 
  WHERE t.feature_name = 'S1' AND
   SDO_ANYINTERACT (l.feature, t.feature) = 'TRUE';
 
-- Get the geometry for land parcel P1.
SELECT l.feature_name, l.feature.get_geometry()
  FROM land_parcels l WHERE l.feature_name = 'P1';
 
-- Query SDO_TOPO_GEOMETRY attributes,
SELECT s.feature.tg_type FROM city_streets s;
SELECT s.feature.tg_id FROM city_streets s;
SELECT s.feature.tg_layer_id FROM city_streets s;
SELECT s.feature.topology_id FROM city_streets s;
 
-- Topology-specific functions
 
-- Get the boundary of face with face_id 3.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 3) FROM DUAL;
-- Try 'TRUE' as third parameter.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 3, 'TRUE') FROM DUAL;
-- Get the boundary of face with face_id 2.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 2) FROM DUAL;
-- Try 'TRUE' as third parameter.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 2, 'TRUE') FROM DUAL;
-- Get the boundary of face with face_id 1.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 1) FROM DUAL;
-- Specify 'TRUE' for the all_edges parameter.
SELECT SDO_TOPO.GET_FACE_BOUNDARY('CITY_DATA', 1, 'TRUE') FROM DUAL;
 
-- CITY_DATA layer, land parcels (tg_ layer_id = 1), parcel P2 (tg_id = 2)
SELECT SDO_TOPO.GET_TOPO_OBJECTS('CITY_DATA', 1, 2) FROM DUAL;
 
-- 10. Optionally, edit the data using the PL/SQL or Java API.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHBGAEB"></a>
<div id="TOPOL791" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">1.13</span> README File for Spatial and Related Features</h2>
<p><a id="sthref124"></a>A <code>README.txt</code> file supplements the information in the following manuals: <a class="olink SPATL" href="../e11830/toc.htm"><span class="italic">Oracle Spatial Developer's Guide</span></a>, <a class="olink GEORS" href="../e11827/toc.htm"><span class="italic">Oracle Spatial GeoRaster Developer's Guide</span></a>, and <span class="italic">Oracle Spatial Topology and Network Data Models Developer's Guide</span> (this manual). This file is located at:</p>
<pre>
<span class="italic">$ORACLE_HOME</span>/md/doc/README.txt
</pre></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment778">
<tr>
<td class="cellalignment785">
<table class="cellalignment783">
<tr>
<td class="cellalignment782"><a href="sdo_prttopo.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment782"><a href="sdo_topo_editing.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment787">
<table class="cellalignment781">
<tr>
<td class="cellalignment782"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment782"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment782"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment782"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment782"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment782"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
