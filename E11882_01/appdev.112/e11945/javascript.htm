<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>How to Incorporate JavaScript into an Application</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 015" />
<meta name="dcterms.created" content="2012-02-02T14:33:22Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Application Express Advanced Tutorials" />
<meta name="dcterms.identifier" content="E11945-02" />
<meta name="dcterms.isVersionOf" content="HTMAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="up_dn_files.htm" title="Previous" type="text/html" />
<link rel="Next" href="acl.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e11945.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/19</span> <!-- End Header --><a id="CIHEBFFC"></a>
<h1 class="chapter"><span class="secnum">10</span> <a id="HTMAD009"></a>How to Incorporate JavaScript into an Application</h1>
<p>Adding JavaScript to a Web application is a great way to add features that mimic those found in client/server applications without sacrificing all of the benefits of Web deployment. Oracle Application Express includes multiple built-in interfaces especially designed for adding JavaScript.</p>
<p>Remember that JavaScript is not appropriate for data intensive validations. For example, to verify that a name is contained within a large database table, you would need to pull down every record to the client, creating a huge HTML document. In general, complex operations are much better suited for server-side Oracle Application Express validations instead of JavaScript.</p>
<p>This tutorial describes some usage scenarios for JavaScript and includes details about how to implement them in your application.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGAGGI">Understanding How to Incorporate JavaScript Functions</a></p>
</li>
<li>
<p><a href="#CHDCDAJF">About Referencing Items Using JavaScript</a></p>
</li>
<li>
<p><a href="#CHDDHAFA">Calling JavaScript from a Button</a></p>
</li>
<li>
<p><a href="#CHDDCIFE">Changing the Value of Form Elements</a></p>
</li>
<li>
<p><a href="#CHDHCBEC">Creating a Client Side JavaScript Validation</a></p>
</li>
<li>
<p><a href="#CHDBECCF">Enabling and Disabling Form Elements</a></p>
</li>
</ul>
<p>For additional examples on this topic, please visit the following Oracle by Examples (OBEs):</p>
<ul>
<li>
<p>Incorporating JavaScript into Your Application</p>
<p><code><a href="http://www.oracle.com/technology/obe/hol08/apexweb20/javascript_otn.htm">http://www.oracle.com/technology/obe/hol08/apexweb20/javascript_otn.htm</a></code></p>
</li>
<li>
<p>Using AJAX in your Application</p>
<p><code><a href="http://www.oracle.com/technology/obe/hol08/apexweb20/ajax_otn.htm">http://www.oracle.com/technology/obe/hol08/apexweb20/ajax_otn.htm</a></code></p>
</li>
</ul>
<a id="CHDGAGGI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Understanding How to Incorporate JavaScript Functions</h2>
<p>There are two primary places to include JavaScript functions:</p>
<ul>
<li>
<p>In the HTML Header attribute of a page</p>
</li>
<li>
<p>In a<code>.js</code> file referenced in the page template</p>
</li>
</ul>
<p>Topics in this section include:</p>
<ul>
<li>
<p><a href="#BCEHBIGD">Incorporating JavaScript in the HTML Header Attribute</a></p>
</li>
<li>
<p><a href="#BCEHEFGF">Including JavaScript in a .js File Referenced by the Page Template</a></p>
</li>
</ul>
<a id="BCEHBIGD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Incorporating JavaScript in the HTML Header Attribute</h3>
<p>One way to include JavaScript into your application is to add it to the HTML Header attribute of the page. This is a good approach for functions that are specific to a page as well as a convenient way to test a function before you include it in a<code>.js</code> file.</p>
<p>You can add JavaScript functions to a page by entering the code in the HTML Header attribute on the Page Attributes page.</p>
<p>To add JavaScript code in the HTML Header attribute:</p>
<ol>
<li>
<p>On the Workspace home page, click the <span class="bold">Application Builder</span> icon.</p>
</li>
<li>
<p>Select an application.</p>
<p>The Application home page appears, displaying its set of pages.</p>
</li>
<li>
<p>Click a page.</p>
<p>The Page Definition for that page appears.</p>
</li>
<li>
<p>In the Page section, click the <span class="bold">Edit page attributes</span> icon.</p>
<p>The Edit Page appears.</p>
</li>
<li>
<p>Scroll down to the HTML Header section.</p>
</li>
<li>
<p>Enter code into HTML Header and then click <span class="bold">Apply Changes</span>.</p>
</li>
</ol>
<p>For example, adding the following code would test a function accessible from anywhere on the current page.</p>
<pre>
&lt;script type="text/javascript"&gt;
  function test(){
    window.alert('This is a test.');
  }
&lt;/script&gt;
</pre></div>
<!-- class="sect2" -->
<a id="BCEHEFGF"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Including JavaScript in a .js File Referenced by the Page Template</h3>
<p>In Oracle Application Express you can reference a<code>.js</code> file in the page template. This approach makes all the JavaScript in that file accessible to the application. This is the most efficient approach because a<code>.js</code> file loads on the first page view of your application, and is then cached by the browser.</p>
<p>The following code demonstrates how to include a .js file in the header section of a page template. Note the line <code>script src=</code> that appears in bold.</p>
<pre>
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;#TITLE#&lt;/title&gt;
    #HEAD#
    <span class="bold">&lt;script src="http://myserver.myport/my_images/custom.js" type="text/javascript"&gt;&lt;/script&gt;</span>
&lt;/head&gt;
&lt;body #ONLOAD#&gt;#FORM_OPEN#
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Customizing Templates" in <a class="olink HTMDB" href="../e11947/toc.htm"><span class="italic">Oracle Database Application Express User's Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDCDAJF"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Referencing Items Using JavaScript</h2>
<p>When you reference an item, the best approach is to reference the item name as it is defined within the page. Note that item name is different than the item label. The item name displays on the Page Definition and the label displays on a running page. For example, if you create an item with the name <code>P1_FIRST_NAME</code> and a label of <code>First Name</code>, you would reference the item using <code>P1_FIRST_NAME</code>.</p>
<p>Referencing an item by the item name enables you to use the JavaScript method <code>getElementById()</code> to get and set item attributes and values. The following example demonstrates how to reference an item by ID and display its value in an alert box.</p>
<pre>
&lt;script type="text/javascript"&gt;
  function firstName(){    
    window.alert('First Name is ' + document.getElementById('P1_FIRST_NAME').value );
  }
 // or a more generic version would be
  function displayValue(id){    
    alert('The Value is ' + document.getElementById(id).value );
  }
&lt;/script&gt;
 
  // Then add the following to the "Form Element Attributes" Attribute of the item:
  onchange="displayValue('P1_FIRST_NAME');"
</pre></div>
<!-- class="sect1" -->
<a id="CHDDHAFA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Calling JavaScript from a Button</h2>
<p>Calling a JavaScript from a button is a great way to confirm a request. Oracle Application Express uses this technique for the delete operation of most objects. For example, when you delete a button, a JavaScript message appears asking you to confirm your request. Consider the following example:</p>
<pre>
&lt;script type="text/javascript"&gt;
  function deleteConfirm(msg)
  {
var confDel = msg;
if(confDel ==null)
  confDel= confirm("Would you like to perform this delete action?");
else
  confDel= confirm(msg);
  
if (confDel== true)
  doSubmit('Delete');
  }
&lt;/script&gt;
</pre>
<p>This example creates a function to confirm a delete action and then calls that function from a button. Note that the function optionally submits the page and sets the value of the internal variable <code>:REQUEST</code> to <code>Delete</code>, thus performing the delete using a process that conditionally executes based on the value of request.</p>
<p>Note that when you create the button, you need to select <span class="bold">Action Redirect to URL without submitting page</span>. Then, you specify a URL target, such as the following:</p>
<pre>
confirmDelete('Would you like to perform this delete action?');
</pre></div>
<!-- class="sect1" -->
<a id="CHDDCIFE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Changing the Value of Form Elements</h2>
<p>In the following example, there are four text boxes in a region. The fourth text box contains the sum of the other three. To calculate this sum, you add a JavaScript function to the HTML Header attribute and then call that function from the first three items.</p>
<p>To add a function to the HTML Header attribute:</p>
<ol>
<li>
<p>Go to the appropriate Page Definition.</p>
</li>
<li>
<p>In the Page section, click the <span class="bold">Edit page attributes</span> icon.</p>
<p>The Edit Page appears.</p>
</li>
<li>
<p>In the HTML Header section, enter the following:</p>
<pre>
&lt;script type="text/javascript"&gt;
  function sumItems(){
    function getVal(item){
   if(document.getElementById(item).value != "")
     return parseFloat(document.getElementById(item).value);
   else
     return 0;
    }
    document.getElementById('P1_TOTAL').value = 
  getVal('P1_ONE') + getVal('P1_TWO') + getVal('P1_THREE');
  }
&lt;/script&gt;
</pre></li>
<li>
<p>Click <span class="bold">Apply Changes</span>.</p>
</li>
</ol>
<p>To call the function from all three items:</p>
<ol>
<li>
<p>Go to the appropriate Page Definition.</p>
</li>
<li>
<p>For each item:</p>
<ol>
<li>
<p>Select the item name by clicking it.</p>
</li>
<li>
<p>Scroll down to Element.</p>
</li>
<li>
<p>In HTML Form Element Attributes, enter:</p>
<pre>
onchange="sumItems();"
</pre></li>
<li>
<p>Click <span class="bold">Apply Changes</span>.</p>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDHCBEC"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Creating a Client Side JavaScript Validation</h2>
<p>Client side validations give immediate feedback to users using a form. One very common JavaScript validation is field not null. This type of validation works well in the page header rather than in a<code>.js</code> because it is so specific to a page.</p>
<p>Before you begin, you need to import and install the <span class="italic">OEHR Sample Objects</span> application in order to access the necessary sample database objects. See <a href="about.htm#BABFDBEI">"About Loading Sample Objects"</a>.</p>
<p>Topics in this section include:</p>
<ul>
<li>
<p><a href="#CIHCDBIG">Create an Application on the OEHR_EMPLOYEES Table</a></p>
</li>
<li>
<p><a href="#CIHIFCBD">Add a Function to the HTML Header Attribute</a></p>
</li>
<li>
<p><a href="#CIHEDCEE">Edit an Item to Call the Function</a></p>
</li>
<li>
<p><a href="#BABDGFIG">Test the Validation by Running the Page</a></p>
</li>
</ul>
<a id="CIHCDBIG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Create an Application on the OEHR_EMPLOYEES Table</h3>
<p>To create a new application on the <code>OEHR_EMPLOYEES</code> table:</p>
<ol>
<li>
<p>On the Workspace home page, click <span class="bold">Application Builder</span>.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
</li>
<li>
<p>For Method, select <span class="bold">Create Application</span> and then click <span class="bold">Next</span>.</p>
</li>
<li>
<p>For Name, specify the following:</p>
<ol>
<li>
<p>Name - Enter <code>JavaScript Example</code>.</p>
</li>
<li>
<p>Application - Accept the default.</p>
</li>
<li>
<p>Create Application - Select <span class="bold">From scratch</span>.</p>
</li>
<li>
<p>Schema - Select the schema where you installed the OEHR sample objects.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
</ol>
</li>
<li>
<p>Add a page containing a report by specifying the following in the Add Page section:</p>
<ol>
<li>
<p>Select Page Type - Select <span class="bold">Report and Form</span>.</p>
</li>
<li>
<p>Table Name - Select <span class="bold">OEHR_EMPLOYEES</span>.</p>
</li>
<li>
<p>Click <span class="bold">Add Page</span>.</p>
</li>
</ol>
<p>The new pages appear in the list at the top of the page. Next, change the name of page 2 to <span class="bold">Update Form</span>.</p>
</li>
<li>
<p>To change the name of page 2:</p>
<ol>
<li>
<p>Under Create Application at the top of the page, click the page name <span class="bold">OEHR_EMPLOYEES</span> for page 2 as shown in <a href="#BCEEDECI">Figure 10-1</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="BCEEDECI"></a>Figure 10-1 Newly Created Pages</p>
<img width="602" height="136" src="img/js_edit_pg_name.gif" alt="Description of Figure 10-1 follows" title="Description of Figure 10-1 follows" /><br />
<a id="sthref119" href="img_text/js_edit_pg_name.htm">Description of "Figure 10-1 Newly Created Pages"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The Page Definition appears.</p>
</li>
<li>
<p>In Page Name, enter <code>Update Form</code>.</p>
</li>
<li>
<p>Click <span class="bold">Apply Changes</span></p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
</ol>
</li>
<li>
<p>For Tabs, accept the default, <span class="bold">One Level of Tabs</span> and then click <span class="bold">Next</span>.</p>
</li>
<li>
<p>For Shared Components, accept the default, <span class="bold">No</span>, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>For Attributes, accept the defaults for Authentication Scheme, Language, and User Language Preference Derived From and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>For User Interface, select <span class="bold">Theme 2</span> and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Application home page appears. Note the new application contains three pages:</p>
<ul>
<li>
<p>1 - OEHR_EMPLOYEES</p>
</li>
<li>
<p>2 - Update Form</p>
</li>
<li>
<p>101 - Login</p>
</li>
</ul>
</li>
</ol>
<p>To view the application:</p>
<ol>
<li>
<p>Click the <span class="bold">Run Application</span> icon as shown in <a href="#BABIEAJJ">Figure 10-2</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="BABIEAJJ"></a>Figure 10-2 Run Application Icon</p>
<img width="104" height="78" src="img/run_page_icon.gif" alt="Description of Figure 10-2 follows" title="Description of Figure 10-2 follows" /><br />
<a id="sthref120" href="img_text/run_page_icon.htm">Description of "Figure 10-2 Run Application Icon"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>When prompted for a user name and password, enter your workspace user name and password and click <span class="bold">Login</span>. See <a href="about.htm#BABFCHBC">"About Application Authentication"</a>.</p>
<p>A standard report appears. To view the update form, click either the <span class="bold">Create</span> button or <span class="bold">Edit</span> icon.</p>
</li>
<li>
<p>Click <span class="bold">Application</span> on the Developer toolbar to return to the Application home page.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHIFCBD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Add a Function to the HTML Header Attribute</h3>
<p>Next, you need to add a function to the HTML Header attribute on page 2 that displays a message when the Last Name field does not contain a value.</p>
<p>To add a function to the HTML Header attribute on page 2:</p>
<ol>
<li>
<p>On the Application home page, click <span class="bold">2 - Update Form</span>.</p>
<p>The Page Definition for page 2 appears.</p>
</li>
<li>
<p>Under Page, click the <span class="bold">Edit page attributes</span> icon as shown in <a href="#BABJEFBE">Figure 10-3</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="BABJEFBE"></a>Figure 10-3 Edit Page Attributes Icon</p>
<img width="425" height="115" src="img/js_pg_attr.gif" alt="Description of Figure 10-3 follows" title="Description of Figure 10-3 follows" /><br />
<a id="sthref121" href="img_text/js_pg_attr.htm">Description of "Figure 10-3 Edit Page Attributes Icon"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The Edit Page appears.</p>
</li>
<li>
<p>Scroll down to HTML Header.</p>
<p>Note that HTML Header already contains a script. When the user clicks the Delete button, this script displays the following message.</p>
<pre>
Would you like to perform this delete action?
</pre></li>
<li>
<p>In HTML Header, scroll down and place your cursor after the last <code>&lt;/script&gt;</code> tag.</p>
</li>
<li>
<p>After the last <code>&lt;/script&gt;</code> tag, enter the following script:</p>
<pre>
&lt;script type="text/javascript"&gt;
  function notNull(object){    
    if(object.value=="")
   alert('This field must contain a value.');
  }
&lt;/script&gt;
</pre></li>
<li>
<p>At the top of the page, click <span class="bold">Apply Changes</span>.</p>
<p>The Page Definition for page 2 - Update Form appears.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHEDCEE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Edit an Item to Call the Function</h3>
<p>Next, you need to edit the <code>P2_LAST_NAME</code> item to call the function.</p>
<p>To edit the <code>P2_LAST_NAME</code> item to call the function:</p>
<ol>
<li>
<p>Under Items, click <span class="bold">P2_LAST_NAME</span>.</p>
</li>
<li>
<p>Scroll down to Element.</p>
</li>
<li>
<p>In HTML Form Element Attributes, enter the following:</p>
<pre>
onblur="notNull(this);"
</pre></li>
<li>
<p>At the top of the page, click <span class="bold">Apply Changes</span>.</p>
<p>The Page Definition appears. Next, run the page.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABDGFIG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Test the Validation by Running the Page</h3>
<p>Next, navigate to page 1 and run the page.</p>
<p>To test the validation:</p>
<ol>
<li>
<p>Enter <span class="bold">1</span> in the Page field on the Page Definition and click <span class="bold">Go</span>.</p>
<p>The Page Definition for page 1 appears.</p>
</li>
<li>
<p>Click the <span class="bold">Run Page</span> icon in the upper right corner.</p>
</li>
<li>
<p>When the application appears, click <span class="bold">Create</span>.</p>
<p>The Update Form appears.</p>
</li>
<li>
<p>Position your cursor in the Last Name field and then click <span class="bold">Create</span>. The message <code>This field must contain a value</code> appears as shown in <a href="#BABGJHGE">Figure 10-4</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="BABGJHGE"></a>Figure 10-4 Update Form</p>
<img width="597" height="327" src="img/js_message.gif" alt="Description of Figure 10-4 follows" title="Description of Figure 10-4 follows" /><br />
<a id="sthref122" href="img_text/js_message.htm">Description of "Figure 10-4 Update Form"</a><br />
<br /></div>
<!-- class="figure" --></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBECCF"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Enabling and Disabling Form Elements</h2>
<p>While Oracle Application Express enables you to conditionally display a page item, it is important to note that a page must be submitted for any changes on the page to be evaluated. The following example demonstrates how to use JavaScript to disable a form element based on the value of another form element.</p>
<p>First, you write a function and place it in the HTML Header attribute of the page containing your update form. Second, you call the function from an item on the page. The following example demonstrates how to add a JavaScript function to prevent users from adding commissions to employees who are not in the Sales Department (P2_DEPARTMENT_ID = 80).</p>
<p>Topics in this section include:</p>
<ul>
<li>
<p><a href="#CIHIBGGH">Add a Function to the HTML Header Attribute</a></p>
</li>
<li>
<p><a href="#CIHGCEGD">Edit an Item to Call the Function</a></p>
</li>
<li>
<p><a href="#CIHGCGCI">Change the Item to a Select List</a></p>
</li>
<li>
<p><a href="#CIHHAGIJ">Create a Call to the disFormItems Function</a></p>
</li>
</ul>
<a id="CIHIBGGH"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Add a Function to the HTML Header Attribute</h3>
<p>To add a function to the HTML Header attribute on page 2:</p>
<ol>
<li>
<p>Go to the Page Definition for page 2.</p>
</li>
<li>
<p>Under Page, click the <span class="bold">Edit page attributes</span> icon.</p>
<p>The Edit Page appears.</p>
</li>
<li>
<p>Scroll down to HTML Header.</p>
</li>
<li>
<p>In HTML Header, scroll down and place your cursor after the last <code>&lt;/script&gt;</code> tag.</p>
</li>
<li>
<p>After the last <code>&lt;/script&gt;</code> tag, enter the following script:</p>
<pre>
&lt;script language="JavaScript1.1" type="text/javascript"&gt; 
function html_disableItem(nd,a){
     var lEl = document.getElementById(nd);
     if (lEl &amp;&amp; lEl != false){
       if(a){
         lEl.disabled = false;
          lEl.style.background = '#ffffff';
        }else{
        lEl.disabled = true;
          lEl.style.background = '#cccccc';
         }}
     return true;}

 function disFormItems(){ 
  var lOptions = document.getElementById('P2_DEPARTMENT_ID').options
  var lReturn;
  for(var i=0;i&lt;lOptions.length;i++){
     if(lOptions[i].selected==true){lReturn = lOptions[i].value;}
  }
  var lTest = lReturn == '80';
  html_disableItem('P2_COMMISSION_PCT',lTest); } 

 &lt;/script&gt;
</pre></li>
<li>
<p>Click <span class="bold">Apply Changes</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHGCEGD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Edit an Item to Call the Function</h3>
<p>The next step is to edit the <code>P2_DEPARTMENT_ID</code> item and add code to the HTML Form Element Attributes attribute to call the function.</p>
<p>To edit the <code>P2_DEPARTMENT_ID</code> item to call the function:</p>
<ol>
<li>
<p>Under Items, select <span class="bold">P2_DEPARTMENT_ID</span>.</p>
</li>
<li>
<p>Scroll down to Element.</p>
</li>
<li>
<p>In HTML Form Element Attributes, enter the following:</p>
<pre>
onchange="disFormItems()"
</pre></li>
<li>
<p>Click <span class="bold">Apply Changes</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHGCGCI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Change the Item to a Select List</h3>
<p>To change the <code>P2_DEPARTMENT_ID</code> to display as a select list:</p>
<ol>
<li>
<p>Under Items, select <span class="bold">P2_DEPARTMENT_ID</span>.</p>
</li>
<li>
<p>From the Display As list in the Name section, select <span class="bold">Select List</span>.</p>
</li>
<li>
<p>Scroll down to List of Values.</p>
</li>
<li>
<p>Under List of Values, specify the following:</p>
<ol>
<li>
<p>From Display Null, select <span class="bold">No</span>.</p>
</li>
<li>
<p>In List of Values definition, enter:</p>
<pre>
SELECT department_name, department_id FROM oehr_departments
</pre></li>
</ol>
</li>
<li>
<p>Click <span class="bold">Apply Changes</span>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For simplicity, this tutorial has you create an item-level list of values. As a best practice, however, consider creating a named LOV and referencing it.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Creating Lists of Values" in <span class="italic"><a class="olink HTMDB05011" href="../../appdev.112/e11947/bldapp_lov.htm#HTMDB05011">Oracle Database Application Express User's Guide</a></span></div>
</div>
<!-- class="sect2" -->
<a id="CIHHAGIJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Create a Call to the disFormItems Function</h3>
<p>Finally, you need to create a call to the <code>disFormItems</code> function after the page is rendered to disable <code>P2_COMMISSION_PCT</code> if the selected employee is not a Sales representative. A good place to make this call would be from the Page HTML Body Attribute.</p>
<p>To create a call to the <code>disFormItems</code> function:</p>
<ol>
<li>
<p>Go to the Page Definition for page 2.</p>
</li>
<li>
<p>Under Page, click the <span class="bold">Edit page attributes</span> icon.</p>
<p>The Edit Page appears.</p>
</li>
<li>
<p>Locate the Display Attributes section.</p>
</li>
<li>
<p>From Cursor Focus, select <span class="bold">Do not focus cursor</span>.</p>
<p>Selecting <span class="bold">Do not focus cursor</span> prevents conflicts between generated JavaScript and custom JavaScript.</p>
</li>
<li>
<p>Scroll down to the HTML Body Attribute section.</p>
</li>
<li>
<p>In the Page HTML Body Attribute, enter the following:</p>
<pre>
onload="disFormItems(); first_field();"
</pre></li>
<li>
<p>Click <span class="bold">Apply Changes</span>.</p>
</li>
<li>
<p>Run the page.</p>
</li>
</ol>
<p><a href="#CHDJCDDD">Figure 10-5</a> demonstrates the completed form. Note that Department ID displays as a select list. Also notice that the Commission Pct field is unavailable since the Department ID is Administration.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDJCDDD"></a>Figure 10-5 Revised Update Form</p>
<img width="422" height="356" src="img/js_sel.gif" alt="Description of Figure 10-5 follows" title="Description of Figure 10-5 follows" /><br />
<a id="sthref123" href="img_text/js_sel.htm">Description of "Figure 10-5 Revised Update Form"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment883">
<tr>
<td class="cellalignment890">
<table class="cellalignment893">
<tr>
<td class="cellalignment887"><a href="up_dn_files.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment887"><a href="acl.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment892">
<table class="cellalignment886">
<tr>
<td class="cellalignment887"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment887"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment887"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment887"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment887"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
