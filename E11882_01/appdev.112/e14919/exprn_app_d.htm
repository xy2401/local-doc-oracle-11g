<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Converting Rules Applications</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 033" />
<meta name="dcterms.created" content="2011-08-16T11:52:4Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Rules Manager and Expression Filter Developer's Guide" />
<meta name="dcterms.identifier" content="E14919-04" />
<meta name="dcterms.isVersionOf" content="EXPRN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="exprn_app_c.htm" title="Previous" type="text/html" />
<link rel="Next" href="exprn_app_e.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e14919.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">32/36</span> <!-- End Header --><a id="CHDIGEDB"></a><a id="EXPRN562"></a>
<h1 class="appendix"><span class="secnum">D</span> Converting Rules Applications</h1>
<p>This appendix describes differences between Expression Filter and Rules Manager and how to convert an Expression Filter rules application to a Rules Manager rules application.</p>
<a id="CHDGDIHA"></a><a id="EXPRN003"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.1</span> Differences Between Expression Filter and Rules Manager</h2>
<p>Before converting your Expression Filter application to a Rules Manager application, you should understand the differences between each feature and some of the reasons why you should use Rules Manager. If you are ready to convert your Expression Filter application to a Rules Manager application, see <a href="#CHDGGFEE">Section D.2</a>.</p>
<p>Expression Filter is best used to model simple rules-based systems. A simple rules-based system consists of a primitive event that may have a small-to-very large class of rules (hundreds to millions of rules).</p>
<p>Rules Manager is best used for modeling a wide range of rules-based systems from the simplest to the most complex. A simple rules-based system is again a primitive event having a small-to-very large class of rules (hundreds to millions of rules), while a very complex rules-based system may involve many sets of composite events (each consisting of two or more primitive events) each with a very large class of rules (millions of rules) that can represent very complex rule conditions and that enforce event management policies that require reusing primitive events and handling duplicate composite events, and so forth.</p>
<p><a href="#CHDJAEGH">Table D-1</a> shows step-by-step differences between implementing and using the Expression Filter and Rules Manager features that uses a primitive (simple) event.</p>
<div class="tblformalwide">
<p class="titleintable"><a id="EXPRN563"></a><a id="sthref402"></a><a id="CHDJAEGH"></a>Table D-1 Implementation Differences Between Expression Filter and Rules Manager for Rules Applications That Use a Primitive (Simple) Event</p>
<table class="cellalignment998" title="Implementation Differences Between Expression Filter and Rules Manager for Rules Applications That Use a Primitive (Simple) Event" summary="This two column table (read from right to left) lists the steps to implement an Expression Filter application versus a Rules Manager application in which each uses a primitive event structure" dir="ltr">
<thead>
<tr class="cellalignment989">
<th class="cellalignment999" id="r1c1-t2">Expression Filter</th>
<th class="cellalignment999" id="r1c2-t2">Rules Manager</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment989">
<td class="cellalignment995" id="r2c1-t2" headers="r1c1-t2">
<p><span class="bold">1.</span> Create the event structure and its set of attributes or use an existing object type definition.</p>
</td>
<td class="cellalignment995" headers="r2c1-t2 r1c2-t2">
<p><span class="bold">1.</span> Create the event structure and its set of attributes or use an existing object type definition.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r3c1-t2" headers="r1c1-t2">
<p><span class="bold">2.</span> Create a table to store the rule conditions and associated information.</p>
</td>
<td class="cellalignment995" headers="r3c1-t2 r1c2-t2">
<p><span class="bold">2.</span> Create the rule class for the event structure.</p>
<p><span class="bold">o</span> This implicitly creates the skeleton for a callback procedure to perform the action.</p>
<p><span class="bold">o</span> This implicitly creates a rule class table to store the corresponding rule definitions and rule action preferences.</p>
<p><span class="bold">o</span> This defines the results view, if specified in the rule class definition, to temporarily store the results of processing rules.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r4c1-t2" headers="r1c1-t2">
<p><span class="bold">3.</span> Assign the event structure that is captured as an Expression Filter attribute set to the condition column in the table.</p>
</td>
<td class="cellalignment995" headers="r4c1-t2 r1c2-t2">
<p><span class="bold">Note:</span> Rules Manager implicitly creates the Expression data type column (<code>rlm$rulecond</code>) in the generated rule class table.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r5c1-t2" headers="r1c1-t2">
<p><span class="bold">4.</span> Configure the default index parameters with the attribute set.</p>
</td>
<td class="cellalignment995" headers="r5c1-t2 r1c2-t2">
<p><span class="bold">Note:</span> Rules Manager implicitly creates the default index parameters with the attribute set.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r6c1-t2" headers="r1c1-t2">
<p><span class="bold">5.</span> Create an Expression Filter index on the Expression column in the user table.</p>
</td>
<td class="cellalignment995" headers="r6c1-t2 r1c2-t2">
<p><span class="bold">Note:</span> Rules Manager implicitly creates the Expression Filter indexes on the necessary Expression columns in the rule class table.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r7c1-t2" headers="r1c1-t2">
<p><span class="bold">6.</span> Implement a procedure to carry the action for the rules defined in the user table.</p>
</td>
<td class="cellalignment995" headers="r7c1-t2 r1c2-t2">
<p><span class="bold">3.</span> Replace the system generated callback procedure with the user implementation to perform the appropriate rule action for each matching rule.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r8c1-t2" headers="r1c1-t2">
<p><span class="bold">7.</span> Insert rule conditional expressions and accompanying information to the user table.</p>
</td>
<td class="cellalignment995" headers="r8c1-t2 r1c2-t2">
<p><span class="bold">4.</span> Insert rules into the rule class table.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r9c1-t2" headers="r1c1-t2">
<p><span class="bold">8.</span> Create the events table to store the past events if the rules in the user table rely on composite events.</p>
</td>
<td class="cellalignment995" headers="r9c1-t2 r1c2-t2">
<p><span class="bold">Note: Rules Manager implicitly creates an events table to keep track of the past events until they are no longer required.</span></p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r10c1-t2" headers="r1c1-t2">
<p><span class="bold">9.</span> Apply the SQL <code>EVALUATE</code> operator to compare expressions stored in the Expressions column to the rows stored in the event table</p>
</td>
<td class="cellalignment995" headers="r10c1-t2 r1c2-t2">
<p><span class="bold">5.</span> Process the rules for an event. <span class="bold">Note:</span> Rules Manager automatically applies the SQL <code>EVALUATE</code> operator to compare rule conditions stored in the <code>rlm$rulecond</code> column of the rule class table to an event instance.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r11c1-t2" headers="r1c1-t2">
<p><span class="bold">10.</span> Execute the action procedure for one or more rows returned by the previous query.</p>
</td>
<td class="cellalignment995" headers="r11c1-t2 r1c2-t2">
<p><span class="bold">Note:</span> With the <code>PROCESS_RULES</code> call, Rules Manager implicitly executes the action for the matching rules by invoking the preconfigured action callback procedure.</p>
</td>
</tr>
<tr class="cellalignment989">
<td class="cellalignment995" id="r12c1-t2" headers="r1c1-t2">
<p><span class="bold">11.</span> Delete the events from the events table if the application calls for the consumption of the events immediately after executing the rule actions.</p>
</td>
<td class="cellalignment995" headers="r12c1-t2 r1c2-t2">
<p><span class="bold">Note:</span> Rules Manager can be configured to automatically consume the events by using the appropriate event management policies.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<p>From <a href="#CHDJAEGH">Table D-1</a>, Rules Manager automatically performs a number of operations (through subsumption of Expression Filter functionality) that normally had to be done manually using Expression Filter. Because many Expression Filter features are implicitly used by Rules Manager, Rules Manager is easier to use and is the recommended choice, especially for complex rules applications involving composite events.</p>
<p>If you have already modeled and implemented a rules-based system application that uses Expression Filter and you want to convert your application to a Rules Manager application, see <a href="#CHDGGFEE">Section D.2</a> for a description of this process.</p>
</div>
<!-- class="sect1" -->
<a id="CHDGGFEE"></a><a id="EXPRN004"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">D.2</span> Converting an Expression Filter Application to a Rules Manager Application</h2>
<p>Expression Filter is a component of Rules Manager. Rules Manager is the preferred feature to use for developing rules applications beginning with release Oracle Database 10g Release 2 (10.2). Expression Filter applications developed in release Oracle Database 10g Release 1 (10.1) can be converted<a id="sthref403"></a><a id="sthref404"></a> to Rules Manager applications once you understand the main differences between these two features relative to the tables storing the expressions or rules. These differences from an implementation perspective are the name of and structure of the user table containing the expression column for Expression Filter applications versus the name of and structure of the rule class table containing the rule condition column and action preference columns for a Rules Manager application.</p>
<p>The process of converting an Expression Filter application to a Rules Manager application is to complete Steps 1 through 3 as described in the Rules Manager column in <a href="#CHDJAEGH">Table D-1</a>. Then, instead of populating the rule class table using a SQL <code>INSERT</code> statement as shown in Step 4, use the following SQL statement syntax to copy the rows from the Expression Filter user table to the Rules Manager rule class table:</p>
<pre>
SQL INSERT INTO &lt;rules-manger-rules-class-table&gt; (field1, field3, field4, field2)
    SELECT field1, field2, field3, field4 from &lt;expression-filter-user-table&gt;; 
</pre>
<p>This SQL <code>INSERT</code> statement syntax populates the Rules Manager rule class table with the expression conditions from the condition Expression column in the Expression Filter user table along with the desired action preference columns. For example, the following SQL statements would perform this operation after executing SQL <code>DESCRIBE</code> statements to view the structure of each of these tables to determine which columns you want to copy and in what order to copy them:</p>
<pre>
--Assume the Expression Filter user table has the following structure:
SQL&gt; DESCRIBE user_exprfiltertable;
 Name                                      Null?    Type
 ----------------------------------------- -------- ---------------------------
 ID                                                 VARCHAR2(100)
 CONDITION                                          VARCHAR2(200)
 POSTALCODE                                         VARCHAR2(10)
 PHONE                                              VARCHAR2(10)

--Assume the Rules Manager rule class table has the following structure:
SQL&gt; DESCRIBE rm_rules_classtable;
Name            NULL?      TYPE
---------       -----      -------------
RLM$RULEID                 VARCHAR2(100)
PostalCode                 VARCHAR2(10)
Phone                      VARCHAR2(10)
RLM$RULECOND               VARCHAR2(4000)
RLM$RULEDESC               VARCHAR2(1000)
RLM$ENABLED                CHAR(1) DEFAULT 'Y'

--Insert statement to use that copies rows from the Expression Filter user table
--to the Rules Manager rule class table:
INSERT INTO rm_rules_classtable (rlm$ruleid, PostalCode, Phone, rml$rulecond)
  SELECT ID, PostalCode, Phone, Condition FROM user_exprfiltertable;
</pre>
<p>Once the rule class table is populated with the rows of the Expression Filter user table, proceed to complete Steps 5 through 7 as described in the Rules Manager column in <a href="#CHDJAEGH">Table D-1</a>. Upon completion of these steps, you will have a Rules Manager rules application.</p>
<p>Note that to adapt Rules Manager to one of your existing applications, you can use this same SQL <code>INSERT INTO</code> syntax to populate the rule class table with data residing within other tables of your application, but only after Rules Manager initially creates this table for you. This is the best way to populate the rule class table with the desired values for these same columns that are defined as part of the rule class creation process described in Step 2 in the Rules Manager column in <a href="#CHDJAEGH">Table D-1</a>. Now you might just be beginning to realize that adapting your existing application to use Rules Manager is a straight-forward process and it is not too difficult to quickly produce results once you understand how to develop rules applications using Rules Manager. The conceptual approach of this development process is described in more detail in <a href="exprn_intro.htm#CHDBHBED">Section 1.2</a>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment988">
<tr>
<td class="cellalignment995">
<table class="cellalignment993">
<tr>
<td class="cellalignment992"><a href="exprn_app_c.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment992"><a href="exprn_app_e.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment997">
<table class="cellalignment991">
<tr>
<td class="cellalignment992"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment992"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment992"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment992"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment992"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment992"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
