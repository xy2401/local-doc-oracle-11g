<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Accessing Oracle XML&nbsp;DB Repository Data</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748" />
<meta name="description" content="This manual describes Oracle XML&nbsp;DB. It includes guidelines and examples for storing, generating, accessing, searching, validating, transforming, evolving, and indexing XML data in Oracle Database." />
<meta name="dcterms.created" content="2014-02-20T9:56:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="XML DB Developer's Guide" />
<meta name="dcterms.identifier" content="E23094-04" />
<meta name="dcterms.isVersionOf" content="ADXDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="partpg5.htm" title="Previous" type="text/html" />
<link rel="Next" href="xdb_repos_config.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23094.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">33/54</span> <!-- End Header -->
<script  >
<!-- // <![CDATA[
window.name='xdb16fol'
// ]]> -->
</script> <script  >
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=120,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><h1>Footnote ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/body><\/html>');
    msg.document.close();
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="ADXDB2000" class="chapter"><a id="g1050290"></a> <a id="i1042688"></a>
<h1 class="chapter"><span class="secnum">21</span> Accessing Oracle XML&nbsp;DB Repository Data</h1>
<p>This chapter describes how to access data in Oracle XML&nbsp;DB Repository using standard protocols such as FTP and HTTP(S)/WebDAV, and other Oracle XML&nbsp;DB resource Application Program Interfaces (APIs). It also introduces you to using <code>RESOURCE_VIEW</code> and <code>PATH_VIEW</code> as the SQL mechanism for accessing and manipulating repository data. It includes a table for comparing repository operations through the various resource APIs.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#i1042479">Overview of Oracle XML&nbsp;DB Repository</a></p>
</li>
<li>
<p><a href="#i1043380">Repository Terminology and Supplied Resources</a></p>
</li>
<li>
<p><a href="#i1044846">Oracle XML&nbsp;DB Repository Resources</a></p>
</li>
<li>
<p><a href="#i1044910">Two Ways to Access Oracle XML&nbsp;DB Repository Resources</a></p>
</li>
<li>
<p><a href="#BCJBHCBJ">Navigational or Path Access to Repository Resources</a></p>
</li>
<li>
<p><a href="#i1042499">Query-Based Access to Repository Resources</a></p>
</li>
<li>
<p><a href="#i1042509">Servlet Access to Repository Resources</a></p>
</li>
<li>
<p><a href="#i1043394">Operations on Repository Resources</a></p>
</li>
</ul>
<a id="i1042479"></a>
<div id="ADXDB5285" class="sect1">
<h2 class="sect1">Overview of Oracle XML&nbsp;DB Repository<a id="sthref1355"></a></h2>
<p>Using Oracle XML&nbsp;DB Repository you can store content in the database in hierarchical structures, as opposed to traditional relational database structures.</p>
<p><a href="#i1044265">Figure 21-1</a> is an example of a hierarchical structure that shows a typical tree of folders and files in Oracle XML&nbsp;DB Repository. The top of the tree shows <code>/</code>, the <a id="sthref1356"></a>root folder.</p>
<div id="ADXDB5286" class="figure">
<p class="titleinfigure"><a id="i1044265"></a>Figure 21-1 A Folder Tree, Showing Hierarchical Structures in the Repository</p>
<img width="665" height="533" src="img/adxdb004.gif" alt="Description of Figure 21-1 follows" /><br />
<a id="sthref1357" href="img_text/adxdb004.htm">Description of "Figure 21-1 A Folder Tree, Showing Hierarchical Structures in the Repository"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Folder <code><a id="sthref1358"></a><a id="sthref1359"></a>/sys</code> is used by Oracle XML&nbsp;DB to maintain <span class="italic">system-defined</span> XML schemas, access control lists (ACLs), and so on. Do <span class="italic">not</span> add or modify any data in folder <code>/sys</code>.</div>
<p>Foldering lets applications access hierarchically indexed content in the database using the FTP, HTTP(S), and WebDAV protocol standards as if the database content were stored in a file system. You can set access control privileges on repository folders and resources.</p>
<p>This chapter provides an overview of how to access data in Oracle XML&nbsp;DB Repository folders using the standard protocols. It discusses APIs that you can use to access the repository object hierarchy using Java, SQL, and PL/SQL.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb18res.htm#g1034945">Chapter 25, "Accessing the Repository using RESOURCE_VIEW and PATH_VIEW"</a></p>
</li>
<li>
<p><a href="xdb19rpl.htm#g1031289">Chapter 26, "Accessing the Repository using PL/SQL"</a></p>
</li>
<li>
<p><a href="xdb21sec.htm#g1040139">Chapter 27, "Repository Access Control"</a></p>
</li>
<li>
<p><a href="xdb22pro.htm#g1031760">Chapter 28, "Accessing the Repository using Protocols"</a></p>
</li>
</ul>
</div>
<a id="i1044910"></a>
<div id="ADXDB5287" class="sect2">
<h3 class="sect2">Two Ways to Access Oracle XML&nbsp;DB Repository <a id="sthref1360"></a>Resources</h3>
<p>There are two ways to access Oracle XML&nbsp;DB Repository resources:</p>
<ul>
<li>
<p>Navigational or path-based access. This uses a hierarchical index of resources. Each resource has one or more unique path names that reflect its location in the hierarchy. You can navigate, using XPath expressions, to any repository resource.</p>
<p>A repository resource can be created as a reference to an existing <code>XMLType</code> object in the database. You can navigate to any such database object using XPath. See <a href="#BCJBHCBJ">"Navigational or Path Access to Repository Resources"</a>.</p>
</li>
<li>
<p>SQL access to the repository. This is done using special views that expose resource properties and path names, and map hierarchical access operators onto the Oracle XML&nbsp;DB schema. See <a href="#i1042499">"Query-Based Access to Repository Resources"</a>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb02rep.htm#CEGHIBDC">"Oracle XML&nbsp;DB Repository Access"</a> for guidance on selecting an access method</p>
</li>
<li>
<p><a href="#BABBJJDI">Table 21-3, "Accessing Oracle XML&nbsp;DB Repository: API Options"</a> for a summary comparison of the access methods</p>
</li>
</ul>
</div>
<p>A Uniform Resource Locator (URL) is used to access an Oracle XML&nbsp;DB resource. A URL includes the host name, protocol information, path name, and resource name of the object.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1043380"></a>
<div id="ADXDB5288" class="sect1">
<h2 class="sect1">Repository<a id="sthref1361"></a> Terminology and Supplied Resources</h2>
<p>Oracle XML&nbsp;DB Repository is the set of database objects, across all XML and database schemas, that are mapped to path names. It is a connected, directed, acyclic<a id="sthref1362" href="#sthref1362" onclick='footdisplay(1,"The graph is established by the hard links that define the repository structure, and cycles are not permitted using hard links. You can, however, introduce cycles using weak links. See \u003ca target=\"xdb16fol\" href=\"#BABFIFIH\"\u003e\"Hard Links and Weak Links\"\u003c/a\u003e.")'><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a> graph of resources, with a single root node (<code>/</code>). Each resource in the graph has one or more associated path names: the repository supports multiple links to a given resource. The repository can be thought of as a file system of objects rather than files.</p>
<a id="i1044889"></a>
<div id="ADXDB5289" class="sect2">
<h3 class="sect2">Repository Terminology</h3>
<p>The following list describes terms used in Oracle XML&nbsp;DB Repository:</p>
<ul>
<li>
<p><span class="glossaryterm">resource</span> &ndash; Any object or node in the repository hierarchy. Resources are identified by URLs.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb01int.htm#CIHCIAIC">"Overview of Oracle XML&nbsp;DB Repository"</a></p>
</li>
<li>
<p><a href="#i1044846">"Oracle XML&nbsp;DB Repository Resources"</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><span class="glossaryterm"><a id="sthref1363"></a><a id="sthref1364"></a>folder</span> &ndash; A resource that can contain other resources. Sometimes called a <span class="glossaryterm">directory</span>.</p>
</li>
<li>
<p><span class="glossaryterm"><a id="sthref1365"></a>path name</span> &ndash; A hierarchical name representing an absolute path to a resource. It is composed of a slash (<code>/</code>) representing the repository root, followed by zero or more <span class="glossaryterm"><a id="sthref1366"></a><a id="sthref1367"></a>path components</span> separated by slashes. A path component cannot be only <code>.</code> or <code>..</code>, but a period (<code>.</code>) can otherwise be used in a path component. A path component is composed of any characters in the database character set <span class="italic">except</span> slash (<code>/</code>), backslash (<code>\</code>), and those characters specified in the Oracle XML&nbsp;DB configuration file, <code>/xdbconfig.xml</code>, by configuration parameter <code>/xdbconfig/sysconfig/invalid-pathname-chars</code>.</p>
</li>
<li>
<p><span class="glossaryterm"><a id="sthref1368"></a>resource name</span> (or <span class="glossaryterm"><a id="sthref1369"></a>link name</span>) &ndash; The name of a resource within its parent folder. This is the rightmost path component of a path name. Resource names must be unique within their immediately containing folder, and they are case-sensitive.</p>
</li>
<li>
<p><span class="glossaryterm"><a id="sthref1370"></a><a id="sthref1371"></a>resource content</span> &ndash; The body, or data, of a resource. This is what you get when you treat the resource as a file and ask for its content. This is always of type <code>XMLType</code>.</p>
</li>
<li>
<p><span class="glossaryterm"><a id="sthref1372"></a>XDBBinary element</span> &ndash; An XML element that contains binary data. It is defined by the Oracle XML&nbsp;DB XML schema. <code>XDBBinary</code> elements are stored in the repository whenever unstructured binary data is uploaded into Oracle XML&nbsp;DB.</p>
</li>
<li>
<p><span class="glossaryterm">access control list</span> (ACL) &ndash; A set of principals (users or roles) that are allowed access to one or more specific resources.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb21sec.htm#g1040139">Chapter 27, "Repository Access Control"</a></div>
</li>
</ul>
<p>Many terms used by Oracle XML&nbsp;DB have common synonyms in other contexts, as shown in <a href="#g1046594">Table 21-1</a>.</p>
<div id="ADXDB5290" class="tblhruleformal">
<p class="titleintable"><a id="sthref1373"></a><a id="g1046594"></a>Table 21-1 Synonyms for Oracle XML&nbsp;DB Repository Terms</p>
<table class="cellalignment1032" title="Synonyms for Oracle XML DB Repository Terms " summary="This table lists the Oracle XML DB foldering term synonyms." >
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t7">Synonym</th>
<th class="cellalignment1027" id="r1c2-t7">Repository Term</th>
<th class="cellalignment1027" id="r1c3-t7">Usage</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t7" headers="r1c1-t7">
<p>collection</p>
</td>
<td class="cellalignment1028" headers="r2c1-t7 r1c2-t7">
<p>folder</p>
</td>
<td class="cellalignment1028" headers="r2c1-t7 r1c3-t7">
<p>WebDAV</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t7" headers="r1c1-t7">
<p>directory</p>
</td>
<td class="cellalignment1028" headers="r3c1-t7 r1c2-t7">
<p>folder</p>
</td>
<td class="cellalignment1028" headers="r3c1-t7 r1c3-t7">
<p>operating systems</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t7" headers="r1c1-t7">
<p>privilege</p>
</td>
<td class="cellalignment1028" headers="r4c1-t7 r1c2-t7">
<p>privilege</p>
</td>
<td class="cellalignment1028" headers="r4c1-t7 r1c3-t7">
<p>permission</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r5c1-t7" headers="r1c1-t7">
<p>right</p>
</td>
<td class="cellalignment1028" headers="r5c1-t7 r1c2-t7">
<p>privilege</p>
</td>
<td class="cellalignment1028" headers="r5c1-t7 r1c3-t7">
<p>various</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r6c1-t7" headers="r1c1-t7">
<p>WebDAV folder</p>
</td>
<td class="cellalignment1028" headers="r6c1-t7 r1c2-t7">
<p>folder</p>
</td>
<td class="cellalignment1028" headers="r6c1-t7 r1c3-t7">
<p>Web folder</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r7c1-t7" headers="r1c1-t7">
<p>role</p>
</td>
<td class="cellalignment1028" headers="r7c1-t7 r1c2-t7">
<p>group</p>
</td>
<td class="cellalignment1028" headers="r7c1-t7 r1c3-t7">
<p>access control</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r8c1-t7" headers="r1c1-t7">
<p>revision</p>
</td>
<td class="cellalignment1028" headers="r8c1-t7 r1c2-t7">
<p>version</p>
</td>
<td class="cellalignment1028" headers="r8c1-t7 r1c3-t7">
<p>RCS, CVS</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r9c1-t7" headers="r1c1-t7">
<p>file system</p>
</td>
<td class="cellalignment1028" headers="r9c1-t7 r1c2-t7">
<p>repository</p>
</td>
<td class="cellalignment1028" headers="r9c1-t7 r1c3-t7">
<p>operating systems</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r10c1-t7" headers="r1c1-t7">
<p>hierarchy</p>
</td>
<td class="cellalignment1028" headers="r10c1-t7 r1c2-t7">
<p>repository</p>
</td>
<td class="cellalignment1028" headers="r10c1-t7 r1c3-t7">
<p>various</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r11c1-t7" headers="r1c1-t7">
<p>file</p>
</td>
<td class="cellalignment1028" headers="r11c1-t7 r1c2-t7">
<p>resource</p>
</td>
<td class="cellalignment1028" headers="r11c1-t7 r1c3-t7">
<p>operating systems</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r12c1-t7" headers="r1c1-t7">
<p>binding</p>
</td>
<td class="cellalignment1028" headers="r12c1-t7 r1c2-t7">
<p>link</p>
</td>
<td class="cellalignment1028" headers="r12c1-t7 r1c3-t7">
<p>WebDAV</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect2" -->
<div id="ADXDB5291" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1374"></a>
<h3 class="sect2">Supplied Files and Folders</h3>
<p>The list of supplied Oracle XML&nbsp;DB Repository files and folders is as follows. In addition to using these, you can create your own folders and files wherever you want.</p>
<pre>
/public
/sys
/sys/acls
/sys/acls/all_all_acl.xml
/sys/acls/all_owner_acl.xml
/sys/acls/bootstrap_acl.xml
/sys/acls/ro_all_acl.xml
/sys/apps
/sys/asm
/sys/log
/sys/schemas
/sys/schemas/PUBLIC
/sys/schemas/PUBLIC/www.w3.org
/sys/schemas/PUBLIC/www.w3.org/2001
/sys/schemas/PUBLIC/www.w3.org/2001/xml.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBFolderListing.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResource.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBSchema.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBStandard.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/acl.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/dav.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log/ftplog.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log/httplog.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/log/xdblog.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/stats.xsd
/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/xdbconfig.xsd
/xdbconfig.xml
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1044846"></a>
<div id="ADXDB5292" class="sect1">
<h2 class="sect1">Oracle XML&nbsp;DB Repository Resources</h2>
<p>Oracle XML&nbsp;DB Repository resources conform to the Oracle XML&nbsp;DB XML schema <code>XDBResource.xsd</code>. The elements in a resource include those needed to persistently store WebDAV-defined properties, such as creation date, modification date, WebDAV locks, owner, ACL, language, and character set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apphxdb.htm#i642050">"XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources"</a></div>
<p>A resource index has a special element called <code><span class="codeinlinebold"><a id="sthref1375"></a><a id="sthref1376"></a>Contents</span></code> that contains the contents of the resource.</p>
<p>The XML schema for a resource also defines an <code><span class="codeinlinebold">any</span></code> element, with <code>maxoccurs</code> attribute unbounded. An <code>any</code> element can contain any element outside of the Oracle XML&nbsp;DB XML namespace. Arbitrary instance-defined properties can be associated with the resource.</p>
<div id="ADXDB5295" class="sect2"><a id="sthref1377"></a>
<h3 class="sect2">Where Is <a id="sthref1378"></a>Repository Data Stored?</h3>
<p>Oracle XML&nbsp;DB stores Oracle XML&nbsp;DB Repository data in a set of tables and indexes to which you have access. If you register an XML schema and request that the tables be generated by Oracle XML&nbsp;DB, then the tables are created in your database schema. You are then able to see or modify them. Other users cannot see your tables unless you grant them permission to do so.</p>
<div id="ADXDB5296" class="sect3"><a id="sthref1379"></a>
<h4 class="sect3">Names of Generated Tables</h4>
<p>The names of the generated tables are assigned by Oracle XML&nbsp;DB, and can be obtained by finding the <code>xdb:defaultTable</code> attribute in your XML schema document (or in the default XML schema document). When you register an XML schema, you can alternatively provide your own table name, instead of using the default name supplied by Oracle XML&nbsp;DB. If the table specifies binary XML storage, then a document is encoded in binary XML format before storing it in the table.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb05sto.htm#BJFDJBDE">"Default Tables Created During XML Schema Registration"</a></div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5297" class="sect3"><a id="sthref1380"></a>
<h4 class="sect3">Defining Structured Storage for Resources</h4>
<p>Applications that need to define structured storage for resources can do so in one of these ways:</p>
<ul>
<li>
<p>Subclass the Oracle XML&nbsp;DB resource type. Subclassing Oracle XML&nbsp;DB resources requires privileges on the table <code>XDB$RESOURCE</code>.</p>
</li>
<li>
<p>Store data that conforms to a visible, registered XML schema.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb05sto.htm#g1070409">Chapter 7, "XML Schema Storage and Query: Basic"</a></div>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="ADXDB5298" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1381"></a>
<h4 class="sect3"><a id="sthref1382"></a>Oracle ASM Virtual Folder</h4>
<p>The Oracle Automatic Storage Management (Oracle ASM) virtual folder, <code>/sys/asm</code>, is an exception to the description of the previous sections: its contents are Oracle ASM files and folders that are managed automatically by Oracle ASM.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABFAEHE">"Accessing Oracle ASM Files using Protocols and Resource APIs &ndash; For DBAs"</a></p>
</li>
<li>
<p><a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1044825"></a>
<div id="ADXDB5299" class="sect2">
<h3 class="sect2">Path-Name <a id="sthref1383"></a>Resolution</h3>
<p>The data relating a folder to its contents is managed by the Oracle XML&nbsp;DB hierarchical repository index. This provides a fast mechanism for evaluating path names, similar to the directory mechanisms that are used by operating-system file systems.</p>
<p>Resources that are folders have the <code><a id="sthref1384"></a>Container</code> attribute of element <code>Resource</code> set to <code>true</code>.</p>
<p>To resolve a resource name in a folder, the current user must have the following privileges:</p>
<ul>
<li>
<p><code>resolve</code> privilege on the folder</p>
</li>
<li>
<p><code>read-properties</code> on the resource in that folder</p>
</li>
</ul>
<p>If the user does not have these privileges, then the user receives an <code>access denied</code> error. Folder listings and other queries do not return a row when the <code>read-properties</code> privilege is denied on its resource.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Error handling in path-name resolution differentiates between invalid resource names and resources that are not folders, for compatibility with file systems. Because Oracle XML&nbsp;DB resources are accessible from outside Oracle XML&nbsp;DB Repository (using SQL), denying read access on a folder that contains a resource does <span class="italic">not prevent</span> read access to that resource.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apphxdb.htm#i642050">"XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources"</a> for the definition of element <code>Resource</code> and its attribute <code>Container</code></div>
</div>
<!-- class="sect2" -->
<a id="i1045192"></a>
<div id="ADXDB2030" class="sect2">
<h3 class="sect2">Link Types</h3>
<p>Links in Oracle XML&nbsp;DB can be repository links or document links. Repository links can be hard links or weak links. Document links can also be hard links or weak links, when their targets are repository resources. These terms are explained further in the following sections.</p>
<div id="ADXDB5300" class="sect3"><a id="sthref1385"></a>
<h4 class="sect3">Repository and Document Links</h4>
<p>In addition to containing resources, a folder resource can contain links to other resources (files or folders). These <span class="glossaryterm"><a id="sthref1386"></a><a id="sthref1387"></a>repository links</span>, sometimes called <span class="glossaryterm"><a id="sthref1388"></a><a id="sthref1389"></a>folder links</span>, are not to be confused with <span class="glossaryterm"><a id="sthref1390"></a><a id="sthref1391"></a>document links</span>, which correspond to the links provided by the XLink and XInclude standards, and which are also supported by Oracle XML&nbsp;DB. Repository links are navigational, folder&ndash;child links among repository resources. Document links are arbitrary links among documents that are not necessarily repository resources.</p>
<p>Repository links represent repository hierarchical relationships. Document links represent arbitrary relationships whose semantics derives from the applications that use them. Because they represent repository hierarchical relationships, repository links can be navigated using file system-related protocols. This is not true of document links. Because document links can represent arbitrary relationships, they can also represent repository relationships. When document links thus target resources, they can also be hard or weak.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb_xlink.htm#CIHHHJGC">Chapter 23, "Using XLink and XInclude with Oracle XML&nbsp;DB"</a> for information about document links</div>
</div>
<!-- class="sect3" -->
<a id="BABFIFIH"></a>
<div id="ADXDB5301" class="sect3">
<h4 class="sect3">Hard Links and Weak Links</h4>
<p>Links that target repository resources can be <span class="glossaryterm"><a id="sthref1392"></a><a id="sthref1393"></a>hard links</span> or <span class="glossaryterm"><a id="sthref1394"></a><a id="sthref1395"></a>weak links</span>. Both hard and weak links are references, or pointers, to physical data&thinsp;&mdash;&thinsp;(internal) repository resource identifiers. They do not point to symbolic names or paths to other links. Their targets are resolved at the time of link creation. Because they point directly to resource identifiers, hard and weak links cannot dangle: they remain valid even when their targets are renamed or moved. You need the same privileges to create or delete hard and weak links.</p>
<p>The difference between hard and weak links lies in their relationship to target resource deletion. A target resource is dependent on its hard links, in the sense that it cannot be deleted as long as it remains the target of a hard link. Deletion of a hard link also deletes the <a id="sthref1396"></a>resource targeted by the link, if the following are both true:</p>
<ul>
<li>
<p>The resource is not versioned.</p>
</li>
<li>
<p>The hard link that was deleted was the last (that is, the only) hard link to the resource.</p>
</li>
</ul>
<p>A weak link has no such hold on a resource: you can delete a resource, even if it is the target of a weak link (as long as it is not the target of a hard link). Because of this, weak links can be used as shortcuts to frequently accessed resources, without impacting deletion of those resources.</p>
<p>There is a dependency in the other direction, however: If you delete a resource that is the target of one or more weak links, then those links are automatically deleted, as well. In this sense, too, weak links cannot dangle. Both hard and weak links provide referential integrity: if a link exists, then so does its target.</p>
<p>Another difference between hard and weak links is this: Hard links to ancestor folders are not permitted, because they introduce cycles. There is no such restriction for weak links: a weak link can target any folder, possibly creating a cycle. It is the set of hard links that define the (acyclic) structure of Oracle XML&nbsp;DB Repository. Weak links represent an additional mapping on top of that basic structure.</p>
<p>You can query the repository path view, <code>PATH_VIEW</code>, to determine the type of a repository link: the link information contains the link type. <code>XMLType</code> column <code>LINK</code> of <code>PATH_VIEW</code> contains this information in element <code>LinkType</code>, which is a child of the root element, <code>LINK</code>. <a href="#BABHBGFG">Example 21-1</a> illustrates this. You can also determine the type of a repository link by using the <code>getLink()</code> callback function on an event handler (<code>LinkIn</code>, <code>LinkTo</code>, <code>UnlinkIn</code>, or <code>UnlinkFrom</code>).</p>
<div id="ADXDB5302" class="example">
<p class="titleinexample"><a id="BABHBGFG"></a>Example 21-1 Querying PATH_VIEW to Determine Link Type</p>
<pre>
SELECT RESID, XMLCast(XMLQuery('<span class="bold">/LINK/LinkType</span>' PASSING <span class="bold">LINK</span> RETURNING CONTENT)
                      AS VARCHAR2(24)) link_type
  FROM PATH_VIEW WHERE equals_path(RES, '/home/QUINE/purchaseOrder.xml') = 1;

RESID                              LINK_TYPE
--------------------------------   ---------
DF9856CF2FE0829EE030578CCE0639C5   <span class="bold">Weak</span>
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb18res.htm#i1029579">"Deleting Repository Resources: Examples"</a></p>
</li>
<li>
<p><a href="#i1042499">"Query-Based Access to Repository Resources"</a> for information about <code>PATH_VIEW</code></p>
</li>
<li>
<p><a class="olink ARPLS69526" href="../../appdev.112/e40758/d_xevent.htm#ARPLS69526"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on PL/SQL function <code>getLink</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5303" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1397"></a>
<h4 class="sect3">Creating a Weak Link with No Knowledge of Folder Hierarchy</h4>
<p>Suppose that you want to read a file resource that belongs to one of your colleagues. You cannot create a hard link to that resource, to make it accessible for your use, unless you have the privilege <code>&lt;xdb:resolve&gt;</code> on <span class="italic">all</span> of the ancestor folders of that file. Having that privilege would mean that you could see all of your colleague's folder names and the structure of the hierarchy down to the target resource.</p>
<p>However, because weak links essentially represent a mapping on top of the real repository structure, which structure is determined by the set of hard links, you can create a weak link to a resource using just its OID rather than its full, named path (URL). Your colleague can determine the OID path to the file, send you that instead of the named path, and you can create a weak link to the document using that OID path. <a href="#BABEHAED">Example 21-2</a> and <a href="#BABFFEED">Example 21-3</a> illustrate this.</p>
<p><a href="#BABEHAED">Example 21-2</a> prints the OID path for the file resource <code>/home/QUINE/purchaseOrder.xml</code>. User <code>quine</code> can use this to obtain the OID path to the resource, and then send that path to user <code>curry</code>, who can create a weak link to the resource (<a href="#BABFFEED">Example 21-3</a>).</p>
<div id="ADXDB5304" class="example">
<p class="titleinexample"><a id="BABEHAED"></a>Example 21-2 Obtaining the OID Path of a Resource</p>
<pre>
DECLARE
  resoid  RAW(16);
  oidpath VARCHAR2(100);
BEGIN
  SELECT RESID INTO :resoid FROM RESOURCE_VIEW
    WHERE equals_path(RES, '/home/QUINE/purchaseOrder.xml') = 1;
    oidpath := DBMS_XDB.<span class="bold">createOIDPath</span>(resoid)
  DBMS_OUTPUT.put_line(oidpath);
END;
</pre></div>
<!-- class="example" -->
<p>In <a href="#BABFFEED">Example 21-3</a>, user <code>curry</code> creates a weak link named <code>quinePurchaseOrder.xml</code> in folder <code>/home/CURRY</code>. The target of the link is the OID path that corresponds to the URL <code>/home/QUINE/purchaseOrder.xml</code>. User <code>curry</code> need not be aware of the repository structure that is visible to user <code>quine</code>.</p>
<div id="ADXDB5305" class="example">
<p class="titleinexample"><a id="BABFFEED"></a>Example 21-3 Creating a Weak Link using an OID Path</p>
<pre>
CALL DBMS_XDB.Link(<span class="bold">/sys/oid/1BDCB46477B59C20E040578CCE0623D3</span>
                   '/home/CURRY', 'quinePurchaseOrder.xml',
                   DBMS_XDB.LINK_TYPE_WEAK);
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<div id="ADXDB5306" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1398"></a>
<h4 class="sect3">Restricting Multiple Hard Links</h4>
<p>Sometimes, it is useful to restrict the creation of hard links, disallowing multiple hard links to folders or files (or both). In particular, allowing multiple hard links to file resources, but disallowing multiple hard links to folder resources, provides behavior that is similar to that for some file systems, including UNIX and Linux. This can simplify application design, by, in effect, ensuring that each file resource has a unique, canonical hard-link path to it. In addition, preventing multiple hard links to a resource can lead to query performance improvements.</p>
<p>You can configure the prevention of multiple hard links using the following Boolean parameters in configuration file <code>xdbconfig.xml</code>. The default value of each parameter is <code>true</code>, meaning that multiple hard links can be created.</p>
<ul>
<li>
<p><code>folder-hard-links</code> &ndash; Prevent the creation of multiple hard links to a folder resource, if <code>false</code>.</p>
</li>
<li>
<p><code>non-folder-hard-links</code> &ndash; Prevent the creation of multiple hard links to a file resource, if <code>false</code>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCJBHCBJ"></a>
<div id="ADXDB5307" class="sect1">
<h2 class="sect1">Navigational or <a id="sthref1399"></a><a id="sthref1400"></a>Path Access to Repository Resources</h2>
<p>Oracle XML&nbsp;DB Repository folders support the same protocol standards used by many operating systems. This lets a repository folder act like a native folder (directory) in supported operating-system environments. For example, you can:</p>
<ul>
<li>
<p>Use Windows Explorer to open and access Oracle XML&nbsp;DB folders and resources the same way you access other directories or resources in the Windows NT file system, as shown in <a href="#i1045917">Figure 21-2</a>.</p>
</li>
<li>
<p>Access Oracle XML&nbsp;DB Repository data using HTTP(S)/WebDAV from an Internet Explorer browser, such as when viewing Web Folders, as shown in <a href="#i1045938">Figure 21-3</a>. <a href="#i1045938">Figure 21-3</a> shows a Web browser visiting URL <code>http://xdbdemo:8080/</code>: the server it is connected to is <code>xdbdemo</code>, and its HTTP port number is <code>8080</code>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb22pro.htm#CHDBHBCG">"Configuring Protocol Server Parameters"</a> for information about configuring the HTTP port number</div>
<div id="ADXDB5308" class="figure">
<p class="titleinfigure"><a id="i1045917"></a>Figure 21-2 Oracle XML&nbsp;DB Folders in Windows Explorer</p>
<img width="1024" height="768" src="img/po_folders.jpg" alt="Description of Figure 21-2 follows" /><br />
<a id="sthref1401" href="img_text/po_folders.htm">Description of "Figure 21-2 Oracle XML&nbsp;DB Folders in Windows Explorer"</a><br />
<br /></div>
<!-- class="figure" -->
<div id="ADXDB5309" class="figure">
<p class="titleinfigure"><a id="i1045938"></a>Figure 21-3 Accessing Repository Data using HTTP(S)/WebDAV and Navigational Access From IE Browser: Viewing Web Folders</p>
<img width="631" height="421" src="img/http_repository.gif" alt="Description of Figure 21-3 follows" /><br />
<a id="sthref1402" href="img_text/http_repository.htm">Description of "Figure 21-3 Accessing Repository Data using HTTP(S)/WebDAV and Navigational Access From IE Browser: Viewing Web Folders"</a><br />
<br /></div>
<!-- class="figure" -->
<a id="i1045855"></a>
<div id="ADXDB5310" class="sect2">
<h3 class="sect2">Accessing Oracle XML&nbsp;DB Resources using Internet Protocols<a id="sthref1403"></a></h3>
<p>Oracle Net Services provides one way of accessing database resources. Oracle XML&nbsp;DB support for Internet protocols provides another way of accessing database resources.</p>
<div id="ADXDB5311" class="sect3"><a id="sthref1404"></a>
<h4 class="sect3">Where You Can Use Oracle XML&nbsp;DB Protocol Access</h4>
<p>Oracle Net Services is optimized for record-oriented data. Internet protocols are designed for stream-oriented data, such as binary files or XML text documents. Oracle XML&nbsp;DB protocol access is a valuable alternative to Net Services in the following scenarios:</p>
<ul>
<li>
<p>Direct database access from file-oriented applications using the database like a file system</p>
</li>
<li>
<p>Heterogeneous application server environments that require a uniform data access method (such as XML over HTTP, which is supported by most data servers, including MS SQL Server, Exchange, Notes, many XML databases, stock quote services and news feeds)</p>
</li>
<li>
<p>Application server environments that require data in the form of XML text</p>
</li>
<li>
<p>Web applications that use client-side XSL to format datagrams that do not need much application processing</p>
</li>
<li>
<p>Web applications that use Java servlets that run inside the database</p>
</li>
<li>
<p>Web access to XML-oriented stored procedures</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="ADXDB5312" class="sect3"><a id="sthref1405"></a>
<h4 class="sect3">Using Protocol Access</h4>
<p>Accessing Oracle XML&nbsp;DB using a protocol proceeds as follows:</p>
<ol>
<li>
<p>A connection object is established, and the protocol might read part of the request.</p>
</li>
<li>
<p>The protocol decides whether the user is already authenticated and wants to reuse an existing session or the connection must be re-authenticated (the latter is more common).</p>
</li>
<li>
<p>An existing session is pulled from the session pool, or else a new one is created.</p>
</li>
<li>
<p>If authentication has not been provided, and the request is <a id="sthref1406"></a>HTTP <code>get</code> or <code>head</code>, then the session is run as the <code>ANONYMOUS</code> user. If the session has already been authenticated as the <code>ANONYMOUS</code> user, then there is no cost to reuse the existing session. If authentication has been provided, then the database re-authentication routines are used to authenticate the connection.</p>
</li>
<li>
<p>The request is parsed.</p>
</li>
<li>
<p>(HTTP only) If the requested path name maps to a servlet, then the servlet is invoked using Java Virtual Machine (VM). The servlet code writes the response to a response stream or asks <code>XMLType</code> instances to do so.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<div id="ADXDB5313" class="sect3"><a id="sthref1407"></a>
<h4 class="sect3">Retrieving Oracle XML&nbsp;DB Resources</h4>
<p>When the protocol indicates that a resource is to be retrieved, the path name to the resource is resolved. Resources being fetched are always streamed out as XML, with the exception of resources containing the <code><a id="sthref1408"></a><a id="sthref1409"></a>XDBBinary</code> element, an element defined to be the XML binary data type, which have their contents streamed out in RAW form.</p>
</div>
<!-- class="sect3" -->
<div id="ADXDB5314" class="sect3"><a id="sthref1410"></a>
<h4 class="sect3">Storing Oracle XML&nbsp;DB Resources</h4>
<p>When the protocol indicates that a resource must be stored, Oracle XML&nbsp;DB checks the document file name extension for <code>.xml</code>, <code>.xsl</code>, <code>.xsd</code>, and so on. If the document is XML, then a pre-parse step is done, whereby enough of the resource is read to determine the XML <code>schemaLocation</code> and <code>namespace</code> of the root element in the document. If a registered schema is located at the <code>schemaLocation</code> URL, and it has a definition for the root element of the current document, then the default table specified for that root element is used to store the contents of the resource.</p>
</div>
<!-- class="sect3" -->
<div id="ADXDB5315" class="sect3"><a id="sthref1411"></a>
<h4 class="sect3">Using Internet Protocols and XMLType: XMLType Direct Stream Write</h4>
<p>Oracle XML&nbsp;DB supports Internet protocols at the <code>XMLType</code> level by using Java <code>XMLType</code> method <code><a id="sthref1412"></a><a id="sthref1413"></a><a id="sthref1414"></a>writeToStream()</code>. This method is implemented natively and writes <code>XMLType</code> data directly to the protocol request stream. This avoids Java VM execution costs and the overhead of converting database data through Java data types and creating Java objects, resulting in significantly higher performance. Performance is further enhanced if the Java code deals only with XML element trees that are close to the root, and does not traverse too many of the leaf elements, so that relatively few Java objects are created.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb22pro.htm#g1031760">Chapter 28, "Accessing the Repository using Protocols"</a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABFAEHE"></a>
<div id="ADXDB5316" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Accessing <a id="sthref1415"></a>Oracle ASM Files using Protocols and Resource APIs &ndash; For DBAs</h3>
<p>Oracle Automatic Storage Management (Oracle ASM) organizes database files into <span class="italic">disk groups</span> for simplified management and added benefits such as database mirroring and I/O balancing.</p>
<p>Repository access using protocols and resource APIs (such as <code>DBMS_XDB</code>) extends to Oracle ASM files. These files are accessed in the <span class="italic">virtual</span> repository folder <code>/sys/asm</code>. However, this access is reserved for database administrators (DBAs). It is <span class="italic">not</span> intended for developers.</p>
<p>A typical use of such access is to copy Oracle ASM files from one database instance to another. For example, a DBA can view folder <code>/sys/asm</code> in a graphical user interface using the WebDAV protocol, and then drag-and-drop a copy of a data-pump dump set from an Oracle ASM disk group to an operating-system file system.</p>
<p>Virtual folder <code>/sys/asm</code> is created by default during Oracle XML&nbsp;DB installation. If the database is not configured to use Oracle ASM, the folder is empty and no operations are permitted on it.</p>
<p>Folder <code>/sys/asm</code> contains folders and subfolders that follow the hierarchy defined by the structure of an Oracle ASM <span class="italic">fully qualified filename</span>:</p>
<ul>
<li>
<p>It contains a subfolder for each mounted <span class="italic">disk group</span>.</p>
</li>
<li>
<p>A disk-group folder contains a subfolder for each <span class="italic">database</span> that uses that disk group. In addition, a disk-group folder may contain files and folders corresponding to Oracle ASM <span class="italic">aliases</span> created by the administrator.</p>
</li>
<li>
<p>A database folder contains file-type folders.</p>
</li>
<li>
<p>A file-type folder contains Oracle ASM files, which are binary.</p>
</li>
</ul>
<p>This hierarchy is shown in <a href="#BABIGDBA">Figure 21-4</a>, which omits directories created for aliases, for simplicity.</p>
<div id="ADXDB5317" class="figure">
<p class="titleinfigure"><a id="BABIGDBA"></a>Figure 21-4 Oracle ASM Virtual Folder Hierarchy</p>
<img width="662" height="402" src="img/admin075.gif" alt="Description of Figure 21-4 follows" /><br />
<a id="sthref1416" href="img_text/admin075.htm">Description of "Figure 21-4 Oracle ASM Virtual Folder Hierarchy"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The following usage restrictions apply to virtual folder <code>/sys/asm</code>. You <span class="italic">cannot</span>:</p>
<ul>
<li>
<p><span class="italic">query</span> <code>/sys/asm</code> using SQL</p>
</li>
<li>
<p>put regular files under <code>/sys/asm</code> (you can put only Oracle ASM files there)</p>
</li>
<li>
<p><span class="italic">move</span> (rename) an Oracle ASM file to a different Oracle ASM disk group or to a folder outside Oracle ASM</p>
</li>
<li>
<p>create <span class="italic">hard links</span> to existing Oracle ASM files or directories</p>
</li>
</ul>
<p>In addition:</p>
<ul>
<li>
<p>You must have the privileges of role <code>DBA</code> to view folder <code>/sys/asm</code>.</p>
</li>
<li>
<p>To access <code>/sys/asm</code> using Oracle XML&nbsp;DB protocols, you must log in as a user other than <code>SYS</code>.</p>
</li>
</ul>
<p>Again, Oracle ASM virtual-folder operations are intended only for <span class="italic">database administrators</span>, not developers.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb22pro.htm#CHDDBGHI">"Using FTP with Oracle ASM Files"</a> for an example of using protocol FTP with <code>/sys/asm</code></p>
</li>
<li>
<p><a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about the syntax of a fully qualified Oracle ASM filename and details on the virtual folder structure</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1042499"></a>
<div id="ADXDB5318" class="sect1">
<h2 class="sect1">Query-Based Access<a id="sthref1417"></a> to Repository Resources</h2>
<p>There are two views that enable SQL access to Oracle XML&nbsp;DB Repository data:</p>
<ul>
<li>
<p><code>PATH_VIEW</code></p>
</li>
<li>
<p><code>RESOURCE_VIEW</code></p>
</li>
</ul>
<p><a href="#g1046678">Table 21-2</a> summarizes the differences between <code>PATH_VIEW</code> and <code>RESOURCE_VIEW</code>.</p>
<div id="ADXDB5319" class="tblhruleformal">
<p class="titleintable"><a id="sthref1418"></a><a id="g1046678"></a>Table 21-2 Differences Between PATH_VIEW and RESOURCE_VIEW</p>
<table class="cellalignment1032" title="Differences Between PATH_VIEW and RESOURCE_VIEW" summary="This table describes differences between RESOURCE_VIEW and PATH_VIEW. It has three rows and two columns." dir="ltr">
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t20">PATH_VIEW</th>
<th class="cellalignment1027" id="r1c2-t20">RESOURCE_VIEW</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t20" headers="r1c1-t20">
<p>Contains link properties</p>
</td>
<td class="cellalignment1028" headers="r2c1-t20 r1c2-t20">
<p>No link properties</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t20" headers="r1c1-t20">
<p>Has one row for each unique <span class="italic">path</span> in repository</p>
</td>
<td class="cellalignment1028" headers="r3c1-t20 r1c2-t20">
<p>Has one row for each <span class="italic">resource</span> in repository</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>Rows in these two repository views are of <code>XMLType</code>. In the <code>RESOURCE_VIEW</code>, the single path associated with a resource is arbitrarily chosen from among the possible paths that refer to the resource. Oracle XML&nbsp;DB provides SQL functions, such as <code>under_path</code>, that let applications search for the resources contained within a particular folder (recursively), obtain the resource depth, and so on.</p>
<p>DML can be used on the repository views to insert, rename, delete, and update resource properties and contents. Programmatic APIs must be used for other operations, such as creating links to existing resources.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb18res.htm#g1034945">Chapter 25, "Accessing the Repository using RESOURCE_VIEW and PATH_VIEW"</a> for details on SQL access to Oracle XML&nbsp;DB Repository</p>
</li>
<li>
<p><a href="xdb21sec.htm#g1040139">Chapter 27, "Repository Access Control"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1042509"></a>
<div id="ADXDB5320" class="sect1">
<h2 class="sect1">Servlet Access to <a id="sthref1419"></a>Repository Resources</h2>
<p>Oracle XML&nbsp;DB implements Java Servlet API, version 2.2, with the following exceptions:</p>
<ul>
<li>
<p>All servlets must be distributable. They must expect to run in different virtual machines.</p>
</li>
<li>
<p>WAR and <code>web.xml</code> files are not supported. Oracle XML&nbsp;DB supports a subset of the XML configurations in this file. An XSL style sheet can be applied to the <code>web.xml</code> to generate servlet definitions. An external tool must be used to create database roles for those defined in the <code>web.xml</code> file.</p>
</li>
<li>
<p>JSP (Java Server Pages) support can be installed as a servlet and configured manually.</p>
</li>
<li>
<p><code>HTTPSession</code> and related classes are not supported.</p>
</li>
<li>
<p>Only one servlet context (that is, one Web application) is supported.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb23jv1.htm#g1050187">Chapter 32, "Writing Oracle XML&nbsp;DB Applications in Java"</a></div>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i1043394"></a>
<div id="ADXDB5321" class="sect1">
<h2 class="sect1">Operations on Repository Resources</h2>
<p>You can operate on data stored in Oracle XML&nbsp;DB Repository resources using any of the following:</p>
<ul>
<li>
<p>Oracle XML&nbsp;DB resource APIs for Java</p>
</li>
<li>
<p>A combination of Oracle XML&nbsp;DB resource views API and Oracle XML&nbsp;DB resource API for PL/SQL</p>
</li>
<li>
<p>Internet protocols (HTTP(S)/WebDAV and FTP) and Oracle XML&nbsp;DB protocol server</p>
</li>
<li>
<p>Oracle XML DB Content Connector and, through it, the standard Content Repository API for Java (JCR).</p>
</li>
</ul>
<p>These access methods can be used equivalently. It does not matter how you add content to the repository or retrieve it from there. For example, you can add content to the repository using SQL or PL/SQL and then retrieve it using an Internet protocol,&thinsp;or the other way around.</p>
<p><a href="#BABBJJDI">Table 21-3</a> lists common Oracle XML&nbsp;DB Repository operations, and describes how these operations can be accomplished using each of several access methods. The table shows functionality common to the different methods, but not all of the methods are equally suited to any particular task. Unless mentioned otherwise, "resource" in this table can be either a file resource or a folder resource.</p>
<p><a href="#BABBJJDI">Table 21-3</a> also shows the resource privileges that are required for each operation. In addition to the privileges listed in the table, privilege <code>xdb:read-properties</code> is required on each resource affected by an operation. Operations that affect the parent folder of a resource, in addition to the resource targeted by the operation, also require privilege <code>xdb:read-properties</code> on that parent folder. For example, deleting a resource affects both the resource to delete and its parent folder, so you need privilege <code>xdb:read-properties</code> on both the resource and its parent folder.</p>
<div id="ADXDB5322" class="tblhruleformalwidemax">
<p class="titleintable"><a id="sthref1420"></a><a id="BABBJJDI"></a>Table 21-3 Accessing Oracle XML&nbsp;DB Repository: API Options</p>
<table class="cellalignment1032" title="Accessing Oracle XML DB Repository: API Options" summary="This table describes the API options for accessing Oracle XML DB Repository." dir="ltr">
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t23">Data Access</th>
<th class="cellalignment1027" id="r1c2-t23">SQL and PL/SQL</th>
<th class="cellalignment1027" id="r1c3-t23">Protocols</th>
<th class="cellalignment1027" id="r1c4-t23">Resource Privileges Required</th>
<th class="cellalignment1027" id="r1c5-t23">JCR Support</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t23" headers="r1c1-t23">
<p>Create resource</p>
</td>
<td class="cellalignment1028" headers="r2c1-t23 r1c2-t23">
<pre>
DBMS_XDB.createResource('/public/T1/testcase.txt',
                        'ORIGINAL text');
INSERT INTO RESOURCE_VIEW (ANY_PATH, RES)
SELECT '/public/T1/copy1.txt', RES
  FROM RESOURCE_VIEW
  WHERE equals_path(RES, 
                    '/public/T1/testcase.txt')
        = 1;
</pre></td>
<td class="cellalignment1028" headers="r2c1-t23 r1c3-t23">
<p>HTTP:<code>PUT;</code></p>
<p>FTP: <code>PUT</code></p>
</td>
<td class="cellalignment1028" headers="r2c1-t23 r1c4-t23">
<p><code>DAV::bind</code> on parent folder</p>
</td>
<td class="cellalignment1028" headers="r2c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t23" headers="r1c1-t23">
<p>Update resource contents</p>
</td>
<td class="cellalignment1028" headers="r3c1-t23 r1c2-t23">
<pre>
UPDATE RESOURCE_VIEW
SET RES =
updateXML(
  RES,
  '/Resource/Contents/text/text()',
  'NEW text',
  'xmlns =
"http://xmlns.oracle.com/xdb/XDBResource.xsd')  
WHERE equals_path(RES,
                  '/public/T1/copy1.txt') = 1;
</pre></td>
<td class="cellalignment1028" headers="r3c1-t23 r1c3-t23">
<p>HTTP: <code>PUT;</code></p>
<p>FTP: <code>PUT</code></p>
</td>
<td class="cellalignment1028" headers="r3c1-t23 r1c4-t23">
<p><code>xdb:write-content</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r3c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t23" headers="r1c1-t23">
<p>Update resource properties</p>
</td>
<td class="cellalignment1028" headers="r4c1-t23 r1c2-t23">
<pre>
UPDATE RESOURCE_VIEW
SET RES =
updateXML(
  RES,
  '/Resource/DisplayName/text()', 
  'NewName1.txt',
  'xmlns =
"http://xmlns.oracle.com/xdb/XDBResource.xsd')
WHERE equals_path(RES,
                  '/public/T1/copy1.txt') = 1;
</pre></td>
<td class="cellalignment1028" headers="r4c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>PROPPATCH;</code></p>
</td>
<td class="cellalignment1028" headers="r4c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r4c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r5c1-t23" headers="r1c1-t23">
<p>Update resource ACL</p>
</td>
<td class="cellalignment1028" headers="r5c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB.setACL(
  '/public/T1/copy1.txt',
  '/sys/acls/all_owner_acl.xml');
</pre></td>
<td class="cellalignment1028" headers="r5c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r5c1-t23 r1c4-t23">
<p><code>DAV::write-acl</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r5c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r6c1-t23" headers="r1c1-t23">
<p>Unlink resource (delete if last link)</p>
</td>
<td class="cellalignment1028" headers="r6c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB.deleteResource()
DELETE FROM RESOURCE_VIEW
  WHERE equals_path(RES, path) &gt; 0
</pre></td>
<td class="cellalignment1028" headers="r6c1-t23 r1c3-t23">
<p>HTTP:</p>
<p><code>DELETE;</code></p>
<p>FTP: <code>delete</code></p>
</td>
<td class="cellalignment1028" headers="r6c1-t23 r1c4-t23">
<p><code>DAV::unbind</code> on parent folder</p>
<p><code>xdb:unlink-from</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r6c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r7c1-t23" headers="r1c1-t23">
<p>Forcibly remove all links to resource</p>
</td>
<td class="cellalignment1028" headers="r7c1-t23 r1c2-t23">
<pre>
DBMS_XDB.deleteResource()
DELETE FROM PATH_VIEW
WHERE
XMLCast(
XMLQuery(
  'declare namespace n1=
"http://xmlns.oracle.com/xdb/XDBResource.xsd"; (: :)
   //n1:DisplayName'
  PASSING RES RETURNING CONTENT)
AS VARCHAR2(256))
= 'My resource'
</pre></td>
<td class="cellalignment1028" headers="r7c1-t23 r1c3-t23">
<p>FTP:</p>
<p><code>quote</code></p>
<p><code>rm_rf</code></p>
<p><code><span class="codeinlineitalic">resource</span></code></p>
</td>
<td class="cellalignment1028" headers="r7c1-t23 r1c4-t23">
<p><code>DAV::unbind</code> on all parent folders</p>
<p><code>xdb:unlink-from</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r7c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r8c1-t23" headers="r1c1-t23">
<p>Move resource</p>
</td>
<td class="cellalignment1028" headers="r8c1-t23 r1c2-t23">
<pre>
UPDATE PATH_VIEW
  SET path = '/public/T1/copy2.txt'
  WHERE equals_path(RES,
                    '/public/T1/copy1.txt')
        = 1;
</pre></td>
<td class="cellalignment1028" headers="r8c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>MOVE;</code></p>
<p>FTP: <code>rename</code></p>
</td>
<td class="cellalignment1028" headers="r8c1-t23 r1c4-t23">
<p><code>DAV::unbind</code> on source parent folder</p>
<p><code>DAV::bind</code> on target parent folder</p>
<p><code>xdb:unlink-from</code> and <code>xdb:link-to</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r8c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r9c1-t23" headers="r1c1-t23">
<p>Copy resource</p>
</td>
<td class="cellalignment1028" headers="r9c1-t23 r1c2-t23">
<pre>
INSERT INTO PATH_VIEW (path, RES, link)
  SELECT '/public/T1/copy3.txt', RES, link
    FROM PATH_VIEW
    WHERE equals_path(RES,
                      '/public/T1/copy2.txt')
          = 1;
</pre></td>
<td class="cellalignment1028" headers="r9c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>COPY;</code></p>
</td>
<td class="cellalignment1028" headers="r9c1-t23 r1c4-t23">
<p>Copy to new:</p>
<p><code>DAV::bind</code> on target parent folder</p>
<p><code>DAV::read</code> on resource</p>
<p>Copy to existing (replacement):</p>
<p><code>DAV::read</code> on resource</p>
<p><code>DAV::write-properties</code> and <code>DAV::write-content</code> on existing target resource</p>
</td>
<td class="cellalignment1028" headers="r9c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r10c1-t23" headers="r1c1-t23">
<p>Create hard link to existing resource</p>
</td>
<td class="cellalignment1028" headers="r10c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB.link('/public/T1/copy3.txt', 
                   '/public/T1',
                   'myhardlink');
</pre></td>
<td class="cellalignment1028" headers="r10c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r10c1-t23 r1c4-t23">
<p><code>DAV::bind</code> on parent folder</p>
<p><code>xdb:link-to</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r10c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r11c1-t23" headers="r1c1-t23">
<p>Create weak link to existing resource</p>
</td>
<td class="cellalignment1028" headers="r11c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB.link('/public/T1/copy3.txt', 
                   '/public/T1',
                   'myweaklink',
                   DBMS_XDB.LINK_TYPE_WEAK);
</pre></td>
<td class="cellalignment1028" headers="r11c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r11c1-t23 r1c4-t23">
<p><code>DAV::bind</code> on parent folder</p>
<p><code>xdb:link-to</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r11c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r12c1-t23" headers="r1c1-t23">
<p>Change owner of resource</p>
</td>
<td class="cellalignment1028" headers="r12c1-t23 r1c2-t23">
<pre>
UPDATE RESOURCE_VIEW
  SET RES =
    updateXML(
      RES,
      '/Resource/Owner/text()',
      'U2')
  WHERE equals_path(RES, '/public/T1/copy3.txt')
        = 1;
</pre></td>
<td class="cellalignment1028" headers="r12c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r12c1-t23 r1c4-t23">
<p><code>DAV::take-ownership</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r12c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r13c1-t23" headers="r1c1-t23">
<p>Get binary or text representation of resource contents</p>
</td>
<td class="cellalignment1028" headers="r13c1-t23 r1c2-t23">
<pre>
SELECT XDBURIType(path).getBLOB()
  FROM DUAL;

SELECT
XMLQuery(
'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd";(: :)
 $r/Resource/Contents'
PASSING RES AS "r" RETURNING CONTENT)
FROM RESOURCE_VIEW
WHERE equals_path(RES, '/public/T1/copy2.text') = 1;
</pre></td>
<td class="cellalignment1028" headers="r13c1-t23 r1c3-t23">
<p>HTTP: <code>GET;</code></p>
<p>FTP: <code>get</code></p>
</td>
<td class="cellalignment1028" headers="r13c1-t23 r1c4-t23">
<p><code>xdb:read-contents</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r13c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r14c1-t23" headers="r1c1-t23">
<p>Get <code>XMLType</code> representation of resource contents</p>
</td>
<td class="cellalignment1028" headers="r14c1-t23 r1c2-t23">
<pre>
SELECT XDBURIType('/public/T1/res.xml').getXML
  FROM DUAL;

SELECT 
XMLQuery(
'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd";(: :)
 $r/Resource/Contents/*'
PASSING RES AS "r" RETURNING CONTENT)
FROM RESOURCE_VIEW 
WHERE equals_path(RES, '/public/T1/res.xml') = 1;
</pre></td>
<td class="cellalignment1028" headers="r14c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r14c1-t23 r1c4-t23">
<p><code>xdb:read-contents</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r14c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r15c1-t23" headers="r1c1-t23">
<p>Get resource properties</p>
</td>
<td class="cellalignment1028" headers="r15c1-t23 r1c2-t23">
<pre>
SELECT
XMLCast(
XMLQuery(
'declare default element namespace
"http://xmlns.oracle.com/xdb/XDBResource.xsd";(: :)
$r/Resource/LastModifier'
PASSING RES AS "r" RETURNING CONTENT)
AS VARCHAR2(128))
FROM RESOURCE_VIEW
WHERE equals_path(RES, '/public/T1/res.xml') = 1;
</pre></td>
<td class="cellalignment1028" headers="r15c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>PROPFIND</code></p>
<p><code>(depth = 0);</code></p>
</td>
<td class="cellalignment1028" headers="r15c1-t23 r1c4-t23">
<p><code>xdb:read-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r15c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r16c1-t23" headers="r1c1-t23">
<p>List resources in folder</p>
</td>
<td class="cellalignment1028" headers="r16c1-t23 r1c2-t23">
<pre>
SELECT PATH FROM PATH_VIEW
  WHERE under_path(res, '/public/T1') = 1;
</pre></td>
<td class="cellalignment1028" headers="r16c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>PROPFIND</code></p>
<p><code>(depth = 0);</code></p>
</td>
<td class="cellalignment1028" headers="r16c1-t23 r1c4-t23">
<p><code>xdb:read-contents</code> on folder</p>
</td>
<td class="cellalignment1028" headers="r16c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r17c1-t23" headers="r1c1-t23">
<p>Create folder</p>
</td>
<td class="cellalignment1028" headers="r17c1-t23 r1c2-t23">
<pre>
Call DBMS_XDB.createFolder('/public/T2');
</pre></td>
<td class="cellalignment1028" headers="r17c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>MKCOL;</code></p>
<p>FTP: <code>mkdir</code></p>
</td>
<td class="cellalignment1028" headers="r17c1-t23 r1c4-t23">
<p><code>DAV::bind</code> on parent folder</p>
</td>
<td class="cellalignment1028" headers="r17c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r18c1-t23" headers="r1c1-t23">
<p>Unlink empty folder</p>
</td>
<td class="cellalignment1028" headers="r18c1-t23 r1c2-t23">
<pre>
DBMS_XDB.deleteResource('/public/T2')
</pre></td>
<td class="cellalignment1028" headers="r18c1-t23 r1c3-t23">
<p>HTTP:</p>
<p><code>DELETE;</code></p>
<p>FTP: <code>rmdir</code></p>
</td>
<td class="cellalignment1028" headers="r18c1-t23 r1c4-t23">
<p><code>DAV::unbind</code> on parent folder</p>
<p><code>xdb:unlink-from</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r18c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r19c1-t23" headers="r1c1-t23">
<p>Forcibly delete folder and all links to it</p>
</td>
<td class="cellalignment1028" headers="r19c1-t23 r1c2-t23">
<pre>
DBMS_XDB.deleteResource(
  '/public/T2',
  DBMS_XDB.DELETE-RECURSIVE_FORCE);
</pre></td>
<td class="cellalignment1028" headers="r19c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r19c1-t23 r1c4-t23">
<p><code>DAV::unbind</code> on all parent folders</p>
<p><code>xdb:unlink-from</code> on folder resource</p>
</td>
<td class="cellalignment1028" headers="r19c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r20c1-t23" headers="r1c1-t23">
<p>Get resource with a row lock</p>
</td>
<td class="cellalignment1028" headers="r20c1-t23 r1c2-t23">
<pre>
SELECT ... 
  FROM RESOURCE_VIEW
  FOR UPDATE ...;
</pre></td>
<td class="cellalignment1028" headers="r20c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r20c1-t23 r1c4-t23">
<p><code>xdb:read-properties</code> and <code>xdb:read-contents</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r20c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r21c1-t23" headers="r1c1-t23">
<p>Add WebDAV lock on resource</p>
</td>
<td class="cellalignment1028" headers="r21c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB.LockResource('/public/T1/res.xml',
                           TRUE,
                           TRUE);
</pre></td>
<td class="cellalignment1028" headers="r21c1-t23 r1c3-t23">
<p>WebDAV:</p>
<p><code>LOCK;</code></p>
<p>FTP:</p>
<p><code>quote lock</code></p>
</td>
<td class="cellalignment1028" headers="r21c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r21c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r22c1-t23" headers="r1c1-t23">
<p>Remove WebDAV lock</p>
</td>
<td class="cellalignment1028" headers="r22c1-t23 r1c2-t23">
<pre>
DECLARE...
BEGIN 
  DBMS_XDB.GetLockToken('/public/T1/res.xml', 
                        locktoken); 
  DBMS_XDB.UnlockResource('/public/T1/res.xml',
                          locktoken);
END; 
</pre></td>
<td class="cellalignment1028" headers="r22c1-t23 r1c3-t23">
<p>WebDAV: <code>UNLOCK;</code></p>
<p>FTP:</p>
<p><code>quote unlock</code></p>
</td>
<td class="cellalignment1028" headers="r22c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> and <code>DAV::unlock</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r22c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r23c1-t23" headers="r1c1-t23">
<p>Check out file resource</p>
</td>
<td class="cellalignment1028" headers="r23c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB_VERSION.checkOut(
  '/public/T1/res.xml');
</pre></td>
<td class="cellalignment1028" headers="r23c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r23c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r23c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r24c1-t23" headers="r1c1-t23">
<p>Check in file resource</p>
</td>
<td class="cellalignment1028" headers="r24c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB_VERSION.checkIn(
  '/public/T1/res.xml');
</pre></td>
<td class="cellalignment1028" headers="r24c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r24c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r24c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r25c1-t23" headers="r1c1-t23">
<p>Uncheck out file resource</p>
</td>
<td class="cellalignment1028" headers="r25c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB_VERSION.unCheckOut(
  '/public/T1/res.xml');
</pre></td>
<td class="cellalignment1028" headers="r25c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r25c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r25c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r26c1-t23" headers="r1c1-t23">
<p>Make file resource versioned</p>
</td>
<td class="cellalignment1028" headers="r26c1-t23 r1c2-t23">
<pre>
EXEC DBMS_XDB_VERSION.makeVersioned(
  '/public/T1/res.xml');
</pre></td>
<td class="cellalignment1028" headers="r26c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r26c1-t23 r1c4-t23">
<p><code>DAV::write-properties</code> on resource</p>
</td>
<td class="cellalignment1028" headers="r26c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r27c1-t23" headers="r1c1-t23">
<p>Remove an event handler</p>
</td>
<td class="cellalignment1028" headers="r27c1-t23 r1c2-t23">
<p><code>DBMS_XEVENT.remove</code></p>
</td>
<td class="cellalignment1028" headers="r27c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r27c1-t23 r1c4-t23">
<p><code>xdb:write-config</code> on resource or parent folder (depending on the context)</p>
</td>
<td class="cellalignment1028" headers="r27c1-t23 r1c5-t23">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r28c1-t23" headers="r1c1-t23">
<p>Commit changes</p>
</td>
<td class="cellalignment1028" headers="r28c1-t23 r1c2-t23">
<pre>
COMMIT;
</pre></td>
<td class="cellalignment1028" headers="r28c1-t23 r1c3-t23">
<p>Automatic commit after each request</p>
</td>
<td class="cellalignment1028" headers="r28c1-t23 r1c4-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r28c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r29c1-t23" headers="r1c1-t23">
<p>Rollback changes</p>
</td>
<td class="cellalignment1028" headers="r29c1-t23 r1c2-t23">
<pre>
ROLLBACK;
</pre></td>
<td class="cellalignment1028" headers="r29c1-t23 r1c3-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r29c1-t23 r1c4-t23">
<p>not applicable</p>
</td>
<td class="cellalignment1028" headers="r29c1-t23 r1c5-t23">
<p>Yes</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwidemax" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb18res.htm#g1034945">Chapter 25, "Accessing the Repository using RESOURCE_VIEW and PATH_VIEW"</a></p>
</li>
<li>
<p><a href="xdb19rpl.htm#g1031289">Chapter 26, "Accessing the Repository using PL/SQL"</a></p>
</li>
<li>
<p><a href="xdb22pro.htm#g1031760">Chapter 28, "Accessing the Repository using Protocols"</a></p>
</li>
<li>
<p><a href="xdb_jcr.htm#BABHGHCI">Chapter 31, "Using Oracle XML DB Content Connector"</a></p>
</li>
<li>
<p><a class="olink ARPLS371" href="../../appdev.112/e40758/d_xdb.htm#ARPLS371"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL package <code>DBMS_XDB</code></p>
</li>
<li>
<p><a class="olink ARPLS373" href="../../appdev.112/e40758/d_xdb_ver.htm#ARPLS373"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL package <code>DBMS_XDB_VERSION</code></p>
</li>
<li>
<p><a class="olink ARPLS210" href="../../appdev.112/e40758/d_xevent.htm#ARPLS210"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL package <code>DBMS_XEVENT</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" -->
<hr />
<br />
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:&nbsp;The graph is established by the hard links that define the repository structure, and cycles are not permitted using hard links. You can, however, introduce cycles using weak links. See <a href="#BABFIFIH">"Hard Links and Weak Links"</a>.<br /></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1019">
<tr>
<td class="cellalignment1028">
<table class="cellalignment1024">
<tr>
<td class="cellalignment1023"><a href="partpg5.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1023"><a href="xdb_repos_config.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1030">
<table class="cellalignment1022">
<tr>
<td class="cellalignment1023"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1023"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1023"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1023"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1023"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1023"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
</body>
</html>
