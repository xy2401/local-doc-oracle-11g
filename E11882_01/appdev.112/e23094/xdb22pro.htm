<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Accessing the Repository using Protocols</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748" />
<meta name="description" content="This manual describes Oracle XML&nbsp;DB. It includes guidelines and examples for storing, generating, accessing, searching, validating, transforming, evolving, and indexing XML data in Oracle Database." />
<meta name="dcterms.created" content="2014-02-20T9:56:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="XML DB Developer's Guide" />
<meta name="dcterms.identifier" content="E23094-04" />
<meta name="dcterms.isVersionOf" content="ADXDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="xdb21sec.htm" title="Previous" type="text/html" />
<link rel="Next" href="xdb_repos_meta.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23094.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">40/54</span> <!-- End Header -->
<script  >
<!-- // <![CDATA[
window.name='xdb22pro'
// ]]> -->
</script> <script  >
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=120,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><h1>Footnote ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/body><\/html>');
    msg.document.close();
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="ADXDB2500" class="chapter"><a id="g1031760"></a>
<h1 class="chapter"><span class="secnum">28</span> Accessing the Repository using Protocols</h1>
<p>This chapter describes how to access Oracle XML&nbsp;DB Repository data using FTP, HTTP(S)/WebDAV protocols.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#i1026716">Overview of Oracle XML&nbsp;DB Protocol Server</a></p>
</li>
<li>
<p><a href="#i1029414">Oracle XML&nbsp;DB Protocol Server Configuration Management</a></p>
</li>
<li>
<p><a href="#i1026720">Using FTP and Oracle XML&nbsp;DB Protocol Server</a></p>
</li>
<li>
<p><a href="#i1026724">Using HTTP(S) and Oracle XML&nbsp;DB Protocol Server</a></p>
</li>
<li>
<p><a href="#i1026728">Using WebDAV and Oracle XML&nbsp;DB</a></p>
</li>
</ul>
<a id="i1026716"></a>
<div id="ADXDB5520" class="sect1">
<h2 class="sect1">Overview of Oracle XML&nbsp;DB Protocol Server</h2>
<p>As described in <a href="xdb02rep.htm#g1038525">Chapter 2, "Getting Started with Oracle XML&nbsp;DB"</a> and <a href="xdb16fol.htm#g1050290">Chapter 21, "Accessing Oracle XML&nbsp;DB Repository Data"</a>, Oracle XML&nbsp;DB Repository provides a hierarchical data repository in the database, designed for XML. Oracle XML&nbsp;DB Repository maps path names (or URLs) onto database objects of <code>XMLType</code> and provides management facilities for these objects.</p>
<p>Oracle XML&nbsp;DB also provides the Oracle XML&nbsp;DB <a id="sthref1628"></a><span class="italic">protocol server</span>. This supports standard Internet protocols, FTP, WebDAV, and HTTP(S), for accessing its hierarchical repository or file system. Note that HTTPS provides <span class="italic">secure</span> access to Oracle XML&nbsp;DB Repository.</p>
<p>These protocols can provide direct access to Oracle XML&nbsp;DB for many users without having to install additional software. The user names and passwords to be used with the protocols are the same as those for SQL*Plus. Enterprise users are also supported. Database administrators can use these protocols and resource APIs such as <code>DBMS_XDB</code> to access Oracle Automatic Storage Management (Oracle ASM) files and folders in the repository virtual folder <code>/sys/asm</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb16fol.htm#g1050290">Chapter 21, "Accessing Oracle XML&nbsp;DB Repository Data"</a> for more information about accessing repository information, and restrictions on that access</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>When accessing virtual folder <code>/sys/asm</code> using Oracle XML&nbsp;DB protocols, you must log in with the privileges of role <code>DBA</code> but as a user other than <code>SYS</code>.</p>
</li>
<li>
<p>Oracle XML&nbsp;DB protocols are <span class="italic">not</span> supported on EBCDIC platforms.</p>
</li>
</ul>
</div>
<div id="ADXDB5521" class="sect2"><a id="sthref1629"></a>
<h3 class="sect2">Session Pooling</h3>
<p>Oracle XML&nbsp;DB protocol server maintains a shared pool of <a id="sthref1630"></a>sessions. Each protocol connection is associated with one session from this pool. After a connection is closed the session is put back into the shared pool and can be used to serve later connections.</p>
<p>Session pooling improves performance of <a id="sthref1631"></a>HTTP(S) by avoiding the cost of re-creating session states, especially when using HTTP 1.0, which creates new connections for each request. For example, a couple of small files can be retrieved by an existing HTTP/1.1 connection in the time necessary to create a database session. You can tune the number of sessions in the pool by setting session-pool-size in Oracle XML&nbsp;DB <code>xdbconfig.xml</code> file, or disable it by setting pool size to zero.</p>
<p>Session pooling can affect users writing <span class="italic">Java servlets</span>, because other users can see session state initialized by another request for a different user. Hence, servlet writers should only use session memory, such as Java static variables, to hold data for the entire application rather than for a particular user. State for each user must be stored in the database or in a lookup table, rather than assuming that a session only exists for a single user.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb23jv1.htm#g1050187">Chapter 32, "Writing Oracle XML&nbsp;DB Applications in Java"</a></div>
<p><a href="#i1026339">Figure 28-1</a> illustrates the Oracle XML&nbsp;DB <a id="sthref1632"></a>protocol server components and how they are used to access files in Oracle XML&nbsp;DB Repository and other data. Only the relevant components of the repository are shown</p>
<div id="ADXDB5522" class="figure">
<p class="titleinfigure"><a id="i1026339"></a>Figure 28-1 Oracle XML&nbsp;DB Architecture: Protocol Server</p>
<img width="500" height="280" src="img/adxdb019.gif" alt="Description of Figure 28-1 follows" /><br />
<a id="sthref1633" href="img_text/adxdb019.htm">Description of "Figure 28-1 Oracle XML&nbsp;DB Architecture: Protocol Server "</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1029414"></a>
<div id="ADXDB2510" class="sect1">
<h2 class="sect1">Oracle XML&nbsp;DB Protocol Server Configuration Management</h2>
<p>Oracle XML&nbsp;DB protocol server uses configuration parameters stored in <code>/xdbconfig.xml</code> to initialize its startup state and manage session level configuration. The following section describes the protocol-specific configuration parameters that you can configure in the Oracle XML&nbsp;DB configuration file. The session pool size and timeout parameters cannot be changed dynamically, that is, you must restart the database in order for these changes to take effect.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a></div>
<a id="CHDBHBCG"></a>
<div id="ADXDB5523" class="sect2">
<h3 class="sect2">Configuring <a id="sthref1634"></a><a id="sthref1635"></a>Protocol Server Parameters</h3>
<p><a href="#i1026339">Figure 28-1</a> shows the parameters common to all protocols. All parameter names in this table, except those starting with <code>/xdbconfig</code>, are relative to the following XPath in the Oracle XML&nbsp;DB configuration schema:</p>
<pre>
/xdbconfig/sysconfig/protocolconfig/common
</pre>
<ul>
<li>
<p><span class="italic">FTP-specific parameters</span> &ndash; <a href="#g1029943">Table 28-2</a> shows the FTP-specific parameters. These are relative to the following XPath in the Oracle XML&nbsp;DB configuration schema:</p>
<pre>
/xdbconfig/sysconfig/protocolconfig/ftpconfig
</pre></li>
<li>
<p><span class="italic">HTTP(S)/WebDAV specific parameters, except servlet-related parameters</span> &ndash; <a href="#g1029959">Table 28-3</a> shows the HTTP(S)/WebDAV-specific parameters. These parameters are relative to the following XPath in the Oracle XML&nbsp;DB configuration schema:</p>
<pre>
/xdbconfig/sysconfig/protocolconfig/httpconfig
</pre></li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="appaman.htm#g645751">Chapter 34, "Administering Oracle XML&nbsp;DB"</a> for more information about the configuration file <code>xdbconfig.xml</code></p>
</li>
<li>
<p><a href="apphxdb.htm#i643401">"xdbconfig.xsd: XML Schema for Configuring Oracle XML&nbsp;DB"</a></p>
</li>
<li>
<p><a href="appaman.htm#BHBJAGHE">"Configuring Default Namespace to Schema Location Mappings"</a> for more information about the <code>schemaLocation-mappings</code> parameter</p>
</li>
<li>
<p><a href="appaman.htm#BHBDHAEF">"Configuring XML File Extensions"</a> for more information about the <code>xml-extensions</code> parameter</p>
</li>
</ul>
</div>
<p>For examples of the usage of these parameters, see the configuration file, <code>xdbconfig.xml</code>.</p>
<div id="ADXDB5524" class="tblhruleformal">
<p class="titleintable"><a id="sthref1636"></a><a id="BABJEIEG"></a>Table 28-1 Common Protocol Configuration Parameters</p>
<table class="cellalignment1032" title="Common Protocol Configuration Parameters" summary="This table describes protocol configuration parameters." >
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t7">Parameter</th>
<th class="cellalignment1027" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t7" headers="r1c1-t7">
<p><code>extension-mappings/mime-mappings</code></p>
</td>
<td class="cellalignment1028" headers="r2c1-t7 r1c2-t7">
<p>Specifies the mapping of file extensions to mime types. When a resource is stored in Oracle XML&nbsp;DB Repository, and its mime type is not specified, this list of mappings is used to set its mime type.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t7" headers="r1c1-t7">
<p><code>extension-mappings/lang-mappings</code></p>
</td>
<td class="cellalignment1028" headers="r3c1-t7 r1c2-t7">
<p>Specifies the mapping of file extensions to languages. When a resource is stored in Oracle XML&nbsp;DB Repository, and its language is not specified, this list of mappings is used to set its language.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t7" headers="r1c1-t7">
<p><code>extension-mappings/encoding-mappings</code></p>
</td>
<td class="cellalignment1028" headers="r4c1-t7 r1c2-t7">
<p>Specifies the mapping of file extensions to encodings. When a resource is stored in Oracle XML&nbsp;DB Repository, and its encoding is not specified, this list of mappings is used to set its encoding.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r5c1-t7" headers="r1c1-t7">
<p><code>xml-extensions</code></p>
</td>
<td class="cellalignment1028" headers="r5c1-t7 r1c2-t7">
<p>Specifies the list of filename extensions that are treated as XML content by Oracle XML&nbsp;DB.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r6c1-t7" headers="r1c1-t7">
<p><code>session-pool-size</code></p>
</td>
<td class="cellalignment1028" headers="r6c1-t7 r1c2-t7">
<p>Maximum number of sessions that are kept in the protocol server session pool</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r7c1-t7" headers="r1c1-t7">
<p><code>/xdbconfig/sysconfig/call-timeout</code></p>
</td>
<td class="cellalignment1028" headers="r7c1-t7 r1c2-t7">
<p>If a connection is idle for this time (in hundredths of a second), then the shared server serving the connection is freed up to serve other connections.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r8c1-t7" headers="r1c1-t7">
<p><code>session-timeout</code></p>
</td>
<td class="cellalignment1028" headers="r8c1-t7 r1c2-t7">
<p>Time (in hundredths of a second) after which a session (and consequently the corresponding connection) is terminated by the protocol server if the connection has been idle for that time. This parameter is used only if the specific protocol session timeout is not present in the configuration</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r9c1-t7" headers="r1c1-t7">
<p><code>schemaLocation-mappings</code></p>
</td>
<td class="cellalignment1028" headers="r9c1-t7 r1c2-t7">
<p>Specifies the default schema location for a given namespace. This is used if the instance XML document does not contain an explicit <code>xsi:schemaLocation</code> attribute.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r10c1-t7" headers="r1c1-t7">
<p><code>/xdbconfig/sysconfig/default-lock-timeout</code></p>
</td>
<td class="cellalignment1028" headers="r10c1-t7 r1c2-t7">
<p>Time period after which a WebDAV lock on a resource becomes invalid. This could be overridden by a Timeout specified by the client that locks the resource.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<div id="ADXDB5525" class="tblhruleformal">
<p class="titleintable"><a id="sthref1637"></a><a id="g1029943"></a>Table 28-2 Configuration <a id="sthref1638"></a>Parameters Specific to <a id="sthref1639"></a><a id="sthref1640"></a>FTP</p>
<table class="cellalignment1032" title="Configuration Parameters Specific to FTP" summary="This table describes protocol configuration parameters specific to FTP." dir="ltr">
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t8">Parameter</th>
<th class="cellalignment1027" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t8" headers="r1c1-t8">
<p><code>buffer-size</code></p>
</td>
<td class="cellalignment1028" headers="r2c1-t8 r1c2-t8">
<p>Size of the buffer, in bytes, used to read data from the network during an FTP <code>put</code> operation. Set <code>buffer-size</code> to larger values for higher <code>put</code> performance. There is a trade-off between <code>put</code> performance and memory usage. The value can be from 1024 to 1048496, inclusive. The default value is 8192.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t8" headers="r1c1-t8">
<p><code>ftp-port</code></p>
</td>
<td class="cellalignment1028" headers="r3c1-t8 r1c2-t8">
<p>Port on which FTP server listens. By default, this is <code>0</code>, which means that FTP is <span class="italic">disabled</span>. FTP is disabled by default because the FTP specification requires that passwords be transmitted in clear text, which can present a security hazard. To enable FTP, set this parameter to the FTP port to use, such as <code>2100</code>.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t8" headers="r1c1-t8">
<p><code>ftp-protocol</code></p>
</td>
<td class="cellalignment1028" headers="r4c1-t8 r1c2-t8">
<p>Protocol over which the FTP server runs. By default, this is <code>tcp</code>.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r5c1-t8" headers="r1c1-t8">
<p><code>ftp-welcome-message</code></p>
</td>
<td class="cellalignment1028" headers="r5c1-t8 r1c2-t8">
<p>A user-defined welcome message that is displayed whenever an FTP client connects to the server. If this parameter is empty or missing, then the following default welcome message is displayed: "Unauthorized use of this FTP server is prohibited and may be subject to civil and criminal prosecution."</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r6c1-t8" headers="r1c1-t8">
<p><code>session-timeout</code></p>
</td>
<td class="cellalignment1028" headers="r6c1-t8 r1c2-t8">
<p>Time (in hundredths of a second) after which an FTP connection is terminated by the protocol server if the connection has been idle for that time.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<div id="ADXDB5526" class="tblhruleformal">
<p class="titleintable"><a id="sthref1641"></a><a id="g1029959"></a>Table 28-3 Configuration <a id="sthref1642"></a>Parameters Specific to <a id="sthref1643"></a><a id="sthref1644"></a><a id="sthref1645"></a>HTTP(S)/WebDAV (Except Servlet Parameters)</p>
<table class="cellalignment1032" title="Configuration Parameters Specific to HTTP(S)/WebDAV (Except Servlet Parameters)" summary="This table describes protocol configuration parameters specific to HTTP or WebDAV." dir="ltr">
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t9">Parameter</th>
<th class="cellalignment1027" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t9" headers="r1c1-t9">
<p><code>http-port</code></p>
</td>
<td class="cellalignment1028" headers="r2c1-t9 r1c2-t9">
<p>Port on which the HTTP(S)/WebDAV server listens, using protocol <code>http-protocol</code>. By default, this is <code>0</code>, which means that HTTP is <span class="italic">disabled</span>. If this parameter is empty (<code>&lt;http-port/&gt;</code>), then the default value of <code>0</code> applies. An empty parameter is <span class="italic">not</span> recommended.</p>
<p>This parameter must be present, whether or not it is empty. Otherwise, validation of <code>xdbconfig.xml</code> against XML schema <code>xdbconfig.xsd</code> fails. The value must be different from the value of <code>http2-port</code>. Otherwise, an error is raised.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t9" headers="r1c1-t9">
<p><code>http2-port</code></p>
</td>
<td class="cellalignment1028" headers="r3c1-t9 r1c2-t9">
<p>Port on which the HTTP(S)/WebDAV server listens, using protocol <code>http2-protocol</code>.</p>
<p>This parameter is <span class="italic">optional</span>, but, if present, then <code>http2-protocol</code> must also be present. Otherwise, an error is raised. The value must be different from the value of <code>http-port</code>. Otherwise, an error is raised. An empty parameter (<code>&lt;http2-port/&gt;</code>) also raises an error.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t9" headers="r1c1-t9">
<p><code>http-protocol</code></p>
</td>
<td class="cellalignment1028" headers="r4c1-t9 r1c2-t9">
<p>Protocol over which the HTTP(S)/WebDAV server runs on port <code>http-port</code>. Must be either <code>TCP</code> or <code>TCPS</code>.</p>
<p>This parameter must be present. Otherwise, validation of <code>xdbconfig.xml</code> against XML schema <code>xdbconfig.xsd</code> fails. An empty parameter (<code>&lt;http-protocol/&gt;</code>) also raises an error.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r5c1-t9" headers="r1c1-t9">
<p><code>http2-protocol</code></p>
</td>
<td class="cellalignment1028" headers="r5c1-t9 r1c2-t9">
<p>Protocol over which the HTTP(S)/WebDAV server runs on port <code>http2-port</code>. Must be either <code>TCP</code> or <code>TCPS</code>. If this parameter is empty (<code>&lt;http2-protocol/&gt;</code>), then the default value of <code>TCP</code> applies. (An empty parameter is <span class="italic">not</span> recommended.)</p>
<p>This parameter is <span class="italic">optional</span>, but, if present, then <code>http2-port</code> must also be present. Otherwise, an error is raised.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r6c1-t9" headers="r1c1-t9">
<p><code>session-timeout</code></p>
</td>
<td class="cellalignment1028" headers="r6c1-t9 r1c2-t9">
<p>Time (in hundredths of a second) after which an HTTP(S) session (and consequently the corresponding connection) is terminated by the protocol server if the connection has been idle for that time.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r7c1-t9" headers="r1c1-t9">
<p><code>max-header-size</code></p>
</td>
<td class="cellalignment1028" headers="r7c1-t9 r1c2-t9">
<p>Maximum size (in bytes) of an HTTP(S) header</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r8c1-t9" headers="r1c1-t9">
<p><code>max-request-body</code></p>
</td>
<td class="cellalignment1028" headers="r8c1-t9 r1c2-t9">
<p>Maximum size (in bytes) of an HTTP(S) request body</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r9c1-t9" headers="r1c1-t9">
<p><code>webappconfig/welcome-file-list</code></p>
</td>
<td class="cellalignment1028" headers="r9c1-t9 r1c2-t9">
<p>List of filenames that are considered welcome files. When an HTTP(S) <code>get</code> request for a container is received, the server first checks if there is a resource in the container with any of these names. If so, then the contents of that file are sent, instead of a list of resources in the container.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r10c1-t9" headers="r1c1-t9">
<p><code>default-url-charset</code></p>
</td>
<td class="cellalignment1028" headers="r10c1-t9 r1c2-t9">
<p>The character set in which an HTTP(S) protocol server assumes incoming URL is encoded when it is not encoded in UTF-8 or the Content-Type field Charset parameter of the request.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r11c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1646"></a><a id="sthref1647"></a>allow-repository-anonymous-access</code></p>
</td>
<td class="cellalignment1028" headers="r11c1-t9 r1c2-t9">
<p>Indication of whether or not anonymous HTTP access to Oracle XML&nbsp;DB Repository data is allowed using an unlocked <code>ANONYMOUS</code> user account. The default value is <code>false</code>, meaning that unauthenticated access to repository data is <span class="italic">blocked</span>. See <a href="#CHDHAGBF">"Anonymous Access to Oracle XML&nbsp;DB Repository using HTTP"</a>.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r12c1-t9" headers="r1c1-t9">
<p><code>expire</code></p>
</td>
<td class="cellalignment1028" headers="r12c1-t9 r1c2-t9">
<p>HTTP header that specifies the expiration date and time for a URL. See <a href="#BHCHGBHD">"Controlling URL Expiration Time"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect2" -->
<a id="CHDCAHDH"></a>
<div id="ADXDB2530" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring <a id="sthref1648"></a>Secure HTTP (HTTPS)</h3>
<p>To enable Oracle XML&nbsp;DB Repository to use <span class="italic">secure</span> HTTP connections (HTTPS), a database administrator (DBA) must configure the database accordingly: configure parameters <code>http2-port</code> and <code>http2-protocol</code>, enable the HTTP Listener to use SSL, and enable launching of the TCPS Dispatcher. After doing this, the DBA must stop, then restart, the database and the listener.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a> for information about configuring Oracle XML&nbsp;DB parameters</div>
<div id="ADXDB5527" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1649"></a>
<h4 class="sect3">Enable the HTTP Listener to Use SSL</h4>
<p>A database administrator must carry out the following steps, to configure the HTTP Listener for SSL.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Configuring the HTTP Listener for SSL requires that you have the option Oracle Advanced Security.</div>
<ol>
<li id="CHDBGGBC">
<p><span class="italic">Create a wallet for the server and import a certificate &ndash;</span> Use Oracle Wallet Manager to do the following:</p>
<ol>
<li>
<p>Create a wallet for the server.</p>
</li>
<li>
<p>If a valid certificate with distinguished name (DN) of the server is not available, create a certificate request and submit it to a certificate authority. Obtain a valid certificate from the authority.</p>
</li>
<li>
<p>Import a valid certificate with the distinguished name (DN) of the server into the server.</p>
</li>
<li>
<p>Save the new wallet in <span class="italic">obfuscated</span> form, so that it can be opened without a password.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG160" href="../../network.112/e36292/app_devs.htm#DBSEG160"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for information about how to create a wallet</div>
</li>
<li>
<p><span class="italic">Specify the wallet location to the server &ndash;</span> Use Oracle Net Manager to do this. Ensure that the configuration is saved to disk. This step updates files <code>sqlnet.ora</code> and <code>listener.ora</code>.</p>
</li>
<li>
<p><span class="italic">Disable client authentication</span> at the server, since most Web clients do not have certificates. Use Oracle Net Manager to do this. This step updates file <code>sqlnet.ora</code>.</p>
</li>
<li id="CHDDCFII">
<p><span class="italic">Create a listening end point that uses TCP/IP with SSL &ndash;</span> Use Oracle Net Manager to do this. This step updates file <code>listener.ora</code>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG09361" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=DBSEG09361"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for detailed information regarding steps <a href="#CHDBGGBC">1</a> through <a href="#CHDDCFII">4</a></div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5528" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1650"></a>
<h4 class="sect3">Enable TCPS Dispatcher</h4>
<p>A database administrator must edit the database <code>pfile</code> to enable launching of a TCPS dispatcher during database startup. The following line must be added to the file, where <code><span class="codeinlineitalic">SID</span></code> is the SID of the database:</p>
<pre>
dispatchers=(protocol=tcps)(service=<span class="italic">SID</span>xdb)
</pre>
<p>The database <code>pfile</code> location depends on your operating system, as follows:</p>
<ul>
<li>
<p><span class="italic">MS Windows &ndash;</span> <code><span class="codeinlineitalic">PARENT</span></code><code>/admin/orcl/pfile</code>, where <code><span class="codeinlineitalic">PARENT</span></code> is the parent folder of folder <code>ORACLE_HOME</code></p>
</li>
<li>
<p><span class="italic">UNIX, Linux &ndash;</span> <code>$ORACLE_HOME/admin/$ORACLE_SID/pfile</code></p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="ADXDB5529" class="sect2"><a id="sthref1651"></a>
<h3 class="sect2">Interaction with Oracle XML&nbsp;DB File-System <a id="sthref1652"></a>Resources</h3>
<p>The protocol specifications, RFC 959 (FTP), RFC 2616 (HTTP), and RFC 2518 (WebDAV) implicitly assume an abstract, hierarchical file system on the server side. This is mapped to Oracle XML&nbsp;DB Repository. The repository provides:</p>
<ul>
<li>
<p>Name resolution.</p>
</li>
<li>
<p>Security based on access control lists (ACLs). An ACL is a list of access control entries that determine which principals have access to a given resource or resources. See also <a href="xdb21sec.htm#g1040139">Chapter 27, "Repository Access Control"</a>.</p>
</li>
<li>
<p>The ability to store and retrieve any content. The repository can store both binary data input through FTP and XML schema-based documents.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><code><a href="http://www.ietf.org/rfc/rfc959.txt">http://www.ietf.org/rfc/rfc959.txt</a></code></p>
</li>
<li>
<p><code><a href="http://www.ietf.org/rfc/rfc2616.txt">http://www.ietf.org/rfc/rfc2616.txt</a></code></p>
</li>
<li>
<p><code><a href="http://www.ietf.org/rfc/rfc2518.txt">http://www.ietf.org/rfc/rfc2518.txt</a></code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="ADXDB5530" class="sect2"><a id="sthref1653"></a>
<h3 class="sect2">Protocol Server Handles XML Schema-Based or Non-Schema-Based XML Documents</h3>
<p>Oracle XML&nbsp;DB protocol server enhances the protocols by always checking if XML documents being inserted are based on XML schemas registered in Oracle XML&nbsp;DB Repository.</p>
<ul>
<li>
<p>If the incoming XML document specifies an XML schema, then the Oracle XML&nbsp;DB storage to use is determined by that XML schema. This functionality is especially useful when you must store XML documents object-relationally in the database using simple protocols like FTP or WebDAV instead of using SQL statements.</p>
</li>
<li>
<p>If the incoming XML document is not XML schema-based, then it is stored as a binary document.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="ADXDB5531" class="sect2"><a id="sthref1654"></a>
<h3 class="sect2">Event-Based <a id="sthref1655"></a>Logging</h3>
<p>In certain cases, it may be useful to log the requests received and responses sent by a protocol server. This can be achieved by setting event number <code>31098</code> to level <code>2</code>. To set this event, add the following line to your <code>init.ora</code> file and restart the database:</p>
<pre>
event="31098 trace name context forever, level 2"
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1026720"></a>
<div id="ADXDB5532" class="sect1">
<h2 class="sect1">Using <a id="sthref1656"></a><a id="sthref1657"></a>FTP and Oracle XML&nbsp;DB Protocol Server</h2>
<p>The following sections describe FTP features supported by Oracle XML&nbsp;DB.</p>
<div id="ADXDB5533" class="sect2"><a id="sthref1658"></a>
<h3 class="sect2">Oracle XML&nbsp;DB Protocol Server: FTP Features</h3>
<p>File Transfer Protocol (FTP) is one of the oldest and most popular protocols on the net. FTP is specified in RFC959 and provides access to heterogeneous file systems in a uniform manner. FTP works by providing well-defined commands (methods) for communication between the client and the server. The transfer of command messages and the return of status happens on a single connection. However, a new connection is opened between the client and the server for data transfer. With HTTP(S), commands and data are transferred using a single connection.</p>
<p>FTP is implemented by dedicated clients at the operating system level, file-system explorer clients, and browsers. FTP is typically session-oriented: a user session is created through an explicit logon, a number of files or directories are downloaded and browsed, and then the connection is closed.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For security reasons, FTP is <span class="italic">disabled</span>, by default. This is because the IETF FTP protocol specification requires that passwords be transmitted in clear text. Disabling is done by configuring the FTP server port as zero (0). To enable FTP, set the <code>ftp-port</code> parameter to the FTP port to use, such as 2100.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>RFC 959: FTP Protocol Specification &ndash; <code><a href="http://www.ietf.org/rfc/rfc959.txt">http://www.ietf.org/rfc/rfc959.txt</a></code></p>
</li>
<li>
<p><a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a> for information about configuring parameters</p>
</li>
</ul>
</div>
<div id="ADXDB5534" class="sect3"><a id="sthref1659"></a>
<h4 class="sect3">FTP Features That Are Not Supported</h4>
<p>Oracle XML&nbsp;DB implements FTP, as defined by RFC 959, with the <span class="italic">exception</span> of the following optional features:</p>
<ul>
<li>
<p>Record-oriented files, for example, only the <code>FILE</code> structure of the <code>STRU</code> method is supported. This is the most widely used structure for transfer of files. It is also the default specified by the specification. Structure mount is not supported.</p>
</li>
<li>
<p>Append.</p>
</li>
<li>
<p>Allocate. This pre-allocates space before file transfer.</p>
</li>
<li>
<p>Account. This uses the insecure Telnet protocol.</p>
</li>
<li>
<p>Abort.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="ADXDB5535" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1660"></a>
<h4 class="sect3">Supported FTP Client Methods</h4>
<p>For access to the repository, Oracle XML&nbsp;DB supports the following FTP client methods.</p>
<ul>
<li>
<p><code>cdup</code> &ndash; change working directory to parent directory</p>
</li>
<li>
<p><code>cwd</code> &ndash; change working directory</p>
</li>
<li>
<p><code>dele</code> &ndash; delete file (not directory)</p>
</li>
<li>
<p><code>list</code>, <code>nlst</code> &ndash; list files in working directory</p>
</li>
<li>
<p><code>mkd</code> &ndash; create directory</p>
</li>
<li>
<p><code>noop</code> &ndash; do nothing (but timeout counter on connection is reset)</p>
</li>
<li>
<p><code>pasv</code>, <code>port</code> &ndash; establish a TCP data connection</p>
</li>
<li>
<p><code>pwd</code> &ndash; get working directory</p>
</li>
<li>
<p><code>quit</code> &ndash; close connection and quit FTP session</p>
</li>
<li>
<p><code>retr</code> &ndash; retrieve data using an established connection</p>
</li>
<li>
<p><code>rmd</code> &ndash; remove directory</p>
</li>
<li>
<p><code>rnfr</code>, <code>rnto</code> &ndash; rename file (two-step process: from file, to file)</p>
</li>
<li>
<p><code>stor</code> &ndash; store data using an established connection</p>
</li>
<li>
<p><code>syst</code> &ndash; get system version</p>
</li>
<li>
<p><code>type</code> &ndash; change data type: <code>ascii</code> or <code>image</code> binary types only</p>
</li>
<li>
<p><code>user</code>, <code>pass</code> &ndash; user login</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CEGIDHCC">"FTP Quote Methods"</a> for supported FTP <code>quote</code> methods</p>
</li>
<li>
<p><a href="#CHDDBGHI">"Using FTP with Oracle ASM Files"</a> for an example of using FTP method <code>proxy</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CEGIDHCC"></a>
<div id="ADXDB5536" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">FTP Quote Methods</h4>
<p>Oracle Database supports several FTP <code>quote</code> methods, which provide information directly to Oracle XML&nbsp;DB.</p>
<ul>
<li>
<p><code><span class="codeinlinebold">rm_r</span></code> &ndash; Remove file or folder <code><span class="codeinlineitalic">&lt;resource_name&gt;</span></code>. If a folder, recursively remove all files and folders contained in <code><span class="codeinlineitalic">&lt;resource_name&gt;</span></code>.</p>
<pre>
quote rm_r <span class="codeinlineitalic">&lt;resource_name&gt;</span>

</pre></li>
<li>
<p><code><span class="codeinlinebold">rm_f</span></code> &ndash; Forcibly remove a resource.</p>
<pre>
quote rm_f <span class="codeinlineitalic">&lt;resource_name&gt;</span>

</pre></li>
<li>
<p><code><span class="codeinlinebold">rm_rf</span></code> &ndash; Combines <code>rm_r</code> and <code>rm_f</code>: Forcibly and recursively removes files and folders.</p>
<pre>
quote rm_rf <span class="codeinlineitalic">&lt;resource_name&gt;</span>

</pre></li>
<li>
<p><code><span class="codeinlinebold">set_nls_locale</span></code> &ndash; Specify the character-set encoding (<code><span class="codeinlineitalic">&lt;charset_name&gt;</span></code>) to be used for file and directory names in FTP methods (including names in method responses).</p>
<pre>
quote set_nls_locale {<span class="italic">&lt;charset_name&gt;</span> | NULL} 

</pre>
<p>Only IANA character-set names can be specified for <code><span class="codeinlineitalic">&lt;charset_name&gt;</span></code>. If <code>nls_locale</code> is set to <code>NULL</code> or is not set, then the database character set is used.</p>
</li>
<li>
<p><code><span class="codeinlinebold">set_charset</span></code> &ndash; Specify the character set of the data to be sent to the server.</p>
<pre>
quote set_charset  {<span class="codeinlineitalic">&lt;charset_name&gt;</span> | NULL}
</pre>
<p>The <code>set_charset</code> method applies to only <span class="italic">text</span> files, not binary files, as determined by the file-extension mapping to MIME types that is defined in configuration file <code>xdbconfig.xml</code>.</p>
<p>If the parameter provided to <code>set_charset</code> is <code><span class="codeinlineboldital">&lt;charset_name&gt;</span></code> (<span class="italic">not</span> <code>NULL</code>), then it specifies the character set of the data.</p>
<p>If the parameter provided to <code>set_charset</code> is <code>NULL</code>, or if no <code>set_charset</code> command is given, then the <span class="italic">MIME type</span> of the data determines the character set for the data.</p>
<ul>
<li>
<p>If the MIME type is <span class="italic">not</span> <code>text/xml</code>), then the data is not assumed to be XML. The database character set is used.</p>
</li>
<li>
<p>If the MIME type is <code><span class="codeinlinebold">text/xml</span></code>, then the data represents an XML document.</p>
<p>If a <span class="italic">byte order mark</span><a id="sthref1661" href="#sthref1661" onclick='footdisplay(1,"BOM is a Unicode-standard signature that indicates the order of the stream of bytes that follows it.")'><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a> (BOM) is present in the XML document, then it determines the character set of the data.</p>
<p>If there is <span class="italic">no</span> BOM, then:</p>
<ul>
<li>
<p>If there is an <span class="italic">encoding declaration</span> in the XML document, then it determines the character set of the data.</p>
</li>
<li>
<p>If there is <span class="italic">no</span> encoding declaration, then the UTF-8 character set is used.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDDBGHI"></a>
<div id="ADXDB5537" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Using FTP with <a id="sthref1662"></a>Oracle ASM Files</h4>
<p>Oracle Automatic Storage Management (Oracle ASM) organizes database files into disk groups for simplified management and added benefits such as database mirroring and I/O balancing. Database administrators can use protocols and resource APIs to access Oracle ASM files in the Oracle XML&nbsp;DB repository <span class="italic">virtual folder</span> <code>/sys/asm</code>. All files in <code>/sys/asm</code> are binary.</p>
<p>Typical uses are listing, copying, moving, creating, and deleting Oracle ASM files and folders. <a href="#CHDIEDDG">Example 28-1</a> is an example of navigating the Oracle ASM virtual folder and listing the files in a subfolder.</p>
<p>The structure of the Oracle ASM virtual folder, <code>/sys/asm</code>, is described in <a href="xdb16fol.htm#g1050290">Chapter 21, "Accessing Oracle XML&nbsp;DB Repository Data"</a>. In <a href="#CHDIEDDG">Example 28-1</a>, the disk groups are <code>DATA</code> and <code>RECOVERY</code>; the database name is <code>MFG</code>; and the directories created for aliases are <code>dbs</code> and <code>tmp</code>. This example navigates to a subfolder, lists its files, and copies a file to the local file system.</p>
<div id="ADXDB5538" class="example">
<p class="titleinexample"><a id="CHDIEDDG"></a>Example 28-1 Navigating Oracle ASM Folders</p>
<pre>
ftp&gt; open myhost 7777
ftp&gt; user system
Password required for SYSTEM
Password: <span class="italic">password</span>
ftp&gt; cd /sys/asm
ftp&gt; ls
DATA
RECOVERY
ftp&gt; cd DATA
ftp&gt; ls
dbs
MFG
ftp&gt; cd dbs
ftp&gt; ls
t_dbl.f
t_axl.f
ftp&gt; binary
ftp&gt; get t_dbl.f, t_axl.f
ftp&gt; put my_db2.f
</pre></div>
<!-- class="example" -->
<p>In <a href="#CHDIEDDG">Example 28-1</a>, after connecting to and logging onto database <code>myhost</code> (first four lines), FTP methods <code>cd</code> and <code>ls</code> are used to navigate and list folders, respectively. When in folder <code>/sys/asm/DATA/dbs</code>, FTP command <code>get</code> is used to copy files <code>t_db1.f</code> and <code>t_ax1.f</code> to the current folder of the local file system. Then, FTP command <code>put</code> is used to copy file <code>my_db2.f</code> from the local file system to folder <code>/sys/asm/DATA/dbs</code>.</p>
<p>Database administrators can copy Oracle Automatic Storage Management (Oracle ASM) files from <span class="italic">one database server to another</span> or between the database and a local file system. <a href="#CHDJCGGC">Example 28-2</a> shows copying between two databases. For this, the <code>proxy</code> FTP client method can be used, if available. The <code>proxy</code> method provides a <span class="italic">direct</span> connection to two different remote FTP servers.</p>
<p><a href="#CHDJCGGC">Example 28-2</a> copies an Oracle ASM file from one database to another. Terms with the suffix <code>1</code> correspond to database <code>server1</code>. Terms with the suffix <code>2</code> correspond to database <code>server2</code>. Note that, depending on your FTP client, the passwords you type might be echoed on your screen. Take the necessary precautions so that others do not see these passwords.</p>
<div id="ADXDB5539" class="example">
<p class="titleinexample"><a id="CHDJCGGC"></a>Example 28-2 Transferring Oracle ASM Files Between Databases with FTP proxy Method</p>
<pre>
 1 ftp&gt; open server1 port1
 2 ftp&gt; user username1
 3 Password required for USERNAME1
 4 Password: <span class="italic">password-for-username1</span>
 5 ftp&gt; cd /sys/asm/DATAFILE/MFG/DATAFILE
 6 ftp&gt; <span class="bold">proxy</span> open server2 port2
 7 ftp&gt; <span class="bold">proxy</span> user username2
 8 Password required for USERNAME2
 9 Password: <span class="italic">password-for-username2</span>
10 ftp&gt; <span class="bold">proxy</span> cd /sys/asm/DATAFILE/MFG/DATAFILE
11 ftp&gt; <span class="bold">proxy</span> put dbs2.f tmp1.f
12 ftp&gt; <span class="bold">proxy</span> get dbs1.f tmp2.f
</pre></div>
<!-- class="example" -->
<p>In <a href="#CHDJCGGC">Example 28-2</a>:</p>
<ul>
<li>
<p>Line 1 opens an FTP control connection to the Oracle XML&nbsp;DB FTP server, <code>server1</code>.</p>
</li>
<li>
<p>Lines 2&ndash;4 log the database administrator onto <code>server1</code> as <code>USERNAME1</code>.</p>
</li>
<li>
<p>Line 5 navigates to <code>/sys/asm/DATAFILE/MFG/DATAFILE</code> on <code>server1</code>.</p>
</li>
<li>
<p>Line 6 opens an FTP control connection to the second database server, <code>server2</code>. At this point, the FTP command <code>proxy&nbsp;?</code> could be issued to see the available FTP commands on the secondary connection. (This is not shown.)</p>
</li>
<li>
<p>Lines 7&ndash;9 log the database administrator onto <code>server2</code> as <code>USERNAME2</code>.</p>
</li>
<li>
<p>Line 10 navigates to <code>/sys/asm/DATAFILE/MFG/DATAFILE</code> on <code>server2</code>.</p>
</li>
<li>
<p>Line 11 copies Oracle ASM file <code>dbs2.f</code> from <code>server2</code> to Oracle ASM file <code>tmp1.f</code> on <code>server1</code>.</p>
</li>
<li>
<p>Line 12 copies Oracle ASM file <code>dbs1.f</code> from <code>server1</code> to Oracle ASM file <code>tmp2.f</code> on <code>server2</code>.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="ADXDB5540" class="sect3"><a id="sthref1663"></a>
<h4 class="sect3">Using FTP on the Standard Port Instead of the Oracle XML&nbsp;DB Default Port</h4>
<p>You can use the Oracle XML&nbsp;DB configuration file, <code>/xdbconfig.xml</code>, to configure FTP to listen on any port. By default, FTP listens on a nonstandard, unprotected port. To use FTP on the standard port, 21, your database administrator must do the following:</p>
<ol>
<li>
<p>(UNIX only) Use this shell command to ensure that the owner and group of executable file <code>tnslsnr</code> are <code>root</code>:</p>
<pre>
% chown root:root $ORACLE_HOME/bin/tnslsnr
</pre></li>
<li>
<p>(UNIX only) Add the following entry to the listener file, <code>listener.ora</code>, where <code><span class="codeinlineitalic">hostname</span></code> is your host name:</p>
<pre>
(DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP) (HOST = <span class="bolditalic">hostname</span>) (PORT = <span class="bold">21</span>))
  (PROTOCOL_STACK = (PRESENTATION = FTP) (SESSION = RAW)))
</pre></li>
<li id="CEGJAGJB">
<p>(UNIX only) Use shell command <code>id</code> to determine the <code><span class="codeinlineitalic">user_id</span></code> and <code><span class="codeinlineitalic">group_id</span></code> that were used to install Oracle Database. <code><span class="codeinlineitalic">oracle_installation_user</span></code> is the name of the user who installed the database.</p>
<pre>
% id <span class="italic">oracle_installation_user</span>
uid=<span class="bolditalic">user_id</span>(<span class="italic">oracle_installation_user</span>) gid=<span class="bolditalic">group_id</span>(dba)
</pre></li>
<li>
<p>(UNIX only) Stop, then restart the listener, using the following shell commands, where <code><span class="codeinlineitalic">user_id</span></code> and <code><span class="codeinlineitalic">group_id</span></code> are the UNIX user and group identifiers obtained in step <a href="#CEGJAGJB">3</a>.</p>
<pre>
% lsnrctl stop
% tnslsnr LISTENER -user <span class="bolditalic">user_id</span> -group <span class="bolditalic">group_id</span> &amp;
</pre>
<p>Use the ampersand (<code>&amp;</code>), to execute the second command in the background. Do not use <code>lsnrctl start</code> to start the listener.</p>
</li>
<li>
<p>Use PL/SQL procedure <code>DBMS_XDB.setftpport</code> with <code>SYS as SYSDBA</code> to set the FTP port number to 21 in the Oracle XML&nbsp;DB configuration file <code>/xdbconfig.xml</code>.</p>
<pre>
SQL&gt; exec DBMS_XDB.setFTPPort(<span class="bold">21</span>);
</pre></li>
<li>
<p>Force the database to reregister with the listener, using this SQL statement:</p>
<pre>
SQL&gt; ALTER SYSTEM REGISTER;
</pre></li>
<li>
<p>Check that the listener is correctly configured, using this shell command:</p>
<pre>
% lsnrctl status
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NETRF008" href="../../network.112/e10835/listener.htm#NETRF008"><span class="italic">Oracle Database Net Services Reference</span></a> for information about listener parameters and file <code>listener.ora</code></p>
</li>
<li>
<p><a class="olink NETRF004" href="../../network.112/e10835/protocoladd.htm#NETRF004"><span class="italic">Oracle Database Net Services Reference</span></a>, section "Port Number Limitations" for information about running on privileged ports</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5541" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1664"></a>
<h4 class="sect3">Using IPv6 IP Addresses with FTP</h4>
<p>Starting with 11g Release 2 (11.2), Oracle Database supports the use of Internet Protocol Version 6, <a id="sthref1665"></a><a id="sthref1666"></a>IPv6 (in addition to Internet Protocol Version 4). <a href="#BHCFCAJI">Example 28-3</a> shows how to make an FTP connection with the IPv6 address <code>2001::0db8:ffff:ffff:ffff</code>.</p>
<div id="ADXDB5542" class="example">
<p class="titleinexample"><a id="BHCFCAJI"></a>Example 28-3 FTP Connection Using IPv6</p>
<pre>
ftp&gt; open <span class="bold">2001::0db8:ffff:ffff:ffff</span> 1521
Connected to 2001::0db8:ffff:ffff:ffff.
220- xmlhost.example.com
Unauthorized use of this FTP server is prohibited and may be subject to civil and criminal prosecution.
220- xmlhost.example.com FTP server (Oracle XML DB/Oracle Database) ready.
User (2001::0db8:ffff:ffff:ffff:(none)): <span class="italic">username</span>
331 pass required for <span class="italic">USERNAME</span>
Password: <span class="italic">password-for-username</span>
230 <span class="italic">USERNAME</span> logged in
ftp&gt;
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG999" href="../../network.112/e41945/layers.htm#NETAG999"><span class="italic">Oracle Database Net Services Reference</span></a> for information about IPv6</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5543" class="sect3"><a id="sthref1667"></a>
<h4 class="sect3">FTP Server Session Management</h4>
<p>Oracle XML&nbsp;DB protocol server also provides session management for this protocol. After a short wait for a new command, FTP returns to the protocol layer and the shared server is freed up to serve other connections. The duration of this short wait is configurable by changing parameter <code>call-timeout</code> in the Oracle XML&nbsp;DB configuration file. For high traffic sites, <code>call-timeout</code> should be shorter, so that more connections can be served. When new data arrives on the connection, the FTP server is re-invoked with fresh data. So, the long running nature of FTP does not affect the number of connections which can be made to the protocol server.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a> for information about configuring Oracle XML&nbsp;DB parameters</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5544" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1668"></a>
<h4 class="sect3">Handling Error 421. Modifying the Default Timeout Value of an FTP Session</h4>
<p>If you are frequently disconnected from the server and must reconnect and traverse the entire directory before doing the next operation, you may need to modify the default timeout value for FTP sessions. If the session is idle for more than this period, it gets disconnected. You can increase the timeout value (default = 6000 centiseconds) by modifying the configuration document as follows and then restart the database:</p>
<div id="ADXDB5545" class="example">
<p class="titleinexample"><a id="sthref1669"></a>Example 28-4 Modifying the Default Timeout Value of an FTP Session</p>
<pre>
DECLARE
  newconfig XMLType;
BEGIN
  SELECT 
    updateXML(
      DBMS_XDB.cfg_get(),
      '/xdbconfig/sysconfig/protocolconfig/ftpconfig/session-timeout/text()',
      123456789) 
    INTO newconfig 
    FROM DUAL;
  DBMS_XDB.cfg_update(newconfig);
END;/
COMMIT;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<div id="ADXDB5546" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1670"></a>
<h4 class="sect3">FTP Client Failure in Passive Mode</h4>
<p>Do not use FTP in <span class="italic">passive mode</span> to connect remotely to a server that has <code>HOSTNAME</code> configured in <code>listener.ora</code> as <code>localhost</code> or <code>127.0.0.1</code>. If the <code>HOSTNAME</code> specified in server file <code>listener.ora</code> is <code>localhost</code> or <code>127.0.0.1</code>, then the server is configured for <span class="italic">local use only</span>. If you try to connect remotely to the server using FTP in passive mode, the FTP client fails. This is because the server passes IP address <code>127.0.0.1</code> (derived from <code>HOSTNAME</code>) to the client, which makes the client try to connect to itself, not to the server.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1026724"></a>
<div id="ADXDB5547" class="sect1">
<h2 class="sect1">Using HTTP(S) and Oracle XML&nbsp;DB <a id="sthref1671"></a><a id="sthref1672"></a>Protocol Server</h2>
<p>Oracle XML&nbsp;DB implements HyperText Transfer Protocol (HTTP), HTTP 1.1 as defined in the RFC2616 specification.</p>
<div id="ADXDB5548" class="sect2"><a id="sthref1673"></a>
<h3 class="sect2">Oracle XML&nbsp;DB Protocol Server: HTTP(S) Features</h3>
<p>The Oracle XML&nbsp;DB HTTP(S) component in the Oracle XML&nbsp;DB protocol server implements the RFC2616 specification with the <span class="italic">exception</span> of the following optional features:</p>
<ul>
<li>
<p><code>gzip</code> and compress transfer encodings</p>
</li>
<li>
<p>byte-range headers</p>
</li>
<li>
<p>The <code>TRACE</code> method (used for proxy error debugging)</p>
</li>
<li>
<p>Cache-control directives (these require you to specify expiration dates for content, and are not generally used)</p>
</li>
<li>
<p>TE, Trailer, Vary &amp; Warning headers</p>
</li>
<li>
<p>Weak entity tags</p>
</li>
<li>
<p>Web common log format</p>
</li>
<li>
<p>Multi-homed Web server</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
RFC 2616: HTTP 1.1 Protocol Specification&mdash;<code><a href="http://www.ietf.org/rfc/rfc2616.txt">http://www.ietf.org/rfc/rfc2616.txt</a></code></div>
</li>
</ul>
<div id="ADXDB5549" class="sect3"><a id="sthref1674"></a>
<h4 class="sect3">HTTP(S) Features That Are Not Supported</h4>
<p>Digest Authentication (RFC 2617) is <span class="italic">not</span> supported. Oracle XML&nbsp;DB supports Basic Authentication, where a client sends the user name and password in clear text in the Authorization header.</p>
</div>
<!-- class="sect3" -->
<a id="CHDBFFFH"></a>
<div id="ADXDB5550" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Supported HTTP(S) Client Methods</h4>
<p>For access to the repository, Oracle XML&nbsp;DB supports the following HTTP(S) client methods.</p>
<ul>
<li>
<p><code>OPTIONS</code> &ndash; get information about available communication options</p>
</li>
<li>
<p><code>GET</code> &ndash; get document/data (including headers)</p>
</li>
<li>
<p><code>HEAD</code> &ndash; get headers only, without document body</p>
</li>
<li>
<p><code>PUT</code> &ndash; store data in resource</p>
</li>
<li>
<p><code>DELETE</code> &ndash; delete resource</p>
</li>
</ul>
<p>The semantics of these HTTP(S) methods is in accordance with WebDAV. Servlets and Web services may support additional HTTP(S) methods, such as <code>POST</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCEEFA">"Supported WebDAV Client Methods"</a> for supported HTTP(S) client methods involving WebDAV</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5551" class="sect3"><a id="sthref1675"></a>
<h4 class="sect3">Using HTTP(S) on a Standard Port Instead of an Oracle XML&nbsp;DB Default Port</h4>
<p>You can use the Oracle XML&nbsp;DB configuration file, <code>/xdbconfig.xml</code>, to configure HTTP(S) to listen on any port. By default, HTTP(S) listens on a nonstandard, unprotected port. To use HTTP or HTTPS on a standard port (80 for HTTP, 443 for HTTPS), your database administrator must do the following:</p>
<ol>
<li>
<p>(UNIX only) Use this shell command to ensure that the owner and group of executable file <code>tnslsnr</code> are <code>root</code>:</p>
<pre>
% chown root:root $ORACLE_HOME/bin/tnslsnr
</pre></li>
<li>
<p>(UNIX only) Add the following entry to the listener file, <code>listener.ora</code>, where <code><span class="codeinlineitalic">hostname</span></code> is your host name, and <code><span class="codeinlineitalic">port_number</span></code> is <code>80</code> for HTTP or <code>443</code> for HTTPS:</p>
<pre>
(DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP) (HOST = <span class="bolditalic">hostname</span>) (PORT = <span class="bolditalic">port_number</span>))
  (PROTOCOL_STACK = (PRESENTATION = HTTP) (SESSION = RAW)))
</pre></li>
<li id="CEGJDBJD">
<p>(UNIX only) Use shell command <code>id</code> to determine the <code><span class="codeinlineitalic">user_id</span></code> and <code><span class="codeinlineitalic">group_id</span></code> that were used to install Oracle Database. <code><span class="codeinlineitalic">oracle_installation_user</span></code> is the name of the user who installed the database.</p>
<pre>
% id <span class="italic">oracle_installation_user</span>
uid=<span class="bolditalic">user_id</span>(<span class="italic">oracle_installation_user</span>) gid=<span class="bolditalic">group_id</span>(dba)
</pre></li>
<li>
<p>(UNIX only) Stop, then restart the listener, using the following shell commands, where <code><span class="codeinlineitalic">user_id</span></code> and <code><span class="codeinlineitalic">group_id</span></code> are the UNIX user and group identifiers obtained in step <a href="#CEGJDBJD">3</a>.</p>
<pre>
% lsnrctl stop
% tnslsnr LISTENER -user <span class="bolditalic">user_id</span> -group <span class="bolditalic">group_id</span> &amp;
</pre>
<p>Use the ampersand (<code>&amp;</code>), to execute the second command in the background. Do not use <code>lsnrctl start</code> to start the listener.</p>
</li>
<li>
<p>Use PL/SQL procedure <code>DBMS_XDB.sethtpport</code> with <code>SYS as SYSDBA</code> to set the HTTP(S) port number to <code><span class="codeinlineitalic">port_number</span></code> in the Oracle XML&nbsp;DB configuration file <code>/xdbconfig.xml</code>, where <code><span class="codeinlineitalic">port_number</span></code> is <code>80</code> for HTTP or <code>443</code> for HTTPS:</p>
<pre>
<span class="italic">SQL&gt;</span> exec DBMS_XDB.setHTTPPort(<span class="bolditalic">port_number</span>);
</pre></li>
<li>
<p>Force the database to reregister with the listener, using this SQL statement:</p>
<pre>
<span class="italic">SQL&gt;</span> ALTER SYSTEM REGISTER;
</pre></li>
<li>
<p>Check that the listener is correctly configured:</p>
<pre>
% lsnrctl status
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NETRF008" href="../../network.112/e10835/listener.htm#NETRF008"><span class="italic">Oracle Database Net Services Reference</span></a> for information about listener parameters and file <code>listener.ora</code></p>
</li>
<li>
<p><a class="olink NETRF004" href="../../network.112/e10835/protocoladd.htm#NETRF004"><span class="italic">Oracle Database Net Services Reference</span></a>, section "Port Number Limitations" for information about running on privileged ports</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5552" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1676"></a>
<h4 class="sect3">Using IPv6 IP Addresses with HTTP(S)</h4>
<p>Starting with 11g Release 2 (11.2), Oracle Database supports the use of Internet Protocol Version 6, <a id="sthref1677"></a><a id="sthref1678"></a>IPv6 (in addition to Internet Protocol Version 4). IPv6 addresses in URLs are enclosed in brackets (<code>[]</code>). Here is an example:</p>
<pre>
http://[2001::0db8:ffff:ffff:ffff]:8080/
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG999" href="../../network.112/e41945/layers.htm#NETAG999"><span class="italic">Oracle Database Net Services Reference</span></a> for information about IPv6</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5553" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1679"></a>
<h4 class="sect3">HTTPS: Support for Secure HTTP</h4>
<p>If properly configured, you can access Oracle XML&nbsp;DB Repository in a <span class="italic">secure</span> fashion, using HTTPS. See <a href="#CHDCAHDH">"Configuring Secure HTTP (HTTPS)"</a> for configuration information.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If Oracle Database is installed on Microsoft Windows XP with <span class="italic">Service Pack 2</span> (SP2), then you must use HTTPS for WebDAV access to Oracle XML&nbsp;DB Repository, or else you must make appropriate modifications to the Windows XP Registry. For information about the latter, see <code><a href="http://www.microsoft.com/technet/prodtechnol/winxppro/maintain/sp2netwk.mspx#XSLTsection129121120120">http://www.microsoft.com/technet/prodtechnol/winxppro/maintain/sp2netwk.mspx#XSLTsection129121120120</a></code></div>
</div>
<!-- class="sect3" -->
<a id="BHCHGBHD"></a>
<div id="ADXDB5940" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Controlling URL Expiration Time</h4>
<p>Optional configuration parameter <code>expire</code> specifies an HTTP <code>Expires</code> header. This header acts as a directive to the HTTP client, to specify the expiration date and time for a URL.</p>
<p>If cached, the document targeted by a URL can be fetched from the client cache rather than from the server, until this expiration time has passed. After that time, the cache copy is out-of-date and a new copy must be obtained from the source (server).</p>
<p>The Oracle XML&nbsp;DB syntax for the <code>Expires</code> header, which is used in the <code>expire</code> configuration element, is a subset of the so-called alternate syntax defined for the <code>ExpiresDefault</code> directive of the Apache module <code>mod_expires</code>. See <code><a href="http://httpd.apache.org/docs/2.0/mod/mod_expires.html#AltSyn">http://httpd.apache.org/docs/2.0/mod/mod_expires.html#AltSyn</a></code> for that syntax.</p>
<p>These are the Oracle XML&nbsp;DB restrictions to the <code>ExpiresDefault</code> syntax:</p>
<ul>
<li>
<p>You cannot use <code>access</code> as the <code>&lt;base&gt;</code>. Only <code>now</code> and <code>modification</code> are allowed.</p>
</li>
<li>
<p>The <code>&lt;type&gt;</code> values must appear in order of decreasing time period. For example, <code>year</code> must appear before, not after, <code>month</code>, since a year is a longer time period than a month.</p>
</li>
<li>
<p>You can use at most one occurrence of each of the different <code>&lt;type&gt;</code> values. For example, you cannot have multiple <code>year</code> entries or multiple <code>day</code> entries.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDHAGBF"></a>
<div id="ADXDB5554" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Anonymous Access to Oracle XML&nbsp;DB Repository using HTTP</h4>
<p>Optional configuration parameter <code>allow-repository-anonymous-access</code> controls whether or not anonymous HTTP access to Oracle XML&nbsp;DB Repository data is allowed using an unlocked <code>ANONYMOUS</code> user account. The default value is <code>false</code>, meaning that unauthenticated access to repository data is <span class="italic">blocked</span>. To allow anonymous HTTP access to the repository, you must set this parameter to <code>true</code>, and unlock the <code>ANONYMOUS</code> user account.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
There is an inherent <span class="italic">security risk</span> associated with allowing anonymous access to the repository.</div>
<p>Parameter <code>allow-repository-anonymous-access</code> does <span class="italic">not</span> control anonymous access to the repository using <span class="italic">servlets</span>. Each servlet has its own <code>security-role-ref</code> parameter value to control its access.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#g1029959">Table 28-3</a> for information about parameter <code>allow-repository-anonymous-access</code></p>
</li>
<li>
<p><a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a> for information about configuring Oracle XML&nbsp;DB parameters</p>
</li>
<li>
<p><a href="xdb23jv1.htm#i1043684">"Configuring Oracle XML&nbsp;DB Servlets"</a> for information about parameter <code>security-role-ref</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5555" class="sect3"><a id="sthref1680"></a>
<h4 class="sect3">Using Java Servlets with HTTP(S)</h4>
<p>Oracle XML&nbsp;DB supports Java servlets. To use a Java servlet, it must be registered with a unique name in the Oracle XML&nbsp;DB configuration file, along with parameters to customize its action. It should be compiled, and loaded into the database. Finally, the servlet name must be associated with a pattern, which can be an extension such as <code>*.jsp</code> or a path name such as <code>/a/b/c</code> or <code>/sys/*</code>, as described in Java servlet application program interface (API) version 2.2.</p>
<p>While processing an HTTP(S) request, the path name for the request is matched with the registered patterns. If there is a match, then the protocol server invokes the corresponding servlet with the appropriate initialization parameters. For Java servlets, the existing Java Virtual Machine (JVM) infrastructure is used. This starts the JVM if need be, which in turn invokes a Java method to initialize the servlet, create response, and request objects, pass these on to the servlet, and run it.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb23jv1.htm#g1050187">Chapter 32, "Writing Oracle XML&nbsp;DB Applications in Java"</a></div>
</div>
<!-- class="sect3" -->
<a id="CHDDJFCE"></a>
<div id="ADXDB5556" class="sect3">
<h4 class="sect3">Embedded PL/SQL Gateway</h4>
<p>You can use the PL/SQL gateway to implement a Web application entirely in PL/SQL. There are two implementations of the PL/SQL gateway:</p>
<ul>
<li>
<p><span class="italic">mod_plsql</span> &ndash; a plug-in of <span class="italic">Oracle HTTP Server</span> that lets you invoke PL/SQL stored procedures using HTTP(S). Oracle HTTP Server is a component of both Oracle Application Server and Oracle Database. Do not confuse Oracle HTTP Server with the HTTP component of the Oracle XML&nbsp;DB protocol server.</p>
</li>
<li>
<p>the <span class="italic">embedded</span> PL/SQL gateway &ndash; a gateway implementation that runs in the Oracle XML&nbsp;DB HTTP listener.</p>
</li>
</ul>
<p>With the PL/SQL gateway (either implementation), a Web browser sends an HTTP(S) request in the form of a URL that identifies a stored procedure and provides it with parameter values. The gateway translates the URL, calls the stored procedure with the parameter values, and returns output (typically HTML) to the Web-browser client.</p>
<p>Using the embedded PL/SQL gateway simplifies installation, configuration, and administration of PL/SQL based Web applications. The embedded gateway uses the Oracle XML&nbsp;DB protocol server, not Oracle HTTP Server. Its configuration is defined by the Oracle XML&nbsp;DB configuration file, <code>/xdbconfig.xml</code>. However, the <span class="italic">recommended</span> way to configure the embedded gateway is to use the procedures in PL/SQL package <code>DBMS_EPG</code>, <span class="italic">not</span> to edit file <code>/xdbconfig.xml</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADFNS015" href="../../appdev.112/e41502/adfns_web.htm#ADFNS015"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for information on using and configuring the embedded PL/SQL gateway</p>
</li>
<li>
<p><a href="appaman.htm#g645751">Chapter 34, "Administering Oracle XML&nbsp;DB"</a> for information on the configuration definition of the embedded gateway in <code>/xdbconfig.xml</code></p>
</li>
<li>
<p><a class="olink HSADM003" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=HSADM003"><span class="italic">Oracle Fusion Middleware Administrator's Guide for Oracle HTTP Server</span></a> for conceptual information about using the PL/SQL gateway</p>
</li>
<li>
<p><a class="olink YPMOD" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=YPMOD"><span class="italic">Oracle HTTP Server mod_plsql User's Guide</span></a> for information about mod_plsql</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5557" class="sect3"><a id="sthref1681"></a>
<h4 class="sect3">Sending Multibyte Data From a Client</h4>
<p>When a client sends multibyte data in a URL, RFC 2718 specifies that the client should send the URL using the <code>%</code><code><span class="codeinlineitalic">HH</span></code> format, where <code><span class="codeinlineitalic">HH</span></code> is the hexadecimal notation of the byte value in UTF-8 encoding. The following are URL examples that can be sent to Oracle XML&nbsp;DB in an HTTP(S) or WebDAV context:</p>
<pre>
http://urltest/xyz%E3%81%82%E3%82%A2 
http://%E3%81%82%E3%82%A2 
http://%E3%81%82%E3%82%A2/abc%E3%81%86%E3%83%8F.xml
</pre>
<p>Oracle XML&nbsp;DB processes the requested URL, any URLs within an <code>IF</code> header, any URLs within the <code>DESTINATION</code> header, and any URLs in the <code>REFERRED</code> header that contains multibyte data.</p>
<p>The <code>default-url-charset</code> configuration parameter can be used to accept requests from some clients that use other, nonconforming, forms of URL, with characters that are not ASCII. If a request with such characters fails, try setting this value to the native character set of the client environment. The character set used in such URL fields must be specified with an IANA charset name.</p>
<p><code>default-url-charset</code> controls the encoding for nonconforming URLs. It is not required to be set unless a nonconforming client that does not send the <code>Content-Type</code> charset is used.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>RFC 2616: HTTP 1.1 Protocol Specification, <code><a href="http://www.ietf.org/rfc/rfc2616.txt">http://www.ietf.org/rfc/rfc2616.txt</a></code></p>
</li>
<li>
<p><a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a> for information about configuring Oracle XML&nbsp;DB parameters</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5558" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1682"></a>
<h4 class="sect3">Characters That Are Not ASCII in URLs</h4>
<p>Characters that are not ASCII that appear in URLs passed to an HTTP server should be converted to <code>UTF-8</code> and escaped in the <code>%</code><code><span class="codeinlineitalic">HH</span></code> format, where <code><span class="codeinlineitalic">HH</span></code> is the hexadecimal notation of the byte value. For flexibility, the Oracle XML&nbsp;DB protocol server interprets the incoming URLs by testing whether it is encoded in one of the following character sets in the order presented here:</p>
<ul>
<li>
<p>UTF-8</p>
</li>
<li>
<p>Charset parameter of the <code>Content-Type</code> field of the request, if specified</p>
</li>
<li>
<p>Character set, if specified, in the <code>default-url-charset</code> configuration parameter</p>
</li>
<li>
<p>Character set of the database</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appaman.htm#i641205">"Configuring Oracle XML&nbsp;DB using xdbconfig.xml"</a> for information about configuring Oracle XML&nbsp;DB parameters</div>
</div>
<!-- class="sect3" -->
<a id="CEGBABDI"></a>
<div id="ADXDB5559" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Controlling Character Sets for HTTP(S)</h4>
<p>The following sections describe how character sets are controlled for data transferred using HTTP(S).</p>
<div id="ADXDB5560" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1683"></a>
<h5 class="sect4">Request Character Set</h5>
<p>The character set of the HTTP(S) request body is determined with the following algorithm:</p>
<ul>
<li>
<p>The Content-Type header is evaluated. If the Content-Type header specifies a charset value, the specified charset is used.</p>
</li>
<li>
<p>The MIME type of the document is evaluated as follows:</p>
<ul>
<li>
<p>If the MIME type is "<code>*/xml</code>", the character set is determined as follows:</p>
<p>- If a BOM is present, then <code>UTF-16</code> is used.</p>
<p>- If an encoding declaration is present, the specified encoding is used.</p>
<p>- If neither a BOM nor an encoding declaration is present, <code>UTF-8</code> is used.</p>
</li>
<li>
<p>If the MIME type is text, <code>ISO8859-1</code> is used.</p>
</li>
<li>
<p>If the MIME type is neither "<code>*/xml</code>" nor <code>text</code>, the database character set is used.</p>
</li>
</ul>
</li>
</ul>
<p>There is a difference between HTTP(S) and SQL or FTP. For text documents, the default is ISO8859-1, as specified by the IETF.org <span class="italic">RFC 2616: HTTP 1.1 Protocol Specification</span>.</p>
</div>
<!-- class="sect4" -->
<div id="ADXDB5561" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1684"></a>
<h5 class="sect4">Response Character Set</h5>
<p>The response generated by Oracle XML&nbsp;DB HTTP Server is in the character set specified in the <code>Accept-Charset</code> field of the request. <code>Accept-Charset</code> can have a list of character sets. Based on the q-value, Oracle XML&nbsp;DB chooses one that does not require conversion. This might not necessarily be the charset with the highest q-value. If Oracle XML&nbsp;DB cannot find one, then the conversion is based on the highest q-value.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1026728"></a>
<div id="ADXDB5562" class="sect1">
<h2 class="sect1">Using <a id="sthref1685"></a><a id="sthref1686"></a>WebDAV and Oracle XML&nbsp;DB</h2>
<p>Web Distributed Authoring and Versioning (WebDAV) is an IETF standard protocol used to provide users with a file-system interface to Oracle XML Repository over the Internet. The most popular way of accessing a WebDAV server folder is through WebFolders using Microsoft Windows.</p>
<p>WebDAV is an extension to the HTTP 1.1 protocol that lets an HTTP server act as a file server. It lets clients perform remote Web content authoring through a coherent set of methods, headers, request body formats and response body formats. For example, a DAV-enabled editor can interact with an HTTP/WebDAV server as if it were a file system. WebDAV provides operations to store and retrieve resources, create and list contents of resource collections, lock resources for concurrent access in a coordinated manner, and to set and retrieve resource properties.</p>
<div id="ADXDB5563" class="sect2"><a id="sthref1687"></a>
<h3 class="sect2">Oracle XML&nbsp;DB WebDAV Features</h3>
<p>Oracle XML&nbsp;DB supports the following WebDAV features:</p>
<ul>
<li>
<p>Foldering, specified by RFC2518</p>
</li>
<li>
<p>Access Control</p>
</li>
</ul>
<p>WebDAV is a set of extensions to the HTTP(S) protocol that allow you to edit or manage your files on remote Web servers. WebDAV can also be used, for example, to:</p>
<ul>
<li>
<p>Share documents over the Internet</p>
</li>
<li>
<p>Edit content over the Internet</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
RFC 2518: WebDAV Protocol Specification, <code><a href="http://www.ietf.org/rfc/rfc2518.txt">http://www.ietf.org/rfc/rfc2518.txt</a></code></div>
</li>
</ul>
<div id="ADXDB5564" class="sect3"><a id="sthref1688"></a>
<h4 class="sect3">WebDAV Features That Are Not Supported</h4>
<p>Oracle XML&nbsp;DB supports the contents of RFC2518, with the following exceptions:</p>
<ul>
<li>
<p>Lock-<code>NULL</code> resources create zero-length resources in the file system, and cannot be converted to folders.</p>
</li>
<li>
<p>Methods <code>COPY</code>, <code>MOVE</code> and <code>DELETE</code> comply with section 2 of the Internet Draft titled 'Binding Extensions to WebDAV'.</p>
</li>
<li>
<p>Depth-infinity locks</p>
</li>
<li>
<p>Only Basic Authentication is supported.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDCEEFA"></a>
<div id="ADXDB5565" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Supported WebDAV Client Methods</h4>
<p>For access to the repository, Oracle XML&nbsp;DB supports the following HTTP(S)/WebDAV client methods.</p>
<ul>
<li>
<p><code>PROPFIND</code> (WebDAV-specific) &ndash; get properties for a resource</p>
</li>
<li>
<p><code>PROPPATCH</code> (WebDAV-specific) &ndash; set or remove resource properties</p>
</li>
<li>
<p><code>LOCK</code> (WebDAV-specific) &ndash; lock a resource (create or refresh a lock)</p>
</li>
<li>
<p><code>UNLOCK</code> (WebDAV-specific) &ndash; unlock a resource (remove a lock)</p>
</li>
<li>
<p><code>COPY</code> (WebDAV-specific) &ndash; copy a resource</p>
</li>
<li>
<p><code>MOVE</code> (WebDAV-specific) &ndash; move a resource</p>
</li>
<li>
<p><code>MKCOL</code> (WebDAV-specific) &ndash; create a folder resource (collection)</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBFFFH">"Supported HTTP(S) Client Methods"</a> for additional supported HTTP(S) client methods</p>
</li>
<li>
<p><a href="xdb21sec.htm#CHDDHFAD">"Privileges"</a> for information about WebDAV privileges</p>
</li>
<li>
<p><a href="xdb_repos_meta.htm#CIAGCCIJ">"Adding Metadata using WebDAV PROPPATCH"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="ADXDB5566" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1689"></a>
<h3 class="sect2">Using WebDAV with Microsoft Windows XP SP2</h3>
<p>If Oracle Database is installed on Microsoft Windows XP with <span class="italic">Service Pack 2</span> (SP2), then you must use a secure connection (HTTPS) for WebDAV access to Oracle XML&nbsp;DB Repository, or else you must make appropriate modifications to the Windows XP Registry.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><code><a href="http://www.microsoft.com/technet/prodtechnol/winxppro/maintain/sp2netwk.mspx#XSLTsection129121120120">http://www.microsoft.com/technet/prodtechnol/winxppro/maintain/sp2netwk.mspx#XSLTsection129121120120</a></code> for information about making necessary modifications to the Windows XP registry</p>
</li>
<li>
<p><a href="#CHDCAHDH">"Configuring Secure HTTP (HTTPS)"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<div id="ADXDB5567" class="sect2"><a id="sthref1690"></a>
<h3 class="sect2">Creating a <a id="sthref1691"></a>WebFolder in Microsoft Windows using Oracle XML&nbsp;DB and WebDAV</h3>
<p>To create a WebFolder in Windows 2000, follow these steps:</p>
<ol>
<li>
<p><span class="bold">Start</span> &gt; <span class="bold">My Network Places</span>.</p>
</li>
<li>
<p>Double-click <span class="bold">Add Network Place</span>.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Type the location of the folder, for example:</p>
<pre>
http://<span class="italic">Oracle_server_name</span>:<span class="italic">HTTP_port_number</span>
</pre>
<p>See <a href="#i1027829">Figure 28-2</a>.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Enter any name to identify this WebFolder</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p>You can access Oracle XML&nbsp;DB Repository the same way that you access any Windows folder.</p>
<div id="ADXDB5568" class="figure">
<p class="titleinfigure"><a id="i1027829"></a>Figure 28-2 Creating a WebFolder in Microsoft Windows</p>
<img width="447" height="322" src="img/webfolder.jpg" alt="Description of Figure 28-2 follows" /><br />
<a id="sthref1692" href="img_text/webfolder.htm">Description of "Figure 28-2 Creating a WebFolder in Microsoft Windows"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" -->
<hr />
<br />
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:&nbsp;BOM is a Unicode-standard signature that indicates the order of the stream of bytes that follows it.<br /></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1019">
<tr>
<td class="cellalignment1028">
<table class="cellalignment1024">
<tr>
<td class="cellalignment1023"><a href="xdb21sec.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1023"><a href="xdb_repos_meta.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1030">
<table class="cellalignment1022">
<tr>
<td class="cellalignment1023"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1023"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1023"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1023"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1023"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1023"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
</body>
</html>
