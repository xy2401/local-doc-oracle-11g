<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Writing Oracle XML&nbsp;DB Applications in Java</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748" />
<meta name="description" content="This manual describes Oracle XML&nbsp;DB. It includes guidelines and examples for storing, generating, accessing, searching, validating, transforming, evolving, and indexing XML data in Oracle Database." />
<meta name="dcterms.created" content="2014-02-20T9:56:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="XML DB Developer's Guide" />
<meta name="dcterms.identifier" content="E23094-04" />
<meta name="dcterms.isVersionOf" content="ADXDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="xdb_jcr.htm" title="Previous" type="text/html" />
<link rel="Next" href="xdb_web_services.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23094.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">44/54</span> <!-- End Header -->
<div id="ADXDB2600" class="chapter"><a id="g1050187"></a>
<h1 class="chapter"><span class="secnum">32</span> Writing Oracle XML&nbsp;DB Applications in Java</h1>
<p>This chapter describes how to write Oracle XML&nbsp;DB applications in Java. It includes design guidelines for writing Java applications including servlets, and how to configure the Oracle XML&nbsp;DB servlets.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#i1043708">Overview of Oracle XML&nbsp;DB Java Applications</a></p>
</li>
<li>
<p><a href="#i1045392">Design Guidelines: Java Inside or Outside the Database?</a></p>
</li>
<li>
<p><a href="#i1043680">Writing Oracle XML&nbsp;DB HTTP Servlets in Java</a></p>
</li>
<li>
<p><a href="#i1043684">Configuring Oracle XML&nbsp;DB Servlets</a></p>
</li>
<li>
<p><a href="#i1043688">HTTP Request Processing for Oracle XML&nbsp;DB Servlets</a></p>
</li>
<li>
<p><a href="#i1043695">Session Pool and Oracle XML&nbsp;DB Servlets</a></p>
</li>
<li>
<p><a href="#i1043699">Native XML Stream Support</a></p>
</li>
<li>
<p><a href="#i1043703">Oracle XML&nbsp;DB Servlet APIs</a></p>
</li>
<li>
<p><a href="#i1045379">Oracle XML&nbsp;DB Servlet Example</a></p>
</li>
</ul>
<a id="i1043708"></a>
<div id="ADXDB5659" class="sect1">
<h2 class="sect1">Overview of <a id="sthref1807"></a>Oracle XML&nbsp;DB <a id="sthref1808"></a>Java Applications</h2>
<p>You can use Java code in these ways:</p>
<ul>
<li>
<p>In the database using the Java Virtual Machine (VM).</p>
</li>
<li>
<p>In a client or application server, using the OCI driver for JDBC.</p>
</li>
</ul>
<p>Because Java runs in the database in the context of the database server process, the ways you can deploy and run Java code are restricted to the following:</p>
<ul>
<li>
<p>You can run Java code as a stored procedure invoked from SQL or PL/SQL.</p>
</li>
<li>
<p>You can run a Java servlet.</p>
</li>
</ul>
<p>Stored procedures are easier to integrate with SQL and PL/SQL code. They require Oracle Net Services as the protocol to access Oracle Database.</p>
<p>Servlets work better as the top-level entry point into Oracle Database, and require using HTTP(S) as the protocol to access Oracle Database.</p>
<div id="ADXDB5660" class="sect2"><a id="sthref1809"></a>
<h3 class="sect2">Which Oracle XML&nbsp;DB APIs Are Available Inside and Outside the Database?</h3>
<p>All Oracle XML&nbsp;DB application program interfaces (APIs) are available to applications running both in the server and outside the database, including:</p>
<ul>
<li>
<p>JDBC support for <code>XMLType</code></p>
</li>
<li>
<p><code>XMLType</code> class</p>
</li>
<li>
<p>Java DOM implementation</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1045392"></a>
<div id="ADXDB5661" class="sect1">
<h2 class="sect1">Design Guidelines: Java Inside or Outside the Database?</h2>
<p>When choosing an architecture for writing Java Oracle XML&nbsp;DB applications, consider the following guidelines:</p>
<div id="ADXDB5662" class="sect2"><a id="sthref1810"></a>
<h3 class="sect2"><a id="sthref1811"></a>HTTP(S): Accessing Java Servlets or Directly Accessing XMLType Resources</h3>
<p>If the downstream client wants to deal with XML in its textual representation, then using HTTP(S) to either access the Java servlets or directly access <code>XMLType</code> resources performs the best, especially if the XML node tree is not being manipulated much by the Java program.</p>
<p>The Java implementation in the server can natively move data from the database to the network without converting character data through UCS-2 Unicode (which is required by Java strings). In many cases data is copied directly from the database buffer cache to the HTTP(S) connection. There is no need to convert data from the buffer cache into the SQL serialization format used by Oracle Net Services, then move it to the JDBC client, and then convert to XML. Loading on demand and the LRU cache for <code>XMLType</code> are most effective inside the database server.</p>
</div>
<!-- class="sect2" -->
<div id="ADXDB5663" class="sect2"><a id="sthref1812"></a>
<h3 class="sect2">Accessing Many XMLType Object Elements: Use JDBC XMLType Support</h3>
<p>If the downstream client is an application that programmatically accesses many or most of the elements of an <code>XMLType</code> instance using Java, then use JDBC <code>XMLType</code> support for best performance. It is often easier to debug Java programs outside of the database server, as well.</p>
</div>
<!-- class="sect2" -->
<div id="ADXDB5664" class="sect2"><a id="sthref1813"></a>
<h3 class="sect2">Use the <a id="sthref1814"></a>Servlets to Manipulate and Write Out Data Quickly as XML</h3>
<p>Oracle XML&nbsp;DB servlets are intended for writing HTTP stored procedures in Java that can be accessed using HTTP(S). They are not intended as a platform for developing an entire Internet application. In that case, the application servlet should be deployed in Oracle Application Server application server and access data in the database either using JDBC, or by using the <code>java.net.*</code> or similar APIs to get XML data through HTTP(S).</p>
<p>They are best used for applications that want to get into the database, manipulate the data, and write it out quickly as XML, not to format HTML pages for end-users.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1043680"></a>
<div id="ADXDB5665" class="sect1">
<h2 class="sect1">Writing Oracle XML&nbsp;DB <a id="sthref1815"></a>HTTP <a id="sthref1816"></a>Servlets in Java</h2>
<p>Oracle XML&nbsp;DB provides a protocol server that supports FTP, HTTP 1.1, WebDAV, and Java Servlets. Oracle XML&nbsp;DB supports Java Servlet version 2.2, with the following exceptions:</p>
<ul>
<li>
<p>The servlet WAR file (<code>web.xml</code>) is not supported in its entirety. Some <code>web.xml</code> configuration parameters must be handled manually. For example, creating roles must be done using the <code>SQL CREATE ROLE</code> command.</p>
</li>
<li>
<p><code>RequestDispatcher</code> and associated methods are <span class="italic">not</span> supported.</p>
</li>
<li>
<p>Method <code>HTTPServletRequest.getCookies()</code> is <span class="italic">not</span> supported.</p>
</li>
<li>
<p>Only one <code>ServletContext</code> (and one <code>web-app</code>) is currently supported.</p>
</li>
<li>
<p>Stateful servlets (and thus the <code>HttpSession</code> class methods) are <span class="italic">not</span> supported. Servlets must maintain state in the database itself.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i1043684"></a>
<div id="ADXDB5666" class="sect1">
<h2 class="sect1">Configuring Oracle XML&nbsp;DB <a id="sthref1817"></a><a id="sthref1818"></a>Servlets</h2>
<p>Oracle XML&nbsp;DB servlets are configured using the <code>/xdbconfig.xml</code> file in Oracle XML&nbsp;DB Repository. Many of the XML elements in this file are the same as those defined by the Java Servlet 2.2 specification portion of Java 2 Enterprise Edition (J2EE), and have the same semantics. <a href="#g1046987">Table 32-1</a> lists the XML elements defined for the servlet deployment descriptor by the Java Servlet specification, along with extension elements supported by Oracle XML&nbsp;DB.</p>
<div id="ADXDB5667" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref1819"></a><a id="g1046987"></a>Table 32-1 XML Elements Defined for Servlet Deployment Descriptors</p>
<table class="cellalignment1032" title="XML Elements Defined for Servlet Deployment Descriptors " summary="This table describes XML elements defined for servlet deployment descriptors with Oracle XML DB." dir="ltr">
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t2">XML Element Name</th>
<th class="cellalignment1027" id="r1c2-t2">Defined By</th>
<th class="cellalignment1027" id="r1c3-t2">Supported?</th>
<th class="cellalignment1027" id="r1c4-t2">Description</th>
<th class="cellalignment1027" id="r1c5-t2">Comment</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t2" headers="r1c1-t2">
<p><code>auth-method</code></p>
</td>
<td class="cellalignment1028" headers="r2c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r2c1-t2 r1c3-t2">
<p>no</p>
</td>
<td class="cellalignment1028" headers="r2c1-t2 r1c4-t2">
<p>Specifies an HTTP authentication method required for access</p>
</td>
<td class="cellalignment1028" headers="r2c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t2" headers="r1c1-t2">
<p><code>charset</code></p>
</td>
<td class="cellalignment1028" headers="r3c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r3c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r3c1-t2 r1c4-t2">
<p>Specifies an IANA character set name</p>
</td>
<td class="cellalignment1028" headers="r3c1-t2 r1c5-t2">
<p>For example: ISO8859, UTF-8</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t2" headers="r1c1-t2">
<p><code>charset-mapping</code></p>
</td>
<td class="cellalignment1028" headers="r4c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r4c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r4c1-t2 r1c4-t2">
<p>Specifies a mapping between a filename extension and a charset</p>
</td>
<td class="cellalignment1028" headers="r4c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r5c1-t2" headers="r1c1-t2">
<p><code>context-param</code></p>
</td>
<td class="cellalignment1028" headers="r5c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r5c1-t2 r1c3-t2">
<p>no</p>
</td>
<td class="cellalignment1028" headers="r5c1-t2 r1c4-t2">
<p>Specifies a parameter for a Web application</p>
</td>
<td class="cellalignment1028" headers="r5c1-t2 r1c5-t2">
<p>Not yet supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r6c1-t2" headers="r1c1-t2">
<p><code>description</code></p>
</td>
<td class="cellalignment1028" headers="r6c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r6c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r6c1-t2 r1c4-t2">
<p>A string for describing a servlet or Web application</p>
</td>
<td class="cellalignment1028" headers="r6c1-t2 r1c5-t2">
<p>Supported for servlets</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r7c1-t2" headers="r1c1-t2">
<p><code>display-name</code></p>
</td>
<td class="cellalignment1028" headers="r7c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r7c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r7c1-t2 r1c4-t2">
<p>A string to display with a servlet or Web application</p>
</td>
<td class="cellalignment1028" headers="r7c1-t2 r1c5-t2">
<p>Supported for servlets</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r8c1-t2" headers="r1c1-t2">
<p><code>distributable</code></p>
</td>
<td class="cellalignment1028" headers="r8c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r8c1-t2 r1c3-t2">
<p>no</p>
</td>
<td class="cellalignment1028" headers="r8c1-t2 r1c4-t2">
<p>Indicates whether or not this servlet can function if all instances are not running in the same Java virtual machine</p>
</td>
<td class="cellalignment1028" headers="r8c1-t2 r1c5-t2">
<p>All servlets running in Oracle Database MUST be distributable.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r9c1-t2" headers="r1c1-t2">
<p><code>errnum</code></p>
</td>
<td class="cellalignment1028" headers="r9c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r9c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r9c1-t2 r1c4-t2">
<p>Oracle error number</p>
</td>
<td class="cellalignment1028" headers="r9c1-t2 r1c5-t2">
<p>See <a class="olink ERRMG" href="../../server.112/e17766/toc.htm"><span class="italic">Oracle Database Error Messages</span></a></p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r10c1-t2" headers="r1c1-t2">
<p><code>error-code</code></p>
</td>
<td class="cellalignment1028" headers="r10c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r10c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r10c1-t2 r1c4-t2">
<p>HTTP(S) error code</p>
</td>
<td class="cellalignment1028" headers="r10c1-t2 r1c5-t2">
<p>Defined by RFC 2616</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r11c1-t2" headers="r1c1-t2">
<p><code>error-page</code></p>
</td>
<td class="cellalignment1028" headers="r11c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r11c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r11c1-t2 r1c4-t2">
<p>Defines a URL to redirect to if an error is encountered.</p>
</td>
<td class="cellalignment1028" headers="r11c1-t2 r1c5-t2">
<p>Can be specified through an HTTP(S) error, an uncaught Java exception, or through an uncaught Oracle error message</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r12c1-t2" headers="r1c1-t2">
<p><code>exception-type</code></p>
</td>
<td class="cellalignment1028" headers="r12c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r12c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r12c1-t2 r1c4-t2">
<p>Classname of a Java exception mapped to an error page</p>
</td>
<td class="cellalignment1028" headers="r12c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r13c1-t2" headers="r1c1-t2">
<p><code>extension</code></p>
</td>
<td class="cellalignment1028" headers="r13c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r13c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r13c1-t2 r1c4-t2">
<p>A filename extension used to associate with MIME types, character sets, and so on.</p>
</td>
<td class="cellalignment1028" headers="r13c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r14c1-t2" headers="r1c1-t2">
<p><code>facility</code></p>
</td>
<td class="cellalignment1028" headers="r14c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r14c1-t2 r1c3-t2">
<p>yes</p>
</td>
<td class="cellalignment1028" headers="r14c1-t2 r1c4-t2">
<p>Oracle facility code for mapping error pages</p>
</td>
<td class="cellalignment1028" headers="r14c1-t2 r1c5-t2">
<p>For example: ORA, PLS, and so on.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r15c1-t2" headers="r1c1-t2">
<p><code>form-error-page</code></p>
</td>
<td class="cellalignment1028" headers="r15c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r15c1-t2 r1c3-t2">
<p>no</p>
</td>
<td class="cellalignment1028" headers="r15c1-t2 r1c4-t2">
<p>Error page for form login attempts</p>
</td>
<td class="cellalignment1028" headers="r15c1-t2 r1c5-t2">
<p>Not yet supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r16c1-t2" headers="r1c1-t2">
<p><code>form-login-config</code></p>
</td>
<td class="cellalignment1028" headers="r16c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r16c1-t2 r1c3-t2">
<p>no</p>
</td>
<td class="cellalignment1028" headers="r16c1-t2 r1c4-t2">
<p>Config spec for form-based login</p>
</td>
<td class="cellalignment1028" headers="r16c1-t2 r1c5-t2">
<p>Not yet supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r17c1-t2" headers="r1c1-t2">
<p><code>form-login-page</code></p>
</td>
<td class="cellalignment1028" headers="r17c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r17c1-t2 r1c3-t2">
<p>no</p>
</td>
<td class="cellalignment1028" headers="r17c1-t2 r1c4-t2">
<p>URL for the form-based login page</p>
</td>
<td class="cellalignment1028" headers="r17c1-t2 r1c5-t2">
<p>Not yet supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r18c1-t2" headers="r1c1-t2">
<p><code>icon</code></p>
</td>
<td class="cellalignment1028" headers="r18c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r18c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r18c1-t2 r1c4-t2">
<p>URL of icon to associate with a servlet</p>
</td>
<td class="cellalignment1028" headers="r18c1-t2 r1c5-t2">
<p>Supported for servlets</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r19c1-t2" headers="r1c1-t2">
<p><code>init-param</code></p>
</td>
<td class="cellalignment1028" headers="r19c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r19c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r19c1-t2 r1c4-t2">
<p>Initialization parameter for a servlet</p>
</td>
<td class="cellalignment1028" headers="r19c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r20c1-t2" headers="r1c1-t2">
<p><code>jsp-file</code></p>
</td>
<td class="cellalignment1028" headers="r20c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r20c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r20c1-t2 r1c4-t2">
<p>Java Server Page file to use for a servlet</p>
</td>
<td class="cellalignment1028" headers="r20c1-t2 r1c5-t2">
<p>Not supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r21c1-t2" headers="r1c1-t2">
<p><code>lang</code></p>
</td>
<td class="cellalignment1028" headers="r21c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r21c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r21c1-t2 r1c4-t2">
<p>IANA language name</p>
</td>
<td class="cellalignment1028" headers="r21c1-t2 r1c5-t2">
<p>For example: en-US</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r22c1-t2" headers="r1c1-t2">
<p><code>lang-mapping</code></p>
</td>
<td class="cellalignment1028" headers="r22c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r22c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r22c1-t2 r1c4-t2">
<p>Specifies a mapping between a filename extension and language content</p>
</td>
<td class="cellalignment1028" headers="r22c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r23c1-t2" headers="r1c1-t2">
<p><code>large-icon</code></p>
</td>
<td class="cellalignment1028" headers="r23c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r23c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r23c1-t2 r1c4-t2">
<p>Large sized icon for icon display</p>
</td>
<td class="cellalignment1028" headers="r23c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r24c1-t2" headers="r1c1-t2">
<p><code>load-on-startup</code></p>
</td>
<td class="cellalignment1028" headers="r24c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r24c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r24c1-t2 r1c4-t2">
<p>Specifies if a servlet is to be loaded on startup</p>
</td>
<td class="cellalignment1028" headers="r24c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r25c1-t2" headers="r1c1-t2">
<p><code>location</code></p>
</td>
<td class="cellalignment1028" headers="r25c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r25c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r25c1-t2 r1c4-t2">
<p>Specifies the URL for an error page</p>
</td>
<td class="cellalignment1028" headers="r25c1-t2 r1c5-t2">
<p>Can be a local path name or HTTP(S) URL</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r26c1-t2" headers="r1c1-t2">
<p><code>login-config</code></p>
</td>
<td class="cellalignment1028" headers="r26c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r26c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r26c1-t2 r1c4-t2">
<p>Specifies a method for authentication</p>
</td>
<td class="cellalignment1028" headers="r26c1-t2 r1c5-t2">
<p>Not yet supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r27c1-t2" headers="r1c1-t2">
<p><code>mime-mapping</code></p>
</td>
<td class="cellalignment1028" headers="r27c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r27c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r27c1-t2 r1c4-t2">
<p>Specifies a mapping between filename extension and the MIME type of the content</p>
</td>
<td class="cellalignment1028" headers="r27c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r28c1-t2" headers="r1c1-t2">
<p><code>mime-type</code></p>
</td>
<td class="cellalignment1028" headers="r28c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r28c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r28c1-t2 r1c4-t2">
<p>MIME type name for resource content</p>
</td>
<td class="cellalignment1028" headers="r28c1-t2 r1c5-t2">
<p>For example: text/xml or application/octet-stream</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r29c1-t2" headers="r1c1-t2">
<p><code>OracleError</code></p>
</td>
<td class="cellalignment1028" headers="r29c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r29c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r29c1-t2 r1c4-t2">
<p>Specifies an Oracle error to associate with an error page</p>
</td>
<td class="cellalignment1028" headers="r29c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r30c1-t2" headers="r1c1-t2">
<p><code>param-name</code></p>
</td>
<td class="cellalignment1028" headers="r30c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r30c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r30c1-t2 r1c4-t2">
<p>Name of a parameter for a Servlet or <code>ServletContext</code></p>
</td>
<td class="cellalignment1028" headers="r30c1-t2 r1c5-t2">
<p>Supported for servlets</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r31c1-t2" headers="r1c1-t2">
<p><code>param-value</code></p>
</td>
<td class="cellalignment1028" headers="r31c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r31c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r31c1-t2 r1c4-t2">
<p>Value of a parameter</p>
</td>
<td class="cellalignment1028" headers="r31c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r32c1-t2" headers="r1c1-t2">
<p><code>realm-name</code></p>
</td>
<td class="cellalignment1028" headers="r32c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r32c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r32c1-t2 r1c4-t2">
<p>HTTP(S) realm used for authentication</p>
</td>
<td class="cellalignment1028" headers="r32c1-t2 r1c5-t2">
<p>Not yet supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r33c1-t2" headers="r1c1-t2">
<p><code>role-link</code></p>
</td>
<td class="cellalignment1028" headers="r33c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r33c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r33c1-t2 r1c4-t2">
<p>Specifies a role a particular user must have for accessing a servlet</p>
</td>
<td class="cellalignment1028" headers="r33c1-t2 r1c5-t2">
<p>Refers to a database role name. Make sure to capitalize by default!</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r34c1-t2" headers="r1c1-t2">
<p><code>role-name</code></p>
</td>
<td class="cellalignment1028" headers="r34c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r34c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r34c1-t2 r1c4-t2">
<p>A servlet name for a role</p>
</td>
<td class="cellalignment1028" headers="r34c1-t2 r1c5-t2">
<p>Just another name to call the database role. Used by the Servlet APIs</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r35c1-t2" headers="r1c1-t2">
<p><code>security-role</code></p>
</td>
<td class="cellalignment1028" headers="r35c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r35c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r35c1-t2 r1c4-t2">
<p>Defines a role for a servlet to use</p>
</td>
<td class="cellalignment1028" headers="r35c1-t2 r1c5-t2">
<p>Not supported. You must manually create roles using the SQL <code>CREATE ROLE</code></p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r36c1-t2" headers="r1c1-t2">
<p><code>security-role-ref</code></p>
</td>
<td class="cellalignment1028" headers="r36c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r36c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r36c1-t2 r1c4-t2">
<p>A reference between a servlet and a role</p>
</td>
<td class="cellalignment1028" headers="r36c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r37c1-t2" headers="r1c1-t2">
<p><code>servlet</code></p>
</td>
<td class="cellalignment1028" headers="r37c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r37c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r37c1-t2 r1c4-t2">
<p>Configuration information for a servlet</p>
</td>
<td class="cellalignment1028" headers="r37c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r38c1-t2" headers="r1c1-t2">
<p><code>servlet-class</code></p>
</td>
<td class="cellalignment1028" headers="r38c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r38c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r38c1-t2 r1c4-t2">
<p>Specifies the classname for the Java servlet</p>
</td>
<td class="cellalignment1028" headers="r38c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r39c1-t2" headers="r1c1-t2">
<p><code>servlet-language</code></p>
</td>
<td class="cellalignment1028" headers="r39c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r39c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r39c1-t2 r1c4-t2">
<p>Specifies the programming language in which the servlet is written.</p>
</td>
<td class="cellalignment1028" headers="r39c1-t2 r1c5-t2">
<p>Either Java, C, or PL/SQL. Currently, only Java is supported for customer-defined servlets.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r40c1-t2" headers="r1c1-t2">
<p><code>servlet-mapping</code></p>
</td>
<td class="cellalignment1028" headers="r40c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r40c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r40c1-t2 r1c4-t2">
<p>Specifies a filename pattern with which to associate the servlet</p>
</td>
<td class="cellalignment1028" headers="r40c1-t2 r1c5-t2">
<p>All of the mappings defined by Java are supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r41c1-t2" headers="r1c1-t2">
<p><code>servlet-name</code></p>
</td>
<td class="cellalignment1028" headers="r41c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r41c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r41c1-t2 r1c4-t2">
<p>String name for a servlet</p>
</td>
<td class="cellalignment1028" headers="r41c1-t2 r1c5-t2">
<p>Used by servlet APIs</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r42c1-t2" headers="r1c1-t2">
<p><code>servlet-schema</code></p>
</td>
<td class="cellalignment1028" headers="r42c1-t2 r1c2-t2">
<p>Oracle</p>
</td>
<td class="cellalignment1028" headers="r42c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r42c1-t2 r1c4-t2">
<p>The Oracle Schema in which the Java class is loaded. If not specified, then the schema is searched using the default resolver specification.</p>
</td>
<td class="cellalignment1028" headers="r42c1-t2 r1c5-t2">
<p>If this is not specified, then the servlet must be loaded into the <code>SYS</code> schema to ensure that everyone can access it, or the default Java class resolver must be altered. Note that the servlet schema is capitalized unless the value is enclosed in double-quotes.</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r43c1-t2" headers="r1c1-t2">
<p><code>session-config</code></p>
</td>
<td class="cellalignment1028" headers="r43c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r43c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r43c1-t2 r1c4-t2">
<p>Configuration information for an <code>HTTPSession</code></p>
</td>
<td class="cellalignment1028" headers="r43c1-t2 r1c5-t2">
<p><code>HTTPSession</code> is not supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r44c1-t2" headers="r1c1-t2">
<p><code>session-timeout</code></p>
</td>
<td class="cellalignment1028" headers="r44c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r44c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r44c1-t2 r1c4-t2">
<p>Timeout for an HTTP(S) session</p>
</td>
<td class="cellalignment1028" headers="r44c1-t2 r1c5-t2">
<p><code>HTTPSession</code> is not supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r45c1-t2" headers="r1c1-t2">
<p><code>small-icon</code></p>
</td>
<td class="cellalignment1028" headers="r45c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r45c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r45c1-t2 r1c4-t2">
<p>Small icon to associate with a servlet</p>
</td>
<td class="cellalignment1028" headers="r45c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r46c1-t2" headers="r1c1-t2">
<p><code>taglib</code></p>
</td>
<td class="cellalignment1028" headers="r46c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r46c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r46c1-t2 r1c4-t2">
<p>JSP tag library</p>
</td>
<td class="cellalignment1028" headers="r46c1-t2 r1c5-t2">
<p>JSPs currently not supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r47c1-t2" headers="r1c1-t2">
<p><code>taglib-uri</code></p>
</td>
<td class="cellalignment1028" headers="r47c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r47c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r47c1-t2 r1c4-t2">
<p>URI for JSP tag library description file relative to file <code>web.xml</code></p>
</td>
<td class="cellalignment1028" headers="r47c1-t2 r1c5-t2">
<p>JSPs currently not supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r48c1-t2" headers="r1c1-t2">
<p><code>taglib-location</code></p>
</td>
<td class="cellalignment1028" headers="r48c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r48c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r48c1-t2 r1c4-t2">
<p>Path name relative to the root of the Web application where the tag library is stored</p>
</td>
<td class="cellalignment1028" headers="r48c1-t2 r1c5-t2">
<p>JSPs currently not supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r49c1-t2" headers="r1c1-t2">
<p><code>url-pattern</code></p>
</td>
<td class="cellalignment1028" headers="r49c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r49c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r49c1-t2 r1c4-t2">
<p>URL pattern to associate with a servlet</p>
</td>
<td class="cellalignment1028" headers="r49c1-t2 r1c5-t2">
<p>See Section 10 of Java Servlet 2.2 spec</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r50c1-t2" headers="r1c1-t2">
<p><code>web-app</code></p>
</td>
<td class="cellalignment1028" headers="r50c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r50c1-t2 r1c3-t2">
<p>No</p>
</td>
<td class="cellalignment1028" headers="r50c1-t2 r1c4-t2">
<p>Configuration for a Web application</p>
</td>
<td class="cellalignment1028" headers="r50c1-t2 r1c5-t2">
<p>Only one Web application is currently supported</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r51c1-t2" headers="r1c1-t2">
<p><code>welcome-file</code></p>
</td>
<td class="cellalignment1028" headers="r51c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r51c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r51c1-t2 r1c4-t2">
<p>Specifies a welcome-file name</p>
</td>
<td class="cellalignment1028" headers="r51c1-t2 r1c5-t2">
<p>--</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r52c1-t2" headers="r1c1-t2">
<p><code>welcome-file-list</code></p>
</td>
<td class="cellalignment1028" headers="r52c1-t2 r1c2-t2">
<p>Java</p>
</td>
<td class="cellalignment1028" headers="r52c1-t2 r1c3-t2">
<p>Yes</p>
</td>
<td class="cellalignment1028" headers="r52c1-t2 r1c4-t2">
<p>Defines a list of files to display when a folder is referenced through an HTTP <code>GET</code> request</p>
</td>
<td class="cellalignment1028" headers="r52c1-t2 r1c5-t2">
<p>Example: <code>index.html</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>The following parameters defined for the <code>web.xml</code> file by Java are usable only by J2EE-compliant Enterprise Java Bean containers, and are not required for Java Servlet containers that do not support a full J2EE environment: <code>env-entry</code>, <code>env-entry-name</code>, <code>env-entry-value</code>, <code>env-entry-type</code>, <code>ejb-ref</code>, <code>ejb-ref-type</code>, <code>home</code>, <code>remote</code>, <code>ejb-link</code>, <code>resource-ref</code>, <code>res-ref-name</code>, res-type, <code>res-auth</code>.</p>
</li>
<li>
<p>The following elements are used to define access control for resources: <code>security-constraint</code>, <code>web-resource-collection</code>, <code>web-resource-name</code>, <code>http-method</code>, <code>user-data-constraint</code>, <code>transport-guarantee</code>, <code>auth-constrain</code>. Oracle XML&nbsp;DB provides this functionality through access control lists (ACLs). An ACL is a list of access control entries (ACEs) that determines which principals have access to a given resource or resources. A future release will support using a <code>web.xml</code> file to generate ACLs.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="appaman.htm#g645751">Chapter 34, "Administering Oracle XML&nbsp;DB"</a> for more information about configuring the <code>/xdbconfig.xml</code> file</div>
</div>
<!-- class="sect1" -->
<a id="i1043688"></a>
<div id="ADXDB5668" class="sect1">
<h2 class="sect1">H<a id="sthref1820"></a>TTP Request Processing for Oracle XML&nbsp;DB Servlets</h2>
<p>Oracle XML&nbsp;DB handles an <a id="sthref1821"></a>HTTP request using the following steps:</p>
<ol>
<li>
<p>If a connection has not yet been established, then Oracle Listener hands the connection to a shared server dispatcher.</p>
</li>
<li>
<p>When a new HTTP request arrives, the dispatcher wakes up a shared server.</p>
</li>
<li>
<p>The HTTP headers are parsed into appropriate structures.</p>
</li>
<li>
<p>The shared server attempts to allocate a database session from the Oracle XML&nbsp;DB session pool, if available, but otherwise creates a new session.</p>
</li>
<li>
<p>A new database call and a new database transaction are started.</p>
</li>
<li>
<p>If HTTP(S) has included authentication headers, then the session is authenticated as that database user (just as if the user logged into SQL*Plus). If no authentication information is included, and the request is <code>GET</code> or <code>HEAD</code>, then Oracle XML&nbsp;DB attempts to authenticate the session as the <code>ANONYMOUS</code> user. If that database user account is locked, then no unauthenticated access is allowed.</p>
</li>
<li>
<p>The URL in the HTTP request is matched against the servlets in the <code>xdbconfig.xml</code> file, as specified by the Java Servlet 2.2 specification.</p>
</li>
<li>
<p>The Oracle XML&nbsp;DB Servlet container is invoked in the Java VM inside Oracle. If the specified servlet has not been initialized yet, then the servlet is initialized.</p>
</li>
<li>
<p>The Servlet reads input from the <code>ServletInputStream</code>, and writes output to the <code>ServletOutputStream</code>, and returns from method <code>service()</code>.</p>
</li>
<li>
<p>If no uncaught Oracle error occurred, then the session is put back into the session pool.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb22pro.htm#g1031760">Chapter 28, "Accessing the Repository using Protocols"</a></div>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1043695"></a>
<div id="ADXDB5669" class="sect1">
<h2 class="sect1"><a id="sthref1822"></a><a id="sthref1823"></a>Session Pool and Oracle XML&nbsp;DB <a id="sthref1824"></a>Servlets</h2>
<p>Oracle Database uses one Java VM for each database session. A session that is reused from the session pool retains any state that is left over in the Java VM (Java static variables) from the last time that session was used.</p>
<p>This can be useful in caching Java state that is not user-specific, such as metadata, but Do not store secure user data in Java static memory. This could turn into a security hole inadvertently introduced by your application if you are not careful.</p>
</div>
<!-- class="sect1" -->
<a id="i1043699"></a>
<div id="ADXDB5670" class="sect1">
<h2 class="sect1">Native XML Stream Support</h2>
<p>Node class <code>DOM</code> has an Oracle-specific method called <code>write()</code>, which takes the following arguments, returning void:</p>
<ul>
<li>
<p><code>java.io.OutputStream</code> stream: A Java stream for writing the XML text.</p>
</li>
<li>
<p>String <code>charEncoding</code>: The character encoding for writing the XML text. If <code>NULL</code>, then the database character set is used.</p>
</li>
<li>
<p><code>Short</code> <code>indent</code> The number of characters to indent nested XML elements.</p>
</li>
</ul>
<p>Java method <code>write()</code> has a shortcut implementation if the stream provided is the <code>ServletOutputStream</code> provided inside the database. The contents of the Node are written in XML in native code directly to the output socket. This bypasses any conversions into and out of Java objects or Unicode (required for Java strings) and provides very high performance.</p>
</div>
<!-- class="sect1" -->
<a id="i1043703"></a>
<div id="ADXDB5671" class="sect1">
<h2 class="sect1">Oracle XML&nbsp;DB <a id="sthref1825"></a>Servlet APIs</h2>
<p>The APIs supported by Oracle XML&nbsp;DB servlets are defined by the Java Servlet 2.2 specification, the <code>Javadoc</code> for which is available, as of the time of writing this, online at: <code><a href="http://java.sun.com/products/servlet/2.2/javadoc/index.html">http://java.sun.com/products/servlet/2.2/javadoc/index.html</a></code></p>
<p><a href="#g1047307">Table 32-2</a> lists Java Servlet 2.2 methods that are not implemented. They result in run-time exceptions.</p>
<div id="ADXDB5672" class="tblhruleformal">
<p class="titleintable"><a id="sthref1826"></a><a id="g1047307"></a>Table 32-2 Java Servlet 2.2 Methods that Are Not Implemented</p>
<table class="cellalignment1032" title="Java Servlet 2.2 Methods that Are Not Implemented" summary="This table describes non-implemented Java 2.2 methods in Oracle XML DB." dir="ltr">
<thead>
<tr class="cellalignment1020">
<th class="cellalignment1027" id="r1c1-t6">Interface</th>
<th class="cellalignment1027" id="r1c2-t6">Methods Not Implemented</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r2c1-t6" headers="r1c1-t6">
<pre>
HttpServletRequest
</pre></td>
<td class="cellalignment1028" headers="r2c1-t6 r1c2-t6">
<p><code>getSession(), isRequestedSessionIdValid()</code></p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r3c1-t6" headers="r1c1-t6">
<pre>
HttpSession
</pre></td>
<td class="cellalignment1028" headers="r3c1-t6 r1c2-t6">
<p>all</p>
</td>
</tr>
<tr class="cellalignment1020">
<td class="cellalignment1028" id="r4c1-t6" headers="r1c1-t6">
<pre>
HttpSessionBindingListener
</pre></td>
<td class="cellalignment1028" headers="r4c1-t6 r1c2-t6">
<p>all</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect1" -->
<a id="i1045379"></a>
<div id="ADXDB5673" class="sect1">
<h2 class="sect1">Oracle XML&nbsp;DB Servlet Example</h2>
<p><a href="#CDDBAJFH">Example 32-1</a> shows a simple servlet that prints the content of file resource <code>/public/test/foo1.text</code>.</p>
<div id="ADXDB5674" class="example">
<p class="titleinexample"><a id="CDDBAJFH"></a>Example 32-1 An Oracle XML&nbsp;DB <a id="sthref1827"></a>Servlet</p>
<pre>
import javax.servlet.http.*;
import javax.servlet.*;
import java.util.*;
import java.io.*;
import java.util.*;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.io.Reader;
import java.io.Writer;
import java.sql.DriverManager;
import java.sql.SQLException;
import oracle.jdbc.OracleConnection;
import oracle.jdbc.OracleDriver;
import oracle.jdbc.OraclePreparedStatement;
import oracle.jdbc.OracleResultSet;
import oracle.sql.CLOB;
import oracle.xdb.XMLType;
import oracle.xdb.spi.XDBResource;
 
public class test extends HttpServlet {
  public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException,
           IOException {
      try {
        try {
          // Get the database connection for the current HTTP session
          DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
          OracleDriver ora = new OracleDriver();
          OracleConnection databaseConnection =
            (OracleConnection) ora.defaultConnection();
          String statementText =
            "SELECT XDBURIType('/public/test/foo1.txt').getClob() FROM DUAL";
          OraclePreparedStatement statement =
            (OraclePreparedStatement)
            databaseConnection.prepareStatement(statementText);
          OracleResultSet resultSet = null;
          CLOB content = null;
          // Execute the statement
          resultSet = (OracleResultSet) statement.executeQuery();
          while (resultSet.next())
            {// The statement returns a CLOB.
             // Copy content of CLOB to server's output stream.
             content = resultSet.getCLOB(1);
             Reader reader = content.getCharacterStream();
             Writer writer =
               new OutputStreamWriter(response.getOutputStream());
             int bytesSent = 0;
             int n;
             char[] buffer = new char[CLOB.MAX_CHUNK_SIZE];
             while (-1 != (n = reader.read(buffer)))
               { bytesSent = bytesSent + n;
                 writer.write(buffer, 0, n); }
             writer.flush();
             if (content.isOpen()) { content.close(); }}
          resultSet.close();
          statement.close();
          databaseConnection.close();
          response.getOutputStream().write('\n'); }
        catch (SQLException sql)
          { throw new ServletException(sql); }}
      catch (ServletException se )
        { se.printStackTrace(); }
      finally
        { System.out.flush(); }}}
</pre></div>
<!-- class="example" -->
<p>To install the servlet, you compile it, then load it into Oracle Database:</p>
<pre>
% loadjava &ndash;grant public &ndash;u quine/curry &ndash;r test.class
</pre>
<p>Finally, register and map the servlet, associating it with a URL, as shown in <a href="#CDDCAHIA">Example 32-2</a>.</p>
<div id="ADXDB5675" class="example">
<p class="titleinexample"><a id="CDDCAHIA"></a>Example 32-2 Registering and Mapping an Oracle XML&nbsp;DB Servlet</p>
<pre>
EXEC DBMS_XDB.addServlet('TestServletFoo', 'Java', 'TestServletFoo',
                         NULL, NULL, 'test', NULL, NULL, 'XDB');

EXEC DBMS_XDB.addServletMapping('/public/test/foo1.txt', 'TestServletFoo');

COMMIT;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1019">
<tr>
<td class="cellalignment1028">
<table class="cellalignment1024">
<tr>
<td class="cellalignment1023"><a href="xdb_jcr.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1023"><a href="xdb_web_services.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1030">
<table class="cellalignment1022">
<tr>
<td class="cellalignment1023"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1023"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1023"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1023"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1023"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1023"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
