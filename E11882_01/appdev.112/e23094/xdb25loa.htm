<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Loading XML Data using SQL*Loader</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748" />
<meta name="description" content="This manual describes Oracle XML&nbsp;DB. It includes guidelines and examples for storing, generating, accessing, searching, validating, transforming, evolving, and indexing XML data in Oracle Database." />
<meta name="dcterms.created" content="2014-02-20T9:56:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="XML DB Developer's Guide" />
<meta name="dcterms.identifier" content="E23094-04" />
<meta name="dcterms.isVersionOf" content="ADXDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="appaman.htm" title="Previous" type="text/html" />
<link rel="Next" href="xdb26imp.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23094.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">48/54</span> <!-- End Header -->
<div id="ADXDB2900" class="chapter"><a id="g1026738"></a>
<h1 class="chapter"><span class="secnum">35</span> Loading XML Data using SQL*Loader</h1>
<p>This chapter describes how to load XML data into Oracle XML&nbsp;DB with a focus on SQL*Loader.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#i1024846">Overview of Loading XMLType Data Into Oracle Database</a></p>
</li>
<li>
<p><a href="#i1025595">Loading XMLType Data using SQL*Loader</a></p>
</li>
<li>
<p><a href="#BGBDDEDD">Loading Large XML Documents into Oracle Database</a></p>
</li>
</ul>
<div align="center">
<div class="inftblinformal"><br />
<table class="cellalignment1031">
<tbody>
<tr class="cellalignment1020">
<td class="cellalignment1028">
<p class="notep1">See Also:</p>
<a href="xdb03usg.htm#g1055369">Chapter 3, "Using Oracle XML&nbsp;DB"</a></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<a id="i1024846"></a>
<div id="ADXDB5723" class="sect1">
<h2 class="sect1">Overview of Loading <a id="sthref1864"></a>XMLType Data Into Oracle Database</h2>
<p>Starting with Oracle9<span class="italic">i</span> release 1 (9.0.1), the Export-Import utility and SQL*Loader support <code>XMLType</code> as a column type. Starting with Oracle Database 10<span class="italic">g</span>, SQL*Loader also supports loading <code>XMLType</code> tables. You can load <code>XMLType</code> data with SQL*Loader using either the conventional method or the direct-path method, regardless of how it is stored (structured, unstructured, or binary XML storage).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For <span class="italic">structured storage</span> of XML data, if the data involves <span class="italic">inheritance</span> (extension or restriction) of XML Schema types, then SQL*Loader does <span class="italic">not</span> support direct-path loading.
<p>That is, if an XML schema contains a <code>complexType</code> element that extends or restricts another <code>complexType</code> element (the base type), then this results in some SQL types being defined in terms of other SQL types. In this case, direct-path loading is not supported for object-relational storage.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xdb26imp.htm#g1027830">Chapter 36, "Exporting and Importing XMLType Tables"</a> and <a class="olink SUTIL" href="../../server.112/e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a></div>
<p>Oracle XML&nbsp;DB Repository information is <span class="italic">not</span> exported when user data is exported. Neither the resources nor any information are exported.</p>
</div>
<!-- class="sect1" -->
<a id="i1025595"></a>
<div id="ADXDB5724" class="sect1">
<h2 class="sect1">Loading XMLType Data using <a id="sthref1865"></a><a id="sthref1866"></a>SQL*Loader</h2>
<p>XML columns are columns declared to be of type <code>XMLType</code>.</p>
<p>SQL*Loader treats <code>XMLType</code> columns and tables like object-relational columns and tables. All methods described in the following sections for loading LOB data from the primary datafile or from a <code>LOBFILE</code> value apply also to loading <code>XMLType</code> columns and tables when the <code>XMLType</code> data is stored as a LOB.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL" href="../../server.112/e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a></div>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot specify a SQL string for LOB fields. This is true even if you specify <code>LOBFILE_spec</code>.</div>
<p><code>XMLType</code> data can be present in a control file or in a LOB file. In the former case, the LOB file name is present in the control file.</p>
<p>Because <code>XMLType</code> data can be quite large, SQL*Loader can load LOB data from either a primary datafile (in line with the rest of the data) or from LOB files, independent of how the data is stored (the underlying storage can, for example, still be object-relational).</p>
<div id="ADXDB5725" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1867"></a>
<h3 class="sect2">Loading XMLType Data in LOBs using SQL*Loader</h3>
<p>To load internal LOBs, Binary Large Objects (BLOBs), Character Large Objects (CLOBs), and National Character Large Object (NCLOBs), or <code>XMLType</code> columns and tables from a primary datafile, use the following standard SQL*Loader formats:</p>
<ul>
<li>
<p>Predetermined size fields</p>
</li>
<li>
<p>Delimited fields</p>
</li>
<li>
<p>Length-value pair fields</p>
</li>
</ul>
<p>These formats are described in the following sections and in more detail in <a class="olink SUTIL" href="../../server.112/e22490/toc.htm"><span class="italic">Oracle Database Utilities.</span></a></p>
<div id="ADXDB5726" class="sect3"><a id="sthref1868"></a>
<h4 class="sect3">Loading LOB Data in Predetermined Size Fields</h4>
<p>This is a very fast and conceptually simple format to load LOBs.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Because the LOBs you are loading might not be of equal size, you can use whitespace to pad the LOB data to make the LOBs all of equal length within a particular data field.</div>
</div>
<!-- class="sect3" -->
<div id="ADXDB5727" class="sect3"><a id="sthref1869"></a>
<h4 class="sect3">Loading LOB Data in Delimited Fields</h4>
<p>This format handles LOBs of different sizes within the same column (datafile field) without problem. However, this added flexibility can affect performance, because SQL*Loader must scan through the data, looking for the delimiter string.</p>
<p>As with single-character delimiters, when you specify string delimiters, you should consider the character set of the datafile. When the character set of the datafile is different than that of the control file, you can specify the delimiters in hexadecimal (that is, hexadecimal string). If the delimiters are specified in hexadecimal notation, then the specification must consist of characters that are valid in the character set of the input datafile. In contrast, if hexadecimal specification is not used, then the delimiter specification is considered to be in the client (that is, the control file) character set. In this case, the delimiter is converted into the datafile character set before SQL*Loader searches for the delimiter in the datafile.</p>
</div>
<!-- class="sect3" -->
<div id="ADXDB5728" class="sect3"><a id="sthref1870"></a>
<h4 class="sect3">Loading XML Columns Containing LOB Data from LOBFILEs</h4>
<p>LOB data can be lengthy enough so that it makes sense to load it from a LOBFILE instead of from a primary datafile. In LOBFILEs, LOB data instances are still considered to be in fields (predetermined size, delimited, length-value), but these fields are not organized into records (the concept of a record does not exist within LOBFILEs). Therefore, the processing overhead of dealing with records is avoided. This type of organization of data is ideal for LOB loading.</p>
<p>There is no requirement that a LOB from a LOBFILE fit in memory. SQL*Loader reads LOBFILEs in 64 KB chunks.</p>
<p>In LOBFILEs the data can be in any of the following types of fields, any of which can be used to load XML columns:</p>
<ul>
<li>
<p>A single LOB field into which the entire contents of a file can be read</p>
</li>
<li>
<p>Predetermined size fields (fixed-length fields)</p>
</li>
<li>
<p>Delimited fields (that is, <code>TERMINATED BY</code> or <code>ENCLOSED BY</code>)</p>
<p>The clause <code>PRESERVE BLANKS</code> is not applicable to fields read from a LOBFILE.</p>
</li>
<li>
<p>Length-value pair fields (variable-length fields)&thinsp;.</p>
<p>To load data from this type of field, use the &thinsp;<code>VARRAY</code>, <code>VARCHAR</code>, or <code>VARCHAR2</code> SQL*Loader data types.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="ADXDB5729" class="sect3"><a id="sthref1871"></a>
<h4 class="sect3">Specifying LOBFILEs</h4>
<p>You can specify LOBFILEs either statically (you specify the name of the file) or dynamically (you use a FILLER field as the source of the filename). In either case, when the EOF of a LOBFILE is reached, the file is closed and additional attempts to read data from that file produce results equivalent to reading data from an empty field.</p>
<p>You should not specify the same LOBFILE as the source of two different fields. If you do so, then typically, the two fields read the data independently.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="ADXDB5730" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1872"></a>
<h3 class="sect2">Loading XMLType Data Directly from a Control File using SQL*Loader</h3>
<p><code>XMLType</code> data can be loaded directly from a control file. SQL*Loader treats <code>XMLType</code> data like any scalar type. For example, consider a table containing a <code>NUMBER</code> column followed by an <code>XMLType</code> column that is stored object-relationally. The control file used for this table can contain the value of the <code>NUMBER</code> column followed by the value of the <code>XMLType</code> instance.</p>
<p>SQL*Loader accommodates <code>XMLType</code> instances that are very large. You also have the option to load such data from a LOB file.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBDDEDD"></a>
<div id="ADXDB5731" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Loading Large XML Documents into Oracle Database</h2>
<p>You can use SQL*Loader to load large amounts of XML data into Oracle Database. Follow these steps:</p>
<ol>
<li>
<p>List in a data file, say <code>filelist.dat</code>, the locations of the XML documents to be loaded.</p>
</li>
<li>
<p>Create a control file, say <code>load_data.ctl</code>, with commands that process the files listed in the data file.</p>
</li>
<li>
<p>Invoke the SQL*Loader shell command, <code>sqlldr</code>, passing it the name of the control file.</p>
</li>
</ol>
<p>This is illustrated in <a href="#BGBIECBD">Example 35-2</a>, <a href="#BGBEJDJB">Example 35-1</a>, and <a href="#BGBDAJGJ">Example 35-3</a>. File <code>filelist.dat</code> lists XML files that contain purchase orders for the year 2002.</p>
<div id="ADXDB6007" class="example">
<p class="titleinexample"><a id="BGBEJDJB"></a>Example 35-1 Data File filelist.dat: List of XML Files to Load</p>
<pre>
2002/Jan/AMCEWEN-20021009123335370PDT.xm
2002/Jan/AWALSH-2002100912333570PDT.xml 
2002/Jan/CJOHNSON-20021009123335170PDT.xml
2002/Jan/LSMITH-20021009123335500PDT.xml
2002/Jan/PTUCKER-20021009123335430PDT.xml
2002/Jan/SBELL-20021009123335280PDT.xml 
2002/Jan/SKING-20021009123335560PDT.xml 
2002/Jan/SMCCAIN-20021009123335470PDT.xml
2002/Jan/TFOX-20021009123335520PDT.xml  
2002/Jan/VJONES-20021009123335350PDT.xml
2002/Jan/WSMITH-20021009123335450PDT.xml
2002/Feb/AMCEWEN-20021009123335600PDT.xml
2002/Feb/AMCEWEN-20021009123335701PDT.xml
2002/Feb/DAUSTIN-20021009123335811PDT.xml
2002/Feb/EABEL-20021009123335791PDT.xml 
2002/Feb/PTUCKER-20021009123335721PDT.xml
2002/Feb/PTUCKER-20021009123335821PDT.xml
2002/Feb/SBELL-20021009123335771PDT.xml 
2002/Feb/SMCCAIN-20021009123335681PDT.xml
2002/Feb/WSMITH-20021009123335650PDT.xml
2002/Feb/WSMITH-20021009123335741PDT.xml
2002/Feb/WSMITH-20021009123335751PDT.xml
...
</pre></div>
<!-- class="example" -->
<div id="ADXDB6008" class="example">
<p class="titleinexample"><a id="BGBIECBD"></a>Example 35-2 Control File load_datra.ctl, for Loading Purchase-Order XML Documents</p>
<pre>
load data
infile 'filelist.dat'
append
into table PURCHASEORDER
xmltype(XMLDATA) 
(
 filename filler char(120),
 XMLDATA  lobfile(filename) terminated by eof
)
</pre></div>
<!-- class="example" -->
<div id="ADXDB6009" class="example">
<p class="titleinexample"><a id="BGBDAJGJ"></a>Example 35-3 Loading XML Data Using Shell Command sqlldr</p>
<pre>
sqlldr load_data.ctl
</pre>
<p>For direct-path loading, use this instead:</p>
<pre>
sqlldr load_data.ctl direct=y
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb03usg.htm#g1055369">Chapter 3, "Using Oracle XML&nbsp;DB"</a>, <a href="xdb03usg.htm#CEGDFBIJ">"Loading Large XML Files using SQL*Loader"</a></p>
</li>
<li>
<p><a class="olink SUTIL004" href="../../server.112/e22490/ldr_params.htm#SUTIL004"><span class="italic">Oracle Database Utilities</span></a> for information about shell command <code>sqlldr</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1019">
<tr>
<td class="cellalignment1028">
<table class="cellalignment1024">
<tr>
<td class="cellalignment1023"><a href="appaman.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1023"><a href="xdb26imp.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1030">
<table class="cellalignment1022">
<tr>
<td class="cellalignment1023"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1023"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1023"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1023"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1023"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1023"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
