<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Configuring Oracle XML&nbsp;DB Repository</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748" />
<meta name="description" content="This manual describes Oracle XML&nbsp;DB. It includes guidelines and examples for storing, generating, accessing, searching, validating, transforming, evolving, and indexing XML data in Oracle Database." />
<meta name="dcterms.created" content="2014-02-20T9:56:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="XML DB Developer's Guide" />
<meta name="dcterms.identifier" content="E23094-04" />
<meta name="dcterms.isVersionOf" content="ADXDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="xdb16fol.htm" title="Previous" type="text/html" />
<link rel="Next" href="xdb_xlink.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23094.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">34/54</span> <!-- End Header -->
<div id="ADXDB2050" class="chapter"><a id="BABJDDHH"></a>
<h1 class="chapter"><span class="secnum">22</span> Co<a id="sthref1421"></a>nfiguring Oracle XML&nbsp;DB Repository</h1>
<p>This chapter describes how to configure Oracle XML&nbsp;DB Repository. It contains these topics:</p>
<ul>
<li>
<p><a href="#BABGCJBH">Resource Configuration Files Configure a Resource</a></p>
</li>
<li>
<p><a href="#BABFEBBI">Configuring a Resource</a></p>
</li>
<li>
<p><a href="#BABBJADB">Common Configuration Parameters</a></p>
</li>
</ul>
<p>This chapter describes general configuration that applies to all repository resources. It does not describe configuration parameters for specific uses of resources. In particular, it does not describe configuration parameters for handling events or managing XLink and XInclude processing.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xdb_repos_events.htm#BABDDJIB">"Configuring Repository Events"</a></p>
</li>
<li>
<p><a href="xdb_xlink.htm#CIHHJJCC">Configuring Resources for XLink and XInclude</a></p>
</li>
<li>
<p><a href="apphxdb.htm#i642050">XDBResource.xsd: XML Schema for Oracle XML&nbsp;DB Resources</a></p>
</li>
<li>
<p><a href="apphxdb.htm#BABEEABF">XDBResConfig.xsd: XML Schema for Resource Configuration</a></p>
</li>
</ul>
</div>
<a id="BABGCJBH"></a>
<div id="ADXDB5323" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Resource Configuration Files Configure a Resource</h2>
<p>Resource configuration is a general mechanism that you can use for events, mime-type mappings, servlet parameters, XLink and XInclude processing, default ACL specifications, and more.</p>
<p>You configure a Oracle XML&nbsp;DB Repository resource for any purpose by associating it with a resource configuration file, which defines configurable parameters for the resource. A <span class="glossaryterm"><a id="sthref1422"></a>resource configuration file</span> is an XML file that conforms to the XML schema <code>XDBResConfig.xsd</code>, which is accessible in Oracle XML&nbsp;DB Repository at path <code>/sys/schemas/PUBLIC/xmlns.oracle.com/xdb/XDBResConfig.xsd</code>. This XML schema is defined by Oracle XML&nbsp;DB, and you cannot alter it.</p>
<p>A resource configuration file is itself a resource in Oracle XML&nbsp;DB Repository. You use PL/SQL procedure <code>DBMS_RESCONFIG.addResConfig</code> to map a resource to the file that configures it. A single resource configuration file can alternatively apply to all resources in the repository. In that case, you use PL/SQL procedure <code>DBMS_RESCONFIG.addRepositoryResConfig</code> to map it to the repository as a whole.</p>
<p>The same resource configuration file can be used to configure more than one resource, if appropriate. Oracle recommends that you have resources share a configuration file this way whenever the same configuration makes sense. This can improve run-time performance. It also simplifies repository management by letting you update a configuration in a single place and have the change affect multiple resources.</p>
<p>Avoid creating multiple, equivalent resource configuration files, because that can impact performance negatively. If Oracle XML&nbsp;DB detects duplicate resource configuration files, it raises an error.</p>
<p>Typically, you configure a resource for use with a particular application. In order for a resource to be shared by multiple applications, it must be possible for different applications to configure it differently. You do this by creating multiple resource configuration files and mapping them to the same resource. Each resource is thus associated with a list of configurations, a <span class="glossaryterm"><a id="sthref1423"></a>resource configuration list</span>. Configurations in a configuration list are processed in the list order.</p>
<p>The repository itself has a list of resource configuration files, for repository-wide configuration, which really means configuration of all resources in the repository. The same configuration file must not be used for both the repository itself and a specific resource. Otherwise, an error is raised. An error is also raised if the same resource configuration file appears more than once in any given resource configuration list.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
An error is raised if you try to create more than 125 resource configuration files for repository-wide configuration.</div>
<p>The resource configuration list of a new resource is based on the information in the <code>configuration</code> elements of all resource configuration files for the parent folder of the new resource. If there is no such information (no configuration file or no <code>defaultChildConfig</code> elements in the files), then the <code>configuration</code> elements of the repository resource configuration list are used. If that information is also missing, then the new resource has an empty resource configuration list.</p>
<p>You can view the configuration list for a particular resource by extracting element <code>/Resource/RCList</code> from column <code>RES</code> of view <code>RESOURCE_VIEW</code>, or by using PL/SQL procedure <code>DBMS_RESCONFIG.getResConfigPath</code>. You can view the configuration list for the repository as a whole by using PL/SQL procedure <code>DBMS_RESCONFIG.getRepositoryResConfigPath</code>. To modify the repository-wide configuration list, you must be granted role <code><a id="sthref1424"></a><a id="sthref1425"></a>XDBADMIN</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABGGABJ">"Configuration Element defaultChildConfig"</a></div>
</div>
<!-- class="sect1" -->
<a id="BABFEBBI"></a>
<div id="ADXDB5324" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring a Resource</h2>
<p>Follow these steps to configure an Oracle XML&nbsp;DB Repository resource or the repository as a whole (all resources):</p>
<ol>
<li>
<p>Create a resource configuration file that defines the configuration. This XML file must conform to XML schema <code>XDBResConfig.xsd</code>.</p>
</li>
<li>
<p>Add the resource configuration file to the repository as a resource in its own right: a configuration resource. You can use PL/SQL function <code>DBMS_XDB.createResource</code> to do this.</p>
</li>
<li>
<p>Map this configuration resource to the resources that it configures, or to the repository if it applies to all resources. Use PL/SQL procedure <code>DBMS_RESCONFIG.addResConfig</code> or <code>DBMS_RESCONFIG.appendResConfig</code> to map an individual resource. Use <code>DBMS_RESCONFIG.addRepositoryResConfig</code> to map the repository as a whole.</p>
</li>
<li>
<p>Commit.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before performing any operation that uses a resource configuration file, you must perform a <code>COMMIT</code> operation. Until you do that, an ORA-22881 "dangling REF" error is raised whenever you use the configuration file.</div>
<p>PL/SQL package <code>DBMS_RESCONFIG</code> provides additional procedures to delete a configuration from a configuration list, obtain a list of paths to configurations in a configuration list, and more.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you delete a resource configuration file that is referenced by another resource, a dangling <code>REF</code> error is raised whenever an attempt is made to access the configured resource.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABHCJBB">Example 22-1</a> for an example of a simple resource configuration file</p>
</li>
<li>
<p><a href="xdb_repos_events.htm#BABDDJIB">"Configuring Repository Events"</a> for complete examples of configuring resources</p>
</li>
<li>
<p><a href="apphxdb.htm#BABEEABF">"XDBResConfig.xsd: XML Schema for Resource Configuration"</a></p>
</li>
<li>
<p><a class="olink ARPLS199" href="../../appdev.112/e40758/d_resconfig.htm#ARPLS199"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about package <code>DBMS_RESCONFIG</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABBJADB"></a>
<div id="ADXDB5325" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Common Configuration Parameters</h2>
<p>This section describes commonly used configuration parameters, that is, elements in a configuration file. Parameters specific to particular types of configuration are described elsewhere.</p>
<div id="ADXDB5326" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1426"></a>
<h3 class="sect2">Configuration Element ResConfig</h3>
<p>The top-level element of a resource configuration file is <code>ResConfig</code>. Besides <code>namespace</code> and <code>schemaLocation</code> attributes, it can contain an optional <code>enable</code> attribute. Set the value of attribute <code>enable</code> to <code>false</code> to disable the resource configuration file, so that it has no effect on the resources mapped to it. This can be useful for debugging or disabling an application. The default value of <code>enable</code>, used if the attribute is not present, is <code>true</code>.</p>
</div>
<!-- class="sect2" -->
<a id="BABGGABJ"></a>
<div id="ADXDB5327" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuration Element defaultChildConfig</h3>
<p>This configuration element applies to folders only. It holds configuration information that you want to be applied to all child resources in the folder. Element <code>defaultChildConfig</code> has one or more <code>configuration</code> child elements, each of which defines a possible configuration for resources in the folder.</p>
<p>A <code>configuration</code> element has the following child elements:</p>
<ul>
<li>
<p><code>pre-condition</code> (optional) &ndash; This element specifies a condition that must be met before the resource configuration identified by the <code>path</code> element (see next) can be used as the default configuration. If element <code>pre-condition</code> is absent, then the resource configuration file targeted by <code>path</code> applies to all resources in the folder. That is, the precondition is treated as true.</p>
<p>A <code>pre-condition</code> element has an optional <code>existsNode</code> child element. An <code>existsNode</code> element has a required <code>XPath</code> child element and an optional <code>namespace</code> child element, both strings. These define an XPath 1.0 expression and a namespace, respectively, that are used to check the existence of a resource. If that resource exists, then the precondition is satisfied, so the resource configuration file identified by <code>path</code> is used as a default resource configuration file for all child resources in the folder. The first component of the <code>XPath</code> element must be <code>Resource</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
A complex XPath expression for element <code>XPath</code> can impact performance negatively.</div>
<p>If multiple <code>configuration</code> elements have true preconditions, then each of the resource configuration files identified by their associated <code>path</code> elements applies to all of the resources in the folder.</p>
</li>
<li>
<p><code>path</code> (required) &ndash; This element specifies an absolute repository path to a resource configuration file that is to be used as the default configuration for a new resource whenever the precondition specified by element <code>pre-condition</code> is satisfied.</p>
</li>
</ul>
<p>Typically, the value of the <code>path</code> element is a path to the current resource configuration file, that is, the file that contains the <code>path</code> element. <a href="#BABHCJBB">Example 22-1</a> illustrates this, assuming that the resource configuration file is located at path <code>/cm/app_rc.xml</code> in the repository. In this example, the precondition is that there be a <code>Resource</code> node whose content is of type <code>xml</code>. When that precondition is met, the resource configuration file in <a href="#BABHCJBB">Example 22-1</a> applies to all resources in same folder as the configuration file (<code>/cm/app_rc.xml</code>).</p>
<div id="ADXDB5328" class="example">
<p class="titleinexample"><a id="BABHCJBB"></a>Example 22-1 Resource Configuration File</p>
<pre>
&lt;ResConfig xmlns="http://xmlns.oracle.com/xdb/XDBResConfig.xsd"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://xmlns.oracle.com/xdb/XDBResConfig.xsd
                               http://xmlns.oracle.com/xdb/XDBResConfig.xsd"&gt;
  &lt;defaultChildConfig&gt;
    &lt;configuration&gt;
      &lt;pre-condition&gt;
        &lt;existsNode&gt;
          &lt;XPath&gt;/Resource[ContentType="xml"]&lt;/XPath&gt;
        &lt;/existsNode&gt;
      &lt;/pre-condition&gt;
      &lt;path&gt;<span class="bold">/cm/app_rc.xml</span>&lt;path&gt;
    &lt;/configuration&gt;
  &lt;/defaultChildConfig&gt;
&lt;/ResConfig&gt;
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="ADXDB5329" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1427"></a>
<h3 class="sect2">Configuration Element applicationData</h3>
<p>You use element <code>applicationData</code> to store application-specific data. An application typically passes this data to an event handler when the handler is run. You can use any XML content that you want inside element <code>applicationData</code>. An event handler uses PL/SQL function <code>DBMS_XEVENT.getApplicationData</code> or Java function <code>oracle.xdb.XMLType.getApplicationData</code> to access the data in the <code>applicationData</code> of the resource configuration file for the event listener.</p>
<p><a href="#BABDIEAC">Example 22-2</a> shows an <code>applicationData</code> element for use with an Oracle Spatial application.</p>
<div id="ADXDB5330" class="example">
<p class="titleinexample"><a id="BABDIEAC"></a>Example 22-2 applicationData Element</p>
<pre>
&lt;applicationData&gt;
  &lt;spatial:data xmlns:spatial="http://oracle/cartridge/spatial.xsd"&gt;
    &lt;spatial:xpos&gt;5&lt;/spatial:xpos&gt;
    &lt;spatial:ypos&gt;10&lt;/spatial:ypos&gt;
  &lt;/spatial:data&gt;
&lt;/applicationData&gt;
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ARPLS210" href="../../appdev.112/e40758/d_xevent.htm#ARPLS210"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about PL/SQL function <code>DBMS_XEVENT.getApplicationData</code></p>
</li>
<li>
<p><a class="olink JAXML" href="../e10769/toc.htm"><span class="italic">Oracle Database XML Java API Reference</span></a>, class <code>XDBRepositoryEvent</code> for information about Java function <code>oracle.xdb.XMLType.getApplicationData</code></p>
</li>
<li>
<p><a href="xdb_repos_events.htm#BABDEGAA">Example 30-1, "Resource Configuration File for Java Event Listeners with Preconditions"</a> for an example of a resource configuration file for event listeners</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1019">
<tr>
<td class="cellalignment1028">
<table class="cellalignment1024">
<tr>
<td class="cellalignment1023"><a href="xdb16fol.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1023"><a href="xdb_xlink.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1030">
<table class="cellalignment1022">
<tr>
<td class="cellalignment1023"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1023"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1023"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1023"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1023"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1023"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
