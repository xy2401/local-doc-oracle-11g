<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>CREATE PACKAGE BODY Statement</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1032" />
<meta name="dcterms.created" content="2014-12-05T11:53:5Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Language Reference" />
<meta name="dcterms.identifier" content="E25519-13" />
<meta name="dcterms.isVersionOf" content="LNPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="create_package.htm" title="Previous" type="text/html" />
<link rel="Next" href="create_procedure.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25519.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">82/99</span> <!-- End Header --><a id="i2065383"></a>
<div id="LNPLS01372" class="refsect1">
<h1 class="refsect1">CREATE PACKAGE BODY Statement</h1>
<p>The <code dir="ltr">CREATE</code> <code dir="ltr">PACKAGE</code> <code dir="ltr">BODY</code> statement <a id="sthref1340"></a><a id="sthref1341"></a>creates or replaces the body of a stored <span class="bold">package</span>, which is an encapsulated collection of related procedures, stored functions, and other program objects stored as a unit in the database. The <span class="bold">package body</span> defines these objects. The <span class="bold">package</span> <span class="bold">specification</span>, defined in an earlier <code dir="ltr">CREATE</code> <code dir="ltr">PACKAGE</code> statement, declares these objects.</p>
<p>Packages are an alternative to creating procedures and functions as standalone schema objects.</p>
<p class="subhead2"><a id="LNPLS1944"></a>Topics</p>
<ul>
<li>
<p><a href="#BABFJDGG">Prerequisites</a></p>
</li>
<li>
<p><a href="#BABFJIFI">Syntax</a></p>
</li>
<li>
<p><a href="#BABDHHJI">Semantics</a></p>
</li>
<li>
<p><a href="#i2065503">Examples</a></p>
</li>
<li>
<p><a href="#BABJCAAC">Related Topics</a></p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABFJDGG"></a>Prerequisites</p>
<p>To create or replace a package in your schema, you must have the <code dir="ltr">CREATE</code> <code dir="ltr">PROCEDURE</code> system privilege. To create or replace a package in another user's schema, you must have the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">PROCEDURE</code> system privilege. In both cases, the package body must be created in the same schema as the package.</p>
<p>To embed a <code dir="ltr">CREATE</code> <code dir="ltr">PACKAGE</code> <code dir="ltr">BODY</code> statement inside an the database precompiler program, you must terminate the statement with the keyword <code dir="ltr">END-EXEC</code> followed by the embedded SQL statement terminator for the specific language.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABFJIFI"></a>Syntax</p>
<p class="subhead2"><a id="BABCGGDB"></a><a id="LNPLS1521"></a><span class="italic">create_package_body</span> ::=</p>
<img width="645" height="138" src="img/create_package_body.gif" alt="Description of create_package_body.gif follows" /><br />
<a id="sthref1342" href="img_text/create_package_body.htm">Description of the illustration create_package_body.gif</a><br />
<br />
<p>See <a href="block.htm#CJAIABJJ">"<span class="italic">declare_section</span> ::="</a></p>
<p class="subhead2"><a id="LNPLS1945"></a><span class="italic">initialize_section</span> ::=</p>
<img width="341" height="166" src="img/initialize_section.gif" alt="Description of initialize_section.gif follows" /><br />
<a id="sthref1343" href="img_text/initialize_section.htm">Description of the illustration initialize_section.gif</a><br />
<br />
<p>See:</p>
<ul>
<li>
<p><a href="block.htm#CJACJBCH">"<span class="italic">statement</span> ::="</a></p>
</li>
<li>
<p><a href="block.htm#CJADJGJE">"<span class="italic">pragma</span> ::="</a></p>
</li>
<li>
<p><a href="exception_handler.htm#CJAEIGAB">"<span class="italic">exception_handler</span> ::="</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABDHHJI"></a>Semantics</p>
<p class="subhead2"><a id="LNPLS1946"></a>OR REPLACE</p>
<p>Re-creates the package body if it exists, and recompiles it.</p>
<p>Users who were granted privileges on the package body before it was redefined can still access the package without being regranted the privileges.</p>
<p class="subhead2"><a id="LNPLS1523"></a><span class="italic">schema</span></p>
<p>Name of the schema containing the package. <span class="bold">Default:</span> your schema.</p>
<p class="subhead2"><a id="LNPLS1524"></a><span class="italic">package_name</span></p>
<p>Name of the package to be created.</p>
<p class="subhead2"><a id="LNPLS1525"></a><span class="italic">declare_section</span></p>
<p>Has a definition for every cursor and subprogram declaration in the package specification. The headings of corresponding subprogram declarations and definitions must match word for word, except for white space.</p>
<p>Can also declare and define private items that can be referenced only from inside the package.</p>
<p><a id="LNPLS1947"></a><span class="subhead3">Restriction on <span class="italic">declare_section</span>&nbsp;</span>The <code dir="ltr">AUTONOMOUS_TRANSACTION</code> pragma cannot appear here.</p>
<p class="subhead2"><a id="LNPLS1948"></a><span class="italic">initialize_section</span></p>
<p>Initializes variables and does any other one-time setup steps.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i2065503"></a>Examples</p>
<p><a id="i2098638"></a><a id="LNPLS01381"></a><span class="subhead3">Creating a Package Body: Example&nbsp;</span>This statement creates the body of the <code dir="ltr">emp_mgmt</code> package created in <a href="create_package.htm#i2088318">"Creating a Package: Example"</a>.</p>
<pre dir="ltr">
CREATE OR REPLACE PACKAGE BODY emp_mgmt AS 
   <span class="italic">tot_emps NUMBER; </span>
   tot_depts NUMBER; 
FUNCTION hire 
   (last_name VARCHAR2, job_id VARCHAR2, 
    manager_id NUMBER, salary NUMBER, 
    commission_pct NUMBER, department_id NUMBER) 
   RETURN NUMBER IS new_empno NUMBER; 
BEGIN 
   SELECT employees_seq.NEXTVAL 
      INTO new_empno 
      FROM DUAL; 
   INSERT INTO employees 
      VALUES (new_empno, 'First', 'Last','first.example@example.com', 
              '(415)555-0100','18-JUN-02','IT_PROG',90000000,00, 
              100,110); 
      tot_emps := tot_emps + 1; 
   RETURN(new_empno); 
END; 
FUNCTION create_dept(department_id NUMBER, location_id NUMBER) 
   RETURN NUMBER IS 
      new_deptno NUMBER; 
   BEGIN 
      SELECT departments_seq.NEXTVAL 
         INTO new_deptno 
         FROM dual; 
      INSERT INTO departments 
         VALUES (new_deptno, 'department name', 100, 1700); 
      tot_depts := tot_depts + 1; 
      RETURN(new_deptno); 
   END; 
PROCEDURE remove_emp (employee_id NUMBER) IS 
   BEGIN 
      DELETE FROM employees 
      WHERE employees.employee_id = remove_emp.employee_id; 
      tot_emps := tot_emps - 1; 
   END; 
PROCEDURE remove_dept(department_id NUMBER) IS 
   BEGIN 
      DELETE FROM departments 
      WHERE departments.department_id = remove_dept.department_id; 
      tot_depts := tot_depts - 1; 
      SELECT COUNT(*) INTO tot_emps FROM employees; 
   END; 
PROCEDURE increase_sal(employee_id NUMBER, salary_incr NUMBER) IS 
   curr_sal NUMBER; 
   BEGIN 
      SELECT salary INTO curr_sal FROM employees 
      WHERE employees.employee_id = increase_sal.employee_id; 
      IF curr_sal IS NULL 
         THEN RAISE no_sal; 
      ELSE 
         UPDATE employees 
         SET salary = salary + salary_incr 
         WHERE employee_id = employee_id; 
      END IF; 
   END; 
PROCEDURE increase_comm(employee_id NUMBER, comm_incr NUMBER) IS 
   curr_comm NUMBER; 
   BEGIN 
      SELECT commission_pct 
      INTO curr_comm 
      FROM employees 
      WHERE employees.employee_id = increase_comm.employee_id; 
      IF curr_comm IS NULL 
         THEN RAISE no_comm; 
      ELSE 
         UPDATE employees 
         SET commission_pct = commission_pct + comm_incr; 
      END IF; 
   END; 
END emp_mgmt; 
/ 
</pre>
<p>The package body defines the public program objects declared in the package specification:</p>
<ul>
<li>
<p>The functions <code dir="ltr">hire</code> and <code dir="ltr">create_dept</code></p>
</li>
<li>
<p>The procedures <code dir="ltr">remove_emp</code>, <code dir="ltr">remove_dept</code>, <code dir="ltr">increase_sal</code>, and <code dir="ltr">increase_comm</code></p>
</li>
</ul>
<p>These objects are declared in the package specification, so they can be called by application programs, procedures, and functions outside the package. For example, if you have access to the package, you can create a procedure <code dir="ltr">increase_all_comms</code> separate from the <code dir="ltr">emp_mgmt</code> package that invokes the <code dir="ltr">increase_comm</code> procedure.</p>
<p>These objects are defined in the package body, so you can change their definitions without causing the database to invalidate dependent schema objects. For example, if you subsequently change the definition of <code dir="ltr">hire</code>, then the database need not recompile <code dir="ltr">increase_all_comms</code> before running it.</p>
<p>The package body in this example also declares private program objects, the variables <code dir="ltr">tot_emps</code> and <code dir="ltr">tot_depts</code>. These objects are declared in the package body rather than the package specification, so they are accessible to other objects in the package, but they are not accessible outside the package. For example, you cannot develop an application that explicitly changes the value of the variable <code dir="ltr">tot_depts</code>. However, the function <code dir="ltr">create_dept</code> is part of the package, so <code dir="ltr">create_dept</code> can change the value of <code dir="ltr">tot_depts</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABJCAAC"></a>Related Topics</p>
<p class="subhead2"><a id="LNPLS1949"></a>In this chapter:</p>
<ul>
<li>
<p><a href="create_package.htm#i2091914">"CREATE PACKAGE Statement"</a></p>
</li>
</ul>
<p class="subhead2"><a id="LNPLS1950"></a>In other chapters:</p>
<ul>
<li>
<p><a href="packages.htm#CIHIJECJ">Chapter 10, "PL/SQL Packages"</a></p>
</li>
<li>
<p><a href="packages.htm#i2416">"Package Body"</a></p>
</li>
<li>
<p><a href="function.htm#i34368">"Function Declaration and Definition"</a></p>
</li>
<li>
<p><a href="procedure.htm#i35564">"Procedure Declaration and Definition"</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1082">
<tr>
<td class="cellalignment1091">
<table class="cellalignment1087">
<tr>
<td class="cellalignment1086"><a href="create_package.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1086"><a href="create_procedure.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1094">
<table class="cellalignment1085">
<tr>
<td class="cellalignment1086"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1086"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1086"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1086"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1086"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1086"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
