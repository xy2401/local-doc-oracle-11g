<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_ADDM</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:54:57Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="c_ulex.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_advrwr.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">20/265</span> <!-- End Header -->
<div id="ARPLS232" class="chapter"><a id="CACIFHFA"></a>
<h1 class="chapter"><span class="secnum">16</span> DBMS_ADDM</h1>
<p>The DBMS_ADDM package facilitates the use of Advisor functionality regarding the Automatic Database Diagnostic Monitor.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span> for more information about <a class="olink RACAD721" href="../../rac.112/e41960/monitor.htm#RACAD721">"Automatic Workload Repository in Oracle Real Application Clusters Environments"</a></p>
</li>
<li>
<p><span class="italic">Oracle Database Performance Tuning Guide</span> for more information about <a class="olink PFGRF026" href="../../server.112/e41573/diag.htm#PFGRF026">"Automatic Performance Diagnostics"</a></p>
</li>
</ul>
</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CIAHAFDJ">Using DBMS_ADDM</a></p>
<ul>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#CACDBJFG">Summary of DBMS_ADDM Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CIAHAFDJ"></a>
<hr />
<div id="ARPLS65039" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_ADDM</h2>
<ul>
<li>
<p><a href="#CIAJHDCJ">Security Model</a></p>
</li>
</ul>
<div id="ARPLS65040" class="refsect2"><a id="CIAJHDCJ"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p>The <code>DBMS_ADDM</code> package runs with the caller's permission, not the definer's, and then applies the security constraints required by the <code>DBMS_ADVISOR</code> package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The <a href="d_advis.htm#CIHIGAED">DBMS_ADVISOR</a> package for more information about "<a href="d_advis.htm#CHDBHGFE">Security Model</a>".</div>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CACDBJFG"></a>
<hr />
<div id="ARPLS65041" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_ADDM Subprograms</h2>
<div id="ARPLS65042" class="tblformal">
<p class="titleintable"><a id="sthref50"></a><a id="sthref51"></a>Table 16-1 DBMS_ADDM Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_ADDM Package Subprograms" summary="DBMS_ADDMPackage Subprograms" dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#CACECAHI">ANALYZE_DB Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p>Creates an ADDM task for analyzing in database analysis mode and executes it</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#CACHCIHE">ANALYZE_INST Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p>Creates an ADDM task for analyzing in instance analysis mode and executes it.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#CACEDJDH">ANALYZE_PARTIAL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p>Creates an ADDM task for analyzing a subset of instances in partial analysis mode and executes it</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><a href="#CACIBFDB">DELETE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p>Deletes an already created ADDM task (of any kind)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t4" headers="r1c1-t4">
<p><a href="#CACHFIJC">DELETE_FINDING_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c2-t4">
<p>Deletes a finding directive</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t4" headers="r1c1-t4">
<p><a href="#CACBBIJJ">DELETE_PARAMETER_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c2-t4">
<p>Deletes a parameter directive</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t4" headers="r1c1-t4">
<p><a href="#CACGDEED">DELETE_SEGMENT_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c2-t4">
<p>Deletes a segment directive</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t4" headers="r1c1-t4">
<p><a href="#CACGGBBF">DELETE_SQL_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t4 r1c2-t4">
<p>Deletes a SQL directive</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t4" headers="r1c1-t4">
<p><a href="#CIAGBAFE">GET_ASH_QUERY Function</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t4 r1c2-t4">
<p>Returns a string containing the SQL text of an ASH query identifying the rows in ASH with impact for the finding</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t4" headers="r1c1-t4">
<p><a href="#CACJDCBJ">GET_REPORT Function</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t4 r1c2-t4">
<p>Retrieves the default text report of an executed ADDM task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t4" headers="r1c1-t4">
<p><a href="#CACBDJAI">INSERT_FINDING_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t4 r1c2-t4">
<p>Creates a directive to limit reporting of a specific finding type.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t4" headers="r1c1-t4">
<p><a href="#CACIFJED">INSERT_PARAMETER_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t4 r1c2-t4">
<p>Creates a directive to prevent ADDM from creating actions to alter the value of a specific system parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t4" headers="r1c1-t4">
<p><a href="#CACECFCJ">INSERT_SEGMENT_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t4 r1c2-t4">
<p>Creates a directive to prevent ADDM from creating actions to "run Segment Advisor" for specific segments</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t4" headers="r1c1-t4">
<p><a href="#CACGEACB">INSERT_SQL_DIRECTIVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t4 r1c2-t4">
<p>Creates a directive to limit reporting of actions on specific SQL</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS65043" class="refsect2"><a id="CACECAHI"></a>
<hr />
<h3 class="refsect2"><a id="sthref52"></a>ANALYZE_DB Procedure</h3>
<p>This procedure creates an ADDM task for analyzing in database analysis mode and executes it.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref53"></a>Syntax</p>
<pre>
DBMS_ADDM.ANALYZE_DB (
   task_name           IN OUT VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   db_id               IN     NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref54"></a>Parameters</p>
<div id="ARPLS65044" class="tblformal">
<p class="titleintable"><a id="sthref55"></a><a id="sthref56"></a>Table 16-2 ANALYZE_DB Procedure Parameters</p>
<table class="cellalignment1229" title="ANALYZE_DB Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.ANALYZE_DB subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Parameter</th>
<th class="cellalignment1227" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p>Name of the task to be created</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t5" headers="r1c1-t5">
<p><code>begin_snapshot</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c2-t5">
<p>Number of the snapshot that starts the analysis period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t5" headers="r1c1-t5">
<p><code>end_snapshot</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t5 r1c2-t5">
<p>Number of the snapshot that ends the analysis period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t5" headers="r1c1-t5">
<p><code>db_id</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t5 r1c2-t5">
<p>Database ID for the database you to analyze. By default, this is the database currently connected</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref57"></a>Return Values</p>
<p>The name of the created task is returned in the <code>task_name</code> parameter. It may be different from the value that is given as input (only in cases that name is already used by another task).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref58"></a>Examples</p>
<p>To create an ADDM task in database analysis mode and execute it, with its name in variable <code>tname</code>:</p>
<pre>
var tname VARCHAR2(60);
BEGIN
  :tname := 'my_database_analysis_mode_task';
  DBMS_ADDM.ANALYZE_DB(:tname, 1, 2);
END
</pre>
<p>To see a report:</p>
<pre>
SET LONG 100000
SET PAGESIZE 50000
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre>
<p>Note that the return type of a report is a <code>CLOB</code>, formatted to fit line size of 80.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65045" class="refsect2"><a id="CACHCIHE"></a>
<hr />
<h3 class="refsect2"><a id="sthref59"></a>ANALYZE_INST Procedure</h3>
<p>This procedure creates an ADDM task for analyzing in instance analysis mode and executes it.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref60"></a>Syntax</p>
<pre>
DBMS_ADDM.ANALYZE_INST (
   task_name           IN OUT VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   instance_number     IN     NUMBER := NULL,
   db_id               IN     NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref61"></a>Parameters</p>
<div id="ARPLS65046" class="tblformal">
<p class="titleintable"><a id="sthref62"></a><a id="sthref63"></a>Table 16-3 ANALYZE_INST Procedure Parameters</p>
<table class="cellalignment1229" title="ANALYZE_INST Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.ANALYZE_INST subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Parameter</th>
<th class="cellalignment1227" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p>Name of the task to be created</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><code>begin_snapshot</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p>Number of the snapshot that starts the analysis period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><code>end_snapshot</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p>Number of the snapshot that ends the analysis period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t6" headers="r1c1-t6">
<p><code>instance_number</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t6 r1c2-t6">
<p>Number of the instance to analyze. By default it is the instance currently connected</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t6" headers="r1c1-t6">
<p><code>db_id</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t6 r1c2-t6">
<p>Database ID for the database you to analyze. By default, this is the database currently connected</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref64"></a>Return Values</p>
<p>The name of the created task is returned in the <code>task_name</code> parameter. It may be different from the value that is given as input (only in cases that name is already used by another task).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref65"></a>Usage Notes</p>
<p>On single instance systems (when not using Oracle RAC) the resulting task is identical to using the ANALYZE_DB procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref66"></a>Examples</p>
<p>To create an ADDM task in instance analysis mode and execute it, with its name in variable <code>tname</code>:</p>
<pre>
var tname VARCHAR2(60);
BEGIN
  :tname := 'my_instance_analysis_mode_task';
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END
</pre>
<p>To see a report:</p>
<pre>
SET LONG 100000
SET PAGESIZE 50000
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre>
<p>Note that the return type of a report is a <code>CLOB</code>, formatted to fit line size of 80.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65047" class="refsect2"><a id="CACEDJDH"></a>
<hr />
<h3 class="refsect2"><a id="sthref67"></a>ANALYZE_PARTIAL Procedure</h3>
<p>This procedure creates an ADDM task for analyzing a subset of instances in partial analysis mode and executes it.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref68"></a>Syntax</p>
<pre>
DBMS_ADDM.ANALYZE_PARTIAL (
   task_name           IN OUT VARCHAR2,
   instance_numbers    IN     VARCHAR2,
   begin_snapshot      IN     NUMBER,
   end_snapshot        IN     NUMBER,
   db_id               IN     NUMBER := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref69"></a>Parameters</p>
<div id="ARPLS65048" class="tblformal">
<p class="titleintable"><a id="sthref70"></a><a id="sthref71"></a>Table 16-4 ANALYZE_PARTIAL Procedure Parameters</p>
<table class="cellalignment1229" title="ANALYZE_PARTIAL Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.ANALYZE_PARTIAL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Parameter</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Name of the task to be created</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><code>instance_number</code>s</p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>Comma separated list of instance numbers to analyze</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><code>begin_snapshot</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>Number of the snapshot that starts the analysis period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><code>end_snapshot</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>Number of the snapshot that ends the analysis period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t7" headers="r1c1-t7">
<p><code>db_id</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t7 r1c2-t7">
<p>Database ID for the database you to analyze. By default, this is the database currently connected</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref72"></a>Return Values</p>
<p>The name of the created task is returned in the <code>task_name</code> parameter. It may be different from the value that is given as input (only in cases that name is already used by another task).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref73"></a>Examples</p>
<p>To create an ADDM task in partial analysis mode and execute it, with its name in variable <code>tname</code>:</p>
<pre>
var tname VARCHAR2(60);
BEGIN
  :tname := 'my_partial_analysis_modetask';
  DBMS_ADDM.ANALYZE_PARTIAL(:tname, '1,2,3', 1, 2);
END
</pre>
<p>To see a report:</p>
<pre>
SET LONG 100000
SET PAGESIZE 50000
SELECT DBMS_ADDM.GET_REPORT(:tname) FROM DUAL;
</pre>
<p>Note that the return type of a report is a <code>CLOB</code>, formatted to fit line size of 80.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65049" class="refsect2"><a id="CACIBFDB"></a>
<hr />
<h3 class="refsect2"><a id="sthref74"></a>DELETE Procedure</h3>
<p>This procedure deletes an already created ADDM task (of any kind). For database analysis mode and partial analysis mode this deletes the local tasks associated with the main task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref75"></a>Syntax</p>
<pre>
DBMS_ADDM.DELETE (
   task_name           IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref76"></a>Parameters</p>
<div id="ARPLS65050" class="tblformal">
<p class="titleintable"><a id="sthref77"></a><a id="sthref78"></a>Table 16-5 DELETE Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Parameter</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>Name of the task to be deleted</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref79"></a>Examples</p>
<pre>
BEGIN
  DBMS_ADDM.DELETE ('my_partial_analysis_mode_task');
END
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65051" class="refsect2"><a id="CACHFIJC"></a>
<hr />
<h3 class="refsect2"><a id="sthref80"></a>DELETE_FINDING_DIRECTIVE Procedure</h3>
<p>This procedure deletes a finding directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref81"></a>Syntax</p>
<pre>
DBMS_ADDM.DELETE_FINDING_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref82"></a>Parameters</p>
<div id="ARPLS65052" class="tblformal">
<p class="titleintable"><a id="sthref83"></a><a id="sthref84"></a>Table 16-6 DELETE_FINDING_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_FINDING_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_FINDING_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Parameter</th>
<th class="cellalignment1227" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t9" headers="r1c1-t9">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c2-t9">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65053" class="refsect2"><a id="CACBBIJJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref85"></a>DELETE_PARAMETER_DIRECTIVE Procedure</h3>
<p>This procedure deletes a parameter directive. This removes a specific system directive for parameters. Subsequent ADDM tasks are not affected by this directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref86"></a>Syntax</p>
<pre>
DBMS_ADDM.DELETE_PARAMETER_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref87"></a>Parameters</p>
<div id="ARPLS65054" class="tblformal">
<p class="titleintable"><a id="sthref88"></a><a id="sthref89"></a>Table 16-7 DELETE_PARAMETER_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_PARAMETER_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_PARAMETER_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Parameter</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref90"></a>Examples</p>
<pre>
BEGIN
   DBMS_ADDM.DELETE_PARAMETER_DIRECTIVE (NULL,'my Parameter directive'); 
END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65055" class="refsect2"><a id="CACGDEED"></a>
<hr />
<h3 class="refsect2"><a id="sthref91"></a>DELETE_SEGMENT_DIRECTIVE Procedure</h3>
<p>This procedure deletes a segment directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref92"></a>Syntax</p>
<pre>
DBMS_ADDM.DELETE_SEGMENT_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref93"></a>Parameters</p>
<div id="ARPLS65056" class="tblformal">
<p class="titleintable"><a id="sthref94"></a><a id="sthref95"></a>Table 16-8 DELETE_SEGMENT_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_SEGMENT_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_SEGMENT_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Parameter</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t11" headers="r1c1-t11">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c2-t11">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65057" class="refsect2"><a id="CACGGBBF"></a>
<hr />
<h3 class="refsect2"><a id="sthref96"></a>DELETE_SQL_DIRECTIVE Procedure</h3>
<p>This procedure deletes a SQL directive.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref97"></a>Syntax</p>
<pre>
DBMS_ADDM.DELETE_SQL_DIRECTIVE (
   task_name           IN VARCHAR2,
   dir_name            IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref98"></a>Parameters</p>
<div id="ARPLS65058" class="tblformal">
<p class="titleintable"><a id="sthref99"></a><a id="sthref100"></a>Table 16-9 DELETE_SQL_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_SQL_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.DELETE_SQL_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it is a system directive.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72964" class="refsect2"><a id="CIAGBAFE"></a>
<hr />
<h3 class="refsect2"><a id="sthref101"></a>GET_ASH_QUERY Function</h3>
<p>The function returns a string containing the SQL text of an ASH query identifying the rows in ASH with impact for the finding. For most types of findings this identifies the exact rows in ASH corresponding to the finding. For some types of findings the query is an approximation and should not be used for exact identification of the finding's impact or the finding's specific activity.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref102"></a>Syntax</p>
<pre>
DBMS_ADDM.GET_ASH_QUERY (
   task_name           IN   VARCHAR2,
   finding_id          IN   NUMBER)
  RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref103"></a>Parameters</p>
<div id="ARPLS72965" class="tblformal">
<p class="titleintable"><a id="sthref104"></a><a id="sthref105"></a>Table 16-10 GET_ASH_QUERY Function Parameters</p>
<table class="cellalignment1229" title="GET_ASH_QUERY Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.GET_ASH_QUERY subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t13">Parameter</th>
<th class="cellalignment1227" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t13" headers="r1c1-t13">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c2-t13">
<p>Name of the task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t13" headers="r1c1-t13">
<p><code>finding</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t13 r1c2-t13">
<p>ID of the finding within the task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref106"></a>Return Values</p>
<p>A <code>VARCHAR</code> containing an ASH query identifying the rows in ASH with impact for the finding</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65059" class="refsect2"><a id="CACJDCBJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref107"></a>GET_REPORT Function</h3>
<p>This function retrieves the default text report of an executed ADDM task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref108"></a>Syntax</p>
<pre>
DBMS_ADDM.GET_REPORT (
   task_name           IN VARCHAR2)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref109"></a>Parameters</p>
<div id="ARPLS65060" class="tblformal">
<p class="titleintable"><a id="sthref110"></a><a id="sthref111"></a>Table 16-11 GET_REPORT Function Parameters</p>
<table class="cellalignment1229" title="GET_REPORT Function Parameters" summary="This table describes the Parameters of DBMS_ADDM.GET_REPORT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>Name of the task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref112"></a>Examples</p>
<pre>
Set long 1000000
Set pagesize 50000
SELECT DBMS_ADDM.GET_REPORT('my_partial_analysis_mode_task') FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65061" class="refsect2"><a id="CACBDJAI"></a>
<hr />
<h3 class="refsect2"><a id="sthref113"></a>INSERT_FINDING_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to limit reporting of a specific finding type. The directive can be created for a specific task (only when the task is in <code>INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref114"></a>Syntax</p>
<pre>
DBMS_ADDM.INSERT_FINDING_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   finding_name          IN VARCHAR2,
   min_active_sessions   IN NUMBER := 0,
   min_perc_impact       IN NUMBER := 0); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref115"></a>Parameters</p>
<div id="ARPLS65062" class="tblformal">
<p class="titleintable"><a id="sthref116"></a><a id="sthref117"></a>Table 16-12 INSERT_FINDING_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="INSERT_FINDING_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_FINDING_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t15" headers="r1c1-t15">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t15 r1c2-t15">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t15" headers="r1c1-t15">
<p><code>finding_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t15 r1c2-t15">
<p>Name of an ADDM finding to which this directive applies. All valid findings names appear in the <code>NAME</code> column of view <code>DBA_ADVISOR_FINDING_NAMES</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t15" headers="r1c1-t15">
<p><code>min_active_sessions</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t15 r1c2-t15">
<p>Minimal number of active sessions for the finding. If a finding has less than this number, it is filtered from the ADDM result.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t15" headers="r1c1-t15">
<p><code>min_perc_impact</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t15 r1c2-t15">
<p>Minimal number for the "percent impact" of the finding relative to total database time in the analysis period. If the finding's impact is less than this number, it is filtered from the ADDM result.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref118"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for 'Undersized SGA' findings. The result of <code>GET_REPORT</code> shows only an 'Undersized SGA' finding if the finding is responsible for at least 2 average active sessions during the analysis period, and this constitutes at least 10% of the total database time during that period.</p>
<pre>
var tname VARCHAR2(60);
BEGIN
  DBMS_ADDM.INSERT_FINDING_DIRECTIVE(
   NULL, 
   'Undersized SGA directive',
   'Undersized SGA', 
   2, 
   10); 
  :tname := 'my_instance_analysis_mode_task';
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing 'Undersized SGA' findings regardless of the directive:</p>
<pre>
SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, 'TEXT', 'ALL') FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65063" class="refsect2"><a id="CACIFJED"></a>
<hr />
<h3 class="refsect2"><a id="sthref119"></a>INSERT_PARAMETER_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to prevent ADDM from creating actions to alter the value of a specific system parameter. The directive can be created for a specific task (only when the task is in <code>INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref120"></a>Syntax</p>
<pre>
DBMS_ADDM.INSERT_PARAMETER_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   parameter_name        IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref121"></a>Parameters</p>
<div id="ARPLS65064" class="tblformal">
<p class="titleintable"><a id="sthref122"></a><a id="sthref123"></a>Table 16-13 INSERT_PARAMETER_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="INSERT_PARAMETER_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_PARAMETER_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Parameter</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t16" headers="r1c1-t16">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t16 r1c2-t16">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t16" headers="r1c1-t16">
<p><code>parameter_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t16 r1c2-t16">
<p>Specifies the parameter to use. Valid parameter names appear in <code>V$PARAMETER.</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref124"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for all actions that recommend modifying the parameter '<code>sga_target</code>'. The result of <code>GET_REPORT</code> does not show these actions.</p>
<pre>
var tname varchar2(60);
BEGIN
  DBMS_ADDM.INSERT_PARAMETER_DIRECTIVE(
   NULL,
   'my Parameter directive',
   'sga_target'); 
  :tname := 'my_instance_analysis_mode_task';
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing all actions regardless of the directive:</p>
<pre>
SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, 'TEXT', 'ALL') FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65065" class="refsect2"><a id="CACECFCJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref125"></a>INSERT_SEGMENT_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to prevent ADDM from creating actions to "run Segment Advisor" for specific segments. The directive can be created for a specific task (only when the task is in <code>INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref126"></a>Syntax</p>
<pre>
DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   owner_name            IN VARCHAR2,
   object_name           IN VARCHAR2 := NULL,
   sub_object_name       IN VARCHAR2 := NULL);
   
</pre>
<pre>
DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   object_number         IN NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref127"></a>Parameters</p>
<div id="ARPLS65066" class="tblformal">
<p class="titleintable"><a id="sthref128"></a><a id="sthref129"></a>Table 16-14 INSERT_SEGMENT_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="INSERT_SEGMENT_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t17">Parameter</th>
<th class="cellalignment1227" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t17" headers="r1c1-t17">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t17 r1c2-t17">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t17" headers="r1c1-t17">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t17 r1c2-t17">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t17" headers="r1c1-t17">
<p><code>owner_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t17 r1c2-t17">
<p>Specifies the owner of the segment/s to be filtered. A wildcard is allowed in the same syntax used for "like" constraints.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t17" headers="r1c1-t17">
<p><code>object_name</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t17 r1c2-t17">
<p>Name of the main object to be filtered. Again, wildcards are allowed. The default value of <code>NULL</code> is equivalent to a value of '%'.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t17" headers="r1c1-t17">
<p><code>sub_object_name</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t17 r1c2-t17">
<p>Name of the part of the main object to be filtered. This could be a partition name, or even sub partitions (separated by a '.'). Again, wildcards are allowed. The default value of <code>NULL</code> is equivalent to a value of '%'.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t17" headers="r1c1-t17">
<p><code>object_number</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t17 r1c2-t17">
<p>Object number of the <code>SEGMENT</code> that this directive is to filter, found in views <code>DBA_OBJECTS</code> or <code>DBA_SEGMENTS</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref130"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for all segments that belong to user <code>SCOTT</code>. The result of <code>GET_REPORT</code> does not show actions for running Segment advisor for segments that belong to <code>SCOTT</code>.</p>
<pre>
var tname VARCHAR2(60);
BEGIN
  DBMS_ADDM.INSERT_SEGMENT_DIRECTIVE(NULL,
                                     'my Segment directive',
                                     'SCOTT'); 
  :tname := 'my_instance_analysis_mode_task';
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing all actions regardless of the directive:</p>
<pre>
SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, 'TEXT', 'ALL') FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65067" class="refsect2"><a id="CACGEACB"></a>
<hr />
<h3 class="refsect2"><a id="sthref131"></a>INSERT_SQL_DIRECTIVE Procedure</h3>
<p>This procedure creates a directive to limit reporting of actions on specific SQL. The directive can be created for a specific task (only when the task is in <code>INITIAL</code> status), or for all subsequently created ADDM tasks (such as a system directive).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref132"></a>Syntax</p>
<pre>
DBMS_ADDM.INSERT_SQL_DIRECTIVE (
   task_name             IN VARCHAR2,
   dir_name              IN VARCHAR2,
   sql_id                IN VARCHAR2,
   min_active_sessions   IN NUMBER := 0,
   min_response_time     IN NUMBER := 0); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref133"></a>Parameters</p>
<div id="ARPLS65068" class="tblformal">
<p class="titleintable"><a id="sthref134"></a><a id="sthref135"></a>Table 16-15 INSERT_SQL_DIRECTIVE Procedure Parameters</p>
<table class="cellalignment1229" title="INSERT_SQL_DIRECTIVE Procedure Parameters" summary="This table describes the Parameters of DBMS_ADDM.INSERT_SQL_DIRECTIVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>Name of the task this directive applies to. If the value is <code>NULL</code>, it applies to all subsequently created ADDM Tasks.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>dir_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>Name of the directive. All directives must be given unique names.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t18" headers="r1c1-t18">
<p><code>sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t18 r1c2-t18">
<p>Identifies which SQL statement to filter. A valid value contains exactly 13 characters from '0' to '9' and 'a' to 'z'.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t18" headers="r1c1-t18">
<p><code>min_active_sessions</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t18 r1c2-t18">
<p>Minimal number of active sessions for the SQL. If a SQL action has less than this number, it is filtered from the ADDM result.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t18" headers="r1c1-t18">
<p><code>min_response_time</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t18 r1c2-t18">
<p>Minimal value for response time of the SQL (in microseconds). If the SQL had lower response time, it is filtered from the ADDM result.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref136"></a>Examples</p>
<p>A new ADDM task is created to analyze a local instance. However, it has special treatment for SQL with id 'abcd123456789'. The result of <code>GET_REPORT</code> shows only actions for that SQL (actions to tune the SQL, or to investigate application using it) if the SQL is responsible for at least 2 average active sessions during the analysis period, and the average response time was at least 1 second.</p>
<pre>
var tname VARCHAR2(60);
BEGIN
  DBMS_ADDM.INSERT_SQL_DIRECTIVE(
      NULL,
      'my SQL directive',
      'abcd123456789',
      2,
      1000000); 
  :tname := 'my_instance_analysis_mode_task';
  DBMS_ADDM.ANALYZE_INST(:tname, 1, 2);
END;
</pre>
<p>To see a report containing all actions regardless of the directive:</p>
<pre>
SELECT DBMS_ADVISOR.GET_TASK_REPORT(:tname, 'TEXT', 'ALL') FROM DUAL;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="c_ulex.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_advrwr.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
