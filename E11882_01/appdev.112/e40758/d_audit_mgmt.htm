<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_AUDIT_MGMT</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:1Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_assert.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_autosta.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">31/265</span> <!-- End Header -->
<div id="ARPLS241" class="chapter"><a id="BABJECFB"></a>
<h1 class="chapter"><span class="secnum">27</span> DBMS_AUDIT_MGMT</h1>
<p>The <code>DBMS_A<a id="sthref1055"></a>UDIT_MGMT</code> package provides subprograms to manage audit trail records. These subprograms enable audit administrators to manage the various audit trail types like database audit trails, operating system (OS) audit trails, and XML audit trails.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG006" href="../../network.112/e36292/auditing.htm#DBSEG006">"Verifying Security Access with Auditing"</a> in the <span class="italic">Oracle Database Security Guide</span> for more information on using the <code>DBMS_AUDIT_MGMT</code> package to manage audit trails</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABCAHGA">Using DBMS_AUDIT_MGMT</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Views</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABIEABE">Subprogram Groups</a></p>
<ul>
<li>
<p>Audit Trail Management Subprograms</p>
</li>
<li>
<p>Audit Trail Cleanup Subprograms</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABCAJBB">Summary of DBMS_AUDIT_MGMT Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABCAHGA"></a>
<hr />
<div id="ARPLS65393" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_AUDIT_MGMT</h2>
<p>This section contains topics which relate to using the <code>DBMS_AUDIT_MGMT</code> package. The following topics are included:</p>
<ul>
<li>
<p><a href="#BABGIIFC">Overview</a></p>
</li>
<li>
<p><a href="#BABJJBDE">Security Model</a></p>
</li>
<li>
<p><a href="#BABCEJJI">Constants</a></p>
</li>
<li>
<p><a href="#BABBFDJJ">Views</a></p>
</li>
</ul>
<div id="ARPLS65394" class="refsect2"><a id="BABGIIFC"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>Database auditing helps meet your database security and compliance requirements. Audit records are written to database tables, operating system (OS) files, or XML files depending on the <code>AUDIT_TRAIL</code> initialization parameter setting.</p>
<p>When <code>AUDIT_TRAIL</code> is set to <code>DB</code>, database records are written to the <code>AUD$</code> table. When <code>AUDIT_TRAIL</code> is set to OS, audit records are written to operating system files. When <code>AUDIT_TRAIL</code> is set to XML, audit records are written to operating system files in XML format.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG006" href="../../network.112/e36292/auditing.htm#DBSEG006">"Verifying Security Access with Auditing"</a> in the <span class="italic">Oracle Database Security Guide</span> for more background information on database auditing</div>
<p>It is important to manage your audit records properly in order to ensure efficient performance and disk space management. The <code>DBMS_AUDIT_MGMT</code> subprograms enable you to efficiently manage your audit trail records.</p>
<p>The <code>DBMS_AUDIT_MGMT</code> package provides a subprogram that allows you to move the database audit trail tables out of the <code>SYSTEM</code> tablespace. This improves overall database performance by reducing the load on the <code>SYSTEM</code> tablespace. It also enables you to dedicate an optimized tablespace for audit records.</p>
<p>The <code>DBMS_AUDIT_MGMT</code> subprograms also enable you to manage your operating system and XML audit files. You can define properties like the maximum size and age of an audit file. This enables you to keep the file sizes of OS and XML audit files in check.</p>
<p>The <code>DBMS_AUDIT_MGMT</code> subprograms enable you to perform cleanup operations on all audit trail types. Audit trails can be cleaned based on the Last Archive Timestamp value. The Last Archive Timestamp represents the timestamp of the most recent audit record that was securely archived.</p>
<p>The <code>DBMS_AUDIT_MGMT</code> package provides a subprogram that enables audit administrators to set the last archive timestamp for archived audit records. This subprogram can also be used by external archival systems to set the last archive timestamp.</p>
<p>The <code>DBMS_AUDIT_MGMT</code> subprograms also enable you to configure jobs that periodically delete audit trail records. The frequency with which these jobs should run can be controlled by the audit administrator.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65395" class="refsect2"><a id="BABJJBDE"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p>All <code>DBMS_AUDIT_MGMT</code> subprograms require the user to have <code>EXECUTE</code> privilege over the <code>DBMS_AUDIT_MGMT</code> package. The <code>SYSDBA</code> role has <code>EXECUTE</code> privileges on the package by default.</p>
<p>Oracle strongly recommends that only audit administrators should have <code>EXECUTE</code> privileges over the <code>DBMS_AUDIT_MGMT</code> package.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65396" class="refsect2"><a id="BABCEJJI"></a>
<hr />
<h3 class="refsect2">Constants</h3>
<p>The <code>DBMS_AUDIT_MGMT</code> package defines several enumerated constants that can be used for specifying parameter values. Enumerated constants must be prefixed with the package name, for example, <code>DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD</code>.</p>
<p>The <code>DBMS_AUDIT_MGMT</code> package includes the constants shown in the following tables:</p>
<ul>
<li>
<p><a href="#BABIDGEA">DBMS_AUDIT_MGMT Constants - Audit Trail Types</a></p>
</li>
<li>
<p><a href="#BABCEGDB">DBMS_AUDIT_MGMT Constants - Audit Trail Properties</a></p>
</li>
<li>
<p><a href="#BABJABFA">DBMS_AUDIT_MGMT Constants - Purge Job Status</a></p>
</li>
</ul>
<p>Audit trails can be classified based on whether audit records are written to database tables, operating system files, or XML files. <a href="#BABIDGEA">Table 27-1</a> lists the audit trail type constants.</p>
<div id="ARPLS65397" class="tblformal">
<p class="titleintable"><a id="sthref1056"></a><a id="BABIDGEA"></a>Table 27-1 DBMS_AUDIT_MGMT Constants - Audit Trail Types</p>
<table class="cellalignment1229" title="DBMS_AUDIT_MGMT Constants - Audit Trail Types" summary="This table describes audit trail type constants used by DBMS_AUDIT_MGMT subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Constant</th>
<th class="cellalignment1227" id="r1c2-t4">Type</th>
<th class="cellalignment1227" id="r1c3-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_ALL</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c3-t4">
<p>All audit trail types. This includes the standard database audit trail (<code>SYS.AUD$</code> and <code>SYS.FGA_LOG$</code> tables), operating system (OS) audit trail, and XML audit trail.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_AUD_STD</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c3-t4">
<p>Standard database audit records in the <code>SYS.AUD$</code> table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_DB_STD</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c3-t4">
<p>Both standard audit (<code>SYS.AUD$</code>) and FGA audit(<code>SYS.FGA_LOG$</code>) records</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_FGA_STD</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c3-t4">
<p>Standard database fine-grained auditing (FGA) records in the <code>SYS.FGA_LOG$</code> table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_FILES</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c3-t4">
<p>Both operating system (OS) and XML audit trails</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_OS</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c3-t4">
<p>Operating system audit trail. This refers to the audit records stored in operating system files.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t4" headers="r1c1-t4">
<p><code>AUDIT_TRAIL_XML</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c3-t4">
<p>XML audit trail. This refers to the audit records stored in XML files.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Audit trail properties determine the audit configuration settings. <a href="#BABCEGDB">Table 27-2</a> lists the constants related to audit trail properties.</p>
<div id="ARPLS65398" class="tblformal">
<p class="titleintable"><a id="sthref1057"></a><a id="BABCEGDB"></a>Table 27-2 DBMS_AUDIT_MGMT Constants - Audit Trail Properties</p>
<table class="cellalignment1229" title="DBMS_AUDIT_MGMT Constants - Audit Trail Properties" summary="This table describes audit trail property constants used by DBMS_AUDIT_MGMT subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Constant</th>
<th class="cellalignment1227" id="r1c2-t5">Type</th>
<th class="cellalignment1227" id="r1c3-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>CLEAN_UP_INTERVAL</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c3-t5">
<p>Interval, in hours, after which the cleanup procedure is called to clear audit records in the specified audit trail</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t5" headers="r1c1-t5">
<p><code>DB_DELETE_BATCH_SIZE</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c2-t5">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c3-t5">
<p>Specifies the batch size to be used for deleting audit records in database audit tables. The audit records are deleted in batches of size equal to <code>DB_DELETE_BATCH_SIZE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t5" headers="r1c1-t5">
<p><code>FILE_DELETE_BATCH_SIZE</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t5 r1c2-t5">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t5 r1c3-t5">
<p>Specifies the batch size to be used for deleting audit files in the audit directory. The audit files are deleted in batches of size equal to <code>FILE_DELETE_BATCH_SIZE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t5" headers="r1c1-t5">
<p><code>OS_FILE_MAX_AGE</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t5 r1c2-t5">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t5 r1c3-t5">
<p>Specifies the maximum number of days for which an operating system (OS) or XML audit file can be kept open before a new audit file gets created</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t5" headers="r1c1-t5">
<p><code>OS_FILE_MAX_SIZE</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t5 r1c2-t5">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t5 r1c3-t5">
<p>Specifies the maximum size, in kilobytes (KB), to which an operating system (OS) or XML audit file can grow before a new file is opened</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The audit trail purge job cleans the audit trail. <a href="#BABJABFA">Table 27-3</a> lists the constants related to purge job status values.</p>
<div id="ARPLS65399" class="tblformal">
<p class="titleintable"><a id="sthref1058"></a><a id="BABJABFA"></a>Table 27-3 DBMS_AUDIT_MGMT Constants - Purge Job Status</p>
<table class="cellalignment1229" title="DBMS_AUDIT_MGMT Constants - Purge Job Status" summary="This table describes purge job status constants used by DBMS_AUDIT_MGMT subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Constant</th>
<th class="cellalignment1227" id="r1c2-t6">Type</th>
<th class="cellalignment1227" id="r1c3-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><code>PURGE_JOB_DISABLE</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c3-t6">
<p>Disables a purge job</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><code>PURGE_JOB_ENABLE</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c3-t6">
<p>Enables a purge job</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65401" class="refsect2"><a id="BABBFDJJ"></a>
<hr />
<h3 class="refsect2">Views</h3>
<p>The views listed in <a href="#BABDAEGB">Table 27-4</a> are used to display <code>DBMS_AUDIT_MGMT</code> configuration and cleanup events.</p>
<div id="ARPLS65402" class="tblformal">
<p class="titleintable"><a id="sthref1059"></a><a id="BABDAEGB"></a>Table 27-4 Views used by DBMS_AUDIT_MGMT</p>
<table class="cellalignment1229" title="Views used by DBMS_AUDIT_MGMT" summary="This table uses views used by DBMS_AUDIT_MGMT package" dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">View</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>DBA_AUDIT_MGMT_CLEAN_EVENTS</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Displays the cleanup event history</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><code>DBA_AUDIT_MGMT_CLEANUP_JOBS</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>Displays the currently configured audit trail purge jobs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><code>DBA_AUDIT_MGMT_CONFIG_PARAMS</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>Displays the currently configured audit trail properties</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><code>DBA_AUDIT_MGMT_LAST_ARCH_TS</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>Displays the last archive timestamps set for the audit trails</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information on these views</div>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BABIEABE"></a>
<hr />
<div id="ARPLS65403" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Subprogram Groups</h2>
<p>The <code>DBMS_AUDIT_MGMT</code> package subprograms can be grouped into the following categories:</p>
<ul>
<li>
<p><a href="#BABECHCD">Audit Trail Management Subprograms</a></p>
</li>
<li>
<p><a href="#BABBHIAI">Audit Trail Cleanup Subprograms</a></p>
</li>
</ul>
<div id="ARPLS65404" class="refsect2"><a id="BABECHCD"></a>
<hr />
<h3 class="refsect2">Audit Trail Management Subprograms</h3>
<p>Audit trail management subprograms enable you to manage audit trail properties.</p>
<div id="ARPLS65405" class="tblformal">
<p class="titleintable"><a id="sthref1060"></a><a id="sthref1061"></a>Table 27-5 Audit Trail Management Subprograms</p>
<table class="cellalignment1229" title="Audit Trail Management Subprograms" summary="This table lists the audit trail management subprograms of DBMS_AUDIT_MGMT in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><a href="#BABHFBJG">CLEAR_AUDIT_TRAIL_PROPERTY Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p>Clears the value for the audit trail property that you specify</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t9" headers="r1c1-t9">
<p><a href="#BABDAHBG">SET_AUDIT_TRAIL_LOCATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c2-t9">
<p>Moves the audit trail tables from their current tablespace to a user-specified tablespace</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t9" headers="r1c1-t9">
<p><a href="#BABBBBJE">SET_AUDIT_TRAIL_PROPERTY Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t9 r1c2-t9">
<p>Sets an audit trail property for the audit trail type that you specify</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The <a href="#BABCAJBB">Summary of DBMS_AUDIT_MGMT Subprograms</a> contains a complete listing of all subprograms in the package.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65406" class="refsect2"><a id="BABBHIAI"></a>
<hr />
<h3 class="refsect2">Audit Trail Cleanup Subprograms</h3>
<p>Audit trail cleanup subprograms help you perform cleanup related operations on the audit trail records.</p>
<div id="ARPLS65407" class="tblformal">
<p class="titleintable"><a id="sthref1062"></a><a id="sthref1063"></a>Table 27-6 Audit Trail Cleanup Subprograms</p>
<table class="cellalignment1229" title="Audit Trail Cleanup Subprograms" summary="This table lists the audit trail cleanup subprograms of DBMS_AUDIT_MGMT in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p>Deletes audit trail records/files that have been archived</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><a href="#BABFJEAI">CLEAR_LAST_ARCHIVE_TIMESTAMP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p>Clears the timestamp set by the <a href="#BABBHHGC">SET_LAST_ARCHIVE_TIMESTAMP Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t10" headers="r1c1-t10">
<p><a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c2-t10">
<p>Creates a purge job for periodically deleting the audit trail records/files</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t10" headers="r1c1-t10">
<p><a href="#BABGCGDD">DEINIT_CLEANUP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c2-t10">
<p>Undoes the setup and initialization performed by the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t10" headers="r1c1-t10">
<p><a href="#BABHJJCD">DROP_PURGE_JOB Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c2-t10">
<p>Drops the purge job created using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t10" headers="r1c1-t10">
<p><a href="#BABFHEFH">INIT_CLEANUP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c2-t10">
<p>Sets up the audit management infrastructure and sets a default cleanup interval for audit trail records/files</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t10" headers="r1c1-t10">
<p><a href="#BABDGBCC">IS_CLEANUP_INITIALIZED Function</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c2-t10">
<p>Checks to see if the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a> has been run for an audit trail type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t10" headers="r1c1-t10">
<p><a href="#BABBHHGC">SET_LAST_ARCHIVE_TIMESTAMP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t10 r1c2-t10">
<p>Sets a timestamp indicating when the audit records/files were last archived</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t10" headers="r1c1-t10">
<p><a href="#BABFJBGE">SET_PURGE_JOB_INTERVAL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t10 r1c2-t10">
<p>Sets the interval at which the <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a> is called for the purge job that you specify</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t10" headers="r1c1-t10">
<p><a href="#BABGDFAJ">SET_PURGE_JOB_STATUS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t10 r1c2-t10">
<p>Enables or disables the purge job that you specify</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The <a href="#BABCAJBB">Summary of DBMS_AUDIT_MGMT Subprograms</a> contains a complete listing of all subprograms in the package.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BABCAJBB"></a>
<hr />
<div id="ARPLS65408" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_AUDIT_MGMT Subprograms</h2>
<div id="ARPLS65409" class="tblformal">
<p class="titleintable"><a id="sthref1064"></a><a id="sthref1065"></a>Table 27-7 DBMS_AUDIT_MGMT Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_AUDIT_MGMT Package Subprograms" summary="&quot;&quot;" dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>Deletes audit trail records that have been archived</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t11" headers="r1c1-t11">
<p><a href="#BABHFBJG">CLEAR_AUDIT_TRAIL_PROPERTY Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c2-t11">
<p>Clears the value for the audit trail property that you specify</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t11" headers="r1c1-t11">
<p><a href="#BABFJEAI">CLEAR_LAST_ARCHIVE_TIMESTAMP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t11 r1c2-t11">
<p>Clears the timestamp set by the <a href="#BABBHHGC">SET_LAST_ARCHIVE_TIMESTAMP Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t11" headers="r1c1-t11">
<p><a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t11 r1c2-t11">
<p>Creates a purge job for periodically deleting the audit trail records</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t11" headers="r1c1-t11">
<p><a href="#BABGCGDD">DEINIT_CLEANUP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t11 r1c2-t11">
<p>Undoes the setup and initialization performed by the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t11" headers="r1c1-t11">
<p><a href="#BABHJJCD">DROP_PURGE_JOB Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t11 r1c2-t11">
<p>Drops the purge job created using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t11" headers="r1c1-t11">
<p><a href="#BABGGHGG">GET_AUDIT_COMMIT_DELAY Function</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t11 r1c2-t11">
<p>Returns the Audit Commit Delay as the number of seconds. This is the maximum time that it takes to <code>COMMIT</code> an audit record to the database audit trail.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t11" headers="r1c1-t11">
<p><a href="#BABFHEFH">INIT_CLEANUP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t11 r1c2-t11">
<p>Sets up the audit management infrastructure and sets a default cleanup interval for audit trail records</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t11" headers="r1c1-t11">
<p><a href="#BABDGBCC">IS_CLEANUP_INITIALIZED Function</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t11 r1c2-t11">
<p>Checks to see if the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a> has been run for an audit trail type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t11" headers="r1c1-t11">
<p><a href="#BABDAHBG">SET_AUDIT_TRAIL_LOCATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t11 r1c2-t11">
<p>Moves the audit trail tables from their current tablespace to a user-specified tablespace</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t11" headers="r1c1-t11">
<p><a href="#BABBBBJE">SET_AUDIT_TRAIL_PROPERTY Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t11 r1c2-t11">
<p>Sets the audit trail properties for the audit trail type that you specify</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t11" headers="r1c1-t11">
<p><a href="#BABBHHGC">SET_LAST_ARCHIVE_TIMESTAMP Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t11 r1c2-t11">
<p>Sets a timestamp indicating when the audit records were last archived</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t11" headers="r1c1-t11">
<p><a href="#BABFJBGE">SET_PURGE_JOB_INTERVAL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t11 r1c2-t11">
<p>Sets the interval at which the <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a> is called for the purge job that you specify</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t11" headers="r1c1-t11">
<p><a href="#BABGDFAJ">SET_PURGE_JOB_STATUS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t11 r1c2-t11">
<p>Enables or disables the purge job that you specify</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS65410" class="refsect2"><a id="BABIAEAH"></a>
<hr />
<h3 class="refsect2">CLEAN_AUDI<a id="sthref1066"></a><a id="sthref1067"></a>T_TRAIL Procedure</h3>
<p>This procedure deletes audit trail records. The <code>CLEAN_AUDIT_TRAIL</code> procedure is usually called after the <a href="#BABBHHGC">SET_LAST_ARCHIVE_TIMESTAMP Procedure</a> has been used to set the last archived timestamp for the audit records.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1068"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL(
   audit_trail_type         IN PLS_INTEGER,
   use_last_arch_timestamp  IN BOOLEAN DEFAULT TRUE) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1069"></a>Parameters</p>
<div id="ARPLS65411" class="tblformal">
<p class="titleintable"><a id="sthref1070"></a><a id="sthref1071"></a>Table 27-8 CLEAN_AUDIT_TRAIL Procedure Parameters</p>
<table class="cellalignment1229" title="CLEAN_AUDIT_TRAIL Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>The audit trail type for which the cleanup operation needs to be performed. Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> .</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>use_last_arch_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>Specifies whether the last archived timestamp should be used for deciding on the records that should be deleted.</p>
<p>A value of <code>TRUE</code> indicates that only audit records created before the last archive timestamp should be deleted.</p>
<p>A value of <code>FALSE</code> indicates that all audit records should be deleted.</p>
<p>The default value is <code>TRUE</code>. Oracle recommends using this value, as this helps guard against inadvertent deletion of records.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1072"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>When cleaning up operating system (OS) or XML audit files, only files in the current audit directory, specified by the <code>AUDIT_FILE_DEST</code> parameter, are cleaned up.</p>
</li>
<li>
<p>For Windows platforms, no cleanup is performed when the <code>audit_trail_type</code> parameter is set to <code>DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS.</code> This is because operating system (OS) audit records on Windows are written to the Windows Event Viewer.</p>
</li>
<li>
<p>For Unix platforms, no cleanup is performed for cases where the operating system (OS) audit records are written to the syslog. When the <code>audit_trail_type</code> parameter is set to <code>DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,</code> it removes only the <code>*.aud</code> files under the directory specified by the <code>AUDIT_FILE_DEST</code> initialization parameter.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN10263" href="../../server.112/e40402/initparams016.htm#REFRN10263">"AUDIT_SYSLOG_LEVEL"</a> in the <span class="italic">Oracle Database Reference</span></div>
</li>
<li>
<p>When the <code>audit_trail_type</code> parameter is set to <code>DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML,</code> this procedure only removes XML audit files (<code>*.xml</code>) from the current audit directory.</p>
<p>Oracle database maintains a book-keeping file <code>(adx_</code><code><span class="codeinlineitalic">$ORACLE_SID</span></code><code>.txt</code>) for the XML audit files. This file is not removed by the cleanup procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1073"></a>Examples</p>
<p>The following example calls the <code>CLEAN_AUDIT_TRAIL</code> procedure to clean up the operating system (OS) audit trail records that were updated before the last archive timestamp.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL(
   audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,
   use_last_arch_timestamp =&gt; TRUE);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65412" class="refsect2"><a id="BABHFBJG"></a>
<hr />
<h3 class="refsect2">CLEAR_AUDIT_TRAIL_P<a id="sthref1074"></a><a id="sthref1075"></a>ROPERTY Procedure</h3>
<p>This procedure clears the value for the audit trail property that is specified. Audit trail properties are set using the <a href="#BABBBBJE">SET_AUDIT_TRAIL_PROPERTY Procedure</a>.</p>
<p>The <code>CLEAR_AUDIT_TRAIL_PROPERTY</code> procedure can optionally reset the property value to it's default value through the <code>use_default_values</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1076"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.CLEAR_AUDIT_TRAIL_PROPERTY(
   audit_trail_type        IN PLS_INTEGER,
   audit_trail_property    IN PLS_INTEGER,
   use_default_values      IN BOOLEAN DEFAULT FALSE) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1077"></a>Parameters</p>
<div id="ARPLS65413" class="tblformal">
<p class="titleintable"><a id="sthref1078"></a><a id="sthref1079"></a>Table 27-9 CLEAR_AUDIT_TRAIL_PROPERTY Procedure Parameters</p>
<table class="cellalignment1229" title="CLEAR_AUDIT_TRAIL_PROPERTY Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.CLEAR_AUDIT_TRAIL_PROPERTY subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>The audit trail type for which the property needs to be cleared. Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t14" headers="r1c1-t14">
<p><code>audit_trail_property</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t14 r1c2-t14">
<p>The audit trail property whose value needs to be cleared. You cannot clear the value for the <code>CLEANUP_INTERVAL</code> property.</p>
<p>Audit trail properties are listed in <a href="#BABCEGDB">Table 27-2, "DBMS_AUDIT_MGMT Constants - Audit Trail Properties"</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t14" headers="r1c1-t14">
<p><code>use_default_values</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t14 r1c2-t14">
<p>Specifies whether the default value of the <code>audit_trail_property</code> should be used in place of the cleared value. A value of <code>TRUE</code> causes the default value of the parameter to be used. A value of <code>FALSE</code> causes the <code>audit_trail_property</code> to have no value.</p>
<p>The default value for this parameter is <code>FALSE</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1080"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>You can use this procedure to clear the value for an audit trail property that you do not wish to use. For example, if you do not want a restriction on the operating system audit file size, then you can use this procedure to reset the <code>OS_FILE_MAX_SIZE</code> property.</p>
<p>You can also use this procedure to reset an audit trail property to it's default value. You need to set <code>use_default_values</code> to <code>TRUE</code> when invoking the procedure.</p>
</li>
<li>
<p>The <code>DB_DELETE_BATCH_SIZE</code> property needs to be individually cleared for the <code>AUDIT_TRAIL_AUD_STD</code> and <code>AUDIT_TRAIL_FGA_STD</code> audit trail types. You cannot clear this property collectively using the <code>AUDIT_TRAIL_DB_STD</code> and <code>AUDIT_TRAIL_ALL</code> audit trail types.</p>
</li>
<li>
<p>If you clear the value of the DB_DELETE_BATCH_SIZE property with <code>use_default_value</code> set to <code>FALSE</code>, the default value of DB_DELETE_BATCH_SIZE is still assumed. This is because audit records are always deleted in batches.</p>
</li>
<li>
<p>The <code>FILE_DELETE_BATCH_SIZE</code> property needs to be individually cleared for the <code>AUDIT_TRAIL_OS</code> and <code>AUDIT_TRAIL_XML</code> audit trail types. You cannot clear this property collectively using the <code>AUDIT_TRAIL_FILES</code> and <code>AUDIT_TRAIL_ALL</code> audit trail types.</p>
</li>
<li>
<p>If you clear the value of the FILE_DELETE_BATCH_SIZE property with <code>use_default_value</code> set to <code>FALSE</code>, the default value of FILE_DELETE_BATCH_SIZE is still assumed. This is because audit files are always deleted in batches.</p>
</li>
<li>
<p>You cannot clear the value for the <code>CLEANUP_INTERVAL</code> property.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1081"></a>Examples</p>
<p>The following example calls the <code>CLEAR_AUDIT_TRAIL_PROPERTY</code> procedure to clear the value for the audit trail property, <code>OS_FILE_MAX_SIZE</code>. The procedure uses a value of <code>FALSE</code> for the <code>USE_DEFAULT_VALUES</code> parameter. This means that there will be no maximum size threshold for operating system (OS) audit files.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.CLEAR_AUDIT_TRAIL_PROPERTY(
   AUDIT_TRAIL_TYPE        =&gt;  DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,
   AUDIT_TRAIL_PROPERTY    =&gt;  DBMS_AUDIT_MGMT.OS_FILE_MAX_SIZE,
   USE_DEFAULT_VALUES      =&gt;  FALSE );
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65414" class="refsect2"><a id="BABFJEAI"></a>
<hr />
<h3 class="refsect2">CLEAR_LAST_ARCHI<a id="sthref1082"></a><a id="sthref1083"></a>VE_TIMESTAMP Procedure</h3>
<p>This procedure clears the timestamp set by the <a href="#BABBHHGC">SET_LAST_ARCHIVE_TIMESTAMP Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1084"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP(
   audit_trail_type     IN PLS_INTEGER,
   rac_instance_number  IN PLS_INTEGER DEFAULT NULL) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1085"></a>Parameters</p>
<div id="ARPLS65415" class="tblformal">
<p class="titleintable"><a id="sthref1086"></a><a id="sthref1087"></a>Table 27-10 CLEAR_LAST_ARCHIVE_TIMESTAMP Procedure Parameters</p>
<table class="cellalignment1229" title="CLEAR_LAST_ARCHIVE_TIMESTAMP Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>The audit trail type for which the timestamp needs to be cleared. Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> .</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t15" headers="r1c1-t15">
<p><code>rac_instance_number</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t15 r1c2-t15">
<p>The instance number for the Oracle Real Application Clusters (Oracle RAC) instance. The default value is <code>NULL</code>.</p>
<p>The <code>rac_instance_number</code> is not relevant for single instance databases.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1088"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>The timestamp for only one <code>audit_trail_type</code> can be cleared at a time.</p>
</li>
<li>
<p>The following are invalid <code>audit_trail_type</code> values for this procedure and cannot be used:</p>
<ul>
<li>
<p>AUDIT_TRAIL_ALL</p>
</li>
<li>
<p>AUDIT_TRAIL_DB_STD</p>
</li>
<li>
<p>AUDIT_TRAIL_FILES</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1089"></a>Examples</p>
<p>The following example calls the <code>CLEAR_LAST_ARCHIVE_TIMESTAMP</code> procedure to clear the timestamp value for the operating system (OS) audit trail type.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.CLEAR_LAST_ARCHIVE_TIMESTAMP(
   audit_trail_type     =&gt;  DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,
   rac_instance_number  =&gt;  1);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65416" class="refsect2"><a id="BABFJHCB"></a>
<hr />
<h3 class="refsect2">CREATE_PURGE_J<a id="sthref1090"></a><a id="sthref1091"></a>OB Procedure</h3>
<p>This procedure creates a purge job for periodically deleting the audit trail records.</p>
<p>This procedure carries out the cleanup operation at intervals specified by the user. It calls the <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a> to perform the cleanup operation.</p>
<p>The <a href="#BABFJBGE">SET_PURGE_JOB_INTERVAL Procedure</a> is used to modify the frequency of the purge job.</p>
<p>The <a href="#BABGDFAJ">SET_PURGE_JOB_STATUS Procedure</a> is used to enable or disable the purge job.</p>
<p>The <a href="#BABHJJCD">DROP_PURGE_JOB Procedure</a> is used to drop a purge job created with the <code>CREATE_PURGE_JOB</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1092"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.CREATE_PURGE_JOB(
   audit_trail_type            IN PLS_INTEGER,
   audit_trail_purge_interval  IN PLS_INTEGER,
   audit_trail_purge_name      IN VARCHAR2,
   use_last_arch_timestamp     IN BOOLEAN DEFAULT TRUE) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1093"></a>Parameters</p>
<div id="ARPLS65417" class="tblformal">
<p class="titleintable"><a id="sthref1094"></a><a id="sthref1095"></a>Table 27-11 CREATE_PURGE_JOB Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_PURGE_JOB Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.CREATE_PURGE_JOB subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Parameter</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>The audit trail type for which the purge job needs to be created. Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> .</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t16" headers="r1c1-t16">
<p><code>audit_trail_purge_interval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t16 r1c2-t16">
<p>The interval, in hours, at which the clean up procedure is called. A lower value means that the cleanup is performed more often.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t16" headers="r1c1-t16">
<p><code>audit_trail_purge_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t16 r1c2-t16">
<p>A name to identify the purge job.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t16" headers="r1c1-t16">
<p><code>use_last_arch_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t16 r1c2-t16">
<p>Specifies whether the last archived timestamp should be used for deciding on the records that should be deleted.</p>
<p>A value of <code>TRUE</code> indicates that only audit records created before the last archive timestamp should be deleted.</p>
<p>A value of <code>FALSE</code> indicates that all audit records should be deleted.</p>
<p>The default value is <code>TRUE</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1096"></a>Usage Notes</p>
<p>Use this procedure to schedule the <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a> for your audit trail records.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1097"></a>Examples</p>
<p>The following example calls the <code>CREATE_PURGE_JOB</code> procedure to create a cleanup job called <code>CLEANUP</code>, for all audit trail types. It sets the <code>audit_trail_purge_interval</code> parameter to 100. This means that the cleanup job is invoked every 100 hours. It also sets the <code>use_last_arch_timestamp</code> parameter value to <code>TRUE</code>. This means that all audit records older than the last archive timestamp are deleted.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.CREATE_PURGE_JOB(
  audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_ALL,
  audit_trail_purge_interval =&gt; 100 /* hours */,  
  audit_trail_purge_name =&gt; 'CLEANUP',
  use_last_arch_timestamp =&gt; TRUE);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65418" class="refsect2"><a id="BABGCGDD"></a>
<hr />
<h3 class="refsect2">DEINIT_CLEANUP Proc<a id="sthref1098"></a><a id="sthref1099"></a>edure</h3>
<p>This procedure undoes the setup and initialization performed by the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a>. The <code>DEINIT_CLEANUP</code> procedure clears the value of the <code>default_cleanup_interval</code> parameter. However, when used for audit tables, it does not move the audit trail tables back to their original tablespace.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1100"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.DEINIT_CLEANUP(
   audit_trail_type  IN PLS_INTEGER) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1101"></a>Parameters</p>
<div id="ARPLS65419" class="tblformal">
<p class="titleintable"><a id="sthref1102"></a><a id="sthref1103"></a>Table 27-12 DEINIT_CLEANUP Procedure Parameters</p>
<table class="cellalignment1229" title="DEINIT_CLEANUP Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.DEINIT_CLEANUP subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t17">Parameter</th>
<th class="cellalignment1227" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t17" headers="r1c1-t17">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t17 r1c2-t17">
<p>The audit trail type for which the procedure needs to be called.</p>
<p>Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1104"></a>Examples</p>
<p>The following example clears the <code>default_cleanup_interval</code> parameter setting for the standard database audit trail:</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.DEINIT_CLEANUP(
  AUDIT_TRAIL_TYPE  =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65420" class="refsect2"><a id="BABHJJCD"></a>
<hr />
<h3 class="refsect2">DROP_PURGE_JOB Pro<a id="sthref1105"></a><a id="sthref1106"></a>cedure</h3>
<p>This procedure drops the purge job created using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>. The name of the purge job is passed as an argument.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1107"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.DROP_PURGE_JOB(
   audit_trail_purge_name    IN VARCHAR2) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1108"></a>Parameters</p>
<div id="ARPLS65421" class="tblformal">
<p class="titleintable"><a id="sthref1109"></a><a id="sthref1110"></a>Table 27-13 DROP_PURGE_JOB Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_PURGE_JOB Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.DROP_PURGE_JOB subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>audit_trail_</code>purge_name</p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>The name of the purge job which is being deleted. This is the purge job name that you specified with the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1111"></a>Examples</p>
<p>The following example calls the DROP_PURGE_JOB procedure to drop the purge job called <code>CLEANUP</code>.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.DROP_PURGE_JOB(
  AUDIT_TRAIL_PURGE_NAME  =&gt; 'CLEANUP');
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65422" class="refsect2"><a id="BABGGHGG"></a>
<hr />
<h3 class="refsect2">GET_AUDIT_COMMIT_<a id="sthref1112"></a><a id="sthref1113"></a>DELAY Function</h3>
<p>This function returns the Audit Commit Delay as the number of seconds. Audit Commit Delay is the maximum time that it takes to <code>COMMIT</code> an audit record to the database audit trail. If it takes more time to COMMIT an audit record than defined by the Audit Commit Delay, then a copy of the audit record is written to the operating system (OS) audit trail.</p>
<p>The Audit Commit Delay value is useful when determining the last archive timestamp for database audit records.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1114"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.GET_AUDIT_COMMIT_DELAY
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65423" class="refsect2"><a id="BABFHEFH"></a>
<hr />
<h3 class="refsect2">INIT_CLEANUP Pr<a id="sthref1115"></a><a id="sthref1116"></a>ocedure</h3>
<p>This procedure sets up the audit management infrastructure and a default cleanup interval for the audit trail records. If the audit trail tables are in the <code>SYSTEM</code> tablespace, then the procedure moves them to the <code>SYSAUX</code> tablespace.</p>
<p>Moving the audit trail tables out of the <code>SYSTEM</code> tablespace enhances overall database performance. The <code>INIT_CLEANUP</code> procedure moves the audit trail tables to the <code>SYSAUX</code> tablespace. If the <a href="#BABDAHBG">SET_AUDIT_TRAIL_LOCATION Procedure</a> has already moved the audit tables elsewhere, then no tables are moved.</p>
<p>The <a href="#BABDAHBG">SET_AUDIT_TRAIL_LOCATION Procedure</a> enables you to specify an alternate target tablespace for the database audit tables.</p>
<p>The <code>INIT_CLEANUP</code> procedure is currently not relevant for the <code>AUDIT_TRAIL_OS</code>, <code>AUDIT_TRAIL_XML</code>, and <code>AUDIT_TRAIL_FILES</code> audit trail types. No preliminary set up is required for these audit trail types.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> for a list of all audit trail types</div>
<p>This procedure also sets a default cleanup interval for the audit trail records.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1117"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.INIT_CLEANUP(
   audit_trail_type          IN PLS_INTEGER,
   default_cleanup_interval  IN PLS_INTEGER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1118"></a>Parameters</p>
<div id="ARPLS65424" class="tblformal">
<p class="titleintable"><a id="sthref1119"></a><a id="sthref1120"></a>Table 27-14 INIT_CLEANUP Procedure Parameters</p>
<table class="cellalignment1229" title="INIT_CLEANUP Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.INIT_CLEANUP subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t20">Parameter</th>
<th class="cellalignment1227" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t20" headers="r1c1-t20">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t20 r1c2-t20">
<p>The audit trail type for which the clean up operation needs to be initialized.</p>
<p>Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t20" headers="r1c1-t20">
<p><code>default_cleanup_interval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t20 r1c2-t20">
<p>The default time interval, in hours, after which the cleanup procedure should be called. The minimum value is 1 and the maximum is 999.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1121"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>This procedure may involve data movement across tablespaces. This can be a resource intensive operation especially if your database audit trail tables are already populated. Oracle recommends that you invoke the procedure during non-peak hours.</p>
</li>
<li>
<p>You should ensure that the <code>SYSAUX</code> tablespace, into which the audit trail tables are being moved, has sufficient space to accommodate the audit trail tables. You should also optimize the <code>SYSAUX</code> tablespace for frequent write operations.</p>
</li>
<li>
<p>You can change the <code>default_cleanup_interval</code> later using the <a href="#BABBBBJE">SET_AUDIT_TRAIL_PROPERTY Procedure</a>.</p>
</li>
<li>
<p>If you do not wish to move the audit trail tables to the <code>SYSAUX</code> tablespace, then you should use the <code>DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_LOCATION</code> procedure to move the audit trail tables to another tablespace before calling the <code>INIT_CLEANUP</code> procedure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABDAHBG">"SET_AUDIT_TRAIL_LOCATION Procedure"</a></div>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1122"></a>Examples</p>
<p>The following example calls the <code>INIT_CLEANUP</code> procedure to set a <code>default_cleanup_interval</code> of 12 hours for all audit trail types:</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.INIT_CLEANUP(
              audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_ALL,
      default_cleanup_interval =&gt; 12 /* hours */);
END;
/
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> for a list of all audit trail types</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65425" class="refsect2"><a id="BABDGBCC"></a>
<hr />
<h3 class="refsect2">IS_CLEANUP_INITIAL<a id="sthref1123"></a><a id="sthref1124"></a>IZED Function</h3>
<p>This function checks to see if the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a> has been run for an audit trail type. The <code>IS_CLEANUP_INITIALIZED</code> function returns <code>TRUE</code> if the procedure has already been run for the audit trail type. It returns <code>FALSE</code> if the procedure has not been run for the audit trail type.</p>
<p>This function is currently not relevant for the <code>AUDIT_TRAIL_OS</code>, <code>AUDIT_TRAIL_XML</code>, and <code>AUDIT_TRAIL_FILES</code> audit trail types. The function always returns TRUE for these audit trail types. No preliminary set up is required for these audit trail types.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> for a list of all audit trail types</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1125"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.DEINIT_CLEANUP(
   audit_trail_type  IN PLS_INTEGER)
 RETURN BOOLEAN;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1126"></a>Parameters</p>
<div id="ARPLS65426" class="tblformal">
<p class="titleintable"><a id="sthref1127"></a><a id="sthref1128"></a>Table 27-15 IS_CLEANUP_INITIALIZED Function Parameters</p>
<table class="cellalignment1229" title="IS_CLEANUP_INITIALIZED Function Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.IS_CLEANUP_INITIALIZED subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t24">Parameter</th>
<th class="cellalignment1227" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t24" headers="r1c1-t24">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t24 r1c2-t24">
<p>The audit trail type for which the function needs to be called.</p>
<p>Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1129"></a>Examples</p>
<p>The following example checks to see if the standard database audit trail type has been initialized for cleanup operation. If the audit trail type has not been initialized, then it calls the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a> to initialize the audit trail type.</p>
<pre>
BEGIN
 IF 
   NOT DBMS_AUDIT_MGMT.IS_CLEANUP_INITIALIZED(DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD)
 THEN
   DBMS_AUDIT_MGMT.INIT_CLEANUP(
      audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD,
      default_cleanup_interval =&gt; 12 /* hours */);
 END IF;
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65427" class="refsect2"><a id="BABDAHBG"></a>
<hr />
<h3 class="refsect2">SET_AUDIT_TRAIL_LOC<a id="sthref1130"></a><a id="sthref1131"></a>ATION Procedure</h3>
<p>This procedure moves the audit trail tables from their current tablespace to a user-specified tablespace.</p>
<p>The <code>SET_AUDIT_TRAIL_LOCATION</code> procedure is currently not relevant for the <code>AUDIT_TRAIL_OS</code>, <code>AUDIT_TRAIL_XML</code>, and <code>AUDIT_TRAIL_FILES</code> audit trail types. The <code>AUDIT_FILE_DEST</code> initialization parameter is the only way you can specify the destination directory for these audit trail types.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> for a list of all audit trail types</p>
</li>
<li>
<p><a class="olink REFRN10004" href="../../server.112/e40402/initparams014.htm#REFRN10004">"AUDIT_FILE_DEST"</a> in the <span class="italic">Oracle Database Reference</span></p>
</li>
</ul>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1132"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_LOCATION(
   audit_trail_type            IN PLS_INTEGER,
   audit_trail_location_value  IN VARCHAR2) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1133"></a>Parameters</p>
<div id="ARPLS65428" class="tblformal">
<p class="titleintable"><a id="sthref1134"></a><a id="sthref1135"></a>Table 27-16 SET_AUDIT_TRAIL_LOCATION Procedure Parameters</p>
<table class="cellalignment1229" title="SET_AUDIT_TRAIL_LOCATION Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_LOCATION subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t26">Parameter</th>
<th class="cellalignment1227" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t26" headers="r1c1-t26">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t26 r1c2-t26">
<p>The audit trail type for which the audit trail location needs to be set.</p>
<p>Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t26" headers="r1c1-t26">
<p><code>audit_trail_location_value</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t26 r1c2-t26">
<p>The target location/tablespace for the audit trail records</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1136"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>This procedure involves data movement across tablespaces. This can be a resource intensive operation especially if your database audit trail tables are already populated. Oracle recommends that you invoke the procedure during non-peak hours.</p>
</li>
<li>
<p>You should ensure that the target tablespace, into which the audit trail tables are being moved, has sufficient space to accommodate the audit trail tables. You should also optimize the target tablespace for frequent write operations.</p>
</li>
<li>
<p>This procedure is valid for the following <code>audit_trail_type</code> values only:</p>
<ul>
<li>
<p>AUDIT_TRAIL_AUD_STD</p>
</li>
<li>
<p>AUDIT_TRAIL_FGA_STD</p>
</li>
<li>
<p>AUDIT_TRAIL_DB_STD</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1137"></a>Examples</p>
<p>The following example moves the database audit trail tables, <code>AUD$</code> and <code>FGA_LOG$</code>, from the current tablespace to a user-created tablespace called <code>RECORDS</code>:</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_LOCATION(
       audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_DB_STD,
       audit_trail_location_value =&gt;  'RECORDS');
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65429" class="refsect2"><a id="BABBBBJE"></a>
<hr />
<h3 class="refsect2">SET_AUDIT_TRAIL_PROP<a id="sthref1138"></a><a id="sthref1139"></a>ERTY Procedure</h3>
<p>This procedure sets an audit trail property for the audit trail type that is specified.</p>
<p>The procedure sets properties like <code>OS_FILE_MAX_SIZE</code>, <code>OS_FILE_MAX_AGE</code>, and <code>FILE_DELETE_BATCH_SIZE</code> for operating system (OS) and XML audit trail types. The <code>OS_FILE_MAX_SIZE</code> and <code>OS_FILE_MAX_AGE</code> properties determine the maximum size and age of an audit trail file before a new audit trail file gets created. The <code>FILE_DELETE_BATCH_SIZE</code> property specifies the number of audit trail files that are deleted in one batch.</p>
<p>The procedure sets properties like <code>DB_DELETE_BATCH_SIZE</code> and <code>CLEANUP_INTERVAL</code> for the database audit trail type. <code>DB_DELETE_BATCH_SIZE</code> specifies the batch size in which records get deleted from audit trail tables. This ensures that if a cleanup operation gets interrupted midway, the process does not need to start afresh the next time it is invoked. This is because all batches before the last processed batch are already committed.</p>
<p>The <code>CLEANUP_INTERVAL</code> specifies the frequency, in hours, with which the cleanup procedure is called.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1140"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_PROPERTY(
   audit_trail_type            IN PLS_INTEGER,
   audit_trail_property        IN PLS_INTEGER,
   audit_trail_property_value  IN PLS_INTEGER) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1141"></a>Parameters</p>
<div id="ARPLS65430" class="tblformal">
<p class="titleintable"><a id="sthref1142"></a><a id="sthref1143"></a>Table 27-17 SET_AUDIT_TRAIL_PROPERTY Procedure Parameters</p>
<table class="cellalignment1229" title="SET_AUDIT_TRAIL_PROPERTY Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_PROPERTY subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t27">Parameter</th>
<th class="cellalignment1227" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t27" headers="r1c1-t27">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t27 r1c2-t27">
<p>The audit trail type for which the property needs to be set. Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t27" headers="r1c1-t27">
<p><code>audit_trail_property</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t27 r1c2-t27">
<p>The audit trail property that is being set. Audit trail properties are listed in <a href="#BABCEGDB">Table 27-2, "DBMS_AUDIT_MGMT Constants - Audit Trail Properties"</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t27" headers="r1c1-t27">
<p><code>audit_trail_property_value</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t27 r1c2-t27">
<p>The value of the property specified using <code>audit_trail_property</code>. The following are valid values for audit trail properties:</p>
<ul>
<li>
<p><code>OS_FILE_MAX_SIZE</code> can have a minimum value of 1 and maximum value of 2000000. The default value is 10000. <code>OS_FILE_MAX_SIZE</code> is measured in kilobytes (KB).</p>
</li>
<li>
<p><code>OS_FILE_MAX_AGE</code> can have a minimum value of 1 and a maximum value of 497. The default value is 5. <code>OS_FILE_MAX_AGE</code> is measured in days.</p>
</li>
<li>
<p><code>DB_DELETE_BATCH_SIZE</code> can have a minimum value of 100 and a maximum value of 1000000. The default value is 10000. <code>DB_DELETE_BATCH_SIZE</code> is measured as the number of audit records that are deleted in one batch.</p>
</li>
<li>
<p><code>FILE_DELETE_BATCH_SIZE</code> can have a minimum value of 100 and a maximum value of 1000000. The default value is 1000. <code>FILE_DELETE_BATCH_SIZE</code> is measured as the number of audit files that are deleted in one batch.</p>
</li>
<li>
<p><code>CLEANUP_INTERVAL</code> can have a minimum value of 1 and a maximum value of 999. The default value is set using the <a href="#BABFHEFH">INIT_CLEANUP Procedure</a>. <code>CLEANUP_INTERVAL</code> is measured in hours.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1144"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>The audit trail properties for which you do not explicitly set values use their default values.</p>
</li>
<li>
<p>If you have set both the <code>OS_FILE_MAX_SIZE</code> and <code>OS_FILE_MAX_AGE</code> properties for an operating system (OS) or XML audit trail type, then a new audit trail file gets created depending on which of these two limits is reached first.</p>
<p>For example, let us take a scenario where <code>OS_FILE_MAX_SIZE</code> is 10000 and <code>OS_FILE_MAX_AGE</code> is 5. If the operating system audit file is already more than 5 days old and has a size of 9000 KB, then a new audit file is opened. This is because one of the limits has been reached.</p>
</li>
<li>
<p>The <code>DB_DELETE_BATCH_SIZE</code> property needs to be individually set for the <code>AUDIT_TRAIL_AUD_STD</code> and <code>AUDIT_TRAIL_FGA_STD</code> audit trail types. You cannot set this property collectively using the <code>AUDIT_TRAIL_DB_STD</code> and <code>AUDIT_TRAIL_ALL</code> audit trail types.</p>
</li>
<li>
<p>The <code>DB_DELETE_BATCH_SIZE</code> property enables you to control the number of audit records that are deleted in one batch. Setting a large value for this parameter requires increased allocation for the undo log space.</p>
</li>
<li>
<p>The <code>FILE_DELETE_BATCH_SIZE</code> property needs to be individually set for the <code>AUDIT_TRAIL_OS</code> and <code>AUDIT_TRAIL_XML</code> audit trail types. You cannot set this property collectively using the <code>AUDIT_TRAIL_FILES</code> and <code>AUDIT_TRAIL_ALL</code> audit trail types.</p>
</li>
<li>
<p>The <code>FILE_DELETE_BATCH_SIZE</code> property enables you to control the number of audit files that are deleted in one batch. Setting a very large value may engage the <code>GEN0</code> background process for a long time.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1145"></a>Examples</p>
<p>The following example calls the <code>SET_AUDIT_TRAIL_PROPERTY</code> procedure to set the <code>OS_FILE_MAX_SIZE</code> property for the operating system (OS) audit trail. It sets this property value to 102400. This means that a new audit file gets created every time the current audit file size reaches 100 MB.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_PROPERTY(
       audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,
       audit_trail_property  =&gt;  DBMS_AUDIT_MGMT.OS_FILE_MAX_SIZE,
       audit_trail_property_value =&gt;  102400 /* 100MB*/ );
END;
/
</pre>
<p>The following example calls the <code>SET_AUDIT_TRAIL_PROPERTY</code> procedure to set the <code>OS_FILE_MAX_AGE</code> property for the operating system (OS) audit trail. It sets this property value to 5. This means that a new audit file gets created every sixth day.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_PROPERTY(
       audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,
       audit_trail_property  =&gt;  DBMS_AUDIT_MGMT.OS_FILE_MAX_AGE,
       audit_trail_property_value  =&gt;  5 /* days */);
END;
/
</pre>
<p>The following example calls the <code>SET_AUDIT_TRAIL_PROPERTY</code> procedure to set the <code>DB_DELETE_BATCH_SIZE</code> property for the <code>AUDIT_TRAIL_AUD_STD</code> audit trail. It sets this property value to 100000. This means that during a cleanup operation, audit records are deleted from the <code>SYS.AUD$</code> table in batches of size 100000.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_AUDIT_TRAIL_PROPERTY(
       audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_AUD_STD,
       audit_trail_property =&gt; DBMS_AUDIT_MGMT.DB_DELETE_BATCH_SIZE,
       audit_trail_property_value =&gt; 100000 /* delete batch size */);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65433" class="refsect2"><a id="BABBHHGC"></a>
<hr />
<h3 class="refsect2">SET_LAST_ARCHIVE_TIMEST<a id="sthref1146"></a><a id="sthref1147"></a>AMP Procedure</h3>
<p>This procedure sets a timestamp indicating when the audit records were last archived. The audit administrator provides the timestamp to be attached to the audit records. The <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a> uses this timestamp to decide on the audit records to be deleted.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1148"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP(
   audit_trail_type     IN PLS_INTEGER,
   last_archive_time    IN TIMESTAMP,
   rac_instance_number  IN PLS_INTEGER DEFAULT NULL) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1149"></a>Parameters</p>
<div id="ARPLS65434" class="tblformal">
<p class="titleintable"><a id="sthref1150"></a><a id="sthref1151"></a>Table 27-18 SET_LAST_ARCHIVE_TIMESTAMP Procedure Parameters</p>
<table class="cellalignment1229" title="SET_LAST_ARCHIVE_TIMESTAMP Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t28">Parameter</th>
<th class="cellalignment1227" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t28" headers="r1c1-t28">
<p><code>audit_trail_type</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t28 r1c2-t28">
<p>The audit trail type for which the timestamp needs to be set. Audit trail types are listed in <a href="#BABIDGEA">Table 27-1, "DBMS_AUDIT_MGMT Constants - Audit Trail Types"</a> .</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t28" headers="r1c1-t28">
<p><code>last_archive_time</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t28 r1c2-t28">
<p>The <code>TIMESTAMP</code> value based on which the audit records or files should be deleted. This indicates the last time when the audit records/files were archived.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t28" headers="r1c1-t28">
<p><code>rac_instance_number</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t28 r1c2-t28">
<p>The instance number for the Oracle Real Application Clusters (Oracle RAC) instance.The default value is <code>NULL</code>.</p>
<p>The <code>rac_instance_number</code> is not relevant for the database audit trail type, as the database audit trail tables are shared by all Oracle RAC instances. The <code>rac_instance_number</code> is also not relevant for a single-instance database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1152"></a>Usage Notes</p>
<p>The following usage notes apply:</p>
<ul>
<li>
<p>The <code>last_archive_time</code> must be specified in Coordinated Universal Time (UTC) when the audit trail types are <code>AUDIT_TRAIL_AUD_STD</code> or <code>AUDIT_TRAIL_FGA_STD</code>. This is because the database audit trails store the timestamps in UTC. UTC is also known as Greenwich Mean Time (GMT).</p>
</li>
<li>
<p>The <code>last_archive_time</code> must be specified as the local time zone time when the audit trail types are <code>AUDIT_TRAIL_OS</code> or <code>AUDIT_TRAIL_XML</code>. The time zone must be the time zone of the machine where the OS or XML audit files were created. This is because the operating system audit files are cleaned based on the audit file's Last Modification Timestamp property. The Last Modification Timestamp property value is stored in the local time zone of the machine.</p>
</li>
<li>
<p>The following <code>audit_trail_type</code> values for valid for this procedure:</p>
<ul>
<li>
<p><code>AUDIT_TRAIL_AUD_STD</code></p>
</li>
<li>
<p><code>AUDIT_TRAIL_FGA_STD</code></p>
</li>
<li>
<p><code>AUDIT_TRAIL_OS</code></p>
</li>
<li>
<p><code>AUDIT_TRAIL_XML</code></p>
</li>
</ul>
</li>
<li>
<p>When using an Oracle Real Application Clusters (Oracle RAC) database, Oracle recommends that you use the Network Time Protocol (NTP) to synchronize individual Oracle RAC nodes.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1153"></a>Examples</p>
<p>The following example calls the <code>SET_LAST_ARCHIVE_TIMESTAMP</code> procedure to set the last archive timestamp for the operating system (OS) audit trail type on Oracle RAC instance 1. It uses the <code>TO_TIMESTAMP</code> function to convert a character string into a timestamp value.</p>
<p>A subsequent call to the <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a>, with <code>use_last_arch_timestamp</code> set to <code>TRUE</code>, will delete all those OS audit files from the current <code>AUDIT_FILE_DEST</code> directory that were modified before 10-Sep-2007 14:10:10.0.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP(
   audit_trail_type =&gt; DBMS_AUDIT_MGMT.AUDIT_TRAIL_OS,
   last_archive_time =&gt; TO_TIMESTAMP('10-SEP-0714:10:10.0','DD-MON-RRHH24:MI:SS.FF'),
   rac_instance_number =&gt; 1);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65435" class="refsect2"><a id="BABFJBGE"></a>
<hr />
<h3 class="refsect2">SET_PURGE_JOB_INTERV<a id="sthref1154"></a><a id="sthref1155"></a>AL Procedure</h3>
<p>This procedure sets the interval at which the <a href="#BABIAEAH">CLEAN_AUDIT_TRAIL Procedure</a> is called for the purge job specified. The purge job must have already been created using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1156"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL(
   audit_trail_purge_name      IN VARCHAR2,
   audit_trail_interval_value  IN PLS_INTEGER) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1157"></a>Parameters</p>
<div id="ARPLS65436" class="tblformal">
<p class="titleintable"><a id="sthref1158"></a><a id="sthref1159"></a>Table 27-19 SET_PURGE_JOB_INTERVAL Procedure Parameters</p>
<table class="cellalignment1229" title="SET_PURGE_JOB_INTERVAL Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t29">Parameter</th>
<th class="cellalignment1227" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t29" headers="r1c1-t29">
<p><code>audit_trail_purge_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t29 r1c2-t29">
<p>The name of the purge job for which the interval is being set. This is the purge job name that you specified with the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t29" headers="r1c1-t29">
<p><code>audit_trail_interval_value</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t29 r1c2-t29">
<p>The interval, in hours, at which the clean up procedure should be called. This value modifies the audit_trail_purge_interval parameter set using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1160"></a>Usage Notes</p>
<p>Use this procedure to modify the audit_trail_purge_interval parameter set using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1161"></a>Examples</p>
<p>The following example calls the <code>SET_PURGE_JOB_INTERVAL</code> procedure to change the frequency at which the purge job called <code>CLEANUP</code> is invoked. The new interval is set to 24 hours.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_PURGE_JOB_INTERVAL(
  AUDIT_TRAIL_PURGE_NAME       =&gt; 'CLEANUP',
  AUDIT_TRAIL_INTERVAL_VALUE   =&gt; 24 );
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65437" class="refsect2"><a id="BABGDFAJ"></a>
<hr />
<h3 class="refsect2">SET_PURGE_JOB_STAT<a id="sthref1162"></a><a id="sthref1163"></a>US Procedure</h3>
<p>This procedure enables or disables the specified purge job. The purge job must have already been created using the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1164"></a>Syntax</p>
<pre>
DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS(
   audit_trail_purge_name    IN VARCHAR2,
   audit_trail_status_value  IN PLS_INTEGER) ;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1165"></a>Parameters</p>
<div id="ARPLS65438" class="tblformal">
<p class="titleintable"><a id="sthref1166"></a><a id="sthref1167"></a>Table 27-20 SET_PURGE_JOB_STATUS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_PURGE_JOB_STATUS Procedure Parameters" summary="This table describes the parameters of the DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t30">Parameter</th>
<th class="cellalignment1227" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t30" headers="r1c1-t30">
<p><code>audit_trail_purge_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t30 r1c2-t30">
<p>The name of the purge job for which the status is being set. This is the purge job name that you specified with the <a href="#BABFJHCB">CREATE_PURGE_JOB Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t30" headers="r1c1-t30">
<p><code>audit_trail_status_value</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t30 r1c2-t30">
<p>One of the values specified in <a href="#BABJABFA">DBMS_AUDIT_MGMT Constants - Purge Job Status</a>.</p>
<p>The value <code>PURGE_JOB_ENABLE</code> enables the specified purge job.</p>
<p>The value <code>PURGE_JOB_DISABLE</code> disables the specified purge job.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1168"></a>Examples</p>
<p>The following example calls the SET_PURGE_JOB_STATUS procedure to enable the <code>CLEANUP</code> purge job.</p>
<pre>
BEGIN
DBMS_AUDIT_MGMT.SET_PURGE_JOB_STATUS(
  audit_trail_purge_name      =&gt; 'CLEANUP',
  audit_trail_status_value    =&gt; DBMS_AUDIT_MGMT.PURGE_JOB_ENABLE);
END;
/
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_assert.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_autosta.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
