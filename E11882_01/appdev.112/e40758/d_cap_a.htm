<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_CAPTURE_ADM</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:2Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_aw_stats.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_cdcpub.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">36/265</span> <!-- End Header -->
<div id="ARPLS302" class="chapter"><a id="BGBEIIGJ"></a>
<h1 class="chapter"><span class="secnum">32</span> DBMS_CAPTURE_ADM</h1>
<p><a id="sthref1258"></a><a id="sthref1259"></a>The <code>DBMS_CAPTURE_ADM</code> package, one of a set of Oracle Streams packages, provides subprograms for starting, stopping, and configuring a capture process. The source of the captured changes is the redo logs, and the repository for the captured changes is a queue.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink STRMS002" href="../../server.112/e17069/strms_capture.htm#STRMS002"><span class="italic">Oracle Streams Concepts and Administration</span></a> and <a class="olink STREP" href="../../server.112/e10705/toc.htm"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about this package and capture processes</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDFIGEE">Using DBMS_CAPTURE_ADM</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#BGBHHBDD">Summary of DBMS_CAPTURE_ADM Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDFIGEE"></a>
<hr />
<div id="ARPLS73167" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_CAPTURE_ADM</h2>
<p>This section contains topics which relate to using the <code>DBMS_CAPTURE_ADM</code> package.</p>
<ul>
<li>
<p><a href="#CHDBGHFJ">Overview</a></p>
</li>
<li>
<p><a href="#CHDCDJAB">Security Model</a></p>
</li>
</ul>
<div id="ARPLS73168" class="refsect2"><a id="CHDBGHFJ"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>This package provides interfaces to start, stop, and configure a capture process or a synchronous capture. This package includes subprograms for preparing database objects for instantiation.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS73169" class="refsect2"><a id="CHDCDJAB"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p>Security on this package can be controlled in either of the following ways:</p>
<ul>
<li>
<p>Granting <code>EXECUTE</code> on this package to selected users or roles.</p>
</li>
<li>
<p>Granting <code>EXECUTE_CATALOG_ROLE</code> to selected users or roles.</p>
</li>
</ul>
<p>If subprograms in the package are run from within a stored procedure, then the user who runs the subprograms must be granted <code>EXECUTE</code> privilege on the package directly. It cannot be granted through a role.</p>
<p>When the <code>DBMS_CAPTURE_ADM</code> package is used to manage an Oracle Streams configuration, it requires that the user is granted the privileges of an Oracle Streams administrator.</p>
<p>When the <code>DBMS_CAPTURE_ADM</code> package is used to manage an XStream configuration, it requires that the user is granted the privileges of an XStream administrator.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>The user must be granted additional privileges to perform some administrative tasks using the subprograms in this package, such as setting a capture user. If additional privileges are required for a subprogram, then the privileges are documented in the section that describes the subprogram.</p>
</li>
<li>
<p>Using XStream requires purchasing a license for the Oracle GoldenGate product. See <a class="olink XSTRM72545" href="../../server.112/e16545/xstrm_intro.htm#XSTRM72545"><span class="italic">Oracle Database XStream Guide</span></a>.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP200" href="../../server.112/e10705/prep_rep.htm#STREP200"><span class="italic">Oracle Streams Concepts and Administration</span></a> for information about configuring an Oracle Streams administrator</p>
</li>
<li>
<p><a class="olink XSTRM72553" href="../../server.112/e16545/xstrm_config.htm#XSTRM72553"><span class="italic">Oracle Database XStream Guide</span></a> for information about configuring an XStream administrator</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"><a id="BGBHHBDD"></a>
<hr />
<div id="ARPLS528" class="refsect1">
<h2 class="refsect1">Summary of DBMS_CAPTURE_ADM Subprograms</h2>
<div id="ARPLS65465" class="tblformal">
<p class="titleintable"><a id="sthref1260"></a><a id="sthref1261"></a>Table 32-1 DBMS_CAPTURE_ADM Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_CAPTURE_ADM Package Subprograms" summary="This table lists the DBMS_CAPTURE_ADM subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><a href="#i996899">ABORT_GLOBAL_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p>Reverses the effects of running the <code>PREPARE_GLOBAL_INSTANTIATION</code>, <code>PREPARE_SCHEMA_INSTANTIATION</code>, and <code>PREPARE_TABLE_INSTANTIATION</code> procedures</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t5" headers="r1c1-t5">
<p><a href="#BGBFECAG">ABORT_SCHEMA_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c2-t5">
<p>Reverses the effects of running the <code>PREPARE_SCHEMA_INSTANTIATION</code> and <code>PREPARE_TABLE_INSTANTIATION</code> procedures</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t5" headers="r1c1-t5">
<p><a href="#BGBHGABG">ABORT_SYNC_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t5 r1c2-t5">
<p>Reverses the effects of running the <code>PREPARE_SYNC_INSTANTIATION</code> procedure</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t5" headers="r1c1-t5">
<p><a href="#i996936">ABORT_TABLE_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t5 r1c2-t5">
<p>Reverses the effects of running the <code>PREPARE_TABLE_INSTANTIATION</code> procedure</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t5" headers="r1c1-t5">
<p><a href="#i996962">ALTER_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t5 r1c2-t5">
<p>Alters a capture process</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t5" headers="r1c1-t5">
<p><a href="#BGBHGBAF">ALTER_SYNC_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t5 r1c2-t5">
<p>Alters a synchronous capture</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t5" headers="r1c1-t5">
<p><a href="#i1003124">BUILD Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t5 r1c2-t5">
<p>Extracts the data dictionary of the current database to the redo logs and automatically specifies database supplemental logging for all primary key and unique key columns</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t5" headers="r1c1-t5">
<p><a href="#i997066">CREATE_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t5 r1c2-t5">
<p>Creates a capture process</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t5" headers="r1c1-t5">
<p><a href="#BGBCAHCG">CREATE_SYNC_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t5 r1c2-t5">
<p>Creates a synchronous capture</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t5" headers="r1c1-t5">
<p><a href="#i997167">DROP_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t5 r1c2-t5">
<p>Drops a capture process</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t5" headers="r1c1-t5">
<p><a href="#i1000175">INCLUDE_EXTRA_ATTRIBUTE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t5 r1c2-t5">
<p>Includes or excludes an extra attribute in logical change records (LCRs) captured by the specified capture process or synchronous capture</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t5" headers="r1c1-t5">
<p><a href="#BGBDGIEG">PREPARE_GLOBAL_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t5 r1c2-t5">
<p>Performs the synchronization necessary for instantiating all the tables in the database at another database and can enable supplemental logging for key columns or all columns in these tables</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t5" headers="r1c1-t5">
<p><a href="#BGBCHBDG">PREPARE_SCHEMA_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t5 r1c2-t5">
<p>Performs the synchronization necessary for instantiating all tables in the schema at another database and can enable supplemental logging for key columns or all columns in these tables</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t5" headers="r1c1-t5">
<p><a href="#BGBFEICF">PREPARE_SYNC_INSTANTIATION Function</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t5 r1c2-t5">
<p>Performs the synchronization necessary for instantiating one or more tables at another database and returns the prepare SCN</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t5" headers="r1c1-t5">
<p><a href="#i997227">PREPARE_TABLE_INSTANTIATION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r16c1-t5 r1c2-t5">
<p>Performs the synchronization necessary for instantiating the table at another database and can enable supplemental logging for key columns or all columns in the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t5" headers="r1c1-t5">
<p><a href="#i997253">SET_PARAMETER Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r17c1-t5 r1c2-t5">
<p>Sets a capture process parameter to the specified value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t5" headers="r1c1-t5">
<p><a href="#BGBHAJGJ">START_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r18c1-t5 r1c2-t5">
<p>Starts the capture process, which mines redo logs and enqueues the mined redo information into the associated queue</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t5" headers="r1c1-t5">
<p><a href="#i997449">STOP_CAPTURE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r19c1-t5 r1c2-t5">
<p>Stops the capture process from mining redo logs</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
All subprograms commit unless specified otherwise.</div>
<div id="ARPLS540" class="refsect2"><a id="i996899"></a>
<hr />
<h3 class="refsect2">ABORT_GLOBAL_INSTANTIATION Procedure</h3>
<p><a id="sthref1262"></a><a id="sthref1263"></a><a id="sthref1264"></a>This procedure reverses the effects of running the <code>PREPARE_GLOBAL_INSTANTIATION</code>, <code>PREPARE_SCHEMA_INSTANTIATION</code>, and <code>PREPARE_TABLE_INSTANTIATION</code> procedures.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ul>
<li>
<p>Removes data dictionary information related to the database, schema, and table instantiations</p>
</li>
<li>
<p>Removes any supplemental logging enabled by the <code>PREPARE_GLOBAL_INSTANTIATION</code>, <code>PREPARE_SCHEMA_INSTANTIATION</code>, and <code>PREPARE_TABLE_INSTANTIATION</code> procedures</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1265"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.ABORT_GLOBAL_INSTANTIATION;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS541" class="refsect2"><a id="BGBFECAG"></a>
<hr />
<h3 class="refsect2">ABORT_SCHEMA_INSTANTIATION Procedure<a id="sthref1266"></a><a id="sthref1267"></a><a id="sthref1268"></a></h3>
<p>This procedure reverses the effects of running the <code>PREPARE_SCHEMA_INSTANTIATION</code> procedure. It also reverses the effects of running the <code>PREPARE_TABLE_INSTANTIATION</code> procedure on tables in the specified schema.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ul>
<li>
<p>Removes data dictionary information related to schema instantiations and table instantiations of tables in the schema</p>
</li>
<li>
<p>Removes any supplemental logging enabled by the <code>PREPARE_SCHEMA_INSTANTIATION</code> procedure</p>
</li>
<li>
<p>Removes any supplemental logging enabled by the <code>PREPARE_TABLE_INSTANTIATION</code> procedure for tables in the specified schema</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1269"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.ABORT_SCHEMA_INSTANTIATION(
   schema_name  IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1270"></a>Parameter</p>
<div id="ARPLS65466" class="tblformal">
<p class="titleintable"><a id="sthref1271"></a><a id="sthref1272"></a>Table 32-2 ABORT_SCHEMA_INSTANTIATION Procedure Parameter</p>
<table class="cellalignment1229" title="ABORT_SCHEMA_INSTANTIATION Procedure Parameter" summary="This table describes the parameters of DBMS_CAPTURE_ADM.ABORT_SCHEMA_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Parameter</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>schema_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>The name of the schema for which to abort the effects of preparing instantiation</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65467" class="refsect2"><a id="BGBHGABG"></a>
<hr />
<h3 class="refsect2">ABORT_SYNC_INSTANTIATION Procedure</h3>
<p>This procedure reverses the effects of running the <code>PREPARE_SYNC_INSTANTIATION</code> procedure. Specifically, this procedure removes data dictionary information related to the table instantiation.</p>
<p>This procedure is overloaded. The <code>table_names</code> parameter is <code>VARCHAR2</code> data type in one version and <code>DBMS_UTILITY.UNCL_ARRAY</code> data type in the other version.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1273"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.ABORT_SYNC_INSTANTIATION(
   table_names IN VARCHAR2);

DBMS_CAPTURE_ADM.ABORT_SYNC_INSTANTIATION(
   table_names IN DBMS_UTILITY.UNCL_ARRAY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1274"></a>Parameters</p>
<div id="ARPLS65468" class="tblformal">
<p class="titleintable"><a id="sthref1275"></a><a id="sthref1276"></a>Table 32-3 ABORT_SYNC_INSTANTIATION Procedure Parameter</p>
<table class="cellalignment1229" title="ABORT_SYNC_INSTANTIATION Procedure Parameter" summary="This table describes the parameter of DBMS_CAPTURE_ADM.ABORT_SYNC_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Parameter</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>table_names</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>When the <code>table_names</code> parameter is <code>VARCHAR2</code> data type, a comma-delimited list of the tables for which to abort the effects of preparing instantiation. There must be no spaces between entries.</p>
<p>When the <code>table_names</code> parameter is <code>DBMS_UTILITY.UNCL_ARRAY</code> data type, specify a PL/SQL associative array of this type that contains the names of the tables for which to abort the effects of preparing instantiation. The first table name is at position 1, the second at position 2, and so on. The table does not need to be <code>NULL</code> terminated.</p>
<p>In either version of the procedure, specify the name of each table in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">table_name</span></code>. For example, <code>hr.employees</code>. If the schema is not specified, then the current user is the default.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS542" class="refsect2"><a id="i996936"></a>
<hr />
<h3 class="refsect2">ABORT_TABLE_INSTANTIATION Procedure<a id="sthref1277"></a><a id="sthref1278"></a><a id="sthref1279"></a></h3>
<p>This procedure reverses the effects of running the <code>PREPARE_TABLE_INSTANTIATION</code> procedure.</p>
<p>Specifically, this procedure performs the following actions:</p>
<ul>
<li>
<p>Removes data dictionary information related to the table instantiation</p>
</li>
<li>
<p>Removes any supplemental logging enabled by the <code>PREPARE_TABLE_INSTANTIATION</code> procedure</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1280"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.ABORT_TABLE_INSTANTIATION(
   table_name  IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1281"></a>Parameter</p>
<div id="ARPLS65469" class="tblformal">
<p class="titleintable"><a id="sthref1282"></a><a id="sthref1283"></a>Table 32-4 ABORT_TABLE_INSTANTIATION Procedure Parameter</p>
<table class="cellalignment1229" title="ABORT_TABLE_INSTANTIATION Procedure Parameter" summary="This table describes the parameters of DBMS_CAPTURE_ADM.ABORT_TABLE_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Parameter</th>
<th class="cellalignment1227" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><code>table_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p>The name of the table for which to abort the effects of preparing instantiation, specified as <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">object_name</span></code>. For example, <code>hr.employees</code>. If the schema is not specified, then the current user is the default.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS312" class="refsect2"><a id="i996962"></a>
<hr />
<h3 class="refsect2">ALTER_CAPTURE Procedure<a id="sthref1284"></a><a id="sthref1285"></a></h3>
<p>This procedure alters a capture process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2), the <code>start_time</code> parameter is included in this procedure.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS116" href="../../server.112/e17069/strms_mcap.htm#STRMS116"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about altering a capture process</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1286"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.ALTER_CAPTURE(
   capture_name               IN  VARCHAR2,
   rule_set_name              IN  VARCHAR2   DEFAULT NULL,
   remove_rule_set            IN  BOOLEAN    DEFAULT FALSE,
   start_scn                  IN  NUMBER     DEFAULT NULL,
   use_database_link          IN  BOOLEAN    DEFAULT NULL,
   first_scn                  IN  NUMBER     DEFAULT NULL,
   negative_rule_set_name     IN  VARCHAR2   DEFAULT NULL,
   remove_negative_rule_set   IN  BOOLEAN    DEFAULT FALSE,
   capture_user               IN  VARCHAR2   DEFAULT NULL,
   checkpoint_retention_time  IN  NUMBER     DEFAULT NULL,
   start_time                 IN  TIMESTAMP  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1287"></a>Parameters</p>
<div id="ARPLS65470" class="tblformal">
<p class="titleintable"><a id="sthref1288"></a><a id="sthref1289"></a>Table 32-5 ALTER_CAPTURE Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.ALTER_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>The name of the capture process being altered. You must specify an existing capture process name. Do not specify an owner.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>The name of the positive rule set for the capture process. The positive rule set contains the rules that instruct the capture process to capture changes.</p>
<p>To change the positive rule set for the capture process, specify an existing rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to specify a positive rule set in the <code>hr</code> schema named <code>job_capture_rules</code>, enter <code>hr.job_capture_rules</code>. If the schema is not specified, then the current user is the default.</p>
<p>An error is returned if the specified rule set does not exist. You can create a rule set and add rules to it using the <code>DBMS_STREAMS_ADM</code> package or the <code>DBMS_RULE_ADM</code> package.</p>
<p>If you specify <code>NULL</code> and the <code>remove_rule_set</code> parameter is set to <code>FALSE</code>, then the procedure retains any existing positive rule set. If you specify <code>NULL</code> and the <code>remove_rule_set</code> parameter is set to <code>TRUE</code>, then the procedure removes any existing positive rule set.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS136" href="../../server.112/e17069/strms_capture.htm#STRMS136"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about the changes that can be captured by a capture process</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t12" headers="r1c1-t12">
<p><code>remove_rule_set</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t12 r1c2-t12">
<p>If <code>TRUE</code>, then the procedure removes the positive rule set for the specified capture process. If you remove a positive rule set for a capture process, and the capture process does not have a negative rule set, then the capture process captures all supported changes to all objects in the database, excluding database objects in the <code>SYS</code> and <code>SYSTEM</code> schemas.</p>
<p>If you remove a positive rule set for a capture process, and the capture process has a negative rule set, then the capture process captures all supported changes that are not discarded by the negative rule set.</p>
<p>If <code>FALSE</code>, then the procedure retains the positive rule set for the specified capture process.</p>
<p>If the <code>rule_set_name</code> parameter is non-<code>NULL</code>, then ensure that this parameter is set to <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t12" headers="r1c1-t12">
<p><code>start_scn</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t12 r1c2-t12">
<p>A valid SCN for the database from which the capture process starts capturing changes. The SCN value must be greater than or equal to the first SCN for the capture process. Also, the capture process must be stopped before resetting its start SCN.</p>
<p>An error is returned if an invalid SCN is specified or if the capture process is enabled.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t12" headers="r1c1-t12">
<p><code>use_database_link</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t12 r1c2-t12">
<p>If <code>TRUE</code>, then the capture process at a downstream database uses a database link to the source database for administrative purposes relating to the capture process. If you want a capture process that is not using a database link currently to begin using a database link, then specify <code>TRUE</code>. In this case, a database link with the same name as the global name of the source database must exist at the downstream database.</p>
<p>If <code>FALSE</code>, then either the capture process is running on the source database, or the capture process at a downstream database does not use a database link to the source database. If you want a capture process that is using a database link currently to stop using a database link, then specify <code>FALSE</code>. In this case, you must prepare source database objects for instantiation manually when you add or change capture process rules that pertain to these objects.</p>
<p>If <code>NULL</code>, then the current value of this parameter for the capture process is not changed.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t12" headers="r1c1-t12">
<p><code>first_scn</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t12 r1c2-t12">
<p>The lowest SCN in the redo log from which a capture process can capture changes. If you specify a new first SCN for the capture process, then the specified first SCN must meet the following requirements:</p>
<ul>
<li>
<p>It must be greater than the current first SCN for the capture process.</p>
</li>
<li>
<p>It must be less than or equal to the current applied SCN for the capture process. However, this requirement does not apply if the current applied SCN for the capture process is zero.</p>
</li>
<li>
<p>It must be less than or equal to the required checkpoint SCN for the capture process.</p>
</li>
</ul>
<p>An error is returned if the specified SCN does not meet the first three requirements. See <a href="#i1002693">"Usage Notes"</a> for information about determining an SCN value that meets all of these conditions.</p>
<p>When the first SCN is modified, the capture process purges information from its LogMiner data dictionary that is required to restart it at an earlier SCN. See <a href="#i1003124">BUILD Procedure</a> for more information about a LogMiner data dictionary.</p>
<p>If the specified first SCN is higher than the current start SCN for the capture process, then the start SCN is set automatically to the new value of the first SCN.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t12" headers="r1c1-t12">
<p><code>negative_rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t12 r1c2-t12">
<p>The name of the negative rule set for the capture process. The negative rule set contains the rules that instruct the capture process to discard changes.</p>
<p>To change the negative rule set for the capture process, specify an existing rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to specify a negative rule set in the <code>hr</code> schema named <code>neg_capture_rules</code>, enter <code>hr.neg_capture_rules</code>. If the schema is not specified, then the current user is the default.</p>
<p>An error is returned if the specified rule set does not exist. You can create a rule set and add rules to it using the <code>DBMS_STREAMS_ADM</code> package or the <code>DBMS_RULE_ADM</code> package.</p>
<p>If you specify <code>NULL</code> and the <code>remove_negative_rule_set</code> parameter is set to <code>FALSE</code>, then the procedure retains any existing negative rule set. If you specify <code>NULL</code> and the <code>remove_negative_rule_set</code> parameter is set to <code>TRUE</code>, then the procedure removes any existing negative rule set.</p>
<p>If you specify both a positive and a negative rule set for a capture process, then the negative rule set is always evaluated first.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t12" headers="r1c1-t12">
<p><code>remove_negative_rule_set</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t12 r1c2-t12">
<p>If <code>TRUE</code>, then the procedure removes the negative rule set for the specified capture process. If you remove a negative rule set for a capture process, and the capture process does not have a positive rule set, then the capture process captures all supported changes to all objects in the database, excluding database objects in the <code>SYS</code> and <code>SYSTEM</code> schemas.</p>
<p>If you remove a negative rule set for a capture process, and a positive rule set exists for the capture process, then the capture process captures all changes that are not discarded by the positive rule set.</p>
<p>If <code>FALSE</code>, then the procedure retains the negative rule set for the specified capture process.</p>
<p>If the <code>negative_rule_set_name</code> parameter is non-<code>NULL</code>, then ensure that this parameter is set to <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t12" headers="r1c1-t12">
<p><code>capture_user</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t12 r1c2-t12">
<p>The user in whose security domain a capture process captures changes that satisfy its rule sets and runs custom rule-based transformations configured for capture process rules. If <code>NULL</code>, then the capture user is not changed.</p>
<p>To change the capture user, the user who invokes the <code>ALTER_CAPTURE</code> procedure must be granted the <code>DBA</code> role. Only the <code>SYS</code> user can set the <code>capture_user</code> to <code>SYS</code>.</p>
<p>If you change the capture user, then this procedure grants the new capture user enqueue privilege on the queue used by the capture process and configures the user as a secure queue user of the queue. In addition, ensure that the capture user has the following privileges:</p>
<ul>
<li>
<p><code>EXECUTE</code> privilege on the rule sets used by the capture process</p>
</li>
<li>
<p><code>EXECUTE</code> privilege on all rule-based transformation functions used in the rule set</p>
</li>
</ul>
<p>These privileges can be granted directly to the capture user, or they can be granted through roles.</p>
<p>In addition, the capture user must be granted <code>EXECUTE</code> privilege on all packages, including Oracle-supplied packages, that are invoked in rule-based transformations run by the capture process. These privileges must be granted directly to the capture user. They cannot be granted through roles.</p>
<p>The capture process is stopped and restarted automatically when you change the value of this parameter.</p>
<p><span class="bold">Note:</span> If the capture user for a capture process is dropped using <code>DROP</code> <code>USER . . .</code> <code>CASCADE</code>, then the capture process is also dropped automatically.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t12" headers="r1c1-t12">
<p><code>checkpoint_retention_time</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t12 r1c2-t12">
<p>Either the number of days that a capture process retains checkpoints before purging them automatically, or <code>DBMS_CAPTURE_ADM.INFINITE</code> if checkpoints should not be purged automatically. If <code>NULL</code>, then the checkpoint retention time is not changed.</p>
<p>If a number is specified, then a capture process purges a checkpoint the specified number of days after the checkpoint was taken. Partial days can be specified using decimal values. For example, <code>.25</code> specifies 6 hours.</p>
<p>When a checkpoint is purged, LogMiner data dictionary information for the archived redo log file that corresponds to the checkpoint is purged, and the <code>first_scn</code> of the capture process is reset to the SCN value corresponding to the first change in the next archived redo log file.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS152" href="../../server.112/e17069/strms_adcapture.htm#STRMS152"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about checkpoint retention time</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t12" headers="r1c1-t12">
<p><code>start_time</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t12 r1c2-t12">
<p>A valid time from which the capture process starts capturing changes. The capture process must be stopped before resetting its start time.</p>
<p>An error is returned if an invalid time is specified or if the capture process is enabled.</p>
<p>The <code>start_scn</code> and <code>start_time</code> parameters are mutually exclusive.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1002693"></a>Usage Notes</p>
<p>If you want to alter the first SCN for a capture process, then the value specified must meet the conditions in the description for the <code>first_scn</code> parameter.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1290"></a>Examples</p>
<p>The following query determines the current first SCN, applied SCN, and required checkpoint SCN for each capture process in a database:</p>
<pre>
SELECT CAPTURE_NAME, FIRST_SCN, APPLIED_SCN, REQUIRED_CHECKPOINT_SCN
   FROM DBA_CAPTURE;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65471" class="refsect2"><a id="BGBHGBAF"></a>
<hr />
<h3 class="refsect2">ALTER_SYNC_CAPTURE Procedure<a id="sthref1291"></a><a id="sthref1292"></a></h3>
<p>This procedure alters a synchronous capture.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS116" href="../../server.112/e17069/strms_mcap.htm#STRMS116"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about altering a capture process</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1293"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.ALTER_SYNC_CAPTURE(
   capture_name   IN  VARCHAR2,
   rule_set_name  IN  VARCHAR2  DEFAULT NULL,
   capture_user   IN  VARCHAR2  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1294"></a>Parameters</p>
<div id="ARPLS65472" class="tblformal">
<p class="titleintable"><a id="sthref1295"></a><a id="sthref1296"></a>Table 32-6 ALTER_SYNC_CAPTURE Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_SYNC_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.ALTER_SYNC_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>The name of the synchronous capture being altered. You must specify an existing synchronous capture name. Do not specify an owner.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t14" headers="r1c1-t14">
<p><code>rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t14 r1c2-t14">
<p>The name of the positive rule set for the synchronous capture. The positive rule set contains the rules that instruct the synchronous capture to capture changes.</p>
<p>To change the rule set for the synchronous capture, specify an existing rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to specify a positive rule set in the <code>strmadmin</code> schema named <code>sync_cap_rules</code>, enter <code>strmadmin.sync_cap_rules</code>. If the schema is not specified, then the current user is the default.</p>
<p>An error is returned if the specified rule set does not exist. You must specify a rule set that was created using the <code>DBMS_STREAMS_ADM</code> package.</p>
<p>If <code>NULL</code>, then the rule set is not changed.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS168" href="../../server.112/e17069/strms_capture.htm#STRMS168"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about the changes that can be captured by a synchronous capture</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t14" headers="r1c1-t14">
<p><code>capture_user</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t14 r1c2-t14">
<p>The user in whose security domain a synchronous capture captures changes that satisfy its rule set and runs custom rule-based transformations configured for synchronous capture rules. If <code>NULL</code>, then the capture user is not changed.</p>
<p>To change the capture user, the user who invokes the <code>ALTER_SYNC_CAPTURE</code> procedure must be granted the <code>DBA</code> role. Only the <code>SYS</code> user can set the <code>capture_user</code> to <code>SYS</code>.</p>
<p>If you change the capture user, then this procedure grants the new capture user enqueue privilege on the queue used by the synchronous capture and configures the user as a secure queue user of the queue. In addition, ensure that capture user has the following privileges:</p>
<ul>
<li>
<p><code>EXECUTE</code> privilege on the rule sets used by the synchronous capture</p>
</li>
<li>
<p><code>EXECUTE</code> privilege on all rule-based transformation functions used in the rule set</p>
</li>
</ul>
<p>These privileges can be granted directly to the capture user, or they can be granted through roles.</p>
<p>In addition, the capture user must be granted <code>EXECUTE</code> privilege on all packages, including Oracle-supplied packages, that are invoked in rule-based transformations run by the synchronous capture. These privileges must be granted directly to the capture user. They cannot be granted through roles.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1297"></a>Usage Notes</p>
<p>If the capture user for a synchronous capture is dropped using <code>DROP</code> <code>USER . . .</code> <code>CASCADE</code>, then the synchronous capture is also dropped automatically.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS590" class="refsect2"><a id="i1003124"></a>
<hr />
<h3 class="refsect2">BUILD Procedure<a id="sthref1298"></a><a id="sthref1299"></a></h3>
<p>This procedure extracts the data dictionary of the current database to the redo log and automatically specifies database supplemental logging by running the following SQL statement:</p>
<pre>
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
</pre>
<p>This procedure is overloaded. One version of this procedure contains the <code>OUT</code> parameter <code>first_scn</code>, and the other does not.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1300"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.BUILD(
   first_scn OUT NUMBER);

DBMS_CAPTURE_ADM.BUILD;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1301"></a>Parameters</p>
<div id="ARPLS65473" class="tblformal">
<p class="titleintable"><a id="sthref1302"></a><a id="sthref1303"></a>Table 32-7 BUILD Procedure Parameter</p>
<table class="cellalignment1229" title="BUILD Procedure Parameter" summary="This table describes the parameters of DBMS_CAPTURE_ADM.BUILD." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>first_scn</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>Contains the lowest SCN value corresponding to the data dictionary extracted to the redo log that can be specified as a first SCN for a capture process</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BGBEGGCJ"></a>Usage Notes</p>
<p>The following usage notes apply to this procedure:</p>
<ul>
<li>
<p>You can run this procedure multiple times at a source database.</p>
</li>
<li>
<p>If you plan to capture changes originating at a source database with a capture process, then this procedure must be executed at the source database at least once. When the capture process is started, either at a local source database or at a downstream database, the capture process uses the extracted information in the redo log to create a LogMiner data dictionary.</p>
</li>
<li>
<p>A LogMiner data dictionary is a separate data dictionary used by a capture process to determine the details of a change that it is capturing. The LogMiner data dictionary is necessary because the primary data dictionary of the source database might not be synchronized with the redo data being scanned by a capture process.</p>
</li>
<li>
<p>After executing this procedure, you can query the <code>FIRST_CHANGE#</code> column of the <code>V$ARCHIVED_LOG</code> dynamic performance view where the <code>DICTIONARY_BEGIN</code> column is <code>YES</code> to determine the lowest SCN value for the database that can be specified as a first SCN for a capture process. The first SCN for a capture process is the lowest SCN in the redo log from which the capture process can capture changes.You can specify the first SCN for a capture process when you run the <code>CREATE_CAPTURE</code> or <code>ALTER_CAPTURE</code> procedure in the <code>DBMS_CAPTURE_ADM</code> package.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS311" class="refsect2"><a id="i997066"></a>
<hr />
<h3 class="refsect2">CREATE_CAPTURE Procedure<a id="sthref1304"></a></h3>
<p>This procedure creates a capture process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2), the <code>start_time</code> parameter is included in this procedure.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP209" href="../../server.112/e10705/ccap.htm#STREP209"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about creating a capture process</p>
</li>
<li>
<p><a href="d_rule_a.htm#CDEDGHHD">Chapter 128, "DBMS_RULE_ADM"</a> for more information about rules and rule sets</p>
</li>
</ul>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1305"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.CREATE_CAPTURE(
   queue_name                 IN  VARCHAR2,
   capture_name               IN  VARCHAR2,
   rule_set_name              IN  VARCHAR2   DEFAULT NULL,
   start_scn                  IN  NUMBER     DEFAULT NULL,
   source_database            IN  VARCHAR2   DEFAULT NULL,
   use_database_link          IN  BOOLEAN    DEFAULT FALSE,
   first_scn                  IN  NUMBER     DEFAULT NULL,
   logfile_assignment         IN  VARCHAR2   DEFAULT 'implicit',
   negative_rule_set_name     IN  VARCHAR2   DEFAULT NULL,
   capture_user               IN  VARCHAR2   DEFAULT NULL,
   checkpoint_retention_time  IN  NUMBER     DEFAULT 60,
   start_time                 IN  TIMESTAMP  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1306"></a>Parameters</p>
<div id="ARPLS65474" class="tblformal">
<p class="titleintable"><a id="sthref1307"></a><a id="sthref1308"></a>Table 32-8 CREATE_CAPTURE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.CREATE_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>queue_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>The name of the queue into which the capture process enqueues changes. You must specify an existing queue in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">queue_name</span></code>. For example, to specify a queue in the <code>hr</code> schema named <code>streams_queue</code>, enter <code>hr.streams_queue</code>. If the schema is not specified, then the current user is the default.</p>
<p><span class="bold">Note:</span> The <code>queue_name</code> setting cannot be altered after the capture process is created.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>The name of the capture process being created. A <code>NULL</code> specification is not allowed. Do not specify an owner.</p>
<p><span class="bold">Note:</span> The <code>capture_name</code> setting cannot be altered after the capture process is created.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t18" headers="r1c1-t18">
<p><code>rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t18 r1c2-t18">
<p>The name of the positive rule set for the capture process. The positive rule set contains the rules that instruct the capture process to capture changes.</p>
<p>If you want to use a positive rule set for the capture process, then you must specify an existing rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to specify a positive rule set in the <code>hr</code> schema named <code>job_capture_rules</code>, enter <code>hr.job_capture_rules</code>. If the schema is not specified, then the current user is the default.</p>
<p>An error is returned if the specified rule set does not exist. You can create a rule set and add rules to it using the <code>DBMS_STREAMS_ADM</code> package or the <code>DBMS_RULE_ADM</code> package.</p>
<p>If you specify <code>NULL</code>, and no negative rule set is specified, then the capture process captures all supported changes to all objects in the database, excluding database objects in the <code>SYS</code> and <code>SYSTEM</code> schemas.</p>
<p>If you specify <code>NULL</code>, and a negative rule set exists for the capture process, then the capture process captures all changes that are not discarded by the negative rule set.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS136" href="../../server.112/e17069/strms_capture.htm#STRMS136"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about the changes that can be captured by a capture process</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t18" headers="r1c1-t18">
<p><code>start_scn</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t18 r1c2-t18">
<p>A valid SCN for the database from which the capture process starts capturing changes.</p>
<p>An error is returned if an invalid SCN is specified.</p>
<p>The <code>start_scn</code> and <code>start_time</code> parameters are mutually exclusive.</p>
<p><span class="bold">See Also:</span> <a href="#i1001376">"Usage Notes"</a> for more information setting the <code>start_scn</code> parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t18" headers="r1c1-t18">
<p><code>source_database</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t18 r1c2-t18">
<p>The global name of the source database. The source database is where the changes to be captured originated.</p>
<p>If you do not include the domain name, then the procedure appends it to the database name automatically. For example, if you specify <code>DBS1</code> and the domain is <code>.EXAMPLE.COM</code>, then the procedure specifies <code>DBS1.EXAMPLE.COM</code> automatically.</p>
<p>If <code>NULL</code>, or if the specified name is the same as the global name of the current database, then local capture is assumed and only the default values for <code>use_database_link</code> and <code>first_scn</code> can be specified.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t18" headers="r1c1-t18">
<p><code>use_database_link</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t18 r1c2-t18">
<p>If <code>TRUE</code>, then the capture process at a downstream database uses a database link to the source database for administrative purposes relating to the capture process. A database link with the same name as the global name of the source database must exist at the downstream database.</p>
<p>The capture process uses the database link to prepare database objects for instantiation at the source database and run the <code>DBMS_CAPTURE_ADM.BUILD</code> procedure at the source database, if necessary.</p>
<p>During the creation of a downstream capture process, if the <code>first_scn</code> parameter is set to <code>NULL</code>, then the <code>use_database_link</code> parameter must be set to <code>TRUE</code>. Otherwise, an error is returned.</p>
<p>If <code>FALSE</code>, then either the capture process is running on the source database, or the capture process at a downstream database does not use a database link to the source database. In this case, you must perform the following administrative tasks manually:</p>
<ul>
<li>
<p>Run the <code>DBMS_CAPTURE_ADM.BUILD</code> procedure at the source database to extract the data dictionary at the source database to the redo log when a capture process is created.</p>
</li>
<li>
<p>Obtain the first SCN for the downstream capture process if the first SCN is not specified during capture process creation. The first SCN is needed to create and maintain a capture process.</p>
</li>
<li>
<p>Prepare source database objects for instantiation.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t18" headers="r1c1-t18">
<p><code>first_scn</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t18 r1c2-t18">
<p>The lowest SCN in the redo log from which a capture process can capture changes. A non-<code>NULL</code> value for this parameter is valid only if the <code>DBMS_CAPTURE_ADM.BUILD</code> procedure has been run at least once at the source database.</p>
<p>You can query the <code>FIRST_CHANGE#</code> column of the <code>V$ARCHIVED_LOG</code> dynamic performance view where the <code>DICTIONARY_BEGIN</code> column is <code>YES</code> to determine whether the <code>DBMS_CAPTURE_ADM.BUILD</code> procedure has been run on a source database. Any of the values returned by such a query can be used as a <code>first_scn</code> value if the redo log containing that SCN value is still available.</p>
<p><span class="bold">See Also:</span> <a href="#i1001376">"Usage Notes"</a> for more information setting the <code>first_scn</code> parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t18" headers="r1c1-t18">
<p><code>logfile_assignment</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t18 r1c2-t18">
<p>If <code>implicit</code>, which is the default, then the capture process at a downstream database scans all redo log files added by redo transport services or manually from the source database to the downstream database.</p>
<p>If <code>explicit</code>, then a redo log file is scanned by a capture process at a downstream database only if the capture process name is specified in the <code>FOR</code> <code><span class="codeinlineitalic">logminer_session_name</span></code> clause. If <code>explicit</code>, then the redo log file must be added manually to the downstream database, and redo transport services cannot be used to add redo log files to the capture process being created.</p>
<p>If you specify <code>explicit</code> for this parameter for a local capture process, then the local capture process cannot use the online redo log to find changes. In this case, the capture process must use the archived redo log.</p>
<p><span class="bold">See Also:</span> <a href="#i1001376">"Usage Notes"</a> for information about adding redo log files manually</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t18" headers="r1c1-t18">
<p><code>negative_rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t18 r1c2-t18">
<p>The name of the negative rule set for the capture process. The negative rule set contains the rules that instruct the capture process to discard changes.</p>
<p>If you want to use a negative rule set for the capture process, then you must specify an existing rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to specify a negative rule set in the <code>hr</code> schema named <code>neg_capture_rules</code>, enter <code>hr.neg_capture_rules</code>. If the schema is not specified, then the current user is the default.</p>
<p>If you specify <code>NULL</code>, and no positive rule set is specified, then the capture process captures all supported changes to all objects in the database, excluding database objects in the <code>SYS</code> and <code>SYSTEM</code> schemas.</p>
<p>If you specify <code>NULL</code>, and a positive rule set exists for the capture process, then the capture process captures all changes that are not discarded by the positive rule set.</p>
<p>An error is returned if the specified rule set does not exist. You can create a rule set and add rules to it using the <code>DBMS_STREAMS_ADM</code> package or the <code>DBMS_RULE_ADM</code> package.</p>
<p>If you specify both a positive and a negative rule set for a capture process, then the negative rule set is always evaluated first.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t18" headers="r1c1-t18">
<p><code>capture_user</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t18 r1c2-t18">
<p>The user in whose security domain a capture process captures changes that satisfy its rule sets and runs custom rule-based transformations configured for capture process rules. If <code>NULL</code>, then the user who runs the <code>CREATE_CAPTURE</code> procedure is used.</p>
<p><span class="bold">Note:</span> If the capture user for a capture process is dropped using <code>DROP</code> <code>USER . . .</code> <code>CASCADE</code>, then the capture process is also dropped automatically.</p>
<p><span class="bold">See Also:</span> <a href="#i1001376">"Usage Notes"</a> for more information about this parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t18" headers="r1c1-t18">
<p><code>checkpoint_retention_time</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t18 r1c2-t18">
<p>Either specify the number of days that a capture process retains checkpoints before purging them automatically, or specify <code>DBMS_CAPTURE_ADM.INFINITE</code> if checkpoints should not be purged automatically.</p>
<p>If a number is specified, then a capture process purges a checkpoint the specified number of days after the checkpoint was taken. Partial days can be specified using decimal values. For example, <code>.25</code> specifies 6 hours.</p>
<p>When a checkpoint is purged, LogMiner data dictionary information for the archived redo log file that corresponds to the checkpoint is purged, and the <code>first_scn</code> of the capture process is reset to the SCN value corresponding to the first change in the next archived redo log file.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS152" href="../../server.112/e17069/strms_adcapture.htm#STRMS152"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about checkpoint retention time</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t18" headers="r1c1-t18">
<p><code>start_time</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t18 r1c2-t18">
<p>A valid time from which the capture process starts capturing changes.</p>
<p>An error is returned if an invalid time is specified.</p>
<p>The <code>start_scn</code> and <code>start_time</code> parameters are mutually exclusive.</p>
<p><span class="bold">See Also:</span> <a href="#i1001376">"Usage Notes"</a> for more information setting the <code>start_time</code> parameter</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1001376"></a>Usage Notes</p>
<p>Consider the following usage notes when you run this procedure:</p>
<ul>
<li>
<p><a href="#BGBDIIAE">DBA Role Requirement</a></p>
</li>
<li>
<p><a href="#BGBHIGFB">Capture User Requirements</a></p>
</li>
<li>
<p><a href="#BGBFHAIJ">First SCN and Start SCN Settings</a></p>
</li>
<li>
<p><a href="#BGBCIADH">Explicit Log File Assignment</a></p>
</li>
</ul>
<p class="subhead2"><a id="BGBDIIAE"></a><a id="ARPLS65475"></a>DBA Role Requirement</p>
<p>If the user who invokes this procedure is different from the user specified in the <code>capture_user</code> parameter, then the invoking user must be granted the <code>DBA</code> role. If the user who invokes this procedure is the same as the user specified in the <code>capture_user</code> parameter, then the <code>DBA</code> role is not required for the invoking user. Only the <code>SYS</code> user can set the <code>capture_user</code> to <code>SYS</code>.</p>
<p class="subhead2"><a id="BGBHIGFB"></a><a id="ARPLS65476"></a>Capture User Requirements</p>
<p>The <code>capture_user</code> parameter specifies the user who captures changes that satisfy the capture process rule sets. This user must have the necessary privileges to capture changes. This procedure grants the capture user enqueue privilege on the queue used by the capture process and configures the user as a secure queue user of the queue.</p>
<p>In addition, ensure that the capture user has the following privileges:</p>
<ul>
<li>
<p><code>EXECUTE</code> privilege on the rule sets used by the capture process</p>
</li>
<li>
<p><code>EXECUTE</code> privilege on all rule-based transformation functions used in the positive rule set</p>
</li>
</ul>
<p>These privileges can be granted directly to the capture user, or they can be granted through roles.</p>
<p>In addition, the capture user must be granted <code>EXECUTE</code> privilege on all packages, including Oracle-supplied packages, that are invoked in rule-based transformations run by the capture process. These privileges must be granted directly to the capture user. They cannot be granted through roles.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>A capture user does not require privileges on a database object to capture changes to the database object. The capture process can pass these changes to a rule-based transformation function. Therefore, ensure that you consider security implications when you configure a capture process.</p>
</li>
<li>
<p>Creation of the first capture process in a database might take some time because the data dictionary is duplicated during this creation.</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="BGBFHAIJ"></a><a id="ARPLS65477"></a>First SCN and Start SCN Settings</p>
<p>When you create a capture process using this procedure, you can specify the first SCN and start SCN for the capture process. A capture process scans the redo data from the first SCN or an existing capture process checkpoint forward, even if the start SCN is higher than the first SCN or the checkpoint SCN. In this case, the capture process does not capture any changes in the redo data before the start SCN. Oracle recommends that, at capture process creation time, the difference between the first SCN and start SCN be as small as possible to keep the amount of redo scanned by the capture process to a minimum.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you specify the <code>start_time</code> parameter instead of the <code>start_scn</code> parameter, the <code>start_time</code> corresponds with a specific SCN. In this case, the information in this section also applies to the SCN that corresponds with the specified <code>start_time</code>.</div>
<p>In some cases, the behavior of the capture process is different depending on the settings of these SCN values and on whether the capture process is local or downstream.</p>
<p>The following table describes capture process behavior for SCN value settings:</p>
<div class="inftblinformalwide">
<table class="cellalignment1226" title="Capture Process Behavior for SCN Value Settings" summary="This table describes capture process behavior for various first_scn and start_scn settings. It also describes the behavior for these settings for local and downstream capture processes." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t21">first_scn Setting</th>
<th class="cellalignment1227" id="r1c2-t21">start_scn Setting</th>
<th class="cellalignment1227" id="r1c3-t21">Capture Process Type</th>
<th class="cellalignment1227" id="r1c4-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t21" headers="r1c1-t21">Non-<code>NULL</code></td>
<td class="cellalignment1228" headers="r2c1-t21 r1c2-t21"><code>NULL</code></td>
<td class="cellalignment1228" headers="r2c1-t21 r1c3-t21">Local or Downstream</td>
<td class="cellalignment1228" headers="r2c1-t21 r1c4-t21">The new capture process is created at the local database with a new LogMiner session starting from the value specified for the <code>first_scn</code> parameter. The start SCN is set to the specified first SCN value automatically, and the new capture process does not capture changes that were made before this SCN.
<p>The <code>BUILD</code> procedure in the <code>DBMS_CAPTURE_ADM</code> package is not run automatically. This procedure must have been run at least once before on the source database, and the specified first SCN must correspond to the SCN value of a previous build that is still available in the redo log. When the new capture process is started for the first time, it creates a new LogMiner data dictionary using the data dictionary information in the redo log. If the <code>BUILD</code> procedure has not been run at least once on the source database, then an error is raised when the capture process is started.</p>
<p>Capture process behavior is the same for a local capture process and a downstream capture process created with these SCN settings, except that a local capture process is created at the source database and a downstream capture process is created at the downstream database.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t21" headers="r1c1-t21">Non-<code>NULL</code></td>
<td class="cellalignment1228" headers="r3c1-t21 r1c2-t21">Non-<code>NULL</code></td>
<td class="cellalignment1228" headers="r3c1-t21 r1c3-t21">Local or Downstream</td>
<td class="cellalignment1228" headers="r3c1-t21 r1c4-t21">If the specified value for the <code>start_scn</code> parameter is greater than or equal to the specified value for the <code>first_scn</code> parameter, then the new capture process is created at the local database with a new LogMiner session starting from the specified first SCN. In this case, the new capture process does not capture changes that were made before the specified start SCN. If the specified value for the <code>start_scn</code> parameter is less than the specified value for the <code>first_scn</code> parameter, then an error is raised.
<p>The <code>BUILD</code> procedure in the <code>DBMS_CAPTURE_ADM</code> package is not run automatically. This procedure must have been called at least once before on the source database, and the specified <code>first_scn</code> must correspond to the SCN value of a previous build that is still available in the redo log. When the new capture process is started for the first time, it creates a new LogMiner data dictionary using the data dictionary information in the redo log. If the <code>BUILD</code> procedure has not been run at least once on the source database, then an error is raised.</p>
<p>Capture process behavior is the same for a local capture process and a downstream capture process created with these SCN settings, except that a local capture process is created at the source database and a downstream capture process is created at the downstream database.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t21" headers="r1c1-t21"><code>NULL</code></td>
<td class="cellalignment1228" headers="r4c1-t21 r1c2-t21">Non-<code>NULL</code></td>
<td class="cellalignment1228" headers="r4c1-t21 r1c3-t21">Local</td>
<td class="cellalignment1228" headers="r4c1-t21 r1c4-t21">The new capture process creates a new LogMiner data dictionary if either one of the following conditions is true:
<ul>
<li>
<p>There is no existing capture process for the local source database, and the specified value for the <code>start_scn</code> parameter is greater than or equal to the current SCN for the database.</p>
</li>
<li>
<p>There are existing capture processes, but none of the capture processes have taken a checkpoint yet, and the specified value for the <code>start_scn</code> parameter is greater than or equal to the current SCN for the database.</p>
</li>
</ul>
<p>In either of these cases, the <code>BUILD</code> procedure in the <code>DBMS_CAPTURE_ADM</code> package is run during capture process creation. The new capture process uses the resulting build of the source data dictionary in the redo log to create a LogMiner data dictionary the first time it is started, and the first SCN corresponds to the SCN of the data dictionary build. If there are any in-flight transactions, then the <code>BUILD</code> procedure waits until these transactions commit before completing. An in-flight transaction is one that is active during capture process creation or a data dictionary build.</p>
<p>However, if there is at least one existing local capture process for the local source database that has taken a checkpoint, then the new capture process shares an existing LogMiner data dictionary with one or more of the existing capture processes. In this case, a capture process with a first SCN that is lower than or equal to the specified start SCN must have been started successfully at least once. Also, if there are any in-flight transactions, then the capture process is created after these transactions commit.</p>
<p>If there is no existing capture process for the local source database (or if no existing capture processes have taken a checkpoint yet), and the specified start SCN is less than the current SCN for the database, then an error is raised.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t21" headers="r1c1-t21"><code>NULL</code></td>
<td class="cellalignment1228" headers="r5c1-t21 r1c2-t21">Non-<code>NULL</code></td>
<td class="cellalignment1228" headers="r5c1-t21 r1c3-t21">Downstream</td>
<td class="cellalignment1228" headers="r5c1-t21 r1c4-t21">When the <code>CREATE_CAPTURE</code> procedure creates a downstream capture process, the <code>use_database_link</code> parameter must be set to <code>TRUE</code> when the <code>first_scn</code> parameter is set to <code>NULL</code>. Otherwise, an error is raised. The database link is used to obtain the current SCN of the source database.
<p>The new capture process creates a new LogMiner data dictionary if either one of the following conditions is true:</p>
<ul>
<li>
<p>There is no existing capture process that captures changes to the source database at the downstream database, and the specified value for the <code>start_scn</code> parameter is greater than or equal to the current SCN for the source database.</p>
</li>
<li>
<p>There are existing capture processes that capture changes to the source database at the downstream database, but none of the capture processes have taken a checkpoint yet, and the specified value for the <code>start_scn</code> parameter is greater than or equal to the current SCN for the source database.</p>
</li>
</ul>
<p>In either of these cases, the <code>BUILD</code> procedure in the <code>DBMS_CAPTURE_ADM</code> package is run during capture process creation. The first time you start the new capture process, it uses the resulting build of the source data dictionary in the redo log files copied to the downstream database to create a LogMiner data dictionary. Here, the first SCN for the new capture process corresponds to the SCN of the data dictionary build. If there are any in-flight transactions, then the <code>BUILD</code> procedure waits until these transactions commit before completing.</p>
<p>However, if at least one existing capture process has taken a checkpoint and captures changes to the source database at the downstream database, then the new capture process shares an existing LogMiner data dictionary with one or more of these existing capture processes. In this case, one of these existing capture processes with a first SCN that is lower than or equal to the specified start SCN must have been started successfully at least once. Also, if there are any in-flight transactions, then the capture process is created after these transactions commit.</p>
<p>If there is no existing capture process that captures changes to the source database at the downstream database (or no existing capture process has taken a checkpoint), and the specified <code>start_scn</code> parameter value is less than the current SCN for the source database, then an error is raised.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t21" headers="r1c1-t21"><code>NULL</code></td>
<td class="cellalignment1228" headers="r6c1-t21 r1c2-t21"><code>NULL</code></td>
<td class="cellalignment1228" headers="r6c1-t21 r1c3-t21">Local or Downstream</td>
<td class="cellalignment1228" headers="r6c1-t21 r1c4-t21">The behavior is the same as setting the <code>first_scn</code> parameter to <code>NULL</code> and setting the <code>start_scn</code> parameter to the current SCN of the source database.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
When you create a capture process using the <code>DBMS_STREAMS_ADM</code> package, both the first SCN and the start SCN are set to <code>NULL</code> during capture process creation.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1003124">BUILD Procedure</a> for more information about the <code>BUILD</code> procedure and the LogMiner data dictionary</div>
<p class="subhead2"><a id="BGBCIADH"></a><a id="ARPLS65478"></a>Explicit Log File Assignment</p>
<p>If you specify <code>explicit</code> for the <code>logfile_assignment</code> parameter, then you add a redo log file manually to a downstream database using the following statement:</p>
<pre>
ALTER DATABASE REGISTER LOGICAL LOGFILE 
   <span class="italic">file_name</span> FOR <span class="italic">capture_process</span>;
</pre>
<p>Here, <code><span class="codeinlineitalic">file_name</span></code> is the name of the redo log file being added and <code><span class="codeinlineitalic">capture_process</span></code> is the name of the capture process that will use the redo log file at the downstream database. The <code><span class="codeinlineitalic">capture_process</span></code> is equivalent to the <code><span class="codeinlineitalic">logminer_session_name</span></code> and must be specified. The redo log file must be present at the site running the downstream database. You must transfer this file manually to the site running the downstream database using the <code>DBMS_FILE_TRANSFER</code> package, FTP, or some other transfer method.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF00802" href="../../server.112/e41084/statements_1004.htm#SQLRF00802"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code>ALTER</code> <code>DATABASE</code> statement and <a class="olink SBYDB" href="../../server.112/e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information registering redo log files</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65479" class="refsect2"><a id="BGBCAHCG"></a>
<hr />
<h3 class="refsect2">CREATE_SYNC_CAPTURE Procedure<a id="sthref1309"></a></h3>
<p>This procedure creates a synchronous capture.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP208" href="../../server.112/e10705/ccap.htm#STREP208"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about creating a synchronous capture</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1310"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.CREATE_SYNC_CAPTURE(
   queue_name     IN  VARCHAR2,
   capture_name   IN  VARCHAR2,
   rule_set_name  IN  VARCHAR2,
   capture_user   IN  VARCHAR2  DEFAULT NUL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1311"></a>Parameters</p>
<div id="ARPLS65480" class="tblformal">
<p class="titleintable"><a id="sthref1312"></a><a id="sthref1313"></a>Table 32-9 CREATE_SYNC_CAPTURE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_SYNC_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.CREATE_SYNC_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t26">Parameter</th>
<th class="cellalignment1227" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t26" headers="r1c1-t26">
<p><code>queue_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t26 r1c2-t26">
<p>The name of the queue into which the synchronous capture enqueues changes. You must specify an existing queue in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">queue_name</span></code>. For example, to specify a queue in the <code>strmadmin</code> schema named <code>streams_queue</code>, enter <code>strmadmin.streams_queue</code>. If the schema is not specified, then the current user is the default.</p>
<p><span class="bold">Note:</span> The <code>queue_name</code> setting cannot be altered after the synchronous capture is created.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t26" headers="r1c1-t26">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t26 r1c2-t26">
<p>The name of the synchronous capture being created. A <code>NULL</code> specification is not allowed. Do not specify an owner.</p>
<p><span class="bold">Note:</span> The <code>capture_name</code> setting cannot be altered after the synchronous capture is created.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t26" headers="r1c1-t26">
<p><code>rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t26 r1c2-t26">
<p>The name of the positive rule set for the synchronous capture. The positive rule set contains the rules that instruct the synchronous capture to capture changes.</p>
<p>Specify an existing rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to specify a positive rule set in the <code>strmadmin</code> schema named <code>sync_cap_rules</code>, enter <code>strmadmin.sync_cap_rules</code>. If the schema is not specified, then the current user is the default.</p>
<p>An error is returned if the specified rule set does not exist. You must specify a rule set that was created using the <code>DBMS_STREAMS_ADM</code> package.</p>
<p>If <code>NULL</code>, then an error is returned.</p>
<p><span class="bold">Note:</span> Synchronous capture rules must be added to the synchronous capture rule set using the <code>ADD_TABLE_RULES</code> or <code>ADD_SUBSET_RULES</code> procedure in the <code>DBMS_STREAMS_ADM</code> package. A synchronous capture ignores rules added to the rule set with other procedures.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS168" href="../../server.112/e17069/strms_capture.htm#STRMS168"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about the changes that can be captured by a synchronous capture</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t26" headers="r1c1-t26">
<p><code>capture_user</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t26 r1c2-t26">
<p>The user in whose security domain the synchronous capture captures changes that satisfy its rule set and runs custom rule-based transformations configured for synchronous capture rules. If <code>NULL</code>, then the user who runs the <code>CREATE_SYNC_CAPTURE</code> procedure is used.</p>
<p>Only a user who is granted the <code>DBA</code> role can set a capture user. Only the <code>SYS</code> user can set the <code>capture_user</code> to <code>SYS</code>.</p>
<p><span class="bold">Note:</span> If the capture user for a synchronous capture is dropped using <code>DROP</code> <code>USER . . .</code> <code>CASCADE</code>, then the synchronous capture is also dropped automatically.</p>
<p><span class="bold">See Also:</span> <a href="#BGBGCDAH">"Usage Notes"</a> for more information about this parameter.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BGBGCDAH"></a>Usage Notes</p>
<p>When the <code>CREATE_SYNC_CAPTURE</code> procedure creates a synchronous capture, the procedure must obtain an exclusive lock on each table for which it will capture changes. The rules in the specified rule set for the synchronous capture determine these tables. If there are outstanding transactions on a table for which the synchronous capture will capture changes, then the procedure waits until it can obtain a lock.</p>
</div>
<!-- class="refsubsect" -->
<p>The <code>capture_user</code> parameter specifies the user who captures changes that satisfy the synchronous capture rule set. This user must have the necessary privileges to capture changes.</p>
<p>In addition, ensure that the capture user has the following privileges:</p>
<ul>
<li>
<p><code>ENQUEUE</code> privilege on the queue specified in the <code>queue_name</code> parameter</p>
</li>
<li>
<p><code>EXECUTE</code> privilege on the rule set used by the synchronous capture</p>
</li>
<li>
<p><code>EXECUTE</code> privilege on all rule-based transformation functions used in the rule set</p>
</li>
</ul>
<p>These privileges can be granted directly to the capture user, or they can be granted through roles.</p>
<p>In addition, the capture user must be granted <code>EXECUTE</code> privilege on all packages, including Oracle-supplied packages, that are invoked in rule-based transformations run by the synchronous capture. These privileges must be granted directly to the capture user. These privileges cannot be granted through roles.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
A capture user does not require privileges on a database object to capture changes to the database object. The synchronous capture can pass these changes to a rule-based transformation function. Therefore, ensure that you consider security implications when you configure a synchronous capture.</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS543" class="refsect2"><a id="i997167"></a>
<hr />
<h3 class="refsect2">DROP_CAPTURE Procedure<a id="sthref1314"></a></h3>
<p>This procedure drops a capture process.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1315"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.DROP_CAPTURE(
   capture_name           IN  VARCHAR2,
   drop_unused_rule_sets  IN  BOOLEAN  DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1316"></a>Parameters</p>
<div id="ARPLS65481" class="tblformal">
<p class="titleintable"><a id="sthref1317"></a><a id="sthref1318"></a>Table 32-10 DROP_CAPTURE Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.DROP_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t28">Parameter</th>
<th class="cellalignment1227" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t28" headers="r1c1-t28">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t28 r1c2-t28">
<p>The name of the capture process being dropped. Specify an existing capture process name. Do not specify an owner.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t28" headers="r1c1-t28">
<p><code>drop_unused_rule_sets</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t28 r1c2-t28">
<p>If <code>TRUE</code>, then the procedure drops any rule sets, positive and negative, used by the specified capture process if these rule sets are not used by any other Oracle Streams client. Oracle Streams clients include capture processes, propagations, apply processes, and messaging clients. If this procedure drops a rule set, then this procedure also drops any rules in the rule set that are not in another rule set.</p>
<p>If <code>FALSE</code>, then the procedure does not drop the rule sets used by the specified capture process, and the rule sets retain their rules.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BGBBIJHG"></a>Usage Notes</p>
<p>The following usage notes apply to this procedure:</p>
<ul>
<li>
<p><a href="#CHDICHHD">The Capture Process Must Be Stopped Before It Is Dropped</a></p>
</li>
<li>
<p><a href="#CHDICEDH">The DROP_CAPTURE Procedure and Rules-related Information</a></p>
</li>
</ul>
<p class="subhead2"><a id="CHDICHHD"></a><a id="ARPLS73341"></a>The Capture Process Must Be Stopped Before It Is Dropped</p>
<p>A capture process must be stopped before it can be dropped.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i997449">STOP_CAPTURE Procedure</a></div>
<p class="subhead2"><a id="CHDICEDH"></a><a id="ARPLS73342"></a>The DROP_CAPTURE Procedure and Rules-related Information</p>
<p>When you use this procedure to drop a capture process, rules-related information for the capture process created by the <code>DBMS_STREAMS_ADM</code> package is removed from the data dictionary views for Oracle Streams rules. Information about such a rule is removed even if the rule is not in either rule set for the capture process.</p>
<p>The following are the data dictionary views for Oracle Streams rules:</p>
<ul>
<li>
<p><code>ALL_STREAMS_GLOBAL_RULES</code></p>
</li>
<li>
<p><code>DBA_STREAMS_GLOBAL_RULES</code></p>
</li>
<li>
<p><code>ALL_STREAMS_MESSAGE_RULES</code></p>
</li>
<li>
<p><code>DBA_STREAMS_MESSAGE_RULES</code></p>
</li>
<li>
<p><code>ALL_STREAMS_SCHEMA_RULES</code></p>
</li>
<li>
<p><code>DBA_STREAMS_SCHEMA_RULES</code></p>
</li>
<li>
<p><code>ALL_STREAMS_TABLE_RULES</code></p>
</li>
<li>
<p><code>DBA_STREAMS_TABLE_RULES</code></p>
</li>
<li>
<p><code>ALL_STREAMS_RULES</code></p>
</li>
<li>
<p><code>DBA_STREAMS_RULES</code></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS118" href="../../server.112/e17069/strms_monitor.htm#STRMS118"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about Oracle Streams data dictionary views</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS522" class="refsect2"><a id="i1000175"></a>
<hr />
<h3 class="refsect2">INCLUDE_EXTRA_ATTRIBUTE Procedure<a id="sthref1319"></a><a id="sthref1320"></a><a id="sthref1321"></a></h3>
<p>This procedure includes or excludes an extra attribute in logical change records (LCRs) captured by the specified capture process or synchronous capture.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1322"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.INCLUDE_EXTRA_ATTRIBUTE(
   capture_name    IN  VARCHAR2,
   attribute_name  IN  VARCHAR2,
   include         IN  BOOLEAN   DEFAULT TRUE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1323"></a>Parameters</p>
<div id="ARPLS65482" class="tblformal">
<p class="titleintable"><a id="sthref1324"></a><a id="sthref1325"></a>Table 32-11 INCLUDE_EXTRA_ATTRIBUTE Procedure Parameters</p>
<table class="cellalignment1229" title="INCLUDE_EXTRA_ATTRIBUTE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.INCLUDE_EXTRA_ATTRIBUTE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t31">Parameter</th>
<th class="cellalignment1227" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t31" headers="r1c1-t31">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t31 r1c2-t31">
<p>The name of the capture process or synchronous capture. Specify an existing capture process name or synchronous capture name. Do not specify an owner.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t31" headers="r1c1-t31">
<p><code>attribute_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t31 r1c2-t31">
<p>The name of the attribute to be included in or excluded from LCRs captured by the capture process or synchronous capture. The following names are valid settings:</p>
<ul>
<li>
<p><code>row_id</code></p>
<p>The rowid of the row changed in a row LCR. This attribute is not included in DDL LCRs, or in row LCRs for index-organized tables. The type is <code>VARCHAR2</code>.</p>
</li>
<li>
<p><code>serial#</code></p>
<p>The serial number of the session that performed the change captured in the LCR. The type is <code>NUMBER</code>.</p>
</li>
<li>
<p><code>session#</code></p>
<p>The identifier of the session that performed the change captured in the LCR. The type is <code>NUMBER</code>.</p>
</li>
<li>
<p><code>thread#</code></p>
<p>The thread number of the instance in which the change captured in the LCR was performed. Typically, the thread number is relevant only in an Oracle Real Application Clusters (Oracle RAC) environment. The type is <code>NUMBER</code>.</p>
</li>
<li>
<p><code>tx_name</code></p>
<p>The name of the transaction that includes the LCR. The type is <code>VARCHAR2</code>.</p>
</li>
<li>
<p><code>username</code></p>
<p>The name of the user who performed the change captured in the LCR. The type is <code>VARCHAR2</code>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t31" headers="r1c1-t31">
<p><code>include</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t31 r1c2-t31">
<p>If <code>TRUE</code>, then the specified attribute is included in LCRs captured by the capture process or synchronous capture.</p>
<p>If <code>FALSE</code>, then the specified attribute is excluded from LCRs captured by the capture process or synchronous capture.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1326"></a>Usage Notes</p>
<p>Some information is not captured by a capture process or synchronous capture unless you use this procedure to specify that the information should be captured. If you want to exclude an extra attribute that is being captured by a capture process or synchronous capture, then specify the attribute and specify <code>FALSE</code> for the <code>include</code> parameter.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS544" class="refsect2"><a id="BGBDGIEG"></a>
<hr />
<h3 class="refsect2">PREPARE_GLOBAL_INSTANTIATION Procedure<a id="sthref1327"></a><a id="sthref1328"></a><a id="sthref1329"></a></h3>
<p>This procedure performs the synchronization necessary for instantiating all the tables in the database at another database and can enable supplemental logging for key columns or all columns in these tables. This procedure prepares the tables in the database for instantiation when a capture process will be used to capture changes to the tables in the database.</p>
<p>This procedure records the lowest SCN of each object in the database for instantiation. SCNs after the lowest SCN for an object can be used for instantiating the object. Running this procedure prepares all current and future objects in the database for instantiation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP" href="../../server.112/e10705/toc.htm"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about <a class="olink STREP012" href="../../server.112/e10705/instant.htm#STREP012">instantiation</a> and <a class="olink STREP107" href="../../server.112/e10705/prep_rep.htm#STREP107">supplemental logging</a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1330"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.PREPARE_GLOBAL_INSTANTIATION
   supplemental_logging    IN  VARCHAR2  DEFAULT 'KEYS');
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1331"></a>Parameter</p>
<div id="ARPLS65483" class="tblformal">
<p class="titleintable"><a id="sthref1332"></a><a id="sthref1333"></a>Table 32-12 PREPARE_GLOBAL_INSTANTIATION Procedure Parameter</p>
<table class="cellalignment1229" title="PREPARE_GLOBAL_INSTANTIATION Procedure Parameter" summary="This table describes the parameters of DBMS_CAPTURE_ADM.PREPARE_GLOBAL_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t33">Parameter</th>
<th class="cellalignment1227" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t33" headers="r1c1-t33">
<p><code>supplemental_logging</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t33 r1c2-t33">
<p>Either <code>NONE</code>, <code>KEYS</code>, or <code>ALL</code>.</p>
<p>If <code>NONE</code> is specified, then this procedure does not enable supplemental logging for any columns in the tables in the database. This procedure does not remove existing supplemental logging specifications for these tables.</p>
<p>If <code>KEYS</code> is specified, then this procedure enables supplemental logging for primary key, unique key, bitmap index, and foreign key columns in the tables in the database and for any table added to the database in the future. Primary key columns are logged unconditionally. Unique key, bitmap index, and foreign key columns are logged conditionally. Specifying <code>KEYS</code> does not enable supplemental logging of bitmap join index columns.</p>
<p>If <code>ALL</code> is specified, then this procedure enables supplemental logging for all columns in the tables in the database and for any table added to the database in the future. The columns are logged unconditionally. Supplemental logging is not enabled for columns of the following types: LOB, <code>LONG</code>, <code>LONG</code> <code>RAW</code>, user-defined types, and Oracle-supplied types.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1334"></a>Usage Notes</p>
<p>Run this procedure at the source database.</p>
<p>If you use a capture process to capture all of the changes to a database, then use this procedure to prepare the tables in the database for instantiation after the capture process has been configured.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS545" class="refsect2"><a id="BGBCHBDG"></a>
<hr />
<h3 class="refsect2">PREPARE_SCHEMA_INSTANTIATION Procedure<a id="sthref1335"></a><a id="sthref1336"></a><a id="sthref1337"></a></h3>
<p>This procedure performs the synchronization necessary for instantiating all tables in the schema at another database and can enable supplemental logging for key columns or all columns in these tables. This procedure prepares the tables in the schema for instantiation when a capture process will be used to capture changes to the tables in the schema.</p>
<p>This procedure records the lowest SCN of each object in the schema for instantiation. SCNs after the lowest SCN for an object can be used for instantiating the object. Running this procedure prepares all current and future objects in the schema for instantiation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP" href="../../server.112/e10705/toc.htm"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about <a class="olink STREP012" href="../../server.112/e10705/instant.htm#STREP012">instantiation</a> and <a class="olink STREP107" href="../../server.112/e10705/prep_rep.htm#STREP107">supplemental logging</a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1338"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.PREPARE_SCHEMA_INSTANTIATION(
   schema_name           IN  VARCHAR2,
   supplemental_logging  IN  VARCHAR2  DEFAULT 'KEYS');
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1339"></a>Parameters</p>
<div id="ARPLS65484" class="tblformal">
<p class="titleintable"><a id="sthref1340"></a><a id="sthref1341"></a>Table 32-13 PREPARE_SCHEMA_INSTANTIATION Procedure Parameters</p>
<table class="cellalignment1229" title="PREPARE_SCHEMA_INSTANTIATION Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.PREPARE_SCHEMA_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t35">Parameter</th>
<th class="cellalignment1227" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t35" headers="r1c1-t35">
<p><code>schema_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t35 r1c2-t35">
<p>The name of the schema. For example, <code>hr</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t35" headers="r1c1-t35">
<p><code>supplemental_logging</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t35 r1c2-t35">
<p>Either <code>NONE</code>, <code>KEYS</code>, or <code>ALL</code>.</p>
<p>If <code>NONE</code> is specified, then this procedure does not enable supplemental logging for any columns in the tables in the schema. This procedure does not remove existing supplemental logging specifications for these tables.</p>
<p>If <code>KEYS</code> is specified, then this procedure enables supplemental logging for primary key, unique key, bitmap index, and foreign key columns in the tables in the schema and for any table added to this schema in the future. Primary key columns are logged unconditionally. Unique key, bitmap index, and foreign key columns are logged conditionally. Specifying <code>KEYS</code> does not enable supplemental logging of bitmap join index columns.</p>
<p>If <code>ALL</code> is specified, then this procedure enables supplemental logging for all columns in the tables in the schema and for any table added to this schema in the future. The columns are logged unconditionally. Supplemental logging is not enabled for columns of the following types: LOB, <code>LONG</code>, <code>LONG</code> <code>RAW</code>, user-defined types, and Oracle-supplied types.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1342"></a>Usage Notes</p>
<p>Run this procedure at the source database. If you use a capture process to capture all of the changes to a schema, then use this procedure to prepare the tables in the schema for instantiation after the capture process has been configured.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65485" class="refsect2"><a id="BGBFEICF"></a>
<hr />
<h3 class="refsect2">PREPARE_SYNC_INSTANTIATION Function<a id="sthref1343"></a><a id="sthref1344"></a><a id="sthref1345"></a></h3>
<p>This function performs the synchronization necessary for instantiating one or more tables at another database. This function returns the prepare system change number (SCN) for the table or tables being prepared for instantiation.</p>
<p>This function prepares one or more tables for instantiation when a synchronous capture will be used to capture changes to the tables.</p>
<p>This function records the lowest SCN of each table for instantiation (prepare SCN). SCNs after the lowest SCN for an object can be used for instantiating the object.</p>
<p>This function is overloaded. The <code>table_names</code> parameter is <code>VARCHAR2</code> data type in one version and <code>DBMS_UTILITY.UNCL_ARRAY</code> data type in the other version.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP012" href="../../server.112/e10705/instant.htm#STREP012"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about instantiation</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1346"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.PREPARE_SYNC_INSTANTIATION(
   table_names IN VARCHAR2)
RETURN NUMBER;

DBMS_CAPTURE_ADM.PREPARE_SYNC_INSTANTIATION(
   table_names IN DBMS_UTILITY.UNCL_ARRAY)
RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1347"></a>Parameters</p>
<div id="ARPLS65486" class="tblformal">
<p class="titleintable"><a id="sthref1348"></a><a id="sthref1349"></a>Table 32-14 PREPARE_SYNC_INSTANTIATION Function Parameter</p>
<table class="cellalignment1229" title="PREPARE_SYNC_INSTANTIATION Function Parameter" summary="This table describes the parameter of DBMS_CAPTURE_ADM.PREPARE_SYNC_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t37">Parameter</th>
<th class="cellalignment1227" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t37" headers="r1c1-t37">
<p><code>table_names</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t37 r1c2-t37">
<p>When the <code>table_names</code> parameter is <code>VARCHAR2</code> data type, a comma-delimited list of the tables to prepare for instantiation. There must be no spaces between entries.</p>
<p>When the <code>table_names</code> parameter is <code>DBMS_UTILITY.UNCL_ARRAY</code> data type, specify a PL/SQL associative array of this type that contains the names of the tables to prepare for instantiation. The first table name is at position 1, the second at position 2, and so on. The table does not need to be <code>NULL</code> terminated.</p>
<p>In either version of the function, specify the name of each table in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">table_name</span></code>. For example, <code>hr.employees</code>. If the schema is not specified, then the current user is the default.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS546" class="refsect2"><a id="i997227"></a>
<hr />
<h3 class="refsect2">PREPARE_TABLE_INSTANTIATION Procedure<a id="sthref1350"></a><a id="sthref1351"></a><a id="sthref1352"></a></h3>
<p>This procedure performs the synchronization necessary for instantiating the table at another database and can enable supplemental logging for key columns or all columns in the table. This procedure prepares the table for instantiation when a capture process will be used to capture changes to the table.</p>
<p>This procedure records the lowest SCN of the table for instantiation. SCNs after the lowest SCN for an object can be used for instantiating the object.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STREP" href="../../server.112/e10705/toc.htm"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about <a class="olink STREP012" href="../../server.112/e10705/instant.htm#STREP012">instantiation</a> and <a class="olink STREP107" href="../../server.112/e10705/prep_rep.htm#STREP107">supplemental logging</a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1353"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.PREPARE_TABLE_INSTANTIATION(
   table_name            IN  VARCHAR2,
   supplemental_logging  IN  VARCHAR2  DEFAULT 'KEYS');
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1354"></a>Parameters</p>
<div id="ARPLS65487" class="tblformal">
<p class="titleintable"><a id="sthref1355"></a><a id="sthref1356"></a>Table 32-15 PREPARE_TABLE_INSTANTIATION Procedure Parameters</p>
<table class="cellalignment1229" title="PREPARE_TABLE_INSTANTIATION Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.PREPARE_TABLE_INSTANTIATION." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t39">Parameter</th>
<th class="cellalignment1227" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t39" headers="r1c1-t39">
<p><code>table_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t39 r1c2-t39">
<p>The name of the table specified as <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">object_name</span></code>. For example, <code>hr.employees</code>. If the schema is not specified, then the current user is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t39" headers="r1c1-t39">
<p><code>supplemental_logging</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t39 r1c2-t39">
<p>Either <code>NONE</code>, <code>KEYS</code>, or <code>ALL</code>.</p>
<p>If <code>NONE</code> is specified, then this procedure does not enable supplemental logging for any columns in the table. This procedure does not remove existing supplemental logging specifications for the table.</p>
<p>If <code>KEYS</code> is specified, then this procedure enables supplemental logging for primary key, unique key, bitmap index, and foreign key columns in the table. The procedure places the key columns for the table in three separate log groups: the primary key columns in an unconditional log group, the unique key columns and bitmap index columns in a conditional log group, and the foreign key columns in a conditional log group. Specifying <code>KEYS</code> does not enable supplemental logging of bitmap join index columns.</p>
<p>If <code>ALL</code> is specified, then this procedure enables supplemental logging for all columns in the table. The procedure places all of the columns for the table in an unconditional log group. Supplemental logging is not enabled for columns of the following types: LOB, <code>LONG</code>, <code>LONG</code> <code>RAW</code>, user-defined types, and Oracle-supplied types.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1357"></a>Usage Notes</p>
<p>Run this procedure at the source database. If you use a capture process to capture all of the changes to a table, then use this procedure to prepare the table for instantiation after the capture process has been configured.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS306" class="refsect2"><a id="i997253"></a>
<hr />
<h3 class="refsect2">SET_PARAMETER Procedure<a id="sthref1358"></a><a id="sthref1359"></a></h3>
<p>This procedure sets a capture process parameter to the specified value.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1360"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.SET_PARAMETER(
   capture_name  IN  VARCHAR2,
   parameter     IN  VARCHAR2,
   value         IN  VARCHAR2  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1361"></a>Parameters</p>
<div id="ARPLS65488" class="tblformal">
<p class="titleintable"><a id="sthref1362"></a><a id="sthref1363"></a>Table 32-16 SET_PARAMETER Procedure Parameters</p>
<table class="cellalignment1229" title="SET_PARAMETER Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.SET_PARAMETER." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t40">Parameter</th>
<th class="cellalignment1227" id="r1c2-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t40" headers="r1c1-t40">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t40 r1c2-t40">
<p>The name of the capture process. Do not specify an owner.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t40" headers="r1c1-t40">
<p><code>parameter</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t40 r1c2-t40">
<p>The name of the parameter you are setting. See <a href="#BGBBAFIJ">"Capture Process Parameters"</a> for a list of these parameters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t40" headers="r1c1-t40">
<p><code>value</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t40 r1c2-t40">
<p>The value to which the parameter is set.</p>
<p>If <code>NULL</code>, then the parameter is set to its default value.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BGBBAFIJ"></a>Capture Process Parameters</p>
<p>The following table lists the parameters for the capture process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2), this subprogram includes the following new capture process parameters: <code>capture_idkey_objects</code>, <code>capture_sequence_nextval</code>, <code>excludeuserid</code>, <code>excludeuser</code>, <code>excludetrans</code>, <code>getapplops</code>, <code>getreplicates</code>, <code>ignore_transaction</code>, <code>ignore_unsupported_table</code>, and <code>max_sga_size</code>.</div>
<div id="ARPLS65489" class="tblformalwidemax">
<p class="titleintable"><a id="sthref1364"></a><a id="sthref1365"></a>Table 32-17 Capture Process Parameters</p>
<table class="cellalignment1226" title="Capture Process Parameters" summary="This table lists the parameters for the capture process." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t42">Parameter Name</th>
<th class="cellalignment1227" id="r1c2-t42">Possible Values</th>
<th class="cellalignment1227" id="r1c3-t42">Default</th>
<th class="cellalignment1227" id="r1c4-t42">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1366"></a>capture_idkey_objects</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t42 r1c3-t42">
<p><code>N</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process captures ID key logical change records (LCRs).</p>
<p>If <code>N</code>, then the capture process does not capture ID key LCRs.</p>
<p>Capture processes do not fully support capturing changes to some data types from the redo log. ID key LCRs enable an XStream configuration to capture these changes and process them with an XStream client application.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter and <a class="olink XSTRM72577" href="../../server.112/e16545/xstrm_cncpt.htm#XSTRM72577"><span class="italic">Oracle Database XStream Guide</span></a> for more information about ID key LCRs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1367"></a>capture_sequence_nextval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t42 r1c3-t42">
<p><code>N</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process captures sequence LCRs for all of the sequences in the database, except for sequences in Oracle-supplied, administrative schemas such as <code>SYS</code> and <code>SYSTEM</code>. The capture process's rule sets can filter sequence LCRs in the same way that they filter row LCRs and DDL LCRs.</p>
<p>If <code>N</code>, then the capture process does not capture sequence LCRs.</p>
<p>An apply process or XStream inbound server can use sequence LCRs to ensure that the sequence values at a destination database use the appropriate values. For increasing sequences, the sequence values at the destination are equal to or greater than the sequence values at the source database. For decreasing sequences, the sequence values at the destination are less than or equal to the sequence values at the source database.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter and <a href="d_apply.htm#i997629">"SET_PARAMETER Procedure"</a> for information about the <code>apply_sequence_nextval</code> apply process parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1368"></a>disable_on_limit</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t42 r1c3-t42">
<p><code>N</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process is disabled because it reached a value specified by the <code>time_limit</code> parameter or <code>message_limit</code> parameter.</p>
<p>If <code>N</code>, then the capture process is restarted immediately after stopping because it reached a limit.</p>
<p>When a capture process is restarted, it starts to capture changes at the point where it last stopped. A restarted capture process gets a new session identifier, and the processes associated with the capture process also get new session identifiers. However, the capture process number (<code>CP</code><code><span class="codeinlineitalic">nn</span></code>) remains the same.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1369"></a>downstream_real_time_mine</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t42 r1c3-t42">
<p><code>Y</code> for local capture processes</p>
<p><code>N</code> for downstream capture processes</p>
</td>
<td class="cellalignment1228" headers="r5c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process is a real-time downstream capture process. After setting this parameter to <code>Y</code>, switch the redo log file at the source database using the SQL statement <code>ALTER</code> <code>SYSTEM</code> <code>ARCHIVE</code> <code>LOG</code> <code>CURRENT</code> to begin real-time downstream capture. If this parameter is set to <code>Y</code>, then redo data from the source database must be sent to the standby redo log at the downstream database. See <a class="olink STREP207" href="../../server.112/e10705/ccap.htm#STREP207"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for information about creating a real-time downstream capture process.</p>
<p>If <code>N</code>, then the capture process is an archived-log downstream capture process.</p>
<p>An error is raised if an attempt is made to set this parameter for a local capture process.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t42" headers="r1c1-t42">
<p><code>excludeuserid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t42 r1c2-t42">
<p>Comma-delimited list of user ID values</p>
</td>
<td class="cellalignment1228" headers="r6c1-t42 r1c3-t42">
<p><code>NULL</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t42 r1c4-t42">
<p>Controls whether the capture process captures data manipulation language (DML) changes made by the specified users.</p>
<p>Whether the capture process captures these changes depends on the settings for the <code>getapplops</code> and <code>getreplicates</code> parameters.</p>
<p>To view the user ID for a user, query the <code>USER_ID</code> column in the <a class="olink REFRN20302" href="../../server.112/e40402/statviews_2130.htm#REFRN20302"><code>ALL_USERS</code></a> data dictionary view.</p>
<p>If <code>NULL</code>, then the capture process ignores this parameter.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t42" headers="r1c1-t42">
<p><code>excludeuser</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t42 r1c2-t42">
<p>Comma-delimited list of user names</p>
</td>
<td class="cellalignment1228" headers="r7c1-t42 r1c3-t42">
<p><code>NULL</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t42 r1c4-t42">
<p>Controls whether the capture process captures DML changes made by the specified users.</p>
<p>Whether the capture process captures these changes depends on the settings for the <code>getapplops</code> and <code>getreplicates</code> parameters.</p>
<p>Specify an exact pattern match for each user name. The pattern match is case sensitive. For example, specify <code>HR</code> for the <code>hr</code> user.</p>
<p>If <code>NULL</code>, then the capture process ignores this parameter.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t42" headers="r1c1-t42">
<p><code>excludetrans</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t42 r1c2-t42">
<p>Comma-delimited list of transaction names</p>
</td>
<td class="cellalignment1228" headers="r8c1-t42 r1c3-t42">
<p><code>NULL</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t42 r1c4-t42">
<p>Controls whether the capture process captures DML changes in the specified transactions.</p>
<p>Whether the capture process captures these changes depends on the settings for the <code>getapplops</code> and <code>getreplicates</code> parameters.</p>
<p>If <code>NULL</code>, then the capture process ignores this parameter.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t42" headers="r1c1-t42">
<p><code>getapplops</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t42 r1c3-t42">
<p><code>Y</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process captures DML changes if the original user is not specified in the <code>excludeuserid</code> or <code>excludeuser</code> parameters and the transaction name is not specified in the <code>excludetrans</code> parameter.</p>
<p>If <code>N</code>, then the capture process ignores DML changes if the original user is not specified in the <code>excludeuserid</code> or <code>excludeuser</code> parameters and the transaction name is not specified in the <code>excludetrans</code> parameter.</p>
<p>In either case, the capture process captures a DML change only if it satisfies the capture process's rule sets.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t42" headers="r1c1-t42">
<p><code>getreplicates</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t42 r1c3-t42">
<p><code>N</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process captures DML changes if the original user is specified in the <code>excludeuserid</code> or <code>excludeuser</code> parameters and the transaction name is specified in the <code>excludetrans</code> parameter.</p>
<p>If <code>N</code>, then the capture process ignores DML changes if the original user is specified in the <code>excludeuserid</code> or <code>excludeuser</code> parameters and the transaction name is specified in the <code>excludetrans</code> parameter.</p>
<p>In either case, the capture process captures a DML change only if it satisfies the capture process's rule sets.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1370"></a>ignore_transaction</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t42 r1c2-t42">
<p>A valid transaction ID or <code>NULL</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t42 r1c3-t42">
<p><code>NULL</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t42 r1c4-t42">
<p>Instructs the capture process to ignore the specified transaction from the source database, effective immediately.</p>
<p>The capture process eliminates all subsequent LCRs for the transaction. If the specified transaction is committed successfully at the source database, the destination database will receive a <code>ROLLBACK</code> statement instead, and any LCRs from the transaction that were enqueued before the ignore transaction request are rolled backed at the destination database.</p>
<p>If <code>NULL</code>, then the capture process ignores this parameter.</p>
<p>Use caution when setting this parameter because ignoring a transaction might lead to data divergence between the source database and destination database.</p>
<p>To ignore multiple transactions, specify each transaction in a separate call to the <code>SET_PARAMETER</code> procedure. The <code>DBA_CAPTURE_PARAMETERS</code> view displays a comma-delimited list of all transactions to be ignored. To clear the list of ignored transactions, run the <code>SET_PARAMETER</code> procedure and specify <code>NULL</code> for the <code>ignore_transaction</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1371"></a>ignore_unsupported_table</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t42 r1c2-t42">
<p>A fully qualified table name, <code>*</code>, or <code>-</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t42 r1c3-t42">
<p><code>*</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t42 r1c4-t42">
<p>Controls the behavior of the capture process when it tries to capture changes to a specified table or to an unsupported table.</p>
<p>A capture process tries to capture changes to an unsupported table when its rule sets instruct it to do so. If you do not want the capture process to try to capture changes to unsupported tables, then ensure that the capture process's rule sets exclude unsupported tables.</p>
<p>When a table name is specified, the capture process does not capture changes to the specified table. The table name must be entered in the form <code><span class="codeinlineitalic">table_owner. table_name</span></code>. For example. <code>hr.employees</code>. To specify multiple tables, specify each table in a separate call to the <code>SET_PARAMETER</code> procedure.</p>
<p>When <code>*</code> is specified and the capture process tries to capture a change to an unsupported table, the capture process ignores the change and continues to run. The change to the unsupported table is not captured, and the capture process records the unsupported table in the alert log.</p>
<p>When <code>-</code> is specified and the capture process tries to capture a change to an unsupported table, the capture process aborts.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1372"></a>max_sga_size</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t42 r1c2-t42">
<p>A positive integer</p>
</td>
<td class="cellalignment1228" headers="r13c1-t42 r1c3-t42">
<p><code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t42 r1c4-t42">
<p>Controls the amount of system global area (SGA) memory allocated specifically to the capture process, in megabytes. The capture process attempts to allocate memory up to this limit. A capture process uses Oracle LogMiner to scan for changes in the redo log.</p>
<p>The memory is allocated for the duration of the capture process session and is released when the capture process becomes disabled.</p>
<p><span class="bold">Note:</span> The sum of system global area (SGA) memory allocated for all components on a database must be less than the value set for the <code>STREAMS_POOL_SIZE</code> initialization parameter.</p>
<p>If <code>NULL</code>, then the capture component uses the original default value. A <code>NULL</code> value has the same effect as resetting the parameter to its default value.</p>
<p><span class="bold">Note:</span> This parameter is intended for XStream. Do not use or attempt to set this parameter in an Oracle Streams replication environment unless XStream capabilities are enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure.</p>
<p><span class="bold">See Also:</span> <a href="#CHDEABJB">"Usage Notes"</a> for more information about this parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1373"></a>maximum_scn</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t42 r1c2-t42">
<p>A valid SCN or <code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t42 r1c3-t42">
<p><code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t42 r1c4-t42">
<p>The capture process is disabled before capturing a change record with an SCN greater than or equal to the value specified.</p>
<p>If <code>INFINITE</code>, then the capture process runs regardless of the SCN value.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t42" headers="r1c1-t42">
<p><code>merge_threshold</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t42 r1c2-t42">
<p>A negative integer, <code>0</code>, a positive integer, or <code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t42 r1c3-t42">
<p><code>60</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t42 r1c4-t42">
<p>The amount of time, in seconds, between the message creation time of the original capture process and the message creation time of the cloned capture process.</p>
<p>Specifically, if the difference, in seconds, between the <code>CAPTURE_MESSAGE_CREATE_TIME</code> of the cloned capture process and the original capture process is less than or equal to the value specified for this parameter, then automatic merge begins by running the <code>MERGE_STREAMS</code> procedure. If the difference is greater than the value specified by this parameter, then automatic merge does not begin, and the value is recorded in the <code>LAG</code> column of the <code>DBA_STREAMS_SPLIT_MERGE</code> view. The <code>CAPTURE_MESSAGE_CREATE_TIME</code> is recorded in the <code>V$STREAMS_CAPTURE</code> view.</p>
<p>This parameter is relevant only when changes captured by the capture process are applied by two or more apply processes and the <code>split_threshold</code> parameter is set to a value other than <code>INFINITE</code>.</p>
<p>If a negative value is specified, then automatic merge is disabled.</p>
<p>If <code>0</code> (zero) is specified, then there must be no lag between the original capture process and the cloned capture process to begin the merge.</p>
<p>If <code>INFINITE</code> is specified, then automatic merging starts immediately.</p>
<p><span class="bold">See Also:</span> <a class="olink STREP144" href="../../server.112/e10705/man_gen_rep.htm#STREP144"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1374"></a>message_limit</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t42 r1c2-t42">
<p>A positive integer or <code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t42 r1c3-t42">
<p><code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t42 r1c4-t42">
<p>The capture process stops after capturing the specified number of messages.</p>
<p>If <code>INFINITE</code>, then the capture process continues to run regardless of the number of messages captured.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1375"></a>message_tracking_frequency</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t42 r1c2-t42">
<p><code>0</code> or a positive integer</p>
</td>
<td class="cellalignment1228" headers="r17c1-t42 r1c3-t42">
<p><code>2000000</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t42 r1c4-t42">
<p>The frequency at which messages captured by the capture process are tracked automatically.</p>
<p>For example, if this parameter is set to the default value of <code>2000000</code>, then every two-millionth message is tracked automatically.</p>
<p>The tracking label used for automatic message tracking is <code><span class="codeinlineitalic">capture_process_name</span></code><code>:AUTOTRACK</code>, where <code><span class="codeinlineitalic">capture_process_name</span></code> is the name of the capture process. Only the first 20 bytes of the capture process name are used; the rest is truncated if it exceeds 20 bytes.</p>
<p>If <code>0</code> (zero), then no messages are tracked automatically.</p>
<p>See <a class="olink STREP145" href="../../server.112/e10705/man_gen_rep.htm#STREP145"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for more information about message tracking.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1376"></a>parallelism</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t42 r1c2-t42">
<p>A positive integer</p>
</td>
<td class="cellalignment1228" headers="r18c1-t42 r1c3-t42">
<p><code>1</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t42 r1c4-t42">
<p>The number of preparer servers that can concurrently mine the redo log for the capture process.</p>
<p>A capture process consists of one reader server, one or more preparer servers, and one builder server. The preparer servers concurrently format changes found in the redo log into logical change records (LCRs). Each reader server, preparer server, and builder server is a process, and the number of preparer servers equals the number specified for the <code>parallelism</code> capture process parameter. So, if <code>parallelism</code> is set to 5, then a capture process uses a total of seven processes: one reader server, five preparer servers, and one builder server.</p>
<p>Setting the <code>parallelism</code> parameter to a number higher than the number of available parallel execution servers might disable the capture process. Ensure that the <code>PROCESSES</code> initialization parameter is set appropriately when you set the <code>parallelism</code> capture process parameter.</p>
<p><span class="bold">Note:</span> When you change the value of this parameter, the capture process is stopped and restarted automatically.</p>
<p><span class="bold">See Also:</span> <a class="olink STRMS178" href="../../server.112/e17069/strms_capture.htm#STRMS178"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about capture process components</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1377"></a>skip_autofiltered_table_ddl</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t42 r1c3-t42">
<p><code>Y</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process does not capture data definition language (DDL) changes to tables that are automatically filtered by the capture process.</p>
<p>If <code>N</code>, then the capture process can capture DDL changes to tables that are automatically filtered by the capture process if the DDL changes satisfy the capture process rule sets.</p>
<p>The <code>AUTO_FILTERED</code> column in the <code>DBA_STREAMS_UNSUPPORTED</code> data dictionary view shows which tables are automatically filtered by capture processes.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t42" headers="r1c1-t42">
<p><code>split_threshold</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t42 r1c2-t42">
<p><code>0</code>, a positive integer, or <code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t42 r1c3-t42">
<p><code>1800</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t42 r1c4-t42">
<p>The amount of time, in seconds, that a stream is broken before the stream is automatically split from other streams that flow from the capture process. When a stream is split, the capture process, queue, and propagation are cloned.</p>
<p>In this case, a stream is a flow of logical change records (LCRs) that flows from a capture process to an apply. A stream is broken when LCRs captured by the capture process cannot reach the apply process. For example, a stream is broken when the relevant propagation or apply process is disabled.</p>
<p>This parameter is relevant only when changes captured by the capture process are applied by two or more apply processes.</p>
<p>If <code>0</code> (zero), then automatic splitting starts immediately.</p>
<p>If <code>INFINITE</code>, then automatic splitting is disabled. The stream is not split regardless of the amount of time that it is broken.</p>
<p>This parameters is designed to be used with the <code>merge_threshold</code> parameter. You can monitor an automatic split and merge operation by querying the <code>DBA_STREAMS_SPLIT_MERGE</code> view.</p>
<p><span class="bold">See Also:</span> <a class="olink STREP144" href="../../server.112/e10705/man_gen_rep.htm#STREP144"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r21c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1378"></a>startup_seconds</code></p>
</td>
<td class="cellalignment1228" headers="r21c1-t42 r1c2-t42">
<p><code>0</code>, a positive integer, or <code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r21c1-t42 r1c3-t42">
<p><code>0</code></p>
</td>
<td class="cellalignment1228" headers="r21c1-t42 r1c4-t42">
<p>The maximum number of seconds to wait for another instantiation of the same capture process to finish. If the other instantiation of the same capture process does not finish within this time, then the capture process does not start. This parameter is useful only if you are starting the capture process manually.</p>
<p>If <code>INFINITE</code>, then the capture process does not start until another instantiation of the same capture process finishes.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r22c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1379"></a>time_limit</code></p>
</td>
<td class="cellalignment1228" headers="r22c1-t42 r1c2-t42">
<p>A positive integer or <code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r22c1-t42 r1c3-t42">
<p><code>INFINITE</code></p>
</td>
<td class="cellalignment1228" headers="r22c1-t42 r1c4-t42">
<p>The capture process stops as soon as possible after the specified number of seconds since it started.</p>
<p>If <code>INFINITE</code>, then the capture process continues to run until it is stopped explicitly.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r23c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1380"></a>trace_level</code></p>
</td>
<td class="cellalignment1228" headers="r23c1-t42 r1c2-t42">
<p><code>0</code> or a positive integer</p>
</td>
<td class="cellalignment1228" headers="r23c1-t42 r1c3-t42">
<p><code>0</code></p>
</td>
<td class="cellalignment1228" headers="r23c1-t42 r1c4-t42">
<p>Set this parameter only under the guidance of Oracle Support Services.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r24c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1381"></a>write_alert_log</code></p>
</td>
<td class="cellalignment1228" headers="r24c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r24c1-t42 r1c3-t42">
<p><code>Y</code></p>
</td>
<td class="cellalignment1228" headers="r24c1-t42 r1c4-t42">
<p>If <code>Y</code>, then the capture process writes a message to the alert log on exit.</p>
<p>If <code>N</code>, then the capture process does not write a message to the alert log on exit.</p>
<p>The message specifies the reason the capture process stopped.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r25c1-t42" headers="r1c1-t42">
<p><code><a id="sthref1382"></a>xout_client_exists</code></p>
</td>
<td class="cellalignment1228" headers="r25c1-t42 r1c2-t42">
<p><code>Y</code> or <code>N</code></p>
</td>
<td class="cellalignment1228" headers="r25c1-t42 r1c3-t42">
<p><code>Y</code> if the capture process sends LCRs to XStream outbound servers</p>
<p><code>N</code> if the capture process sends LCRs to Oracle Streams apply processes</p>
</td>
<td class="cellalignment1228" headers="r25c1-t42 r1c4-t42">
<p><code>Y</code> indicates that the capture process sends LCRs to one or more XStream outbound servers.</p>
<p><code>N</code> indicates that the capture process sends LCRs to one or more Oracle Streams apply processes.</p>
<p>A single capture process cannot send LCRs to both outbound servers and apply processes.</p>
<p>In an XStream configuration where an outbound server runs on a different database than its capture process, set this parameter to <code>Y</code> to enable the capture process to send LCRs to the outbound server.</p>
<p><span class="bold">Note:</span> Using XStream requires purchasing a license for the Oracle GoldenGate product. See <a class="olink XSTRM72545" href="../../server.112/e16545/xstrm_intro.htm#XSTRM72545"><span class="italic">Oracle Database XStream Guide</span></a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwidemax" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDEABJB"></a>Usage Notes</p>
<p>The following usage notes apply to the <code>SET_PARAMETER</code> procedure:</p>
<ul>
<li>
<p><a href="#CHDFAGBH">Delays Are Possible Before New Parameter Settings Take Effect</a></p>
</li>
<li>
<p><a href="#CHDJEBCB">Parameters Interpreted as Positive Integers</a></p>
</li>
<li>
<p><a href="#CHDBBGJH">Parameters with a System Change Number (SCN) Setting</a></p>
</li>
<li>
<p><a href="#CHDCAHCF">Parameters that Require XStream Capabilities</a></p>
</li>
</ul>
<p class="subhead2"><a id="CHDFAGBH"></a><a id="ARPLS73343"></a>Delays Are Possible Before New Parameter Settings Take Effect</p>
<p>When you alter a parameter value, a short amount of time might pass before the new value for the parameter takes effect.</p>
<p class="subhead2"><a id="CHDJEBCB"></a><a id="ARPLS73127"></a>Parameters Interpreted as Positive Integers</p>
<p>For all parameters that are interpreted as positive integers, the maximum possible value is <code>4,294,967,295</code>. Where applicable, specify <code>INFINITE</code> for larger values.</p>
<p class="subhead2"><a id="CHDBBGJH"></a><a id="ARPLS73128"></a>Parameters with a System Change Number (SCN) Setting</p>
<p>For parameters that require an SCN setting, any valid SCN value can be specified.</p>
<p class="subhead2"><a id="CHDCAHCF"></a><a id="ARPLS73129"></a>Parameters that Require XStream Capabilities</p>
<p>A capture process uses the following parameters only when the capture process is sending logical change records (LCRs) to an XStream outbound server or when XStream capabilities are enabled for Oracle Streams components:</p>
<ul>
<li>
<p><code>capture_idkey_lcrs</code></p>
</li>
<li>
<p><code>capture_sequence_nextval</code></p>
</li>
<li>
<p><code>excludeuserid</code></p>
</li>
<li>
<p><code>excludeuser</code></p>
</li>
<li>
<p><code>excludetrans</code></p>
</li>
<li>
<p><code>getapplops</code></p>
</li>
<li>
<p><code>getreplicates</code></p>
</li>
<li>
<p><code>max_sga_size</code></p>
</li>
</ul>
<p>The <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure enables XStream capabilities for Oracle Streams. When XStream capabilities are not enabled by the <code>DBMS_XSTREAM_ADM.ENABLE_GG_XSTREAM_FOR_STREAMS</code> procedure, a capture process raises an error if one of these parameters is set to any value other than its default value.</p>
<p>When XStream capabilities are enabled for Oracle Streams and the <code>capture_idkey_lcrs</code> parameter is set to <code>Y</code>, a capture process can capture ID key LCRs. ID key LCRs do not contain all of the columns for a row change. Instead, they contain the rowid of the changed row, a group of key columns to identify the row in the table, and the data for the scalar columns of the table that are supported by capture processes. An apply process can apply these changes using the information available the ID key LCRs.</p>
<p>To determine the database objects for which a capture process will capture ID key LCRs, run the following query on the source database:</p>
<pre>
SELECT OWNER, OBJECT_NAME
  FROM DBA_XSTREAM_OUT_SUPPORT_MODE
  WHERE SUPPORT_MODE='ID KEY';
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Using XStream requires purchasing a license for the Oracle GoldenGate product. See <a class="olink XSTRM72545" href="../../server.112/e16545/xstrm_intro.htm#XSTRM72545"><span class="italic">Oracle Database XStream Guide</span></a>.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS547" class="refsect2"><a id="BGBHAJGJ"></a>
<hr />
<h3 class="refsect2">START_CAPTURE Procedure<a id="sthref1383"></a><a id="sthref1384"></a></h3>
<p>This procedure starts the capture process, which mines redo logs and enqueues the mined redo information into the associated queue.</p>
<p>The start status is persistently recorded. Hence, if the status is <code>ENABLED</code>, then the capture process is started upon database instance startup.</p>
<p>The capture process is a background Oracle process and is prefixed by <code>c</code>.</p>
<p>The enqueue and dequeue state of <code>DBMS_AQADM.START_QUEUE</code> and <code>DBMS_AQADM.STOP_QUEUE</code> have no effect on the start status of a capture process.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="d_streams_adm.htm#CDEFIIEG">Chapter 145, "DBMS_STREAMS_ADM"</a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1385"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.START_CAPTURE(
   capture_name  IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1386"></a>Parameters</p>
<div id="ARPLS65490" class="tblformal">
<p class="titleintable"><a id="sthref1387"></a><a id="sthref1388"></a>Table 32-18 START_CAPTURE Procedure Parameter</p>
<table class="cellalignment1229" title="START_CAPTURE Procedure Parameter" summary="This table describes the parameters of DBMS_CAPTURE_ADM.START_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t45">Parameter</th>
<th class="cellalignment1227" id="r1c2-t45">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t45" headers="r1c1-t45">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t45 r1c2-t45">
<p>The name of the capture process. Do not specify an owner.</p>
<p>The capture process uses LogMiner to capture changes in the redo information. A <code>NULL</code> setting is not allowed.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDBACAF"></a>Usage Notes</p>
<p>The capture process status is persistently recorded. Hence, if the status is <code>ENABLED</code>, then the capture process is started upon database instance startup. A capture process (<code>c</code><code><span class="codeinlineitalic">nnn</span></code>) is an Oracle background process.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS548" class="refsect2"><a id="i997449"></a>
<hr />
<h3 class="refsect2">STOP_CAPTURE Procedure<a id="sthref1389"></a><a id="sthref1390"></a></h3>
<p>This procedure stops the capture process from mining redo logs.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1391"></a>Syntax</p>
<pre>
DBMS_CAPTURE_ADM.STOP_CAPTURE(
   capture_name  IN  VARCHAR2,
   force         IN  BOOLEAN  DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1392"></a>Parameters</p>
<div id="ARPLS65491" class="tblformal">
<p class="titleintable"><a id="sthref1393"></a><a id="sthref1394"></a>Table 32-19 STOP_CAPTURE Procedure Parameters</p>
<table class="cellalignment1229" title="STOP_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_CAPTURE_ADM.STOP_CAPTURE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t46">Parameter</th>
<th class="cellalignment1227" id="r1c2-t46">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t46" headers="r1c1-t46">
<p><code>capture_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t46 r1c2-t46">
<p>The name of the capture process. A <code>NULL</code> setting is not allowed. Do not specify an owner.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t46" headers="r1c1-t46">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t46 r1c2-t46">
<p>If <code>TRUE</code>, then the procedure stops the capture process as soon as possible. If the capture process cannot stop normally, then it aborts.</p>
<p>If <code>FALSE</code>, then the procedure stops the capture process as soon as possible. If the capture process cannot stop normally, then an ORA-26672 error is returned, and the capture process might continue to run.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1395"></a>Usage Notes</p>
<p>The following usage notes apply to this procedure:</p>
<ul>
<li>
<p>The capture process status is persistently recorded. Hence, if the status is <code>DISABLED</code> or <code>ABORTED</code>, then the capture process is not started upon database instance startup.</p>
</li>
<li>
<p>A capture process is an Oracle background process with a name in the form <code>CP</code><code><span class="codeinlineitalic">nn</span></code>, where <code><span class="codeinlineitalic">nn</span></code> can include letters and numbers.</p>
</li>
<li>
<p>The enqueue and dequeue state of <code>DBMS_AQADM.START_QUEUE</code> and <code>DBMS_AQADM.STOP_QUEUE</code> have no effect on the stop status of a capture process.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_aw_stats.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_cdcpub.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
