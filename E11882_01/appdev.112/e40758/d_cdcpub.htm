<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_CDC_PUBLISH</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:2Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_cap_a.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_cdcsub.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">37/265</span> <!-- End Header -->
<div id="ARPLS023" class="chapter"><a id="i80091"></a>
<h1 class="chapter"><span class="secnum">33</span> DBMS_CDC_PUBLISH</h1>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Change Data Capture will be de-supported in a future release of Oracle Database and will be replaced with Oracle GoldenGate. Therefore, Oracle strongly recommends that you use Oracle GoldenGate for new applications.
<p>For Oracle Database 11<span class="italic">g</span> Release 2 (11.2), Change Data Capture continues to function as in earlier releases. If you are currently using Change Data Capture, then you will be able to continue to do so for the foreseeable future. However, Change Data Capture will not be further enhanced, and will only be supported based on the current, documented functionality.</p>
</div>
<p>The <code><a id="sthref1396"></a>DBMS_CDC_PUBLISH</code> package, one of a set of Change Data Capture packages, is used by a publisher to set up an Oracle <a id="sthref1397"></a>Change Data Capture system to capture and publish change data from one or more Oracle relational source tables.</p>
<p>Change Data Capture captures and publishes only committed data. Oracle Change Data Capture identifies new data that has been added to, updated in, or removed from relational tables, and publishes the change data in a form that is usable by subscribers.</p>
<p>Typically, a Change Data Capture system has one <span class="bold">publisher</span> who captures and publishes changes for any number of Oracle relational source tables. The publisher then provides subscribers (applications or individuals) with access to the published data. Subscribers access the published data using the <code>DBMS_CDC_SUBSCRIBE</code> package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information regarding Oracle Change Data Capture</div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHECIECI">Using DBMS_CDC_PUBLISH</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Deprecated Subprograms</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Views</p>
</li>
</ul>
</li>
<li>
<p><a href="#i77054">Summary of DBMS_CDC_PUBLISH Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CHECIECI"></a>
<hr />
<div id="ARPLS65492" class="refsect1">
<h2 class="refsect1">Using DBMS_CDC_PUBLISH</h2>
<p>This section contains the following topics, which relate to using the <code>DBMS_CDC_PUBLISH</code> package:</p>
<ul>
<li>
<p><a href="#i77042">Overview</a></p>
</li>
<li>
<p><a href="#i84644">Deprecated Subprograms</a></p>
</li>
<li>
<p><a href="#i95409">Security Model</a></p>
</li>
<li>
<p><a href="#CHEECGHF">Views</a></p>
</li>
</ul>
<div id="ARPLS65493" class="refsect2"><a id="i77042"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>Through the <code>DBMS_CDC_PUBLISH</code> package, the publisher creates and maintains change sources, change sets, and change tables, and eventually drops them when they are no longer useful.</p>
<p>The publisher, typically a database administrator, is concerned primarily with the source of the data and with creating the schema objects that describe the structure of the capture system: change sources, change sets, and change tables.</p>
<p>Most Change Data Capture systems have one publisher and many subscribers. The publisher accomplishes the following main objectives:</p>
<ol>
<li>
<p>Determines which source table changes need to be published.</p>
</li>
<li>
<p>Decides whether to capture changes asynchronously or synchronously.</p>
</li>
<li>
<p>Uses the subprograms in the <code>DBMS_CDC_PUBLISH</code> package to capture change data from the source tables and make it available by creating and administering the change source, change set, and change table objects.</p>
</li>
<li>
<p>Allows controlled access to subscribers by using the SQL <code>GRANT</code> and <code>REVOKE</code> statements to grant and revoke the <code>SELECT</code> privilege on change tables for users and roles. (This is necessary to allow the subscribers to subscribe to the change data using the <code>DBMS_CDC_SUBSCRIBE</code> package.)</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="d_cdcsub.htm#CHEFHFJA">Chapter 34, "DBMS_CDC_SUBSCRIBE"</a> for information on the package used to subscribe to published change data</div>
</li>
</ol>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65494" class="refsect2"><a id="i84644"></a>
<hr />
<h3 class="refsect2">Deprecated Subprograms</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you do not use deprecated procedures in new applications. Support for deprecated features is for backward compatibility only.</div>
<p>The following subprograms are deprecated with Oracle Database 11<span class="italic">g</span>:</p>
<ul>
<li>
<p><code>DBMS_CDC_PUBLISH.DROP_SUBSCRIPTION</code> with a subscription handle</p>
<p>When dropping a subscription, the publisher should now specify the name of the subscription to be dropped, not the subscription handle.</p>
</li>
<li>
<p><code>DBMS_CDC_PUBLISH.DROP_SUBSCRIBER_VIEW</code></p>
<p>Dropping a subscriber view is now performed automatically by Change Data Capture.</p>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65495" class="refsect2"><a id="i95409"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p>You must have the <code>EXECUTE_CATALOG_ROLE</code> role to use the <code>DBMS_CDC_PUBLISH</code> package. Additional privileges and roles are required depending on the publishing mode and whether the publisher is on the source or staging database. See the section on Granting Privileges and Roles to the Publisher in <a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for details.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS65496" class="refsect2"><a id="CHEECGHF"></a>
<hr />
<h3 class="refsect2">Views</h3>
<p>The <code>DBMS_CDC_PUBLISH</code> package uses the views listed in the section on Getting Information About the Change Data Capture Environment in <a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide.</span></a></p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i77054"></a>
<hr />
<div id="ARPLS460" class="refsect1">
<h2 class="refsect1">Summary of DBMS_CDC_PUBLISH Subprograms</h2>
<p><a href="#CHEHGHCJ">Table 33-1</a> describes the subprograms in the <code>DBMS_CDC_PUBLISH</code> supplied package and the mode or modes with which each can be used. A value of All in the Mode column indicates that the subprogram can be used with synchronous and all modes of asynchronous Change Data Capture, a value of Asynchronous in the Mode column indicates that the subprogram can be used with all modes of asynchronous Change Data Capture (HotLog, Distributed HotLog, and AutoLog).</p>
<div id="ARPLS65497" class="tblformalwide">
<p class="titleintable"><a id="sthref1398"></a><a id="CHEHGHCJ"></a>Table 33-1 DBMS_CDC_PUBLISH Package Subprograms</p>
<table class="cellalignment1226" title="DBMS_CDC_PUBLISH Package Subprograms " summary="This table lists the DBMS_CDC_PUBLISH subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t6">Mode</th>
<th class="cellalignment1227" id="r1c3-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><a href="#i87599">ALTER_AUTOLOG_CHANGE_SOURCE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p>Asynchronous AutoLog</p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c3-t6">
<p>Changes one or more properties of an existing AutoLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><a href="#i86234">ALTER_CHANGE_SET Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c3-t6">
<p>Changes one or more of the properties of an existing change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><a href="#i89817">ALTER_CHANGE_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c3-t6">
<p>Adds or drops columns for an existing change table, or changes the properties of an existing change table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t6" headers="r1c1-t6">
<p><a href="#BABDJEGD">ALTER_HOTLOG_CHANGE_SOURCE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t6 r1c2-t6">
<p>Asynchronous Distributed HotLog</p>
</td>
<td class="cellalignment1228" headers="r5c1-t6 r1c3-t6">
<p>Changes one or more properties of an existing Distributed HotLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t6" headers="r1c1-t6">
<p><a href="#i77409">CREATE_AUTOLOG_CHANGE_SOURCE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t6 r1c2-t6">
<p>Asynchronous AutoLog</p>
</td>
<td class="cellalignment1228" headers="r6c1-t6 r1c3-t6">
<p>Creates an AutoLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t6" headers="r1c1-t6">
<p><a href="#i86667">CREATE_CHANGE_SET Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r7c1-t6 r1c3-t6">
<p>Creates a change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t6" headers="r1c1-t6">
<p><a href="#i89168">CREATE_CHANGE_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r8c1-t6 r1c3-t6">
<p>Creates a change table in a specified schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t6" headers="r1c1-t6">
<p><a href="#BABCCCBA">CREATE_HOTLOG_CHANGE_SOURCE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t6 r1c2-t6">
<p>Asynchronous Distributed HotLog</p>
</td>
<td class="cellalignment1228" headers="r9c1-t6 r1c3-t6">
<p>Creates a Distributed HotLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t6" headers="r1c1-t6">
<p><a href="#i87624">DROP_CHANGE_SET Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r10c1-t6 r1c3-t6">
<p>Drops an existing change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t6" headers="r1c1-t6">
<p><a href="#i77652">DROP_CHANGE_SOURCE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t6 r1c2-t6">
<p>Asynchronous Autolog and Asynchronous Distributed Hotlog</p>
</td>
<td class="cellalignment1228" headers="r11c1-t6 r1c3-t6">
<p>Drops an existing AutoLog or Distributed HotLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t6" headers="r1c1-t6">
<p><a href="#i78669">DROP_CHANGE_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r12c1-t6 r1c3-t6">
<p>Drops an existing change table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t6" headers="r1c1-t6">
<p><a href="#i87540">DROP_SUBSCRIPTION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r13c1-t6 r1c3-t6">
<p>Allows a publisher to drop a subscription that was created by a subscriber</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t6" headers="r1c1-t6">
<p><a href="#CHEEBAFD">GET_DDLOPER Function</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r14c1-t6 r1c3-t6">
<p>Converts a binary integer into a user friendly string that describes the DDL operation that actually took place</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t6" headers="r1c1-t6">
<p><a href="#i78737">PURGE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r15c1-t6 r1c3-t6">
<p>Removes unneeded rows from all change tables in the staging database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t6" headers="r1c1-t6">
<p><a href="#i78753">PURGE_CHANGE_SET Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r16c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r16c1-t6 r1c3-t6">
<p>Removes unneeded rows from all change tables in a specified change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t6" headers="r1c1-t6">
<p><a href="#i85360">PURGE_CHANGE_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r17c1-t6 r1c2-t6">
<p>All</p>
</td>
<td class="cellalignment1228" headers="r17c1-t6 r1c3-t6">
<p>Removes unneeded rows from a specified change table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div id="ARPLS65498" class="refsect2"><a id="i87599"></a>
<hr />
<h3 class="refsect2">ALTER_AUTOLOG_CHANGE_SOURCE <a id="sthref1399"></a>Procedure</h3>
<p>This procedure changes the properties of an existing AutoLog change source.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1400"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.ALTER_AUTOLOG_CHANGE_SOURCE(
     change_source_name  IN VARCHAR2,
     description         IN VARCHAR2 DEFAULT NULL,
     remove_description  IN CHAR DEFAULT 'N',
     first_scn           IN NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1401"></a>Parameters</p>
<div id="ARPLS65499" class="tblformal">
<p class="titleintable"><a id="sthref1402"></a><a id="sthref1403"></a>Table 33-2 ALTER_AUTOLOG_CHANGE_SOURCE Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_AUTOLOG_CHANGE_SOURCE Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.ALTER_AUTOLOG_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Parameter</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>change_source_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Name of an existing AutoLog change source. Change source names follow Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>New description of the change source. The description must be specified using 255 or fewer characters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><code>remove_description</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>A value of <code>'Y'</code> or <code>'N'.</code></p>
<p>If the value is <code>'Y',</code> then the current description is changed to <code>NULL</code>. If the value is <code>'N'</code>, then the current description is unchanged.</p>
<p>Do not specify the description parameter with this parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><code>first_scn</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>New first SCN.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1404"></a>Exceptions</p>
<div id="ARPLS65500" class="tblformal">
<p class="titleintable"><a id="sthref1405"></a><a id="sthref1406"></a>Table 33-3 ALTER_AUTOLOG_CHANGE_SOURCE Procedure Exceptions</p>
<table class="cellalignment1229" title="ALTER_AUTOLOG_CHANGE_SOURCE Procedure Exceptions " summary="This table describes the exceptions raised by the DBMS_CDC_PUBLISH.ALTER_AUTOLOG_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Exception</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>ORA-31401</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>Specified change source is not an existing change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t8" headers="r1c1-t8">
<p><code>ORA-31445</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c2-t8">
<p>Invalid lock handle while acquiring lock on string</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t8" headers="r1c1-t8">
<p><code>ORA-31452</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t8 r1c2-t8">
<p>Invalid value for parameter, expecting: <code>Y</code> or <code>N</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t8" headers="r1c1-t8">
<p><code>ORA-31497</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t8 r1c2-t8">
<p>Invalid value specified for <code>first_scn</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t8" headers="r1c1-t8">
<p><code>ORA-31498</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t8 r1c2-t8">
<p>The <code>description</code> and <code>remove_description</code> parameters cannot both be specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t8" headers="r1c1-t8">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t8 r1c2-t8">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t8" headers="r1c1-t8">
<p><code>ORA-31501</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t8 r1c2-t8">
<p>Specified change source is not an AutoLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t8" headers="r1c1-t8">
<p><code>ORA-31504</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t8 r1c2-t8">
<p>Cannot alter or drop predefined change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t8" headers="r1c1-t8">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t8 r1c2-t8">
<p>Specified parameter value longer than maximum length</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1407"></a>Usage Notes</p>
<ul>
<li>
<p>Properties supplied to this procedure with a <code>NULL</code> value are unchanged.</p>
</li>
<li>
<p>This procedure can be used to change more than one property at a time.</p>
</li>
<li>
<p>This procedure can be used in making SCN adjustments after determining which redo logs are no longer needed for an asynchronous AutoLog change set.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The section on asynchronous Change Data Capture and redo log files in <a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information on how the publisher can use the <code>ALTER_AUTOLOG_CHANGE_SOURCE</code> procedure in making SCN adjustments after determining which redo logs are no longer needed for an asynchronous AutoLog change set.</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65501" class="refsect2"><a id="i86234"></a>
<hr />
<h3 class="refsect2">ALTER_CHANGE_SET <a id="sthref1408"></a>Procedure</h3>
<p>This procedure changes the properties of an existing change set that was created with the <code>CREATE_CHANGE_SET</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1409"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.ALTER_CHANGE_SET(
     change_set_name         IN VARCHAR2,
     description             IN VARCHAR2 DEFAULT NULL,
     remove_description      IN CHAR DEFAULT 'N',
     enable_capture          IN CHAR DEFAULT NULL,
     recover_after_error     IN CHAR DEFAULT NULL,
     remove_ddl              IN CHAR DEFAULT NULL,
     stop_on_ddl             IN CHAR DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1410"></a>Parameters</p>
<div id="ARPLS65502" class="tblformal">
<p class="titleintable"><a id="sthref1411"></a><a id="sthref1412"></a>Table 33-4 ALTER_CHANGE_SET Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_CHANGE_SET Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.ALTER_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Parameter</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>change_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p>Name of an existing change set. Change set names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p>New description of the change set. Specify using 255 or fewer characters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t10" headers="r1c1-t10">
<p><code>remove_description</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c2-t10">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y'</code>, then the current description is changed to <code>NULL</code>. If the value is <code>'N'</code>, then the current description is unchanged.</p>
<p>Do not specify the <code>description</code> parameter with this parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t10" headers="r1c1-t10">
<p><code>enable_capture</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c2-t10">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y'</code>, then change data capture is enabled for this change set.</p>
<p>If the value is <code>'N'</code>, then change data capture is disabled for this change set.</p>
<p>Synchronous change sets are created with change data capture enabled.</p>
<p>Asynchronous change sets are created with change data capture disabled.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t10" headers="r1c1-t10">
<p><code>recover_after_error</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c2-t10">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y'</code>, then Change Data Capture will attempt to recover from earlier capture errors.</p>
<p>If the value is <code>'N'</code>, then Change Data Capture will not attempt to recover from earlier capture errors.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t10" headers="r1c1-t10">
<p><code>remove_ddl</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c2-t10">
<p>A value of <code>'Y'</code> or <code>'N'.</code></p>
<p>If the value is <code>'Y'</code> and the value of the <code>recover_after_error</code> parameter is <code>'Y'</code>, then any DDL records that may have caused capture errors will be filtered out during recovery.</p>
<p>If the value is <code>'N'</code>, then DDL records that may have caused capture errors will not be filtered out during recovery.</p>
<p>This parameter has meaning only when the <code>recover_after_error</code> parameter is specified with a value of <code>'Y'</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t10" headers="r1c1-t10">
<p><code>stop_on_ddl</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c2-t10">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y',</code> then Change Data Capture stops when a DDL event is detected.</p>
<p>If the value is <code>'N',</code> then Change Data Capture continues when a DDL event is detected.</p>
<p>See the Usage Notes for additional information about this parameter.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1413"></a>Exceptions</p>
<div id="ARPLS65503" class="tblformal">
<p class="titleintable"><a id="sthref1414"></a><a id="sthref1415"></a>Table 33-5 ALTER_CHANGE_SET Procedure Exceptions</p>
<table class="cellalignment1229" title="ALTER_CHANGE_SET Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.ALTER_AUTOLOG_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Exception</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><code>ORA-31410</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>Specified change set is not an existing change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t11" headers="r1c1-t11">
<p><code>ORA-31452</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c2-t11">
<p>Invalid value for parameter, expecting: <code>Y</code> or <code>N</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t11" headers="r1c1-t11">
<p><code>ORA-31445</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t11 r1c2-t11">
<p>Invalid lock handle while acquiring lock on string</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t11" headers="r1c1-t11">
<p><code>ORA-31468</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t11 r1c2-t11">
<p>Cannot process DDL change record</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t11" headers="r1c1-t11">
<p><code>ORA-31469</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t11 r1c2-t11">
<p>Cannot enable Change Data Capture for change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t11" headers="r1c1-t11">
<p><code>ORA-31485</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t11 r1c2-t11">
<p>Invalid database link</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t11" headers="r1c1-t11">
<p><code>ORA-31498</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t11 r1c2-t11">
<p>The <code>description</code> and <code>remove_description</code> parameters cannot both be specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t11" headers="r1c1-t11">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t11 r1c2-t11">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t11" headers="r1c1-t11">
<p><code>ORA-31505</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t11 r1c2-t11">
<p>Cannot alter or drop predefined change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t11" headers="r1c1-t11">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t11 r1c2-t11">
<p>Specified parameter value longer than maximum length</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t11" headers="r1c1-t11">
<p><code>ORA-31508</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t11 r1c2-t11">
<p>Invalid parameter value for synchronous change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t11" headers="r1c1-t11">
<p><code>ORA-31514</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t11 r1c2-t11">
<p>Change set disabled due to capture error</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1416"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture. However, the predefined synchronous change set, <code>SYNC_SET</code>, cannot be altered, and the following parameters cannot be altered for publisher-defined synchronous change sets: <code>enable_capture</code>, <code>recover_after_error</code>, <code>remove_ddl</code>, and <code>stop_on_ddl</code>.</p>
</li>
<li>
<p>Properties supplied to this procedure with a <code>NULL</code> value are unchanged.</p>
</li>
<li>
<p>This procedure can alter more than one parameter at a time.</p>
</li>
<li>
<p>Enabling or disabling an asynchronous HotLog or AutoLog change set starts or stops the Oracle Streams capture process and apply process underlying the change set. Enabling or disabling an asynchronous Distributed HotLog change set starts or stops the Oracle Streams apply process underlying the change set.</p>
</li>
<li>
<p>The effect of the <code>stop_on_ddl</code> parameter is as follows:</p>
<ul>
<li>
<p>When the <code>stop_on_ddl</code> parameter is set to <code>'Y'</code>, asynchronous Change Data Capture stops if DDL is encountered during change data capture. Some DDL statements can adversely affect capture, such as a statement that drops a source table column that is being captured. The publisher has an opportunity to analyze and adjust to DDL changes that may adversely affect change tables while capture is stopped, thereby preventing possible errors during capture.</p>
<p>Because these statements do not affect the column data itself, Change Data Capture does not stop capturing change data when the <code>stop_on_ddl</code> parameter is set to <code>'Y'</code> and any of the following statements is encountered:</p>
<ul>
<li>
<p><code>ANALYZE TABLE</code></p>
</li>
<li>
<p><code>LOCK TABLE</code></p>
</li>
<li>
<p><code>GRANT</code> privileges to access a table</p>
</li>
<li>
<p><code>REVOKE</code> privileges to access a table</p>
</li>
<li>
<p><code>COMMENT</code> on a table</p>
</li>
<li>
<p><code>COMMENT</code> on a column</p>
</li>
</ul>
<p>These statements can be issued on the source database without concern for their impact on Change Data Capture processing.</p>
</li>
<li>
<p>When the <code>stop_on_ddl</code> parameter is set to <code>'N'</code>, Change Data Capture does not stop if DDL is encountered during change data capture. If a change set does not stop on DDL, but a DDL change occurs that affects change tables, that change can result in a capture error. There are also system conditions that can cause capture errors, such as being out of disk space.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG" href="../../server.112/e25554/toc.htm"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information on the effects of, and how to recover from, a capture error</div>
</li>
</ul>
<p>Whenever a DDL statement causes processing to stop, a message is written to the alert log indicating for which change set processing has been stopped and the DDL statement that caused it to be stopped. Similarly, whenever DDL statements are ignored by Change Data Capture and processing continues, a message is written to the alert log indicating which DDL statement was ignored.</p>
</li>
<li>
<p>The publisher can attempt to recover an asynchronous change set after a capture error by specifying <code>'Y'</code> for the <code>recover_after_error</code> parameter. Capture errors can occur when any of the following is true:</p>
<ul>
<li>
<p>The <code>stop_on_ddl</code> parameter is set to <code>'Y'</code> and there is a DDL record in the change data. In this case, to recover from the error, the publisher must also specify <code>'Y'</code> for the <code>remove_ddl</code> parameter.</p>
</li>
<li>
<p>The <code>stop_on_ddl</code> parameter is set to <code>'N'</code> and there is a DDL record that affects capture. For example, if the publisher drops and re-creates a change table, it causes an error the next time that Change Data Capture attempts to add change data to the named change table.</p>
</li>
<li>
<p>A miscellaneous error occurs, such as running out of disk space, or a redo log file error (such as ORA-01688: unable to extend table <span class="italic">string</span>.<span class="italic">string</span> partition <span class="italic">string</span> by <span class="italic">string</span> in tablespace <span class="italic">string</span>).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on how to recover from a capture error.</div>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65504" class="refsect2"><a id="i89817"></a>
<hr />
<h3 class="refsect2">ALTER_CHANGE_TAB<a id="sthref1417"></a>LE Procedure</h3>
<p>This procedure adds columns to, or drops columns from, or changes the properties of, a change table that was created with the <code>CREATE_CHANGE_TABLE</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1418"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.ALTER_CHANGE_TABLE(
     owner                  IN VARCHAR2,
     change_table_name      IN VARCHAR2,
     operation              IN VARCHAR2,
     column_list            IN VARCHAR2,
     rs_id                  IN CHAR,
     row_id                 IN CHAR,
     user_id                IN CHAR,
     timestamp              IN CHAR,
     object_id              IN CHAR,
     source_colmap          IN CHAR,
     target_colmap          IN CHAR,
     ddl_markers            IN CHAR  DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1419"></a>Parameters</p>
<div id="ARPLS65505" class="tblformal">
<p class="titleintable"><a id="sthref1420"></a><a id="sthref1421"></a>Table 33-6 ALTER_CHANGE_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_CHANGE_TABLE Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.ALTER_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>owner</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>The schema that owns the change table.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t14" headers="r1c1-t14">
<p><code>change_table_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t14 r1c2-t14">
<p>The change table that is being altered. Change table names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t14" headers="r1c1-t14">
<p><code>operation</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t14 r1c2-t14">
<p>Either the value <code>ADD</code> or <code>DROP</code> to indicate whether to add or drop the user columns specified with the <code>column_list</code> parameter and any control columns specified by other parameters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t14" headers="r1c1-t14">
<p><code>column_list</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t14 r1c2-t14">
<p>User column names and datatypes for each column of the source table that should be added to, or dropped from, the change table. The list is comma-delimited.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t14" headers="r1c1-t14">
<p><code>rs_id</code></p>
<p><code>row_id</code></p>
<p><code>user_id</code></p>
<p><code>timestamp</code></p>
<p><code>object_id</code></p>
<p><code>source_colmap</code></p>
<p><code>target_colmap</code></p>
<p><code>ddl_markers</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t14 r1c2-t14">
<p>Each listed parameter specifies a particular control column, as follows:</p>
<ul>
<li>
<p>The <code>rs_id</code> parameter specifies the <code>RSID$</code> control column.</p>
</li>
<li>
<p>The <code>row_id</code> parameter specifies the <code>ROW_ID$</code> control column.</p>
</li>
<li>
<p>The <code>user_id</code> parameter specifies the <code>USERNAME$</code> control column.</p>
</li>
<li>
<p>The <code>timestamp</code> parameter specifies the <code>TIMESTAMP$</code> control column.</p>
</li>
<li>
<p>The <code>object_id</code> parameter specifies the <code>SYS_NC_OID$</code> control column.</p>
</li>
<li>
<p>The <code>source_colmap</code> parameter specifies the <code>SOURCE_COLMAP$</code> control column.</p>
</li>
<li>
<p>The <code>target_colmap</code> parameter specifies the <code>TARGET_COLMAP$</code> control column.</p>
</li>
<li>
<p>The <code>ddl_markers</code> parameter tracks all DDL operations on the source table and stores information about those operations in the change table. These are the three additional control columns you get when <code>ddl_markers</code> is enabled. There are three values: <code>DDLOPER$</code> is a bit vector that indicates what kind of DDL operation happened. (Use the procedure <code>DBMS_CDC_PUBLISH.GET_DDLOPER(ddloper$)</code> to get the name of the DDL operation.) <code>DDLDESC$</code> is a CLOB containing the actual DDL statement executed. <code>DDLPDOBJN$</code> is not used in this release.</p>
</li>
</ul>
<p>Each parameter must have a value of either <code>'Y'</code> or <code>'N'</code>, where:</p>
<ul>
<li>
<p><code>'Y'</code>: Adds the specified control column to, or drops it from the change table, as indicated by the <code>operation</code> parameter.</p>
</li>
<li>
<p><code>'N'</code>: Neither adds the specified control column, nor drops it from the change table.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for a complete description of control columns.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1422"></a>Exceptions</p>
<div id="ARPLS65506" class="tblformal">
<p class="titleintable"><a id="sthref1423"></a><a id="sthref1424"></a>Table 33-7 ALTER_CHANGE_TABLE Procedure Exceptions</p>
<table class="cellalignment1229" title="ALTER_CHANGE_TABLE Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.ALTER_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Exception</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>ORA-31403</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>Specified change table already contains the specified column</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t16" headers="r1c1-t16">
<p><code>ORA-31409</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t16 r1c2-t16">
<p>One or more values for input parameters are incorrect</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t16" headers="r1c1-t16">
<p><code>ORA-31415</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t16 r1c2-t16">
<p>Specified change set does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t16" headers="r1c1-t16">
<p><code>ORA-31416</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t16 r1c2-t16">
<p>Invalid <code>SOURCE_COLMAP</code> value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t16" headers="r1c1-t16">
<p><code>ORA-31417</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t16 r1c2-t16">
<p>Column list contains control column <span class="italic">control-column-name</span></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t16" headers="r1c1-t16">
<p><code>ORA-31421</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t16 r1c2-t16">
<p>Change table does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t16" headers="r1c1-t16">
<p><code>ORA-31422</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t16 r1c2-t16">
<p>Specified owner schema does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t16" headers="r1c1-t16">
<p><code>ORA-31423</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t16 r1c2-t16">
<p>Specified change table does not contain the specified column</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t16" headers="r1c1-t16">
<p><code>ORA-31454</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t16 r1c2-t16">
<p>Invalid value specified for operation parameter, expecting <code>ADD</code> or <code>DROP</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t16" headers="r1c1-t16">
<p><code>ORA-31455</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t16 r1c2-t16">
<p>Nothing to alter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t16" headers="r1c1-t16">
<p><code>ORA-31456</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t16 r1c2-t16">
<p>Error executing a procedure in the <code>DBMS_CDC_UTILITY</code> package</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t16" headers="r1c1-t16">
<p><code>ORA-31459</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t16 r1c2-t16">
<p>System triggers for <code>DBMS_CDC_PUBLISH</code> package are not installed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t16" headers="r1c1-t16">
<p><code>ORA-31471</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t16 r1c2-t16">
<p>Invalid <code>OBJECT_ID</code> value</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1425"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>The publisher cannot add and drop user columns in the same call to the <code>ALTER_CHANGE_TABLE</code> procedure; these schema changes require separate calls.</p>
</li>
<li>
<p>The publisher must not specify the name of the control columns in the <code>column_ list</code> parameter.</p>
</li>
<li>
<p>When altering an asynchronous change table, the publisher must accept the default value or specify '<code>N</code>' for the <code>source_colmap</code> and <code>object_id</code> parameters. In addition, for the asynchronous Distributed HotLog mode, the publisher also must accept the default value or specify '<code>N</code>' for the <code>row_id</code> and <code>username</code> parameters when the change source is 9.2 or 10.1.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information about the impact on subscriptions when a publisher adds a column to a change table.</div>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65507" class="refsect2"><a id="BABDJEGD"></a>
<hr />
<h3 class="refsect2">ALTER_HOTLOG_CHANGE_SOURCE <a id="sthref1426"></a>Procedure</h3>
<p>This procedure changes the properties of an existing Distributed HotLog change source.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1427"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.ALTER_HOTLOG_CHANGE_SOURCE(
     change_source_name  IN VARCHAR2,
     description         IN VARCHAR2 DEFAULT NULL,
     remove_description  IN CHAR DEFAULT 'N',
     enable_source       IN CHAR DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1428"></a>Parameters</p>
<div id="ARPLS65508" class="tblformal">
<p class="titleintable"><a id="sthref1429"></a><a id="sthref1430"></a>Table 33-8 ALTER_HOTLOG_CHANGE_SOURCE Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_HOTLOG_CHANGE_SOURCE Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.ALTER_AUTOLOG_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>change_source_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>Name of an existing Distributed HotLog change source. Change source names follow Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>New description of the change source. The description must be specified using 255 or fewer characters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t18" headers="r1c1-t18">
<p><code>remove_description</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t18 r1c2-t18">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y'</code>, then the current description is changed to <code>NULL</code>. If the value is <code>'N'</code>, then the current description is unchanged.</p>
<p>Do not specify the description parameter with this parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t18" headers="r1c1-t18">
<p><code>enable_source</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t18 r1c2-t18">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y',</code> then the change source is enabled. If the value is <code>'N'</code>, then the change source is disabled.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1431"></a>Exceptions</p>
<div id="ARPLS65509" class="tblformal">
<p class="titleintable"><a id="sthref1432"></a><a id="sthref1433"></a>Table 33-9 ALTER_HOTLOG_CHANGE_SOURCE Procedure Exceptions</p>
<table class="cellalignment1229" title="ALTER_HOTLOG_CHANGE_SOURCE Procedure Exceptions " summary="This table describes exceptions raised by the ALTER_AUTOLOG_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t19">Exception</th>
<th class="cellalignment1227" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t19" headers="r1c1-t19">
<p><code>ORA-</code><code>31401</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t19 r1c2-t19">
<p>Change source is not an existing change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t19" headers="r1c1-t19">
<p><code>ORA-31455</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t19 r1c2-t19">
<p>Nothing to <code>ALTER</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t19" headers="r1c1-t19">
<p><code>ORA-31480</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t19 r1c2-t19">
<p>Staging database and source database cannot be the same</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t19" headers="r1c1-t19">
<p><code>ORA-31481</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t19 r1c2-t19">
<p>Change source is not a HotLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t19" headers="r1c1-t19">
<p><code>ORA-31482</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t19 r1c2-t19">
<p>Invalid option for non-distributed HotLog change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t19" headers="r1c1-t19">
<p><code>ORA-31484</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t19 r1c2-t19">
<p>Source database must be at least 9.2.0.6 or greater</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t19" headers="r1c1-t19">
<p><code>ORA-31485</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t19 r1c2-t19">
<p>Invalid database link</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t19" headers="r1c1-t19">
<p><code>ORA-31498</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t19 r1c2-t19">
<p>The <code>description</code> and <code>remove_description</code> parameters cannot both be specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t19" headers="r1c1-t19">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t19 r1c2-t19">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t19" headers="r1c1-t19">
<p><code>ORA-31504</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t19 r1c2-t19">
<p>Cannot alter or drop predefined change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t19" headers="r1c1-t19">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t19 r1c2-t19">
<p>Parameter value longer than maximum length</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t19" headers="r1c1-t19">
<p><code>ORA-31532</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t19 r1c2-t19">
<p>Cannot enable change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t19" headers="r1c1-t19">
<p><code>ORA-31534</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t19 r1c2-t19">
<p>Change Data Capture publisher is missing DBA role</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1434"></a>Usage Notes</p>
<ul>
<li>
<p>Properties supplied to this procedure with a <code>NULL</code> value are unchanged.</p>
</li>
<li>
<p>This procedure can be used to change more than one property at a time.</p>
</li>
<li>
<p>Enabling or disabling a Distributed HotLog change source starts or stops the Oracle Streams capture process that underlies the change source.</p>
</li>
<li>
<p>This procedure cannot be used to alter the change source for the asynchronous HotLog mode of Change Database Capture. The change source for the asynchronous HotLog mode is the predefined change source, HOTLOG_SOURCE, which cannot be altered.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65510" class="refsect2"><a id="i77409"></a>
<hr />
<h3 class="refsect2">CREATE_AUTOLOG_CHANGE_<a id="sthref1435"></a>SOURCE Procedure</h3>
<p>This procedure creates an AutoLog change source. An AutoLog change source is based on of a set of redo log files automatically copied by redo transport services to the system on which the staging database resides.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1436"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.CREATE_AUTOLOG_CHANGE_SOURCE(
     change_source_name  IN VARCHAR2,
     description         IN VARCHAR2 DEFAULT NULL,
     source_database     IN VARCHAR2,
     first_scn           IN NUMBER,
     online_log          IN CHAR DEFAULT 'N');
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1437"></a>Parameters</p>
<div id="ARPLS65511" class="tblformal">
<p class="titleintable"><a id="sthref1438"></a><a id="sthref1439"></a>Table 33-10 CREATE_AUTOLOG_CHANGE_SOURCE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_AUTOLOG_CHANGE_SOURCE Procedure Parameters " summary="This table describes the parameters of CREATE_AUTOLOG_CHANGE_SOURCE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t20">Parameter</th>
<th class="cellalignment1227" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t20" headers="r1c1-t20">
<p><code>change_source_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t20 r1c2-t20">
<p>Name of the change source. Change source names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t20" headers="r1c1-t20">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t20 r1c2-t20">
<p>Description of the change source. Specify using 255 or fewer characters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t20" headers="r1c1-t20">
<p><code>source_database</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t20 r1c2-t20">
<p>Global name of the change source's source database instance.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t20" headers="r1c1-t20">
<p><code>first_scn</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t20 r1c2-t20">
<p>The SCN of the start of a LogMiner dictionary that is in the change source's archived redo log files.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t20" headers="r1c1-t20">
<p><code>online_log</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t20 r1c2-t20">
<p>A value of <code>'Y'</code> or <code>'N'</code> If the value is <code>'Y'</code>, then the change source uses the AutoLog online option to hot-mine the source database online redo log to gather change data. There can only be one change source with <code>online_log='Y'</code> on a given staging database.</p>
<p>If the value is <code>'N'</code>, then the change source uses the AutoLog archive option to get change data from archived redo log files. There can be one or more change sources with <code>online_log='N'</code> on a given staging database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1440"></a>Exceptions</p>
<div id="ARPLS65512" class="tblformal">
<p class="titleintable"><a id="sthref1441"></a><a id="sthref1442"></a>Table 33-11 CREATE_AUTOLOG_CHANGE_SOURCE Procedure Exceptions</p>
<table class="cellalignment1229" title="CREATE_AUTOLOG_CHANGE_SOURCE Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.CREATE_AUTOLOG_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t21">Exception</th>
<th class="cellalignment1227" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t21" headers="r1c1-t21">
<p><code>ORA-31436</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t21 r1c2-t21">
<p>Duplicate change source specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t21" headers="r1c1-t21">
<p><code>ORA-31497</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t21 r1c2-t21">
<p>Invalid value specified for <code>first_scn</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t21" headers="r1c1-t21">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t21 r1c2-t21">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t21" headers="r1c1-t21">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t21 r1c2-t21">
<p>Specified parameter value is longer than the maximum length</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t21" headers="r1c1-t21">
<p><code>ORA-31508</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t21 r1c2-t21">
<p>Invalid parameter value for synchronous change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t21" headers="r1c1-t21">
<p><code>ORA-31535</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t21 r1c2-t21">
<p>Cannot support change source in this configuration</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1443"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous Change Data Capture only.</p>
</li>
<li>
<p>The publisher must take care when specifying a value for the <code>source_database</code> parameter. Change Data Capture does not validate this value when creating the change source. The publisher can query the <code>GLOBAL_NAME</code> column in the <code>GLOBAL_NAME</code> view at the source database for the <code>source_database</code> parameter value.</p>
</li>
<li>
<p>The publisher must configure redo transport services to automatically copy the log files to the system on which the staging database resides.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The section on performing asynchronous AutoLog publishing in <a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information on configuring redo transport services to automatically copy the log files to the system on which the staging database resides.</div>
</li>
<li>
<p>An AutoLog change source must begin with an archived redo log file that contains a LogMiner dictionary. The <code>CREATE_AUTOLOG_CHANGE_SOURCE</code> <code>first_scn</code> parameter indicates the SCN for this dictionary extraction and is the point at which the change source can begin capturing changes. The publisher can determine the value for the <code>first_scn</code> parameter using either of the following methods:</p>
<ul>
<li>
<p>Direct <code>DBMS_CAPTURE_ADM.BUILD</code> to return the value when the dictionary is built:</p>
<pre>
SET SERVEROUTPUT ON
VARIABLE FSCN NUMBER;
BEGIN
 :FSCN := 0;
 DBMS_CAPTURE_ADM.BUILD(:FSCN);
 DBMS_OUTPUT.PUT_LINE('The first_scn value is ' || :FSCN);
END;
/
The first_scn value is 207722
</pre></li>
<li>
<p>Make the following query on the source database. If this query returns multiple distinct values for <code>first_change#</code>, then the data dictionary has been extracted more than once and the publisher should choose the <code>first_change#</code> value that is the most appropriate to the change source.</p>
<pre>
SELECT DISTINCT FIRST_CHANGE#, NAME 
   FROM V$ARCHIVED_LOG
   WHERE DICTIONARY_BEGIN = 'YES';
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The section on performing asynchronous AutoLog publishing in <a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information on archived redo log files and the LogMiner dictionary.</div>
</li>
</ul>
</li>
<li>
<p>For the asynchronous mode of Change Data Capture, the amount of change data captured is dependent on the level of supplemental logging enabled at the source database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information about supplemental logging.</div>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65513" class="refsect2"><a id="i86667"></a>
<hr />
<h3 class="refsect2">CREATE_CHANGE_SET <a id="sthref1444"></a>Procedure</h3>
<p>This procedure allows the publisher to create a change set. For asynchronous HotLog and AutoLog Change Data Capture, the publisher can optionally provide beginning and ending date values at which to begin and end change data capture.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1445"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.CREATE_CHANGE_SET(
     change_set_name        IN VARCHAR2,
     description            IN VARCHAR2 DEFAULT NULL,
     change_source_name     IN VARCHAR2,
     stop_on_ddl            IN CHAR DEFAULT 'N',
     begin_date             IN DATE DEFAULT NULL,
     end_date               IN DATE DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1446"></a>Parameters</p>
<div id="ARPLS65514" class="tblformal">
<p class="titleintable"><a id="sthref1447"></a><a id="sthref1448"></a>Table 33-12 CREATE_CHANGE_SET Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_CHANGE_SET Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.CREATE_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t25">Parameter</th>
<th class="cellalignment1227" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t25" headers="r1c1-t25">
<p><code>change_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t25 r1c2-t25">
<p>Name of the change set. Change set names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t25" headers="r1c1-t25">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t25 r1c2-t25">
<p>Description of the change set. Specify using 255 or fewer characters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t25" headers="r1c1-t25">
<p><code>change_source_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t25 r1c2-t25">
<p>Name of the existing change source to contain this change set.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t25" headers="r1c1-t25">
<p><code>stop_on_ddl</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t25 r1c2-t25">
<p>A value of <code>'Y'</code> or <code>'N'</code>.</p>
<p>If the value is <code>'Y'</code>, then Change Data Capture stops when a DDL event is detected.</p>
<p>If the value is <code>'N'</code>, then Change Data Capture continues when a DDL event is detected.</p>
<p>See the Usage Notes for additional information about this parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t25" headers="r1c1-t25">
<p><code>begin_date</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t25 r1c2-t25">
<p>Date on which the publisher wants the change set to begin capturing changes. A value for this parameter is valid for the asynchronous HotLog and AutoLog modes of Change Data Capture only.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t25" headers="r1c1-t25">
<p><code>end_date</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t25 r1c2-t25">
<p>Date on which the publisher wants the change set to stop capturing changes. A value for this parameter is valid for the asynchronous HotLog and AutoLog modes of Change Data Capture only.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1449"></a>Exceptions</p>
<div id="ARPLS65515" class="tblformal">
<p class="titleintable"><a id="sthref1450"></a><a id="sthref1451"></a>Table 33-13 CREATE_CHANGE_SET Procedure Exceptions</p>
<table class="cellalignment1229" title="CREATE_CHANGE_SET Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.CREATE_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t26">Exception</th>
<th class="cellalignment1227" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t26" headers="r1c1-t26">
<p><code>ORA-31401</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t26 r1c2-t26">
<p>Specified change source is not an existing change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t26" headers="r1c1-t26">
<p><code>ORA-31407</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t26 r1c2-t26">
<p>The <code>end_date</code> must be greater than the <code>begin_date</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t26" headers="r1c1-t26">
<p><code>ORA-31408</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t26 r1c2-t26">
<p>Invalid value specified for begin_scn or end_scn</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t26" headers="r1c1-t26">
<p><code>ORA-31437</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t26 r1c2-t26">
<p>Duplicate change set specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t26" headers="r1c1-t26">
<p><code>ORA-31452</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t26 r1c2-t26">
<p>Invalid value for parameter, expecting: <code>Y</code> or <code>N</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t26" headers="r1c1-t26">
<p><code>ORA-31483</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t26 r1c2-t26">
<p>Cannot have spaces in the parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t26" headers="r1c1-t26">
<p><code>ORA-31485</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t26 r1c2-t26">
<p>Invalid database link</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t26" headers="r1c1-t26">
<p><code>ORA-31487</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t26 r1c2-t26">
<p>Cannot support begin dates or end dates in this configuration</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t26" headers="r1c1-t26">
<p><code>ORA-31488</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t26 r1c2-t26">
<p>Cannot support change set in this configuration</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t26" headers="r1c1-t26">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t26 r1c2-t26">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t26" headers="r1c1-t26">
<p><code>ORA-31503</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t26 r1c2-t26">
<p>Invalid date supplied for <code>begin_date</code> or <code>end_date</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t26" headers="r1c1-t26">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t26 r1c2-t26">
<p>Specified parameter value longer than maximum length</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t26" headers="r1c1-t26">
<p><code>ORA-31508</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t26 r1c2-t26">
<p>Invalid parameter value for synchronous change set</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1452"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture. However, the default values for the following parameters are the only supported values for synchronous change sets: <code>begin_date</code>, <code>end_date</code>, and <code>stop_on_ddl</code>. The default values for the following parameters are the only supported values for asynchronous Distributed HotLog change sets: <code>begin_date</code> and <code>end_date</code>.</p>
</li>
<li>
<p>When the change source is Distributed HotLog on a release of Oracle Database earlier than 10.2, Change Data Capture inserts rows into the <code>CHANGE_PROPAGATION</code> and <code>CHANGE_PROPAGATION_SETS</code> views on the staging database.</p>
</li>
<li>
<p>An AutoLog online change source (created with <code>online_log='Y'</code>) can only contain one change set.</p>
</li>
<li>
<p>The <code>begin_date</code> and <code>end_date</code> parameters are optional. The publisher can specify neither of them, one of them, or both. The effect of these parameters is as follows:</p>
<ul>
<li>
<p>When a <code>begin_date</code> is specified, changes from transactions that begin on or after that date are captured.</p>
</li>
<li>
<p>When a <code>begin_date</code> is not specified, capture starts with the earliest available change data.</p>
</li>
<li>
<p>When an <code>end_date</code> is specified, changes from transactions that are committed on or before that date are captured.</p>
</li>
<li>
<p>When an <code>end_date</code> is not specified, Change Data Capture continues indefinitely.</p>
</li>
</ul>
</li>
<li>
<p>The effect of the <code>stop_on_ddl</code> parameter is as follows:</p>
<ul>
<li>
<p>When the <code>stop_on_ddl</code> parameter is set to <code>'Y'</code>, asynchronous Change Data Capture stops if DDL is encountered during change data capture. Some DDL statements can adversely affect capture, such as a statement that drops a source table column that is being captured. The publisher has an opportunity to analyze and adjust to DDL changes that may adversely affect change tables while capture is stopped, thereby preventing possible errors during capture.</p>
<p>Because these statements do not affect the column data itself, Change Data Capture does not stop capturing change data when the <code>stop_on_ddl</code> parameter is set to <code>'Y'</code> and any of the following statements is encountered:</p>
<ul>
<li>
<p><code>ANALYZE TABLE</code></p>
</li>
<li>
<p><code>LOCK TABLE</code></p>
</li>
<li>
<p><code>GRANT</code> privileges to access a table</p>
</li>
<li>
<p><code>REVOKE</code> privileges to access a table</p>
</li>
<li>
<p><code>COMMENT</code> on a table</p>
</li>
<li>
<p><code>COMMENT</code> on a column</p>
</li>
</ul>
<p>These statements can be issued on the source database without concern for their impact on Change Data Capture processing.</p>
</li>
<li>
<p>When the <code>stop_on_ddl</code> parameter is set to <code>'N'</code>, Change Data Capture does not stop if DDL is encountered during change data capture. If a change set does not stop on DDL, but a DDL change occurs that affects capture, that change can result in a capture error.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information on the effects of, and how to recover from, a capture error.</div>
</li>
</ul>
<p>Whenever a DDL statement causes processing to stop, a message is written to the alert log indicating for which change set processing has been terminated and the DDL statement that caused it to be terminated. Similarly, whenever DDL statements are ignored by Change Data Capture and processing continues, a message is written to the alert log indicating which DDL statement was ignored.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65516" class="refsect2"><a id="i89168"></a>
<hr />
<h3 class="refsect2">CREATE_CHANGE_TABL<a id="sthref1453"></a>E Procedure</h3>
<p>This procedure creates a change table in a specified schema.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that the publisher be certain that the source table that will be referenced in a <code>CREATE_CHANGE_TABLE</code> procedure has been created prior to calling this procedure, particularly if the change set that will be specified in the procedure has the <code>stop_on_ddl</code> parameter set to <code>'Y'</code>.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1454"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.CREATE_CHANGE_TABLE(
     owner                  IN VARCHAR2,
     change_table_name      IN VARCHAR2,
     change_set_name        IN VARCHAR2,
     source_schema          IN VARCHAR2,
     source_table           IN VARCHAR2,
     column_type_list       IN VARCHAR2,
     capture_values         IN VARCHAR2,
     rs_id                  IN CHAR,
     row_id                 IN CHAR,
     user_id                IN CHAR,
     timestamp              IN CHAR,
     object_id              IN CHAR,
     source_colmap          IN CHAR,
     target_colmap          IN CHAR,
     options_string         IN VARCHAR2,
     ddl_markers            IN CHAR  DEFAULT 'Y');
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1455"></a>Parameters</p>
<div id="ARPLS65517" class="tblformal">
<p class="titleintable"><a id="sthref1456"></a><a id="sthref1457"></a>Table 33-14 CREATE_CHANGE_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_CHANGE_TABLE Procedure Parameters" summary="This table describes the parameters of the DBMS_CDC_PUBLISH.CREATE_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t29">Parameter</th>
<th class="cellalignment1227" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t29" headers="r1c1-t29">
<p><code>owner</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t29 r1c2-t29">
<p>Name of the schema that owns the change table.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t29" headers="r1c1-t29">
<p><code>change_table_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t29 r1c2-t29">
<p>Name of the change table that is being created. Change table names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t29" headers="r1c1-t29">
<p><code>change_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t29 r1c2-t29">
<p>Name of the change set in which this change table resides.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t29" headers="r1c1-t29">
<p><code>source_schema</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t29 r1c2-t29">
<p>The schema where the source table is located.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t29" headers="r1c1-t29">
<p><code>source_table</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t29 r1c2-t29">
<p>The source table from which the change records are captured.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t29" headers="r1c1-t29">
<p><code>column_type_list</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t29 r1c2-t29">
<p>The user columns and datatypes that are being tracked. Specify using a comma-delimited list.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t29" headers="r1c1-t29">
<p><code>capture_values</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t29 r1c2-t29">
<p>One of the following capture values for update operations:</p>
<ul>
<li>
<p><code>OLD</code>: Captures the original values from the source table.</p>
</li>
<li>
<p><code>NEW</code>: Captures the changed values from the source table.</p>
</li>
<li>
<p><code>BOTH</code>: Captures the original and changed values from the source table.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t29" headers="r1c1-t29">
<p><code>rs_id</code></p>
<p><code>row_id</code></p>
<p><code>user_id</code></p>
<p><code>timestamp</code></p>
<p><code>object_id</code></p>
<p><code>source_colmap</code></p>
<p><code>target_colmap</code></p>
<p><code>ddl_markers</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t29 r1c2-t29">
<p>Each listed parameter specifies a particular control column as follows:</p>
<ul>
<li>
<p>The <code>rs_id</code> parameter specifies the <code>RSID$</code> control column.</p>
</li>
<li>
<p>The <code>row_id</code> parameter specifies the <code>ROW_ID$</code> control column.</p>
</li>
<li>
<p>The <code>user_id</code> parameter specifies the <code>USERNAME$</code> control column.</p>
</li>
<li>
<p>The <code>timestamp</code> parameter specifies the <code>TIMESTAMP$</code> control column.</p>
</li>
<li>
<p>The <code>object_id</code> parameter specifies the <code>SYS_NC_OID$</code> control column.</p>
</li>
<li>
<p>The <code>source_colmap</code> parameter specifies the <code>SOURCE_COLMAP$</code> control column.</p>
</li>
<li>
<p>The <code>target_colmap</code> parameter specifies the <code>TARGET_COLMAP$</code> control column.</p>
</li>
<li>
<p>The <code>ddl_markers</code> parameter tracks all DDL operations on the source table and stores information about those operations in the change table. There are three values: <code>DDLOPER$</code> is a bit vector that indicates what kind of DDL operation happened. (Use the procedure <code>DBMS_CDC_PUBLISH.GET_DDLOPER(ddloper$)</code> to get the name of the DDL operation.) <code>DDLDESC$</code> is a CLOB containing the actual DDL statement executed. <code>DDLPDOBJN$</code> is not used in this release.</p>
</li>
</ul>
<p>Each parameter can have a value of <code>'Y'</code> or <code>'N'</code>, where:</p>
<ul>
<li>
<p><code>'Y'</code>: Adds the specified control column to the change table.</p>
</li>
<li>
<p><code>'N'</code>: Does not add the specified control column to the change table.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t29" headers="r1c1-t29">
<p><code>options_string</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t29 r1c2-t29">
<p>The syntactically correct options to be passed to a <code>CREATE TABLE</code> DDL statement. The options string is appended to the generated <code>CREATE TABLE</code> DDL statement after the closing parenthesis that defines the columns of the table. See the Usage Notes for more information.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for a complete description of control columns</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1458"></a>Exceptions</p>
<div id="ARPLS65518" class="tblformal">
<p class="titleintable"><a id="sthref1459"></a><a id="sthref1460"></a>Table 33-15 CREATE_CHANGE_TABLE Procedure Exceptions</p>
<table class="cellalignment1229" title="CREATE_CHANGE_TABLE Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.CREATE_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t31">Exception</th>
<th class="cellalignment1227" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t31" headers="r1c1-t31">
<p><code>ORA-31402</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t31 r1c2-t31">
<p>Unrecognized parameter specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t31" headers="r1c1-t31">
<p><code>ORA-31409</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t31 r1c2-t31">
<p>One or more values for input parameters are incorrect</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t31" headers="r1c1-t31">
<p><code>ORA-31415</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t31 r1c2-t31">
<p>Specified change set does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t31" headers="r1c1-t31">
<p><code>ORA-31416</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t31 r1c2-t31">
<p>Invalid <code>SOURCE_COLMAP</code> value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t31" headers="r1c1-t31">
<p><code>ORA-31417</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t31 r1c2-t31">
<p>Column list contains control column <span class="italic">control-column-name</span></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t31" headers="r1c1-t31">
<p><code>ORA-31418</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t31 r1c2-t31">
<p>Specified source schema does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t31" headers="r1c1-t31">
<p><code>ORA-31419</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t31 r1c2-t31">
<p>Specified source table does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t31" headers="r1c1-t31">
<p><code>ORA-31420</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t31 r1c2-t31">
<p>Unable to submit the purge job</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t31" headers="r1c1-t31">
<p><code>ORA-31421</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t31 r1c2-t31">
<p>Change table does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t31" headers="r1c1-t31">
<p><code>ORA-31422</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t31 r1c2-t31">
<p>Owner schema does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t31" headers="r1c1-t31">
<p><code>ORA-31438</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t31 r1c2-t31">
<p>Duplicate change table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t31" headers="r1c1-t31">
<p><code>ORA-31447</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t31 r1c2-t31">
<p>Cannot create change tables in the <code>SYS</code> schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t31" headers="r1c1-t31">
<p><code>ORA-31450</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t31 r1c2-t31">
<p>Invalid value for <code>change_table_name</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t31" headers="r1c1-t31">
<p><code>ORA-31451</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t31 r1c2-t31">
<p>Invalid value for <code>capture_values</code>, expecting: <code>OLD</code>, <code>NEW</code>, or <code>BOTH</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t31" headers="r1c1-t31">
<p><code>ORA-31452</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t31 r1c2-t31">
<p>Invalid value for parameter, expecting: <code>Y</code> or <code>N</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t31" headers="r1c1-t31">
<p><code>ORA-31459</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t31 r1c2-t31">
<p>System triggers for <code>DBMS_CDC_PUBLISH</code> package are not installed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t31" headers="r1c1-t31">
<p><code>ORA-31467</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t31 r1c2-t31">
<p>No column found in the source table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t31" headers="r1c1-t31">
<p><code>ORA-31471</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t31 r1c2-t31">
<p>Invalid <code>OBJECT_ID</code> value</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1461"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>A change table is a database table that contains the change data resulting from DML statements (<code>INSERT</code>, <code>UPDATE,</code> and <code>DELETE</code>) made to a source table. A given change table can capture changes from only one source table.</p>
</li>
<li>
<p>A change table is a database table that contains two types of columns:</p>
<ul>
<li>
<p>User columns, which are copies of actual columns of source tables that reside in the change table.</p>
</li>
<li>
<p>Control columns, which maintain special metadata for each change row in the change table. Information such as the DML operation performed, the capture time (time stamp), and changed column vectors are examples of control columns. The publisher must not specify the name of the control columns in the user column list.</p>
</li>
</ul>
</li>
<li>
<p>If there are multiple publishers on the staging database for the Distributed HotLog mode of Change Data capture, and one publisher defines a change table in another publisher's Distributed HotLog change set, then Change Data Capture uses the database link established by the publisher who created the change set to access the source database. Therefore, the database link to the source database established by the publisher who created the change set must be intact for the change table to be successfully created. If the change set publisher's database link is not present when creating a change table, an error is returned indicating that the connection description for the remote database was not found.</p>
</li>
<li>
<p>The publisher must not attempt to control a change table's partitioning properties. Change Data Capture automatically manages the change table partitioning as part of its change table management.</p>
</li>
<li>
<p>When creating a change table for any mode of asynchronous Change Data Capture, the publisher must accept the default value or specify '<code>N</code>' for the <code>source_colmap</code> and <code>object_id</code> parameters. In addition, for the asynchronous Distributed HotLog mode of Change Data Capture, the publisher also must accept the default value or specify '<code>N</code>' for the <code>row_id</code> and <code>username</code> parameters when the change source is 9.2 or 10.1.</p>
</li>
<li>
<p>When the publisher specifies the <code>rs_id</code> parameter, the <code>RSID$</code> column is added to the change table. The <code>RSID$</code> column value reflects an operation's capture order within a transaction, but not across transactions. The publisher cannot use the <code>RSID$</code> column value by itself to order committed operations across transactions; it must be used in conjunction with the <code>CSCN$</code> column value.</p>
</li>
<li>
<p>The publisher can control a change table's physical properties, tablespace properties, and so on, by specifying the <code>options_string</code> parameter. With the <code>options_string</code> parameter, the publisher can set any option that is valid for the <code>CREATE TABLE</code> DDL statement (except for partitioning properties).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
How the publisher defines the <code>options_string</code> parameter can have an effect on the performance and operations in a Change Data Capture system. For example, if the publisher places several constraints in the options column, it can have a noticeable effect on performance. Also, if the publisher uses <code>NOT</code> <code>NULL</code> constraints and a particular column is not changed in an incoming change row, then the constraint can cause the <code>INSERT</code> operation to fail and the transaction that contains the <code>INSERT</code> operation to be rolled back.</div>
</li>
<li>
<p><a id="sthref1462"></a><a id="sthref1463"></a>Oracle recommends that change tables not be created in system tablespaces. This can be accomplished if the publisher's default tablespace is not the system tablespace or if the publisher specifies a tablespace in the <code>options_string</code> parameter. If a tablespace is not specified by the publisher, and the publisher's default table space is the system tablespace, then Change Data Capture creates change tables in the system tablespace.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for more information on, and examples of, creating change tables in tablespaces managed by the publisher.</div>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65519" class="refsect2"><a id="BABCCCBA"></a>
<hr />
<h3 class="refsect2">CREATE_HOTLOG_CHANGE_SOURCE Procedure<a id="sthref1464"></a></h3>
<p>This procedure creates a Distributed HotLog change source on the source database when the publisher runs this procedure from the staging database. A Distributed HotLog change source is based on data in the online redo log files that is automatically transferred to the staging database by Oracle Streams propagation.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1465"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.CREATE_HOTLOG_CHANGE_SOURCE(
     change_source_name     IN VARCHAR2,
     description            IN VARCHAR2 DEFAULT NULL,
     source_database        IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1466"></a>Parameters</p>
<div id="ARPLS65520" class="tblformal">
<p class="titleintable"><a id="sthref1467"></a><a id="sthref1468"></a>Table 33-16 CREATE_HOTLOG_CHANGE_SOURCE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_HOTLOG_CHANGE_SOURCE Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.DROP_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t34">Parameters</th>
<th class="cellalignment1227" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t34" headers="r1c1-t34">
<p><code>change_source_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t34 r1c2-t34">
<p>Name of the Distributed HotLog change source to be created. Each change source name must be unique and must follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t34" headers="r1c1-t34">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t34 r1c2-t34">
<p>Description of the change source. Specify using 255 or fewer characters.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t34" headers="r1c1-t34">
<p><code>source_database</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t34 r1c2-t34">
<p>The name of the database link defined from the staging database to the source database, where the source database is Oracle9<span class="italic">i</span> Database, Database 10<span class="italic">g</span> Release 1, Oracle Database 10<span class="italic">g</span> Release 2, or Oracle Database 11g Release 1. See <a class="olink DWHSG016" href="../../server.112/e25554/cdc.htm#DWHSG016"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information on creating database links for the Distributed HotLog mode of Change Data Capture.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1469"></a>Exceptions</p>
<div id="ARPLS65521" class="tblformal">
<p class="titleintable"><a id="sthref1470"></a><a id="sthref1471"></a>Table 33-17 CREATE_HOTLOG_CHANGE_SOURCE Procedure Exceptions</p>
<table class="cellalignment1229" title="CREATE_HOTLOG_CHANGE_SOURCE Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.DROP_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t35">Exception</th>
<th class="cellalignment1227" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t35" headers="r1c1-t35">
<p><code>ORA-31436</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t35 r1c2-t35">
<p>Duplicate change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t35" headers="r1c1-t35">
<p><code>ORA-31480</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t35 r1c2-t35">
<p>Staging database and source database cannot be the same</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t35" headers="r1c1-t35">
<p><code>ORA-31483</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t35 r1c2-t35">
<p>Cannot have spaces in the parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t35" headers="r1c1-t35">
<p><code>ORA-31484</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t35 r1c2-t35">
<p>Source database must be at least 9.2.0.6 or greater</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t35" headers="r1c1-t35">
<p><code>ORA-31485</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t35 r1c2-t35">
<p>Invalid database link</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t35" headers="r1c1-t35">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t35 r1c2-t35">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t35" headers="r1c1-t35">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t35 r1c2-t35">
<p>Parameter value longer than the maximum length</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t35" headers="r1c1-t35">
<p><code>ORA-31534</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t35 r1c2-t35">
<p>Change Data Capture publisher is missing DBA role</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1472"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for the asynchronous Distributed HotLog mode of Change Data Capture only.</p>
<p>This procedure cannot be used to create a change source for the asynchronous HotLog mode of Change Database Capture. The publisher must use the predefined change source, HOTLOG_SOURCE, for the asynchronous HotLog mode of Change Data Capture.</p>
</li>
<li>
<p>A Distributed HotLog change source can contain one or more change sets, but they must all be on the same staging database.</p>
</li>
<li>
<p>A staging database publisher cannot create multiple Distributed HotLog change sources with the same name, even when those change sources are on different source databases.</p>
</li>
<li>
<p>When the publisher creates a change source on a release of Oracle Database earlier than 10.2, Change Data Capture:</p>
<ul>
<li>
<p>Generates names for the Streams capture process, capture queue, and propagation based on the change source name. If a generated name is already in use, an error indicating that the capture process, queue, or propagation cannot be created is returned.</p>
</li>
<li>
<p>Inserts a row into the <code>CHANGE_SOURCES</code> view on the staging database where the <code>SOURCE_TYPE</code> column of the inserted row indicates that the source Oracle Database release is earlier than 10.2.</p>
</li>
</ul>
</li>
<li>
<p>Note that the database link indicated by the <code>source_database</code> parameter must exist when creating, altering, or dropping a Distributed HotLog change source and the change sets and change tables it contains. However, this database link is not required for change capture to occur. Once the required Distributed HotLog change sources, change sets and change tables are in place and enabled, this database link can be dropped without interrupting change capture. This database link would need to be recreated to create, alter, or drop Distributed HotLog change sources, change sets and change tables.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65522" class="refsect2"><a id="i87624"></a>
<hr />
<h3 class="refsect2">DROP_CHANGE_SET <a id="sthref1473"></a>Procedure</h3>
<p>This procedure drops an existing change set that was created with the <code>CREATE_CHANGE_SET</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1474"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.DROP_CHANGE_SET(
     change_set_name     IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1475"></a>Parameters</p>
<div id="ARPLS65523" class="tblformal">
<p class="titleintable"><a id="sthref1476"></a><a id="sthref1477"></a>Table 33-18 DROP_CHANGE_SET Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_CHANGE_SET Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.DROP_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t36">Parameter</th>
<th class="cellalignment1227" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t36" headers="r1c1-t36">
<p><code>change_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t36 r1c2-t36">
<p>Name of the change set to be dropped. Change set names follow the Oracle schema object naming rules.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1478"></a>Exceptions</p>
<div id="ARPLS65524" class="tblformal">
<p class="titleintable"><a id="sthref1479"></a><a id="sthref1480"></a>Table 33-19 DROP_CHANGE_SET Procedure Exceptions</p>
<table class="cellalignment1229" title="DROP_CHANGE_SET Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.DROP_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t37">Exception</th>
<th class="cellalignment1227" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t37" headers="r1c1-t37">
<p><code>ORA-31410</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t37 r1c2-t37">
<p>Specified change set is not an existing change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t37" headers="r1c1-t37">
<p><code>ORA-31411</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t37 r1c2-t37">
<p>Specified change set is referenced by a change table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t37" headers="r1c1-t37">
<p><code>ORA-31485</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t37 r1c2-t37">
<p>Invalid database link</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t37" headers="r1c1-t37">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t37 r1c2-t37">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t37" headers="r1c1-t37">
<p><code>ORA-31505</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t37 r1c2-t37">
<p>Cannot alter or drop predefined change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t37" headers="r1c1-t37">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t37 r1c2-t37">
<p>Specified parameter value is longer than maximum length</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1481"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>The change set to be dropped cannot contain any change tables.</p>
</li>
<li>
<p>The predefined synchronous change set, <code>SYNC_SET</code>, cannot be dropped.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65525" class="refsect2"><a id="i77652"></a>
<hr />
<h3 class="refsect2">DROP_CHANGE_SOURCE <a id="sthref1482"></a>Procedure</h3>
<p>This procedure drops an existing AutoLog change source that was created with the <code>CREATE_AUTOLOG_CHANGE_SOURCE</code> procedure or an existing Distributed HotLog change source that was created with the <code>CREATE_HOTLOG_CHANGE_SOURCE</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1483"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.DROP_CHANGE_SOURCE(
     change_source_name    IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1484"></a>Parameters</p>
<div id="ARPLS65526" class="tblformal">
<p class="titleintable"><a id="sthref1485"></a><a id="sthref1486"></a>Table 33-20 DROP_CHANGE_SOURCE Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_CHANGE_SOURCE Procedure Parameters " summary="This table describes the parameters of the DBMS_CDC_PUBLISH.DROP_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t38">Parameter</th>
<th class="cellalignment1227" id="r1c2-t38">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t38" headers="r1c1-t38">
<p><code>change_source_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t38 r1c2-t38">
<p>Name of the change source to be dropped. Change source names follow the Oracle schema object naming rules.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1487"></a>Exceptions</p>
<div id="ARPLS65527" class="tblformal">
<p class="titleintable"><a id="sthref1488"></a><a id="sthref1489"></a>Table 33-21 DROP_CHANGE_SOURCE Procedure Exceptions</p>
<table class="cellalignment1229" title="DROP_CHANGE_SOURCE Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.DROP_CHANGE_SOURCE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t39">Exception</th>
<th class="cellalignment1227" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t39" headers="r1c1-t39">
<p><code>ORA-31401</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t39 r1c2-t39">
<p>Specified change source is not an existing change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t39" headers="r1c1-t39">
<p><code>ORA-31406</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t39 r1c2-t39">
<p>Specified change source is referenced by a change set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t39" headers="r1c1-t39">
<p><code>ORA-31499</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t39 r1c2-t39">
<p>Null value specified for required parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t39" headers="r1c1-t39">
<p><code>ORA-31504</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t39 r1c2-t39">
<p>Cannot alter or drop predefined change source</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t39" headers="r1c1-t39">
<p><code>ORA-31507</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t39 r1c2-t39">
<p>Specified parameter value longer than maximum length</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1490"></a>Usage Notes</p>
<ul>
<li>
<p>The change source to be dropped cannot contain any change sets.</p>
</li>
<li>
<p>The predefined change sources, <code>HOTLOG_SOURCE</code> and <code>SYNC_SOURCE,</code> cannot be dropped.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65528" class="refsect2"><a id="i78669"></a>
<hr />
<h3 class="refsect2"><a id="sthref1491"></a><a id="sthref1492"></a>DROP_CHANGE_TABLE Procedure</h3>
<p>This procedure drops an existing change table that was created with the <code>CREATE_CHANGE_TABLE</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1493"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.DROP_CHANGE_TABLE(
     owner              IN VARCHAR2,
     change_table_name  IN VARCHAR2,
     force_flag         IN CHAR);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1494"></a>Parameters</p>
<div id="ARPLS65529" class="tblformal">
<p class="titleintable"><a id="sthref1495"></a><a id="sthref1496"></a>Table 33-22 DROP_CHANGE_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_CHANGE_TABLE Procedure Parameters" summary="This table describes the parameters of the DBMS_CDC_PUBLISH.DROP_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t40">Parameter</th>
<th class="cellalignment1227" id="r1c2-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t40" headers="r1c1-t40">
<p><code>owner</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t40 r1c2-t40">
<p>Name of the schema that owns the change table.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t40" headers="r1c1-t40">
<p><code>change_table_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t40 r1c2-t40">
<p>Name of the change table to be dropped. Change table names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t40" headers="r1c1-t40">
<p><code>force_flag</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t40 r1c2-t40">
<p>Drops the change table, depending on whether or not there are subscriptions to it, as follows:</p>
<ul>
<li>
<p><code>'Y'</code>: Drops the change table even if there are subscriptions to it.</p>
</li>
<li>
<p><code>'N'</code>: Drops the change table only if there are no subscriptions to it.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1497"></a>Exceptions</p>
<div id="ARPLS65530" class="tblformal">
<p class="titleintable"><a id="sthref1498"></a><a id="sthref1499"></a>Table 33-23 DROP_CHANGE_TABLE Procedure Exceptions</p>
<table class="cellalignment1229" title="DROP_CHANGE_TABLE Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.DROP_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t41">Exception</th>
<th class="cellalignment1227" id="r1c2-t41">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t41" headers="r1c1-t41">
<p><code>ORA-31421</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t41 r1c2-t41">
<p>Change table does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t41" headers="r1c1-t41">
<p><code>ORA-31422</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t41 r1c2-t41">
<p>Specified owner schema does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t41" headers="r1c1-t41">
<p><code>ORA-31424</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t41 r1c2-t41">
<p>Change table has active subscriptions</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t41" headers="r1c1-t41">
<p><code>ORA-31441</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t41 r1c2-t41">
<p>Table is not a change table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1500"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>If the publisher wants to drop a change table while there are active subscriptions to that table, he or she must call the <code>DROP_CHANGE_TABLE</code> procedure using the <code>force_flag =&gt; 'Y'</code> parameter. This tells Change Data Capture to override its normal safeguards and allow the change table to be dropped despite active subscriptions. The subscriptions that include the dropped table will no longer be valid, and subscribers will lose access to the change data.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65531" class="refsect2"><a id="i87540"></a>
<hr />
<h3 class="refsect2">DROP_SUB<a id="sthref1501"></a>SCRIPTION Procedure</h3>
<p>This procedure allows a publisher to drop a subscription that was created by a subscriber with a prior call to the <code>DBMS_CDC_SUBSCRIBE.CREATE_SUBSCRIPTION</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1502"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.DROP_SUBSCRIPTION(
     subscription_name  IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1503"></a>Parameters</p>
<div id="ARPLS65532" class="tblformal">
<p class="titleintable"><a id="sthref1504"></a><a id="sthref1505"></a>Table 33-24 DROP_SUBSCRIPTION Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_SUBSCRIPTION Procedure Parameters" summary="This table describes the parameters of the DBMS_CDC_PUBLISH.DROP_SUBSCRIPTION subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t42">Parameter</th>
<th class="cellalignment1227" id="r1c2-t42">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t42" headers="r1c1-t42">
<p><code>subscription_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t42 r1c2-t42">
<p>Name of the subscription that was specified by a previous call to the <code>DBMS_CDC_SUBSCRIBE.CREATE_SUBSCRIPTION</code> procedure. Subscription names follow the Oracle schema object naming rules.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1506"></a>Exceptions</p>
<div id="ARPLS65533" class="tblformal">
<p class="titleintable"><a id="sthref1507"></a><a id="sthref1508"></a>Table 33-25 DROP_SUBSCRIPTION Procedure Exceptions</p>
<table class="cellalignment1229" title="DROP_SUBSCRIPTION Procedure Exceptions " summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.DROP_SUBSCRIPTION subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t43">Exception</th>
<th class="cellalignment1227" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t43" headers="r1c1-t43">
<p><code>ORA-31409</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t43 r1c2-t43">
<p>One or more values for input parameters are incorrect</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t43" headers="r1c1-t43">
<p><code>ORA-31425</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t43 r1c2-t43">
<p>Subscription does not exist</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t43" headers="r1c1-t43">
<p><code>ORA-31432</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t43 r1c2-t43">
<p>Invalid source table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1509"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>This procedure works the same way as the <code>DBMS_CDC_SUBSCRIBE.DROP_SUBSCRIPTION</code> procedure.</p>
</li>
<li>
<p>This procedure provides the publisher with a way to drop subscriptions that have not been dropped by the subscriber. It is possible that a subscription that is no longer needed still exists and is holding change data in a change table indefinitely. The publisher can use this procedure to remove such a subscription so that a purge operation can clean up its change data. Oracle recommends that the publisher attempt to verify that the subscription is not needed prior to dropping it. If that is not possible, the publisher should inform the subscription owner that the subscription has been dropped. Ideally, subscribers drop subscriptions that are no longer needed using the <code>DBMS_CDC_SUBSCRIBE.DROP_SUBSCRIPTION</code> procedure and the publisher need not use the <code>DBMS_CDC_SUBSCRIBE.DROP_SUBSCRIPTION</code> procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65534" class="refsect2"><a id="CHEEBAFD"></a>
<hr />
<h3 class="refsect2">GET_DDLOPER Function</h3>
<p>This function converts a binary integer into a user friendly string that describes the DDL operation that actually took place.</p>
<div id="ARPLS65535" class="refsect3"><a id="sthref1510"></a>
<h4 class="refsect3">Syntax</h4>
<pre>
DBMS_CDC_PUBLISH.GET_DDLOPER (ddloper IN BINARY_INTEGER)
     RETURN VARCHAR2;
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS65536" class="refsect3"><a id="sthref1511"></a>
<h4 class="refsect3">Parameters</h4>
<div id="ARPLS65537" class="tblformal">
<p class="titleintable"><a id="sthref1512"></a><a id="sthref1513"></a>Table 33-26 Function Parameters</p>
<table class="cellalignment1229" title="Function Parameters" summary="GET_DDLOPER Parameters" dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t44">Parameter</th>
<th class="cellalignment1227" id="r1c2-t44">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t44" headers="r1c1-t44">
<p><code>ddloper</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t44 r1c2-t44">
<p>An integer value representing what DDL operation actually occurred. This value is obtained from the <code>ddloper$</code> column in the subscriber's view.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect3" -->
<div id="ARPLS65538" class="refsect3"><a id="sthref1514"></a>
<h4 class="refsect3">Example</h4>
<p>The following illustrates how to use change markers. First, you execute a DDL statement and then verify that it has been captured.</p>
<pre>
ALTER TABLE cdc_psales DROP PARTITION Dec_06;

SELECT ddloper$, DECODE(ddloper$, NULL, 'NULL',
       DBMS_CDC_PUBLISH.GET_DDLOPER(ddloper$)) 
          AS DDL_OPER
FROM cdc_psales_act
WHERE DDLOPER$ IS NOT NULL
ORDER BY cscn$;

ddloper$            DDL_OPER
---------------------------------
512                 Drop Partition
1 row selected.

SELECT ddldesc$
FROM cdc_psales_act
WHERE ddloper$
IS NOT NULL 
ORDER BY cscn;

DDLDESC$
------------------------
alter table cdc_psales drop partition Dec_06
1 row selected.
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS65539" class="refsect3"><a id="sthref1515"></a>
<h4 class="refsect3">Usage Notes</h4>
<ul>
<li>
<p>If an invalid value for <code>ddloper</code> is given, then <code>'Invalid value for DDLOPR$'</code> will be returned by this function.</p>
</li>
<li>
<p>This function only works for asynchronous Change Data Capture.</p>
</li>
</ul>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65540" class="refsect2"><a id="i78737"></a>
<hr />
<h3 class="refsect2">PURGE <a id="sthref1516"></a>Procedure</h3>
<p>This procedure monitors change table usage by all subscriptions, determines which rows are no longer needed by any subscriptions, and removes the unneeded rows to prevent change tables from growing indefinitely. When called, this procedure purges all change tables on the staging database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1517"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.PURGE;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1518"></a>Exceptions</p>
<p>Only standard Oracle exceptions (for example, a privilege violation) are returned during a purge operation.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1519"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>The publisher can run this procedure manually or automatically:</p>
<ul>
<li>
<p>The publisher can run this procedure manually from the command line to purge data from change tables.</p>
</li>
<li>
<p>The publisher can run this procedure in a script to routinely perform a purge operation and control the growth of change tables.</p>
</li>
</ul>
</li>
<li>
<p>Note that the <code>DBMS_CDC_PUBLISH.PURGE</code> procedure (used by the publisher and the Change Data Capture default purge job) is distinct from the <code>DBMS_CDC_SUBSCRIBE.PURGE_WINDOW</code> procedure (used by subscribers). A call to the <code>DBMS_CDC_PUBLISH.PURGE</code> procedure physically removes unneeded rows from change tables. A call to the <code>DBMS_CDC_SUBSCRIBE.PURGE_WINDOW</code> procedure, logically removes change rows from a subscription window, but does not physically remove rows from the underlying change tables.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65541" class="refsect2"><a id="i78753"></a>
<hr />
<h3 class="refsect2">PURGE_CHANGE_SET <a id="sthref1520"></a>Procedure</h3>
<p>This procedure removes unneeded rows from all change tables in the named change set. This procedure allows a finer granularity purge operation than the basic <code>PURGE</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1521"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.PURGE_CHANGE_SET(
</pre>
<pre>
    change_set_name IN VARCHAR2,
    force           IN CHAR DEFAULT 'Y',
    purge_date      IN DATE DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1522"></a>Parameters</p>
<div id="ARPLS65542" class="tblformal">
<p class="titleintable"><a id="sthref1523"></a><a id="sthref1524"></a>Table 33-27 PURGE_CHANGE_SET Procedure Parameters</p>
<table class="cellalignment1229" title="PURGE_CHANGE_SET Procedure Parameters" summary="This table describes the parameters of the DBMS_CDC_PUBLISH.PURGE_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t45">Parameter</th>
<th class="cellalignment1227" id="r1c2-t45">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t45" headers="r1c1-t45">
<p><code>change_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t45 r1c2-t45">
<p>Name of an existing change set. Change set names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t45" headers="r1c1-t45">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t45 r1c2-t45">
<p>If <code>'Y'</code>, try to use partition split/drop, but if the required lock cannot be acquired, use a delete statement to purge. If <code>'N'</code>, only use split/drop partition statements to purge. If a lock cannot be acquired, then no data will be purged.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t45" headers="r1c1-t45">
<p><code>purge_date</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t45 r1c2-t45">
<p>All records that have a <code>commit_timestamp</code> of less than or equal to this date will be purged.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1525"></a>Exceptions</p>
<div id="ARPLS65543" class="tblformal">
<p class="titleintable"><a id="sthref1526"></a><a id="sthref1527"></a>Table 33-28 PURGE_CHANGE_SET Procedure Exceptions</p>
<table class="cellalignment1229" title="PURGE_CHANGE_SET Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.PURGE_CHANGE_SET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t46">Exception</th>
<th class="cellalignment1227" id="r1c2-t46">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t46" headers="r1c1-t46">
<p><code>ORA-31410</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t46 r1c2-t46">
<p>Change set is not an existing change set</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1528"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>The publisher can run this procedure manually from the command line or in a script to purge unneeded rows from change tables in a specific change set.</p>
</li>
<li>
<p>Note that the <code>DBMS_CDC_PUBLISH.PURGE_CHANGE_SET</code> procedure (used by the publisher) is distinct from the <code>DBMS_CDC_SUBSCRIBE.PURGE_WINDOW</code> procedure (used by subscribers). A call to the <code>DBMS_CDC_PUBLISH.PURGE_CHANGE_SET</code> procedure physically removes unneeded rows from change tables in the specified change set. A call to the <code>DBMS_CDC_SUBSCRIBE.PURGE_WINDOW</code> procedure, logically removes change rows from a subscription window, but does not physically remove rows from the underlying change tables.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS65544" class="refsect2"><a id="i85360"></a>
<hr />
<h3 class="refsect2">PURGE_CHANGE_TABLE <a id="sthref1529"></a>Procedure</h3>
<p>This procedure removes unneeded rows from the named change table. This procedure allows a finer granularity purge operation than the basic <code>PURGE</code> procedure or the <code>PURGE_CHANGE_SET</code> procedure.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1530"></a>Syntax</p>
<pre>
DBMS_CDC_PUBLISH.PURGE_CHANGE_TABLE(
     owner               IN VARCHAR2,
     change_table_name   IN VARCHAR2,
     force               IN CHAR DEFAULT 'Y',
     purge_date          IN DATE DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1531"></a>Parameters</p>
<div id="ARPLS65545" class="tblformal">
<p class="titleintable"><a id="sthref1532"></a><a id="sthref1533"></a>Table 33-29 PURGE_CHANGE_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="PURGE_CHANGE_TABLE Procedure Parameters" summary="This table describes the parameters of the DBMS_CDC_PUBLISH.PURGE_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t47">Parameter</th>
<th class="cellalignment1227" id="r1c2-t47">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t47" headers="r1c1-t47">
<p><code>owner</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t47 r1c2-t47">
<p>Owner of the named change table.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t47" headers="r1c1-t47">
<p><code>change_table_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t47 r1c2-t47">
<p>Name of an existing change table. Change table names follow the Oracle schema object naming rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t47" headers="r1c1-t47">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t47 r1c2-t47">
<p>If <code>'Y'</code>, try to use partition split/drop, but if the required lock cannot be acquired, use a delete statement to purge. If <code>'N'</code>, only use split/drop partition statements to purge. If a lock cannot be acquired, then no data will be purged.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t47" headers="r1c1-t47">
<p><code>purge_date</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t47 r1c2-t47">
<p>All records that have a <code>commit_timestamp</code> of less than or equal to this date will be purged.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1534"></a>Exceptions</p>
<div id="ARPLS65546" class="tblformal">
<p class="titleintable"><a id="sthref1535"></a><a id="sthref1536"></a>Table 33-30 PURGE_CHANGE_TABLE Procedure Exceptions</p>
<table class="cellalignment1229" title="PURGE_CHANGE_TABLE Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_CDC_PUBLISH.PURGE_CHANGE_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t48">Exception</th>
<th class="cellalignment1227" id="r1c2-t48">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t48" headers="r1c1-t48">
<p><code>ORA-31421</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t48 r1c2-t48">
<p>Change table does not exist</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1537"></a>Usage Notes</p>
<ul>
<li>
<p>The publisher can use this procedure for asynchronous and synchronous Change Data Capture.</p>
</li>
<li>
<p>The publisher can run this procedure manually from the command line or in a script to purge unneeded rows from a specified change table.</p>
</li>
<li>
<p>Note that the <code>DBMS_CDC_PUBLISH.PURGE_CHANGE_TABLE</code> procedure (used by the publisher) is distinct from the <code>DBMS_CDC_SUBSCRIBE.PURGE_WINDOW</code> procedure (used by subscribers). A call to the <code>DBMS_CDC_PUBLISH.PURGE_CHANGE_TABLE</code> procedure physically removes unneeded rows from the specified change table. A call to the <code>DBMS_CDC_SUBSCRIBE.PURGE_WINDOW</code> procedure, logically removes change rows from a subscription window, but does not physically remove rows from the underlying change tables.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_cap_a.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_cdcsub.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
