<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_HPROF</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:14Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_hm.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_hsparallel.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">77/265</span> <!-- End Header -->
<div id="ARPLS146" class="chapter"><a id="BABFDCAA"></a>
<h1 class="chapter"><span class="secnum">73</span> DBMS_HPROF</h1>
<p>The <a id="sthref4670"></a><code>DBMS_HPROF</code> package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Advanced Application Developer's Guide</span> for more information about the <a class="olink ADFNS023" href="../../appdev.112/e41502/adfns_profiler.htm#ADFNS023">"PL/SQL Hierarchical Profiler"</a></div>
<p>This chapter contains the following topic:</p>
<ul>
<li>
<p><a href="#BABHFAJC">Summary of DBMS_HPROF Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABHFAJC"></a>
<hr />
<div id="ARPLS66425" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_HPROF Subprograms</h2>
<p>This table list the package subprograms in alphabetical order.</p>
<div id="ARPLS66426" class="tblformal">
<p class="titleintable"><a id="sthref4671"></a><a id="sthref4672"></a>Table 73-1 DBMS_HPROF Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_HPROF Package Subprograms" summary="This table lists the DBMS_HPROF subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t3">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t3" headers="r1c1-t3">
<p><a href="#BABECDHB">ANALYZE Function</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c2-t3">
<p>Analyzes the raw profiler output and produces hierarchical profiler information in database tables</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t3" headers="r1c1-t3">
<p><a href="#BABBJGHB">START_PROFILING Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c2-t3">
<p>Starts hierarchical profiler data collection in the user's session</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t3" headers="r1c1-t3">
<p><a href="#BABHDEHJ">STOP_PROFILING Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c2-t3">
<p>Stops profiler data collection in the user's session.s</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS66427" class="refsect2"><a id="BABECDHB"></a>
<hr />
<h3 class="refsect2"><a id="sthref4673"></a>ANALYZE Function</h3>
<p>This function analyzes the raw profiler output and produces hierarchical profiler information in database tables.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4674"></a>Syntax</p>
<pre>
DBMS_HPROF.ANALYZE (
   location         VARCHAR2,
   filename         VARCHAR2,
   summary_mode     BOOLEAN     DEFAULT FALSE,
   trace            VARCHAR2    DEFAULT NULL,
   skip             PLS_INTEGER DEFAULT 0,
   collect          PLS_INTEGER DEFAULT NULL,
   run_comment      VARCHAR2    DEFAULT NULL)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4675"></a>Parameters</p>
<div id="ARPLS66428" class="tblformal">
<p class="titleintable"><a id="sthref4676"></a><a id="sthref4677"></a>Table 73-2 ANALYZE Function Parameters</p>
<table class="cellalignment1229" title="ANALYZE Function Parameters" summary="This table describes the parameters of DBMS_HPROF.ANALYZE." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Parameter</th>
<th class="cellalignment1227" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>location</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p>Name of a directory object. The raw profiler data file is read from the file system directory mapped to this directory object. Output files are also written to this directory.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>filename</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p>Name of the raw profiler data file to be analyzed. The file must exist in the directory specified by the <code>location</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><code>summary_mode</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p>By default (that is, when <code>summary_mode</code> is <code>FALSE</code>), the detailed analysis is done.When <code>summary_mode</code> is <code>TRUE</code>, only top-level summary information is generated into the database table.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><code>trace</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p>Analyze only the subtrees rooted at the specified trace entry. By default (when trace is <code>NULL</code>), the analysis/reporting is generated for the entire run.</p>
<p>The trace entry must be specified in a special quoted qualified format (including the schema name, module name &amp; function name) as in for example, '"<code>SCOTT</code>"."<code>PKG</code>"."<code>FOO</code>"' or '"".""."<code>__plsql_vm</code>"'. If multiple overloads exist for the specified name, all of them will be analyzed.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t4" headers="r1c1-t4">
<p><code>skip</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c2-t4">
<p>Used only when <code>trace</code> is specified.Analyze only the subtrees rooted at the specified trace, but ignore the first <code>skip</code> invocations to trace. The default value for skip is 0.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t4" headers="r1c1-t4">
<p><code>collect</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c2-t4">
<p>Used only when <code>trace</code> is specified.</p>
<p>Analyze <code>collect</code> number of invocations of traces (starting from <code>skip</code>+1'th invocation). By default only 1 invocation is collected.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t4" headers="r1c1-t4">
<p><code>run_comment</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c2-t4">
<p>User-provided comment for this run</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4678"></a>Return Values</p>
<p>A unique run identifier for this run of the analyzer. This can then be used to look up the results corresponding to this run from the hierarchical profiler tables.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4679"></a>Usage Notes</p>
<ul>
<li>
<p>Use the <code>dbmshptab</code>.<code>sql</code> script located in the <code>rdbms</code>/<code>admin</code> directory to create the hierarchical profiler database tables and other data structures required for persistently storing the results of analyzing the raw profiler data.</p>
</li>
<li>
<p>Running <code>dbmshptab</code>.<code>sql</code> drops the any previously created hierarchical profiler tables.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4680"></a>Examples</p>
<p>The following snippet installs the hierarchical profiler tables in HR schema.</p>
<pre>
connect HR/HR;
@?/rdbms/admin/dbmshptab.sql
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS66429" class="refsect2"><a id="BABBJGHB"></a>
<hr />
<h3 class="refsect2"><a id="sthref4681"></a>START_PROFILING Procedure</h3>
<p>This procedure starts hierarchical profiler data collection in the user's session.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4682"></a>Syntax</p>
<pre>
DBMS_HPROF.START_PROFILING (
   location    VARCHAR2 DEFAULT NULL,
   filename    VARCHAR2 DEFAULT NULL,
   max_depth   PLS_INTEGER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4683"></a>Parameters</p>
<div id="ARPLS66430" class="tblformal">
<p class="titleintable"><a id="sthref4684"></a><a id="sthref4685"></a>Table 73-3 START_PROFILING Procedure Parameters</p>
<table class="cellalignment1229" title="START_PROFILING Procedure Parameters" summary="This table describes the parameters of DBMS_HPROF.START_PROFILING." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Parameter</th>
<th class="cellalignment1227" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>location</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p>Name of a directory object. The file system directory mapped to this directory object is where the raw profiler output is generated.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t5" headers="r1c1-t5">
<p><code>filename</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c2-t5">
<p>Output filename for the raw profiler data. The file is created in the directory specified by the <code>location</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t5" headers="r1c1-t5">
<p><code>max_depth</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t5 r1c2-t5">
<p>By default (that is, when <code>max_depth</code> value is <code>NULL</code>) profile information is gathered for all functions irrespective of their call depth. When a non-<code>NULL</code> value is specified for <code>max_depth</code>, the profiler collects data only for functions up to a call depth level of <code>max_depth</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4686"></a>Usage Notes</p>
<p>Even though the profiler does not individually track functions at depth greater than max_depth, the time spent in such functions is charged to the ancestor function at depth max_depth.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS66431" class="refsect2"><a id="BABHDEHJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref4687"></a>STOP_PROFILING Procedure</h3>
<p>This procedure stops profiler data collection in the user's session. This subprogram also has the side effect of flushing data collected so far in the session, and it signals the end of a run.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4688"></a>Syntax</p>
<pre>
DBMS_HPROF.STOP_PROFILING;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_hm.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_hsparallel.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
