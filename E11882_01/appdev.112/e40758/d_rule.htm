<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_RULE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:24Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_rowid.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_rule_a.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">131/265</span> <!-- End Header -->
<div id="ARPLS303" class="chapter"><a id="CHDHAHII"></a>
<h1 class="chapter"><span class="secnum">127</span> DBMS_RULE</h1>
<p><a id="sthref8004"></a><a id="sthref8005"></a>The <code>DBMS_RULE</code> package contains subprograms that enable the evaluation of a rule set for a specified event.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDJCIEE">Using DBMS_RULE</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
</ul>
</li>
<li>
<p><a href="#i996763">Summary of DBMS_RULE Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDJCIEE"></a>
<hr />
<div id="ARPLS67784" class="refsect1">
<h2 class="refsect1">Using DBMS_RULE<a id="sthref8006"></a></h2>
<p>This section contains topics which relate to using the <code>DBMS_RULE</code> package.</p>
<ul>
<li>
<p><a href="#BIBIEJCC">Overview</a></p>
</li>
<li>
<p><a href="#i999307">Security Model</a></p>
</li>
</ul>
<div id="ARPLS73181" class="refsect2"><a id="BIBIEJCC"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>This package contains subprograms that enable the evaluation of a rule set for a specified event.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="t_rule.htm#CHDHFGAC">Chapter 257, "Rule TYPEs"</a> for more information about the types used with the <code>DBMS_RULE</code> package</p>
</li>
<li>
<p><a href="d_rule_a.htm#CDEDGHHD">Chapter 128, "DBMS_RULE_ADM"</a> and <a class="olink STRMS005" href="../../server.112/e17069/strms_adrules.htm#STRMS005"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about this package and rules</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS67785" class="refsect2"><a id="i999307"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p><code>PUBLIC</code> is granted <code>EXECUTE</code> privilege on this package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG40048" href="../../network.112/e36292/authorization.htm#DBSEG40048"><span class="italic">Oracle Database Security Guide</span></a> for more information about user group <code>PUBLIC</code></div>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i996763"></a>
<hr />
<div id="ARPLS530" class="refsect1">
<h2 class="refsect1">Summary of DBMS_RULE Subprograms</h2>
<div id="ARPLS67786" class="tblformal">
<p class="titleintable"><a id="sthref8007"></a><a id="sthref8008"></a>Table 127-1 DBMS_RULE Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_RULE Package Subprograms" summary="This table lists the DBMS_RULE subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#i998673">CLOSE_ITERATOR Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p>Closes an open iterator</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#CHDBDCDA">EVALUATE Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p>Evaluates the rules in the specified rule set that use the evaluation context specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#i998761">GET_NEXT_HIT Function</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p>Returns the next rule that evaluated to <code>TRUE</code> from a true rules iterator, or returns the next rule that evaluated to <code>MAYBE</code> from a maybe rules iterator; returns <code>NULL</code> if there are no more rules that evaluated to <code>TRUE</code> or <code>MAYBE</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS517" class="refsect2"><a id="i998673"></a>
<hr />
<h3 class="refsect2">CLOSE_ITERATOR Procedure<a id="sthref8009"></a><a id="sthref8010"></a></h3>
<p>This procedure closes an open iterator.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8011"></a>Syntax</p>
<pre>
DBMS_RULE.CLOSE_ITERATOR(
  iterator  IN  BINARY_INTEGER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8012"></a>Parameter</p>
<div id="ARPLS67787" class="tblformal">
<p class="titleintable"><a id="sthref8013"></a><a id="sthref8014"></a>Table 127-2 CLOSE_ITERATOR Procedure Parameter</p>
<table class="cellalignment1229" title="CLOSE_ITERATOR Procedure Parameter" summary="This table describes Parameters used by the DBMS_RULE.CLOSE_ITERATOR subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Parameter</th>
<th class="cellalignment1227" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>iterator</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p>The iterator to be closed</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8015"></a>Usage Notes</p>
<p>This procedure requires an open iterator that was returned by an earlier call to <code>DBMS_RULE.EVALUATE</code> in the same session. The user who runs this procedure does not require any privileges on the rule set being evaluated.</p>
<p>Closing an iterator frees resources, such as memory, associated with the iterator. Therefore, Oracle recommends that you close an iterator when it is no longer needed.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a href="#CHDBDCDA">EVALUATE Procedures</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS558" class="refsect2"><a id="CHDBDCDA"></a>
<hr />
<h3 class="refsect2">EVALUATE Procedures<a id="sthref8016"></a><a id="sthref8017"></a></h3>
<p>This procedure evaluates the rules in the specified rule set that use the evaluation context specified for a specified event.</p>
<p>This procedure is overloaded. The <code>true_rules</code> and <code>maybe_rules</code> parameters are mutually exclusive with the <code>true_rules_iterator</code> and <code>maybe_rules_iterator</code> parameters. In addition, the procedure with the <code>true_rules</code> and <code>maybe_rules</code> parameters includes the <code>stop_on_first_hit</code> parameter, but the other procedure does not.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8018"></a>Syntax</p>
<pre>
DBMS_RULE.EVALUATE(
  rule_set_name        IN   VARCHAR2,
  evaluation_context   IN   VARCHAR2,
  event_context        IN   SYS.RE$NV_LIST               DEFAULT NULL,
  table_values         IN   SYS.RE$TABLE_VALUE_LIST      DEFAULT NULL,
  column_values        IN   SYS.RE$COLUMN_VALUE_LIST     DEFAULT NULL,
  variable_values      IN   SYS.RE$VARIABLE_VALUE_LIST   DEFAULT NULL,
  attribute_values     IN   SYS.RE$ATTRIBUTE_VALUE_LIST  DEFAULT NULL,
  stop_on_first_hit    IN   BOOLEAN                      DEFAULT FALSE,
  simple_rules_only    IN   BOOLEAN                      DEFAULT FALSE,
  true_rules           OUT  SYS.RE$RULE_HIT_LIST,
  maybe_rules          OUT  SYS.RE$RULE_HIT_LIST);

DBMS_RULE.EVALUATE(
  rule_set_name         IN   VARCHAR2,
  evaluation_context    IN   VARCHAR2,
  event_context         IN   SYS.RE$NV_LIST               DEFAULT NULL,
  table_values          IN   SYS.RE$TABLE_VALUE_LIST      DEFAULT NULL,
  column_values         IN   SYS.RE$COLUMN_VALUE_LIST     DEFAULT NULL,
  variable_values       IN   SYS.RE$VARIABLE_VALUE_LIST   DEFAULT NULL,
  attribute_values      IN   SYS.RE$ATTRIBUTE_VALUE_LIST  DEFAULT NULL,
  simple_rules_only     IN   BOOLEAN                      DEFAULT FALSE,
  true_rules_iterator   OUT  BINARY_INTEGER,
  maybe_rules_iterator  OUT  BINARY_INTEGER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8019"></a>Parameters</p>
<div id="ARPLS67788" class="tblformal">
<p class="titleintable"><a id="sthref8020"></a><a id="sthref8021"></a>Table 127-3 EVALUATE Procedure Parameters</p>
<table class="cellalignment1229" title="EVALUATE Procedure Parameters" summary="This table describes Parameters used by the DBMS_RULE.EVALUATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Parameter</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>rule_set_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Name of the rule set in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">rule_set_name</span></code>. For example, to evaluate all of the rules in a rule set named <code>hr_rules</code> in the <code>hr</code> schema, enter <code>hr.hr_rules</code> for this parameter. If the schema is not specified, then the schema of the current user is used.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><code>evaluation_context</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>An evaluation context name in the form <code>[</code><code><span class="codeinlineitalic">schema_name</span></code><code>.]</code><code><span class="codeinlineitalic">evaluation_context_name</span></code>. If the schema is not specified, then the name of the current user is used.</p>
<p>Only rules that use the specified evaluation context are evaluated.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><code>event_context</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>A list of name-value pairs that identify events that cause evaluation</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><code>table_values</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>Contains the data for table rows using the table aliases specified when the evaluation context was created. Each table alias in the list must be unique.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t7" headers="r1c1-t7">
<p><code>column_values</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t7 r1c2-t7">
<p>Contains the partial data for table rows. It must not contain column values for tables, whose values are already specified in <code>table_values</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t7" headers="r1c1-t7">
<p><code>variable_values</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t7 r1c2-t7">
<p>A list containing the data for variables.</p>
<p>The only way for an explicit variable value to be known is to specify its value in this list.</p>
<p>If an implicit variable value is not specified in the list, then the function used to obtain the value of the implicit variable is invoked. If an implicit variable value is specified in the list, then this value is used and the function is not invoked.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t7" headers="r1c1-t7">
<p><code>attribute_values</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t7 r1c2-t7">
<p>Contains the partial data for variables. It must not contain attribute values for variables whose values are already specified in <code>variable_values</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t7" headers="r1c1-t7">
<p><code>stop_on_first_hit</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t7 r1c2-t7">
<p>If <code>TRUE</code>, then the rules engine stops evaluation as soon as it finds a <code>TRUE</code> rule.</p>
<p>If <code>TRUE</code> and there are no <code>TRUE</code> rules, then the rules engine stops evaluation as soon as it finds a rule that may evaluate to <code>TRUE</code> given more data.</p>
<p>If <code>FALSE</code>, then the rules engine continues to evaluate rules even after it finds a <code>TRUE</code> rule.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t7" headers="r1c1-t7">
<p><code>simple_rules_only</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t7 r1c2-t7">
<p>If <code>TRUE</code>, then only those rules that are simple enough to be evaluated fast (without issuing SQL) are considered for evaluation.</p>
<p>If <code>FALSE</code>, then evaluates all rules.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t7" headers="r1c1-t7">
<p><code>true_rules</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t7 r1c2-t7">
<p>Receives the output of the <code>EVALUATE</code> procedure into a varray of <code>RE$RULE_HIT_LIST</code> type.</p>
<p>If no rules evaluate to <code>TRUE</code>, then <code>true_rules</code> is empty.</p>
<p>If at least one rule evaluates to <code>TRUE</code> and <code>stop_on_first_hit</code> is <code>TRUE</code>, then <code>true_rules</code> contains one rule that evaluates to <code>TRUE</code>.</p>
<p>If <code>stop_on_first_hit</code> is <code>FALSE</code>, then <code>true_rules</code> contains all rules that evaluate to <code>TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t7" headers="r1c1-t7">
<p><code>maybe_rules</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t7 r1c2-t7">
<p>If all rules can be evaluated completely, without requiring any additional data, then <code>maybe_rules</code> is empty.</p>
<p>If <code>stop_on_first_hit</code> is <code>TRUE</code>, then if there is at least one rule that may evaluate to <code>TRUE</code> given more data, and no rules evaluate to <code>TRUE</code>, then <code>maybe_rules</code> contains one rule that may evaluate to <code>TRUE</code>.</p>
<p>If <code>stop_on_first_hit</code> is <code>FALSE</code>, then <code>maybe_rules</code> contains all rules that may evaluate to <code>TRUE</code> given more data.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t7" headers="r1c1-t7">
<p><code>true_rules_iterator</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t7 r1c2-t7">
<p>Contains the iterator for accessing rules that are <code>TRUE</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t7" headers="r1c1-t7">
<p><code>maybe_rules_iterator</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t7 r1c2-t7">
<p>Contains the iterator for accessing rules that may be <code>TRUE</code> given additional data or the ability to issue SQL</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8022"></a>Usage Notes</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Rules in the rule set that use an evaluation context different from the one specified are not considered for evaluation.</div>
<p>The rules in the rule set are evaluated using the data specified for <code>table_values</code>, <code>column_values</code>, <code>variable_values</code>, and <code>attribute_values</code>. These values must refer to tables and variables in the specified evaluation context. Otherwise, an error is raised.</p>
<p>The caller may specify, using <code>stop_on_first_hit</code>, if evaluation must stop as soon as the first <code>TRUE</code> rule or the first <code>MAYBE</code> rule (if there are no <code>TRUE</code> rules) is found.</p>
<p>The caller may also specify, using <code>simple_rules_only</code>, if only rules that are simple enough to be evaluated fast (which means without SQL) should be considered for evaluation. This makes evaluation faster, but causes rules that cannot be evaluated without SQL to be returned as <code>MAYBE</code> rules.</p>
<p>Partial evaluation is supported. The <code>EVALUATE</code> procedure can be called with data for only some of the tables, columns, variables, or attributes. In such a case, rules that cannot be evaluated because of a lack of data are returned as <code>MAYBE</code> rules, unless they can be determined to be <code>TRUE</code> or <code>FALSE</code> based on the values of one or more simple expressions within the rule. For example, given a value of <code>1</code> for attribute <code>"a.b"</code> of variable <code>"x"</code>, a rule with the following rule condition can be returned as <code>TRUE</code>, without a value for table <code>"tab"</code>:</p>
<pre>
(:x.a.b = 1) or (tab.c &gt; 10)
</pre>
<p>The results of an evaluation are the following:</p>
<ul>
<li>
<p><code>TRUE</code> rules, which is the list of rules that evaluate to <code>TRUE</code> based on the given data. These rules are returned either in the <code>OUT</code> parameter <code>true_rules</code>, which returns all of the rules that evaluate to <code>TRUE</code>, or in the <code>OUT</code> parameter <code>true_rules_iterator</code>, which returns each rule that evaluates to <code>TRUE</code> one at a time.</p>
</li>
<li>
<p><code>MAYBE</code> rules, which is the list of rules that could not be evaluated for one of the following reasons:</p>
<ul>
<li>
<p>The rule refers to data that was unavailable. For example, a variable attribute <code>"x.a.b"</code> is specified, but no value is specified for the variable <code>"x"</code>, the attribute <code>"a"</code>, or the attribute <code>"a.b"</code>.</p>
</li>
<li>
<p>The rule is not simple enough to be evaluated fast (without SQL) and <code>simple_rules_only</code> is specified as <code>TRUE</code>, or partial data is available.</p>
</li>
</ul>
<p>Maybe rules are returned either in the <code>OUT</code> parameter <code>maybe_rules</code>, which returns all of the rules that evaluate to <code>MAYBE</code>, or in the <code>OUT</code> parameter <code>maybe_rules_iterator</code>, which returns each rule that evaluates to <code>MAYBE</code> one at a time.</p>
</li>
</ul>
<p>The caller may specify whether the procedure returns all of the rules that evaluate to <code>TRUE</code> and <code>MAYBE</code> for the event or an iterator for rules that evaluate to <code>TRUE</code> and <code>MAYBE</code>. A true rules iterator enables the client to fetch each rule that evaluates to <code>TRUE</code> one at a time, and a maybe rules iterator enables the client to fetch each rule that evaluates to <code>MAYBE</code> one at a time.</p>
<p>If you use an iterator, then you use the <code>GET_NEXT_HIT</code> function in the <code>DBMS_RULE</code> package to retrieve the next rule that evaluates to <code>TRUE</code> or <code>MAYBE</code> from an iterator. Oracle recommends that you close an iterator if it is no longer needed to free resources, such as memory, used by the iterator. An iterator can be closed in the following ways:</p>
<ul>
<li>
<p>The <code>CLOSE_ITERATOR</code> procedure in the <code>DBMS_RULE</code> package is run with the iterator specified.</p>
</li>
<li>
<p>The iterator returns <code>NULL</code> because no more rules evaluate to <code>TRUE</code> or <code>MAYBE</code>.</p>
</li>
<li>
<p>The session in which the iterator is running ends.</p>
</li>
</ul>
<p>To run the <code>DBMS_RULE.EVALUATE</code> procedure, a user must meet at least one of the following requirements:</p>
<ul>
<li>
<p>Have <code>EXECUTE_ON_RULE_SET</code> privilege on the rule set</p>
</li>
<li>
<p>Have <code>EXECUTE</code>_<code>ANY</code>_<code>RULE</code>_<code>SET</code> system privilege</p>
</li>
<li>
<p>Be the rule set owner</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The rules engine does not invoke any actions. An action context can be returned with each returned rule, but the client of the rules engine must invoke any necessary actions.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="t_rule.htm#CHDHFGAC">Chapter 257, "Rule TYPEs"</a> for more information about the types used with the <code>DBMS_RULE</code> package</p>
</li>
<li>
<p><a href="#i998761">GET_NEXT_HIT Function</a></p>
</li>
<li>
<p><a href="#i998673">CLOSE_ITERATOR Procedure</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS518" class="refsect2"><a id="i998761"></a>
<hr />
<h3 class="refsect2">GET_NEXT_HIT Function<a id="sthref8023"></a><a id="sthref8024"></a></h3>
<p>This function returns the next rule that evaluated to <code>TRUE</code> from a true rules iterator, or returns the next rule that evaluated to <code>MAYBE</code> from a maybe rules iterator. The function returns <code>NULL</code> if there are no more rules that evaluated to <code>TRUE</code> or <code>MAYBE</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8025"></a>Syntax</p>
<pre>
DBMS_RULE.GET_NEXT_HIT(
  iterator  IN  BINARY_INTEGER)
RETURN SYS.RE$RULE_HIT;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8026"></a>Parameter</p>
<div id="ARPLS67789" class="tblformal">
<p class="titleintable"><a id="sthref8027"></a><a id="sthref8028"></a>Table 127-4 GET_NEXT_HIT Function Parameter</p>
<table class="cellalignment1229" title="GET_NEXT_HIT Function Parameter" summary="This table describes Parameters used by the DBMS_RULE.GET_NEXT_HIT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Parameter</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><code>iterator</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>The iterator from which the rule that evaluated to <code>TRUE</code> or <code>MAYBE</code> is retrieved</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref8029"></a>Usage Notes</p>
<p>This procedure requires an open iterator that was returned by an earlier call to <code>DBMS_RULE.EVALUATE</code> in the same session. The user who runs this procedure does not require any privileges on the rule set being evaluated.</p>
<p>When an iterator returns <code>NULL</code>, it is closed automatically. If an open iterator is no longer needed, then use the <code>CLOSE_ITERATOR</code> procedure in the <code>DBMS_RULE</code> package to close it.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This function raises an error if the rule set being evaluated was modified after the call to the <code>DBMS_RULE.EVALUATE</code> procedure that returned the iterator. Modifications to a rule set include added rules to the rule set, changing existing rules in the rule set, dropping rules from the rule set, and dropping the rule set.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="t_rule.htm#CHDHFGAC">Chapter 257, "Rule TYPEs"</a> for more information about the types used with the <code>DBMS_RULE</code> package</p>
</li>
<li>
<p><a href="#CHDBDCDA">EVALUATE Procedures</a></p>
</li>
<li>
<p><a href="#i998673">CLOSE_ITERATOR Procedure</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_rowid.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_rule_a.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
