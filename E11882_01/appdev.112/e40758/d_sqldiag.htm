<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_SQLDIAG</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:31Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_sql.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_sqlpa.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">142/265</span> <!-- End Header -->
<div id="ARPLS203" class="chapter"><a id="CEGCHCGC"></a>
<h1 class="chapter"><span class="secnum">138</span> DBMS_SQLDIAG</h1>
<p>The <a id="sthref9343"></a>DBMS_SQLDIAG package provides an interface to the SQL Diagnosability functionality.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<span class="italic">Oracle Database Administrator's Guide</span> for more information about <a class="olink ADMIN00202" href="../../server.112/e25494/create.htm#ADMIN00202">"Managing Diagnostic Data"</a></div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CEGJGFDB">Using DBMS_SQLDIAG</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#CHDFABGJ">Summary of DBMS_SQLDIAG Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CEGJGFDB"></a>
<hr />
<div id="ARPLS68285" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_SQLDIAG</h2>
<ul>
<li>
<p><a href="#CEGHDFFJ">Overview</a></p>
</li>
<li>
<p><a href="#CEGECFDE">Constants</a></p>
</li>
<li>
<p><a href="#CEGCEJAI">Examples</a></p>
</li>
</ul>
<div id="ARPLS68286" class="refsect2"><a id="CEGHDFFJ"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>In the rare case that a SQL statement fails with a critical error, you can run the SQL Repair Advisor to try to repair the failed statement.This section covers the following topics:</p>
<ul>
<li>
<p><a href="#CEGGDBAA">About the SQL Repair Advisor</a></p>
</li>
<li>
<p><a href="#CEGFIEIF">Running the SQL Repair Advisor</a></p>
</li>
<li>
<p><a href="#CEGEACGE">Removing a SQL Patch</a></p>
</li>
</ul>
<p class="subhead2"><a id="CEGGDBAA"></a><a id="ARPLS68287"></a>About the SQL Repair Advisor</p>
<p>You run the SQL Repair Advisor after a SQL statement fails with a critical error. The advisor analyzes the statement and in many cases recommends a patch to repair the statement. If you implement the recommendation, the applied SQL patch circumvents the failure by causing the query optimizer to choose an alternate execution plan for future executions.</p>
<p class="subhead2"><a id="CEGFIEIF"></a><a id="ARPLS68288"></a>Running the SQL Repair Advisor</p>
<p>You run the SQL Repair Advisor by creating and executing a diagnostic task using the <code>CREATE_DIAGNOSIS_TASK</code> and <code>EXECUTE_DIAGNOSIS_TASK</code> respectively. The SQL Repair Advisor first reproduces the critical error and then tries to produce a workaround in the form of SQL patch.</p>
<ol>
<li>
<p><span class="bold">Identify the problem SQL statement</span></p>
<p>Consider the SQL statement that gives a critical error:</p>
<pre>
DELETE FROM t t1 WHERE t1.a = 'a' AND ROWID &lt;&gt; (SELECT MAX(ROWID) FROM t t2 WHERE t1.a= t2.a AND t1.b = t2.b AND t1.d=t2.d)
</pre>
<p>You use the SQL Repair advisor to repair this critical error.</p>
</li>
<li>
<p><span class="bold">Create a diagnosis task</span></p>
<p>Invoke <code>DBMS_SQLDIAG</code>. <code>CREATE_DIAGNOSIS_TASK</code>. You can specify an optional task name, an optional time limit for the advisor task, and problem type. In the example below, we specify the SQL text, the task name as '<code>error_task</code>' and a problem type as '<code>DBMS_SQLDIAG</code>.<code>PROBLEM_TYPE_COMPILATION_ERROR</code>'.</p>
<pre>
DECLARE
    rep_out         CLOB;
    t_id            VARCHAR2(50);
  BEGIN
    t_id := DBMS_SQLDIAG.CREATE_DIAGNOSIS_TASK( 
      sql_text =&gt; 'DELETE FROM t t1 WHERE t1.a = ''a'' AND ROWID &lt;&gt; (SELECT MAX(ROWID) FROM t t2 WHERE t1.a= t2.a AND t1.b = t2.b AND t1.d=t2.d)',
      task_name =&gt; 'error_task',
      problem_type =&gt;DBMS_SQLDIAG.PROBLEM_TYPE_COMPILATION_ERROR);
</pre></li>
<li>
<p><span class="bold">Execute the diagnosis task</span></p>
<p>To execute the workaround generation and analysis phase of the SQL Repair Advisor, you call <code>DBMS_SQLDIAG</code>.<code>EXECUTE_DIAGNOSIS_TASK</code> with the task ID returned by the <code>CREATE_DIAGNOSIS_TASK</code>. After a short delay, the SQL Repair Advisor returns. As part of its execution, the SQL Repair Advisor keeps a record of its findings which can be accessed through the reporting facilities of SQL Repair Advisor.</p>
<pre>
DBMS_SQLDIAG.EXECUTE_DIAGNOSIS_TASK (t_id);
</pre></li>
<li>
<p><span class="bold">Report the diagnosis task</span></p>
<p>The analysis of the diagnosis task is accessed through dbms_sqldiag.report_diagnosis_task. If the SQL Repair Advisor was able to find a workaround, it recommends a SQL Patch. A SQL Patch is similar to a SQL profile but unlike the SQL Profile, it is used to workaround compilation or execution errors.</p>
<pre>
rep_out := DBMS_SQLDIAG.REPORT_DIAGNOSIS_TASK (t_id, DBMS_SQLDIAG.TYPE_TEXT);
 
  DBMS_OUTPUT.PUT_LINE ('Report : ' ||  rep_out);
 
  END;
  /
</pre></li>
<li>
<p><span class="bold">Applying the patch</span></p>
<p>If a patch recommendation is present in the report, you can run the <code>ACCEPT_SQL_PATCH</code> command to accept the patch by invoking <code>DBMS_SQLDIAG</code>.<code>ACCEPT_SQL_PATCH</code>. This procedure takes the <code>task_name</code> as an argument.</p>
<pre>
EXECUTE DBMS_SQLDIAG.ACCEPT_SQL_PATCH(task_name =&gt; 'error_task', task_owner =&gt; 'SYS', replace =&gt; TRUE);
</pre></li>
<li>
<p><span class="bold">Test the patch</span></p>
<p>Now that you have accepted the patch, you can rerun the SQL statement. This time, it will not give you the critical error. If you run 'explain plan' for this statement, you will see that a SQL patch was used to generate the plan.</p>
<pre>
DELETE FROM t t1 WHERE t1.a = 'a' AND ROWID &lt;&gt; (select max(rowid) FROM t t2 WHERE t1.a= t2.a AND t1.b = t2.b AND t1.d=t2.d);
</pre></li>
</ol>
<p class="subhead2"><a id="CEGEACGE"></a><a id="ARPLS68289"></a>Removing a SQL Patch</p>
<p>In a situation where you obtained an official patch from Oracle to fix an error, or upgraded to the next patchset or release of Oracle which included the fix for the error, you call <code>DBMS_SQLDIAG</code>.<code>DROP_SQL_PATCH</code> with the patch name to drop the SQL patch. The patch name can be obtained from the explain plan section or by querying the view <code>DBA_SQL_PATCHES</code>.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68290" class="refsect2"><a id="CEGECFDE"></a>
<hr />
<h3 class="refsect2">Constants</h3>
<p>The DBMS_SQLDIAG package uses the constants shown in the following tables:</p>
<ul>
<li>
<p><a href="#CEGHDDFE">Table 138-1, "DBMS_SQLDIAG Constants - SQLDIAG Advisor Name"</a> describes the name of SQL repair advisor as seen by the advisor framework</p>
</li>
<li>
<p><a href="#CEGEEIAJ">Table 138-2, "DBMS_SQLDIAG Constants - SQLDIAG Advisor Task Scope Parameter Values"</a> describes SQLDIAG advisor task scope parameter values</p>
</li>
<li>
<p><a href="#CEGBBJBJ">Table 138-3, "DBMS_SQLDIAG Constants - SQLDIAG Advisor time_limit Constants"</a> describes SQLDIAG advisor <code>time_limit</code> constants</p>
</li>
<li>
<p><a href="#CEGIIAJH">Table 138-4, "DBMS_SQLDIAG Constants - Report Type (possible values) Constants"</a> describes possible formats for a report</p>
</li>
<li>
<p><a href="#CEGHJADG">Table 138-5, "DBMS_SQLDIAG Constants - Report Level (possible values) Constants"</a> describes possible levels of detail in the report</p>
</li>
<li>
<p><a href="#CEGDCJGI">Table 138-6, "DBMS_SQLDIAG Constants - Report Section (possible values) Constants"</a> describes possible report sections (comma delimited)</p>
</li>
<li>
<p><a href="#CEGJCDDJ">Table 138-7, "DBMS_SQLDIAG Constants - Problem Type Constants"</a> describes possible values for the <code>problem_type</code> parameter of the <a href="#CHDHFBAA">CREATE_DIAGNOSIS_TASK Functions</a></p>
</li>
<li>
<p><a href="#CEGBICBE">Table 138-8, "DBMS_SQLDIAG Constants - Findings Filter Constants"</a> describes possible values for the <code>_sql_findings_mode</code> parameter</p>
</li>
</ul>
<div id="ARPLS68291" class="tblformal">
<p class="titleintable"><a id="sthref9344"></a><a id="CEGHDDFE"></a>Table 138-1 DBMS_SQLDIAG Constants - SQLDIAG Advisor Name</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - SQLDIAG Advisor Name" summary="This table describes Constants (Sqldiag Advisor Names) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t3">Constant</th>
<th class="cellalignment1227" id="r1c2-t3">Type</th>
<th class="cellalignment1227" id="r1c3-t3">Value</th>
<th class="cellalignment1227" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t3" headers="r1c1-t3">
<p><code>ADV_SQL_DIAG_NAME</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c2-t3">
<p><code>VARCHAR2</code>(18)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c3-t3">
<p>'SQL Repair Advisor'</p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c4-t3">
<p>Name of SQL repair advisor as seen by the advisor framework</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68292" class="tblformal">
<p class="titleintable"><a id="sthref9345"></a><a id="CEGEEIAJ"></a>Table 138-2 DBMS_SQLDIAG Constants - SQLDIAG Advisor Task Scope Parameter Values</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - SQLDIAG Advisor Task Scope Parameter Values" summary="This table describes Constants (SQLDIAG Advisor Task Scope Parameter Values) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Constant</th>
<th class="cellalignment1227" id="r1c2-t4">Type</th>
<th class="cellalignment1227" id="r1c3-t4">Value</th>
<th class="cellalignment1227" id="r1c4-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>SCOPE_COMPREHENSIVE</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p><code>VARCHAR2</code>(13)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c3-t4">
<p>'<code>COMPREHENSIVE</code>'</p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c4-t4">
<p>Detailed analysis of the problem which may take more time to execute</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>SCOPE_LIMITED</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p><code>VARCHAR2</code>(7)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c3-t4">
<p>'<code>LIMITED</code>'</p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c4-t4">
<p>Brief analysis of the problem</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68293" class="tblformal">
<p class="titleintable"><a id="sthref9346"></a><a id="CEGBBJBJ"></a>Table 138-3 DBMS_SQLDIAG Constants - SQLDIAG Advisor time_limit Constants</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - SQLDIAG Advisor time_limit Constants" summary="This table describes Constants (SQLDIAG Advisor time_limit Constants) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Constant</th>
<th class="cellalignment1227" id="r1c2-t5">Type</th>
<th class="cellalignment1227" id="r1c3-t5">Value</th>
<th class="cellalignment1227" id="r1c4-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>TIME_LIMIT_DEFAULT</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c3-t5">
<p>1800</p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c4-t5">
<p>Default time limit for analysis of the problem</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68294" class="tblformal">
<p class="titleintable"><a id="sthref9347"></a><a id="CEGIIAJH"></a>Table 138-4 DBMS_SQLDIAG Constants - Report Type (possible values) Constants</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - Report Type (possible values) Constants" summary="This table describes Constants (Report Type (possible values) Constants) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Constant</th>
<th class="cellalignment1227" id="r1c2-t6">Type</th>
<th class="cellalignment1227" id="r1c3-t6">Value</th>
<th class="cellalignment1227" id="r1c4-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><code>TYPE_HTML</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p><code>VARCHAR2</code>(4)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c3-t6">
<p>'HTML'</p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c4-t6">
<p>Report from the <a href="#CHDJDIGI">REPORT_DIAGNOSIS_TASK Function</a> in HTML form</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><code>TYPE_TEXT</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p><code>VARCHAR2</code>(4)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c3-t6">
<p>'TEXT'</p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c4-t6">
<p>Report from the <a href="#CHDJDIGI">REPORT_DIAGNOSIS_TASK Function</a> in text form</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><code>TYPE_XML</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p><code>VARCHAR2</code>(3)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c3-t6">
<p>'XML'</p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c4-t6">
<p>Report from the <a href="#CHDJDIGI">REPORT_DIAGNOSIS_TASK Function</a> in XML form</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68295" class="tblformal">
<p class="titleintable"><a id="sthref9348"></a><a id="CEGHJADG"></a>Table 138-5 DBMS_SQLDIAG Constants - Report Level (possible values) Constants</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - Report Level (possible values) Constants" summary="This table describes Constants (Report Level (possible values) Constants) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Constant</th>
<th class="cellalignment1227" id="r1c2-t7">Type</th>
<th class="cellalignment1227" id="r1c3-t7">Value</th>
<th class="cellalignment1227" id="r1c4-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>LEVEL_ALL</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p><code>VARCHAR2</code>(3)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c3-t7">
<p>'ALL'</p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c4-t7">
<p>Complete report including annotations about statements skipped over</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><code>LEVEL_BASIC</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p><code>VARCHAR2</code>(5)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c3-t7">
<p>'BASIC'</p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c4-t7">
<p>Shows information about every statement analyzed, including recommendations not implemented</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><code>LEVEL_TYPICAL</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p><code>VARCHAR2</code>(7)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c3-t7">
<p>'TYPICAL'</p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c4-t7">
<p>Simple report shows only information about the actions taken by the advisor.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68296" class="tblformal">
<p class="titleintable"><a id="sthref9349"></a><a id="CEGDCJGI"></a>Table 138-6 DBMS_SQLDIAG Constants - Report Section (possible values) Constants</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - Report Section (possible values) Constants" summary="This table describes Constants (Report Section (possible values) Constants) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Constant</th>
<th class="cellalignment1227" id="r1c2-t8">Type</th>
<th class="cellalignment1227" id="r1c3-t8">Value</th>
<th class="cellalignment1227" id="r1c4-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>SECTION_ALL</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p><code>VARCHAR2</code>(3)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c3-t8">
<p>'ALL'</p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c4-t8">
<p>All statements</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t8" headers="r1c1-t8">
<p><code>SECTION_ERRORS</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c2-t8">
<p><code>VARCHAR2</code>(6)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c3-t8">
<p>'ERRORS'</p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c4-t8">
<p>Statements with errors</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t8" headers="r1c1-t8">
<p><code>SECTION_FINDINGS</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t8 r1c2-t8">
<p><code>VARCHAR2</code>(8)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t8 r1c3-t8">
<p>'FINDINGS'</p>
</td>
<td class="cellalignment1228" headers="r4c1-t8 r1c4-t8">
<p>Tuning findings</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t8" headers="r1c1-t8">
<p><code>SECTION_INFORMATION</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t8 r1c2-t8">
<p><code>VARCHAR2</code>(11)</p>
</td>
<td class="cellalignment1228" headers="r5c1-t8 r1c3-t8">
<p>'INFORMATION'</p>
</td>
<td class="cellalignment1228" headers="r5c1-t8 r1c4-t8">
<p>General information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t8" headers="r1c1-t8">
<p><code>SECTION_PLANS</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t8 r1c2-t8">
<p><code>VARCHAR2</code>(5)</p>
</td>
<td class="cellalignment1228" headers="r6c1-t8 r1c3-t8">
<p>'PLANS'</p>
</td>
<td class="cellalignment1228" headers="r6c1-t8 r1c4-t8">
<p>Explain plans</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t8" headers="r1c1-t8">
<p><code>SECTION_SUMMARY</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t8 r1c2-t8">
<p><code>VARCHAR2</code>(7)</p>
</td>
<td class="cellalignment1228" headers="r7c1-t8 r1c3-t8">
<p>'SUMMARY'</p>
</td>
<td class="cellalignment1228" headers="r7c1-t8 r1c4-t8">
<p>Summary information</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68297" class="tblformal">
<p class="titleintable"><a id="sthref9350"></a><a id="CEGJCDDJ"></a>Table 138-7 DBMS_SQLDIAG Constants - Problem Type Constants</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - Problem Type Constants" summary="This table describes Constants (Problem Type Constants) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Constant</th>
<th class="cellalignment1227" id="r1c2-t9">Type</th>
<th class="cellalignment1227" id="r1c3-t9">Value</th>
<th class="cellalignment1227" id="r1c4-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><code>PROBLEM_TYPE_PERFORMANCE</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c3-t9">
<p>1</p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c4-t9">
<p>User suspects this is a performance problem</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t9" headers="r1c1-t9">
<p><code>PROBLEM_TYPE_WRONG_RESULTS</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c2-t9">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c3-t9">
<p>2</p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c4-t9">
<p>User suspects the query is giving inconsistent results</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t9" headers="r1c1-t9">
<p><code>PROBLEM_TYPE_COMPILATION_ERROR</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t9 r1c2-t9">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t9 r1c3-t9">
<p>3</p>
</td>
<td class="cellalignment1228" headers="r4c1-t9 r1c4-t9">
<p>User sees a crash in compilation</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t9" headers="r1c1-t9">
<p><code>PROBLEM_TYPE_EXECUTION_ERROR</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t9 r1c2-t9">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t9 r1c3-t9">
<p>4</p>
</td>
<td class="cellalignment1228" headers="r5c1-t9 r1c4-t9">
<p>User sees a crash in execution</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t9" headers="r1c1-t9">
<p><code>PROBLEM_TYPE_ALT_PLAN_GEN</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t9 r1c2-t9">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t9 r1c3-t9">
<p>5</p>
</td>
<td class="cellalignment1228" headers="r6c1-t9 r1c4-t9">
<p>User to explore all alternative plans</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68298" class="tblformal">
<p class="titleintable"><a id="sthref9351"></a><a id="CEGBICBE"></a>Table 138-8 DBMS_SQLDIAG Constants - Findings Filter Constants</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Constants - Findings Filter Constants" summary="This table describes Constants (Findings Filter Constants) used by DBMS_SQLDIAG subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Constant</th>
<th class="cellalignment1227" id="r1c2-t10">Type</th>
<th class="cellalignment1227" id="r1c3-t10">Value</th>
<th class="cellalignment1227" id="r1c4-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_ALL</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c3-t10">
<p>1</p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c4-t10">
<p>Show all possible findings</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_VALIDATION</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c3-t10">
<p>2</p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c4-t10">
<p>Show status of validation rules over structures</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_FEATURES</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c3-t10">
<p>3</p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c4-t10">
<p>Show only features used by the query</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_FILTER_PLANS</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c3-t10">
<p>4</p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c4-t10">
<p>Show the alternative plans generated by the advisor</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_CR_DIFF</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c3-t10">
<p>5</p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c4-t10">
<p>Show difference between two plans</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_MASK_VARIANT</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c3-t10">
<p>6</p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c4-t10">
<p>Mask info for testing</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_OBJ_FEATURES</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c3-t10">
<p>7</p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c4-t10">
<p>Show features usage history</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t10" headers="r1c1-t10">
<p><code>SQLDIAG_FINDINGS_BASIC_INFO</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t10 r1c2-t10">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t10 r1c3-t10">
<p>8</p>
</td>
<td class="cellalignment1228" headers="r9c1-t10 r1c4-t10">
<p>Show the alternative plans generated by the advisor</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68299" class="refsect2"><a id="CEGCEJAI"></a>
<hr />
<h3 class="refsect2">Examples</h3>
<p class="subhead2"><a id="ARPLS68300"></a>Patch Pack / Unpack</p>
<p>Patches can be exported out of one system and imported into another by means of a staging table, provided by subprograms in this package. Like with SQL diagnosis sets, the operation of inserting into the staging table is called a "pack", and the operation of creating patches from staging table data is termed the "unpack".</p>
<p>DBAs should perform a pack/unpack as follows:</p>
<ol>
<li>
<p>Create a staging table owned by user '<code>SH</code>' through a call to <code>CREATE_STGTAB_SQLPATCH:</code></p>
<pre>
EXEC DBMS_SQLDIAG.CREATE_STGTAB_SQLPATCH(
    table_name          =&gt;  'STAGING_TABLE',
    schema_name         =&gt;  'SH'); 
</pre></li>
<li>
<p>Call <code>PACK_STGTAB_SQLPATCH</code> one or more times to write SQL patch data into the staging table. In this case, copy data for all SQL patches in the DEFAULT category into a staging table owned by the current schema owner:</p>
<pre>
EXEC DBMS_SQLDIAG.PACK_STGTAB_SQLPATCH(
    staging_table_name  =&gt;  'STAGING_TABLE'); 
</pre></li>
<li>
<p>In this case, only a single SQL patch <code>SP_FIND_EMPLOYEE</code> is copied into a staging table owned by the current schema owner:</p>
<pre>
EXEC DBMS_SQLDIAG.PACK_STGTAB_SQLPATCH(
    patch_name          =&gt;  'SP_FIND_EMPLOYEE',
    staging_table_name  =&gt;  'STAGING_TABLE'); 
</pre>
<p>The staging table can then be moved to another system using either datapump, import/export commands or through a databaselink.</p>
</li>
<li>
<p>Call <code>UNPACK_STGTAB_SQLPATCH</code> to create SQL patches on the new system from the patch data in the staging table. In this case, change the name in the data for the <code>SP_FIND_EMPLOYEE</code> patch stored in the staging table to '<code>SP_FIND_EMP_PROD</code>':</p>
<pre>
exec dbms_sqldiag.remap_stgtab_sqlpatch(
   old_patch_name      =&gt;  'SP_FIND_EMPLOYEE',
   new_patch_name      =&gt;  'SP_FIND_EMP_PROD', 
</pre></li>
</ol>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CHDFABGJ"></a>
<hr />
<div id="ARPLS68301" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_SQLDIAG Subprograms</h2>
<div id="ARPLS68302" class="tblformal">
<p class="titleintable"><a id="sthref9352"></a><a id="sthref9353"></a>Table 138-9 DBMS_SQLDIAG Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_SQLDIAG Package Subprograms" summary="This table lists the DBMS_RESOURCE_MANAGER subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><a href="#CEGBDHEJ">ACCEPT_SQL_PATCH Function &amp; Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>Accepts a recommended SQL patch as recommended by the specified SQL diagnosis task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t11" headers="r1c1-t11">
<p><a href="#CEGFAFII">ALTER_SQL_PATCH Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c2-t11">
<p>Alters specific attributes of an existing SQL patch object</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t11" headers="r1c1-t11">
<p><a href="#CHDFJBAI">CANCEL_DIAGNOSIS_TASK Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t11 r1c2-t11">
<p>Cancels a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t11" headers="r1c1-t11">
<p><a href="#CHDHFBAA">CREATE_DIAGNOSIS_TASK Functions</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t11 r1c2-t11">
<p>Creates a diagnostic task in order to diagnose a single SQL statement</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t11" headers="r1c1-t11">
<p><a href="#CEGBBDBF">CREATE_STGTAB_SQLPATCH Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t11 r1c2-t11">
<p>Creates the staging table used for transporting SQL patches from one system to another</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t11" headers="r1c1-t11">
<p><a href="#CHDBIECH">DROP_DIAGNOSIS_TASK Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t11 r1c2-t11">
<p>Drops a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t11" headers="r1c1-t11">
<p><a href="#CEGDJEEI">DROP_SQL_PATCH Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t11 r1c2-t11">
<p>Drops the named SQL patch from the database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t11" headers="r1c1-t11">
<p><a href="#CHDJEJDH">EXECUTE_DIAGNOSIS_TASK Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t11 r1c2-t11">
<p>Executes a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t11" headers="r1c1-t11">
<p><a href="#CHDFBAFB">EXPLAIN_SQL_TESTCASE Function</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t11 r1c2-t11">
<p>Explains a SQL test case</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t11" headers="r1c1-t11">
<p><a href="#CHDJEHIC">EXPORT_SQL_TESTCASE Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t11 r1c2-t11">
<p>Exports a SQL test case to a directory</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t11" headers="r1c1-t11">
<p><a href="#CEGEEAAG">EXPORT_SQL_TESTCASE_DIR_BY_INC Function</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t11 r1c2-t11">
<p>Generates a SQL Test Case corresponding to the incident ID passed as an argument.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t11" headers="r1c1-t11">
<p><a href="#CEGDACIA">EXPORT_SQL_TESTCASE_DIR_BY_TXT Function</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t11 r1c2-t11">
<p>Generates a SQL Test Case corresponding to the SQL passed as an argument</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t11" headers="r1c1-t11">
<p><a href="#CHDCHFHC">GET_FIX_CONTROL Function</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t11 r1c2-t11">
<p>Returns the value of fix control for a given bug number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t11" headers="r1c1-t11">
<p><a href="#CEGBACCC">GET_SQL Function</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t11 r1c2-t11">
<p>Imports a SQL test case</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t11" headers="r1c1-t11">
<p><a href="#CEGEEHFF">IMPORT_SQL_TESTCASE Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r16c1-t11 r1c2-t11">
<p>Imports a SQL test case into a schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t11" headers="r1c1-t11">
<p><a href="#CHDIEJDC">INCIDENTID_2_SQL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r17c1-t11 r1c2-t11">
<p>Initializes a <code>sql_setrow</code> from an incident ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t11" headers="r1c1-t11">
<p><a href="#CHDBCIFC">INTERRUPT_DIAGNOSIS_TASK Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r18c1-t11 r1c2-t11">
<p>Interrupts a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t11" headers="r1c1-t11">
<p><a href="#CEGHJHJE">LOAD_SQLSET_FROM_TCB Function</a></p>
</td>
<td class="cellalignment1228" headers="r19c1-t11 r1c2-t11">
<p>Loads a <code>SQLSET</code> from Test Case Builder (TCB) file</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t11" headers="r1c1-t11">
<p><a href="#CEGBIFAH">PACK_STGTAB_SQLPATCH Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r20c1-t11 r1c2-t11">
<p>SQL patches into the staging table created by the <a href="#CEGBBDBF">CREATE_STGTAB_SQLPATCH Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r21c1-t11" headers="r1c1-t11">
<p><a href="#CHDJDIGI">REPORT_DIAGNOSIS_TASK Function</a></p>
</td>
<td class="cellalignment1228" headers="r21c1-t11 r1c2-t11">
<p>Reports on a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r22c1-t11" headers="r1c1-t11">
<p><a href="#CHDJCDHG">RESET_DIAGNOSIS_TASK Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r22c1-t11 r1c2-t11">
<p>Resets a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r23c1-t11" headers="r1c1-t11">
<p><a href="#CEGBGGDG">RESUME_DIAGNOSIS_TASK Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r23c1-t11 r1c2-t11">
<p>Resumes a diagnostic task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r24c1-t11" headers="r1c1-t11">
<p><a href="#CHDFGDDF">SET_DIAGNOSIS_TASK_PARAMETER Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r24c1-t11 r1c2-t11">
<p>Sets a diagnosis task parameter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r25c1-t11" headers="r1c1-t11">
<p><a href="#CEGCJDBB">UNPACK_STGTAB_SQLPATCH Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r25c1-t11 r1c2-t11">
<p>Unpacks from the staging table populated by a call to the <a href="#CEGBIFAH">PACK_STGTAB_SQLPATCH Procedure</a>, using the patch data stored in the staging table to create patches on this system</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68303" class="refsect2"><a id="CEGBDHEJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref9354"></a>ACCEPT_SQL_PATCH Function &amp; Procedure</h3>
<p>This procedure accepts a recommended SQL patch as recommended by the specified SQL diagnosis task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9355"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.ACCEPT_SQL_PATCH (
   task_name      IN  VARCHAR2,
   object_id      IN  NUMBER := NULL,
   name           IN  VARCHAR2 := NULL,
   description    IN  VARCHAR2 := NULL,
   category       IN  VARCHAR2 := NULL,
   task_owner     IN  VARCHAR2 := NULL,
   replace        IN  BOOLEAN := FALSE,
   force_match    IN  BOOLEAN := FALSE)
 RETURN VARCHAR2;
</pre>
<pre>
DBMS_SQLDIAG.ACCEPT_SQL_PATCH (
   task_name      IN  VARCHAR2,
   object_id      IN  NUMBER := NULL,
   name           IN  VARCHAR2 := NULL,
   description    IN  VARCHAR2 := NULL,
   category       IN  VARCHAR2 := NULL,
   task_owner     IN  VARCHAR2 := NULL,
   replace        IN  BOOLEAN := FALSE,
   force_match    IN  BOOLEAN := FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9356"></a>Parameters</p>
<div id="ARPLS68304" class="tblformal">
<p class="titleintable"><a id="sthref9357"></a><a id="sthref9358"></a>Table 138-10 ACCEPT_SQL_PATCH Function &amp; Procedure Parameters</p>
<table class="cellalignment1229" title="ACCEPT_SQL_PATCH Function &amp; Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.ACCEPT_SQL_PATCH subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>Name of the SQL diagnosis task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>object_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>Identifier of the advisor framework object representing the SQL statement associated to the diagnosis task</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t12" headers="r1c1-t12">
<p><code>name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t12 r1c2-t12">
<p>Name of the patch. It cannot contain double quotation marks. The name is case sensitive. If not specified, the system will generate a unique name for the SQL patch.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t12" headers="r1c1-t12">
<p><code>description</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t12 r1c2-t12">
<p>User specified string describing the purpose of this SQL patch. Maximum size of description is 500.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t12" headers="r1c1-t12">
<p><code>category</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t12 r1c2-t12">
<p>Category name which must match the value of the <code>SQLDIAGNOSE_CATEGORY</code> parameter in a session for the session to use this patch. It defaults to the value <code>DEFAULT</code>. This is also the default of the <code>SQLDIAGNOSE_CATEGORY</code> parameter. The category must be a valid Oracle identifier. The category name specified is always converted to upper case. The combination of the normalized SQL text and category name create a unique key for a patch. An accept will fail if this combination is duplicated.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t12" headers="r1c1-t12">
<p>task_owner</p>
</td>
<td class="cellalignment1228" headers="r7c1-t12 r1c2-t12">
<p>Owner of the diagnosis task. This is an optional parameter that has to be specified to accept a SQL Patch associated to a diagnosis task owned by another user. The current user is the default value.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t12" headers="r1c1-t12">
<p><code>replace</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t12 r1c2-t12">
<p>If the patch already exists, it will be replaced if this argument is <code>TRUE</code>. It is an error to pass a name that is already being used for another signature/category pair, even with replace set to <code>TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t12" headers="r1c1-t12">
<p><code>force_match</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t12 r1c2-t12">
<p>If <code>TRUE</code> this causes SQL Patches to target all SQL statements which have the same text after normalizing all literal values into bind variables. (Note that if a combination of literal values and bind values is used in a SQL statement, no bind transformation occurs.) This is analogous to the matching algorithm used by the <code>FORCE</code> option of the <code>CURSOR_SHARING</code> parameter. If <code>FALSE</code>, literals are not transformed. This is analogous to the matching algorithm used by the <code>EXACT</code> option of the <code>CURSOR_SHARING</code> parameter.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9359"></a>Return Values</p>
<p>Name of the SQL patch</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9360"></a>Usage Notes</p>
<p>Requires <code>CREATE</code> <code>ANY</code> <code>SQL</code> <code>PROFILE</code> privilege</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68305" class="refsect2"><a id="CEGFAFII"></a>
<hr />
<h3 class="refsect2"><a id="sthref9361"></a>ALTER_SQL_PATCH Procedure</h3>
<p>This procedure alters specific attributes of an existing SQL patch object.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9362"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.ALTER_SQL_PATCH (
   name            IN  VARCHAR2,
   attribute_name  IN  VARCHAR2,
   value           IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9363"></a>Parameters</p>
<div id="ARPLS68306" class="tblformal">
<p class="titleintable"><a id="sthref9364"></a><a id="sthref9365"></a>Table 138-11 ALTER_SQL_PATCH Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_SQL_PATCH Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.ALTER_SQL_PATCH subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t13">Parameter</th>
<th class="cellalignment1227" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t13" headers="r1c1-t13">
<p><code>name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c2-t13">
<p>Name of SQL patch to alter.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t13" headers="r1c1-t13">
<p><code>attribute_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t13 r1c2-t13">
<p>Name of SQL patch to alter. Possible values:</p>
<ul>
<li>
<p><code>STATUS</code> -&gt; can be set to <code>ENABLED</code> or <code>DISABLED</code></p>
</li>
<li>
<p><code>NAME</code> -&gt; can be reset to a valid name (must be a valid Oracle identifier and must be unique).</p>
</li>
<li>
<p><code>DESCRIPTION</code> -&gt; can be set to any string of size no more than 500</p>
</li>
<li>
<p><code>CATEGORY</code> -&gt; can be reset to a valid category name (must be valid Oracle identifier and must be unique when combined with normalized SQL text)</p>
</li>
</ul>
<p>This parameter is mandatory and is case sensitive.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t13" headers="r1c1-t13">
<p><code>value</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t13 r1c2-t13">
<p>New value of the attribute. See <code>attribute_name</code> for valid attribute values. This parameter is mandatory.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9366"></a>Usage Notes</p>
<p>Requires <code>ALTER</code> <code>ANY</code> <code>SQL</code> <code>PATCH</code> privilege</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68307" class="refsect2"><a id="CHDFJBAI"></a>
<hr />
<h3 class="refsect2"><a id="sthref9367"></a>CANCEL_DIAGNOSIS_TASK Procedure</h3>
<p>This procedure cancels a diagnostic task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9368"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.CANCEL_DIAGNOSIS_TASK (
    taskname        IN   VARCHAR2); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9369"></a>Parameters</p>
<div id="ARPLS68308" class="tblformal">
<p class="titleintable"><a id="sthref9370"></a><a id="sthref9371"></a>Table 138-12 CANCEL_DIAGNOSIS_TASK Procedure Parameters</p>
<table class="cellalignment1229" title="CANCEL_DIAGNOSIS_TASK Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.CANCEL_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>Name of task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68309" class="refsect2"><a id="CHDHFBAA"></a>
<hr />
<h3 class="refsect2"><a id="sthref9372"></a>CREATE_DIAGNOSIS_TASK Functions</h3>
<p>This function creates a diagnostic task in order to diagnose a single SQL statement. It returns a SQL diagnosis task unique name</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9373"></a>Syntax</p>
<p>Prepares the diagnosis of a single statement given its text:</p>
<pre>
DBMS_SQLDIAG.CREATE_DIAGNOSIS_TASK (
    sql_text           IN   CLOB,
    bind_list          IN   sql_binds := NULL,
    user_name          IN   VARCHAR2  := NULL,
    scope              IN   VARCHAR2  := SCOPE_COMPREHENSIVE,
    time_limit         IN   NUMBER    := TIME_LIMIT_DEFAULT,
    task_name          IN   VARCHAR2  := NULL,
    description        IN   VARCHAR2  := NULL,
    problem_type       IN   NUMBER    := PROBLEM_TYPE_PERFORMANCE)
  RETURN VARCHAR2;
</pre>
<p>Prepares the diagnosis of a single statement from the Cursor Cache given its identifier:</p>
<pre>
DBMS_SQLDIAG.CREATE_DIAGNOSIS_TASK (
    sql_id             IN   VARCHAR2,
    plan_hash_value    IN   NUMBER    := NULL,
    scope              IN   VARCHAR2  := SCOPE_COMPREHENSIVE,
    time_limit         IN   NUMBER    := TIME_LIMIT_DEFAULT,
    task_name          IN   VARCHAR2  := NULL,
    description        IN   VARCHAR2  := NULL,
    problem_type       IN   NUMBER    := PROBLEM_TYPE_PERFORMANCE)
  RETURN VARCHAR2;
</pre>
<p>Prepares the diagnosis of a Sqlset:</p>
<pre>
DBMS_SQLDIAG.CREATE_DIAGNOSIS_TASK (
    sqlset_name       IN VARCHAR2,
    basic_filter      IN VARCHAR2 :=  NULL,
    object_filter     IN VARCHAR2 :=  NULL,
    rank1             IN VARCHAR2 :=  NULL,
    rank2             IN VARCHAR2 :=  NULL,
    rank3             IN VARCHAR2 :=  NULL,
    result_percentage IN NUMBER   :=  NULL,
    result_limit      IN NUMBER   :=  NULL,
    scope             IN VARCHAR2 :=  SCOPE_COMPREHENSIVE,
    time_limit        IN NUMBER   :=  TIME_LIMIT_DEFAULT,
    task_name         IN VARCHAR2 :=  NULL,
    description       IN VARCHAR2 :=  NULL,
    plan_filter       IN VARCHAR2 :=  'MAX_ELAPSED_TIME',
    sqlset_owner      IN VARCHAR2 :=  NULL,
    problem_type      IN NUMBER   := PROBLEM_TYPE_PERFORMANCE)  RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9374"></a>Parameters</p>
<div id="ARPLS68310" class="tblformal">
<p class="titleintable"><a id="sthref9375"></a><a id="sthref9376"></a>Table 138-13 CREATE_DIAGNOSIS_TASK Function Parameters</p>
<table class="cellalignment1229" title="CREATE_DIAGNOSIS_TASK Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.CREATE_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>sql_text</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>Text of a SQL statement</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t15" headers="r1c1-t15">
<p><code>bind_list</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t15 r1c2-t15">
<p>Set of bind values</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t15" headers="r1c1-t15">
<p><code>user_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t15 r1c2-t15">
<p>Username for who the statement/sqlset will be diagnosed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t15" headers="r1c1-t15">
<p><code>scope</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t15 r1c2-t15">
<p>Diagnosis scope (limited/comprehensive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t15" headers="r1c1-t15">
<p><code>time_limit</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t15 r1c2-t15">
<p>Maximum duration in seconds for the diagnosis session</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t15" headers="r1c1-t15">
<p><code>task_name</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t15 r1c2-t15">
<p>Optional diagnosis task name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t15" headers="r1c1-t15">
<p>description</p>
</td>
<td class="cellalignment1228" headers="r8c1-t15 r1c2-t15">
<p>Maximum of 256 SQL diagnosis session description</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t15" headers="r1c1-t15">
<p><code>problem_type</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t15 r1c2-t15">
<p>Determines the goal of the task. Possible values are:</p>
<ul>
<li>
<p><code>PROBLEM_TYPE_WRONG_RESULTS</code></p>
</li>
<li>
<p><code>PROBLEM_TYPE_COMPILATION_ERROR</code></p>
</li>
<li>
<p><code>PROBLEM_TYPE_EXECUTION_ERROR</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t15" headers="r1c1-t15">
<p><code>sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t15 r1c2-t15">
<p>Identifier of the statement</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t15" headers="r1c1-t15">
<p><code>plan_hash_value</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t15 r1c2-t15">
<p>Hash value of the SQL execution plan</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t15" headers="r1c1-t15">
<p><code>sqlset_name</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t15 r1c2-t15">
<p>Sqlset name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t15" headers="r1c1-t15">
<p><code>basic_filter</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t15 r1c2-t15">
<p>SQL predicate to filter the SQL from the SQL tuning set (STS)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t15" headers="r1c1-t15">
<p><code>object_filter</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t15 r1c2-t15">
<p>Object filter</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t15" headers="r1c1-t15">
<p><code>rank(i)</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t15 r1c2-t15">
<p>Order-by clause on the selected SQL</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t15" headers="r1c1-t15">
<p><code>result_percentage</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t15 r1c2-t15">
<p>Percentage on the sum of a ranking measure</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t15" headers="r1c1-t15">
<p><code>result_limit</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t15 r1c2-t15">
<p>Top L(imit) SQL from (filtered/ranked) SQL</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t15" headers="r1c1-t15">
<p><code>plan_filter</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t15 r1c2-t15">
<p>Plan filter. It is applicable in case there are multiple plans (<code>plan_hash_value</code>). This filter allows selecting one plan (plan_hash_value) only. Possible values are:</p>
<ul>
<li>
<p><code>LAST_GENERATED</code>: plan with most recent timestamp</p>
</li>
<li>
<p><code>FIRST_GENERATED</code>: opposite to <code>LAST_GENERATED</code></p>
</li>
<li>
<p><code>LAST_LOADED</code>: plan with most recent <code>first_load_time</code> stat info</p>
</li>
<li>
<p><code>FIRST_LOADED</code>: opposite to <code>LAST_LOADED</code></p>
</li>
<li>
<p><code>MAX_ELAPSED_TIME</code>: plan with maximum elapsed time</p>
</li>
<li>
<p><code>MAX_BUFFER_GETS</code>: plan with maximum buffer gets</p>
</li>
<li>
<p><code>MAX_DISK_READS</code>: plan with maximum disk reads</p>
</li>
<li>
<p><code>MAX_DIRECT_WRITES</code>: plan with maximum direct writes</p>
</li>
<li>
<p><code>MAX_OPTIMIZER_COST</code>: plan with maximum optimum cost</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t15" headers="r1c1-t15">
<p><code>sqlset_owner</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t15 r1c2-t15">
<p>Owner of the sqlset, or null for current schema owner</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68311" class="refsect2"><a id="CEGBBDBF"></a>
<hr />
<h3 class="refsect2"><a id="sthref9377"></a>CREATE_STGTAB_SQLPATCH Procedure</h3>
<p>This procedure creates the staging table used for transporting SQL patches from one system to another.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9378"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.CREATE_STGTAB_SQLPATCH (
   table_name       IN  VARCHAR2,
   schema_name      IN  VARCHAR2 := NULL,
   tablespace_name  IN  VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9379"></a>Parameters</p>
<div id="ARPLS68312" class="tblformal">
<p class="titleintable"><a id="sthref9380"></a><a id="sthref9381"></a>Table 138-14 CREATE_STGTAB_SQLPATCH Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_STGTAB_SQLPATCH Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.CREATE_STGTAB_SQLPATCH subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Parameter</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>table_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>(Mandatory) Name of the table to create (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t16" headers="r1c1-t16">
<p><code>schema_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t16 r1c2-t16">
<p>Schema to create the table in, or <code>NULL</code> for current schema (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t16" headers="r1c1-t16">
<p><code>tablespace_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t16 r1c2-t16">
<p>Tablespace to store the staging table within, or <code>NULL</code> for current user's default tablespace (case-sensitive)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68313" class="refsect2"><a id="CHDBIECH"></a>
<hr />
<h3 class="refsect2"><a id="sthref9382"></a>DROP_DIAGNOSIS_TASK Procedure</h3>
<p>This procedure drops a diagnostic task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9383"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.DROP_DIAGNOSIS_TASK (
    taskname        IN   VARCHAR2); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9384"></a>Parameters</p>
<div id="ARPLS68314" class="tblformal">
<p class="titleintable"><a id="sthref9385"></a><a id="sthref9386"></a>Table 138-15 DROP_DIAGNOSIS_TASK Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_DIAGNOSIS_TASK Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.DROP_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t17">Parameter</th>
<th class="cellalignment1227" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t17" headers="r1c1-t17">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t17 r1c2-t17">
<p>Name of task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68315" class="refsect2"><a id="CEGDJEEI"></a>
<hr />
<h3 class="refsect2"><a id="sthref9387"></a>DROP_SQL_PATCH Procedure</h3>
<p>This procedure drops the named SQL patch from the database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9388"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.DROP_SQL_PATCH (
   name     IN  VARCHAR2,   ignore   IN  BOOLEAN := FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9389"></a>Parameters</p>
<div id="ARPLS68316" class="tblformal">
<p class="titleintable"><a id="sthref9390"></a><a id="sthref9391"></a>Table 138-16 DROP_SQL_PATCH Function &amp; Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_SQL_PATCH Function &amp; Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.DROP_SQL_PATCH subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>Name of patch to be dropped. The name is case sensitive.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>ignore</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>Ignore errors due to object not existing.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9392"></a>Usage Notes</p>
<p>Requires <code>DROP</code> <code>ANY</code> <code>SQL</code> <code>PATCH</code> privilege</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68317" class="refsect2"><a id="CHDJEJDH"></a>
<hr />
<h3 class="refsect2"><a id="sthref9393"></a>EXECUTE_DIAGNOSIS_TASK Procedure</h3>
<p>This procedure executes a diagnostic task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9394"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.EXECUTE_DIAGNOSIS_TASK (
    taskname        IN   VARCHAR2); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9395"></a>Parameters</p>
<div id="ARPLS68318" class="tblformal">
<p class="titleintable"><a id="sthref9396"></a><a id="sthref9397"></a>Table 138-17 EXECUTE_DIAGNOSIS_TASK Procedure Parameters</p>
<table class="cellalignment1229" title="EXECUTE_DIAGNOSIS_TASK Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.EXECUTE_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t19">Parameter</th>
<th class="cellalignment1227" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t19" headers="r1c1-t19">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t19 r1c2-t19">
<p>Name of task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68319" class="refsect2"><a id="CHDFBAFB"></a>
<hr />
<h3 class="refsect2"><a id="sthref9398"></a>EXPLAIN_SQL_TESTCASE Function</h3>
<p>This procedure explains a SQL test case.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9399"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.EXPLAIN_SQL_TESTCASE (
    sqlTestCase        IN   CLOB)
  RETURN CLOB; 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9400"></a>Parameters</p>
<div id="ARPLS68320" class="tblformal">
<p class="titleintable"><a id="sthref9401"></a><a id="sthref9402"></a>Table 138-18 EXPLAIN_SQL_TESTCASE Function Parameters</p>
<table class="cellalignment1229" title="EXPLAIN_SQL_TESTCASE Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.EXPLAIN_SQL_TESTCASE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t20">Parameter</th>
<th class="cellalignment1227" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t20" headers="r1c1-t20">
<p><code>sqlTestCase</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t20 r1c2-t20">
<p>XML document describing the SQL test case</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68321" class="refsect2"><a id="CHDJEHIC"></a>
<hr />
<h3 class="refsect2"><a id="sthref9403"></a>EXPORT_SQL_TESTCASE Procedures</h3>
<p>This procedure exports a SQL test case to a directory.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9404"></a>Syntax</p>
<p>This variant has to be provided with the SQL information.</p>
<pre>
DBMS_SQLDIAG.EXPORT_SQL_TESTCASE (
    directory                IN              VARCHAR2,
    sql_text                 IN              CLOB,
    user_name                IN              VARCHAR2  :=  NULL,
    bind_list                IN              sql_binds :=  NULL,
    exportEnvironment        IN              BOOLEAN   :=  TRUE,
    exportMetadata           IN              BOOLEAN   :=  TRUE,
    exportData               IN              BOOLEAN   :=  FALSE,
    exportPkgbody            IN              BOOLEAN   :=  FALSE,
    samplingPercent          IN              NUMBER    :=  100,
    ctrlOptions              IN              VARCHAR2  :=  NULL,
    timeLimit                IN              NUMBER    :=  0,
    testcase_name            IN              VARCHAR2  :=  NULL,
    testcase                 IN OUT NOCOPY   CLOB,
    preserveSchemaMapping    IN              BOOLEAN   :=  FALSE); 
</pre>
<p>This variant extracts the SQL information from an incident file.</p>
<pre>
DBMS_SQLDIAG.EXPORT_SQL_TESTCASE (
    directory                IN              VARCHAR2,
    incident_id              IN              VARCHAR2,
    exportEnvironment        IN              BOOLEAN   :=  TRUE,
    exportMetadata           IN              BOOLEAN   :=  TRUE,
    exportData               IN              BOOLEAN   :=  FALSE,
    exportPkgbody            IN              BOOLEAN   :=  FALSE,
    samplingPercent          IN              NUMBER    :=  100,
    ctrlOptions              IN              VARCHAR2  :=  NULL,
    timeLimit                IN              NUMBER    :=  
                                                DBMS_SQLDIAG.TIME_LIMIT_DEFAULT,
    testcase_name            IN              VARCHAR2  :=  NULL,
    testcase                 IN OUT NOCOPY   CLOB,
    preserveSchemaMapping    IN              BOOLEAN   :=  FALSE); 
</pre>
<p>This variant allow the SQL Test case to be generated from a cursor present in the cursor cache. Use <code>V$SQL</code> to get the SQL identifier and the SQL hash value.</p>
<pre>
DBMS_SQLDIAG.EXPORT_SQL_TESTCASE (
    directory                IN              VARCHAR2,
    sql_id                   IN              VARCHAR2,
    plan_hash_value          IN              NUMBER    := NULL,
    exportEnvironment        IN              BOOLEAN   :=  TRUE,
    exportMetadata           IN              BOOLEAN   :=  TRUE,
    exportData               IN              BOOLEAN   :=  TRUE,
    exportPkgbody            IN              BOOLEAN   :=  FALSE,
    samplingPercent          IN              NUMBER    :=  100,
    ctrlOptions              IN              VARCHAR2  :=  NULL,
    timeLimit                IN              NUMBER    := 
                                                DBMS_SQLDIAG.TIME_LIMIT_DEFAULT,
    testcase_name            IN              VARCHAR2  :=  NULL,
    testcase                 IN OUT NOCOPY   CLOB,
    preserveSchemaMapping    IN              BOOLEAN   :=  FALSE); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9405"></a>Parameters</p>
<div id="ARPLS68322" class="tblformal">
<p class="titleintable"><a id="sthref9406"></a><a id="sthref9407"></a>Table 138-19 EXPORT_SQL_TESTCASE Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_SQL_TESTCASE Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.BUILD_SQL_TESTCASE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t21">Parameter</th>
<th class="cellalignment1227" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t21" headers="r1c1-t21">
<p><code>directory</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t21 r1c2-t21">
<p>Directory to store the various generated files</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t21" headers="r1c1-t21">
<p><code>sql_text</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t21 r1c2-t21">
<p>Text of the SQL statement to export</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t21" headers="r1c1-t21">
<p><code>incident_id</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t21 r1c2-t21">
<p>Incident ID containing the offending SQL</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t21" headers="r1c1-t21">
<p><code>sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t21 r1c2-t21">
<p>Identifier of the statement in the cursor cache</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t21" headers="r1c1-t21">
<p><code>username</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t21 r1c2-t21">
<p>Name of the user schema to use to parse the SQL, defaults to <code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t21" headers="r1c1-t21">
<p><code>bind_list</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t21 r1c2-t21">
<p>List of bind values associated to the statement</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t21" headers="r1c1-t21">
<p><code>exportEnvironment</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t21 r1c2-t21">
<p><code>TRUE</code> if the compilation environment should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t21" headers="r1c1-t21">
<p><code>exportMetadata</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t21 r1c2-t21">
<p><code>TRUE</code> if the definition of the objects referenced in the SQL should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t21" headers="r1c1-t21">
<p><code>exportData</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t21 r1c2-t21">
<p><code>TRUE</code> if the data of the objects referenced in the SQL should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t21" headers="r1c1-t21">
<p><code>exportPkgbody</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t21 r1c2-t21">
<p><code>TRUE</code> if the body of the packages referenced in the SQL are exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t21" headers="r1c1-t21">
<p><code>samplingPercent</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t21 r1c2-t21">
<p>If is <code>TRUE</code>, specify the sampling percentage to use to create the dump file</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t21" headers="r1c1-t21">
<p><code>ctrlOptions</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t21 r1c2-t21">
<p>Opaque control parameters</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t21" headers="r1c1-t21">
<p><code>timeLimit</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t21 r1c2-t21">
<p>How much time should we spend exporting the SQL test case</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t21" headers="r1c1-t21">
<p><code>testcaseName</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t21 r1c2-t21">
<p>An optional name for the SQL test case. This is used to prefix all the generated scripts</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t21" headers="r1c1-t21">
<p><code>testcase</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t21 r1c2-t21">
<p>Resulting testcase</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t21" headers="r1c1-t21">
<p><code>preservesSchemaMapping</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t21 r1c2-t21">
<p><code>TRUE</code> if the schema (or schemas) are not re-mapped from the original environment to the test environment</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9408"></a>Usage Notes</p>
<ul>
<li>
<p>A SQL test case generates a set of files needed to help reproduce a SQL failure on a different machine. It contains:</p>
<ul>
<li>
<p>a dump file containing schemas objects and statistics (<code>.dmp</code>)</p>
</li>
<li>
<p>the explain plan for the statements (in advanced mode)</p>
</li>
<li>
<p>diagnostic information gathered on the offending statement</p>
</li>
<li>
<p>an import script to execute to reload the objects</p>
</li>
<li>
<p>a SQL script to replay system statistics of the source</p>
</li>
<li>
<p>a table of contents file describing the SQL test case</p>
</li>
<li>
<p>metadata. (<code>xxxxmain.xml</code>)</p>
</li>
</ul>
</li>
<li>
<p>You should not run Test Case Builder (TCB) under user <code>SYS</code>. Instead, use another user who can be granted the <code>DBA</code> role.</p>
</li>
<li>
<p>The default setting for TCB is that data is not exported. However, in some cases data is required, such as to diagnose an outcome with a result that is not optimal. To export data, call <code>EXPORT_SQL_TESTCASE</code> with <code>exportData=&gt;TRUE</code> and the data will be imported by default, unless turned <code>OFF</code> by <code>importData=&gt;FALSE</code>.</p>
</li>
<li>
<p>TCB includes PL/SQL package spec by default, but not the PL/SQL package body. However, you may need to have the package body as well, for example, to invoke the PL/SQL functions, or because you have a Virtual Private Database (VPD) function defined in a package. To export a PL/SQL package body, call <code>EXPORT_SQL_TESTCASE</code> with <code>exportPkgbody=&gt;TRUE</code>. To import a PL/SQL package body, call <a href="#CEGEEHFF">IMPORT_SQL_TESTCASE Procedures</a> with i<code>mportPkgbody=&gt;TRUE</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68323" class="refsect2"><a id="CEGEEAAG"></a>
<hr />
<h3 class="refsect2"><a id="sthref9409"></a>EXPORT_SQL_TESTCASE_DIR_BY_INC Function</h3>
<p>This function generates a SQL Test Case corresponding to the incident ID passed as an argument. It creates a set of scripts and dump file in the directory passed as an argument.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9410"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.EXPORT_SQL_TESTCASE_DIR_BY_INC (
    incident_id        IN   NUMBER,
    directory          IN   VARCHAR2,
    exportEnvironment  IN   VARCHAR2 := 'TRUE',
    exportMetadata     IN   VARCHAR2 := 'TRUE',
    exportData         IN   VARCHAR2 := 'FALSE',
    samplingPercent    IN   VARCHAR2 := '100', 
    ctrlOptions        IN   VARCHAR2 := NULL)
 RETURN BOOLEAN;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9411"></a>Parameters</p>
<div id="ARPLS68324" class="tblformal">
<p class="titleintable"><a id="sthref9412"></a><a id="sthref9413"></a>Table 138-20 EXPORT_SQL_TESTCASE_DIR_BY_INC Function Parameters</p>
<table class="cellalignment1229" title="EXPORT_SQL_TESTCASE_DIR_BY_INC Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.EXPORT_SQL_TESTCASE_DIR_BY_INC subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t22">Parameter</th>
<th class="cellalignment1227" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t22" headers="r1c1-t22">
<p><code>incident_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t22 r1c2-t22">
<p>Incident ID containing the offending SQL. For more information about Incidents, see <a class="olink PFGRF94837" href="../../server.112/e41573/sql_overview.htm#PFGRF94837"><span class="italic">Oracle Database Performance Tuning Guide</span>.</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t22" headers="r1c1-t22">
<p><code>directory</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t22 r1c2-t22">
<p>Directory to store the various generated files</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t22" headers="r1c1-t22">
<p><code>exportEnvironment</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t22 r1c2-t22">
<p><code>TRUE</code> if the compilation environment should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t22" headers="r1c1-t22">
<p><code>exportMetadata</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t22 r1c2-t22">
<p><code>TRUE</code> if the definition of the objects referenced in the SQL should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t22" headers="r1c1-t22">
<p><code>exportData</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t22 r1c2-t22">
<p><code>TRUE</code> if the data of the objects referenced in the SQL should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t22" headers="r1c1-t22">
<p><code>samplingPercent</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t22 r1c2-t22">
<p>If is <code>TRUE</code>, specify the sampling percentage to use to create the dump file</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t22" headers="r1c1-t22">
<p><code>ctrlOptions</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t22 r1c2-t22">
<p>Opaque control parameters</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68325" class="refsect2"><a id="CEGDACIA"></a>
<hr />
<h3 class="refsect2"><a id="sthref9414"></a>EXPORT_SQL_TESTCASE_DIR_BY_TXT Function</h3>
<p>This function generates a SQL Test Case corresponding to the SQL passed as an argument. It creates a set of scripts and dump files in the directory passed as an argument.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9415"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.EXPORT_SQL_TESTCASE_DIR_BY_TXT (
    incident_id        IN   NUMBER,
    directory          IN   VARCHAR2,
    sql_text           IN   CLOB,
    user_name          IN   VARCHAR2 := 'SYS',
    exportEnvironment  IN   VARCHAR2 := 'TRUE',
    exportMetadata     IN   VARCHAR2 := 'TRUE',
    exportData         IN   VARCHAR2 := 'FALSE',
    samplingPercent    IN   VARCHAR2 := '100',     ctrlOptions        IN   VARCHAR2 := NULL)
  RETURN BOOLEAN;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9416"></a>Parameters</p>
<div id="ARPLS68326" class="tblformal">
<p class="titleintable"><a id="sthref9417"></a><a id="sthref9418"></a>Table 138-21 EXPORT_SQL_TESTCASE_DIR_BY_TXT Function Parameters</p>
<table class="cellalignment1229" title="EXPORT_SQL_TESTCASE_DIR_BY_TXT Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.EXPORT_SQL_TESTCASE_DIR_BY_TXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t23">Parameter</th>
<th class="cellalignment1227" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t23" headers="r1c1-t23">
<p><code>incident_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t23 r1c2-t23">
<p>Incident ID containing the offending SQL</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t23" headers="r1c1-t23">
<p><code>directory</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t23 r1c2-t23">
<p>Directory to store the various generated files</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t23" headers="r1c1-t23">
<p><code>sql_text</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t23 r1c2-t23">
<p>Text of the SQL statement to explain</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t23" headers="r1c1-t23">
<p><code>username</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t23 r1c2-t23">
<p>Name of the user schema to use to parse the SQL, defaults to <code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t23" headers="r1c1-t23">
<p><code>exportEnvironment</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t23 r1c2-t23">
<p><code>TRUE</code> if the compilation environment should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t23" headers="r1c1-t23">
<p><code>exportMetadata</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t23 r1c2-t23">
<p><code>TRUE</code> if the definition of the objects referenced in the SQL should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t23" headers="r1c1-t23">
<p><code>exportData</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t23 r1c2-t23">
<p><code>TRUE</code> if the data of the objects referenced in the SQL should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t23" headers="r1c1-t23">
<p><code>samplingPercent</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t23 r1c2-t23">
<p>If is <code>TRUE</code>, specify the sampling percentage to use to create the dump file</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t23" headers="r1c1-t23">
<p><code>ctrlOptions</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t23 r1c2-t23">
<p>Opaque control parameters</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68327" class="refsect2"><a id="CHDCHFHC"></a>
<hr />
<h3 class="refsect2"><a id="sthref9419"></a>GET_FIX_CONTROL Function</h3>
<p>This function returns the value of fix control for a given bug number.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9420"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.GET_FIX_CONTROL (
    bug_number   IN    NUMBER)
  RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9421"></a>Parameters</p>
<div id="ARPLS68328" class="tblformal">
<p class="titleintable"><a id="sthref9422"></a><a id="sthref9423"></a>Table 138-22 GET_FIX_CONTROL Function Parameters</p>
<table class="cellalignment1229" title="GET_FIX_CONTROL Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.GET_FIX_CONTROL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t24">Parameter</th>
<th class="cellalignment1227" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t24" headers="r1c1-t24">
<p><code>bug_number</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t24 r1c2-t24">
<p>Bug number</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72879" class="refsect2"><a id="CEGBACCC"></a>
<hr />
<h3 class="refsect2"><a id="sthref9424"></a>GET_SQL Function</h3>
<p>This function loads a <code>sql_setrow</code> from the trace file associated to an the given incident ID.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9425"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.GET_SQL (
    incident_id  IN     VARCHAR2)
  RETURN SQLSET_ROW;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9426"></a>Parameters</p>
<div id="ARPLS72880" class="tblformal">
<p class="titleintable"><a id="sthref9427"></a><a id="sthref9428"></a>Table 138-23 GET_SQL Function Parameters</p>
<table class="cellalignment1229" title="GET_SQL Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.GET_SQL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t25">Parameter</th>
<th class="cellalignment1227" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t25" headers="r1c1-t25">
<p><code>incident_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t25 r1c2-t25">
<p>Identifier of the incident</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72881" class="refsect2"><a id="CEGEEHFF"></a>
<hr />
<h3 class="refsect2"><a id="sthref9429"></a>IMPORT_SQL_TESTCASE Procedures</h3>
<p>This procedure imports a SQL test case into a schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9430"></a>Syntax</p>
<p>This variant requires a source directory and SQL Testcase metadata object (in XML format).</p>
<pre>
DBMS_SQLDIAG.IMPORT_SQL_TESTCASE (
    directory                IN   VARCHAR2,
    sqlTestCase              IN   CLOB,
    importEnvironment        IN   BOOLEAN   :=  TRUE,
    importMetadata           IN   BOOLEAN   :=  TRUE,
    importData               IN   BOOLEAN   :=  TRUE,
    importPkgbody            IN   BOOLEAN   :=  FALSE,
    importDiagnosis          IN   BOOLEAN   :=  TRUE,
    ignoreStorage            IN   BOOLEAN   :=  TRUE,
    ctrlOptions              IN   VARCHAR2  :=  NULL,
    preserveSchemaMapping    IN   BOOLEAN   :=  FALSE);
</pre>
<p>This variant requires a source directory name of SQL Testcase metadata file.</p>
<pre>
DBMS_SQLDIAG.IMPORT_SQL_TESTCASE (
    directory                IN   VARCHAR2,
    filename                 IN   VARCHAR2,
    importEnvironment        IN   BOOLEAN   :=  TRUE,
    importMetadata           IN   BOOLEAN   :=  TRUE,
    importData               IN   BOOLEAN   :=  TRUE,
    importPkgbody            IN   BOOLEAN   :=  FALSE,
    importDiagnosis          IN   BOOLEAN   :=  TRUE,
    ignoreStorage            IN   BOOLEAN   :=  TRUE,
    ctrlOptions              IN   VARCHAR2  :=  NULL,
    preserveSchemaMapping    IN   BOOLEAN   :=  FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9431"></a>Parameters</p>
<div id="ARPLS72882" class="tblformal">
<p class="titleintable"><a id="sthref9432"></a><a id="sthref9433"></a>Table 138-24 IMPORT_SQL_TESTCASE Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_SQL_TESTCASE Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.IMPORT_SQL_TESTCASE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t26">Parameter</th>
<th class="cellalignment1227" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t26" headers="r1c1-t26">
<p><code>directory</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t26 r1c2-t26">
<p>Directory containing test case files</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t26" headers="r1c1-t26">
<p><code>filename</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t26 r1c2-t26">
<p>Name of a file containing an XML document describing the SQL test case</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t26" headers="r1c1-t26">
<p><code>importEnvironment</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t26 r1c2-t26">
<p><code>TRUE</code> if the compilation environment should be imported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t26" headers="r1c1-t26">
<p><code>importMetadata</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t26 r1c2-t26">
<p><code>TRUE</code> if the definition of the objects referenced in the SQL should be imported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t26" headers="r1c1-t26">
<p><code>importData</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t26 r1c2-t26">
<p><code>TRUE</code> if the data of the objects referenced in the SQL should be imported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t26" headers="r1c1-t26">
<p><code>importPkgbody</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t26 r1c2-t26">
<p><code>TRUE</code> if the body of the packages referenced in the SQL are imported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t26" headers="r1c1-t26">
<p><code>importDiagnosis</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t26 r1c2-t26">
<p><code>TRUE</code> if the diagnostic information associated to the task should be imported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t26" headers="r1c1-t26">
<p><code>ignoreStorage</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t26 r1c2-t26">
<p><code>TRUE</code> if the storage attributes should be ignored</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t26" headers="r1c1-t26">
<p><code>ctrlOptions</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t26 r1c2-t26">
<p>Opaque control parameters</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t26" headers="r1c1-t26">
<p><code>preservesSchemaMapping</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t26 r1c2-t26">
<p><code>TRUE</code> if the schema (or schemas) are not re-mapped from the original environment to the test environment</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9434"></a>Usage Notes</p>
<ul>
<li>
<p>A SQL test case generates a set of files needed to help reproduce a SQL failure on a different machine. It contains:</p>
<ul>
<li>
<p>a dump file containing schemas objects and statistics (<code>.dmp</code>)</p>
</li>
<li>
<p>the explain plan for the statements (in advanced mode)</p>
</li>
<li>
<p>diagnostic information gathered on the offending statement</p>
</li>
<li>
<p>an import script to execute to reload the objects</p>
</li>
<li>
<p>a SQL script to replay system statistics of the source</p>
</li>
<li>
<p>a table of contents file describing the SQL test case</p>
</li>
<li>
<p>metadata. (<code>xxxxmain.xml</code>)</p>
</li>
</ul>
</li>
<li>
<p>You should not run Test Case Builder (TCB) under user <code>SYS</code>. Instead, use another user who can be granted the <code>SYSDBA</code> privilege</p>
</li>
<li>
<p>The default setting for TCB is that data is not exported. However, in some cases data is required, such as to diagnose an outcome with a result that is not optimal. To export data, call <a href="#CHDJEHIC">EXPORT_SQL_TESTCASE Procedures</a> with <code>exportData=&gt;TRUE</code> and the data will be imported by default, unless turned <code>OFF</code> by <code>importData=&gt;FALSE</code>.</p>
</li>
<li>
<p>TCB includes PL/SQL package spec by default, but not the PL/SQL package body. However, you may need to have the package body as well, for example, to invoke the PL/SQL functions, or because you have a Virtual Private Database (VPD) function defined in a package. To export a PL/SQL package body, call <a href="#CHDJEHIC">EXPORT_SQL_TESTCASE Procedures</a> with <code>exportPkgbody=&gt;TRUE</code>. To import a PL/SQL package body, call <code>IMPORT_SQL_TESTCASE</code> Procedures with i<code>mportPkgbody=&gt;TRUE</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68329" class="refsect2"><a id="CHDIEJDC"></a>
<hr />
<h3 class="refsect2"><a id="sthref9435"></a>INCIDENTID_2_SQL Procedure</h3>
<p>This procedure initializes a <code>sql_setrow</code> from an incident ID.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9436"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.INCIDENTID_2_SQL (
    incident_id   IN     VARCHAR2,
    sql_stmt      OUT    SQLSET_ROW,
    problem_type  OUT    NUMBER, 
    err_code      OUT    BINARY_INTEGER,
    err_mesg      OUT    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9437"></a>Parameters</p>
<div id="ARPLS68330" class="tblformal">
<p class="titleintable"><a id="sthref9438"></a><a id="sthref9439"></a>Table 138-25 INCIDENTID_2_SQL Procedure Parameters</p>
<table class="cellalignment1229" title="INCIDENTID_2_SQL Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.INCIDENTID_2_SQL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t27">Parameter</th>
<th class="cellalignment1227" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t27" headers="r1c1-t27">
<p><code>incident_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t27 r1c2-t27">
<p>Identifier of the incident</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t27" headers="r1c1-t27">
<p><code>sql_stmt</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t27 r1c2-t27">
<p>Resulting SQL</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t27" headers="r1c1-t27">
<p><code>problem_type</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t27 r1c2-t27">
<p>Tentative type of SQL problem (currently among <code>PROBLEM_TYPE_COMPILATION_ERROR</code> and <code>PROBLEM_TYPE_EXECUTION_ERROR</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t27" headers="r1c1-t27">
<p><code>err_code</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t27 r1c2-t27">
<p>Error code if any otherwise it is set to <code>NULL</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t27" headers="r1c1-t27">
<p><code>err_msg</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t27 r1c2-t27">
<p>Error message if any otherwise it is set to <code>NULL</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68331" class="refsect2"><a id="CHDBCIFC"></a>
<hr />
<h3 class="refsect2"><a id="sthref9440"></a>INTERRUPT_DIAGNOSIS_TASK Procedure</h3>
<p>This procedure interrupts a diagnostic task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9441"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.INTERRUPT_DIAGNOSIS_TASK (
    taskname        IN   VARCHAR2); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9442"></a>Parameters</p>
<div id="ARPLS68332" class="tblformal">
<p class="titleintable"><a id="sthref9443"></a><a id="sthref9444"></a>Table 138-26 INTERRUPT_DIAGNOSIS_TASK Procedure Parameters</p>
<table class="cellalignment1229" title="INTERRUPT_DIAGNOSIS_TASK Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.INTERRUPT_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t28">Parameter</th>
<th class="cellalignment1227" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t28" headers="r1c1-t28">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t28 r1c2-t28">
<p>Name of task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72883" class="refsect2"><a id="CEGHJHJE"></a>
<hr />
<h3 class="refsect2"><a id="sthref9445"></a>LOAD_SQLSET_FROM_TCB Function</h3>
<p>This function loads a <code>SQLSET</code> from a Test Case Builder file.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9446"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.LOAD_SQLSET_FROM_TCB (
    directory        IN     VARCHAR2,
    filename         IN     VARCHAR2,
    sqlset_name      IN     VARCHAR2 DEFAULT NULL)
  RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9447"></a>Parameters</p>
<div id="ARPLS72884" class="tblformal">
<p class="titleintable"><a id="sthref9448"></a><a id="sthref9449"></a>Table 138-27 LOAD_SQLSET_FROM_TCB Function Parameters</p>
<table class="cellalignment1229" title="LOAD_SQLSET_FROM_TCB Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.LOAD_SQLSET_FROM_TCB subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t29">Parameter</th>
<th class="cellalignment1227" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t29" headers="r1c1-t29">
<p><code>directory</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t29 r1c2-t29">
<p>Name of directory</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t29" headers="r1c1-t29">
<p><code>filename</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t29 r1c2-t29">
<p>Name of file</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t29" headers="r1c1-t29">
<p><code>sqlset_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t29 r1c2-t29">
<p>Name of <code>SQLSET</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68333" class="refsect2"><a id="CEGBIFAH"></a>
<hr />
<h3 class="refsect2"><a id="sthref9450"></a>PACK_STGTAB_SQLPATCH Procedure</h3>
<p>This procedure packs SQL patches into the staging table created by a call to the <a href="#CEGBBDBF">CREATE_STGTAB_SQLPATCH Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9451"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.UPPACK_STGTAB_SQLPATCH (
   patch_name            IN  VARCHAR2 := '%',
   patch_category        IN  VARCHAR2 := 'DEFAULT',
   staging_table_name    IN  VARCHAR2,
   staging_schema_owner  IN  VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9452"></a>Parameters</p>
<div id="ARPLS68334" class="tblformal">
<p class="titleintable"><a id="sthref9453"></a><a id="sthref9454"></a>Table 138-28 UPPACK_STGTAB_SQLPATCH Procedure Parameters</p>
<table class="cellalignment1229" title="UPPACK_STGTAB_SQLPATCH Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.UPPACK_STGTAB_SQLPATCH subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t30">Parameter</th>
<th class="cellalignment1227" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t30" headers="r1c1-t30">
<p><code>patch_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t30 r1c2-t30">
<p>Name of patch to pack (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t30" headers="r1c1-t30">
<p><code>patch_category</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t30 r1c2-t30">
<p>Category to which to pack patches (% wildcards acceptable, case-insensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t30" headers="r1c1-t30">
<p><code>staging_table_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t30 r1c2-t30">
<p>(Mandatory) Name of the table to use (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t30" headers="r1c1-t30">
<p><code>staging_schema_owner</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t30 r1c2-t30">
<p>Schema where the table resides, or <code>NULL</code> for current schema (case-sensitive)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9455"></a>Usage Notes</p>
<ul>
<li>
<p>Requires: <code>ADMINISTER</code> <code>SQL</code> <code>PLAN MANAGEMENT</code> <code>OBJECT</code> privilege and <code>INSERT</code> privilege on the staging table</p>
</li>
<li>
<p>By default, we move all SQL patches in category <code>DEFAULT</code>. See the <a href="#CEGCEJAI">Examples</a> for details. Note that the subprogram issues a <code>COMMIT</code> after packing each SQL patch, so if an error is raised in mid-execution, some patches may be in the staging table.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68335" class="refsect2"><a id="CHDJDIGI"></a>
<hr />
<h3 class="refsect2"><a id="sthref9456"></a>REPORT_DIAGNOSIS_TASK Function</h3>
<p>This function reports on a diagnostic task. It returns a <code>CLOB</code> containing the desired report.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9457"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.REPORT_DIAGNOSIS_TASK (
    taskname           IN   VARCHAR2,
    type               IN   VARCHAR2  := TYPE_TEXT,
    level              IN   VARCHAR2  := LEVEL_TYPICAL,
    section            IN   VARCHAR2  := SECTION_ALL,
    object_id          IN   NUMBER    := NULL,
    result_limit       IN   NUMBER    := NULL,
    owner_name         IN   VARCHAR2  := NULL)
  RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9458"></a>Parameters</p>
<div id="ARPLS68336" class="tblformal">
<p class="titleintable"><a id="sthref9459"></a><a id="sthref9460"></a>Table 138-29 REPORT_DIAGNOSIS_TASK Function Parameters</p>
<table class="cellalignment1229" title="REPORT_DIAGNOSIS_TASK Function Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.RESUME_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t31">Parameter</th>
<th class="cellalignment1227" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t31" headers="r1c1-t31">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t31 r1c2-t31">
<p>Name of task to report</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t31" headers="r1c1-t31">
<p><code>type</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t31 r1c2-t31">
<p>Type of the report. Possible values are: TEXT, HTML, XML (see <a href="#CEGIIAJH">Table 138-4, "DBMS_SQLDIAG Constants - Report Type (possible values) Constants"</a>).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t31" headers="r1c1-t31">
<p><code>level</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t31 r1c2-t31">
<p>Format of the recommendations. Possible values are TYPICAL, BASIC, ALL (<a href="#CEGHJADG">Table 138-5, "DBMS_SQLDIAG Constants - Report Level (possible values) Constants"</a>).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t31" headers="r1c1-t31">
<p><code>section</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t31 r1c2-t31">
<p>Particular section in the report. Possible values are: SUMMARY, FINDINGS, PLAN, INFORMATION, ERROR, ALL (<a href="#CEGDCJGI">Table 138-6, "DBMS_SQLDIAG Constants - Report Section (possible values) Constants"</a>).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t31" headers="r1c1-t31">
<p><code>object_id</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t31 r1c2-t31">
<p>Identifier of the advisor framework object that represents a given statement in a SQL Tuning Set (STS).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t31" headers="r1c1-t31">
<p><code>result_limit</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t31 r1c2-t31">
<p>Number of statements in a STS for which the report is generated</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t31" headers="r1c1-t31">
<p><code>owner_name</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t31 r1c2-t31">
<p>Name of the task execution to use. If <code>NULL</code>, the report will be generated for the last task execution.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68337" class="refsect2"><a id="CHDJCDHG"></a>
<hr />
<h3 class="refsect2"><a id="sthref9461"></a>RESET_DIAGNOSIS_TASK Procedure</h3>
<p>This procedure resets a diagnostic task.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9462"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.RESET_DIAGNOSIS_TASK (
    taskname        IN   VARCHAR2); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9463"></a>Parameters</p>
<div id="ARPLS68338" class="tblformal">
<p class="titleintable"><a id="sthref9464"></a><a id="sthref9465"></a>Table 138-30 RESET_DIAGNOSIS_TASK Procedure Parameters</p>
<table class="cellalignment1229" title="RESET_DIAGNOSIS_TASK Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.RESET_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t32">Parameter</th>
<th class="cellalignment1227" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t32" headers="r1c1-t32">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t32 r1c2-t32">
<p>Name of task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68339" class="refsect2"><a id="CEGBGGDG"></a>
<hr />
<h3 class="refsect2"><a id="sthref9466"></a>RESUME_DIAGNOSIS_TASK Procedure</h3>
<p>This procedure resumes a diagnostic path.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9467"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.RESUME_DIAGNOSIS_TASK (
    taskname        IN   VARCHAR2); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9468"></a>Parameters</p>
<div id="ARPLS68340" class="tblformal">
<p class="titleintable"><a id="sthref9469"></a><a id="sthref9470"></a>Table 138-31 RESUME_DIAGNOSIS_TASK Procedure Parameters</p>
<table class="cellalignment1229" title="RESUME_DIAGNOSIS_TASK Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.RESUME_DIAGNOSIS_TASK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t33">Parameter</th>
<th class="cellalignment1227" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t33" headers="r1c1-t33">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t33 r1c2-t33">
<p>Name of task</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68341" class="refsect2"><a id="CHDFGDDF"></a>
<hr />
<h3 class="refsect2"><a id="sthref9471"></a>SET_DIAGNOSIS_TASK_PARAMETER Procedure</h3>
<p>This procedure is called to update the value of a SQL diagnosis parameter of type <code>VARCHAR2</code>. The task must be set to its initial state before calling this procedure. The diagnosis parameters that can be set by this procedure are:</p>
<ul>
<li>
<p><code>MODE</code>: diag scope (comprehensive, limited)</p>
</li>
<li>
<p><code>_SQLDIAG_FINDING_MODE</code>: findings in the report (see <a href="#CEGBICBE">"DBMS_SQLDIAG Constants - Findings Filter Constants"</a> for possible values)</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9472"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.SET_DIAGNOSIS_TASK_PARAMETER (
    taskname           IN   VARCHAR2,
    parameter          IN   VARCHAR2,    value              IN   NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9473"></a>Parameters</p>
<div id="ARPLS68342" class="tblformal">
<p class="titleintable"><a id="sthref9474"></a><a id="sthref9475"></a>Table 138-32 SET_DIAGNOSIS_TASK_PARAMETER Procedure Parameters</p>
<table class="cellalignment1229" title="SET_DIAGNOSIS_TASK_PARAMETER Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.SET_DIAGNOSIS_PARAMETER subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t34">Parameter</th>
<th class="cellalignment1227" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t34" headers="r1c1-t34">
<p><code>taskname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t34 r1c2-t34">
<p>Identifier of the task to execute</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t34" headers="r1c1-t34">
<p><code>parameter</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t34 r1c2-t34">
<p>Name of the parameter to set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t34" headers="r1c1-t34">
<p><code>value</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t34 r1c2-t34">
<p>New value of the specified parameter</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68343" class="refsect2"><a id="CEGCJDBB"></a>
<hr />
<h3 class="refsect2"><a id="sthref9476"></a>UNPACK_STGTAB_SQLPATCH Procedure</h3>
<p>This procedure unpacks from the staging table populated by a call to the <a href="#CEGBIFAH">PACK_STGTAB_SQLPATCH Procedure</a>. It uses the patch data stored in the staging table to create patches on this system. Users can opt to replace existing patches with patch data when they exist already. In this case, note that it is only possible to replace patches referring to the same statement if the names are the same (see the <a href="#CEGBDHEJ">ACCEPT_SQL_PATCH Function &amp; Procedure</a>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9477"></a>Syntax</p>
<pre>
DBMS_SQLDIAG.UPPACK_STGTAB_SQLPATCH (
   patch_name            IN  VARCHAR2 := '%',
   patch_category        IN  VARCHAR2 := '%',
   replace               IN  BOOLEAN,
   staging_table_name    IN  VARCHAR2,
   staging_schema_owner  IN  VARCHAR2 := NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9478"></a>Parameters</p>
<div id="ARPLS68344" class="tblformal">
<p class="titleintable"><a id="sthref9479"></a><a id="sthref9480"></a>Table 138-33 UPPACK_STGTAB_SQLPATCH Procedure Parameters</p>
<table class="cellalignment1229" title="UPPACK_STGTAB_SQLPATCH Procedure Parameters" summary="This table describes Parameters used by the DBMS_SQLDIAG.UPPACK_STGTAB_SQLPATCH subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t35">Parameter</th>
<th class="cellalignment1227" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t35" headers="r1c1-t35">
<p><code>patch_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t35 r1c2-t35">
<p>Name of patch to unpack (% wildcards acceptable, case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t35" headers="r1c1-t35">
<p><code>patch_category</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t35 r1c2-t35">
<p>Category from which to unpack patches (% wildcards acceptable, case-insensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t35" headers="r1c1-t35">
<p>replace</p>
</td>
<td class="cellalignment1228" headers="r4c1-t35 r1c2-t35">
<p>Replace patches if they already exist. Note that patches cannot be replaced if there is one in the staging table with the same name as an active patch on different SQL. The subprogram raises an error if there an attempt to create a patch that already exists.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t35" headers="r1c1-t35">
<p>staging_table_name</p>
</td>
<td class="cellalignment1228" headers="r5c1-t35 r1c2-t35">
<p>(Mandatory) Name of the table to use (case-sensitive)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t35" headers="r1c1-t35">
<p>staging_schema_owner</p>
</td>
<td class="cellalignment1228" headers="r6c1-t35 r1c2-t35">
<p>Schema where the table resides, or <code>NULL</code> for current schema (case-sensitive)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9481"></a>Usage Notes</p>
<ul>
<li>
<p>Requires: <code>ADMINISTER</code> <code>SQL</code> <code>MANAGEMENT</code> <code>OBJECT</code> privilege and <code>SELECT</code> privilege on the staging table</p>
</li>
<li>
<p>By default, all SQL patches in the staging table are moved. The function commits after successfully loading each patch. If it fails in creating an individual patch, it raises an error and does not proceed to those remaining in the staging table.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_sql.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_sqlpa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
