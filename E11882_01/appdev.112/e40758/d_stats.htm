<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_STATS</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:34Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_stat_f.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_stmap.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">146/265</span> <!-- End Header -->
<div id="ARPLS059" class="chapter"><a id="CIHBIEII"></a>
<h1 class="chapter"><span class="secnum">142</span> DBMS_STATS</h1>
<p>With the <code><a id="sthref9881"></a>DBMS_STATS</code> package you can view and modify optimizer statistics gathered for database objects.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink PFGRF" href="../../server.112/e41573/toc.htm"><span class="italic">Oracle Database Performance Tuning Guide</span></a></div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CIHEHDFB">Using DBMS_STATS</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Types</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Operational Notes</p>
</li>
<li>
<p>Deprecated Subprograms</p>
</li>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#CIHGBFIC">Summary of DBMS_STATS Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CIHEHDFB"></a>
<hr />
<div id="ARPLS68486" class="refsect1">
<h2 class="refsect1">Using DBMS_STATS</h2>
<p>This section contains topics which relate to using the <code>DBMS_STATS</code> package.</p>
<ul>
<li>
<p><a href="#i1045518">Overview</a></p>
</li>
<li>
<p><a href="#i1044358">Types</a></p>
</li>
<li>
<p><a href="#i1044359">Constants</a></p>
</li>
<li>
<p><a href="#i1044360">Operational Notes</a></p>
</li>
<li>
<p><a href="#i1049539">Deprecated Subprograms</a></p>
</li>
<li>
<p><a href="#i1049486">Examples</a></p>
</li>
</ul>
<div id="ARPLS68487" class="refsect2"><a id="i1045518"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>The Oracle RDBMS allows you to collect statistics of many different kinds as an aid to improving performance. This package is concerned with optimizer statistics only. Given that Oracle sets automatic statistics collection of this kind on by default, this package is intended for only specialized cases.</p>
<p>The statistics of interest to be viewed or modified can reside in the dictionary or in a table created in the user's schema for this purpose. You can also collect and manage user-defined statistics for tables and domain indexes using this package.</p>
<p>For example, if the <code>DELETE_COLUMN_STATS</code> procedure is invoked on a column for which an association is defined, user-defined statistics for that column are deleted in addition to deletion of the standard statistics.</p>
<p>Only statistics stored in the dictionary have an impact on the cost-based optimizer. You can also use <code>DBMS_STATS</code> to gather statistics in parallel</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink PFGRF003" href="../../server.112/e41573/stats.htm#PFGRF003"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information about "Managing Optimizer Statistics".</div>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68488" class="refsect2"><a id="i1044358"></a>
<hr />
<h3 class="refsect2">Types</h3>
<p>Types for the minimum and maximum values and histogram endpoints include:</p>
<pre>
TYPE numarray  IS VARRAY(256) OF NUMBER;
TYPE datearray IS VARRAY(256) OF DATE;
TYPE chararray IS VARRAY(256) OF VARCHAR2(4000);
TYPE rawarray  IS VARRAY(256) OF RAW(2000);
TYPE fltarray IS VARRAY(256) OF BINARY_FLOAT;
TYPE dblarray IS VARRAY(256) OF BINARY_DOUBLE;
 
TYPE StatRec IS RECORD (
  epc    NUMBER,
  minval RAW(2000),
  maxval RAW(2000),
  bkvals NUMARRAY,
  novals NUMARRAY,
  chvals CHARARRAY,
  eavs   NUMBER);
 
</pre>
<p>Types for listing stale tables include:</p>
<pre>
TYPE ObjectElem IS RECORD (
  ownname     VARCHAR2(30),     -- owner
  objtype     VARCHAR2(6),      -- 'TABLE' or 'INDEX'
  objname     VARCHAR2(30),     -- table/index
  partname    VARCHAR2(30),     -- partition
  subpartname VARCHAR2(30));    -- subpartition
type ObjectTab is TABLE of ObjectElem;
</pre>
<p>Type for displaying statistics difference report:</p>
<pre>
TYPE DiffRepElem IS RECORD (
 report     CLOB,              -- stats difference report
 maxdiffpct number);           -- max stats difference (percentage)
type DiffRepTab is table of DiffRepElem; 
</pre></div>
<!-- class="refsect2" -->
<div id="ARPLS68489" class="refsect2"><a id="i1044359"></a>
<hr />
<h3 class="refsect2">Constants</h3>
<p>The <code>DBMS_STATS</code> package uses the constants shown in <a href="#CHDEBFCE">Table 142-1</a>:</p>
<div id="ARPLS68490" class="tblformal">
<p class="titleintable"><a id="sthref9882"></a><a id="CHDEBFCE"></a>Table 142-1 DBMS_STATS Constants</p>
<table class="cellalignment1229" title="DBMS_STATS Constants" summary="This table describes constants used by DBMS_STATS subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Name</th>
<th class="cellalignment1227" id="r1c2-t4">Type</th>
<th class="cellalignment1227" id="r1c3-t4">Value</th>
<th class="cellalignment1227" id="r1c4-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>AUTO_CASCADE</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p><code>BOOLEAN</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c3-t4">
<p><code>NULL</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c4-t4">
<p>Lets Oracle decide whether to collect statistics for indexes or not</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>AUTO_DEGREE</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c3-t4">
<p><code>32768</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c4-t4">
<p>Lets Oracle select the degree of parallelism based on size of the object, number of CPUs and initialization parameters. For definition of default parallel degree, see "<a class="olink VLDBG0102" href="../../server.112/e25523/parallel002.htm#VLDBG0102">Degree of Parallelism"</a> in <a class="olink VLDBG" href="../../server.112/e25523/toc.htm"><span class="italic">Oracle Database VLDB and Partitioning Guide</span></a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><code>AUTO_INVALIDATE</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p><code>BOOLEAN</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c3-t4">
<p>NULL</p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c4-t4">
<p>Lets Oracle decide when to invalidate dependent cursors</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><code>AUTO_SAMPLE_SIZE</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c3-t4">
<p><code>0</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c4-t4">
<p>Indicates that auto-sample size algorithms should be used</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68491" class="refsect2"><a id="i1044360"></a>
<hr />
<h3 class="refsect2">Operational Notes</h3>
<p>The <code>DBMS_STATS</code> subprograms perform the following general operations:</p>
<ul>
<li>
<p><a href="#i996857">Gathering Optimizer Statistics</a></p>
</li>
<li>
<p><a href="#CIHEGDBJ">Setting or Getting Statistics</a></p>
</li>
<li>
<p><a href="#i1044993">Deleting Statistics</a></p>
</li>
<li>
<p><a href="#i996835">Transferring Statistics</a></p>
</li>
<li>
<p><a href="#i1045149">Locking or Unlocking Statistics</a></p>
</li>
<li>
<p><a href="#i1045150">Restoring and Purging Statistics History</a></p>
</li>
<li>
<p><a href="#CIHGCEAA">User-Defined Statistics</a></p>
</li>
<li>
<p><a href="#BABJFHJJ">Pending Statistics</a></p>
</li>
<li>
<p><a href="#BABIIEJA">Comparing Statistics</a></p>
</li>
<li>
<p><a href="#BABDGGEE">Extended Statistics</a></p>
</li>
</ul>
<p>Most of the <code>DBMS_STATS</code> procedures include the three parameters <code>statown</code>, <code>stattab</code>, and <code>statid</code>. These parameters allow you to store statistics in your own tables (outside of the dictionary), which does not affect the optimizer. Therefore, you can maintain and experiment with <span class="italic">sets</span> of statistics.</p>
<p>The <code>stattab</code> parameter specifies the name of a table in which to hold statistics, and it is assumed that it resides in the same schema as the object for which statistics are collected (unless the <code>statown</code> parameter is specified). You can create multiple tables with different <code>stattab</code> identifiers to hold separate sets of statistics.</p>
<p>Additionally, you can maintain different sets of statistics within a single <code>stattab</code> by using the <code>statid</code> parameter, which avoids cluttering the user's schema.</p>
<p>For the <code>SET</code> and <code>GET</code> procedures, if <code>stattab</code> is not provided (that is, <code>NULL</code>), then the operation works directly on the dictionary statistics; therefore, you do not need to create these statistics tables if they only plan to modify the dictionary directly. However, if <code>stattab</code> is not <code>NULL</code>, then the <code>SET</code> or <code>GET</code> operation works on the specified user statistics table, and not the dictionary.</p>
<p>You can change the default values of some of the parameters of <code>DBMS_STATS</code> procedures using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
<p>Most of the procedures in this package commit the current transaction, perform the operation, and then commit again.</p>
<p>Most of the procedures have a parameter, <code>force</code> which allows you to override any lock on statistics.Whenever statistics in dictionary are modified, old versions of statistics are saved automatically for future restoring.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i996857"></a>Gathering Optimizer Statistics</p>
<p>Use the following subprograms to gather certain classes of optimizer statistics, with possible performance improvements over the <code>ANALYZE</code> command:</p>
<br />
<a href="#i1036194">GATHER_DATABASE_STATS Procedures</a><br />
<a href="#i1055451">GATHER_DICTIONARY_STATS Procedure</a><br />
<a href="#i1039162">GATHER_FIXED_OBJECTS_STATS Procedure</a><br />
<a href="#i1036276">GATHER_INDEX_STATS Procedure</a><br />
<a href="#i1036456">GATHER_SCHEMA_STATS Procedures</a><br />
<a href="#i1036401">GATHER_SYSTEM_STATS Procedure</a><br />
<a href="#i1036461">GATHER_TABLE_STATS Procedure</a><br />
<p>The <code>GATHER_*</code> procedures also collect user-defined statistics for columns and domain indexes.</p>
<p>The <code>statown</code>, <code>stattab</code>, and <code>statid</code> parameters instruct the package to back up current statistics in the specified table before gathering new statistics.</p>
<p>Oracle also provides the following procedure for generating statistics for derived objects when you have sufficient statistics on related objects:</p>
<p><a href="#i1036560">GENERATE_STATS Procedure</a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CIHEGDBJ"></a>Setting or Getting Statistics</p>
<p>Use the following subprograms to store and retrieve individual column-related, index-related, and table-related statistics:</p>
<br />
<a href="#i1035422">PREPARE_COLUMN_VALUES Procedures</a><br />
<a href="#i1038038">PREPARE_COLUMN_VALUES_NVARCHAR2 Procedure</a><br />
<a href="#i1038039">PREPARE_COLUMN_VALUES_ROWID Procedure</a><br />
<br />
<a href="#i997460">SEED_COL_USAGE Procedure</a><br />
<a href="#i997579">SET_INDEX_STATS Procedures</a><br />
<a href="#i997707">SET_SYSTEM_STATS Procedure</a><br />
<a href="#i997763">SET_TABLE_STATS Procedure</a><br />
<br />
<a href="#i1036689">GET_COLUMN_STATS Procedures</a><br />
<a href="#i1036796">GET_INDEX_STATS Procedures</a><br />
<a href="#i1036927">GET_SYSTEM_STATS Procedure</a><br />
<a href="#i1037003">GET_TABLE_STATS Procedure</a><br />
<p>In the special versions of the <code>SET_*_STATS</code> procedures for setting user-defined statistics, the following, if provided, are stored in the dictionary or external statistics table:</p>
<ul>
<li>
<p>User-defined statistics (<code>extstats</code>)</p>
</li>
<li>
<p>The statistics type schema name (<code>statsschema</code>)</p>
</li>
<li>
<p>The statistics type name (<code>statsname</code>)</p>
</li>
</ul>
<p>The user-defined statistics and the corresponding statistics type are inserted into the <code>USTATS$</code> dictionary table. You can specify user-defined statistics without specifying the statistics type name.</p>
<p>The special versions of the <code>GET_*_STATS</code> procedures return user-defined statistics and the statistics type owner and name as <code>OUT</code> arguments corresponding to the schema object specified. If user-defined statistics are not collected, <code>NULL</code> values are returned.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1044993"></a>Deleting Statistics</p>
<p>The <code>DELETE_*</code> procedures delete both user-defined statistics and the standard statistics for the given schema object.</p>
<br />
<a href="#i1035206">DELETE_COLUMN_STATS Procedure</a><br />
<a href="#i1035352">DELETE_DATABASE_STATS Procedure</a><br />
<a href="#i1042571">DELETE_DICTIONARY_STATS Procedure</a><br />
<a href="#i1039357">DELETE_FIXED_OBJECTS_STATS Procedure</a><br />
<a href="#i1035428">DELETE_INDEX_STATS Procedure</a><br />
<a href="#i1035494">DELETE_SCHEMA_STATS Procedure</a><br />
<a href="#i1035583">DELETE_SYSTEM_STATS Procedure</a><br />
<a href="#i1035962">DELETE_TABLE_STATS Procedure</a></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i996835"></a>Transferring Statistics</p>
<p>Use the following procedures for creating and dropping the user statistics table.</p>
<br />
<a href="#i1035018">CREATE_STAT_TABLE Procedure</a><br />
<a href="#i1035659">DROP_STAT_TABLE Procedure</a><br />
<p>Use the following procedures to transfer statistics</p>
<ul>
<li>
<p>from the dictionary to a user statistics table (<code>EXPORT_</code>*)</p>
</li>
<li>
<p>from a user statistics table to the dictionary (<code>IMPORT_</code>*)</p>
</li>
</ul>
<br />
<a href="#i1035669">EXPORT_COLUMN_STATS Procedure</a><br />
<a href="#i1041371">EXPORT_DATABASE_STATS Procedure</a><br />
<a href="#i1042811">EXPORT_DICTIONARY_STATS Procedure</a><br />
<a href="#i1041507">EXPORT_FIXED_OBJECTS_STATS Procedure</a><br />
<a href="#i1041496">EXPORT_INDEX_STATS Procedure</a><br />
<a href="#i1036059">EXPORT_SCHEMA_STATS Procedure</a><br />
<a href="#i1035776">EXPORT_SYSTEM_STATS Procedure</a><br />
<a href="#i1035814">EXPORT_TABLE_STATS Procedure</a><br />
<br />
<a href="#i1037153">IMPORT_COLUMN_STATS Procedure</a><br />
<a href="#BABFAFCF">IMPORT_DATABASE_STATS Procedure</a><br />
<a href="#i1043013">IMPORT_DICTIONARY_STATS Procedure</a><br />
<a href="#i1041649">IMPORT_FIXED_OBJECTS_STATS Procedure</a><br />
<a href="#i1037276">IMPORT_INDEX_STATS Procedure</a><br />
<a href="#i1037487">IMPORT_SCHEMA_STATS Procedure</a><br />
<a href="#i1037380">IMPORT_SYSTEM_STATS Procedure</a><br />
<a href="#i1037419">IMPORT_TABLE_STATS Procedure</a></div>
<!-- class="refsubsect" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle does not support export or import of statistics across databases of different character sets.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1045149"></a>Locking or Unlocking Statistics</p>
<p>Use the following procedures to lock and unlock statistics on objects.</p>
<br />
<a href="#i1043184">LOCK_SCHEMA_STATS Procedure</a><br />
<a href="#i1043993">LOCK_TABLE_STATS Procedure</a><br />
<br />
<a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a><br />
<a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a><br />
<p>The <code>LOCK_*</code> procedures either freeze the current set of the statistics or to keep the statistics empty (uncollected).When statistics on a table are locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1045150"></a>Restoring and Purging Statistics History</p>
<p>Use the following procedures to restore statistics as of a specified timestamp. This is useful in case newly collected statistics leads to some sub-optimal execution plans and the administrator wants to revert to the previous set of statistics.</p>
<br />
<a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a><br />
<a href="#i1047724">RESTORE_DICTIONARY_STATS Procedure</a><br />
<a href="#i1047603">RESTORE_FIXED_OBJECTS_STATS Procedure</a><br />
<a href="#i1047376">RESTORE_SCHEMA_STATS Procedure</a><br />
<a href="#i1049804">RESTORE_SYSTEM_STATS Procedure</a><br />
<a href="#i1046561">RESTORE_TABLE_STATS Procedure</a><br />
<p>Whenever statistics in dictionary are modified, old versions of statistics are saved automatically for future restoring. The old statistics are purged automatically at regular intervals based on the statistics history retention setting and the time of recent statistics gathering performed in the system. Retention is configurable using the <a href="#i1048060">ALTER_STATS_HISTORY_RETENTION Procedure</a>.</p>
<p>The other <code>DBMS_STATS</code> procedures related to restoring statistics are:</p>
<ul>
<li>
<p><a href="#i1047896">PURGE_STATS Procedure</a>: This procedure lets you manually purge old versions beyond a time stamp.</p>
</li>
<li>
<p><a href="#i1048205">GET_STATS_HISTORY_RETENTION Function</a>: This function gets the current statistics history retention value.</p>
</li>
<li>
<p><a href="#i1050595">GET_STATS_HISTORY_AVAILABILITY Function</a>: This function gets the oldest time stamp where statistics history is available. Users cannot restore statistics to a time stamp older than the oldest time stamp.</p>
</li>
</ul>
<p><code>RESTORE_*</code> operations are not supported for user defined statistics.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CIHGCEAA"></a>User-Defined Statistics</p>
<p>The <code>DBMS_STATS</code> package supports operations on user-defined statistics. When a domain index or column is associated with a statistics type (using the <code>associate</code> statement), operations on the index or column manipulate user-defined statistics. For example, gathering statistics for a domain index (for which an association with a statistics type exists) using the <a href="#i1036796">GET_INDEX_STATS Procedures</a> invokes the user-defined statistics collection method of the associated statistics type. Similarly, delete, transfer, import, and export operations manipulate user-defined statistics.</p>
<p><code>SET_*</code> and <code>GET_*</code> operations for user-defined statistics are also supported using a special version of the <code>SET</code> and <code>GET</code> interfaces for columns and indexes.</p>
<p><code>EXPORT_*</code>, <code>IMPORT_*</code> and <code>RESTORE_*</code> operations are not supported for user defined statistics.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABJFHJJ"></a>Pending Statistics</p>
<p>The package gather statistics and stores it in the dictionary by default. User's can store these statistics in the system's private area instead of the dictionary by turning the <code>PUBLISH</code> option to <code>FALSE</code> using the <code>SET*PREFS</code> procedures. The default value for <code>PUBLISH</code> is <code>TRUE</code>.The statistics stored in private area are not used by Cost Based Optimizer unless parameter <code>optimizer_use_pending_statistics</code> is set to <code>TRUE</code>. The default value of this parameter is <code>FALSE</code> and this boolean parameter can be set at the session/system level. Users can verify the impact of the new statistics on query plans by using the pending statistics on a session.</p>
<p>Pending statistics provide a mechanism to verify the impact of the new statistics on query plans before making them available for general use. There are two scenarios to verify the query plans:</p>
<ul>
<li>
<p>Export the pending statistics (use the <a href="#BEIEBEAE">EXPORT_PENDING_STATS Procedure</a>) to a test system, then run the query workload and check the performance or plans.</p>
</li>
<li>
<p>Set <code>optimizer_use_pending_statistics</code> to <code>TRUE</code> in a session on the system where pending statistics have been gathered, run the workload, and check the performance or plans.</p>
</li>
</ul>
<p>Once the performance or query plans have been verified, the pending statistics can be published (run the <a href="#BEIDCHEJ">PUBLISH_PENDING_STATS Procedure</a>) if the performance is acceptable or delete (run the <a href="#BEIJGHFD">DELETE_PENDING_STATS Procedure</a>) if not.</p>
<p>Pending statistics can be published, exported, or deleted. The following procedures are provided to manage pending statistics:</p>
<ul>
<li>
<p><a href="#BEIJGHFD">DELETE_PENDING_STATS Procedure</a></p>
</li>
<li>
<p><a href="#BEIEBEAE">EXPORT_PENDING_STATS Procedure</a></p>
</li>
<li>
<p><a href="#BEIDCHEJ">PUBLISH_PENDING_STATS Procedure</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABIIEJA"></a>Comparing Statistics</p>
<p>The <code>DIFF_TABLE_STATS_</code>* statistics can be used to compare statistics for a table from two different sources. The statistics can be from:</p>
<ul>
<li>
<p>two different user statistics tables</p>
</li>
<li>
<p>a single user statistics table containing two sets of statistics that can be identified using statids</p>
</li>
<li>
<p>a user statistics table and dictionary history</p>
</li>
<li>
<p>pending statistics</p>
</li>
</ul>
<p>The functions also compare the statistics of the dependent objects (indexes, columns, partitions). They displays statistics of the object(s) from both sources if the difference between those statistics exceeds a certain threshold (%). The threshold can be specified as an argument to the function, with a default of 10%. The statistics corresponding to the first source (<code>stattab1</code> or <code>time1</code>) will be used as basis for computing the differential percentage.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABDGGEE"></a>Extended Statistics</p>
<p>This package allows you to collect statistics for column groups and expressions (known as "statistics extensions"). The statistics collected for column groups and expressions are called "extended statistics".</p>
<p>Statistics on Column groups are used by optimizer for accounting correlation between columns. For example, if a query has predicates c1=1 and c2=1 and if there are statistics on (c1, c2), the optimizer will use this statistics for estimating the combined selectivity of the predicates.The expression statistics are used by optimizer for estimating selectivity of predicates on those expressions. The extended statistics are similar to column statistics and the procedures that take columns names will accept extension names in place of column names.</p>
<p>Related subprograms:</p>
<ul>
<li>
<p><a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a></p>
</li>
<li>
<p><a href="#BABEAECF">DROP_EXTENDED_STATS Procedure</a></p>
</li>
<li>
<p><a href="#BABCIFCJ">SHOW_EXTENDED_STATS_NAME Function</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68492" class="refsect2"><a id="i1049539"></a>
<hr />
<h3 class="refsect2">Deprecated Subprograms</h3>
<p>The following subprograms are obsolete with Release 11<span class="italic">g</span>:</p>
<ul>
<li>
<p><a href="#i1048775">GET_PARAM Function</a></p>
<p>Instead, use <a href="#BEICCEDB">GET_PREFS Function</a></p>
</li>
<li>
<p><a href="#i1048566">SET_PARAM Procedure</a></p>
<p>Instead, use <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a></p>
</li>
<li>
<p><a href="#BABGHFFF">RESET_PARAM_DEFAULTS Procedure</a></p>
<p>Instead use <a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a></p>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS68493" class="refsect2"><a id="i1049486"></a>
<hr />
<h3 class="refsect2">Examples</h3>
<ul>
<li>
<p><a href="#i1044335">Using Pending Statistics</a></p>
</li>
<li>
<p><a href="#i1044340">Gathering Daytime System Statistics</a></p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1044335"></a>Using Pending Statistics</p>
<p>Assume many modifications have been made to the <code>employees</code> table since the last time statistics were gathered. To ensure that the cost-based optimizer is still picking the best plan, statistics should be gathered once again; however, the user is concerned that new statistics will cause the optimizer to choose bad plans when the current ones are acceptable. The user can do the following:</p>
<pre>
EXEC DBMS_STATS.SET_TABLE_PREFS('hr', 'employees', 'PUBLISH', 'false');
</pre>
<p>By setting the employees tables publish preference to <code>FALSE</code>, any statistics gather from now on will not be automatically published. The newly gathered statistics will be marked as pending.</p>
<pre>
EXEC DBMS_STATS.GATHER_TABLE_STATS ('hr', 'employees');
</pre>
<p>To test the newly gathered statistics, set <code>optimizer_pending_statistics</code> to <code>TRUE</code> in a session and run sample queries.</p>
<pre>
ALTER SESSION SET optimizer_use_pending_statistics = TRUE;
</pre>
<p>If the pending statistics generate sound execution plans, they can be published:</p>
<pre>
EXEC DBMS_STATS.PUBLISH_PENDING_STATS('hr', 'employees');
EXEC DBMS_STATS.SET_TABLE_PREF('hr', 'employees', 'PUBLISH', 'true'); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i1044340"></a>Gathering Daytime System Statistics</p>
<p>Assume that you want to perform database application processing OLTP transactions during the day and run reports at night.</p>
<p>To collect daytime system statistics, gather statistics for 720 minutes. Store the statistics in the <code>MYSTATS</code> table.</p>
<pre>
BEGIN
   DBMS_STATS.GATHER_SYSTEM_STATS (
      interval =&gt; 720,
      stattab  =&gt; 'mystats',
      statid   =&gt; 'OLTP');
END;
</pre>
<p>To collect nighttime system statistics, gather statistics for 720 minutes. Store the statistics in the <code>MYSTATS</code> table.</p>
<pre>
BEGIN
   DBMS_STATS.GATHER_SYSTEM_STATS (
      interval =&gt; 720,
      stattab  =&gt; 'mystats',
      statid   =&gt; 'OLAP');
END;
</pre>
<p>Update the dictionary with the gathered statistics.</p>
<pre>
VARIABLE   jobno   number;
BEGIN
   DBMS_JOB.SUBMIT (:jobno, 'DBMS_STATS.IMPORT_SYSTEM_STATS
   (''mystats'',''OLTP'');'
   sysdate, 'sysdate + 1');
   COMMIT;
END;

BEGIN
   DBMS_JOB.SUBMIT (:jobno, 'DBMS_STATS.IMPORT_SYSTEM_STATS
   (''mystats'',''OLAP'');'
   sysdate + 0.5, 'sysdate + 1');
   COMMIT;
END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CIHGBFIC"></a>
<hr />
<div id="ARPLS68494" class="refsect1">
<h2 class="refsect1">Summary of DBMS_STATS Subprograms</h2>
<div id="ARPLS68495" class="tblformal">
<p class="titleintable"><a id="sthref9883"></a><a id="sthref9884"></a>Table 142-2 <span class="bolditalic">DBMS_STATS Package Subprograms</span></p>
<table class="cellalignment1229" title="DBMS_STATS Package Subprograms" summary="This table lists the DBMS_STATS subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><a href="#i1048060">ALTER_STATS_HISTORY_RETENTION Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p>Changes the statistics history retention value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><a href="#i1035014">CONVERT_RAW_VALUE Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p>Convert the internal representation of a minimum or maximum value into a datatype-specific value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><a href="#i1038351">CONVERT_RAW_VALUE_NVARCHAR Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p>Convert the internal representation of a minimum or maximum value into a datatype-specific value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t6" headers="r1c1-t6">
<p><a href="#i1038352">CONVERT_RAW_VALUE_ROWID Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t6 r1c2-t6">
<p>Convert the internal representation of a minimum or maximum value into a datatype-specific value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t6" headers="r1c1-t6">
<p><a href="#BABIIIHG">COPY_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t6 r1c2-t6">
<p>Copies the statistics of the source [sub] partition to the destination [sub] partition after scaling</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t6" headers="r1c1-t6">
<p><a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t6 r1c2-t6">
<p>Creates a virtual column for a user specified column group or an expression in a table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t6" headers="r1c1-t6">
<p><a href="#i1035018">CREATE_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t6 r1c2-t6">
<p>Creates a table with name <code>stattab</code> in ownname's schema which is capable of holding statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t6" headers="r1c1-t6">
<p><a href="#i1035206">DELETE_COLUMN_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t6 r1c2-t6">
<p>Deletes column-related statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t6" headers="r1c1-t6">
<p><a href="#BEIHGEBD">DELETE_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t6 r1c2-t6">
<p>Deletes the statistics preferences of all the tables, excluding the tables owned by Oracle</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t6" headers="r1c1-t6">
<p><a href="#i1035352">DELETE_DATABASE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t6 r1c2-t6">
<p>Deletes statistics for the entire database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t6" headers="r1c1-t6">
<p><a href="#i1042571">DELETE_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t6 r1c2-t6">
<p>Deletes statistics for all dictionary schemas ('<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t6" headers="r1c1-t6">
<p><a href="#i1039357">DELETE_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t6 r1c2-t6">
<p>Deletes statistics of all fixed tables</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t6" headers="r1c1-t6">
<p><a href="#i1035428">DELETE_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t6 r1c2-t6">
<p>Deletes index-related statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t6" headers="r1c1-t6">
<p><a href="#BEIJGHFD">DELETE_PENDING_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t6 r1c2-t6">
<p>Deletes the private statistics that have been collected but have not been published</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t6" headers="r1c1-t6">
<p><a href="#BEIFAGDH">DELETE_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r16c1-t6 r1c2-t6">
<p>Deletes the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t6" headers="r1c1-t6">
<p><a href="#i1035494">DELETE_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r17c1-t6 r1c2-t6">
<p>Deletes schema-related statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t6" headers="r1c1-t6">
<p><a href="#i1035583">DELETE_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r18c1-t6 r1c2-t6">
<p>Deletes system statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t6" headers="r1c1-t6">
<p><a href="#BEIEGCHI">DELETE_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r19c1-t6 r1c2-t6">
<p>Deletes statistics preferences of the specified table in the specified schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t6" headers="r1c1-t6">
<p><a href="#i1035962">DELETE_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r20c1-t6 r1c2-t6">
<p>Deletes table-related statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r21c1-t6" headers="r1c1-t6">
<p><a href="#BEIDHICC">DIFF_TABLE_STATS_IN_HISTORY Function</a></p>
</td>
<td class="cellalignment1228" headers="r21c1-t6 r1c2-t6">
<p>Compares statistics for a table from two timestamps in past and compare the statistics as of that timestamps</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r22c1-t6" headers="r1c1-t6">
<p><a href="#BABCBGHG">DIFF_TABLE_STATS_IN_PENDING Function</a></p>
</td>
<td class="cellalignment1228" headers="r22c1-t6 r1c2-t6">
<p>Compares pending statistics and statistics as of a timestamp or statistics from dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r23c1-t6" headers="r1c1-t6">
<p><a href="#BEICGJDD">DIFF_TABLE_STATS_IN_STATTAB Function</a></p>
</td>
<td class="cellalignment1228" headers="r23c1-t6 r1c2-t6">
<p>Compares statistics for a table from two different sources</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r24c1-t6" headers="r1c1-t6">
<p><a href="#BABEAECF">DROP_EXTENDED_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r24c1-t6 r1c2-t6">
<p>Drops the statistics entry that is created for the user specified extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r25c1-t6" headers="r1c1-t6">
<p><a href="#i1035659">DROP_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r25c1-t6 r1c2-t6">
<p>Drops a user statistics table created by <code>CREATE_STAT_TABLE</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r26c1-t6" headers="r1c1-t6">
<p><a href="#i1035669">EXPORT_COLUMN_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r26c1-t6 r1c2-t6">
<p>Retrieves statistics for a particular column and stores them in the user statistics table identified by <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r27c1-t6" headers="r1c1-t6">
<p><a href="#BEIDACAE">EXPORT_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r27c1-t6 r1c2-t6">
<p>Exports the statistics preferences of all the tables, excluding the tables owned by Oracle</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r28c1-t6" headers="r1c1-t6">
<p><a href="#i1041371">EXPORT_DATABASE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r28c1-t6 r1c2-t6">
<p>Retrieves statistics for all objects in the database and stores them in the user statistics table identified by <code>statown</code>.<code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r29c1-t6" headers="r1c1-t6">
<p><a href="#i1042811">EXPORT_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r29c1-t6 r1c2-t6">
<p>Retrieves statistics for all dictionary schemas ('<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas) and stores them in the user statistics table identified by <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r30c1-t6" headers="r1c1-t6">
<p><a href="#i1041507">EXPORT_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r30c1-t6 r1c2-t6">
<p>Retrieves statistics for fixed tables and stores them in the user statistics table identified by <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r31c1-t6" headers="r1c1-t6">
<p><a href="#i1041496">EXPORT_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r31c1-t6 r1c2-t6">
<p>Retrieves statistics for a particular index and stores them in the user statistics table identified by <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r32c1-t6" headers="r1c1-t6">
<p><a href="#BEIEBEAE">EXPORT_PENDING_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r32c1-t6 r1c2-t6">
<p>Exports the statistics gathered and stored as pending</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r33c1-t6" headers="r1c1-t6">
<p><a href="#BEIFJJDF">EXPORT_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r33c1-t6 r1c2-t6">
<p>Exports the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r34c1-t6" headers="r1c1-t6">
<p><a href="#i1036059">EXPORT_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r34c1-t6 r1c2-t6">
<p>Retrieves statistics for all objects in the schema identified by ownname and stores them in the user statistics table identified by <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r35c1-t6" headers="r1c1-t6">
<p><a href="#i1035776">EXPORT_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r35c1-t6 r1c2-t6">
<p>Retrieves system statistics and stores them in the user statistics table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r36c1-t6" headers="r1c1-t6">
<p><a href="#BEIBGBHF">EXPORT_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r36c1-t6 r1c2-t6">
<p>Exports statistics preferences of the specified table in the specified schema into the specified statistics table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r37c1-t6" headers="r1c1-t6">
<p><a href="#i1035814">EXPORT_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r37c1-t6 r1c2-t6">
<p>Retrieves statistics for a particular table and stores them in the user statistics table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r38c1-t6" headers="r1c1-t6">
<p><a href="#i1036624">FLUSH_DATABASE_MONITORING_INFO Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r38c1-t6 r1c2-t6">
<p>Flushes in-memory monitoring information for all the tables to the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r39c1-t6" headers="r1c1-t6">
<p><a href="#i1036194">GATHER_DATABASE_STATS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r39c1-t6 r1c2-t6">
<p>Gathers statistics for all objects in the database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r40c1-t6" headers="r1c1-t6">
<p><a href="#i1055451">GATHER_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r40c1-t6 r1c2-t6">
<p>Gathers statistics for dictionary schemas '<code>SYS</code>', '<code>SYSTEM</code>' and schemas of RDBMS components</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r41c1-t6" headers="r1c1-t6">
<p><a href="#i1039162">GATHER_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r41c1-t6 r1c2-t6">
<p>Gathers statistics of fixed objects</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r42c1-t6" headers="r1c1-t6">
<p><a href="#i1036276">GATHER_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r42c1-t6 r1c2-t6">
<p>Gathers index statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r43c1-t6" headers="r1c1-t6">
<p><a href="#i1036456">GATHER_SCHEMA_STATS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r43c1-t6 r1c2-t6">
<p>Gathers statistics for all objects in a schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r44c1-t6" headers="r1c1-t6">
<p><a href="#i1036401">GATHER_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r44c1-t6 r1c2-t6">
<p>Gathers system statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r45c1-t6" headers="r1c1-t6">
<p><a href="#i1036461">GATHER_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r45c1-t6 r1c2-t6">
<p>Gathers table and column (and index) statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r46c1-t6" headers="r1c1-t6">
<p><a href="#i1036560">GENERATE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r46c1-t6 r1c2-t6">
<p>Generates object statistics from previously collected statistics of related objects</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r47c1-t6" headers="r1c1-t6">
<p><a href="#i1036689">GET_COLUMN_STATS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r47c1-t6 r1c2-t6">
<p>Gets all column-related information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r48c1-t6" headers="r1c1-t6">
<p><a href="#i1036796">GET_INDEX_STATS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r48c1-t6 r1c2-t6">
<p>Gets all index-related information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r49c1-t6" headers="r1c1-t6">
<p><a href="#i1048775">GET_PARAM Function</a></p>
</td>
<td class="cellalignment1228" headers="r49c1-t6 r1c2-t6">
<p>Gets the default value of parameters of <code>DBMS_STATS</code> procedures [see <a href="#i1049539">Deprecated Subprograms</a> ]</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r50c1-t6" headers="r1c1-t6">
<p><a href="#BEICCEDB">GET_PREFS Function</a></p>
</td>
<td class="cellalignment1228" headers="r50c1-t6 r1c2-t6">
<p>Gets the default value of the specified preference</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r51c1-t6" headers="r1c1-t6">
<p><a href="#i1050595">GET_STATS_HISTORY_AVAILABILITY Function</a></p>
</td>
<td class="cellalignment1228" headers="r51c1-t6 r1c2-t6">
<p>Gets the oldest timestamp where statistics history is available</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r52c1-t6" headers="r1c1-t6">
<p><a href="#i1048205">GET_STATS_HISTORY_RETENTION Function</a></p>
</td>
<td class="cellalignment1228" headers="r52c1-t6 r1c2-t6">
<p>Returns the current retention value</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r53c1-t6" headers="r1c1-t6">
<p><a href="#i1036927">GET_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r53c1-t6 r1c2-t6">
<p>Gets system statistics from stattab, or from the dictionary if stattab is <code>NULL</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r54c1-t6" headers="r1c1-t6">
<p><a href="#i1037003">GET_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r54c1-t6 r1c2-t6">
<p>Gets all table-related information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r55c1-t6" headers="r1c1-t6">
<p><a href="#i1037153">IMPORT_COLUMN_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r55c1-t6 r1c2-t6">
<p>Retrieves statistics for a particular column from the user statistics table identified by <code>stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r56c1-t6" headers="r1c1-t6">
<p><a href="#BEIGFDAI">IMPORT_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r56c1-t6 r1c2-t6">
<p>Imports the statistics preferences of all the tables, excluding the tables owned by Oracle</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r57c1-t6" headers="r1c1-t6">
<p><a href="#BABFAFCF">IMPORT_DATABASE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r57c1-t6 r1c2-t6">
<p>Retrieves statistics for all objects in the database from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r58c1-t6" headers="r1c1-t6">
<p><a href="#i1043013">IMPORT_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r58c1-t6 r1c2-t6">
<p>Retrieves statistics for all dictionary schemas ('<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas) from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r59c1-t6" headers="r1c1-t6">
<p><a href="#i1041649">IMPORT_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r59c1-t6 r1c2-t6">
<p>Retrieves statistics for fixed tables from the user statistics table identified by <code>stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r60c1-t6" headers="r1c1-t6">
<p><a href="#i1037276">IMPORT_INDEX_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r60c1-t6 r1c2-t6">
<p>Retrieves statistics for a particular index from the user statistics table identified by <code>stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r61c1-t6" headers="r1c1-t6">
<p><a href="#BEIHBJBH">IMPORT_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r61c1-t6 r1c2-t6">
<p>Imports the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r62c1-t6" headers="r1c1-t6">
<p><a href="#i1037487">IMPORT_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r62c1-t6 r1c2-t6">
<p>Retrieves statistics for all objects in the schema identified by <code>ownname</code> from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r63c1-t6" headers="r1c1-t6">
<p><a href="#i1037380">IMPORT_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r63c1-t6 r1c2-t6">
<p>Retrieves system statistics from the user statistics table and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r64c1-t6" headers="r1c1-t6">
<p><a href="#BEIDGEFG">IMPORT_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r64c1-t6 r1c2-t6">
<p>Sets the statistics preferences of the specified table in the specified schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r65c1-t6" headers="r1c1-t6">
<p><a href="#i1037419">IMPORT_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r65c1-t6 r1c2-t6">
<p>Retrieves statistics for a particular table from the user statistics table identified by <code>stattab</code> and stores them in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r66c1-t6" headers="r1c1-t6">
<p><a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r66c1-t6 r1c2-t6">
<p>Locks statistics for a partition</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r67c1-t6" headers="r1c1-t6">
<p><a href="#i1043184">LOCK_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r67c1-t6 r1c2-t6">
<p>Locks the statistics of all tables of a schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r68c1-t6" headers="r1c1-t6">
<p><a href="#i1043993">LOCK_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r68c1-t6 r1c2-t6">
<p>Locks the statistics on the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r69c1-t6" headers="r1c1-t6">
<p><a href="#CHDEJICB">MERGE_COL_USAGE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r69c1-t6 r1c2-t6">
<p>Merges column usage information from a source database, by means of a dblink, into the local database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r70c1-t6" headers="r1c1-t6">
<p><a href="#i1035422">PREPARE_COLUMN_VALUES Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r70c1-t6 r1c2-t6">
<p>Converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle's internal representation for future storage using the <a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r71c1-t6" headers="r1c1-t6">
<p><a href="#i1038038">PREPARE_COLUMN_VALUES_NVARCHAR2 Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r71c1-t6 r1c2-t6">
<p>Converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle's internal representation for future storage using the <a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r72c1-t6" headers="r1c1-t6">
<p><a href="#i1038039">PREPARE_COLUMN_VALUES_ROWID Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r72c1-t6 r1c2-t6">
<p>Converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle's internal representation for future storage using the <a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r73c1-t6" headers="r1c1-t6">
<p><a href="#BEIDCHEJ">PUBLISH_PENDING_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r73c1-t6 r1c2-t6">
<p>Publishes the statistics gathered and stored as pending</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r74c1-t6" headers="r1c1-t6">
<p><a href="#i1047896">PURGE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r74c1-t6 r1c2-t6">
<p>Purges old versions of statistics saved in the dictionary</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r75c1-t6" headers="r1c1-t6">
<p><a href="#BABIBHAE">REPORT_COL_USAGE Function</a></p>
</td>
<td class="cellalignment1228" headers="r75c1-t6 r1c2-t6">
<p>Reports the recorded column (group) usage information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r76c1-t6" headers="r1c1-t6">
<p><a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r76c1-t6 r1c2-t6">
<p>Resets the default values of all parameters to Oracle recommended values</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r77c1-t6" headers="r1c1-t6">
<p><a href="#BABGHFFF">RESET_PARAM_DEFAULTS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r77c1-t6 r1c2-t6">
<p>Resets global preferences to default values [see <a href="#i1049539">Deprecated Subprograms</a> ]</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r78c1-t6" headers="r1c1-t6">
<p><a href="#i1047724">RESTORE_DICTIONARY_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r78c1-t6 r1c2-t6">
<p>Restores statistics of all dictionary tables (tables of '<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas) as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r79c1-t6" headers="r1c1-t6">
<p><a href="#i1047603">RESTORE_FIXED_OBJECTS_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r79c1-t6 r1c2-t6">
<p>Restores statistics of all fixed tables as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r80c1-t6" headers="r1c1-t6">
<p><a href="#i1047376">RESTORE_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r80c1-t6 r1c2-t6">
<p>Restores statistics of all tables of a schema as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r81c1-t6" headers="r1c1-t6">
<p><a href="#i1049804">RESTORE_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r81c1-t6 r1c2-t6">
<p>Restores statistics of all tables of a schema as of a specified timestamp</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r82c1-t6" headers="r1c1-t6">
<p><a href="#i1046561">RESTORE_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r82c1-t6 r1c2-t6">
<p>Restores statistics of a table as of a specified timestamp (as_of_timestamp), as well as statistics of associated indexes and columns</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r83c1-t6" headers="r1c1-t6">
<p><a href="#i997460">SEED_COL_USAGE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r83c1-t6 r1c2-t6">
<p>Iterates over the SQL statements in the specified SQL tuning set, compiles them and seeds column usage information for the columns that appear in these statements</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r84c1-t6" headers="r1c1-t6">
<p><a href="#CHDHGCED">SET_COLUMN_STATS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r84c1-t6 r1c2-t6">
<p>Sets column-related information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r85c1-t6" headers="r1c1-t6">
<p><a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r85c1-t6 r1c2-t6">
<p>Sets the statistics preferences of all the tables, excluding the tables owned by Oracle</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r86c1-t6" headers="r1c1-t6">
<p><a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r86c1-t6 r1c2-t6">
<p>Sets the global statistics preferences</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r87c1-t6" headers="r1c1-t6">
<p><a href="#i997579">SET_INDEX_STATS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r87c1-t6 r1c2-t6">
<p>Sets index-related information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r88c1-t6" headers="r1c1-t6">
<p><a href="#i1048566">SET_PARAM Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r88c1-t6 r1c2-t6">
<p>Sets default values for parameters of <code>DBMS_STATS</code> procedures [see <a href="#i1049539">Deprecated Subprograms</a> ]</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r89c1-t6" headers="r1c1-t6">
<p><a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r89c1-t6 r1c2-t6">
<p>Sets the statistics preferences of all the tables owned by the specified owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r90c1-t6" headers="r1c1-t6">
<p><a href="#i997707">SET_SYSTEM_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r90c1-t6 r1c2-t6">
<p>Sets system statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r91c1-t6" headers="r1c1-t6">
<p><a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r91c1-t6 r1c2-t6">
<p>Sets the statistics preferences of the specified table in the specified schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r92c1-t6" headers="r1c1-t6">
<p><a href="#i997763">SET_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r92c1-t6 r1c2-t6">
<p>Sets table-related information</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r93c1-t6" headers="r1c1-t6">
<p><a href="#BABCIFCJ">SHOW_EXTENDED_STATS_NAME Function</a></p>
</td>
<td class="cellalignment1228" headers="r93c1-t6 r1c2-t6">
<p>Returns the name of the virtual column that is created for the user-specified extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r94c1-t6" headers="r1c1-t6">
<p><a href="#BABDDHJI">UNLOCK_PARTITION_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r94c1-t6 r1c2-t6">
<p>Unlocks the statistics for a partition</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r95c1-t6" headers="r1c1-t6">
<p><a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r95c1-t6 r1c2-t6">
<p>Unlocks the statistics on all the table in a schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r96c1-t6" headers="r1c1-t6">
<p><a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r96c1-t6 r1c2-t6">
<p>Unlocks the statistics on the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r97c1-t6" headers="r1c1-t6">
<p><a href="#i1039960">UPGRADE_STAT_TABLE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r97c1-t6 r1c2-t6">
<p>Upgrades user statistics on an older table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS68496" class="refsect2"><a id="i1048060"></a>
<hr />
<h3 class="refsect2"><a id="sthref9885"></a>ALTER_STATS_HISTORY_RETENTION Procedure</h3>
<p>This procedure changes the statistics history retention value. Statistics history retention is used by both the automatic purge and <a href="#i1047896">PURGE_STATS Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9886"></a>Syntax</p>
<pre>
DBMS_STATS.ALTER_STATS_HISTORY_RETENTION (
   retention       IN     NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9887"></a>Parameters</p>
<div id="ARPLS68497" class="tblformal">
<p class="titleintable"><a id="sthref9888"></a><a id="sthref9889"></a>Table 142-3 ALTER_STATS_HISTORY_RETENTION Procedure Parameters</p>
<table class="cellalignment1229" title="ALTER_STATS_HISTORY_RETENTION Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.ALTER_STATS_HISTORY_RETENTION subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Parameter</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>retention</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>The retention time in days. The statistics history will be retained for at least these many number of days.The valid range is [1,365000]. Also you can use the following values for special purposes:</p>
<ul>
<li>
<p>-1 :Statistics history is never purged by automatic purge</p>
</li>
<li>
<p>0 : Old statistics are never saved. The automatic purge will delete all statistics history</p>
</li>
<li>
<p><code>NULL</code> : Change statistics history retention to default value</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9890"></a>Usage Notes</p>
<p>To run this procedure, you must have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9891"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68498" class="refsect2"><a id="i1035014"></a>
<hr />
<h3 class="refsect2"><a id="sthref9892"></a>CONVERT_RAW_VALUE Procedures</h3>
<p>This procedure converts the internal representation of a minimum or maximum value into a datatype-specific value. The minval and maxval fields of the <code>StatRec</code> structure as filled in by <code>GET_COLUMN_STATS</code> or <code>PREPARE_COLUMN_VALUES</code> are appropriate values for input.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9893"></a>Syntax</p>
<pre>
DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT BINARY_FLOAT);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT BINARY_DOUBLE);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT DATE);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT NUMBER);

DBMS_STATS.CONVERT_RAW_VALUE (
   rawval     RAW, 
   resval OUT VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9894"></a>Pragmas</p>
<pre>
pragma restrict_references(convert_raw_value, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9895"></a>Parameters</p>
<div id="ARPLS68499" class="tblformal">
<p class="titleintable"><a id="sthref9896"></a><a id="sthref9897"></a>Table 142-4 CONVERT_RAW_VALUE Procedure Parameters</p>
<table class="cellalignment1229" title="CONVERT_RAW_VALUE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Parameter</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>rawval</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>The raw representation of a column minimum or maximum datatype-specific output parameters</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t8" headers="r1c1-t8">
<p><code>resval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c2-t8">
<p>The converted, type-specific value</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9898"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68500" class="refsect2"><a id="i1038351"></a>
<hr />
<h3 class="refsect2"><a id="sthref9899"></a>CONVERT_RAW_VALUE_NVARCHAR Procedure</h3>
<p>This procedure converts the internal representation of a minimum or maximum value into a datatype-specific value. The minval and maxval fields of the <code>StatRec</code> structure as filled in by <code>GET_COLUMN_STATS</code> or <code>PREPARE_COLUMN_VALUES</code> are appropriate values for input.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9900"></a>Syntax</p>
<pre>
DBMS_STATS.CONVERT_RAW_VALUE_NVARCHAR (
   rawval     RAW, 
   resval OUT NVARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9901"></a>Pragmas</p>
<pre>
pragma restrict_references(convert_raw_value_nvarchar, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9902"></a>Parameters</p>
<div id="ARPLS68501" class="tblformal">
<p class="titleintable"><a id="sthref9903"></a><a id="sthref9904"></a>Table 142-5 CONVERT_RAW_VALUE_NVARCHAR Procedure Parameters</p>
<table class="cellalignment1229" title="CONVERT_RAW_VALUE_NVARCHAR Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE_NVARCHAR subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Parameter</th>
<th class="cellalignment1227" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><code>rawval</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p>The raw representation of a column minimum or maximum datatype-specific output parameters</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t9" headers="r1c1-t9">
<p><code>resval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c2-t9">
<p>The converted, type-specific value</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9905"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68502" class="refsect2"><a id="i1038352"></a>
<hr />
<h3 class="refsect2"><a id="sthref9906"></a>CONVERT_RAW_VALUE_ROWID Procedure</h3>
<p>This procedure converts the internal representation of a minimum or maximum value into a datatype-specific value. The minval and maxval fields of the <code>StatRec</code> structure as filled in by <code>GET_COLUMN_STATS</code> or <code>PREPARE_COLUMN_VALUES</code> are appropriate values for input.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9907"></a>Syntax</p>
<pre>
DBMS_STATS.CONVERT_RAW_VALUE_ROWID (
   rawval     RAW, 
   resval OUT ROWID);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9908"></a>Pragmas</p>
<pre>
pragma restrict_references(convert_raw_value_rowid, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9909"></a>Parameters</p>
<div id="ARPLS68503" class="tblformal">
<p class="titleintable"><a id="sthref9910"></a><a id="sthref9911"></a>Table 142-6 CONVERT_RAW_VALUE_ROWID Procedure Parameters</p>
<table class="cellalignment1229" title="CONVERT_RAW_VALUE_ROWID Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Parameter</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>rawval</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p>The raw representation of a column minimum or maximum datatype-specific output parameters</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><code>resval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p>The converted, type-specific value</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9912"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73514" class="refsect2"><a id="BABIIIHG"></a>
<hr />
<h3 class="refsect2"><a id="sthref9913"></a>COPY_TABLE_STATS Procedure</h3>
<p>This procedure copies the statistics of the source [sub] partition to the destination [sub] partition.It also copies statistics of all dependent object such as columns and local indexes. If the statistics forsource are not available then nothing is copied. It can optionally scale the statistics (such as the number of blks, or number of rows) based on the given <code>scale_factor</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9914"></a>Syntax</p>
<pre>
DBMS_STATS.COPY_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   srcpartname      VARCHAR2,
   dstpartname      VARCHAR2, 
   scale_factor     VARCHAR2 DEFAULT 1,
   flags            NUMBER DEFAULT,
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9915"></a>Parameters</p>
<div id="ARPLS73515" class="tblformal">
<p class="titleintable"><a id="sthref9916"></a><a id="sthref9917"></a>Table 142-7 COPY_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="COPY_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Parameter</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>Schema of the table of source and destination [sub] partitions</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t11" headers="r1c1-t11">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c2-t11">
<p>Table name of source and destination [sub] partitions</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t11" headers="r1c1-t11">
<p><code>srcpartname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t11 r1c2-t11">
<p>Source [sub] partition</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t11" headers="r1c1-t11">
<p><code>dtspartname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t11 r1c2-t11">
<p>Destination [sub] partition</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t11" headers="r1c1-t11">
<p><code>scale_factor</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t11 r1c2-t11">
<p>Scale factor to scale <code>nblks</code>, <code>nrows</code> etc. in <code>dstpartname</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t11" headers="r1c1-t11">
<p><code>flags</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t11 r1c2-t11">
<p>For internal Oracle use (should be left as <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t11" headers="r1c1-t11">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t11 r1c2-t11">
<p>When value of this argument is <code>TRUE</code>, copy statistics even if locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9918"></a>Exceptions</p>
<p><code>ORA-20000</code>: Invalid partition name</p>
<p><code>ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9919"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>This procedure updates the minimum and maximum values of destination partition for the first partitioning column as follows:</p>
<ul>
<li>
<p>If the partitioning type is <code>HASH</code> the minimum and maximum values of the destination partition are same as that of the source partition.</p>
</li>
<li>
<p>If the partitioning type is <code>LIST</code> then</p>
<ul>
<li>
<p>if the destination partition is a <code>NOT</code> <code>DEFAULT</code> paritition then</p>
<ul>
<li>
<p>the minimum value of the destination partition is set to the minimum value of the value list that describes the destination partition</p>
</li>
<li>
<p>the maximum value of the destination partition is set to the maximum value of the value list that describes the destination partition</p>
</li>
</ul>
</li>
<li>
<p>alternatively, if the destination partition is a <code>DEFAULT</code> paritition, then</p>
<ul>
<li>
<p>the minimum value of the destination partition is set to the minimum value of the source partition</p>
</li>
<li>
<p>the maximum value of the destination partition is set to the maximum value of the source partition</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>If the partitioning type is <code>RANGE</code> then</p>
<ul>
<li>
<p>the minimum value of the destination partition is set to the high bound of previous partition</p>
</li>
<li>
<p>the maximum value of the destination partition is set to the high bound of the destination partition unless the high bound of the destination partition is <code>MAXVALUE</code>, in which case the maximum value of the destination partition is set to the high bound of the previous partition</p>
</li>
</ul>
</li>
</ul>
<p>Note that if the destination partition is the first partition then minimum values are equal to maximum values.</p>
<p>The procedure is is extended to handle the second and subsequent key columns with two additional rules (which do not apply to the first key column) :</p>
<ul>
<li>
<p>If the source partition column's minimum value is equal to its maximum value, and both are equal to the source partition's lower bound, and it has a single distinct value, then the destination partition column's minimum and maximum values are both set to the destination partition's lower bound.</p>
</li>
<li>
<p>IIf the above condition does not apply, the destination partition column's maximum value is set to the greater of the destination partition upper bound and the source partition column's maximum value, with the following exception: if the destination partition is D and its preceding partition is D-1 and the key column to be adjusted is Cn, the maximum value for Cn is set to the upper bound of D (ignoring the maximum value of the source partition column) provided that the upper bounds of the previous key column Cn-1 are the same in partitions D and D-1.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68506" class="refsect2"><a id="BABHFIBI"></a>
<hr />
<h3 class="refsect2"><a id="sthref9920"></a>CREATE_EXTENDED_STATS Function</h3>
<p>This function creates a column statistics entry in the system for a user specified column group or an expression in a table. Statistics for this extension will be gathered when user or auto statistics gathering job gathers statistics for the table. We call statistics for such an extension, "extended statistics". This function returns the name of this newly created entry for the extension.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9921"></a>Syntax</p>
<pre>
DBMS_STATS.CREATE_EXTENDED_STATS (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9922"></a>Parameters</p>
<div id="ARPLS68507" class="tblformal">
<p class="titleintable"><a id="sthref9923"></a><a id="sthref9924"></a>Table 142-8 CREATE_EXTENDED_STATS Function Parameters</p>
<table class="cellalignment1229" title="CREATE_EXTENDED_STATS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.CREATE_EXTENDED_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>Owner name of a table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t12" headers="r1c1-t12">
<p><code>extension</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t12 r1c2-t12">
<p>Can be either a column group or an expression. Suppose the specified table has two column <code>c1</code>, <code>c2</code>. An example column group can be "(<code>c1</code>, <code>c2</code>)" and an example expression can be "(<code>c1</code> + <code>c2</code>)".</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9925"></a>Return Values</p>
<p>This function returns the name of this newly created entry for the extension.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9926"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges / creating extension is not supported</p>
<p><code>ORA-20001</code>: Error when processing extension</p>
<p><code>ORA-20007</code>: Extension already exists</p>
<p><code>ORA-20008</code>: Reached the upper limit on number of extensions</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9927"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>There are nine restrictions on the extension:</p>
<ul>
<li>
<p>The extension cannot contain a virtual column.</p>
</li>
<li>
<p>Extensions cannot be created on tables owned by <code>SYS.</code></p>
</li>
<li>
<p>Extensions cannot be created on cluster tables, index organized tables, temporary tables or external tables.</p>
</li>
<li>
<p>The total number of extensions in a table cannot be greater than a maximum of (20, 10% of number of non-virtual columns in the table).</p>
</li>
<li>
<p>The number of columns in a column group must be in the range [2, 32].</p>
</li>
<li>
<p>A column can not appear more than once in a column group.</p>
</li>
<li>
<p>A column group can not contain expressions.</p>
</li>
<li>
<p>An expression must contain at least one column.</p>
</li>
<li>
<p>An expression can not contain a subquery.</p>
</li>
<li>
<p>The <code>COMPATIBLE</code> parameter needs to be 11.0.0.0.0 or greater</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68508" class="refsect2"><a id="i1035018"></a>
<hr />
<h3 class="refsect2"><a id="sthref9928"></a>CREATE_STAT_TABLE Procedure</h3>
<p>This procedure creates a table with name <code>stattab</code> in <code>ownname</code>'s schema which is capable of holding statistics. The columns and types that compose this table are not relevant as it should be accessed solely through the procedures in this package.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9929"></a>Syntax</p>
<pre>
DBMS_STATS.CREATE_STAT_TABLE (
   ownname  VARCHAR2, 
   stattab  VARCHAR2,
   tblspace VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9930"></a>Parameters</p>
<div id="ARPLS68509" class="tblformal">
<p class="titleintable"><a id="sthref9931"></a><a id="sthref9932"></a>Table 142-9 CREATE_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.CONVERT_RAW_VALUE_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t13">Parameter</th>
<th class="cellalignment1227" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t13" headers="r1c1-t13">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c2-t13">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t13" headers="r1c1-t13">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t13 r1c2-t13">
<p>Name of the table to create. This value should be passed as the <code>stattab</code> parameter to other procedures when the user does not want to modify the dictionary statistics directly.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t13" headers="r1c1-t13">
<p><code>tblspace</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t13 r1c2-t13">
<p>Tablespace in which to create the statistics tables. If none is specified, then they are created in the user's default tablespace.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9933"></a>Exceptions</p>
<p><code>ORA-20000</code>: Table already exists or insufficient privileges</p>
<p><code>ORA-20001</code>: Tablespace does not exist</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9934"></a>Usage Notes</p>
<p>To invoke this procedure you need whichever privileges are required for creating a table in the specified schema.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68510" class="refsect2"><a id="i1035206"></a>
<hr />
<h3 class="refsect2"><a id="sthref9935"></a>DELETE_COLUMN_STATS Procedure</h3>
<p>This procedure deletes column-related statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9936"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_COLUMN_STATS (
   ownname        VARCHAR2, 
   tabname        VARCHAR2, 
   colname        VARCHAR2, 
   partname       VARCHAR2 DEFAULT NULL,
   stattab        VARCHAR2 DEFAULT NULL, 
   statid         VARCHAR2 DEFAULT NULL,
   cascade_parts  BOOLEAN  DEFAULT TRUE,
   statown        VARCHAR2 DEFAULT NULL,
   no_invalidate  BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force          BOOLEAN  DEFAULT FALSE,
   col_stat_type  VARCHAR2 DEFAULT 'ALL');
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9937"></a>Parameters</p>
<div id="ARPLS68511" class="tblformal">
<p class="titleintable"><a id="sthref9938"></a><a id="sthref9939"></a>Table 142-10 DELETE_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t14" headers="r1c1-t14">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t14 r1c2-t14">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t14" headers="r1c1-t14">
<p><code>colname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t14 r1c2-t14">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t14" headers="r1c1-t14">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t14 r1c2-t14">
<p>Name of the table partition for which to delete the statistics. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then global column statistics are deleted.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t14" headers="r1c1-t14">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t14 r1c2-t14">
<p>User statistics table identifier describing from where to delete the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are deleted directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t14" headers="r1c1-t14">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t14 r1c2-t14">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t14" headers="r1c1-t14">
<p><code>cascade_parts</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t14 r1c2-t14">
<p>If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then setting this to true causes the deletion of statistics for this column for all underlying partitions as well.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t14" headers="r1c1-t14">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t14 r1c2-t14">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t14" headers="r1c1-t14">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t14 r1c2-t14">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t14" headers="r1c1-t14">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t14 r1c2-t14">
<p>When value of this argument is <code>TRUE</code>, deletes column statistics even if locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t14" headers="r1c1-t14">
<p><code>col_stat_type</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t14 r1c2-t14">
<p>Type of column statistics to be deleted.This argument takes the following values:</p>
<ul>
<li>
<p><code>HISTOGRAM</code> - delete column histogram only</p>
</li>
<li>
<p><code>ALL</code> - delete base column statistics and histogram</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9940"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9941"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68512" class="refsect2"><a id="BEIHGEBD"></a>
<hr />
<h3 class="refsect2"><a id="sthref9942"></a>DELETE_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to delete the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code>TRUE</code> for the <code>add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9943"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_DATABASE_PREFS (
    pname            IN   VARCHAR2,
    add_sys          IN   BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9944"></a>Parameters</p>
<div id="ARPLS68513" class="tblformal">
<p class="titleintable"><a id="sthref9945"></a><a id="sthref9946"></a>Table 142-11 DELETE_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>Preference name. The default value for following parameters can be deleted:</p>
<ul>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r3c1-t15 r1c2-t15">
<p><code>CASCADE</code> - The value determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r4c1-t15 r1c2-t15">
<p><code>DEGREE</code> - The value determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t15 r1c2-t15">
<p><code>ESTIMATE_PERCENT</code> - The value determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t15 r1c2-t15">
<p><code>METHOD_OPT</code> - The value controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns<br />
- <code>column_name</code> : name of a column<br />
- <code>extension :</code> can be either a column group in the format of <code>(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t15 r1c2-t15">
<p><code>NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t15 r1c2-t15">
<p><code>GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned)</p>
<p><code>'ALL'</code> - gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t15 r1c2-t15">
<p><code>PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t15 r1c2-t15">
<p><code>INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p>the <code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>the <code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>the user specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t15" headers="r1c1-t15">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t15 r1c2-t15">
<p><code>STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers.The default value is 10%. Note that if you set <code>stale_percent</code> to zero the <code>AUTO</code> <code>STATS</code> gathering job will gather statistics for this table every time a row in the table is modified.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t15" headers="r1c1-t15">
<p><code>add_sys</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t15 r1c2-t15">
<p>Value <code>TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9947"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or Illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9948"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</li>
<li>
<p>All <code>pname</code> arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9949"></a>Examples</p>
<pre>
DBMS_STATS.DELETE_DATABASE_PREFS('CASCADE', FALSE);
DBMS_STATS.DELETE_DATABASE_PREFS('ESTIMATE_PERCENT',TRUE);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68514" class="refsect2"><a id="i1035352"></a>
<hr />
<h3 class="refsect2"><a id="sthref9950"></a>DELETE_DATABASE_STATS Procedure</h3>
<p>This procedure deletes statistics for all the tables in a database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9951"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_DATABASE_STATS (
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force            BOOLEAN  DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9952"></a>Parameters</p>
<div id="ARPLS68515" class="tblformal">
<p class="titleintable"><a id="sthref9953"></a><a id="sthref9954"></a>Table 142-12 DELETE_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Parameter</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>User statistics table identifier describing from where to delete the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t16" headers="r1c1-t16">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t16 r1c2-t16">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t16" headers="r1c1-t16">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t16 r1c2-t16">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t16" headers="r1c1-t16">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t16 r1c2-t16">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t16" headers="r1c1-t16">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t16 r1c2-t16">
<p>When the value of this argument is <code>TRUE</code>, deletes statistics of tables in a database even if they are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9955"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9956"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68516" class="refsect2"><a id="i1042571"></a>
<hr />
<h3 class="refsect2"><a id="sthref9957"></a>DELETE_DICTIONARY_STATS Procedure</h3>
<p>This procedure deletes statistics for all dictionary schemas ('<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9958"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_DICTIONARY_STATS (
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force            BOOLEAN  DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9959"></a>Parameters</p>
<div id="ARPLS68517" class="tblformal">
<p class="titleintable"><a id="sthref9960"></a><a id="sthref9961"></a>Table 142-13 DELETE_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t17">Parameter</th>
<th class="cellalignment1227" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t17" headers="r1c1-t17">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t17 r1c2-t17">
<p>User statistics table identifier describing from where to delete the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t17" headers="r1c1-t17">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t17 r1c2-t17">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t17" headers="r1c1-t17">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t17 r1c2-t17">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t17" headers="r1c1-t17">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t17 r1c2-t17">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t17" headers="r1c1-t17">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t17 r1c2-t17">
<p>When the value of this argument is <code>TRUE</code>, deletes statistics of tables in a database even if they are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9962"></a>Usage Notes</p>
<p>You must have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9963"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68518" class="refsect2"><a id="i1039357"></a>
<hr />
<h3 class="refsect2"><a id="sthref9964"></a>DELETE_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure deletes statistics of all fixed tables.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9965"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_FIXED_OBJECTS_STATS (
   stattab        VARCHAR2 DEFAULT NULL,
   statid         VARCHAR2 DEFAULT NULL,
   statown        VARCHAR2 DEFAULT NULL, 
   no_invalidate  BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force          BOOLEAN  DEFAULT FALSE); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9966"></a>Parameters</p>
<div id="ARPLS68519" class="tblformal">
<p class="titleintable"><a id="sthref9967"></a><a id="sthref9968"></a>Table 142-14 DELETE_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>The user statistics table identifier describing from where to delete the current statistics. If <code>stattab</code> is <code>NULL</code>, the statistics will be deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>The (optional) identifier to associate with these statistics within stattab. This only applies if <code>stattab</code> is not <code>NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t18" headers="r1c1-t18">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t18 r1c2-t18">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t18" headers="r1c1-t18">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t18 r1c2-t18">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t18" headers="r1c1-t18">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t18 r1c2-t18">
<p>Ignores the statistics lock on objects and deletes the statistics if set to <code>TRUE</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9969"></a>Usage Notes</p>
<p>You must have the <code>SYSDBA</code> or <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9970"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68520" class="refsect2"><a id="i1035428"></a>
<hr />
<h3 class="refsect2"><a id="sthref9971"></a>DELETE_INDEX_STATS Procedure</h3>
<p>This procedure deletes index-related statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9972"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_INDEX_STATS (
   ownname          VARCHAR2, 
   indname          VARCHAR2,
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   cascade_parts    BOOLEAN  DEFAULT TRUE,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9973"></a>Parameters</p>
<div id="ARPLS68521" class="tblformal">
<p class="titleintable"><a id="sthref9974"></a><a id="sthref9975"></a>Table 142-15 DELETE_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t19">Parameter</th>
<th class="cellalignment1227" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t19" headers="r1c1-t19">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t19 r1c2-t19">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t19" headers="r1c1-t19">
<p><code>indname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t19 r1c2-t19">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t19" headers="r1c1-t19">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t19 r1c2-t19">
<p>Name of the index partition for which to delete the statistics. If the index is partitioned and if <code>partname</code> is <code>NULL</code>, then index statistics are deleted at the global level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t19" headers="r1c1-t19">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t19 r1c2-t19">
<p>User statistics table identifier describing from where to delete the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are deleted directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t19" headers="r1c1-t19">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t19 r1c2-t19">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t19" headers="r1c1-t19">
<p><code>cascade_parts</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t19 r1c2-t19">
<p>If the index is partitioned and if <code>partname</code> is <code>NULL</code>, then setting this to <code>TRUE</code> causes the deletion of statistics for this index for all underlying partitions as well</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t19" headers="r1c1-t19">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t19 r1c2-t19">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t19" headers="r1c1-t19">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t19 r1c2-t19">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t19" headers="r1c1-t19">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t19 r1c2-t19">
<p>When value of this argument is <code>TRUE</code>, deletes index statistics even if locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9976"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9977"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68522" class="refsect2"><a id="BEIJGHFD"></a>
<hr />
<h3 class="refsect2"><a id="sthref9978"></a>DELETE_PENDING_STATS Procedure</h3>
<p>This procedure is used to delete the pending statistics that have been collected but have not been published.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9979"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_PENDING_STATS (
    ownname    IN  VARCHAR2  DEFAULT USER,
    tabname    IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9980"></a>Parameters</p>
<div id="ARPLS68523" class="tblformal">
<p class="titleintable"><a id="sthref9981"></a><a id="sthref9982"></a>Table 142-16 DELETE_PENDING_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_PENDING_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_PRIVATE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t20">Parameter</th>
<th class="cellalignment1227" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t20" headers="r1c1-t20">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t20 r1c2-t20">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t20" headers="r1c1-t20">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t20 r1c2-t20">
<p>Table name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9983"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9984"></a>Usage Notes</p>
<ul>
<li>
<p>If the parameter <code>tabname</code> is <code>NULL</code> delete applies to all tables of the specified schema.</p>
</li>
<li>
<p>The default owner/schema is the user who runs the procedure.</p>
</li>
<li>
<p>To run this procedure, you need to have the same privilege for gathering statistics on the tables that will be touched by this procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9985"></a>Examples</p>
<pre>
DBMS_STATS.DELETE_PENDING_STATS('SH', 'SALES');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68524" class="refsect2"><a id="BEIFAGDH"></a>
<hr />
<h3 class="refsect2"><a id="sthref9986"></a>DELETE_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to delete the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9987"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_SCHEMA_PREFS (
    ownname   IN   VARCHAR2,
    pname     IN   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9988"></a>Parameters</p>
<div id="ARPLS68525" class="tblformal">
<p class="titleintable"><a id="sthref9989"></a><a id="sthref9990"></a>Table 142-17 DELETE_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t21">Parameter</th>
<th class="cellalignment1227" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t21" headers="r1c1-t21">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t21 r1c2-t21">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t21" headers="r1c1-t21">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t21 r1c2-t21">
<p>Preference name. The default value for following parameters can be deleted:</p>
<ul>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r4c1-t21 r1c2-t21">
<p><code>CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t21 r1c2-t21">
<p><code>DEGREE</code> - Determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t21 r1c2-t21">
<p><code>ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t21 r1c2-t21">
<p><code>METHOD_OPT</code> - Controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns<br />
- <code>column_name</code> : name of a column<br />
- <code>extension:</code> can be either a column group in the format of <code>(column_name, colume_name [, ...])</code>or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t21 r1c2-t21">
<p><code>NO_INVALIDATE</code> - Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t21 r1c2-t21">
<p><code>GRANULARITY</code> - The value determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t21 r1c2-t21">
<p><code>PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t21 r1c2-t21">
<p><code>INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p>the <code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code></p>
</li>
<li>
<p>the <code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code></p>
</li>
<li>
<p>the user specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t21" headers="r1c1-t21">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r12c1-t21 r1c2-t21">
<p><code>STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers.The default value is 10%. Note that if you set <code>stale_percent</code> to zero the <code>AUTO</code> <code>STATS</code> gathering job will gather statistics for this table every time a row in the table is modified.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9991"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges / Schema "&lt;schema&gt;" does not exist</p>
<p><code>ORA-20001</code>: Invalid or Illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9992"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code>SYSDBA</code> privilege, or have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9993"></a>Examples</p>
<pre>
DBMS_STATS.DELETE_SCHEMA_PREFS('SH', 'CASCADE');
DBMS_STATS.DELETE_SCHEMA_PREFS('SH', 'ESTIMATE_PERCENT');
DBMS_STATS.DELETE_SCHEMA_PREFS('SH', 'DEGREE');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68526" class="refsect2"><a id="i1035494"></a>
<hr />
<h3 class="refsect2"><a id="sthref9994"></a>DELETE_SCHEMA_STATS Procedure</h3>
<p>This procedure deletes statistics for an entire schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9995"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_SCHEMA_STATS (
   ownname          VARCHAR2, 
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9996"></a>Parameters</p>
<div id="ARPLS68527" class="tblformal">
<p class="titleintable"><a id="sthref9997"></a><a id="sthref9998"></a>Table 142-18 DELETE_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t22">Parameter</th>
<th class="cellalignment1227" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t22" headers="r1c1-t22">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t22 r1c2-t22">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t22" headers="r1c1-t22">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t22 r1c2-t22">
<p>User statistics table identifier describing from where to delete the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are deleted directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t22" headers="r1c1-t22">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t22 r1c2-t22">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t22" headers="r1c1-t22">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t22 r1c2-t22">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t22" headers="r1c1-t22">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t22 r1c2-t22">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t22" headers="r1c1-t22">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t22 r1c2-t22">
<p>When value of this argument is <code>TRUE</code>, deletes statistics of tables in a schema even if locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref9999"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10000"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68528" class="refsect2"><a id="i1035583"></a>
<hr />
<h3 class="refsect2"><a id="sthref10001"></a>DELETE_SYSTEM_STATS Procedure</h3>
<p>This procedure deletes workload statistics (collected using the '<code>INTERVAL</code>' or '<code>START</code>' and '<code>STOP</code>' options) and resets the default to <code>noworkload</code> statistics (collected using '<code>NOWORKLOAD</code>' option) if <code>stattab</code> is not specified. If <code>stattab</code> is specified, the subprogram deletes all system statistics with the associated <code>statid</code> from the <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10002"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_SYSTEM_STATS (
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10003"></a>Parameters</p>
<div id="ARPLS68529" class="tblformal">
<p class="titleintable"><a id="sthref10004"></a><a id="sthref10005"></a>Table 142-19 DELETE_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t23">Parameter</th>
<th class="cellalignment1227" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t23" headers="r1c1-t23">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t23 r1c2-t23">
<p>Identifier of the user statistics table where the statistics will be saved</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t23" headers="r1c1-t23">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t23 r1c2-t23">
<p>Optional identifier associated with the statistics saved in the stattab</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t23" headers="r1c1-t23">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t23 r1c2-t23">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10006"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10007"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68530" class="refsect2"><a id="BEIEGCHI"></a>
<hr />
<h3 class="refsect2"><a id="sthref10008"></a>DELETE_TABLE_PREFS Procedure</h3>
<p>This procedure is used to delete the statistics preferences of the specified table in the specified schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10009"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    pname      IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10010"></a>Parameters</p>
<div id="ARPLS68531" class="tblformal">
<p class="titleintable"><a id="sthref10011"></a><a id="sthref10012"></a>Table 142-20 DELETE_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t24">Parameter</th>
<th class="cellalignment1227" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t24" headers="r1c1-t24">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t24 r1c2-t24">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t24" headers="r1c1-t24">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t24 r1c2-t24">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t24" headers="r1c1-t24">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t24 r1c2-t24">
<p>Preference name. The default value for following preferences can be deleted:</p>
<ul>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t24 r1c2-t24">
<p><code>CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t24 r1c2-t24">
<p><code>DEGREE</code> - Determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t24 r1c2-t24">
<p><code>ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t24 r1c2-t24">
<p><code>METHOD_OPT</code> - The value controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br />
- <code>column_name</code> : name of a column<br />
- <code>extension :</code> can be either a column group in the format of <code>(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t24 r1c2-t24">
<p><code>NO_INVALIDATE</code> - Controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t24 r1c2-t24">
<p><code>GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t24 r1c2-t24">
<p><code>PUBLISH</code> - Determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r12c1-t24 r1c2-t24">
<p><code>INCREMENTAL</code> - Determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code></p>
</li>
<li>
<p><code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>User specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t24" headers="r1c1-t24">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r13c1-t24 r1c2-t24">
<p><code>STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers. The default value is 10%.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t24" headers="r1c1-t24">
<p>pvalue</p>
</td>
<td class="cellalignment1228" headers="r14c1-t24 r1c2-t24">
<p>Preference value. If <code>NULL</code> is specified, it will set the Oracle default value.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10013"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or Illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10014"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table, be granted <code>ANALYZE</code> privilege on the table, or <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10015"></a>Examples</p>
<pre>
DBMS_STATS.DELETE_TABLE_PREFS('SH', 'SALES', 'CASCADE');
DBMS_STATS.DELETE_TABLE_PREFS('SH', 'SALES', 'DEGREE');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68532" class="refsect2"><a id="i1035962"></a>
<hr />
<h3 class="refsect2"><a id="sthref10016"></a>DELETE_TABLE_STATS Procedure</h3>
<p>This procedure deletes table-related statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10017"></a>Syntax</p>
<pre>
DBMS_STATS.DELETE_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   cascade_parts    BOOLEAN  DEFAULT TRUE, 
   cascade_columns  BOOLEAN  DEFAULT TRUE,
   cascade_indexes  BOOLEAN  DEFAULT TRUE,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10018"></a>Parameters</p>
<div id="ARPLS68533" class="tblformal">
<p class="titleintable"><a id="sthref10019"></a><a id="sthref10020"></a>Table 142-21 DELETE_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DELETE_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DELETE_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t25">Parameter</th>
<th class="cellalignment1227" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t25" headers="r1c1-t25">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t25 r1c2-t25">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t25" headers="r1c1-t25">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t25 r1c2-t25">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t25" headers="r1c1-t25">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t25 r1c2-t25">
<p>Name of the table partition from which to get the statistics. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then the statistics are retrieved from the global table level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t25" headers="r1c1-t25">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t25 r1c2-t25">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t25" headers="r1c1-t25">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t25 r1c2-t25">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t25" headers="r1c1-t25">
<p><code>cascade_parts</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t25 r1c2-t25">
<p>If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then setting this to <code>TRUE</code> causes the deletion of statistics for this table for all underlying partitions as well</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t25" headers="r1c1-t25">
<p><code>cascade_columns</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t25 r1c2-t25">
<p>Indicates that <code>DELETE_COLUMN_STATS</code> should be called for all underlying columns (passing the <code>cascade_parts</code> parameter)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t25" headers="r1c1-t25">
<p><code>cascade_indexes</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t25 r1c2-t25">
<p>Indicates that <code>DELETE_INDEX_STATS</code> should be called for all underlying indexes (passing the <code>cascade_parts</code> parameter)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t25" headers="r1c1-t25">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t25 r1c2-t25">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t25" headers="r1c1-t25">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t25 r1c2-t25">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t25" headers="r1c1-t25">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t25 r1c2-t25">
<p>When value of this argument is <code>TRUE</code>, deletes table statistics even if locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10021"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
<p><code>ORA</code>-<code>20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10022"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68534" class="refsect2"><a id="BEIDHICC"></a>
<hr />
<h3 class="refsect2"><a id="sthref10023"></a>DIFF_TABLE_STATS_IN_HISTORY Function</h3>
<p>This function can be used to compare statistics for a table from two timestamps in past and compare the statistics as of that timestamps.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10024"></a>Syntax</p>
<pre>
DBMS_STATS.DIFF_TABLE_STATS_IN_HISTORY( 
      ownname        IN  VARCHAR2,
      tabname        IN  VARCHAR2,
      time1          IN  TIMESTAMP WITH TIME ZONE,
      time2          IN  TIMESTAMP WITH TIME ZONE DEFAULT NULL,
      pctthreshold   IN  NUMBER  DEFAULT 10)
   RETURN DiffRepTab pipelined;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10025"></a>Parameters</p>
<div id="ARPLS68535" class="tblformal">
<p class="titleintable"><a id="sthref10026"></a><a id="sthref10027"></a>Table 142-22 DIFF_TABLE_STATS_IN_HISTORY Function Parameters</p>
<table class="cellalignment1229" title="DIFF_TABLE_STATS_IN_HISTORY Function Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t26">Parameter</th>
<th class="cellalignment1227" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t26" headers="r1c1-t26">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t26 r1c2-t26">
<p>Owner of the table. Specify <code>NULL</code> for current schema.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t26" headers="r1c1-t26">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t26 r1c2-t26">
<p>Table for which statistics are to be compared</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t26" headers="r1c1-t26">
<p><code>time1</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t26 r1c2-t26">
<p>First timestamp 1</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t26" headers="r1c1-t26">
<p><code>time2</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t26 r1c2-t26">
<p>Second timestamp 2</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t26" headers="r1c1-t26">
<p><code>pctthreshold</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t26 r1c2-t26">
<p>The function reports difference in statistics only if it exceeds this limit. The default value is 10.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10028"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>If the second timestamp is <code>NULL</code>, the function compares the current statistics in dictionary with the statistics as of the other timestamp.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68536" class="refsect2"><a id="BABCBGHG"></a>
<hr />
<h3 class="refsect2"><a id="sthref10029"></a>DIFF_TABLE_STATS_IN_PENDING Function</h3>
<p>This function compares pending statistics and statistics as of a timestamp or statistics from dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10030"></a>Syntax</p>
<pre>
DBMS_STATS.DIFF_TABLE_STATS_IN_PENDING( 
      ownname        IN  VARCHAR2,
      tabname        IN  VARCHAR2,
      timestamp      IN  TIMESTAMP WITH TIME ZONE,
      pctthreshold   IN  NUMBER  DEFAULT 10)
   RETURN DiffRepTab pipelined;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10031"></a>Parameters</p>
<div id="ARPLS68537" class="tblformal">
<p class="titleintable"><a id="sthref10032"></a><a id="sthref10033"></a>Table 142-23 DIFF_TABLE_STATS_IN_PENDING Function Parameters</p>
<table class="cellalignment1229" title="DIFF_TABLE_STATS_IN_PENDING Function Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t27">Parameter</th>
<th class="cellalignment1227" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t27" headers="r1c1-t27">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t27 r1c2-t27">
<p>Owner of the table. Specify <code>NULL</code> for current schema.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t27" headers="r1c1-t27">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t27 r1c2-t27">
<p>Table for which statistics are to be compared</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t27" headers="r1c1-t27">
<p><code>timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t27 r1c2-t27">
<p>Time stamp to get statistics from the history</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t27" headers="r1c1-t27">
<p><code>pctthreshold</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t27 r1c2-t27">
<p>The function reports difference in statistics only if it exceeds this limit. The default value is 10.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10034"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>If the second timestamp is <code>NULL</code>, the function compares the current statistics in dictionary with the statistics as of the other timestamp.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68538" class="refsect2"><a id="BEICGJDD"></a>
<hr />
<h3 class="refsect2"><a id="sthref10035"></a>DIFF_TABLE_STATS_IN_STATTAB Function</h3>
<p>This function can be used to compare statistics for a table from two different sources. The statistics can be drawn from</p>
<ul>
<li>
<p>two different user statistics tables</p>
</li>
<li>
<p>a single user statistics table containing 2 sets of statistics that can be identified using <code>statids</code></p>
</li>
<li>
<p>a user statistics table and dictionary</p>
</li>
</ul>
<p>The function also compares the statistics of the dependent objects (indexes, columns, partitions) as well. It displays statistics of the object(s) from both sources if the difference between those statistics exceeds a certain threshold (%). The threshold can be specified as an argument to the function. The statistics corresponding to the first source (<code>stattab1</code> or <code>time1</code>) will be used as basis for computing the difference percentage.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10036"></a>Syntax</p>
<pre>
DBMS_STATS.DIFF_TABLE_STATS_IN_STATTAB( 
      ownname        IN  VARCHAR2,
      tabname        IN  VARCHAR2,
      stattab1       IN  VARCHAR2,
      stattab2       IN  VARCHAR2 DEFAULT NULL,      pctthreshold   IN  NUMBER  DEFAULT 10,      statid1        IN  VARCHAR2 DEFAULT NULL,      statid2        IN  VARCHAR2 DEFAULT NULL,      stattab1own    IN  VARCHAR2 DEFAULT NULL,      stattab2own    IN  VARCHAR2 DEFAULT NULL)   RETURN DiffRepTab pipelined;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10037"></a>Parameters</p>
<div id="ARPLS68539" class="tblformal">
<p class="titleintable"><a id="sthref10038"></a><a id="sthref10039"></a>Table 142-24 DIFF_TABLE_STATS_IN_STATTAB Function Parameters</p>
<table class="cellalignment1229" title="DIFF_TABLE_STATS_IN_STATTAB Function Parameters" summary="This table describes the Parameters of DBMS_STATS.DIFF_TABLE_STATS_IN_STATTAB subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t28">Parameter</th>
<th class="cellalignment1227" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t28" headers="r1c1-t28">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t28 r1c2-t28">
<p>Owner of the table. Specify <code>NULL</code> for current schema.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t28" headers="r1c1-t28">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t28 r1c2-t28">
<p>Table for which statistics are to be compared</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t28" headers="r1c1-t28">
<p><code>stattab1</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t28 r1c2-t28">
<p>User statistics table 1</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t28" headers="r1c1-t28">
<p><code>stattab2</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t28 r1c2-t28">
<p>User statistics table 2. If <code>NULL</code>, statistics in <code>stattab1</code> is compared with current statistics in dictionary. This is the default. Specify same table as <code>stattab1</code> to compare two sets within the statistics table (see <code>statid</code> below).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t28" headers="r1c1-t28">
<p><code>pctthreshold</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t28 r1c2-t28">
<p>The function reports difference in statistics only if it exceeds this limit. The default value is 10.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t28" headers="r1c1-t28">
<p><code>stadid1</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t28 r1c2-t28">
<p>(optional) Identifies statistics set within <code>stattab1</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t28" headers="r1c1-t28">
<p><code>stadid2</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t28 r1c2-t28">
<p>(optional) Identifies statistics set within <code>stattab2</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t28" headers="r1c1-t28">
<p><code>stattab1own</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t28 r1c2-t28">
<p>Schema containing <code>stattab1</code> (if other than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t28" headers="r1c1-t28">
<p><code>stattab2own</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t28 r1c2-t28">
<p>Schema containing <code>stattab2</code> (if other than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10040"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68540" class="refsect2"><a id="BABEAECF"></a>
<hr />
<h3 class="refsect2"><a id="sthref10041"></a>DROP_EXTENDED_STATS Procedure</h3>
<p>This function drops the statistics entry that is created for the user specified extension. This cancels the effects of the <a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10042"></a>Syntax</p>
<pre>
DBMS_STATS.DROP_EXTENDED_STATS (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10043"></a>Parameters</p>
<div id="ARPLS68541" class="tblformal">
<p class="titleintable"><a id="sthref10044"></a><a id="sthref10045"></a>Table 142-25 DROP_EXTENDED_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_EXTENDED_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DROP_EXTENDED_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t29">Parameter</th>
<th class="cellalignment1227" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t29" headers="r1c1-t29">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t29 r1c2-t29">
<p>Owner name of a table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t29" headers="r1c1-t29">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t29 r1c2-t29">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t29" headers="r1c1-t29">
<p><code>extension</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t29 r1c2-t29">
<p>Can be either a column group or an expression. Suppose the specified table has two column <code>c1</code>, <code>c2</code>. An example column group can be "(<code>c1</code>, <code>c2</code>)" and an example expression can be "(<code>c1</code> + <code>c2</code>)".</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10046"></a>Exceptions</p>
<ul>
<li>
<p><code>ORA-20000</code>: Insufficient privileges or extension does not exist</p>
</li>
<li>
<p><code>ORA-20001</code>: Error when processing extension</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10047"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>If no extended statistics set is created for the extension, this function throws an error.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68542" class="refsect2"><a id="i1035659"></a>
<hr />
<h3 class="refsect2"><a id="sthref10048"></a>DROP_STAT_TABLE Procedure</h3>
<p>This procedure drops a user statistics table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10049"></a>Syntax</p>
<pre>
DBMS_STATS.DROP_STAT_TABLE (
   ownname VARCHAR2, 
   stattab VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10050"></a>Parameters</p>
<div id="ARPLS68543" class="tblformal">
<p class="titleintable"><a id="sthref10051"></a><a id="sthref10052"></a>Table 142-26 DROP_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.DROP_STAT_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t30">Parameter</th>
<th class="cellalignment1227" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t30" headers="r1c1-t30">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t30 r1c2-t30">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t30" headers="r1c1-t30">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t30 r1c2-t30">
<p>User statistics table identifier</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10053"></a>Exceptions</p>
<p><code>ORA-20000</code>: Table does not exists or insufficient privileges.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10054"></a>Usage Notes</p>
<p>To invoke this procedure you need the privileges for dropping the specified table.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68544" class="refsect2"><a id="i1035669"></a>
<hr />
<h3 class="refsect2"><a id="sthref10055"></a>EXPORT_COLUMN_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular column and stores them in the user statistics table identified by <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10056"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_COLUMN_STATS (
   ownname  VARCHAR2, 
   tabname  VARCHAR2, 
   colname  VARCHAR2, 
   partname VARCHAR2 DEFAULT NULL,
   stattab  VARCHAR2, 
   statid   VARCHAR2 DEFAULT NULL,
   statown  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10057"></a>Parameters</p>
<div id="ARPLS68545" class="tblformal">
<p class="titleintable"><a id="sthref10058"></a><a id="sthref10059"></a>Table 142-27 EXPORT_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t31">Parameter</th>
<th class="cellalignment1227" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t31" headers="r1c1-t31">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t31 r1c2-t31">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t31" headers="r1c1-t31">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t31 r1c2-t31">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t31" headers="r1c1-t31">
<p><code>colname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t31 r1c2-t31">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t31" headers="r1c1-t31">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t31 r1c2-t31">
<p>Name of the table partition. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then global and partition column statistics are exported.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t31" headers="r1c1-t31">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t31 r1c2-t31">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t31" headers="r1c1-t31">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t31 r1c2-t31">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t31" headers="r1c1-t31">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t31 r1c2-t31">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10060"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10061"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68546" class="refsect2"><a id="BEIDACAE"></a>
<hr />
<h3 class="refsect2"><a id="sthref10062"></a>EXPORT_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to export the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code>TRUE</code> for the <code>add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10063"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_DATABASE_PREFS (
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL
    add_sys    IN  BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10064"></a>Parameters</p>
<div id="ARPLS68547" class="tblformal">
<p class="titleintable"><a id="sthref10065"></a><a id="sthref10066"></a>Table 142-28 EXPORT_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t32">Parameter</th>
<th class="cellalignment1227" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t32" headers="r1c1-t32">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t32 r1c2-t32">
<p>Statistics table name to where statistics should be exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t32" headers="r1c1-t32">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r3c1-t32 r1c2-t32">
<p>(Optional) Identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t32" headers="r1c1-t32">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r4c1-t32 r1c2-t32">
<p>Schema containing <code>stattab</code> (if other than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t32" headers="r1c1-t32">
<p><code>add_sys</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t32 r1c2-t32">
<p>Value <code>TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10067"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10068"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role, or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10069"></a>Examples</p>
<pre>
DBMS_STATS.EXPORT_DATABASE_PREFS('STATTAB', statown=&gt;'SH');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68548" class="refsect2"><a id="i1041371"></a>
<hr />
<h3 class="refsect2"><a id="sthref10070"></a>EXPORT_DATABASE_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the database and stores them in the user statistics tables identified by <code>statown</code>.<code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10071"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_DATABASE_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10072"></a>Parameters</p>
<div id="ARPLS68549" class="tblformal">
<p class="titleintable"><a id="sthref10073"></a><a id="sthref10074"></a>Table 142-29 EXPORT_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t33">Parameter</th>
<th class="cellalignment1227" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t33" headers="r1c1-t33">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t33 r1c2-t33">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t33" headers="r1c1-t33">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t33 r1c2-t33">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t33" headers="r1c1-t33">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t33 r1c2-t33">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t33" headers="r1c1-t33">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t33 r1c2-t33">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10075"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10076"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68550" class="refsect2"><a id="i1042811"></a>
<hr />
<h3 class="refsect2"><a id="sthref10077"></a>EXPORT_DICTIONARY_STATS Procedure</h3>
<p>This procedure retrieves statistics for all dictionary schemas ('<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas) and stores them in the user statistics table identified by <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10078"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_DICTIONARY_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10079"></a>Parameters</p>
<div id="ARPLS68551" class="tblformal">
<p class="titleintable"><a id="sthref10080"></a><a id="sthref10081"></a>Table 142-30 EXPORT_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t34">Parameter</th>
<th class="cellalignment1227" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t34" headers="r1c1-t34">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t34 r1c2-t34">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t34" headers="r1c1-t34">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t34 r1c2-t34">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t34" headers="r1c1-t34">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t34 r1c2-t34">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t34" headers="r1c1-t34">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t34 r1c2-t34">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10082"></a>Usage Notes</p>
<ul>
<li>
<p>You must have the <code>SYSDBA</code> or <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege to execute this procedure.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10083"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68552" class="refsect2"><a id="i1041507"></a>
<hr />
<h3 class="refsect2"><a id="sthref10084"></a>EXPORT_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure retrieves statistics for fixed tables and stores them in the user statistics table identified by <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10085"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_FIXED_OBJECTS_STATS (
   stattab  VARCHAR2, 
   statid   VARCHAR2 DEFAULT NULL,
   statown  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10086"></a>Parameters</p>
<div id="ARPLS68553" class="tblformal">
<p class="titleintable"><a id="sthref10087"></a><a id="sthref10088"></a>Table 142-31 EXPORT_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t35">Parameter</th>
<th class="cellalignment1227" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t35" headers="r1c1-t35">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t35 r1c2-t35">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t35" headers="r1c1-t35">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t35 r1c2-t35">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t35" headers="r1c1-t35">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t35 r1c2-t35">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10089"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10090"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this subprogram you need to be connected as <code>SYS</code> or have the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68554" class="refsect2"><a id="i1041496"></a>
<hr />
<h3 class="refsect2"><a id="sthref10091"></a>EXPORT_INDEX_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular index and stores them in the user statistics table identified by <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10092"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_INDEX_STATS (
   ownname  VARCHAR2, 
   indname  VARCHAR2, 
   partname VARCHAR2 DEFAULT NULL,
   stattab  VARCHAR2, 
   statid   VARCHAR2 DEFAULT NULL,
   statown  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10093"></a>Parameters</p>
<div id="ARPLS68555" class="tblformal">
<p class="titleintable"><a id="sthref10094"></a><a id="sthref10095"></a>Table 142-32 EXPORT_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t36">Parameter</th>
<th class="cellalignment1227" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t36" headers="r1c1-t36">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t36 r1c2-t36">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t36" headers="r1c1-t36">
<p><code>indname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t36 r1c2-t36">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t36" headers="r1c1-t36">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t36 r1c2-t36">
<p>Name of the index partition. If the index is partitioned and if <code>partname</code> is <code>NULL</code>, then global and partition index statistics are exported.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t36" headers="r1c1-t36">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t36 r1c2-t36">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t36" headers="r1c1-t36">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t36 r1c2-t36">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t36" headers="r1c1-t36">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t36 r1c2-t36">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10096"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10097"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68556" class="refsect2"><a id="BEIEBEAE"></a>
<hr />
<h3 class="refsect2"><a id="sthref10098"></a>EXPORT_PENDING_STATS Procedure</h3>
<p>This procedure is used to export the statistics gathered and stored as pending.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10099"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_PENDING_STATS (
    ownname    IN  VARCHAR2  DEFAULT USER,
    tabname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT USER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10100"></a>Parameters</p>
<div id="ARPLS68557" class="tblformal">
<p class="titleintable"><a id="sthref10101"></a><a id="sthref10102"></a>Table 142-33 EXPORT_PENDING_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_PENDING_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_PENDING_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t37">Parameter</th>
<th class="cellalignment1227" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t37" headers="r1c1-t37">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t37 r1c2-t37">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t37" headers="r1c1-t37">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t37 r1c2-t37">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t37" headers="r1c1-t37">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t37 r1c2-t37">
<p>Statistics table name to where to export the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t37" headers="r1c1-t37">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r5c1-t37 r1c2-t37">
<p>(Optional) Identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t37" headers="r1c1-t37">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r6c1-t37 r1c2-t37">
<p>Schema containing <code>stattab</code> (if other than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10103"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10104"></a>Usage Notes</p>
<ul>
<li>
<p>If the parameter <code>tabname</code> is <code>NULL</code> then export applies to all tables of the specified schema.</p>
</li>
<li>
<p>The default owner/schema is the user who runs the procedure.</p>
</li>
<li>
<p>To run this procedure, you need to have the same privilege for gathering statistics on the tables that will be touched by this procedure.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10105"></a>Examples</p>
<pre>
DBMS_STATS.EXPORT_PENDING_STATS(NULL, NULL, 'MY_STAT_TABLE');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68558" class="refsect2"><a id="BEIFJJDF"></a>
<hr />
<h3 class="refsect2"><a id="sthref10106"></a>EXPORT_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to export the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10107"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_SCHEMA_PREFS (
    ownname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10108"></a>Parameters</p>
<div id="ARPLS68559" class="tblformal">
<p class="titleintable"><a id="sthref10109"></a><a id="sthref10110"></a>Table 142-34 EXPORT_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t38">Parameter</th>
<th class="cellalignment1227" id="r1c2-t38">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t38" headers="r1c1-t38">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t38 r1c2-t38">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t38" headers="r1c1-t38">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t38 r1c2-t38">
<p>Statistics table name to where to export the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t38" headers="r1c1-t38">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r4c1-t38 r1c2-t38">
<p>(Optional) Identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t38" headers="r1c1-t38">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r5c1-t38 r1c2-t38">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10111"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10112"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code>SYSDBA</code> privilege, or have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10113"></a>Examples</p>
<pre>
DBMS_STATS.EXPORT_SCHEMA_PREFS('SH', 'STAT');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68560" class="refsect2"><a id="i1036059"></a>
<hr />
<h3 class="refsect2"><a id="sthref10114"></a>EXPORT_SCHEMA_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the schema identified by <code>ownname</code> and stores them in the user statistics tables identified by <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10115"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_SCHEMA_STATS (
   ownname         VARCHAR2,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10116"></a>Parameters</p>
<div id="ARPLS68561" class="tblformal">
<p class="titleintable"><a id="sthref10117"></a><a id="sthref10118"></a>Table 142-35 EXPORT_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t39">Parameter</th>
<th class="cellalignment1227" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t39" headers="r1c1-t39">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t39 r1c2-t39">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t39" headers="r1c1-t39">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t39 r1c2-t39">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t39" headers="r1c1-t39">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t39 r1c2-t39">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t39" headers="r1c1-t39">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t39 r1c2-t39">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t39" headers="r1c1-t39">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t39 r1c2-t39">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10119"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10120"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68562" class="refsect2"><a id="i1035776"></a>
<hr />
<h3 class="refsect2"><a id="sthref10121"></a>EXPORT_SYSTEM_STATS Procedure</h3>
<p>This procedure retrieves system statistics and stores them in the user statistics table, identified by <code>stattab</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10122"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_SYSTEM_STATS (
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10123"></a>Parameters</p>
<div id="ARPLS68563" class="tblformal">
<p class="titleintable"><a id="sthref10124"></a><a id="sthref10125"></a>Table 142-36 EXPORT_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t40">Parameter</th>
<th class="cellalignment1227" id="r1c2-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t40" headers="r1c1-t40">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t40 r1c2-t40">
<p>Identifier of the user statistics table that describes where the statistics will be stored</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t40" headers="r1c1-t40">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t40 r1c2-t40">
<p>Optional identifier associated with the statistics stored from the <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t40" headers="r1c1-t40">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t40 r1c2-t40">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10126"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code>ORA-20003</code>: Unable to export system statistics</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10127"></a>Usage Notes</p>
<p>To run this procedure, you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68564" class="refsect2"><a id="BEIBGBHF"></a>
<hr />
<h3 class="refsect2"><a id="sthref10128"></a>EXPORT_TABLE_PREFS Procedure</h3>
<p>This procedure is used to export the statistics preferences of the specified table in the specified schema into the specified statistics table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10129"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10130"></a>Parameters</p>
<div id="ARPLS68565" class="tblformal">
<p class="titleintable"><a id="sthref10131"></a><a id="sthref10132"></a>Table 142-37 EXPORT_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t41">Parameter</th>
<th class="cellalignment1227" id="r1c2-t41">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t41" headers="r1c1-t41">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t41 r1c2-t41">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t41" headers="r1c1-t41">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t41 r1c2-t41">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t41" headers="r1c1-t41">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t41 r1c2-t41">
<p>Statistics table name where to export the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t41" headers="r1c1-t41">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r5c1-t41 r1c2-t41">
<p>Optional identifier to associate with these statistics within stattab</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t41" headers="r1c1-t41">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r6c1-t41 r1c2-t41">
<p>Schema containing stattab (if other than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10133"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10134"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table, or have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10135"></a>Examples</p>
<pre>
DBMS_STATS.EXPORT_TABLE_PREFS('SH', 'SALES', 'STAT');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68566" class="refsect2"><a id="i1035814"></a>
<hr />
<h3 class="refsect2"><a id="sthref10136"></a>EXPORT_TABLE_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular table and stores them in the user statistics table. Cascade results in all index statistics associated with the specified table being exported as well.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10137"></a>Syntax</p>
<pre>
DBMS_STATS.EXPORT_TABLE_STATS (
   ownname         VARCHAR2, 
   tabname         VARCHAR2, 
   partname        VARCHAR2 DEFAULT NULL,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   cascade         BOOLEAN  DEFAULT TRUE,
   statown         VARCHAR2 DEFAULT NULL,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10138"></a>Parameters</p>
<div id="ARPLS68567" class="tblformal">
<p class="titleintable"><a id="sthref10139"></a><a id="sthref10140"></a>Table 142-38 EXPORT_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="EXPORT_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.EXPORT_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t42">Parameter</th>
<th class="cellalignment1227" id="r1c2-t42">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t42" headers="r1c1-t42">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t42 r1c2-t42">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t42" headers="r1c1-t42">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t42 r1c2-t42">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t42" headers="r1c1-t42">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t42 r1c2-t42">
<p>Name of the table partition. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then global and partition table statistics are exported.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t42" headers="r1c1-t42">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t42 r1c2-t42">
<p>User statistics table identifier describing where to store the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t42" headers="r1c1-t42">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t42 r1c2-t42">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t42" headers="r1c1-t42">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t42 r1c2-t42">
<p>If true, then column and index statistics for this table are also exported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t42" headers="r1c1-t42">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t42 r1c2-t42">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t42" headers="r1c1-t42">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t42 r1c2-t42">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10141"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10142"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68568" class="refsect2"><a id="i1036624"></a>
<hr />
<h3 class="refsect2"><a id="sthref10143"></a>FLUSH_DATABASE_MONITORING_INFO Procedure</h3>
<p>This procedure flushes in-memory monitoring information for all tables in the dictionary. Corresponding entries in the <code>*_TAB_MODIFICATIONS</code>, <code>*_TAB_STATISTICS</code> and <code>*_IND_STATISTICS</code> views are updated immediately, without waiting for the Oracle database to flush them periodically. This procedure is useful when you need up-to-date information in those views. Because the <code>GATHER_*_STATS</code> procedures internally flush monitoring information, it is not necessary to run this procedure before gathering the statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10144"></a>Syntax</p>
<pre>
DBMS_STATS.FLUSH_DATABASE_MONITORING_INFO; 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10145"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10146"></a>Usage Notes</p>
<p>The <code>ANALYZE_ANY</code> system privilege is required to run this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68569" class="refsect2"><a id="i1036194"></a>
<hr />
<h3 class="refsect2"><a id="sthref10147"></a>GATHER_DATABASE_STATS Procedures</h3>
<p>This procedure gathers statistics for all objects in the database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10148"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_DATABASE_STATS (
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param('ESTIMATE_PERCENT')),
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param('METHOD_OPT'),
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')),
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param('CASCADE')),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   options          VARCHAR2 DEFAULT 'GATHER',
   objlist          OUT      ObjectTab,
   statown          VARCHAR2 DEFAULT NULL,
   gather_sys       BOOLEAN  DEFAULT TRUE,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   obj_filter_list ObjectTab DEFAULT NULL);

DBMS_STATS.GATHER_DATABASE_STATS (
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param('ESTIMATE_PERCENT')), 
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param('METHOD_OPT'),
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')),
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param('CASCADE')),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   options          VARCHAR2 DEFAULT 'GATHER',
   statown          VARCHAR2 DEFAULT NULL,
   gather_sys       BOOLEAN  DEFAULT TRUE,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   obj_filter_list ObjectTab DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10149"></a>Parameters</p>
<div id="ARPLS68570" class="tblformal">
<p class="titleintable"><a id="sthref10150"></a><a id="sthref10151"></a>Table 142-39 GATHER_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t43">Parameter</th>
<th class="cellalignment1227" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t43" headers="r1c1-t43">
<p><code>estimate_percent</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t43 r1c2-t43">
<p>Percentage of rows to estimate (<code>NULL</code> means compute): The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t43" headers="r1c1-t43">
<p><code>block_sample</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t43 r1c2-t43">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t43" headers="r1c1-t43">
<p><code>method_opt</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t43 r1c2-t43">
<p>Accepts:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t43" headers="r1c1-t43">
<p><code>degree</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t43 r1c2-t43">
<p>Degree of parallelism. The default for <code>degree</code> is <code>NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code>NULL</code> means use the table default value specified by the <code>DEGREE</code> clause in the <code>CREATE TABLE</code> or <code>ALTER TABLE</code> statement. Use the constant <code>DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code>AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code>1</code> (serial execution) and <code>DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code>DEGREE=&gt;NULL</code>, <code>DEGREE=&gt;n</code>, or <code>DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code>DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t43" headers="r1c1-t43">
<p><code>granularity</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t43 r1c2-t43">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t43" headers="r1c1-t43">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t43 r1c2-t43">
<p>Gather statistics on the indexes as well. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the database in addition to gathering table and column statistics. Use the constant <code>DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t43" headers="r1c1-t43">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t43 r1c2-t43">
<p>User statistics table identifier describing where to save the current statistics.</p>
<p>The statistics table is assumed to reside in the same schema as the object being analyzed, so there must be one such table in each schema to use this option.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t43" headers="r1c1-t43">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t43 r1c2-t43">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t43" headers="r1c1-t43">
<p><code>options</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t43 r1c2-t43">
<p>Further specification of which objects to gather statistics for:</p>
<p><code>GATHER</code>: Gathers statistics on all objects in the schema.</p>
<p><code>GATHER</code> <code>AUTO</code>: Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics, and determines how to gather those statistics. When <code>GATHER AUTO</code> is specified, the only additional valid parameters are <code>stattab</code>, <code>statid</code>, <code>objlist</code> and <code>statown</code>; all other parameter settings are ignored. Returns a list of processed objects.</p>
<p><code>GATHER</code> <code>STALE</code>: Gathers statistics on stale objects as determined by looking at the *<code>_tab_modifications</code> views. Also, return a list of objects found to be stale.</p>
<p><code>GATHER</code> <code>EMPTY</code>: Gathers statistics on objects which currently have no statistics. Return a list of objects found to have no statistics.</p>
<p><code>LIST AUTO</code>: Returns a list of objects to be processed with <code>GATHER AUTO</code></p>
<p><code>LIST</code> <code>STALE</code>: Returns a list of stale objects as determined by looking at the *<code>_tab_modifications</code> views</p>
<p><code>LIST</code> <code>EMPTY</code>: Returns a list of objects which currently have no statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t43" headers="r1c1-t43">
<p><code>objlist</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t43 r1c2-t43">
<p>List of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t43" headers="r1c1-t43">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t43 r1c2-t43">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t43" headers="r1c1-t43">
<p><code>gather_sys</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t43 r1c2-t43">
<p>Gathers statistics on the objects owned by the <code>'SYS'</code> user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t43" headers="r1c1-t43">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t43 r1c2-t43">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t43" headers="r1c1-t43">
<p><code>obj_filter_list</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t43 r1c2-t43">
<p>A list of object filters. When provided, <code>GATHER_DATABASE_STATS</code> will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code>NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABJDJBB">Applying an Object Filter List</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10152"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10153"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68571" class="refsect2"><a id="i1055451"></a>
<hr />
<h3 class="refsect2"><a id="sthref10154"></a>GATHER_DICTIONARY_STATS Procedure</h3>
<p>This procedure gathers statistics for dictionary schemas '<code>SYS</code>', '<code>SYSTEM</code>' and schemas of RDBMS components.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10155"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_DICTIONARY_STATS (
   comp_id          VARCHAR2 DEFAULT NULL, 
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param('ESTIMATE_PERCENT')),
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param('METHOD_OPT'),
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')),
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'),
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param('CASCADE')),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   options          VARCHAR2 DEFAULT 'GATHER AUTO', 
   objlist    OUT   ObjectTab,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   obj_filter_list ObjectTab DEFAULT NULL);

DBMS_STATS.GATHER_DICTIONARY_STATS (
   comp_id           VARCHAR2 DEFAULT NULL,
   estimate_percent  NUMBER DEFAULT 
                          to_estimate_percent_type(GET_PARAM('ESTIMATE_PERCENT')),
   block_sample      BOOLEAN DEFAULT FALSE,
   method_opt        VARCHAR2 DEFAULT GET_PARAM('METHOD_OPT'),
   degree            NUMBER DEFAULT to_degree_type(GET_PARAM('DEGREE')),
   granularity       VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'),
   cascade           BOOLEAN DEFAULT to_cascade_type(GET_PARAM('CASCADE')),
   stattab           VARCHAR2 DEFAULT NULL, 
   statid            VARCHAR2 DEFAULT NULL,
   options           VARCHAR2 DEFAULT 'GATHER AUTO', 
   statown           VARCHAR2 DEFAULT NULL,
   no_invalidate     BOOLEAN DEFAULT
                               to_no_invalidate_type(get_param('NO_INVALIDATE')),
   obj_filter_list   ObjectTab DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10156"></a>Parameters</p>
<div id="ARPLS68572" class="tblformal">
<p class="titleintable"><a id="sthref10157"></a><a id="sthref10158"></a>Table 142-40 GATHER_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t44">Parameter</th>
<th class="cellalignment1227" id="r1c2-t44">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t44" headers="r1c1-t44">
<p><code>comp_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t44 r1c2-t44">
<p>Component id of the schema to analyze (<code>NULL</code> will result in analyzing schemas of all RDBMS components).Please refer to comp_id column of DBA_REGISTRY view. The procedure always gather statistics on '<code>SYS</code>' and '<code>SYSTEM</code>' schemas regardless of this argument.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t44" headers="r1c1-t44">
<p><code>estimate_percent</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t44 r1c2-t44">
<p>Percentage of rows to estimate (<code>NULL</code> means compute). The valid range is <code>[0.000001,100]</code>. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a><code>.</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t44" headers="r1c1-t44">
<p><code>block_sample</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t44 r1c2-t44">
<p>Determines whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk then the sample values may be somewhat correlated. Only pertinent when performing estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t44" headers="r1c1-t44">
<p><code>method_opt</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t44 r1c2-t44">
<p>Accepts:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t44" headers="r1c1-t44">
<p><code>degree</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t44 r1c2-t44">
<p>Degree of parallelism. The default for <code>degree</code> is <code>NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code>NULL</code> means use the table default value specified by the <code>DEGREE</code> clause in the <code>CREATE TABLE</code> or <code>ALTER TABLE</code> statement. Use the constant <code>DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code>AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code>1</code> (serial execution) and <code>DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code>DEGREE=&gt;NULL</code>, <code>DEGREE=&gt;n</code>, or <code>DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code>DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t44" headers="r1c1-t44">
<p><code>granularity</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t44 r1c2-t44">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - gathers subpartition-level statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t44" headers="r1c1-t44">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t44 r1c2-t44">
<p>Gathers statistics on indexes also.Index statistics gathering will not be parallelized. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the schema in addition to gathering table and column statistics. Use the constant <code>DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t44" headers="r1c1-t44">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t44 r1c2-t44">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t44" headers="r1c1-t44">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t44 r1c2-t44">
<p>The (optional) identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t44" headers="r1c1-t44">
<p><code>options</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t44 r1c2-t44">
<p>Further specification of objects for which to gather statistics:</p>
<ul>
<li>
<p>'<code>GATHER</code>' - Gathers statistics on all objects in the schema</p>
</li>
<li>
<p>'<code>GATHER</code> <code>AUTO</code>' - Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics and determines how to gather those statistics. When '<code>GATHER</code> <code>AUTO</code>' is specified, the only additional valid parameters are <code>comp_id</code>, <code>stattab</code>, <code>statid</code> and <code>statown</code>; all other parameter settings will be ignored. Also, returns a list of objects processed.</p>
</li>
<li>
<p>'<code>GATHER</code> <code>STALE</code>' - Gathers statistics on stale objects as determined by looking at the <code>*_tab</code>_modifications views. Also, returns a list of objects found to be stale.</p>
</li>
<li>
<p>'<code>GATHER</code> <code>EMPTY</code>' - Gathers statistics on objects which currently have no statistics. Also, returns a list of objects found to have no statistics.</p>
</li>
<li>
<p>'<code>LIST</code> <code>AUTO</code>' - Returns list of objects to be processed with '<code>GATHER</code> <code>AUTO</code>'</p>
</li>
<li>
<p>'<code>LIST</code> <code>STALE</code>' - Returns list of stale objects as determined by looking at the <code>*_tab</code>_modifications views</p>
</li>
<li>
<p>'<code>LIST</code> <code>EMPTY</code>' - Returns list of objects which currently have no statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t44" headers="r1c1-t44">
<p><code>objlist</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t44 r1c2-t44">
<p>The list of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t44" headers="r1c1-t44">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t44 r1c2-t44">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t44" headers="r1c1-t44">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t44 r1c2-t44">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t44" headers="r1c1-t44">
<p><code>obj_filter_list</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t44 r1c2-t44">
<p>A list of object filters. When provided, this will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code>NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABJDJBB">Applying an Object Filter List</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10159"></a>Usage Notes</p>
<p>You must have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10160"></a>Exceptions</p>
<p><code>ORA-20000</code>: Index does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Bad input value</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68573" class="refsect2"><a id="i1039162"></a>
<hr />
<h3 class="refsect2"><a id="sthref10161"></a>GATHER_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure gathers statistics for all fixed objects (dynamic performance tables).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10162"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_FIXED_OBJECTS_STATS (
   stattab        VARCHAR2 DEFAULT NULL,
   statid         VARCHAR2 DEFAULT NULL,
   statown        VARCHAR2 DEFAULT NULL, 
   no_invalidate  BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE'))); 
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10163"></a>Parameters</p>
<div id="ARPLS68574" class="tblformal">
<p class="titleintable"><a id="sthref10164"></a><a id="sthref10165"></a>Table 142-41 GATHER_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t45">Parameter</th>
<th class="cellalignment1227" id="r1c2-t45">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t45" headers="r1c1-t45">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t45 r1c2-t45">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t45" headers="r1c1-t45">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t45 r1c2-t45">
<p>Identifier to associate with these statistics within <code>stattab</code> (optional)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t45" headers="r1c1-t45">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t45 r1c2-t45">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t45" headers="r1c1-t45">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t45 r1c2-t45">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10166"></a>Usage Notes</p>
<p>You must have the <code>SYSDBA</code> or <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> system privilege to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10167"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20001</code>: Bad input value</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68575" class="refsect2"><a id="i1036276"></a>
<hr />
<h3 class="refsect2"><a id="sthref10168"></a>GATHER_INDEX_STATS Procedure</h3>
<p>This procedure gathers index statistics. It attempts to parallelize as much of the work as possible. Restrictions are described in the individual parameters. This operation will not parallelize with certain types of indexes, including cluster indexes, domain indexes, and bitmap join indexes. The <code>granularity</code> and <code>no_invalidate</code> arguments are not relevant to these types of indexes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10169"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_INDEX_STATS (
   ownname          VARCHAR2, 
   indname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (GET_PARAM('ESTIMATE_PERCENT')),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')),
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'),
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type 
                                               (GET_PARAM('NO_INVALIDATE')),
   force            BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10170"></a>Parameters</p>
<div id="ARPLS68576" class="tblformal">
<p class="titleintable"><a id="sthref10171"></a><a id="sthref10172"></a>Table 142-42 GATHER_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t46">Parameter</th>
<th class="cellalignment1227" id="r1c2-t46">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t46" headers="r1c1-t46">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t46 r1c2-t46">
<p>Schema of index to analyze</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t46" headers="r1c1-t46">
<p><code>indname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t46 r1c2-t46">
<p>Name of index</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t46" headers="r1c1-t46">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t46 r1c2-t46">
<p>Name of partition</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t46" headers="r1c1-t46">
<p><code>estimate_percent</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t46 r1c2-t46">
<p>Percentage of rows to estimate (<code>NULL</code> means compute). The valid range is <code>[0.000001,100]</code>. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t46" headers="r1c1-t46">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t46 r1c2-t46">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t46" headers="r1c1-t46">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t46 r1c2-t46">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t46" headers="r1c1-t46">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t46 r1c2-t46">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t46" headers="r1c1-t46">
<p><code>degree</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t46 r1c2-t46">
<p>Degree of parallelism. The default for <code>degree</code> is <code>NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code>NULL</code> means use the table default value specified by the <code>DEGREE</code> clause in the <code>CREATE TABLE</code> or <code>ALTER TABLE</code> statement. Use the constant <code>DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code>AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code>1</code> (serial execution) and <code>DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code>DEGREE=&gt;NULL</code>, <code>DEGREE=&gt;n</code>, or <code>DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code>DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t46" headers="r1c1-t46">
<p><code>granularity</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t46 r1c2-t46">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t46" headers="r1c1-t46">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t46 r1c2-t46">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t46" headers="r1c1-t46">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t46 r1c2-t46">
<p>Gather statistics on object even if it is locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10173"></a>Exceptions</p>
<p><code>ORA-20000</code>: Index does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10174"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68577" class="refsect2"><a id="i1036456"></a>
<hr />
<h3 class="refsect2"><a id="sthref10175"></a>GATHER_SCHEMA_STATS Procedures</h3>
<p>This procedure gathers statistics for all objects in a schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10176"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_SCHEMA_STATS ( 
   ownname          VARCHAR2, 
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param('ESTIMATE_PERCENT')), 
   block_sample     BOOLEAN  DEFAULT FALSE, 
   method_opt       VARCHAR2 DEFAULT get_param('METHOD_OPT'),
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')), 
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param('CASCADE')), 
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL, 
   options          VARCHAR2 DEFAULT 'GATHER', 
   objlist          OUT      ObjectTab,
   statown          VARCHAR2 DEFAULT NULL, 
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
  force             BOOLEAN DEFAULT FALSE,
  obj_filter_list  ObjectTab DEFAULT NULL);
   
DBMS_STATS.GATHER_SCHEMA_STATS ( 
   ownname          VARCHAR2, 
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param('ESTIMATE_PERCENT')), 
   block_sample     BOOLEAN  DEFAULT FALSE, 
   method_opt       VARCHAR2 DEFAULT get_param('METHOD_OPT'), 
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')), 
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param('CASCADE')), 
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL, 
   options          VARCHAR2 DEFAULT 'GATHER', 
   statown          VARCHAR2 DEFAULT NULL, 
   no_invalidate    BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE'), 
   force            BOOLEAN DEFAULT FALSE,
   obj_filter_list  ObjectTab DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10177"></a>Parameters</p>
<div id="ARPLS68578" class="tblformal">
<p class="titleintable"><a id="sthref10178"></a><a id="sthref10179"></a>Table 142-43 GATHER_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t47">Parameter</th>
<th class="cellalignment1227" id="r1c2-t47">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t47" headers="r1c1-t47">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t47 r1c2-t47">
<p>Schema to analyze (<code>NULL</code> means current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t47" headers="r1c1-t47">
<p><code>estimate_percent</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t47 r1c2-t47">
<p>Percentage of rows to estimate (<code>NULL</code> means compute): The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t47" headers="r1c1-t47">
<p><code>block_sample</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t47 r1c2-t47">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t47" headers="r1c1-t47">
<p><code>method_opt</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t47 r1c2-t47">
<p>Accepts:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t47" headers="r1c1-t47">
<p><code>degree</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t47 r1c2-t47">
<p>Degree of parallelism. The default for <code>degree</code> is <code>NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code>NULL</code> means use the table default value specified by the <code>DEGREE</code> clause in the <code>CREATE TABLE</code> or <code>ALTER TABLE</code> statement. Use the constant <code>DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code>AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code>1</code> (serial execution) and <code>DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code>DEGREE=&gt;NULL</code>, <code>DEGREE=&gt;n</code>, or <code>DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code>DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t47" headers="r1c1-t47">
<p><code>granularity</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t47 r1c2-t47">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t47" headers="r1c1-t47">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t47 r1c2-t47">
<p>Gather statistics on the indexes as well. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the indexes in the schema in addition to gathering table and column statistics. Use the constant <code>DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t47" headers="r1c1-t47">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t47 r1c2-t47">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t47" headers="r1c1-t47">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t47 r1c2-t47">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t47" headers="r1c1-t47">
<p><code>options</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t47 r1c2-t47">
<p>Further specification of which objects to gather statistics for:</p>
<p><code>GATHER</code>: Gathers statistics on all objects in the schema.</p>
<p><code>GATHER</code> <code>AUTO</code>: Gathers all necessary statistics automatically. Oracle implicitly determines which objects need new statistics, and determines how to gather those statistics. When <code>GATHER AUTO</code> is specified, the only additional valid parameters are <code>ownname</code>, <code>stattab</code>, <code>statid</code>, <code>objlist</code> and <code>statown</code>; all other parameter settings are ignored. Returns a list of processed objects.</p>
<p><code>GATHER</code> <code>STALE</code>: Gathers statistics on stale objects as determined by looking at the *<code>_tab_modifications</code> views. Also, return a list of objects found to be stale.</p>
<p><code>GATHER</code> <code>EMPTY</code>: Gathers statistics on objects which currently have no statistics. also, return a list of objects found to have no statistics.</p>
<p><code>LIST AUTO</code>: Returns a list of objects to be processed with <code>GATHER AUTO</code>.</p>
<p><code>LIST</code> <code>STALE</code>: Returns list of stale objects as determined by looking at the *<code>_tab_modifications</code> views.</p>
<p><code>LIST</code> <code>EMPTY</code>: Returns list of objects which currently have no statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t47" headers="r1c1-t47">
<p><code>objlist</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t47 r1c2-t47">
<p>List of objects found to be stale or empty</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t47" headers="r1c1-t47">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t47 r1c2-t47">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t47" headers="r1c1-t47">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t47 r1c2-t47">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t47" headers="r1c1-t47">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t47 r1c2-t47">
<p>Gather statistics on objects even if they are locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t47" headers="r1c1-t47">
<p><code>obj_filter_list</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t47 r1c2-t47">
<p>A list of object filters. When provided, <code>GATHER_SCHEMA_STATS</code> will gather statistics only on objects which satisfy at least one object filter in the list as needed. In a single object filter, we can specify the constraints on the object attributes. The attribute values specified in the object filter are case- insensitive unless double-quoted. Wildcard is allowed in the attribute values. Suppose non-<code>NULL</code> values s1, s2, ... are specified for attributes a1, a2, ... in one object filter. An object o is said to satisfy this object filter if (o.a1 like s1) and (o.a2 like s2) and ... is true. See <a href="#BABJDJBB">Applying an Object Filter List</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10180"></a>Exceptions</p>
<p><code>ORA-20000</code>: Schema does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10181"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>When you use a specific value for the sampling percentage, <code>DBMS_STATS</code> honors it except for when:</p>
<ul>
<li>
<p>The result is less than 2500 rows (too small a sample) and</p>
</li>
<li>
<p>The specified percentage is more than the certain percentage.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10182"></a>Examples</p>
<p class="subhead2"><a id="BABJDJBB"></a><a id="ARPLS68579"></a>Applying an Object Filter List</p>
<p>The following example specifies that any table with a "<code>T</code>" prefix in the <code>SAMPLE</code> schema and any table in the <code>SYS</code> schema, if stale, will have statistics gathered upon it.</p>
<pre>
DECLARE
   filter_lst  DBMS_STATS.OBJECTTAB := DBMS_STATS.OBJECTTAB();
BEGIN
   filter_lst.extend(2);
   filter_lst(1).ownname := 'SH';
   filter_lst(1).objname := 'SALES';
   filter_lst(2).ownname := 'SH';
   filter_lst(2).objname := 'COSTS';
   DBMS_STATS.GATHER_SCHEMA_STATS(ownname=&gt;'SH',obj_filter_list=&gt;filter_lst);
 END;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68580" class="refsect2"><a id="i1036401"></a>
<hr />
<h3 class="refsect2"><a id="sthref10183"></a>GATHER_SYSTEM_STATS Procedure</h3>
<p>This procedure gathers system statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10184"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_SYSTEM_STATS (
   gathering_mode   VARCHAR2 DEFAULT 'NOWORKLOAD',
   interval         INTEGER  DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL,
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10185"></a>Parameters</p>
<div id="ARPLS68581" class="tblformal">
<p class="titleintable"><a id="sthref10186"></a><a id="sthref10187"></a>Table 142-44 GATHER_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t48">Parameter</th>
<th class="cellalignment1227" id="r1c2-t48">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t48" headers="r1c1-t48">
<p><code>gathering_mode</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t48 r1c2-t48">
<p>Mode values are:</p>
<p><code>NOWORKLOAD</code>: Will capture characteristics of the I/O system. Gathering may take a few minutes and depends on the size of the database. During this period Oracle will estimate the average read seek time and transfer speed for the I/O system. This mode is suitable for the all workloads. Oracle recommends to run <code>GATHER_SYSTEM_STATS</code> ('noworkload') after creation of the database and tablespaces. To fine tune system statistics for the workload use '<code>START</code>' and '<code>STOP</code>' or '<code>INTERVAL</code>' options. If you gather both '<code>NOWORKLOAD</code>' and workload specific (statistics collected using '<code>INTERVAL</code>' or '<code>START</code>' and '<code>STOP</code>' ), the workload statistics will be used by optimizer. Collected components: <code>cpuspeednw,</code> <code>ioseektim,</code> <code>iotfrspeed</code>.</p>
<p><code>INTERVAL</code>: Captures system activity during a specified interval. This works in combination with the <code>interval</code> parameter. You should provide an interval value in minutes, after which system statistics are created or updated in the dictionary or <code>stattab</code>. You can use <code>GATHER_SYSTEM_STATS (gathering_mode=&gt;'STOP'</code>) to stop gathering earlier than scheduled. Collected components: <code>maxthr</code>, <code>slavethr</code>, <code>cpuspeed</code>, <code>sreadtim</code>, <code>mreadtim</code>, <code>mbrc</code>.</p>
<p><code>START</code> | <code>STOP</code>: Captures system activity during specified start and stop times and refreshes the dictionary or <code>stattab</code> with statistics for the elapsed period. <code>Interval</code> value is ignored. Collected components: <code>maxthr</code>, <code>slavethr</code>, <code>cpuspeed</code>, <code>sreadtim</code>, <code>mreadtim</code>, <code>mbrc</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t48" headers="r1c1-t48">
<p><code>interval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t48 r1c2-t48">
<p>Time, in minutes, to gather statistics. This parameter applies only when <code>gathering_mode='INTERVAL'</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t48" headers="r1c1-t48">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t48 r1c2-t48">
<p>Identifier of the user statistics table where the statistics will be saved</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t48" headers="r1c1-t48">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t48 r1c2-t48">
<p>Optional identifier associated with the statistics saved in the <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t48" headers="r1c1-t48">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t48 r1c2-t48">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10188"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid input value</p>
<p><code>ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code>ORA-20003</code>: Unable to gather system statistics</p>
<p><code>ORA-20004</code>: Error in the <code>INTERVAL</code> mode: system parameter <code>job_queue_processes</code> must be &gt;0</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10189"></a>Usage Notes</p>
<p>To run this procedure, you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68582" class="refsect2"><a id="i1036461"></a>
<hr />
<h3 class="refsect2"><a id="sthref10190"></a>GATHER_TABLE_STATS Procedure</h3>
<p>This procedure gathers table and column (and index) statistics. It attempts to parallelize as much of the work as possible, but there are some restrictions as described in the individual parameters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10191"></a>Syntax</p>
<pre>
DBMS_STATS.GATHER_TABLE_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   estimate_percent NUMBER   DEFAULT to_estimate_percent_type 
                                                (get_param('ESTIMATE_PERCENT')), 
   block_sample     BOOLEAN  DEFAULT FALSE,
   method_opt       VARCHAR2 DEFAULT get_param('METHOD_OPT'),
   degree           NUMBER   DEFAULT to_degree_type(get_param('DEGREE')),
   granularity      VARCHAR2 DEFAULT GET_PARAM('GRANULARITY'), 
   cascade          BOOLEAN  DEFAULT to_cascade_type(get_param('CASCADE')),
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   statown          VARCHAR2 DEFAULT NULL,
   no_invalidate    BOOLEAN  DEFAULT  to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   stattype         VARCHAR2 DEFAULT 'DATA',
   force            BOOLEAN  DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10192"></a>Parameters</p>
<div id="ARPLS68583" class="tblformal">
<p class="titleintable"><a id="sthref10193"></a><a id="sthref10194"></a>Table 142-45 GATHER_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GATHER_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GATHER_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t49">Parameter</th>
<th class="cellalignment1227" id="r1c2-t49">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t49" headers="r1c1-t49">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t49 r1c2-t49">
<p>Schema of table to analyze</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t49" headers="r1c1-t49">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t49 r1c2-t49">
<p>Name of table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t49" headers="r1c1-t49">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t49 r1c2-t49">
<p>Name of partition</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t49" headers="r1c1-t49">
<p><code>estimate_percent</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t49 r1c2-t49">
<p>Percentage of rows to estimate (<code>NULL</code> means compute) The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t49" headers="r1c1-t49">
<p><code>block_sample</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t49 r1c2-t49">
<p>Whether or not to use random block sampling instead of random row sampling. Random block sampling is more efficient, but if the data is not randomly distributed on disk, then the sample values may be somewhat correlated. Only pertinent when doing an estimate statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t49" headers="r1c1-t49">
<p><code>method_opt</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t49 r1c2-t49">
<p>Accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br />
- <code>column_name</code> : Name of a column<br />
- <code>extension :</code> can be either a column group in the format of (<code>column_name</code>, <code>Colume_name</code> [, ...]) or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t49" headers="r1c1-t49">
<p><code>degree</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t49 r1c2-t49">
<p>Degree of parallelism. The default for <code>degree</code> is <code>NULL</code>. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>. <code>NULL</code> means use the table default value specified by the <code>DEGREE</code> clause in the <code>CREATE TABLE</code> or <code>ALTER TABLE</code> statement. Use the constant <code>DBMS_STATS.DEFAULT_DEGREE</code> to specify the default value based on the initialization parameters. The <code>AUTO_DEGREE</code> value determines the degree of parallelism automatically. This is between <code>1</code> (serial execution) and <code>DEFAULT_DEGREE</code> (the system default value based on number of CPUs and initialization parameters) according to the size of the object. When using <code>DEGREE=&gt;NULL</code>, <code>DEGREE=&gt;n</code>, or <code>DEGREE=&gt;DBMS_STATS.DEFAULT_DEGREE</code>, the current implementation of <code>DBMS_STATS</code> may use serial execution if the size of the object does not warrant parallel execution.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t49" headers="r1c1-t49">
<p><code>granularity</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t49 r1c2-t49">
<p>Granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'APPROX_GLOBAL AND PARTITION'</code> - similar to <code>'GLOBAL AND PARTITION'</code> but in this case the global statistics are aggregated from partition level statistics. This option will aggregate all statistics except the number of distinct values for columns and number of distinct keys of indexes. The existing histograms of the columns at the table level are also aggregated.The aggregation will use only partitions with statistics, so to get accurate global statistics, users should make sure to have statistics for all partitions. Global statistics are gathered if <code>partname</code> is <code>NULL</code> or if the aggregation cannot be performed (for example, if statistics for one of the partitions is missing).</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t49" headers="r1c1-t49">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t49 r1c2-t49">
<p>Gathers statistics on the indexes for this table. Using this option is equivalent to running the <a href="#i1036276">GATHER_INDEX_STATS Procedure</a> on each of the table's indexes. Use the constant <code>DBMS_STATS.AUTO_CASCADE</code> to have Oracle determine whether index statistics are to be collected or not. This is the default. The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a><code>.</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t49" headers="r1c1-t49">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t49 r1c2-t49">
<p>User statistics table identifier describing where to save the current statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t49" headers="r1c1-t49">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t49 r1c2-t49">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t49" headers="r1c1-t49">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t49 r1c2-t49">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t49" headers="r1c1-t49">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t49 r1c2-t49">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t49" headers="r1c1-t49">
<p><code>stattype</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t49 r1c2-t49">
<p>Statistics type. The only value allowed is <code>DATA</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t49" headers="r1c1-t49">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t49 r1c2-t49">
<p>Gather statistics of table even if it is locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10195"></a>Exceptions</p>
<p><code>ORA-20000</code>: Table does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Bad input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10196"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>Index statistics collection can be parellelized except for cluster, domain and join indexes.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10197"></a>Examples</p>
<p>An extension can be either a column group (see Example 1) or an expression (see Example 2).</p>
<p class="subhead2"><a id="ARPLS68584"></a>Example 1</p>
<pre>
DBMS_STATS.GATHER_TABLE_STATS(
    'SH', 'SALES', method_opt =&gt; 'FOR COLUMNS (empno, deptno)'); 
</pre>
<p class="subhead2"><a id="ARPLS68585"></a>Example 2</p>
<pre>
DBMS_STATS.GATHER_TABLE_STATS(
    'SH', 'SALES', method_opt =&gt; 'FOR COLUMNS (sal+comm)');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68586" class="refsect2"><a id="i1036560"></a>
<hr />
<h3 class="refsect2"><a id="sthref10198"></a>GENERATE_STATS Procedure</h3>
<p>This procedure generates object statistics from previously collected statistics of related objects. The currently supported objects are b-tree and bitmap indexes.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10199"></a>Syntax</p>
<pre>
DBMS_STATS.GENERATE_STATS (
   ownname    VARCHAR2, 
   objname    VARCHAR2,
   organized  NUMBER DEFAULT 7,
   force      BOOLEAN default FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10200"></a>Parameters</p>
<div id="ARPLS68587" class="tblformal">
<p class="titleintable"><a id="sthref10201"></a><a id="sthref10202"></a>Table 142-46 GENERATE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GENERATE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GENERATE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t50">Parameter</th>
<th class="cellalignment1227" id="r1c2-t50">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t50" headers="r1c1-t50">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t50 r1c2-t50">
<p>Schema of object</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t50" headers="r1c1-t50">
<p><code>objname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t50 r1c2-t50">
<p>Name of object</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t50" headers="r1c1-t50">
<p><code>organized</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t50 r1c2-t50">
<p>Amount of ordering associated between the index and its underlying table. A heavily organized index would have consecutive index keys referring to consecutive rows on disk for the table (the same block). A heavily disorganized index would have consecutive keys referencing different table blocks on disk.</p>
<p>This parameter is only used for b-tree indexes. The number can be in the range of 0-10, with 0 representing a completely organized index and 10 a completely disorganized one.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t50" headers="r1c1-t50">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t50 r1c2-t50">
<p>If <code>TRUE</code>, generates statistics for the target object even if it is locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10203"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by SYS, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the SYSDBA privilege.</p>
<p>For fully populated schemas, the gather procedures should be used instead when more accurate statistics are desired.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10204"></a>Exceptions</p>
<p><code>ORA-20000</code>: Unsupported object type of object does not exist</p>
<p><code>ORA-20001</code>: Invalid option or invalid statistics</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68588" class="refsect2"><a id="i1036689"></a>
<hr />
<h3 class="refsect2"><a id="sthref10205"></a>GET_COLUMN_STATS Procedures</h3>
<p>These procedures gets all column-related information. In the form of this procedure that deals with user-defined statistics, the statistics type returned is the type stored, in addition to the user-defined statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10206"></a>Syntax</p>
<pre>
DBMS_STATS.GET_COLUMN_STATS (
   ownname     VARCHAR2, 
   tabname     VARCHAR2, 
   colname     VARCHAR2, 
   partname    VARCHAR2 DEFAULT NULL,
   stattab     VARCHAR2 DEFAULT NULL, 
   statid      VARCHAR2 DEFAULT NULL,
   distcnt OUT NUMBER, 
   density OUT NUMBER,
   nullcnt OUT NUMBER, 
   srec    OUT StatRec,
   avgclen OUT NUMBER,
   statown     VARCHAR2 DEFAULT NULL);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre>
DBMS_STATS.GET_COLUMN_STATS (
   ownname          VARCHAR2, 
   tabname          VARCHAR2, 
   colname          VARCHAR2, 
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   ext_stats   OUT  RAW,
   stattypown  OUT  VARCHAR2 DEFAULT NULL, 
   stattypname OUT  VARCHAR2 DEFAULT NULL, 
   statown          VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10207"></a>Parameters</p>
<div id="ARPLS68589" class="tblformal">
<p class="titleintable"><a id="sthref10208"></a><a id="sthref10209"></a>Table 142-47 GET_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GET_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t51">Parameter</th>
<th class="cellalignment1227" id="r1c2-t51">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t51" headers="r1c1-t51">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t51 r1c2-t51">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t51" headers="r1c1-t51">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t51 r1c2-t51">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t51" headers="r1c1-t51">
<p><code>colname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t51 r1c2-t51">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t51" headers="r1c1-t51">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t51 r1c2-t51">
<p>Name of the table partition from which to get the statistics. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, statistics are retrieved from the global table level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t51" headers="r1c1-t51">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t51 r1c2-t51">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code>stattab</code> is <code>NULL</code>, statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t51" headers="r1c1-t51">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t51 r1c2-t51">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t51" headers="r1c1-t51">
<p><code>ext_stats</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t51 r1c2-t51">
<p>The user-defined statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t51" headers="r1c1-t51">
<p><code>stattypown</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t51 r1c2-t51">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t51" headers="r1c1-t51">
<p><code>stattypname</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t51 r1c2-t51">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t51" headers="r1c1-t51">
<p><code>distcnt</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t51 r1c2-t51">
<p>Number of distinct values</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t51" headers="r1c1-t51">
<p><code>density</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t51 r1c2-t51">
<p>Column density</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t51" headers="r1c1-t51">
<p><code>nullcnt</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t51 r1c2-t51">
<p>Number of <code>NULLs</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t51" headers="r1c1-t51">
<p><code>srec</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t51 r1c2-t51">
<p>Structure holding internal representation of column minimum, maximum, and histogram values</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t51" headers="r1c1-t51">
<p><code>avgclen</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t51 r1c2-t51">
<p>Average length of the column (in bytes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t51" headers="r1c1-t51">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t51 r1c2-t51">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10210"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges or no statistics have been stored for requested object</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10211"></a>Usage Notes</p>
<p>Before invoking this procedure, ensure that the table exists.</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68590" class="refsect2"><a id="i1036796"></a>
<hr />
<h3 class="refsect2"><a id="sthref10212"></a>GET_INDEX_STATS Procedures</h3>
<p>These procedures get all index-related information. In the form of this procedure that deals with user-defined statistics, the statistics type returned is the type stored, in addition to the user-defined statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10213"></a>Syntax</p>
<pre>
DBMS_STATS.GET_INDEX_STATS (
   ownname        VARCHAR2, 
   indname        VARCHAR2,
   partname       VARCHAR2 DEFAULT NULL,
   stattab        VARCHAR2 DEFAULT NULL, 
   statid         VARCHAR2 DEFAULT NULL,
   numrows    OUT NUMBER, 
   numlblks   OUT NUMBER,
   numdist    OUT NUMBER, 
   avglblk    OUT NUMBER,
   avgdblk    OUT NUMBER, 
   clstfct    OUT NUMBER,
   indlevel   OUT NUMBER,
   statown        VARCHAR2 DEFAULT NULL,
   cachedblk  OUT NUMBER,
   cachehit   OUT NUMBER);

DBMS_STATS.GET_INDEX_STATS (
   ownname        VARCHAR2, 
   indname        VARCHAR2,
   partname       VARCHAR2 DEFAULT NULL,
   stattab        VARCHAR2 DEFAULT NULL, 
   statid         VARCHAR2 DEFAULT NULL,
   numrows    OUT NUMBER, 
   numlblks   OUT NUMBER,
   numdist    OUT NUMBER, 
   avglblk    OUT NUMBER,
   avgdblk    OUT NUMBER, 
   clstfct    OUT NUMBER,
   indlevel   OUT NUMBER,
   statown        VARCHAR2 DEFAULT NULL,
   guessq     OUT NUMBER,
   cachedblk  OUT NUMBER,
   cachehit   OUT NUMBER);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre>
DBMS_STATS.GET_INDEX_STATS (
   ownname          VARCHAR2, 
   indname          VARCHAR2,
   partname         VARCHAR2 DEFAULT NULL,
   stattab          VARCHAR2 DEFAULT NULL, 
   statid           VARCHAR2 DEFAULT NULL,
   ext_stats   OUT  RAW,
   stattypown  OUT  VARCHAR2 DEFAULT NULL, 
   stattypname OUT  VARCHAR2 DEFAULT NULL, 
   statown          VARCHAR2 DEFAULT NULL,
   cachedblk        OUT NUMBER,
   cachehit         OUT NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10214"></a>Parameters</p>
<div id="ARPLS68591" class="tblformal">
<p class="titleintable"><a id="sthref10215"></a><a id="sthref10216"></a>Table 142-48 GET_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GET_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t52">Parameter</th>
<th class="cellalignment1227" id="r1c2-t52">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t52" headers="r1c1-t52">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t52 r1c2-t52">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t52" headers="r1c1-t52">
<p><code>indname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t52 r1c2-t52">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t52" headers="r1c1-t52">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t52 r1c2-t52">
<p>Name of the index partition for which to get the statistics. If the index is partitioned and if <code>partname</code> is <code>NULL</code>, then the statistics are retrieved for the global index level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t52" headers="r1c1-t52">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t52 r1c2-t52">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t52" headers="r1c1-t52">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t52 r1c2-t52">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t52" headers="r1c1-t52">
<p><code>ext_stats</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t52 r1c2-t52">
<p>User-defined statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t52" headers="r1c1-t52">
<p><code>stattypown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t52 r1c2-t52">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t52" headers="r1c1-t52">
<p><code>stattypname</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t52 r1c2-t52">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t52" headers="r1c1-t52">
<p><code>numrows</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t52 r1c2-t52">
<p>Number of rows in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t52" headers="r1c1-t52">
<p><code>numlblks</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t52 r1c2-t52">
<p>Number of leaf blocks in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t52" headers="r1c1-t52">
<p><code>numdist</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t52 r1c2-t52">
<p>Number of distinct keys in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t52" headers="r1c1-t52">
<p><code>avglblk</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t52 r1c2-t52">
<p>Average integral number of leaf blocks in which each distinct key appears for this index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t52" headers="r1c1-t52">
<p><code>avgdblk</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t52 r1c2-t52">
<p>Average integral number of data blocks in the table pointed to by a distinct key for this index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t52" headers="r1c1-t52">
<p><code>clstfct</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t52 r1c2-t52">
<p>Clustering factor for the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t52" headers="r1c1-t52">
<p><code>indlevel</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t52 r1c2-t52">
<p>Height of the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t52" headers="r1c1-t52">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t52 r1c2-t52">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t52" headers="r1c1-t52">
<p><code>guessq</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t52 r1c2-t52">
<p>Guess quality for the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t52" headers="r1c1-t52">
<p><code>cachedblk</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t52 r1c2-t52">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t52" headers="r1c1-t52">
<p><code>cachehit</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t52 r1c2-t52">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10217"></a>Usage Notes</p>
<ul>
<li>
<p>Before invoking this procedure, ensure that the table exists.</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code>cachedblk</code> and <code>cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code>DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code>DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a 'confidence factor' for each <code>cachehit</code> and a <code>cachedblk</code> for each object. If the 'confidence factor' for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other "minor" workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10218"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges or no statistics have been stored for requested object</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68592" class="refsect2"><a id="i1048775"></a>
<hr />
<h3 class="refsect2"><a id="sthref10219"></a>GET_PARAM Function</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been replaced by improved technology and is maintained only for purposes of backward compatibility. In this case, use the <a href="#BEICCEDB">GET_PREFS Function</a>.
<p>See also <a href="#i1049539">Deprecated Subprograms</a>.</p>
</div>
<p>This function returns the default value of parameters of <code>DBMS_STATS</code> procedures.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10220"></a>Syntax</p>
<pre>
DBMS_STATS.GET_PARAM (
   pname     IN   VARCHAR2)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10221"></a>Parameters</p>
<div id="ARPLS68593" class="tblformal">
<p class="titleintable"><a id="sthref10222"></a><a id="sthref10223"></a>Table 142-49 GET_PARAM Function Parameters</p>
<table class="cellalignment1229" title="GET_PARAM Function Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_PARAM subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t54">Parameter</th>
<th class="cellalignment1227" id="r1c2-t54">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t54" headers="r1c1-t54">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t54 r1c2-t54">
<p>Parameter name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10224"></a>Exceptions</p>
<p><code>ORA-20001</code>: Invalid input values</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68594" class="refsect2"><a id="BEICCEDB"></a>
<hr />
<h3 class="refsect2"><a id="sthref10225"></a>GET_PREFS Function</h3>
<p>This function returns the default value of the specified preference.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10226"></a>Syntax</p>
<pre>
DBMS_STATS.GET_PREFS (
   pname     IN   VARCHAR2,
   ownname   IN   VARCHAR2 DEFAULT NULL,
   tabname   IN   VARCHAR2 DEFAULT NULL)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10227"></a>Parameters</p>
<div id="ARPLS68595" class="tblformal">
<p class="titleintable"><a id="sthref10228"></a><a id="sthref10229"></a>Table 142-50 GET_PREFS Function Parameters</p>
<table class="cellalignment1229" title="GET_PREFS Function Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t55">Parameter</th>
<th class="cellalignment1227" id="r1c2-t55">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t55" headers="r1c1-t55">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t55 r1c2-t55">
<p>Preference name. The default value for following preferences can be retrieved:</p>
<ul>
<li>
<p><code>AUTOSTATS_TARGET</code></p>
</li>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t55" headers="r1c1-t55">&nbsp;</td>
<td class="cellalignment1228" headers="r3c1-t55 r1c2-t55">
<p><code>AUTOSTATS_TARGET</code> - This preference is applicable only for auto statistics collection. The value of this parameter controls the objects considered for statistics collection. It takes the following values:</p>
<ul>
<li>
<p><code>'ALL'</code> - Statistics collected for all objects in system</p>
</li>
<li>
<p><code>'ORACLE'</code> - Statistics collected for all Oracle owned objects</p>
</li>
<li>
<p><code>'AUTO'</code> - Oracle decides on which objects to collect statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r4c1-t55 r1c2-t55">
<p><code>CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics<code>.</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t55 r1c2-t55">
<p><code>DEGREE</code> - Determines degree of parallelism used for gathering statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t55 r1c2-t55">
<p><code>ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t55 r1c2-t55">
<p><code>METHOD_OPT</code> - Controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br />
- <code>column_name</code> : name of a column<br />
- <code>extension :</code> can be either a column group in the format of <code>(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.The default value can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t55 r1c2-t55">
<p><code>NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t55 r1c2-t55">
<p><code>GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t55 r1c2-t55">
<p><code>PUBLISH</code> - Determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t55 r1c2-t55">
<p><code>INCREMENTAL</code> - Determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code></p>
</li>
<li>
<p><code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>User specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t55" headers="r1c1-t55">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r12c1-t55 r1c2-t55">
<p><code>STALE_PERCENT</code> - This value determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers. The default value is 10%.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t55" headers="r1c1-t55">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t55 r1c2-t55">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t55" headers="r1c1-t55">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t55 r1c2-t55">
<p>Table name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10230"></a>Exceptions</p>
<p><code>ORA-20001</code>: Invalid input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10231"></a>Usage Notes</p>
<p>If the ownname and tabname are provided and a preference has been entered for the table, the function returns the preference as specified for the table. In all other cases it returns the global preference if it has been specified, otherwise the default value is returned.</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68596" class="refsect2"><a id="i1050595"></a>
<hr />
<h3 class="refsect2"><a id="sthref10232"></a>GET_STATS_HISTORY_AVAILABILITY Function</h3>
<p>This function returns oldest timestamp where statistics history is available.Users cannot restore statistics to a timestamp older than this one.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10233"></a>Syntax</p>
<pre>
DBMS_STATS.GET_STATS_HISTORY_AVAILABILITY
 RETURN TIMESTAMP WITH TIMEZONE;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10234"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68597" class="refsect2"><a id="i1048205"></a>
<hr />
<h3 class="refsect2"><a id="sthref10235"></a>GET_STATS_HISTORY_RETENTION Function</h3>
<p>This function returns the current retention value.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10236"></a>Syntax</p>
<pre>
DBMS_STATS.GET_STATS_HISTORY_RETENTION
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10237"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68598" class="refsect2"><a id="i1036927"></a>
<hr />
<h3 class="refsect2"><a id="sthref10238"></a>GET_SYSTEM_STATS Procedure</h3>
<p>This procedure gets system statistics from <code>stattab</code>, or from the dictionary if <code>stattab</code> is <code>NULL</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10239"></a>Syntax</p>
<pre>
DBMS_STATS.GET_SYSTEM_STATS (
   status    OUT  VARCHAR2,
   dstart    OUT  DATE,
   dstop     OUT  DATE,
   pname          VARCHAR2,
   pvalue    OUT  NUMBER,
   stattab   IN   VARCHAR2 DEFAULT NULL, 
   statid    IN   VARCHAR2 DEFAULT NULL,
   statown   IN   VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10240"></a>Parameters</p>
<div id="ARPLS68599" class="tblformal">
<p class="titleintable"><a id="sthref10241"></a><a id="sthref10242"></a>Table 142-51 GET_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GET_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t56">Parameter</th>
<th class="cellalignment1227" id="r1c2-t56">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t56" headers="r1c1-t56">
<p><code>status</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t56 r1c2-t56">
<p>Output is one of the following:</p>
<ul>
<li>
<p><code>COMPLETED:</code></p>
</li>
<li>
<p><code>AUTOGATHERING:</code></p>
</li>
<li>
<p><code>MANUALGATHERING:</code></p>
</li>
<li>
<p><code>BADSTATS:</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t56" headers="r1c1-t56">
<p><code>dstart</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t56 r1c2-t56">
<p>Date when statistics gathering started.</p>
<p>If <code>status</code> = <code>MANUALGATHERING</code>, the start date is returned.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t56" headers="r1c1-t56">
<p><code>dstop</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t56 r1c2-t56">
<p>Date when statistics gathering stopped.</p>
<ul>
<li>
<p>If <code>status</code> = <code>COMPLETE</code>, the finish date is returned.</p>
</li>
<li>
<p>If <code>status</code> = <code>AUTOGATHERING</code>, the future finish date is returned.</p>
</li>
<li>
<p>If <code>status</code> = <code>BADSTATS</code>, the must-finished-by date is returned.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t56" headers="r1c1-t56">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t56 r1c2-t56">
<p>The parameter name to get, which can have one of the following values:</p>
<ul>
<li>
<p><code>iotfrspeed</code> - I/O transfer speed in bytes for each millisecond</p>
</li>
<li>
<p><code>ioseektim</code> - seek time + latency time + operating system overhead time, in milliseconds</p>
</li>
<li>
<p><code>sreadtim</code> - average time to read single block (random read), in milliseconds</p>
</li>
<li>
<p><code>mreadtim</code> - average time to read an mbrc block at once (sequential read), in milliseconds</p>
</li>
<li>
<p><code>cpuspeed</code> - average number of CPU cycles for each second, in millions, captured for the workload (statistics collected using '<code>INTERVAL</code>' or '<code>START</code>' and '<code>STOP</code>' options)</p>
</li>
<li>
<p><code>cpuspeednw</code> - average number of CPU cycles for each second, in millions, captured for the noworkload (statistics collected using '<code>NOWORKLOAD</code>' option.</p>
</li>
<li>
<p><code>mbrc</code> - average multiblock read count for sequential read, in blocks</p>
</li>
<li>
<p><code>maxthr</code> - maximum I/O system throughput, in bytes/second</p>
</li>
<li>
<p><code>slavethr</code> - average slave I/O throughput, in bytes/second</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t56" headers="r1c1-t56">
<p><code>pvalue</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t56 r1c2-t56">
<p>Parameter value to get</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t56" headers="r1c1-t56">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t56 r1c2-t56">
<p>Identifier of the user statistics table where the statistics will be obtained. If stattab is null, the statistics will be obtained from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t56" headers="r1c1-t56">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t56 r1c2-t56">
<p>Optional identifier associated with the statistics saved in the <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t56" headers="r1c1-t56">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t56 r1c2-t56">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10243"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code>ORA-20003</code>: Unable to gather system statistics</p>
<p><code>ORA-20004</code>: Parameter does not exist</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10244"></a>Usage Notes</p>
<p>To run this procedure, you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68600" class="refsect2"><a id="i1037003"></a>
<hr />
<h3 class="refsect2"><a id="sthref10245"></a>GET_TABLE_STATS Procedure</h3>
<p>This procedure gets all table-related information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10246"></a>Syntax</p>
<pre>
DBMS_STATS.GET_TABLE_STATS (
   ownname         VARCHAR2, 
   tabname         VARCHAR2, 
   partname        VARCHAR2 DEFAULT NULL,
   stattab         VARCHAR2 DEFAULT NULL,
   statid          VARCHAR2 DEFAULT NULL,
   numrows     OUT NUMBER, 
   numblks     OUT NUMBER,
   avgrlen     OUT NUMBER,
   statown         VARCHAR2 DEFAULT NULL,
   cachedblk   OUT NUMBER,
   cachehit    OUT NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10247"></a>Parameters</p>
<div id="ARPLS68601" class="tblformal">
<p class="titleintable"><a id="sthref10248"></a><a id="sthref10249"></a>Table 142-52 GET_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="GET_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.GET_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t57">Parameter</th>
<th class="cellalignment1227" id="r1c2-t57">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t57" headers="r1c1-t57">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t57 r1c2-t57">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t57" headers="r1c1-t57">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t57 r1c2-t57">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t57" headers="r1c1-t57">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t57 r1c2-t57">
<p>Name of the table partition from which to get the statistics. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then the statistics are retrieved from the global table level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t57" headers="r1c1-t57">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t57 r1c2-t57">
<p>User statistics table identifier describing from where to retrieve the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are retrieved directly from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t57" headers="r1c1-t57">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t57 r1c2-t57">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t57" headers="r1c1-t57">
<p><code>numrows</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t57 r1c2-t57">
<p>Number of rows in the table (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t57" headers="r1c1-t57">
<p><code>numblks</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t57 r1c2-t57">
<p>Number of blocks the table (partition) occupies</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t57" headers="r1c1-t57">
<p><code>avgrlen</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t57 r1c2-t57">
<p>Average row length for the table (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t57" headers="r1c1-t57">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t57 r1c2-t57">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t57" headers="r1c1-t57">
<p><code>cachedblk</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t57 r1c2-t57">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t57" headers="r1c1-t57">
<p><code>cachehit</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t57 r1c2-t57">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10250"></a>Usage Notes</p>
<ul>
<li>
<p>Before invoking this procedure, ensure that the table exists.</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code>cachedblk</code> and <code>cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code>DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code>DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a 'confidence factor' for each <code>cachehit</code> and a <code>cachedblk</code> for each object. If the 'confidence factor' for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other "minor" workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10251"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges or no statistics have been stored for requested object</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10252"></a>Usage Notes</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68602" class="refsect2"><a id="i1037153"></a>
<hr />
<h3 class="refsect2"><a id="sthref10253"></a>IMPORT_COLUMN_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular column from the user statistics table identified by <code>stattab</code> and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10254"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_COLUMN_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   colname       VARCHAR2,
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10255"></a>Parameters</p>
<div id="ARPLS68603" class="tblformal">
<p class="titleintable"><a id="sthref10256"></a><a id="sthref10257"></a>Table 142-53 IMPORT_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t58">Parameter</th>
<th class="cellalignment1227" id="r1c2-t58">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t58" headers="r1c1-t58">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t58 r1c2-t58">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t58" headers="r1c1-t58">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t58 r1c2-t58">
<p>Name of the table to which this column belongs</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t58" headers="r1c1-t58">
<p><code>colname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t58 r1c2-t58">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t58" headers="r1c1-t58">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t58 r1c2-t58">
<p>Name of the table partition. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then global and partition column statistics are imported.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t58" headers="r1c1-t58">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t58 r1c2-t58">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t58" headers="r1c1-t58">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t58 r1c2-t58">
<p>Identifier to associate with these statistics within <code>stattab</code> (optional)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t58" headers="r1c1-t58">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t58 r1c2-t58">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t58" headers="r1c1-t58">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t58 r1c2-t58">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t58" headers="r1c1-t58">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t58 r1c2-t58">
<p>If set to <code>TRUE</code>, imports statistics even if statistics are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10258"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10259"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10260"></a>Usage Notes</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div class="refsect2"><a id="BABFAFCF"></a>
<hr />
<h3 class="refsect2"><a id="sthref10261"></a>IMPORT_DATABASE_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the database from the user statistics table(s) and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10262"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_DATABASE_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10263"></a>Parameters</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref10264"></a><a id="sthref10265"></a>Table 142-54 IMPORT_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DATABASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t59">Parameter</th>
<th class="cellalignment1227" id="r1c2-t59">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t59" headers="r1c1-t59">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t59 r1c2-t59">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t59" headers="r1c1-t59">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t59 r1c2-t59">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t59" headers="r1c1-t59">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t59 r1c2-t59">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t59" headers="r1c1-t59">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t59 r1c2-t59">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t59" headers="r1c1-t59">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t59 r1c2-t59">
<p>Overrides statistics locked at the object (table) level:</p>
<ul>
<li>
<p><code>TRUE</code> - Ignores the statistics lock and imports the statistics</p>
</li>
<li>
<p><code>FALSE</code> - The statistics will be imported only if they are not locked</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t59" headers="r1c1-t59">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t59 r1c2-t59">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>OBJECT_STATS</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>SYNOPSES</code> - information to support incremental statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10266"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10267"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68604" class="refsect2"><a id="BEIGFDAI"></a>
<hr />
<h3 class="refsect2"><a id="sthref10268"></a>IMPORT_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to import the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code>TRUE</code> for the <code>add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10269"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_DATABASE_PREFS (
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL
    add_sys    IN  BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10270"></a>Parameters</p>
<div id="ARPLS68605" class="tblformal">
<p class="titleintable"><a id="sthref10271"></a><a id="sthref10272"></a>Table 142-55 IMPORT_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t60">Parameter</th>
<th class="cellalignment1227" id="r1c2-t60">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t60" headers="r1c1-t60">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t60 r1c2-t60">
<p>Statistics table name where to import the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t60" headers="r1c1-t60">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r3c1-t60 r1c2-t60">
<p>Optional identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t60" headers="r1c1-t60">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r4c1-t60 r1c2-t60">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t60" headers="r1c1-t60">
<p><code>add_sys</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t60 r1c2-t60">
<p>Value <code>TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10273"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10274"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the SYSDBA role, or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10275"></a>Examples</p>
<pre>
DBMS_STATS.IMPORT_DATABASE_PREFS('STATTAB', statown=&gt;'SH');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68608" class="refsect2"><a id="i1043013"></a>
<hr />
<h3 class="refsect2"><a id="sthref10276"></a>IMPORT_DICTIONARY_STATS Procedure</h3>
<p>This procedure retrieves statistics for all dictionary schemas ('<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas) from the user statistics table and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10277"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_DICTIONARY_STATS (
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10278"></a>Parameters</p>
<div id="ARPLS68609" class="tblformal">
<p class="titleintable"><a id="sthref10279"></a><a id="sthref10280"></a>Table 142-56 IMPORT_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t61">Parameter</th>
<th class="cellalignment1227" id="r1c2-t61">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t61" headers="r1c1-t61">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t61 r1c2-t61">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t61" headers="r1c1-t61">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t61 r1c2-t61">
<p>The (optional) identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t61" headers="r1c1-t61">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t61 r1c2-t61">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t61" headers="r1c1-t61">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t61 r1c2-t61">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t61" headers="r1c1-t61">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t61 r1c2-t61">
<p>Overrides statistics lock at the object (table) level:</p>
<ul>
<li>
<p><code>TRUE</code> - Ignores the statistics lock and imports the statistics.</p>
</li>
<li>
<p><code>FALSE</code> - The statistics will be imported only if there is no lock.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t61" headers="r1c1-t61">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t61 r1c2-t61">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10281"></a>Usage Notes</p>
<ul>
<li>
<p>You must have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege to execute this procedure.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10282"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68610" class="refsect2"><a id="i1041649"></a>
<hr />
<h3 class="refsect2"><a id="sthref10283"></a>IMPORT_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure retrieves statistics for fixed tables from the user statistics table(s) and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10284"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_FIXED_OBJECTS_STATS (
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10285"></a>Parameters</p>
<div id="ARPLS68611" class="tblformal">
<p class="titleintable"><a id="sthref10286"></a><a id="sthref10287"></a>Table 142-57 IMPORT_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t62">Parameter</th>
<th class="cellalignment1227" id="r1c2-t62">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t62" headers="r1c1-t62">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t62 r1c2-t62">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t62" headers="r1c1-t62">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t62 r1c2-t62">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t62" headers="r1c1-t62">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t62 r1c2-t62">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t62" headers="r1c1-t62">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t62 r1c2-t62">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t62" headers="r1c1-t62">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t62 r1c2-t62">
<p>Overrides statistics lock:</p>
<ul>
<li>
<p><code>TRUE</code> - Ignores the statistics lock and imports the statistics</p>
</li>
<li>
<p><code>FALSE</code> - The statistics will be imported only if there is no lock</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10288"></a>Usage Notes</p>
<ul>
<li>
<p>You must have the <code>SYSDBA</code> or <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> system privilege to execute this procedure.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10289"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code>ORA-20002</code>: Bad user statistics table, may need to upgrade it</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68612" class="refsect2"><a id="i1037276"></a>
<hr />
<h3 class="refsect2"><a id="sthref10290"></a>IMPORT_INDEX_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular index from the user statistics table identified by <code>stattab</code> and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10291"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_INDEX_STATS (
   ownname       VARCHAR2, 
   indname       VARCHAR2,
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10292"></a>Parameters</p>
<div id="ARPLS68613" class="tblformal">
<p class="titleintable"><a id="sthref10293"></a><a id="sthref10294"></a>Table 142-58 IMPORT_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t63">Parameter</th>
<th class="cellalignment1227" id="r1c2-t63">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t63" headers="r1c1-t63">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t63 r1c2-t63">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t63" headers="r1c1-t63">
<p><code>indname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t63 r1c2-t63">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t63" headers="r1c1-t63">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t63 r1c2-t63">
<p>Name of the index partition. If the index is partitioned and if <code>partname</code> is <code>NULL</code>, then global and partition index statistics are imported.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t63" headers="r1c1-t63">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t63 r1c2-t63">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t63" headers="r1c1-t63">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t63 r1c2-t63">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t63" headers="r1c1-t63">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t63 r1c2-t63">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t63" headers="r1c1-t63">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t63 r1c2-t63">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t63" headers="r1c1-t63">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t63 r1c2-t63">
<p>Imports statistics even if index statistics are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10295"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10296"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68614" class="refsect2"><a id="BEIHBJBH"></a>
<hr />
<h3 class="refsect2"><a id="sthref10297"></a>IMPORT_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to import the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10298"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_SCHEMA_PREFS (
    ownname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10299"></a>Parameters</p>
<div id="ARPLS68615" class="tblformal">
<p class="titleintable"><a id="sthref10300"></a><a id="sthref10301"></a>Table 142-59 IMPORT_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t64">Parameter</th>
<th class="cellalignment1227" id="r1c2-t64">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t64" headers="r1c1-t64">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t64 r1c2-t64">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t64" headers="r1c1-t64">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t64 r1c2-t64">
<p>Statistics table name from where to import the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t64" headers="r1c1-t64">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r4c1-t64 r1c2-t64">
<p>(Optional) Identifier to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t64" headers="r1c1-t64">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r5c1-t64 r1c2-t64">
<p>Schema containing <code>stattab</code> (if other than <code>ownname</code>)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10302"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10303"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code>SYSDBA</code> privilege, or have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10304"></a>Examples</p>
<pre>
DBMS_STATS.IMPORT_SCHEMA_PREFS('SH', 'STAT');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68616" class="refsect2"><a id="i1037487"></a>
<hr />
<h3 class="refsect2"><a id="sthref10305"></a>IMPORT_SCHEMA_STATS Procedure</h3>
<p>This procedure retrieves statistics for all objects in the schema identified by ownname from the user statistics table and stores them in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10306"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_SCHEMA_STATS (
   ownname         VARCHAR2,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULTto_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10307"></a>Parameters</p>
<div id="ARPLS68617" class="tblformal">
<p class="titleintable"><a id="sthref10308"></a><a id="sthref10309"></a>Table 142-60 IMPORT_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t65">Parameter</th>
<th class="cellalignment1227" id="r1c2-t65">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t65" headers="r1c1-t65">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t65 r1c2-t65">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t65" headers="r1c1-t65">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t65 r1c2-t65">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t65" headers="r1c1-t65">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t65 r1c2-t65">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t65" headers="r1c1-t65">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t65 r1c2-t65">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t65" headers="r1c1-t65">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t65 r1c2-t65">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t65" headers="r1c1-t65">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t65 r1c2-t65">
<p>Overrides statistics locked at the object (table) level:</p>
<ul>
<li>
<p><code>TRUE</code> - Ignores the statistics lock and imports the statistics.</p>
</li>
<li>
<p><code>FALSE</code> - Statistics will be imported only if there is no lock.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t65" headers="r1c1-t65">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t65 r1c2-t65">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10310"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10311"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68618" class="refsect2"><a id="i1037380"></a>
<hr />
<h3 class="refsect2"><a id="sthref10312"></a>IMPORT_SYSTEM_STATS Procedure</h3>
<p>This procedure retrieves system statistics from the user statistics table, identified by stattab, and stores the statistics in the dictionary.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10313"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_SYSTEM_STATS (
   stattab       VARCHAR2, 
   statid        VARCHAR2 DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10314"></a>Parameters</p>
<div id="ARPLS68619" class="tblformal">
<p class="titleintable"><a id="sthref10315"></a><a id="sthref10316"></a>Table 142-61 IMPORT_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t66">Parameter</th>
<th class="cellalignment1227" id="r1c2-t66">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t66" headers="r1c1-t66">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t66 r1c2-t66">
<p>Identifier of the user statistics table where the statistics will be retrieved</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t66" headers="r1c1-t66">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t66 r1c2-t66">
<p>Optional identifier associated with the statistics retrieved from the stattab</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t66" headers="r1c1-t66">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t66 r1c2-t66">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10317"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
<p><code>ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code>ORA-20003</code>: Unable to import system statistics</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10318"></a>Usage Notes</p>
<p>To run this procedure, you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68620" class="refsect2"><a id="BEIDGEFG"></a>
<hr />
<h3 class="refsect2"><a id="sthref10319"></a>IMPORT_TABLE_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of the specified table in the specified schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10320"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    stattab    IN  VARCHAR2,
    statid     IN  VARCHAR2 DEFAULT NULL,
    statown    IN  VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10321"></a>Parameters</p>
<div id="ARPLS68621" class="tblformal">
<p class="titleintable"><a id="sthref10322"></a><a id="sthref10323"></a>Table 142-62 IMPORT_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t67">Parameter</th>
<th class="cellalignment1227" id="r1c2-t67">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t67" headers="r1c1-t67">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t67 r1c2-t67">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t67" headers="r1c1-t67">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t67 r1c2-t67">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t67" headers="r1c1-t67">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t67 r1c2-t67">
<p>Statistics table name from where to import the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t67" headers="r1c1-t67">
<p>statid</p>
</td>
<td class="cellalignment1228" headers="r5c1-t67 r1c2-t67">
<p>(Optional) Identifier to associate with these statistics within stattab</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t67" headers="r1c1-t67">
<p>statown</p>
</td>
<td class="cellalignment1228" headers="r6c1-t67 r1c2-t67">
<p>Schema containing stattab (if other than ownname)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10324"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10325"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table, or have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes.</p>
</li>
<li>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10326"></a>Examples</p>
<pre>
DBMS_STATS.IMPORT_TABLE_PREFS('SH', 'SALES', 'STAT');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68622" class="refsect2"><a id="i1037419"></a>
<hr />
<h3 class="refsect2"><a id="sthref10327"></a>IMPORT_TABLE_STATS Procedure</h3>
<p>This procedure retrieves statistics for a particular table from the user statistics table identified by <code>stattab</code> and stores them in the dictionary. Cascade results in all index statistics associated with the specified table being imported as well.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10328"></a>Syntax</p>
<pre>
DBMS_STATS.IMPORT_TABLE_STATS (
   ownname         VARCHAR2, 
   tabname         VARCHAR2,
   partname        VARCHAR2 DEFAULT NULL,
   stattab         VARCHAR2, 
   statid          VARCHAR2 DEFAULT NULL,
   cascade         BOOLEAN  DEFAULT TRUE,
   statown         VARCHAR2 DEFAULT NULL,
   no_invalidate   BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force           BOOLEAN DEFAULT FALSE,
   stat_category   VARCHAR2 DEFAULT DEFAULT_STAT_CATEGORY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10329"></a>Parameters</p>
<div id="ARPLS68623" class="tblformal">
<p class="titleintable"><a id="sthref10330"></a><a id="sthref10331"></a>Table 142-63 IMPORT_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="IMPORT_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t68">Parameter</th>
<th class="cellalignment1227" id="r1c2-t68">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t68" headers="r1c1-t68">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t68 r1c2-t68">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t68" headers="r1c1-t68">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t68 r1c2-t68">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t68" headers="r1c1-t68">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t68 r1c2-t68">
<p>Name of the table partition. If the table is partitioned and if <code>partname</code> is <code>NULL</code>, then global and partition table statistics are imported.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t68" headers="r1c1-t68">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t68 r1c2-t68">
<p>User statistics table identifier describing from where to retrieve the statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t68" headers="r1c1-t68">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t68 r1c2-t68">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t68" headers="r1c1-t68">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t68 r1c2-t68">
<p>If true, column and index statistics for this table are also imported</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t68" headers="r1c1-t68">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t68 r1c2-t68">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t68" headers="r1c1-t68">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t68 r1c2-t68">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t68" headers="r1c1-t68">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t68 r1c2-t68">
<p>Imports statistics even if table statistics are locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t68" headers="r1c1-t68">
<p><code>stat_category</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t68 r1c2-t68">
<p>Specifies what statistics to import, accepting multiple values separated by a comma. Values supported:</p>
<ul>
<li>
<p><code>'OBJECT_STATS'</code> - table statistics, column statistics and index statistics (Default)</p>
</li>
<li>
<p><code>'SYNOPSES'</code> - auxiliary statistics information gathered on a partitioned table when incremental is <code>TRUE</code></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10332"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values in the user statistics table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10333"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
<p>Oracle does not support export or import of statistics across databases of different character sets.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68624" class="refsect2"><a id="BABFJDFA"></a>
<hr />
<h3 class="refsect2"><a id="sthref10334"></a>LOCK_PARTITION_STATS Procedure</h3>
<p>This procedure enables the user to lock statistics for a partition.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10335"></a>Syntax</p>
<pre>
DBMS_STATS.LOCK_PARTITION_STATS (
    ownname    VARCHAR2,
    tabname    VARCHAR2,
    partname   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10336"></a>Parameters</p>
<div id="ARPLS68625" class="tblformal">
<p class="titleintable"><a id="sthref10337"></a><a id="sthref10338"></a>Table 142-64 LOCK_PARTITION_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="LOCK_PARTITION_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.LOCK_PARTITION_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t69">Parameter</th>
<th class="cellalignment1227" id="r1c2-t69">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t69" headers="r1c1-t69">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t69 r1c2-t69">
<p>Name of the schema to lock</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t69" headers="r1c1-t69">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t69 r1c2-t69">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t69" headers="r1c1-t69">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t69 r1c2-t69">
<p>Partition name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10339"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68626" class="refsect2"><a id="i1043184"></a>
<hr />
<h3 class="refsect2"><a id="sthref10340"></a>LOCK_SCHEMA_STATS Procedure</h3>
<p>This procedure locks the statistics of all tables of a schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10341"></a>Syntax</p>
<pre>
DBMS_STATS.LOCK_SCHEMA_STATS (
   ownname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10342"></a>Parameters</p>
<div id="ARPLS68627" class="tblformal">
<p class="titleintable"><a id="sthref10343"></a><a id="sthref10344"></a>Table 142-65 LOCK_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="LOCK_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.LOCK_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t70">Parameter</th>
<th class="cellalignment1227" id="r1c2-t70">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t70" headers="r1c1-t70">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t70 r1c2-t70">
<p>Name of the schema to lock</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10345"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table are locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code>SET_*,</code> <code>DELETE_*,</code> <code>IMPORT_*,</code> <code>GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code>GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
<li>
<p>This procedure either freezes the current set of the statistics or keeps the statistics empty (uncollected) to use dynamic statistics.</p>
</li>
<li>
<p>The locked or unlocked state is not exported along with the table statistics when using <code>EXPORT_*_STATS</code> procedures.</p>
</li>
<li>
<p>Neither the <a href="#i1043314">UNLOCK_SCHEMA_STATS Procedure</a> nor the <a href="#i1040393">UNLOCK_TABLE_STATS Procedure</a> is designed to unlock statistics of corresponding partitions. When you invoke the <a href="#i1043993">LOCK_TABLE_STATS Procedure</a>, it sets the statistics lock bit at the table level. In that case, you cannot gather statistics on dependent objects such as partitions and indexes. By the same token, if table statistics are locked, the dependents are locked and you do not need to explicitly invoke the <a href="#BABFJDFA">LOCK_PARTITION_STATS Procedure</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68628" class="refsect2"><a id="i1043993"></a>
<hr />
<h3 class="refsect2"><a id="sthref10346"></a>LOCK_TABLE_STATS Procedure</h3>
<p>This procedure locks the statistics on the table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10347"></a>Syntax</p>
<pre>
DBMS_STATS.LOCK_TABLE_STATS (
   ownname    VARCHAR2,
   tabname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10348"></a>Parameters</p>
<div id="ARPLS68629" class="tblformal">
<p class="titleintable"><a id="sthref10349"></a><a id="sthref10350"></a>Table 142-66 LOCK_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="LOCK_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.LOCK_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t71">Parameter</th>
<th class="cellalignment1227" id="r1c2-t71">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t71" headers="r1c1-t71">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t71 r1c2-t71">
<p>The name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t71" headers="r1c1-t71">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t71 r1c2-t71">
<p>The name of the table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10351"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table are locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code>SET_*,</code> <code>DELETE_*,</code> <code>IMPORT_*,</code> <code>GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code>GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
<li>
<p>This procedure either freezes the current set of the statistics or keeps the statistics empty (uncollected) to use Dynamic Sampling.</p>
</li>
<li>
<p>The locked or unlocked state is not exported along with the table statistics when using <code>EXPORT_*_STATS</code> procedures.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73133" class="refsect2"><a id="CHDEJICB"></a>
<hr />
<h3 class="refsect2"><a id="sthref10352"></a>MERGE_COL_USAGE Procedure</h3>
<p>This procedure merges column usage information from a source database by means of a dblink into the local database. If column usage information already exists for a given table or column <code>MERGE_COL_USAGE</code> will combine both the local and the remote information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10353"></a>Syntax</p>
<pre>
DBMS_STATS.MERGE_COL_USAGE (
   dblink    IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10354"></a>Parameters</p>
<div id="ARPLS73134" class="tblformal">
<p class="titleintable"><a id="sthref10355"></a><a id="sthref10356"></a>Table 142-67 MERGE_COL_USAGE Procedure Parameters</p>
<table class="cellalignment1229" title="MERGE_COL_USAGE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.MERGE_COL_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t72">Parameter</th>
<th class="cellalignment1227" id="r1c2-t72">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t72" headers="r1c1-t72">
<p><code>dblink</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t72 r1c2-t72">
<p>Name of dblink</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10357"></a>Usage Notes</p>
<p>User must be <code>SYS</code> to execute this procedure.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10358"></a>Exceptions</p>
<p>ORA-20000: Insufficient privileges</p>
<p>ORA-20001: Parameter dblink cannot be <code>NULL</code></p>
<p>ORA-20002: Unable to create a <code>TEMP</code> table</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68630" class="refsect2"><a id="i1035422"></a>
<hr />
<h3 class="refsect2"><a id="sthref10359"></a><a id="sthref10360"></a>PREPARE_COLUMN_VALUES Procedures</h3>
<p>These procedures convert user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle's internal representation for future storage using <code>SET_COLUMN_STATS</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10361"></a>Syntax</p>
<pre>
DBMS_STATS.PREPARE_COLUMN_VALUES (
   srec     IN OUT StatRec, 
   charvals        CHARARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES (
   srec      IN OUT StatRec, 
   datevals         DATEARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES ( 
   srec     IN OUT StatRec, 
   dblvals         DBLARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES ( 
   srec     IN OUT StatRec, 
   fltvals         FLTARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES (
   srec     IN OUT StatRec, 
   numvals         NUMARRAY);

DBMS_STATS.PREPARE_COLUMN_VALUES ( 
   srec     IN OUT StatRec, 
   rawvals         RAWARRAY);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10362"></a>Pragmas</p>
<pre>
pragma restrict_references(prepare_column_values, WNDS, RNDS, WNPS, RNPS);
pragma restrict_references(prepare_column_values_nvarchar, WNDS, RNDS, WNPS, RNPS);
pragma restrict_references(prepare_column_values_rowid, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10363"></a>Parameters</p>
<div id="ARPLS68631" class="tblformal">
<p class="titleintable"><a id="sthref10364"></a><a id="sthref10365"></a>Table 142-68 PREPARE_COLUMN_VALUES Procedure Parameters</p>
<table class="cellalignment1229" title="PREPARE_COLUMN_VALUES Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PREPARE_COLUMN_VALUES subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t73">Parameter</th>
<th class="cellalignment1227" id="r1c2-t73">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t73" headers="r1c1-t73">
<p><code>srec.epc</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t73 r1c2-t73">
<p>Number of values specified in <code>charvals</code>, <code>datevals</code>, <code>dblvals</code>, <code>fltvals</code>, <code>numvals</code>, or <code>rawvals</code>. This value must be between 2 and 256, inclusive, and it should be set to <code>2</code> for procedures which do not allow histogram information (<code>nvarchar</code> and <code>rowid</code>).</p>
<p>The first corresponding array entry should hold the minimum value for the column, and the last entry should hold the maximum. If there are more than two entries, then all the others hold the remaining height-balanced or frequency histogram endpoint values (with in-between values ordered from next-smallest to next-largest). This value may be adjusted to account for compression, so the returned value should be left as is for a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t73" headers="r1c1-t73">
<p><code>srec.bkvals</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t73 r1c2-t73">
<p>If you want a frequency distribution, this array contains the number of occurrences of each distinct value specified in <code>charvals</code>, <code>datevals</code>, <code>dblvals</code>, <code>fltvals</code>, <code>numvals</code>, or <code>rawvals</code>. Otherwise, it is merely an output parameter, and it must be set to <code>NULL</code> when this procedure is called.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Datatype-specific input parameters (use one) are shown in <a href="#CIHHIFHE">Table 142-69</a>.</p>
<div id="ARPLS68632" class="tblformal">
<p class="titleintable"><a id="sthref10366"></a><a id="CIHHIFHE"></a>Table 142-69 Datatype-Specific Input Parameters</p>
<table class="cellalignment1229" title="Datatype-Specific Input Parameters" summary="This table describes Datatype-Specific Input Parameters used by the PREPARE_COLUMN_VALUES subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t74">Type</th>
<th class="cellalignment1227" id="r1c2-t74">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t74" headers="r1c1-t74">
<p><code>charvals</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t74 r1c2-t74">
<p>The array of values when the column type is character-based. Up to the first 32 bytes of each string should be provided. Arrays must have between 2 and 256 entries, inclusive. If the datatype is fixed <code>CHAR</code>, the strings must be space-padded to 15 characters for correct normalization.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t74" headers="r1c1-t74">
<p><code>datevals</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t74 r1c2-t74">
<p>Array of values when the column type is date-based</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t74" headers="r1c1-t74">
<p><code>dblvals</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t74 r1c2-t74">
<p>Array of values when the column type is double-based</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t74" headers="r1c1-t74">
<p><code>fltvals</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t74 r1c2-t74">
<p>Array of values when the column type is float-based</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t74" headers="r1c1-t74">
<p><code>numvals</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t74 r1c2-t74">
<p>Array of values when the column type is numeric-based</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t74" headers="r1c1-t74">
<p><code>rawvals</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t74 r1c2-t74">
<p>Array of values when the column type is <code>RAW</code>. Up to the first 32 bytes of each strings should be provided.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t74" headers="r1c1-t74">
<p><code>nvmin, nvmax</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t74 r1c2-t74">
<p>Minimum and maximum values when the column type is national character set based. No histogram information can be provided for a column of this type. If the datatype is fixed <code>CHAR</code>, the strings must be space-padded to 15 characters for correct normalization.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t74" headers="r1c1-t74">
<p><code>rwmin, rwmax</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t74 r1c2-t74">
<p>Minimum and maximum values when the column type is <code>rowid</code>. No histogram information is provided for a column of this type.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10367"></a>Output Parameters</p>
<div id="ARPLS68633" class="tblformal">
<p class="titleintable"><a id="sthref10368"></a><a id="sthref10369"></a>Table 142-70 PREPARE_COLUMN_VALUES Procedure Output Parameters</p>
<table class="cellalignment1229" title="PREPARE_COLUMN_VALUES Procedure Output Parameters" summary="This table describes Output Parameters used by the PREPARE_COLUMN_VALUES subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t75">Parameter</th>
<th class="cellalignment1227" id="r1c2-t75">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t75" headers="r1c1-t75">
<p><code>srec.minval</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t75 r1c2-t75">
<p>Internal representation of the minimum suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t75" headers="r1c1-t75">
<p><code>srec.maxval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t75 r1c2-t75">
<p>Internal representation of the maximum suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t75" headers="r1c1-t75">
<p><code>srec.bkvals</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t75 r1c2-t75">
<p>Array suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t75" headers="r1c1-t75">
<p><code>srec.novals</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t75 r1c2-t75">
<p>Array suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10370"></a>Exceptions</p>
<p><code>ORA-20001</code>: Invalid or inconsistent input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10371"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68634" class="refsect2"><a id="i1038038"></a>
<hr />
<h3 class="refsect2"><a id="sthref10372"></a>PREPARE_COLUMN_VALUES_NVARCHAR2 Procedure</h3>
<p>This procedure converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle's internal representation for future storage using <code>SET_COLUMN_STATS</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10373"></a>Syntax</p>
<pre>
DBMS_STATS.PREPARE_COLUMN_VALUES_NVARCHAR2 (
   srec     IN OUT StatRec, 
   nvmin           NVARCHAR2, 
   nvmax           NVARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10374"></a>Pragmas</p>
<pre>
pragma restrict_references(prepare_column_values_nvarchar, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10375"></a>Parameters</p>
<div id="ARPLS68635" class="tblformal">
<p class="titleintable"><a id="sthref10376"></a><a id="sthref10377"></a>Table 142-71 PREPARE_COLUMN_VALUES_NVARCHAR2 Procedure Parameters</p>
<table class="cellalignment1229" title="PREPARE_COLUMN_VALUES_NVARCHAR2 Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PREPARE_COLUMN_VALUES_NVARCHAR2 subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t76">Parameter</th>
<th class="cellalignment1227" id="r1c2-t76">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t76" headers="r1c1-t76">
<p><code>srec.epc</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t76 r1c2-t76">
<p>Number of values specified in <code>charvals</code>, <code>datevals</code>, <code>dblvals</code>, <code>fltvals</code>, <code>numvals</code>, or <code>rawvals</code>. This value must be between 2 and 256, inclusive, and it should be set to <code>2</code> for procedures which do not allow histogram information (<code>nvarchar</code> and <code>rowid</code>).</p>
<p>The first corresponding array entry should hold the minimum value for the column, and the last entry should hold the maximum. If there are more than two entries, then all the others hold the remaining height-balanced or frequency histogram endpoint values (with in-between values ordered from next-smallest to next-largest). This value may be adjusted to account for compression, so the returned value should be left as is for a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t76" headers="r1c1-t76">
<p><code>srec.bkvals</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t76 r1c2-t76">
<p>If you want a frequency distribution, then this array contains the number of occurrences of each distinct value specified in <code>charvals</code>, <code>datevals</code>, <code>dblvals</code>, <code>fltvals</code>, <code>numvals</code>, or <code>rawvals</code>. Otherwise, it is merely an output parameter, and it must be set to <code>NULL</code> when this procedure is called.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Datatype-specific input parameters (use one) are shown in <a href="#CIHHIFHE">Table 142-69</a>.</p>
<div id="ARPLS68636" class="tblformal">
<p class="titleintable"><a id="sthref10378"></a><a id="sthref10379"></a>Table 142-72 Datatype-Specific Input Parameters</p>
<table class="cellalignment1229" title="Datatype-Specific Input Parameters" summary="This table describes Datatype-Specific Input Parameters used by the PREPARE_COLUMN_VALUES_NVARCHAR2 subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t77">Type</th>
<th class="cellalignment1227" id="r1c2-t77">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t77" headers="r1c1-t77">
<p><code>nvmin, nvmax</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t77 r1c2-t77">
<p>The minimum and maximum values when the column type is national character set based. No histogram information can be provided for a column of this type. If the datatype is fixed <code>CHAR</code>, the strings must be space-padded to 15 characters for correct normalization.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10380"></a>Output Parameters</p>
<div id="ARPLS68637" class="tblformal">
<p class="titleintable"><a id="sthref10381"></a><a id="sthref10382"></a>Table 142-73 PREPARE_COLUMN_VALUES Procedure Output Parameters</p>
<table class="cellalignment1229" title="PREPARE_COLUMN_VALUES Procedure Output Parameters" summary="This table describes Output Parameters used by the PREPARE_COLUMN_VALUES_NVARCHAR2 subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t78">Parameter</th>
<th class="cellalignment1227" id="r1c2-t78">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t78" headers="r1c1-t78">
<p><code>srec.minval</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t78 r1c2-t78">
<p>Internal representation of the minimum suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t78" headers="r1c1-t78">
<p><code>srec.maxval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t78 r1c2-t78">
<p>Internal representation of the maximum suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t78" headers="r1c1-t78">
<p><code>srec.bkvals</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t78 r1c2-t78">
<p>Array suitable for use in a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t78" headers="r1c1-t78">
<p><code>srec.novals</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t78 r1c2-t78">
<p>Array suitable for use in a call to <code>SET_COLUMN_STATS</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10383"></a>Exceptions</p>
<p><code>ORA-20001</code>: Invalid or inconsistent input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10384"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68638" class="refsect2"><a id="i1038039"></a>
<hr />
<h3 class="refsect2"><a id="sthref10385"></a>PREPARE_COLUMN_VALUES_ROWID Procedure</h3>
<p>This procedure converts user-specified minimum, maximum, and histogram endpoint datatype-specific values into Oracle's internal representation for future storage using <code>SET_COLUMN_STATS</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10386"></a>Syntax</p>
<pre>
DBMS_STATS.PREPARE_COLUMN_VALUES_ROWID (
   srec  IN OUT StatRec, 
   rwmin        ROWID, 
   rwmax        ROWID);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10387"></a>Pragmas</p>
<pre>
pragma restrict_references(prepare_column_values_rowid, WNDS, RNDS, WNPS, RNPS);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10388"></a>Parameters</p>
<div id="ARPLS68639" class="tblformal">
<p class="titleintable"><a id="sthref10389"></a><a id="sthref10390"></a>Table 142-74 PREPARE_COLUMN_VALUES_ROWID Procedure Parameters</p>
<table class="cellalignment1229" title="PREPARE_COLUMN_VALUES_ROWID Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PREPARE_COLUMN_VALUES_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t79">Parameter</th>
<th class="cellalignment1227" id="r1c2-t79">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t79" headers="r1c1-t79">
<p><code>srec.epc</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t79 r1c2-t79">
<p>Number of values specified in <code>charvals</code>, <code>datevals</code>, <code>dblvals</code>, <code>fltvals</code>, <code>numvals</code>, or <code>rawvals</code>. This value must be between 2 and 256, inclusive, and it should be set to <code>2</code> for procedures which do not allow histogram information (<code>nvarchar</code> and <code>rowid</code>).</p>
<p>The first corresponding array entry should hold the minimum value for the column, and the last entry should hold the maximum. If there are more than two entries, then all the others hold the remaining height-balanced or frequency histogram endpoint values (with in-between values ordered from next-smallest to next-largest). This value may be adjusted to account for compression, so the returned value should be left as is for a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t79" headers="r1c1-t79">
<p><code>srec.bkvals</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t79 r1c2-t79">
<p>If you want a frequency distribution, this array contains the number of occurrences of each distinct value specified in <code>charvals</code>, <code>datevals</code>, <code>dblvals</code>, <code>fltvals</code>, <code>numvals</code>, or <code>rawvals</code>. Otherwise, it is merely an output parameter, and it must be set to <code>NULL</code> when this procedure is called.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Datatype-specific input parameters (use one) are shown in <a href="#CIHHIFHE">Table 142-69</a>.</p>
<div id="ARPLS68640" class="tblformal">
<p class="titleintable"><a id="sthref10391"></a><a id="sthref10392"></a>Table 142-75 Datatype-Specific Input Parameters</p>
<table class="cellalignment1229" title="Datatype-Specific Input Parameters" summary="This table describes Datatype-Specific Input Parameters used by the PREPARE_COLUMN_VALUES_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t80">Type</th>
<th class="cellalignment1227" id="r1c2-t80">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t80" headers="r1c1-t80">
<p><code>rwmin, rwmax</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t80 r1c2-t80">
<p>Minimum and maximum values when the column type is <code>rowid</code>. No histogram information is provided for a column of this type.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10393"></a>Output Parameters</p>
<div id="ARPLS68641" class="tblformal">
<p class="titleintable"><a id="sthref10394"></a><a id="sthref10395"></a>Table 142-76 PREPARE_COLUMN_VALUES Procedure Output Parameters</p>
<table class="cellalignment1229" title="PREPARE_COLUMN_VALUES Procedure Output Parameters" summary="This table describes Output Parameters used by the PREPARE_COLUMN_VALUES_ROWID subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t81">Parameter</th>
<th class="cellalignment1227" id="r1c2-t81">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t81" headers="r1c1-t81">
<p><code>srec.minval</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t81 r1c2-t81">
<p>Internal representation of the minimum suitable for use in a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t81" headers="r1c1-t81">
<p><code>srec.maxval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t81 r1c2-t81">
<p>Internal representation of the maximum suitable for use in a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t81" headers="r1c1-t81">
<p><code>srec.bkvals</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t81 r1c2-t81">
<p>Array suitable for use in a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t81" headers="r1c1-t81">
<p><code>srec.novals</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t81 r1c2-t81">
<p>Array suitable for use in a call to <code>SET_COLUMN_STATS</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10396"></a>Exceptions</p>
<p><code>ORA-20001</code>: Invalid or inconsistent input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10397"></a>Usage Notes</p>
<p>No special privilege or role is needed to invoke this procedure.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68642" class="refsect2"><a id="BEIDCHEJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref10398"></a>PUBLISH_PENDING_STATS Procedure</h3>
<p>This procedure is used to publish the statistics gathered and stored as pending.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10399"></a>Syntax</p>
<pre>
DBMS_STATS.PUBLISH_PENDING_STATS (
    ownname         IN  VARCHAR2 DEFAULT USER,
    tabname         IN  VARCHAR2,
    no_invalidate   BOOLEAN DEFAULT 
       to_no_invalidate_type(get_param('NO_INVALIDATE')),
    force      IN  BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10400"></a>Parameters</p>
<div id="ARPLS68643" class="tblformal">
<p class="titleintable"><a id="sthref10401"></a><a id="sthref10402"></a>Table 142-77 PUBLISH_PENDING_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="PUBLISH_PENDING_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.IMPORT_DATABASE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t82">Parameter</th>
<th class="cellalignment1227" id="r1c2-t82">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t82" headers="r1c1-t82">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t82 r1c2-t82">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t82" headers="r1c1-t82">
<p>tabname</p>
</td>
<td class="cellalignment1228" headers="r3c1-t82 r1c2-t82">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t82" headers="r1c1-t82">
<p>no_invalidate</p>
</td>
<td class="cellalignment1228" headers="r4c1-t82 r1c2-t82">
<p>Do not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t82" headers="r1c1-t82">
<p>force</p>
</td>
<td class="cellalignment1228" headers="r5c1-t82 r1c2-t82">
<p>If <code>TRUE</code>, will override the lock</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10403"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10404"></a>Usage Notes</p>
<ul>
<li>
<p>If the parameter <code>tabname</code> is <code>NULL</code> then publish applies to all tables of the specified schema.</p>
</li>
<li>
<p>The default owner/schema is the user who runs the procedure.</p>
</li>
<li>
<p>To run this procedure, you need to have the same privilege for gathering statistics on the tables that will be touched by this procedure.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10405"></a>Examples</p>
<pre>
DBMS_STATS.PUBLISH_PENDING_STATS ('SH', null);
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68644" class="refsect2"><a id="i1047896"></a>
<hr />
<h3 class="refsect2"><a id="sthref10406"></a>PURGE_STATS Procedure</h3>
<p>This procedure purges old versions of statistics saved in the dictionary. To run this procedure, you must have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10407"></a>Syntax</p>
<pre>
DBMS_STATS.PURGE_STATS( 
    before_timestamp       TIMESTAMP WITH TIME ZONE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10408"></a>Parameters</p>
<div id="ARPLS68645" class="tblformal">
<p class="titleintable"><a id="sthref10409"></a><a id="sthref10410"></a>Table 142-78 PURGE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="PURGE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.PURGE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t83">Parameter</th>
<th class="cellalignment1227" id="r1c2-t83">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t83" headers="r1c1-t83">
<p><code>before_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t83 r1c2-t83">
<p>Versions of statistics saved before this timestamp are purged. If <code>NULL</code>, it uses the purging policy used by automatic purge. The automatic purge deletes all history older than the older of (current time - statistics history retention) and (time of recent analyze in the system - 1). The statistics history retention value can be changed using <code>ALTER_STATS_HISTORY_RETENTION</code> Procedure.The default is 31 days.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10411"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10412"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code>ANALYZE</code> <code>ANY</code> privilege and the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div class="refsect2"><a id="BABIBHAE"></a>
<hr />
<h3 class="refsect2"><a id="sthref10413"></a>REPORT_COL_USAGE Function</h3>
<p>This function reports the recorded column (group) usage information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10414"></a>Syntax</p>
<pre>
DBMS_STATS.REPORT_COL_USAGE (
   ownname    IN    VARCHAR2,
   tabname    IN    VARCHAR2)
RETURN CLOB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10415"></a>Parameters</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref10416"></a><a id="sthref10417"></a>Table 142-79 REPORT_COL_USAGE Function Parameters</p>
<table class="cellalignment1229" title="REPORT_COL_USAGE Function Parameters" summary="This table describes the Parameters of DBMS_STATS.REPORT_COL_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t84">Parameter</th>
<th class="cellalignment1227" id="r1c2-t84">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t84" headers="r1c1-t84">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t84 r1c2-t84">
<p>Owner name. If <code>NULL</code> it reports column usage information for tables in all schemas in the database.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t84" headers="r1c1-t84">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t84 r1c2-t84">
<p>Table name. If <code>NULL</code> it reports column usage information for all tables of <code>ownname</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10418"></a>Usage Notes</p>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68646" class="refsect2"><a id="i1047505"></a>
<hr />
<h3 class="refsect2"><a id="sthref10419"></a>RESET_GLOBAL_PREF_DEFAULTS Procedure</h3>
<p>This procedures sets global preference, such as <code>CASCADE</code>, <code>ESTIMATE_PERCENT</code> and <code>GRANULARITY</code>, to default values. This reverses the global preferences set by the <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10420"></a>Syntax</p>
<pre>
DBMS_STATS.RESET_GLOBAL_PREF_DEFAULTS;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10421"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code>ANALYZE</code> <code>ANY</code> privilege and the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68647" class="refsect2"><a id="BABGHFFF"></a>
<hr />
<h3 class="refsect2"><a id="sthref10422"></a>RESET_PARAM_DEFAULTS Procedure</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been replaced by improved technology and is maintained only for purposes of backward compatibility. In this case, use the <a href="#i1047505">RESET_GLOBAL_PREF_DEFAULTS Procedure</a>.
<p>See also <a href="#i1049539">Deprecated Subprograms</a>.</p>
</div>
<p>This procedure resets the default values of all parameters to Oracle recommended values.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10423"></a>Syntax</p>
<pre>
DBMS_STATS.RESET_PARAM_DEFAULTS;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68648" class="refsect2">
<hr />
<a id="sthref10424"></a>
<h3 class="refsect2"><a id="sthref10425"></a>RESTORE_DATABASE_STATS Procedure</h3>
<p>This procedure restores statistics of all tables of the database as of a specified timestamp (<code>as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10426"></a>Syntax</p>
<pre>
DBMS_STATS.RESTORE_DATABSE_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM('NO_INVALIDATE')));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10427"></a>Parameters</p>
<div id="ARPLS68649" class="tblformal">
<p class="titleintable"><a id="sthref10428"></a><a id="sthref10429"></a>Table 142-80 RESTORE_DATABASE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="RESTORE_DATABASE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_DATBASE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t86">Parameter</th>
<th class="cellalignment1227" id="r1c2-t86">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t86" headers="r1c1-t86">
<p><code>as_of_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t86 r1c2-t86">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t86" headers="r1c1-t86">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t86 r1c2-t86">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t86" headers="r1c1-t86">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t86 r1c2-t86">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10430"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
<p><code>ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68650" class="refsect2"><a id="i1047724"></a>
<hr />
<h3 class="refsect2"><a id="sthref10431"></a>RESTORE_DICTIONARY_STATS Procedure</h3>
<p>This procedure restores statistics of all dictionary tables (tables of '<code>SYS</code>', '<code>SYSTEM</code>' and RDBMS component schemas) as of a specified timestamp (<code>as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10432"></a>Syntax</p>
<pre>
DBMS_STATS.RESTORE_DICTIONARY_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM('NO_INVALIDATE')));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10433"></a>Parameters</p>
<div id="ARPLS68651" class="tblformal">
<p class="titleintable"><a id="sthref10434"></a><a id="sthref10435"></a>Table 142-81 RESTORE_DICTIONARY_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="RESTORE_DICTIONARY_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_DICTIONARY_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t87">Parameter</th>
<th class="cellalignment1227" id="r1c2-t87">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t87" headers="r1c1-t87">
<p><code>as_of_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t87 r1c2-t87">
<p>Tmestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t87" headers="r1c1-t87">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t87 r1c2-t87">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t87" headers="r1c1-t87">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t87 r1c2-t87">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10436"></a>Usage Notes</p>
<p>To run this procedure, you must have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10437"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
<p><code>ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68652" class="refsect2"><a id="i1047603"></a>
<hr />
<h3 class="refsect2"><a id="sthref10438"></a>RESTORE_FIXED_OBJECTS_STATS Procedure</h3>
<p>This procedure restores statistics of all fixed tables as of a specified timestamp (<code>as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10439"></a>Syntax</p>
<pre>
DBMS_STATS.RESTORE_FIXED_OBJECTS_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM('NO_INVALIDATE')));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10440"></a>Parameters</p>
<div id="ARPLS68653" class="tblformal">
<p class="titleintable"><a id="sthref10441"></a><a id="sthref10442"></a>Table 142-82 RESTORE_FIXED_OBJECTS_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="RESTORE_FIXED_OBJECTS_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_FIXED_OBJECTS_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t88">Parameter</th>
<th class="cellalignment1227" id="r1c2-t88">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t88" headers="r1c1-t88">
<p><code>as_of_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t88 r1c2-t88">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t88" headers="r1c1-t88">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t88 r1c2-t88">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t88" headers="r1c1-t88">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t88 r1c2-t88">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10443"></a>Usage Notes</p>
<p>To run this procedure, you must have the <code>SYSDBA</code> or <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> system privilege.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10444"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
<p><code>ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68654" class="refsect2"><a id="i1047376"></a>
<hr />
<h3 class="refsect2"><a id="sthref10445"></a>RESTORE_SCHEMA_STATS Procedure</h3>
<p>This procedure restores statistics of all tables of a schema as of a specified timestamp (<code>as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10446"></a>Syntax</p>
<pre>
DBMS_STATS.RESTORE_SCHEMA_STATS( 
   ownname                VARCHAR2, 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE, 
   force                  BOOLEAN DEFAULT FALSE,
   no_invalidate          BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM('NO_INVALIDATE')));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10447"></a>Parameters</p>
<div id="ARPLS68655" class="tblformal">
<p class="titleintable"><a id="sthref10448"></a><a id="sthref10449"></a>Table 142-83 RESTORE_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="RESTORE_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t89">Parameter</th>
<th class="cellalignment1227" id="r1c2-t89">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t89" headers="r1c1-t89">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t89 r1c2-t89">
<p>Schema of the tables for which the statistics are to be restored</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t89" headers="r1c1-t89">
<p><code>as_of_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t89 r1c2-t89">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t89" headers="r1c1-t89">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t89 r1c2-t89">
<p>Restores statistics even if their statistics are locked</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t89" headers="r1c1-t89">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t89 r1c2-t89">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10450"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
<p><code>ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10451"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68656" class="refsect2"><a id="i1049804"></a>
<hr />
<h3 class="refsect2"><a id="sthref10452"></a>RESTORE_SYSTEM_STATS Procedure</h3>
<p>This procedure restores system statistics as of a specified timestamp (<code>as_of_timestamp</code>).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10453"></a>Syntax</p>
<pre>
DBMS_STATS.RESTORE_SCHEMA_STATS( 
   as_of_timestamp        TIMESTAMP WITH TIME ZONE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10454"></a>Parameters</p>
<div id="ARPLS68657" class="tblformal">
<p class="titleintable"><a id="sthref10455"></a><a id="sthref10456"></a>Table 142-84 RESTORE_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="RESTORE_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t90">Parameter</th>
<th class="cellalignment1227" id="r1c2-t90">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t90" headers="r1c1-t90">
<p><code>as_of_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t90 r1c2-t90">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10457"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
<p><code>ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10458"></a>Usage Notes</p>
<p>To run this procedure, you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68658" class="refsect2"><a id="i1046561"></a>
<hr />
<h3 class="refsect2"><a id="sthref10459"></a>RESTORE_TABLE_STATS Procedure</h3>
<p>This procedure restores statistics of a table as of a specified timestamp (<code>as_of_timestamp</code>). The procedure will restore statistics of associated indexes and columns as well. If the table statistics were locked at the specified timestamp the procedure will lock the statistics. The procedure will not restore user defined statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10460"></a>Syntax</p>
<pre>
DBMS_STATS.RESTORE_TABLE_STATS (
   ownname                   VARCHAR2, 
   tabname                   VARCHAR2, 
   as_of_timestamp           TIMESTAMP WITH TIME ZONE,
   restore_cluster_index     BOOLEAN DEFAULT FALSE,
   force                     BOOLEAN DEFAULT FALSE,
   no_invalidate             BOOLEAN DEFAULT to_no_invalidate_type
                                                    (GET_PARAM('NO_INVALIDATE')));
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10461"></a>Parameters</p>
<div id="ARPLS68659" class="tblformal">
<p class="titleintable"><a id="sthref10462"></a><a id="sthref10463"></a>Table 142-85 RESTORE_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="RESTORE_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.RESTORE_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t91">Parameter</th>
<th class="cellalignment1227" id="r1c2-t91">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t91" headers="r1c1-t91">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t91 r1c2-t91">
<p>The schema of the table for which the statistics are to be restored</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t91" headers="r1c1-t91">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t91 r1c2-t91">
<p>The table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t91" headers="r1c1-t91">
<p><code>as_of_timestamp</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t91 r1c2-t91">
<p>The timestamp to which to restore statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t91" headers="r1c1-t91">
<p><code>restore_cluster_index</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t91 r1c2-t91">
<p>If the table is part of a cluster, restore statistics of the cluster index if set to <code>TRUE</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t91" headers="r1c1-t91">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t91 r1c2-t91">
<p>Restores statistics even if the table statistics are locked. If the table statistics were not locked at the specified timestamp, it unlocks the statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t91" headers="r1c1-t91">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t91 r1c2-t91">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10464"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent values</p>
<p><code>ORA-20006</code>: Unable to restore statistics, statistics history not available</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10465"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68660" class="refsect2"><a id="i997460"></a>
<hr />
<h3 class="refsect2"><a id="sthref10466"></a>SEED_COL_USAGE Procedure</h3>
<p>This procedure iterates over the SQL statements in the specified SQL tuning set, compiles them and seeds column usage information for the columns that appear in these statements.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10467"></a>Syntax</p>
<pre>
DBMS_STATS.SEED_COL_USAGE (
   sqlset_name    IN    VARCHAR2,
   owner_name     IN    VARCHAR2,
   time_limit     IN    POSITIVE DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10468"></a>Parameters</p>
<div id="ARPLS68661" class="tblformal">
<p class="titleintable"><a id="sthref10469"></a><a id="sthref10470"></a>Table 142-86 SEED_COL_USAGE Procedure Parameters</p>
<table class="cellalignment1229" title="SEED_COL_USAGE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SEED_COL_USAGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t92">Parameter</th>
<th class="cellalignment1227" id="r1c2-t92">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t92" headers="r1c1-t92">
<p><code>sqlset_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t92 r1c2-t92">
<p>Name of the SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t92" headers="r1c1-t92">
<p><code>owner_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t92 r1c2-t92">
<p>Owner of the SQL tuning set</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t92" headers="r1c1-t92">
<p><code>time_limit</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t92 r1c2-t92">
<p>Time limit (in seconds)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10471"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10472"></a>Usage Notes</p>
<p>To invoke this procedure you need the <code>ANALYZE</code> <code>ANY</code> privilege and the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege.</p>
<p>This procedure also records group of columns. Extensions for the recorded group of columns can be created using the <a href="#BABHFIBI">CREATE_EXTENDED_STATS Function</a> procedure. If <code>sqlset_name</code> and <code>owner_name</code> are <code>NULL</code>, it records the column (group) usage information for the statements executed in the system in next <code>time_limit</code> seconds.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS73135" class="refsect2"><a id="CHDHGCED"></a>
<hr />
<h3 class="refsect2"><a id="sthref10473"></a>SET_COLUMN_STATS Procedures</h3>
<p>This procedure sets column-related information. In the version of this procedure that deals with user-defined statistics, the statistics type specified is the type to store in the dictionary, in addition to the actual user-defined statistics. If this statistics type is <code>NULL</code>, the statistics type associated with the index or column is stored.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10474"></a>Syntax</p>
<pre>
DBMS_STATS.SET_COLUMN_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   colname       VARCHAR2, 
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   distcnt       NUMBER DEFAULT NULL,
   density       NUMBER DEFAULT NULL,
   nullcnt       NUMBER DEFAULT NULL,
   srec          StatRec DEFAULT NULL,
   avgclen       NUMBER DEFAULT NULL,
   flags         NUMBER DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force         BOOLEAN DEFAULT FALSE);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre>
DBMS_STATS.SET_COLUMN_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   colname       VARCHAR2, 
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   ext_stats     RAW,
   stattypown    VARCHAR2 DEFAULT NULL, 
   stattypname   VARCHAR2 DEFAULT NULL, 
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   force         BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10475"></a>Parameters</p>
<div id="ARPLS73136" class="tblformal">
<p class="titleintable"><a id="sthref10476"></a><a id="sthref10477"></a>Table 142-87 SET_COLUMN_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_COLUMN_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_COLUMN_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t93">Parameter</th>
<th class="cellalignment1227" id="r1c2-t93">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t93" headers="r1c1-t93">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t93 r1c2-t93">
<p>Name of the schema.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t93" headers="r1c1-t93">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t93 r1c2-t93">
<p>Name of the table to which this column belongs.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t93" headers="r1c1-t93">
<p><code>colname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t93 r1c2-t93">
<p>Name of the column or extension</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t93" headers="r1c1-t93">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t93 r1c2-t93">
<p>Name of the table partition in which to store the statistics. If the table is partitioned and <code>partname</code> is <code>NULL</code>, then the statistics are stored at the global table level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t93" headers="r1c1-t93">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t93 r1c2-t93">
<p>User statistics table identifier describing where to store the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are stored directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t93" headers="r1c1-t93">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t93 r1c2-t93">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t93" headers="r1c1-t93">
<p><code>ext_stats</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t93 r1c2-t93">
<p>User-defined statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t93" headers="r1c1-t93">
<p><code>stattypown</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t93 r1c2-t93">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t93" headers="r1c1-t93">
<p><code>stattypname</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t93 r1c2-t93">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t93" headers="r1c1-t93">
<p><code>distcnt</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t93 r1c2-t93">
<p>Number of distinct values</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t93" headers="r1c1-t93">
<p><code>density</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t93 r1c2-t93">
<p>Column density. If this value is <code>NULL</code> and if <code>distcnt</code> is not <code>NULL</code>, then density is derived from <code>distcnt</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t93" headers="r1c1-t93">
<p><code>nullcnt</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t93 r1c2-t93">
<p>Number of <code>NULLs</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t93" headers="r1c1-t93">
<p><code>srec</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t93 r1c2-t93">
<p><code>StatRec</code> structure filled in by a call to <code>PREPARE_COLUMN_VALUES</code> or <code>GET_COLUMN_STATS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t93" headers="r1c1-t93">
<p><code>avgclen</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t93 r1c2-t93">
<p>Average length for the column (in bytes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t93" headers="r1c1-t93">
<p><code>flags</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t93 r1c2-t93">
<p>For internal Oracle use (should be left as <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t93" headers="r1c1-t93">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t93 r1c2-t93">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t93" headers="r1c1-t93">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t93 r1c2-t93">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t93" headers="r1c1-t93">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t93 r1c2-t93">
<p>Sets the values even if statistics of the column are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10478"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or inconsistent input values</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10479"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68662" class="refsect2"><a id="BEIICAFD"></a>
<hr />
<h3 class="refsect2"><a id="sthref10480"></a>SET_DATABASE_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of all the tables, excluding the tables owned by Oracle. These tables can by included by passing <code>TRUE</code> for the <code>add_sys</code> parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10481"></a>Syntax</p>
<pre>
DBMS_STATS.SET_DATABASE_PREFS (
    pname            IN   VARCHAR2,
    pvalue           IN   VARCHAR2,
    add_sys          IN   BOOLEAN DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10482"></a>Parameters</p>
<div id="ARPLS68663" class="tblformal">
<p class="titleintable"><a id="sthref10483"></a><a id="sthref10484"></a>Table 142-88 SET_DATABASE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_DATABASE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t94">Parameter</th>
<th class="cellalignment1227" id="r1c2-t94">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t94" headers="r1c1-t94">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t94 r1c2-t94">
<p>Preference name. The default value for following parameters can be set:</p>
<ul>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r3c1-t94 r1c2-t94">
<p><code>CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics<code>.</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r4c1-t94 r1c2-t94">
<p><code>DEGREE</code> - Determines degree of parallelism used for gathering statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t94 r1c2-t94">
<p><code>ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t94 r1c2-t94">
<p><code>METHOD_OPT</code> - Controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br />
- <code>column_name</code> : Name of a column<br />
- <code>extension :</code> Can be either a column group in the format of <code>(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t94 r1c2-t94">
<p><code>NO_INVALIDATE</code> - Controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t94 r1c2-t94">
<p><code>GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t94 r1c2-t94">
<p><code>PUBLISH</code> - Determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t94 r1c2-t94">
<p><code>INCREMENTAL</code> - Determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p>the <code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>the <code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>the user specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t94" headers="r1c1-t94">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t94 r1c2-t94">
<p><code>STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers. The default value is 10%.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t94" headers="r1c1-t94">
<p><code>pvalue</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t94 r1c2-t94">
<p>Preference value. If <code>NULL</code> is specified, it will set the Oracle default value.s</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t94" headers="r1c1-t94">
<p><code>add_sys</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t94 r1c2-t94">
<p>Value <code>TRUE</code> will include the Oracle-owned tables</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10485"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10486"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to have the <code>SYSDBA</code> role or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</li>
<li>
<p>Both arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10487"></a>Examples</p>
<pre>
DBMS_STATS.SET_DATABASE_PREFS('CASCADE', 'DBMS_STATS.AUTO_CASCADE');
DBMS_STATS.SET_DATABASE_PREFS('ESTIMATE_PERCENT','9');
DBMS_STATS.SET_DATABASE_PREFS('DEGREE','99');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68664" class="refsect2"><a id="BEIEAFDF"></a>
<hr />
<h3 class="refsect2"><a id="sthref10488"></a>SET_GLOBAL_PREFS Procedure</h3>
<p>This procedure is used to set the global statistics preferences.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10489"></a>Syntax</p>
<pre>
DBMS_STATS.SET_GLOBAL_PREFS (
    pname     IN   VARCHAR2,
    pvalue    IN   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10490"></a>Parameters</p>
<div id="ARPLS68665" class="tblformal">
<p class="titleintable"><a id="sthref10491"></a><a id="sthref10492"></a>Table 142-89 SET_GLOBAL_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_GLOBAL_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_GLOBAL_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t95">Parameter</th>
<th class="cellalignment1227" id="r1c2-t95">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t95" headers="r1c1-t95">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t95 r1c2-t95">
<p>Preference name. The default value for the following preferences can be set:</p>
<ul>
<li>
<p><code>AUTOSTATS_TARGET</code></p>
</li>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t95" headers="r1c1-t95">&nbsp;</td>
<td class="cellalignment1228" headers="r3c1-t95 r1c2-t95">
<p><code>AUTOSTATS_TARGET</code> - This preference is applicable only for auto statistics collection. The value of this parameter controls the objects considered for stats collection. It takes the following values:</p>
<ul>
<li>
<p><code>'ALL'</code> - Statistics collected for all objects in system</p>
</li>
<li>
<p><code>'ORACLE'</code> - Statistics collected for all Oracle owned objects</p>
</li>
<li>
<p><code>'AUTO'</code> - Oracle decides on which objects to collect statistics</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r4c1-t95 r1c2-t95">
<p><code>CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t95 r1c2-t95">
<p><code>DEGREE</code> - Determines degree of parallelism used for gathering statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t95 r1c2-t95">
<p><code>ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t95 r1c2-t95">
<p><code>METHOD_OPT</code> - The value controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms.<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br />
- <code>column_name</code> : Name of a column<br />
- <code>extension :</code> Can be either a column group in the format of <code>(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t95 r1c2-t95">
<p><code>NO_INVALIDATE</code> - Controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t95 r1c2-t95">
<p><code>GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t95 r1c2-t95">
<p><code>PUBLISH</code> - This value determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t95 r1c2-t95">
<p><code>INCREMENTAL</code> - This value determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code></p>
</li>
<li>
<p><code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>User specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t95" headers="r1c1-t95">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r12c1-t95 r1c2-t95">
<p><code>STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers. The default value is 10%.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t95" headers="r1c1-t95">
<p><code>pvalue</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t95 r1c2-t95">
<p>Preference value. If <code>NULL</code> is specified, it will set the Oracle default value.s</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10493"></a>Exceptions</p>
<p><code>ORA-20000</code>: Insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10494"></a>Usage Notes</p>
<ul>
<li>
<p>This setting is honored only of there is no preference specified for the table to be analyzed.</p>
</li>
<li>
<p>To run this procedure, you need to have the <code>SYSDBA</code> or both <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>Both arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10495"></a>Examples</p>
<pre>
DBMS_STATS.SET_GLOBAL_PREFS('ESTIMATE_PERCENT','9');
DBMS_STATS.SET_GLOBAL_PREFS('DEGREE','99');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68666" class="refsect2"><a id="i997579"></a>
<hr />
<h3 class="refsect2"><a id="sthref10496"></a>SET_INDEX_STATS Procedures</h3>
<p>These procedures set index-related information. In the version of this procedure that deals with user-defined statistics, the statistics type specified is the type to store in the dictionary, in addition to the actual user-defined statistics. If this statistics type is NULL, the statistics type associated with the index or column is stored.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10497"></a>Syntax</p>
<pre>
DBMS_STATS.SET_INDEX_STATS (
   ownname       VARCHAR2, 
   indname       VARCHAR2,
   partname      VARCHAR2  DEFAULT NULL,
   stattab       VARCHAR2  DEFAULT NULL, 
   statid        VARCHAR2  DEFAULT NULL,
   numrows       NUMBER    DEFAULT NULL, 
   numlblks      NUMBER    DEFAULT NULL,
   numdist       NUMBER    DEFAULT NULL, 
   avglblk       NUMBER    DEFAULT NULL,
   avgdblk       NUMBER    DEFAULT NULL, 
   clstfct       NUMBER    DEFAULT NULL,
   indlevel      NUMBER    DEFAULT NULL, 
   flags         NUMBER    DEFAULT NULL,
   statown       VARCHAR2  DEFAULT NULL,
   no_invalidate BOOLEAN   DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   guessq        NUMBER    DEFAULT NULL,
   cachedblk     NUMBER    DEFAULT NULL,
   cachehit      NUMBER    DEFUALT NULL,
   force         BOOLEAN   DEFAULT FALSE);
</pre>
<p>Use the following for user-defined statistics:</p>
<pre>
DBMS_STATS.SET_INDEX_STATS (
   ownname       VARCHAR2, 
   indname       VARCHAR2,
   partname      VARCHAR2  DEFAULT NULL,
   stattab       VARCHAR2  DEFAULT NULL, 
   statid        VARCHAR2  DEFAULT NULL,
   ext_stats     RAW,
   stattypown    VARCHAR2 DEFAULT NULL, 
   stattypname   VARCHAR2 DEFAULT NULL, 
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN DEFAULT to_no_invalidate_type(
                                    get_param('NO_INVALIDATE')),
   cachedblk     NUMBER    DEFAULT NULL,
   cachehit      NUMBER    DEFUALT NULL,
   force         BOOLEAN   DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10498"></a>Parameters</p>
<div id="ARPLS68667" class="tblformal">
<p class="titleintable"><a id="sthref10499"></a><a id="sthref10500"></a>Table 142-90 SET_INDEX_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_INDEX_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_INDEX_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t96">Parameter</th>
<th class="cellalignment1227" id="r1c2-t96">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t96" headers="r1c1-t96">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t96 r1c2-t96">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t96" headers="r1c1-t96">
<p><code>indname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t96 r1c2-t96">
<p>Name of the index</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t96" headers="r1c1-t96">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t96 r1c2-t96">
<p>Name of the index partition in which to store the statistics. If the index is partitioned and if <code>partname</code> is <code>NULL</code>, then the statistics are stored at the global index level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t96" headers="r1c1-t96">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t96 r1c2-t96">
<p>User statistics table identifier describing where to store the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are stored directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t96" headers="r1c1-t96">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t96 r1c2-t96">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t96" headers="r1c1-t96">
<p><code>ext_stats</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t96 r1c2-t96">
<p>User-defined statistics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t96" headers="r1c1-t96">
<p><code>stattypown</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t96 r1c2-t96">
<p>Schema of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t96" headers="r1c1-t96">
<p><code>stattypname</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t96 r1c2-t96">
<p>Name of the statistics type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t96" headers="r1c1-t96">
<p><code>numrows</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t96 r1c2-t96">
<p>Number of rows in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t96" headers="r1c1-t96">
<p><code>numlblks</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t96 r1c2-t96">
<p>Number of leaf blocks in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t96" headers="r1c1-t96">
<p><code>numdist</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t96 r1c2-t96">
<p>Number of distinct keys in the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t96" headers="r1c1-t96">
<p><code>avglblk</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t96 r1c2-t96">
<p>Average integral number of leaf blocks in which each distinct key appears for this index (partition). If not provided, then this value is derived from <code>numlblks</code> and <code>numdist</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t96" headers="r1c1-t96">
<p><code>avgdblk</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t96 r1c2-t96">
<p>Average integral number of data blocks in the table pointed to by a distinct key for this index (partition). If not provided, then this value is derived from <code>clstfct</code> and <code>numdist</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t96" headers="r1c1-t96">
<p><code>clstfct</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t96 r1c2-t96">
<p>See <code>clustering_factor</code> column of the <code>all_indexes</code> view for a description</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t96" headers="r1c1-t96">
<p><code>indlevel</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t96 r1c2-t96">
<p>Height of the index (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t96" headers="r1c1-t96">
<p><code>flags</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t96 r1c2-t96">
<p>For internal Oracle use (should be left as <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t96" headers="r1c1-t96">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t96 r1c2-t96">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t96" headers="r1c1-t96">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t96 r1c2-t96">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t96" headers="r1c1-t96">
<p><code>guessq</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t96 r1c2-t96">
<p>Guess quality. See the <code>pct_direct_access</code> column of the <code>all_indexes</code> view for a description.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r21c1-t96" headers="r1c1-t96">
<p><code>cachedblk</code></p>
</td>
<td class="cellalignment1228" headers="r21c1-t96 r1c2-t96">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r22c1-t96" headers="r1c1-t96">
<p><code>cachehit</code></p>
</td>
<td class="cellalignment1228" headers="r22c1-t96 r1c2-t96">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r23c1-t96" headers="r1c1-t96">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r23c1-t96 r1c2-t96">
<p>Sets the values even if statistics of the index are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10501"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code>cachedblk</code> and <code>cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code>DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code>DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a 'confidence factor' for each <code>cachehit</code> and a <code>cachedblk</code> for each object. If the 'confidence factor' for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other "minor" workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10502"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid input value</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68668" class="refsect2"><a id="i1048566"></a>
<hr />
<h3 class="refsect2"><a id="sthref10503"></a>SET_PARAM Procedure</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This subprogram has been replaced by improved technology and is maintained only for purposes of backward compatibility. In this case, use the <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>.
<p>See also <a href="#i1049539">Deprecated Subprograms</a>.</p>
</div>
<p>This procedure sets default values for parameters of <code>DBMS_STATS</code> procedures. You can use the <code>GET_PARAM</code> <code>Function</code> to get the current default value of a parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10504"></a>Syntax</p>
<pre>
DBMS_STATS.SET_PARAM (
   pname      IN    VARCHAR2, 
   pval       IN    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10505"></a>Parameters</p>
<div id="ARPLS68669" class="tblformal">
<p class="titleintable"><a id="sthref10506"></a><a id="sthref10507"></a>Table 142-91 SET_PARAM Procedure Parameters</p>
<table class="cellalignment1229" title="SET_PARAM Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_PARAM subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t98">Parameter</th>
<th class="cellalignment1227" id="r1c2-t98">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t98" headers="r1c1-t98">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t98 r1c2-t98">
<p>The parameter name The default value for following parameters can be set.</p>
<ul>
<li>
<p><code>CASCADE</code> - The default value for <code>CASCADE</code> set by <code>SET_PARAM</code> is not used by export/import procedures.It is used only by gather procedures.</p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>AUTOSTATS_TARGET</code> - This parameter is applicable only for auto statistics collection. The value of this parameter controls the objects considered for statistics collection (see <code>pval</code>)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t98" headers="r1c1-t98">
<p><code>pval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t98 r1c2-t98">
<p>The parameter value. If <code>NULL</code> is specified, it will set the default value determined by Oracle. When <code>pname</code> is <code>AUTOSTATS_TARGET</code>, the following are valid values:</p>
<ul>
<li>
<p><code>'ALL'</code> - Statistics are collected for all objects in the system</p>
</li>
<li>
<p><code>'ORACLE'</code> - Statistics are collected for all Oracle owned objects</p>
</li>
<li>
<p><code>'AUTO'</code> - Oracle decides for which objects to collect statistics</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10508"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you must have the <code>SYSDBA</code> or both the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> and <code>ANALYZE</code> <code>ANY</code> system privileges.</p>
</li>
<li>
<p>Note that both arguments are of type <code>VARCHAR2</code> and the values need to be enclosed in quotes even when they represent numbers.</p>
</li>
<li>
<p>Note also the difference between <code>NULL</code> and <code>'NULL'</code>:</p>
<ul>
<li>
<p>When <code>NULL</code> is unquoted, this sets the parameter to the value Oracle recommends.</p>
</li>
<li>
<p>In the case of the quoted <code>'NULL'</code>, this sets the value of the parameter to <code>NULL</code>.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10509"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10510"></a>Examples</p>
<pre>
DBMS_STATS.SET_PARAM('CASCADE','DBMS_STATS.AUTO_CASCADE');
DBMS_STATS.SET_PARAM('ESTIMATE_PERCENT','5');
DBMS_STATS.SET_PARAM('DEGREE','NULL');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68670" class="refsect2"><a id="BEIDJHAH"></a>
<hr />
<h3 class="refsect2"><a id="sthref10511"></a>SET_SCHEMA_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of all the tables owned by the specified owner name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10512"></a>Syntax</p>
<pre>
DBMS_STATS.SET_SCHEMA_PREFS (
    ownname   IN   VARCHAR2,
    pname     IN   VARCHAR2,
    pvalue    IN   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10513"></a>Parameters</p>
<div id="ARPLS68671" class="tblformal">
<p class="titleintable"><a id="sthref10514"></a><a id="sthref10515"></a>Table 142-92 SET_SCHEMA_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_SCHEMA_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SCHEMA_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t99">Parameter</th>
<th class="cellalignment1227" id="r1c2-t99">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t99" headers="r1c1-t99">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t99 r1c2-t99">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t99" headers="r1c1-t99">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t99 r1c2-t99">
<p>Preference name. The default value for following parameters can be set:</p>
<ul>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t99" headers="r1c1-t99">
<p><code>pvalue</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t99 r1c2-t99">
<p>Preference value. If <code>NULL</code> is specified, it will set the Oracle default value.s</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10516"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or illegal input value</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10517"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner, or have the <code>SYSDBA</code> privilege, or have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>Both arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10518"></a>Examples</p>
<pre>
DBMS_STATS.SET_SCHEMA_PREFS('SH','CASCADE', 'DBMS_STATS.AUTO_CASCADE');
DBMS_STATS.SET_SCHEMA_PREFS('SH' 'ESTIMATE_PERCENT','9');
DBMS_STATS.SET_SCHEMA_PREFS('SH', 'DEGREE','99');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68672" class="refsect2"><a id="i997707"></a>
<hr />
<h3 class="refsect2"><a id="sthref10519"></a>SET_SYSTEM_STATS Procedure</h3>
<p>This procedure sets systems statistics.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10520"></a>Syntax</p>
<pre>
DBMS_STATS.SET_SYSTEM_STATS (
   pname          VARCHAR2,
   pvalue         NUMBER,
   stattab   IN   VARCHAR2 DEFAULT NULL, 
   statid    IN   VARCHAR2 DEFAULT NULL,
   statown   IN   VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10521"></a>Parameters</p>
<div id="ARPLS68673" class="tblformal">
<p class="titleintable"><a id="sthref10522"></a><a id="sthref10523"></a>Table 142-93 SET_SYSTEM_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_SYSTEM_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t100">Parameter</th>
<th class="cellalignment1227" id="r1c2-t100">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t100" headers="r1c1-t100">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t100 r1c2-t100">
<p>The parameter name to get, which can have one of the following values:</p>
<ul>
<li>
<p><code>iotfrspeed</code>&mdash;I/O transfer speed in bytes for each millisecond</p>
</li>
<li>
<p><code>ioseektim</code> - Seek time + latency time + operating system overhead time, in milliseconds</p>
</li>
<li>
<p><code>sreadtim</code> - Average time to read single block (random read), in milliseconds</p>
</li>
<li>
<p><code>mreadtim</code> - Average time to read an mbrc block at once (sequential read), in milliseconds</p>
</li>
<li>
<p><code>cpuspeed</code> - Average number of CPU cycles for each second, in millions, captured for the workload (statistics collected using '<code>INTERVAL</code>' or '<code>START</code>' and '<code>STOP</code>' options)</p>
</li>
<li>
<p><code>cpuspeednw</code> - Average number of CPU cycles for each second, in millions, captured for the noworkload (statistics collected using '<code>NOWORKLOAD</code>' option.</p>
</li>
<li>
<p><code>mbrc</code> - Average multiblock read count for sequential read, in blocks</p>
</li>
<li>
<p><code>maxthr</code> - Maximum I/O system throughput, in bytes/second</p>
</li>
<li>
<p><code>slavethr</code> - Average slave I/O throughput, in bytes/second</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t100" headers="r1c1-t100">
<p><code>pvalue</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t100 r1c2-t100">
<p>Parameter value to get</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t100" headers="r1c1-t100">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t100 r1c2-t100">
<p>Identifier of the user statistics table where the statistics will be obtained. If stattab is null, the statistics will be obtained from the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t100" headers="r1c1-t100">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t100 r1c2-t100">
<p>Optional identifier associated with the statistics saved in the stattab</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t100" headers="r1c1-t100">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t100 r1c2-t100">
<p>Schema containing <code>stattab</code> (if different from current schema)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10524"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid input value</p>
<p><code>ORA-20002</code>: Bad user statistics table; may need to be upgraded</p>
<p><code>ORA-20003</code>: Unable to set system statistics</p>
<p><code>ORA-20004</code>: Parameter does not exist</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10525"></a>Usage Notes</p>
<p>To run this procedure, you need the <code>GATHER_SYSTEM_STATISTICS</code> role.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68674" class="refsect2"><a id="BEIBJJHC"></a>
<hr />
<h3 class="refsect2"><a id="sthref10526"></a>SET_TABLE_PREFS Procedure</h3>
<p>This procedure is used to set the statistics preferences of the specified table in the specified schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10527"></a>Syntax</p>
<pre>
DBMS_STATS.SET_TABLE_PREFS (
    ownname    IN  VARCHAR2,
    tabname    IN  VARCHAR2,
    pname      IN  VARCHAR2,
    pvalue     IN  VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10528"></a>Parameters</p>
<div id="ARPLS68675" class="tblformal">
<p class="titleintable"><a id="sthref10529"></a><a id="sthref10530"></a>Table 142-94 SET_TABLE_PREFS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_TABLE_PREFS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_TABLE_PREFS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t101">Parameter</th>
<th class="cellalignment1227" id="r1c2-t101">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t101" headers="r1c1-t101">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t101 r1c2-t101">
<p>Owner name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t101" headers="r1c1-t101">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t101 r1c2-t101">
<p>Table name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t101" headers="r1c1-t101">
<p><code>pname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t101 r1c2-t101">
<p>Preference name. The default value for following preferences can be set:</p>
<ul>
<li>
<p><code>CASCADE</code></p>
</li>
<li>
<p><code>DEGREE</code></p>
</li>
<li>
<p><code>ESTIMATE_PERCENT</code></p>
</li>
<li>
<p><code>METHOD_OPT</code></p>
</li>
<li>
<p><code>NO_INVALIDATE</code></p>
</li>
<li>
<p><code>GRANULARITY</code></p>
</li>
<li>
<p><code>PUBLISH</code></p>
</li>
<li>
<p><code>INCREMENTAL</code></p>
</li>
<li>
<p><code>STALE_PERCENT</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r5c1-t101 r1c2-t101">
<p><code>CASCADE</code> - Determines whether or not index statistics are collected as part of gathering table statistics<code>.</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r6c1-t101 r1c2-t101">
<p><code>DEGREE</code> - Determines degree of parallelism used for gathering statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r7c1-t101 r1c2-t101">
<p><code>ESTIMATE_PERCENT</code> - Determines the percentage of rows to estimate. The valid range is [0.000001,100]. Use the constant <code>DBMS_STATS</code>.<code>AUTO_SAMPLE_SIZE</code> to have Oracle determine the appropriate sample size for good statistics. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r8c1-t101 r1c2-t101">
<p><code>METHOD_OPT</code> - Controls column statistics collection and histogram creation. It accepts either of the following options, or both in combination:</p>
<ul>
<li>
<p><code>FOR ALL [INDEXED | HIDDEN] COLUMNS</code> <code>[size_clause]</code></p>
</li>
<li>
<p><code>FOR COLUMNS [size clause] column [size_clause] [,column [size_clause]...]</code></p>
</li>
</ul>
<p><code>size_clause</code> is defined as <code>size_clause := SIZE {integer | REPEAT | AUTO | SKEWONLY}</code></p>
<p><code>column</code> is defined as <code>column := column_name | extension name | extension</code></p>
<br />
<code>- integer</code> : Number of histogram buckets. Must be in the range [1,254].<br />
<code>- REPEAT</code> : Collects histograms only on the columns that already have histograms<br />
<code>- AUTO</code> : Oracle determines the columns on which to collect histograms based on data distribution and the workload of the columns.<br />
<code>- SKEWONLY</code> : Oracle determines the columns on which to collect histograms based on the data distribution of the columns.<br />
- <code>column_name</code> : Name of a column<br />
- <code>extension :</code> Can be either a column group in the format of <code>(column_name, colume_name [, ...])</code> or an expression
<p>The default is <code>FOR ALL COLUMNS SIZE AUTO</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r9c1-t101 r1c2-t101">
<p><code>NO_INVALIDATE</code> - The value controls the invalidation of dependent cursors of the tables for which statistics are being gathered. Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code> to have Oracle decide when to invalidate dependent cursors. This is the default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r10c1-t101 r1c2-t101">
<p><code>GRANULARITY</code> - Determines granularity of statistics to collect (only pertinent if the table is partitioned).</p>
<p><code>'ALL'</code> - Gathers all (subpartition, partition, and global) statistics</p>
<p><code>'AUTO'</code>- Determines the granularity based on the partitioning type. This is the default value.</p>
<p><code>'DEFAULT'</code> - Gathers global and partition-level statistics. This option is obsolete, and while currently supported, it is included in the documentation for legacy reasons only. You should use the '<code>GLOBAL AND PARTITION</code>' for this functionality. Note that the default value is now '<code>AUTO</code>'.</p>
<p><code>'GLOBAL'</code> - Gathers global statistics</p>
<p>'<code>GLOBAL AND PARTITION</code>' - Gathers the global and partition level statistics. No subpartition level statistics are gathered even if it is a composite partitioned object.</p>
<p><code>'PARTITION</code> '- Gathers partition-level statistics</p>
<p><code>'SUBPARTITION'</code> - Gathers subpartition-level statistics.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r11c1-t101 r1c2-t101">
<p><code>PUBLISH</code> - Determines whether or not newly gathered statistics will be published once the gather job has completed. Prior to Oracle Database 11<span class="italic">g</span>, Release 1 (11.1), once a statistic gathering job completed the new statistics were automatically published into the dictionary tables. The user now has the ability to gather statistics but not publish them immediately. This allows the DBA to test the new statistics before publishing them.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r12c1-t101 r1c2-t101">
<p><code>INCREMENTAL</code> - Determines whether or not the global statistics of a partitioned table will be maintained without doing a full table scan. With partitioned tables it is very common to load new data into a new partition. As new partitions are added and data loaded, the global table statistics need to be kept up to date. Oracle will update the global table statistics by scanning only the partitions that have been changed instead of the entire table if the following conditions hold:</p>
<ul>
<li>
<p><code>INCREMENTAL</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p><code>PUBLISH</code> value for the partitioned table is set to <code>TRUE</code>;</p>
</li>
<li>
<p>User specifies <code>AUTO_SAMPLE_SIZE</code> for <code>ESTIMATE_PERCENT</code> and <code>AUTO</code> for <code>GRANULARITY</code> when gathering statistics on the table.</p>
</li>
</ul>
<p>If the <code>INCREMENTAL</code> value for the partitioned table was set to <code>FALSE</code> (default value), a full table scan is used to maintain the global statistics which is a much more resource intensive and time-consuming operation for large tables.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t101" headers="r1c1-t101">
<p>.</p>
</td>
<td class="cellalignment1228" headers="r13c1-t101 r1c2-t101">
<p><code>STALE_PERCENT</code> - Determines the percentage of rows in a table that have to change before the statistics on that table are deemed stale and should be regathered. The valid domain for <code>stale_percent</code> is non-negative numbers. The default value is 10%.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t101" headers="r1c1-t101">
<p>pvalue</p>
</td>
<td class="cellalignment1228" headers="r14c1-t101 r1c2-t101">
<p>Preference value. If <code>NULL</code> is specified, it will set the Oracle default value.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10531"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid or illegal input values</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10532"></a>Usage Notes</p>
<ul>
<li>
<p>To run this procedure, you need to connect as owner of the table or should have the <code>ANALYZE</code> <code>ANY</code> system privilege.</p>
</li>
<li>
<p>All arguments are of type <code>VARCHAR2</code> and values are enclosed in quotes, even when they represent numbers.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10533"></a>Examples</p>
<pre>
DBMS_STATS.SET_TABLE_PREFS('SH', 'SALES', 'CASCADE', 'DBMS_STATS.AUTO_CASCADE');
DBMS_STATS.SET_TABLE_PREFS('SH', 'SALES','ESTIMATE_PERCENT','9');
DBMS_STATS.SET_TABLE_PREFS('SH', 'SALES', 'DEGREE','99');
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68676" class="refsect2"><a id="i997763"></a>
<hr />
<h3 class="refsect2"><a id="sthref10534"></a>SET_TABLE_STATS Procedure</h3>
<p>This procedure sets table-related information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10535"></a>Syntax</p>
<pre>
DBMS_STATS.SET_TABLE_STATS (
   ownname       VARCHAR2, 
   tabname       VARCHAR2, 
   partname      VARCHAR2 DEFAULT NULL,
   stattab       VARCHAR2 DEFAULT NULL, 
   statid        VARCHAR2 DEFAULT NULL,
   numrows       NUMBER   DEFAULT NULL, 
   numblks       NUMBER   DEFAULT NULL,
   avgrlen       NUMBER   DEFAULT NULL, 
   flags         NUMBER   DEFAULT NULL,
   statown       VARCHAR2 DEFAULT NULL,
   no_invalidate BOOLEAN  DEFAULT to_no_invalidate_type (
                                     get_param('NO_INVALIDATE')),
   cachedblk     NUMBER    DEFAULT NULL,
   cachehit      NUMBER    DEFUALT NULL,
   force         BOOLEAN   DEFAULT FALSE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10536"></a>Parameters</p>
<div id="ARPLS68677" class="tblformal">
<p class="titleintable"><a id="sthref10537"></a><a id="sthref10538"></a>Table 142-95 SET_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="SET_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.SET_SYSTEM_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t102">Parameter</th>
<th class="cellalignment1227" id="r1c2-t102">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t102" headers="r1c1-t102">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t102 r1c2-t102">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t102" headers="r1c1-t102">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t102 r1c2-t102">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t102" headers="r1c1-t102">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t102 r1c2-t102">
<p>Name of the table partition in which to store the statistics. If the table is partitioned and <code>partname</code> is <code>NULL</code>, then the statistics are stored at the global table level.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t102" headers="r1c1-t102">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t102 r1c2-t102">
<p>User statistics table identifier describing where to store the statistics. If <code>stattab</code> is <code>NULL</code>, then the statistics are stored directly in the dictionary.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t102" headers="r1c1-t102">
<p><code>statid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t102 r1c2-t102">
<p>Identifier (optional) to associate with these statistics within <code>stattab</code> (Only pertinent if <code>stattab</code> is not <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t102" headers="r1c1-t102">
<p><code>numrows</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t102 r1c2-t102">
<p>Number of rows in the table (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t102" headers="r1c1-t102">
<p><code>numblks</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t102 r1c2-t102">
<p>Number of blocks the table (partition) occupies</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t102" headers="r1c1-t102">
<p><code>avgrlen</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t102 r1c2-t102">
<p>Average row length for the table (partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t102" headers="r1c1-t102">
<p><code>flags</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t102 r1c2-t102">
<p>For internal Oracle use (should be left as <code>NULL</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t102" headers="r1c1-t102">
<p><code>statown</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t102 r1c2-t102">
<p>Schema containing <code>stattab</code> (if different than <code>ownname</code>)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t102" headers="r1c1-t102">
<p><code>no_invalidate</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t102 r1c2-t102">
<p>Does not invalidate the dependent cursors if set to <code>TRUE</code>. The procedure invalidates the dependent cursors immediately if set to <code>FALSE</code>. Use <code>DBMS_STATS</code>.<code>AUTO_INVALIDATE</code>. to have Oracle decide when to invalidate dependent cursors. This is the default. The default can be changed using the <a href="#BEIICAFD">SET_DATABASE_PREFS Procedure</a>, <a href="#BEIEAFDF">SET_GLOBAL_PREFS Procedure</a>, <a href="#BEIDJHAH">SET_SCHEMA_PREFS Procedure</a> and <a href="#BEIBJJHC">SET_TABLE_PREFS Procedure</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t102" headers="r1c1-t102">
<p><code>cachedblk</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t102 r1c2-t102">
<p>The average number of blocks in the buffer cache for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t102" headers="r1c1-t102">
<p><code>cachehit</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t102 r1c2-t102">
<p>The average cache hit ratio for the segment (index/table/index partition/table partition)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t102" headers="r1c1-t102">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t102 r1c2-t102">
<p>Sets the values even if statistics of the table are locked</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10539"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>The Optimizer uses the cached data to estimate number of cached blocks for index or statistics table access. The total cost of the operation will be combined from the I/O cost of reading not cached blocks from disk, the CPU cost of getting cached blocks from the buffer cache, and the CPU cost of processing the data.</p>
</li>
<li>
<p>Oracle maintains <code>cachedblk</code> and <code>cachehit</code> at all times but uses correspondent caching statistics for optimization as part of the table and index statistics only when the user calls <code>DBMS_STATS.GATHER_[TABLE/INDEX/SCHEMA/DATABASE]_STATS</code> procedure for auto mode or <code>DBMS_STATS.GATHER_SYSTEM_STATS</code> for manual mode. In order to prevent the user from utilizing inaccurate and unreliable data, the optimizer will compute a 'confidence factor' for each <code>cachehit</code> and a <code>cachedblk</code> for each object. If the 'confidence factor' for the value meets confidence criteria, this value will be used, otherwise the defaults will be used.</p>
</li>
<li>
<p>The automatic maintenance algorithm for object caching statistics assumes that there is only one major workload for the system and adjusts statistics to this workload, ignoring other "minor" workloads. If this is not the case, you must use manual mode for maintaining object caching statistics.</p>
</li>
<li>
<p>The object caching statistics maintenance algorithm for auto mode prevents you from using statistics in the following situations</p>
<ul>
<li>
<p>When not enough data has been analyzed, such as when an object has been recently create</p>
</li>
<li>
<p>When the system does not have one major workload resulting in averages not corresponding to real values.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10540"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Invalid input value</p>
<p><code>ORA-20005</code>: Object statistics are locked</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68678" class="refsect2"><a id="BABCIFCJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref10541"></a>SHOW_EXTENDED_STATS_NAME Function</h3>
<p>This function returns the name of the statistics entry that is created for the user-specified extension. It raises an error if no extension has been created.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10542"></a>Syntax</p>
<pre>
DBMS_STATS.SHOW_EXTENDED_STATS_NAME (
   ownname    VARCHAR2, 
   tabname    VARCHAR2,
   extension  VARCHAR2)
 RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10543"></a>Parameters</p>
<div id="ARPLS68679" class="tblformal">
<p class="titleintable"><a id="sthref10544"></a><a id="sthref10545"></a>Table 142-96 SHOW_EXTENDED_STATS_NAME Function Parameters</p>
<table class="cellalignment1229" title="SHOW_EXTENDED_STATS_NAME Function Parameters" summary="This table describes the Parameters of DBMS_STATS.SHOW_EXTENDED_STATS_NAME subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t103">Parameter</th>
<th class="cellalignment1227" id="r1c2-t103">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t103" headers="r1c1-t103">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t103 r1c2-t103">
<p>Owner name of a table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t103" headers="r1c1-t103">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t103 r1c2-t103">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t103" headers="r1c1-t103">
<p><code>extension</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t103 r1c2-t103">
<p>Can be either a column group or an expression. Suppose the specified table has two column <code>c1</code>, <code>c2</code>. An example column group can be "(<code>c1</code>, <code>c2</code>)" and an example expression can be "(<code>c1</code> + <code>c2</code>)".</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10546"></a>Exceptions</p>
<p><code>ORA-20000</code>: Object does not exist or insufficient privileges</p>
<p><code>ORA-20001</code>: Error when processing extension</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10547"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68680" class="refsect2"><a id="BABDDHJI"></a>
<hr />
<h3 class="refsect2"><a id="sthref10548"></a>UNLOCK_PARTITION_STATS Procedure</h3>
<p>This procedure enables the user to unlock statistics for a partition.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10549"></a>Syntax</p>
<pre>
DBMS_STATS.UNLOCK_PARTITION_STATS (
    ownname    VARCHAR2,
    tabname    VARCHAR2,
    partname   VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10550"></a>Parameters</p>
<div id="ARPLS68681" class="tblformal">
<p class="titleintable"><a id="sthref10551"></a><a id="sthref10552"></a>Table 142-97 UNLOCK_PARTITION_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="UNLOCK_PARTITION_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UNLOCK_PARTITION_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t104">Parameter</th>
<th class="cellalignment1227" id="r1c2-t104">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t104" headers="r1c1-t104">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t104 r1c2-t104">
<p>Name of the schema to unlock</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t104" headers="r1c1-t104">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t104 r1c2-t104">
<p>Name of the table</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t104" headers="r1c1-t104">
<p><code>partname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t104 r1c2-t104">
<p>Partition name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10553"></a>Usage Notes</p>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68682" class="refsect2"><a id="i1043314"></a>
<hr />
<h3 class="refsect2"><a id="sthref10554"></a>UNLOCK_SCHEMA_STATS Procedure</h3>
<p>This procedure unlocks the statistics on all the tables in schema.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10555"></a>Syntax</p>
<pre>
DBMS_STATS.UNLOCK_SCHEMA_STATS (
   ownname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10556"></a>Parameters</p>
<div id="ARPLS68683" class="tblformal">
<p class="titleintable"><a id="sthref10557"></a><a id="sthref10558"></a>Table 142-98 UNLOCK_SCHEMA_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="UNLOCK_SCHEMA_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UNLOCK_SCHEMA_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t105">Parameter</th>
<th class="cellalignment1227" id="r1c2-t105">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t105" headers="r1c1-t105">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t105 r1c2-t105">
<p>The name of the schema</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10559"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table is locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code>SET_*,</code> <code>DELETE_*,</code> <code>IMPORT_*,</code> <code>GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code>GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68684" class="refsect2"><a id="i1040393"></a>
<hr />
<h3 class="refsect2"><a id="sthref10560"></a>UNLOCK_TABLE_STATS Procedure</h3>
<p>This procedure unlocks the statistics on the table.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10561"></a>Syntax</p>
<pre>
DBMS_STATS.UNLOCK_TABLE_STATS (
   ownname    VARCHAR2,
   tabname    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10562"></a>Parameters</p>
<div id="ARPLS68685" class="tblformal">
<p class="titleintable"><a id="sthref10563"></a><a id="sthref10564"></a>Table 142-99 UNLOCK_TABLE_STATS Procedure Parameters</p>
<table class="cellalignment1229" title="UNLOCK_TABLE_STATS Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UNLOCK_TABLE_STATS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t106">Parameter</th>
<th class="cellalignment1227" id="r1c2-t106">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t106" headers="r1c1-t106">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t106 r1c2-t106">
<p>The name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t106" headers="r1c1-t106">
<p><code>tabname</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t106 r1c2-t106">
<p>The name of the table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10565"></a>Usage Notes</p>
<ul>
<li>
<p>To invoke this procedure you must be owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> privilege. For objects owned by <code>SYS</code>, you need to be either the owner of the table, or you need the <code>ANALYZE</code> <code>ANY</code> <code>DICTIONARY</code> privilege or the <code>SYSDBA</code> privilege.</p>
</li>
<li>
<p>When statistics on a table is locked, all the statistics depending on the table, including table statistics, column statistics, histograms and statistics on all dependent indexes, are considered to be locked.</p>
</li>
<li>
<p>The <code>SET_*,</code> <code>DELETE_*,</code> <code>IMPORT_*,</code> <code>GATHER_*</code> procedures that modify statistics in the dictionary of an individual table, index or column will raise an error if statistics of the object is locked.</p>
</li>
<li>
<p>Procedures that operates on multiple objects (such as <code>GATHER_SCHEMA_STATS</code>) will skip modifying the statistics of an object if it is locked. Many procedures have force argument to override the lock.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS68686" class="refsect2"><a id="i1039960"></a>
<hr />
<h3 class="refsect2"><a id="sthref10566"></a>UPGRADE_STAT_TABLE Procedure</h3>
<p>This procedure upgrades a user statistics table from an older version.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10567"></a>Syntax</p>
<pre>
DBMS_STATS.UPGRADE_STAT_TABLE (
   ownname    VARCHAR2,
   stattab    VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10568"></a>Parameters</p>
<div id="ARPLS68687" class="tblformal">
<p class="titleintable"><a id="sthref10569"></a><a id="sthref10570"></a>Table 142-100 UPGRADE_STAT_TABLE Procedure Parameters</p>
<table class="cellalignment1229" title="UPGRADE_STAT_TABLE Procedure Parameters" summary="This table describes the Parameters of DBMS_STATS.UPGRADE_STAT_TABLE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t107">Parameter</th>
<th class="cellalignment1227" id="r1c2-t107">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t107" headers="r1c1-t107">
<p><code>ownname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t107 r1c2-t107">
<p>Name of the schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t107" headers="r1c1-t107">
<p><code>stattab</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t107 r1c2-t107">
<p>Name of the table</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10571"></a>Exceptions</p>
<p><code>ORA-20000</code>: Unable to upgrade table</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref10572"></a>Usage Notes</p>
<p>To invoke this procedure you need the privileges to drop and create a table.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_stat_f.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_stmap.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
