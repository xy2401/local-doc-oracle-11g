<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_WORKLOAD_REPOSITORY</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:49Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_workload_replay.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_xa.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">166/265</span> <!-- End Header -->
<div id="ARPLS093" class="chapter"><a id="BACCJHDI"></a><a id="i1003494"></a>
<h1 class="chapter"><span class="secnum">162</span> DBMS_WORKLOAD_REPOSITORY</h1>
<p>The <code><a id="sthref11901"></a>DBMS_WORKLOAD_REPOSITORY</code> package lets you manage the Workload Repository, performing operations such as managing snapshots and baselines.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Performance Tuning Guide</span> for more information about the <a class="olink PFGRF02601" href="../../server.112/e41573/autostat.htm#PFGRF02601">"Automatic Workload Repository"</a></div>
<p>The chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABFECIF">Using DBMS_WORKLOAD_REPOSITORY</a></p>
<ul>
<li>
<p>Examples</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABBGHJE">Data Structures</a></p>
<ul>
<li>
<p>Object Types</p>
</li>
<li>
<p>Table Types</p>
</li>
</ul>
</li>
<li>
<p><a href="#BACEEABC">Summary of DBMS_WORKLOAD_REPOSITORY Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABFECIF"></a>
<hr />
<div id="ARPLS69100" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_WORKLOAD_REPOSITORY</h2>
<p>This section contains topics which relate to using the DBMS_WORKLOAD_REPOSITORY package.</p>
<ul>
<li>
<p><a href="#CIHDGBGF">Examples</a></p>
</li>
</ul>
<div id="ARPLS69101" class="refsect2"><a id="CIHDGBGF"></a>
<hr />
<h3 class="refsect2">Examples</h3>
<p>This example shows how to generate an AWR text report with the <code>DBMS_WORKLOAD_REPOSITORY</code> package for database identifier 1557521192, instance id 1, snapshot ids 5390 and 5391 and with default options.</p>
<pre>
-- make sure to set line size appropriately
-- set linesize 152
SELECT output FROM TABLE(
   DBMS_WORKLOAD_REPOSITORY.AWR_REPORT_TEXT(
     1557521192,  1, 5390, 5392) ) ;
</pre>
<p>You can call the <code>DBMS_WORKLOAD_REPOSITORY</code> packaged functions directly as in the example, but Oracle recommends you use the corresponding supplied SQL script (<code>awrrpt.sql</code> in this case) for the packaged function, which prompts the user for required information.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BABBGHJE"></a>
<hr />
<div id="ARPLS69102" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Data Structures</h2>
<p>The <code>DBMS_WORKLOAD_REPOSITORY</code> package defines an object and associated table types.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11902"></a>OBJECT Types</p>
<ul>
<li>
<p><a href="#BABHCEHJ">AWR_BASELINE_METRIC_TYPE Object Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11903"></a>TABLE Types</p>
<ul>
<li>
<p><a href="#CEGBICDC">AWR_BASELINE_METRIC_TYPE_TABLE Table Type</a></p>
</li>
<li>
<p><a href="#CHDJAICE">AWRRPT_INSTANCE_LIST_TYPE Table Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS69103" class="refsect2"><a id="BABHCEHJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref11904"></a>AWR_BASELINE_METRIC_TYPE Object Type</h3>
<p>This type shows the values of the metrics corresponding to a baseline.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11905"></a>Syntax</p>
<pre>
TYPE breakpoint_info AS OBJECT (
   baseline_name      VARCHAR2(64),
   dbid               NUMBER NOT NULL,
   instance_number    NUMBER NOT NULL,
   beg_time           DATE NOT NULL,
   end_time           DATE NOT NULL,
   metric_id          NUMBER NOT NULL,
   metric_name        VARCHAR2(64) NOT NULL,
   metric_unit        VARCHAR2(64) NOT NULL,
   num_interval       NUMBER NOT NULL,
   interval_size      NUMBER NOT NULL,
   average            NUMBER NOT NULL,
   minimum            NUMBER NOT NULL,
   maximum            NUMBER NOT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11906"></a>Fields</p>
<div id="ARPLS69104" class="tblformal">
<p class="titleintable"><a id="sthref11907"></a><a id="sthref11908"></a>Table 162-1 RUNTIME_INFO Fields</p>
<table class="cellalignment1229" title="RUNTIME_INFO Fields" summary="This table describes the parameters of the DBMS_DEBUG.BREAKPOINT_INFO subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t3">Field</th>
<th class="cellalignment1227" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t3" headers="r1c1-t3">
<p><code>baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c2-t3">
<p>Name of the Baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t3" headers="r1c1-t3">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c2-t3">
<p>Database ID for the snapshot</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t3" headers="r1c1-t3">
<p>instance_number</p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c2-t3">
<p>Instance number for the snapshot</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t3" headers="r1c1-t3">
<p><code>beg_time</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c2-t3">
<p>Begin time of the interval</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t3" headers="r1c1-t3">
<p><code>end_time</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t3 r1c2-t3">
<p>End time of the interval</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t3" headers="r1c1-t3">
<p><code>metric_id</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t3 r1c2-t3">
<p>Metric ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t3" headers="r1c1-t3">
<p><code>metric_name</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t3 r1c2-t3">
<p>Metric name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t3" headers="r1c1-t3">
<p><code>metric_unit</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t3 r1c2-t3">
<p>Unit of measurement</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t3" headers="r1c1-t3">
<p><code>num_interval</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t3 r1c2-t3">
<p>Number of intervals observed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t3" headers="r1c1-t3">
<p><code>interval_size</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t3 r1c2-t3">
<p>Interval size (in hundredths of a second)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t3" headers="r1c1-t3">
<p><code>average</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t3 r1c2-t3">
<p>Average over the period</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t3" headers="r1c1-t3">
<p><code>minimum</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t3 r1c2-t3">
<p>Minimum value observed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t3" headers="r1c1-t3">
<p><code>maximum</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t3 r1c2-t3">
<p>Maximum value observed</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69105" class="refsect2"><a id="CEGBICDC"></a>
<hr />
<h3 class="refsect2"><a id="sthref11909"></a>AWR_BASELINE_METRIC_TYPE_TABLE Table Type</h3>
<p>This type is used by the <a href="#BABDIFIA">SELECT_BASELINE_METRIC Function</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11910"></a>Syntax</p>
<pre>
CREATE TYPE awr_baseline_metric_type_table AS TABLE OF awr_baseline_metric_type;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS71993" class="refsect2"><a id="CHDJAICE"></a>
<hr />
<h3 class="refsect2">AWRRPT_INSTANCE_LIST_TYPE Table Type</h3>
<p>This type provides an alternative to a comma-separated list.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11911"></a>Syntax</p>
<pre>
CREATE TYPE awrrpt_instance_list_type AS TABLE OF NUMBER;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="BACEEABC"></a>
<hr />
<div id="ARPLS69106" class="refsect1">
<h2 class="refsect1">Summary of DBMS_WORKLOAD_REPOSITORY Subprograms</h2>
<div id="ARPLS69107" class="tblformal">
<p class="titleintable"><a id="sthref11912"></a><a id="sthref11913"></a>Table 162-2 DBMS_WORKLOAD_REPOSITORY Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_WORKLOAD_REPOSITORY Package Subprograms " summary="This table lists the DBMS_WORKLOAD_REPOSITORY subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#CHDGFJAD">ADD_COLORED_SQL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p>Adds a colored SQL ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#CIHDBCGJ">ASH_GLOBAL_REPORT_HTML Function</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p>Displays a global or Oracle Real Application Clusters (Oracle RAC) ASH Spot report in HTML format.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#CHDEFFAD">ASH_GLOBAL_REPORT_TEXT Function</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p>Displays a global or Oracle Real Application Clusters (Oracle RAC) ASH Spot report in Text format.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><a href="#CHDIEGBD">ASH_REPORT_HTML Function</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p>Displays the ASH report in HTML</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t4" headers="r1c1-t4">
<p><a href="#CIHBAFCB">ASH_REPORT_TEXT Function</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c2-t4">
<p>Displays the ASH report in text</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t4" headers="r1c1-t4">
<p><a href="#CIHGFGBG">AWR_DIFF_REPORT_HTML Function</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c2-t4">
<p>Displays the AWR Diff-Diff report in HTML</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t4" headers="r1c1-t4">
<p><a href="#CIHHBHCJ">AWR_DIFF_REPORT_TEXT Function</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c2-t4">
<p>Displays the AWR Diff-Diff report in text</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t4" headers="r1c1-t4">
<p><a href="#CHDIEIEA">AWR_GLOBAL_DIFF_REPORT_HTML Functions</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t4 r1c2-t4">
<p>Displays the Global AWR Compare Periods Report in HTML</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t4" headers="r1c1-t4">
<p><a href="#CHDJAJGE">AWR_GLOBAL_DIFF_REPORT_TEXT Functions</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t4 r1c2-t4">
<p>Displays the Global AWR Compare Periods Report in text</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t4" headers="r1c1-t4">
<p><a href="#CHDGGHBG">AWR_GLOBAL_REPORT_HTML Functions</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t4 r1c2-t4">
<p>Displays the Global AWR report in HTML</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t4" headers="r1c1-t4">
<p><a href="#CHDGEAEG">AWR_GLOBAL_REPORT_TEXT Functions</a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t4 r1c2-t4">
<p>Displays the Global AWR report in text</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t4" headers="r1c1-t4">
<p><a href="#i1004015">AWR_REPORT_HTML Function</a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t4 r1c2-t4">
<p>Displays the AWR report in HTML</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t4" headers="r1c1-t4">
<p><a href="#i1004016">AWR_REPORT_TEXT Function</a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t4 r1c2-t4">
<p>Displays the AWR report in text</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t4" headers="r1c1-t4">
<p><a href="#CHDFBJIG">AWR_SET_REPORT_THRESHOLDS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t4 r1c2-t4">
<p>Configures specified report thresholds, including the number of rows in the report</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t4" headers="r1c1-t4">
<p><a href="#CIHHJCEI">AWR_SQL_REPORT_HTML Function</a></p>
</td>
<td class="cellalignment1228" headers="r16c1-t4 r1c2-t4">
<p>Displays the AWR SQL Report in HTML format</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t4" headers="r1c1-t4">
<p><a href="#CIHBACEJ">AWR_SQL_REPORT_TEXT Function</a></p>
</td>
<td class="cellalignment1228" headers="r17c1-t4 r1c2-t4">
<p>Displays the AWR SQL Report in text format</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t4" headers="r1c1-t4">
<p><a href="#i1003628">CREATE_BASELINE Functions &amp; Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r18c1-t4 r1c2-t4">
<p>Creates a single baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t4" headers="r1c1-t4">
<p><a href="#BABFHHJJ">CREATE_BASELINE_TEMPLATE Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r19c1-t4 r1c2-t4">
<p>Creates a baseline template</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t4" headers="r1c1-t4">
<p><a href="#BACHIHFC">CREATE_SNAPSHOT Function and Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r20c1-t4 r1c2-t4">
<p>Creates a manual snapshot immediately</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r21c1-t4" headers="r1c1-t4">
<p><a href="#i1003190">DROP_BASELINE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r21c1-t4 r1c2-t4">
<p>Drops a range of snapshots</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r22c1-t4" headers="r1c1-t4">
<p><a href="#BABBIJBE">DROP_BASELINE_TEMPLATE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r22c1-t4 r1c2-t4">
<p>Removes a baseline template that is no longer needed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r23c1-t4" headers="r1c1-t4">
<p><a href="#BACCDGDB">DROP_SNAPSHOT_RANGE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r23c1-t4 r1c2-t4">
<p>Activates service</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r24c1-t4" headers="r1c1-t4">
<p><a href="#BACEHJJI">MODIFY_SNAPSHOT_SETTINGS Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r24c1-t4 r1c2-t4">
<p>Modifies the snapshot settings</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r25c1-t4" headers="r1c1-t4">
<p><a href="#BABBIEDG">MODIFY_BASELINE_WINDOW_SIZE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r25c1-t4 r1c2-t4">
<p>Modifies the window size for the Default Moving Window Baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r26c1-t4" headers="r1c1-t4">
<p><a href="#CHDIAGAG">PURGE_SQL_DETAILS Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r26c1-t4 r1c2-t4">
<p>Purges SQL details, specifically rows from <code>WRH$_SQLTEXT</code> and <code>WRH$_SQL_PLAN</code> that do not have corresponding rows (DBID, SQL_ID) in <code>WRH$_SQLSTAT</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r27c1-t4" headers="r1c1-t4">
<p><a href="#CHDJGBFI">REMOVE_COLORED_SQL Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r27c1-t4 r1c2-t4">
<p>Removes a colored SQL ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r28c1-t4" headers="r1c1-t4">
<p><a href="#BABIJFJE">RENAME_BASELINE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r28c1-t4 r1c2-t4">
<p>Renames a baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r29c1-t4" headers="r1c1-t4">
<p><a href="#BABDIFIA">SELECT_BASELINE_METRIC Function</a></p>
</td>
<td class="cellalignment1228" headers="r29c1-t4 r1c2-t4">
<p>Shows the values of the metrics corresponding to a baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r30c1-t4" headers="r1c1-t4">
<p><a href="#CHDEEHHJ">UPDATE_OBJECT_INFO Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r30c1-t4 r1c2-t4">
<p>Updates rows of <code>WRH$_SEG_STAT_OBJ</code> table that represent objects in the local database</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS69108" class="refsect2"><a id="CHDGFJAD"></a>
<hr />
<h3 class="refsect2"><a id="sthref11914"></a>ADD_COLORED_SQL Procedure</h3>
<p>This procedure adds a colored SQL ID. If an SQL ID is colored, it will be captured in every snapshot, independent of its level of activities (so that it does not have to be a <code>TOP</code> <code>SQL</code>). Capture occurs if the SQL is found in the cursor cache at snapshot time.To uncolor the SQL, invoke the <a href="#CHDJGBFI">REMOVE_COLORED_SQL Procedure</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11915"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML(
   sql_id         IN VARCHAR2,
   dbid           IN NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11916"></a>Parameters</p>
<div id="ARPLS69109" class="tblformal">
<p class="titleintable"><a id="sthref11917"></a><a id="sthref11918"></a>Table 162-3 <span class="bolditalic">ADD_COLORED_SQL Procedure Parameters</span></p>
<table class="cellalignment1229" title="ADD_COLORED_SQL Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.ADD_COLORED_SQL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Parameter</th>
<th class="cellalignment1227" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p>13-character external SQL ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t5" headers="r1c1-t5">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c2-t5">
<p>Optional dbid, defaults to Local <code>DBID</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69110" class="refsect2"><a id="CIHDBCGJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref11919"></a>ASH_GLOBAL_REPORT_HTML Function</h3>
<p>This table function displays a global or Oracle Real Application Clusters (Oracle RAC) ASH Spot report in HTML format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11920"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.ASH_GLOBAL_REPORT_HTML(
   l_dbid          IN NUMBER,
   l_inst_num      IN VARCHAR2((1023),
   l_btime         IN DATE,
   l_etime         IN DATE,
   l_options       IN NUMBER    DEFAULT 0,
   l_slot_width    IN NUMBER    DEFAULT 0,
   l_sid           IN NUMBER    DEFAULT NULL,
   l_sql_id        IN VARCHAR2  DEFAULT NULL,
   l_wait_class    IN VARCHAR2  DEFAULT NULL,
   l_service_hash  IN NUMBER    DEFAULT NULL,
   l_module        IN VARCHAR2  DEFAULT NULL,
   l_action        IN VARCHAR2  DEFAULT NULL,
   l_client_id     IN VARCHAR2  DEFAULT NULL,
   l_plsql_entry   IN VARCHAR2  DEFAULT NULL,
   l_data_src      IN NUMBER    DEFAULT 0)
 RETURN awrrpt_html_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11921"></a>Parameters</p>
<div id="ARPLS69111" class="tblformal">
<p class="titleintable"><a id="sthref11922"></a><a id="sthref11923"></a>Table 162-4 <span class="bolditalic">ASH_GLOBAL_REPORT_HTML Parameters</span></p>
<table class="cellalignment1229" title="ASH_GLOBAL_REPORT_HTML Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Parameter</th>
<th class="cellalignment1227" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p>List of instances (such as <code>'1,2,3'</code>), or <code>NULL</code> to report on all instances in the database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><code>l_btime</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p>The 'begin time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t6" headers="r1c1-t6">
<p><code>l_etime</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t6 r1c2-t6">
<p>The 'end time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t6" headers="r1c1-t6">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t6 r1c2-t6">
<p>Report level (currently not used)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t6" headers="r1c1-t6">
<p><code>l_slot_width</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t6 r1c2-t6">
<p>Specifies (in seconds) how wide the slots used in the "Top Activity" section of the report should be. This argument is optional, and if it is not specified the time interval between <code>l_btime</code> and <code>l_etime</code> is appropriately split into not more than 10 slots.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t6" headers="r1c1-t6">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t6 r1c2-t6">
<p>Session ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t6" headers="r1c1-t6">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t6 r1c2-t6">
<p>SQL ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t6" headers="r1c1-t6">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t6 r1c2-t6">
<p>Wait class name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t6" headers="r1c1-t6">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t6 r1c2-t6">
<p>Service name hash (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t6" headers="r1c1-t6">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t6 r1c2-t6">
<p>Module name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t6" headers="r1c1-t6">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t6 r1c2-t6">
<p>Action name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t6" headers="r1c1-t6">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t6 r1c2-t6">
<p>Client ID for end-to-end backtracing (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t6" headers="r1c1-t6">
<p><code>l_plsql_entry</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t6 r1c2-t6">
<p>PL/SQL entry point (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t6" headers="r1c1-t6">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t6 r1c2-t6">
<p>Ignored since the report works off of data on disk only</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11924"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(1500)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11925"></a>Usage Notes</p>
<ul>
<li>
<p>You can call the function directly but Oracle recommends you use the <code>ashrpti.sql</code> script which prompts users for the required information.</p>
</li>
<li>
<p>The unspecified optional arguments are used to generate an ASH Reports that specify 'report targets' such as a SQL statement, or a session, or a particular Service/Module combination. These arguments are specified to restrict the ASH rows that would be used to generate the report. For example, to generate an ASH report on a particular SQL statement, such as SQL_ID '<code>abcdefghij123</code> ' pass that <code>sql_id</code> value to the <code>l_sql_id</code> argument:</p>
<pre>
l_sql_id =&gt;  'abcdefghij123'
</pre>
<p>Any combination of those optional arguments can be passed in, and only rows in ASH that satisfy all of those 'report targets' will be used. If multiple 'report targets' are specified, <code>AND</code> conditional logic is used to connect them. For example, to generate an ASH report on <code>MODULE</code> "<code>PAYROLL</code>" and <code>ACTION</code> "<code>PROCESS</code>", use the following predicate:</p>
<pre>
l_module =&gt;  'PAYROLL', l_action =&gt;  'PROCESS'
</pre>
<p>Valid SQL wildcards can be used in all the arguments that are of type <code>VARCHAR2</code>.</p>
<div id="ARPLS69112" class="tblformal">
<p class="titleintable"><a id="sthref11926"></a><a id="sthref11927"></a>Table 162-5 ASH_GLOBAL_REPORT_HTML: Wildcards Allowed (or Not) in Arguments</p>
<table class="cellalignment1229" title="ASH_GLOBAL_REPORT_HTML: Wildcards Allowed (or Not) in Arguments" summary="This table describes whether wildcards are allowed or not in VARCHAR2 arguments of the DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Argument Name</th>
<th class="cellalignment1227" id="r1c2-t7">Comment</th>
<th class="cellalignment1227" id="r1c3-t7">Wildcard Allowed</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Session ID (for example, <code>V$SESSION.SID</code>)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c3-t7">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>SQL ID (for example, <code>V$SQL.SQL_ID</code>)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c3-t7">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>Wait class name (for example, <code>V$EVENT_NAME.WAIT_CLASS</code>)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c3-t7">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>Service name hash (for example, <code>V$ACTIVE_SERVICES.NAME_HASH</code>)</p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c3-t7">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t7" headers="r1c1-t7">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t7 r1c2-t7">
<p>Module name (for example, <code>V$SESSION.MODULE</code>)</p>
</td>
<td class="cellalignment1228" headers="r6c1-t7 r1c3-t7">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t7" headers="r1c1-t7">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t7 r1c2-t7">
<p>Action name (for example, <code>V$SESSION.ACTION</code>)</p>
</td>
<td class="cellalignment1228" headers="r7c1-t7 r1c3-t7">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t7" headers="r1c1-t7">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t7 r1c2-t7">
<p>Client ID for end-to-end backtracing (for example, <code>V$SESSION</code>.<code>CLIENT_IDENTIFIER</code>)</p>
</td>
<td class="cellalignment1228" headers="r8c1-t7 r1c3-t7">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t7" headers="r1c1-t7">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t7 r1c2-t7">
<p>Wildcards are not allowed for <code>l_data_src</code> as it is of numeric datatype</p>
</td>
<td class="cellalignment1228" headers="r9c1-t7 r1c3-t7">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72971" class="refsect2"><a id="CHDEFFAD"></a>
<hr />
<h3 class="refsect2"><a id="sthref11928"></a>ASH_GLOBAL_REPORT_TEXT Function</h3>
<p>This table function Displays a global or Oracle Real Application Clusters (Oracle RAC) ASH Spot report in Text format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11929"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.ASH_GLOBAL_REPORT_TEXT(
   l_dbid          IN VARCHAR2(1023),
   l_inst_num      IN NUMBER,
   l_btime         IN DATE,
   l_etime         IN DATE,
   l_options       IN NUMBER    DEFAULT 0,
   l_slot_width    IN NUMBER    DEFAULT 0,
   l_sid           IN NUMBER    DEFAULT NULL,
   l_sql_id        IN VARCHAR2  DEFAULT NULL,
   l_wait_class    IN VARCHAR2  DEFAULT NULL,
   l_service_hash  IN NUMBER    DEFAULT NULL,
   l_module        IN VARCHAR2  DEFAULT NULL,
   l_action        IN VARCHAR2  DEFAULT NULL,
   l_client_id     IN VARCHAR2  DEFAULT NULL,
   l_plsql_entry   IN VARCHAR2  DEFAULT NULL,
   l_data_src      IN NUMBER    DEFAULT 0)
 RETURN awrrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11930"></a>Parameters</p>
<div id="ARPLS72972" class="tblformal">
<p class="titleintable"><a id="sthref11931"></a><a id="sthref11932"></a>Table 162-6 <span class="bolditalic">ASH_GLOBAL_REPORT_TEXT Parameters</span></p>
<table class="cellalignment1229" title="ASH_GLOBAL_REPORT_TEXT Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Parameter</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t8" headers="r1c1-t8">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c2-t8">
<p>List of instances (such as <code>'1,2,3'</code>), or <code>NULL</code> to report on all instances in the database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t8" headers="r1c1-t8">
<p><code>l_btime</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t8 r1c2-t8">
<p>The 'begin time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t8" headers="r1c1-t8">
<p><code>l_etime</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t8 r1c2-t8">
<p>The 'end time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t8" headers="r1c1-t8">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t8 r1c2-t8">
<p>Report level (currently not used)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t8" headers="r1c1-t8">
<p><code>l_slot_width</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t8 r1c2-t8">
<p>Specifies (in seconds) how wide the slots used in the "Top Activity" section of the report should be. This argument is optional, and if it is not specified the time interval between <code>l_btime</code> and <code>l_etime</code> is appropriately split into not more than 10 slots.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t8" headers="r1c1-t8">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t8 r1c2-t8">
<p>Session ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t8" headers="r1c1-t8">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t8 r1c2-t8">
<p>SQL ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t8" headers="r1c1-t8">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t8 r1c2-t8">
<p>Wait class name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t8" headers="r1c1-t8">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t8 r1c2-t8">
<p>Service name hash (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t8" headers="r1c1-t8">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t8 r1c2-t8">
<p>Module name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t8" headers="r1c1-t8">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t8 r1c2-t8">
<p>Action name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t8" headers="r1c1-t8">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t8 r1c2-t8">
<p>Client ID for end-to-end backtracing (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t8" headers="r1c1-t8">
<p><code>l_plsql_entry</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t8 r1c2-t8">
<p>PL/SQL entry point (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t8" headers="r1c1-t8">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t8 r1c2-t8">
<p>Ignored since the report works off of data on disk only</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11933"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(320)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11934"></a>Usage Notes</p>
<ul>
<li>
<p>You can call the function directly but Oracle recommends you use the <code>ashrpti.sql</code> script which prompts users for the required information.</p>
</li>
<li>
<p>The unspecified optional arguments are used to generate an ASH Reports that specify 'report targets' such as a SQL statement, or a session, or a particular Service/Module combination. These arguments are specified to restrict the ASH rows that would be used to generate the report. For example, to generate an ASH report on a particular SQL statement, such as SQL_ID '<code>abcdefghij123</code> ' pass that sql_id value to the <code>l_sql_id</code> argument:</p>
<pre>
l_sql_id =&gt;  'abcdefghij123'
</pre>
<div id="ARPLS72973" class="tblformal">
<p class="titleintable"><a id="sthref11935"></a><a id="sthref11936"></a>Table 162-7 ASH_GLOBAL_REPORT_TEXT: Wildcards Allowed (or Not) in Arguments</p>
<table class="cellalignment1229" title="ASH_GLOBAL_REPORT_TEXT: Wildcards Allowed (or Not) in Arguments" summary="This table describes whether wildcards are allowed or not in VARCHAR2 arguments of the DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Argument Name</th>
<th class="cellalignment1227" id="r1c2-t9">Comment</th>
<th class="cellalignment1227" id="r1c3-t9">Wildcard Allowed</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p>Session ID (for example, <code>V$SESSION.SID</code>)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c3-t9">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t9" headers="r1c1-t9">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c2-t9">
<p>SQL ID (for example, <code>V$SQL.SQL_ID</code>)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c3-t9">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t9" headers="r1c1-t9">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t9 r1c2-t9">
<p>Wait class name (for example, <code>V$EVENT_NAME.WAIT_CLASS</code>)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t9 r1c3-t9">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t9" headers="r1c1-t9">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t9 r1c2-t9">
<p>Service name hash (for example, <code>V$ACTIVE_SERVICES.NAME_HASH</code>)</p>
</td>
<td class="cellalignment1228" headers="r5c1-t9 r1c3-t9">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t9" headers="r1c1-t9">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t9 r1c2-t9">
<p>Module name (for example, <code>V$SESSION.MODULE</code>)</p>
</td>
<td class="cellalignment1228" headers="r6c1-t9 r1c3-t9">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t9" headers="r1c1-t9">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t9 r1c2-t9">
<p>Action name (for example, <code>V$SESSION.ACTION</code>)</p>
</td>
<td class="cellalignment1228" headers="r7c1-t9 r1c3-t9">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t9" headers="r1c1-t9">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t9 r1c2-t9">
<p>Client ID for end-to-end backtracing (for example, <code>V$SESSION.CLIENT_IDENTIFIER</code>)</p>
</td>
<td class="cellalignment1228" headers="r8c1-t9 r1c3-t9">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t9" headers="r1c1-t9">
<p><code>l_plsql_entry</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t9 r1c2-t9">
<p>PL/SQL entry point (for example, "<code>SYS</code>.<code>DBMS_LOB</code>.*")</p>
</td>
<td class="cellalignment1228" headers="r9c1-t9 r1c3-t9">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t9" headers="r1c1-t9">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t9 r1c2-t9">
<p>Wildcards are not allowed for <code>l_data_src</code> as it is of numeric datatype</p>
</td>
<td class="cellalignment1228" headers="r10c1-t9 r1c3-t9">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></li>
<li>
<p>Any combination of those optional arguments can be passed in, and only rows in ASH that satisfy all of those 'report targets' will be used. If multiple 'report targets' are specified, <code>AND</code> conditional logic is used to connect them. For example, to generate an ASH report on <code>MODULE</code> "<code>PAYROLL</code>" and <code>ACTION</code> "<code>PROCESS</code>", use the following predicate:</p>
<pre>
l_module =&gt;  'PAYROLL', l_action =&gt;  'PROCESS'
</pre>
<p>Valid SQL wildcards can be used in all the arguments that are of type <code>VARCHAR2</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72974" class="refsect2"><a id="CHDIEGBD"></a>
<hr />
<h3 class="refsect2"><a id="sthref11937"></a>ASH_REPORT_HTML Function</h3>
<p>This table function displays the ASH Spot report in HTML.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11938"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML(
   l_dbid          IN NUMBER,
   l_inst_num      IN NUMBER,
   l_btime         IN DATE,
   l_etime         IN DATE,
   l_options       IN NUMBER    DEFAULT 0,
   l_slot_width    IN NUMBER    DEFAULT 0,
   l_sid           IN NUMBER    DEFAULT NULL,
   l_sql_id        IN VARCHAR2  DEFAULT NULL,
   l_wait_class    IN VARCHAR2  DEFAULT NULL,
   l_service_hash  IN NUMBER    DEFAULT NULL,
   l_module        IN VARCHAR2  DEFAULT NULL,
   l_action        IN VARCHAR2  DEFAULT NULL,
   l_client_id     IN VARCHAR2  DEFAULT NULL,
   l_plsql_entry   IN VARCHAR2  DEFAULT NULL,
   l_data_src      IN NUMBER    DEFAULT 0)
 RETURN awrrpt_html_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11939"></a>Parameters</p>
<div id="ARPLS72975" class="tblformal">
<p class="titleintable"><a id="sthref11940"></a><a id="sthref11941"></a>Table 162-8 <span class="bolditalic">ASH_REPORT_HTML Parameters</span></p>
<table class="cellalignment1229" title="ASH_REPORT_HTML Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Parameter</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p>Instance number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t10" headers="r1c1-t10">
<p><code>l_btime</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c2-t10">
<p>The 'begin time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t10" headers="r1c1-t10">
<p><code>l_etime</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c2-t10">
<p>The 'end time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t10" headers="r1c1-t10">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c2-t10">
<p>Report level (currently not used)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t10" headers="r1c1-t10">
<p><code>l_slot_width</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c2-t10">
<p>Specifies (in seconds) how wide the slots used in the "Top Activity" section of the report should be. This argument is optional, and if it is not specified the time interval between <code>l_btime</code> and <code>l_etime</code> is appropriately split into not more than 10 slots.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t10" headers="r1c1-t10">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c2-t10">
<p>Session ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t10" headers="r1c1-t10">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t10 r1c2-t10">
<p>SQL ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t10" headers="r1c1-t10">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t10 r1c2-t10">
<p>Wait class name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t10" headers="r1c1-t10">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t10 r1c2-t10">
<p>Service name hash (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t10" headers="r1c1-t10">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t10 r1c2-t10">
<p>Module name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t10" headers="r1c1-t10">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t10 r1c2-t10">
<p>Action name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t10" headers="r1c1-t10">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t10 r1c2-t10">
<p>Client ID for end-to-end backtracing (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t10" headers="r1c1-t10">
<p><code>l_plsql_entry</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t10 r1c2-t10">
<p>PL/SQL entry point (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t10" headers="r1c1-t10">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t10 r1c2-t10">
<p>Can be used to specify a data source (see Usage Notes)</p>
<ul>
<li>
<p>1 =&gt; memory (<code>V$ACTIVE_SESION_HISTORY)</code></p>
</li>
<li>
<p>2 =&gt; disk (<code>DBA_HIST_ACTIVE_SESS_HISTORY</code>)</p>
</li>
<li>
<p>0 =&gt; both. This is the default value. Here, the begin and end time parameters are used to get the samples from the appropriate data source, which can be memory, disk, or both.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11942"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(500)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11943"></a>Usage Notes</p>
<ul>
<li>
<p>You can call the function directly but Oracle recommends you use the <code>ashrpti.sql</code> script which prompts users for the required information.</p>
</li>
<li>
<p>The unspecified optional arguments are used to generate an ASH Reports that specify 'report targets' such as a SQL statement, or a session, or a particular Service/Module combination. These arguments are specified to restrict the ASH rows that would be used to generate the report. For example, to generate an ASH report on a particular SQL statement, such as SQL_ID '<code>abcdefghij123</code> ' pass that <code>sql_id</code> value to the <code>l_sql_id</code> argument:</p>
<pre>
l_sql_id =&gt;  'abcdefghij123'
</pre>
<p>Any combination of those optional arguments can be passed in, and only rows in ASH that satisfy all of those 'report targets' will be used. If multiple 'report targets' are specified, <code>AND</code> conditional logic is used to connect them. For example, to generate an ASH report on <code>MODULE</code> "<code>PAYROLL</code>" and <code>ACTION</code> "<code>PROCESS</code>", use the following predicate:</p>
<pre>
l_module =&gt;  'PAYROLL', l_action =&gt;  'PROCESS'
</pre>
<p>Valid SQL wildcards can be used in all the arguments that are of type <code>VARCHAR2</code>.</p>
<div id="ARPLS72976" class="tblformal">
<p class="titleintable"><a id="sthref11944"></a><a id="sthref11945"></a>Table 162-9 ASH_REPORT_HTML: Wildcards Allowed (or Not) in Arguments</p>
<table class="cellalignment1229" title="ASH_REPORT_HTML: Wildcards Allowed (or Not) in Arguments" summary="This table describes whether wildcards are allowed or not in VARCHAR2 arguments of the DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Argument Name</th>
<th class="cellalignment1227" id="r1c2-t11">Comment</th>
<th class="cellalignment1227" id="r1c3-t11">Wildcard Allowed</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>Session ID (for example, <code>V$SESSION.SID</code>)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c3-t11">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t11" headers="r1c1-t11">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c2-t11">
<p>SQL ID (for example, <code>V$SQL.SQL_ID</code>)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t11 r1c3-t11">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t11" headers="r1c1-t11">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t11 r1c2-t11">
<p>Wait class name (for example, <code>V$EVENT_NAME.WAIT_CLASS</code>)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t11 r1c3-t11">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t11" headers="r1c1-t11">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t11 r1c2-t11">
<p>Service name hash (for example, <code>V$ACTIVE_SERVICES.NAME_HASH</code>)</p>
</td>
<td class="cellalignment1228" headers="r5c1-t11 r1c3-t11">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t11" headers="r1c1-t11">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t11 r1c2-t11">
<p>Module name (for example, <code>V$SESSION.MODULE</code>)</p>
</td>
<td class="cellalignment1228" headers="r6c1-t11 r1c3-t11">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t11" headers="r1c1-t11">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t11 r1c2-t11">
<p>Action name (for example, <code>V$SESSION.ACTION</code>)</p>
</td>
<td class="cellalignment1228" headers="r7c1-t11 r1c3-t11">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t11" headers="r1c1-t11">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t11 r1c2-t11">
<p>Client ID for end-to-end backtracing (for example, <code>V$SESSION</code>.<code>CLIENT_IDENTIFIER</code>)</p>
</td>
<td class="cellalignment1228" headers="r8c1-t11 r1c3-t11">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t11" headers="r1c1-t11">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t11 r1c2-t11">
<p>Wildcards are not allowed for <code>l_data_src</code> as it is of numeric datatype</p>
</td>
<td class="cellalignment1228" headers="r9c1-t11 r1c3-t11">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69113" class="refsect2"><a id="CIHBAFCB"></a>
<hr />
<h3 class="refsect2"><a id="sthref11946"></a>ASH_REPORT_TEXT Function</h3>
<p>This table function displays the ASH Spot report in text.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11947"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT(
   l_dbid          IN NUMBER,
   l_inst_num      IN NUMBER,
   l_btime         IN DATE,
   l_etime         IN DATE,
   l_options       IN NUMBER    DEFAULT 0,
   l_slot_width    IN NUMBER    DEFAULT 0,
   l_sid           IN NUMBER    DEFAULT NULL,
   l_sql_id        IN VARCHAR2  DEFAULT NULL,
   l_wait_class    IN VARCHAR2  DEFAULT NULL,
   l_service_hash  IN NUMBER    DEFAULT NULL,
   l_module        IN VARCHAR2  DEFAULT NULL,
   l_action        IN VARCHAR2  DEFAULT NULL,
   l_client_id     IN VARCHAR2  DEFAULT NULL,
   l_plsql_entry   IN VARCHAR2  DEFAULT NULL,
   l_data_src      IN NUMBER    DEFAULT 0)
 RETURN awrrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11948"></a>Parameters</p>
<div id="ARPLS69114" class="tblformal">
<p class="titleintable"><a id="sthref11949"></a><a id="sthref11950"></a>Table 162-10 <span class="bolditalic">ASH_REPORT_TEXT Parameters</span></p>
<table class="cellalignment1229" title="ASH_REPORT_TEXT Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>Instance number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t12" headers="r1c1-t12">
<p><code>l_btime</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t12 r1c2-t12">
<p>The 'begin time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t12" headers="r1c1-t12">
<p><code>l_etime</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t12 r1c2-t12">
<p>The 'end time'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t12" headers="r1c1-t12">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t12 r1c2-t12">
<p>Report level (currently not used)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t12" headers="r1c1-t12">
<p><code>l_slot_width</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t12 r1c2-t12">
<p>Specifies (in seconds) how wide the slots used in the "Top Activity" section of the report should be. This argument is optional, and if it is not specified the time interval between <code>l_btime</code> and <code>l_etime</code> is appropriately split into not more than 10 slots.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t12" headers="r1c1-t12">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t12 r1c2-t12">
<p>Session ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t12" headers="r1c1-t12">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t12 r1c2-t12">
<p>SQL ID (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t12" headers="r1c1-t12">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t12 r1c2-t12">
<p>Wait class name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t12" headers="r1c1-t12">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t12 r1c2-t12">
<p>Service name hash (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t12" headers="r1c1-t12">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t12 r1c2-t12">
<p>Module name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t12" headers="r1c1-t12">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t12 r1c2-t12">
<p>Action name (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t12" headers="r1c1-t12">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t12 r1c2-t12">
<p>Client ID for end-to-end backtracing (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t12" headers="r1c1-t12">
<p><code>l_plsql_entry</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t12 r1c2-t12">
<p>PL/SQL entry point (see Usage Notes)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t12" headers="r1c1-t12">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t12 r1c2-t12">
<p>Can be used to specify a data source (see Usage Notes)</p>
<ul>
<li>
<p>1 =&gt; memory (<code>V$ACTIVE_SESION_HISTORY)</code></p>
</li>
<li>
<p>2 =&gt; disk (<code>DBA_HIST_ACTIVE_SESS_HISTORY</code>)</p>
</li>
<li>
<p>0 =&gt; both. This is the default value. Here, the begin and end time parameters are used to get the samples from the appropriate data source, which can be memory, disk, or both.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11951"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(80)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11952"></a>Usage Notes</p>
<ul>
<li>
<p>You can call the function directly but Oracle recommends you use the <code>ashrpti.sql</code> script which prompts users for the required information.</p>
</li>
<li>
<p>By default, the report uses the begin and end time parameters (<code>l_btime</code> and <code>l_etime</code>, respectively) to find all rows in that time range either from memory, or disk, or both. However, using <code>l_data_src</code>, one can explicitly specify one of those data sources. For example, to generate an ASH report on all rows between <code>l_btime</code> and <code>l_time</code> found in memory, use</p>
<pre>
l_data_src =&gt;  1
</pre>
<p>Similarly, to generate a report on samples found only on disk, use</p>
<pre>
l_data_src =&gt; 2
</pre></li>
<li>
<p>The unspecified optional arguments are used to generate an ASH Reports that specify 'report targets' such as a SQL statement, or a session, or a particular Service/Module combination. These arguments are specified to restrict the ASH rows that would be used to generate the report. For example, to generate an ASH report on a particular SQL statement, such as SQL_ID '<code>abcdefghij123</code> ' pass that sql_id value to the <code>l_sql_id</code> argument:</p>
<pre>
l_sql_id =&gt;  'abcdefghij123'
</pre>
<div id="ARPLS69115" class="tblformal">
<p class="titleintable"><a id="sthref11953"></a><a id="sthref11954"></a>Table 162-11 ASH_REPORT_TEXT: Wildcards Allowed (or Not) in Arguments</p>
<table class="cellalignment1229" title="ASH_REPORT_TEXT: Wildcards Allowed (or Not) in Arguments" summary="This table describes whether wildcards are allowed or not in VARCHAR2 arguments of the DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t13">Argument Name</th>
<th class="cellalignment1227" id="r1c2-t13">Comment</th>
<th class="cellalignment1227" id="r1c3-t13">Wildcard Allowed</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t13" headers="r1c1-t13">
<p><code>l_sid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c2-t13">
<p>Session ID (for example, <code>V$SESSION.SID</code>)</p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c3-t13">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t13" headers="r1c1-t13">
<p><code>l_sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t13 r1c2-t13">
<p>SQL ID (for example, <code>V$SQL.SQL_ID</code>)</p>
</td>
<td class="cellalignment1228" headers="r3c1-t13 r1c3-t13">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t13" headers="r1c1-t13">
<p><code>l_wait_class</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t13 r1c2-t13">
<p>Wait class name (for example, <code>V$EVENT_NAME.WAIT_CLASS</code>)</p>
</td>
<td class="cellalignment1228" headers="r4c1-t13 r1c3-t13">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t13" headers="r1c1-t13">
<p><code>l_service_hash</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t13 r1c2-t13">
<p>Service name hash (for example, <code>V$ACTIVE_SERVICES.NAME_HASH</code>)</p>
</td>
<td class="cellalignment1228" headers="r5c1-t13 r1c3-t13">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t13" headers="r1c1-t13">
<p><code>l_module</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t13 r1c2-t13">
<p>Module name (for example, <code>V$SESSION.MODULE</code>)</p>
</td>
<td class="cellalignment1228" headers="r6c1-t13 r1c3-t13">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t13" headers="r1c1-t13">
<p><code>l_action</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t13 r1c2-t13">
<p>Action name (for example, <code>V$SESSION.ACTION</code>)</p>
</td>
<td class="cellalignment1228" headers="r7c1-t13 r1c3-t13">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t13" headers="r1c1-t13">
<p><code>l_client_id</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t13 r1c2-t13">
<p>Client ID for end-to-end backtracing (for example, <code>V$SESSION.CLIENT_IDENTIFIER</code>)</p>
</td>
<td class="cellalignment1228" headers="r8c1-t13 r1c3-t13">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t13" headers="r1c1-t13">
<p><code>l_plsql_entry</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t13 r1c2-t13">
<p>PL/SQL entry point (for example, "<code>SYS</code>.<code>DBMS_LOB</code>.*")</p>
</td>
<td class="cellalignment1228" headers="r9c1-t13 r1c3-t13">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t13" headers="r1c1-t13">
<p><code>l_data_src</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t13 r1c2-t13">
<p>Wildcards are not allowed for <code>l_data_src</code> as it is of numeric datatype</p>
</td>
<td class="cellalignment1228" headers="r10c1-t13 r1c3-t13">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></li>
<li>
<p>Any combination of those optional arguments can be passed in, and only rows in ASH that satisfy all of those 'report targets' will be used. If multiple 'report targets' are specified, <code>AND</code> conditional logic is used to connect them. For example, to generate an ASH report on <code>MODULE</code> "<code>PAYROLL</code>" and <code>ACTION</code> "<code>PROCESS</code>", use the following predicate:</p>
<pre>
l_module =&gt;  'PAYROLL', l_action =&gt;  'PROCESS'
</pre>
<p>Valid SQL wildcards can be used in all the arguments that are of type <code>VARCHAR2</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69116" class="refsect2"><a id="CIHGFGBG"></a>
<hr />
<h3 class="refsect2"><a id="sthref11955"></a>AWR_DIFF_REPORT_HTML Function</h3>
<p>This table function displays the AWR Compare Periods report in HTML.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11956"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_DIFF_REPORT_HTML(
   dbid1     IN NUMBER,
   inst_num1 IN NUMBER,
   bid1      IN NUMBER,
   eid1      IN NUMBER,
   dbid2     IN NUMBER,
   inst_num2 IN NUMBER,
   bid2      IN NUMBER,
   eid2      IN NUMBER)
  RETURN awrdrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11957"></a>Parameters</p>
<div id="ARPLS69117" class="tblformal">
<p class="titleintable"><a id="sthref11958"></a><a id="sthref11959"></a>Table 162-12 <span class="bolditalic">AWR_DIFF_REPORT_HTML Parameters</span></p>
<table class="cellalignment1229" title="AWR_DIFF_REPORT_HTML Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_DIFF_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>dbid</code>1</p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>1st database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t14" headers="r1c1-t14">
<p><code>inst_num</code>1</p>
</td>
<td class="cellalignment1228" headers="r3c1-t14 r1c2-t14">
<p>1st <code>instance number</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t14" headers="r1c1-t14">
<p><code>bid</code>1</p>
</td>
<td class="cellalignment1228" headers="r4c1-t14 r1c2-t14">
<p>1st '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t14" headers="r1c1-t14">
<p><code>eid</code>1</p>
</td>
<td class="cellalignment1228" headers="r5c1-t14 r1c2-t14">
<p>1st '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t14" headers="r1c1-t14">
<p><code>dbid</code>2</p>
</td>
<td class="cellalignment1228" headers="r6c1-t14 r1c2-t14">
<p>2nd database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t14" headers="r1c1-t14">
<p><code>inst_num</code>2</p>
</td>
<td class="cellalignment1228" headers="r7c1-t14 r1c2-t14">
<p>2nd <code>instance number</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t14" headers="r1c1-t14">
<p><code>bid</code>2</p>
</td>
<td class="cellalignment1228" headers="r8c1-t14 r1c2-t14">
<p>2nd '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t14" headers="r1c1-t14">
<p><code>eid</code>2</p>
</td>
<td class="cellalignment1228" headers="r9c1-t14 r1c2-t14">
<p>2nd '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11960"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(500)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11961"></a>Usage Notes</p>
<p>You can call the function directly but Oracle recommends you use the <code>awrddrpt.sql</code> script which prompts users for the required information.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69118" class="refsect2"><a id="CIHHBHCJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref11962"></a>AWR_DIFF_REPORT_TEXT Function</h3>
<p>This table function displays the AWR Compare Periods report in text.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11963"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_DIFF_REPORT_TEXT(
   dbid1     IN NUMBER,
   inst_num1 IN NUMBER,
   bid1      IN NUMBER,
   eid1      IN NUMBER,
   dbid2     IN NUMBER,
   inst_num2 IN NUMBER,
   bid2      IN NUMBER,
   eid2      IN NUMBER)
  RETURN awrdrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11964"></a>Parameters</p>
<div id="ARPLS69119" class="tblformal">
<p class="titleintable"><a id="sthref11965"></a><a id="sthref11966"></a>Table 162-13 <span class="bolditalic">AWR_DIFF_REPORT_TEXT Parameters</span></p>
<table class="cellalignment1229" title="AWR_DIFF_REPORT_TEXT Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_DIFF_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>dbid</code>1</p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>1st database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t15" headers="r1c1-t15">
<p><code>inst_num</code>1</p>
</td>
<td class="cellalignment1228" headers="r3c1-t15 r1c2-t15">
<p>1st <code>instance number</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t15" headers="r1c1-t15">
<p><code>bid</code>1</p>
</td>
<td class="cellalignment1228" headers="r4c1-t15 r1c2-t15">
<p>1st '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t15" headers="r1c1-t15">
<p><code>eid</code>1</p>
</td>
<td class="cellalignment1228" headers="r5c1-t15 r1c2-t15">
<p>1st '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t15" headers="r1c1-t15">
<p><code>dbid</code>2</p>
</td>
<td class="cellalignment1228" headers="r6c1-t15 r1c2-t15">
<p>2nd database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t15" headers="r1c1-t15">
<p><code>inst_num</code>2</p>
</td>
<td class="cellalignment1228" headers="r7c1-t15 r1c2-t15">
<p>2nd <code>instance number</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t15" headers="r1c1-t15">
<p><code>bid</code>2</p>
</td>
<td class="cellalignment1228" headers="r8c1-t15 r1c2-t15">
<p>2nd '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t15" headers="r1c1-t15">
<p><code>eid</code>2</p>
</td>
<td class="cellalignment1228" headers="r9c1-t15 r1c2-t15">
<p>2nd '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11967"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(500)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11968"></a>Usage Notes</p>
<p>You can call the function directly but Oracle recommends you use the <code>awrddrpt.sql</code> script which prompts users for the required information.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS71994" class="refsect2"><a id="CHDIEIEA"></a>
<hr />
<h3 class="refsect2"><a id="sthref11969"></a>AWR_GLOBAL_DIFF_REPORT_HTML Functions</h3>
<p>This table function displays Global AWR Compare Periods Report in HTML format.</p>
<p>The first overload accepts comma-separated lists of instance numbers for <code>inst_num1</code> and <code>inst_num2</code>. No leading zeroes are allowed and there is a limit of 1023 characters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11970"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_DIFF_REPORT_HTML (
   dbid1        IN    NUMBER,
   inst_num1    IN    AWRRPT_INSTANCE_LIST_TYPE,
   bid1         IN    NUMBER,
   eid1         IN    NUMBER,
   dbid2        IN    NUMBER,
   inst_num2    IN    AWRRPT_INSTANCE_LIST_TYPE,
   bid2         IN    NUMBER,
   eid2         IN    NUMBER)
  RETURN awrrpt_html_type_table PIPELINED;

DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_DIFF_REPORT_HTML (
   dbid1        IN    NUMBER,
   inst_num1    IN    VARCHAR2,
   bid1         IN    NUMBER,
   eid1         IN    NUMBER,
   dbid2        IN    NUMBER,
   inst_num2    IN    VARCHAR2,
   bid2         IN    NUMBER,
   eid2         IN    NUMBER)
  RETURN awrrpt_html_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11971"></a>Parameters</p>
<div id="ARPLS71995" class="tblformal">
<p class="titleintable"><a id="sthref11972"></a><a id="sthref11973"></a>Table 162-14 <span class="bolditalic">AWR_GLOBAL_DIFF_REPORT_HTML Function Parameters</span></p>
<table class="cellalignment1229" title="AWR_GLOBAL_DIFF_REPORT_HTML Function Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_DIFF_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Parameter</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>dbid</code>1</p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>1st database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t16" headers="r1c1-t16">
<p><code>inst_num</code>1</p>
</td>
<td class="cellalignment1228" headers="r3c1-t16 r1c2-t16">
<p>1st list of instance numbers. If set to <code>NULL</code>, all instances for which begin and end snapshots are available, and which have not been restarted between snapshots, will be included in the report.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t16" headers="r1c1-t16">
<p>bid1</p>
</td>
<td class="cellalignment1228" headers="r4c1-t16 r1c2-t16">
<p>1st Begin Snap ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t16" headers="r1c1-t16">
<p><code>eid</code>1</p>
</td>
<td class="cellalignment1228" headers="r5c1-t16 r1c2-t16">
<p>1st End Snapshot ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t16" headers="r1c1-t16">
<p><code>dbid</code>2</p>
</td>
<td class="cellalignment1228" headers="r6c1-t16 r1c2-t16">
<p>2nd database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t16" headers="r1c1-t16">
<p><code>inst_num</code>2</p>
</td>
<td class="cellalignment1228" headers="r7c1-t16 r1c2-t16">
<p>2nd list of instance numbers to be included in report. If set to <code>NULL</code>, all instances for which begin and end snapshots are available, and which have not been restarted between snapshots, will be included in the report.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t16" headers="r1c1-t16">
<p>bid2</p>
</td>
<td class="cellalignment1228" headers="r8c1-t16 r1c2-t16">
<p>2nd Begin Snap ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t16" headers="r1c1-t16">
<p><code>eid</code>2</p>
</td>
<td class="cellalignment1228" headers="r9c1-t16 r1c2-t16">
<p>2nd End Snapshot ID</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11974"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(1500)</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS71996" class="refsect2"><a id="CHDJAJGE"></a>
<hr />
<h3 class="refsect2"><a id="sthref11975"></a>AWR_GLOBAL_DIFF_REPORT_TEXT Functions</h3>
<p>This table function displays Global AWR Compare Periods Report in text format.</p>
<p>The first overload accepts comma-separated lists of instance numbers for <code>inst_num1</code> and <code>inst_num2</code>. No leading zeroes are allowed and there is a limit of 1023 characters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11976"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_DIFF_REPORT_TEXT (
   dbid1        IN    NUMBER,
   inst_num1    IN    AWRRPT_INSTANCE_LIST_TYPE,
   bid1         IN    NUMBER,
   eid1         IN    NUMBER,
   dbid2        IN    NUMBER,
   inst_num2    IN    AWRRPT_INSTANCE_LIST_TYPE,
   bid2         IN    NUMBER,
   eid2         IN    NUMBER)
  RETURN awrdrpt_text_type_table PIPELINED;

DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_DIFF_REPORT_TEXT (
   dbid1        IN    NUMBER,
   inst_num1    IN    VARCHAR2,
   bid1         IN    NUMBER,
   eid1         IN    NUMBER,
   dbid2        IN    NUMBER,
   inst_num2    IN    VARCHAR2,
   bid2         IN    NUMBER,
   eid2         IN    NUMBER)
  RETURN awrdrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11977"></a>Parameters</p>
<div id="ARPLS71997" class="tblformal">
<p class="titleintable"><a id="sthref11978"></a><a id="sthref11979"></a>Table 162-15 <span class="bolditalic"><a id="sthref11980"></a>AWR_GLOBAL_DIFF_REPORT_TEXT Functions Parameters</span></p>
<table class="cellalignment1229" title="AWR_GLOBAL_DIFF_REPORT_TEXT Functions Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_DIFF_REPORT_TEXT Functions subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t17">Parameter</th>
<th class="cellalignment1227" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t17" headers="r1c1-t17">
<p><code>dbid</code>1</p>
</td>
<td class="cellalignment1228" headers="r2c1-t17 r1c2-t17">
<p>1st database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t17" headers="r1c1-t17">
<p><code>inst_num</code>1</p>
</td>
<td class="cellalignment1228" headers="r3c1-t17 r1c2-t17">
<p>1st list of instance numbers. If set to <code>NULL</code>, all instances for which begin and end snapshots are available, and which have not been restarted between snapshots, will be included in the report.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t17" headers="r1c1-t17">
<p>bid1</p>
</td>
<td class="cellalignment1228" headers="r4c1-t17 r1c2-t17">
<p>1st Begin Snap ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t17" headers="r1c1-t17">
<p><code>eid</code>1</p>
</td>
<td class="cellalignment1228" headers="r5c1-t17 r1c2-t17">
<p>1st End Snapshot ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t17" headers="r1c1-t17">
<p><code>dbid</code>2</p>
</td>
<td class="cellalignment1228" headers="r6c1-t17 r1c2-t17">
<p>2nd database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t17" headers="r1c1-t17">
<p><code>inst_num</code>2</p>
</td>
<td class="cellalignment1228" headers="r7c1-t17 r1c2-t17">
<p>2nd list of instance numbers to be included in report. If set to <code>NULL</code>, all instances for which begin and end snapshots are available, and which have not been restarted between snapshots, will be included in the report.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t17" headers="r1c1-t17">
<p>bid2</p>
</td>
<td class="cellalignment1228" headers="r8c1-t17 r1c2-t17">
<p>2nd Begin Snap ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t17" headers="r1c1-t17">
<p><code>eid</code>2</p>
</td>
<td class="cellalignment1228" headers="r9c1-t17 r1c2-t17">
<p>2nd End Snapshot ID</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11981"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(320)</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS71998" class="refsect2"><a id="CHDGGHBG"></a>
<hr />
<h3 class="refsect2"><a id="sthref11982"></a>AWR_GLOBAL_REPORT_HTML Functions</h3>
<p>This table function displays the Global AWR report in HTML.</p>
<p>The first overload accepts a comma-separated list of instance numbers. No leading zeroes are allowed and there is a limit of 1023 characters.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11983"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_REPORT_HTML (
   l_dbid        IN    NUMBER,
   l_inst_num    IN    AWRRPT_INSTANCE_LIST_TYPE,   l_bid         IN    NUMBER,
   l_eid         IN    NUMBER,
   l_options     IN    NUMBER DEFAULT 0)
  RETURN awrrpt_html_type_table PIPELINED;

DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_REPORT_HTML (
   l_dbid       IN    NUMBER,
   l_inst_num   IN    VARCHAR2,   l_bid        IN    NUMBER,
   l_eid        IN    NUMBER,
   l_options    IN    NUMBER DEFAULT 0)
  RETURN awrrpt_html_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11984"></a>Parameters</p>
<div id="ARPLS71999" class="tblformal">
<p class="titleintable"><a id="sthref11985"></a><a id="sthref11986"></a>Table 162-16 <span class="bolditalic">AWR_GLOBAL_REPORT_HTML Function Parameters</span></p>
<table class="cellalignment1229" title="AWR_GLOBAL_REPORT_HTML Function Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>List of instance numbers to be included in report. If set to <code>NULL</code>, all instances for which begin and end snapshots are available, and which have not been restarted between snapshots, will be included in the report.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t18" headers="r1c1-t18">
<p><code>l_bid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t18 r1c2-t18">
<p>Begin Snap ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t18" headers="r1c1-t18">
<p><code>l_eid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t18 r1c2-t18">
<p>End Snapshot ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t18" headers="r1c1-t18">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t18 r1c2-t18">
<p>Report level (currently not used)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11987"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2</code><code>(1500)</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS72000" class="refsect2"><a id="CHDGEAEG"></a>
<hr />
<h3 class="refsect2"><a id="sthref11988"></a>AWR_GLOBAL_REPORT_TEXT Functions</h3>
<p>This table function displays the Global AWR report in text.</p>
<p>The first overload accepts a comma-separated list of instance numbers. No leading zeroes are allowed and there is a limit of 1023 characters</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11989"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_REPORT_TEXT(
   l_dbid        IN    NUMBER,
   l_inst_num    IN    AWRRPT_INSTANCE_LIST_TYPE,
   l_bid         IN    NUMBER,
   l_eid         IN    NUMBER,
   l_options     IN    NUMBER DEFAULT 0)
  RETURN awrdrpt_text_type_table PIPELINED;

DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_REPORT_TEXT(
   l_dbid       IN    NUMBER,
   l_inst_num   IN    VARCHAR2,
   l_bid        IN    NUMBER,
   l_eid        IN    NUMBER,
   l_options    IN    NUMBER DEFAULT 0)
  RETURN awrdrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11990"></a>Parameters</p>
<div id="ARPLS72001" class="tblformal">
<p class="titleintable"><a id="sthref11991"></a><a id="sthref11992"></a>Table 162-17 <span class="bolditalic">AWR_GLOBAL_REPORT_TEXT Function Parameters</span></p>
<table class="cellalignment1229" title="AWR_GLOBAL_REPORT_TEXT Function Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_GLOBAL_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t19">Parameter</th>
<th class="cellalignment1227" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t19" headers="r1c1-t19">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t19 r1c2-t19">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t19" headers="r1c1-t19">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t19 r1c2-t19">
<p>List of instance numbers to be included in report. If set to <code>NULL</code>, all instances for which begin and end snapshots are available, and which have not been restarted between snapshots, will be included in the report.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t19" headers="r1c1-t19">
<p><code>l_bid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t19 r1c2-t19">
<p>Begin Snap ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t19" headers="r1c1-t19">
<p><code>l_eid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t19 r1c2-t19">
<p>End Snapshot ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t19" headers="r1c1-t19">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t19 r1c2-t19">
<p>A flag to specify to control the output of the report. Currently, not used.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11993"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2</code><code>(320)</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69120" class="refsect2"><a id="i1004015"></a>
<hr />
<h3 class="refsect2"><a id="sthref11994"></a>AWR_REPORT_HTML Function</h3>
<p>This table function displays the AWR report in HTML.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11995"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_REPORT_HTML(
   l_dbid       IN    NUMBER,
   l_inst_num   IN    NUMBER,
   l_bid        IN    NUMBER,
   l_eid        IN    NUMBER,
   l_options    IN    NUMBER DEFAULT 0)
 RETURN awrrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11996"></a>Parameters</p>
<div id="ARPLS69121" class="tblformal">
<p class="titleintable"><a id="sthref11997"></a><a id="sthref11998"></a>Table 162-18 <span class="bolditalic">AWR_REPORT_HTML Parameters</span></p>
<table class="cellalignment1229" title="AWR_REPORT_HTML Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t20">Parameter</th>
<th class="cellalignment1227" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t20" headers="r1c1-t20">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t20 r1c2-t20">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t20" headers="r1c1-t20">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t20 r1c2-t20">
<p>Instance number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t20" headers="r1c1-t20">
<p><code>l_bid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t20 r1c2-t20">
<p>The '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t20" headers="r1c1-t20">
<p><code>l_eid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t20 r1c2-t20">
<p>The '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t20" headers="r1c1-t20">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t20 r1c2-t20">
<p>A flag to specify to control the output of the report. Currently, Oracle supports one value:</p>
<ul>
<li>
<p><code>l_options - 8</code>. Displays the ADDM specific portions of the report. These sections include the Buffer Pool Advice, Shared Pool Advice, and PGA Target Advice.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref11999"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(1500)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12000"></a>Usage Notes</p>
<p>You can call the function directly but Oracle recommends you use the <code>awrrpt.sql</code> script which prompts users for the required information.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69122" class="refsect2"><a id="i1004016"></a>
<hr />
<h3 class="refsect2"><a id="sthref12001"></a>AWR_REPORT_TEXT Function</h3>
<p>This table function displays the AWR report in text.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12002"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_REPORT_TEXT(
   l_dbid       IN    NUMBER,
   l_inst_num   IN    NUMBER,
   l_bid        IN    NUMBER,
   l_eid        IN    NUMBER,
   l_options    IN    NUMBER DEFAULT 0)
 RETURN awrrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12003"></a>Parameters</p>
<div id="ARPLS69123" class="tblformal">
<p class="titleintable"><a id="sthref12004"></a><a id="sthref12005"></a>Table 162-19 AWR_REPORT_TEXT Parameters</p>
<table class="cellalignment1229" title="AWR_REPORT_TEXT Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t21">Parameter</th>
<th class="cellalignment1227" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t21" headers="r1c1-t21">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t21 r1c2-t21">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t21" headers="r1c1-t21">
<p><code>l_insT_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t21 r1c2-t21">
<p>Instance number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t21" headers="r1c1-t21">
<p><code>l_bid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t21 r1c2-t21">
<p>The '<code>Begin Snapshot' ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t21" headers="r1c1-t21">
<p><code>l_eid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t21 r1c2-t21">
<p>The '<code>End Snapshot' ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t21" headers="r1c1-t21">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t21 r1c2-t21">
<p>A flag to specify to control the output of the report. Currently, Oracle supports one value:</p>
<ul>
<li>
<p><code>l_options - 8</code>. Displays the ADDM specific portions of the report. These sections include the Buffer Pool Advice, Shared Pool Advice, and PGA Target Advice.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12006"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(80)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12007"></a>Usage Notes</p>
<p>You can call the function directly but Oracle recommends you use the <code>awrrpt.sql</code> script which prompts users for the required information.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div class="refsect2"><a id="CHDFBJIG"></a>
<hr />
<h3 class="refsect2"><a id="sthref12008"></a>AWR_SET_REPORT_THRESHOLDS Procedure</h3>
<p>This procedure configure specified report thresholds, including the number of rows in the report.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12009"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_SET_REPORT_THRESHOLDS(
   top_n_events         IN   NUMBER DEFAULT NULL,
   top_n_files          IN   NUMBER DEFAULT NULL,
   top_n_segments       IN   NUMBER DEFAULT NULL,
   top_n_services       IN   NUMBER DEFAULT NULL,
   top_n_sql            IN   NUMBER DEFAULT NULL,
   top_n_sql_max        IN   NUMBER DEFAULT NULL,
   top_sql_pct          IN   NUMBER DEFAULT NULL,
   shmem_threshold      IN   NUMBER DEFAULT NULL,
   versions_threshold   IN   NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12010"></a>Parameters</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref12011"></a><a id="sthref12012"></a>Table 162-20 <span class="bolditalic">AWR_SET_REPORT_THRESHOLDS Procedure Parameters</span></p>
<table class="cellalignment1229" title="AWR_SET_REPORT_THRESHOLDS Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_SET_REPORT_THRESHOLDS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t22">Parameter</th>
<th class="cellalignment1227" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t22" headers="r1c1-t22">
<p><code>top_n_events</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t22 r1c2-t22">
<p>Number of most significant wait events to be included</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t22" headers="r1c1-t22">
<p><code>top_n_files</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t22 r1c2-t22">
<p>Number of most active files to be included</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t22" headers="r1c1-t22">
<p><code>top_n_segments</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t22 r1c2-t22">
<p>Number of most active segments to be included</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t22" headers="r1c1-t22">
<p><code>top_n_services</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t22 r1c2-t22">
<p>Number of most active services to be included</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t22" headers="r1c1-t22">
<p><code>top_n_sql</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t22 r1c2-t22">
<p>Number of most significant SQL statements to be included</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t22" headers="r1c1-t22">
<p><code>top_n_sql_max</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t22 r1c2-t22">
<p>Number of SQL statements to be included if their activity is greater than that specified by <code>top_sql_pct</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t22" headers="r1c1-t22">
<p><code>top_sql_pct</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t22 r1c2-t22">
<p>Significance threshold for SQL statements between <code>top_n_sql</code> and <code>top_n_sql_max</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t22" headers="r1c1-t22">
<p><code>shmem_threshold</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t22 r1c2-t22">
<p>Shared memory low threshold</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t22" headers="r1c1-t22">
<p><code>versions_threshold</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t22 r1c2-t22">
<p>Plan version count low threshold.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12013"></a>User Notes</p>
<ul>
<li>
<p>The effect of each setting depends on the type of report being generated as well as on the underlying AWR data. Not all settings are meaningful for each report type. Invalid settings (such as negative numbers) are ignored.</p>
</li>
<li>
<p>Settings are effective only in the context of the session that executes the <code>AWR_SET_REPORT_THRESHOLDS</code> procedure. For example, to get a report that lists top 12 segments as compared to the default, one can invoke as follows:</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_SET_REPORT_THRESHOLDS (top_n_segments=&gt;12);
</pre></li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69124" class="refsect2"><a id="CIHHJCEI"></a>
<hr />
<h3 class="refsect2"><a id="sthref12014"></a>AWR_SQL_REPORT_HTML Function</h3>
<p>This table function displays the AWR SQL Report in HTML format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12015"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_SQL_REPORT_HTML(
   l_dbid       IN    NUMBER,
   l_inst_num   IN    NUMBER,
   l_bid        IN    NUMBER,
   l_eid        IN    NUMBER,
   l_sqlid      IN    VARCHAR2,
   l_options    IN    NUMBER DEFAULT 0)
 RETURN awrrpt_html_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12016"></a>Parameters</p>
<div id="ARPLS69125" class="tblformal">
<p class="titleintable"><a id="sthref12017"></a><a id="sthref12018"></a>Table 162-21 <span class="bolditalic">AWR_SQL_REPORT_HTML Parameters</span></p>
<table class="cellalignment1229" title="AWR_SQL_REPORT_HTML Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_SQL_REPORT_HTML subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t23">Parameter</th>
<th class="cellalignment1227" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t23" headers="r1c1-t23">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t23 r1c2-t23">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t23" headers="r1c1-t23">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t23 r1c2-t23">
<p>Instance number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t23" headers="r1c1-t23">
<p><code>l_bid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t23 r1c2-t23">
<p>The '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t23" headers="r1c1-t23">
<p><code>l_eid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t23 r1c2-t23">
<p>The '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t23" headers="r1c1-t23">
<p><code>l_sqlid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t23 r1c2-t23">
<p>SQL ID of statement to be analyzed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t23" headers="r1c1-t23">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t23 r1c2-t23">
<p>A flag to specify to control the output of the report. Currently, not used.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12019"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(500)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12020"></a>Usage Notes</p>
<p>You can call the function directly but Oracle recommends you use the <code>awrsqrpt.sql</code> script which prompts users for the required information.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69126" class="refsect2"><a id="CIHBACEJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref12021"></a>AWR_SQL_REPORT_TEXT Function</h3>
<p>This table function displays the AWR SQL Report in text format.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12022"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.AWR_SQL_REPORT_TEXT(
   l_dbid       IN    NUMBER,
   l_inst_num   IN    NUMBER,
   l_bid        IN    NUMBER,
   l_eid        IN    NUMBER,
   l_sqlid      IN    VARCHAR2,
   l_options    IN    NUMBER DEFAULT 0)
 RETURN awrrpt_text_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12023"></a>Parameters</p>
<div id="ARPLS69127" class="tblformal">
<p class="titleintable"><a id="sthref12024"></a><a id="sthref12025"></a>Table 162-22 <span class="bolditalic">AWR_SQL_REPORT_TEXT Parameters</span></p>
<table class="cellalignment1229" title="AWR_SQL_REPORT_TEXT Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.AWR_SQL_REPORT_TEXT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t24">Parameter</th>
<th class="cellalignment1227" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t24" headers="r1c1-t24">
<p><code>l_dbid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t24 r1c2-t24">
<p>Database identifier</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t24" headers="r1c1-t24">
<p><code>l_inst_num</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t24 r1c2-t24">
<p>Instance number</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t24" headers="r1c1-t24">
<p><code>l_bid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t24 r1c2-t24">
<p>The '<code>Begin Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t24" headers="r1c1-t24">
<p><code>l_eid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t24 r1c2-t24">
<p>The '<code>End Snapshot'</code> <code>ID</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t24" headers="r1c1-t24">
<p><code>l_sqlid</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t24 r1c2-t24">
<p>SQL ID of statement to be analyzed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t24" headers="r1c1-t24">
<p><code>l_options</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t24 r1c2-t24">
<p>Flag to specify to control the output of the report. Currently, not used.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12026"></a>Return Values</p>
<p>The output will be one column of <code>VARCHAR2(120)</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12027"></a>Usage Notes</p>
<p>You can call the function directly but Oracle recommends you use the <code>awrsqrpt.sql</code> script which prompts users for the required information.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69128" class="refsect2"><a id="i1003628"></a>
<hr />
<h3 class="refsect2"><a id="sthref12028"></a>CREATE_BASELINE Functions &amp; Procedures</h3>
<p>This function and procedure creates a baseline.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12029"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE(
   start_snap_id    IN  NUMBER,
   end_snap_id      IN  NUMBER,
   baseline_name    IN  VARCHAR2,
   dbid             IN  NUMBER DEFAULT NULL,
   expiration       IN  NUMBER DEFAULT NULL);

DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE(
   start_snap_id    IN  NUMBER,
   end_snap_id      IN  NUMBER,
   baseline_name    IN  VARCHAR2,
   dbid             IN  NUMBER DEFAULT NULL,
   expiration       IN  NUMBER DEFAULT NULL)
 RETURN NUMBER;

DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE(
   start_time       IN  DATE,
   end_time         IN  DATE,
   baseline_name    IN  VARCHAR2,
   dbid             IN  NUMBER DEFAULT NULL,
   expiration       IN  NUMBER DEFAULT NULL);

DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE(
   start_time       IN  DATE,
   end_time         IN  DATE,
   baseline_name    IN  VARCHAR2,
   dbid             IN  NUMBER DEFAULT NULL,
   expiration       IN  NUMBER DEFAULT NULL);
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12030"></a>Parameters</p>
<div id="ARPLS69129" class="tblformal">
<p class="titleintable"><a id="sthref12031"></a><a id="sthref12032"></a>Table 162-23 CREATE_BASELINE Function &amp; Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_BASELINE Function &amp; Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t25">Parameter</th>
<th class="cellalignment1227" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t25" headers="r1c1-t25">
<p><code>start_snap_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t25 r1c2-t25">
<p>Start snapshot sequence number for the baseline'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t25" headers="r1c1-t25">
<p><code>end_snap_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t25 r1c2-t25">
<p>End snapshot sequence number for the baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t25" headers="r1c1-t25">
<p><code>start_time</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t25 r1c2-t25">
<p>Start time for the baseline'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t25" headers="r1c1-t25">
<p><code>end_time</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t25 r1c2-t25">
<p>End time for the baseline</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t25" headers="r1c1-t25">
<p><code>baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t25 r1c2-t25">
<p>Name of baseline.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t25" headers="r1c1-t25">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t25 r1c2-t25">
<p>Database Identifier for baseline. If <code>NULL</code>, this takes the database identifier for the local database. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t25" headers="r1c1-t25">
<p><code>expiration</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t25 r1c2-t25">
<p>Expiration in number of days for the baseline. If <code>NULL</code>, then expiration is infinite, meaning do not drop baseline ever. Defaults to <code>NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12033"></a>Exceptions</p>
<ul>
<li>
<p>An error will be returned if this baseline name already exists in the system.</p>
</li>
<li>
<p>The snapshot range that is specified for this interface must be an existing pair of snapshots in the database. An error will be returned if the inputted snapshots do not exist in the system.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12034"></a>Examples</p>
<p>This example creates a baseline (named '<code>oltp_peakload_bl</code>') between snapshots 105 and 107 for the local database:</p>
<pre>
EXECUTE DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE (start_snap_id =&gt; 105,
end_snap_id =&gt; 107,
baseline_name =&gt; 'oltp_peakload_bl');
</pre>
<p>If you query the <code>DBA_HIST_BASELINE</code> view after the <code>CREATE</code> <code>BASELINE</code> action, you will see the newly created baseline in the Workload Repository.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69130" class="refsect2"><a id="BABFHHJJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref12035"></a>CREATE_BASELINE_TEMPLATE Procedures</h3>
<p>This procedure specifies a template for how they would like baselines to be created for future time periods.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12036"></a>Syntax</p>
<p>Specifies a template for generating a baseline for a single time period in the future.</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE_TEMPLATE(
   start_time              IN DATE,
   end_time                IN DATE,
   baseline_name           IN VARCHAR2,
   template_name           IN VARCHAR2,
   expiration              IN NUMBER,
   dbid                    IN NUMBER DEFAULT NULL);
</pre>
<p>Specifies a template for creating and dropping baseline based on repeating time periods:</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE_TEMPLATE(
   day_of_week             IN VARCHAR2,
   hour_in_day             IN NUMBER, 
   duration                IN NUMBER,
   start_time              IN DATE,
   end_time                IN DATE,
   baseline_name_prefix    IN VARCHAR2,
   template_name           IN VARCHAR2,
   expiration              IN NUMBER,
   dbid                    IN NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12037"></a>Parameters</p>
<div id="ARPLS69131" class="tblformal">
<p class="titleintable"><a id="sthref12038"></a><a id="sthref12039"></a>Table 162-24 CREATE_BASELINE_TEMPLATE Procedure Parameters</p>
<table class="cellalignment1229" title="CREATE_BASELINE_TEMPLATE Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.CREATE_BASELINE_TEMPLATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t26">Parameter</th>
<th class="cellalignment1227" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t26" headers="r1c1-t26">
<p><code>start_time</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t26 r1c2-t26">
<p>Start Time for the baseline to be created'</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t26" headers="r1c1-t26">
<p><code>end_time</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t26 r1c2-t26">
<p>End Time for the baseline to be created</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t26" headers="r1c1-t26">
<p><code>baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t26 r1c2-t26">
<p>Name of baseline to be created</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t26" headers="r1c1-t26">
<p><code>template_name</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t26 r1c2-t26">
<p>Name for the template</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t26" headers="r1c1-t26">
<p><code>expiration</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t26 r1c2-t26">
<p>Expiration in number of days for the baseline. If <code>NULL</code>, then expiration is infinite, meaning do not drop baseline ever. Defaults to <code>NULL</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t26" headers="r1c1-t26">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t26 r1c2-t26">
<p>Database Identifier for baseline. If <code>NULL</code>, this takes the database identifier for the local database. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t26" headers="r1c1-t26">
<p><code>day_of_week</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t26 r1c2-t26">
<p>Day of week that the baseline should repeat on. Specify one of the following values: <code>SUNDAY</code>, <code>MONDAY</code>, <code>TUESDAY</code>, <code>WEDNESDAY</code>, <code>THURSDAY</code>, <code>FRIDAY</code>, <code>SATURDAY</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t26" headers="r1c1-t26">
<p><code>hour_in_day</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t26 r1c2-t26">
<p>Value of 0-23 to specify the Hour in the Day the baseline should start</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t26" headers="r1c1-t26">
<p><code>duration</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t26 r1c2-t26">
<p>Duration (in number of hours) after hour in the day that the baseline should last</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t26" headers="r1c1-t26">
<p><code>baseline_name_prefix</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t26 r1c2-t26">
<p>Name for baseline prefix. When creating the baseline, the name of the baseline will be the prefix appended with the date information.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69132" class="refsect2"><a id="BACHIHFC"></a>
<hr />
<h3 class="refsect2"><a id="sthref12040"></a>CREATE_SNAPSHOT Function and Procedure</h3>
<p>This function and procedure create snapshots. In the case of the function, the snapshot ID is returned.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12041"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT(
   flush_level IN VARCHAR2 DEFAULT 'TYPICAL');

DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT(
   flush_level IN VARCHAR2 DEFAULT 'TYPICAL')
 RETURN NUMBER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12042"></a>Parameters</p>
<div id="ARPLS69133" class="tblformal">
<p class="titleintable"><a id="sthref12043"></a><a id="sthref12044"></a>Table 162-25 CREATE_SNAPSHOT Parameters</p>
<table class="cellalignment1229" title="CREATE_SNAPSHOT Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t27">Parameter</th>
<th class="cellalignment1227" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t27" headers="r1c1-t27">
<p><code>flush_level</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t27 r1c2-t27">
<p>Flush level for the snapshot is either '<code>TYPICAL</code>' or '<code>ALL</code>'</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12045"></a>Examples</p>
<p>This example creates a manual snapshot at the <code>TYPICAL</code> level:</p>
<pre>
EXECUTE DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT();
</pre>
<p>If you query the <code>DBA_HIST_SNAPSHOT</code> view after the <code>CREATE_SNAPSHOT</code> action, you will see one more snapshot ID added to the Workload Repository.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69134" class="refsect2"><a id="i1003190"></a>
<hr />
<h3 class="refsect2"><a id="sthref12046"></a>DROP_BASELINE Procedure</h3>
<p>This procedure drops a baseline.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12047"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE(
   baseline_name  IN  VARCHAR2,
   cascade        IN  BOOLEAN DEFAULT FALSE,
   dbid           IN  NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12048"></a>Parameters</p>
<div id="ARPLS69135" class="tblformal">
<p class="titleintable"><a id="sthref12049"></a><a id="sthref12050"></a>Table 162-26 DROP_BASELINE Parameters</p>
<table class="cellalignment1229" title="DROP_BASELINE Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t28">Parameter</th>
<th class="cellalignment1227" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t28" headers="r1c1-t28">
<p><code>baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t28 r1c2-t28">
<p>Name of baseline to drop from the system</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t28" headers="r1c1-t28">
<p><code>cascade</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t28 r1c2-t28">
<p>If <code>TRUE</code>, the pair of snapshots associated with the baseline will also be dropped. Otherwise, only the baseline is removed.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t28" headers="r1c1-t28">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t28 r1c2-t28">
<p>Database Identifier for baseline. If <code>NULL</code>, this takes the database identifier for the local database. Defaults to <code>NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12051"></a>Examples</p>
<p>This example drops the baseline '<code>oltp_peakload_bl</code>' without dropping the underlying snapshots:</p>
<pre>
EXECUTE DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE (
       baseline_name =&gt; 'oltp_peakload_bl');
</pre>
<p>If you query the <code>DBA_HIST_BASELINE</code> view after the <code>DROP_BASELINE</code> action, you will see the specified baseline definition is removed. You can query the <code>DBA_HIST_SNAPSHOT</code> view to find that the underlying snapshots are left intact.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69136" class="refsect2"><a id="BABBIJBE"></a>
<hr />
<h3 class="refsect2">DROP_BASELINE_TEMPLATE Procedure</h3>
<p>This procedure removes a template that is no longer needed.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12052"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE_TEMPLATE(
   template_name           IN VARCHAR2,   dbid                    IN NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12053"></a>Parameters</p>
<div id="ARPLS69137" class="tblformal">
<p class="titleintable"><a id="sthref12054"></a><a id="sthref12055"></a>Table 162-27 DROP_BASELINE_TEMPLATE Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_BASELINE_TEMPLATE Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.DROP_BASELINE_TEMPLATE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t29">Parameter</th>
<th class="cellalignment1227" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t29" headers="r1c1-t29">
<p><code>template_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t29 r1c2-t29">
<p>Name of the template to remove</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t29" headers="r1c1-t29">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t29 r1c2-t29">
<p>Database Identifier for baseline. If <code>NULL</code>, this takes the database identifier for the local database. Defaults to <code>NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69138" class="refsect2"><a id="BACCDGDB"></a>
<hr />
<h3 class="refsect2"><a id="sthref12056"></a>DROP_SNAPSHOT_RANGE Procedure</h3>
<p>This procedure drops a range of snapshots.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12057"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.DROP_SNAPSHOT_RANGE(
   low_snap_id    IN  NUMBER,
   high_snap_id   IN  NUMBER
   dbid           IN  NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12058"></a>Parameters</p>
<div id="ARPLS69139" class="tblformal">
<p class="titleintable"><a id="sthref12059"></a><a id="sthref12060"></a>Table 162-28 DROP_SNAPSHOT_RANGE Procedure Parameters</p>
<table class="cellalignment1229" title="DROP_SNAPSHOT_RANGE Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.DROP_SNAPSHOT_RANGE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t30">Parameter</th>
<th class="cellalignment1227" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t30" headers="r1c1-t30">
<p><code>low_snap_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t30 r1c2-t30">
<p>Low snapshot id of snapshots to drop.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t30" headers="r1c1-t30">
<p><code>high_snap_id</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t30 r1c2-t30">
<p>High snapshot id of snapshots to drop.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t30" headers="r1c1-t30">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t30 r1c2-t30">
<p>Database id (default to local DBID.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12061"></a>Examples</p>
<p>This example drops the range of snapshots between snapshot id 102 to 105 for the local database:</p>
<pre>
EXECUTE DBMS_WORKLOAD_REPOSITORY.DROP_SNAPSHOT_RANGE(102, 105);
</pre>
<p>If you query the <code>dba_hist_snapshot</code> view after the <code>Drop Snapshot</code> action, you will see that snapshots 102 to 105 are removed from the Workload Repository.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69140" class="refsect2"><a id="BACEHJJI"></a>
<hr />
<h3 class="refsect2"><a id="sthref12062"></a>MODIFY_SNAPSHOT_SETTINGS Procedures</h3>
<p>This procedure controls three aspects of snapshot generation.</p>
<ul>
<li>
<p>The <code>INTERVAL</code> setting affects how often snapshots are automatically captured.</p>
</li>
<li>
<p>The <code>RETENTION</code> setting affects how long snapshots are retained in the Workload Repository.</p>
</li>
<li>
<p>The number of SQL captured for each Top criteria. If the user manually specifies a value for Top N SQL, the AWR SQL collection will use the user-specified number for both automatic and manual snapshots.</p>
</li>
</ul>
<p>There are two overloads. The first takes a <code>NUMBER</code> and the second takes a <code>VARCHAR2</code> for the <code>topnsql</code> argument. The differences are described under the Parameters description.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12063"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS(
   retention   IN  NUMBER    DEFAULT NULL,
   interval    IN  NUMBER    DEFAULT NULL,
   topnsql     IN  NUMBER    DEFAULT NULL,
   dbid        IN  NUMBER    DEFAULT NULL);

DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS(
   retention   IN  NUMBER    DEFAULT NULL,
   interval    IN  NUMBER    DEFAULT NULL,
   topnsql     IN  VARCHAR2,
   dbid        IN  NUMBER    DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12064"></a>Parameters</p>
<div id="ARPLS69141" class="tblformal">
<p class="titleintable"><a id="sthref12065"></a><a id="sthref12066"></a>Table 162-29 MODIFY_SNAPSHOT_SETTINGS Procedure Parameters</p>
<table class="cellalignment1229" title="MODIFY_SNAPSHOT_SETTINGS Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t31">Parameter</th>
<th class="cellalignment1227" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t31" headers="r1c1-t31">
<p><code>retention</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t31 r1c2-t31">
<p>New retention time (in minutes). The specified value must be in the range of <code>MIN_RETENTION</code> (1 day) to <code>MAX_RETENTION</code> (100 years).</p>
<p>If <code>ZERO</code> is specified, snapshots will be retained forever. A large system-defined value will be used as the retention setting.</p>
<p>If <code>NULL</code> is specified, the old value for retention is preserved.</p>
<p>NOTE: The retention setting must be greater than or equal to the window size of the '<code>SYSTEM_MOVING_WINDOW</code>' baseline. If the retention needs to be less than the window size, the <a href="#BABBIEDG">MODIFY_BASELINE_WINDOW_SIZE Procedure</a> can be used to adjust the window size.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t31" headers="r1c1-t31">
<p><code>interval</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t31 r1c2-t31">
<p>New interval setting between each snapshot, in units of minutes. The specified value must be in the range <code>MIN_INTERVAL</code> (10 minutes) to <code>MAX_INTERVAL</code> (1 year).</p>
<p>If <code>ZERO</code> is specified, automatic and manual snapshots will be disabled. A large system-defined value will be used as the retention setting.</p>
<p>If <code>NULL</code> is specified, the current value is preserved.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t31" headers="r1c1-t31">
<p><code>topnsql</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t31 r1c2-t31">
<ul>
<li>
<p>If <code>NUMBER</code>: Top N SQL size. The number of Top SQL to flush for each SQL criteria (Elapsed Time, CPU Time, Parse Calls, Shareable Memory, Version Count). The value for this setting will not be affected by the statistics/flush level and will override the system default behavior for the AWR SQL collection. The setting will have a minimum value of 30 and a maximum value of 50,000. Specifying <code>NULL</code> will keep the current setting.</p>
</li>
<li>
<p>If <code>VARCHAR2</code>: Users are allowed to specify the following values: (<code>DEFAULT</code>, <code>MAXIMUM</code>, <code>N</code>), where <code>N</code> is the number of Top SQL to flush for each SQL criteria. Specifying <code>DEFAULT</code> will revert the system back to the default behavior of Top 30 for statistics level <code>TYPICAL</code> and Top 100 for statistics level <code>ALL</code>. Specifying <code>MAXIMUM</code> will cause the system to capture the complete set of SQL in the cursor cache. Specifying the number <code>N</code> is equivalent to setting the Top N SQL with the <code>NUMBER</code> type. Specifying <code>NULL</code> for this argument will keep the current setting.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t31" headers="r1c1-t31">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t31 r1c2-t31">
<p>Database identifier in AWR for which to modify the snapshot settings. If <code>NULL</code> is specified, the local dbid will be used. Defaults to <code>NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12067"></a>Examples</p>
<p>This example changes the <code>interval</code> setting to one hour and the <code>retention</code> setting to two weeks for the local database:</p>
<pre>
EXECUTE DBMS_WORKLOAD_REPOSITORY.MODIFY_SNAPSHOT_SETTINGS(
  interval  =&gt;  60,
  retention =&gt;  20160);
</pre>
<p>If you query the <code>DBA_HIST_WR_CONTROL</code> table after this procedure is executed, you will see the changes to these settings.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69142" class="refsect2"><a id="BABBIEDG"></a>
<hr />
<h3 class="refsect2"><a id="sthref12068"></a>MODIFY_BASELINE_WINDOW_SIZE Procedure</h3>
<p>This procedure modifies the window size for the Default Moving Window Baseline.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12069"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.MODIFY_BASELINE_WINDOW_SIZE(
   window_size    IN   NUMBER,
   dbid           IN   NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12070"></a>Parameters</p>
<div id="ARPLS69143" class="tblformal">
<p class="titleintable"><a id="sthref12071"></a><a id="sthref12072"></a>Table 162-30 MODIFY_BASELINE_WINDOW_SIZE Procedure Parameters</p>
<table class="cellalignment1229" title="MODIFY_BASELINE_WINDOW_SIZE Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.MODIFY_BASELINE_WINDOW_SIZE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t32">Parameter</th>
<th class="cellalignment1227" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t32" headers="r1c1-t32">
<p><code>window_size</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t32 r1c2-t32">
<p>New Window size for the default Moving Window Baseline, in number of days.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t32" headers="r1c1-t32">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t32 r1c2-t32">
<p>Database ID (default to local DBID)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12073"></a>Usage Notes</p>
<p>The window size must be less than or equal to the AWR retention setting. If the window size needs to be greater than the retention setting, the <a href="#BACEHJJI">MODIFY_SNAPSHOT_SETTINGS Procedures</a> can be used to adjust the retention setting. A moving window can be set to a maximum of 13 weeks.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div class="refsect2"><a id="CHDIAGAG"></a>
<hr />
<h3 class="refsect2"><a id="sthref12074"></a>PURGE_SQL_DETAILS Procedure</h3>
<p>This procedure purges SQL details, specifically rows from <code>WRH$_SQLTEXT</code> and <code>WRH$_SQL_PLAN</code> that do not have corresponding rows (DBID, SQL_ID) in <code>WRH$_SQLSTAT</code>.</p>
<p>The subprogram calls for the DBID for which to run the purge. If the DBID is not specified, the database DBID is used. You can constrain runtime by specifying the maximum number of rows to purge per table. If no maximum is specified, the subprograms tries to purge all applicable rows.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12075"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.PURGE_SQL_DETAILS(
   numrows IN NUMBER DEFAULT NULL,   dbid    IN NUMBER DEFAULT NULL) IS              EXTERNAL 
              NAME "kewrpsd_purge_sql_details"
              WITH CONTEXT
              PARAMETERS(
                context,
                numrows      OCINUMBER,
                numrows      indicator sb4,
                dbid         OCINUMBER,
                dbid         indicator sb4)
              LIBRARY DBMS_SWRF_LIB;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12076"></a>Parameters</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref12077"></a><a id="sthref12078"></a>Table 162-31 PURGE_SQL_DETAILS Procedure Parameters</p>
<table class="cellalignment1229" title="PURGE_SQL_DETAILS Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.PURGE_SQL_DETAILS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t33">Parameter</th>
<th class="cellalignment1227" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t33" headers="r1c1-t33">
<p><code>numrows</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t33 r1c2-t33">
<p>Number of rows</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t33" headers="r1c1-t33">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t33 r1c2-t33">
<p>Database ID (default to local DBID)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69144" class="refsect2"><a id="CHDJGBFI"></a>
<hr />
<h3 class="refsect2"><a id="sthref12079"></a>REMOVE_COLORED_SQL Procedure</h3>
<p>This procedure removes a colored SQL ID. After a SQL is uncolored, it will no longer be captured in a snapshot automatically, unless it makes the <code>TOP</code> list.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12080"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.ASH_REPORT_HTML(
   sql_id         IN VARCHAR2,
   dbid           IN NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12081"></a>Parameters</p>
<div id="ARPLS69145" class="tblformal">
<p class="titleintable"><a id="sthref12082"></a><a id="sthref12083"></a>Table 162-32 <span class="bolditalic">REMOVE_COLORED_SQL Procedure Parameters</span></p>
<table class="cellalignment1229" title="REMOVE_COLORED_SQL Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.REMOVE_COLORED_SQL subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t34">Parameter</th>
<th class="cellalignment1227" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t34" headers="r1c1-t34">
<p><code>sql_id</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t34 r1c2-t34">
<p>13-character external SQL ID</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t34" headers="r1c1-t34">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t34 r1c2-t34">
<p>Optional dbid, defaults to Local <code>DBID</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69146" class="refsect2"><a id="BABIJFJE"></a>
<hr />
<h3 class="refsect2"><a id="sthref12084"></a>RENAME_BASELINE Procedure</h3>
<p>This procedure renames a baseline.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12085"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.RENAME_BASELINE(
   old_baseline_name     IN   VARCHAR2,
   new_baseline_name     IN VARCHAR2,
   dbid                  IN NUMBER DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12086"></a>Parameters</p>
<div id="ARPLS69147" class="tblformal">
<p class="titleintable"><a id="sthref12087"></a><a id="sthref12088"></a>Table 162-33 RENAME_BASELINE Procedure Parameters</p>
<table class="cellalignment1229" title="RENAME_BASELINE Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.RENAME_BASELINE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t35">Parameter</th>
<th class="cellalignment1227" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t35" headers="r1c1-t35">
<p><code>old_baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t35 r1c2-t35">
<p>Old baseline name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t35" headers="r1c1-t35">
<p><code>new_baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t35 r1c2-t35">
<p>New baseline name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t35" headers="r1c1-t35">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t35 r1c2-t35">
<p>Database ID (default to local DBID)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69148" class="refsect2"><a id="BABDIFIA"></a>
<hr />
<h3 class="refsect2"><a id="sthref12089"></a>SELECT_BASELINE_METRIC Function</h3>
<p>This table function shows the values of the metrics corresponding to a baseline. The table function will return an object of the <a href="#BABHCEHJ">AWR_BASELINE_METRIC_TYPE Object Type</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12090"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.SELECT_BASELINE_METRIC(
   baseline_name     IN VARCHAR2,
   dbid              IN NUMBER DEFAULT NULL,
   instance_num      IN NUMBER DEFAULT NULL)
 RETURN awr_baseline_metric_type_table PIPELINED;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12091"></a>Parameters</p>
<div id="ARPLS69149" class="tblformal">
<p class="titleintable"><a id="sthref12092"></a><a id="sthref12093"></a>Table 162-34 SELECT_BASELINE_METRIC Function Parameters</p>
<table class="cellalignment1229" title="SELECT_BASELINE_METRIC Function Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.SELECT_BASELINE_METRICS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t36">Parameter</th>
<th class="cellalignment1227" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t36" headers="r1c1-t36">
<p><code>baseline_name</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t36 r1c2-t36">
<p>Name of the baseline for which we would like to view metrics</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t36" headers="r1c1-t36">
<p><code>dbid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t36 r1c2-t36">
<p>Database Identifier for baseline. If <code>NULL</code>, then use the database identifier for the local database. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t36" headers="r1c1-t36">
<p><code>instance_num</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t36 r1c2-t36">
<p>Instance for which number the user wants to see statistics. If <code>NULL</code>, show statistics for the local instance. Defaults to <code>NULL</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div class="refsect2"><a id="CHDEEHHJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref12094"></a>UPDATE_OBJECT_INFO Procedure</h3>
<p>This procedure updates rows of <code>WRH$_SEG_STAT_OBJ</code> table that represent objects in the local database. It attempts to determine the current names for all object belonging to the local database, except those with <code>'MISSING'</code> and/or <code>'TRANSIENT'</code> values in the name columns. The amount of work performed at each invocation of this routine may be controlled by setting the input parameter.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12095"></a>Syntax</p>
<pre>
DBMS_WORKLOAD_REPOSITORY.UPDATE_OBJECT_INFO(
   maxrows   IN  NUMBER  DEFAULT 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12096"></a>Parameters</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref12097"></a><a id="sthref12098"></a>Table 162-35 UPDATE_OBJECT_INFO Procedure Parameters</p>
<table class="cellalignment1229" title="UPDATE_OBJECT_INFO Procedure Parameters " summary="This table describes the Parameters of DBMS_WORKLOAD_REPOSITORY.UPDATE_OBJECT_INFO subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t37">Parameter</th>
<th class="cellalignment1227" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t37" headers="r1c1-t37">
<p><code>maxrows</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t37 r1c2-t37">
<p>Maximum number of rows to be updated. Default= <code>0</code>, meaning there is no limit.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_workload_replay.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_xa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
