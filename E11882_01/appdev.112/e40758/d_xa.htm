<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_XA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:50Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_workload_repos.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_xdb.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">167/265</span> <!-- End Header -->
<div id="ARPLS209" class="chapter"><a id="CHDEHGCJ"></a>
<h1 class="chapter"><span class="secnum">163</span> DBMS_XA</h1>
<p>The <code>DBMS_XA</code> package contains the XA/Open interface for applications to call XA interface in PL/SQL. Using this package, application developers can switch or share transactions across SQL*Plus sessions or processes using PL/SQL.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Advanced Application Developer's Guide</span> for more information about <a class="olink ADFNS017" href="../../appdev.112/e41502/adfns_xa.htm#ADFNS017">"Developing Applications with Oracle XA"</a></div>
<p>The chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABEGHAD">Using DBMS_XA</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Operational Notes</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABHIIEF">Data Structures</a></p>
<ul>
<li>
<p>OBJECT Types</p>
</li>
<li>
<p>TABLE Types</p>
</li>
</ul>
</li>
<li>
<p><a href="#BABCIBED">Summary of DBMS_XA Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BABEGHAD"></a>
<hr />
<div id="ARPLS69150" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using DBMS_XA</h2>
<ul>
<li>
<p><a href="#BABJFAJH">Overview</a></p>
</li>
<li>
<p><a href="#CHDDGADI">Security Model</a></p>
</li>
<li>
<p><a href="#BABEHGGB">Constants</a></p>
</li>
<li>
<p><a href="#CHDCAHJJ">Operational Notes</a></p>
</li>
</ul>
<div id="ARPLS69151" class="refsect2"><a id="BABJFAJH"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>These subprograms allow a PL/SQL application to define a global transaction branch ID (<code>XID</code>) and associate or disassociate the current session with the transaction branch.</p>
<p>Subsequently, these transaction branches may be prepared and committed by following the two-phase commit protocol. A single-phase commit protocol is also supported if only one resource manager is involved.</p>
<p>Interfaces are also provided for a PL/SQL application to set the timeout values for any new global transaction branches that may start with the current session.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS69152" class="refsect2"><a id="CHDDGADI"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p>This package is created under <code>SYS</code>. Operations provided by this package are performed under the current calling user, not under the package owner <code>SYS</code>.Any <code>DBMS_XA</code> subprogram called from an anonymous PL/SQL block is executed using the privileges of the current user. Any <code>DBMS_XA</code> subprogram called from a stored procedure is executed using the privileges of the owner of the stored procedure.</p>
<p><code>SELECT</code> privilege on <code>SYS</code>.<code>DBA_PENDING_TRANSACTIONS</code> is required for users who need to execute <code>XA_RECOVER</code> subprogram.</p>
<p><code>FORCE</code> <code>ANY</code> <code>TRANSACTION</code> privilege is required for users who need to manipulate XA transactions created by other users.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS69153" class="refsect2"><a id="BABEHGGB"></a>
<hr />
<h3 class="refsect2">Constants</h3>
<p>The <code>DBMS_XA</code> package uses the constants shown in <a href="#BEHJAGEE">Table 163-1</a> for use in the flag field of the <a href="#BABIGHFE">XA_START Function</a> and the <a href="#BABGAGII">XA_END Function</a>.</p>
<div id="ARPLS69154" class="tblformal">
<p class="titleintable"><a id="sthref12099"></a><a id="BEHJAGEE"></a>Table 163-1 DBMS_XA Constants for Flag Field of XA_START &amp; XA_END Functions</p>
<table class="cellalignment1229" title="DBMS_XA Constants for Flag Field of XA_START &amp; XA_END Functions" summary="This table describes constants used by DBMS_XA subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t3">Name</th>
<th class="cellalignment1227" id="r1c2-t3">Type</th>
<th class="cellalignment1227" id="r1c3-t3">Value</th>
<th class="cellalignment1227" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t3" headers="r1c1-t3">
<p><code>TMNOFLAGS</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c2-t3">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c3-t3">
<p>00000000</p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c4-t3">
<p>Indicates no flag value is selected.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t3" headers="r1c1-t3">
<p><code>TMSUCCESS</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c2-t3">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c3-t3">
<p><code>UTL_RAW.CAST_TO_BINARY_INTEGER</code> ('04000000')</p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c4-t3">
<p>Dissociates caller from transaction branch</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t3" headers="r1c1-t3">
<p><code>TMJOIN</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c2-t3">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c3-t3">
<p><code>UTL_RAW.CAST_TO_BINARY_INTEGER</code> ('00200000')</p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c4-t3">
<p>Caller is joining existing transaction branch.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t3" headers="r1c1-t3">
<p><code>TMSUSPEND</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c2-t3">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c3-t3">
<p><code>UTL_RAW.CAST_TO_BINARY_INTEGER</code> ('02000000')</p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c4-t3">
<p>Caller is suspending, not ending, association</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t3" headers="r1c1-t3">
<p><code>TMRESUME</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t3 r1c2-t3">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t3 r1c3-t3">
<p><code>UTL_RAW.CAST_TO_BINARY_INTEGER</code> ('08000000')</p>
</td>
<td class="cellalignment1228" headers="r6c1-t3 r1c4-t3">
<p>Caller is resuming association with suspended transaction branch.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The <code>DBMS_XA</code> package uses the constants shown in <a href="#BABCHFEI">Table 163-2</a> for Possible Return Values</p>
<div id="ARPLS69155" class="tblformal">
<p class="titleintable"><a id="sthref12100"></a><a id="BABCHFEI"></a>Table 163-2 DBMS_XA Constants for Possible Return Values</p>
<table class="cellalignment1229" title="DBMS_XA Constants for Possible Return Values" summary="This table describes constants used by DBMS_XA subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Name</th>
<th class="cellalignment1227" id="r1c2-t4">Type</th>
<th class="cellalignment1227" id="r1c3-t4">Value</th>
<th class="cellalignment1227" id="r1c4-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>XA_RBBASE</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c3-t4">
<p>100</p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c4-t4">
<p>Inclusive lower bound of the rollback codes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>XA_RBROLLBACK</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c4-t4">
<p>Rollback was caused by an unspecified reason</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><code>XA_RBCOMMFAIL</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+1</p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c4-t4">
<p>Rollback was caused by a communication failure</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><code>XA_RBDEADLOCK</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+2</p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c4-t4">
<p>Deadlock was detected</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t4" headers="r1c1-t4">
<p><code>XA_RBINTEGRITY</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+3</p>
</td>
<td class="cellalignment1228" headers="r6c1-t4 r1c4-t4">
<p>Condition that violates the integrity of the resources was detected</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t4" headers="r1c1-t4">
<p><code>XA_RBOTHER</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+4</p>
</td>
<td class="cellalignment1228" headers="r7c1-t4 r1c4-t4">
<p>Resource manager rolled back the transaction for an unlisted reason</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t4" headers="r1c1-t4">
<p><code>XA_RBPROTO</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+5</p>
</td>
<td class="cellalignment1228" headers="r8c1-t4 r1c4-t4">
<p>Protocol error occurred in the resource manager</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t4" headers="r1c1-t4">
<p><code>XA_RBTIMEOUT</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+6</p>
</td>
<td class="cellalignment1228" headers="r9c1-t4 r1c4-t4">
<p>transaction branch took long</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t4" headers="r1c1-t4">
<p><code>XA_RBTRANSIENT</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t4 r1c3-t4">
<p><code>XA_RBBASE</code>+7</p>
</td>
<td class="cellalignment1228" headers="r10c1-t4 r1c4-t4">
<p>May retry the transaction branch</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t4" headers="r1c1-t4">
<p><code>XA_RBEND</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t4 r1c3-t4">
<p><code>XA_RBTRANSIENT</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t4 r1c4-t4">
<p>Inclusive upper bound of the rollback codes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t4" headers="r1c1-t4">
<p><code>XA_NOMIGRATE</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t4 r1c3-t4">
<p>9</p>
</td>
<td class="cellalignment1228" headers="r12c1-t4 r1c4-t4">
<p>Transaction branch may have been heuristically completed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t4" headers="r1c1-t4">
<p><code>XA_HEURHAZ</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r13c1-t4 r1c3-t4">
<p>8</p>
</td>
<td class="cellalignment1228" headers="r13c1-t4 r1c4-t4">
<p>Transaction branch may have been heuristically completed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t4" headers="r1c1-t4">
<p><code>XA_HEURCOM</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r14c1-t4 r1c3-t4">
<p>7</p>
</td>
<td class="cellalignment1228" headers="r14c1-t4 r1c4-t4">
<p>Transaction branch has been heuristically committed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t4" headers="r1c1-t4">
<p><code>XA_HEURRB</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r15c1-t4 r1c3-t4">
<p>6</p>
</td>
<td class="cellalignment1228" headers="r15c1-t4 r1c4-t4">
<p>Transaction branch has been heuristically rolled back</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t4" headers="r1c1-t4">
<p><code>XA_HEURMIX</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r16c1-t4 r1c3-t4">
<p>5</p>
</td>
<td class="cellalignment1228" headers="r16c1-t4 r1c4-t4">
<p>Some of the transaction branches have been heuristically committed, others rolled back</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r17c1-t4" headers="r1c1-t4">
<p><code>XA_RETRY</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r17c1-t4 r1c3-t4">
<p>4</p>
</td>
<td class="cellalignment1228" headers="r17c1-t4 r1c4-t4">
<p>Routine returned with no effect and may be re-issued</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r18c1-t4" headers="r1c1-t4">
<p><code>XA_RDONLY</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r18c1-t4 r1c3-t4">
<p>3</p>
</td>
<td class="cellalignment1228" headers="r18c1-t4 r1c4-t4">
<p>Transaction was read-only and has been committed</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r19c1-t4" headers="r1c1-t4">
<p><code>XA_OK</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r19c1-t4 r1c3-t4">
<p>0</p>
</td>
<td class="cellalignment1228" headers="r19c1-t4 r1c4-t4">
<p>Normal execution</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r20c1-t4" headers="r1c1-t4">
<p><code>XAER_ASYNC</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r20c1-t4 r1c3-t4">
<p>-2</p>
</td>
<td class="cellalignment1228" headers="r20c1-t4 r1c4-t4">
<p>Asynchronous operation already outstanding</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r21c1-t4" headers="r1c1-t4">
<p><code>XAER_RMERR</code></p>
</td>
<td class="cellalignment1228" headers="r21c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r21c1-t4 r1c3-t4">
<p>-3</p>
</td>
<td class="cellalignment1228" headers="r21c1-t4 r1c4-t4">
<p>Resource manager error occurred in the transaction branch</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r22c1-t4" headers="r1c1-t4">
<p><code>XAER_NOTA</code></p>
</td>
<td class="cellalignment1228" headers="r22c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r22c1-t4 r1c3-t4">
<p>-4</p>
</td>
<td class="cellalignment1228" headers="r22c1-t4 r1c4-t4">
<p>XID is not valid</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r23c1-t4" headers="r1c1-t4">
<p><code>XAER_INVAL</code></p>
</td>
<td class="cellalignment1228" headers="r23c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r23c1-t4 r1c3-t4">
<p>-5</p>
</td>
<td class="cellalignment1228" headers="r23c1-t4 r1c4-t4">
<p>Invalid arguments were given</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r24c1-t4" headers="r1c1-t4">
<p><code>XAER_PROTO</code></p>
</td>
<td class="cellalignment1228" headers="r24c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r24c1-t4 r1c3-t4">
<p>-6</p>
</td>
<td class="cellalignment1228" headers="r24c1-t4 r1c4-t4">
<p>Routine invoked in an improper context</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r25c1-t4" headers="r1c1-t4">
<p><code>XAER_RMFAIL</code></p>
</td>
<td class="cellalignment1228" headers="r25c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r25c1-t4 r1c3-t4">
<p>-7</p>
</td>
<td class="cellalignment1228" headers="r25c1-t4 r1c4-t4">
<p>Resource manager unavailable</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r26c1-t4" headers="r1c1-t4">
<p><code>XAER_DUPID</code></p>
</td>
<td class="cellalignment1228" headers="r26c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r26c1-t4 r1c3-t4">
<p>-8</p>
</td>
<td class="cellalignment1228" headers="r26c1-t4 r1c4-t4">
<p>XID already exists</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r27c1-t4" headers="r1c1-t4">
<p><code>XAER_OUTSIDE</code></p>
</td>
<td class="cellalignment1228" headers="r27c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r27c1-t4 r1c3-t4">
<p>-9</p>
</td>
<td class="cellalignment1228" headers="r27c1-t4 r1c4-t4">
<p>Resource manager doing work outside global transaction</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69156" class="refsect2"><a id="CHDCAHJJ"></a>
<hr />
<h3 class="refsect2">Operational Notes</h3>
<p>In compliance with the XA specification of the X/Open CAE Standard for Distributed Transaction Processing, <code>XA_PREPARE</code>/<code>COMMIT</code>/ <code>ROLLBACK</code>/<code>FORGET</code> may not be called when the transaction is still associated with the current session. Only after <code>XA_END</code> has been called so that there is not any transaction associated with the current session, the application may call <code>XA_PREPARE</code>/<code>COMMIT</code>/ <code>ROLLBACK</code>/<code>FORGET</code>.</p>
<p><code>XAER_PROTO</code> error is returned from <code>XA_PREPARE</code>/<code>COMMIT</code>/<code>ROLLBACK</code>/<code>FORGET</code> if a transaction is being associated with the current session.</p>
<p>Prior to calling any of the package subprograms, a connection/session must have already been established to the Oracle database server backend, or a resource manager. Resource manager identifiers are not supported. If multiple resource managers are involved, multiple connections/sessions must be pre-established to each resource manager before calling any the package subprograms. If multiple connections/sessions are established during the course of global transaction processing, the caller must ensure that all of those connections/sessions associated with a specific global transaction branch identifier (XID) are established to the same resource manager.</p>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"><a id="BABHIIEF"></a>
<hr />
<div id="ARPLS69157" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Data Structures</h2>
<p>The <code>DBMS_XA</code> package uses the following <code>OBJECT</code> type and associated <code>TABLE</code> type.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12101"></a>OBJECT Types</p>
<ul>
<li>
<p><a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12102"></a>TABLE Types</p>
<ul>
<li>
<p><a href="#BABCGEHD">DBMS_XA_XID_ARRAY Table Type</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div id="ARPLS69158" class="refsect2"><a id="BABJDGGH"></a>
<hr />
<h3 class="refsect2"><a id="sthref12103"></a>DBMS_XA_XID Object Type</h3>
<p>The PL/SQL XA interface allows the PL/SQL application to define a global transaction branch id (XID) and associate/disassociate the current session with the transaction branch. XID is defined as a PL/SQL object type.</p>
<div class="infobox-note">
<p class="notep1">See Also:</p>
For more information, see "Distributed Transaction Processing: The XA Specification" in the public XA Standard.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12104"></a>Syntax</p>
<pre>
TYPE DBMS_XA_XID IS OBJECT(
  formatid      NUMBER,
  gtrid         RAW(64),
  bqual         RAW(64),
  constructor function DBMS_XA_XID(
       gtrid     IN   NUMBER)
    RETURN SELF AS RESULT,
  constructor function DBMS_XA_XID (
       gtrid     IN   RAW, 
       bqual     IN   RAW)
    RETURN SELF AS RESULT,
  constructor function DBMS_XA_XID(
       formatid  IN   NUMBER,
       gtrid     IN   RAW,
       bqual     IN   RAW DEFAULT HEXTORAW('00000000000000000000000000000001'))
    RETURN SELF AS RESULT)
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12105"></a>Attributes</p>
<div id="ARPLS69159" class="tblformal">
<p class="titleintable"><a id="sthref12106"></a><a id="sthref12107"></a>Table 163-3 DBMS_XA_XID Object Type</p>
<table class="cellalignment1229" title="DBMS_XA_XID Object Type" summary="This table liststhe attributes of the DBMS_XA_XID object type and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Attribute</th>
<th class="cellalignment1227" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><code>formatid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p>Format identifier, a number identifying different transaction managers (TM)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><code>gtrid</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p>Global transaction identifier uniquely identifying a global transaction, of which the maximum size is 64 bytes</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><code>bqual</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p>Branch qualifier, of which the maximum size is 64 bytes</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69160" class="refsect2"><a id="BABCGEHD"></a>
<hr />
<h3 class="refsect2"><a id="sthref12108"></a>DBMS_XA_XID_ARRAY Table Type</h3>
<p>This type is used to define an array of <code>xid</code> that represent a list of global transaction branches.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12109"></a>Syntax</p>
<pre>
TYPE DBMS_XA_XID_ARRAY as TABLE of DBMS_XA_XID
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<div class="refentry"><a id="BABCIBED"></a>
<hr />
<div id="ARPLS69161" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Summary of DBMS_XA Subprograms</h2>
<div id="ARPLS69162" class="tblformal">
<p class="titleintable"><a id="sthref12110"></a><a id="sthref12111"></a>Table 163-4 DBMS_Xa Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_Xa Package Subprograms" summary="DBMS_APPLICATION_INFO Package Subprograms" dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><a href="#CHDCGIBE">DIST_TXN_SYNC Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Used in recovery of synchronization when utilizing Oracle Real Application Clusters (Oracle RAC)</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><a href="#BABFGIBD">XA_COMMIT Function</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>Commits the global transaction specified by <code>xid</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><a href="#BABGAGII">XA_END Function</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>Disassociates the current session from the transaction branch specified by <code>xid</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><a href="#BABJCEJH">XA_FORGET Function</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>Informs the resource manager to forget about a heuristically committed or rolled back transaction branch.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t7" headers="r1c1-t7">
<p><a href="#BABCDGAG">XA_GETLASTOER Function</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t7 r1c2-t7">
<p>Obtains the last Oracle error code, in case of failure of previous XA calls.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t7" headers="r1c1-t7">
<p><a href="#BABDCHJJ">XA_PREPARE Function</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t7 r1c2-t7">
<p>Prepares the transaction branch specified in <code>xid</code> for committing the transaction subsequently if possible</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t7" headers="r1c1-t7">
<p><a href="#BABDAEIA">XA_RECOVER Function</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t7 r1c2-t7">
<p>Obtains a list of prepared or heuristically completed transaction branches from a resource manager</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t7" headers="r1c1-t7">
<p><a href="#BABCIHJD">XA_ROLLBACK Function</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t7 r1c2-t7">
<p>Informs the resource manager to roll back work done on behalf of a transaction branch</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t7" headers="r1c1-t7">
<p><a href="#BABJCIDI">XA_SETTIMEOUT Function</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t7 r1c2-t7">
<p>Sets the transaction timeout in seconds for the current session</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t7" headers="r1c1-t7">
<p><a href="#BABIGHFE">XA_START Function</a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t7 r1c2-t7">
<p>Associates the current session with the transaction branch specified by <code>xid</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS69163" class="refsect2"><a id="CHDCGIBE"></a>
<hr />
<h3 class="refsect2"><a id="sthref12112"></a>DIST_TXN_SYNC Procedure</h3>
<p>This procedure can be used to synchronize in-doubt transactions when one of the Oracle Real Application Clusters (Oracle RAC) instances fails.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12113"></a>Syntax</p>
<pre>
DBMS_XA.DIST_TXN_SYNC; 
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69164" class="refsect2"><a id="BABFGIBD"></a>
<hr />
<h3 class="refsect2"><a id="sthref12114"></a>XA_COMMIT Function</h3>
<p>This function commits the global transaction specified by <code>xid</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12115"></a>Syntax</p>
<pre>
DBMS_XA.XA_COMMIT (
   xid       IN  DBMS_XA_XID,
   onePhase  IN  BOOLEAN)
RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12116"></a>Parameters</p>
<div id="ARPLS69165" class="tblformal">
<p class="titleintable"><a id="sthref12117"></a><a id="sthref12118"></a>Table 163-5 <span class="bolditalic">XA_COMMIT Function Parameters</span></p>
<table class="cellalignment1229" title="XA_COMMIT Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_COMMIT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Parameter</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>xid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>See <a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t8" headers="r1c1-t8">
<p><code>onePhase</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t8 r1c2-t8">
<p>If <code>TRUE</code>, apply single phase commit</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12119"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a>. Possible return values indicating error are: <code>XAER_RMERR</code>, <code>XAER_RMFAIL</code>, <code>XAER_NOTA</code>, <code>XAER_INVAL</code>, or <code>XAER_PROTO</code>. Other possible return values include: <code>XA_OK</code>, <code>XA_RB</code>*, <code>XA_HEURHAZ</code>, <code>XA_HEURCOM</code>, <code>XA_HEURRB</code>, and <code>XA_HEURMIX</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12120"></a>Usage Notes</p>
<ul>
<li>
<p>An application must not call <code>COMMIT</code>, but instead must call <code>XA_COMMIT</code> to commit the global transaction specified by <code>xid</code>. If a user needs to commit a transaction branch that is created by other users, <code>FORCE</code> <code>ANY</code> <code>TRANSACTION</code> must be granted to the user.</p>
</li>
<li>
<p>If <code>onePhase</code> is <code>TRUE</code>, the resource manager should use a one-phase commit protocol to commit the work done on behalf of <code>xid</code>. Otherwise, only if all branches of the global transaction have been prepared successfully and the preceding <code>XA_PREPARE</code> call has returned <code>XA_OK</code>, should <code>XA_COMMIT</code> be called.</p>
</li>
<li>
<p>The application must make a separate <code>XA_COMMIT</code> call for each of the transaction branches of the global transaction for which <code>XA_PREPARE</code> has returned <code>XA_OK</code>.</p>
</li>
<li>
<p>If the resource manager did not commit the transaction and the parameter <code>onePhase</code> is set to <code>TRUE</code>, the resource manager may return one of the <code>XA_RB</code>* code. Upon return, the resource manager has rolled back the branch's work and has released all held resources.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69166" class="refsect2"><a id="BABGAGII"></a>
<hr />
<h3 class="refsect2"><a id="sthref12121"></a>XA_END Function</h3>
<p>This function disassociates the current session from the transaction branch specified by <code>xid</code></p>
<p>A transaction manager calls <code>XA_END</code> when a thread of control finishes, or needs to suspend work on, a transaction branch. This occurs when the application completes a portion of its work, either partially or in its entirety (for example, before blocking on some event in order to let other threads of control work on the branch). When <code>XA_END</code> successfully returns, the calling thread of control is no longer actively associated with the branch but the branch still exists</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12122"></a>Syntax</p>
<pre>
DBMS_XA.XA_END (
   xid   IN  DBMS_XA_XID,
   flag  IN  PLS_INTEGER)
RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12123"></a>Parameters</p>
<div id="ARPLS69167" class="tblformal">
<p class="titleintable"><a id="sthref12124"></a><a id="sthref12125"></a>Table 163-6 <span class="bolditalic">XA_END Function Parameters</span></p>
<table class="cellalignment1229" title="XA_END Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_END subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t9">Parameter</th>
<th class="cellalignment1227" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t9" headers="r1c1-t9">
<p><code>xid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t9 r1c2-t9">
<p>See <a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t9" headers="r1c1-t9">
<p><code>flag</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t9 r1c2-t9">
<p>See <a href="#BEHJAGEE">Table 163-1, "DBMS_XA Constants for Flag Field of XA_START &amp; XA_END Functions"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12126"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a>. Possible return values in error are <code>XAER_RMERR</code>, <code>XAER_RMFAILED</code>, <code>XAER_NOTA</code>, <code>XAER_INVAL</code>, <code>XAER_PROTO</code>, or <code>XA_RB</code>*.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12127"></a>Usage Notes</p>
<ul>
<li>
<p><code>TMSUCCESS</code> or <code>TMSUSPEND</code> may be specified in flag, and the transaction branch is disassociated with the current session in detached state if the return value is <code>XA_OK</code>. <code>TMFAIL</code> is not supported. <code>XA_END</code> may be called with either <code>TMSUCCESS</code> or <code>TMSUSPEND</code> to disassociate the transaction branch identified by xid from the current session.</p>
</li>
<li>
<p><code>XA_OK</code> is returned if <code>XA_END</code> succeeds. An application must check the return value and handle error cases. Only when <code>XA_OK</code> is returned, the application should proceed for other normal operations.</p>
</li>
<li>
<p>Executing a <code>ROLLBACK</code> statement without calling <code>XA_END</code> first will rollback the changes made by the current transaction. However, the transaction context is still associated with the current session until <code>XA_END</code> is called.</p>
</li>
<li>
<p>Executing a <code>COMMIT</code> statement without calling <code>XA_END</code> first will result in <code>ORA</code>-<code>02089</code>: <code>COMMIT</code> is not allowed in a subordinate session.</p>
</li>
<li>
<p>Executing a COMMIT or a ROLLBACK statement after <code>XA_END</code> has no effect on the transaction identified by <code>xid</code>, since this transaction is no longer associated with the current session. To commit the transaction ID or the <a href="#BABCIHJD">XA_ROLLBACK Function</a> to commit/rollback the transaction specified by the <code>xid</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69168" class="refsect2"><a id="BABJCEJH"></a>
<hr />
<h3 class="refsect2"><a id="sthref12128"></a>XA_FORGET Function</h3>
<p>This function informs the resource manager to forget about a heuristically committed or rolled back transaction branch.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12129"></a>Syntax</p>
<pre>
DBMS_XA.XA_FORGET (
   xid       IN  DBMS_XA_XID)
RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12130"></a>Parameters</p>
<div id="ARPLS69169" class="tblformal">
<p class="titleintable"><a id="sthref12131"></a><a id="sthref12132"></a>Table 163-7 <span class="bolditalic">XA_FORGET Function Parameters</span></p>
<table class="cellalignment1229" title="XA_FORGET Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_FORGET subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Parameter</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>xid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p>See <a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12133"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a>. Possible return values are <code>XA_OK</code>, <code>XAER_RMERR</code>, <code>XAER_RMFAIL</code>, <code>XAER_NOTA</code>, <code>XAER_INVAL</code>, or <code>XAER_PROTO</code>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69170" class="refsect2"><a id="BABCDGAG"></a>
<hr />
<h3 class="refsect2"><a id="sthref12134"></a>XA_GETLASTOER Function</h3>
<p>This function obtains the last Oracle error code, in case of failure of previous XA calls.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12135"></a>Syntax</p>
<pre>
DBMS_XA.XA_GETLASTOER  
 RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12136"></a>Return Values</p>
<p>The return value carries the last Oracle error code.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69171" class="refsect2"><a id="BABDCHJJ"></a>
<hr />
<h3 class="refsect2"><a id="sthref12137"></a>XA_PREPARE Function</h3>
<p>This function prepares the transaction branch specified in <code>xid</code> for committing the transaction subsequently if possible.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12138"></a>Syntax</p>
<pre>
DBMS_XA.XA_PREPARE (
   xid   IN  DBMS_XA_XID)
RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12139"></a>Parameters</p>
<div id="ARPLS69172" class="tblformal">
<p class="titleintable"><a id="sthref12140"></a><a id="sthref12141"></a>Table 163-8 <span class="bolditalic">XA_PREPARE Function Parameters</span></p>
<table class="cellalignment1229" title="XA_PREPARE Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_PREPARE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t11">Parameter</th>
<th class="cellalignment1227" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t11" headers="r1c1-t11">
<p><code>xid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t11 r1c2-t11">
<p>See <a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12142"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a>. Possible return codes include: <code>XA_OK</code>, <code>XA_RDONLY</code>, <code>XA_RB</code>*, <code>XAER_RMERR</code>, <code>XAER_RMFAIL</code>, <code>XAER_NOTA</code>, <code>XAER_INVAL</code>, or <code>XAER_PROTO</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12143"></a>Usage Notes</p>
<ul>
<li>
<p>If a user needs to prepare a transaction branch that is created by other users, <code>FORCE</code> <code>ANY</code> <code>TRANSACTION</code> must be granted to the user.</p>
</li>
<li>
<p>An application must keep track of all the branches of one global transaction, and prepare each transaction branch. Only if all branches of the global transaction have been prepared successfully and <code>XA_PREPARE</code> has returned <code>XA_OK</code>, the application may proceed to call <code>XA_COMMIT</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69173" class="refsect2"><a id="BABDAEIA"></a>
<hr />
<h3 class="refsect2"><a id="sthref12144"></a>XA_RECOVER Function</h3>
<p>This function obtains a list of prepared or heuristically completed transaction branches from a resource manager.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12145"></a>Syntax</p>
<pre>
DBMS_XA.XA_RECOVER 
 RETURN DBMS_XA_XID_ARRAY;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12146"></a>Return Values</p>
<p>See <a href="#BABCGEHD">DBMS_XA_XID_ARRAY Table Type</a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12147"></a>Usage Notes</p>
<ul>
<li>
<p>The flags <code>TMSTARTSCAN</code>, <code>TMENDSCAN</code>, <code>TMNOFLAGS</code> are not supported.</p>
</li>
<li>
<p>The privilege <code>SELECT</code> <code>ON</code> <code>DBA_PENDING_TRANSACTIONS</code> must be granted to the user who needs to call <code>XA_RECOVER</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69174" class="refsect2"><a id="BABCIHJD"></a>
<hr />
<h3 class="refsect2"><a id="sthref12148"></a>XA_ROLLBACK Function</h3>
<p>This function informs the resource manager to roll back work done on behalf of a transaction branch.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12149"></a>Syntax</p>
<pre>
DBMS_XA.XA_ROLLBACK (
   xid       IN  DBMS_XA_XID)
 RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12150"></a>Parameters</p>
<div id="ARPLS69175" class="tblformal">
<p class="titleintable"><a id="sthref12151"></a><a id="sthref12152"></a>Table 163-9 <span class="bolditalic">XA_ROLLBACK Function Parameters</span></p>
<table class="cellalignment1229" title="XA_ROLLBACK Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_ROLLBACK subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>xid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>See <a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12153"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a>. Possible return values are: <code>XA_OK</code>, <code>XA_RB</code>*, <code>XA_HEURHAZ</code>, <code>XA_HEURCOM</code>, <code>XA_HEURRB</code>, or <code>XA_HEURMIX</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12154"></a>Usage Notes</p>
<p>If a user needs to rollback a transaction branch that created by other users, the privilege <code>FORCE</code> <code>ANY</code> <code>TRANSACTION</code> must be granted to the user.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69176" class="refsect2"><a id="BABJCIDI"></a>
<hr />
<h3 class="refsect2"><a id="sthref12155"></a>XA_SETTIMEOUT Function</h3>
<p>This function sets the transaction timeout in seconds for the current session.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12156"></a>Syntax</p>
<pre>
DBMS_XA.XA_SETTIMEOUT (
   seconds  IN  PLS_INTEGER)
RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12157"></a>Parameters</p>
<div id="ARPLS69177" class="tblformal">
<p class="titleintable"><a id="sthref12158"></a><a id="sthref12159"></a>Table 163-10 <span class="bolditalic">XA_SETTIMEOUT Function Parameters</span></p>
<table class="cellalignment1229" title="XA_SETTIMEOUT Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_SETTIMEOUTT subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t13">Parameter</th>
<th class="cellalignment1227" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t13" headers="r1c1-t13">
<p><code>seconds</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c2-t13">
<p>The timeout value indicates the maximum time in seconds that a transaction branch may be disassociated from the session before the system automatically aborts the transaction. The default value is 60 seconds.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12160"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a>. Possible return values are <code>XA_OK</code>, <code>XAER_RMERR</code>, <code>XAER_RMFAIL</code>, or <code>XAER_INVAL</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12161"></a>Usage Notes</p>
<p>Only if return value is <code>XA_OK</code>, is the timeout value successfully set.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS69178" class="refsect2"><a id="BABIGHFE"></a>
<hr />
<h3 class="refsect2"><a id="sthref12162"></a>XA_START Function</h3>
<p>This function associates the current session with a transaction branch specified by the <code>xid</code>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12163"></a>Syntax</p>
<pre>
DBMS_XA.XA_START (
   xid   IN  DBMS_XA_XID,    flag  IN  PLS_INTEGER)  RETURN PLS_INTEGER;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12164"></a>Parameters</p>
<div id="ARPLS69179" class="tblformal">
<p class="titleintable"><a id="sthref12165"></a><a id="sthref12166"></a>Table 163-11 <span class="bolditalic">XA_START Function Parameters</span></p>
<table class="cellalignment1229" title="XA_START Function Parameters" summary="This table describes the Parameters of DBMS_XA.XA_STARTsubprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t14">Parameter</th>
<th class="cellalignment1227" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t14" headers="r1c1-t14">
<p><code>xid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t14 r1c2-t14">
<p>See <a href="#BABJDGGH">DBMS_XA_XID Object Type</a></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t14" headers="r1c1-t14">
<p><code>flag</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t14 r1c2-t14">
<p>See <a href="#BEHJAGEE">Table 163-1, "DBMS_XA Constants for Flag Field of XA_START &amp; XA_END Functions"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12167"></a>Return Values</p>
<p>See <a href="#BABCHFEI">Table 163-2, "DBMS_XA Constants for Possible Return Values"</a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref12168"></a>Usage Notes</p>
<ul>
<li>
<p>If <code>TMJOIN</code> or <code>TMRESUME</code> is specified in flag, the start is for joining an existing transaction branch identified by the <code>xid</code>. <code>TMJOIN</code> flag should be used when the transaction is detached with <code>TMSUCCESS</code> flag. <code>TMRESUME</code> should be used when the transaction branch is detached with <code>TMSUSPEND</code> flag. <code>XA_START</code> may be called with either flag to join an existing transaction branch.</p>
</li>
<li>
<p>If <code>TMNOFLAGS</code> is specified in flag, and neither <code>TMJOIN</code> nor <code>TMRESUME</code> is specified, a new transaction branch is to be started. If the transaction branch specified in <code>xid</code> already exists, <code>XA_START</code> returns an <code>XAER_DUPID</code> error code.</p>
</li>
<li>
<p>Possible return values in error include: <code>XAER_RMERR</code>, <code>XAER_RMFAIL</code>, <code>XAER_DUPID</code>, <code>XAER_OUTSIDE</code>, <code>XAER_NOTA</code>, <code>XAER_INVAL</code>, and <code>XAER_PROTO</code>.</p>
</li>
<li>
<p><code>XA_OK</code> is returned if <code>XA_START</code> succeeds. An application must check the return value and handle error cases. Only when <code>XA_OK</code> is returned, the PL/SQL application should proceed for other normal operations.Transaction stacking is not supported. If there is an active transaction associated with the current session, may not be called to start or join another transaction. <code>XAER_PROTO</code> will be returned if <code>XA_START</code> is called with an active global transaction branch associated with the session. <code>XAER_OUTSIDE</code> will be returned if <code>XA_START</code> is called with a local transaction associated with the current session.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_workload_repos.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_xdb.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
