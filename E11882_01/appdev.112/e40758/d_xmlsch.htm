<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBMS_XMLSCHEMA</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:55:56Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="d_xmlsav.htm" title="Previous" type="text/html" />
<link rel="Next" href="d_xmlstr.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">181/265</span> <!-- End Header -->
<div id="ARPLS377" class="chapter"><a id="CBHJBEIA"></a><a id="i1008494"></a>
<h1 class="chapter"><span class="secnum">177</span> <a id="sthref14457"></a><a id="sthref14458"></a>DBMS_XMLSCHEMA</h1>
<p><code>DBMS_XMLSCHEMA</code> package provides procedures to manage XML schemas. It is created by script <code>dbmsxsch.sql</code> during Oracle database installation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADXDB" href="../e23094/toc.htm"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CBHDGBBH">Using DBMS_XMLSCHEMA</a></p>
<ul>
<li>
<p>Overview</p>
</li>
<li>
<p>Security Model</p>
</li>
<li>
<p>Constants</p>
</li>
<li>
<p>Views</p>
</li>
<li>
<p>Operational Notes</p>
</li>
</ul>
</li>
<li>
<p><a href="#i1009918">Summary of DBMS_XMLSCHEMA Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="CBHDGBBH"></a>
<hr />
<div id="ARPLS70044" class="refsect1">
<h2 class="refsect1"><a id="sthref14459"></a>Using DBMS_XMLSCHEMA</h2>
<p>This section contains topics which relate to using the <code>DBMS_XMLSCHEMA</code> package.</p>
<ul>
<li>
<p><a href="#CHDJHFAG">Overview</a></p>
</li>
<li>
<p><a href="#CHDBHAFA">Security Model</a></p>
</li>
<li>
<p><a href="#CHDJJBEB">Constants</a></p>
</li>
<li>
<p><a href="#CHDJABJC">Views</a></p>
</li>
<li>
<p><a href="#CHDBCDAE">Operational Notes</a></p>
</li>
</ul>
<div id="ARPLS70045" class="refsect2"><a id="CHDJHFAG"></a>
<hr />
<h3 class="refsect2">Overview</h3>
<p>This package provides subprograms to</p>
<ul>
<li>
<p>Register an XML schema</p>
</li>
<li>
<p>Delete a previously registered XML schema</p>
</li>
<li>
<p>Re-compile a previously registered XML schema</p>
</li>
<li>
<p>Generate an XML schema</p>
</li>
<li>
<p>Evolves an XML schema</p>
</li>
</ul>
</div>
<!-- class="refsect2" -->
<div id="ARPLS73536" class="refsect2"><a id="CHDBHAFA"></a>
<hr />
<h3 class="refsect2">Security Model</h3>
<p>Owned by <code>XDB</code>, the <code>DBMS_XMLSCHEMA</code> package must be created by <code>SYS</code> or <code>XDB</code>. The <code>EXECUTE</code> privilege is granted to <code>PUBLIC</code>. Subprograms in this package are executed using the privileges of the current user.</p>
</div>
<!-- class="refsect2" -->
<div id="ARPLS70046" class="refsect2"><a id="CHDJJBEB"></a>
<hr />
<h3 class="refsect2"><a id="sthref14460"></a>Constants</h3>
<p>The <code>DBMS_XMLSCHEMA</code> package uses the constants shown in following tables.</p>
<ul>
<li>
<p><a href="#CHDEHIIF"><span class="bolditalic">DBMS_XMLSCHEMA Constants</span> - Delete Option</a></p>
</li>
<li>
<p><a href="#CHDIAGJC"><span class="bolditalic">DBMS_XMLSCHEMA Constants</span> - Enable Hierarchy</a></p>
</li>
<li>
<p><a href="#CHDGIBBD"><span class="bolditalic">DBMS_XMLSCHEMA Constants</span> - Register CSID</a></p>
</li>
</ul>
<div id="ARPLS70047" class="tblformal">
<p class="titleintable"><a id="sthref14461"></a><a id="CHDEHIIF"></a>Table 177-1 <span class="bolditalic">DBMS_XMLSCHEMA Constants</span> - Delete Option</p>
<table class="cellalignment1229" title="DBMS_XMLSCHEMA Constants - Delete Option" summary="This table describes delete option related constants used by DBMS_XMLSCHEMA subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t3">Constant</th>
<th class="cellalignment1227" id="r1c2-t3">Type</th>
<th class="cellalignment1227" id="r1c3-t3">Value</th>
<th class="cellalignment1227" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t3" headers="r1c1-t3">
<p><code>DELETE_RESTRICT</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c2-t3">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c3-t3">
<p><code>1</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c4-t3">
<p>Deletion of an XML schema fails if there are any tables or XML schemas that depend on it</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t3" headers="r1c1-t3">
<p><code>DELETE_INVALIDATE</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c2-t3">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c3-t3">
<p><code>2</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t3 r1c4-t3">
<p>Deletion of an XML schema does not fail if there are tables or XML schemas that depend on it. All dependent tables and schemas are invalidated.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t3" headers="r1c1-t3">
<p><code>DELETE_CASCADE</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c2-t3">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c3-t3">
<p><code>3</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t3 r1c4-t3">
<p>Deletion of an XML schema also drops all SQL types and default tables associated with it. SQL types are dropped only if <code>gentypes</code> argument was set to <code>TRUE</code> during registration of the XML schema. However, deletion of the XML schema fails if there are any instance documents conforming to the schema or any dependent XML schemas.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t3" headers="r1c1-t3">
<p><code>DELETE_CASCADE_FORCE</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c2-t3">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c3-t3">
<p><code>4</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t3 r1c4-t3">
<p>This option is similar to <code>DELETE_CASCADE</code> except that it does not check for any stored instance documents conforming to the schema or any dependent XML schemas. Also, it ignores any errors.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS70048" class="tblformal">
<p class="titleintable"><a id="sthref14462"></a><a id="CHDIAGJC"></a>Table 177-2 <span class="bolditalic">DBMS_XMLSCHEMA Constants</span> - Enable Hierarchy</p>
<table class="cellalignment1229" title="DBMS_XMLSCHEMA Constants - Enable Hierarchy" summary="This table describes enable hierarchy related constants used by DBMS_XMLSCHEMA subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Constant</th>
<th class="cellalignment1227" id="r1c2-t4">Type</th>
<th class="cellalignment1227" id="r1c3-t4">Value</th>
<th class="cellalignment1227" id="r1c4-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>ENABLE_HIERARCHY_NONE</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c3-t4">
<p><code>1</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c4-t4">
<p>The <code>ENABLE_HIERARCHY</code> procedure of the <code>DBMS_XDBZ</code> package will not be called on any tables created while registering that schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>ENABLE_HIERARCHY_CONTENTS</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c3-t4">
<p><code>2</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c4-t4">
<p>The <code>ENABLE_HIERARCHY</code> procedure of the <code>DBMS_XDBZ</code> package will be called for all tables created during schema registration with <code>hierarchy_type</code> as <code>DBMS_XDBZ</code>.<code>ENABLE_CONTENTS</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><code>ENABLE_HIERARCHY_RESMETADATA</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p><code>PLS_INTEGER</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c3-t4">
<p><code>3</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c4-t4">
<p>The <code>ENABLE_HIERARCHY</code> procedure of the <code>DBMS_XDBZ</code> package will be called on all tables created during schema registration with <code>hierarchy_type</code> as <code>DBMS_XDBZ</code>.<code>ENABLE_RESMETADATA</code>. Users should pass in <code>DBMS_XMLSCHEMA</code>.<code>ENABLE_RESMETADATA</code> for schemas they intend to use as resource metadata tables.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS70049" class="tblformal">
<p class="titleintable"><a id="sthref14463"></a><a id="CHDGIBBD"></a>Table 177-3 <span class="bolditalic">DBMS_XMLSCHEMA Constants</span> - Register CSID</p>
<table class="cellalignment1229" title="DBMS_XMLSCHEMA Constants - Register CSID" summary="This table describes register csid related constants used by DBMS_XMLSCHEMA subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t5">Constant</th>
<th class="cellalignment1227" id="r1c2-t5">Type</th>
<th class="cellalignment1227" id="r1c3-t5">Value</th>
<th class="cellalignment1227" id="r1c4-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t5" headers="r1c1-t5">
<p><code>REGISTER_NODOCID</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c2-t5">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c3-t5">
<p><code>1</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t5 r1c4-t5">
<p>If a schema is registered for metadata use (using the value <code>ENABLE_HIER_RESMETADATA</code> for parameter enablehierarchy during registration), a column named <code>DOCID</code> is added to all tables created during schema registration. This constant can be used in the options argument of <code>REGISTERSCHEMA</code> to prevent the creation of this column if the user wishes to optimize on storage</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t5" headers="r1c1-t5">
<p><code>REGISTER_CSID_NULL</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c2-t5">
<p><code>NUMBER</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c3-t5">
<p><code>-1</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t5 r1c4-t5">
<p>If user wishes to not specify the character set of the input schema document when invoking <code>REGISTERSCHEMA</code>, this value can be used for the csid parameter</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70050" class="refsect2"><a id="CHDJABJC"></a>
<hr />
<h3 class="refsect2"><a id="sthref14464"></a>Views</h3>
<p>The <code>DBMS_XMLSCHEMA</code> package uses the views shown in <a href="#CHDCADGJ">Table 177-4</a>. The columns of these views are described in detail in the <a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference.</span></a></p>
<div id="ARPLS70051" class="tblformal">
<p class="titleintable"><a id="sthref14465"></a><a id="CHDCADGJ"></a>Table 177-4 Summary of Views used by DBMS_XMLSCHEMA</p>
<table class="cellalignment1229" title="Summary of Views used by DBMS_XMLSCHEMA" summary="This table lists the Catalog Views of DBMS_XMLSCHEMA subprograms." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t6">Schema</th>
<th class="cellalignment1227" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN26307" href="../../server.112/e40402/statviews_5513.htm#REFRN26307"><code>USER_XML_SCHEMAS</code></a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t6 r1c2-t6">
<p>All registered XML Schemas owned by the user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN20307" href="../../server.112/e40402/statviews_2137.htm#REFRN20307"><code>ALL_XML_SCHEMAS</code></a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t6 r1c2-t6">
<p>All registered XML Schemas usable by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN23307" href="../../server.112/e40402/statviews_5101.htm#REFRN23307"><code>DBA_XML_SCHEMAS</code></a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t6 r1c2-t6">
<p>All registered XML Schemas in the database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN23309" href="../../server.112/e40402/statviews_5103.htm#REFRN23309"><code>DBA_XML_TABLES</code></a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t6 r1c2-t6">
<p>All <code>XMLType</code> tables in the system</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN26309" href="../../server.112/e40402/statviews_5515.htm#REFRN26309"><code>USER_XML_TABLES</code></a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t6 r1c2-t6">
<p>All <code>XMLType</code> tables owned by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN20309" href="../../server.112/e40402/statviews_2139.htm#REFRN20309"><code>ALL_XML_TABLES</code></a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t6 r1c2-t6">
<p>All <code>XMLType</code> tables usable by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN23308" href="../../server.112/e40402/statviews_5102.htm#REFRN23308"><code>DBA_XML_TAB_COLS</code></a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t6 r1c2-t6">
<p>All <code>XMLType</code> table columns in the system</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN26308" href="../../server.112/e40402/statviews_5514.htm#REFRN26308"><code>USER_XML_TAB_COLS</code></a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t6 r1c2-t6">
<p>All <code>XMLType</code> table columns in tables owned by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN20308" href="../../server.112/e40402/statviews_2138.htm#REFRN20308"><code>ALL_XML_TAB_COLS</code></a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t6 r1c2-t6">
<p>All <code>XMLType</code> table columns in tables usable by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN23311" href="../../server.112/e40402/statviews_5105.htm#REFRN23311"><code>DBA_XML_VIEWS</code></a></p>
</td>
<td class="cellalignment1228" headers="r11c1-t6 r1c2-t6">
<p>All <code>XMLType</code> views in the system</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN26311" href="../../server.112/e40402/statviews_5517.htm#REFRN26311"><code>USER_XML_VIEWS</code></a></p>
</td>
<td class="cellalignment1228" headers="r12c1-t6 r1c2-t6">
<p>All <code>XMlType</code> views owned by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r13c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN20311" href="../../server.112/e40402/statviews_2141.htm#REFRN20311"><code>ALL_XML_VIEWS</code></a></p>
</td>
<td class="cellalignment1228" headers="r13c1-t6 r1c2-t6">
<p>All <code>XMLType</code> views usable by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r14c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN23310" href="../../server.112/e40402/statviews_5104.htm#REFRN23310"><code>DBA_XML_VIEW_COLS</code></a></p>
</td>
<td class="cellalignment1228" headers="r14c1-t6 r1c2-t6">
<p>All <code>XMLType</code> view columns in the system</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r15c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN26310" href="../../server.112/e40402/statviews_5516.htm#REFRN26310"><code>USER_XML_VIEW_COLS</code></a></p>
</td>
<td class="cellalignment1228" headers="r15c1-t6 r1c2-t6">
<p>All <code>XMLType</code> view columns in views owned by the current user</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r16c1-t6" headers="r1c1-t6">
<p><a class="olink REFRN20310" href="../../server.112/e40402/statviews_2140.htm#REFRN20310"><code>ALL_XML_VIEW_COLS</code></a></p>
</td>
<td class="cellalignment1228" headers="r16c1-t6 r1c2-t6">
<p>All <code>XMLType</code> view columns in views usable by the current user</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70052" class="refsect2"><a id="CHDBCDAE"></a>
<hr />
<h3 class="refsect2"><a id="sthref14466"></a>Operational Notes</h3>
<p class="subhead2"><a id="ARPLS70053"></a>Guidelines for Using In-Place XML Schema Evolution</p>
<p>Before you perform an in-place XML-schema evolution, you should follow these preparatory steps:</p>
<ol>
<li>
<p>Back up all existing data (instance documents) for the XML schema that will be evolved.</p>
</li>
<li>
<p>Perform a dry run using trace only, that is, without actually evolving the XML schema or updating any instance documents, to produce a trace of the update operations that would be performed during evolution. To do this, set the flag parameter value to only <code>INPLACE_TRACE</code>. Do not also use <code>INPLACE_EVOLVE</code>. After performing the dry run, examine the trace file, verifying that the listed DDL operations are in fact those that you intend.</p>
</li>
</ol>
</div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i1009918"></a>
<hr />
<div id="ARPLS70054" class="refsect1">
<h2 class="refsect1"><a id="sthref14467"></a>Summary of DBMS_XMLSCHEMA Subprograms</h2>
<div id="ARPLS70055" class="tblformal">
<p class="titleintable"><a id="sthref14468"></a><a id="sthref14469"></a>Table 177-5 DBMS_XMLSCHEMA Package Subprograms</p>
<table class="cellalignment1229" title="DBMS_XMLSCHEMA Package Subprograms" summary="This table lists the DBMS_XMLSCHEMA subprograms in alphabetical order and briefly describes them." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t7">Method</th>
<th class="cellalignment1227" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t7" headers="r1c1-t7">
<p><a href="#BABDFDJF">COMPILESCHEMA Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t7 r1c2-t7">
<p>Used to re-compile an already registered XML schema. This is useful for bringing a schema in an invalid state to a valid state.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t7" headers="r1c1-t7">
<p><a href="#i1008264">COPYEVOLVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r3c1-t7 r1c2-t7">
<p>Evolves registered schemas so that existing XML instances remain valid</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t7" headers="r1c1-t7">
<p><a href="#i1007471">DELETESCHEMA Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r4c1-t7 r1c2-t7">
<p>Removes the schema from the database</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t7" headers="r1c1-t7">
<p><a href="#i1009760">GENERATESCHEMA Function</a></p>
</td>
<td class="cellalignment1228" headers="r5c1-t7 r1c2-t7">
<p>Generates an XML schema from an oracle type name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t7" headers="r1c1-t7">
<p><a href="#i1007548">GENERATESCHEMAS Function</a></p>
</td>
<td class="cellalignment1228" headers="r6c1-t7 r1c2-t7">
<p>Generates several XML schemas from an oracle type name</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t7" headers="r1c1-t7">
<p><a href="#BABEJBJE">INPLACEEVOLVE Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r7c1-t7 r1c2-t7">
<p>Evolves registered schemas by propagating schema changes to object types and tables</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t7" headers="r1c1-t7">
<p><a href="#BABEGJDD">PURGESCHEMA Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r8c1-t7 r1c2-t7">
<p>Removes the XML schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t7" headers="r1c1-t7">
<p><a href="#i1003177">REGISTERSCHEMA Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r9c1-t7 r1c2-t7">
<p>Registers the specified schema for use by Oracle. This schema can then be used to store documents conforming to this.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t7" headers="r1c1-t7">
<p><a href="#i1003294">REGISTERURI Procedure</a></p>
</td>
<td class="cellalignment1228" headers="r10c1-t7 r1c2-t7">
<p>Registers an XML schema specified by a URI name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS70056" class="refsect2"><a id="BABDFDJF"></a>
<hr />
<h3 class="refsect2"><a id="sthref14470"></a>COMPILESCHEMA Procedure</h3>
<p>This procedure can be used to re-compile an already registered XML schema. This is useful for bringing a schema in an invalid state to a valid state. Can result in a <code>ORA-31001</code> exception: invalid resource handle or path name.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14471"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.COMPILESCHEMA(
   schemaurl IN VARCHAR2);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14472"></a>Parameters</p>
<div id="ARPLS70057" class="tblformal">
<p class="titleintable"><a id="sthref14473"></a><a id="sthref14474"></a>Table 177-6 COMPILESCHEMA Procedure Parameters</p>
<table class="cellalignment1229" title="COMPILESCHEMA Procedure Parameters" summary="This table describes the Parameters of the DBMS_XMLSCHEMA.COMPILESCHEMA subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t8">Parameter</th>
<th class="cellalignment1227" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t8" headers="r1c1-t8">
<p><code>schemaurl</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t8 r1c2-t8">
<p>URL identifying the schema</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70058" class="refsect2"><a id="i1008264"></a>
<hr />
<h3 class="refsect2"><a id="sthref14475"></a>COPYEVOLVE Procedure</h3>
<p>This procedure evolves registered schemas so that existing XML instances remain valid.</p>
<p>This procedure is accomplished in according to the following basic scenario (alternative actions are controlled by the procedure's parameters):</p>
<ul>
<li>
<p>copies data in schema based <code>XMLType</code> tables to temporary table storage</p>
</li>
<li>
<p>drops old tables</p>
</li>
<li>
<p>deletes old schemas</p>
</li>
<li>
<p>registers new schemas</p>
</li>
<li>
<p>creates new <code>XMLType</code> tables</p>
</li>
<li>
<p>Populates new tables with data in temporary storage; auxiliary structures (constraints, triggers, indexes, and others) are not preserved</p>
</li>
<li>
<p>drops temporary tables</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>"Schema Evolution" chapter of the <a class="olink ADXDB0800" href="../../appdev.112/e23094/xdb07evo.htm#ADXDB0800"><span class="italic">Oracle XML DB Developer's Guide</span></a> for examples on how to evolve existing schemas</p>
</li>
<li>
<p><a class="olink ERRMG" href="../../server.112/e17766/toc.htm"><span class="italic">Oracle Database Error Messages</span></a> for information on exceptions specific to schema evolution, ORA-30142 through ORA-30946.</p>
</li>
</ul>
</div>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14476"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.COPYEVOLVE(
   schemaurls       IN  XDB$STRUBG_LIST_T,
   newschemas       IN  XMLSequenceType,
   transforms       IN  XMLSequenceType :=NULL,
   preserveolddocs  IN  BOOLEAN :=FALSE,
   maptablename     IN  VARCHAR2 :=NULL,
   generatetables   IN  BOOLEAN :=TRUE,
   force            IN  BOOLEAN :=FALSE,
   schemaowners     IN  XDB$STRING_LIST_T :=NULL
   parallelDegree   IN  PLS_INTEGER := 0,
   options          IN  PLS_INTEGER := 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14477"></a>Parameters</p>
<div id="ARPLS70059" class="tblformal">
<p class="titleintable"><a id="sthref14478"></a><a id="sthref14479"></a>Table 177-7 COPYEVOLVE Procedure Parameters</p>
<table class="cellalignment1229" title="COPYEVOLVE Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.COPYEVOLVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t10">Parameter</th>
<th class="cellalignment1227" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t10" headers="r1c1-t10">
<p><code>schemaurls</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t10 r1c2-t10">
<p><code>VARRAY</code> of URLs of all schemas to be evolved. Should include the dependent schemas. Unless the <code>FORCE</code> parameter is <code>TRUE</code>, URLs should be in the order of dependency.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t10" headers="r1c1-t10">
<p><code>newschemas</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t10 r1c2-t10">
<p><code>VARRAY</code> of new schema documents. Should be specified in same order as the corresponding URLs.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t10" headers="r1c1-t10">
<p><code>transforms</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t10 r1c2-t10">
<p><code>VARRAY</code> of transforming XSL documents to be applied to schema-based documents. Should be specified in same order as the corresponding URLs. Optional if no transformations are required.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t10" headers="r1c1-t10">
<p><code>preserveolddocs</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t10 r1c2-t10">
<p>Default is <code>FALSE</code>, and temporary tables with old data are dropped. If <code>TRUE</code>, these table are still available after schema evolution is complete.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t10" headers="r1c1-t10">
<p><code>maptabname</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t10 r1c2-t10">
<p>Specifies the name of the table mapping permanent to temporary tables during the evolution process. Valid columns are:</p>
<ul>
<li>
<p><code>SCHEMA_URL</code> - <code>VARCHAR2(700)</code> - URL of schema to which this table conforms</p>
</li>
<li>
<p><code>SCHEMA_OWNER</code> -<code>VARCHAR2(30)</code> - Owner of the schema</p>
</li>
<li>
<p><code>ELEMENT_NAME</code> - <code>VARCHAR2(256)</code>- Element to which this table conforms</p>
</li>
<li>
<p><code>TAB_NAME</code> - <code>VARCHAR2(65)</code> - Qualified table name: <code><span class="codeinlineitalic">&lt;owner_name&gt;.&lt;table_name&gt;</span></code></p>
</li>
<li>
<p><code>COL_NAME</code> - <code>VARCHAR2(4000)</code> - Name of the column (<code>NULL</code> for <code>XMLType</code> tables)</p>
</li>
<li>
<p><code>TEMP_TABNAME</code> - <code>VARCHAR2(30)</code> - Name of temporary tables which holds data for this table.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t10" headers="r1c1-t10">
<p><code>generatetables</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t10 r1c2-t10">
<p>Default is <code>TRUE</code>, and new tables will be generated.</p>
<p>If <code>FALSE</code>:</p>
<ul>
<li>
<p>new tables will not be generated after registration of new schemas</p>
</li>
<li>
<p><code>preserveolddocs</code> must be <code>TRUE</code></p>
</li>
<li>
<p><code>maptablename</code> must be non-<code>NULL</code></p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t10" headers="r1c1-t10">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t10 r1c2-t10">
<p>Default is <code>FALSE</code>.</p>
<p>If <code>TRUE</code>, ignores errors generated during schema evolution. Used when there are circular dependencies among schemas to ensure that all schemas are stored despite possible errors in registration.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t10" headers="r1c1-t10">
<p><code>schemaowners</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t10 r1c2-t10">
<p><code>VARRAY</code> of names of schema owners. Should be specified in same order as the corresponding URLs. Default is NULL, assuming that all schemas are owned by the current user.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t10" headers="r1c1-t10">
<p><code>paralleldegree</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t10 r1c2-t10">
<p>Specifies the degree of parallelism to be used in a <code>PARALLEL</code> hint during the data copy stage of the evolution. If this is 0 (default), the <code>PARALLEL</code> hint will not be given in the data copy statements.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t10" headers="r1c1-t10">
<p><code>options</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t10 r1c2-t10">
<p>Currently, the only supported option is <code>COPYEVOLVE_BINARY_XML</code> which lets you register the new schemas for binary XML and create the new tables/columns with binary XML as the storage type.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14480"></a>Usage Notes</p>
<p>You should back up all schemas and documents prior to invocation because <a href="#i1008264">COPYEVOLVE Procedure</a> deletes all conforming documents prior to implementing the schema evolution.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70060" class="refsect2"><a id="i1007471"></a>
<hr />
<h3 class="refsect2"><a id="sthref14481"></a>DELETESCHEMA Procedure</h3>
<p>This procedure deletes the XML Schema specified by the URL.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14482"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.DELETESCHEMA(
   schemaurl      IN  VARCHAR2,
   delete_option  IN  PLS_INTEGER := DELETE_RESTRICT);
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"XMLSCHEMA Storage and Query: Basic" chapter of the <a class="olink ADXDB0600" href="../../appdev.112/e23094/xdb05sto.htm#ADXDB0600"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14483"></a>Parameters</p>
<div id="ARPLS70061" class="tblformal">
<p class="titleintable"><a id="sthref14484"></a><a id="sthref14485"></a>Table 177-8 DELETESCHEMA Procedure Parameters</p>
<table class="cellalignment1229" title="DELETESCHEMA Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.DELETESCHEMA subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t12">Parameter</th>
<th class="cellalignment1227" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t12" headers="r1c1-t12">
<p><code>schemaurl</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t12 r1c2-t12">
<p>URL identifying the schema to be deleted</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t12" headers="r1c1-t12">
<p><code>delete_option</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t12 r1c2-t12">
<p>Delete options:</p>
<ul>
<li>
<p><code>DELETE_RESTRICT</code> - Schema deletion fails if there are any tables or schemas that depend on this schema</p>
</li>
<li>
<p><code>DELETE_INVALIDATE</code> - Schema deletion does not fail if there are any dependencies. Instead, it simply invalidates all dependent objects.</p>
</li>
<li>
<p><code>DELETE_CASCADE</code> - Schema deletion will also drop all default SQL types and default tables. However the deletion fails if there are any stored instances conforming to this schema.</p>
</li>
<li>
<p><code>DELETE_CASCADE_FORCE</code> - Similar to <code>DELETE_CASCADE</code> except that it does not check for any stored instances conforming to this schema. Also, it ignores any errors.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14486"></a>Exceptions</p>
<div id="ARPLS70062" class="tblformal">
<p class="titleintable"><a id="sthref14487"></a><a id="sthref14488"></a>Table 177-9 DELETESCHEMA Procedure Exceptions</p>
<table class="cellalignment1229" title="DELETESCHEMA Procedure Exceptions" summary="This table describes exceptions raised by the DBMS_XMLSCHEMA.DELETESCHEMA subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t13">Exception</th>
<th class="cellalignment1227" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t13" headers="r1c1-t13">
<p><code>ORA-31001</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t13 r1c2-t13">
<p>Invalid resource handle or path name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70066" class="refsect2"><a id="i1009760"></a>
<hr />
<h3 class="refsect2">GENERATESCHEMA Function</h3>
<p>This function generates XML schema(s) from an Oracle type name. It inlines all in one schema (<code>XMLType</code>).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"XMLSCHEMA Storage and Query: Advanced" chapter of the <a class="olink ADXDB0700" href="../../appdev.112/e23094/xdb06stt.htm#ADXDB0700"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14489"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.GENERATESCHEMA( 
   schemaname    IN  VARCHAR2,
   typename      IN  VARCHAR2,
   elementname   IN  VARCHAR2 := NULL,
   recurse       IN  BOOLEAN  := TRUE,
   annotate      IN  BOOLEAN  := TRUE,
   embedcoll     IN  BOOLEAN  := TRUE) 
RETURN SYS.XMLTYPE;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14490"></a>Parameters</p>
<div id="ARPLS70067" class="tblformal">
<p class="titleintable"><a id="sthref14491"></a><a id="sthref14492"></a>Table 177-10 GENERATESCHEMA Function Parameters</p>
<table class="cellalignment1229" title="GENERATESCHEMA Function Parameters" summary="This table describes the parameters of the DBMS_XMLSCHEMA.REGISTERSCHEMA subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t15">Parameter</th>
<th class="cellalignment1227" id="r1c2-t15">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t15" headers="r1c1-t15">
<p><code>schemaname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t15 r1c2-t15">
<p>Name of the database schema containing the type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t15" headers="r1c1-t15">
<p><code>typename</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t15 r1c2-t15">
<p>Name of the Oracle type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t15" headers="r1c1-t15">
<p><code>elementname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t15 r1c2-t15">
<p>The name of the top level element in the XML Schema. Defaults to <code>typename</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t15" headers="r1c1-t15">
<p><code>recurse</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t15 r1c2-t15">
<p>Whether or not to also generate schema for all types referred to by the type specified</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t15" headers="r1c1-t15">
<p><code>annotate</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t15 r1c2-t15">
<p>Whether or not to put the SQL annotations in the XML Schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t15" headers="r1c1-t15">
<p><code>embedcoll</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t15 r1c2-t15">
<p>Determines whether the collections should be embedded in the type which refers to them, or create a <code>complextype</code>. Cannot be <code>FALSE</code> if annotations are turned on</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14493"></a>Exceptions</p>
<div id="ARPLS70068" class="tblformal">
<p class="titleintable"><a id="sthref14494"></a><a id="sthref14495"></a>Table 177-11 GENERATESCHEMA Function Exceptions</p>
<table class="cellalignment1229" title="GENERATESCHEMA Function Exceptions" summary="This table describes exceptions raised by the DBMS_XMLSCHEMA.GENERATESCHEMA subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t16">Exception</th>
<th class="cellalignment1227" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t16" headers="r1c1-t16">
<p><code>ORA-31001</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t16 r1c2-t16">
<p>Invalid resource handle or path name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70069" class="refsect2"><a id="i1007548"></a>
<hr />
<h3 class="refsect2"><a id="sthref14496"></a>GENERATESCHEMAS Function</h3>
<p>This function generates XML schema(s) from an Oracle type name. It returns a collection of <code>XMLType</code>s, one XML Schema document for each database schema.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"XMLSCHEMA Storage and Query: Advanced" chapter of the <a class="olink ADXDB0700" href="../../appdev.112/e23094/xdb06stt.htm#ADXDB0700"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14497"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.GENERATESCHEMAS( 
   schemaname   IN  VARCHAR2,
   typename     IN  VARCHAR2,
   elementname  IN  VARCHAR2 := NULL,
   schemaurl    IN  VARCHAR2 := NULL,
   annotate     IN  BOOLEAN := TRUE,
   embedcoll    IN  BOOLEAN := TRUE ) 
 RETURN SYS.XMLTYPE;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14498"></a>Parameters</p>
<div id="ARPLS70070" class="tblformal">
<p class="titleintable"><a id="sthref14499"></a><a id="sthref14500"></a>Table 177-12 GENERATESCHEMAS Function Parameters</p>
<table class="cellalignment1229" title="GENERATESCHEMAS Function Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.GENERATESCHEMAS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t18">Parameter</th>
<th class="cellalignment1227" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t18" headers="r1c1-t18">
<p><code>schemaname</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t18 r1c2-t18">
<p>Name of the database schema containing the type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t18" headers="r1c1-t18">
<p><code>typename</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t18 r1c2-t18">
<p>Name of the Oracle type</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t18" headers="r1c1-t18">
<p><code>elementname</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t18 r1c2-t18">
<p>The name of the top level element in the XML Schema defaults to <code>typeName</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t18" headers="r1c1-t18">
<p><code>schemaurl</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t18 r1c2-t18">
<p>Specifies base URL where schemas will be stored, needed by top level schema for import statement</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t18" headers="r1c1-t18">
<p><code>annotate</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t18 r1c2-t18">
<p>Whether or not to put the SQL annotations in the XML Schema</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t18" headers="r1c1-t18">
<p><code>embedcoll</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t18 r1c2-t18">
<p>Determines whether the collections be embedded in the type which refers to them, or create a <code>complextype</code>. Cannot be <code>FALSE</code> if annotations are turned on</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14501"></a>Exceptions</p>
<div id="ARPLS70071" class="tblformal">
<p class="titleintable"><a id="sthref14502"></a><a id="sthref14503"></a>Table 177-13 GENERATESCHEMAS Function Exceptions</p>
<table class="cellalignment1229" title="GENERATESCHEMAS Function Exceptions" summary="This table describes exceptions raised by the DBMS_XMLSCHEMA.GENERATESCHEMAS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t19">Exception</th>
<th class="cellalignment1227" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t19" headers="r1c1-t19">
<p><code>ORA-31001</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t19 r1c2-t19">
<p>Invalid resource handle or path name</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70072" class="refsect2"><a id="BABEJBJE"></a>
<hr />
<h3 class="refsect2"><a id="sthref14504"></a>INPLACEEVOLVE Procedure</h3>
<p>This procedure evolves registered schemas by propagating schema changes to object types and tables.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14505"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.INPLACEEVOLVE(
   schemaURL    IN   VARCHAR2, 
   diffXML      IN   XMLType, 
   flags        IN   NUMBER);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14506"></a>Parameters</p>
<div id="ARPLS70073" class="tblformal">
<p class="titleintable"><a id="sthref14507"></a><a id="sthref14508"></a>Table 177-14 INPLACEEVOLVE Procedure Parameters</p>
<table class="cellalignment1229" title="INPLACEEVOLVE Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.INPLACEEVOLVE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t20">Parameter</th>
<th class="cellalignment1227" id="r1c2-t20">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t20" headers="r1c1-t20">
<p><code>schemaurl</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t20 r1c2-t20">
<p>URL of the schema to evolve</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t20" headers="r1c1-t20">
<p><code>diffXML</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t20 r1c2-t20">
<p>Changes to be applied to the schema. This is an XML document conforming to the <code>XDIFF</code> schema and specifies what changes need to be applied and the locations in the schema document where the changes are to be applied.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t20" headers="r1c1-t20">
<p><code>flags</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t20 r1c2-t20">
<p>The following bits may be set in this parameter to control the behavior of this procedure:</p>
<ul>
<li>
<p><code>INPLACE_EVOLVE</code> (value 1, meaning that bit 1 is on) &ndash; Perform in-place XML schema evolution: construct a new XML schema and validate it (against the XML schema for XML schemas); construct the DDL statements needed to evolve the instance-document disk structures, execute the DDL statements, and replace the old XML schema with the new.</p>
</li>
<li>
<p><code>INPLACE_TRACE</code> (value 2, meaning that bit 2 is on) &ndash; Perform all steps necessary for in-place evolution, except executing the DDL statements and overwriting the old XML schema with the new, then write both the DDL statements and the new XML schema to a trace file.</p>
</li>
</ul>
<p>That is, each of the bits constructs the new XML schema, validates it, and determines the steps needed to evolve the disk structures underlying the instance documents. In addition:</p>
<ul>
<li>
<p>Bit <code>INPLACE_EVOLVE</code> carries out those evolution steps and replaces the old XML schema with the new.</p>
</li>
<li>
<p>Bit <code>INPLACE_TRACE</code> saves the evolution steps and the new XML schema in a trace file (it does not carry out the evolution steps)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14509"></a>Exceptions</p>
<p>The procedure raises exceptions in the following cases:</p>
<ul>
<li>
<p>An error will be raised for invalid <code>XPATH</code> expressions and for <code>XDIFF</code> documents that do not conform to the xdiff schema.</p>
</li>
<li>
<p>Path expressions that are syntactically correct but result in an invalid node in the schema document will result in an error.</p>
</li>
<li>
<p>If the schema change makes the schema an ill-formed XML document or an invalid XML schema, this will raise an error.</p>
</li>
<li>
<p>Any errors resulting from <code>CREATE</code> <code>TYPE</code>, <code>ALTER</code> <code>TYPE</code> and like commands will generate error messages.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14510"></a>Usage Notes</p>
<ul>
<li>
<p>Users are required to backup all their data before attempting in-place evolution, as there is no rollback with this operation.</p>
</li>
<li>
<p>A user must register their new XML schema with the database using the <a href="#i1003177">REGISTERSCHEMA Procedures</a> and the <a href="#i1003294">REGISTERURI Procedure</a> at a schema URL that is different from that of the one to be evolved. If the new schema registers successfully and is usable, only then should the user attempt to evolve the existing schema to the new schema by means of this subprogram. If the registration of the new schema is successful, then the user must delete this schema (and all its dependent objects) before attempting to evolve the schema at the old schema URL.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70074" class="refsect2"><a id="BABEGJDD"></a>
<hr />
<h3 class="refsect2"><a id="sthref14511"></a>PURGESCHEMA Procedure</h3>
<p>This procedure removes the XML schema.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"XMLSCHEMA Storage and Query: Advanced" chapter of the <a class="olink ADXDB0700" href="../../appdev.112/e23094/xdb06stt.htm#ADXDB0700"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14512"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.PURGESCHEMA( 
   schemaid   IN  RAW);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14513"></a>Parameters</p>
<div id="ARPLS70075" class="tblformal">
<p class="titleintable"><a id="sthref14514"></a><a id="sthref14515"></a>Table 177-15 PURGESCHEMA Procedure Parameters</p>
<table class="cellalignment1229" title="PURGESCHEMA Procedure Parameters" summary="This table describes parameters of the DBMS_XMLSCHEMA.PURGESCHEMAS subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t22">Parameter</th>
<th class="cellalignment1227" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t22" headers="r1c1-t22">
<p><code>schemaid</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t22 r1c2-t22">
<p>ID of the schema to be purged</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14516"></a>Usage Notes</p>
<ul>
<li>
<p>The schema should have been originally registered for binary encoding and should have been deleted in the <code>HIDE</code> mode.</p>
</li>
<li>
<p>Once a schema has been deleted in <code>HIDE</code> mode, it continues to exist in the XML DB dictionary and is used for decoding already encoded documents. The user invokes this interface when there are no stored instances encoded with this schema.</p>
</li>
<li>
<p>Once the schema is purged, any space used by that schema will be reclaimed and documents encoded using the schema will raise an error if an attempt is made to decode them.</p>
</li>
<li>
<p>The Schema ID can be obtained from the catalog views.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70076" class="refsect2"><a id="i1003177"></a>
<hr />
<h3 class="refsect2"><a id="sthref14517"></a>REGISTERSCHEMA Procedures</h3>
<p>This procedure registers the specified schema for use by the database. The procedure is overloaded. The different functionality of each form of syntax is presented along with the definition.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
As of release 11.2.0.2 the <code>genbean</code> parameter is deprecated. Oracle recommends that you do not use this parameter in new applications. Support for this feature is for backward compatibility only.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"XMLSCHEMA Storage and Query: Basic" chapter of the <a class="olink ADXDB0600" href="../../appdev.112/e23094/xdb05sto.htm#ADXDB0600"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14518"></a>Syntax</p>
<p>Registers a schema specified as a <code>VARCHAR2</code>:</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
    schemaurl        IN  VARCHAR2,
    schemadoc        IN  VARCHAR2,
    local            IN  BOOLEAN := TRUE,
    gentypes         IN  BOOLEAN := TRUE,
    genbean          IN  BOOLEAN := FALSE,
    gentables        IN  BOOLEAN := TRUE,
    force            IN  BOOLEAN := FALSE,
    owner            IN  VARCHAR2 := NULL,
    enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
    options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as a <code>BFILE</code>. The contents of the schema document must be in the database character set:</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2,
   schemadoc        IN  BFILE,
   local            IN  BOOLEAN := TRUE,
   gentypes         IN  BOOLEAN := TRUE,
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as a <code>BFILE</code> and identifies the character set id of the schema document:</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  BFILE, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := TRUE,
   gentables        IN  BOOLEAN := TRUE,
   force            IN  BOOLEAN := TRUE,
   owner            IN  VARCHAR2 := '',
   csid             IN  NUMBER,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as a <code>BLOB</code>. The contents of the schema document must be in the database character set:</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  BLOB, 
   local            IN  BOOLEAN := TRUE, 
   genTypes         IN  BOOLEAN := TRUE, 
   genBean          IN  BOOLEAN := FASLE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as a <code>BLOB</code> and identifies the character set id of the schema document:</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  BLOB, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := TRUE,
   gentables        IN  BOOLEAN := TRUE,
   force            IN  BOOLEAN := TRUE,
   owner            IN  VARCHAR2 := '',
   csid             IN  NUMBER,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as a <code>CLOB</code></p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  CLOB, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as an <code>XMLTYPE</code>.</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  SYS.XMLTYPE, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
 
</pre>
<p>Registers the schema specified as a <code>BLOB</code>. The contents of the schema document must be in the database character set:</p>
<pre>
DBMS_XMLSCHEMA.REGISTERSCHEMA(
   schemaurl        IN  VARCHAR2, 
   schemadoc        IN  SYS.URIType, 
   local            IN  BOOLEAN := TRUE, 
   gentypes         IN  BOOLEAN := TRUE, 
   genbean          IN  BOOLEAN := FALSE,
   force            IN  BOOLEAN := FALSE,
   owner            IN  VARCHAR2 := NULL,
   enablehierarchy  IN  PLS_INTEGER := DBMS_XMLSCHEMA.ENABLE_CONTENTS,
   options          IN  PLS_INTEGER := 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14519"></a>Parameters</p>
<div id="ARPLS70077" class="tblformal">
<p class="titleintable"><a id="sthref14520"></a><a id="sthref14521"></a>Table 177-16 REGSITERSCHEMA Procedure Parameters</p>
<table class="cellalignment1229" title="REGSITERSCHEMA Procedure Parameters" summary="This table describes the parameters of the DBMS_XMLSCHEMA.REGISTERSCHEMA subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t25">Parameter</th>
<th class="cellalignment1227" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t25" headers="r1c1-t25">
<p><code>schemaurl</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t25 r1c2-t25">
<p>URL that uniquely identifies the schema document. This value is used to derive the path name of the schema document within the database hierarchy. Can be used inside <code>schemalocation</code> attribute of XML Schema import element.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t25" headers="r1c1-t25">
<p><code>schemadoc</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t25 r1c2-t25">
<p>A valid XML schema document</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t25" headers="r1c1-t25">
<p><code>local</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t25 r1c2-t25">
<p>Is this a local or global schema?</p>
<ul>
<li>
<p>By default, all schemas are registered as local schemas, under <code>/sys/schemas/&lt;username&gt;/...</code></p>
</li>
<li>
<p>If a schema is registered as global, it is added under <code>/sys/schemas/PUBLIC/...</code></p>
</li>
</ul>
<p>You need write privileges on the directory to be able to register a schema as global.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t25" headers="r1c1-t25">
<p><code>gentypes</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t25 r1c2-t25">
<p>Determines whether the schema compiler generates object types. By default, <code>TRUE.</code> If you use binary XML, you must be set <code>gentypes</code> to <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t25" headers="r1c1-t25">
<p><code>genbean</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t25 r1c2-t25">
<p>Determines whether the schema compiler generates Java beans. By default, <code>FALSE</code>. Oracle recommends that this parameter always be set to <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t25" headers="r1c1-t25">
<p><code>gentables</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t25 r1c2-t25">
<p>Determines whether the schema compiler generates default tables. By default, <code>TRUE</code></p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t25" headers="r1c1-t25">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t25 r1c2-t25">
<p>If this parameter is set to <code>TRUE</code>, the schema registration will not raise errors. Instead, it creates an invalid XML schema object in case of any errors. By default, the value of this parameter is <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t25" headers="r1c1-t25">
<p><code>owner</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t25 r1c2-t25">
<p>This parameter specifies the name of the database user owning the XML schema object. By default, the user registering the schema owns the XML schema object. This parameter can be used to register a XML schema to be owned by a different database user.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t25" headers="r1c1-t25">
<p><code>csid</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t25 r1c2-t25">
<p>Identifies the character set of the input schema document. If this value is <code>0</code>, the schema document's encoding is determined by the current rule for "text/xml" MIME type.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r11c1-t25" headers="r1c1-t25">
<p><code>enablehierarchy</code></p>
</td>
<td class="cellalignment1228" headers="r11c1-t25 r1c2-t25">
<ul>
<li>
<p><code>ENABLE_HIERARCHY_NONE</code> - enable hierarchy will not be called on any tables created while registering that schema</p>
</li>
<li>
<p><code>ENABLE_HIERARCHY_CONTENTS</code> - enable hierarchy will be called for all tables created during schema registration with <code>hierarchy_type</code> as <code>DBMS_XDBZ</code>.<code>ENABLE_CONTENTS</code>. This is the default.</p>
</li>
<li>
<p><code>ENABLE_HIERARCHY_RESMETADATA</code> - enable hierarchy will be called on all tables created during schema registration with <code>hierarchy_type</code> as <code>DBMS_XDBZ</code>.<code>ENABLE_RESMETADATA</code>. Users should pass in <code>DBMS_XMLSCHEMA</code>.<code>ENABLE_RESMETADATA</code> for schemas they intend to use as resource metadata tables.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r12c1-t25" headers="r1c1-t25">
<p><code>options</code></p>
</td>
<td class="cellalignment1228" headers="r12c1-t25 r1c2-t25">
<p>Additional options to specify how the schema should be registered. The various options are represented as bits of an integer and the options parameter should be constructed by doing a <code>BITOR</code> of the desired bits. Possible bits:</p>
<ul>
<li>
<p><code>REGISTER_NODOCID</code> - this will suppress the creation of the <code>DOCID</code> column for out of line tables. This is a storage optimization which might be desirable when we do not need to join back to the document table (for example if we do not care about rewriting certain queries that could be rewritten by making use of the <code>DOCID</code> column)</p>
</li>
<li>
<p><code>REGISTER_BINARYXML</code> - Register the schema for Binary XML</p>
</li>
<li>
<p><code>REGISTER_NT_AS_IOT</code> - Store nested tables created during schema registration as index organized tables. The default is to store nested tables as heap tables</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" -->
<div id="ARPLS70078" class="refsect2"><a id="i1003294"></a>
<hr />
<h3 class="refsect2"><a id="sthref14522"></a>REGISTERURI Procedure</h3>
<p>This procedure registers an XML Schema specified by a URI name.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
As of release 11.2.0.2 the <code>genbean</code> parameter is deprecated. Oracle recommends that you do not use this parameter in new applications. Support for this feature is for backward compatibility only.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14523"></a>Syntax</p>
<pre>
DBMS_XMLSCHEMA.REGISTERURI(
   schemaurl      IN  VARCHAR2,
   schemadocuri   IN  VARCHAR2,
   local          IN  BOOLEAN := TRUE,
   gentypes       IN  BOOLEAN := TRUE,
   genbean        IN  BOOLEAN := FALSE,
   gentables      IN  BOOLEAN := TRUE,
   force          IN  BOOLEAN := FALSE,
   owner          IN  VARCHAR2 := NULL, 
   options          IN  PLS_INTEGER := 0);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref14524"></a>Parameters</p>
<div id="ARPLS70079" class="tblformal">
<p class="titleintable"><a id="sthref14525"></a><a id="sthref14526"></a>Table 177-17 REGISTERURI Procedure Parameters</p>
<table class="cellalignment1229" title="REGISTERURI Procedure Parameters" summary="This table describes the parameters of the DBMS_XMLSCHEMA.REGISTERURI subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t27">Parameter</th>
<th class="cellalignment1227" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t27" headers="r1c1-t27">
<p><code>schemaurl</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t27 r1c2-t27">
<p>Uniquely identifies the schema document. Can be used inside <code>schemaLocation</code> attribute of XML Schema import element.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t27" headers="r1c1-t27">
<p><code>schemadocuri</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t27 r1c2-t27">
<p>Pathname (URI) corresponding to the physical location of the schema document. The URI path could be based on HTTP, FTP, DB or Oracle XML DB protocols. This function constructs a <code>URIType</code> instance using the <code>urifactory</code>, and invokes the <a href="#i1003177">REGISTERSCHEMA Procedures</a>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t27" headers="r1c1-t27">
<p><code>local</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t27 r1c2-t27">
<p>Determines whether this is a local or global schema. By default, all schemas are registered as local schemas, under <code>/sys/schemas/ &lt;username&gt;/...</code> If a schema is registered as global, it is added under <code>/sys/schemas/PUBLIC/...</code> The user needs write privileges on the directory to register a global schema.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t27" headers="r1c1-t27">
<p><code>gentypes</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t27 r1c2-t27">
<p>Determines whether the compiler generate object types. By default, <code>TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r6c1-t27" headers="r1c1-t27">
<p><code>genbean</code></p>
</td>
<td class="cellalignment1228" headers="r6c1-t27 r1c2-t27">
<p>Determines whether the compiler generate Java beans. By default, <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r7c1-t27" headers="r1c1-t27">
<p><code>gentables</code></p>
</td>
<td class="cellalignment1228" headers="r7c1-t27 r1c2-t27">
<p>Determines whether the compiler generate default tables. <code>TRUE</code> by default.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r8c1-t27" headers="r1c1-t27">
<p><code>force</code></p>
</td>
<td class="cellalignment1228" headers="r8c1-t27 r1c2-t27">
<p><code>TRUE:</code> schema registration will not raise errors. Instead, it creates an invalid XML schema object in case of any errors. By default, the value of this parameter is <code>FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r9c1-t27" headers="r1c1-t27">
<p><code>owner</code></p>
</td>
<td class="cellalignment1228" headers="r9c1-t27 r1c2-t27">
<p>This parameter specifies the name of the database user owning the XML schema object. By default, the user registering the schema owns the XML schema object. This parameter can be used to register a XML schema to be owned by a different database user.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r10c1-t27" headers="r1c1-t27">
<p><code>options</code></p>
</td>
<td class="cellalignment1228" headers="r10c1-t27 r1c2-t27">
<p>Additional options to specify how the schema should be registered. The various options are represented as bits of an integer and the options parameter should be constructed by doing a <code>BITOR</code> of the desired bits. Possible bits:</p>
<ul>
<li>
<p><code>REGISTER_NODOCID</code> - this will suppress the creation of the <code>DOCID</code> column for out of line tables. This is a storage optimization which might be desirable when we do not need to join back to the document table (for example if we do not care about rewriting certain queries that could be rewritten by making use of the <code>DOCID</code> column)</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="d_xmlsav.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="d_xmlstr.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
