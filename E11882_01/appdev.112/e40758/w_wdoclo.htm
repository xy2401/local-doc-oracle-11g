<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>WPG_DOCLOAD</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-19T18:56:12Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference" />
<meta name="dcterms.identifier" content="E40758-03" />
<meta name="dcterms.isVersionOf" content="ARPLS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="u_url.htm" title="Previous" type="text/html" />
<link rel="Next" href="t_anydat.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40758.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">244/265</span> <!-- End Header -->
<div id="ARPLS200" class="chapter"><a id="BJFHJADE"></a>
<h1 class="chapter"><span class="secnum">240</span> WPG_DOCLOAD</h1>
<p>The <code><a id="sthref18256"></a>WPG_DOCLOAD</code> package provides an interface to download files, <code>BLOB</code>s and <code>BFILE</code>s.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
For more information about implementation of this package:
<ul>
<li>
<p><a class="olink HSADM" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=HSADM"><span class="italic">Oracle Fusion Middleware Administrator's Guide for Oracle HTTP Server</span></a></p>
</li>
<li>
<p><a class="olink YPMOD" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=YPMOD"><span class="italic">Oracle Fusion Middleware User's Guide for mod_plsql</span></a></p>
</li>
</ul>
</div>
<p>The chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BJFHGDJA">Using WPG_DOCLOAD</a></p>
<ul>
<li>
<p>Constants</p>
</li>
</ul>
</li>
<li>
<p><a href="#i998678">Summary of WPG_DOCLOAD Subprograms</a></p>
</li>
</ul>
<div class="refentry"><a id="BJFHGDJA"></a>
<hr />
<div id="ARPLS71593" class="refsect1">
<h2 class="refsect1">Using WPG_DOCLOAD</h2>
<ul>
<li>
<p><a href="#i998679">Constants</a></p>
</li>
</ul>
<div id="ARPLS71594" class="refsect2"><a id="i998679"></a>
<hr />
<h3 class="refsect2">Constants</h3>
<ul>
<li>
<p><a href="#BJFECBFH">NAME_COL_LEN</a></p>
</li>
<li>
<p><a href="#i998794">MIMET_COL_LEN</a></p>
</li>
<li>
<p><a href="#i998795">MAX_DOCTABLE_NAME_LEN</a></p>
</li>
</ul>
<div id="ARPLS71595" class="refsect3"><a id="BJFECBFH"></a>
<h4 class="refsect3">NAME_COL_LEN</h4>
<p>The <code>NAME</code> column in your document table must be the same as the value of <code>name_col_len</code>.</p>
<pre>
name_col_len CONSTANT pls_integer := 64;
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS71596" class="refsect3"><a id="i998794"></a>
<h4 class="refsect3">MIMET_COL_LEN</h4>
<p>The <code>MIME_TYPE</code> column in your document table must be the same as the value of <code>mimet_col_len</code>.</p>
<pre>
mimet_col_len CONSTANT pls_integer := 48;
</pre></div>
<!-- class="refsect3" -->
<div id="ARPLS71597" class="refsect3"><a id="i998795"></a>
<h4 class="refsect3">MAX_DOCTABLE_NAME_LEN</h4>
<p>The name length of your document table must be less than <code>max_doctable_name_len</code>.</p>
<pre>
max_doctable_name_len CONSTANT pls_integer := 256;
</pre></div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="i998678"></a>
<hr />
<div id="ARPLS71598" class="refsect1">
<h2 class="refsect1">Summary of WPG_DOCLOAD Subprograms</h2>
<div id="ARPLS71599" class="tblformal">
<p class="titleintable"><a id="sthref18257"></a><a id="sthref18258"></a>Table 240-1 WPG_DOCLOAD Package Subprograms</p>
<table class="cellalignment1229" title="WPG_DOCLOAD Package Subprograms " summary="This table lists the WPG_DOCLOAD subprogram and briefly describes it." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t3">Subprogram</th>
<th class="cellalignment1227" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t3" headers="r1c1-t3">
<p><a href="#BJFFABDC">DOWNLOAD_FILE Procedures</a></p>
</td>
<td class="cellalignment1228" headers="r2c1-t3 r1c2-t3">
<p>Downloads files, <code>BLOBS</code> and <code>BFILES</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ARPLS71600" class="refsect2"><a id="BJFFABDC"></a>
<hr />
<h3 class="refsect2"><a id="sthref18259"></a>DOWNLOAD_FILE Procedures</h3>
<p>There are three versions of this procedure:</p>
<ul>
<li>
<p>The first version downloads files and is invoked from within a document download procedure to signal the PL/SQL Gateway that <code>p_filename</code> is to be downloaded from the document table to the client's browser.</p>
</li>
<li>
<p>The second version can be called from within any procedure to signal the PL/SQL Gateway that <code>p_blob</code> is to be downloaded to the client's browser.</p>
</li>
<li>
<p>The third version can be called from within any procedure to signal the PL/SQL Gateway that <code>p_bfile</code> is to be downloaded to the client's browser.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref18260"></a>Syntax</p>
<pre>
WPG_DOCLOAD.DOWNLOAD_FILE(
   p_filename      IN             VARCHAR2, 
   p_bcaching      IN             BOOLEAN DEFAULT TRUE);
</pre>
<pre>
WPG_DOCLOAD.DOWNLOAD_FILE(
   p_blob          IN OUT NOCOPY  BLOB);

WPG_DOCLOAD.DOWNLOAD_FILE(
   p_bfile         IN OUT         BFILE);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref18261"></a>Parameters</p>
<div id="ARPLS71601" class="tblformal">
<p class="titleintable"><a id="sthref18262"></a><a id="sthref18263"></a>Table 240-2 DOWNLOAD_FILE Procedure Parameters</p>
<table class="cellalignment1229" title="DOWNLOAD_FILE Procedure Parameters " summary="This table describes the Parameters of the UTL_URL.DOWNLOAD_FILE subprogram." dir="ltr">
<thead>
<tr class="cellalignment1220">
<th class="cellalignment1227" id="r1c1-t4">Parameter</th>
<th class="cellalignment1227" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r2c1-t4" headers="r1c1-t4">
<p><code>p_filename</code></p>
</td>
<td class="cellalignment1228" headers="r2c1-t4 r1c2-t4">
<p>The file to download from the document table.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r3c1-t4" headers="r1c1-t4">
<p><code>p_blob</code></p>
</td>
<td class="cellalignment1228" headers="r3c1-t4 r1c2-t4">
<p>The <code>BLOB</code> to download.</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r4c1-t4" headers="r1c1-t4">
<p><code>p_bfile</code></p>
</td>
<td class="cellalignment1228" headers="r4c1-t4 r1c2-t4">
<p>The <code>BFILE</code> to download (see <a href="#i998646">Usage Notes</a>).</p>
</td>
</tr>
<tr class="cellalignment1220">
<td class="cellalignment1228" id="r5c1-t4" headers="r1c1-t4">
<p><code>p_bcaching</code></p>
</td>
<td class="cellalignment1228" headers="r5c1-t4 r1c2-t4">
<p>Whether browser caching is enabled (see <a href="#i998646">Usage Notes</a>).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="i998646"></a>Usage Notes</p>
<ul>
<li>
<p>Normally, a document will be downloaded to the browser unless the browser sends an 'If-Modified-Since' header to the gateway indicating that it has the requested document in its cache. In that case, the gateway will determine if the browser's cached copy is up to date, and if it is, it will send an HTTP 304 status message to the browser indicating that the browser should display the cached copy. However, because a document URL and a document do not necessarily have a one-to-one relationship in the PL/SQL Web Gateway, in some cases it may be undesirable to have the cached copy of a document displayed. In those cases, the <code>p_bcaching</code> parameter should be set to FALSE to indicate to the gateway to ignore the 'If-Modified-Since' header, and download the document.</p>
</li>
<li>
<p><code>p_bfile</code> and <code>p_blob</code> are declared as <code>IN</code> <code>OUT</code> because the locator is initially opened to check for file accessibility and existence. The open operation can only be performed if the locator is writable and readable.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1219">
<tr>
<td class="cellalignment1228">
<table class="cellalignment1224">
<tr>
<td class="cellalignment1223"><a href="u_url.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1223"><a href="t_anydat.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1231">
<table class="cellalignment1222">
<tr>
<td class="cellalignment1223"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1223"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1223"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1223"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1223"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1223"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
