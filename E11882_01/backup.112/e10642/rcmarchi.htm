<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Recovery Manager Architecture</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T14:1:10Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery User's Guide" />
<meta name="dcterms.identifier" content="E10642-08" />
<meta name="dcterms.isVersionOf" content="BRADV" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="part_pln.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmcnctg.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10642.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/47</span> <!-- End Header -->
<div id="BRADV001" class="chapter"><a id="BGBGEHJJ"></a> <a id="i1007102"></a>
<h1 class="chapter"><span class="secnum">3</span> Recovery Manager Architecture</h1>
<p>This chapter describes the Recovery Manager (RMAN) interface and the basic components of the RMAN environment. This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDFCDEJ">About the RMAN Environment</a></p>
</li>
<li>
<p><a href="#CHDEDBEB">RMAN Command-Line Client</a></p>
</li>
<li>
<p><a href="#i1012864">RMAN Channels</a></p>
</li>
<li>
<p><a href="#CHDBEGAD">RMAN Repository</a></p>
</li>
<li>
<p><a href="#CHDJBBEC">Media Management</a></p>
</li>
<li>
<p><a href="#CHDGFGAA">Fast Recovery Area</a></p>
</li>
<li>
<p><a href="#CHDIFGFH">RMAN in a Data Guard Environment</a></p>
</li>
</ul>
<a id="CHDFCDEJ"></a>
<div id="BRADV101" class="sect1">
<h2 class="sect1">About the RMAN Environment</h2>
<p>The Recovery Manager environment consists of the various applications and databases that play a role in a backup and recovery strategy.</p>
<p><a href="#CHDBEBIE">Table 3-1</a> lists some components in a typical RMAN environment.</p>
<div id="BRADV144" class="tblruleformalwide">
<p class="titleintable"><a id="sthref180"></a><a id="CHDBEBIE"></a>Table 3-1 Components of the RMAN Environment</p>
<table class="cellalignment1945" title="Components of the RMAN Environment" summary="Lists possible components of the RMAN environment" dir="ltr">
<thead>
<tr class="cellalignment1934">
<th class="cellalignment1941" id="r1c1-t2">Component</th>
<th class="cellalignment1941" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r2c1-t2" headers="r1c1-t2">
<p><a id="sthref181"></a><a href="glossary.htm#CHDDDAEB"><span class="xrefglossterm">RMAN client</span></a></p>
</td>
<td class="cellalignment1942" headers="r2c1-t2 r1c2-t2">
<p>The client application that manages backup and recovery operations for a target database. The RMAN client can use Oracle Net to connect to a target database, so it can be located on any host that is connected to the target host through Oracle Net.</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r3c1-t2" headers="r1c1-t2">
<p><a id="sthref182"></a><a href="glossary.htm#i433583"><span class="xrefglossterm">target database</span></a></p>
</td>
<td class="cellalignment1942" headers="r3c1-t2 r1c2-t2">
<p>A database containing the control files, datafiles, and optional archived redo logs that RMAN backs up or restores. RMAN uses the target database control file to gather metadata about the target database and to store information about its own operations. The work of backup and recovery is performed by server sessions running on the target database.</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r4c1-t2" headers="r1c1-t2">
<p><a id="sthref183"></a><a href="glossary.htm#i433287"><span class="xrefglossterm">recovery catalog database</span></a></p>
</td>
<td class="cellalignment1942" headers="r4c1-t2 r1c2-t2">
<p>A database containing a <a href="glossary.htm#i433280"><span class="xrefglossterm">recovery catalog</span></a>, which contains metadata that RMAN uses to perform backup and recovery. You can create one recovery catalog that contains the RMAN metadata for multiple target databases. Unless you are using RMAN with a <a href="glossary.htm#CHDEJBIJ"><span class="xrefglossterm">physical standby database</span></a>, a recovery catalog is optional when using RMAN because RMAN stores its metadata in the control file of each target database.</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r5c1-t2" headers="r1c1-t2">
<p><a href="glossary.htm#CHDCCBAG"><span class="xrefglossterm">recovery catalog schema</span></a></p>
</td>
<td class="cellalignment1942" headers="r5c1-t2 r1c2-t2">
<p>The user within the recovery catalog database that owns the metadata tables maintained by RMAN. RMAN periodically propagates metadata from the target database control file into the recovery catalog.</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r6c1-t2" headers="r1c1-t2">
<p><a href="glossary.htm#CHDEJBIJ"><span class="xrefglossterm">physical standby database</span></a></p>
</td>
<td class="cellalignment1942" headers="r6c1-t2 r1c2-t2">
<p>A copy of the primary database that is updated with archived redo logs generated by the primary database. A physical standby database has the same <code dir="ltr">DBID</code> and <code dir="ltr">DB_NAME</code> values as the primary database, but a different <a class="olink REFRN10242" href="../../server.112/e40402/initparams070.htm#REFRN10242"><code dir="ltr">DB_UNIQUE_NAME</code></a>. You can fail over to the standby database if the primary database becomes inaccessible.</p>
<p>RMAN can create, back up, or recover a <a id="sthref184"></a>standby database. Backups that you make at a standby database are usable at primary database or another standby database for same production database. The recovery catalog is required when you use RMAN in the Data Guard environment.</p>
<p><span class="bold">Note:</span> A logical standby database is treated as a separate database by RMAN because it has a different DBID from its primary database.</p>
<p><a class="olink SBYDB04700" href="../../server.112/e41134/rman.htm#SBYDB04700"><span class="bold">See Also:</span> <span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to use RMAN in a Data Guard environment</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r7c1-t2" headers="r1c1-t2">
<p><a id="sthref185"></a><a href="glossary.htm#CHDBEFHG"><span class="xrefglossterm">duplicate database</span></a></p>
</td>
<td class="cellalignment1942" headers="r7c1-t2 r1c2-t2">
<p>A copy of the primary database that you can use for testing purposes. The DBID is different from the database from which it was created.</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r8c1-t2" headers="r1c1-t2">
<p><a id="sthref186"></a><a href="glossary.htm#i999320"><span class="xrefglossterm">fast recovery area</span></a></p>
</td>
<td class="cellalignment1942" headers="r8c1-t2 r1c2-t2">
<p>A disk location that you can use to store recovery-related files such as control file and online redo log copies, archived redo logs, <a href="glossary.htm#CHDFHAAE"><span class="xrefglossterm">flashback logs</span></a>, and RMAN backups. Oracle Database and RMAN manage the files in the fast recovery area automatically.</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r9c1-t2" headers="r1c1-t2">
<p><a id="sthref187"></a><a href="glossary.htm#i432922"><span class="xrefglossterm">media manager</span></a></p>
</td>
<td class="cellalignment1942" headers="r9c1-t2 r1c2-t2">
<p>A vendor-specific application that enables RMAN to back up to a storage system such as tape</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r10c1-t2" headers="r1c1-t2">
<p><a id="sthref188"></a><a href="glossary.htm#CHDIEBEA"><span class="xrefglossterm">media management catalog</span></a></p>
</td>
<td class="cellalignment1942" headers="r10c1-t2 r1c2-t2">
<p>A vendor-specific repository of metadata about a media management application</p>
</td>
</tr>
<tr class="cellalignment1934">
<td class="cellalignment1942" id="r11c1-t2" headers="r1c1-t2">
<p>Oracle Enterprise Manager</p>
</td>
<td class="cellalignment1942" headers="r11c1-t2 r1c2-t2">
<p>A browser-based interface to the database, including backup and recovery through RMAN</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformalwide" -->
<p>The only required components in an RMAN environment are a target database and RMAN client, but most real-world configurations are more complicated. For example, you use an RMAN client connecting to multiple media managers and multiple target databases and auxiliary databases, all accessed through Enterprise Manager.</p>
<p><a href="#CHDHICBA">Figure 3-1</a> illustrates components in a possible RMAN environment. The figure shows that the primary database, standby database, and recovery catalog databases all reside on different computers. The primary and standby database hosts use a locally attached tape drive. The RMAN client and Enterprise Manager console run on a separate computer.</p>
<div id="BRADV559" class="figure">
<p class="titleinfigure"><a id="CHDHICBA"></a>Figure 3-1 Sample RMAN Environment</p>
<img width="672" height="470" src="img/bradv038.gif" alt="Description of Figure 3-1 follows" /><br />
<a id="sthref189" href="img_text/bradv038.htm">Description of "Figure 3-1 Sample RMAN Environment"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> to learn about Oracle Net</div>
</div>
<!-- class="sect1" -->
<a id="CHDEDBEB"></a>
<div id="BRADV1002" class="sect1">
<h2 class="sect1">RMAN Command-Line Client<a id="sthref190"></a></h2>
<p><a id="sthref191"></a><a id="sthref192"></a>Use the <a id="sthref193"></a>RMAN command-line client to enter commands that you can use to manage all aspects of backup and recovery operations. RMAN uses a command language interpreter that can execute commands in interactive or batch mode. Even when you use the backup and recovery features in Enterprise Manager that are built on top of RMAN, an RMAN client executes behind the scenes.</p>
</div>
<!-- class="sect1" -->
<a id="i1012864"></a>
<div id="BRADV105" class="sect1">
<h2 class="sect1">RMAN Channels</h2>
<p><a id="sthref194"></a><a id="sthref195"></a>The RMAN client directs database server sessions to perform all backup and recovery tasks. What constitutes a session depends on the operating system. For example, on Linux, a server session corresponds to a server process, whereas on Windows it corresponds to a thread within the database service.</p>
<p>The RMAN client itself does not perform backup, restore, or recovery operations. When you connect the RMAN client to a target database, RMAN allocates server sessions on the target instance and directs them to perform the operations.</p>
<p><a id="sthref196"></a><a id="sthref197"></a><a id="sthref198"></a><a id="sthref199"></a>An RMAN <a id="sthref200"></a><a id="sthref201"></a><a href="glossary.htm#i432240"><span class="xrefglossterm">channel</span></a> represents one stream of data to a device, and corresponds to one database server session. The channel reads data into PGA memory, processes it, and writes it to the output device. See <a href="rcmtunin.htm#i1006104">"Basic Concepts of RMAN Performance Tuning"</a> for a low-level description of how channels work.</p>
<p>Most RMAN commands are executed by channels, which must be either configured to persist across RMAN sessions, or manually allocated in each <a id="sthref202"></a><a href="glossary.htm#CHDHHCJB"><span class="xrefglossterm">RMAN session</span></a>. As illustrated in <a href="#i1006208">Figure 3-2</a>, a channel establishes a connection from the RMAN client to a target or auxiliary database instance by starting a server session on the instance.</p>
<div id="BRADV560" class="figure">
<p class="titleinfigure"><a id="i1006208"></a>Figure 3-2 Channel Allocation</p>
<img width="474" height="240" src="img/bradv030.gif" alt="Description of Figure 3-2 follows" /><br />
<a id="sthref203" href="img_text/bradv030.htm">Description of "Figure 3-2 Channel Allocation"</a><br />
<br /></div>
<!-- class="figure" -->
<div id="BRADV89373" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref204"></a>
<h3 class="sect2">Channels and Devices</h3>
<p>The RMAN-supported device types are disk and <a id="sthref205"></a><a href="glossary.htm#CHDCCBFI"><span class="xrefglossterm">SBT</span></a> (system backup to tape). An SBT device is controlled by a third-party <a id="sthref206"></a><a href="glossary.htm#i432922"><span class="xrefglossterm">media manager</span></a>. Typically, SBT devices are tape libraries and tape drives.</p>
<p>If you use a disk channel for a backup, then the channel creates the backup on disk in the file name space of the target database instance creating the backup. You can make a backup on any device that can store a data file. RMAN does not call a media manager when making disk backups.</p>
<p>To create backups on nondisk media, you must use media management software such as Oracle Secure Backup and allocate channels supported by this software. RMAN contacts the media manager whenever the channel type allocated is not disk. How and when the SBT channels cause the media manager to allocate resources is vendor-specific. Some media managers allocate resources when you issue the command; others do not allocate resources until you open a file for reading or writing.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rcmconfb.htm#i1017851">"Configuring the Default Device for Backups: Disk or SBT"</a></div>
</div>
<!-- class="sect2" -->
<div id="BRADV89374" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref207"></a>
<h3 class="sect2">Automatic and Manual Channels</h3>
<p>You can use the <a class="olink RCMRF113" href="../../backup.112/e10643/rcmsynta010.htm#RCMRF113"><code dir="ltr">CONFIGURE CHANNEL</code></a> command to configure channels for use with disk or tape across RMAN sessions. This technique is known as <a id="sthref208"></a><a href="glossary.htm#i432011"><span class="xrefglossterm">automatic channel allocation</span></a>. RMAN comes preconfigured with one <code dir="ltr">DISK</code> channel that you can use for backups to disk.</p>
<p>When you run a command that can use automatic channels, RMAN automatically allocates the channels with the options that you specified in the <code dir="ltr">CONFIGURE</code> command. <a id="sthref209"></a><a id="sthref210"></a>For the <a class="olink RCMRF107" href="../../backup.112/e10643/rcmsynta007.htm#RCMRF107"><code dir="ltr">BACKUP</code></a> command, RMAN allocates only the type of channel required to back up to the specified media. For the <a class="olink RCMRF149" href="../../backup.112/e10643/rcmsynta2008.htm#RCMRF149"><code dir="ltr">RESTORE</code></a> command and <a id="sthref211"></a><a href="glossary.htm#CHDJGAGC"><span class="xrefglossterm">RMAN maintenance commands</span></a>, RMAN allocates all necessary channels for the device types required to execute the command. RMAN determines the names for automatic channels.</p>
<p>You can also manually allocate channels. Each manually allocated channel uses a separate connection to the database. <a id="sthref212"></a><a id="sthref213"></a><a id="sthref214"></a>When you manually allocate a channel, you give it a user-defined name such as <code dir="ltr">dev1</code> or <code dir="ltr">ch2</code>.</p>
<p>The number of channels available for use with a device when you run a command determines whether RMAN reads from or write to this device in parallel while performing the command. When the work is done in parallel, the backup of the files is done by multiple channels. Each channel may back up multiple files, but unless a <a id="sthref215"></a><a id="sthref216"></a><a href="glossary.htm#BGBCJCBC"><span class="xrefglossterm">multisection backup</span></a> is performed, no file is backed up by more than one channel.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RCMRF102" href="../../backup.112/e10643/rcmsynta004.htm#RCMRF102"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code dir="ltr">ALLOCATE</code> <code dir="ltr">CHANNEL</code> syntax</p>
</li>
<li>
<p><a class="olink RCMRF103" href="../../backup.112/e10643/rcmsynta005.htm#RCMRF103"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> on <code dir="ltr">ALLOCATE</code> <code dir="ltr">CHANNEL</code> <code dir="ltr">FOR</code> <code dir="ltr">MAINTENANCE</code></p>
</li>
<li>
<p><a href="rcmconfb.htm#CHDCBAHE">"Configuring Channels for Disk"</a> and <a href="rcmconfb.htm#i1006801">"Configuring SBT Channels for Use with a Media Manager"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBEGAD"></a>
<div id="BRADV103" class="sect1">
<h2 class="sect1">RMAN Repository</h2>
<p><a id="sthref217"></a><a id="sthref218"></a><a id="sthref219"></a>The <a id="sthref220"></a><a id="sthref221"></a><a href="glossary.htm#CHDIJAIC"><span class="xrefglossterm">RMAN repository</span></a> is the collection of metadata about the target databases that RMAN uses for backup, recovery, and maintenance. RMAN always stores its metadata in the control file. The version of this metadata in the control file is the authoritative record of RMAN backups of your database. This is one reason why protecting your control file is an important part of your backup strategy. RMAN can conduct all necessary backup and recovery operations using just the control file to store the RMAN repository information, and maintains all records necessary to meet your configured retention policy.</p>
<p>You can also create a <a id="sthref222"></a><a href="glossary.htm#i433280"><span class="xrefglossterm">recovery catalog</span></a>, which is a repository of RMAN metadata stored in an Oracle database schema. The control file has finite space for records of backup activities, whereas a recovery catalog can store a much longer history. You can simplify backup and recovery administration by creating a single recovery catalog that contains the RMAN metadata for all of your databases.</p>
<p>The owner of a recovery catalog can grant or revoke restricted access to the catalog to other database users. Each restricted user has full read/write access to his own metadata, which is called a <a id="sthref223"></a><a id="sthref224"></a><a href="glossary.htm#CHDBECHC"><span class="xrefglossterm">virtual private catalog</span></a>. When one or more virtual private catalogs exist in a database, the database contains just one set of catalog tables. These tables are owned by the base recovery catalog owner. The owner of the base recovery catalog controls which databases each virtual private catalog user can access.</p>
<p>Some RMAN features only function when you use a recovery catalog. For example, you can create a <a id="sthref225"></a><a href="glossary.htm#i433542"><span class="xrefglossterm">stored script</span></a> in the recovery catalog and use this script to execute RMAN jobs. Other RMAN commands are specifically related to managing the recovery catalog and so are not available (and not needed) if RMAN is not connected to a recovery catalog.</p>
<p>The recovery catalog is maintained solely by RMAN. A target database instance never accesses the catalog directly. RMAN propagates information about the database structure, archived redo logs, backup sets, and data file copies into the recovery catalog from the target database control file after any operation that updates the repository, and also before certain operations.<a id="sthref226"></a><a id="sthref227"></a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rcmmaint.htm#h1016888">Chapter 12, "Maintaining RMAN Backups and Repository&nbsp;Records"</a> and <a href="rcmcatdb.htm#CIHBGHEA">Chapter 13, "Managing a Recovery Catalog"</a></div>
</div>
<!-- class="sect1" -->
<a id="CHDJBBEC"></a>
<div id="BRADV104" class="sect1">
<h2 class="sect1">Media Management</h2>
<p>The Oracle <a id="sthref228"></a>Media Management Layer (MML) API lets third-party vendors build a <a id="sthref229"></a><a href="glossary.htm#i432922"><span class="xrefglossterm">media manager</span></a>, software that works with RMAN and the vendor's hardware to allow backups to sequential media devices such as tape drives. A media manager handles loading, unloading, and labeling of sequential media such as tapes. You must install media manager software to use RMAN with sequential media devices.</p>
<p>When backing up or restoring, the <a id="sthref230"></a>RMAN client connects to a target database instance and directs the instance to send requests to its media manager. No direct communication occurs between the RMAN client and the media manager.</p>
<div id="BRADV89375" class="sect2"><a id="sthref231"></a>
<h3 class="sect2">RMAN Interaction with a Media Manager</h3>
<p><a id="sthref232"></a><a id="sthref233"></a>Before performing backup or restore to a media manager, you must allocate one or more channels to handle the communication with the media manager. You can also configure default channels for the media manager. The default channels are used for all backup and recovery tasks that employ the media manager and for which you have not explicitly allocated channels.</p>
<p>RMAN does not issue specific commands to load, label, or unload tapes. When backing up, RMAN gives the media manager a stream of bytes and associates a unique name with this stream. When RMAN must restore the backup, it asks the media manager to retrieve the byte stream. All details of how and where that stream is stored are handled entirely by the media manager. For example, the media manager labels and keeps track of the tape and names of files on each tape, and automatically loads and unloads tapes, or signals an operator to do so.</p>
<p>Some media managers support <a id="sthref234"></a><a id="sthref235"></a><a href="glossary.htm#i433233"><span class="xrefglossterm">proxy copy</span></a> functionality, in which they handle the entire data movement between data files and the backup devices. These products may use technologies such as high-speed connections between storage and media subsystems to reduce the load on the primary database server. RMAN provides a list of files requiring backup or restore to the media manager, which in turn makes all decisions regarding how and when to move the data.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rcmconfb.htm#i1006801">"Configuring SBT Channels for Use with a Media Manager"</a></div>
</div>
<!-- class="sect2" -->
<div id="BRADV89376" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref236"></a>
<h3 class="sect2">Oracle Secure Backup</h3>
<p><a id="sthref237"></a><a href="glossary.htm#CHDDFGEB"><span class="xrefglossterm">Oracle Secure Backup</span></a> is a media manager that provides reliable and secure data protection through file system backup to tape. All major <a id="sthref238"></a>tape drives and tape libraries in SAN, Gigabit Ethernet, and SCSI environments are supported.</p>
<p>Although Oracle Secure Backup has no specialized knowledge of database backup and recovery algorithms, it can serve as a <a id="sthref239"></a>media management layer for RMAN through the SBT interface. In this capacity, Oracle Secure Backup provides the same services for RMAN as other supported third-party SBT libraries. Oracle Secure Backup has some features, however, that are not available in other <a id="sthref240"></a>media managers.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OBADM" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OBADM"><span class="italic">Oracle Secure Backup Administrator's Guide</span></a> to learn how to use Oracle Secure Backup</div>
</div>
<!-- class="sect2" -->
<div id="BRADV89377" class="sect2"><a id="sthref241"></a>
<h3 class="sect2">Backup Solutions Program</h3>
<p><a id="sthref242"></a><a id="sthref243"></a><a id="sthref244"></a>The <a id="sthref245"></a>Oracle Backup Solutions Program (BSP), part of the Oracle PartnerNetwork, is a group of media manager vendors whose products are compliant with Oracle's MML specification. Several products may be available for your platform from media management vendors. For more information, contact your Oracle representative for a list of available products, contact individual vendors to ask them if they participate, or access the Backup Solutions Program website at:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/database/features/availability/bsp-088814.html">http://www.oracle.com/technetwork/database/features/availability/bsp-088814.html</a><a href=""></a></code></p>
<p>Oracle does not certify media manager vendors for compatibility with RMAN. Questions about availability, version compatibility, and functionality can only be answered by the media manager vendor, not Oracle.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDGFGAA"></a>
<div id="BRADV89378" class="sect1">
<h2 class="sect1">Fast Recovery Area</h2>
<p>The components that create different backup and recovery-related files have no knowledge of each other or of the size of the file systems where they store their data. With automatic disk-based backup and recovery, you can create a <a id="sthref246"></a><a href="glossary.htm#i999320"><span class="xrefglossterm">fast recovery area</span></a> (also called the <span class="bold">recovery area</span>), which automates management of backup-related files.</p>
<p>A fast recovery area minimizes the need to manually manage disk space for backup-related files and balance the use of space among the different types of files. In this way, a fast recovery area simplifies the ongoing administration of your database. Oracle recommends that you enable a recovery area to simplify backup management.</p>
<p>When you create a recovery area, you choose a location on disk and set an upper bound for storage space. You also set a <a id="sthref247"></a><a href="glossary.htm#i432137"><span class="xrefglossterm">backup retention policy</span></a> that governs how long backup files are needed for recovery. The database manages the storage used for backups, archived redo logs, and other recovery-related files for the database within this space. Files no longer needed are eligible for deletion when RMAN must reclaim space for new files.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rcmconfb.htm#i1019160">"Configuring the Fast Recovery Area"</a> to learn about the fast recovery area and how to configure it</div>
</div>
<!-- class="sect1" -->
<a id="CHDIFGFH"></a>
<div id="BRADV89379" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">RMAN in a Data Guard Environment</h2>
<p>When using RMAN in a <a id="sthref248"></a>Data Guard environment, a recovery catalog is required. The recovery catalog can store the metadata for all primary and standby databases.</p>
<p>A database in a Data Guard environment is uniquely identified by <a id="sthref249"></a>the <a class="olink REFRN10242" href="../../server.112/e40402/initparams070.htm#REFRN10242"><code dir="ltr">DB_UNIQUE_NAME</code></a> parameter in the initialization parameter file. For RMAN to work correctly in a Data Guard environment, the <code dir="ltr">DB_UNIQUE_NAME</code> must be unique across all the databases with the same DBID.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SBYDB04700" href="../../server.112/e41134/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to use RMAN in a Data Guard environment</div>
<div id="BRADV89380" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref250"></a>
<h3 class="sect2">RMAN Configuration in a Data Guard Environment</h3>
<p>To simplify ongoing use of RMAN for backup and recovery, you can set some persistent configuration settings for each primary and <a href="glossary.htm#CHDEJBIJ"><span class="xrefglossterm">physical standby database</span></a> in a Data Guard environment. These settings control many aspects of RMAN behavior. For example, you can configure the <a href="glossary.htm#i432137"><span class="xrefglossterm">backup retention policy</span></a>, default destinations for backups to tape or disk, default backup device type, and so on.</p>
<p>You can use <a id="sthref251"></a><a id="sthref252"></a>the <a class="olink RCMRF113" href="../../backup.112/e10643/rcmsynta010.htm#RCMRF113"><code dir="ltr">CONFIGURE</code></a> command with the <code dir="ltr">FOR DB_UNIQUE_NAME</code> clause to create a persistent configuration for a database in a Data Guard environment without connecting to the standby database or primary database as <code dir="ltr">TARGET</code>. For example, you connect RMAN to the recovery catalog, run the<a id="sthref253"></a> <code dir="ltr">SET DBID</code> command, and then can create a configuration for a physical standby database before its creation so that the RMAN configuration applies when the database is created.</p>
<p>RMAN updates the control file of the database when connected to it as <code dir="ltr">TARGET</code> during a recovery catalog <a id="sthref254"></a><a href="glossary.htm#i433443"><span class="xrefglossterm">resynchronization</span></a>. If you use <code dir="ltr">FOR DB_UNIQUE_NAME</code> for a database without being connected as <code dir="ltr">TARGET</code> to this database, however, then RMAN changes configurations in the recovery catalog only.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="rcmconfb.htm#CHDECDAG">"Configuring RMAN in a Data Guard Environment"</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDHJFAB"></a>
<div id="BRADV89381" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">RMAN File Management in a Data Guard Environment</h3>
<p>RMAN uses a recovery catalog to track file names for all database files in a Data Guard environment. The catalog also records where the online redo log files, standby redo log files, temp files, archived redo log files, backup sets, and image copies are created.</p>
<div id="BRADV99957" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref255"></a>
<h4 class="sect3">Interchangeability of Backups in a Data Guard Environment</h4>
<p>RMAN commands use the recovery catalog metadata to function transparently across different physical databases in the <a id="sthref256"></a>Data Guard environment. For example, you can back up a tablespace on a physical standby database and restore and recover it on the primary database. Similarly, you can back up a tablespace on a primary database and restore and recover it on a physical standby database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Backups of logical standby databases are not usable at the primary database.</div>
<p>Backups of standby control files and nonstandby control files are interchangeable. For example, you can restore a standby control file on a primary database and a primary control file on a physical standby database. This interchangeability means that you can offload control file backups to one database in a Data Guard environment. RMAN automatically updates the file names for database files during restore and recovery at the databases.</p>
</div>
<!-- class="sect3" -->
<a id="CHDFAIBH"></a>
<div id="BRADV99958" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Association of Backups in a Data Guard Environment</h4>
<p><a id="sthref257"></a>The recovery catalog tracks the files in the Data Guard environment by associating every database file or backup file with <a id="sthref258"></a>a <code dir="ltr">DB_UNIQUE_NAME</code>. The database that creates a file is associated with the file. For example, if RMAN backs up the database with the unique name of <code dir="ltr">standby1</code>, then <code dir="ltr">standby1</code> is associated with this backup. A backup remains associated with the database that created it unless you use the <a id="sthref259"></a><a id="sthref260"></a><a class="olink RCMRF110" href="../../backup.112/e10643/rcmsynta009.htm#RCMRF110"><code dir="ltr">CHANGE</code></a> <code dir="ltr">...RESET DB_UNIQUE_NAME</code> command to associate the backup with a different database.</p>
</div>
<!-- class="sect3" -->
<a id="CHDHGHBC"></a>
<div id="BRADV99959" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Accessibility of Backups in a Data Guard Environment</h4>
<p><a id="sthref261"></a>The accessibility of a backup is different from its association. In a Data Guard environment, the recovery catalog considers disk backups as accessible only to the database with which they are associated, whereas tape backups created on one database are accessible to all databases. If a backup file is not associated with any database, then the row describing it in the recovery catalog view shows <code dir="ltr">null</code> for the <code dir="ltr">SITE_KEY</code> column. By default, RMAN associates a file whose <code dir="ltr">SITE_KEY</code> is <code dir="ltr">null</code> with the database to which they are connected as <code dir="ltr">TARGET</code>.</p>
<p>RMAN commands such as<a id="sthref262"></a><a id="sthref263"></a> <code dir="ltr">BACKUP</code>, <code dir="ltr">RESTORE</code>, and <code dir="ltr">CROSSCHECK</code> work on any accessible backup. For example, for a <code dir="ltr">RECOVER COPY</code> operation, RMAN considers only image copies that are associated with the database as eligible to be recovered. RMAN considers the incremental backups on disk and tape as eligible to recover the image copies. In a database recovery, RMAN considers only the disk backups associated with the database and all files on tape as eligible to be restored.</p>
<p>To illustrate the differences in backup accessibility, assume that databases <code dir="ltr">PROD</code> and <code dir="ltr">STANDBY1</code> reside on different hosts. RMAN backs up data file <code dir="ltr">1</code> on <code dir="ltr">PROD</code> to <code dir="ltr">/prmhost/disk1/df1.dbf</code> on the production host and also to tape. RMAN backs up data file <code dir="ltr">1</code> on <code dir="ltr">STANDBY1</code> to <code dir="ltr">/sbyhost/disk2/df1.dbf</code> on the standby host and also to tape. If RMAN is connected to database <code dir="ltr">prod</code>, then you cannot use RMAN commands to perform operations with the <code dir="ltr">/sbyhost/disk2/df1.dbf</code> backup located on the standby host. However, RMAN does consider the tape backup made on <code dir="ltr">STANDBY1</code> as eligible to be restored.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can transfer a backup from a standby host to a primary host or vice versa, connect as <code dir="ltr">TARGET</code> to the database on this host, and then use the <a class="olink RCMRF109" href="../../backup.112/e10643/rcmsynta008.htm#RCMRF109"><code dir="ltr">CATALOG</code></a> command to catalog the backup. After a file is cataloged by the target database, the file is associated with the target database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SBYDB" href="../../server.112/e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to perform RMAN backup and recovery in a <a id="sthref264"></a>Data Guard environment</p>
</li>
<li>
<p><a href="rcmmaint.htm#CHDJEHFD">"Maintenance Commands in a Data Guard Environment"</a></p>
</li>
<li>
<p><a href="rcmcatdb.htm#CIHBGHEA">Chapter 13, "Managing a Recovery Catalog"</a> to learn how to manage a recovery catalog in a Data Guard environment</p>
</li>
<li>
<p><a class="olink RCMRF113" href="../../backup.112/e10643/rcmsynta010.htm#RCMRF113"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for <code dir="ltr">CONFIGURE</code> syntax</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1933">
<tr>
<td class="cellalignment1942">
<table class="cellalignment1938">
<tr>
<td class="cellalignment1937"><a href="part_pln.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1937"><a href="rcmcnctg.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1944">
<table class="cellalignment1936">
<tr>
<td class="cellalignment1937"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1937"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1937"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1937"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1937"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1937"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
