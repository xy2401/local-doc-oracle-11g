<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>fileNameConversionSpec</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:48Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsubcl006.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsubcl008.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">75/158</span> <!-- End Header --><a id="i101650"></a>
<div id="RCMRF196" class="refsect1">
<h1 class="refsect1">fileNameConversionSpec<a id="sthref2308"></a><a id="sthref2309"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2310"></a>Purpose</p>
<p>Use the <a id="BABGHADH"></a><code dir="ltr"><span class="codeinlineitalic">fileNameConversionSpec</span></code> subclause to specify one or more patterns to be used in generating new file names based on old file names. Used with <a id="sthref2311"></a><code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code>, <a id="sthref2312"></a><code dir="ltr"><a href="rcmsynta012.htm#i88628">CONVERT</a></code>, and <a id="sthref2313"></a><code dir="ltr"><a href="rcmsynta020.htm#i81724">DUPLICATE</a></code> as one way of generating output file names.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2314"></a>Usage Notes</p>
<p>The rules for string patterns and how they affect file naming are the same as those for the initialization parameter <a id="sthref2315"></a><a id="sthref2316"></a><code dir="ltr">DB_FILE_NAME_CONVERT</code>. In parentheses, provide an even number of string patterns.</p>
<p>When RMAN generates a new file name based on an old one, it compares the original file name to the first member of each pair of string patterns. The first time that RMAN finds a pattern that is a substring of the original file name, RMAN generates the new file name by substituting the second member of the pair for the substring that matched.</p>
<p>The pattern does not have to match at the beginning of the file name. The following command creates an image copy of data file <code dir="ltr">/disk1/dbs/users.dbf</code> as <code dir="ltr">/disk1/newdbs/users.dbf</code>:</p>
<pre dir="ltr">
BACKUP AS COPY
    DB_FILE_NAME_CONVERT = ('dbs','newdbs');
    TABLESPACE users;
</pre>
<p>When multiple possible matches exist for a given file name being converted, RMAN uses the first match in the list of patterns to generate the new file name. The following command has the same effect as the previous example because the pattern <code dir="ltr">dbs</code> matches the file name, so that the file name is never compared to the second pattern <code dir="ltr">/disk1</code>:</p>
<pre dir="ltr">
BACKUP AS COPY
    DB_FILE_NAME_CONVERT = ('dbs','newdbs','/disk1','/newdisk')
    TABLESPACE users;
</pre>
<p>For the <code dir="ltr"><a href="rcmsynta012.htm#i88628">CONVERT</a></code> <code dir="ltr">TABLESPACE</code>, <code dir="ltr">CONVERT DATABASE</code>, and <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">AS COPY</code> commands, if the source files for these operations are Oracle-managed files, then you cannot use <code dir="ltr"><span class="codeinlineitalic">fileNameConversionSpec</span></code> to convert the source file names into new output file names. For Oracle-managed files, either in Automated Storage Management (ASM) or in ordinary file system storage, the database must be allowed to generate the file names for the output files. For example, an OMF file name for a data file in non-ASM storage might be of the following form:</p>
<pre dir="ltr">
/private/boston/datafile/01_mf_system_ab12554_.dbf
</pre>
<p>An <a id="sthref2317"></a>OMF file name in ASM storage might be of the following form:</p>
<pre dir="ltr">
+DISK/boston/datafile/system.256.4543080
</pre>
<p>Only the database can generate and manage OMF file names. Typically, substituting the name of a different disk group or a different OMF location into an OMF file name does not produce a valid file name in the new destination. To convert OMF file names for storage in another OMF location, use an alternative such as a <code dir="ltr">FORMAT</code> clause with these commands to specify the new output location and allow the database to manage the specific output file names.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2318"></a>Syntax</p>
<p class="subhead2"><a id="BABBJGBH"></a><a id="RCMRF90439"></a><span class="italic">fileNameConversionSpec</span>::=</p>
<img width="456" height="67" src="img/filenameconversionspec.gif" alt="Description of filenameconversionspec.gif follows" /><br />
<a id="sthref2319" href="img_text/filenameconversionspec.htm">Description of the illustration filenameconversionspec.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2320"></a>Semantics</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for filenameConversion Subclause" summary="Describes fileNameConversionSpec subclause parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t13">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t13" headers="r1c1-t13"><code dir="ltr"><span class="codeinlineitalic">string_pattern</span></code></td>
<td class="cellalignment1926" headers="r2c1-t13 r1c2-t13">Specifies pairs of strings used to convert the file names. You can use as many pairs of primary and standby replacement strings as required. For example, you could set the string pattern to a value such as:
<p><code dir="ltr">DB_FILE_NAME_CONVERT = ('str1','str2','str3', 'str4' ...)</code></p>
<p>In this example, <code dir="ltr">str1</code> is a pattern matching the original file name, <code dir="ltr">str2</code> is the pattern replacing <code dir="ltr">str1</code> in the generated file name, <code dir="ltr">str3</code> is a pattern matching the original file name, and <code dir="ltr">str4</code> is the pattern replacing <code dir="ltr">str3</code> in the generated file name.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2321"></a>Examples</p>
<div id="RCMRF90440" class="example">
<p class="titleinexample"><a id="BABGHJIA"></a>Example 4-17 Using DB_FILE_NAME_CONVERT with a Single Conversion Pair</p>
<p>In this example, the tablespace <code dir="ltr">users</code> contains data files in directory <code dir="ltr">/disk1/oradata/prod/</code>, whereas tablespace <code dir="ltr">tools</code> contains data files in <code dir="ltr">/disk1/oradata/prod/</code>. For each data file to be converted, if <code dir="ltr">disk1/oradata/prod</code> is a substring of the data file name, then the image copy name is created by replacing the string with <code dir="ltr">disk2</code>.</p>
<pre dir="ltr">
BACKUP AS COPY 
  DB_FILE_NAME_CONVERT = ('disk1/oradata/prod','disk2')
  TABLESPACE users, tools;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90441" class="example">
<p class="titleinexample"><a id="sthref2322"></a>Example 4-18 Using DB_FILE_NAME_CONVERT with Multiple Conversion Pairs</p>
<p>This example creates image copies of the same data files described in <a href="#BABGHJIA">Example 4-17</a>. The first string in each pair specifies a pattern to match in the name of the source data files. The second string in each pair is the substitution pattern to use when generating the names of the image copies.</p>
<pre dir="ltr">
BACKUP AS COPY 
    DB_FILE_NAME_CONVERT=('/disk1/oradata/prod/users','/disk2/users',
                          '/disk1/oradata/prod/tools','/tmp/tools')
    TABLESPACE tools, users;
</pre>
<p>The following sample output for this command demonstrates how RMAN uses the conversion pairs to name the output image copies:</p>
<pre dir="ltr">
Starting backup at 08-MAR-07
using channel ORA_DISK_1
channel ORA_DISK_1: starting datafile copy
input datafile file number=00027 name=/disk1/oradata/prod/tools01.dbf
output file name=/tmp/tools01.dbf tag=TAG20070308T143300 RECID=33 STAMP=616689181
channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting datafile copy
input datafile file number=00028 name=/disk1/oradata/prod/users01.dbf
output file name=/disk2/users01.dbf tag=TAG20070308T143300 RECID=34 STAMP=616689182
channel ORA_DISK_1: datafile copy complete, elapsed time: 00:00:01
Finished backup at 08-MAR-07
 
Starting Control File and SPFILE Autobackup at 08-MAR-07
piece handle=/disk2/PROD/autobackup/2007_03_08/o1_mf_s_616689184_2z13s1kx_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 08-MAR-07
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsubcl006.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsubcl008.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
