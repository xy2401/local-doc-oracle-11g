<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>formatSpec</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:48Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsubcl009.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsubcl011.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">78/158</span> <!-- End Header --><a id="i82206"></a>
<div id="RCMRF195" class="refsect1">
<h1 class="refsect1">formatSpec</h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2349"></a>Purpose</p>
<p>Use the <a id="BABCBHFF"></a><code dir="ltr"><span class="codeinlineitalic">formatSpec</span></code> subclause to specify a file name format or an Automatic Storage Management disk group for a backup piece or image copy. If you do not specify a value for the <code dir="ltr">FORMAT</code> parameter, then RMAN either creates the backup in the fast recovery area if it is enabled, or in a platform-specific directory (for example, <code dir="ltr">?/dbs</code> on UNIX) if a fast recovery area is not enabled. In either case, RMAN uses the variable <a href="#BABIADAA">%U</a> to name the backup.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
<a class="olink SQLRF01114" href="../../server.112/e41084/statements_5008.htm#SQLRF01114"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn how to create and name Automated Storage Manager disk groups</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2350"></a>Usage Notes</p>
<p>Any name that is valid as a sequential file name on the platform is allowed, so long as each backup piece or copy has a unique name. If backing up to disk, then any valid disk file name is allowed, provided it is unique.</p>
<p>You cannot specify an Oracle Managed Files file name as the format for a backup. For example, if <code dir="ltr">+DISK1/datafile/system.732.609791431</code> is an OMF file name, then you cannot specify this file name in the <code dir="ltr">FORMAT</code> parameter.</p>
<p>Environment variables are not valid in the <code dir="ltr">FORMAT</code> parameter.</p>
<p>The entire <code dir="ltr"><span class="codeinlineitalic">format_string</span></code> is processed in a port-specific manner by the target instance to derive the final backup piece name. The substitution variables listed in <a href="#BABIBAGE">"Semantics"</a> are available in <code dir="ltr">FORMAT</code> strings to aid in generating unique file names. The formatting of this information varies by platform.</p>
<p>You can specify up to four <code dir="ltr">FORMAT</code> strings. RMAN uses the second, third, and fourth values only when <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">COPIES</code>, <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">BACKUP COPIES</code>, or <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">... BACKUP COPIES</code> is in effect. When choosing the format for each backup piece, RMAN uses the first format value for copy 1, the second format value for copy 2, and so on. If the number of format values exceeds the number of copies, then the extra formats are not used. If the number of format values is less than the number of copies, then RMAN reuses the format values, starting with the first one.</p>
<p>Specify <code dir="ltr"><span class="codeinlineitalic">format_string</span></code> in any of the following places, listed in order of precedence:</p>
<ol>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsynta007.htm#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> clause</p>
</li>
<li>
<p>The <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command</p>
</li>
<li>
<p>The <code dir="ltr"><a href="rcmsynta004.htm#i78244">ALLOCATE CHANNEL</a></code> command</p>
</li>
<li>
<p>The <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">CHANNEL</code> command</p>
</li>
</ol>
<p>If <code dir="ltr"><span class="codeinlineitalic">format_string</span></code> is specified in multiple places, then RMAN searches for the <code dir="ltr">FORMAT</code> parameter in the order shown.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2351"></a>Syntax</p>
<p class="subhead2"><a id="BABHCHAG"></a><a id="RCMRF90447"></a><span class="italic">formatSpec</span>::=</p>
<img width="129" height="24" src="img/formatspec.gif" alt="Description of formatspec.gif follows" /><br />
<a id="sthref2352" href="img_text/formatspec.htm">Description of the illustration formatspec.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABIBAGE"></a>Semantics</p>
<p class="subhead2"><a id="BABIIDGD"></a><a id="RCMRF90448"></a><span class="italic">formatSpec</span></p>
<p><a id="sthref2353"></a>The following table lists RMAN substitution variables that are valid in format strings.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for formatSpec Subclause" summary="Describes substitution variables" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t16">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t16">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t16" headers="r1c1-t16"><code dir="ltr">%a</code></td>
<td class="cellalignment1926" headers="r2c1-t16 r1c2-t16">Specifies the activation ID of the database.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t16" headers="r1c1-t16"><code dir="ltr">%b</code></td>
<td class="cellalignment1926" headers="r3c1-t16 r1c2-t16">Specifies the file name stripped of directory paths. It is only valid for <code dir="ltr">SET NEWNAME</code> and backup when producing image copies It yields errors if used as a format specification for a backup that produces backup pieces.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t16" headers="r1c1-t16"><code dir="ltr">%c</code></td>
<td class="cellalignment1926" headers="r4c1-t16 r1c2-t16">Specifies the copy number of the backup piece within a set of duplexed backup pieces. If you did not duplex a backup, then this variable is 1 for backup sets and 0 for proxy copies. If a command is enabled, then the variable shows the copy number. The maximum value for <code dir="ltr">%c</code> is 256.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t16" headers="r1c1-t16"><code dir="ltr">%d</code></td>
<td class="cellalignment1926" headers="r5c1-t16 r1c2-t16">Specifies the name of the database (see <a href="#BABJIDDH">Example 4-22</a>).</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t16" headers="r1c1-t16"><code dir="ltr">%D</code></td>
<td class="cellalignment1926" headers="r6c1-t16 r1c2-t16">Specifies the current day of the month from the Gregorian calendar in format <code dir="ltr">DD</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t16" headers="r1c1-t16"><code dir="ltr">%e</code></td>
<td class="cellalignment1926" headers="r7c1-t16 r1c2-t16">Specifies the archived log sequence number.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t16" headers="r1c1-t16"><code dir="ltr">%f</code></td>
<td class="cellalignment1926" headers="r8c1-t16 r1c2-t16">Specifies the absolute file number (see <a href="#BABJIDDH">Example 4-22</a>).</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r9c1-t16" headers="r1c1-t16"><a id="BABBCDDA"></a><code dir="ltr">%F</code></td>
<td class="cellalignment1926" headers="r9c1-t16 r1c2-t16">Combines the DBID, day, month, year, and sequence into a unique and repeatable generated name. This variable translates into <code dir="ltr"><span class="codeinlineitalic">c-IIIIIIIIII-YYYYMMDD-QQ</span></code>, where:
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">IIIIIIIIII</span></code> stands for the DBID. The DBID is printed in decimal so that it can be easily associated with the target database.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">YYYYMMDD</span></code> is a time stamp in the Gregorian calendar of the day the backup is generated</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">QQ</span></code> is the sequence in hexadecimal number that starts with 00 and has a maximum of 'FF' (256)</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r10c1-t16" headers="r1c1-t16"><code dir="ltr">%h</code></td>
<td class="cellalignment1926" headers="r10c1-t16 r1c2-t16">Specifies the archived redo log thread number.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r11c1-t16" headers="r1c1-t16"><code dir="ltr">%I</code></td>
<td class="cellalignment1926" headers="r11c1-t16 r1c2-t16">Specifies the DBID.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r12c1-t16" headers="r1c1-t16"><code dir="ltr">%M</code></td>
<td class="cellalignment1926" headers="r12c1-t16 r1c2-t16">Specifies the month in the Gregorian calendar in format <code dir="ltr">MM</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r13c1-t16" headers="r1c1-t16"><code dir="ltr">%N</code></td>
<td class="cellalignment1926" headers="r13c1-t16 r1c2-t16">Specifies the tablespace name. This substitution variable is only valid when backing up data files as image copies.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r14c1-t16" headers="r1c1-t16"><code dir="ltr">%n</code></td>
<td class="cellalignment1926" headers="r14c1-t16 r1c2-t16">Specifies the name of the database, padded on the right with <code dir="ltr">x</code> characters to a total length of eight characters. For example, if <code dir="ltr">prod1</code> is the database name, then the padded name is <code dir="ltr">prod1xxx</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r15c1-t16" headers="r1c1-t16"><code dir="ltr">%p</code></td>
<td class="cellalignment1926" headers="r15c1-t16 r1c2-t16">Specifies the piece number within the backup set. This value starts at <code dir="ltr">1</code> for each backup set and is incremented by 1 as each backup piece is created.
<p><span class="bold">Note:</span> If you specify <code dir="ltr">PROXY</code>, then the <code dir="ltr">%p</code> variable must be included in the <code dir="ltr">FORMAT</code> string either explicitly or implicitly within <a href="#BABIADAA">%U</a>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r16c1-t16" headers="r1c1-t16"><code dir="ltr">%s</code></td>
<td class="cellalignment1926" headers="r16c1-t16 r1c2-t16">Specifies the backup set number. This number is a counter in the control file that is incremented for each backup set. The counter value starts at <code dir="ltr">1</code> and is unique for the lifetime of the control file. If you restore a backup control file, then duplicate values can result. Also, <code dir="ltr">CREATE CONTROLFILE</code> initializes the counter back to <code dir="ltr">1</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r17c1-t16" headers="r1c1-t16"><code dir="ltr">%t</code></td>
<td class="cellalignment1926" headers="r17c1-t16 r1c2-t16">Specifies the backup set time stamp, which is a 4-byte value derived as the number of seconds elapsed since a fixed reference time. You can use a combination of <code dir="ltr">%s</code> and <code dir="ltr">%t</code> to form a unique name for the backup set.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r18c1-t16" headers="r1c1-t16"><code dir="ltr">%T</code></td>
<td class="cellalignment1926" headers="r18c1-t16 r1c2-t16">Specifies the year, month, and day in the Gregorian calendar in this format: <code dir="ltr">YYYYMMDD</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r19c1-t16" headers="r1c1-t16"><code dir="ltr">%u</code></td>
<td class="cellalignment1926" headers="r19c1-t16 r1c2-t16">Specifies an 8-character name constituted by compressed representations of the backup set or image copy number and the time the backup set or image copy was created.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r20c1-t16" headers="r1c1-t16"><a id="BABGHHGH"></a><a id="BABIADAA"></a><code dir="ltr">%U</code></td>
<td class="cellalignment1926" headers="r20c1-t16 r1c2-t16">Specifies a system-generated unique file name (default).
<p>The meaning of <code dir="ltr">%U</code> is different for image copies and backup pieces. For a backup piece, <code dir="ltr">%U</code> specifies a convenient shorthand for <code dir="ltr">%u_%p_%c</code> that guarantees uniqueness in generated backup file names. For an image copy of a data file, <code dir="ltr">%U</code> means the following:</p>
<p><code dir="ltr">data-D-%d_id-%I_TS-%N_FNO-%f_%u</code></p>
<p>For an image copy of an archived redo log, <code dir="ltr">%U</code> means the following:</p>
<p><code dir="ltr">arch-D_%d-id-%I_S-%e_T-%h_A-%a_%u</code></p>
<p>For an image copy of a control file, <code dir="ltr">%U</code> means the following:</p>
<p><code dir="ltr">cf-D_%d-id-%I_%u</code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r21c1-t16" headers="r1c1-t16"><code dir="ltr">%Y</code></td>
<td class="cellalignment1926" headers="r21c1-t16 r1c2-t16">Specifies the year in this format: <code dir="ltr">YYYY</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r22c1-t16" headers="r1c1-t16"><code dir="ltr">%%</code></td>
<td class="cellalignment1926" headers="r22c1-t16 r1c2-t16">Specifies the percent (<code dir="ltr">%</code>) character. For example, <code dir="ltr">%%Y</code> translates to the string <code dir="ltr">%Y</code>.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref2354"></a>Example</p>
<div id="RCMRF90449" class="example">
<p class="titleinexample"><a id="sthref2355"></a>Example 4-21 Specifying an ASM Disk Group</p>
<p>This example copies the database to ASM disk group <code dir="ltr">DISK1</code>:</p>
<pre dir="ltr">
BACKUP AS COPY DATABASE FORMAT '+DATAFILE';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90450" class="example">
<p class="titleinexample"><a id="BABJIDDH"></a>Example 4-22 Specifying a Format for Data File Copies</p>
<p>This example copies two data files with tag <code dir="ltr">LATESTCOPY</code> to directory <code dir="ltr">/disk2</code>:</p>
<pre dir="ltr">
BACKUP AS COPY
  COPY OF DATAFILE 27, 28
  FROM TAG 'LATESTCOPY' 
  FORMAT '/disk2/Datafile%f_Database%d';
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsubcl009.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsubcl011.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
