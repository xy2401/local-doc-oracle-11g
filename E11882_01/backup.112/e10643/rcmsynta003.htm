<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>ADVISE FAILURE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta002.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta004.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">16/158</span> <!-- End Header --><a id="CHDHBIAB"></a>
<div id="RCMRF166" class="refsect1">
<h1 class="refsect1">ADVISE FAILURE<a id="ABC31336165"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref58"></a>Purpose</p>
<p><a id="sthref59"></a><a id="sthref60"></a><a id="sthref61"></a><a id="sthref62"></a>Use the <a id="CHDFIHEI"></a><code dir="ltr">ADVISE FAILURE</code> command to display repair options for the specified failures. This command prints a summary of the failures identified by the Data Recovery Advisor and implicitly closes all open failures that are fixed.</p>
<p>The recommended workflow is to run the following commands in an RMAN session: <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">FAILURE</code> to display failures, <code dir="ltr">ADVISE FAILURE</code> to display repair options, and <code dir="ltr"><a href="rcmsynta2004.htm#CHDEBHBI">REPAIR FAILURE</a></code> to fix the failures.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref63"></a>Prerequisites</p>
<p>RMAN must be connected to a target database. See the <code dir="ltr"><a href="rcmsynta011.htm#i80734">CONNECT</a></code> and <code dir="ltr"><a href="rcmsynta2011.htm#i80108">RMAN</a></code> commands to learn how to connect to a database as <code dir="ltr">TARGET</code>.</p>
<p>The target database instance must be started. The target database must be a single-instance database and must not be a physical standby database, although it can be a logical standby database.</p>
<p>In the current release, Data Recovery Advisor only supports single-instance databases. Oracle Real Application Clusters (Oracle RAC) databases are not supported.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref64"></a>Usage Notes</p>
<p>Data Recovery Advisor verifies repair feasibility before proposing a repair strategy. For example, Data Recovery Advisor checks that all backups and archived redo log files needed for media recovery are available. The <code dir="ltr">ADVISE FAILURE</code> output indicates the repair strategy that Data Recovery Advisor considers optimal for a given set of failures. The <code dir="ltr">ADVISE FAILURE</code> command can generate both manual and automated repair options.</p>
<p class="subhead2"><a id="RCMRF89984"></a>Manual Repair Options</p>
<p>Manual repair options are either mandatory or optional. The optional actions may fix the failures more quickly or easily than automated repairs. For example, Data Recovery Advisor may recommend a failover to a standby database as an alternative to a primary database repair.</p>
<p>In other cases, the only options are manual because automated repairs are not feasible. For example, I/O failures often cannot be repaired automatically. Also, it is sometimes impossible to diagnose a failure because insufficient data is returned by the operating system or the disk subsystem.</p>
<p class="subhead2"><a id="RCMRF89985"></a>Automated Repair Options</p>
<p>Each automated repair option is either a single repair or a set of repair steps (see <a href="#CHDFDEEA">Table 2-1, "Automated Repair Options"</a> for a description of command output). When a repair option has a script that contains multiple repair steps, <code dir="ltr">ADVISE FAILURE</code> generates the script so that the repair steps are in the correct order. A single repair always fixes critical failures together. You must repair critical failures, but you can also repair noncritical failures at the same time. You can repair noncritical failures in a random order, one by one, or in groups.</p>
<p class="subhead2"><a id="CHDECAJH"></a><a id="RCMRF89986"></a>Oracle RAC and Data Recovery Advisor</p>
<p>If a data failure brings down all instances of an Oracle RAC database, then you can mount the database in single-instance mode and use Data Recovery Advisor to detect and repair control file, <code dir="ltr">SYSTEM</code> data file, and dictionary failures. You can also initiate health checks to test other database components for data failures. This approach does not detect data failures that are local to other cluster instances, for example, an inaccessible data file.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref65"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF89987"></a><a href="#CHDFAGJC"><span class="xreftitleitalic"><span class="italic">advise</span></span></a>::=</p>
<img width="555" height="173" src="img/advise.gif" alt="Description of advise.gif follows" /><br />
<a id="sthref66" href="img_text/advise.htm">Description of the illustration advise.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref67"></a>Semantics</p>
<p class="subhead2"><a id="CHDFAGJC"></a><a id="RCMRF89988"></a><span class="italic">advise</span></p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for ADVISE Command" summary="Describes ADVISE FAILURE command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t6">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t6" headers="r1c1-t6"><code dir="ltr">ADVISE&nbsp;FAILURE</code></td>
<td class="cellalignment1926" headers="r2c1-t6 r1c2-t6"><a id="sthref68"></a>Displays information for all <code dir="ltr">CRITICAL</code> and <code dir="ltr">HIGH</code> priority failures recorded in the automatic diagnostic repository.
<p>You can only use <code dir="ltr">ADVISE FAILURE</code> with no options when a <code dir="ltr">LIST FAILURE</code> command was previously executed in the current session.</p>
<p><span class="bold">Note:</span> If a new failure has been recorded in the diagnostic repository since the last <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">FAILURE</code> command in the current RMAN session, then RMAN issues a warning before advising on <code dir="ltr">CRITICAL</code> and <code dir="ltr">HIGH</code> failures.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t6" headers="r1c1-t6"><code dir="ltr">&nbsp;&nbsp;&nbsp;ALL</code></td>
<td class="cellalignment1926" headers="r3c1-t6 r1c2-t6">Lists options that repair all open failures together.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t6" headers="r1c1-t6"><code dir="ltr">&nbsp;&nbsp;&nbsp;CRITICAL</code></td>
<td class="cellalignment1926" headers="r4c1-t6 r1c2-t6">Lists options that repair only critical failures.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t6" headers="r1c1-t6"><code dir="ltr">&nbsp;&nbsp;&nbsp;HIGH</code></td>
<td class="cellalignment1926" headers="r5c1-t6 r1c2-t6">Lists options that repair only failures with <code dir="ltr">HIGH</code> priority.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t6" headers="r1c1-t6"><code dir="ltr">&nbsp;&nbsp;&nbsp;LOW</code></td>
<td class="cellalignment1926" headers="r6c1-t6 r1c2-t6">Lists options that repair only failures with <code dir="ltr">LOW</code> priority.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t6" headers="r1c1-t6"><code dir="ltr"><span class="codeinlineitalic">&nbsp;&nbsp;&nbsp;failureNumber</span></code></td>
<td class="cellalignment1926" headers="r7c1-t6 r1c2-t6">Lists options that repair only the specified failures.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t6" headers="r1c1-t6"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;EXCLUDE&nbsp;FAILURE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">failureNumber</span></code></td>
<td class="cellalignment1926" headers="r8c1-t6 r1c2-t6">Excludes the specified failures from the list.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref69"></a>ADVISE FAILURE Command Output</p>
<p>The <code dir="ltr">ADVISE FAILURE</code> output includes the <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">FAILURE</code> output, which is described in <a href="rcmsynta027.htm#CHDIJEIG">Table 2-27, "List of Failures"</a>. See <a href="#CHDICJCI">Example 2-5</a> for sample output.</p>
<p>RMAN presents mandatory and optional manual actions in an unordered list. If manual options exist, then they appear before automated options. <a href="#CHDFDEEA">Table 2-1</a> describes the output for automated repair options.</p>
<div id="RCMRF89989" class="tblruleformal">
<p class="titleintable"><a id="sthref70"></a><a id="CHDFDEEA"></a>Table 2-1 <a id="sthref71"></a>Automated Repair Options</p>
<table class="cellalignment1929" title="Automated Repair Options" summary="Describes the tabular output of the ADVISE FAILURE command" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t7">Column</th>
<th class="cellalignment1930" id="r1c2-t7">Indicates</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">Option</code></p>
</td>
<td class="cellalignment1926" headers="r2c1-t7 r1c2-t7">
<p>The identifier for the automated repair option.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">Strategy</code></p>
</td>
<td class="cellalignment1926" headers="r3c1-t7 r1c2-t7">
<p>A strategy to fix the failure with the <code dir="ltr"><a href="rcmsynta2004.htm#CHDEBHBI">REPAIR FAILURE</a></code> command.</p>
<p>The Data Recovery Advisor always presents an automated repair option with no data loss when possible. Automated repair options fall into the following basic categories:</p>
<ul>
<li>
<p>Repair with no data loss</p>
</li>
<li>
<p>Repair with data loss, for example, Flashback Database</p>
</li>
</ul>
<p><span class="bold">Note:</span> The <code dir="ltr">ADVISE</code> command maps a set of failures to the set of repair steps that Data Recovery Advisor considers to be optimal. When possible, Data Recovery Advisor consolidates multiple repair steps into a single repair. For example, if the database has a corrupted data file, missing control file, and lost current redo log group, then Data Recovery Advisor would recommend a single, consolidated repair plan to restore the database and perform point-in-time recovery.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t7" headers="r1c1-t7">
<p><code dir="ltr">Repair Description</code></p>
</td>
<td class="cellalignment1926" headers="r4c1-t7 r1c2-t7">
<p>A description of the proposed repair. For example, the proposed repair could be to restore and recover data file 17.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t7" headers="r1c1-t7">
<p><code dir="ltr">Repair Script</code></p>
</td>
<td class="cellalignment1926" headers="r5c1-t7 r1c2-t7">
<p>The location of an editable script with all repair actions and comments. If you do not choose an automated repair, then you can review this script and edit it for use in a manual recovery strategy.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref72"></a><a id="sthref73"></a>Examples</p>
<div id="RCMRF89990" class="example">
<p class="titleinexample"><a id="CHDICJCI"></a>Example 2-5 Displaying Repair Options for All Failures</p>
<p>This example shows repair options for all failures known to the Recovery Data Advisor. The example indicates two failures: missing data files and a data file with corrupt blocks.</p>
<pre dir="ltr">
RMAN&gt; LIST FAILURE;
 
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-07     One or more non-system datafiles are missing
101        HIGH     OPEN      23-APR-07     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks
 
RMAN&gt; ADVISE FAILURE;
 
List of Database Failures
=========================
 
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
142        HIGH     OPEN      23-APR-07     One or more non-system datafiles 
                                            are missing
101        HIGH     OPEN      23-APR-07     Datafile 1: '/disk1/oradata/prod/system01.dbf' 
                                            contains one or more corrupt blocks
 
analyzing automatic repair options; this may take some time
using channel ORA_DISK_1
analyzing automatic repair options complete
 
Mandatory Manual Actions
========================
no manual actions available
 
Optional Manual Actions
=======================
1. If file /disk1/oradata/prod/users01.dbf was unintentionally renamed or moved, restore it
 
Automated Repair Options
========================
Option Repair Description
------ ------------------
1      Restore and recover datafile 28; Perform block media recovery of 
       block 56416 in file 1
  Strategy: The repair includes complete media recovery with no data loss
  Repair script: /disk1/oracle/log/diag/rdbms/prod/prod/hm/reco_660500184.hm
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta002.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta004.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
