<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>ALLOCATE CHANNEL</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta003.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta005.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/158</span> <!-- End Header --><a id="i78244"></a>
<div id="RCMRF102" class="refsect1">
<h1 class="refsect1">ALLOCATE CHANNEL</h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref74"></a>Purpose</p>
<p><a id="ABC1043338"></a><a id="ABC1043338SRI1"></a><a id="ABC1043338SRI12"></a><a id="ABC1043338SRI123"></a><a id="CHDJEBGB"></a><code dir="ltr">ALLOCATE CHANNEL</code> manually allocates a <span class="glossaryterm">channel</span> (which is a connection between RMAN and a database instance). The <code dir="ltr">ALLOCATE CHANNEL</code> command must be issued within a <code dir="ltr"><a href="rcmsynta2012.htm#i85731">RUN</a></code> block. It allocates a channel only in the block where the command is issued.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref75"></a>Prerequisites</p>
<p>The target instance must be started.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref76"></a>Usage Notes</p>
<p>Manually allocated channels are distinct from automatically allocated channels specified with <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code>. Automatic channels apply to any RMAN job in which you do <span class="italic">not</span> manually allocate channels. You can override automatic channel configurations by manually allocating channels within a <code dir="ltr">RUN</code> command, but you cannot use <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">DEVICE TYPE</code> or <code dir="ltr"><a href="rcmsynta2008.htm#i85188">RESTORE</a></code> <code dir="ltr">DEVICE TYPE</code> to use automatic channels after specifying manual channels with <code dir="ltr">ALLOCATE CHANNEL</code>.</p>
<p class="subhead2"><a id="RCMRF89991"></a>Multiple Channels</p>
<p><a id="sthref77"></a><a id="sthref78"></a><a id="sthref79"></a><a id="sthref80"></a><a id="sthref81"></a>You can allocate up to 255 channels; each channel can read up to 64 files in parallel. You can control the degree of parallelism within a job by the number of channels that you allocate. Allocating multiple channels simultaneously allows a single job to read or write multiple backup sets or disk copies in parallel, which each channel operating on a separate backup set or copy.</p>
<p>When making backups to disk, the guideline is to allocate one channel for each output device (see <a href="#CHDCDCFF">Example 2-7</a>). If RMAN is writing to a striped file system or an ASM disk group, however, then multiple channels can improve performance. When backing up to tape, the guideline is that the number of tape channels should equal the number of tape devices divided by the number of duplexed copies (see <a href="#CHDGCEDF">Example 2-8</a>).</p>
<p class="subhead2"><a id="RCMRF89992"></a>Channels in an Oracle RAC Environment</p>
<p><a id="sthref82"></a><a id="sthref83"></a><a id="sthref84"></a>If the <code dir="ltr">SYSDBA</code> password for all Oracle RAC instances is the same, then you never need to put passwords in the <code dir="ltr">CONNECT</code> option of the <code dir="ltr">ALLOCATE</code> or <code dir="ltr">CONFIGURE</code> command. If you use a connect string of the form <code dir="ltr"><span class="codeinlineitalic">user</span></code><code dir="ltr">@</code><code dir="ltr"><span class="codeinlineitalic">database</span></code>, then RMAN automatically uses the same password that was used for the <code dir="ltr">TARGET</code> connection when the RMAN session was started.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref85"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF89993"></a><span class="italic">allocate</span>::=</p>
<img width="416" height="102" src="img/allocate.gif" alt="Description of allocate.gif follows" /><br />
<a id="sthref86" href="img_text/allocate.htm">Description of the illustration allocate.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>, <a href="rcmsubcl001.htm#BABFFJCH"><span class="xreftitleitalic"><span class="italic">allocOperandList</span>::=</span></a>)</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref87"></a>Semantics</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for ALLOCATE CHANNEL Command" summary="Describes ALLOCATE command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t8">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t8" headers="r1c1-t8"><code dir="ltr"><a id="sthref88"></a>AUXILIARY</code></td>
<td class="cellalignment1926" headers="r2c1-t8 r1c2-t8">Specifies a connection between RMAN and an auxiliary database instance.
<p>An auxiliary instance is used when executing the <code dir="ltr"><a href="rcmsynta020.htm#i81724">DUPLICATE</a></code> or <code dir="ltr"><a href="rcmsynta2021.htm#i86602">TRANSPORT TABLESPACE</a></code> command, and when performing TSPITR with <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> <code dir="ltr">TABLESPACE</code> (see <a href="#CHDIHDBD">Example 2-9</a>). When specifying this option, the auxiliary instance must be started but not mounted.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><a href="rcmsynta020.htm#i81724">DUPLICATE</a></code> to learn how to duplicate a database, and <code dir="ltr"><a href="rcmsynta011.htm#i80734">CONNECT</a></code> to learn how to connect to a duplicate database instance</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t8" headers="r1c1-t8"><code dir="ltr"><a id="sthref89"></a>CHANNEL</code> <code dir="ltr"><span class="codeinlineitalic">channel_id</span></code></td>
<td class="cellalignment1926" headers="r3c1-t8 r1c2-t8"><a id="sthref90"></a>Specifies a connection between RMAN and the target database instance. The <code dir="ltr"><span class="codeinlineitalic">channel_id</span></code> is the case-sensitive name of the channel. The database uses the <code dir="ltr"><span class="codeinlineitalic">channel_id</span></code> to report I/O errors.
<p>Each connection initiates an database server session on the target or auxiliary instance: this session performs the work of backing up, restoring, or recovering RMAN backups. You cannot make a connection to a shared server session.</p>
<p>Whether <code dir="ltr">ALLOCATE CHANNEL</code> allocates operating system resources immediately depends on the operating system. On some platforms, operating system resources are allocated when the command is issued. On other platforms, operating system resources are not allocated until you open a file for reading or writing.</p>
<p>Each channel operates on one backup set or image copy at a time. RMAN automatically releases the channel after the job.</p>
<p><span class="bold">Note:</span> You cannot prefix <code dir="ltr">ORA_</code> to a channel name. RMAN reserves channel names beginning with the <code dir="ltr">ORA_</code> prefix for its own use.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t8" headers="r1c1-t8"><code dir="ltr"><a id="sthref91"></a>DEVICE&nbsp;TYPE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605"><span class="xreftitleitalic">deviceSpecifier</span></a></span></code></td>
<td class="cellalignment1926" headers="r4c1-t8 r1c2-t8">Specifies the type of storage for a backup. Query the <a id="sthref92"></a><code dir="ltr">V$BACKUP_DEVICE</code> view for information about available device types and names.
<p><span class="bold">Note:</span> When you specify <code dir="ltr">DEVICE TYPE DISK</code>, no operating system resources are allocated other than for the creation of the server session.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605"><span class="xreftitleitalic">deviceSpecifier</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t8" headers="r1c1-t8"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#i78513"><span class="xreftitleitalic">allocOperandList</span></a></span></code></td>
<td class="cellalignment1926" headers="r5c1-t8 r1c2-t8">Specifies control options for the allocated channel. The channel parameters for sequential I/O devices are platform-specific (see <a href="#CHDIEGIA">Example 2-6</a>).
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#i78513"><span class="xreftitleitalic">allocOperandList</span></a></span></code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref93"></a><a id="sthref94"></a>Examples</p>
<div id="RCMRF89994" class="example">
<p class="titleinexample"><a id="CHDIEGIA"></a>Example 2-6 Manually Allocating a Channel for a Backup</p>
<p>This example allocates a single tape channel for a whole database and archived redo log backup. The <code dir="ltr">PARMS</code> parameter specifies the Oracle Secure Backup media family named <code dir="ltr">wholedb_mf</code>.</p>
<pre dir="ltr">
RUN
{
  ALLOCATE CHANNEL c1 DEVICE TYPE sbt
    PARMS 'ENV=(OB_MEDIA_FAMILY=wholedb_mf)';
  BACKUP DATABASE;
  BACKUP ARCHIVELOG ALL NOT BACKED UP;
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF89995" class="example">
<p class="titleinexample"><a id="CHDCDCFF"></a>Example 2-7 Distributing a Backup Across Multiple Disks</p>
<p><a id="sthref95"></a>When backing up to disk, you can spread the backup across several disk drives. Allocate one <code dir="ltr">DEVICE TYPE DISK</code> channel for each disk drive and specify the format string so that the output files are on different disks.</p>
<pre dir="ltr">
RUN
{
  ALLOCATE CHANNEL disk1 DEVICE TYPE DISK FORMAT '/disk1/%U'; 
  ALLOCATE CHANNEL disk2 DEVICE TYPE DISK FORMAT '/disk2/%U'; 
  BACKUP DATABASE PLUS ARCHIVELOG;
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF89996" class="example">
<p class="titleinexample"><a id="CHDGCEDF"></a>Example 2-8 Creating Multiple Copies of a Backup on Tape</p>
<p><a id="sthref96"></a><a id="sthref97"></a>In this example, four tape drives are available for writing: <code dir="ltr">stape1</code>, <code dir="ltr">stape2</code>, <code dir="ltr">stape3</code>, and <code dir="ltr">stape4</code>. You use the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">BACKUP COPIES</code> command to indicate that RMAN should create two identical copies of the database backup. Because the guideline is that the number of tape channels should equal the number of tape devices divided by the number of duplexed copies, you allocate two channels. In this case the <code dir="ltr">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be set to <code dir="ltr">TRUE</code>.</p>
<p>In the <code dir="ltr">OB_DEVICE_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> parameter for Oracle Secure Backup, the <code dir="ltr"><span class="codeinlineitalic">n</span></code> specifies the copy number of the backup piece. RMAN writes copy 1 of each backup piece to tape drives <code dir="ltr">stape1</code> and <code dir="ltr">stape2</code> and writes copy 2 of each backup piece to drives <code dir="ltr">stape3</code> and <code dir="ltr">stape4</code>. Thus, each copy of the database backup is distributed between two tape drives, so that part of the data is on each drive.</p>
<pre dir="ltr">
RUN
{
  ALLOCATE CHANNEL t1 DEVICE TYPE sbt 
    PARMS 'ENV=(OB_DEVICE_1=stape1,OB_DEVICE_2=stape3)';
  ALLOCATE CHANNEL t2 DEVICE TYPE sbt 
    PARMS 'ENV=(OB_DEVICE_1=stape2,OB_DEVICE_2=stape4)';
  SET BACKUP COPIES 2;
  BACKUP DATABASE;
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF89997" class="example">
<p class="titleinexample"><a id="CHDIHDBD"></a>Example 2-9 Allocating an Auxiliary Channel for Database Duplication</p>
<p><a id="sthref98"></a>This example creates a duplicate database from backups. RMAN can use configured channels for duplication even if they do not specify the <code dir="ltr">AUXILIARY</code> option. In this example, no SBT channel is preconfigured, so an auxiliary SBT channel is manually allocated.</p>
<pre dir="ltr">
RUN
{ 
  ALLOCATE AUXILIARY CHANNEL c1 DEVICE TYPE sbt;
  DUPLICATE TARGET DATABASE
    TO dupdb   
  DB_FILE_NAME_CONVERT '/disk2/dbs/','/disk1/'
  SPFILE 
    PARAMETER_VALUE_CONVERT   '/disk2/dbs/',
                              '/disk1/'
    SET LOG_FILE_NAME_CONVERT '/disk2/dbs/',
                              '/disk1/';
}
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information on the parameter <code dir="ltr">DB_FILE_NAME_CONVERT</code></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta003.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta005.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
