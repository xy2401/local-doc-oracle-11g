<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>ALLOCATE CHANNEL FOR MAINTENANCE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta004.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta006.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/158</span> <!-- End Header --><a id="i78398"></a>
<div id="RCMRF103" class="refsect1">
<h1 class="refsect1">ALLOCATE CHANNEL FOR MAINTENANCE<a id="ABC1043788"></a><a id="ABC1043788SRI1"></a><a id="ABC1043788SRI12"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref99"></a>Purpose</p>
<p>Use the <a id="CHDBCDCF"></a><code dir="ltr">ALLOCATE CHANNEL FOR MAINTENANCE</code> command to manually allocate a channel in preparation for issuing a <code dir="ltr"><a href="rcmsynta009.htm#i79920">CHANGE</a></code>, <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code>, or <code dir="ltr"><a href="rcmsynta015.htm#i81077">CROSSCHECK</a></code> command. You can use the <code dir="ltr"><a href="rcmsynta2003.htm#i84466">RELEASE CHANNEL</a></code> command to unallocate the channel.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> at least one channel for each device type in your configuration, then you do not need to use <code dir="ltr">ALLOCATE CHANNEL FOR MAINTENANCE</code>. It is recommended that you use configured channels instead of maintenance channels. You can use configured channels for all RMAN I/O to the specified device, not just the maintenance tasks supported by maintenance channels. The configured channels persist across RMAN sessions.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref100"></a>Prerequisites</p>
<p>Execute this command only at the RMAN prompt, not within a <code dir="ltr">RUN</code> block. The target instance must be started. You cannot allocate a maintenance channel to a shared session.<a id="sthref101"></a><a id="sthref102"></a><a id="sthref103"></a></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref104"></a>Usage Notes</p>
<p>As a rule, you should allocate one maintenance channel for each device. Manually allocated channels and automatic channels are never mixed. In general, you should allocate multiple maintenance channels for a single job only in these situations:</p>
<ul>
<li>
<p><a id="sthref105"></a><a id="sthref106"></a><a id="sthref107"></a><a id="sthref108"></a><a id="sthref109"></a>To enable crosschecking or deletion of all backup pieces both on disk and tape, with a single command (see <a href="#CHDGBFJH">Example 2-11</a>)</p>
</li>
<li>
<p>To make crosschecking and deleting work correctly in an Oracle RAC configuration in which each backup piece exists only on one node (see <a href="#CHDCJABF">Example 2-12</a>)</p>
</li>
</ul>
<p>RMAN uses the following convention for naming of maintenance channels: <code dir="ltr">ORA_MAINT_</code><code dir="ltr"><span class="codeinlineitalic">devicetype</span></code><code dir="ltr">_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code>, where <code dir="ltr"><span class="codeinlineitalic">devicetype</span></code> refers to <code dir="ltr">DISK</code> or <code dir="ltr">sbt</code> and <code dir="ltr"><span class="codeinlineitalic">n</span></code> refers to the channel number. For example, RMAN uses these names for two manually allocated disk channels:</p>
<pre dir="ltr">
ORA_MAINT_DISK_1
ORA_MAINT_DISK_2
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to crosscheck and delete on multiple channels</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref110"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF89998"></a><a href="#CHDHDJFB"><span class="xreftitleitalic"><span class="italic">allocateForMaint</span></span></a>::=</p>
<img width="341" height="88" src="img/allocateformaint.gif" alt="Description of allocateformaint.gif follows" /><br />
<a id="sthref111" href="img_text/allocateformaint.htm">Description of the illustration allocateformaint.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>, <a href="rcmsubcl001.htm#BABFFJCH"><span class="xreftitleitalic"><span class="italic">allocOperandList</span>::=</span></a>)</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref112"></a>Semantics</p>
<p class="subhead2"><a id="CHDHDJFB"></a><a id="RCMRF89999"></a><span class="italic">allocateForMaint</span></p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for ALLOCATE CHANNEL FOR MAINTENANCE Command" summary="Describes ALLOCATE CHANNEL FOR MAINTENANCE command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t12">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t12" headers="r1c1-t12"><br />
<code dir="ltr"><a id="sthref113"></a>DEVICE&nbsp;TYPE</code><br />
<code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605"><span class="xreftitleitalic">deviceSpecifier</span></a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t12 r1c2-t12">Specifies the type of storage for a backup. Query the <a id="sthref114"></a><code dir="ltr">V$BACKUP_DEVICE</code> view for information about available device types and names.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605"><span class="xreftitleitalic">deviceSpecifier</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t12" headers="r1c1-t12"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#i78513"><span class="xreftitleitalic">allocOperandList</span></a></span></code></td>
<td class="cellalignment1926" headers="r3c1-t12 r1c2-t12">Specifies control options for the allocated channel. The channel parameters for sequential I/O devices are platform-specific.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#i78513"><span class="xreftitleitalic">allocOperandList</span></a></span></code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref115"></a><a id="sthref116"></a>Examples</p>
<div id="RCMRF90000" class="example">
<p class="titleinexample"><a id="sthref117"></a>Example 2-10 Deleting Backup Sets</p>
<p>Assume that you want to recycle a set of tapes by deleting all RMAN backups. In this example, only a disk channel is configured by default. The example manually allocates an SBT channel, deletes all backups from tape, and then releases the channel.</p>
<pre dir="ltr">
RMAN&gt; ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE sbt;
 
allocated channel: ORA_MAINT_SBT_TAPE_1
channel ORA_MAINT_SBT_TAPE_1: SID=135 device type=SBT_TAPE
channel ORA_MAINT_SBT_TAPE_1: Oracle Secure Backup
 
RMAN&gt; DELETE NOPROMPT BACKUP;
 
List of Backup Pieces
BP Key  BS Key  Pc# Cp# Status      Device Type Piece Name
------- ------- --- --- ----------- ----------- ----------
9957    9954    1   1   AVAILABLE   SBT_TAPE    8oic41ad_1_1
9974    9972    1   1   AVAILABLE   SBT_TAPE    c-28014364-20070308-17
10024   10021   1   1   AVAILABLE   SBT_TAPE    8qic41c3_1_1
10045   10042   1   1   AVAILABLE   SBT_TAPE    c-28014364-20070308-18
10446   10443   1   1   AVAILABLE   SBT_TAPE    8uic47fg_1_1
10487   10482   1   1   AVAILABLE   SBT_TAPE    90ic47ih_1_1
10488   10483   1   1   AVAILABLE   SBT_TAPE    91ic47j1_1_1
10524   10514   1   1   AVAILABLE   SBT_TAPE    92ic47q4_1_1
10540   10538   1   1   AVAILABLE   SBT_TAPE    c-28014364-20070308-1a
deleted backup piece
backup piece handle=8oic41ad_1_1 RECID=198 STAMP=616695118
deleted backup piece
backup piece handle=c-28014364-20070308-17 RECID=199 STAMP=616695145
deleted backup piece
backup piece handle=8qic41c3_1_1 RECID=200 STAMP=616695171
deleted backup piece
backup piece handle=c-28014364-20070308-18 RECID=201 STAMP=616695188
deleted backup piece
backup piece handle=8uic47fg_1_1 RECID=204 STAMP=616701424
deleted backup piece
backup piece handle=90ic47ih_1_1 RECID=205 STAMP=616701521
deleted backup piece
backup piece handle=91ic47j1_1_1 RECID=206 STAMP=616701538
deleted backup piece
backup piece handle=92ic47q4_1_1 RECID=207 STAMP=616701764
deleted backup piece
backup piece handle=c-28014364-20070308-1a RECID=208 STAMP=616701783
Deleted 11 objects
 
RMAN&gt; RELEASE CHANNEL;
 
released channel: ORA_MAINT_SBT_TAPE_1
</pre></div>
<!-- class="example" -->
<div id="RCMRF90001" class="example">
<p class="titleinexample"><a id="CHDGBFJH"></a>Example 2-11 Crosschecking Backups on Multiple Devices</p>
<p>Assume that you want to crosscheck backups of archived redo log files on disk and tape. Assume also that you have the default device type configured to disk, and also have an SBT channel configured, but you want to use different channel settings for both disk and tape. In this case, you can manually allocate maintenance channels with the desired settings.</p>
<pre dir="ltr">
RMAN&gt; SHOW DEFAULT DEVICE TYPE;
 
RMAN configuration parameters for database with db_unique_name PROD are:
CONFIGURE DEFAULT DEVICE TYPE TO DISK;
 
RMAN&gt; SHOW CHANNEL;
 
RMAN configuration parameters for database with db_unique_name PROD are:
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'SBT_LIBRARY=/usr/local/oracle/backup/lib/libobk.so, ENV=(OB_DEVICE_1=stape1)';
 
RMAN&gt; ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE sbt PARMS 'SBT_LIBRARY=/usr/local/oracle/backup/lib/libobk.so, ENV=(OB_DEVICE_1=stape2)';
 
allocated channel: ORA_MAINT_SBT_TAPE_1
channel ORA_MAINT_SBT_TAPE_1: SID=135 device type=SBT_TAPE
channel ORA_MAINT_SBT_TAPE_1: Oracle Secure Backup
 
RMAN&gt; ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE DISK FORMAT "/disk2/%U";
 
allocated channel: ORA_MAINT_DISK_2
channel ORA_MAINT_DISK_2: SID=101 device type=DISK
 
Finished Control File and SPFILE Autobackup at 09-MAR-07
 
RMAN&gt; CROSSCHECK BACKUP OF ARCHIVELOG ALL;
 
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=/disk2/95ic69jc_1_1 RECID=210 STAMP=616769132
crosschecked backup piece: found to be 'EXPIRED'
backup piece handle=/disk2/96ic69jf_1_1 RECID=211 STAMP=616769135
Crosschecked 2 objects
 
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=/disk2/96ic69jf_1_1 RECID=211 STAMP=616769135
Crosschecked 1 objects
 
 
RMAN&gt; RELEASE CHANNEL;
 
released channel: ORA_MAINT_SBT_TAPE_1
released channel: ORA_MAINT_DISK_2
</pre></div>
<!-- class="example" -->
<div id="RCMRF90002" class="example">
<p class="titleinexample"><a id="CHDCJABF"></a>Example 2-12 Crosschecking in an Oracle Real Application Clusters (Oracle RAC) Configuration</p>
<p><a id="sthref118"></a>All nodes in an Oracle RAC configuration should have the same access to all backups on all storage devices, but this is not a requirement. Assume that you want to crosscheck backups on two nodes of an Oracle RAC configuration, where each node has access to a subset of disk backups. It is assumed that all backups are accessible by at least one of the two nodes used in the crosscheck. Any backups not accessible from at least one node are marked <code dir="ltr">EXPIRED</code> after the crosscheck.</p>
<p>The following example illustrates channel connections to Oracle RAC instances <code dir="ltr">inst1</code> and <code dir="ltr">inst2</code>. For both channel connections, RMAN uses the same user name and password that were entered for the target database connection.</p>
<pre dir="ltr">
ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE DISK 
  CONNECT '@inst1';
ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE DISK 
  CONNECT '@inst2';
CROSSCHECK BACKUP;
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta004.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta006.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
