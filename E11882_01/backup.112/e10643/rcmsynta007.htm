<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>BACKUP</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta006.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta008.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">20/158</span> <!-- End Header --><a id="i78895"></a>
<div id="RCMRF107" class="refsect1">
<h1 class="refsect1">BACKUP<a id="ABC31238241"></a><a id="ABC31238241SRI1"></a><a id="ABC31238241SRI12"></a><a id="sthref134"></a><a id="sthref135"></a><a id="sthref136"></a><a id="sthref137"></a><a id="sthref138"></a><a id="sthref139"></a><a id="sthref140"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref141"></a>Purpose</p>
<p>Use the <a id="CHDDJJAJ"></a><code dir="ltr">BACKUP</code> command to back up a primary or standby database, tablespace, data file (current or copy), control file (current or copy), server parameter file, archived redo log file, or backup set.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref142"></a>Additional Topics</p>
<ul>
<li>
<p><a href="#CHDBIAHI">Prerequisites</a></p>
</li>
<li>
<p><a href="#CHDCBIDC">Usage Notes</a></p>
</li>
<li>
<p><a href="#CHDIJGIJ">Syntax</a></p>
</li>
<li>
<p><a href="#CHDCFGEI">Semantics</a></p>
</li>
<li>
<p><a href="#CHDBGAJB">Examples</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDBIAHI"></a>Prerequisites</p>
<p>RMAN must be connected to a target database. See the <code dir="ltr"><a href="rcmsynta011.htm#i80734">CONNECT</a></code> and <code dir="ltr"><a href="rcmsynta2011.htm#i80108">RMAN</a></code> commands to learn how to connect to a database as <code dir="ltr">TARGET</code>.</p>
<p class="subhead2"><a id="RCMRF90006"></a>Database Archiving Modes</p>
<p><a id="sthref143"></a><a id="sthref144"></a><a id="sthref145"></a><a id="sthref146"></a><a id="sthref147"></a><a id="sthref148"></a><a id="sthref149"></a>If the target database is in <code dir="ltr">ARCHIVELOG</code> mode, then the database must be mounted or open with a current control file. Backups made while the database is open are inconsistent. You must apply redo log files after restoring an inconsistent backup to make the database consistent.</p>
<p>If the target database is in <code dir="ltr">NOARCHIVELOG</code> mode, then the database must be mounted after a consistent shutdown when you make the backup. The shutdown is only consistent if you successfully execute the <code dir="ltr">SHUTDOWN</code> command with the <code dir="ltr">NORMAL</code>, <code dir="ltr">IMMEDIATE</code>, or <code dir="ltr">TRANSACTIONAL</code> options. You cannot use RMAN to back up a <code dir="ltr">NOARCHIVELOG</code> database after an instance failure or <code dir="ltr">SHUTDOWN ABORT</code>.</p>
<p class="subhead2"><a id="RCMRF90007"></a>Backup Media</p>
<p>RMAN can only back up files onto valid media. If you specify <code dir="ltr">DEVICE TYPE DISK</code>, then RMAN makes backups to random access disks. You can make a backup on any device that can store a data file. If the statement <code dir="ltr">CREATE TABLESPACE</code> <code dir="ltr"><span class="codeinlineitalic">tablespace_name</span></code> <code dir="ltr">DATAFILE</code> <code dir="ltr"><span class="codeinlineitalic">'filename'</span></code> works, then <code dir="ltr"><span class="codeinlineitalic">'filename'</span></code> is a valid backup path name. If you specify <code dir="ltr">DEVICE TYPE sbt</code>, then you can back up files to any media supported by the media manager.</p>
<p><a id="sthref150"></a><a id="sthref151"></a><a id="sthref152"></a><a id="sthref153"></a>When backing up Oracle Database files to disk, the logical block size of the files must be an even multiple of the physical block size of the destination device. For example, a disk device with a block size of 2 KB can only be used as a destination for backups of Oracle files with logical block sizes of 2 KB, 4 KB, 6 KB and so on. In practice, most disk drives have physical block sizes of 512 bytes, so this limitation rarely affects backup. However, you can encounter this limitation when using <code dir="ltr">BACKUP ... DEVICE TYPE DISK</code> to back your database up to a writeable CD or DVD, or some other device that has a larger physical block size.</p>
<p class="subhead2"><a id="RCMRF90008"></a>Channels</p>
<p>If no automatic channel is configured for the specified device type, then you must manually allocate a channel for each <code dir="ltr">BACKUP</code> execution. If no manual channel is allocated, then RMAN uses the default channels set with the <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> command. RMAN has a <code dir="ltr">DISK</code> channel preconfigured but no preconfigured <code dir="ltr">sbt</code> channels.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Backups that use the disk test API are not supported for production backups. Instead, use the preconfigured <code dir="ltr">DISK</code> channel or manually allocate a <code dir="ltr">DISK</code> channel.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDCBIDC"></a>Usage Notes</p>
<p><a id="sthref154"></a><a id="sthref155"></a><a id="sthref156"></a><a id="sthref157"></a><a id="sthref158"></a><a id="sthref159"></a><a id="sthref160"></a><a id="sthref161"></a>RMAN can only back up data files, control files, server parameter files, archived redo log files, and RMAN backups of these files. RMAN cannot make backups of other database-related files such as network configuration files, password files, the block change tracking file, and the contents of the Oracle home directory. Likewise, some features of Oracle Database, such as external tables or the <code dir="ltr">BFILE</code> data type, store data in files other than those in the preceding list. RMAN cannot back up these files.</p>
<p><a id="sthref162"></a><a id="sthref163"></a>RMAN decomposes a <code dir="ltr">BACKUP</code> command into multiple independent backup steps. RMAN can execute each independent step on any channel allocated for a specific device. If multiple channels are allocated, and if one channel fails or encounters a problem during a backup step, then RMAN attempts to complete the work on another channel. RMAN reports a message in <code dir="ltr">V$RMAN_OUTPUT</code> and in the output to the interactive session or log file when channel failover occurs.</p>
<p><a id="sthref164"></a><a id="sthref165"></a><a id="sthref166"></a>RMAN backups made on one platform are not transportable to a different platform.</p>
<p>RMAN backups made in a previous release of Oracle Database are usable after a database migration or upgrade.</p>
<p><a id="sthref167"></a><a id="sthref168"></a><a id="sthref169"></a>If you change the <code dir="ltr">DB_NAME</code> for a database, but not its DBID, then RMAN considers backups made of the database with the previous <code dir="ltr">DB_NAME</code> as eligible to be restored.</p>
<p class="subhead2"><a id="BGBHABHH"></a><a id="RCMRF90009"></a>Incremental Backups</p>
<p><a id="sthref170"></a><a id="sthref171"></a><a id="sthref172"></a><a id="sthref173"></a><a id="sthref174"></a>An INCREMENTAL backup at level 0 backs up all data blocks in data files being backed up. An incremental backup at level 0 is identical in content to a <code dir="ltr"><a href="#CHDBDFGF">FULL</a></code> backup, but unlike a full backup the level 0 backup is a part of the incremental backup strategy.</p>
<p>A level 1 backup copies only changed blocks. A level 1 incremental backup is either differential or <code dir="ltr">CUMULATIVE</code>. If cumulative, RMAN backs up all blocks changed since the most recent level 0 backup. If differential, RMAN backs up blocks updated since the most recent level 0 or level 1 incremental backup. You can apply a level 1 backup of a standby database to a level 0 backup of a primary database, and also apply a level 1 backup of a primary database to a level 0 backup of a standby database.</p>
<p>Incremental backups at level 0 can be either backup sets or image copies, but incremental backups at level 1 can only be backup sets.</p>
<p>The database performs checks when attempting to create a level 1 incremental backup to ensure that the incremental backup is usable by a subsequent <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> command. Among the checks performed are:</p>
<ul>
<li>
<p>A level 0 backup must exist for each data file in the <code dir="ltr">BACKUP</code> command as the base backup for an incremental strategy. Level 0 backups must not have status <code dir="ltr">UNAVAILABLE</code>. If no level 0 backup exists, then RMAN makes a level 0 backup automatically.</p>
</li>
<li>
<p>Sufficient incremental backups taken since level 0 must exist and be available such that the incremental backup to be created is usable.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
When creating an incremental backup, RMAN considers backups from parent incarnations as valid. For example, assume you make a level 0 backup and then <code dir="ltr">OPEN RESETLOGS</code>. If you make a level 1 incremental backup, then RMAN backs up all blocks changed since the pre-<code dir="ltr">RESETLOGS</code> level 0 backup. When making a level 1 backup, RMAN only makes a new level 0 backup if no level 0 is available in either the current or parent database incarnation.</div>
<p><a id="sthref175"></a><a id="sthref176"></a><a id="sthref177"></a>You can improve incremental backup performance by enabling <span class="bold">block change tracking</span> on a primary or standby database. In this case, RMAN keeps a record of which blocks have changed in the block change tracking file.</p>
<p>The change tracking file maintains bitmaps that mark changes in the data files between backups. The database performs a bitmap switch before each backup. Oracle Database automatically manages space in the change tracking file to retain block change data that covers the 8 most recent backups. After the maximum of 8 bitmaps is reached, the most recent bitmap is overwritten by the bitmap that tracks the current changes.</p>
<p>The first level 0 incremental backup scans the entire data file. Subsequent incremental backups use the block change tracking file to scan only the blocks that have been marked as changed since the last backup. An incremental backup can be optimized only when it is based on a parent backup that was made after the start of the oldest bitmap in the block change tracking file.</p>
<p>Consider the 8-bitmap limit when developing your incremental backup strategy. For example, if you make a level 0 database backup followed by 7 differential incremental backups, then the block change tracking file now includes 8 bitmaps. If you then make a cumulative level 1 incremental backup, RMAN cannot optimize the backup because the bitmap corresponding to the parent level 0 backup is overwritten with the bitmap that tracks the current changes.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8125" href="../../backup.112/e10642/rcmbckba.htm#BRADV8125"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for details about block change tracking</div>
<p class="subhead2"><a id="CHDIHIGD"></a><a id="RCMRF90010"></a>Encryption of Backup Sets</p>
<p><a id="sthref178"></a><a id="sthref179"></a><a id="sthref180"></a><a id="sthref181"></a><a id="sthref182"></a><a id="sthref183"></a><a id="sthref184"></a><a id="sthref185"></a>RMAN can transparently encrypt data written to backup sets and decrypt those backup sets when they are needed in a <code dir="ltr">RESTORE</code> operation. To create encrypted backups on disk, the database must use the Advanced Security Option. To create encrypted backups directly on tape, RMAN must use the Oracle Secure Backup SBT interface, but does not require the Advanced Security Option. RMAN issues an <a id="sthref186"></a><a id="sthref187"></a><code dir="ltr">ORA-19916</code> error if you attempt to create encrypted RMAN backups using an SBT library other than Oracle Secure Backup.</p>
<p><a id="sthref188"></a><a id="sthref189"></a><a id="sthref190"></a><a id="sthref191"></a><a id="sthref192"></a><a id="sthref193"></a><a id="sthref194"></a>RMAN can encrypt backups by using several different encryption algorithms, which are listed in <code dir="ltr">V$RMAN_ENCRYPTION_ALGORITHMS</code>. RMAN supports three modes of encryption for backups:</p>
<ul>
<li>
<p>Transparent encryption, in which RMAN can create and restore encrypted backups with no special DBA intervention, if the required Oracle public key infrastructure (PKI) is available</p>
</li>
<li>
<p>Password-based encryption, where a password is specified during the backup, and the same password must be supplied to restore the backup</p>
</li>
<li>
<p>Dual-mode encryption, where backups can be created using either as with transparent encryption or password-based encryption, and where decryption can be performed based upon either the Oracle Wallet, or a password the DBA supplies at decryption time</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Wallet-based encryption is more secure than password-based encryption because no passwords are involved. You should use password-based encryption only when absolutely necessary because your backups must be transportable.</div>
<p><a id="sthref195"></a><a id="sthref196"></a>The <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> and <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> commands manage the encryption settings for database backups. See the reference entries for those commands for more details. Backup sets containing archived redo log files are encrypted if any of the following is true:</p>
<ul>
<li>
<p><code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">ENCRYPTION ON</code> is in effect when the backup is being created.</p>
</li>
<li>
<p>Encryption is configured for the whole database or at least one tablespace.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><span class="italic">Oracle Database Backup and Recovery User's Guide</span>for an overview of the backup encryption, a guide to its use, and information on choosing among different modes of encryption</p>
</li>
<li>
<p><a class="olink ASOAG9502" href="../../network.112/e40393/asotools.htm#ASOAG9502"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> to learn about PKI and the Oracle Wallet</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="sthref197"></a>Backing Up Standby Databases</p>
<p>The RMAN <code dir="ltr">BACKUP</code> command backs up the standby database exactly the same as a primary database, except that the backup takes place on the standby site. The primary database has no influence on the backup of the standby database.</p>
<p>When you connect to the standby database to perform the backup, use the <code dir="ltr">TARGET</code> keyword and not the <code dir="ltr">AUXILIARY</code> keyword.</p>
<p>The state of the standby database when the backup is made determines whether the backup is consistent or inconsistent. To make a consistent backup, the standby database must shutdown cleanly and be mounted, but not placed in recovery mode. Any other status results in an inconsistent backup and must be restored using media recovery.</p>
<p class="subhead2"><a id="CHDJIIGD"></a><a id="RCMRF90011"></a>RMAN Backups in a Data Guard Environment</p>
<p><a id="sthref198"></a><a id="sthref199"></a><a id="sthref200"></a>A recovery catalog is required when you are performing RMAN operations in a Data Guard environment. The catalog enables all RMAN operations to be transparently executable at any primary or standby database. You can offload primary database backups onto any standby database in the environment; the RMAN backups are interchangeable. If you use RMAN in <code dir="ltr">NOCATALOG</code> mode, then RMAN uses only the metadata in the mounted control file.</p>
<p>In a Data Guard environment, the database that creates a backup or copy is associated with the file. For example, if RMAN connects as <code dir="ltr">TARGET</code> to database <code dir="ltr">prod</code> and backs it up, then this database backup is associated with <code dir="ltr">prod</code>. A backup remains associated with the database that created in unless you use the <code dir="ltr"><a href="rcmsynta009.htm#i79920">CHANGE</a></code> <code dir="ltr">... RESET DB_UNIQUE_NAME</code> to associate the backup with a different database.</p>
<p><a id="sthref201"></a>The association of a backup is different from its accessibility. The recovery catalog considers disk backups as accessible only to the database in the Data Guard environment on which it was created, whereas tape backups created on one database are considered accessible to all databases. If a backup file is not associated with any database, then the row describing it in the recovery catalog view shows <code dir="ltr">null</code> for the <code dir="ltr">SITE_KEY</code> column. By default, RMAN associates files whose <code dir="ltr">SITE_KEY</code> is <code dir="ltr">null</code> with the database to which RMAN is connected as <code dir="ltr">TARGET</code>.</p>
<p>In a Data Guard environment, RMAN commands can operate on any backups that are accessible. For example, assume that databases <code dir="ltr">prod</code> and <code dir="ltr">standby1</code> reside on different hosts. RMAN backs up data file 1 on <code dir="ltr">prod</code> to <code dir="ltr">/prodhst/disk1/df1.dbf</code> on the production host and also to tape. RMAN backs up data file 1 on <code dir="ltr">standby1</code> to <code dir="ltr">/sby1hst/disk2/df1.dbf</code> on the standby host and also to tape. If RMAN is connected to database <code dir="ltr">prod</code> as <code dir="ltr">TARGET</code>, then you cannot use RMAN to perform operations with the <code dir="ltr">/sby1hst/disk2/df1.dbf</code> backup located on the standby host. However, RMAN considers the tape backup made on <code dir="ltr">standby1</code> as eligible to be restored.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref202"></a><a id="sthref203"></a><a id="sthref204"></a>You can FTP a backup from a standby host to a primary host or vice versa and then <code dir="ltr"><a href="rcmsynta008.htm#i79811">CATALOG</a></code> it. After a file is cataloged by the target database, the file is associated with the target database.</div>
<p>If backups are accessible to RMAN, you can use RMAN maintenance commands such as <code dir="ltr"><a href="rcmsynta009.htm#i79920">CHANGE</a></code>, <code dir="ltr"><a href="rcmsynta015.htm#i81077">CROSSCHECK</a></code>, and <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> for backups when connected to any primary or standby database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SBYDB04700" href="../../server.112/e41134/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to learn how to use RMAN to back up and restore files in a Data Guard environment</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDIJGIJ"></a>Syntax</p>
<p class="subhead2"><a id="CHDDBGEA"></a><a id="RCMRF90012"></a><a id="sthref205"></a><a id="sthref206"></a><a href="#i1016992"><span class="xreftitleitalic"><span class="italic">backup</span></span></a>::=</p>
<img width="345" height="129" src="img/backup.gif" alt="Description of backup.gif follows" /><br />
<a id="sthref207" href="img_text/backup.htm">Description of the illustration backup.gif</a><br />
<br />
<p>(<a href="#CHDBCEDG"><span class="xreftitleitalic"><span class="italic">backupOperand</span>::=</span></a>, <a href="#CHDCBGDA"><span class="xreftitleitalic"><span class="italic">backupSpec</span>::=</span></a>, <a href="#CHDDCEFI"><span class="xreftitleitalic"><span class="italic">backupSpecOperand</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDBCEDG"></a><a id="RCMRF90013"></a><a id="sthref208"></a><a id="sthref209"></a><a href="#i1009966"><span class="xreftitleitalic"><span class="italic">backupOperand</span></span></a>::=</p>
<img width="281" height="899" src="img/backupoperand.gif" alt="Description of backupoperand.gif follows" /><br />
<a id="sthref210" href="img_text/backupoperand.htm">Description of the illustration backupoperand.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>, <a href="rcmsubcl007.htm#BABBJGBH"><span class="xreftitleitalic"><span class="italic">fileNameConversionSpec</span>::=</span></a>, <a href="rcmsubcl010.htm#BABHCHAG"><span class="xreftitleitalic"><span class="italic">formatSpec</span>::=</span></a>, <a href="rcmsubcl018.htm#CIHBDIGE"><span class="xreftitleitalic"><span class="italic">toDestSpec</span>::=</span></a>, <a href="#CHDEHIDJ"><span class="xreftitleitalic"><span class="italic">forRecoveryOfSpec</span>::=</span></a>, <a href="rcmsubcl011.htm#BABGDGCC"><span class="xreftitleitalic"><span class="italic">keepOption</span>::=</span></a>, <a href="#CHDCFHEA"><span class="xreftitleitalic"><span class="italic">notBackedUpSpec</span>::=</span></a>, <a href="#CHDEEBDG"><span class="xreftitleitalic"><span class="italic">sizeSpec</span>::=</span></a>, <a href="#CHDGFJFB"><span class="xreftitleitalic"><span class="italic">skipSpec</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDCBGDA"></a><a id="RCMRF90014"></a><a id="sthref211"></a><a id="sthref212"></a><a href="#BGBGHJEH"><span class="xreftitleitalic"><span class="italic">backupSpec</span></span></a>::=</p>
<img width="652" height="581" src="img/backupspec.gif" alt="Description of backupspec.gif follows" /><br />
<a id="sthref213" href="img_text/backupspec.htm">Description of the illustration backupspec.gif</a><br />
<br />
<p>(<a href="rcmsubcl002.htm#BABJGBFG"><span class="xreftitleitalic"><span class="italic">archivelogRecordSpecifier</span>::=</span></a>, <a href="rcmsubcl003.htm#BABGAJEH"><span class="xreftitleitalic"><span class="italic">completedTimeSpec</span>::=</span></a>, <a href="#CHDFEBDC"><span class="xreftitleitalic"><span class="italic">copyOfSpec</span><span class="bold">::=</span></span></a>, <a href="#CHDHEJEG"><span class="xreftitleitalic"><span class="italic">datafileCopySpec</span>::=</span></a>, <a href="rcmsubcl005.htm#BABCCBBJ"><span class="xreftitleitalic"><span class="italic">datafileSpec</span>::=</span></a>, <a href="#CHDDCEFI"><span class="xreftitleitalic"><span class="italic">backupSpecOperand</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDDCEFI"></a><a id="RCMRF90015"></a><a id="sthref214"></a><a id="sthref215"></a><a href="#i1017449"><span class="xreftitleitalic"><span class="italic">backupSpecOperand</span></span></a>::=</p>
<img width="281" height="636" src="img/backupspecoperand.gif" alt="Description of backupspecoperand.gif follows" /><br />
<a id="sthref216" href="img_text/backupspecoperand.htm">Description of the illustration backupspecoperand.gif</a><br />
<br />
<p>(<a href="rcmsubcl010.htm#BABHCHAG"><span class="xreftitleitalic"><span class="italic">formatSpec</span>::=</span></a>, <a href="rcmsubcl018.htm#CIHBDIGE"><span class="xreftitleitalic"><span class="italic">toDestSpec</span>::=</span></a> <a href="rcmsubcl011.htm#BABGDGCC"><span class="xreftitleitalic"><span class="italic">keepOption</span>::=</span></a>, <a href="#CHDCFHEA"><span class="xreftitleitalic"><span class="italic">notBackedUpSpec</span>::=</span></a>, <a href="#CHDEEBDG"><span class="xreftitleitalic"><span class="italic">sizeSpec</span>::=</span></a>, <a href="#CHDGFJFB"><span class="xreftitleitalic"><span class="italic">skipSpec</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDHHDGG"></a><a id="RCMRF90016"></a><a id="sthref217"></a><a id="sthref218"></a><a href="#i1015382"><span class="xreftitleitalic"><span class="italic">backupTypeSpec</span></span></a>::=</p>
<img width="267" height="64" src="img/backuptypespec.gif" alt="Description of backuptypespec.gif follows" /><br />
<a id="sthref219" href="img_text/backuptypespec.htm">Description of the illustration backuptypespec.gif</a><br />
<br />
<p class="subhead2"><a id="CHDFEBDC"></a><a id="RCMRF90017"></a><a id="sthref220"></a><a id="sthref221"></a><a href="#i1017172"><span class="xreftitleitalic"><span class="italic">copyOfSpec</span></span></a><span class="bold">::=</span></p>
<img width="397" height="138" src="img/copyofspec.gif" alt="Description of copyofspec.gif follows" /><br />
<a id="sthref222" href="img_text/copyofspec.htm">Description of the illustration copyofspec.gif</a><br />
<br />
<p>(<a href="rcmsubcl005.htm#BABCCBBJ"><span class="xreftitleitalic"><span class="italic">datafileSpec</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDHEJEG"></a><a id="RCMRF90018"></a><a id="sthref223"></a><a id="sthref224"></a><a href="#i1017077"><span class="xreftitleitalic"><span class="italic">datafileCopySpec</span></span></a>::=</p>
<img width="527" height="164" src="img/datafilecopyspec.gif" alt="Description of datafilecopyspec.gif follows" /><br />
<a id="sthref225" href="img_text/datafilecopyspec.htm">Description of the illustration datafilecopyspec.gif</a><br />
<br />
<p class="subhead2"><a id="CHDIFHEH"></a><a id="RCMRF90019"></a><a id="sthref226"></a><a id="sthref227"></a><a href="#i1010261"><span class="xreftitleitalic"><span class="italic">duration</span></span></a>::=</p>
<img width="397" height="96" src="img/duration.gif" alt="Description of duration.gif follows" /><br />
<a id="sthref228" href="img_text/duration.htm">Description of the illustration duration.gif</a><br />
<br />
<p class="subhead2"><a id="CHDEHIDJ"></a><a id="RCMRF90020"></a><a id="sthref229"></a><a id="sthref230"></a><a href="#i1015480"><span class="xreftitleitalic"><span class="italic">forRecoveryOfSpec</span></span></a>::=</p>
<img width="482" height="126" src="img/forrecoveryofspec.gif" alt="Description of forrecoveryofspec.gif follows" /><br />
<a id="sthref231" href="img_text/forrecoveryofspec.htm">Description of the illustration forrecoveryofspec.gif</a><br />
<br />
<p>(<a href="rcmsubcl010.htm#BABHCHAG"><span class="xreftitleitalic"><span class="italic">formatSpec</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDCFHEA"></a><a id="RCMRF90021"></a><a id="sthref232"></a><a id="sthref233"></a><a href="#i1017236"><span class="xreftitleitalic"><span class="italic">notBackedUpSpec</span></span></a>::=</p>
<img width="352" height="64" src="img/notbackedupspec.gif" alt="Description of notbackedupspec.gif follows" /><br />
<a id="sthref234" href="img_text/notbackedupspec.htm">Description of the illustration notbackedupspec.gif</a><br />
<br />
<p class="subhead2"><a id="CHDEEBDG"></a><a id="RCMRF90022"></a><a id="sthref235"></a><a id="sthref236"></a><a href="#i1017291"><span class="xreftitleitalic"><span class="italic">sizeSpec</span></span></a>::=</p>
<img width="129" height="88" src="img/sizespec.gif" alt="Description of sizespec.gif follows" /><br />
<a id="sthref237" href="img_text/sizespec.htm">Description of the illustration sizespec.gif</a><br />
<br />
<p class="subhead2"><a id="CHDGFJFB"></a><a id="RCMRF90023"></a><a id="sthref238"></a><a id="sthref239"></a><a href="#i1017259"><span class="xreftitleitalic"><span class="italic">skipSpec</span></span></a>::=</p>
<img width="169" height="74" src="img/skipspec.gif" alt="Description of skipspec.gif follows" /><br />
<a id="sthref240" href="img_text/skipspec.htm">Description of the illustration skipspec.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDCFGEI"></a>Semantics</p>
<p class="subhead2"><a id="i1016992"></a><a id="RCMRF90024"></a><a id="sthref241"></a><a id="sthref242"></a> <span class="italic">backup</span></p>
<p>This clause specifies the objects to be backed up as well as the options to control the backup. Refer to <a href="#CHDDBGEA"><span class="xreftitleitalic"><span class="italic">backup</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for Main Clause of BACKUP Command" summary="Describes BACKUP command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t22">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t22" headers="r1c1-t22"><a id="i1035377"></a><code dir="ltr"><span class="codeinlineitalic"><a href="#i1009966"><span class="xreftitleitalic"><span class="italic">backupOperand</span></span></a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t22 r1c2-t22">Specifies various options for the <code dir="ltr">BACKUP</code> command.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t22" headers="r1c1-t22"><a id="i1035382"></a><code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="xreftitleitalic"><span class="italic">backupSpec</span></span></a></span></code></td>
<td class="cellalignment1926" headers="r3c1-t22 r1c2-t22">Specifies one or more objects to be backed up.
<p>Each <code dir="ltr"><span class="codeinlineitalic">backupSpec</span></code> clause generates one or more backup sets (<code dir="ltr"><a href="#CHDBGAJI"><code dir="ltr">AS&nbsp;BACKUPSET</code></a></code>) or image copies (<code dir="ltr"><a href="#CHDEHBEJ"><code dir="ltr">AS&nbsp;COPY</code></a></code>). For <code dir="ltr">AS BACKUPSET</code>, the <code dir="ltr"><span class="codeinlineitalic">backupSpec</span></code> clause generates multiple backup sets if the number of data files specified in or implied by its list of objects exceeds the <code dir="ltr">FILESPERSET</code> limit.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t22" headers="r1c1-t22"><code dir="ltr">&nbsp;&nbsp;&nbsp;PLUS&nbsp;ARCHIVELOG</code></td>
<td class="cellalignment1926" headers="r4c1-t22 r1c2-t22"><a id="sthref243"></a>Includes archived redo log files in the backup (see <a href="#CHDFHAHB">Example 2-15</a>). Causes RMAN to perform the following steps:
<ol>
<li>
<p>Run an <code dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT</code> statement.</p>
</li>
<li>
<p>Run the <code dir="ltr">BACKUP ARCHIVELOG ALL</code> command. If backup optimization is enabled, then RMAN only backs up logs that have not yet been backed up.</p>
</li>
<li>
<p>Back up the files specified in the <code dir="ltr">BACKUP</code> command.</p>
</li>
<li>
<p>Run an <code dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT</code> statement.</p>
</li>
<li>
<p>Back up any remaining archived redo log files. If backup optimization is not enabled, then RMAN backs up the logs generated in step 1 plus all the logs generated during the backup.</p>
</li>
</ol>
<p>You cannot specify <code dir="ltr">PLUS ARCHIVELOG</code> on the <code dir="ltr">BACKUP ARCHIVELOG</code> command or <code dir="ltr">BACKUP AS COPY INCREMENTAL</code> command (or <code dir="ltr">BACKUP INCREMENTAL</code> command when the default backup type is <code dir="ltr">COPY</code>). You cannot specify <code dir="ltr">PLUS ARCHIVELOG</code> when also specifying <code dir="ltr"><a href="#CHDFFDAG">INCREMENTAL FROM SCN</a></code>.</p>
<p>Unless the online redo log is archived after the backup, <code dir="ltr">DUPLICATE</code> is not possible with this backup.</p>
<p><span class="bold">Note:</span> This clause cannot be used with the <code dir="ltr">KEEP UNTIL</code> clause.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t22" headers="r1c1-t22"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code>&nbsp;<code dir="ltr"><span class="codeinlineitalic"><a href="#i1017449"><span class="xreftitleitalic"><span class="italic">backupSpecOperand</span></span></a></span></code></td>
<td class="cellalignment1926" headers="r5c1-t22 r1c2-t22">Specifies a variety of options and parameters that affect the <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="xreftitleitalic"><span class="italic">backupSpec</span></span></a></span></code> clause.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1009966"></a><a id="RCMRF90025"></a><span class="italic"><a id="sthref244"></a><a id="sthref245"></a>backupOperand</span></p>
<p>This subclause specifies options such as the device type and output format. Refer to <a href="#CHDBCEDG"><span class="xreftitleitalic"><span class="italic">backupOperand</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for backupOperand Subclause" summary="Describes BACKUP command backupOperand parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t23">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t23">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1015382"><span class="xreftitleitalic"><span class="italic">backupTypeSpec</span></span></a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t23 r1c2-t23">Specifies the type of backup being created, either backup sets (<code dir="ltr"><a href="#CHDBGAJI"><code dir="ltr">AS&nbsp;BACKUPSET</code></a></code>) or image copies (<code dir="ltr"><a href="#CHDEHBEJ"><code dir="ltr">AS&nbsp;COPY</code></a></code>).
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1015382"><span class="xreftitleitalic"><span class="italic">backupTypeSpec</span></span></a></span></code> for details</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t23" headers="r1c1-t23"><a id="CHDDCCAA"></a><code dir="ltr"><a id="sthref246"></a>CHANNEL</code>&nbsp;<code dir="ltr"><span class="codeinlineitalic">channel_id</span></code></td>
<td class="cellalignment1926" headers="r3c1-t23 r1c2-t23">Specifies the case-sensitive name of a channel to use when creating backups. Use any meaningful name, for example <code dir="ltr">ch1</code> or <code dir="ltr">dev1</code>. The database uses the channel ID to report I/O errors. If you do not set this parameter, then RMAN dynamically assigns the backup sets to any available channels during execution.
<p>As shown in <a href="#CHDCJHFH">Example 2-23</a>, you can use <a id="CHDBCDAJ"></a><code dir="ltr">CHANNEL</code> to specify which channels back up which files.</p>
<p><span class="bold">Note:</span> You can also specify this parameter in the <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="xreftitleitalic"><span class="italic">backupSpec</span></span></a></span></code> clause.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t23" headers="r1c1-t23"><a id="CHDBHECJ"></a><code dir="ltr"><a id="sthref247"></a>CHECK&nbsp;LOGICAL</code></td>
<td class="cellalignment1926" headers="r4c1-t23 r1c2-t23">Tests data and index blocks that pass physical corruption checks for logical corruption (see <a href="#CHDFIFDI">Example 2-25</a>). This option typically adds 1-3% overhead.
<p>Examples of logical corruption are corruption of a row piece or index entry. If RMAN finds logical corruption, then it logs the block in the alert log and server session trace file. The <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">MAXCORRUPT</code> command specifies the total number of physical and logical corruptions permitted in a data file.</p>
<p>By default, the <code dir="ltr">BACKUP</code> command computes a checksum for each block and stores it in the backup. If you specify the <code dir="ltr">NOCHECKSUM</code> option, then RMAN does not perform a checksum of the blocks when writing the backup.</p>
<p>If <code dir="ltr">SET MAXCORRUPT</code> and <code dir="ltr"><a href="#CHDCHHBH"><code dir="ltr">NOCHECKSUM</code></a></code> are not set, then <code dir="ltr">CHECK</code> <code dir="ltr">LOGICAL</code> detects all types of corruption that are possible to detect during a backup.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t23" headers="r1c1-t23"><a id="CHDJAEBG"></a><code dir="ltr"><a id="sthref248"></a>COPIES</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r5c1-t23 r1c2-t23">Sets the number of identical backups (<code dir="ltr">1</code> - <code dir="ltr">4</code>) that RMAN creates. The default value is <code dir="ltr">1</code>.
<p>You can use multiple format strings to specify different names and locations for the copies. <a href="#CHDJIJDH">Example 2-22</a> illustrates a duplexed backup to different locations on disk.</p>
<p>RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices. Also, if <code dir="ltr">COPIES</code> is greater than 1, then the <code dir="ltr">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be enabled on the target database.</p>
<p>You can specify duplexing in multiple commands. The order of precedence is as follows, with settings higher on the list overriding lower settings:</p>
<ol>
<li>
<p><code dir="ltr">BACKUP</code> <a id="CHDFGHHD"></a><code dir="ltr">COPIES</code></p>
</li>
<li>
<p><code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">BACKUP</code> <a id="CHDGHBCC"></a><code dir="ltr">COPIES</code></p>
</li>
<li>
<p><code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">...</code> <code dir="ltr">BACKUP</code> <a id="CHDBJCJJ"></a><code dir="ltr">COPIES</code></p>
</li>
</ol>
<p><span class="bold">Note:</span> This option does not apply with <code dir="ltr">AS COPY</code> and results in an error message.</p>
<p><span class="bold">Note:</span> Duplexing cannot be used when creating files in the fast recovery area.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref249"></a>CUMULATIVE</code></td>
<td class="cellalignment1926" headers="r6c1-t23 r1c2-t23">Copies the data blocks used since the most recent level 0 backup (see <a href="#CHDECGDC">Example 2-16</a>).
<p><span class="bold">Note:</span> This option does not apply with <code dir="ltr"><a href="#CHDEHBEJ"><code dir="ltr">AS&nbsp;COPY</code></a></code> and results in an error message.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t23" headers="r1c1-t23"><a id="CHDGBFGF"></a><code dir="ltr"><a id="sthref250"></a>DEVICE&nbsp;TYPE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605"><span class="xreftitleitalic">deviceSpecifier</span></a></span></code></td>
<td class="cellalignment1926" headers="r7c1-t23 r1c2-t23">Allocates automatic channels for the specified device type only. For example, if you configure disk and tape channels, then configure <code dir="ltr">sbt</code> as the default device type, then the following command allocates disk channels only:
<pre dir="ltr">
BACKUP DEVICE TYPE DISK DATABASE;
</pre>
<p>The <code dir="ltr">DEVICE TYPE</code> option is valid only for automatic channels and is not valid for manually allocated channels. You cannot use the <code dir="ltr">DEVICE TYPE</code> option for a device other than <code dir="ltr">DISK</code> if you have not run <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">DEVICE TYPE</code> for this device.</p>
<p><span class="bold">Note:</span> To specify a disk channel for the <code dir="ltr">BACKUP RECOVERY AREA</code> command, you must use the <code dir="ltr">TO DESTINATION</code> of the subclause <a href="rcmsubcl001.htm#CIHHJFBD"><span class="italic">toDestSpec</span></a>.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605"><span class="xreftitleitalic">deviceSpecifier</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref251"></a>DISKRATIO</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r8c1-t23 r1c2-t23">Directs RMAN to populate each backup set with data files from at least <span class="italic">integer</span> disks.
<p>This parameter is only enabled when you are backing up data files or control files, and when the operating system can give RMAN disk contention and node affinity data. To manually disable this feature, set <code dir="ltr">DISKRATIO</code> to <code dir="ltr">0</code>.</p>
<p>For example, assume that data files are distributed across 10 disks. If the disks supply data at 10 bytes/second, and if the tape drive requires 50 bytes/second to keep streaming, then set <code dir="ltr">DISKRATIO</code> to <code dir="ltr">5</code> to direct RMAN to include data files from at least 5 disks in each backup set.</p>
<p>If you set <code dir="ltr"><a href="#CHDEECJA">FILESPERSET</a></code> but not <code dir="ltr">DISKRATIO</code>, then <code dir="ltr">DISKRATIO</code> defaults to the same value as <code dir="ltr">FILESPERSET</code>. If you specify neither parameter, then <code dir="ltr">DISKRATIO</code> defaults to 4. RMAN compares the <code dir="ltr">DISKRATIO</code> value to the actual number of devices involved in the backup and uses the lowest value. For example, if <code dir="ltr">DISKRATIO</code> is 4 and the data files are located on three disks, then RMAN attempts to include data files from three disks in each backup set.</p>
<p>The <code dir="ltr">DISKRATIO</code> parameter is easier for data file backups when the data files are striped or reside on separate disk spindles and you either:</p>
<ul>
<li>
<p>Use a high-bandwidth tape drive that requires several data files to be multiplexed to keep the tape drive streaming.</p>
</li>
<li>
<p>Make backups while the database is open and you must spread the I/O load across several disk spindles to leave bandwidth for online operations.</p>
</li>
</ul>
<p><span class="bold">Note:</span> Do not spread I/O over more than the minimum number of disks required to keep the tape streaming. Otherwise, you increase restore time for a file without increasing performance.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r9c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1010261"><span class="italic">duration</span></a></span></code></td>
<td class="cellalignment1926" headers="r9c1-t23 r1c2-t23">Specifies options related to the maximum time for a backup command to run.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1010261"><span class="italic">duration</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r10c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl007.htm#i101650"><span class="xreftitleitalic">fileNameConversionSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r10c1-t23 r1c2-t23">This option is valid only when <code dir="ltr">BACKUP</code> is creating image copies. Files being copied are renamed according to the specified patterns. If a file being backed up has a name that does not match any of the specified rename patterns, then RMAN uses <code dir="ltr"><a href="#CHDJFEHD">FORMAT</a></code> to name the output image copies. If no <code dir="ltr">FORMAT</code> is specified, then RMAN uses the default format <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code>.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl007.htm#i101650"><span class="xreftitleitalic">fileNameConversionSpec</span></a></span></code> for file renaming patterns</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r11c1-t23" headers="r1c1-t23"><a id="CHDEECJA"></a><code dir="ltr"><a id="sthref252"></a>FILESPERSET</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r11c1-t23 r1c2-t23">Specifies the maximum number of input files to include in each output backup set. This parameter is only relevant when <code dir="ltr">BACKUP</code> generates backup sets.
<p>RMAN backs up the files in each <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> as one or more backup sets. When the number of files in each <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> exceeds the <code dir="ltr">FILESPERSET</code> setting, then RMAN splits the files into multiple backup sets accordingly. The default value for <code dir="ltr">FILESPERSET</code> is <code dir="ltr">64</code>.</p>
<p>The RMAN behavior is illustrated by the following <code dir="ltr">BACKUP</code> commands:</p>
<pre dir="ltr">
BACKUP AS BACKUPSET (DATAFILE 3, 4, 5, 6, 7) (DATAFILE 8, 9);
BACKUP AS BACKUPSET DATAFILE 3, 4, 5, 6, 7, 8, 9;
BACKUP AS BACKUPSET DATAFILE 3, ... 72;
</pre>
<p>In the first command, RMAN places data files 3, 4, 5, 6, and 7 into one backup set and data files 8 and 9 into another backup set. In the second command, RMAN places all data files into one backup set. In the third command, the ellipses indicate data files 3 through 72. Because in this case RMAN is backing up 70 data files, RMAN places 64 files in one backup set and 6 in another.</p>
<p>By default, RMAN divides files among backup sets to make optimal use of channel resources. The number of files to be backed up is divided by the number of channels. If the result is less than 64, then this number is the <code dir="ltr">FILESPERSET</code> value. Otherwise, <code dir="ltr">FILESPERSET</code> defaults to 64.</p>
<p><span class="bold">Note:</span> You cannot specify the number of backup pieces that are in a backup set.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r12c1-t23" headers="r1c1-t23"><a id="CHDGFFBB"></a><code dir="ltr"><a id="sthref253"></a>FORCE</code></td>
<td class="cellalignment1926" headers="r12c1-t23 r1c2-t23">Forces RMAN to ignore backup optimization. That is, even if <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">BACKUP OPTIMIZATION</code> is set to <code dir="ltr">ON</code>, RMAN backs up all specified files.
<p><span class="bold">Note:</span> You can also specify this option in the <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017449"><span class="italic">backupSpecOperand</span></a></span></code> clause.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r13c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref254"></a>AUXILIARY&nbsp;FORMAT</code></td>
<td class="cellalignment1926" headers="r13c1-t23 r1c2-t23">Copies the files on the target database to the specified location on the auxiliary instance. RMAN can only generate image copies when <code dir="ltr">AUXILIARY FORMAT</code> is specified. RMAN must be connected to both <code dir="ltr">TARGET</code> and <code dir="ltr">AUXILIARY</code> instances and have access to auxiliary channels.
<p>You can use the <code dir="ltr">BACKUP AUXILIARY FORMAT</code> command to copy data files, archived logs, controlfile, and server parameter file (spfile) over the network between primary and standby databases. For example, if a data file on a primary database was lost, you could <code dir="ltr"><a href="rcmsynta011.htm#i80734">CONNECT</a></code> to the standby database as <code dir="ltr">TARGET</code> and the primary database as <code dir="ltr">AUXILIARY</code>, and copy an intact data file from the standby host to the primary host.</p>
<p><span class="bold">See Also:</span><a href="#BGBCEHII">Example 2-30, "Copying Archived Log From Operating System File to ASM"</a></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r14c1-t23" headers="r1c1-t23"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code></td>
<td class="cellalignment1926" headers="r14c1-t23 r1c2-t23">Specifies a pattern for naming the output image copies on an auxiliary instance. The path must be valid on the auxiliary host.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code> for valid substitution variables</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r15c1-t23" headers="r1c1-t23"><code dir="ltr">&nbsp;&nbsp;&nbsp;NEW</code></td>
<td class="cellalignment1926" headers="r15c1-t23 r1c2-t23">Creates an image copy in the directory specified in the <code dir="ltr">DB_CREATE_FILE_DEST</code> initialization parameter of the auxiliary instance. The image copy is an Oracle-managed file.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r16c1-t23" headers="r1c1-t23"><a id="CHDJFEHD"></a><code dir="ltr"><a id="sthref255"></a>FORMAT</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code></td>
<td class="cellalignment1926" headers="r16c1-t23 r1c2-t23">Specifies a pattern for naming the output backup pieces or image copies (see <a href="#CHDHAGDD">Example 2-17</a>). For <code dir="ltr"><a href="#CHDEHBEJ"><code dir="ltr">AS&nbsp;COPY</code></a></code>, if one or more of the directories mentioned in the specified format does not exist, then RMAN signals an error.
<p>The default location for disk backups depends on whether a fast recovery area is enabled and whether <code dir="ltr">FORMAT</code> is specified:</p>
<ul>
<li>
<p>If a fast recovery area is enabled, and if you <span class="italic">do</span> specify <code dir="ltr">FORMAT</code>, then RMAN names the output files according to the <code dir="ltr">FORMAT</code> setting. If no location is specified in <code dir="ltr">FORMAT</code>, then RMAN creates the backup in a platform-specific location&mdash;not in the recovery area.</p>
</li>
<li>
<p>If a fast recovery area is enabled, and if you do <span class="italic">not</span> specify <code dir="ltr">FORMAT</code>, then RMAN creates the backup in the recovery area and uses the substitution variable <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code> to name the backup.</p>
</li>
<li>
<p>If a fast recovery area is <span class="italic">not</span> enabled, and if you do <span class="italic">not</span> specify <code dir="ltr">FORMAT</code>, then RMAN creates the backup in a platform-specific location and uses <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code> to name the backup.</p>
</li>
</ul>
<p>To create RMAN backups in the fast recovery area with names in Oracle Managed Files format, do not specify the <code dir="ltr">FORMAT</code> clause on the <code dir="ltr">BACKUP</code> command or channel.</p>
<p><span class="bold">Note:</span> You cannot specify an Oracle Managed Files file name as the format for a backup. For example, if <code dir="ltr">+DISK1/datafile/system.732.609791431</code> is an OMF file name, then you cannot specify this file name in the <code dir="ltr">FORMAT</code> parameter.</p>
<p>Backup pieces must have unique names. The maximum length of a backup piece file name is platform-specific. For backups to a media manager, the length is also limited by the limit in the supported version of the media management API. Vendors supporting SBT 1.1 must support file names up to 14 characters. Some SBT 1.1 vendors may support longer file names. Vendors supporting SBT 2.0 must support file names up to 512 characters. Some SBT 2.0 vendors may support longer file names.</p>
<p>You cannot specify multiple, identical <code dir="ltr">FORMAT</code> strings within a single <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> (for example, <code dir="ltr">BACKUP DATAFILE 3 TO '/tmp/df3.f', DATAFILE 4 TO '/tmp/df4.f'</code>). However, RMAN permits a single <code dir="ltr">FORMAT</code> string to exist in multiple <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> clauses.</p>
<p><span class="bold">Note:</span> If you are making an archival backup with the <code dir="ltr">KEEP</code> option (see <a href="#CHDCIBCJ">Example 2-26</a>), then the format string must contain <code dir="ltr">%U</code>. The autobackup also uses this format string.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code> for valid substitution variables</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r17c1-t23" headers="r1c1-t23"><code dir="ltr">TO DESTINATION</code> <span class="italic"><a href="rcmsubcl001.htm#CIHHJFBD"><span class="italic">toDestSpec</span></a></span></td>
<td class="cellalignment1926" headers="r17c1-t23 r1c2-t23">Specifies the directory where the backup is created. This parameter is valid for disk and not SBT channels. The backup files are created in an Oracle Managed Files (OMF) directory. Backup skips the files only when backups do not exist in the specified <code dir="ltr">TO DESTINATION</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r18c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1015480"><span class="italic">forRecoveryOfSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r18c1-t23 r1c2-t23">Identifies the backup being created as an incremental backup to be used in rolling forward an image copy.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1015480"><span class="italic">forRecoveryOfSpec</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r19c1-t23" headers="r1c1-t23"><a id="CHDBDFGF"></a><code dir="ltr"><a id="sthref256"></a>FULL</code></td>
<td class="cellalignment1926" headers="r19c1-t23 r1c2-t23">Creates a backup of all blocks of data files included in the backup. <code dir="ltr">FULL</code> is the opposite of <code dir="ltr">INCREMENTAL</code>. RMAN makes full backups by default if neither <code dir="ltr">FULL</code> nor <code dir="ltr">INCREMENTAL</code> is specified.
<p>A full backup has no effect on subsequent incremental backups and is not considered a part of any incremental backup strategy. A full image copy backup can be incrementally updated, however, by applying incremental backups with the <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> command.</p>
<p><span class="bold">Note:</span> Unused block compression, which is described in the entry for <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDIHCHG">AS&nbsp;BACKUPSET</a></code>, causes some data file blocks to be skipped during full backups.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r20c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref257"></a>INCREMENTAL&nbsp;LEVEL</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r20c1-t23 r1c2-t23">Copies only those data blocks that have changed since the last incremental <code dir="ltr"><span class="codeinlineitalic">integer</span></code> backup, where <code dir="ltr"><span class="codeinlineitalic">integer</span></code> is <code dir="ltr">0</code> or <code dir="ltr">1</code> (see <a href="#CHDECGDC">Example 2-16</a>).
<p>See <a href="#BGBHABHH">"Incremental Backups"</a> for an explanation of incremental backups.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r21c1-t23" headers="r1c1-t23"><code dir="ltr">INCREMENTAL&nbsp;FROM&nbsp;SCN</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r21c1-t23 r1c2-t23">Creates an incremental backup of all specified data files that includes all data file blocks changed at SCNs greater than or equal to the specified SCN.
<p>One use of this option is to refresh a standby database with changes from the primary database (see <a href="#CHDECIJB">Example 2-24</a>, and the chapter on RMAN backups in <a class="olink SBYDB04700" href="../../server.112/e41134/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>). This backup contains all changed blocks since the standby database was created or last synchronized. At the standby database, you can use <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> with <code dir="ltr">NOREDO</code> to apply the incremental backup. All changed blocks captured in the incremental backup are applied at the standby database, bringing it current with the primary database.</p>
<p><a id="sthref258"></a><a id="sthref259"></a>If you are <span class="italic">not</span> making incremental backups based on Volume Shadow Copy Service (VSS) snapshots, then you should specify <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code> when you specify <a id="CHDFFDAG"></a><code dir="ltr">INCREMENTAL FROM SCN</code>. The <code dir="ltr">FORMAT</code> string should include substitution variables such as <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code> because RMAN generates a control file backup.</p>
<p>If you specify <code dir="ltr">FROM SCN</code> with the <code dir="ltr">NOKEEP</code> option, and if you do <span class="italic">not</span> specify <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code> when you specify <code dir="ltr">INCREMENTAL FROM SCN</code>, then RMAN creates incremental backups in the fast recovery area so that you can create incremental backups based on VSS snapshots in a Windows environment. In this way, you can use incremental backup sets and VSS shadow copies in conjunction. Specify the checkpoint SCN value in the <code dir="ltr">FROM SCN</code> parameter identical to the <code dir="ltr">BACKUP_CHECKPOINT</code> value in the VSS backup metadata document. If block change tracking is enabled, then the backups use the change tracking mechanism, which significantly reduces the time taken to create incremental backups. RMAN can apply incremental backups from the fast recovery area during recovery transparently.</p>
<p><span class="bold">Note:</span> You cannot use <code dir="ltr">PLUS ARCHIVELOG</code> when also specifying <code dir="ltr">INCREMENTAL FROM SCN</code>.</p>
<p><span class="bold">See Also:</span> <a class="olink NTQRF280" href="../../win.112/e10845/vss.htm#NTQRF280"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> to learn about making backups with VSS</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r22c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl011.htm#i97063">keepOption</a></span></code></td>
<td class="cellalignment1926" headers="r22c1-t23 r1c2-t23"><a id="sthref260"></a><a id="sthref261"></a>Overrides any configured retention policy for this backup so that the backup is not considered obsolete, as shown in <a href="#CHDCIBCJ">Example 2-26</a>.
<p>You can use the <code dir="ltr">KEEP</code> syntax to generate archival database backups that satisfy business or legal requirements. The <code dir="ltr">KEEP</code> setting is an attribute of the backup set (not individual backup piece) or image copy.</p>
<p><span class="bold">Note:</span> You cannot use <code dir="ltr">KEEP</code> with <code dir="ltr">BACKUP BACKUPSET</code>.</p>
<p>With the <code dir="ltr">KEEP</code> syntax, you can keep the backups so that they are considered obsolete after a specified time (<code dir="ltr">KEEP UNTIL</code>), or make them never obsolete (<code dir="ltr">KEEP FOREVER</code>). As shown in <a href="#CHDJJIJG">Example 2-27</a>, you must be connected to a recovery catalog when you specify <code dir="ltr">KEEP FOREVER</code>.</p>
<p><span class="bold">Note:</span> You can use <code dir="ltr"><a href="rcmsynta009.htm#i79920">CHANGE</a></code> to alter the status of a backup generated with <code dir="ltr">KEEP</code>.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl011.htm#i97063">keepOption</a></span></code> for more information about backups made with the <code dir="ltr">KEEP</code> option</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r23c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref262"></a>MAXSETSIZE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017291"><span class="italic">sizeSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r23c1-t23 r1c2-t23"><a id="sthref263"></a>Specifies a maximum size for a backup set (as shown in <a href="#CHDHAGDD">Example 2-17</a>). RMAN limits all backup sets to this size.
<p>It is possible for a backup set to span multiple tapes, so blocks from each data file are written to multiple tapes. If one tape of a multivolume backup set fails, then you lose the data on all the tapes rather than just one. Because a backup set always include a whole file rather than part of a file, you can use <code dir="ltr">MAXSETSIZE</code> to specify that each backup set should fit on one tape.</p>
<p>Specify size in bytes (default), kilobytes (<code dir="ltr">K</code>), megabytes (<code dir="ltr">M</code>), or gigabytes (<code dir="ltr">G</code>). For example, to limit a backup set to 3 MB, specify <code dir="ltr">MAXSETSIZE 3M</code>. The default size is in bytes, rounded down from kilobytes. For example, <code dir="ltr">MAXSETSIZE 3000</code> is rounded down to 2 KB (2048 bytes). The minimum value must be greater than or equal to the database block size.</p>
<p>The default number of files in each backup set is determined by <code dir="ltr"><a href="#CHDEECJA">FILESPERSET</a></code>, which defaults to 64. When you specify <code dir="ltr">MAXSETSIZE</code>, RMAN attempts to limit the size in bytes of the backup sets according to the <code dir="ltr">MAXSETSIZE</code> parameter. The limit on the number of files in a backup set apply even if the total size of the resulting backup set is less than <code dir="ltr">MAXSETSIZE</code>.</p>
<p><span class="bold">Note:</span> This option results in an error message if used with <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDFDFEH">AS&nbsp;COPY</a></code>. If you run <code dir="ltr">BACKUP AS COPY</code> on a channel that has <code dir="ltr">MAXSETSIZE</code> set, then <code dir="ltr">MAXSETSIZE</code> is silently ignored.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r24c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017236"><span class="italic">notBackedUpSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r24c1-t23 r1c2-t23"><a id="sthref264"></a>Limits the set of archived redo log files to be backed up according to whether a specified number of backups are present (and not obsolete), or whether the logs have been backed up since a specified date.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017236"><span class="italic">notBackedUpSpec</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r25c1-t23" headers="r1c1-t23"><a id="CHDCHHBH"></a><a id="CHDHHBJC"></a><code dir="ltr"><a id="sthref265"></a>NOCHECKSUM</code></td>
<td class="cellalignment1926" headers="r25c1-t23 r1c2-t23"><a id="sthref266"></a><a id="sthref267"></a>Suppresses block checksums during the backup.
<p>A checksum is a number that is computed from the contents of a data block. <code dir="ltr">DB_BLOCK_CHECKSUM</code> is a database initialization parameter that controls the writing of checksums for the blocks in data files in the database (not backups). If <code dir="ltr">DB_BLOCK_CHECKSUM</code> is <code dir="ltr">typical</code>, then the database computes a checksum for each block during normal operations and stores it in the block before writing it to disk. When the database reads the block from disk later, it recomputes the checksum and compares it to the stored value. If they do not match, then the block is damaged.</p>
<p><span class="bold">Note:</span> You cannot disable checksums for data files in the <code dir="ltr">SYSTEM</code> tablespace even if <code dir="ltr">DB_BLOCK_CHECKSUM=false</code>.</p>
<p>By default, the <code dir="ltr">BACKUP</code> command computes a checksum for each block and stores it in the backup. The <code dir="ltr">BACKUP</code> command ignores the values of <code dir="ltr">DB_BLOCK_CHECKSUM</code> because this initialization parameter applies to data files in the database, not backups. If you specify the <code dir="ltr">NOCHECKSUM</code> option, then RMAN does not perform a checksum of the blocks when writing the backup.</p>
<p>When restoring a backup data file, RMAN honors the <a id="sthref268"></a><a id="sthref269"></a><code dir="ltr">DB_BLOCK_CHECKSUM</code> initialization parameter setting. RMAN clears the checksum if <code dir="ltr">DB_BLOCK_CHECKSUM</code> is set to <code dir="ltr">false</code>. If set to <code dir="ltr">typical</code>, then RMAN verifies the checksum when restoring from the backup and writing to the data file.</p>
<p><span class="bold">Note:</span> You can turn off checksum checking by specifying <code dir="ltr">NOCHECKSUM</code>, but other physical consistency checks, such as checks of the block headers and footers, cannot be disabled.</p>
<p><span class="bold">See Also:</span> <a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">DB_BLOCK_CHECKSUM</code> initialization parameter</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r26c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref270"></a>NOEXCLUDE</code></td>
<td class="cellalignment1926" headers="r26c1-t23 r1c2-t23">When specified on a <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDFCICI">DATABASE</a></code> or <code dir="ltr">BACKUP COPY OF DATABASE</code> command, RMAN backs up all tablespaces, including any for which a <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">EXCLUDE</code> command has been entered. This option does not override <code dir="ltr"><a href="#CHDJJJCB">SKIP</a></code> <code dir="ltr">OFFLINE</code> or <code dir="ltr">SKIP READONLY</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r27c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref271"></a>POOL</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r27c1-t23 r1c2-t23"><a id="sthref272"></a>Specifies the media pool in which the backup is stored. Consult your media management documentation to see whether <code dir="ltr">POOL</code> is supported.
<p><span class="bold">Note:</span> This option does not work with <code dir="ltr"><a href="#CHDFDFEH">AS&nbsp;COPY</a></code> and results in an error.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r28c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref273"></a>PROXY</code></td>
<td class="cellalignment1926" headers="r28c1-t23 r1c2-t23"><a id="sthref274"></a><a id="sthref275"></a><a id="sthref276"></a>Backs up the specified files with the proxy copy functionality, which gives the media management software control over the data transfer between storage devices and the data files on disk. The media manager&mdash;not RMAN&mdash;decides how and when to move data.
<p>When you run <code dir="ltr">BACKUP</code> with the <code dir="ltr">PROXY</code> option, RMAN performs these steps:</p>
<ol>
<li>
<p>Searches for a channel of the specified device type that is proxy-capable. If no such channel is found, then RMAN issues a warning and attempts a a conventional (that is, non-proxy) backup of the specified files.</p>
</li>
<li>
<p>If RMAN locates a proxy-capable channel, then it calls the media manager to check if it can proxy copy the files. If the media manager cannot proxy copy, then RMAN uses conventional backup sets to back up the files.</p>
</li>
</ol>
<p><span class="bold">Note:</span> If you specify <code dir="ltr">PROXY</code>, then the <code dir="ltr">%p</code> variable must be included in the <code dir="ltr">FORMAT</code> string either explicitly or implicitly within <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code>.</p>
<p><span class="bold">Note:</span> This option does not work with <code dir="ltr"><a href="#CHDFDFEH">AS&nbsp;COPY</a></code> and results in an error.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r29c1-t23" headers="r1c1-t23"><code dir="ltr">&nbsp;&nbsp;&nbsp;ONLY</code></td>
<td class="cellalignment1926" headers="r29c1-t23 r1c2-t23">Causes the database to issue an error message when it cannot proxy copy rather than creating conventional backup sets. If you do not want RMAN to try a conventional copy when a proxy copy fails, use the <code dir="ltr">ONLY</code> option</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r30c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref277"></a>REUSE</code></td>
<td class="cellalignment1926" headers="r30c1-t23 r1c2-t23"><a id="sthref278"></a><a id="sthref279"></a><a id="sthref280"></a>Enables RMAN to overwrite an existing backup or copy with the same file name as the file that <code dir="ltr">BACKUP</code> is currently creating.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r31c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref281"></a>SECTION&nbsp;SIZE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017291"><span class="italic">sizeSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r31c1-t23 r1c2-t23"><a id="sthref282"></a><a id="sthref283"></a><a id="sthref284"></a><a id="sthref285"></a><a id="sthref286"></a>Specifies the size of each backup section produced during a data file backup.
<p>By setting this parameter, RMAN can create a <span class="bold">multisection backup</span>. In a multisection backup, RMAN creates a backup piece that contains one <span class="bold">file section</span>, which is a contiguous range of blocks in a file. All sections of a multisection backup are the same size. You can create a multisection backup for a data file, but not a data file copy.</p>
<p>File sections enable RMAN to create multiple steps for the backup of a single large data file. RMAN channels can process each step independently and in parallel, with each channel producing one section of a multisection backup set.</p>
<p>If you specify a section size that is larger than the size of the file, then RMAN does not use multisection backup for the file. If you specify a small section size that would produce more than 256 sections, then RMAN increases the section size to a value that results in exactly 256 sections.</p>
<p>Depending on where you specify this parameter in the RMAN syntax, you can specify different section sizes for different files in the same backup job.</p>
<p><span class="bold">Note:</span> You cannot use <code dir="ltr">SECTION SIZE</code> with <code dir="ltr">MAXPIECESIZE</code> or with <code dir="ltr">INCREMENTAL LEVEL 1</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r32c1-t23" headers="r1c1-t23"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017259"><span class="italic">skipSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r32c1-t23 r1c2-t23"><a id="sthref287"></a><a id="sthref288"></a>Excludes data files or archived redo log files from the backup if they are inaccessible, offline, or read-only.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017259"><span class="italic">skipSpec</span></a></span></code> for details.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r33c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref289"></a>TAG</code> <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code></td>
<td class="cellalignment1926" headers="r33c1-t23 r1c2-t23"><a id="sthref290"></a><a id="sthref291"></a><a id="sthref292"></a><a id="sthref293"></a><a id="sthref294"></a>Specifies a user-specified tag name for a backup set, proxy copy, data file copy, or control file copy. The tag is applied to the output files generated by the <code dir="ltr">BACKUP</code> command.
<p>The tag name is not case-sensitive. The name must be 30 characters or less. The characters are limited to the characters that are valid in file names on the target file system. For example, ASM does not support the use of the hyphen (<code dir="ltr">-</code>) character in the file names it uses internally, so <code dir="ltr">weekly-incremental</code> is not a valid tag name for backups in ASM disk groups. Environment variables are not valid in the <code dir="ltr">TAG</code> parameter.</p>
<p>Typically, a tag name is a meaningful name such as <code dir="ltr">MON_PM_BKUP</code> or <code dir="ltr">WEEKLY_FULL_BKUP</code>. Tags are reusable, so that backup set 100 can have the tag <code dir="ltr">MON_PM_BKUP</code> one week while backup set 105 has the same tag the next week.</p>
<p>If you do not specify a tag name, then by default RMAN creates a tag for backups (except for control file autobackups). The default tag uses the format <code dir="ltr">TAG</code><code dir="ltr"><span class="codeinlineitalic">YYYYMMDDTHHMMSS</span></code>, where <code dir="ltr"><span class="codeinlineitalic">YYYY</span></code> is the year, <code dir="ltr"><span class="codeinlineitalic">MM</span></code> is the month, <code dir="ltr"><span class="codeinlineitalic">DD</span></code> is the day, <code dir="ltr"><span class="codeinlineitalic">HH</span></code> is the hour (in 24-hour format), <code dir="ltr"><span class="codeinlineitalic">MM</span></code> is the minutes, and <code dir="ltr"><span class="codeinlineitalic">SS</span></code> is the seconds. For example, a backup of data file <code dir="ltr">1</code> might receive the tag <code dir="ltr">TAG20070208T133437</code>. The date and time refer to when RMAN started the backup. If multiple backup sets are created by one <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDIHCHG">AS&nbsp;BACKUPSET</a></code> command, then each backup piece is assigned the same default tag.</p>
<p>You can also specify the tag at the <code dir="ltr"><span class="codeinlineitalic"><a href="#i1035382"><code dir="ltr"><span class="codeinlineitalic"><span class="italic">backupSpec</span></span></code></a></span></code> level. If you specify the tag at:</p>
<ul>
<li>
<p>The command level, then all backup sets created by the command have the tag.</p>
</li>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">backupSpec</span></code> level, then backup sets created with different backup specifications can have different tags.</p>
</li>
<li>
<p>Both levels, then the tag in the <code dir="ltr"><span class="codeinlineitalic">backupSpec</span></code> takes precedence.</p>
</li>
</ul>
<p><span class="bold">Note:</span> A tag is an attribute of each backup piece in a given copy of a backup set (for <code dir="ltr"><a href="#CHDIHCHG">AS&nbsp;BACKUPSET</a></code>) or each image copy (for <code dir="ltr"><a href="#CHDFDFEH">AS&nbsp;COPY</a></code>). For example, if you run <code dir="ltr">BACKUP AS BACKUPSET COPIES 1 DATABASE TAG TUE_PM</code>, then only one copy of the backup set exists and each backup piece has tag <code dir="ltr">TUE_PM</code>. Assume that this backup set has primary key <code dir="ltr">1234</code>. If you then run <code dir="ltr">BACKUP BACKUPSET 1234 TAG WED_PM</code>, then the first copy of the backup set has tag <code dir="ltr">TUE_PM</code> and the second copy of the backup set has tag <code dir="ltr">WED_PM</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r34c1-t23" headers="r1c1-t23"><code dir="ltr"><a id="sthref295"></a>VALIDATE</code></td>
<td class="cellalignment1926" headers="r34c1-t23 r1c2-t23"><a id="sthref296"></a><a id="sthref297"></a><a id="sthref298"></a><a id="sthref299"></a>Scans the specified files and verifies their contents, testing whether this file can be backed up and whether the data blocks are corrupt.
<p>RMAN creates no output files. This option is equivalent to using the <code dir="ltr"><a href="rcmsynta2024.htm#i86794">VALIDATE</a></code> command on the database files specified in the backup.</p>
<p>If you do not specify <code dir="ltr">CHECK LOGICAL</code>, then <code dir="ltr">BACKUP VALIDATE</code> checks for physical corruption only. If you specify <code dir="ltr">CHECK LOGICAL</code>, then <code dir="ltr">BACKUP VALIDATE</code> checks for both physical and logical corruption. RMAN populates the <code dir="ltr">V$DATABASE_BLOCK_CORRUPTION</code> view with any corruptions that it finds.</p>
<p>You can use the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">MAXCORRUPT</code> command to set a limit for the number of corrupt blocks tolerated during the backup validation. The default is zero.</p>
<p>If you execute <code dir="ltr">BACKUP INCREMENTAL</code> with <code dir="ltr">VALIDATE</code>, then the behavior depends on whether block change tracking is enabled. If change tracking is enabled, then RMAN validates only changed blocks; otherwise, RMAN validates all blocks in the files included in the backup.</p>
<p><span class="bold">Note:</span> You cannot validate backups of backup sets.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="BGBGHJEH"></a><a id="RCMRF90026"></a><span class="italic"><a id="sthref300"></a><a id="sthref301"></a><a id="sthref302"></a><a id="sthref303"></a>backupSpec</span></p>
<p>This subclause specifies a list of one or more objects to be backed up. Each <span class="italic">backupSpec</span> clause generates one or more backup sets (<code dir="ltr"><a href="#CHDIHCHG">AS&nbsp;BACKUPSET</a></code>) or image copies (<code dir="ltr"><a href="#CHDFDFEH">AS&nbsp;COPY</a></code>). For <code dir="ltr">AS BACKUPSET</code>, the <span class="italic">backupSpec</span> clause generates multiple backup sets if the number of data files specified in or implied by its list of objects exceeds the default limit of 4 data files or 16 archived redo log files in each backup set. Refer to <a href="#CHDCBGDA"><span class="xreftitleitalic"><span class="italic">backupSpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for backupSpec Subclause" summary="Describes BACKUP command backupSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t24">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t24">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t24" headers="r1c1-t24"><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl002.htm#i78730">archivelogRecordSpecifier</a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t24 r1c2-t24"><a id="sthref304"></a><a id="sthref305"></a>Specifies a range of archived redo log files to be backed up.
<p>When backing up archived redo log files, RMAN can perform archived log failover automatically. RMAN backs up the log when at least one archived log corresponding to a given log sequence number and thread is available. Also, if the copy that RMAN is backing up contains corrupt blocks, then it searches for good copies of these blocks in other copies of the same archived redo log files.</p>
<p>RMAN does not signal an error if the command finds no logs to back up, since this situation probably exists because no new logs were generated after the previous <code dir="ltr">BACKUP ARCHIVELOG ALL</code> <code dir="ltr"><a href="#CHDIEAIE">DELETE INPUT</a></code> command. The only exception to this behavior is when the <code dir="ltr">SEQUENCE</code> number clause is specified. In this scenario, RMAN signals the <code dir="ltr"><a id="sthref306"></a><a id="sthref307"></a>RMAN-06004</code> error if an archived redo log file of the specified sequence is not found.</p>
<p>If you specify <code dir="ltr">BACKUP ARCHIVELOG ALL</code>, then RMAN backs up exactly one copy of each distinct log sequence number. For example, if you archive to multiple destinations, RMAN backs up <span class="italic">one</span> copy of each log sequence number&mdash;not each copy of each log sequence number. For other commands, such as <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> <code dir="ltr">ALL</code> does refer to every log, even duplicate log sequences.</p>
<p>If the database is open when you run <code dir="ltr">BACKUP ARCHIVELOG</code>, and if the <code dir="ltr">UNTIL</code> clause or <code dir="ltr">SEQUENCE</code> parameter is not specified, then RMAN runs <code dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT</code>.</p>
<p><span class="bold">Note:</span> If you run <code dir="ltr">BACKUP ARCHIVELOG ALL</code>, or if the specified log range includes logs from prior incarnations, then RMAN backs up logs from prior incarnations to ensure availability of all logs that may be required for recovery through an <code dir="ltr">OPEN RESETLOGS</code>.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl002.htm#i78730">archivelogRecordSpecifier</a></span></code> for syntax, and <a class="olink BRADV" href="../e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> explanations of backup failover for logs and automatic log switching</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t24" headers="r1c1-t24"><code dir="ltr"><a id="sthref308"></a>BACKUPSET</code></td>
<td class="cellalignment1926" headers="r3c1-t24 r1c2-t24">Specifies a backup of backup sets. Use this parameter with the <code dir="ltr"><a href="#CHDGBFGF">DEVICE&nbsp;TYPE</a></code> <code dir="ltr">sbt</code> clause to offload backups on disk to tape (as shown in <a href="#CHDGAGID">Example 2-21</a>). You cannot back up from tape to tape or from tape to disk: only from disk to disk or disk to tape.
<p>If you specify the <code dir="ltr"><a href="#CHDIEAIE">DELETE INPUT</a></code> option on the <code dir="ltr">BACKUP BACKUPSET</code> command, then RMAN deletes all copies of the backup set that exist on disk. For example, if you duplexed a backup to 4 locations, then RMAN deletes all 4 backup sets. The <code dir="ltr">ALL</code> option does not add any functionality.</p>
<p>RMAN performs <a id="sthref309"></a><a id="sthref310"></a><a id="sthref311"></a><span class="glossaryterm">backup set failover</span> when backing up backup sets. RMAN searches for all available backup copies when the copy that it is trying to back up is corrupted or missing. This behavior is similar to RMAN's behavior when backing up archived redo log files that exist in multiple archiving destinations.</p>
<p>If <span class="glossaryterm">backup optimization</span> is enabled when you back up a backup set, and if the identical backup set has been backed up to the same device type, then RMAN skips the backup of this backup set.</p>
<p><span class="bold">Note:</span> You can duplex backups of backup sets with <code dir="ltr">BACKUP COPIES</code> and <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">BACKUP COPIES</code>.</p>
<p><span class="bold">Note:</span> When you use <code dir="ltr">BACKUP BACKUPSET</code> command with encrypted backup sets, the backup sets are backed up in their encrypted form. Because <code dir="ltr">BACKUP BACKUPSET</code> just copies an already-encrypted backup set to disk or tape, no decryption key is needed during a <code dir="ltr">BACKUP BACKUPSET</code> operation. The data is never decrypted during any part of the operation. The <code dir="ltr">BACKUP BACKUPSET</code> command can neither encrypt nor decrypt backup sets.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t24" headers="r1c1-t24"><code dir="ltr">&nbsp;&nbsp;&nbsp;ALL</code></td>
<td class="cellalignment1926" headers="r4c1-t24 r1c2-t24">Specifies all backup sets.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t24" headers="r1c1-t24"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl003.htm#i95042">completedTimeSpec</a></span></code></td>
<td class="cellalignment1926" headers="r5c1-t24 r1c2-t24">Identifies backup sets according to completion time.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl003.htm#i95042">completedTimeSpec</a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t24" headers="r1c1-t24"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r6c1-t24 r1c2-t24">Specifies backup sets according to primary key. You can obtain the primary keys for backup sets from the output of the <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">BACKUP</code> command.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t24" headers="r1c1-t24"><code dir="ltr">FROM TAG</code> <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code></td>
<td class="cellalignment1926" headers="r7c1-t24 r1c2-t24">Identifies one or more backup sets by tag name. If multiple backup sets have the same tag name, then they are all are backed up. The <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code> is not case-sensitive.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t24" headers="r1c1-t24"><a id="CHDFFACJ"></a><code dir="ltr"><a id="sthref312"></a>CONTROLFILECOPY</code></td>
<td class="cellalignment1926" headers="r8c1-t24 r1c2-t24">Specifies one or more control file copies for backups.
<p><a id="sthref313"></a>A control file copy can be created with the <code dir="ltr">BACKUP AS COPY CURRENT CONTROLFILE</code> command or the SQL statement <code dir="ltr">ALTER DATABASE BACKUP CONTROLFILE TO '...'</code>.</p>
<p><span class="bold">Note:</span> A control file autobackup is not a control file copy.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r9c1-t24" headers="r1c1-t24"><code dir="ltr">&nbsp;&nbsp;&nbsp;'</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r9c1-t24 r1c2-t24">Specifies a control file copy by file name.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r10c1-t24" headers="r1c1-t24"><code dir="ltr">&nbsp;&nbsp;&nbsp;ALL</code></td>
<td class="cellalignment1926" headers="r10c1-t24 r1c2-t24">Specifies all control file copies.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r11c1-t24" headers="r1c1-t24"><code dir="ltr">&nbsp;&nbsp;&nbsp;LIKE</code> <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">string_pattern</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r11c1-t24 r1c2-t24">Specifies a control file copy by a file name pattern. The percent sign (<code dir="ltr">%</code>) as a wildcard meaning 0 o r more characters; an underscore (<code dir="ltr">_</code>) is a wildcard meaning 1 character.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r12c1-t24" headers="r1c1-t24"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017172"><span class="italic">copyOfSpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r12c1-t24 r1c2-t24">Makes a backup of previous image copies of data files and possibly control files.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017172"><span class="italic">copyOfSpec</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r13c1-t24" headers="r1c1-t24"><code dir="ltr"><a id="sthref314"></a>CURRENT&nbsp;CONTROLFILE</code></td>
<td class="cellalignment1926" headers="r13c1-t24 r1c2-t24">Specifies the current control file.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r14c1-t24" headers="r1c1-t24"><a id="CHDFCICI"></a><code dir="ltr"><a id="sthref315"></a>DATABASE</code></td>
<td class="cellalignment1926" headers="r14c1-t24 r1c2-t24">Creates a backup of all data files in the database. If generating a backup set, then RMAN can include only data files and control files: it cannot include archived redo log files.
<p>If the <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> includes data file 1, and if <a id="sthref316"></a><code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a> <a href="rcmsynta010.htm#CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</a></code> is <code dir="ltr">OFF</code>, then RMAN automatically includes the control file in the backup. If the instance is started with a server parameter file, then RMAN also includes this parameter file in the backup.</p>
<p>If the <code dir="ltr"><span class="codeinlineitalic"><a href="#BGBGHJEH"><span class="italic">backupSpec</span></a></span></code> includes data file 1, and if <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a> <a href="rcmsynta010.htm#CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</a></code> is <code dir="ltr">ON</code>, then RMAN does <span class="italic">not</span> automatically include the control file in the output. Instead, RMAN generates a separate control file autobackup piece. If the instance is started with a server parameter file, then RMAN includes this parameter file in the autobackup piece.</p>
<p>Full database backups should usually be either image copies or compressed backup sets. Image copies are more flexible than backup sets for some purposes (such as use in an incrementally updated backups strategy), and compressed backup sets make more efficient use of storage space, if the CPU overhead involved in creating them is tolerable.</p>
<p><span class="bold">Note:</span> To force RMAN to include the current control file in the backup when <code dir="ltr">CONTROLFILE AUTOBACKUP</code> is <code dir="ltr">ON</code>, specify the <code dir="ltr"><a id="sthref317"></a><a id="sthref318"></a><a href="#CHDCIAAH">INCLUDE CURRENT CONTROLFILE</a></code> clause.</p>
<p><span class="bold">See Also:</span> The <code dir="ltr"><a href="#CHDECCGE">TABLESPACE</a></code> description to learn about backup behavior when the database includes bigfile tablespaces</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r15c1-t24" headers="r1c1-t24"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017077"><span class="italic">datafileCopySpec</span></a></span></code></td>
<td class="cellalignment1926" headers="r15c1-t24 r1c2-t24"><a id="sthref319"></a>Specifies the file names of one or more data file image copies.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#i1017077"><span class="italic">datafileCopySpec</span></a></span></code> for details</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r16c1-t24" headers="r1c1-t24"><a id="CHDJIIDJ"></a><code dir="ltr"><a id="sthref320"></a>DATAFILE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl005.htm#i81255">datafileSpec</a></span></code></td>
<td class="cellalignment1926" headers="r16c1-t24 r1c2-t24">Specifies a list of one or more data files. Refer to description of <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDFCICI">DATABASE</a></code> for RMAN behavior when data file 1 is backed up.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl005.htm#i81255">datafileSpec</a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r17c1-t24" headers="r1c1-t24"><code dir="ltr"><a id="sthref321"></a>RECOVERY&nbsp;AREA</code></td>
<td class="cellalignment1926" headers="r17c1-t24 r1c2-t24"><a id="sthref322"></a>Backs up recovery files created in the current and all previous fast recovery area destinations. Backups can go to SBT and disk. To backup to disk, you must use the <code dir="ltr">TO DESTINATION</code> syntax outlined in <a href="rcmsubcl001.htm#CIHHJFBD"><span class="xreftitleitalic"><span class="italic">toDestSpec</span></span></a>.
<p>Recovery files are full and incremental backup sets, control file autobackups, data file copies, and archived redo log files. If an archived redo log file is missing or corrupted, then RMAN looks outside of the recovery area for a good copy of the log that it can use for the backup. Flashback logs, the current control file, and online redo log files are <span class="italic">not</span> backed up.</p>
<p>By default, backup optimization is enabled for this command even if the <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">BACKUP OPTIMIZATION</code> setting is <code dir="ltr">OFF</code>. You can disable backup optimization for <code dir="ltr">BACKUP RECOVERY AREA</code> by specifying <code dir="ltr">FORCE</code>.</p>
<p><span class="bold">Note:</span> If the fast recovery area is not enabled but has been enabled before, then files created in the previous fast recovery area location are backed up.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r18c1-t24" headers="r1c1-t24"><code dir="ltr"><a id="sthref323"></a>DB_RECOVERY_FILE_DEST</code></td>
<td class="cellalignment1926" headers="r18c1-t24 r1c2-t24"><code dir="ltr">RECOVERY AREA</code> and <code dir="ltr">DB_RECOVERY_FILE_DEST</code> are synonyms.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r19c1-t24" headers="r1c1-t24"><code dir="ltr"><a id="sthref324"></a>RECOVERY&nbsp;FILES</code></td>
<td class="cellalignment1926" headers="r19c1-t24 r1c2-t24"><a id="sthref325"></a><a id="sthref326"></a>Backs up <span class="italic">all</span> recovery files on disk, whether they are stored in the fast recovery area or other locations on disk. The backups can go to SBT or disk. To backup to disk, you must use the <code dir="ltr">TO DESTINATION</code> syntax outlined in <a href="rcmsubcl001.htm#CIHHJFBD"><span class="xreftitleitalic"><span class="italic">toDestSpec</span></span></a>.
<p>Recovery files include full and incremental backup sets, control file autobackups, archived redo log files, and data file copies.</p>
<p>By default, backup optimization is enabled for this command even if the <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">BACKUP OPTIMIZATION</code> setting is <code dir="ltr">OFF</code>. You can disable backup optimization for <code dir="ltr">RECOVERY FILES</code> by specifying <code dir="ltr">FORCE</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r20c1-t24" headers="r1c1-t24"><code dir="ltr"><a id="sthref327"></a>SPFILE</code></td>
<td class="cellalignment1926" headers="r20c1-t24 r1c2-t24"><a id="sthref328"></a><a id="sthref329"></a>Specifies that the server parameter file is included in a backup set. The <code dir="ltr">AS COPY</code> option is not supported for server parameter file backups.
<p>RMAN backs up the server parameter file currently in use by the target database. RMAN cannot back up the server parameter file when the instance was started with an initialization parameter file. RMAN cannot make incremental backups of the <code dir="ltr">SPFILE</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r21c1-t24" headers="r1c1-t24"><br />
<a id="CHDECCGE"></a><code dir="ltr"><a id="sthref330"></a>TABLESPACE</code><br />
<code dir="ltr"><span class="codeinlineitalic">tablespace_name</span></code></td>
<td class="cellalignment1926" headers="r21c1-t24 r1c2-t24">Specifies the names of one or more tablespaces. RMAN translates tablespace names internally into a list of data files, then backs up all data files that are currently part of the tablespaces. If the <code dir="ltr">SYSTEM</code> tablespace (and thus data file&nbsp;1) is included in the backup, and if <code dir="ltr"><a href="rcmsynta010.htm#CHDDCAHE">CONTROLFILE&nbsp;AUTOBACKUP</a></code> is not configured, then RMAN also creates a copy of the control file.
<p>You cannot back up locally-managed <a id="sthref331"></a>temporary tablespaces, although you can back up dictionary-managed tablespaces.</p>
<p>If the following conditions are met, then RMAN can back up <a id="sthref332"></a>transportable tablespaces that have <span class="italic">not</span> been made read/write after being transported:</p>
<ul>
<li>
<p>The <code dir="ltr">COMPATIBLE</code> initialization parameter is set to 11.0.0 or higher.</p>
</li>
<li>
<p>You are using an Oracle Database 11<span class="italic">g</span> RMAN client.</p>
</li>
</ul>
<p>If any of the preceding conditions is not met, then RMAN automatically skips transportable tablespaces that have not yet been made read/write. If you specify a transportable tablespace explicitly when any of the conditions is not met, then RMAN issues an error saying that the tablespace does not exist.</p>
<p><span class="bold">Note:</span> <a id="sthref333"></a>If you rename a tablespace, then RMAN detects that the tablespace has changed its name and updates the recovery catalog on the next resynchronization.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r22c1-t24" headers="r1c1-t24"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017449"><span class="italic">backupSpecOperand</span></a></span></code></td>
<td class="cellalignment1926" headers="r22c1-t24 r1c2-t24">The <code dir="ltr"><span class="codeinlineitalic">backupSpecOperand</span></code> that follows a <code dir="ltr"><span class="codeinlineitalic"><a href="#i1035382"><code dir="ltr"><span class="codeinlineitalic"><span class="italic">backupSpec</span></span></code></a></span></code> specifies options that apply to the <code dir="ltr"><span class="codeinlineitalic"><a href="#i1035382"><code dir="ltr"><span class="codeinlineitalic"><span class="italic">backupSpec</span></span></code></a></span></code>.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017449"></a><a id="RCMRF90027"></a><span class="italic"><a id="sthref334"></a><a id="sthref335"></a>backupSpecOperand</span></p>
<p>This subclause specifies a variety of options and parameters that affect the <code dir="ltr"><span class="codeinlineitalic"><a href="#i1035382"><code dir="ltr"><span class="codeinlineitalic"><span class="italic">backupSpec</span></span></code></a></span></code> clause. Many subclauses are also used with <code dir="ltr"><span class="codeinlineitalic"><a href="#i1009966"><span class="italic">backupOperand</span></a></span></code>. Options that are not shared in common with <code dir="ltr"><span class="codeinlineitalic"><a href="#i1009966"><span class="italic">backupOperand</span></a></span></code> are listed here. Refer to <a href="#CHDDCEFI"><span class="xreftitleitalic"><span class="italic">backupSpecOperand</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for backupSpecOperand Subclause" summary="Describes BACKUP command backupSpecOperand parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t25">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t25">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t25" headers="r1c1-t25"><code dir="ltr"><a id="sthref336"></a>DELETE&nbsp;[ALL]&nbsp;INPUT</code></td>
<td class="cellalignment1926" headers="r2c1-t25 r1c2-t25"><a id="sthref337"></a><a id="sthref338"></a><a id="sthref339"></a><a id="sthref340"></a>Deletes the input files after successfully backing them up.
<p>Specify this option only when backing up archived redo log files, data file copies (<code dir="ltr">COPY OF</code> or <code dir="ltr">DATAFILECOPY</code>), or backup sets. The <code dir="ltr">BACKUP ARCHIVELOG</code> command only backs up one copy of each distinct log sequence number, so if the <code dir="ltr">DELETE INPUT</code> option is used <span class="italic">without</span> the <code dir="ltr">ALL</code> keyword, RMAN only deletes the copy of the file that it backs up.</p>
<p>Specifying the <a id="CHDIEAIE"></a><code dir="ltr">DELETE INPUT</code> option is equivalent to issuing the <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> command for the input files. When backing up archived redo log files, RMAN uses the configured settings to determine whether an archived redo log can be deleted (<code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a> <a href="rcmsynta010.htm#CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</a> TO BACKED UP</code>).</p>
<p>The <code dir="ltr">ALL</code> option applies only to archived redo log files. If you run <code dir="ltr">DELETE ALL INPUT</code>, then the command deletes all copies of corresponding archived redo log files or data file copies that match the selection criteria in the <code dir="ltr">BACKUP</code> command (as shown in <a href="#CHDJGDDC">Example 2-19</a>). For example, if you specify the <code dir="ltr">SEQUENCE</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code> clause, then RMAN deletes all archived redo log files with same sequence number <code dir="ltr"><span class="codeinlineitalic">n</span></code>.</p>
<p><span class="bold">Note:</span> The database retains archived redo log files in the fast recovery area as long as possible and deletes them automatically when disk space is required. You can use the <code dir="ltr">BACKUP DELETE INPUT</code>, <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> <code dir="ltr">ARCHIVELOG</code>, and <code dir="ltr">DELETE OBSOLETE</code> commands to delete log files manually from inside or outside the recovery area. You do not need to specify <code dir="ltr">BACKUP DELETE INPUT</code> when backing up the recovery area because the database automatically deletes log files based on the archived redo log deletion policy and other fast recovery area rules.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t25" headers="r1c1-t25"><code dir="ltr"><a id="sthref341"></a>FROM&nbsp;TAG</code> <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code></td>
<td class="cellalignment1926" headers="r3c1-t25 r1c2-t25">Identifies files by tag name (see <a href="#CHDFGJJH">Example 2-18</a>). Only the files that match the tag_name are backed up. Defined in context with several other commands.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t25" headers="r1c1-t25"><a id="CHDCIAAH"></a><code dir="ltr"><a id="sthref342"></a>INCLUDE CURRENT CONTROLFILE</code></td>
<td class="cellalignment1926" headers="r4c1-t25 r1c2-t25"><a id="sthref343"></a><a id="sthref344"></a>Creates a snapshot of the current control file and places it into one of backup sets produced by the <code dir="ltr">BACKUP</code> command.
<p><span class="bold">Note:</span> This option does not apply with <code dir="ltr">AS COPY</code> and results in an error message.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1015382"></a><a id="RCMRF90028"></a><span class="italic"><a id="sthref345"></a><a id="sthref346"></a>backupTypeSpec</span></p>
<p>This subclause specifies the form of the <code dir="ltr">BACKUP</code> command output: backup set or image copy. Refer to <a href="#CHDHHDGG"><span class="xreftitleitalic"><span class="italic">backupTypeSpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for backupTypeSpec Subclause" summary="Describes BACKUP command backupTypeSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t26">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t26">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t26" headers="r1c1-t26"><a id="CHDBGAJI"></a><a id="CHDIHCHG"></a><code dir="ltr"><a id="sthref347"></a><a id="sthref348"></a>AS&nbsp;BACKUPSET</code></td>
<td class="cellalignment1926" headers="r2c1-t26 r1c2-t26">Creates backup sets on the specified device. This is the default backup type.
<p><code dir="ltr">AS</code> <code dir="ltr">BACKUPSET</code> is the only possibility when backing up to tape, and for creating level 1 incremental backups to any destination. Backup sets are RMAN-specific logical structures. The backup set is the smallest unit of a backup.</p>
<p>The <code dir="ltr"><a href="#CHDEECJA">FILESPERSET</a></code> parameter of the <code dir="ltr">BACKUP</code> command determines the maximum number of files in each backup set. Archived redo log files and data files are never combined into a single backup set.</p>
<p>When using encrypted backups (see <a href="#CHDIHIGD">"Encryption of Backup Sets"</a>), data files from tablespaces with different encryption settings are never written into the same backup set.</p>
<p>RMAN cannot back up files with different block sizes into the same backup set. RMAN can back up tablespaces with different block sizes, but puts each differently sized data file into its own backup set.</p>
<p><a id="sthref349"></a><a id="sthref350"></a><a id="sthref351"></a><a id="sthref352"></a><a id="sthref353"></a><a id="sthref354"></a><a id="sthref355"></a><a id="sthref356"></a>When <span class="bold">unused block compression</span> is applied, RMAN reads only the blocks that are currently allocated to a table. RMAN still checks each of the blocks to see whether the header has marked the block as unused. If a block has been unused, it is not written to the backup.</p>
<p>Unused block compression is turned on automatically when all of the following five conditions are true:</p>
<ol>
<li>
<p>The <code dir="ltr">COMPATIBLE</code> initialization parameter is set to 10.2 or higher.</p>
<p><span class="bold">Note:</span> If <code dir="ltr">COMPATIBLE</code> is set to 10.2, then only tablespaces created with 10.2 compatibility are optimized to exclude blocks that do not currently contain data. If <code dir="ltr">COMPATIBLE</code> is set to 11.0.0 or higher, however, then the first backup that produces backup sets after COMPATIBLE is set to 11.0.0 or higher updates the headers of all locally managed data files so that all locally managed data files can be optimized.</p>
</li>
<li>
<p>There are currently no guaranteed <a id="sthref357"></a>restore points defined for the database.</p>
</li>
<li>
<p>The data file is locally managed</p>
</li>
<li>
<p>The data file is being backed up to a backup set as part of a full backup or a level 0 incremental backup</p>
</li>
<li>
<p>The backup set is created on disk or <a id="sthref358"></a><a id="sthref359"></a>Oracle Secure Backup is the media manager.</p>
<p><span class="bold">Note:</span> When backing up to a media manager that is not Oracle Secure Backup, RMAN copies all the blocks regardless of whether they contain data or not.</p>
</li>
</ol>
<p><span class="bold">Note:</span> A corrupt unused block is not harmful. This is because when a block is corrupt and RMAN does not read it because of unused block compression, RMAN does not detect the corruption.</p>
<p><span class="bold">See Also:</span> <span class="italic">Oracle Backup and Recovery User's Guide</span> for a discussion of null block compression and unused block compression.</p>
<p><a id="sthref360"></a><a id="sthref361"></a><a id="sthref362"></a>Each backup set contains at least one <span class="glossaryterm">backup piece</span>, which is an RMAN-specific physical file containing the backed up data. You can also use the <code dir="ltr">BACKUP</code> command to generate a <span class="glossaryterm">proxy copy</span>, which is a backup in which the entire data transfer is conducted by a media manager.</p>
<p>RMAN only records complete backup sets in the RMAN repository. There are no partial backup sets. When a <code dir="ltr">BACKUP</code> command creates backup pieces but does not produce a complete backup set, the backup pieces are discarded.</p>
<p><span class="bold">Note:</span> You cannot stripe a single backup set across multiple channels. You also cannot stripe a single input file across multiple backup sets.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t26" headers="r1c1-t26"><code dir="ltr">&nbsp;&nbsp;&nbsp;COMPRESSED</code></td>
<td class="cellalignment1926" headers="r3c1-t26 r1c2-t26"><a id="sthref363"></a><a id="sthref364"></a><a id="sthref365"></a><a id="sthref366"></a><a id="sthref367"></a><a id="sthref368"></a>Enables binary compression.
<p>RMAN compresses the data written into the backup set to reduce the overall size of the backup set. All backups that create backup sets can create compressed backup sets. Restoring compressed backup sets is no different from restoring uncompressed backup sets.</p>
<p>RMAN applies a binary compression algorithm as it writes data to backup sets. This compression is similar to the compression provided by many media manager vendors. When backing up to a <span class="italic">locally attached</span> tape device, compression provided by the media management vendor is usually preferable to the binary compression provided by <code dir="ltr">BACKUP AS COMPRESSED BACKUPSET</code>. Therefore, use uncompressed backup sets and turn on the compression provided by the media management vendor when backing up to locally attached tape devices. You should not use RMAN binary compression and media manager compression together.</p>
<p>Some CPU overhead is associated with compressing backup sets. If the target database is running at or near its maximum load, then you may find the overhead unacceptable. In most other circumstances, compressing backup sets saves enough disk space to be worth the CPU overhead.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t26" headers="r1c1-t26"><a id="CHDEHBEJ"></a><a id="CHDFDFEH"></a><code dir="ltr"><a id="sthref369"></a><a id="sthref370"></a>AS&nbsp;COPY</code></td>
<td class="cellalignment1926" headers="r4c1-t26 r1c2-t26"><a id="sthref371"></a><a id="sthref372"></a><a id="sthref373"></a><a id="sthref374"></a><a id="sthref375"></a><a id="sthref376"></a><a id="sthref377"></a>Creates image copies (rather than backup sets).
<p>An image copy is a byte-for-byte identical copy of the original file. You can create image copy backups of data files, data file copies, and archived redo log files. Image copy files can only exist on disk. When using incrementally updated backups, the level 0 incremental must be an image copy backup.</p>
<p>By default, <code dir="ltr">BACKUP</code> generates backup sets. You can change the default backup type for disk backups to image copies using the <code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a></code> <code dir="ltr">DEVICE TYPE ... BACKUP TYPE TO COPY</code> command.</p>
<p>RMAN chooses a location for the copy according to the following rules, listed in order of precedence:</p>
<ol>
<li>
<p><code dir="ltr">FORMAT</code> specified on <code dir="ltr">BACKUP</code> command for the object being backed up</p>
</li>
<li>
<p><code dir="ltr">FORMAT</code> specified for the <code dir="ltr">BACKUP</code> command</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl007.htm#i101650">fileNameConversionSpec</a></span></code> setting for <code dir="ltr">BACKUP</code> command</p>
</li>
<li>
<p><code dir="ltr">CONFIGURE CHANNEL</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">... FORMAT</code></p>
</li>
<li>
<p><code dir="ltr">CONFIGURE CHANNEL DEVICE TYPE ... FORMAT</code></p>
</li>
<li>
<p>Platform-specific default <code dir="ltr">FORMAT</code> (which includes a <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code> for generating a unique file name)</p>
</li>
</ol>
<p>You can create and restore image copy backups with RMAN or use a native operating system command for copying files. When you use RMAN, copies are recorded in the RMAN repository and are more easily available for use in restore and recovery. Otherwise, you must use the <code dir="ltr"><a href="rcmsynta008.htm#i79811">CATALOG</a></code> command to add the user-managed copies to the RMAN repository so that RMAN can use them.</p>
<p>You cannot make a copy of a backup set, although you can make an image copy of an image copy. To back up a backup set, use <code dir="ltr">BACKUP BACKUPSET</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017172"></a><a id="RCMRF90029"></a><span class="italic"><a id="sthref378"></a><a id="sthref379"></a>copyOfSpec</span></p>
<p>This subclause specifies the form of the <code dir="ltr">BACKUP</code> command output: backup set or image copy. Refer to <a href="#CHDFEBDC"><span class="xreftitleitalic"><span class="italic">copyOfSpec</span><span class="bold">::=</span></span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for copyOfSpec Subclause" summary="Describes BACKUP command copyOfSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t27">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t27" headers="r1c1-t27"><a id="sthref380"></a><code dir="ltr">COPY&nbsp;OF&nbsp;DATABASE</code></td>
<td class="cellalignment1926" headers="r2c1-t27 r1c2-t27"><a id="sthref381"></a><a id="sthref382"></a><a id="sthref383"></a>Makes a backup of previous image copies of all data files and control files in the database. All data files that would normally be included by <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDFCICI">DATABASE</a></code> are expected to have copies: if not, RMAN signals an error. It is not necessary for all copies to have been produced by a single <code dir="ltr">BACKUP</code> command. If multiple copies exist of a data file, then RMAN backs up the latest. Optionally, specify the copies by tag name (for example, <code dir="ltr">FULL_COLD_COPY</code>).
<p><span class="bold">Note</span>: The output of this command can be image copies or backup sets.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t27" headers="r1c1-t27"><code dir="ltr">COPY&nbsp;OF&nbsp;DATAFILE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl005.htm#i81255">datafileSpec</a></span></code></td>
<td class="cellalignment1926" headers="r3c1-t27 r1c2-t27">Makes a backup of a previous image copy of one or more data files. Specify the data file by file number (<code dir="ltr">DATAFILE 3</code>) or file name (<code dir="ltr">DATAFILE '?/oradata/trgt/users01.dbf'</code>). You specify the data file file name and <span class="italic">not</span> the file name of the copy of the data file. If multiple copies of a given data file exist, then RMAN backs up the most recent copy.
<p><span class="bold">Note:</span> It is not necessary for the image copies that you are backing up to have been created by a single <code dir="ltr">BACKUP</code> command.</p>
<p><span class="bold">Note</span>: The output of this command can be image copies or backup sets.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl005.htm#i81255">datafileSpec</a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t27" headers="r1c1-t27"><code dir="ltr">COPY&nbsp;OF&nbsp;TABLESPACE</code> <code dir="ltr"><span class="codeinlineitalic">tablespace_name</span></code></td>
<td class="cellalignment1926" headers="r4c1-t27 r1c2-t27">Makes a backup of previous image copies of the data files in one or more specified tablespaces. All data files that would normally be included by <code dir="ltr">BACKUP</code> <code dir="ltr"><a href="#CHDECCGE">TABLESPACE</a></code> should have copies: if not, then RMAN signals an error. It is not necessary for all copies to have been produced by a single <code dir="ltr">BACKUP</code> command. If multiple copies exist of data file, then RMAN backs up the latest.
<p>Specify the tablespaces in the list by tablespace name (for example, <code dir="ltr">users</code>) or specify a particular copy by tag name (for example, <code dir="ltr">0403_CPY_OF_USERS</code>). If you do not specify <code dir="ltr">TAG</code>, then RMAN backs up the most recent data file copy for each data file in the tablespace.</p>
<p><span class="bold">Note</span>: The output of this command can be image copies or backup sets.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017077"></a><a id="RCMRF90030"></a><span class="italic"><a id="sthref384"></a><a id="sthref385"></a>datafileCopySpec</span></p>
<p>This subclause specifies data file copies. Refer to <a href="#CHDHEJEG"><span class="xreftitleitalic"><span class="italic">datafileCopySpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of datafileCopySpec Subclause" summary="Describes BACKUP command datafileCopySpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t28">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t28" headers="r1c1-t28"><code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r2c1-t28 r1c2-t28">Specifies the file names of one or more data file image copies.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t28" headers="r1c1-t28"><code dir="ltr"><a id="sthref386"></a>ALL</code></td>
<td class="cellalignment1926" headers="r3c1-t28 r1c2-t28">Specifies that all data file image copies are backed up.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t28" headers="r1c1-t28"><code dir="ltr"><a id="sthref387"></a>LIKE</code> <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">string_pattern</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r4c1-t28 r1c2-t28">Specifies a file name pattern. The percent sign (<code dir="ltr">%</code>) is a wildcard that means zero or more characters; an underscore (<code dir="ltr">_</code>) is a wildcard that means one character.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t28" headers="r1c1-t28"><code dir="ltr"><a id="sthref388"></a>FROM TAG</code> <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code></td>
<td class="cellalignment1926" headers="r5c1-t28 r1c2-t28">Specifies a list of one or more data file copies, identified by the tag name. If multiple data file copies with this tag exist, then RMAN backs up only the most current data file copy of any particular data file. Tags are not case sensitive.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t28" headers="r1c1-t28"><code dir="ltr">&nbsp;&nbsp;&nbsp;NODUPLICATES</code></td>
<td class="cellalignment1926" headers="r6c1-t28 r1c2-t28">Prevents the inclusion of identical data file copies in a backup operation (<a href="#CHDHIAJB">Example 2-29</a>). For each set of duplicate data file copies, the file with the most recent timestamp is selected.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1010261"></a><a id="RCMRF90031"></a><span class="italic"><a id="sthref389"></a><a id="sthref390"></a>duration</span></p>
<p>This subclause specifies data file copies. Refer to <a href="#CHDIFHEH"><span class="xreftitleitalic"><span class="italic">duration</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of duration Subclause" summary="Describes BACKUP command duration parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t29">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t29" headers="r1c1-t29"><code dir="ltr"><a id="sthref391"></a>DURATION</code> <code dir="ltr"><span class="codeinlineitalic">hh:mm</span></code></td>
<td class="cellalignment1926" headers="r2c1-t29 r1c2-t29"><a id="sthref392"></a><a id="sthref393"></a><a id="sthref394"></a><a id="sthref395"></a>Specifies a maximum time for a backup command to run. If a backup command does not complete in the specified duration, then the backup stops.
<p>Without the <code dir="ltr">PARTIAL</code> option, the backup command is considered to have failed if it does not complete in the specified duration, and RMAN reports an error. If the backup command is part of a <code dir="ltr"><a href="rcmsynta2012.htm#i85731">RUN</a></code> block, then subsequent commands in the <code dir="ltr">RUN</code> block do not execute.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t29" headers="r1c1-t29"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;MINIMIZE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;{LOAD&nbsp;|&nbsp;TIME}</code></td>
<td class="cellalignment1926" headers="r3c1-t29 r1c2-t29">With disk backups, you can use <code dir="ltr">MINIMIZE TIME</code> run the backup at maximum speed (default), or <code dir="ltr">MINIMIZE LOAD</code> to slow the rate of backup to lessen the load on the system. With <code dir="ltr">MINIMIZE LOAD</code> the backup takes the full specified duration.
<p>If you specify <code dir="ltr">TIME</code>, then file most recently backed up is given the lowest priority to back up. This scheduling mechanism provides for the eventual complete backup of the database during successive backup windows, as different data files are backed up in round-robin fashion.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t29" headers="r1c1-t29"><code dir="ltr">&nbsp;&nbsp;&nbsp;PARTIAL</code></td>
<td class="cellalignment1926" headers="r4c1-t29 r1c2-t29"><a id="sthref396"></a><a id="sthref397"></a><a id="sthref398"></a>With the <code dir="ltr">PARTIAL</code> option, the command is considered to have completed successfully and no error is reported by RMAN even if the whole backup is not completed in the specified duration.
<p>Without the <code dir="ltr">PARTIAL</code> option, the backup command is considered to have failed if it does not complete in the specified duration, and RMAN reports an error. If the backup command is part of a <code dir="ltr"><a href="rcmsynta2012.htm#i85731">RUN</a></code> block, then subsequent commands in the <code dir="ltr">RUN</code> block do not execute.</p>
<p>Whether <code dir="ltr">PARTIAL</code> is used or not, all backup sets completed before the backup is interrupted are retained and can be used in <code dir="ltr"><a href="rcmsynta2008.htm#i85188">RESTORE</a></code> and <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> operations.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1015480"></a><a id="RCMRF90032"></a><span class="italic"><a id="sthref399"></a><a id="sthref400"></a>forRecoveryOfSpec</span></p>
<p>This subclause specifies that a backup is used in an incrementally updated backup strategy. You must specify <code dir="ltr">INCREMENTAL LEVEL 1</code> when specifying <code dir="ltr">FOR RECOVER OF</code>. Refer to <a href="#CHDEHIDJ"><span class="xreftitleitalic"><span class="italic">forRecoveryOfSpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for forRecoveryOfSpec Subclause" summary="Describes BACKUP command forRecoveryOfSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t30">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t30" headers="r1c1-t30"><code dir="ltr"><a id="sthref401"></a><a id="sthref402"></a>FOR&nbsp;RECOVER&nbsp;OF&nbsp;COPY</code></td>
<td class="cellalignment1926" headers="r2c1-t30 r1c2-t30"><a id="sthref403"></a><a id="sthref404"></a>Specifies that this incremental backup should contain all changes since a previous data file copy or incremental backup. By default, RMAN creates a differential incremental backup. You must specify <code dir="ltr">CUMULATIVE</code> to force RMAN to create cumulative backups.
<p>You should use the <code dir="ltr">WITH TAG</code> clause to separate this incremental backup strategy from the rest of your backup strategies. If you do <span class="italic">not</span> specify <code dir="ltr">WITH TAG</code>, then RMAN uses the most recent data file copy as the basis for the incremental backup.</p>
<p>A <code dir="ltr">BACKUP INCREMENTAL LEVEL 1 FOR RECOVER OF COPY</code> command can create image copies or backup sets. RMAN creates level 0 image copies if no such copies exist, but otherwise creates backup sets.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV8186" href="../../backup.112/e10642/rcmbckba.htm#BRADV8186"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to make incrementally updated backups</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t30" headers="r1c1-t30"><code dir="ltr">&nbsp;&nbsp;&nbsp;WITH TAG</code> <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code></td>
<td class="cellalignment1926" headers="r3c1-t30 r1c2-t30">Specifies the tag of the level 0 incremental backup serving as the basis of the backup strategy (see <a href="#CHDBJCAJ">Example 2-20</a>).
<p>By using the <code dir="ltr">BACKUP INCREMENTAL ... WITH TAG</code> syntax, you can create level 1 incremental backups suitable for rolling forward a level 0 image copy. You can then use <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> <code dir="ltr">COPY OF ... WITH TAG</code> to apply level 1 backups to this copy. In this way, the strategy continues to roll forward the data file copy so that media recovery does not need to apply as many changes. This technique is the basis for the Enterprise Manager strategy for disk backups.</p>
<p>When <code dir="ltr">WITH TAG</code> is specified, RMAN automatically assigns all new incremental backups in the strategy the same tag as the level 0 data file copy. RMAN decides which blocks to include in the level 1 backup based on the available incremental backups that have this tag.</p>
<p><span class="bold">Note:</span> If the <code dir="ltr">BACKUP</code> command has both the <code dir="ltr">TAG</code> and <code dir="ltr">WITH TAG</code> options, then RMAN issues a warning stating that the <code dir="ltr">TAG</code> option will be ignored and that incremental backups will receive the tag specified by <code dir="ltr">WITH TAG</code>.</p>
<p>If no level 0 backup with the tag specified in the <code dir="ltr">WITH TAG</code> parameter exists in either the current or parent database incarnation, then <code dir="ltr">FOR RECOVER OF COPY</code> option creates a level 0 data file copy tagged with the value specified in the <code dir="ltr">WITH TAG</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t30" headers="r1c1-t30"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;DATAFILECOPY</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;FORMAT</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code></td>
<td class="cellalignment1926" headers="r4c1-t30 r1c2-t30">Specifies a pattern for naming the output image copies.
<p>If you add a data file to the database, then you do not need to change the backup script because RMAN automatically creates the level 0 data file copy required by the incrementally updated backup strategy for the newly created file.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t30" headers="r1c1-t30"><br />
<code dir="ltr"><a id="sthref405"></a><a id="sthref406"></a>FOR&nbsp;RECOVER&nbsp;OF&nbsp;TAG</code><br />
<code dir="ltr"><span class="codeinlineitalic">tag_name</span></code></td>
<td class="cellalignment1926" headers="r5c1-t30 r1c2-t30">Backs up the archived redo log files or incremental backups that are intended to recover the level 0 incremental backup specified by <code dir="ltr"><span class="codeinlineitalic">tag_name</span></code>.
<p>For example, the <code dir="ltr">BACKUP INCREMENTAL LEVEL 1 FOR RECOVER OF TAG wholedb ARCHIVELOG ALL</code> command backs up all archived redo log files needed to recover the level 0 incremental backup tagged <code dir="ltr">wholedb</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017236"></a><a id="RCMRF90033"></a><span class="italic"><a id="sthref407"></a><a id="sthref408"></a>notBackedUpSpec</span></p>
<p>This subclause specifies that RMAN should only back up files that have not yet been backed up for the same device type. Refer to <a href="#CHDCFHEA"><span class="xreftitleitalic"><span class="italic">notBackedUpSpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of notBackedUpSpec Subclause" summary="Describes BACKUP command notBackedUpSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t31">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t31" headers="r1c1-t31"><code dir="ltr"><a id="sthref409"></a>NOT&nbsp;BACKED&nbsp;UP</code></td>
<td class="cellalignment1926" headers="r2c1-t31 r1c2-t31"><a id="sthref410"></a><a id="sthref411"></a><a id="sthref412"></a>Backs up only those files&mdash;of the files specified on the <code dir="ltr">BACKUP</code> command&mdash;that RMAN has never backed up for the same device type (see <a href="#CHDIJDDE">Example 2-28</a>).
<p>This subclause is a convenient way to back up new data files after adding them to the database. RMAN does not examine data file checkpoints, but backs up any data file that is not already backed up. You can also specify <code dir="ltr">NOT BACKED UP</code> when backing up backup sets.</p>
<p>Using <code dir="ltr">BACKUP</code> with this clause does manually what an archived redo log deletion policy can do automatically. If you specify the <code dir="ltr">CONFIGURE</code> <code dir="ltr"><a href="rcmsynta010.htm#CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</a> TO BACKED UP</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">TIMES</code> command, then a <code dir="ltr">BACKUP ARCHIVELOG ALL</code> command copies all logs unless <code dir="ltr"><span class="codeinlineitalic">integer</span></code> backups exist on the specified device type. If <code dir="ltr"><span class="codeinlineitalic">integer</span></code> backups of the logs exist, then the <code dir="ltr">BACKUP</code> command skips the logs. In this way, the archived log deletion policy functions as a default <code dir="ltr">NOT BACKED UP</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">TIMES</code> clause on the <code dir="ltr">BACKUP</code> command.</p>
<p>Archival backups created with the <code dir="ltr">KEEP</code> option are not counted when evaluating the <code dir="ltr">NOT BACKED UP</code> subclause. For example, if you issue the command</p>
<pre dir="ltr">
BACKUP ARCHIVELOG SEQUENCE 345 NOT BACKED UP 3 TIMES
</pre>
<p>and the specified log is already backed up into two non-<code dir="ltr">KEEP</code> backup sets and one <code dir="ltr">KEEP</code> backup set, then that command backs up the log one more time.</p>
<p><span class="bold">Note:</span> This clause overrides backup optimization (<code dir="ltr"><a href="rcmsynta010.htm#i80338">CONFIGURE</a> BACKUP OPTIMIZATION</code>) and archived redo log file deletion policies (<code dir="ltr">CONFIGURE <a href="rcmsynta010.htm#CHDHCEEH">ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</a></code>).</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t31" headers="r1c1-t31"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">TIMES</code></td>
<td class="cellalignment1926" headers="r3c1-t31 r1c2-t31"><a id="sthref413"></a>Backs up only those archived redo log files that have not been backed up at least <code dir="ltr"><span class="codeinlineitalic">integer</span></code> times.
<p><span class="bold">Note:</span> You can only specify <code dir="ltr">NOT BACKED UP</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">TIMES</code> when backing up archived redo log files into backup sets.</p>
<p>To determine the number of backups for a file, RMAN only considers backups created on the same device type as the current backup.</p>
<p>This option is a convenient way to back up archived redo log files on a specified media. For example, you want to keep at least three copies of each log on tape.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t31" headers="r1c1-t31"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;SINCE&nbsp;TIME</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;</code>&nbsp;<code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">date_string</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r4c1-t31 r1c2-t31"><a id="sthref414"></a><a id="sthref415"></a><a id="sthref416"></a>Specifies the date after which RMAN should back up files that have no backups.
<p>The <code dir="ltr"><span class="codeinlineitalic">date_string</span></code> is either a date in the current <code dir="ltr">NLS_DATE_FORMAT</code> or a SQL date expression such as <code dir="ltr">'SYSDATE-1'</code>. When calculating the number of backups for a file, RMAN only considers backups created on the same device type as the current backup.</p>
<p>This option is a convenient way to back up data files that were not backed up during a previous failed backup. For example, you back up the database, but the instance fails halfway through. You can restart the backup with the <code dir="ltr">NOT BACKED UP SINCE TIME</code> clause and avoid backing up those files that you already backed up. If <code dir="ltr"><a href="#CHDIHCHG">AS&nbsp;BACKUPSET</a></code> is specified, then this feature is only useful if RMAN generates multiple backup sets during the backup.</p>
<p>When determining whether a file has been backed up, the <code dir="ltr">SINCE</code> date is compared with the completion time of the most recent backup. For <code dir="ltr">BACKUP AS BACKUPSET</code>, the completion time for a file in a backup set is the completion time of the entire backup set. In other words, all files in the same backup set have the same completion time.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017291"></a><a id="RCMRF90034"></a><span class="italic"><a id="sthref417"></a><a id="sthref418"></a>sizeSpec</span></p>
<p>This subclause specifies the size of data. Refer to <a href="#CHDEEBDG"><span class="xreftitleitalic"><span class="italic">sizeSpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of sizeSpec Subclause" summary="Describes BACKUP command sizeSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t32">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t32" headers="r1c1-t32"><code dir="ltr"><span class="codeinlineitalic">integer</span></code>&nbsp;<code dir="ltr">[G&nbsp;|&nbsp;K&nbsp;|&nbsp;M]</code></td>
<td class="cellalignment1926" headers="r2c1-t32 r1c2-t32">Specifies the size of data in gigabytes (<code dir="ltr">G</code>), kilobytes (<code dir="ltr">K</code>), or megabytes (<code dir="ltr">M</code>).</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017259"></a><a id="RCMRF90035"></a><span class="italic"><a id="sthref419"></a><a id="sthref420"></a>skipSpec</span></p>
<p>This subclause specifies which files to skip. Refer to <a href="#CHDGFJFB"><span class="xreftitleitalic"><span class="italic">skipSpec</span>::=</span></a> for the syntax diagram.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of skipSpec Subclause" summary="Describes BACKUP command skipSpec parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t33">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t33" headers="r1c1-t33"><a id="CHDJJJCB"></a><code dir="ltr"><a id="sthref421"></a>SKIP</code></td>
<td class="cellalignment1926" headers="r2c1-t33 r1c2-t33"><a id="sthref422"></a><a id="sthref423"></a><a id="sthref424"></a><a id="sthref425"></a>Excludes data files or archived redo log files from the backup according to the criteria specified by the following keywords.
<p><span class="bold">Note:</span> You can also specify this option in the <code dir="ltr"><span class="codeinlineitalic"><a href="#i1035382"><code dir="ltr"><span class="codeinlineitalic"><span class="italic">backupSpec</span></span></code></a></span></code> clause.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t33" headers="r1c1-t33"><code dir="ltr">&nbsp;&nbsp;&nbsp;INACCESSIBLE</code></td>
<td class="cellalignment1926" headers="r3c1-t33 r1c2-t33">Specifies that data files or archived redo log files that cannot be read due to I/O errors are excluded from the backup.
<p>A data file is only considered inaccessible if it cannot be read. Some offline data files can still be read because they still exist on disk. Others have been deleted or moved and so cannot be read, making them inaccessible.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t33" headers="r1c1-t33"><code dir="ltr">&nbsp;&nbsp;&nbsp;OFFLINE</code></td>
<td class="cellalignment1926" headers="r4c1-t33 r1c2-t33">Specifies that offline data files are excluded from the backup.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t33" headers="r1c1-t33"><code dir="ltr">&nbsp;&nbsp;&nbsp;READONLY</code></td>
<td class="cellalignment1926" headers="r5c1-t33 r1c2-t33">Specifies that read-only data files are excluded from the backup.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDBGAJB"></a><a id="sthref426"></a>Examples</p>
<div id="RCMRF90036" class="example">
<p class="titleinexample"><a id="CHDFHAHB"></a>Example 2-15 Backing Up a Database</p>
<p>This example starts the RMAN client from the operating system command line and then connects to a target database using operating system authentication. The <code dir="ltr">BACKUP</code> command backs up all data files, the current control file, the server parameter file, and archived redo log files to the default storage device:</p>
<pre dir="ltr">
% rman
RMAN&gt; CONNECT TARGET /
RMAN&gt; BACKUP DATABASE PLUS ARCHIVELOG;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90037" class="example">
<p class="titleinexample"><a id="CHDECGDC"></a>Example 2-16 Performing a Cumulative Incremental Backup</p>
<p>This example backs up all blocks changed in the database since the most recent level 0 incremental backup. If no level 0 backup exists when you run a level 1 backup, then RMAN makes a level 0 backup automatically. Any inaccessible files are skipped.</p>
<pre dir="ltr">
BACKUP 
  INCREMENTAL LEVEL 1 CUMULATIVE
  SKIP INACCESSIBLE 
  DATABASE;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90038" class="example">
<p class="titleinexample"><a id="CHDHAGDD"></a>Example 2-17 Distributing a Backup Across Multiple Disks</p>
<p><a id="sthref427"></a><a id="sthref428"></a><a id="sthref429"></a>This example backs up tablespaces to two different disks and lets RMAN perform automatic parallelization of the backup. The <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code> in the <code dir="ltr">FORMAT</code> string is a substitution variable that generates a unique file name for each output image copy.</p>
<pre dir="ltr">
RUN
{
  ALLOCATE CHANNEL dev1 DEVICE TYPE DISK FORMAT '/disk1/%U';
  ALLOCATE CHANNEL dev2 DEVICE TYPE DISK FORMAT '/disk2/%U'; 
  BACKUP AS COPY
    TABLESPACE SYSTEM, tools, users, undotbs;
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF90039" class="example">
<p class="titleinexample"><a id="CHDFGJJH"></a>Example 2-18 Identifying Data File Copies by Tag</p>
<p>This example backs up data file image copies to tape. The <code dir="ltr">BACKUP</code> command locates all data file copies with the tag <code dir="ltr">LATESTCOPY</code>, backs them up to tape, and names the backups using substitution variables. The variable <code dir="ltr">%f</code> specifies the absolute file number, whereas <code dir="ltr">%d</code> specifies the name of the database. After the data file copies are on tape, the example deletes all image copies with the tag <code dir="ltr">LATESTCOPY</code>.</p>
<pre dir="ltr">
BACKUP 
  DEVICE TYPE sbt
  DATAFILECOPY 
    FROM TAG 'LATESTCOPY'
  FORMAT 'Datafile%f_Database%d';
DELETE COPY TAG 'LATESTCOPY';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90040" class="example">
<p class="titleinexample"><a id="CHDJGDDC"></a>Example 2-19 Backing Up and Deleting Archived Redo Log Files</p>
<p>This example assumes that you have two archiving destinations set: <code dir="ltr">/disk2/PROD/archivelog/</code> and <code dir="ltr">/disk1/arch/</code>. The command backs up one archived redo log for each unique sequence number. For example, if archived redo log 1000 is in both directories, then RMAN only backs up one copy this log. The <code dir="ltr"><a href="#CHDIEAIE">DELETE INPUT</a></code> clause with the <code dir="ltr">ALL</code> keyword specifies that RMAN should delete all archived redo log files from both archiving directories after the backup.</p>
<pre dir="ltr">
BACKUP DEVICE TYPE sbt
  ARCHIVELOG LIKE '/disk%arc%'
  DELETE ALL INPUT;
</pre>
<p>Sample output for the preceding command appears as follows:</p>
<pre dir="ltr">
Starting backup at 12-MAR-07
allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=150 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
channel ORA_SBT_TAPE_1: starting archived log backup set
channel ORA_SBT_TAPE_1: specifying archived log(s) in backup set
input archived log thread=1 sequence=4 RECID=4 STAMP=616789551
input archived log thread=1 sequence=5 RECID=5 STAMP=616789551
input archived log thread=1 sequence=6 RECID=6 STAMP=616789554
input archived log thread=1 sequence=7 RECID=7 STAMP=616789731
input archived log thread=1 sequence=8 RECID=8 STAMP=616789825
input archived log thread=1 sequence=9 RECID=10 STAMP=616789901
input archived log thread=1 sequence=10 RECID=12 STAMP=616789985
channel ORA_SBT_TAPE_1: starting piece 1 at 12-MAR-07
channel ORA_SBT_TAPE_1: finished piece 1 at 12-MAR-07
piece handle=0vice0g7_1_1 tag=TAG20070312T105917 comment=API Version 2.0,MMS Version 10.1.0.3
channel ORA_SBT_TAPE_1: backup set complete, elapsed time: 00:00:25
channel ORA_SBT_TAPE_1: deleting archived log(s)
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_4_2z45sgrc_.arc RECID=4 STAMP=616789551
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_5_2z45sgrc_.arc RECID=5 STAMP=616789551
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_6_2z45sl3g_.arc RECID=6 STAMP=616789554
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_7_2z45z2kt_.arc RECID=7 STAMP=616789731
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_8_2z4620sk_.arc RECID=8 STAMP=616789825
archived log file name=/disk1/arch/archiver_1_8_616789153.arc RECID=9 STAMP=616789825
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_9_2z464dhk_.arc RECID=10 STAMP=616789901
archived log file name=/disk1/arch/archiver_1_9_616789153.arc RECID=11 STAMP=616789901
archived log file name=/disk2/PROD/archivelog/2007_03_09/o1_mf_1_10_2z4670gr_.arc RECID=12 STAMP=616789985
archived log file name=/disk1/arch/archiver_1_10_616789153.arc RECID=13 STAMP=616789985
Finished backup at 12-MAR-07
 
Starting Control File and SPFILE Autobackup at 12-MAR-07
piece handle=c-28643857-20070312-02 comment=API Version 2.0,MMS Version 10.1.0.3
Finished Control File and SPFILE Autobackup at 12-MAR-07
</pre></div>
<!-- class="example" -->
<div id="RCMRF90041" class="example">
<p class="titleinexample"><a id="CHDBJCAJ"></a>Example 2-20 Scripting Incrementally Updated Backups</p>
<p><a id="sthref430"></a>By incrementally updating backups, you can avoid the overhead of making full image copy backups of data files, while also minimizing media recovery time. For example, if you run a daily backup script, then you never have more than one day of redo to apply for media recovery.</p>
<p>Assume you run the following script daily. On first execution, the script creates an image copy backup of the database on disk with the specified tag. On second execution, the script creates a level 1 differential incremental backup of the database. On every subsequent execution, RMAN applies the level 1 incremental backup to the data file copy and then makes a new level 1 backup.</p>
<pre dir="ltr">
RUN
{
  RECOVER COPY OF DATABASE 
    WITH TAG 'incr_update';
  BACKUP
    INCREMENTAL LEVEL 1
    FOR RECOVER OF COPY WITH TAG 'incr_update'
    DATABASE;
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF90042" class="example">
<p class="titleinexample"><a id="CHDGAGID"></a>Example 2-21 Backing Up Disk-Based Backup Sets to Tape</p>
<p>Assume your goal is to keep recent backup sets on disk and older backup sets on tape. Also, you want to avoid keeping copies of the same backup set on disk and tape simultaneously. This example backs up backup sets created more than two weeks ago to tape and then deletes the backup pieces from disk.</p>
<pre dir="ltr">
BACKUP
  DEVICE TYPE sbt 
  BACKUPSET
    COMPLETED BEFORE 'SYSDATE-14' 
  DELETE INPUT;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90043" class="example">
<p class="titleinexample"><a id="CHDJIJDH"></a>Example 2-22 Duplexing a Database Backup</p>
<p>This example uses the <code dir="ltr"><a href="#CHDJAEBG">COPIES</a></code> parameter to create two compressed backups of the database, with each backup on a separate disk. The output locations are specified in the <code dir="ltr">FORMAT</code> parameter.</p>
<pre dir="ltr">
BACKUP AS COMPRESSED BACKUPSET
  DEVICE TYPE DISK 
  COPIES 2
  DATABASE
  FORMAT '/disk1/db_%U', '/disk2/db_%U';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90044" class="example">
<p class="titleinexample"><a id="CHDCJHFH"></a>Example 2-23 Specifying How Channels Divide Workload</p>
<p><a id="sthref431"></a>This example explicitly parallelizes a backup by using the <code dir="ltr"><a href="#CHDDCCAA">CHANNEL</a></code> parameter to specify which channels should back up which files and to which locations.</p>
<pre dir="ltr">
RUN
{
  ALLOCATE CHANNEL ch1 DEVICE TYPE sbt
    PARMS 'ENV=(OB_DEVICE_1=stape1)';
  ALLOCATE CHANNEL ch2 DEVICE TYPE sbt
    PARMS 'ENV=(OB_DEVICE_1=stape2)';
  BACKUP 
    (DATABASE        # ch1 backs up database to tape drive stape1
      CHANNEL ch1)
    (ARCHIVELOG ALL
      CHANNEL ch2);  # ch2 backs up archived redo log files to tape drive stape2
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF90045" class="example">
<p class="titleinexample"><a id="CHDECIJB"></a>Example 2-24 Creating an Incremental Backup for Refresh of a Standby Database</p>
<p><a id="sthref432"></a>This example makes an incremental backup of the primary database and uses it to update an associated standby database. The <code dir="ltr">BACKUP</code> command creates an incremental backup of the primary database that can be applied at a standby database to update it with changes since the specified SCN.</p>
<pre dir="ltr">
RMAN&gt; CONNECT TARGET /

connected to target database: PROD (DBID=39525561)

RMAN&gt; CONNECT CATALOG rman@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; BACKUP DEVICE TYPE DISK
2&gt; INCREMENTAL FROM SCN 404128 DATABASE
3&gt;  FORMAT '/disk1/incr_standby_%U';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90046" class="example">
<p class="titleinexample"><a id="CHDFIFDI"></a>Example 2-25 Specifying Corruption Tolerance for Data File Backups</p>
<p><a id="sthref433"></a><a id="sthref434"></a><a id="sthref435"></a><a id="sthref436"></a>This example assumes a database that contains five data files. It uses the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">MAXCORRUPT</code> command to indicate than no more than one corruption is tolerated in each data file. Because the <code dir="ltr"><a href="#CHDBHECJ">CHECK&nbsp;LOGICAL</a></code> option is specified on the <code dir="ltr">BACKUP</code> command, RMAN checks for both physical and logical corruption.</p>
<pre dir="ltr">
RUN
{
  SET MAXCORRUPT FOR DATAFILE 1,2,3,4,5 TO 1;
  BACKUP CHECK LOGICAL
    DATABASE;
}
</pre></div>
<!-- class="example" -->
<div id="RCMRF90047" class="example">
<p class="titleinexample"><a id="CHDCIBCJ"></a>Example 2-26 Creating a Consistent Database Backup for Archival Purposes</p>
<p>This example uses a <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl011.htm#i97063">keepOption</a></span></code> to create an archival backup set that cannot be considered obsolete for one year. The example backs up the database, archives the redo in the current online logs to ensure that this new backup is consistent, and backs up only those archived redo log files needed to restore the data file backup to a consistent state.</p>
<p>The <code dir="ltr">BACKUP</code> command also creates a restore point to match the SCN at which this backup is consistent. The <code dir="ltr">FORMAT</code> parameter must be capable of creating multiple backup pieces in multiple backup sets.</p>
<pre dir="ltr">
BACKUP DATABASE
  FORMAT '/disk1/archival_backups/db_%U.bck' 
  TAG quarterly
  KEEP UNTIL TIME 'SYSDATE + 365'
  RESTORE POINT Q1FY06;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90048" class="example">
<p class="titleinexample"><a id="CHDJJIJG"></a>Example 2-27 Exempting Copies from the Retention Policy</p>
<p><a id="sthref437"></a>The following example copies two data files and exempts them from the retention policy forever. (<code dir="ltr">KEEP</code> <code dir="ltr">FOREVER</code> requires a recovery catalog.) The control file and server parameter file are also backed up, even with autobackup off.</p>
<pre dir="ltr">
SHUTDOWN IMMEDIATE;
STARTUP MOUNT;
BACKUP
  KEEP FOREVER
  FORMAT '?/dbs/%U_longterm.cpy'
  TAG LONGTERM_BCK
  DATAFILE 1 DATAFILE 2;
ALTER DATABASE OPEN;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90049" class="example">
<p class="titleinexample"><a id="CHDIJDDE"></a>Example 2-28 Backing Up Files That Need Backups</p>
<p>Assume that you back up the database and archived redo log files every night to tape by running the following command.</p>
<pre dir="ltr">
BACKUP
  MAXSETSIZE 500M
  DATABASE PLUS ARCHIVELOG;
</pre>
<p>The preceding command sets an upper limit to the size of each backup set so that RMAN produces multiple backup sets. Assume that the media management device fails halfway through the backup and is then restarted. The next day you discover that only half the backup sets completed. In this case, you can run the following command in the evening:</p>
<pre dir="ltr">
BACKUP 
  NOT BACKED UP SINCE TIME 'SYSDATE-1'
  MAXSETSIZE 500M
  DATABASE PLUS ARCHIVELOG;
</pre>
<p>With the preceding command, RMAN backs up only files not backed up during in the previous 24 hours. When RMAN determines that a backup from the specified time window is available, it displays output like the following:</p>
<pre dir="ltr">
skipping datafile 1; already backed up on 18-JAN-07
skipping datafile 2; already backed up on 18-JAN-07
skipping datafile 3; already backed up on 18-JAN-07
</pre>
<p>If you place the <code dir="ltr">NOT</code> <code dir="ltr">BACKED</code> <code dir="ltr">UP</code> <code dir="ltr">SINCE</code> clause immediately after the <code dir="ltr">BACKUP</code> command, then it affects all objects to be backed up. You can also place it after individual <code dir="ltr"><span class="codeinlineitalic">backupSpec</span></code> clauses to cause only backups for those objects described by the <code dir="ltr"><span class="codeinlineitalic">backupSpec</span></code> to be subject to the limitation.</p>
</div>
<!-- class="example" -->
<div id="RCMRF90050" class="example">
<p class="titleinexample"><a id="CHDHIAJB"></a>Example 2-29 Using NODUPLICATES To Back Up Data File Copies</p>
<p>This example creates a data file copy of data file 2 named <code dir="ltr">/disk2/df2.cpy</code>. The example then backs up this data file copy to the <code dir="ltr">/disk1</code> and <code dir="ltr">/disk3</code> directories. The <code dir="ltr">NODUPLICATES</code> option on the final <code dir="ltr">BACKUP</code> command indicates that only one copy of data file 2 is backed up.</p>
<pre dir="ltr">
BACKUP AS COPY
  DATAFILE 2
  FORMAT '/disk2/df2.cpy' TAG my_tag;
BACKUP AS COPY
  DATAFILECOPY '/disk2/df2.cpy' 
  FORMAT '/disk1/df2.cpy';
BACKUP AS COPY
  DATAFILECOPY '/disk1/df2.cpy' 
  FORMAT '/disk3/df2.cpy';
BACKUP
  DEVICE TYPE sbt
  DATAFILECOPY ALL NODUPLICATES; # backs up only copy of datafile 2
</pre></div>
<!-- class="example" -->
<div id="RCMRF90513" class="example">
<p class="titleinexample"><a id="BGBCEHII"></a>Example 2-30 Copying Archived Log From Operating System File to ASM</p>
<pre dir="ltr">
BACKUP AS COPY REUSE 
ARCHIVELOG LIKE "/ade/b/369893928/oracle/work/arc_dest/arcr_1_11_686060575.arc"
AUXILIARY FORMAT "+RCVAREA";
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta006.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta008.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
