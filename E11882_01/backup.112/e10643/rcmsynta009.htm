<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>CHANGE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:38Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta008.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta010.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/158</span> <!-- End Header --><a id="i79920"></a>
<div id="RCMRF110" class="refsect1">
<h1 class="refsect1">CHANGE<a id="ABC1053937"></a><a id="ABC1053937SRI1"></a><a id="ABC1053937SRI12"></a><a id="ABC1053937SRI123"></a><a id="ABC1053937SRI1234"></a><a id="ABC1053937SRI12345"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref469"></a>Purpose</p>
<p>Use the <a id="CHDBCAAC"></a><code dir="ltr">CHANGE</code> command to perform the following tasks:</p>
<ul>
<li>
<p>Update the availability status of backups and copies recorded in the RMAN repository</p>
</li>
<li>
<p>Change the priority of or close failures recorded in the automatic diagnostic repository</p>
</li>
<li>
<p>Update the <code dir="ltr">DB_UNIQUE_NAME</code> recorded in the recovery catalog for the target database</p>
</li>
<li>
<p>Associate the backup of a database in a Data Guard environment with a different database in the environment</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8173" href="../../backup.112/e10642/rcmmaint.htm#BRADV8173"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to change the availability status of a backup or copy</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref470"></a>Prerequisites</p>
<p>RMAN must be connected as <code dir="ltr">TARGET</code> to a database instance, which must be started.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref471"></a>Usage Notes</p>
<p><a href="rcmsynta007.htm#CHDJIIGD">"RMAN Backups in a Data Guard Environment"</a> explains the difference between the association and accessibility of a backup. In a Data Guard environment, the database that creates a backup or copy is associated with the file. You can use maintenance commands such as <code dir="ltr">CHANGE</code>, <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code>, and <code dir="ltr"><a href="rcmsynta015.htm#i81077">CROSSCHECK</a></code> for backups when connected to any database in the Data Guard environment if the backups are accessible. In general, RMAN considers tape backups created on any database as accessible to all databases in the environment, whereas disk backups are accessible only to the database that created them.</p>
<p>For example, suppose that you connect RMAN as <code dir="ltr">TARGET</code> to standby database <code dir="ltr">standby1</code> and back it up to tape and disk. If the tape drive becomes unavailable, then you can connect RMAN as <code dir="ltr">TARGET</code> to any primary or standby database in the Data Guard environment to change the status of the tape backup to <code dir="ltr">UNAVAILABLE</code>. After the tape drive is repaired, you can connect RMAN as <code dir="ltr">TARGET</code> to any database to change the status of the tape backup back to <code dir="ltr">AVAILABLE</code>. However, if the disk backup is accidentally removed by an operating system utility, then RMAN can only change the status of the disk backup when connected as <code dir="ltr">TARGET</code> to <code dir="ltr">standby1</code>.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref472"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF90056"></a><a href="#CHDDDBFA"><span class="xreftitleitalic"><span class="italic">change</span></span></a>::=</p>
<img width="751" height="189" src="img/change.gif" alt="Description of change.gif follows" /><br />
<a id="sthref473" href="img_text/change.htm">Description of the illustration change.gif</a><br />
<br />
<p>(<a href="#CHDEJJII"><span class="xreftitleitalic"><span class="italic">maintSpec</span>::=</span></a>, <a href="rcmsubcl008.htm#BABBBGBC"><span class="xreftitleitalic"><span class="italic">forDbUniqueNameOption</span>::=</span></a>, <a href="rcmsubcl011.htm#BABGDGCC"><span class="xreftitleitalic"><span class="italic">keepOption</span>::=</span></a>, <a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDEJJII"></a><a id="RCMRF90057"></a><a id="sthref474"></a><a id="sthref475"></a><a href="rcmsubcl014.htm#BABFBDDF"><span class="xreftitleitalic"><span class="italic">maintSpec</span></span></a>::=</p>
<img width="362" height="194" src="img/maintspec.gif" alt="Description of maintspec.gif follows" /><br />
<a id="sthref476" href="img_text/maintspec.htm">Description of the illustration maintspec.gif</a><br />
<br />
<p>(<a href="rcmsubcl012.htm#BABBEIIJ"><span class="xreftitleitalic"><span class="italic">listObjList</span>::=</span></a>, <a href="rcmsubcl002.htm#BABJGBFG"><span class="xreftitleitalic"><span class="italic">archivelogRecordSpecifier</span>::=</span></a>, <a href="rcmsubcl013.htm#BABEEGAJ"><span class="xreftitleitalic"><span class="italic">maintQualifier</span>::=</span></a>, <a href="rcmsubcl016.htm#BABEIAEB"><span class="xreftitleitalic"><span class="italic">recordSpec</span>::=</span></a>, <a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>)</p>
<p class="subhead2"><a id="RCMRF90058"></a><a id="sthref477"></a><a id="sthref478"></a><a href="rcmsubcl008.htm#BABBBGBC"><span class="xreftitleitalic"><span class="italic">forDbUniqueNameOption</span>::=</span></a></p>
<img width="381" height="64" src="img/fordbuniquenameoption.gif" alt="Description of fordbuniquenameoption.gif follows" /><br />
<a id="sthref479" href="img_text/fordbuniquenameoption.htm">Description of the illustration fordbuniquenameoption.gif</a><br />
<br />
<p class="subhead2"><a id="RCMRF90059"></a><a id="sthref480"></a><a id="sthref481"></a><a href="#CHDDEBAI"><span class="xreftitleitalic"><span class="italic">resetDbUniqueNameOption</span></span></a>::=</p>
<img width="423" height="53" src="img/resetdbuniquenameoption.gif" alt="Description of resetdbuniquenameoption.gif follows" /><br />
<a id="sthref482" href="img_text/resetdbuniquenameoption.htm">Description of the illustration resetdbuniquenameoption.gif</a><br />
<br />
<p class="subhead2"><a id="RCMRF90060"></a><a id="sthref483"></a><a id="sthref484"></a><a href="#CHDBGFCG"><span class="xreftitleitalic"><span class="italic">changeFailure</span></span></a>::=</p>
<img width="721" height="157" src="img/changefailure.gif" alt="Description of changefailure.gif follows" /><br />
<a id="sthref485" href="img_text/changefailure.htm">Description of the illustration changefailure.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref486"></a>Semantics</p>
<p class="subhead2"><a id="CHDDDBFA"></a><a id="RCMRF90061"></a><span class="italic">change</span></p>
<p>This clause enables you to change the status of RMAN repository records. To obtain the primary keys of RMAN repository records whose status you want to change, run a <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> command or query the recovery catalog views.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of CHANGE Command" summary="Describes CHANGE command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t37">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t37" headers="r1c1-t37"><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t37 r1c2-t37">Specifies which files you want to <code dir="ltr">CHANGE</code>.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> for descriptions of the options in this clause.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t37" headers="r1c1-t37"><code dir="ltr"><span class="codeinlineitalic">&nbsp;&nbsp;&nbsp;<a href="rcmsubcl008.htm#BABEACAI">forDbUniqueNameOption</a></span></code></td>
<td class="cellalignment1926" headers="r3c1-t37 r1c2-t37">Changes the metadata for objects that are exclusively associated with the specified <code dir="ltr">DB_UNIQUE_NAME</code> in a Data Guard environment.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl008.htm#BABEACAI">forDbUniqueNameOption</a></span></code> for descriptions of the options in this clause.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t37" headers="r1c1-t37"><code dir="ltr">&nbsp;&nbsp;&nbsp;<a id="sthref487"></a>AVAILABLE</code></td>
<td class="cellalignment1926" headers="r4c1-t37 r1c2-t37"><a id="sthref488"></a><a id="sthref489"></a><a id="sthref490"></a><a id="sthref491"></a>Changes the status of a backup or copy to <code dir="ltr">AVAILABLE</code> in the repository. RMAN searches for the file and verifies that it exists.
<p>This feature is useful when a previously unavailable file is made available again. You can also use this option to alter the repository status of backups and copies from prior incarnations.</p>
<p>This is the only <code dir="ltr">CHANGE</code> option that requires either a manual or automatic maintenance channel. A maintenance channel is not required, however, when <code dir="ltr">CHANGE ... AVAILABLE</code> is used with a file that is disk only (that is, an <code dir="ltr">ARCHIVELOG</code>, <code dir="ltr">DATAFILECOPY</code>, or <code dir="ltr">CONTROLFILECOPY</code>). If you use <code dir="ltr">CHANGE ... AVAILABLE</code> on files that are not disk-only, and have objects created on device types that are not configured for automatic channels, then issue manual maintenance commands on these channels. For example, if you created a backup on an <code dir="ltr">sbt</code> channel, but have only a <code dir="ltr">DISK</code> channel automatically configured, then you must manually allocate an <code dir="ltr">sbt</code> channel before <code dir="ltr">CHANGE ... AVAILABLE</code> can operate on the backup.</p>
<p>If you execute <code dir="ltr">CHANGE ... AVAILABLE</code> for a file in a Data Guard environment, then RMAN attempts to crosscheck the file before updating its status to <code dir="ltr">AVAILABLE</code>. If the file is inaccessible, then RMAN prompts you to perform the same operation when connected as <code dir="ltr">TARGET</code> to the database associated with the file. If the file is accessible, then RMAN updates the status as requested.</p>
<p><span class="bold">Note:</span> You can view the status of backups in the <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> output or recovery catalog views.</p>
<p><span class="bold">Note:</span> <code dir="ltr">CHANGE ... AVAILABLE</code> is not valid for foreign archived redo log files, which are received by a logical standby database for a <a id="sthref492"></a>LogMiner session. Unlike normal archived redo log files, foreign archived redo log files have a different DBID.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t37" headers="r1c1-t37"><code dir="ltr"><span class="codeinlineitalic">&nbsp;&nbsp;&nbsp;<a href="rcmsubcl011.htm#i97063">keepOption</a></span></code></td>
<td class="cellalignment1926" headers="r5c1-t37 r1c2-t37"><a id="sthref493"></a>Changes the exemption status of a backup or copy in relation to the configured retention policy. For example, specify <code dir="ltr">CHANGE ... NOKEEP</code> to remove the <code dir="ltr">KEEP</code> attributes for a backup, making it subject to the backup retention policy.
<p>The <code dir="ltr">KEEP FOREVER</code> clause requires use of a recovery catalog (see <a href="#CHDHFHGC">Example 2-37</a>). The <code dir="ltr">RESTORE POINT</code> option is not valid with <code dir="ltr">CHANGE</code>. You cannot use <code dir="ltr">CHANGE ... UNAVAILABLE</code> or <code dir="ltr">KEEP</code> attributes for files stored in the fast recovery area.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl011.htm#i97063">keepOption</a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t37" headers="r1c1-t37"><code dir="ltr"><span class="codeinlineitalic">&nbsp;&nbsp;&nbsp;<a href="#CHDDEBAI"><span class="italic">resetDbUniqueNameOption</span></a></span></code></td>
<td class="cellalignment1926" headers="r6c1-t37 r1c2-t37">Associates the files in <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> with a different database in a Data Guard environment.
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="#CHDDEBAI"><span class="italic">resetDbUniqueNameOption</span></a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t37" headers="r1c1-t37"><code dir="ltr">&nbsp;&nbsp;&nbsp;<a id="sthref494"></a>UNAVAILABLE</code></td>
<td class="cellalignment1926" headers="r7c1-t37 r1c2-t37"><a id="sthref495"></a><a id="sthref496"></a><a id="sthref497"></a><a id="sthref498"></a>Changes the status of a backup or copy to <code dir="ltr">UNAVAILABLE</code> in the repository (see <a href="#CHDEBBHI">Example 2-35</a>). View the status in the <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> output or recovery catalog views.
<p><a id="sthref499"></a>This option is useful when a file cannot be found or has migrated offsite. RMAN does not use a file that is marked <code dir="ltr">UNAVAILABLE</code> in a <code dir="ltr"><a href="rcmsynta2008.htm#i85188">RESTORE</a></code> or <code dir="ltr"><a href="rcmsynta2001.htm#i84135">RECOVER</a></code> command. If the file is later found or returns to the main site, then use the <code dir="ltr">AVAILABLE</code> option to update its status. The <code dir="ltr">UNAVAILABLE</code> option is also useful when you do not want a specific backup or copy to be eligible to be restored but also do not want to delete it, or when you want to alter the repository status of backups and copies from prior incarnations.</p>
<p><code dir="ltr">CHANGE ... UNAVAILABLE</code> is not valid for files in the fast recovery area. This command is also not valid for foreign archived redo log files, which are received by a logical standby database for a LogMiner session. Unlike normal archived redo log files, foreign archived redo log files have a different DBID.</p>
<p><span class="bold">Note:</span> If you execute <code dir="ltr">CHANGE ... UNAVAILABLE</code> for a file in a Data Guard environment, then RMAN does not attempt to crosscheck the file before updating its status to <code dir="ltr">UNAVAILABLE</code>. RMAN updates the status as requested regardless of whether the file physically exists.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t37" headers="r1c1-t37"><code dir="ltr">&nbsp;&nbsp;&nbsp;<a id="sthref500"></a><a id="sthref501"></a>UNCATALOG</code></td>
<td class="cellalignment1926" headers="r8c1-t37 r1c2-t37"><a id="sthref502"></a>Removes references to a data file copy, backup piece, or archived redo log from the recovery catalog, and updates records in the target control file to status <code dir="ltr">DELETED</code> (see <a href="#CHDCADAJ">Example 2-36</a>). The <code dir="ltr">CHANGE ... UNCATALOG</code> command does not touch physical backups and copies. Use this command to notify RMAN when a file is deleted by some means other than a <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> command.
<p>If you execute <code dir="ltr">CHANGE ... UNCATALOG</code> for a file in a Data Guard environment, then RMAN does not attempt to crosscheck the file before removing its metadata from the recovery catalog. RMAN removes the metadata as requested regardless of whether the file physically exists.</p>
<p><span class="bold">Caution:</span> If you resynchronize from a backup control file, or upgrade the recovery catalog, then records previously removed from the RMAN repository with <code dir="ltr">CHANGE ... UNCATALOG</code> may reappear in the recovery catalog.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r9c1-t37" headers="r1c1-t37"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;<a id="sthref503"></a>DEVICE&nbsp;TYPE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code></td>
<td class="cellalignment1926" headers="r9c1-t37 r1c2-t37">Executes the <code dir="ltr">CHANGE</code> for the specified device type only (see <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code>). This option is valid only if you have configured automatic channels and have not manually allocated channels. For example, if you run <code dir="ltr">CHANGE UNCATALOG ... DEVICE TYPE DISK</code>, then RMAN only uncatalogs files on disk.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r10c1-t37" headers="r1c1-t37"><code dir="ltr"><span class="codeinlineitalic"><a href="#CHDBGFCG"><span class="italic">changeFailure</span></a></span></code></td>
<td class="cellalignment1926" headers="r10c1-t37 r1c2-t37">Specifies changes for failures recorded by the Data Recovery Advisor.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r11c1-t37" headers="r1c1-t37"><br />
<code dir="ltr"><a id="sthref504"></a>DB_UNIQUE_NAME</code><br />
<code dir="ltr">FROM</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code><br />
<code dir="ltr">TO</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code></td>
<td class="cellalignment1926" headers="r11c1-t37 r1c2-t37">Updates the metadata in the recovery catalog to reflect a new <code dir="ltr">DB_UNIQUE_NAME</code> for a database in a Data Guard environment. The first value specifies the old <code dir="ltr">DB_UNIQUE_NAME</code> for the database currently recorded in the recovery catalog, whereas the second specifies the new <code dir="ltr">DB_UNIQUE_NAME</code>.
<p>RMAN must be connected to a recovery catalog and a mounted target database. The target database should not have the <code dir="ltr">DB_UNIQUE_NAME</code> specified in the <code dir="ltr">FROM</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> parameter; otherwise, RMAN signals an error.</p>
<p>Typically, you use this command after you have changed the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter of a database and must update its metadata in the recovery catalog. In general, you should run this command before performing any other RMAN operations on a renamed database. The recommended practice is to execute <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">DB_UNIQUE_NAME</code> before <code dir="ltr">CHANGE DB_UNIQUE_NAME</code>.</p>
<p>Assume that you have changed the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter for a standby database from <code dir="ltr">standby_old</code> to <code dir="ltr">standby_new</code>. Typically, you execute <code dir="ltr">CHANGE DB_UNIQUE_NAME</code> in the following scenarios:</p>
<ul>
<li>
<p>A <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">DB_UNIQUE_NAME</code> command shows the old <code dir="ltr">DB_UNIQUE_NAME</code> value but does <span class="italic">not</span> show the new one (see <a href="#CHDCDEAC">Example 2-40</a>).</p>
</li>
<li>
<p>A <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">DB_UNIQUE_NAME</code> command shows both the old <span class="italic">and</span> new <code dir="ltr">DB_UNIQUE_NAME</code> values. When RMAN connects as <code dir="ltr">TARGET</code> to a database with an unrecognized <code dir="ltr">DB_UNIQUE_NAME</code>, RMAN implicitly registers the instance as a new database. For this reason, <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">DB_UNIQUE_NAME</code> command can show both the old and new names (in this example, <code dir="ltr">standby_old</code> and <code dir="ltr">standby_new</code>) for a database whose <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter has been changed.</p>
</li>
</ul>
<p>In the scenario in which only the old name is listed, execute <code dir="ltr">CHANGE DB_UNIQUE_NAME FROM standby_old TO standby_new</code> so that RMAN changes the <code dir="ltr">DB_UNIQUE_NAME</code> for <code dir="ltr">standby_old</code> to <code dir="ltr">standby_new</code> in the recovery catalog.</p>
<p>In the scenario in which both the old and new names are listed, RMAN automatically executes the following commands when you run <code dir="ltr">CHANGE DB_UNIQUE_NAME FROM standby_old TO standby_new</code>:</p>
<ol>
<li>
<p><code dir="ltr">CHANGE ARCHIVELOG ALL FOR DB_UNIQUE_NAME standby_old RESET DB_UNIQUE_NAME</code></p>
</li>
<li>
<p><code dir="ltr">CHANGE BACKUP FOR DB_UNIQUE_NAME standby_old RESET DB_UNIQUE_NAME</code></p>
</li>
<li>
<p><code dir="ltr"><a href="rcmsynta2022.htm#BGBFHHFG">UNREGISTER</a></code> <code dir="ltr">DB_UNIQUE_NAME standby_old</code></p>
</li>
</ol>
<p>Thus, RMAN changes the association of all backups for the <code dir="ltr">DB_UNIQUE_NAME</code> specified in the <code dir="ltr">FROM</code> clause to the <code dir="ltr">DB_UNIQUE_NAME</code> specified in the <code dir="ltr">TO</code> clause.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="CHDDEBAI"></a><a id="RCMRF90062"></a><span class="italic"><a id="sthref505"></a><a id="sthref506"></a>resetDbUniqueNameOption</span></p>
<p><a id="sthref507"></a>This clause enables you to associate backups made on one database in a Data Guard environment with a different database in the environment. The following table explains the RMAN behavior when different options are specified with <code dir="ltr">RESET DB_UNIQUE_NAME</code>.</p>
<div id="RCMRF90063" class="tblruleformal">
<p class="titleintable"><a id="sthref508"></a><a id="CHDJGCDI"></a>Table 2-2 RESET DB_UNIQUE_NAME Options</p>
<table class="cellalignment1929" title="RESET DB_UNIQUE_NAME Options" summary="Describes the outcome of using different RESET DB_UNIQUE_NAME parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t38">TO <span class="italic">db_unique_name</span></th>
<th class="cellalignment1930" id="r1c2-t38">FOR DB_UNIQUE_NAME</th>
<th class="cellalignment1930" id="r1c3-t38">RMAN Behavior</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t38" headers="r1c1-t38">
<p>No</p>
</td>
<td class="cellalignment1926" headers="r2c1-t38 r1c2-t38">
<p>No</p>
</td>
<td class="cellalignment1926" headers="r2c1-t38 r1c3-t38">
<p>RMAN associates the <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> files with the target database. RMAN also changes the association of all backups that are not associated with any database.</p>
<p>Typically, you would execute <code dir="ltr">CHANGE</code> with these options after upgrading to an Oracle Database 11<span class="italic">g</span> recovery catalog schema, so that you can associate the backups with the target database.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t38" headers="r1c1-t38">
<p>Yes</p>
</td>
<td class="cellalignment1926" headers="r3c1-t38 r1c2-t38">
<p>No</p>
</td>
<td class="cellalignment1926" headers="r3c1-t38 r1c3-t38">
<p>RMAN associates the <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> files with the database indicated by the <code dir="ltr">TO</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code>. RMAN also changes the association of all backups that are not associated with any database.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t38" headers="r1c1-t38">
<p>No</p>
</td>
<td class="cellalignment1926" headers="r4c1-t38 r1c2-t38">
<p>Yes</p>
</td>
<td class="cellalignment1926" headers="r4c1-t38 r1c3-t38">
<p>RMAN restricts its operations to <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> files that are associated with the database in the <code dir="ltr">FOR DB_UNIQUE_NAME</code> clause, and then associates these files with the target database.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t38" headers="r1c1-t38">
<p>Yes</p>
</td>
<td class="cellalignment1926" headers="r5c1-t38 r1c2-t38">
<p>Yes</p>
</td>
<td class="cellalignment1926" headers="r5c1-t38 r1c3-t38">
<p>RMAN restricts its operations to <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> files that are associated with the database in the <code dir="ltr">FOR DB_UNIQUE_NAME</code> clause, and then associates these files with the database specified by <code dir="ltr">TO</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of CHANGE Command" summary="Describes the CHANGE command resetDbUniqueNameOption parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t39">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t39" headers="r1c1-t39"><code dir="ltr"><a id="sthref509"></a>RESET&nbsp;DB_UNIQUE_NAME</code></td>
<td class="cellalignment1926" headers="r2c1-t39 r1c2-t39">Associates the files in <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> with the target database (see <a href="#CHDDAFDE">Example 2-39</a>). <a href="#CHDJGCDI">Table 2-2</a> explains the RMAN behavior when different options are specified.
<p>When changing the association of the files from one database to another database, RMAN deletes the duplicate names from the recovery catalog. For example, if you change the association of data file copy <code dir="ltr">/d1/df1.bak</code> from database <code dir="ltr">standby1</code> to database <code dir="ltr">prod</code>, then the recovery catalog has only one record for this file rather than two.</p>
<p>Use caution when specifying the <code dir="ltr">RESET DB_UNIQUE_NAME</code> option because you cannot undo the effect of this command. For example, after you have changed the association of the files associated with database <code dir="ltr">standby1</code> to database <code dir="ltr">prod</code>, the recovery catalog does not retain historical metadata about the database with which these files were previously associated. However, you can unregister database <code dir="ltr">standby1</code> and connect RMAN again to <code dir="ltr">standby1</code>, but in this case the recovery catalog is updated with all metadata from the <code dir="ltr">standby1</code> control file.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t39" headers="r1c1-t39"><code dir="ltr">&nbsp;&nbsp;&nbsp;TO</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code></td>
<td class="cellalignment1926" headers="r3c1-t39 r1c2-t39">Associates the files in <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code> with the specified database in a Data Guard environment.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="CHDBGFCG"></a><a id="RCMRF90064"></a><span class="italic"><a id="sthref510"></a><a id="sthref511"></a>changeFailure</span></p>
<p>This clause enables you to change the status of failures. Use the <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">FAILURE</code> command to show the list of failures.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of CHANGE Command" summary="Describes the CHANGE command changeFailure parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t40">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t40" headers="r1c1-t40"><code dir="ltr"><a id="sthref512"></a><a id="sthref513"></a><a id="sthref514"></a>FAILURE</code></td>
<td class="cellalignment1926" headers="r2c1-t40 r1c2-t40">Enables you to change priority or close failures recorded in the Automatic Diagnostic Repository. By default RMAN prompts for confirmation before performing the requested change.
<p>The target database to which RMAN is connected must be a single-instance database and must not be a physical standby database.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t40" headers="r1c1-t40"><code dir="ltr">&nbsp;&nbsp;&nbsp;ALL</code></td>
<td class="cellalignment1926" headers="r3c1-t40 r1c2-t40">Changes only open failures.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t40" headers="r1c1-t40"><code dir="ltr">&nbsp;&nbsp;&nbsp;CRITICAL</code></td>
<td class="cellalignment1926" headers="r4c1-t40 r1c2-t40">Changes only critical failures.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t40" headers="r1c1-t40"><code dir="ltr">&nbsp;&nbsp;&nbsp;HIGH</code></td>
<td class="cellalignment1926" headers="r5c1-t40 r1c2-t40">Changes only failures with <code dir="ltr">HIGH</code> priority.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t40" headers="r1c1-t40"><code dir="ltr">&nbsp;&nbsp;&nbsp;LOW</code></td>
<td class="cellalignment1926" headers="r6c1-t40 r1c2-t40">Changes only failures with <code dir="ltr">LOW</code> priority.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t40" headers="r1c1-t40"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">failnum</span></code></td>
<td class="cellalignment1926" headers="r7c1-t40 r1c2-t40">Changes only the specified failure.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t40" headers="r1c1-t40"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;EXCLUDE&nbsp;FAILURE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">failnum</span></code></td>
<td class="cellalignment1926" headers="r8c1-t40 r1c2-t40">Excludes the specified failures from the change.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref515"></a><a id="sthref516"></a>Examples</p>
<div id="RCMRF90065" class="example">
<p class="titleinexample"><a id="CHDEBBHI"></a>Example 2-35 Updating Backups to Status UNAVAILABLE</p>
<p>Assume that you have temporarily moved backup set 4 to a different location because of a space issue on disk. The backup, which has the key 4, is still listed as available:</p>
<pre dir="ltr">
RMAN&gt; LIST BACKUP SUMMARY;

List of Backups
===============
Key     TY LV S Device Type Completion Time #Pieces #Copies Compressed Tag
------- -- -- - ----------- --------------- ------- ------- ---------- ---
1       B  A  A DISK        24-FEB-07       1       1       NO         TAG20070427T115348
3       B  A  A DISK        24-MAR-07       1       1       NO         TAG20070427T115452
4       B  F  A DISK        24-APR-07       1       1       NO         TAG20070427T115456
</pre>
<p>You do not want to uncatalog the backup because you plan to move it back to its original location when more disk space is available. Thus, you make the backup unavailable as follows (sample output included):</p>
<pre dir="ltr">
RMAN&gt; CHANGE BACKUPSET 4 UNAVAILABLE;
 
changed backup piece unavailable
backup piece handle=/disk2/backup/c-3257893776-20070424-00 RECID=4 STAMP=588858897
Changed 1 objects to UNAVAILABLE status
</pre></div>
<!-- class="example" -->
<div id="RCMRF90066" class="example">
<p class="titleinexample"><a id="CHDCADAJ"></a>Example 2-36 Uncataloging and Recataloging Archived Redo Log Files</p>
<p>In this example, you move all archived redo log files to a new directory, uncatalog them, and then recatalog them in the new location:</p>
<pre dir="ltr">
RMAN&gt; HOST '/bin/mv $ORACLE_HOME/dbs/*.arc /disk2/archlog/';
RMAN&gt; CHANGE ARCHIVELOG ALL UNCATALOG;
RMAN&gt; CATALOG START WITH '/disk2/archlog' NOPROMPT;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90067" class="example">
<p class="titleinexample"><a id="CHDHFHGC"></a>Example 2-37 Changing a Database Backup into an Archival Backup</p>
<p>Assume your goal to is to change a database backup into an archival backup, which you plan to store offsite. Because the backup is consistent and requires no recovery, you do not need to store archived redo log files with the backup. The example uses the <code dir="ltr">CHANGE ... KEEP FOREVER</code> command to specify that the backup should never become obsolete.</p>
<pre dir="ltr">
RMAN&gt; CONNECT TARGET /
RMAN&gt; CONNECT CATALOG rman@catdb

recovery catalog database Password: <span class="italic">password</span>

RMAN&gt; CHANGE BACKUP TAG 'consistent_db_bkup' KEEP FOREVER;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90068" class="example">
<p class="titleinexample"><a id="CHDJICBD"></a>Example 2-38 Changing the Status of a Failure</p>
<p>In the following example, the <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">FAILURE</code> command shows that a data file has corrupt blocks. The failure number is 5 and has a priority of <code dir="ltr">HIGH</code>. This data file contains nonessential data, so you decide to change the priority of this failure to low.</p>
<pre dir="ltr">
RMAN&gt; LIST FAILURE;

List of Database Failures
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
5          HIGH     OPEN      11-DEC-06     datafile 8 contains corrupt blocks
 
RMAN&gt; CHANGE FAILURE 5 PRIORITY LOW;
 
List of Database Failures
Failure ID Priority Status    Time Detected Summary
---------- -------- --------- ------------- -------
5          HIGH     OPEN      11-DEC-06     datafile 8 contains corrupt blocks
 
Do you really want to change the above failures (enter YES or NO)? YES
changed 1 failures to LOW priority
</pre></div>
<!-- class="example" -->
<div id="RCMRF90069" class="example">
<p class="titleinexample"><a id="CHDDAFDE"></a>Example 2-39 Associating Backups with a New Database in a Data Guard Environment</p>
<p>Assume that <code dir="ltr">standby1</code>, <code dir="ltr">standby2</code>, and <code dir="ltr">standby3</code> are standby databases associated with primary database is <code dir="ltr">prod</code>. This example assumes that RMAN is connected to target database <code dir="ltr">prod</code> and a recovery catalog.</p>
<p>You are planning to remove <code dir="ltr">standby1</code> from your environment, so you want to associate the <code dir="ltr">standby1</code> backups with your primary database. You are also planning to remove <code dir="ltr">standby3</code> from your environment, so you want to associate the <code dir="ltr">standby3</code> backups with <code dir="ltr">standby2</code>. You execute the following commands:</p>
<pre dir="ltr">
CHANGE BACKUP FOR DB_UNIQUE_NAME standby1 RESET DB_UNIQUE_NAME;
CHANGE BACKUP FOR DB_UNIQUE_NAME standby3 RESET DB_UNIQUE_NAME TO standby2;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90070" class="example">
<p class="titleinexample"><a id="CHDCDEAC"></a>Example 2-40 Updating a DB_UNIQUE_NAME in the Recovery Catalog</p>
<p>Assume that a standby database has the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter setting of <code dir="ltr">dgrdbms4</code>, which you decide to change to <code dir="ltr">sfrdbms4</code>. You shut down the standby instance, change the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter to <code dir="ltr">sfrdbms4</code>, and restart the standby instance.</p>
<p>Later, to update the recovery catalog to reflect the changed unique name of the standby database, you connect RMAN to the primary database and recovery catalog, and then execute the <code dir="ltr">CHANGE</code> command as follows:</p>
<pre dir="ltr">
RMAN&gt; CONNECT TARGET /
RMAN&gt; CONNECT CATALOG rman@catdb

recovery catalog database Password: <span class="italic">password</span>

RMAN&gt; CHANGE DB_UNIQUE_NAME FROM dgrdbms4 TO sfrdbms4;
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta008.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta010.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
