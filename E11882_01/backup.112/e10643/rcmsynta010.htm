<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>CONFIGURE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta009.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta011.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">23/158</span> <!-- End Header --><a id="i80338"></a>
<div id="RCMRF113" class="refsect1">
<h1 class="refsect1">CONFIGURE<a id="ABC1055743"></a><a id="ABC1055743SRI1"></a><a id="ABC1055743SRI12"></a><a id="ABC1055743SRI123"></a><a id="ABC1055743SRI1234"></a><a id="ABC1055743SRI12345"></a><a id="ABC1055743SRI123456"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref517"></a>Purpose</p>
<p>Use the <a id="CHDFGDBB"></a><code dir="ltr">CONFIGURE</code> command to create or change a persistent configuration affecting RMAN backup, restore, duplication, and maintenance jobs on a particular database. A configuration is in effect for any RMAN session on this database until the configuration is explicitly cleared or changed. You can use the <code dir="ltr"><a href="rcmsynta2015.htm#i86135">SHOW</a></code> command to display the configurations for one or more databases.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8002" href="../../backup.112/e10642/rcmconfb.htm#BRADV8002"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to configure the RMAN environment</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref518"></a>Additional Topics</p>
<ul>
<li>
<p><a href="#CHDCACAG">Prerequisites</a></p>
</li>
<li>
<p><a href="#CHDHFHDB">Usage Notes</a></p>
</li>
<li>
<p><a href="#CHDBHBBA">Syntax</a></p>
</li>
<li>
<p><a href="#CHDJDIEA">Semantics</a></p>
</li>
<li>
<p><a href="#CHDDDCBH">Examples</a></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDCACAG"></a>Prerequisites</p>
<p>Execute this command only at the RMAN prompt.</p>
<p>Unless you specify the <code dir="ltr">FOR DB_UNIQUE_NAME</code> clause, an RMAN connection to a target database is required. The target database must be mounted or open.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDHFHDB"></a>Usage Notes</p>
<p>The <code dir="ltr">CONFIGURE</code> command always stores a configuration for a target database in the target database control file. If you use RMAN with a recovery catalog, then RMAN also stores persistent configuration settings for each registered database in the catalog.</p>
<p class="subhead2"><a id="RCMRF90071"></a>Default RMAN Configuration Settings</p>
<p><a id="sthref519"></a>The RMAN <code dir="ltr">CONFIGURE</code> settings have defaults. You can return to the default for any <code dir="ltr">CONFIGURE</code> command by rerunning the command with the <code dir="ltr">CLEAR</code> option, but you cannot clear individual parameters in this way. For example, the following command is valid:</p>
<pre dir="ltr">
CONFIGURE CHANNEL DEVICE TYPE sbt CLEAR
</pre>
<p>However, the following command is invalid:</p>
<pre dir="ltr">
CONFIGURE CHANNEL DEVICE TYPE sbt MAXPIECESIZE 5M CLEAR
</pre>
<p class="subhead2"><a id="RCMRF90072"></a>RMAN Configuration in a Data Guard Environment</p>
<p><a id="sthref520"></a><a id="sthref521"></a>In a Data Guard environment, Oracle recommends that you always use RMAN with a recovery catalog. You can use the <code dir="ltr">CONFIGURE</code> command to create persistent RMAN configurations for any individual primary or standby database in the Data Guard environment, except for settings for backup retention policy, tablespace exclusion, and auxiliary names. Thus, the primary and standby databases can have different channel configurations, control file autobackup locations, and so on.</p>
<p>You can use the <code dir="ltr">FOR DB_UNIQUE_NAME</code> clause to configure a database to which RMAN is not connected as <code dir="ltr">TARGET</code>. You can use <code dir="ltr">CONFIGURE DB_UNIQUE_NAME</code> to make a new physical standby database known to the recovery catalog and implicitly register it.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDBHBBA"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF90073"></a><a id="sthref522"></a><a id="sthref523"></a><a href="#i1017464"><span class="xreftitleitalic"><span class="italic">configure</span></span></a>::=</p>
<img width="666" height="562" src="img/configure.gif" alt="Description of configure.gif follows" /><br />
<a id="sthref524" href="img_text/configure.htm">Description of the illustration configure.gif</a><br />
<br />
<p>(<a href="rcmsubcl005.htm#BABCCBBJ"><span class="xreftitleitalic"><span class="italic">datafileSpec</span>::=</span></a>, <a href="#CHDIHIEG"><span class="xreftitleitalic"><span class="italic">backupConf</span>::=</span></a>, <a href="#CHDHEECI"><span class="xreftitleitalic"><span class="italic">cfauConf</span>::=</span></a>, <a href="#CHDHIHDH"><span class="xreftitleitalic"><span class="italic">deviceConf</span>::=</span></a>, <a href="rcmsubcl008.htm#BABBBGBC"><span class="xreftitleitalic"><span class="italic">forDbUniqueNameOption</span>::=</span></a>)</p>
<p class="subhead2"><a id="RCMRF90074"></a><a id="sthref525"></a><a id="sthref526"></a><a href="#CHDIFEEE"><span class="xreftitleitalic"><span class="italic">delalConf</span></span></a>::=</p>
<img width="662" height="157" src="img/delalconf.gif" alt="Description of delalconf.gif follows" /><br />
<a id="sthref527" href="img_text/delalconf.htm">Description of the illustration delalconf.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDIHIEG"></a><a id="RCMRF90075"></a><a id="sthref528"></a><a id="sthref529"></a><a href="#i1017487"><span class="xreftitleitalic"><span class="italic">backupConf</span></span></a>::=</p>
<img width="543" height="340" src="img/backupconf.gif" alt="Description of backupconf.gif follows" /><br />
<a id="sthref530" href="img_text/backupconf.htm">Description of the illustration backupconf.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>, <a href="#CHDICHFJ"><span class="xreftitleitalic"><span class="italic">sizeSpec</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDHEECI"></a><a id="RCMRF90076"></a><a id="sthref531"></a><a id="sthref532"></a><a href="#i1017491"><span class="xreftitleitalic"><span class="italic">cfauConf</span></span></a>::=</p>
<img width="591" height="124" src="img/cfauconf.gif" alt="Description of cfauconf.gif follows" /><br />
<a id="sthref533" href="img_text/cfauconf.htm">Description of the illustration cfauconf.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>, <a href="rcmsubcl010.htm#BABHCHAG"><span class="xreftitleitalic"><span class="italic">formatSpec</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDHIHDH"></a><a id="RCMRF90077"></a><a id="sthref534"></a><a id="sthref535"></a><a href="#i1019177"><span class="xreftitleitalic"><span class="italic">deviceConf</span></span></a>::=</p>
<img width="603" height="221" src="img/deviceconf.gif" alt="Description of deviceconf.gif follows" /><br />
<a id="sthref536" href="img_text/deviceconf.htm">Description of the illustration deviceconf.gif</a><br />
<br />
<p>(<a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>, <a href="rcmsubcl001.htm#BABFFJCH"><span class="xreftitleitalic"><span class="italic">allocOperandList</span>::=</span></a>)</p>
<p class="subhead2"><a id="CHDICHFJ"></a><a id="RCMRF90078"></a><span class="italic"><a id="sthref537"></a><a id="sthref538"></a>sizeSpec</span>::=</p>
<img width="129" height="88" src="img/sizespec.gif" alt="Description of sizespec.gif follows" /><br />
<a id="sthref539" href="img_text/sizespec.htm">Description of the illustration sizespec.gif</a><br />
<br />
<p class="subhead2"><a id="BABFHGIC"></a><a id="RCMRF90079"></a><a id="sthref540"></a><a id="sthref541"></a><a href="rcmsubcl008.htm#BABBBGBC"><span class="xreftitleitalic"><span class="italic">forDbUniqueNameOption</span>::=</span></a></p>
<img width="381" height="64" src="img/fordbuniquenameoption.gif" alt="Description of fordbuniquenameoption.gif follows" /><br />
<a id="sthref542" href="img_text/fordbuniquenameoption.htm">Description of the illustration fordbuniquenameoption.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDJDIEA"></a>Semantics</p>
<p class="subhead2"><a id="i1017464"></a><a id="RCMRF90080"></a><a id="sthref543"></a><a id="sthref544"></a><span class="italic">configure</span></p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of Main Clause of CONFIGURE Command" summary="Describes CONFIGURE command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t42">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t42">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t42" headers="r1c1-t42"><br />
<code dir="ltr">DB_UNIQUE_NAME</code><br />
<code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code><br />
<code dir="ltr">{CLEAR&nbsp;|&nbsp;CONNECT IDENTIFIER</code><br />
<code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">connect_string</span></code><code dir="ltr">'</code><code dir="ltr">}</code></td>
<td class="cellalignment1926" headers="r2c1-t42 r1c2-t42">Specifies the net service name for the physical standby database specified by <code dir="ltr"><a id="sthref545"></a><a id="sthref546"></a><a id="sthref547"></a>DB_UNIQUE_NAME</code>. The <code dir="ltr">CONNECT IDENTIFIER</code> string must not include the database user name and password.
<p>RMAN must also be connected to the primary database as <code dir="ltr">TARGET</code>. RMAN must be connected to a recovery catalog.</p>
<p>When you run the <code dir="ltr"><a href="rcmsynta2009.htm#i999772">RESYNC CATALOG</a></code> <code dir="ltr">FROM DB_UNIQUE_NAME</code> command, databases in a Data Guard environment use the net service name to connect with the <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> database. For example, assume that a standby database has the unique name <code dir="ltr">standby1</code> and the net service name <code dir="ltr">sby1</code>. You connect RMAN as <code dir="ltr">TARGET</code> to the primary database and execute <code dir="ltr">CONFIGURE DB_UNIQUE_NAME 'standby1' CONNECT IDENTIFIER 'sby1'</code>. Every primary and standby database in the environment uses the net service name <code dir="ltr">sby1</code> when it needs to make an Oracle Net connection to <code dir="ltr">standby1</code>.</p>
<p><span class="bold">Note:</span> When the target database needs to connect to other standby or primary databases, it connects as the <code dir="ltr">SYS</code> user by using the existing Data Guard authentication mechanisms.</p>
<p>Suppose that you recently connected RMAN as <code dir="ltr">TARGET</code> to the primary database and used <code dir="ltr">CONFIGURE ... FOR DB_UNIQUE_NAME standby_new</code> to configure backup settings for standby database <code dir="ltr">standby_new</code>. However, you have not yet connected RMAN as <code dir="ltr">TARGET</code> to <code dir="ltr">standby_new</code>. In this case, you can execute <code dir="ltr">RESYNC CATALOG FROM DB_UNIQUE_NAME standby_new</code>. The primary database uses the connect identifier to make an Oracle Net connection to the standby database. When you later connect RMAN to the standby database, RMAN pushes the configuration from the recovery catalog to the mounted control file.</p>
<p><span class="bold">Note:</span> If the database specified by <code dir="ltr">CONFIGURE DB_UNIQUE_NAME</code> is not registered in the recovery catalog, then RMAN implicitly registers it.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t42" headers="r1c1-t42"><code dir="ltr"><span class="codeinlineitalic"><a href="#CHDIFEEE"><span class="italic">delalConf</span></a></span></code></td>
<td class="cellalignment1926" headers="r3c1-t42 r1c2-t42">Configures an archived redo log deletion policy.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t42" headers="r1c1-t42"><br />
<code dir="ltr"><a id="sthref548"></a><a id="sthref549"></a><a id="sthref550"></a><a id="sthref551"></a>AUXNAME&nbsp;FOR&nbsp;DATAFILE</code><br />
<code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl005.htm#i81255">datafileSpec</a></span></code> <code dir="ltr">TO</code> <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r4c1-t42 r1c2-t42">Configures the auxiliary file name for the specified target data file to <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code> (see <a href="#CHDHHHDF">Example 2-45</a>). Specify <code dir="ltr">CLEAR</code> to unspecify the auxiliary file name.
<p>If you are performing TSPITR or using <code dir="ltr"><a href="rcmsynta020.htm#i81724">DUPLICATE</a></code>, then you can set <code dir="ltr">AUXNAME</code> to preconfigure the file names for use on the auxiliary database without manually specifying the auxiliary file names during the procedure. You cannot use <code dir="ltr">CONFIGURE AUXNAME</code> for recovery set, you must use <code dir="ltr">SET NEWNAME</code>.</p>
<p>For example, use this command during TSPITR if the data files are on raw disk and you must restore auxiliary data files to raw disk for performance reasons. Typically, you set the <code dir="ltr">AUXNAME</code> parameter in TSPITR for the data files of the <code dir="ltr">SYSTEM</code> and <code dir="ltr">SYSAUX</code> tablespaces and the tablespaces containing rollback or undo segments. Do not overlay files which are in use by the production database and can be discarded after TSPITR completes. In essence, the <code dir="ltr">AUXNAME</code> of a data file is the location where TSPITR can create a temporary copy of it.</p>
<p>When renaming files with the <code dir="ltr">DUPLICATE</code> command, <code dir="ltr">CONFIGURE</code> <code dir="ltr">AUXNAME</code> is an alternative to <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr"><a id="sthref552"></a>NEWNAME</code>. The difference is that after you set the <code dir="ltr">AUXNAME</code> the first time, you do not need to reset the file name when you issue another <code dir="ltr">DUPLICATE</code> command: the <code dir="ltr">AUXNAME</code> setting remains in effect until you issue <code dir="ltr">CONFIGURE AUXNAME ... CLEAR</code>. In contrast, you must reissue the <code dir="ltr">SET NEWNAME</code> command every time you execute the <code dir="ltr">DUPLICATE</code> command.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV" href="../e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to perform RMAN TSPITR, and <a class="olink BRADV010" href="../../backup.112/e10642/rcmdupdb.htm#BRADV010"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to duplicate a database with RMAN</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t42" headers="r1c1-t42"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017487"><span class="italic">backupConf</span></a></span></code></td>
<td class="cellalignment1926" headers="r5c1-t42 r1c2-t42">Configures default backup options such as duplexing, optimization, excluding tablespaces, backup set sizes, and retention policies.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t42" headers="r1c1-t42"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1017491"><span class="italic">cfauConf</span></a></span></code></td>
<td class="cellalignment1926" headers="r6c1-t42 r1c2-t42">Configures control file autobackup settings.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t42" headers="r1c1-t42"><br />
<code dir="ltr"><a id="sthref553"></a><a id="sthref554"></a><a id="sthref555"></a><a id="sthref556"></a>COMPRESSION&nbsp;ALGORITHM</code><br />
<code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">algorithm_name</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r7c1-t42 r1c2-t42">Specifies the algorithm that RMAN uses to create compressed backup sets.
<p>The default compression algorithm setting is <code dir="ltr">BASIC</code> and does not require the Advanced Compression Option. <code dir="ltr"><a id="sthref557"></a></code></p>
<p>If, however, you have enabled the Oracle Database 11<span class="italic">g</span> Release 2 Advanced Compression Option, you can choose from the following compression levels:</p>
<ul>
<li>
<p><code dir="ltr">HIGH -</code> <a id="sthref558"></a>Best suited for backups over slower networks where the limiting factor is network speed</p>
</li>
<li>
<p><code dir="ltr">MEDIUM -</code><a id="sthref559"></a>Recommended for most environments. Good combination of compression ratios and speed</p>
</li>
<li>
<p><code dir="ltr">LOW</code> -<a id="sthref560"></a> Least impact on backup throughput and suited for environments where CPU resources are the limiting factor.</p>
</li>
</ul>
<p><span class="bold">Note:</span> The compression ratio generally increases from LOW to HIGH, with a trade-off of potentially consuming more CPU resources.</p>
<p>Since the performance of the various compression levels depends on the nature of the data in the database, network configuration, system resources and the type of computer system and its capabilities, Oracle cannot document universally applicable performance statistics. The decision about which level is best must factor in on how balanced your system is regarding bandwidth into the CPU as well as the actual speed of the CPU. It is highly recommended that you run tests with the different compression levels on the data in your environment. Choosing a compression level based on your environment, network traffic characteristics (workload) and data set is the only way to ensure that the backup set compression level can satisfy your organization's performance requirements and any applicable service level agreements.</p>
<p><span class="bold">Note:</span> The <a id="sthref561"></a><a id="sthref562"></a><code dir="ltr">V$RMAN_COMPRESSION_ALGORITHM</code> view describes the supported algorithms.</p>
<p><span class="bold">See Also</span>: <span class="italic">Oracle Database Reference</span> entry for <code dir="ltr">V$RMAN_COMPRESSION_ALGORITHM</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t42" headers="r1c1-t42"><code dir="ltr">OPTIMIZE FOR LOAD</code>
<p><code dir="ltr">{TRUE|FALSE}</code></p>
</td>
<td class="cellalignment1926" headers="r8c1-t42 r1c2-t42">Specifies whether Oracle Database performs pre-compression block processing when compressed backups have been requested. <code dir="ltr">TRUE</code> is the default and <code dir="ltr">FALSE</code> enables pre-compression processing. The default behavior is not to perform pre-compression block processing. Such processing can consume extra CPU resources, and is not needed for blocks that contain all originally loaded data, and have never been the subject of single-row inserts and deletes. Specifying <code dir="ltr">FALSE</code> uses additional CPU resources to perform pre-compression block processing which consists of internal block cleanups and defragmentation that can result in improved levels of binary compression.
<p><span class="bold">See Also:</span> <span class="italic">Oracle Database Backup and Recovery User's Guide</span> to learn more about this option.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r9c1-t42" headers="r1c1-t42"><code dir="ltr">AS OF RELEASE</code>
<p><span class="italic">'version'</span></p>
</td>
<td class="cellalignment1926" headers="r9c1-t42 r1c2-t42">Specifies the release version. The version number uses the release number format and may use as many as 5 numbers to fully qualify the release. For example, 10.2.0.3.0 and 11.2 are acceptable values. This option ensures compression algorithm stability across future releases.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r10c1-t42" headers="r1c1-t42"><code dir="ltr"><span class="codeinlineitalic"><a href="#i1019177"><span class="italic">deviceConf</span></a></span></code></td>
<td class="cellalignment1926" headers="r10c1-t42 r1c2-t42">Configures default backup settings for devices, such as the default backup device, channel configurations for devices, default backup types for each device, and parallelism.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r11c1-t42" headers="r1c1-t42"><code dir="ltr"><a id="sthref563"></a><a id="sthref564"></a><a id="sthref565"></a>ENCRYPTION</code></td>
<td class="cellalignment1926" headers="r11c1-t42 r1c2-t42">Specifies transparent-mode encryption settings for the database or tablespaces.
<p>This configuration applies unless overridden with the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">ENCRYPTION</code> command. Options specified for an individual tablespace take precedence over options specified for the whole database.</p>
<p><span class="bold">See Also:</span> <a href="rcmsynta007.htm#CHDIHIGD">"Encryption of Backup Sets"</a> to learn about the different modes of backup encryption, and <a class="olink ASOAG600" href="../../network.112/e40393/asotrans.htm#ASOAG600"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> to learn about transparent data encryption</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r12c1-t42" headers="r1c1-t42"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;ALGORITHM</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;'</code><code dir="ltr"><span class="codeinlineitalic">algorithm_name</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r12c1-t42 r1c2-t42"><a id="sthref566"></a>Specifies the default algorithm to use for encryption when writing backup sets. Possible values are listed in <a id="sthref567"></a><a id="sthref568"></a><a id="sthref569"></a><a id="sthref570"></a><code dir="ltr">V$RMAN_ENCRYPTION_ALGORITHMS</code>. The <code dir="ltr">CLEAR</code> option resets the database to the default value.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r13c1-t42" headers="r1c1-t42"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;FOR&nbsp;DATABASE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;[ON&nbsp;|&nbsp;OFF&nbsp;|&nbsp;CLEAR]</code></td>
<td class="cellalignment1926" headers="r13c1-t42 r1c2-t42"><a id="sthref571"></a><a id="sthref572"></a><a id="sthref573"></a>Specifies whether to enable transparent encryption for the entire database. The options are as follows:
<ul>
<li>
<p><code dir="ltr">ON</code> enables encryption for all database files.</p>
</li>
<li>
<p><code dir="ltr">OFF</code> turns off encryption for all database files.</p>
</li>
<li>
<p><code dir="ltr">CLEAR</code> restores the default setting of <code dir="ltr">OFF</code>.</p>
</li>
</ul>
<p><span class="bold">Note:</span> You must use the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">ENCRYPTION IDENTIFIED BY</code> command to enable password encryption.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r14c1-t42" headers="r1c1-t42"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;FOR&nbsp;TABLESPACE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">tablespace_name</span></code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;[ON&nbsp;|&nbsp;OFF&nbsp;|&nbsp;CLEAR]</code></td>
<td class="cellalignment1926" headers="r14c1-t42 r1c2-t42"><a id="sthref574"></a>Specifies whether to enable transparent encryption for one or more tablespaces. Configured settings for a tablespace always override configuration set at the database level. The options are as follows:
<ul>
<li>
<p><code dir="ltr">ON</code> enables encryption for the specified tablespace unless <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">ENCRYPTION OFF FOR ALL TABLESPACES</code> is used.</p>
</li>
<li>
<p><code dir="ltr">OFF</code> disables encryption for the specified tablespace unless <code dir="ltr">SET ENCRYPTION ON FOR ALL TABLESPACES</code> is used.</p>
</li>
<li>
<p><code dir="ltr">CLEAR</code> means that encryption for the specified tablespace is determined by the current default for the whole database.</p>
</li>
</ul>
<p><span class="bold">Note:</span> You must use the <code dir="ltr">SET ENCRYPTION IDENTIFIED BY</code> command to enable password encryption.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r15c1-t42" headers="r1c1-t42"><br />
<code dir="ltr"><a id="sthref575"></a>SNAPSHOT&nbsp;CONTROLFILE</code><br />
<code dir="ltr">NAME&nbsp;TO '</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r15c1-t42 r1c2-t42"><a id="sthref576"></a>Configures the snapshot control file name and location to <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code>. If you run <code dir="ltr">CONFIGURE SNAPSHOT CONTROLFILE NAME CLEAR</code>, then RMAN sets the snapshot control file name to its default.
<p>The default value for the snapshot control file name is platform-specific and dependent on Oracle home. For example, the default on some UNIX systems is <code dir="ltr">?/dbs/snapcf_@.f</code>. If you clear the control file name, and if you change Oracle home, then the default location of the snapshot control file changes as well.</p>
<p>The snapshot control file name is valid for this database only. Assume that you configure the snapshot control file name to a nondefault value on the primary database. If you use <code dir="ltr"><a href="rcmsynta020.htm#i81724">DUPLICATE</a></code> to create a standby database, then the snapshot control file location on the standby database is set to the default value. If desired, you can then configure the snapshot location on the standby database to a nondefault value.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV141" href="../../backup.112/e10642/rcmconfa.htm#BRADV141"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about snapshot control files</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r16c1-t42" headers="r1c1-t42"><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl008.htm#BABEACAI">forDbUniqueNameOption</a></span></code></td>
<td class="cellalignment1926" headers="r16c1-t42 r1c2-t42"><a id="sthref577"></a><a id="sthref578"></a>Creates an RMAN configuration in the recovery catalog for the database in a Data Guard environment specified by <code dir="ltr">DB_UNIQUE_NAME</code>. You can specify a single database with <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> or use <code dir="ltr">ALL</code> for all databases in the recovery catalog that share the DBID of the target database (or DBID specified by the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">DBID</code> command).
<p>A recovery catalog is required when performing operations in a Data Guard environment. RMAN must be connected as <code dir="ltr">TARGET</code> to a mounted or open database (which can be a primary or standby database), <span class="italic">or</span> you must identify the target database with the <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">DBID</code> command. Thus, you can use this clause to create a persistent configuration for a standby database <span class="italic">without</span> connecting as <code dir="ltr">TARGET</code> to the standby or primary database. For example, you can create a configuration for a standby database before its creation so that the configuration applies after the database is created (see <a href="#CHDEIDFD">Example 2-47</a>).</p>
<p>When you specify <code dir="ltr">FOR DB_UNIQUE_NAME</code>, RMAN directly updates the configuration metadata in the recovery catalog. When RMAN connects as <code dir="ltr">TARGET</code> to a database whose configurations were changed with <code dir="ltr">FOR DB_UNIQUE_NAME</code>, RMAN updates the mounted control file with the configuration metadata from the recovery catalog.</p>
<p><span class="bold">Note:</span> It is possible to run <code dir="ltr">CONFIGURE</code> locally on a standby database and then run <code dir="ltr">CONFIGURE FOR DB_UNIQUE_NAME</code> for the same database while RMAN is not connected to this database as <code dir="ltr">TARGET</code>. In this case, the configuration in the recovery catalog overrides the configuration in the control file for the specific database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="CHDIFEEE"></a><a id="RCMRF90081"></a><span class="italic"><a id="sthref579"></a><a id="sthref580"></a>delalConf</span></p>
<p><a id="sthref581"></a>This subclause manages persistent configurations for archived redo log deletion policy.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of Main Clause of CONFIGURE Command" summary="Describes CONFIGURE command delalConf parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t43">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t43" headers="r1c1-t43"><a id="CHDHCEEH"></a><code dir="ltr"><a id="sthref582"></a>ARCHIVELOG&nbsp;DELETION&nbsp;POLICY</code></td>
<td class="cellalignment1926" headers="r2c1-t43 r1c2-t43">Determines when archived redo log files are eligible for deletion.
<p>The archived log deletion policy applies to all log archiving destinations, including the fast recovery area. The policy does not apply to archived redo log files in backup sets.</p>
<p>Only archived redo log files in the fast recovery area are automatically deleted by the database. You can execute the <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">... DELETE INPUT</code>, <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> <code dir="ltr">ARCHIVELOG</code>, or <code dir="ltr">DELETE OBSOLETE</code> commands to delete logs manually from log archiving destinations, including the recovery area. If <code dir="ltr">FORCE</code> is not specified on the deletion commands, then these deletion commands obey the archived log deletion policy. If <code dir="ltr">FORCE</code> is specified, then the deletion commands ignore the archived log deletion policy.</p>
<p>In the recovery area, the database retains logs eligible for deletion as long as possible. The database deletes the oldest logs first when disk space is required. When the recovery area is under disk pressure, the database may delete archived redo log files needed by Oracle Streams.</p>
<p><span class="bold">Note:</span> The deletion policy does not apply to foreign archived redo log files, which are logs received by a logical standby database for a <a id="sthref583"></a>LogMiner session. These logs are transferred from a primary database, but unlike ordinary archived redo log files they have a different DBID. Foreign archived redo log files cannot be backed up or restored on a logical standby database.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t43" headers="r1c1-t43"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;TO&nbsp;APPLIED&nbsp;ON</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;[ALL]&nbsp;STANDBY</code></td>
<td class="cellalignment1926" headers="r3c1-t43 r1c2-t43">Specifies that archived redo log files are eligible for deletion if <span class="italic">both</span> of the following conditions are met:
<ul>
<li>
<p>The archived redo log files have been applied to the required standby databases.</p>
</li>
<li>
<p>The logs are not needed by the <code dir="ltr">BACKED UP ... TIMES TO DEVICE TYPE</code> deletion policy. If the <code dir="ltr">BACKED UP</code> policy is not set, then this condition is always met.</p>
</li>
</ul>
<p>Which remote destinations are considered depends on the following criteria:</p>
<ul>
<li>
<p>If you do not specify <code dir="ltr">ALL</code>, then archived redo log files are eligible for deletion after being applied to all mandatory remote destinations.</p>
</li>
<li>
<p>If you specify <code dir="ltr">ALL</code>, then archived redo log files are eligible after being applied or consumed on all remote destinations, whether mandatory or not.</p>
<p>For example, standby database <code dir="ltr">sby1</code> may be the only remote destination receiving logs, but other remote destinations may apply logs by referring to the same location on <code dir="ltr">sby1</code>. With <code dir="ltr">ALL</code>, <code dir="ltr">sby1</code> marks the log on the primary database as consumed as soon as it is not required at <code dir="ltr">sby1</code>, but does not permit deletion of this log until it is applied or consumed by all other dependent remote destinations referring to the same location.</p>
</li>
</ul>
<p><span class="bold">Note:</span> It is invalid to specify the <code dir="ltr">TO APPLIED</code> clause in combination with either <code dir="ltr">NONE</code> or the <code dir="ltr">TO SHIPPED</code> clause.</p>
<p><span class="bold">See Also:</span> <a class="olink SBYDB04700" href="../../server.112/e41134/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for details</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t43" headers="r1c1-t43"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;BACKED&nbsp;UP&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">integer</span></code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;TIMES&nbsp;TO&nbsp;DEVICE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;TYPE&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code></td>
<td class="cellalignment1926" headers="r4c1-t43 r1c2-t43">Specifies that archived redo log files are eligible for deletion if <span class="italic">both</span> of the following conditions are met:
<ul>
<li>
<p>The specified number of archived log backups exist on the specified device type.</p>
</li>
<li>
<p>The logs are not needed by the <code dir="ltr">TO SHIPPED TO ... STANDBY</code> or <code dir="ltr">TO APPLIED ON ... STANDBY</code> deletion policy. If neither standby deletion policy is set, then this condition is always met.</p>
</li>
</ul>
<p>If you configure the deletion policy with this clause, then a <code dir="ltr">BACKUP ARCHIVELOG</code> command copies the logs unless <code dir="ltr"><span class="codeinlineitalic">integer</span></code> backups exist on the specified device type. If <code dir="ltr"><span class="codeinlineitalic">integer</span></code> backups of the logs exist, then the <code dir="ltr">BACKUP ARCHIVELOG</code> command skips the logs. In this way, the archived log deletion policy functions as a default <code dir="ltr">NOT BACKED UP</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code> <code dir="ltr">TIMES</code> clause on the <code dir="ltr">BACKUP ARCHIVELOG</code> command. You can override this deletion policy by specifying <code dir="ltr">FORCE</code> option on the <code dir="ltr">BACKUP</code> command.</p>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t43" headers="r1c1-t43"><code dir="ltr">&nbsp;&nbsp;&nbsp;TO&nbsp;NONE</code></td>
<td class="cellalignment1926" headers="r5c1-t43 r1c2-t43">Disables the archived log deletion policy. This is the default setting.
<p>Archived redo log files can be located inside or outside of the fast recovery area. Logs in any location can be deleted by manual commands. Only logs in the fast recovery area can be deleted automatically by the database.</p>
<p>When the deletion policy is set to <code dir="ltr">NONE</code>, RMAN considers archived redo log files as eligible for deletion if they meet <span class="italic">both</span> of the following conditions:</p>
<ul>
<li>
<p>The archived redo log files, whether in the fast recovery area or outside of it, have been transferred to the required remote destinations specified by <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code>.</p>
</li>
<li>
<p>The archived redo log files in the fast recovery area have been backed up at least once to disk or SBT <span class="italic">or</span> the logs are obsolete according to the backup retention policy.</p>
<p>The backup retention policy considers logs obsolete <span class="italic">only if</span> the logs are not needed by a guaranteed restore point <span class="italic">and</span> the logs are not needed by Flashback Database. Archived redo log files are needed by Flashback Database if the logs were created later than <code dir="ltr">SYSDATE-'DB_FLASHBACK_RETENTION_TARGET'</code>.</p>
</li>
</ul>
<p>For example, suppose that archived redo log files have been transferred to required remote destinations. The logs are obsolete according to the recovery window retention policy, but have not been backed up. In this case, the logs are eligible for deletion. Alternatively, suppose that the logs are obsolete and have been backed up to SBT, but have <span class="italic">not</span> been transferred to required remote destinations. In this case, the logs are not eligible for deletion.</p>
<p>If the deletion policy is set to <code dir="ltr">NONE</code>, and if you execute a deletion command for archived redo log files outside the fast recovery area, then RMAN obeys only the conditions specified on the deletion command.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t43" headers="r1c1-t43"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;TO&nbsp;SHIPPED&nbsp;TO</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;[ALL]&nbsp;STANDBY</code></td>
<td class="cellalignment1926" headers="r6c1-t43 r1c2-t43">Specifies that archived redo log files are eligible for deletion if <span class="italic">both</span> of the following conditions are met:
<ul>
<li>
<p>The archived redo log files have been transferred to the required remote destinations.</p>
</li>
<li>
<p>The logs are not needed by the <code dir="ltr">BACKED UP ... TIMES TO DEVICE TYPE</code> deletion policy. If the <code dir="ltr">BACKED UP</code> deletion policy is not set, then this condition is always met.</p>
</li>
</ul>
<p>Which remote destinations are considered depends on the following criteria:</p>
<ul>
<li>
<p>If you do not specify <code dir="ltr">ALL</code>, then the archived redo log files are eligible for deletion after transfer to mandatory remote destinations only.</p>
</li>
<li>
<p>If you specify <code dir="ltr">ALL</code>, then the logs are eligible for deletion after transfer to all remote destinations, whether mandatory or not.</p>
</li>
</ul>
<p><span class="bold">Note:</span> It is invalid to specify the <code dir="ltr">TO SHIPPED</code> clause in combination with <code dir="ltr">NONE</code> or the <code dir="ltr">TO APPLIED</code> clause.</p>
<p><span class="bold">See Also:</span> <a class="olink SBYDB04700" href="../../server.112/e41134/rman.htm#SBYDB04700"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for details</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017487"></a><a id="RCMRF90082"></a><span class="italic"><a id="sthref584"></a><a id="sthref585"></a>backupConf</span></p>
<p>This subclause manages persistent configurations relating to the <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command. One configuration is backup optimization. If you enable backup optimization, then RMAN does not back up a file to a device type if the identical file is already backed up on the device type.</p>
<p><a href="#g1028761">Table 2-3</a> explains the criteria used by backup optimization to determine whether a file is identical and can potentially be skipped. The table also explains the algorithm that RMAN uses when backup optimization is enabled and it needs to determine whether to skip the backup of an identical file. If RMAN does not skip a backup, then it makes the backup exactly as specified.</p>
<div id="RCMRF90083" class="tblhruleformalwidemax">
<p class="titleintable"><a id="sthref586"></a><a id="g1028761"></a>Table 2-3 <a id="sthref587"></a><a id="sthref588"></a><a id="sthref589"></a><a id="sthref590"></a>Backup Optimization Algorithm</p>
<table class="cellalignment1929" title="Backup Optimization Algorithm" summary="Describes criteria for skipping backups because the files are identical" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t44">File Type</th>
<th class="cellalignment1930" id="r1c2-t44">Criteria for an Identical File</th>
<th class="cellalignment1930" id="r1c3-t44">Backup Algorithm When Backup Optimization Is Enabled</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t44" headers="r1c1-t44">
<p>Datafile</p>
</td>
<td class="cellalignment1926" headers="r2c1-t44 r1c2-t44">
<p>The data file must have the same DBID, checkpoint SCN, creation SCN, and <code dir="ltr">RESETLOGS</code> SCN and time as a data file already in a backup. The data file must be offline-normal, read-only, or closed normally.</p>
</td>
<td class="cellalignment1926" headers="r2c1-t44 r1c3-t44">
<p>If a recovery window-based retention policy is enabled, then whether RMAN skips a data file depends on the backup media.</p>
<p>For backups to tape, if the most recent backup is older than the recovery window, then RMAN takes another backup of a data file even if a backup of an identical data file exists. In this way, tapes can be recycled after they expire.</p>
<p>For backups to disk, RMAN skips the backup if an identical data file is available on disk, even if that backup is older than the beginning of the recovery window. The window-based retention policy causes RMAN to retain the old backup for as long as it is needed.</p>
<p><a id="sthref591"></a>If a retention policy is enabled with <code dir="ltr">CONFIGURE</code> <code dir="ltr">RETENTION</code> <code dir="ltr">POLICY</code> <code dir="ltr">TO</code> <code dir="ltr">REDUNDANCY</code> <code dir="ltr"><span class="codeinlineitalic">r</span></code>, then RMAN skips backups only if at least <span class="italic">n</span> backups of an identical file exist on the specified device, where <code dir="ltr"><span class="codeinlineitalic">n</span></code>=<code dir="ltr"><span class="codeinlineitalic">r</span></code>+1.</p>
<p>If no retention policy is enabled, then RMAN skips a backup only if at least <span class="italic">n</span> backups of an identical file exist on the specified device. RMAN searches for values of <span class="italic">n</span> in this order of precedence (that is, values higher on the list override values lower on the list):</p>
<ol>
<li>
<p><code dir="ltr">BACKUP ... COPIES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><code dir="ltr">SET BACKUP COPIES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><code dir="ltr">CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE ... TO</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><span class="italic">n</span>=1</p>
</li>
</ol>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t44" headers="r1c1-t44">
<p>Archived redo log</p>
</td>
<td class="cellalignment1926" headers="r3c1-t44 r1c2-t44">
<p>The archived redo log must have the same thread, sequence number, and <code dir="ltr">RESETLOGS</code> SCN and time as an archived log already in a backup.</p>
</td>
<td class="cellalignment1926" headers="r3c1-t44 r1c3-t44">
<p>RMAN skips a backup only if at least <span class="italic">n</span> backups of an identical file exist on the specified device. RMAN searches for values of <span class="italic">n</span> in this order of precedence (that is, values higher on the list override values lower on the list):</p>
<ol>
<li>
<p><code dir="ltr">BACKUP ... COPIES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><code dir="ltr">SET BACKUP COPIES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><code dir="ltr">CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE ... TO</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><span class="italic">n</span>=1</p>
</li>
</ol>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t44" headers="r1c1-t44">
<p>Backup set</p>
</td>
<td class="cellalignment1926" headers="r4c1-t44 r1c2-t44">
<p>The backup set must have the same record ID and stamp as an existing backup set.</p>
</td>
<td class="cellalignment1926" headers="r4c1-t44 r1c3-t44">
<p>RMAN skips a backup only if at least <span class="italic">n</span> backups of an identical file exist on the specified device. By default, <span class="italic">n</span><code dir="ltr">=1</code>. RMAN searches for other values of <span class="italic">n</span> in this order of precedence (that is, values higher on the list override values lower on the list):</p>
<ol>
<li>
<p><code dir="ltr">BACKUP ... COPIES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><code dir="ltr">SET BACKUP COPIES</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code></p>
</li>
<li>
<p><span class="italic">n</span>=1</p>
</li>
</ol>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwidemax" -->
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of backupConf Subclause" summary="Describes CONFIGURE command backupConf parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t45">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t45">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t45" headers="r1c1-t45"><br />
<code dir="ltr">{ARCHIVELOG&nbsp;|&nbsp;DATAFILE}</code><br />
<code dir="ltr">BACKUP&nbsp;COPIES FOR&nbsp;DEVICE&nbsp;TYPE</code><br />
<code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code> <code dir="ltr">TO</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r2c1-t45 r1c2-t45"><a id="sthref592"></a><a id="sthref593"></a><a id="sthref594"></a><a id="sthref595"></a>Specifies the number of copies of each backup set for <code dir="ltr">DATAFILE</code> (both data files and control files) or <code dir="ltr">ARCHIVELOG</code> files on the specified device type (see <a href="#CHDHFJJE">Example 2-42</a>). You can create from <code dir="ltr">1</code> (default) to <code dir="ltr">4</code> copies.
<p>RMAN can duplex backups to either disk or tape, but cannot duplex backups to tape and disk simultaneously. When backing up to tape, ensure that the number of copies does not exceed the number of available tape devices. Also, if <code dir="ltr">COPIES</code> is greater than 1, then the <a id="sthref596"></a><a id="sthref597"></a><a id="sthref598"></a><code dir="ltr">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be enabled on the target database.</p>
<p>Control file autobackups are never duplexed. Also, duplexing is not permitted in the fast recovery area.</p>
<p>If duplexing is specified in the <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command or in a <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">BACKUP</code> <code dir="ltr">COPIES</code> command, then the <code dir="ltr">CONFIGURE</code> setting is overridden.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t45" headers="r1c1-t45"><br />
<code dir="ltr"><a id="sthref599"></a>BACKUP&nbsp;OPTIMIZATION</code><br />
<code dir="ltr">[ON&nbsp;|&nbsp;OFF&nbsp;|&nbsp;CLEAR]</code></td>
<td class="cellalignment1926" headers="r3c1-t45 r1c2-t45">Toggles backup optimization <code dir="ltr">ON</code> or <code dir="ltr">OFF</code> (default). Specify <code dir="ltr">CLEAR</code> to return optimization to its default value of <code dir="ltr">OFF</code>.
<p>Backup optimization is enabled when all of the following conditions are met:</p>
<ul>
<li>
<p>The <code dir="ltr">CONFIGURE</code> <code dir="ltr">BACKUP</code> <code dir="ltr">OPTIMIZATION</code> <code dir="ltr">ON</code> command has been run.</p>
</li>
<li>
<p>You run <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">DATABASE</code>, <code dir="ltr">BACKUP ARCHIVELOG</code> with the <code dir="ltr">ALL</code> or <code dir="ltr">LIKE</code> options, <code dir="ltr">BACKUP BACKUPSET ALL</code>, <code dir="ltr">BACKUP RECOVERY AREA</code>, <code dir="ltr">BACKUP RECOVERY FILES</code>, or <code dir="ltr">BACKUP DATAFILECOPY</code>.</p>
</li>
<li>
<p>The RMAN job uses a channel of only one device type.</p>
</li>
</ul>
<p>Optimization prevents RMAN from backing up a file to a device type if the identical file is already backed up on the device type. RMAN does not signal an error if backup optimization causes all files to be skipped during a backup. The backup retention policy affects which files backup optimization skips.</p>
<p><a id="sthref600"></a><a id="sthref601"></a>For two files to be identical, their content must be exactly the same, as described in <a href="#g1028761">Table 2-3</a>. When you create backup pieces on disk or on media managed by Oracle Secure Backup, optimization excludes undo data from the backup when the data does not belong to an active transaction.</p>
<p><span class="bold">Note:</span> <code dir="ltr">BACKUP ... DELETE INPUT</code> deletes all specified archived redo logs whether or not optimization skips these files during a backup.</p>
<p><span class="bold">Note:</span> <a id="sthref602"></a><a id="sthref603"></a>You can override backup optimization with the <code dir="ltr"><a href="rcmsynta007.htm#CHDGFFBB">FORCE</a></code> option of the <code dir="ltr">BACKUP</code> command.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV113" href="../../backup.112/e10642/rcmconfb.htm#BRADV113"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for a description of how RMAN determines that it can skip the backup of a file</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t45" headers="r1c1-t45"><br />
<code dir="ltr"><a id="sthref604"></a><a id="sthref605"></a>EXCLUDE&nbsp;FOR&nbsp;TABLESPACE</code><br />
<code dir="ltr"><span class="codeinlineitalic">tablespace_name</span></code> <code dir="ltr">[CLEAR]</code></td>
<td class="cellalignment1926" headers="r4c1-t45 r1c2-t45">Excludes the specified tablespace from <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">DATABASE</code> and RESTORE DATABASE commands (see <a href="#CHDDDFAA">Example 2-44</a>). You cannot exclude the <code dir="ltr">SYSTEM</code> tablespace.
<p>The BACKUP command default does not exclude tablespaces. You must declare the option to use it. The exclusion is stored as an attribute of the tablespace and not to the individual data files. In this manner, the exclusion applies not only to the present set of data files but also to any files that are added to this tablespace in the future. If you run <code dir="ltr">CONFIGURE ... CLEAR</code> on a tablespace after excluding it, then it returns to the default configuration of nonexclusion.</p>
<p>You can still back up an excluded tablespace by explicitly specifying it in a <code dir="ltr">BACKUP</code> command or by specifying the <code dir="ltr">NOEXCLUDE</code> option on a <code dir="ltr">BACKUP</code> <code dir="ltr">DATABASE</code> command. Similarly, you can restore an excluded tablespace by specifying it in the <code dir="ltr">RESTORE TABLESPACE</code> command.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t45" headers="r1c1-t45"><code dir="ltr"><a id="sthref606"></a><a id="sthref607"></a>MAXSETSIZE</code></td>
<td class="cellalignment1926" headers="r5c1-t45 r1c2-t45">Specifies the maximum size of each backup set created on a channel. Use the <code dir="ltr">CLEAR</code> option to return <code dir="ltr">MAXSETSIZE</code> to the default value of <code dir="ltr">UNLIMITED</code>.
<p><span class="bold">Note:</span> This option is ignored by <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> <code dir="ltr">AS</code> <code dir="ltr">COPY</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t45" headers="r1c1-t45"><code dir="ltr">&nbsp;&nbsp;&nbsp;TO</code> <code dir="ltr"><span class="codeinlineitalic">sizeSpec</span></code></td>
<td class="cellalignment1926" headers="r6c1-t45 r1c2-t45">Specifies the maximum size of each backup set as <code dir="ltr"><span class="codeinlineitalic">integer</span></code> gigabytes, kilobytes, or megabytes.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t45" headers="r1c1-t45"><code dir="ltr">&nbsp;&nbsp;&nbsp;TO&nbsp;UNLIMITED</code></td>
<td class="cellalignment1926" headers="r7c1-t45 r1c2-t45">Specifies no size limit for backup sets.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t45" headers="r1c1-t45"><a id="BGBDJIHJ"></a><code dir="ltr"><a id="sthref608"></a><a id="sthref609"></a><a id="sthref610"></a>RETENTION&nbsp;POLICY</code></td>
<td class="cellalignment1926" headers="r8c1-t45 r1c2-t45">Specifies a persistent, ongoing policy for backup sets and copies that RMAN marks as obsolete, that is, not needed and eligible for deletion.
<p>As time passes, RMAN marks backup sets and copies as obsolete according to the criteria specified in the retention policy. RMAN automatically deletes obsolete backup sets and copies in the fast recovery area when space is needed. RMAN does not automatically delete obsolete files outside the fast recovery area: you must manually execute <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> <code dir="ltr">OBSOLETE</code> to remove them.</p>
<p>For backups, the basic unit of the retention policy is a backup set (not a backup piece) or image copy. For example, <code dir="ltr">BACKUP AS BACKUPSET COPIES 4 TABLESPACE users</code> creates a single backup set that is duplexed into four identical backup pieces. The retention policy considers this as <span class="italic">one</span> backup, not four separate backups.</p>
<p><span class="bold">Note:</span> Use the <code dir="ltr">CLEAR</code> option to return <code dir="ltr">RETENTION POLICY</code> to its default of <code dir="ltr">REDUNDANCY 1</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r9c1-t45" headers="r1c1-t45"><code dir="ltr">&nbsp;&nbsp;&nbsp;TO&nbsp;NONE</code></td>
<td class="cellalignment1926" headers="r9c1-t45 r1c2-t45">Disables the retention policy feature. RMAN does not consider any backup sets or copies as obsolete.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r10c1-t45" headers="r1c1-t45"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;<a id="sthref611"></a><a id="sthref612"></a><a id="sthref613"></a>TO&nbsp;RECOVERY&nbsp;WINDOW</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;OF&nbsp;</code><code dir="ltr"><span class="codeinlineitalic">integer</span></code><code dir="ltr">&nbsp;DAYS</code></td>
<td class="cellalignment1926" headers="r10c1-t45 r1c2-t45">Specifies a time window in which RMAN can recover the database.
<p>The window stretches from the current time (<code dir="ltr">SYSDATE</code>) to the point of recoverability, which is the earliest date to which you want to recover. The point of recoverability is <code dir="ltr">SYSDATE</code> - <code dir="ltr"><span class="codeinlineitalic">integer</span></code> days earlier.</p>
<p><span class="bold">Note:</span> The <code dir="ltr">REDUNDANCY</code> and <code dir="ltr">RECOVERY WINDOW</code> options are mutually exclusive. Only one type of retention policy can be in effect at any time.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r11c1-t45" headers="r1c1-t45"><code dir="ltr">&nbsp;&nbsp;&nbsp;TO&nbsp;<a id="sthref614"></a><a id="sthref615"></a>REDUNDANCY</code>&nbsp;<code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r11c1-t45 r1c2-t45">Specifies that RMAN should retain <code dir="ltr"><span class="codeinlineitalic">integer</span></code> full or level 0 backups of each data file and control file. The default retention policy setting is <code dir="ltr">REDUNDANCY 1</code>.
<p>If more than <code dir="ltr"><span class="codeinlineitalic">integer</span></code> full or level 0 backups of a data file or control file exist, then RMAN marks these extra files as obsolete. RMAN then determines the oldest of the retained backups and marks all archived redo log files and log backups older than this backup as obsolete. The <code dir="ltr">DELETE OBSOLETE</code> command removes obsolete data file backups (full or incremental), control file backups, and archived log backups or image copies.</p>
<p>The following scenario illustrates how redundancy works in an incremental backup strategy. Assume that the redundancy level is 1. You run a level 0 database backup at noon Monday, a level 1 cumulative backup at noon on Tuesday and Wednesday, and a level 0 backup at noon on Thursday. Immediately after each daily backup you run a <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> <code dir="ltr">OBSOLETE</code>. The Wednesday <code dir="ltr">DELETE</code> command does not remove the Tuesday level 1 backup because this backup is not redundant: the Tuesday level 1 backup could be used to recover the Monday level 0 backup to a time between noon on Tuesday and noon on Wednesday. However, the <code dir="ltr">DELETE</code> command on Thursday removes the previous level 0 and level 1 backups.</p>
<p><span class="bold">Note:</span> The <code dir="ltr">REDUNDANCY</code> and <code dir="ltr">RECOVERY WINDOW</code> options are mutually exclusive. Only one type of retention policy can be in effect at any time.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1017491"></a><a id="RCMRF90084"></a><span class="italic"><a id="sthref616"></a><a id="sthref617"></a>cfauConf</span></p>
<p>This subclause creates persistent configurations relating to control file autobackups.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of cfauConf Subclause" summary="Describes CONFIGURE command cfauConf parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t46">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t46">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t46" headers="r1c1-t46"><a id="CHDDCAHE"></a><code dir="ltr"><a id="sthref618"></a>CONTROLFILE&nbsp;AUTOBACKUP</code></td>
<td class="cellalignment1926" headers="r2c1-t46 r1c2-t46">Controls the control file autobackup feature.
<p><span class="bold">Note:</span> You should enable control file autobackup feature when using RMAN without a recovery catalog.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t46" headers="r1c1-t46"><code dir="ltr">&nbsp;&nbsp;&nbsp;ON</code></td>
<td class="cellalignment1926" headers="r3c1-t46 r1c2-t46">Specifies that RMAN should perform a control file autobackup in the following circumstances:
<ul>
<li>
<p>After every <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> or <code dir="ltr"><a href="rcmsynta013.htm#i80886">CREATE CATALOG</a></code> command issued at the RMAN prompt.</p>
</li>
<li>
<p><a id="sthref619"></a><a id="sthref620"></a><a id="sthref621"></a>Whenever a <code dir="ltr">BACKUP</code> command within a <code dir="ltr"><a href="rcmsynta2012.htm#i85731">RUN</a></code> block is followed by a command that is not <code dir="ltr">BACKUP</code>.</p>
</li>
<li>
<p>After every <code dir="ltr">RUN</code> block if the last command in the block was <code dir="ltr">BACKUP</code>.</p>
</li>
<li>
<p>After structural changes for databases in <code dir="ltr">ARCHIVELOG</code> mode. The autobackup after structural changes does not occur for databases in <code dir="ltr">NOARCHIVELOG</code> mode.</p>
<p>Structural changes include adding tablespaces, altering the state of a tablespace or data file (for example, bringing it online), adding a new online redo log, renaming a file, adding a new redo thread, enabling or disabling Flashback Database, and so on. This type of autobackup, unlike autobackups that occur in the preceding circumstances, is only to disk. You can run <code dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP FOR DEVICE TYPE DISK</code> to set a nondefault disk location.</p>
<p>Starting with Oracle 11<span class="italic">g</span> Release 2, RMAN creates a single autobackup file encompassing all of the structural changes that have occurred within a few minutes of each other rather than creating a new backup of the controlfile on each structural change to the database.</p>
</li>
</ul>
<p>The first channel allocated during the backup or copy job creates the autobackup and places it into its own backup set; for post-structural autobackups, the default disk channel makes the backup. RMAN writes the control file and server parameter file to the same backup piece. After the control file autobackup completes, the database writes a message containing the complete path of the backup piece and the device type to the alert log.</p>
<p>The default location for the autobackup on disk is the fast recovery area (if configured) or a platform-specific location (if not configured). RMAN automatically backs up the current control file using the default format of <a href="rcmsubcl010.htm#BABBCDDA"><code dir="ltr">%F</code></a>. You can change the location and file name format with the <code dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code> and <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">CONTROLFILE AUTOBACKUP FORMAT</code> commands.</p>
<p>You cannot configure RMAN to write the autobackup to multiple locations. To create multiple control file backups, you can make the last command in your backup job a <code dir="ltr">BACKUP CURRENT CONTROLFILE FORMAT</code> command, which backs up the control file to the specified <code dir="ltr">FORMAT</code> location and then execute an autobackup.</p>
<p><span class="bold">Note:</span> The <code dir="ltr"><a href="rcmsynta2014.htm#i85845">SET</a></code> <code dir="ltr">CONTROLFILE AUTOBACKUP FORMAT</code> command, which you can specify either within a <code dir="ltr">RUN</code> block or at the RMAN prompt, overrides the configured autobackup format in the session only. The order of precedence is:</p>
<ol>
<li>
<p><code dir="ltr">SET</code> within a <code dir="ltr">RUN</code> block</p>
</li>
<li>
<p><code dir="ltr">SET</code> at <code dir="ltr">RMAN</code> prompt</p>
</li>
<li>
<p><code dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP FORMAT</code></p>
</li>
</ol>
<p>You can configure the autobackup format even when <code dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP</code> is set to <code dir="ltr">OFF</code>, but RMAN does not generate autobackups in this case. For RMAN to make autobackups, you must set <code dir="ltr">CONFIGURE CONTROLFILE AUTOBACKUP</code> to <code dir="ltr">ON</code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t46" headers="r1c1-t46"><code dir="ltr">&nbsp;&nbsp;&nbsp;OFF</code></td>
<td class="cellalignment1926" headers="r4c1-t46 r1c2-t46">Disables the autobackup feature (default).
<p>Any <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command that includes data file <code dir="ltr">1</code> automatically includes the current control file and server parameter file in the backup set. Otherwise, RMAN does not include these files.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t46" headers="r1c1-t46"><code dir="ltr">&nbsp;&nbsp;&nbsp;CLEAR</code></td>
<td class="cellalignment1926" headers="r5c1-t46 r1c2-t46">Returns this configuration to its default setting of <code dir="ltr">OFF</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t46" headers="r1c1-t46"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;FORMAT&nbsp;FOR</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;DEVICE&nbsp;TYPE</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;TO</code><code dir="ltr"><span class="codeinlineitalic">&nbsp;<a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code></td>
<td class="cellalignment1926" headers="r6c1-t46 r1c2-t46"><a id="sthref622"></a>Configures the default location and file name format for the control file autobackup on the specified device type (see <a href="#CHDFCFBB">Example 2-46</a>).
<p>By default, the format is <a href="rcmsubcl010.htm#BABBCDDA"><code dir="ltr">%F</code></a> for all devices. Any default format string specified with <code dir="ltr">CONFIGURE</code> must include the <code dir="ltr">%F</code> substitution variable. Use of any other substitution variable is an error. Specify <code dir="ltr">CLEAR</code> to return the format to the default <code dir="ltr">%F</code>.</p>
<p><a id="sthref623"></a>If a fast recovery area is enabled, and if the format is the default <code dir="ltr">'%F'</code>, then RMAN creates the autobackup in the recovery area in a directory named <code dir="ltr">autobackup</code>. Otherwise, the default autobackup location is an operating system-specific location (<code dir="ltr">?/dbs</code> on UNIX, Linux, and Windows).</p>
<p>The string <code dir="ltr"># default</code> in the output of the <code dir="ltr">SHOW</code> command indicates when RMAN is using the default format. If you manually configure the disk format to <code dir="ltr">'%F'</code>, then RMAN creates the autobackups in the operating system-specific default location even though the recovery area is enabled. To change the format back to its default so that RMAN creates the autobackups in the recovery area, run <code dir="ltr">CONFIGURE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK CLEAR</code>.</p>
<p>The <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code> can specify an <a id="sthref624"></a>Automatic Storage Management disk group. The following example configures a channel for an ASM disk group:</p>
<pre dir="ltr">
CONFIGURE CONTROLFILE AUTOBACKUP FOR DEVICE TYPE DISK TO '+dgroup1';
</pre>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl010.htm#i82206">formatSpec</a></span></code> for the semantics of the <code dir="ltr">%F</code> substitution variable</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p class="subhead2"><a id="i1019177"></a><a id="RCMRF90085"></a><span class="italic"><a id="sthref625"></a><a id="sthref626"></a>deviceConf</span></p>
<p>This subclause creates persistent configurations relating to channels and devices.</p>
<p class="subhead2"><a id="RCMRF90086"></a>Names for Configured Channels</p>
<p><a id="sthref627"></a>RMAN determines the names for configured channels. RMAN uses the following convention: <code dir="ltr">ORA_</code><code dir="ltr"><span class="codeinlineitalic">devicetype</span></code><code dir="ltr">_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code>, where <code dir="ltr"><span class="codeinlineitalic">devicetype</span></code> refers to the user device type (such as <code dir="ltr">DISK</code> or <code dir="ltr">sbt_tape</code>) and <code dir="ltr"><span class="codeinlineitalic">n</span></code> refers to the channel number. Channel names beginning with the <code dir="ltr">ORA_</code> prefix are reserved by RMAN for its own use. You cannot manually allocate a channel with a name that begins with <code dir="ltr">ORA_</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">sbt</code> and <code dir="ltr">sbt_tape</code> device types are synonymous, but RMAN output always displays <code dir="ltr">sbt_tape</code> whether the input is <code dir="ltr">sbt</code> or <code dir="ltr">sbt_tape</code>.</div>
<p>RMAN names the first <code dir="ltr">DISK</code> channel <code dir="ltr">ORA_DISK_1</code>, the second <code dir="ltr">ORA_DISK_2</code>, and so on. RMAN names the first <code dir="ltr">sbt</code> channel <code dir="ltr">ORA_SBT_TAPE_1</code>, the second <code dir="ltr">ORA_SBT_TAPE_2</code>, and so on. When you parallelize channels, RMAN always allocates channels in numeric order, starting with 1 and ending with the parallelism setting (<code dir="ltr">CONFIGURE DEVICE TYPE ... PARALLELISM</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code>).</p>
<p>To run <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> or jobs on specific configured channels, use the system-generated channel names. If you specify channel numbers in the <code dir="ltr">CONFIGURE&nbsp;CHANNEL</code> command (see the <code dir="ltr"><span class="codeinlineitalic"><a href="#i1019177"><span class="italic">deviceConf</span></a></span></code> clause), then RMAN uses the same numbers in the system-generated channel names.</p>
<p>Automatic channel allocation also applies to maintenance commands. If RMAN allocates an automatic maintenance channel, then it uses the same naming convention as any other automatically allocated channel.</p>
<p class="subhead2"><a id="RCMRF90087"></a>Configured Channels in an Oracle RAC Environment</p>
<p>When using RMAN in an Oracle RAC environment, Oracle recommends that you specify a <code dir="ltr">TARGET</code> connect string that establishes sessions on various instances in the cluster, depending on their load and availability.</p>
<p>Oracle does not recommend using the <code dir="ltr">CONNECT</code> option to configure individual channels to connect to specific Oracle RAC instances, because they make your RMAN script dependent on the particular instances named in the channel configuration. If just one of those instances is unavailable, then your backup script fails to run. Using a load-balancing connect string makes your RMAN scripts both easier to code and more resilient to individual instance failures.</p>
<p>If you decide to use the <code dir="ltr">CONNECT</code> option to direct RMAN channels to specific nodes, then Oracle strongly recommends that you not use passwords in your channel configuration. If the SYSDBA password for every instance is the same as the password in the <code dir="ltr">TARGET</code> connection, you only need to configure your channels with <code dir="ltr">CONNECT "@</code><code dir="ltr"><span class="codeinlineitalic">nodename</span></code><code dir="ltr">"</code>. RMAN connects to that channel with the user ID and password from the <code dir="ltr">TARGET</code> connection.</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of deviceConf Subclause" summary="Describes CONFIGURE command deviceConf parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t48">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t48">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t48" headers="r1c1-t48"><br />
<code dir="ltr">[<a id="sthref628"></a><a id="sthref629"></a>AUXILIARY] CHANNEL [</code><code dir="ltr"><span class="codeinlineitalic">integer</span></code><code dir="ltr">]</code><br />
<code dir="ltr">DEVICE&nbsp;TYPE</code> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t48 r1c2-t48">Specifies the standard or <code dir="ltr">AUXILIARY</code> channel that you are configuring or clearing, as well as the device type of the channel.
<p><span class="bold">Note:</span> Channels allocated with <code dir="ltr"><a href="rcmsynta004.htm#i78244">ALLOCATE CHANNEL</a></code> within a <code dir="ltr">RUN</code> command override configured automatic channels.</p>
<p>Either configure a generic channel or specify a channel number, where <code dir="ltr"><span class="codeinlineitalic">integer</span></code> is less than <code dir="ltr">255</code>. See <a href="#CHDDDFAA">Example 2-44</a> for an illustration of numbered channels.</p>
<p><a id="sthref630"></a><a id="sthref631"></a>If <code dir="ltr">AUXILIARY</code> is specified, then this configuration is used only for channels allocated at the auxiliary instance. Specify configuration information for auxiliary channels if they require different parameters from the channels allocated at the target instance. If no auxiliary device configuration is specified, then RMAN configures any auxiliary channels using the target database device configuration.</p>
<p>You must specify at least one channel option. For example, you cannot issue a command such as <code dir="ltr">CONFIGURE CHANNEL 2 DEVICE TYPE DISK</code>, but you can issue a command such as <code dir="ltr">CONFIGURE CHANNEL 2 DEVICE TYPE DISK MAXPIECESIZE 2500K</code>.</p>
<p>For generic channels of a specified device type, a new command erases previous settings for this device type. Assume that you run these commands:</p>
<pre dir="ltr">
CONFIGURE CHANNEL DEVICE TYPE sbt MAXPIECESIZE 1G;
CONFIGURE CHANNEL DEVICE TYPE sbt FORMAT 'bkup_%U';
</pre>
<p>The second command erases the <code dir="ltr">MAXPIECESIZE</code> setting of the first command.</p>
<p><span class="bold">Note:</span> RMAN does not simultaneously allocate automatic channels for multiple device types in the <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command.</p>
<p><span class="bold">See Also:</span> <a class="olink BRADV134" href="../../backup.112/e10642/rcmconfa.htm#BRADV134"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how configure automatic channels specified by channel number</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t48" headers="r1c1-t48"><code dir="ltr">&nbsp;&nbsp;&nbsp;</code><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#i78513">allocOperandList</a></span></code></td>
<td class="cellalignment1926" headers="r3c1-t48 r1c2-t48">Specifies control options for the configured channel.
<p>If you configure channels by using the nondefault <code dir="ltr">CONNECT</code> or <code dir="ltr">PARMS</code> options to create backups or copies, then you must either use the same configured channels or manually allocate channels with the same options to restore or crosscheck these backups.</p>
<p>The <code dir="ltr">FORMAT</code> parameter can specify an Automatic Storage Management disk group. The following example configures a channel for an ASM disk group:</p>
<pre dir="ltr">
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT '+dgroup1';
</pre>
<p><span class="bold">See Also:</span> <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl001.htm#i78513">allocOperandList</a></span></code></p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t48" headers="r1c1-t48"><code dir="ltr">&nbsp;&nbsp;&nbsp;CLEAR</code></td>
<td class="cellalignment1926" headers="r4c1-t48 r1c2-t48">Clears the specified channel. For example, <code dir="ltr">CONFIGURE CHANNEL 1 DEVICE TYPE DISK CLEAR</code> returns only channel 1 to its default, whereas <code dir="ltr">CONFIGURE CHANNEL DEVICE TYPE DISK CLEAR</code> returns the generic disk channel to its default. You cannot specify any other channel options (for example, <code dir="ltr">PARMS</code>) when you specify <code dir="ltr">CLEAR</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t48" headers="r1c1-t48"><br />
<code dir="ltr"><a id="sthref632"></a><a id="sthref633"></a>DEFAULT&nbsp;DEVICE&nbsp;TYPE&nbsp;TO</code><br />
<code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code></td>
<td class="cellalignment1926" headers="r5c1-t48 r1c2-t48">Specifies the default device type for automatic channels. By default, <code dir="ltr">DISK</code> is the default device type. <code dir="ltr">CLEAR</code> returns the default device type to <code dir="ltr">DISK</code>.
<p>By default, the <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command only allocates channels of the default device type. For example, if you configure automatic channels for <code dir="ltr">DISK</code> and <code dir="ltr">sbt</code> and set the default device type to <code dir="ltr">sbt</code>, then RMAN only allocates tape channels when you run the <code dir="ltr">BACKUP DATABASE</code> command. You can override this behavior either by manually allocating channels in a <code dir="ltr">RUN</code> command, or by specifying <code dir="ltr">DEVICE TYPE</code> on the <code dir="ltr">BACKUP</code> command itself (see <a href="#CHDHFJJE">Example 2-42</a>).</p>
<p>The <code dir="ltr"><a href="rcmsynta2008.htm#i85188">RESTORE</a></code> command allocates automatic channels of all configured device types, regardless of the default device type. The <code dir="ltr">RESTORE</code> command obeys the <code dir="ltr">PARALLELISM</code> setting for each configured device type.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t48" headers="r1c1-t48"><br />
<code dir="ltr"><a id="sthref634"></a><a id="sthref635"></a><a id="sthref636"></a>DEVICE&nbsp;TYPE</code><br />
<code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl006.htm#i81605">deviceSpecifier</a></span></code></td>
<td class="cellalignment1926" headers="r6c1-t48 r1c2-t48">Specifies the device type (disk or sbt) to which to apply the settings specified in this <code dir="ltr">CONFIGURE</code> command. The <code dir="ltr">CLEAR</code> option resets backup type and parallelism settings for this device to their defaults.
<p>If you run the <code dir="ltr">CONFIGURE DEVICE TYPE</code> command to configure default settings for a device type and do not run <code dir="ltr">CONFIGURE CHANNEL</code> for this device type, then RMAN allocates all channels without other channel control options. Assume that you configure the <code dir="ltr">sbt</code> device and run a backup as follows:</p>
<pre dir="ltr">
CONFIGURE DEVICE TYPE sbt PARALLELISM 1;
BACKUP DEVICE TYPE sbt DATABASE;
</pre>
<p>In effect, RMAN does the following when executing this backup:</p>
<pre dir="ltr">
RUN 
{
  ALLOCATE CHANNEL ORA_SBT_TAPE_1 DEVICE TYPE sbt;
  BACKUP DATABASE;
}
</pre></td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r7c1-t48" headers="r1c1-t48"><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;BACKUP&nbsp;TYPE&nbsp;TO</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;[[COMPRESSED]</code><br />
<code dir="ltr">&nbsp;&nbsp;&nbsp;BACKUPSET&nbsp;|&nbsp;COPY]</code></td>
<td class="cellalignment1926" headers="r7c1-t48 r1c2-t48">Configures the default backup type for disk or tape backups. For SBT devices the <code dir="ltr">COPY</code> option is not supported. The default for disk is <code dir="ltr">BACKUPSET</code>.
<p>If <code dir="ltr">BACKUP TYPE</code> is set to <code dir="ltr">BACKUPSET</code>, then the <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command always produces backup sets regardless of which media the backup is created on. With the <code dir="ltr">COMPRESSED</code> option, the backup sets produced use binary compression.</p>
<p>The default location for disk backups is the fast recovery area, if one is configured; otherwise, RMAN stores backups in a platform-specific location. The default format for backup file names is <code dir="ltr"><a href="rcmsubcl010.htm#BABGHHGH"><code dir="ltr">%U</code></a></code>.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r8c1-t48" headers="r1c1-t48"><code dir="ltr">&nbsp;&nbsp;&nbsp;PARALLELISM</code> <code dir="ltr"><span class="codeinlineitalic">integer</span></code></td>
<td class="cellalignment1926" headers="r8c1-t48 r1c2-t48">Configures the number of automatic channels of the specified device type allocated for RMAN jobs. By default, <code dir="ltr">PARALLELISM</code> is set to <code dir="ltr">1</code>.
<p><span class="bold">Note:</span> The <code dir="ltr">CONFIGURE ... PARALLELISM</code> parameter specifies channel parallelism, that is, the number of channels that RMAN allocates during backup and restore operations. The <code dir="ltr">RECOVERY_PARALLELISM</code> initialization parameter specifies the number of processes used in instance recovery.</p>
<p>Suppose you set <code dir="ltr">PARALLELISM</code> for disk backups to <code dir="ltr">2</code> (see <a href="#CHDHAFGH">Example 2-43</a>). If you set the default device type as disk, then RMAN allocates two disk channels when you run <code dir="ltr">BACKUP DATABASE</code> at the RMAN prompt. RMAN always allocates the number of channels set by <code dir="ltr">PARALLELISM</code>, although it may use only a subset of these channels.</p>
<p><span class="bold">Note:</span> If you configure <code dir="ltr"><span class="codeinlineitalic">n</span></code> manually numbered channels, then the <code dir="ltr">PARALLELISM</code> setting can be greater than or less than <code dir="ltr"><span class="codeinlineitalic">n</span></code>. For example, you can manually number 10 automatic channels and configure <code dir="ltr">PARALLELISM</code> to <code dir="ltr">2</code> or <code dir="ltr">12</code>.</p>
<p>To change the parallelism for a device type to <code dir="ltr"><span class="codeinlineitalic">n</span></code>, run a new <code dir="ltr">CONFIGURE DEVICE TYPE ... PARALLELISM</code> <code dir="ltr"><span class="codeinlineitalic">n</span></code> command. For example, you can change configure <code dir="ltr">PARALLELISM</code> to <code dir="ltr">3</code> for <code dir="ltr">sbt</code> and then change it to <code dir="ltr">2</code> as follows:</p>
<pre dir="ltr">
CONFIGURE DEVICE TYPE sbt PARALLELISM 3;
CONFIGURE DEVICE TYPE sbt PARALLELISM 2;
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDDDCBH"></a><a id="sthref637"></a>Examples</p>
<div id="RCMRF90088" class="example">
<p class="titleinexample"><a id="CHDDDDFH"></a>Example 2-41 Configuring Device and Backup Options</p>
<p>This example configures channels of device type <code dir="ltr">DISK</code> and <code dir="ltr">sbt</code> and sets the default device type as <code dir="ltr">sbt</code>. The example also enables backup optimization and configures a recovery windows of two weeks.</p>
<pre dir="ltr">
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT '/disk1/backups/%U';
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_DEVICE_1=tape1)';
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE BACKUP OPTIMIZATION ON;
CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 14 DAYS;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90089" class="example">
<p class="titleinexample"><a id="CHDHFJJE"></a>Example 2-42 Overriding the Default Device Type</p>
<p><a id="sthref638"></a><a id="sthref639"></a>This example configures duplexing to <code dir="ltr">2</code> for <code dir="ltr">DISK</code> backups of data files and control files (control file autobackups on disk are a special case and are never duplexed), then configures <code dir="ltr">sbt</code> as the default device.</p>
<pre dir="ltr">
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 2;
CONFIGURE CHANNEL DEVICE TYPE sbt PARMS 'ENV=(OB_DEVICE_1=tape1)';
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
</pre>
<p>The first <code dir="ltr"><a href="rcmsynta007.htm#i78895">BACKUP</a></code> command backs up the archived redo log files on the default <code dir="ltr">sbt</code> channel. The second <code dir="ltr">BACKUP</code> command backs up the database to disk locations. Because duplexing is enabled for disk backups, two copies of each output backup set are created.</p>
<pre dir="ltr">
BACKUP ARCHIVELOG ALL;
BACKUP DEVICE TYPE DISK 
  DATABASE
  FORMAT '/disk1/db_backup_%U','/disk2/db_backup_%U';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90090" class="example">
<p class="titleinexample"><a id="CHDHAFGH"></a>Example 2-43 Configuring Automatic Channels Across File Systems</p>
<p>This example configures automatic disk channels across two file systems:</p>
<pre dir="ltr">
CONFIGURE DEVICE TYPE DISK PARALLELISM 2;
CONFIGURE CHANNEL 1 DEVICE TYPE DISK FORMAT '/disk1/%U';
CONFIGURE CHANNEL 2 DEVICE TYPE DISK FORMAT '/disk2/%U';
</pre>
<p>Because <code dir="ltr">PARALLELISM</code> is set to <code dir="ltr">2</code>, the following command divides the output data between two file systems:</p>
<pre dir="ltr">
BACKUP DEVICE TYPE DISK
  DATABASE PLUS ARCHIVELOG;
</pre>
<p>The following <code dir="ltr">LIST</code> command shows how the data file backup was parallelized:</p>
<pre dir="ltr">
RMAN&gt; LIST BACKUPSET 2031, 2032;
 
List of Backup Sets
===================
 
BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
2031    Full    401.99M    DISK        00:00:57     19-JAN-07
        BP Key: 2038   Status: AVAILABLE  Compressed: NO  Tag: TAG20070119T100532
        Piece Name: /disk1/24i7ssnc_1_1
  List of Datafiles in backup set 2031
  File LV Type Ckp SCN    Ckp Time  Name
  ---- -- ---- ---------- --------- ----
  1       Full 973497     19-JAN-07 /disk3/oracle/dbs/t_db1.f
  5       Full 973497     19-JAN-07 /disk3/oracle/dbs/tbs_112.f
 
BS Key  Type LV Size       Device Type Elapsed Time Completion Time
------- ---- -- ---------- ----------- ------------ ---------------
2032    Full    133.29M    DISK        00:00:57     19-JAN-07
        BP Key: 2039   Status: AVAILABLE  Compressed: NO  Tag: TAG20070119T100532
        Piece Name: /disk2/25i7ssnc_1_1
  List of Datafiles in backup set 2032
  File LV Type Ckp SCN    Ckp Time  Name
  ---- -- ---- ---------- --------- ----
  2       Full 973501     19-JAN-07 /disk3/oracle/dbs/t_ax1.f
  3       Full 973501     19-JAN-07 /disk3/oracle/dbs/t_undo1.f
  4       Full 973501     19-JAN-07 /disk3/oracle/dbs/tbs_111.f
</pre></div>
<!-- class="example" -->
<div id="RCMRF90091" class="example">
<p class="titleinexample"><a id="CHDDDFAA"></a>Example 2-44 Configuring Automatic Channels in an Oracle Real Application Clusters (Oracle RAC) Configuration</p>
<p><a id="sthref640"></a><a id="sthref641"></a>This example assumes an Oracle RAC database with two nodes. Oracle Secure Backup is the media manager. Tape drive <code dir="ltr">tape1</code> is directly attached to <code dir="ltr">node1</code>, while tape drive <code dir="ltr">tape2</code> is directly attached to <code dir="ltr">node2</code>. The example configures an automatic SBT channel for each cluster node.</p>
<p>This example illustrates channel connections to Oracle RAC instances <code dir="ltr">node1</code> and <code dir="ltr">node2</code>. For both channel connections, RMAN uses the same user name and password that were entered for the target database connection.</p>
<pre dir="ltr">
CONFIGURE DEVICE TYPE sbt PARALLELISM 2;
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE CHANNEL 1 DEVICE TYPE sbt CONNECT '@node1'
  PARMS 'ENV=(OB_DEVICE=tape1)';
CONFIGURE CHANNEL 2 DEVICE TYPE sbt CONNECT '@node2'
  PARMS 'ENV=(OB_DEVICE=tape2)';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90092" class="example">
<p class="titleinexample"><a id="CHDHHHDF"></a>Example 2-45 Configuring Auxiliary File Names</p>
<p>This example uses <code dir="ltr">CONFIGURE AUXNAME</code> to specify new file names for the data files. The <code dir="ltr"><a href="rcmsynta020.htm#i81724">DUPLICATE</a></code> command duplicates a database to a remote host with a different directory structure.</p>
<pre dir="ltr">
# set auxiliary names for the data files 
CONFIGURE AUXNAME FOR DATAFILE 1 TO '/oracle/auxfiles/aux_1.f'; 
CONFIGURE AUXNAME FOR DATAFILE 2 TO '/oracle/auxfiles/aux_2.f'; 
CONFIGURE AUXNAME FOR DATAFILE 3 TO '/oracle/auxfiles/aux_3.f'; 
CONFIGURE AUXNAME FOR DATAFILE 4 TO '/oracle/auxfiles/aux_4.f'; 

RUN
{  
  ALLOCATE AUXILIARY CHANNEL dupdb1 TYPE DISK;
  DUPLICATE TARGET DATABASE TO dupdb 
  LOGFILE
    GROUP 1 ('?/dbs/dupdb_log_1_1.f', 
             '?/dbs/dupdb_log_1_2.f') SIZE 4M,
    GROUP 2 ('?/dbs/dupdb_log_2_1.f', 
             '?/dbs/dupdb_log_2_2.f') SIZE 4M REUSE; 
}
# Un-specify the auxiliary names for the data files so that they are not 
# overwritten by mistake:
CONFIGURE AUXNAME FOR DATAFILE 1 CLEAR; 
CONFIGURE AUXNAME FOR DATAFILE 2 CLEAR; 
CONFIGURE AUXNAME FOR DATAFILE 3 CLEAR; 
CONFIGURE AUXNAME FOR DATAFILE 4 CLEAR;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90093" class="example">
<p class="titleinexample"><a id="CHDFCFBB"></a>Example 2-46 Specifying the Default Format for Control File Autobackup</p>
<p>The following example enables the autobackup feature and configures the default autobackup format for the <code dir="ltr">DISK</code> and <code dir="ltr">sbt</code> devices:</p>
<pre dir="ltr">
CONFIGURE CONTROLFILE AUTOBACKUP ON; 
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/disk2/%F';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE sbt TO 'cf_auto_%F';
</pre></div>
<!-- class="example" -->
<div id="RCMRF90094" class="example">
<p class="titleinexample"><a id="CHDEIDFD"></a>Example 2-47 Creating Configurations for Standby Databases</p>
<p>Assume that primary database <code dir="ltr">prod</code> is associated with two standby databases with the <code dir="ltr">DB_UNIQUE_NAME</code> names <code dir="ltr">dgprod3</code> and <code dir="ltr">dgprod4</code>. Assume that you start RMAN and connect to <code dir="ltr">prod</code> as <code dir="ltr">TARGET</code> and connect to a recovery catalog. The following commands configure the default device type for databases <code dir="ltr">dgprod3</code> and <code dir="ltr">dgprod4</code>.</p>
<pre dir="ltr">
CONFIGURE DEFAULT DEVICE TYPE TO sbt
  FOR DB_UNIQUE_NAME dgprod3;
CONFIGURE DEVICE TYPE sbt PARALLELISM 2
  FOR DB_UNIQUE_NAME dgprod3;
CONFIGURE DEFAULT DEVICE TYPE TO DISK
  FOR DB_UNIQUE_NAME dgprod4;
</pre>
<p>The control files of the two standby databases are updated with the configuration only after the reverse resynchronization from the recovery catalog to the control file, which occurs the first time that the user connects to <code dir="ltr">dgprod3</code> and <code dir="ltr">dgprod4</code>.</p>
<p>The following <code dir="ltr"><a href="rcmsynta2015.htm#i86135">SHOW</a></code> command displays the persistent device type configurations for the database whose unique name is <code dir="ltr">dgprod3</code>:</p>
<pre dir="ltr">
RMAN&gt; SHOW DEVICE TYPE FOR DB_UNIQUE_NAME dgprod3;
RMAN configuration parameters for database with db_unique_name DGPROD3 are:

CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 2 BACKUP TYPE TO BACKUPSET;
CONFIGURE DEVICE TYPE DISK PARALLELISM 1 BACKUP TYPE TO BACKUPSET; # default
</pre>
<p>The following <code dir="ltr">SHOW</code> command displays the persistent configurations for all databases known to the recovery catalog whose DBID is 3257174182 (the value specified by the preceding <code dir="ltr">SET DBID</code> command):</p>
<pre dir="ltr">
SHOW ALL FOR DB_UNIQUE_NAME ALL;
</pre></div>
<!-- class="example" -->
<div id="RCMRF90095" class="example">
<p class="titleinexample"><a id="sthref642"></a>Example 2-48 Optimizing Backups</p>
<p>This scenario illustrates the backup optimization behavior described in <a href="#g1028761">Table 2-3</a>. Assume that backup optimization is disabled. At 9 a.m., you back up three copies of all existing archived redo log files to tape.</p>
<p>The <code dir="ltr">BACKUP_TAPE_IO_SLAVES</code> initialization parameter must be <code dir="ltr">true</code> when duplexing backups to tape.</p>
<pre dir="ltr">
BACKUP DEVICE TYPE sbt COPIES 3 ARCHIVELOG ALL;
</pre>
<p>At 11 a.m., you enable backup optimization:</p>
<pre dir="ltr">
CONFIGURE BACKUP OPTIMIZATION ON;
</pre>
<p>At noon, you run the following archived redo log backup:</p>
<pre dir="ltr">
BACKUP DEVICE TYPE sbt COPIES 2 ARCHIVELOG ALL;

Starting backup at 19-JAN-07
current log archived
using channel ORA_SBT_TAPE_1
skipping archived log file /d1/db1r_605ab325_1_34_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_35_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_36_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_37_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_38_612112605.arc; already backed up 3 time(s)
skipping archived log file /d1/db1r_605ab325_1_39_612112605.arc; already backed up 3 time(s)
channel ORA_SBT_TAPE_1: starting archived log backup set
channel ORA_SBT_TAPE_1: specifying archived log(s) in backup set
input archived log thread=1 sequence=40 RECID=170 STAMP=612270506
channel ORA_SBT_TAPE_1: starting piece 1 at 19-JAN-07
channel ORA_SBT_TAPE_1: finished piece 1 at 19-JAN-07 with 2 copies and tag TAG20070119T110827
piece handle=2hi7t0db_1_1 comment=API Version 2.0,MMS Version 10.1.0.0
piece handle=2hi7t0db_1_2 comment=API Version 2.0,MMS Version 10.1.0.0
</pre>
<p>In this case, the <code dir="ltr">BACKUP</code> <code dir="ltr">...</code> <code dir="ltr">COPIES</code> setting overrides the <code dir="ltr">CONFIGURE</code> <code dir="ltr">...</code> <code dir="ltr">COPIES</code> setting, so RMAN sets <code dir="ltr"><span class="codeinlineitalic">n</span></code><code dir="ltr">=2</code>. RMAN skips the backup of a log only if at least two copies of the log exist on the <code dir="ltr">sbt</code> device. Because three copies of each log exist on <code dir="ltr">sbt</code> of all the logs generated on or before 9 a.m., RMAN skips the backups of these logs. However, RMAN backs up two copies of all logs generated after 9 a.m. because these logs have not yet been backed up to tape.</p>
</div>
<!-- class="example" -->
<div id="RCMRF90514" class="example">
<p class="titleinexample"><a id="sthref643"></a>Example 2-49 Configuring a Default Compression Algorithm</p>
<p>This example assumes that you have a license for the Advanced Compression Option (ACO) of the database.</p>
<p>If you want to make the <code dir="ltr">MEDIUM</code> compression algorithm the default compression algorithm for all compressed backups, issue the following:</p>
<pre dir="ltr">
CONFIGURE COMPRESSION ALGORITHM 'MEDIUM';
</pre>
<p>From this point on, you can use the <code dir="ltr">MEDIUM</code> compression algorithm by issuing the following command:</p>
<pre dir="ltr">
BACKUP AS COMPRESSED BACKUPSET DATABASE;
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta009.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta011.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
