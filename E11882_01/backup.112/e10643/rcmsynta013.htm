<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>CREATE CATALOG</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta012.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta014.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">26/158</span> <!-- End Header --><a id="i80886"></a>
<div id="RCMRF117" class="refsect1">
<h1 class="refsect1">CREATE CATALOG<a id="sthref730"></a><a id="ABC31925673"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref731"></a>Purpose</p>
<p>Use the <a id="CHDICIJH"></a><code dir="ltr">CREATE CATALOG</code> command to create a recovery catalog.</p>
<p>The recovery catalog can be a <span class="bold">base recovery catalog</span> or a <span class="bold">virtual private catalog</span>.</p>
<ul>
<li>
<p>A base recovery catalog is a database schema that contains RMAN metadata for a set of target databases.</p>
</li>
<li>
<p>A virtual private catalog is a set of synonyms and views that enable user access to a subset of a base recovery catalog.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink BRADV179" href="../../backup.112/e10642/rcmcatdb.htm#BRADV179"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to create the recovery catalog</p>
</li>
<li>
<p><a href="compat.htm#g636235">Appendix B, "RMAN Compatibility"</a> to learn about the requirements for the compatibility of the recovery catalog and the other components of the RMAN environment</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref732"></a>Prerequisites</p>
<p>Execute this command only at the RMAN prompt. RMAN must be connected to the recovery catalog database either through the <code dir="ltr">CATALOG</code> command-line option or the <code dir="ltr"><a href="rcmsynta011.htm#i80734">CONNECT</a></code> <code dir="ltr">CATALOG</code> command, and the catalog database must be open. A connection to a target database is not required.</p>
<p>The recovery catalog owner, whether the catalog is a base recovery catalog or a virtual private catalog, must be granted the <a id="sthref733"></a><a id="sthref734"></a><a id="sthref735"></a><a id="sthref736"></a><code dir="ltr">RECOVERY_CATALOG_OWNER</code> role. This user must also be granted space privileges in the tablespace where the recovery catalog tables will reside. The recovery catalog is created in the default tablespace of the recovery catalog owner.</p>
<p>If you are creating a virtual private catalog, then the base recovery catalog owner must have used the RMAN <code dir="ltr"><a href="rcmsynta024.htm#CHDFDHAC">GRANT</a></code> command to grant either the <a id="sthref737"></a><a id="sthref738"></a><a id="sthref739"></a><a id="sthref740"></a><code dir="ltr">CATALOG</code> or <code dir="ltr">REGISTER</code> privilege (see <a href="#CHDCCHEA">Example 2-59</a>).</p>
<p>See the <code dir="ltr"><a href="rcmsynta011.htm#i80734">CONNECT</a></code> <code dir="ltr">CATALOG</code> description for restrictions for RMAN client connections to a virtual catalog when the RMAN client is from release Oracle Database 10<span class="italic">g</span> or earlier.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="CHDDBEFJ"></a>Usage Notes</p>
<p>Typically, you create the recovery catalog in a database created especially for this purpose. It is not recommended to create the recovery catalog in the <code dir="ltr">SYS</code> schema.</p>
<p>The best practice is to create one recovery catalog that serves as the central RMAN repository for many databases. For this reason it is called the <span class="bold">base recovery catalog</span>.</p>
<p>The owner of the base recovery catalog can <code dir="ltr"><a href="rcmsynta024.htm#CHDFDHAC">GRANT</a></code> or <code dir="ltr"><a href="rcmsynta2010.htm#CHDJCFFF">REVOKE</a></code> restricted access to the catalog to other database users. Each restricted user has full read/write access to his own metadata, which is called a <span class="bold">virtual private catalog</span>. The RMAN metadata is stored in the schema of the virtual private catalog owner. The owner of the base recovery catalog controls what each virtual catalog user can access.</p>
<p>You must take an extra step when intending to use a 10.2 or earlier release of RMAN with a virtual catalog. Before using the virtual private catalog, this user must connect to the recovery catalog database as the virtual catalog owner and execute the following PL/SQL procedure (where <code dir="ltr"><span class="codeinlineitalic">base_catalog_owner</span></code> is the database user who owns the base recovery catalog):</p>
<pre dir="ltr">
<span class="italic">base_catalog_owner</span>.DBMS_RCVCAT.CREATE_VIRTUAL_CATALOG
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the <code dir="ltr">RECOVERY_CATALOG_OWNER</code> role</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref741"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF90118"></a><span class="italic">createCatalog</span>::=</p>
<img width="277" height="37" src="img/createcatalog.gif" alt="Description of createcatalog.gif follows" /><br />
<a id="sthref742" href="img_text/createcatalog.htm">Description of the illustration createcatalog.gif</a><br />
<br /></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref743"></a>Semantics</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of CREATE CATALOG Command" summary="Describes CREATE CATALOG command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t60">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t60">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t60" headers="r1c1-t60"><code dir="ltr"><a id="sthref744"></a><a id="sthref745"></a><a id="sthref746"></a>VIRTUAL</code></td>
<td class="cellalignment1926" headers="r2c1-t60 r1c2-t60">Creates a virtual private catalog in an existing recovery catalog.
<p>Run this command after connecting RMAN to the recovery catalog database as the virtual catalog user.</p>
<p><span class="bold">Note:</span> All of the mechanisms for virtual private catalogs are in the recovery catalog schema itself. The security is provided by the catalog database, not by the RMAN client.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref747"></a><a id="sthref748"></a>Examples</p>
<div id="RCMRF90119" class="example">
<p class="titleinexample"><a id="CHDBJJGI"></a>Example 2-58 Creating a Recovery Catalog and Registering a Database</p>
<p>Assume that you start SQL*Plus and connect to the recovery catalog <code dir="ltr">catdb</code> with administrator privileges. You execute the <code dir="ltr">CREATE USER</code> statement as follows, replacing <span class="italic">password</span> with a user-specified password (see <a class="olink DBSEG33223" href="../../network.112/e36292/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for information on creating secure passwords). The SQL statement creates a user <code dir="ltr">catowner</code> in database <code dir="ltr">catdb</code> and grant the <code dir="ltr">catowner</code> user the <code dir="ltr">RECOVERY_CATALOG_OWNER</code> role.</p>
<pre dir="ltr">
SQL&gt; CREATE USER catowner IDENTIFIED BY <span class="italic">password</span>
  2  DEFAULT TABLESPACE cattbs
  3  QUOTA UNLIMITED ON cattbs;
SQL&gt; GRANT recovery_catalog_owner TO catowner;
SQL&gt; EXIT
</pre>
<p>You then start RMAN and run the following RMAN commands to connect to the recovery catalog database as <code dir="ltr">catowner</code> and create the recovery catalog:</p>
<pre dir="ltr">
RMAN&gt; CONNECT CATALOG catowner@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; CREATE CATALOG;
</pre>
<p>In the same RMAN session, you connect to a target database using operating system authentication and use the <code dir="ltr"><a href="rcmsynta2002.htm#i84399">REGISTER DATABASE</a></code> command to register this database in the catalog:</p>
<pre dir="ltr">
RMAN&gt; CONNECT TARGET /
RMAN&gt; REGISTER DATABASE;
RMAN&gt; EXIT
</pre></div>
<!-- class="example" -->
<div id="RCMRF90120" class="example">
<p class="titleinexample"><a id="CHDCCHEA"></a>Example 2-59 Creating a Virtual Private Catalog</p>
<p>Assume that you created the recovery catalog and registered a database as shown in <a href="#CHDBJJGI">Example 2-58</a>. Now you want to create a virtual private catalog for database user <code dir="ltr">vpc1</code>. You start SQL*Plus and connect to recovery catalog database <code dir="ltr">catdb</code> with administrator privileges. You create the <code dir="ltr">vpc1</code> user and grant recovery catalog ownership as follows, replacing <span class="italic">password</span> with a user-specified password (see <a class="olink DBSEG33223" href="../../network.112/e36292/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for information on creating secure passwords):</p>
<pre dir="ltr">
SQL&gt; CREATE USER vpc1 IDENTIFIED BY <span class="italic">password</span>
  2  DEFAULT TABLESPACE vpcusers
  3  QUOTA UNLIMITED ON vpcusers;
SQL&gt; GRANT recovery_catalog_owner TO vpc1;
SQL&gt; EXIT
</pre>
<p>You then start RMAN and connect to the recovery catalog database as the catalog owner <code dir="ltr">catowner</code>. By default, the virtual catalog owner has no access to the base recovery catalog. You use the <code dir="ltr"><a href="rcmsynta024.htm#CHDFDHAC">GRANT</a></code> command to grant virtual private catalog access to <code dir="ltr">vpc1</code> for RMAN operations on database <code dir="ltr">prod1</code> (but not <code dir="ltr">prod2</code>):</p>
<pre dir="ltr">
RMAN&gt; CONNECT CATALOG catowner@catdb
 
recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; GRANT CATALOG FOR DATABASE prod1 TO vpc1;
RMAN&gt; EXIT;
</pre>
<p>At this point the backup operator who will use virtual private catalog <code dir="ltr">vpc1</code> is ready to create the virtual catalog. In the following example, the backup operator connects to the recovery catalog database as <code dir="ltr">vpc1</code> and creates the virtual private catalog for <code dir="ltr">vpc1</code></p>
<pre dir="ltr">
RMAN&gt; CONNECT CATALOG vpc1@catdb

recovery catalog database Password: <span class="italic">password</span>
connected to recovery catalog database

RMAN&gt; CREATE VIRTUAL CATALOG;
RMAN&gt; EXIT;
</pre>
<p>Because this operator eventually intends to use the virtual catalog with Oracle Database 10<span class="italic">g</span> target databases, the operator must execute the <code dir="ltr">CREATE_VIRTUAL_CATALOG</code> PL/SQL procedure before using the virtual catalog (as explained in <a href="#CHDDBEFJ">"Usage Notes"</a>). In the following example, the backup operator connects to the recovery catalog database as <code dir="ltr">vpc1</code> and executes the PL/SQL procedure as follows:</p>
<pre dir="ltr">
SQL&gt; CONNECT vpc1@catdb
Enter password: <span class="italic">password</span>
Connected.
SQL&gt; BEGIN 
  2  catowner.DBMS_RCVCAT.CREATE_VIRTUAL_CATALOG;
  3  END;
  4  /
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta012.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta014.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
