<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>CROSSCHECK</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta014.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta016.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">28/158</span> <!-- End Header --><a id="i81077"></a>
<div id="RCMRF119" class="refsect1">
<h1 class="refsect1">CROSSCHECK<a id="ABC1061092"></a><a id="ABC1061092SRI1"></a><a id="ABC1061092SRI12"></a><a id="ABC1061092SRI123"></a><a id="ABC1061092SRI1234"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref767"></a>Purpose</p>
<p>Use the <a id="CHDHBGBD"></a><code dir="ltr">CROSSCHECK</code> command to synchronize the physical reality of backups and copies with their logical records in the RMAN repository.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8171" href="../../backup.112/e10642/rcmmaint.htm#BRADV8171"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn how to manage database records in the recovery catalog</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref768"></a>Prerequisites</p>
<p>RMAN must be connected to a target database instance, which must be started.</p>
<p>A maintenance channel is not required for a disk crosscheck. If you use a media manager and have not configured automatic channels for it, then you must use run <code dir="ltr"><a href="rcmsynta005.htm#i78398">ALLOCATE CHANNEL FOR MAINTENANCE</a></code> before <code dir="ltr">CROSSCHECK</code>. For example, if you created a backup on an SBT channel, but have not configured automatic SBT channels for this device, then you must manually allocate an SBT channel before <code dir="ltr">CROSSCHECK</code> can check the backup. Furthermore, if you have performed backups with different media manager options (pools, servers, libraries, and so on), then you should allocate maintenance channels for each combination.</p>
<p>Crosscheck validates all specified backups and copies, even if they were created in previous database incarnations.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref769"></a>Usage Notes</p>
<p>RMAN always maintains metadata about backups in the control file of every target database on which it performs operations. If you use RMAN with a recovery catalog, then RMAN also maintains the metadata from every registered database in the recovery catalog.</p>
<p>If a backup is on disk, then <code dir="ltr">CROSSCHECK</code> determines whether the header of the file is valid. If a backup is on tape, then RMAN queries the RMAN repository for the names and locations of the backup pieces to be checked. RMAN sends this metadata to the target database server, which queries the media management software about the backups. The media management software then checks its media catalog and reports back to the server with the status of the backups.</p>
<p class="subhead2"><a id="RCMRF90126"></a>EXPIRED and AVAILABLE Status</p>
<p>You can view the status of <a id="sthref770"></a><a id="sthref771"></a>backup sets and copies recorded in the RMAN repository through <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code>, <code dir="ltr">V$</code> views, or recovery catalog views (if you use RMAN with a catalog). <a href="#g1039376">Table 2-4</a> describes the meaning of each status.</p>
<p>The <code dir="ltr">CROSSCHECK</code> command only processes files created on the same device type as the channels used for the crosscheck. The <code dir="ltr">CROSSCHECK</code> command checks only objects marked <code dir="ltr">AVAILABLE</code> or <code dir="ltr">EXPIRED</code> in the repository by examining the files on disk for <code dir="ltr">DISK</code> channels or by querying the <a id="sthref772"></a>media manager for <code dir="ltr">sbt</code> channels.</p>
<div id="RCMRF90127" class="tblruleformal">
<p class="titleintable"><a id="sthref773"></a><a id="g1039376"></a>Table 2-4 Meaning of Crosscheck Status</p>
<table class="cellalignment1929" title="Meaning of Crosscheck Status" summary="Describes the status types reported by the CROSSCHECK command" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t64">Status</th>
<th class="cellalignment1930" id="r1c2-t64">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t64" headers="r1c1-t64">
<p><code dir="ltr"><a id="sthref774"></a>EXPIRED</code></p>
</td>
<td class="cellalignment1926" headers="r2c1-t64 r1c2-t64">
<p>Object is not found either in file system (for <code dir="ltr">DISK</code>) or in the media manager (for <code dir="ltr">sbt</code>). A backup set is <code dir="ltr">EXPIRED</code> if any backup piece in the set is <code dir="ltr">EXPIRED</code>.</p>
<p>The <code dir="ltr">CROSSCHECK</code> command does not delete the repository records of the files that it does not find, but updates their repository records to <code dir="ltr">EXPIRED</code>. You can run <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code> <code dir="ltr">EXPIRED</code> to remove the repository records for expired files and any existing physical files whose status is <code dir="ltr">EXPIRED</code>.</p>
<p>If backups are <code dir="ltr">EXPIRED</code>, then you can reexecute the crosscheck later and determine whether expired backups are available. This precaution is especially useful when you use RMAN with a media manager. For example, if some backup pieces or copies were erroneously marked as <code dir="ltr">EXPIRED</code> because the <code dir="ltr">PARMS</code> channel settings were incorrect, then after ensuring that the files really do exist in the media manager, run the <code dir="ltr">CROSSCHECK BACKUP</code> command again to restore those files to <code dir="ltr">AVAILABLE</code> status.</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t64" headers="r1c1-t64">
<p><code dir="ltr"><a id="sthref775"></a>AVAILABLE</code></p>
</td>
<td class="cellalignment1926" headers="r3c1-t64 r1c2-t64">
<p>Object is available for use by RMAN. For a backup set to be <code dir="ltr">AVAILABLE</code>, all backup pieces in the set must have the status <code dir="ltr">AVAILABLE</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p class="subhead2"><a id="RCMRF90128"></a>Crosschecks in a Data Guard Environment</p>
<p><a href="rcmsynta007.htm#CHDJIIGD">"RMAN Backups in a Data Guard Environment"</a> explains the difference between the association and accessibility of a backup. In a Data Guard environment, the database that creates a backup or copy is associated with the file. You can use maintenance commands such as <code dir="ltr">CHANGE</code>, <code dir="ltr"><a href="rcmsynta016.htm#i81315">DELETE</a></code>, and <code dir="ltr"><a href="#i81077">CROSSCHECK</a></code> for backups when connected to any database in the Data Guard environment if the backups are accessible. In general, RMAN considers tape backups created on any database as accessible to all databases in the environment, whereas disk backups are accessible only to the database that created them.</p>
<p><a id="sthref776"></a>RMAN can only update the status of a backup from <code dir="ltr">AVAILABLE</code> to <code dir="ltr">EXPIRED</code> or <code dir="ltr">DELETED</code> when connected as <code dir="ltr">TARGET</code> to the database associated with the backup. If RMAN cannot delete a backup because it is not associated with the target database, then RMAN prompts you to perform the same <code dir="ltr">CROSSCHECK</code> operation for the file at the database with which it is associated. In this way RMAN protects against unwanted status changes that result from incorrect SBT configurations.</p>
<p>For example, assume that you connect RMAN as <code dir="ltr">TARGET</code> to standby database <code dir="ltr">standby1</code> and back it up to tape. If the backup is manually removed from the tape, and if you perform a crosscheck of the backup on <code dir="ltr">standby2</code>, then RMAN prompts you to run the crosscheck on <code dir="ltr">standby1</code>. A crosscheck on <code dir="ltr">standby1</code> updates the status of the tape backup to <code dir="ltr">EXPIRED</code> when the media manager reports that the backup has been deleted.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref777"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF90129"></a><span class="italic">crosscheck</span>::=</p>
<img width="195" height="24" src="img/crosscheck.gif" alt="Description of crosscheck.gif follows" /><br />
<a id="sthref778" href="img_text/crosscheck.htm">Description of the illustration crosscheck.gif</a><br />
<br />
<p class="subhead2"><a id="RCMRF90130"></a><span class="italic"><a id="sthref779"></a><a id="sthref780"></a>maintSpec</span>::=</p>
<img width="362" height="194" src="img/maintspec.gif" alt="Description of maintspec.gif follows" /><br />
<a id="sthref781" href="img_text/maintspec.htm">Description of the illustration maintspec.gif</a><br />
<br />
<p>(<a href="rcmsubcl012.htm#BABBEIIJ"><span class="xreftitleitalic"><span class="italic">listObjList</span>::=</span></a>, <a href="rcmsubcl002.htm#BABJGBFG"><span class="xreftitleitalic"><span class="italic">archivelogRecordSpecifier</span>::=</span></a>, <a href="rcmsubcl009.htm#BABHBICI"><span class="xreftitleitalic"><span class="italic">foreignlogRecordSpecifier</span>::=</span></a>, <a href="rcmsubcl013.htm#BABEEGAJ"><span class="xreftitleitalic"><span class="italic">maintQualifier</span>::=</span></a>, <a href="rcmsubcl016.htm#BABEIAEB"><span class="xreftitleitalic"><span class="italic">recordSpec</span>::=</span></a>, <a href="rcmsubcl006.htm#BABDEJAC"><span class="xreftitleitalic"><span class="italic">deviceSpecifier</span>::=</span></a>)</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref782"></a>Semantics</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics of the CROSSCHECK Command" summary="Describes the CROSSCHECK command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t65">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t65">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t65" headers="r1c1-t65"><code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code></td>
<td class="cellalignment1926" headers="r2c1-t65 r1c2-t65">Crosschecks backups. For <code dir="ltr"><span class="codeinlineitalic">maintSpec</span></code> options, refer to the parameter descriptions in <code dir="ltr"><span class="codeinlineitalic"><a href="rcmsubcl014.htm#i92412">maintSpec</a></span></code>.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref783"></a><a id="sthref784"></a>Examples</p>
<div id="RCMRF90131" class="example">
<p class="titleinexample"><a id="sthref785"></a>Example 2-63 Crosschecking All Backups and Copies</p>
<p>This example, which assumes that the default configured channel is <code dir="ltr">DEVICE TYPE sbt</code>, crosschecks all backups and disk (partial output is included). Because RMAN preconfigures a disk channel, you do not need to manually allocate a disk channel.</p>
<pre dir="ltr">
RMAN&gt; CROSSCHECK BACKUP;

allocated channel: ORA_SBT_TAPE_1
channel ORA_SBT_TAPE_1: SID=84 device type=SBT_TAPE
channel ORA_SBT_TAPE_1: Oracle Secure Backup
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=86 device type=DISK
backup piece handle=/disk2/backup/08i9umon_1_1 RECID=7 STAMP=614423319
crosschecked backup piece: found to be 'EXPIRED'
backup piece handle=/disk2/backup/09i9umso_1_1 RECID=8 STAMP=614423448
crosschecked backup piece: found to be 'EXPIRED'
backup piece handle=/disk1/cfauto/c-26213402-20070213-00 RECID=9 STAMP=614423452
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=0bi9uo81_1_1 RECID=10 STAMP=614424833
crosschecked backup piece: found to be 'AVAILABLE'
backup piece handle=c-26213402-20070213-01 RECID=11 STAMP=614424851
crosschecked backup piece: found to be 'AVAILABLE'
.
.
.
</pre></div>
<!-- class="example" -->
<div id="RCMRF90132" class="example">
<p class="titleinexample"><a id="sthref786"></a>Example 2-64 Crosschecking Within a Range of Dates</p>
<p><a id="sthref787"></a><a id="sthref788"></a>This example queries the media manager for the status of the backup sets in a given six week range. RMAN uses the date format specified in the <code dir="ltr">NLS_DATE_FORMAT</code> parameter, which is '<code dir="ltr">DD-MON-YY</code>' in this example. The first command crosschecks backups on tape only:</p>
<pre dir="ltr">
ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE sbt;
CROSSCHECK BACKUP 
  COMPLETED BETWEEN '01-JAN-07' AND '14-FEB-07';
RELEASE CHANNEL;
</pre>
<p>The following command specifies <code dir="ltr">DEVICE TYPE DISK</code> to crosscheck only disk:</p>
<pre dir="ltr">
CROSSCHECK BACKUP DEVICE TYPE DISK 
  COMPLETED BETWEEN '01-JAN-07' AND '14-FEB-07';
</pre>
<p>If the default channel is SBT, then you can crosscheck both disk and SBT backups by running <code dir="ltr">CROSSCHECK</code> with the default channels:</p>
<pre dir="ltr">
CROSSCHECK BACKUP COMPLETED BETWEEN '01-JAN-07' AND '14-FEB-07';
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta014.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta016.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
