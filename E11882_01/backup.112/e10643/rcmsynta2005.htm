<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>REPLACE SCRIPT</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1054" />
<meta name="description" content="A guide to backup and recovery of Oracle databases, including RMAN backup and recovery, RMAN data transfer, Oracle Flashback Technology, and user-managed backup and recovery" />
<meta name="dcterms.created" content="2015-05-13T7:47:44Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Backup and Recovery Reference" />
<meta name="dcterms.identifier" content="E10643-09" />
<meta name="dcterms.isVersionOf" content="RCMRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="rcmsynta2004.htm" title="Previous" type="text/html" />
<link rel="Next" href="rcmsynta2006.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10643.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">48/158</span> <!-- End Header --><a id="i84552"></a>
<div id="RCMRF145" class="refsect1">
<h1 class="refsect1">REPLACE SCRIPT<a id="ABC1075413"></a><a id="ABC1075413SRI1"></a><a id="ABC1075413SRI12"></a></h1>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1450"></a>Purpose</p>
<p>Use the <a id="CHDGEFGC"></a><code dir="ltr">REPLACE SCRIPT</code> command to replace an existing script stored in the recovery catalog. If the script does not exist, then <code dir="ltr">REPLACE SCRIPT</code> creates it.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="rcmsynta014.htm#i1000575">CREATE SCRIPT</a></code> to learn how to create stored scripts</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1451"></a>Prerequisites</p>
<p>Execute <code dir="ltr">REPLACE SCRIPT</code> only at the RMAN prompt. RMAN must be connected to a target database and a recovery catalog. The recovery catalog database must be open.</p>
<p>If you are replacing a local script, then you must be connected to the target database that you connected to when you created the script.</p>
<p class="subhead2"><a id="RCMRF90271"></a>Substitution Variables in Stored Scripts</p>
<p><a id="sthref1452"></a>RMAN supports the use of substitution variables in a stored script. <code dir="ltr">&amp;1</code> indicates where to place the first value, <code dir="ltr">&amp;2</code> indicate where to place the second value, and so on. Special characters must be quoted.</p>
<p>The substitution variable syntax is <code dir="ltr">&amp;</code><code dir="ltr"><span class="codeinlineitalic">integer</span></code> followed by an optional period, for example, <code dir="ltr">&amp;1.3</code>. The optional period is part of the variable and replaced with the value, thus enabling the substitution text to be immediately followed by another integer. For example, if you pass the value <code dir="ltr">mybackup</code> to a command file that contains the substitution variable <code dir="ltr">&amp;1.3</code>, then the result of the substitution is <code dir="ltr">mybackup3</code>. To create the result <code dir="ltr">mybackup.3</code>, you use the syntax <code dir="ltr">&amp;1..3</code>.</p>
<p>When you create a stored script with substitution variables, you must provide example values at create time. You can provide these values with the <code dir="ltr">USING</code> clause when starting RMAN (see <code dir="ltr"><a href="rcmsynta2011.htm#i80108">RMAN</a></code>) or enter them when prompted (see <a href="rcmsynta014.htm#CHDBBABA">Example 2-62</a>).</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1453"></a>Syntax</p>
<p class="subhead2"><a id="RCMRF90272"></a><span class="italic"><a id="sthref1454"></a><a id="sthref1455"></a>replaceScript</span>::=</p>
<img width="590" height="206" src="img/replacescript.gif" alt="Description of replacescript.gif follows" /><br />
<a id="sthref1456" href="img_text/replacescript.htm">Description of the illustration replacescript.gif</a><br />
<br />
<p>(<a href="rcmsynta2012.htm#CHDIDAJB"><span class="xreftitleitalic"><span class="italic">backupCommands</span>::=</span></a>, <a href="rcmsynta2012.htm#CHDHAGID"><span class="xreftitleitalic"><span class="italic">maintenanceCommands</span>::=</span></a>, <a href="rcmsynta2012.htm#CHDJFJFH"><span class="xreftitleitalic"><span class="italic">miscellaneousCommands</span>::=</span></a>, <a href="rcmsynta2012.htm#CHDIFJGG"><span class="xreftitleitalic"><span class="italic">restoreCommands</span>::=</span></a>)</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1457"></a>Semantics</p>
<div class="inftblinformalwide">
<table class="cellalignment1929" title="Semantics for REPLACE SCRIPT Command" summary="Describes REPLACE SCRIPT command parameters" dir="ltr">
<thead>
<tr class="cellalignment1920">
<th class="cellalignment1930" id="r1c1-t18">Syntax Element</th>
<th class="cellalignment1930" id="r1c2-t18">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r2c1-t18" headers="r1c1-t18"><code dir="ltr"><a id="sthref1458"></a>GLOBAL</code></td>
<td class="cellalignment1926" headers="r2c1-t18 r1c2-t18">Identifies the script as global.
<p><span class="bold">Note:</span> A virtual private catalog has read-only access to global scripts. Creating or updating global scripts must be done while RMAN is connected to the base recovery catalog.</p>
<p><span class="bold">See Also:</span> <a href="rcmsynta014.htm#CHDBJHHH">"Usage Notes"</a> for an explanation of the difference between global and local scripts</p>
</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r3c1-t18" headers="r1c1-t18"><code dir="ltr"><a id="sthref1459"></a>SCRIPT</code><code dir="ltr"><span class="codeinlineitalic">&nbsp;script_name</span></code></td>
<td class="cellalignment1926" headers="r3c1-t18 r1c2-t18">Identifies the local or global script being replaced.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r4c1-t18" headers="r1c1-t18"><code dir="ltr">&nbsp;&nbsp;&nbsp;<a id="sthref1460"></a>COMMENT</code> <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">comment</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r4c1-t18 r1c2-t18">Associates an explanatory comment with the stored script in the recovery catalog. The comment is shown in the output of <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">SCRIPT NAMES</code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r5c1-t18" headers="r1c1-t18"><br />
<code dir="ltr"><span class="codeinlineitalic">backupCommands</span></code><br />
<code dir="ltr"><span class="codeinlineitalic">maintenanceCommands</span></code><br />
<code dir="ltr"><span class="codeinlineitalic">restoreCommands</span></code><br />
<code dir="ltr"><span class="codeinlineitalic">miscellaneousCommands</span></code></td>
<td class="cellalignment1926" headers="r5c1-t18 r1c2-t18">Specifies commands to include in the stored script. The commands allowable within the brackets of the <code dir="ltr">REPLACE SCRIPT</code> <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">script_name</span></code> <code dir="ltr">'</code> <code dir="ltr">{...}</code> command are the same commands supported within a <code dir="ltr"><a href="rcmsynta2012.htm#i85731">RUN</a></code> block. Any command that is valid within a <code dir="ltr">RUN</code> command is permitted in the stored script. The following commands are not permitted within stored scripts: <code dir="ltr"><a href="rcmsynta2012.htm#i85731">RUN</a></code>, <code dir="ltr"><a href="rcmsynta001.htm#BGBFADED">@ (at sign)</a></code>, and <code dir="ltr"><a href="rcmsynta002.htm#i78210">@@ (double at sign)</a></code>.</td>
</tr>
<tr class="cellalignment1920">
<td class="cellalignment1926" id="r6c1-t18" headers="r1c1-t18"><code dir="ltr"><a id="sthref1461"></a><a id="sthref1462"></a>FROM FILE</code> <code dir="ltr">'</code><code dir="ltr"><span class="codeinlineitalic">filename</span></code><code dir="ltr">'</code></td>
<td class="cellalignment1926" headers="r6c1-t18 r1c2-t18">Reads the sequence of commands to define the script from the specified file.
<p>The file should look like the body of a valid stored script. The first line of the file must be a left brace (<code dir="ltr">{</code>) and the last line must contain a right brace (<code dir="ltr">}</code>). The RMAN commands in the file must be valid in a stored script.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1463"></a><a id="sthref1464"></a>Example</p>
<div id="RCMRF90273" class="example">
<p class="titleinexample"><a id="CHDEEAED"></a>Example 3-13 Replacing a Recovery Catalog Script</p>
<p>Assume that you start the RMAN client and connect to database <code dir="ltr">prod</code> as <code dir="ltr">TARGET</code> and then connect to a recovery catalog. You use <code dir="ltr"><a href="rcmsynta014.htm#i1000575">CREATE SCRIPT</a></code> to create a global script named <code dir="ltr">backup_db</code> as follows:</p>
<pre dir="ltr">
CREATE GLOBAL SCRIPT backup_db
COMMENT "back up any database from the recovery catalog, with logs"
{
    BACKUP DATABASE;
}
</pre>
<p>You then use <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">SCRIPT NAMES</code> to list all scripts known to the recovery catalog:</p>
<pre dir="ltr">
RMAN&gt; LIST SCRIPT NAMES;
 
List of Stored Scripts in Recovery Catalog
 
 
    Global Scripts
 
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
       back up any database from the recovery catalog, with logs
</pre>
<p>You then run the following <code dir="ltr">REPLACE SCRIPT</code> command with the intention of editing the <code dir="ltr">backup_db</code> global script:</p>
<pre dir="ltr">
RMAN&gt; REPLACE SCRIPT backup_db { BACKUP DATABASE PLUS ARCHIVELOG; }
 
replaced script backup_db
</pre>
<p>Because you did not specify the <code dir="ltr">GLOBAL</code> keyword, RMAN creates a local script named <code dir="ltr">backup_db</code> in addition to the global script named <code dir="ltr">backup_db</code>. <code dir="ltr"><a href="rcmsynta027.htm#i82460">LIST</a></code> <code dir="ltr">SCRIPT NAMES</code> shows both the global and local script recorded in the recovery catalog:</p>
<pre dir="ltr">
RMAN&gt; LIST SCRIPT NAMES;
 
List of Stored Scripts in Recovery Catalog
 
 
    Scripts of Target Database PROD
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
 
 
    Global Scripts
 
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
       back up any database from the recovery catalog, with logs
</pre>
<p>You can then delete the local script named <code dir="ltr">backup_db</code> with <code dir="ltr"><a href="rcmsynta017.htm#i81559">DELETE SCRIPT</a></code> and replace the global script as follows:</p>
<pre dir="ltr">
RMAN&gt; DELETE SCRIPT backup_db;
 
deleted script: backup_db
 
RMAN&gt; REPLACE GLOBAL SCRIPT backup_db { BACKUP DATABASE PLUS ARCHIVELOG; }
 
replaced global script backup_db
</pre>
<p>The <code dir="ltr">LIST SCRIPT NAMES</code> command now shows that only one script named <code dir="ltr">backup_db</code> exists in the catalog:</p>
<pre dir="ltr">
RMAN&gt; LIST SCRIPT NAMES;

List of Stored Scripts in Recovery Catalog
 
    Global Scripts
 
       Script Name
       Description
       -----------------------------------------------------------------------
       backup_db
</pre>
<p>The <code dir="ltr"><a href="rcmsynta028.htm#i83982">PRINT SCRIPT</a></code> command confirms the changes to the global script:</p>
<pre dir="ltr">
RMAN&gt; PRINT GLOBAL SCRIPT backup_db;
 
printing stored global script: backup_db
 { BACKUP DATABASE PLUS ARCHIVELOG; }
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1919">
<tr>
<td class="cellalignment1926">
<table class="cellalignment1924">
<tr>
<td class="cellalignment1923"><a href="rcmsynta2004.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1923"><a href="rcmsynta2006.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1928">
<table class="cellalignment1922">
<tr>
<td class="cellalignment1923"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1923"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1923"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1923"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1923"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1923"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
