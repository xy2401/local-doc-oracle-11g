<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Upgrading Oracle Data Mining</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 735" />
<meta name="dcterms.created" content="2013-07-05T10:52:18Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Mining Administrator's Guide" />
<meta name="dcterms.identifier" content="E16807-08" />
<meta name="dcterms.isVersionOf" content="DMADM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="schemaobjs.htm" title="Previous" type="text/html" />
<link rel="Next" href="sampleprogs.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e16807.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/16</span> <!-- End Header -->
<div id="DMADM001" class="chapter"><a id="BABCFGGI"></a>
<h1 class="chapter"><span class="secnum">6</span> Upgrading Oracle Data Mining</h1>
<p>This chapter explains how to upgrade or <a id="sthref247"></a>downgrade Oracle Data Mining 11<span class="italic">g</span> Release 2 (11.2). It contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDHHDAE">Data Mining Upgrade Overview</a></p>
</li>
<li>
<p><a href="#CHDFIGCI">Upgrade Using Database Upgrade Assistant</a></p>
</li>
<li>
<p><a href="#CHDGBJDE">Upgrade Using Export/Import</a></p>
</li>
<li>
<p><a href="#CHDBIAJF">Post Upgrade Steps</a></p>
</li>
<li>
<p><a href="#CHDGBEHF">Downgrade Data Mining</a></p>
</li>
</ul>
<a id="CHDHHDAE"></a>
<div id="DMADM137" class="sect1">
<h2 class="sect1">Data Mining Upgrade Overview</h2>
<p><a id="sthref248"></a>Oracle Data Mining <a id="sthref249"></a>upgrade is fully integrated with the Oracle Database upgrade process. Whether you are upgrading from 11.1 release or from 10<span class="italic">g</span> releases, Data Mining models and metadata are upgraded automatically during the upgrade of Oracle Database.</p>
<p>To upgrade a database, you can use Database Upgrade Assistant (DBUA) or you can perform a manual upgrade using export/import utilities.</p>
<div class="infoboxnotealso">
<p class="notep1">See:</p>
<a class="olink UPGRD001" href="../../server.112/e23633/intro.htm#UPGRD001"><span class="italic">Oracle Database Upgrade Guide</span></a> for complete database upgrade instructions</div>
<div id="DMADM231" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref250"></a>
<h3 class="sect2">Data Mining Model Upgrade</h3>
<p>Upgraded models will continue to work as they did in prior releases. New models that you create in the upgraded environment can make use of the new mining functionality introduced in the new release.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Models created by the Oracle Data Mining <a id="sthref251"></a>PL/SQL API can be upgraded from 10.1 to 11<span class="italic">g</span>.
<p>Models created by the Oracle Data Mining <a id="sthref252"></a>Java API <span class="italic">cannot</span> be upgraded from 10.1 to 11<span class="italic">g</span>. The 10.1 version of the Java API was no longer supported in Oracle Data Mining 10.2.</p>
<p>Model upgrade from 9.2 release to 11<span class="italic">g</span> releases is not supported.</p>
</div>
</div>
<!-- class="sect2" -->
<div id="DMADM232" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref253"></a>
<h3 class="sect2">Upgrading from 10<span class="italic">g</span></h3>
<p>In Oracle Data Mining 10<span class="italic">g</span>, Data Mining metadata and PL/SQL packages are stored in the <code>DMSYS</code> schema. In Oracle Data Mining 11<span class="italic">g</span>, <code>DMSYS</code> no longer exists; Data Mining metadata objects are stored in <code>SYS</code>.</p>
<p>During the upgrade from 10<span class="italic">g</span> to 11<span class="italic">g</span>, all Data Mining metadata objects and PL/SQL packages are migrated from <code>DMSYS</code> to <code>SYS</code>. After the upgrade, when you determine that there is no need to perform a downgrade, set the initialization parameter <code>COMPATIBLE</code> to <code>11.2</code> and drop the <code>DMSYS</code> schema and its associated objects from the upgraded database as follows:</p>
<pre>
SQL&gt; CONNECT / AS sysdba;
SQL&gt; DROP USER dmsys CASCADE;
SQL&gt; DELETE FROM sys.exppkgact$ WHERE schema = 'DMSYS';
SQL&gt; SELECT COUNT(*) FROM dba_synonyms WHERE table_owner = 'DMSYS';
</pre>
<p>If the result is non-zero rows, create and run a SQL script as follows:</p>
<pre>
SQL&gt; set head off 
SQL&gt; spool <span class="italic">directory_path</span>/drop_dmsys_synonyms.sql 
SQL&gt; SELECT 'Drop public synonym ' ||'"'||SYNONYM_NAME||'";' 
             FROM DBA_SYNONYMS WHERE TABLE_OWNER = 'DMSYS';
SQL&gt; spool off 
SQL&gt; @<span class="italic">directory_path</span>/drop_dmsys_synonyms.sql
</pre>
<p>Once <code>DMSYS</code> is removed, the <code>SYS.DBA_REGISTRY</code> view will no longer list Oracle Data Mining as a component.</p>
<p>After upgrading to 11<span class="italic">g</span>, you can no longer switch to the Data Mining <a id="sthref254"></a>Scoring Engine (<code>DMSE</code>). The Scoring Engine does not exist in 11<span class="italic">g</span>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="whatsnew_admin.htm#CDCBEDBA">"Oracle Database 11g Release 1 New Features in Oracle Data Mining"</a></div>
</div>
<!-- class="sect2" -->
<div id="DMADM233" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref255"></a>
<h3 class="sect2">Upgrading from 11.1</h3>
<p>If you upgrade from 11.1 release to 11.2, check for the existence of <code>DMSYS</code>. If the database was previously upgraded from 10<span class="italic">g</span>, <code>DMSYS</code> may still be present. If <code>DMSYS</code> is still present in the database, you should remove it.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDFIGCI"></a>
<div id="DMADM234" class="sect1">
<h2 class="sect1">Upgrade Using Database Upgrade Assistant</h2>
<p><a id="sthref256"></a>Oracle Database Upgrade Assistant provides a graphical user interface that guides you interactively through the upgrade process. To start the Upgrade Assistant:</p>
<ol>
<li>
<p>Go to the Windows <span class="bold">Start</span> menu and choose the Oracle home directory.</p>
</li>
<li>
<p>Choose the <span class="bold">Configuration and Migration Tools</span> menu.</p>
</li>
<li>
<p>Launch the <span class="bold"><a id="sthref257"></a>Upgrade Assistant</span>.</p>
</li>
</ol>
<p>On Linux platforms, run the <code>DBUA</code> utility to upgrade Oracle Database.</p>
</div>
<!-- class="sect1" -->
<a id="CHDGBJDE"></a>
<div id="DMADM139" class="sect1">
<h2 class="sect1">Upgrade Using Export/Import</h2>
<p>If <a id="sthref258"></a>you wish, <a id="sthref259"></a>you can use a less automated approach to upgrading Oracle Data Mining. You can export the models created in a previous version of Oracle Database and import them into a new 11<span class="italic">g</span> Release 2 (11.2) database.</p>
<div id="DMADM235" class="sect2"><a id="sthref260"></a>
<h3 class="sect2">Export/Import Release 11.1 Data Mining Models</h3>
<p>To export models from an 11.1 database to a dump file and import them into an 11.2 database, follow the instructions in <a href="schemaobjs.htm#BABHEGAB">"Exporting and Importing Mining Models"</a>.</p>
</div>
<!-- class="sect2" -->
<div id="DMADM236" class="sect2"><a id="sthref261"></a>
<h3 class="sect2">Export/Import Release 10<span class="italic">g</span> Data Mining Models</h3>
<p>To export models from a 10<span class="italic">g</span> database to a dump file, follow the instructions in <a href="schemaobjs.htm#BABHEGAB">"Exporting and Importing Mining Models"</a>. If any models were created by the 10.1 Java API, do not include them in the export; they are not supported in 11<span class="italic">g</span>.</p>
<p>Before importing the models from the dump file, run the <code><a id="sthref262"></a>DMEIDMSYS</code> script to create the <code>DMSYS</code> schema in the 11<span class="italic">g</span> database.</p>
<pre>
SQL&gt;CONNECT / as sysdba;
SQL&gt;@<span class="codeinlineitalic">ORACLE_HOME</span>\RDBMS\admin\dmeidmsys.sql
SQL&gt;EXIT;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>TEMP</code> tablespace must already exist in the 11<span class="italic">g</span> database. The <code>DMEIDMSYS</code> script uses the <code>TEMP</code> and <code>SYSAUX</code> tablespaces to create the <code>DMSYS</code> schema.</div>
<p>To import the dump file into the database:</p>
<pre>
%<span class="codeinlineitalic">ORACLE_HOME</span>\bin\impdp system\&lt;<span class="codeinlineitalic">password</span>&gt; 
       dumpfile=&lt;<span class="italic">dumpfile_name</span>&gt; 
       directory=&lt;<span class="italic">directory_name</span>&gt; 
       logfile=&lt;<span class="italic">logfile_name</span>&gt; .....
SQL&gt;CONNECT / as sysdba;
SQL&gt;EXECUTE dmp_sys.upgrade_models('11.0.0');
SQL&gt;ALTER SYSTEM FLUSH SHARED_POOL;
SQL&gt;EXIT;
</pre>
<p>If you shutdown the database before operating on the upgraded mining models, this will also flush the shared pool.</p>
<p>After the import is complete, you should drop the <code><a id="sthref263"></a>DMSYS</code> schema from the database.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBIAJF"></a>
<div id="DMADM237" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Post Upgrade Steps</h2>
<p>After upgrading the database, check the upgrade log file and the <code><a id="sthref264"></a>SYS.DBA_REGISTRY</code> view to ensure that the upgrade process completed successfully. Also check the <code><a id="sthref265"></a>DBA_MINING_MODELS</code> view in the upgraded database. The newly upgraded mining models should be listed in this view.</p>
<p>After you have verified the upgrade and confirmed that there will be no need to downgrade, you should set the initialization parameter <code><a id="sthref266"></a>COMPATIBLE</code> to <code>11.2</code>.</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
In Oracle 11<span class="italic">g</span>, the <code>CREATE MINING MODEL</code> privilege must be granted to Data Mining user accounts. This privilege is required for creating Data Mining models in 11<span class="italic">g</span>. Refer to <a href="security.htm#BGBJIIGB">Chapter 4, "Users and Privileges for Data Mining"</a> for more information.</div>
</div>
<!-- class="sect1" -->
<a id="CHDGBEHF"></a>
<div id="DMADM014" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Downgrade Data Mining</h2>
<p>Before <a id="sthref267"></a><a id="sthref268"></a>downgrading the database back to the previous version, ensure that no 11<span class="italic">g</span> Release 2 (11.2) mining models were created in the upgraded database. Issue the following SQL statement in <code>SYS</code> to verify:</p>
<pre>
SQL&gt;SELECT o.name FROM sys.model$ m, sys.obj$ o 
                  WHERE m.obj#=o.obj# AND m.version=2;
</pre>
<p>If there are any 11<span class="italic">g</span> Release 2 (11.2) mining models in the database, you must manually delete them using the <code><a id="sthref269"></a>DBMS_DATA_MINING.DROP_MODEL</code> routine before downgrading the database. If you do not do this, the database downgrade process will be aborted. See <a class="olink ARPLS65835" href="../../appdev.112/e40758/d_datmin.htm#ARPLS65835"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for the calling syntax of <code>DROP_MODEL</code>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1281">
<tr>
<td class="cellalignment1290">
<table class="cellalignment1286">
<tr>
<td class="cellalignment1285"><a href="schemaobjs.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1285"><a href="sampleprogs.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1292">
<table class="cellalignment1284">
<tr>
<td class="cellalignment1285"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1285"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1285"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1285"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1285"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1285"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
