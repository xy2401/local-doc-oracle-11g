<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Configuring Oracle Database Gateway for ODBC</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 042" />
<meta name="dcterms.created" content="2012-01-23T22:39:29Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide" />
<meta name="dcterms.identifier" content="E12013-07" />
<meta name="dcterms.isVersionOf" content="OTGIS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="installodbc.htm" title="Previous" type="text/html" />
<link rel="Next" href="partdrda.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12013.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">21/35</span> <!-- End Header --><a id="CIHFEGDA"></a><a id="OTGIS110"></a>
<h1 class="chapter"><span class="secnum">11</span> Configuring Oracle Database Gateway for ODBC</h1>
<p>After installing the gateway and the ODBC driver for the non-Oracle system, perform the following tasks to configure Oracle Database Gateway for ODBC:</p>
<ol>
<li>
<p><a href="#CIHEGGIF">Configure the Gateway Initialization Parameter File</a></p>
</li>
<li>
<p><a href="#CIHEGGDC">Configure Oracle Net for the Gateway</a></p>
</li>
<li>
<p><a href="#CIHDGBJE">Configure the Oracle Database for Gateway Access</a></p>
</li>
<li>
<p><a href="#CIHEABIG">Create Database Links</a></p>
</li>
<li>
<p><a href="#CIHECAFD">Encrypt Gateway Initialization Parameter Values</a></p>
</li>
<li>
<p><a href="#CIHDCHED">Configure the Gateway to Access Multiple ODBC Data Sources</a></p>
</li>
</ol>
<a id="CIHEGGIF"></a><a id="OTGIS1045"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">11.1</span> Configure the Gateway Initialization Parameter File</h2>
<p>Perform the following tasks to configure the gateway initialization file:</p>
<ol>
<li>
<p><a href="#CIHGJFIG">Create the Initialization Parameter File</a></p>
</li>
<li>
<p><a href="#CIHJFDHD">Set the Initialization Parameter Values</a></p>
</li>
</ol>
<a id="CIHGJFIG"></a><a id="OTGIS1046"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">11.1.1</span> Create the Initialization Parameter File<a id="sthref201"></a><a id="sthref202"></a><a id="sthref203"></a></h3>
<p><a id="sthref204"></a><a id="sthref205"></a>You must create an initialization file for your Oracle Database Gateway for ODBC. Oracle supplies a sample initialization file, <code>initdg4odbc.ora</code>. The sample file is stored in the <code>$ORACLE_HOME/hs/admin</code> directory.</p>
<p>To create an initialization file for the ODBC gateway, copy the sample initialization file and rename it to <code>init</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code>, where <code><span class="codeinlineitalic">sid</span></code> is the system identifier (SID) you want to use for the instance of the non-Oracle system to which the gateway connects.</p>
<p>The <a id="sthref206"></a>gateway system identifier <a id="sthref207"></a>(SID) is an alphanumeric character string that identifies a gateway instance. You need one gateway instance, and therefore one gateway SID, for each ODBC source you are accessing.</p>
<p>If you want to access two ODBC sources, you need two gateway SIDs, one for each instance of the gateway. If you have only one ODBC source but want to access it sometimes with one set of gateway parameter settings, and other times with different gateway parameter settings, then you will need multiple gateway SIDs for the single ODBC source. The SID is used as part of the file name for the initialization parameter file.</p>
</div>
<!-- class="sect2" -->
<a id="CIHJFDHD"></a><a id="OTGIS1047"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">11.1.2</span> Set the Initialization Parameter Values</h3>
<p>After the initialization file has been created, you must set the initialization parameter values. A number of initialization parameters can be used to modify the gateway behavior. You must set the <code>HS_FDS_CONNECT_INFO and</code> <code>the HS_FDS_SHAREABLE_NAME</code> initialization parameters. Other initialization parameters have defaults or are optional. You can use the default values and omit the optional parameters, or you can specify the parameters with values tailored for your installation. Refer to <a href="app_initparam.htm#g636253">Appendix C, "Initialization Parameters"</a> for the complete list of initialization parameters that can be set. Changes made to the initialization parameters only take effect in the next gateway session.</p>
<p>The <code><a id="sthref208"></a>HS_FDS_CONNECT_INFO</code> initialization parameter specifies the information required for connecting to the non-Oracle system. Set the <code>HS_FDS_CONNECT_INFO</code> as follows:</p>
<pre>
HS_FDS_CONNECT_INFO=<span class="italic">dsn_value</span>
</pre>
<p>where <span class="italic">dsn_value</span> is the data source name configured in the <code>odbc.ini</code> file</p>
<p>The <code>HS_FDS_SHAREABLE_NAME</code> initialization parameter specifies the full path of the ODBC driver manager. Set the <code>HS_FDS_SHAREABLE_NAME</code> as follows:</p>
<pre>
HS_FDS_SHAREABLE_NAME=<span class="italic">full_path_of_odbc_driver</span>
</pre>
<p>where <code>full_path_of_odbc_driver</code> is the full path to the ODBC driver manager</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before deciding whether to accept the default values or to change them, see <a href="app_initparam.htm#g636253">Appendix C, "Initialization Parameters"</a> for detailed information about all the initialization parameters.</div>
<a id="OTGIS1048"></a>
<div class="sect3"><a id="sthref209"></a>
<h4 class="sect3"><span class="secnum">11.1.2.1</span> Example: Setting Initialization Parameter Values</h4>
<p>The following is an example of an <code>odbc.ini</code> file that uses DataDirect Technologies SQLServer ODBC driver. The ODBC driver is installed in <code>$ODBCHOME</code>, which is the <code>/opt/odbc520</code> directory.</p>
<pre>
[ODBC Data Sources]
SQLServerWP=DataDirect 5.20 SQL Server Wire Protocol

[SQLServerWP]
Driver=/opt/odbc520/lib/ivmsss18.so
Description=DataDirect 5.20 SQL Server Wire Protocol
Database=oratst
LogonID=TKHOUSER
Password=TKHOUSER
Address=sqlserver-pc,1433
QuotedId=Yes
AnsiNPW=No

[ODBC]
Trace=0
TraceFile=/opt/odbc520/odbctrace.out
TraceDll=/opt/odbc520/lib/odbctrac.so
InstallDir=/opt/odb520
ConversionTableLocation=/opt/odbc520/tables
UseCursorLib=0
</pre>
<p>To configure the Gateway for ODBC to use this driver, the following lines are required in <code>init</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code>:</p>
<pre>
HS_FDS_CONNECT_INFO=SQLServerWP
HS_FDS_SHAREABLE_NAME=/opt/odbc520/lib/libodbc.so
set ODBCINI=/opt/odbc/odbc.ini
</pre>
<p>If the ODBC driver you are using requires you to set some environment variables then you can either set them in the initizlization file or in the environment.</p>
<p>The <code>HS_FDS_CONNECT_INFO</code> initialization parameter value must match the ODBC data source name in the <code>odbc.ini</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the ODBC driver supports Quoted Identifiers or Delimited Identifiers it should be turned on.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHEGGDC"></a><a id="OTGIS1049"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">11.2</span> Configure Oracle Net for the Gateway<a id="sthref210"></a></h2>
<p>The gateway requires Oracle Net to communicate with the Oracle database. After configuring the gateway, perform the following tasks to configure Oracle Net to work with the gateway:</p>
<ol>
<li>
<p><a href="#CIHJJFCH">Configure Oracle Net Listener for the Gateway</a></p>
</li>
<li>
<p><a href="#CIHHEFEI">Stop and Start the Oracle Net Listener for the Gateway</a></p>
</li>
</ol>
<a id="CIHJJFCH"></a><a id="OTGIS1050"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">11.2.1</span> Configure Oracle Net Listener for the Gateway</h3>
<p>The Oracle Net Listener listens for incoming requests from the Oracle database. For the Oracle Net Listener to listen for the gateway, information about the gateway must be added to the Oracle Net Listener configuration file, <code><a id="sthref211"></a>listener.ora</code>. This file by default is located in <code>$ORACLE_HOME</code><code>/network/admin</code>, where <code>$ORACLE_HOME</code> is the directory under which the gateway is installed.</p>
<p>The following entries must be added to the <code>listener.ora</code> file:</p>
<ul>
<li>
<p>A list of Oracle Net addresses on which the Oracle Net Listener listens</p>
</li>
<li>
<p>The executable name of the gateway that the Oracle Net Listener starts in response to incoming connection requests</p>
</li>
</ul>
<p>A sample of the <code>listener.ora</code> entry (<code>listener.ora.sample</code>) is available in the <code>$ORACLE_HOME/hs/admin</code> directory where <code>$</code><code>ORACLE_HOME</code> is the directory under which the gateway is installed.</p>
<a id="CIHCJECI"></a><a id="OTGIS1051"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">11.2.1.1</span> Syntax of listener.ora File Entries</h4>
<p>The Oracle database communicates with the gateway using Oracle Net and any supported protocol adapters. The following is the syntax of the address on which the Oracle Net Listener listens using the TCP/IP protocol adapter:</p>
<pre>
LISTENER=
        (ADDRESS= 
          (PROTOCOL=TCP)
          (HOST=<span class="italic">host_name</span>)
          (PORT=<span class="italic">port_number</span>))
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment312" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment303">
<th class="cellalignment313" id="r1c1-t4">Variable</th>
<th class="cellalignment313" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment303">
<td class="cellalignment309" id="r2c1-t4" headers="r1c1-t4"><code><span class="codeinlineitalic">host_name</span></code></td>
<td class="cellalignment309" headers="r2c1-t4 r1c2-t4">is the name of the machine on which the gateway is installed. IPv6 format is supported with this release. Refer to <a class="olink NETRF" href="../../network.112/e10835/toc.htm"><span class="italic">Oracle Database Net Services Reference</span></a> for detail.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r3c1-t4" headers="r1c1-t4"><code><span class="codeinlineitalic">port_number</span></code></td>
<td class="cellalignment309" headers="r3c1-t4 r1c2-t4">specifies the port number used by the Oracle Net Listener. If you have other listeners running on the same machine, then the value of <span class="italic">port_number</span> must be different from the other listeners' port numbers.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>To direct the Oracle Net Listener to start the gateway in response to incoming connection requests, add an entry to the <code><a id="sthref212"></a>listener.ora</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must use the same SID value in the <code>tnsnames.ora</code> file and the <code>listener.ora</code> file.</div>
<p>For Linux:</p>
<pre>
SID_LIST_LISTENER=
   (SID_LIST=
      (SID_DESC= 
         (SID_NAME=<span class="italic">gateway_sid</span>)
         (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
         (PROGRAM=dg4odbc)
         (ENVS=LD_LIBRARY_PATH=<span class="italic">odbc_library_dir</span>:<span class="italic">oracle_home_directory</span>/lib)
      )
   )
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment312" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment303">
<th class="cellalignment313" id="r1c1-t6">Variable</th>
<th class="cellalignment313" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment303">
<td class="cellalignment309" id="r2c1-t6" headers="r1c1-t6"><code><span class="codeinlineitalic">gateway_sid</span></code></td>
<td class="cellalignment309" headers="r2c1-t6 r1c2-t6">specifies the SID of the gateway and matches the gateway SID specified in the connect descriptor entry in the <code>tnsnames.ora</code> file.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r3c1-t6" headers="r1c1-t6"><code><span class="codeinlineitalic">oracle_home_directory</span></code></td>
<td class="cellalignment309" headers="r3c1-t6 r1c2-t6">specifies the Oracle home directory where the gateway resides.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r4c1-t6" headers="r1c1-t6"><code><span class="codeinlineitalic">odbc_library_dir</span></code></td>
<td class="cellalignment309" headers="r4c1-t6 r1c2-t6">specifies the ODBC driver library path</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r5c1-t6" headers="r1c1-t6"><code>dg4odbc</code></td>
<td class="cellalignment309" headers="r5c1-t6 r1c2-t6">specifies the executable name of the Oracle Database Gateway for ODBC.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>If you already have an existing Oracle Net Listener, then add the following syntax to <code>SID_LIST</code> in the existing <code>listener.ora</code> file:</p>
<p>For Linux:</p>
<pre>
SID_LIST_LISTENER=
(SID_LIST= 
   (SID_DESC=.
     .
   )
   (SID_DESC=.
     .
   )
   (SID_DESC=
      (SID_NAME=<span class="italic">gateway_sid</span>)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4odbc)
(ENVS=LD_LIBRARY_PATH=<span class="italic">odbc_library_dir</span>:<span class="codeinlineitalic">oracle_home_directory</span>/lib)
   )
)
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Net Administrator's Guide</span> for information about changing the <code>listener.ora</code> file.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHHEFEI"></a><a id="OTGIS1052"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">11.2.2</span> Stop and Start the Oracle Net Listener for the Gateway</h3>
<p>You must stop and restart the <a id="sthref213"></a>Oracle Net Listener to initiate the new settings, as follows:</p>
<ol>
<li>
<p>Set the <code>PATH</code> environment variable to <code>$ORACLE_HOME/bin</code> where <code>$ORACLE_HOME</code> is the directory in which the gateway is installed.</p>
<p>For example on the Linux platform, if you have the Bourne or Korn Shell, enter the following:</p>
<pre>
$ PATH=$ORACLE_HOME/bin:$PATH;export PATH
$ LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH
</pre>
<p>If you have the C Shell, enter the following:</p>
<pre>
$ setenv PATH $ORACLE_HOME/bin:$PATH
$ setenv LD_LIBRARY_PATH $ORACLE_HOME/lib:$LD_LIBRARY_PATH
</pre>
<p><a href="#CIHHADFG">Table 11-1</a> specifies which parameter value to use for the different platforms:</p>
<div class="tblformal">
<p class="titleintable"><a id="OTGIS1228"></a><a id="sthref214"></a><a id="CIHHADFG"></a>Table 11-1 Parameter Values for UNIX Based Platforms</p>
<table class="cellalignment314" title="Parameter Values for UNIX Based Platforms" summary="summary" dir="ltr">
<thead>
<tr class="cellalignment303">
<th class="cellalignment313" id="r1c1-t8">Platform</th>
<th class="cellalignment313" id="r1c2-t8">Parameter Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment303">
<td class="cellalignment309" id="r2c1-t8" headers="r1c1-t8">
<p>Solaris (SPARC) 64 bit</p>
</td>
<td class="cellalignment309" headers="r2c1-t8 r1c2-t8">
<p><code>LD_LIBRARY_PATH_64=$ORACLE_HOME/lib</code></p>
</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r3c1-t8" headers="r1c1-t8">
<p>HP-UX Itanium</p>
</td>
<td class="cellalignment309" headers="r3c1-t8 r1c2-t8">
<p><code>LD_LIBRARY_PATH=$ORACLE_HOME/lib</code></p>
</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r4c1-t8" headers="r1c1-t8">
<p>Linux x86, and Linux x86 64 bit</p>
</td>
<td class="cellalignment309" headers="r4c1-t8 r1c2-t8">
<p><code>LD_LIBRARY_PATH=$ORACLE_HOME/lib</code></p>
</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r5c1-t8" headers="r1c1-t8">
<p>AIX</p>
</td>
<td class="cellalignment309" headers="r5c1-t8 r1c2-t8">
<p><code>LIBPATH=$ORACLE_HOME/lib</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></li>
<li>
<p>If the listener is already running, use the <code>lsnrctl</code> command to stop the listener and then start it with the new settings, as follows:</p>
<pre>
$ lsnrctl stop
$ lsnrctl start
</pre></li>
<li>
<p>Check the status of the listener with the new settings, as follows:</p>
<pre>
$ lsnrctl status
</pre>
<p>The following is a partial output from a <code>lsnrctl</code> status check. In this example <code>dg4odbc</code> is the SID.</p>
</li>
</ol>
<pre>
.
.
.
Services Summary...
Service "dg4odbc" has 1 instance(s).
  Instance "dg4odbc", status UNKNOWN, has 1 handler(s) for this service...
The command completed successfully
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDGBJE"></a><a id="OTGIS1053"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">11.3</span> Configure the Oracle Database for Gateway Access</h2>
<p>Before you use the gateway to access an ODBC data source you must configure the Oracle database to enable communication with the gateway over Oracle Net.</p>
<p>To configure the Oracle database you must add connect descriptors to the <code>tnsnames.ora</code> file. By default, this file is in <code>$ORACLE_HOME/network/admin</code>, where <code>$ORACLE_HOME</code> is the directory in which the Oracle database is installed. You cannot use the Oracle Net Assistant or the Oracle Net Easy Config tools to configure the <code>tnsnames.ora</code> file. You must edit the file manually.</p>
<p>A sample of the <code>tnsmanes.ora</code> entry (<code>tnsnames.ora.sample</code>) is available in the <code>$ORACLE_HOME/dg4odbc/admin</code> directory where <code>$</code><code>ORACLE_HOME</code> is the directory under which the gateway is installed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about editing the <code>tnsnames.ora</code> file.</div>
<a id="OTGIS1054"></a>
<div class="sect2"><a id="sthref215"></a>
<h3 class="sect2"><span class="secnum">11.3.1</span> Configuring tnsnames.ora</h3>
<p>Edit the <code>tnsnames.ora</code> file to add a connect descriptor for the gateway. The following is the syntax of the Oracle Net entry using the TCP/IP protocol:</p>
<pre>
<span class="italic">connect_descriptor</span>=
   (DESCRIPTION=
      (ADDRESS=
         (PROTOCOL=TCP)
         (HOST=<span class="italic">host_name</span>)
         (PORT=<span class="italic">port_number</span>)
      )
      (CONNECT_DATA=
         (SID=<span class="italic">gateway_sid</span>))
      (HS=OK))
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment312" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment303">
<th class="cellalignment313" id="r1c1-t10">Variable</th>
<th class="cellalignment313" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment303">
<td class="cellalignment309" id="r2c1-t10" headers="r1c1-t10"><code><span class="codeinlineitalic">connect_descriptor</span></code></td>
<td class="cellalignment309" headers="r2c1-t10 r1c2-t10">is the description of the object to connect to as specified when creating the database link, such as <code>dg4odbc</code>.
<p>Check the sqlnet.ora file for the following parameter setting:</p>
<p><code>names.directory_path</code> = <code>(TNSNAMES)</code></p>
<p>Note: The <code>sqlnet.ora</code> file is typically stored in <code>$ORACLE_HOME</code><code>/network/admin</code>.</p>
</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r3c1-t10" headers="r1c1-t10"><code>TCP</code></td>
<td class="cellalignment309" headers="r3c1-t10 r1c2-t10">is the TCP protocol used for TCP/IP connections.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r4c1-t10" headers="r1c1-t10"><code><span class="codeinlineitalic">host_name</span></code></td>
<td class="cellalignment309" headers="r4c1-t10 r1c2-t10">specifies the machine where the gateway is running.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r5c1-t10" headers="r1c1-t10"><code><span class="codeinlineitalic">port_number</span></code></td>
<td class="cellalignment309" headers="r5c1-t10 r1c2-t10">matches the port number used by the Oracle Net Listener that is listening for the gateway. The Oracle Net Listener's port number can be found in the <code>listener.ora</code> file used by the Oracle Net Listener. See <a href="#CIHCJECI">"Syntax of listener.ora File Entries"</a>.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r6c1-t10" headers="r1c1-t10"><code><span class="codeinlineitalic">gateway_sid</span></code></td>
<td class="cellalignment309" headers="r6c1-t10 r1c2-t10">specifies the SID of the gateway and matches the SID specified in the <code>listener.ora</code> file of the Oracle Net Listener that is listening for the gateway. See <a href="#CIHJJFCH">"Configure Oracle Net Listener for the Gateway"</a> for more information.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r7c1-t10" headers="r1c1-t10"><code>(HS=OK)</code></td>
<td class="cellalignment309" headers="r7c1-t10 r1c2-t10">specifies that this connect descriptor connects to a non-Oracle system.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref216"></a>
<h3 class="sect2"><span class="secnum">11.3.2</span> Configuring <a id="sthref217"></a><a id="sthref218"></a><a id="sthref219"></a>tnsnames.ora for Multiple Listeners</h3>
<p>To ensure higher availability, you can specify multiple <a id="sthref220"></a>listeners within the connect de<a id="sthref221"></a>scriptor.</p>
<pre>
 <a id="sthref222"></a><span class="italic">connect_descriptor</span>=
    (DESCRIPTION=
       (ADDRESS=
          (PROTOCOL=TCP)
          (HOST=<span class="italic">host_name_1</span>)
          (PORT=<span class="italic">port_number_1</span>)
       )
       (ADDRESS=
          (PROTOCOL=TCP)
          (HOST=<span class="italic">host_name_2</span>)
          (PORT=<span class="italic">port_number_2</span>)
       )
       (CONNECT_DATA=
          (SID=<span class="italic">gateway_sid</span>))
       (HS=OK))
</pre>
<p>This indicates that, if the listener for <code><span class="codeinlineitalic">host_name_1</span></code> and <code><span class="codeinlineitalic">port_number_1</span></code> is not available, then the second listener for <code><span class="codeinlineitalic">host_name_2</span></code> and <code><span class="codeinlineitalic">port_number_2</span></code> will take over.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Administrator's Guide</span> for information about editing the <code>tnsnames.ora</code> file.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHEABIG"></a><a id="OTGIS1055"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">11.4</span> Create Database Links<a id="sthref223"></a></h2>
<p>Any Oracle client connected to the Oracle database can access an ODBC data source through the gateway. The Oracle client and the Oracle database can reside on different machines. The gateway accepts connections only from the Oracle database.</p>
<p>A connection to the gateway is established through a database link when it is first used in an Oracle session. In this context, a connection refers to the connection between the Oracle database and the gateway. The connection remains established until the Oracle session ends. Another session or user can access the same database link and get a distinct connection to the gateway and ODBC data source.</p>
<p>Database links are active for the duration of a gateway session. If you want to close a database link during a session, you can do so with the <code>ALTER SESSION</code> statement.</p>
<p>To access the ODBC data source, you must create a database link. A public database link is the most common of database links.</p>
<pre>
SQL&gt; CREATE PUBLIC DATABASE LINK <span class="italic">dblink</span> CONNECT TO
2  "<span class="italic">user"</span> IDENTIFIED BY <span class="italic">"password"</span> USING <span class="italic">'tns_name_entry</span>';
</pre>
<p>Where:</p>
<div class="inftblinformal">
<table class="cellalignment312" title="variable definition" summary="variable definition" dir="ltr">
<thead>
<tr class="cellalignment303">
<th class="cellalignment313" id="r1c1-t12">Variable</th>
<th class="cellalignment313" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment303">
<td class="cellalignment309" id="r2c1-t12" headers="r1c1-t12"><code><span class="codeinlineitalic">dblink</span></code></td>
<td class="cellalignment309" headers="r2c1-t12 r1c2-t12">is the complete database link name.</td>
</tr>
<tr class="cellalignment303">
<td class="cellalignment309" id="r3c1-t12" headers="r1c1-t12"><code><span class="codeinlineitalic">tns_name_entry</span></code></td>
<td class="cellalignment309" headers="r3c1-t12 r1c2-t12">specifies the Oracle Net connect descriptor specified in the <code>tnsnames.ora</code> file that identifies the gateway</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>After the database link is created you can verify the connection to the ODBC data source, as follows:</p>
<pre>
SQL&gt; SELECT * FROM DUAL@dblink;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> and <a class="olink HETER" href="../../server.112/e11050/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a> for more information about using database links.</div>
</div>
<!-- class="sect1" -->
<a id="CIHECAFD"></a><a id="OTGIS1056"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">11.5</span> Encrypt Gateway Initialization Parameter Values</h2>
<p>The gateway uses user IDs and passwords to access the information in the remote database. Some user IDs and passwords must be defined in the gateway initialization file to handle functions such as resource recovery. In the current security conscious environment, having plain-text passwords that are accessible in the initialization file is deemed insecure. The <code>dg4pwd</code> encryption utility has been added as part of Heterogeneous Services to help make this more secure. This utility is accessible by this gateway. The initialization parameters that contain sensitive values can be stored in an encrypted form.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink HETER" href="../../server.112/e11050/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a> for more information about using this utility.</div>
</div>
<!-- class="sect1" -->
<a id="CIHDCHED"></a><a id="OTGIS1057"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">11.6</span> Configure the Gateway to Access Multiple ODBC Data Sources</h2>
<p>The tasks for configuring the gateway to access multiple ODBC data sources are similar to the tasks for configuring the gateway for a single data source. The configuration example assumes the following:</p>
<ul>
<li>
<p>The gateway is installed and configured with the SID of <code>dg4odbc</code>.</p>
</li>
<li>
<p>The gateway is configured to access one ODBC data source named <code>dsn1</code>.</p>
</li>
<li>
<p>Two ODBC data sources named dsn2 and dsn3 where dsn2 and dsn3 are the data source names configured in the odbc.ini file, are being added.</p>
</li>
</ul>
<a id="OTGIS1058"></a>
<div class="sect2"><a id="sthref224"></a>
<h3 class="sect2"><span class="secnum">11.6.1</span> Multiple ODBC Data Sources Example: Configuring the Gateway</h3>
<p class="subhead2"><a id="OTGIS1229"></a>Choose One System ID for Each ODBC Data Source</p>
<p>A separate instance of the gateway is needed for each ODBC data source. Each instance needs its own gateway System ID (SID). For this example, the gateway SIDs are chosen for the instances that access the ODBC data source:</p>
<ul>
<li>
<p><code>dg4odbc2</code> for the gateway accessing data source <code>dsn2</code>.</p>
</li>
<li>
<p><code>dg4odbc3</code> for the gateway accessing data source <code>dsn3</code>.</p>
</li>
</ul>
<p class="subhead2"><a id="OTGIS1230"></a>Create Two Initialization Parameter Files</p>
<p>Create an initialization parameter file for each instance of the gateway by copying the original initialization parameter file <code>$ORACLE_HOME</code><code>/hs/admin/initdg4odbc.ora</code>, twice, naming one with the gateway SID for <code>dsn2</code> and the other with the gateway SID for <code>dsn3</code>:</p>
<pre>
$ cd ORACLE_HOME/hs/admin
$ cp initdg4odbc.ora initdg4odbc2.ora
$ cp initdg4odbc.ora initdg4odbc3.ora
</pre>
<p>Change the value of the <code>HS_FDS_CONNECT_INFO</code> parameter in the new files, as follows:</p>
<p>For <code>initdg4odbc2.ora</code>, enter the following:</p>
<pre>
HS_FDS_CONNECT_INFO=dsn2
</pre>
<p>For <code>initdg4odbc3.ora</code>, enter the following:</p>
<pre>
HS_FDS_CONNECT_INFO=dsn3
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you have multiple gateway SIDs for the same ODBC data source because you want to use different gateway parameter settings at different times, follow the same procedure. You create several initialization parameter files, each with different SIDs and different parameter settings.</div>
</div>
<!-- class="sect2" -->
<a id="OTGIS1059"></a>
<div class="sect2"><a id="sthref225"></a>
<h3 class="sect2"><span class="secnum">11.6.2</span> Multiple ODBC Data Sources Example: Configuring Oracle Net Listener</h3>
<p class="subhead2"><a id="OTGIS1231"></a>Add Entries to <a id="sthref226"></a>listener.ora</p>
<p>Add two new entries to the Oracle Net Listener configuration file, <code>listener.ora</code>. You must have an entry for each gateway instance, even when multiple gateway instances access the same database.</p>
<p>The following example shows the entry for the original installed gateway first, followed by the new entries.</p>
<pre>
SID_LIST_LISTENER=
(SID_LIST=
   (SID_DESC=
      (SID_NAME=dg4odbc)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4odbc)
(ENVS=LD_LIBRARY_PATH=<span class="italic">odbc_library_dir</span>:<span class="codeinlineitalic">oracle_home_directory</span>/lib)
   )
   (SID_DESC=
      (SID_NAME=dg4odbc2)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4odbc)
(ENVS=LD_LIBRARY_PATH=<span class="italic">odbc_library_dir</span>:<span class="codeinlineitalic">oracle_home_directory</span>/lib)
   )
   (SID_DESC=
      (SID_NAME=dg4odbc3)
      (ORACLE_HOME=<span class="italic">oracle_home_directory</span>)
      (PROGRAM=dg4odbc)
(ENVS=LD_LIBRARY_PATH=<span class="italic">odbc_library_dir</span>:<span class="codeinlineitalic">oracle_home_directory</span>/lib)
   )
)
</pre>
<p>where, <code>oracle_home_directory</code> is the directory where the gateway resides.</p>
</div>
<!-- class="sect2" -->
<a id="OTGIS1060"></a>
<div class="sect2"><a id="sthref227"></a>
<h3 class="sect2"><span class="secnum">11.6.3</span> Multiple ODBC Data Sources Example: Stopping and Starting the Oracle Net Listener</h3>
<p>If the listener is already running, use the <code>lsnrctl</code> command to stop the listener and then start it with the new settings, as follows:</p>
<pre>
$ lsnrctl stop
$ lsnrctl start
</pre></div>
<!-- class="sect2" -->
<a id="OTGIS1061"></a>
<div class="sect2"><a id="sthref228"></a>
<h3 class="sect2"><span class="secnum">11.6.4</span> Multiple ODBC Data Sources Example: Configuring Oracle Database for Gateway Access</h3>
<p>Add two connect descriptor entries to the <code>tnsnames.ora</code> file. You must have an entry for each gateway instance, even if the gateway instances access the same database.</p>
<p>The following example shows the entry for the original installed gateway first, followed by the two entries for the new gateway instances:</p>
<pre>
<span class="italic">old_dsn_using</span>=(DESCRIPTION=
              (ADDRESS=
                (PROTOCOL=TCP)
                (PORT=port_number)
                (HOST=host_name))
                (CONNECT_DATA=
                    (SID=dg4odbc))
               (HS=OK))
<span class="italic">new_dsn2_using</span>=(DESCRIPTION=
              (ADDRESS=
                (PROTOCOL=TCP)
                (PORT=port_number)
                (HOST=host_name))
                (CONNECT_DATA=
                    (SID=dg4odbc2))
                (HS=OK))
<span class="italic">new_dsn3_using</span>=(DESCRIPTION=
              (ADDRESS=
                (PROTOCOL=TCP)
                (PORT=port_number)
                (HOST=host_name))
                (CONNECT_DATA=
                    (SID=dg4odbc3))
                (HS=OK)) 
</pre>
<p>The value for <code>PORT</code> is the TCP/IP port number of the Oracle Net Listener that is listening for the gateway. The number can be found in the <code>listener.ora</code> file used by the Oracle Net Listener. The value for <code>HOST</code> is the name of the machine on which the gateway is running. The name also can be found in the <code>listener.ora</code> file used by the Oracle Net Listener.</p>
</div>
<!-- class="sect2" -->
<a id="OTGIS1062"></a>
<div class="sect2"><a id="sthref229"></a>
<h3 class="sect2"><span class="secnum">11.6.5</span> Multiple ODBC Data Sources Example: Accessing ODBC Data</h3>
<p>Enter the following to create a database link for the <code>dg4odbc2</code> gateway:</p>
<pre>
SQL&gt; CREATE PUBLIC DATABASE LINK ODBC2 CONNECT TO
  2  "<span class="italic">user2"</span> IDENTIFIED BY "<span class="italic">password2</span>" USING 'new_dsn2_using';
</pre>
<p>Enter the following to create a database link for the <code>dg4odbc3</code> gateway:</p>
<pre>
SQL&gt; CREATE PUBLIC DATABASE LINK ODBC3 CONNECT TO
  2  "<span class="italic">user3"</span> IDENTIFIED BY <span class="italic">"password3</span>" USING 'new_dsn3_using';
</pre>
<p>After the database links are created, you can verify the connection to the new ODBC data sources, as in the following:</p>
<pre>
SQL&gt; SELECT * FROM ALL_USERS@ODBC2;
</pre>
<pre>
SQL&gt; SELECT * FROM ALL_USERS@ODBC3;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment302">
<tr>
<td class="cellalignment309">
<table class="cellalignment307">
<tr>
<td class="cellalignment306"><a href="installodbc.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment306"><a href="partdrda.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment311">
<table class="cellalignment305">
<tr>
<td class="cellalignment306"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment306"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment306"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment306"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment306"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment306"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
