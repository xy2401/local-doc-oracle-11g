<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Configuring the DRDA Server</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 042" />
<meta name="dcterms.created" content="2012-01-24T0:43:25Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Gateway Installation and Configuration Guide" />
<meta name="dcterms.identifier" content="E12061-06" />
<meta name="dcterms.isVersionOf" content="OTGIW" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="drda_install.htm" title="Previous" type="text/html" />
<link rel="Next" href="cfg_gtwy.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12061.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">24/35</span> <!-- End Header --><a id="BGBJHBCE"></a><a id="OTGIW130"></a>
<h1 class="chapter"><span class="secnum">13</span> Configuring the DRDA Server</h1>
<p>This chapter describes tasks you must perform to configure the DRDA server. Each supported operating system is addressed separately. Experience with the given operating system and database is required.</p>
<p><a id="sthref293"></a><a id="sthref294"></a><a id="sthref295"></a>The steps for configuring your remote DRDA server apply to the following DRDA servers:</p>
<ul>
<li>
<p>DB2 UDB for z/OS</p>
</li>
<li>
<p>DB2 UDB for iSeries</p>
</li>
<li>
<p>DB2 UDB for Linux, UNIX, and Windows</p>
</li>
</ul>
<p>Configuring a DRDA database to enable access by the gateway requires actions on the DRDA database and on certain components of the host operating system. Although no Oracle software is installed on the host system, access to, and some knowledge of the host system and DRDA database are required during the configuration. Refer to the vendor documentation for complete information about your host system and DRDA database.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CIAEGDFC">"Configuring the DRDA Server for DB2 UDB for z/OS"</a></p>
</li>
<li>
<p><a href="#i1006773">"Configuring the DRDA Server for DB2 UDB for iSeries"</a></p>
</li>
<li>
<p><a href="#i1006836">"Configuring the DRDA Server for DB2 UDB for Linux, UNIX, and Windows"</a></p>
</li>
</ul>
<a id="CIAEGDFC"></a><a id="OTGIW1051"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">13.1</span> Configuring the DRDA Server for DB2 UDB for z/OS <a id="sthref296"></a> <a id="sthref297"></a> <a id="sthref298"></a></h2>
<p>Perform the following tasks to configure the DRDA server with DB2 on a z/OS system:</p>
<ol>
<li>
<p>Define the user ID that owns the package</p>
<p><a id="sthref299"></a><a id="sthref300"></a>During first gateway usage for a particular DRDA server, an Oracle supplied package will be automatically bound to the DRDA server. The user ID and password that are used (either implied as the current Oracle user or explicitly defined in the <code>CREATE DATABASE LINK</code> command) must have proper authority on the DRDA Server to create the package. The followings are minimum authorities needed by this user:</p>
<ul>
<li>
<p>Package <a id="sthref301"></a>privileges of <a id="sthref302"></a><code>BIND</code><a id="sthref303"></a>, <a id="sthref304"></a><code>COPY</code><a id="sthref305"></a>, and <a id="sthref306"></a><code>EXECUTE</code><a id="sthref307"></a>, for example:</p>
<pre>
GRANT BIND    ON PACKAGE oraclegtw.* TO <span class="italic">userid</span>
GRANT COPY    ON PACKAGE oraclegtw.* TO <span class="italic">userid</span>
GRANT EXECUTE ON PACKAGE oraclegtw.* TO PUBLIC
</pre></li>
<li>
<p>Collection <a id="sthref308"></a>privilege of <a id="sthref309"></a><code>CREATE</code>&nbsp;<code>IN</code><a id="sthref310"></a>, for example:</p>
<pre>
GRANT CREATE IN COLLECTION oraclegtw TO USER <span class="italic">userid</span>
</pre></li>
<li>
<p>System <a id="sthref311"></a>privileges of <a id="sthref312"></a><code>BINDADD</code><a id="sthref313"></a> and <a id="sthref314"></a><code>BINDAGENT</code><a id="sthref315"></a>, for example:</p>
<pre>
GRANT BINDADD   TO USER <span class="italic">userid</span>
GRANT BINDAGENT TO USER <span class="italic">userid</span>
</pre></li>
<li>
<p>Database <a id="sthref316"></a>privilege of <a id="sthref317"></a><code>CREATETAB</code><a id="sthref318"></a>, for example:</p>
<pre>
GRANT CREATETAB ON DATABASE <span class="italic">database</span> TO USER <span class="italic">userid</span>
</pre></li>
</ul>
<p>Choose a user&nbsp;ID that will own the package and the <code>HS_TRANSACTION_LOG</code> table. Ensure that this user&nbsp;ID is defined to both DB2 and OS/390&nbsp;(MVS).</p>
</li>
<li>
<p>Define the recovery user ID</p>
<p>During gateway configuration, the <a id="sthref319"></a>recovery user&nbsp;ID and password are specified in the gateway initialization file using the <a id="sthref320"></a><code>HS_FDS_RECOVERY_ACCOUNT</code> and <a id="sthref321"></a><code>HS_FDS_RECOVERY_PWD</code> <a id="sthref322"></a>parameters. If a distributed transaction fails, then the recovery process connects to the <a id="sthref323"></a>remote database using the user&nbsp;ID and password that are defined in these parameters. This user&nbsp;ID must have execute privileges on the package and must be defined in the DRDA database. If the user&nbsp;ID is not specified in <a id="sthref324"></a><code>HS_FDS_RECOVERY_ACCOUNT</code>, then the gateway attempts to connect to a user&nbsp;ID of <a id="sthref325"></a><code>RECOVER</code> when a distributed transaction is in doubt.</p>
<p>Determine the user&nbsp;ID and password that you will use for recovery.</p>
</li>
<li>
<p>Determine DRDA location name for DB2 instance</p>
<p>The DRDA location name is required as a gateway parameter. To determine the location name, run the following SQL query from a DB2 SPUFI session:</p>
<pre>
SELECT CURRENT SERVER FROM <span class="italic">any_table</span> 
</pre>
<p>where <code><span class="codeinlineitalic">any_table</span></code> is a valid table with one or more rows.</p>
<p>If the value returned by this query is blank or null, then the DRDA location name has not been established. Contact the system administrator to arrange to set a location name for the instance.</p>
</li>
<li>
<p>Configure DB2 Distributed Data Facility for Gateway</p>
<p><a id="sthref326"></a>DB2 Distributed Data Facility (DDF) is the component of DB2 that manages all distributed database operations, both DRDA and non-DRDA.</p>
<p>If your site uses DB2 <a id="sthref327"></a>distributed operations, then DDF is probably operational on the DB2 instance that you plan to access through the gateway. If DDF is not operational, then you must configure it and start it as described in the appropriate DB2 documentation.</p>
<p>Even if DDF is operational on the DB2 instance, it might be necessary to make changes to the DDF <a id="sthref328"></a>Communication Database (CDB) tables to specify the authorization conduct of DRDA sessions from the gateway. Properly authorized users can do this with a utility such as the <a id="sthref329"></a>DB2&nbsp;SPUFI utility. If you make changes to CDB tables, then you must stop and restart DDF for the changes to take effect. Refer to <a href="security.htm#g7230">Chapter 15, "Security Considerations"</a>, for additional CDB tables and security information.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1006773"></a><a id="OTGIW1052"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">13.2</span> Configuring the DRDA Server for DB2 UDB for iSeries<a id="sthref330"></a> <a id="sthref331"></a> <a id="sthref332"></a></h2>
<p>Experience with DB2 UDB for iSeries and AS/400 is required to perform the following steps:</p>
<ol>
<li>
<p>Define the user ID that owns the package</p>
<p>During gateway configuration, you will need to run the <a id="sthref333"></a>Bind Package Stored Procedure to bind the gateway package on the DRDA Server. To properly <a id="sthref334"></a>bind the package, the user&nbsp;ID and password that are used when the procedure is run (either implied as the current Oracle user or explicitly defined in the <code>CREATE</code> <code>DATABASE</code> <code>LINK</code> command) must have proper authority on the DRDA Server to create the package. This user&nbsp;ID should be used to create and own the <a id="sthref335"></a><code>HS_TRANSACTION_LOG</code> <a id="sthref336"></a> table. The user&nbsp;ID that is used to <a id="sthref337"></a>bind or rebind the DRDA package must have the following privileges on the DRDA Server:</p>
<ul>
<li>
<p>Use authority on the <code>CRTSQLPKG</code> command</p>
</li>
<li>
<p>Change authority on the library in which the package will be created</p>
</li>
</ul>
<p>Choose a user&nbsp;ID now that will own the package and the <code>HS_TRANSACTION_LOG</code> table. Ensure that this user ID is defined in <a id="sthref338"></a>DB2 UDB for iSeries and <a id="sthref339"></a>AS/400.</p>
</li>
<li>
<p>Define the recovery user ID</p>
<p>During gateway configuration, the <a id="sthref340"></a>recovery user&nbsp;ID and password are specified in the gateway initialization file using the <a id="sthref341"></a><code>HS_FDS_RECOVERY_ACCOUNT</code><a id="sthref342"></a> and <a id="sthref343"></a><code>HS_FDS_RECOVERY_PWD</code><a id="sthref344"></a> parameters. If a distributed transaction fails, then the recovery process connects to the <a id="sthref345"></a>remote database using the user&nbsp;ID and password that are defined in these parameters. This user&nbsp;ID must have execute privileges on the package and must be defined to the DRDA database. If the user&nbsp;ID is not specified in <a id="sthref346"></a><code>HS_FDS_RECOVERY_ACCOUNT</code>, then the gateway attempts to connect to a user&nbsp;ID of <a id="sthref347"></a><code>RECOVER</code> when a distributed transaction is in doubt.</p>
<p>Determine the user&nbsp;ID and password that you will use for recovery.</p>
</li>
<li>
<p>Determine DRDA location name for DB2 UDB for iSeries instance</p>
<p>The DRDA location name is required as a gateway parameter. To determine the location name, run the following SQL query from a STRSQL session. If SQL is unavailable on the system, then use the AS/400 <a id="sthref348"></a>command <a id="sthref349"></a><code>DSPRDBDIRE</code> to identify your <code>LOCAL</code> DRDA Server.</p>
<pre>
SELECT CURRENT SERVER FROM <span class="italic">any_table</span>
</pre>
<p>where <code><span class="codeinlineitalic">any_table</span></code> is a valid table with one or more rows.</p>
<p>If the value returned by this query is blank or null, then the DRDA location name has not been established. Contact the system administrator to arrange to set a location name for the instance.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1006836"></a><a id="OTGIW1053"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">13.3</span> Configuring the DRDA Server for DB2 UDB for Linux, UNIX, and Windows<a id="sthref350"></a> <a id="sthref351"></a> <a id="sthref352"></a></h2>
<p>Experience with <a id="sthref353"></a>DB2/UDB, configuring the communication subsystem of DB2 UDB for Linux, UNIX, and Windows, and the host System Administration tools is required to perform the following steps.</p>
<ol>
<li>
<p>Define the user ID that owns the package</p>
<p>During first gateway usage for a particular DRDA server, an Oracle supplied package will be automatically bound to the DRDA server. The user ID and password that are used (either implied as the current Oracle user or explicitly defined in the CREATE DATABASE LINK command) must have proper authority on the DRDA Server to create the package. The followings are minimum authorities needed by this user:</p>
<ul>
<li>
<p>Package <a id="sthref354"></a>privileges of <a id="sthref355"></a><code>BIND</code><a id="sthref356"></a> and <a id="sthref357"></a><code>EXECUTE</code><a id="sthref358"></a>, for example:</p>
<pre>
GRANT BIND    ON PACKAGE oraclegtw.* TO <span class="italic">userid</span>
GRANT EXECUTE ON PACKAGE oraclegtw.* TO PUBLIC
</pre></li>
<li>
<p>Schema <a id="sthref359"></a>privilege of <a id="sthref360"></a><code>CREATEIN</code><a id="sthref361"></a>, for example:</p>
<pre>
GRANT CREATEIN ON SCHEMA otgdb2 TO USER <span class="italic">userid</span>
GRANT CREATEIN ON SCHEMA oraclegtw TO USER <span class="italic">userid</span>
</pre></li>
<li>
<p>Database <a id="sthref362"></a>authorities of <a id="sthref363"></a><code>CONNECT</code><a id="sthref364"></a>, <a id="sthref365"></a><code>BINDADD</code><a id="sthref366"></a>, and <a id="sthref367"></a><code>CREATETAB</code><a id="sthref368"></a>, for example:</p>
<pre>
GRANT CONNECT   ON DATABASE TO USER <span class="italic">userid</span>
GRANT BINDADD   ON DATABASE TO USER <span class="italic">userid</span>
GRANT CREATETAB ON DATABASE TO USER <span class="italic">userid</span>
</pre></li>
</ul>
<p>Choose a user&nbsp;ID that will own the package and <a id="sthref369"></a><code>HS_TRANSACTION_LOG</code> table. Ensure that this user&nbsp;ID is defined in both the DB2 instance ID and the operating system.</p>
</li>
<li>
<p>Define the recovery user ID</p>
<p>During gateway configuration, the <a id="sthref370"></a>recovery user&nbsp;ID and password are specified in the gateway initialization file using the <a id="sthref371"></a><code>HS_FDS_RECOVERY_ACCOUNT</code><a id="sthref372"></a> and <a id="sthref373"></a><code>HS_FDS_RECOVERY_PWD</code><a id="sthref374"></a> parameters. If a distributed transaction fails, then the recovery process connects to the <a id="sthref375"></a>remote database using the user&nbsp;ID and password that are defined in these parameters. This user&nbsp;ID must have execute privileges on the package and must be defined to the DRDA database. If the user&nbsp;ID is not specified in <code>HS_FDS_RECOVERY_ACCOUNT</code>, then the gateway attempts to connect to a user&nbsp;ID of <a id="sthref376"></a><code>RECOVER</code> when a distributed transaction is in doubt.</p>
<p>Determine the user&nbsp;ID and password that you will use for recovery.</p>
</li>
<li>
<p>Determine DRDA location name for DB2 UDB for Linux, UNIX, and Windows instance</p>
<p>The DRDA location name is required as a gateway parameter. To determine the location name, run the following SQL query from a DB2 CLI session:</p>
<pre>
SELECT CURRENT SERVER FROM <span class="italic">any_table</span>
</pre>
<p>where <code><span class="codeinlineitalic">any_table</span></code> is a valid table with one or more rows.</p>
<p>If the value returned by this query is blank or null, then the DRDA location name has not been established. Contact your system administrator to set a location name for the instance.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment272">
<tr>
<td class="cellalignment279">
<table class="cellalignment277">
<tr>
<td class="cellalignment276"><a href="drda_install.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment276"><a href="cfg_gtwy.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment281">
<table class="cellalignment275">
<tr>
<td class="cellalignment276"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment276"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment276"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment276"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment276"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment276"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
