<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Teradata Gateway Features and Restrictions</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 042" />
<meta name="dcterms.created" content="2012-01-24T13:28:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Gateway for Teradata User's Guide" />
<meta name="dcterms.identifier" content="E12068-03" />
<meta name="dcterms.isVersionOf" content="TGTEU" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="intro.htm" title="Previous" type="text/html" />
<link rel="Next" href="casestudies.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12068.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/12</span> <!-- End Header --><a id="g1010511"></a><a id="TGTEU200"></a><a id="i1005545"></a>
<h1 class="chapter"><span class="secnum">2</span> Teradata Gateway Features and Restrictions</h1>
<p>After the gateway is installed and configured, you can use the gateway to access Teradata data, pass Teradata commands from applications to the Teradata database, perform distributed queries, and copy data.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#i1005577">Using the Pass-Through Feature</a></p>
</li>
<li>
<p><a href="#CFHFDBEA">Executing Stored Procedures and Functions</a></p>
</li>
<li>
<p><a href="#CFHDJEEJ">CHAR Semantics</a></p>
</li>
<li>
<p><a href="#CFHFJHCB">Multi-byte Character Sets Ratio Suppression</a></p>
</li>
<li>
<p><a href="#CFHHJCGF">IPv6 Support</a></p>
</li>
<li>
<p><a href="#CFHBDEBB">Gateway Session IDLE Timeout</a></p>
</li>
<li>
<p><a href="#i1005620">Database Compatibility Issues for Teradata</a></p>
</li>
<li>
<p><a href="#i1005911">Known Restrictions</a></p>
</li>
<li>
<p><a href="#i1006159">Known Problems</a></p>
</li>
</ul>
<a id="i1005577"></a><a id="TGTEU704"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">2.1</span> Using the Pass-Through Feature<a id="sthref4"></a></h2>
<p>The gateway can pass Teradata commands or statements from the application directly to the Teradata database using the <code>DBMS_HS_PASSTHROUGH</code> package.</p>
<p>Use the <code>DBMS_HS_PASSTHROUGH</code> package in a PL/SQL block to specify the statement to be passed to the Teradata database, as follows:</p>
<pre>
DECLARE
    num_rows INTEGER;
BEGIN
    num_rows := DBMS_HS_PASSTHROUGH.EXECUTE_IMMEDIATE@TERA('<span class="italic">command</span>');
END;
/
</pre>
<p>Where <code><span class="codeinlineitalic">command</span></code> cannot be one of the following:</p>
<ul>
<li>
<p><code>BEGIN TRANSACTION</code></p>
</li>
<li>
<p><code>BT</code></p>
</li>
<li>
<p><code>COMMIT</code></p>
</li>
<li>
<p><code>END TRANSACTION</code></p>
</li>
<li>
<p><code>ET</code></p>
</li>
<li>
<p><code>ROLLBACK</code></p>
</li>
</ul>
<p>The <code>DBMS_HS_PASSTHROUGH</code> package supports passing bind values and executing <code>SELECT</code> statements.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink ARPLS" href="../../appdev.112/e40758/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> and <a class="olink HETER003" href="../../server.112/e11050/majfeat.htm#HETER003">Chapter 3, Features of Oracle Database Gateways,</a> of <span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span> for more information about the <code>DBMS_HS_PASSTHROUGH</code> package.</div>
</div>
<!-- class="sect1" -->
<a id="CFHFDBEA"></a><a id="TGTEU857"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.2</span> Executing Stored Procedures and Functions</h2>
<p>Using the procedural feature, the gateway can execute stored procedures that are defined in the Teradata database. It is not necessary to relink the gateway or define the procedure to the gateway, but the procedure's access privileges must permit access by the gateway.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink HETER" href="../../server.112/e11050/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a> for more information about executing stored procedures.</div>
<p>Standard PL/SQL statements are used to execute a stored procedure.</p>
<p>The gateway supports stored procedures in three mutually exclusive modes:</p>
<ul>
<li>
<p>Normal mode: Have access to <code>IN</code>/<code>OUT</code> arguments only</p>
</li>
<li>
<p>Return value mode: Have a return value for all stored procedures</p>
</li>
<li>
<p>Resultset mode: Out values are available as last result set</p>
</li>
</ul>
<a id="TGTEU858"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref5"></a>
<h3 class="sect2"><span class="secnum">2.2.1</span> Return Values and Stored Procedures</h3>
<p>By default, all stored procedures and functions do not return a return value to the user. To enable return values, set the <code>HS_FDS_PROC_IS_FUNC</code> parameter in the initialization parameter file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apd.htm#i634548">Appendix D, "Initialization Parameters"</a> for information about both editing the initialization parameter file and the <code>HS_FDS_PROC_IS_FUNC</code> parameter.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you set the <code>HS_FDS_PROC_IS_FUNC</code> gateway initialization parameter, you must change the syntax of the procedure execute statement for all existing stored procedures.</div>
<p>In the following example, the employee name <code>JOHN SMYTHE</code> is passed to the Teradata stored procedure <code>REVISE_SALARY</code>. The stored procedure retrieves the salary value from the Teradata database to calculate a new yearly salary for <code>JOHN SMYTHE</code>. The revised salary returned in <code>RESULT</code> is used to update <code>EMP</code> in a table of an Oracle database:</p>
<pre>
DECLARE
  INPUT VARCHAR2(15);
  RESULT NUMBER(8,2);
BEGIN
  INPUT := 'JOHN SMYTHE';
  RESULT := REVISE_SALARY@TERA(INPUT);
  UPDATE EMP SET SAL = RESULT WHERE ENAME =: INPUT;
END;
/
</pre>
<p>The procedural feature automatically converts non-Oracle data types to and from PL/SQL data types.</p>
</div>
<!-- class="sect2" -->
<a id="TGTEU859"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref6"></a>
<h3 class="sect2"><span class="secnum">2.2.2</span> Result Sets and Stored Procedures</h3>
<p>The Oracle Database Gateway for Teradata provides support for stored procedures which return result sets.</p>
<p>By default, all stored procedures and functions do not return a result set to the user. To enable result sets, set the <code>HS_FDS_RESULTSET_SUPPORT</code> parameter in the initialization parameter file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apd.htm#i634548">Appendix D, "Initialization Parameters"</a> for information about both editing the initialization parameter file and the <code>HS_FDS_RESULTSET_SUPPORT</code> parameter. For further information about Oracle support for result sets in non-Oracle databases see <a class="olink HETER" href="../../server.112/e11050/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a>.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you set the <code>HS_FDS_RESULTSET_SUPPORT</code> gateway initialization parameter, you must change the syntax of the procedure execute statement for all existing stored procedures or errors will occur.</div>
<p>When accessing stored procedures with result sets through the Oracle Database Gateway for Teradata, you will be in the sequential mode of Heterogeneous Services.</p>
<p>The Oracle Database Gateway for Teradata returns the following information to Heterogeneous Services during procedure description:</p>
<ul>
<li>
<p>All the input arguments of the remote stored procedure</p>
</li>
<li>
<p>None of the output arguments</p>
</li>
<li>
<p>One out argument of type ref cursor (corresponding to the first result set returned by the stored procedure)</p>
</li>
</ul>
<p>Client programs have to use the virtual package function <code>dbms_hs_result_set.get_next_result_set</code> to get the ref cursor for subsequent result sets. The last result set returned is the out argument from the procedure.</p>
<p>The limitations of accessing result sets are the following:</p>
<ul>
<li>
<p>Result sets returned by a remote stored procedure have to be retrieved in the order in which they were placed on the wire</p>
</li>
<li>
<p>On execution of a stored procedure, all result sets returned by a previously executed stored procedure will be closed (regardless of whether the data has been completely</p>
</li>
</ul>
<p>In the following example, the Teradata stored procedure is executed to fetch the contents of the <code>emp</code> and <code>dept</code> tables from Teradata:</p>
<pre>
CREATE PROCEDURE refcurproc (@arg1 varchar(255), @arg2 varchar(255) output)
AS
SECLECT @arg2 = @arg1
SELECT * FROM EMP
SELECT * FROM DEPT
GO
</pre>
<p>This stored procedure assigns the input parameter <code>arg1</code> to the output parameter <code>arg2</code>, opens the query <code>SELECT * FROM EMP</code> in ref cursor <code>rc1</code>, and opens the query <code>SELECT * FROM DEPT</code> in ref cursor <code>rc2</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Chained mode must be set before creating the stored procedure. Issue the following command in Teradata: <code>set chained on</code></div>
<a id="TGTEU860"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref7"></a>
<h4 class="sect3"><span class="secnum">2.2.2.1</span> OCI Program Fetching from Result Sets in Sequential Mode</h4>
<p>The following example shows OCI program fetching from result sets in sequential mode:</p>
<pre>
OCIEnv *ENVH;
OCISvcCtx *SVCH;
OCIStmt *STMH;
OCIError *ERRH;
OCIBind *BNDH[3];
OraText arg1[20];
OraText arg2[255];
OCIResult *rset;
OCIStmt *rstmt;
ub2 rcode[3];
ub2 rlens[3];
sb2 inds[3];
OraText *stmt = (OraText *) "begin refcurproc@TERA(:1,:2,:3); end;";
OraText *n_rs_stm = (OraText *)
  "begin :ret := DBMS_HS_RESULT_SET.GET_NEXT_RESULT_SET@TERA; end;";

/* Prepare procedure call statement */

/* Handle Initialization code skipped */
OCIStmtPrepare(STMH, ERRH, stmt, strlen(stmt), OCI_NTV_SYNTAX, OCI_DEFAULT);

/* Bind procedure arguments */
inds[0] = 0;
strcpy((char *) arg1, "Hello World");
rlens[0] = strlen(arg1);
OCIBindByPos(STMH, &amp;BNDH[0], ERRH, 1, (dvoid *) arg1, 20, SQLT_CHR,
             (dvoid *) &amp;(inds[0]), &amp;(rlens[0]), &amp;(rcode[0]), 0, (ub4 *) 0, 
             OCI_DEFAULT);
inds[1] = -1;
OCIBindByPos(STMH, &amp;BNDH[1], ERRH, 1, (dvoid *) arg2, 20, SQLT_CHR,
             (dvoid *) &amp;(inds[1]), &amp;(rlens[1]), &amp;(rcode[1]), 0, (ub4 *) 0, 
             OCI_DEFAULT);

inds[2] = 0;
rlens[2] = 0;
OCIDescriptorAlloc(ENVH, (dvoid **) &amp;rset, OCI_DTYPE_RSET, 0, (dvoid **) 0);
OCIBindByPos(STMH, &amp;BNDH[2], ERRH, 2, (dvoid *) rset, 0, SQLT_RSET,
             (dvoid *) &amp;(inds[2]), &amp;(rlens[2]), &amp;(rcode[2]),
             0, (ub4 *) 0, OCI_DEFAULT);

/* Execute procedure */
OCIStmtExecute(SVCH, STMH, ERRH, 1, 0, (CONST OCISnapshot *) 0,
               (OCISnapshot *) 0, OCI_DEFAULT);

/* Convert result set to statement handle */
OCIResultSetToStmt(rset, ERRH);
rstmt = (OCIStmt *) rset;

/* After this the user can fetch from rstmt */
/* Issue get_next_result_set call to get handle to next_result set */
/* Prepare Get next result set procedure call */

OCIStmtPrepare(STMH, ERRH, n_rs_stm, strlen(n_rs_stm), OCI_NTV_SYNTAX,
               OCI_DEFAULT);

/* Bind return value */
OCIBindByPos(STMH, &amp;BNDH[1], ERRH, 1, (dvoid *) rset, 0, SQLT_RSET,
             (dvoid *) &amp;(inds[1]), &amp;(rlens[1]), &amp;(rcode[1]),
             0, (ub4 *) 0, OCI_DEFAULT);

/* Execute statement to get next result set*/
OCIStmtExecute(SVCH, STMH, ERRH, 1, 0, (CONST OCISnapshot *) 0,
               (OCISnapshot *) 0, OCI_DEFAULT);

/* Convert next result set to statement handle */
OCIResultSetToStmt(rset, ERRH);
rstmt = (OCIStmt *) rset;

/* Now rstmt will point to the second result set returned by the
remote stored procedure */

/* Repeat execution of get_next_result_set to get the output arguments */
</pre></div>
<!-- class="sect3" -->
<a id="TGTEU861"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref8"></a>
<h4 class="sect3"><span class="secnum">2.2.2.2</span> PL/SQL Program Fetching from Result Sets in Sequential Mode</h4>
<p>Assume that the table <code>loc_emp</code> is a local table exactly like the Teradata emp table. The same assumption applies for <code>loc_dept</code>. <code>outargs</code> is a table with columns corresponding to the out arguments of the Teradata stored procedure.</p>
<pre>
create or replace package rcpackage is
  type RCTYPE is ref cursor;
end rcpackage;
/
</pre>
<pre>
declare
  rc1 rcpackage.rctype;
  rec1 loc_emp%rowtype;
  rc2 rcpackage.rctype;
  rec2 loc_dept%rowtype;
  rc3 rcpackage.rctype;
  rec3 outargs%rowtype;
  out_arg varchar2(255);

begin

  -- Execute procedure
  out_arg := null;  refcurproc@TERA('Hello World', out_arg, rc1);

  -- Fetch 20 rows from the remote emp table and insert them into loc_emp
  for i in 1 .. 20 loop
    fetch rc1 into rec1;
    insert into loc_emp (rec1.empno, rec1.ename, rec1.job,
    rec1.mgr, rec1.hiredate, rec1.sal, rec1.comm, rec1.deptno);
  end loop;

  -- Close ref cursor
  close rc1;

  -- Get the next result set returned by the stored procedure
  rc2 := dbms_hs_result_set.get_next_result_set@TERA;

  -- Fetch 5 rows from the remote dept table and insert them into loc_dept
  for i in 1 .. 5 loop
    fetch rc2 into rec2;
    insert into loc_dept values (rec2.deptno, rec2.dname, rec2.loc);
  end loop;

  --Close ref cursor
  close rc2;

  -- Get the output arguments from the remote stored procedure
  -- Since we are in sequential mode, they will be returned in the
  -- form of a result set
  rc3 := dbms_hs_result_set.get_next_result_set@TERA;

  -- Fetch them and insert them into the outarguments table
  fetch rc3 into rec3;
  insert into outargs (rec3.outarg, rec3.retval);

  -- Close ref cursor
  close rc3;

end;
/
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CFHDJEEJ"></a><a id="TGTEU810"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.3</span> CHAR Semantics</h2>
<p>This feature allows the gateway to optionally run in <code>CHAR</code> Semantics mode. Rather than always describing Teradata <code>CHAR</code> columns as <code>CHAR(n BYTE)</code>, this feature describes them as <code>CHAR(n CHAR)</code> and <code>VARCHAR(n CHAR)</code>. The concept is similar to Oracle database <code>CHAR</code> Semantics. You need to specify <code>HS_NLS_LENGTH_SEMANTICS=CHAR</code> to activate this option. Refer to <a href="apd.htm#i634548">Appendix D</a> for more detail.</p>
</div>
<!-- class="sect1" -->
<a id="CFHFJHCB"></a><a id="TGTEU811"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.4</span> Multi-byte Character Sets Ratio Suppression</h2>
<p>This feature optionally suppresses the ratio expansion from Teradata database to Oracle databases involving a multi-byte character set (for example, from <code>US7ASCII</code> to <code>AL32UTF8</code>, or from <code>KO16MSWIN949</code> to <code>KO16KSC5601</code>). By default, Oracle gateways assume the worst ratio to prevent data being truncated or allocation of buffer with insufficient size. However, if you have specific knowledge of your Teradata database and do not want the expansion to occur, you can specify <code>HS_KEEP_REMOTE_COLUMN_SIZE</code> parameter to suppress the expansion. Refer to <a href="apd.htm#i634548">Appendix D</a> for more detail.</p>
</div>
<!-- class="sect1" -->
<a id="CFHHJCGF"></a><a id="TGTEU812"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.5</span> IPv6 Support</h2>
<p>Besides full IPv6 support between Oracle databases and the gateway, IPv6 is also supported between this gateway and Teradata. Refer to <code>HS_FDS_CONNECT_INFO</code> parameter in <a href="apd.htm#i634548">Appendix D</a> for more detail.</p>
</div>
<!-- class="sect1" -->
<a id="CFHBDEBB"></a><a id="TGTEU813"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.6</span> Gateway Session IDLE Timeout</h2>
<p>You can optionally choose to terminate long idle gateway sessions automatically with the gateway parameter <code>HS_IDLE_TIMEOUT</code>. Specifically, when a gateway session is idle for more than the specified time limit, the gateway session is terminated with any pending changes rolled back.</p>
</div>
<!-- class="sect1" -->
<a id="i1005620"></a><a id="TGTEU705"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">2.7</span> Database Compatibility Issues for Teradata</h2>
<p>Teradata and Oracle databases function differently in some areas, causing compatibility problems. The following compatibility issues are described in this section:</p>
<ul>
<li>
<p><a href="#i1008104">Schema Considerations</a></p>
</li>
<li>
<p><a href="#CIHCFADF">Naming Rules</a></p>
</li>
<li>
<p><a href="#i1006680">Data Types</a></p>
</li>
<li>
<p><a href="#i1005849">Queries</a></p>
</li>
<li>
<p><a href="#i1005884">Locking</a></p>
</li>
</ul>
<a id="i1008104"></a><a id="TGTEU706"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.7.1</span> Schema Considerations</h3>
<p>The Oracle concept of a schema does not exist in Teradata. A schema name included in a query is recognized by Teradata as a database name. In the Oracle database, the schema of an object is identical to the owner of that object. However, when one retrieves or references an <code>OWNER</code> field in a Data Dictionary view such as <code>ALL_TABLES</code>, the <code>OWNER</code> field really is referencing a Teradata database name.</p>
<p>When querying data dictionary tables, the following results are returned:</p>
<ul>
<li>
<p><code>ALL_*</code> data dictionary tables, data for every Teradata database is returned. The Teradata database name is returned in the <code>OWNER</code>, <code>INDEX_OWNER</code>, or <code>TABLE_OWNER</code> column depending on the data dictionary table being referenced.</p>
</li>
<li>
<p><code>ALL_USERS</code> data dictionary table, each Teradata database name is returned in the <code>USERNAME</code> column.</p>
</li>
<li>
<p><code>USER_*</code> data dictionary tables, data for the default Teradata database is returned for the <code>OWNER</code> or <code>TABLE_OWNER</code> column depending on the data dictionary table being referenced. If a default Teradata database is not defined, the DBC Teradata system database is used.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHCFADF"></a><a id="TGTEU707"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.7.2</span> Naming Rules</h3>
<p>Naming rule issues include the following:</p>
<ul>
<li>
<p><a href="#i1005677">Rules for Naming Objects</a></p>
</li>
<li>
<p><a href="#i1005706">Case Sensitivity</a></p>
</li>
</ul>
<a id="i1005677"></a><a id="TGTEU708"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.7.2.1</span> <a id="sthref9"></a>Rules for Naming Objects</h4>
<p>Oracle and Teradata use different database object naming rules. For example, the maximum number of characters allowed for each object name can be different. Also, the use of single and double quotation marks, case sensitivity, and the use of alphanumeric characters can all be different.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> and Teradata documentation.</div>
</div>
<!-- class="sect3" -->
<a id="i1005706"></a><a id="TGTEU709"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.7.2.2</span> <a id="sthref10"></a>Case Sensitivity</h4>
<p>The Oracle database defaults to uppercase unless you surround identifiers with double quote characters. For example, to refer to the Teradata table called <code>emp</code>, enter the name with double quote characters, as follows:</p>
<pre>
SQL&gt; SELECT * FROM "emp"@TERA;
</pre>
<p>However, to refer to the Teradata table called <code>emp</code> in the Teradata database named Scott from an Oracle application, enter the following:</p>
<pre>
SQL&gt; SELECT * FROM "Scott"."emp"@TERA;
</pre>
<p>If the Teradata table called <code>emp</code> in the Teradata database named <code>SCOTT</code>, a name consisting entirely of uppercase letters, you can enter the owner name without double quote characters, as follows:</p>
<pre>
SQL&gt; SELECT * FROM SCOTT."emp"@TERA;
</pre>
<p>or</p>
<pre>
SQL&gt; SELECT * FROM scott."emp"@TERA;
</pre>
<p>Oracle recommends that you surround all Teradata object names with double quote characters and use the exact letter case for the object names as they appear in the Teradata data dictionary. This convention is not required when referring to the supported Oracle data dictionary tables or views listed in <a href="apc.htm#g669215">Appendix C, "Data Dictionary"</a>.</p>
<p>If existing applications cannot be changed according to these conventions, create views in Oracle to associate Teradata names to the correct letter case. For example, to refer to the Teradata table <code>emp</code> from an existing Oracle application by using only uppercase names, define the following view:</p>
<pre>
SQL&gt; CREATE VIEW EMP (EMPNO, ENAME, SAL, HIREDATE)
      AS SELECT "empno", "ename", "sal", "hiredate"
      FROM "emp"@TERA;
</pre>
<p>With this view, the application can issue statements such as the following:</p>
<pre>
SQL&gt; SELECT EMPNO, ENAME FROM EMP;
</pre>
<p>Using views is a workaround solution that duplicates data dictionary information originating in the Teradata data dictionary. You must be prepared to update the Oracle view definitions whenever the data definitions for the corresponding tables are changed in the Teradata database.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1006680"></a><a id="TGTEU710"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.7.3</span> Data Types</h3>
<p>Data type issues include the following:</p>
<ul>
<li>
<p><a href="#i1007594">Binary Literal Notation</a></p>
</li>
<li>
<p><a href="#i1008049">Data Type Conversion</a></p>
</li>
</ul>
<a id="i1007594"></a><a id="TGTEU711"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.7.3.1</span> Binary Literal Notation</h4>
<p>Oracle SQL uses hexadecimal digits surrounded by single quotes to express literal values being compared or inserted into columns defined as data type <code>RAW</code>.</p>
<p><a id="sthref11"></a>This notation is not converted to syntax compatible with the Teradata <code>VARBINARY</code> and <code>BINARY</code> data types (a <code>ff</code> surrounded by single quotes followed by hexadecimal digits).</p>
<p>For example, the following statement is not supported:</p>
<pre>
SQL&gt; INSERT INTO BINARY_TAB@TERA VALUES ('ff'xb)
</pre>
<p>where <code>BINARY_TAB</code> contains a column of data type <code>VARBINARY</code> or <code>BINARY</code>. Use bind variables when inserting into or updating <code>VARBINARY</code> and <code>BINARY</code> data types.</p>
</div>
<!-- class="sect3" -->
<a id="i1008049"></a><a id="TGTEU712"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.7.3.2</span> <a id="sthref12"></a>Data Type Conversion</h4>
<p>Teradata does not support implicit date conversions. Such conversions must be explicit.</p>
<p>For example, the gateway issues an error for the following <code>SELECT</code> statement:</p>
<pre>
SELECT DATE_COL FROM TEST@TERA WHERE DATE_COL = "1-JAN-2001";
</pre>
<p>To avoid problems with implicit conversions, add explicit conversions, as in the following:</p>
<pre>
SELECT DATE_COL FROM TEST@TERA WHERE DATE_COL = TO_DATE("1-JAN-2001")
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apa.htm#g635542">Appendix A, "Data Type Conversion"</a> for more information about restrictions on data types.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1005849"></a><a id="TGTEU713"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.7.4</span> Queries</h3>
<p>Query issues include the following:</p>
<ul>
<li>
<p><a href="#i1007676">Row Selection</a></p>
</li>
<li>
<p><a href="#i1005878">Empty Bind Variables</a></p>
</li>
</ul>
<a id="i1007676"></a><a id="TGTEU714"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.7.4.1</span> Row Selection</h4>
<p>Teradata evaluates a query condition for all selected rows before returning any of the rows. If there is an error in the evaluation process for one or more rows, no rows are returned even though the remaining rows satisfy the condition.</p>
<p>Oracle evaluates the query condition row-by-row and returns a row when the evaluation is successful. Rows are returned until a row fails the evaluation.</p>
</div>
<!-- class="sect3" -->
<a id="i1005878"></a><a id="TGTEU715"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.7.4.2</span> Empty Bind Variables</h4>
<p>For <code>VARCHAR</code> bind variables, the gateway passes empty bind variables to the Teradata database as a <code>NULL</code> value.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1005884"></a><a id="TGTEU716"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.7.5</span> Locking<a id="sthref13"></a></h3>
<p>The locking model for an Teradata database differs significantly from the Oracle model. The gateway depends on the underlying Teradata behavior, so the following possible scenarios can affect Oracle applications that access Teradata through the gateway:</p>
<ul>
<li>
<p>Read access might block write access.</p>
</li>
<li>
<p>Write access might block read access.</p>
</li>
<li>
<p>Statement-level read consistency is not guaranteed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Teradata documentation for information about the Teradata locking model.</div>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1005911"></a><a id="TGTEU717"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">2.8</span> Known Restrictions<a id="sthref14"></a></h2>
<p>If you encounter incompatibility problems not listed in this section or in <a href="#i1006159">"Known Problems"</a>, contact Oracle Support Services. The following section describes the known restrictions and includes suggestions for dealing with them when possible:</p>
<ul>
<li>
<p><a href="#i1006816">Transactional Integrity</a></p>
</li>
<li>
<p><a href="#i1006829">Transaction Capability</a></p>
</li>
<li>
<p><a href="#i1006844">COMMIT or ROLLBACK in PL/SQL Cursor Loops Closes Open Cursors</a></p>
</li>
<li>
<p><a href="#i1006851">Pass-Through Feature</a></p>
</li>
<li>
<p><a href="#i1008208">Bind Variables for Date Columns</a></p>
</li>
<li>
<p><a href="#i1006889">SQL Syntax</a></p>
</li>
<li>
<p><a href="#i1006961">SQL*Plus</a></p>
</li>
<li>
<p><a href="#i1006964">Database Links</a></p>
</li>
</ul>
<a id="i1006816"></a><a id="TGTEU718"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.1</span> Transactional Integrity <a id="sthref15"></a></h3>
<p>The gateway cannot guarantee transactional integrity in the following cases:</p>
<ul>
<li>
<p>When a statement that is processed by the gateway causes an implicit commit in the target database</p>
</li>
<li>
<p>When the target database is configured to work in autocommit mode</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle strongly recommends the following:
<ul>
<li>
<p>If you know that executing a particular statement causes an implicit commit in the target database, then ensure that this statement is executed in its own transaction.</p>
</li>
<li>
<p>Do not configure the target database to work in autocommit mode.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1006829"></a><a id="TGTEU719"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.2</span> Transaction Capability <a id="sthref16"></a></h3>
<p><a id="sthref17"></a>The gateway does not support savepoints. If a distributed update transaction is under way involving the gateway and a user attempts to create a savepoint, the following error occurs:</p>
<pre>
<a id="sthref18"></a>ORA-02070: database <span class="italic">dblink</span> does not support savepoint in this context<a id="sthref19"></a>
</pre>
<p><a id="sthref20"></a>By default, the gateway is configured as <code>COMMIT_CONFIRM</code> and it is always the <a id="sthref21"></a>commit point site when the Teradata database is updated by the transaction.</p>
</div>
<!-- class="sect2" -->
<a id="i1006844"></a><a id="TGTEU720"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.3</span> COMMIT or ROLLBACK in PL/SQL Cursor Loops Closes Open Cursors <a id="sthref22"></a><a id="sthref23"></a><a id="sthref24"></a></h3>
<p>Any <code>COMMIT</code> or <code>ROLLBACK</code> issued in a PL/SQL cursor loop closes all open cursors, which can result in the following error:</p>
<pre>
ORA-1002:  fetch out of sequence 
</pre>
<p>To prevent this error, move the <code>COMMIT</code> or <code>ROLLBACK</code> statement outside the cursor loop.</p>
</div>
<!-- class="sect2" -->
<a id="i1006851"></a><a id="TGTEU721"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.4</span> Pass-Through Feature</h3>
<p>Oracle recommends that you place a <a id="sthref25"></a>DDL statement in its own transaction when executing such a statement with the pass-through feature. An explicit <code>COMMIT</code> must be issued after the DDL statement.</p>
<p><a id="sthref26"></a>If the SQL statements being passed through the gateway result in an implicit commit at the Teradata database, the Oracle transaction manager is unaware of the commit and an Oracle <code>ROLLBACK</code> command cannot be used to roll back the transaction.</p>
</div>
<!-- class="sect2" -->
<a id="i1008208"></a><a id="TGTEU722"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.5</span> Bind Variables for Date Columns</h3>
<p>You cannot compare columns of data type <code>TIME</code> or <code>TIMESTAMP</code> to a bind variable.</p>
<p>The following SQL statement causes an error message:</p>
<pre>
SQL&gt; select time_column from time_table@TERA where time_column = :a;
</pre>
<p>The following error is issued:</p>
<pre>
Invalid operation on an ANSI Datetime or Interval value. 
</pre></div>
<!-- class="sect2" -->
<a id="i1006889"></a><a id="TGTEU723"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.6</span> SQL Syntax</h3>
<p>This section lists restrictions on the following SQL syntax:</p>
<ul>
<li>
<p><a href="#i1007852">WHERE CURRENT OF Clause</a></p>
</li>
<li>
<p><a href="#i1007857">CONNECT BY Clause</a></p>
</li>
<li>
<p><a href="#i1007875">ROWID</a></p>
</li>
<li>
<p><a href="#i1008379">EXPLAIN PLAN Statement</a></p>
</li>
<li>
<p><a href="#CFHBBICA">Callback Support</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apb.htm#g636614">Appendix B, "Supported SQL Syntax and Functions"</a> for more information about restrictions on SQL syntax.</div>
<a id="i1007852"></a><a id="TGTEU724"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.8.6.1</span> <a id="sthref27"></a>WHERE CURRENT OF Clause</h4>
<p><code>UPDATE</code> and <code>DELETE</code> statements with the <code>WHERE CURRENT OF</code> clause are not supported by the gateway because they rely on the Oracle <a id="sthref28"></a><code>ROWID</code> implementation. To update or delete a specific row through the gateway, a condition style <code>WHERE</code> clause must be used.</p>
</div>
<!-- class="sect3" -->
<a id="i1007857"></a><a id="TGTEU725"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.8.6.2</span> <a id="sthref29"></a>CONNECT BY Clause</h4>
<p>The gateway does not support the <code>CONNECT BY</code> clause in a <code>SELECT</code> statement.</p>
</div>
<!-- class="sect3" -->
<a id="i1007875"></a><a id="TGTEU726"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.8.6.3</span> ROWID<a id="sthref30"></a></h4>
<p>The Oracle <code>ROWID</code> implementation is not supported.</p>
</div>
<!-- class="sect3" -->
<a id="i1008379"></a><a id="TGTEU727"></a>
<div class="sect3">
<h4 class="sect3"><span class="secnum">2.8.6.4</span> EXPLAIN PLAN Statement</h4>
<p>The <code>EXPLAIN PLAN</code> statement is not supported.</p>
</div>
<!-- class="sect3" -->
<a id="CFHBBICA"></a><a id="TGTEU728"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">2.8.6.5</span> Callback Support</h4>
<p>SQL statements that require the gateway to callback to Oracle database are not supported.</p>
<p>The following categories of SQL statements will result in a callback:</p>
<ul>
<li>
<p>Any DML with a sub-select, which refers to a table in Oracle database. For example:</p>
<pre>
INSERT INTO emp@TERA SELECT * FROM oracle_emp;
</pre></li>
<li>
<p>Any <code>DELETE</code>, <code>INSERT</code>, <code>UPDATE</code> or "<code>SELECT... FOR UPDATE..."</code> SQL statement containing SQL functions or statements that needs to be executed at the originating Oracle database.</p>
<p>These SQL functions include <code>USER</code>, <code>USERENV</code>, and <code>SYSDATE</code>; and invovle the selection of data from the originating Oracle database. For example:</p>
<pre>
DELETE FROM emp@TERA WHERE hiredate &gt; SYSDATE;
</pre>
<pre>
SELECT ename FROM tkhoemp@TERA
WHERE hiredate IN (SELECT hiredate FROM oracle_emp)
FOR UPDATE OF empno;
</pre></li>
<li>
<p>Any SQL statement that involves a table in Oracle database, and a <code>LONG</code> or <code>LOB</code> column in a remote table. For example:</p>
<pre>
SELECT a.long1, b.empno FROM scott.table@TERA a, emp b
WHERE a.id=b.empno; 
</pre>
<pre>
SELECT a.long1, b.dummy FROM table_non@TERA a, dual b;
</pre></li>
</ul>
<p>where <code>a.long1</code> is a <code>LONG</code> column.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1006961"></a><a id="TGTEU729"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.7</span> <a id="sthref31"></a>SQL*Plus</h3>
<p>You need to use double quotes to wrap around lowercase table names.</p>
<p>For example:</p>
<pre>
copy from tkhouser/tkhouser@inst1 insert loc_tkhodept using select * from "tkhodept"@TERA;
</pre></div>
<!-- class="sect2" -->
<a id="i1006964"></a><a id="TGTEU730"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.8.8</span> Database Links</h3>
<p>The gateway is not a shared server process and cannot support shared database links. Each gateway session spawns a separate gateway process and connections cannot be shared.</p>
</div>
<!-- class="sect2" -->
<a id="TGTEU814"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref32"></a>
<h3 class="sect2"><span class="secnum">2.8.9</span> CALLBACK links</h3>
<p>Oracle Database Gateway for Teradata does not support <code>CALLBACK</code> links. Attempting to use a <code>CALLBACK</code> link with the gateway will return the following error message:</p>
<pre>
ORA-02025: All tables in the SQL statement must be at the remote database
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006159"></a><a id="TGTEU732"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">2.9</span> Known Problems</h2>
<p>This section describes known problems and includes suggestions for correcting them when possible. If you have any questions or concerns about the problems, contact Oracle Support Services. A current list of problems is available online. Contact your local Oracle office for information about accessing the list.</p>
<p>The following known problems are described in this section:</p>
<ul>
<li>
<p><a href="#i1008264">Teradata LONG VARCHAR Data Type</a></p>
</li>
<li>
<p><a href="#i1007102">Schema Names and PL/SQL</a></p>
</li>
<li>
<p><a href="#i1008015">Data Dictionary Views and PL/SQL</a></p>
</li>
</ul>
<a id="i1008264"></a><a id="TGTEU734"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.9.1</span> Teradata LONG VARCHAR Data Type</h3>
<p>The following restrictions apply when using <code>LONG VARCHAR</code> data types:</p>
<ul>
<li>
<p>An unsupported SQL function cannot be used in a SQL statement that accesses a column defined as Teradata data type <code>LONG VARCHAR</code>.</p>
</li>
<li>
<p>You cannot use SQL*Plus to select data from a column defined as Teradata data type <code>LONG VARCHAR</code> when the data is greater than 80 characters in length. Oracle recommends using Pro*C or Oracle Call Interface to access such data in a Teradata database.</p>
</li>
<li>
<p><code>LONG VARCHAR</code> data types must be <code>NULLABLE</code> for <code>INSERT</code> or <code>UPDATE</code> to work.</p>
</li>
<li>
<p>A table including a <code>LONG VARCHAR</code> column must have a unique index defined on the table or the table must have a separate column that serves as a primary key.</p>
</li>
<li>
<p><code>LONG VARCHAR</code> data cannot be read through pass-through queries.</p>
</li>
</ul>
<p>The gateway does not support the PL/SQL function <code>COLUMN_VALUE_LONG</code> of the <code>DBMS_SQL</code> package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="apb.htm#g636614">Appendix B, "Supported SQL Syntax and Functions"</a> for more information about restrictions on SQL syntax.</div>
</div>
<!-- class="sect2" -->
<a id="i1007102"></a><a id="TGTEU735"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.9.2</span> Schema Names and PL/SQL<a id="sthref33"></a></h3>
<p>If you do not prefix a Teradata database object with its schema name in a SQL statement within a PL/SQL block, the following error message occurs:</p>
<pre>
ORA-6550 PLS-201 Identifier <span class="italic">table_name</span> must be declared.
</pre>
<p>Change the SQL statement to include the schema name of the object.</p>
</div>
<!-- class="sect2" -->
<a id="i1008015"></a><a id="TGTEU736"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">2.9.3</span> Data Dictionary Views and PL/SQL<a id="sthref34"></a></h3>
<p>You cannot refer to data dictionary views in SQL statements that are inside a PL/SQL block.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment362">
<tr>
<td class="cellalignment369">
<table class="cellalignment367">
<tr>
<td class="cellalignment366"><a href="intro.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment366"><a href="casestudies.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment371">
<table class="cellalignment365">
<tr>
<td class="cellalignment366"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment366"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment366"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment366"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment366"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment366"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
