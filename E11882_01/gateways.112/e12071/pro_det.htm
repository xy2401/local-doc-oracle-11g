<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Troubleshooting</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-18T21:25:2Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Gateway for APPC User's Guide" />
<meta name="dcterms.identifier" content="E12071-03" />
<meta name="dcterms.isVersionOf" content="APPUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="app_tcp.htm" title="Previous" type="text/html" />
<link rel="Next" href="apa.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12071.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/20</span> <!-- End Header -->
<div id="APPUG800" class="chapter"><a id="g1026955"></a>
<h1 class="chapter"><span class="secnum">8</span> Troubleshooting</h1>
<p>This chapter discusses diagnostic techniques and aids for determining and resolving problems with data conversion, truncation, and conversation startup. It also describes how to collect the data when the debugging (<a id="sthref929"></a>trace) option is on.</p>
<p>You will want to trace the PL/SQL stored procedures only when you suspect problems. Do not run with tracing enabled during normal operations, because it will affect performance.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#i1008735">"TIP Definition Errors"</a></p>
</li>
<li>
<p><a href="#i1006659">"Problem Analysis with PG DD Diagnostic References"</a></p>
</li>
<li>
<p><a href="#i1006689">"Problem Analysis with PG DD Select Scripts"</a></p>
</li>
<li>
<p><a href="#i1006782">"Data Conversion Errors"</a></p>
</li>
<li>
<p><a href="#i1006891">"Problem Analysis with TIP Runtime Traces"</a></p>
</li>
<li>
<p><a href="#i1008852">"TIP Runtime Trace Controls"</a></p>
</li>
<li>
<p><a href="#i1007016">"Suppressing TIP Warnings and Tracing"</a></p>
</li>
<li>
<p><a href="#i1006808">"Problem Analysis of Data Conversion and Truncation Errors"</a></p>
</li>
<li>
<p><a href="#i1007042">"Gateway Server Tracing"</a></p>
</li>
</ul>
<a id="i1008735"></a>
<div id="APPUG1049" class="sect1">
<h2 class="sect1"><span class="secnum">8.1</span> TIP Definition Errors</h2>
<p>TIP definition errors occur when a <code>TRANSACTION</code>, <code>CALL</code>, or <code>DATA</code> entry in the PG DD is not properly defined.<a id="sthref930"></a><a id="sthref931"></a></p>
<p>Use the <code>REPORT</code> with <code>DEBUG</code> statement to list the PG DD contents and <code>GENERATE DIAGNOSE(PKGEX(DR))</code> option to include corresponding ID numbers in the TIP.</p>
<p><a href="#CHDBEGEA">Table 8-1</a> shows the mnemonic used to represent ID numbers and their correspondence with the following:</p>
<ul>
<li>
<p>PGAU <code>REPORT</code> with debug listings, <a id="sthref932"></a><a id="sthref933"></a><code>GENERATE</code> traces and TIPs</p>
</li>
<li>
<p>PG DD tables and columns from which ID numbers are selected</p>
</li>
<li>
<p>Oracle sequence objects from which ID numbers originate</p>
</li>
</ul>
<div id="APPUG1317" class="tblformal">
<p class="titleintable"><a id="sthref934"></a><a id="CHDBEGEA"></a>Table 8-1 PG DD ID Numbers in Correspondence</p>
<table class="cellalignment339" title="PG DD ID Numbers in Correspondence" summary="shows the PGDD ID numbers used in correspondence to represent ID numbers and their correspondence with PGAU REPORT, PGDD tables, Sequence Objects" dir="ltr">
<thead>
<tr class="cellalignment333">
<th class="cellalignment340" id="r1c1-t2">PGAU REPORT/TIP</th>
<th class="cellalignment340" id="r1c2-t2">PDGG table(col)</th>
<th class="cellalignment340" id="r1c3-t2">Sequence Object</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment333">
<td class="cellalignment341" id="r2c1-t2" headers="r1c1-t2">
<p><code>v# transaction version</code></p>
</td>
<td class="cellalignment341" headers="r2c1-t2 r1c2-t2">
<p><code>pga_trans(version)</code></p>
</td>
<td class="cellalignment341" headers="r2c1-t2 r1c3-t2">
<p><code>pga.transvers</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r3c1-t2" headers="r1c1-t2">
<p><code>v# call version</code></p>
</td>
<td class="cellalignment341" headers="r3c1-t2 r1c2-t2">
<p><code>pga_call(version)</code></p>
</td>
<td class="cellalignment341" headers="r3c1-t2 r1c3-t2">
<p><code>pga.callvers</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r4c1-t2" headers="r1c1-t2">
<p><code>v# data version</code></p>
</td>
<td class="cellalignment341" headers="r4c1-t2 r1c2-t2">
<p><code>pga_data(version)</code></p>
</td>
<td class="cellalignment341" headers="r4c1-t2 r1c3-t2">
<p><code>pga.datavers</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r5c1-t2" headers="r1c1-t2">
<p><code>t# transaction id#</code></p>
</td>
<td class="cellalignment341" headers="r5c1-t2 r1c2-t2">
<p><code>pga_trans(trans#)</code></p>
</td>
<td class="cellalignment341" headers="r5c1-t2 r1c3-t2">
<p><code>pga.transeq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r6c1-t2" headers="r1c1-t2">
<p><code>c# call id#</code></p>
</td>
<td class="cellalignment341" headers="r6c1-t2 r1c2-t2">
<p><code>pga_call(call#)</code></p>
<p><code>pga_call_parm(call#)</code></p>
</td>
<td class="cellalignment341" headers="r6c1-t2 r1c3-t2">
<p><code>pga.callseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r7c1-t2" headers="r1c1-t2">
<p><code>d# data id#</code></p>
</td>
<td class="cellalignment341" headers="r7c1-t2 r1c2-t2">
<p><code>pga_call_parm(data#)</code></p>
<p><code>pga_data(data#)</code></p>
<p><code>pga_fields(data#)</code></p>
</td>
<td class="cellalignment341" headers="r7c1-t2 r1c3-t2">
<p><code>pga.dataseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r8c1-t2" headers="r1c1-t2">
<p><code>f# field id#</code></p>
</td>
<td class="cellalignment341" headers="r8c1-t2 r1c2-t2">
<p><code>pga_fields(fld#)</code></p>
</td>
<td class="cellalignment341" headers="r8c1-t2 r1c3-t2">
<p><code>pga.fieldseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r9c1-t2" headers="r1c1-t2">
<p><code>q# qualifier id#</code></p>
</td>
<td class="cellalignment341" headers="r9c1-t2 r1c2-t2">
<p><code>pga_data_values(qual#)</code></p>
</td>
<td class="cellalignment341" headers="r9c1-t2 r1c3-t2">
<p><code>pga.fieldseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r10c1-t2" headers="r1c1-t2">
<p><code>a# trans attribute id#</code></p>
</td>
<td class="cellalignment341" headers="r10c1-t2 r1c2-t2">
<p><code>pga_trans_values(attr#)</code></p>
<p><code>pga_trans_attr(attr#)</code></p>
</td>
<td class="cellalignment341" headers="r10c1-t2 r1c3-t2">
<p><code>pga.tattrseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r11c1-t2" headers="r1c1-t2">
<p><code>a# field attribute id#</code></p>
</td>
<td class="cellalignment341" headers="r11c1-t2 r1c2-t2">
<p><code>pga_data_values(attr#)</code></p>
<p><code>pga_data_attr(attr#)</code></p>
</td>
<td class="cellalignment341" headers="r11c1-t2 r1c3-t2">
<p><code>pga.dtattseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r12c1-t2" headers="r1c1-t2">
<p><code>e# environment</code></p>
</td>
<td class="cellalignment341" headers="r12c1-t2 r1c2-t2">
<p><code>pga_environments(env#)</code></p>
</td>
<td class="cellalignment341" headers="r12c1-t2 r1c3-t2">
<p><code>pga.envrseq</code></p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r13c1-t2" headers="r1c1-t2">
<p><code>l# compiler/language</code></p>
</td>
<td class="cellalignment341" headers="r13c1-t2 r1c2-t2">
<p><code>pga_compilers(comp#)</code></p>
</td>
<td class="cellalignment341" headers="r13c1-t2 r1c3-t2">
<p><code>pga.compseq</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>These ID numbers can be used to associate the conversions performed in the TIP with the definitions stored in the PG DD.</p>
<p>The P<a id="sthref935"></a>G DD diagnostic references appear in TIPs generated with the <code>PKGEX(DR)</code> option as single line Comments:</p>
<pre>
-- PG DD <span class="italic">type idno=nnn ...</span>  
</pre>
<p>The PG DD diagnostic references appear in <code>REPORT</code> with <code>DEBUG</code> listings before or to the right of their related definition entry as end-delimited Comments:</p>
<pre>
<span class="italic">/* idno=nnn */</span> 
</pre>
<p>Refer to <a href="apa.htm#g650736">Appendix A, "Database Gateway for APPC Data Dictionary"</a> for more information about PG DD, including a complete list of dictionary tables.</p>
</div>
<!-- class="sect1" -->
<a id="i1006659"></a>
<div id="APPUG1050" class="sect1">
<h2 class="sect1"><span class="secnum">8.2</span> Problem Analysis with PG DD Diagnostic References<a id="sthref936"></a><a id="sthref937"></a></h2>
<p>TIPs should be generated by the PGAU <code>GENERATE</code> command with the <code><a id="sthref938"></a><a id="sthref939"></a>PKGEX(DR)</code> diagnostic option, to include PG DD reference Comments in the TIP. These diagnostic references are Comments only and do not affect the runtime overhead of the TIP. Refer to <a href="admin_util.htm#i1007070">Section 2.6.9, "GENERATE"</a> in <a href="admin_util.htm#g1029659">Chapter 2, "Procedural Gateway Administration Utility"</a> for a description of the <code>PKGEX (DR)</code> parameter.</p>
<ol>
<li>
<p>Before defining the <a id="sthref940"></a>PL/SQL package, identify the transaction name, ID number (<code>t#</code>), and version (<code>v#</code>) from the TIP specification within the TIP.</p>
</li>
<li>
<p>Invoke PGAU <code>REPORT WITH DEBUG</code> specifying the same transaction name and version.</p>
<p><code>REPORT</code> selects definitions from the PG DD and produces a listing showing the <code>DATA</code>, <code>CALL</code>, and <code>TRANSACTION</code> definitions and the ID number of each user-supplied definition.</p>
</li>
<li>
<p>Compare the reported definitions with those used in the remote transaction program and identify all corresponding exchanges and the data formats transmitted.</p>
</li>
<li>
<p>Look for and investigate any mismatches, such as:</p>
<ul>
<li>
<p>different numbers of send/receive calls</p>
</li>
<li>
<p>different sequence of send/receive calls</p>
</li>
<li>
<p>different parameter lists on send/receive calls</p>
</li>
<li>
<p>different data fields within each exchanged parameter</p>
</li>
<li>
<p>different lengths for each exchanged parameter</p>
</li>
<li>
<p>unsupported datatypes for each exchanged parameter</p>
</li>
<li>
<p>improperly initialized control fields for:</p>
<ul>
<li>
<p>repeating group counts</p>
<p><code>IBMVSCOBOLII</code> affected clauses include</p>
<p><code>OCCURS n TIMES DEPENDING ON</code> <code>field</code></p>
</li>
<li>
<p>remapped group criteria</p>
<p><code>IBMVSCOBOLII</code> affected clauses include</p>
<p><code>REDEFINES field1 WHEN field2 =</code> criteria</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1006689"></a>
<div id="APPUG1051" class="sect1">
<h2 class="sect1"><span class="secnum">8.3</span> Problem Analysis with PG DD Select Scripts<a id="sthref941"></a><a id="sthref942"></a></h2>
<p><a id="sthref943"></a>PGAU <code>GENERATE</code> error messages and <code>TRACE(OC)</code> entries reference SQL <code>SELECT</code> statements. Refer to <a href="#g1019897">Table 8-2</a> for the meaning of the name designations for each entry.</p>
<div id="APPUG1318" class="tblformal">
<p class="titleintable"><a id="sthref944"></a><a id="g1019897"></a>Table 8-2 Meaning of TRACE(OC) Output</p>
<table class="cellalignment339" title="Meaning of TRACE(OC) Output" summary="lists the meaning of the name designations for each entry" dir="ltr">
<thead>
<tr class="cellalignment333">
<th class="cellalignment340" id="r1c1-t3">Name</th>
<th class="cellalignment340" id="r1c2-t3">Entry</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment333">
<td class="cellalignment341" id="r2c1-t3" headers="r1c1-t3">
<p><code>SED</code></p>
</td>
<td class="cellalignment341" headers="r2c1-t3 r1c2-t3">
<p>Select Environment Data</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r3c1-t3" headers="r1c1-t3">
<p><code>STL</code></p>
</td>
<td class="cellalignment341" headers="r3c1-t3 r1c2-t3">
<p>Select Transaction (latest version)</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r4c1-t3" headers="r1c1-t3">
<p><code>STV</code></p>
</td>
<td class="cellalignment341" headers="r4c1-t3 r1c2-t3">
<p>Select Transaction (specific version)</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r5c1-t3" headers="r1c1-t3">
<p><code>STC</code></p>
</td>
<td class="cellalignment341" headers="r5c1-t3 r1c2-t3">
<p>Select Transaction Calls</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r6c1-t3" headers="r1c1-t3">
<p><code>SPD</code></p>
</td>
<td class="cellalignment341" headers="r6c1-t3 r1c2-t3">
<p>Select Parameter Data</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r7c1-t3" headers="r1c1-t3">
<p><code>SF</code></p>
</td>
<td class="cellalignment341" headers="r7c1-t3 r1c2-t3">
<p>Select Fields</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r8c1-t3" headers="r1c1-t3">
<p><code>SFA</code></p>
</td>
<td class="cellalignment341" headers="r8c1-t3 r1c2-t3">
<p>Select Field Attributes</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r9c1-t3" headers="r1c1-t3">
<p><code>SXF</code></p>
</td>
<td class="cellalignment341" headers="r9c1-t3 r1c2-t3">
<p>Select conversion Formats</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r10c1-t3" headers="r1c1-t3">
<p><code>SXA</code></p>
</td>
<td class="cellalignment341" headers="r10c1-t3 r1c2-t3">
<p>Select Attribute conversions</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The <a id="sthref945"></a>SQL*Plus test scripts in <a href="#g1019813">Table 8-3</a> are provided to perform the identical <code>SELECTS</code> as <code>GENERATE</code> performs to determine which PG DD rows are being used when the TIP is generated. These files are loaded into the <code>%ORACLE_HOME%\\dg4appc\\admin</code> directory on Microsoft Windows or into the <code>$ORACLE_HOME/dg4appc/admin</code> directory on UNIX based systems, during installation.</p>
<div id="APPUG1319" class="tblformal">
<p class="titleintable"><a id="sthref946"></a><a id="g1019813"></a>Table 8-3 SQL*Plus Test Scripts and Their Corresponding Entries</p>
<table class="cellalignment339" title="SQL*Plus Test Scripts and Their Corresponding Entries" summary="The SQL*Plus test scripts in this table are provided to perform the identical SELECTS as GENERATE performs to determine which PG DD rows are being used when the TIP is generated" dir="ltr">
<thead>
<tr class="cellalignment333">
<th class="cellalignment340" id="r1c1-t4">Script</th>
<th class="cellalignment340" id="r1c2-t4">Entry</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment333">
<td class="cellalignment341" id="r2c1-t4" headers="r1c1-t4">
<p><code>pgddsed.sql</code></p>
</td>
<td class="cellalignment341" headers="r2c1-t4 r1c2-t4">
<p>Select Environment Data</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r3c1-t4" headers="r1c1-t4">
<p><code>pgddstl.sql</code></p>
</td>
<td class="cellalignment341" headers="r3c1-t4 r1c2-t4">
<p>Select Transaction (latest version)</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r4c1-t4" headers="r1c1-t4">
<p><code>pgddstv.sql</code></p>
</td>
<td class="cellalignment341" headers="r4c1-t4 r1c2-t4">
<p>Select Transaction (specific version)</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r5c1-t4" headers="r1c1-t4">
<p><code>pgddstc.sql</code></p>
</td>
<td class="cellalignment341" headers="r5c1-t4 r1c2-t4">
<p>Select Transaction Calls</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r6c1-t4" headers="r1c1-t4">
<p><code>pgddspd.sql</code></p>
</td>
<td class="cellalignment341" headers="r6c1-t4 r1c2-t4">
<p>Select Parameter Data</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r7c1-t4" headers="r1c1-t4">
<p><code>pgddsf.sql</code></p>
</td>
<td class="cellalignment341" headers="r7c1-t4 r1c2-t4">
<p>Select Fields</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r8c1-t4" headers="r1c1-t4">
<p><code>pgddsfa.sql</code></p>
</td>
<td class="cellalignment341" headers="r8c1-t4 r1c2-t4">
<p>Select Field Attributes</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r9c1-t4" headers="r1c1-t4">
<p><code>pgddsxf.sql</code></p>
</td>
<td class="cellalignment341" headers="r9c1-t4 r1c2-t4">
<p>Select Conversion Formats</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r10c1-t4" headers="r1c1-t4">
<p><code>pgddsxa.sql</code></p>
</td>
<td class="cellalignment341" headers="r10c1-t4 r1c2-t4">
<p>Select Attribute conversions</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The scripts are shown in the same order used by <code>GENERATE</code> and each script prompts the SQL*Plus user for the required input. The information retrieved from a previous select is often used as input to a subsequent select. If a you suspect that a PG DD field entry has produced inaccurate data, browse the <code>.sql</code> files listed above to determine the source of the problem. These files are loaded into the <code>%ORACLE_HOME%\\dg4appc\\admin</code> directory on Microsoft Windows or <code>$ORACLE_HOME/dg4appc/admin</code> directory on UNIX based systems, during installation.</p>
</div>
<!-- class="sect1" -->
<a id="i1006782"></a>
<div id="APPUG1052" class="sect1">
<h2 class="sect1"><span class="secnum">8.4</span> Data Conversion Errors<a id="sthref947"></a></h2>
<p><a id="sthref948"></a>Data conversion errors are usually the result of:</p>
<ul>
<li>
<p>incorrect determination of datatype</p>
<p>or</p>
</li>
<li>
<p>incorrect specification of data position.</p>
</li>
</ul>
<p>PGAU determination of the datatype is based on the values found in the PG DD, <code>pga_fields</code><code>(mask)</code>, and <code>pga_fields</code><code>(maskopts)</code> columns. PGAU generates <a id="sthref949"></a>PL/SQL code to perform conversions based on the mask value:</p>
<ul>
<li>
<p><a id="sthref950"></a><code>PIC X</code> converted to <code>CHAR</code> with the same character length</p>
</li>
<li>
<p><a id="sthref951"></a><code>PIC G</code> converted to <code>CHAR</code> with the same character length</p>
</li>
<li>
<p><a id="sthref952"></a><code>PIC 9</code> converted to <code>NUMBER</code></p>
</li>
</ul>
<p>Character datatype is presumed for all <code>PIC X</code> and <code>PIC G</code> mask values and conversion errors are more likely the result of position, length, and justification errors.</p>
<p>Determination of numeric datatype depends on several factors, including the combination of mask and maskopts values and how they apply to the actual remote host data in its internal format. Values for mask, maskopts, and data might conflict in unexpected ways. For example, an option such as <code>USAGE IS COMP</code> might be overridden if the data is in display format. While compilers occasionally perform such overrides correctly, they can cause unexpected results when exchanging data with systems coded in other languages.</p>
<p>To notify the user of such overrides, a warning function has been included in the following <code>UTL_PG</code> functions:</p>
<ul>
<li>
<p><code>MAKE _NUMBER_TO_RAW_FORMAT</code></p>
</li>
<li>
<p><code>MAKE_RAW_TO_NUMBER_FORMAT</code></p>
</li>
<li>
<p><code>NUMBER_TO_RAW</code></p>
</li>
<li>
<p><code>RAW_TO_NUMBER</code></p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i1006891"></a>
<div id="APPUG1053" class="sect1">
<h2 class="sect1"><span class="secnum">8.5</span> Problem Analysis with TIP Runtime Traces<a id="sthref953"></a><a id="sthref954"></a><a id="sthref955"></a><a id="sthref956"></a></h2>
<p>TIPs should be generated by the PGAU <code>GENERATE</code> command with the <a id="sthref957"></a><code>PKGEX(DC)</code> diagnostic option to include TIP data conversion trace logic in the TIP. TIP function call trace logic is always included in every TIP. This is runtime trace instrumentation and has some overhead when tracing is enabled, but negligible overhead when tracing is disabled. Refer to <a href="admin_util.htm#i1007070">Section 2.6.9, "GENERATE"</a> in <a href="admin_util.htm#g1029659">Chapter 2, "Procedural Gateway Administration Utility"</a> for more information.</p>
<ol>
<li>
<p>Regenerate TIPs with the <code>PKGEX(DC, DR)</code> options and recompile the TIP body file,<a id="sthref958"></a><a id="sthref959"></a> <code><span class="codeinlineitalic">tipname</span></code>.<code>pkb</code>. Avoid recompiling the TIP specification.</p>
</li>
<li>
<p>Revise the application that calls the TIP initialization function (<code>tipname</code><code>_init</code>) to pass the trace flags parameter with data conversion and function call tracing enabled. Refer to <a href="#i1007000">"Controlling TIP Runtime Data Conversion Tracing"</a>.</p>
<p>If the problem causes an exception to be raised in the TIP and the application contains an exception handler, the application exception handler should be Commented out to prevent it from handling the exception and preventing the exception point of origin from being reported. When the TIP exception is next raised, its source line number in the TIP is reported. Record this information.</p>
</li>
<li id="i1008608">
<p>Execute the application with diagnostic TIP initialization.</p>
<p>If the TIP trace pipe inlet overflows due to the application calls causing the TIP to write trace messages in the TIP trace pipe inlet, you have one minute from the start of the overflow condition to begin Step&nbsp;<a href="#i1008612">4</a> and empty the TIP trace pipe.</p>
<p>Otherwise, exception "<code>ORA-20703 PGA-TIP: pipe send error</code>" is issued, ending the diagnostic session, possibly before any relevant trace information is generated.</p>
</li>
<li id="i1008612">
<p>Retrieve and record the TIP trace message stream.</p>
<p>Use SQL*Plus to connect to the same Oracle user ID executing the application or the user ID under which the TIP is executed. This establishes a second session from which the trace pipe outlet can be read, preventing the TIP trace pipe from overflowing at the TIP trace pipe inlet.</p>
<ol>
<li>
<p>Issue the command:</p>
<pre>
set serveroutput on size nnnnn
</pre></li>
<li>
<p>Issue the command to record the trace output:</p>
<pre>
spool tipname.trc
</pre></li>
<li>
<p>Issue the command to retrieve the trace stream:</p>
<pre>
exec rtrace('tipname');
</pre>
<p>If the application is long-running, repeat this command as often as needed until all trace messages have been retrieved.</p>
</li>
</ol>
</li>
<li id="i1013292">
<p>If any exceptions are raised, note their prefix, number, and full message text.</p>
</li>
<li id="i1013296">
<p>Analyze the TIP trace message stream. A normal trace is shown for the <code>pgadb2i</code> TIP in <a href="apg.htm#g644868">Appendix F, "Administration Utility Samples"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1008852"></a>
<div id="APPUG1054" class="sect1">
<h2 class="sect1"><span class="secnum">8.6</span> TIP Runtime Trace Controls</h2>
<p><a id="sthref960"></a><a id="sthref961"></a><a id="sthref962"></a>Runtime trace control is the second parameter specified on a TIP initialization call. It is a <code>CHAR(8)</code> datatype of the following form:</p>
<pre>
rc := yourtip_init(<span class="italic">trannum,</span>'wxyz0000');
  
</pre>
<p><a href="#g1019847">Table 8-4</a> describes the value of positions one to four:</p>
<div id="APPUG1320" class="tblformal">
<p class="titleintable"><a id="sthref963"></a><a id="g1019847"></a>Table 8-4 Values of Positions 1 through 4 on Second Parameter of TIP Call</p>
<table class="cellalignment339" title="Values of Positions 1 through 4 on Second Parameter of TIP Call" summary="describes the value of positions one through four" dir="ltr">
<thead>
<tr class="cellalignment333">
<th class="cellalignment340" id="r1c1-t5">Item</th>
<th class="cellalignment340" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment333">
<td class="cellalignment341" id="r2c1-t5" headers="r1c1-t5">
<p>position 1 (<code>w</code>)</p>
</td>
<td class="cellalignment341" headers="r2c1-t5 r1c2-t5">
<p>controls <code>UTL_RAW</code> warning. A value of 0 suppresses warnings; a value of 1 issues warnings.</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r3c1-t5" headers="r1c1-t5">
<p>position 2 (<code>x</code>)</p>
</td>
<td class="cellalignment341" headers="r3c1-t5 r1c2-t5">
<p>controls the function entry/exit tracing. A value of 0 suppresses the function entry/exit tracing; a value of 1 enables the function entry/exit tracing.</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r4c1-t5" headers="r1c1-t5">
<p>position 3 (<code>y</code>)</p>
</td>
<td class="cellalignment341" headers="r4c1-t5 r1c2-t5">
<p>controls data conversion tracing. A value of 0 suppresses data conversion tracing; a value of 1 enables data conversion tracing.</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r5c1-t5" headers="r1c1-t5">
<p>position 4 (<code>z</code>)</p>
</td>
<td class="cellalignment341" headers="r5c1-t5 r1c2-t5">
<p>controls gateway exchange tracing. A value of 0 suppresses gateway exchange tracing; a value of 1 enables gateway exchange tracing.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Positions 5 through 8 are reserved and ignored.</p>
<div id="APPUG1055" class="sect2"><a id="sthref964"></a>
<h3 class="sect2"><span class="secnum">8.6.1</span> Generating Runtime Data Conversion Trace and Warning Support</h3>
<p>Use PGAU to regenerate the TIP and specify the <code>GENERATE</code> parameter <code>DIAGNOSE(PKGEX(DC))</code>. This includes runtime PL/SQL code in the TIP which tests for and displays warnings of correct, but possibly unexpected <code>NUMBER_TO_RAW</code> and <code>RAW_TO_NUMBER</code> conversions.</p>
<p>Refer to <a href="admin_util.htm#i1007070">Section 2.6.9, "GENERATE"</a> in <a href="admin_util.htm#g1029659">Chapter 2, "Procedural Gateway Administration Utility"</a> for more information about this parameter.</p>
<p>Recompile the TIP body under SQL*Plus. Avoid recompiling the TIP specification.</p>
</div>
<!-- class="sect2" -->
<a id="i1006980"></a>
<div id="APPUG1056" class="sect2">
<h3 class="sect2"><span class="secnum">8.6.2</span> Controlling <a id="sthref965"></a><a id="sthref966"></a><a id="sthref967"></a>TIP Runtime Conversion Warnings</h3>
<p>After the TIP has been regenerated, the issuance of runtime warnings is under control of the application. By default, warnings are suppressed and are only issued when they are enabled.</p>
<p>Errors and exceptions are always issued if they occur.</p>
<p>To enable the issuance of warnings, an additional parameter must be supplied when calling the TIP initialization function. This parameter is a <code>CHAR(8)</code> datatype and each character position controls a particular TIP runtime diagnostic function.</p>
<p>To enable warnings in <code>yourtip</code>, the client application should call the TIP initialization function with the statement:</p>
<pre>
rc := <span class="italic">yourtip_init(trannum,</span>'10000000');
</pre>
<p>The following is input to the TIP trace pipe inlet at initialization time:</p>
<pre>
"UTL_PG warnings enabled"
</pre></div>
<!-- class="sect2" -->
<div id="APPUG1057" class="sect2"><a id="sthref968"></a>
<h3 class="sect2"><span class="secnum">8.6.3</span> Controlling <a id="sthref969"></a><a id="sthref970"></a><a id="sthref971"></a>TIP Runtime Function Entry/Exit Tracing</h3>
<p>To enable function entry/exit tracing in <code>yourtip</code>, the client application should call the TIP initialization function with the statement:</p>
<pre>
rc := yourtip_init(<span class="italic">trannum,</span>'01000000');
</pre>
<p>The following is input to the TIP trace pipe inlet at initialization time:</p>
<pre>
'function entry/exit trace enabled'
'tipname_init entered'
'time date/time stamp'
</pre></div>
<!-- class="sect2" -->
<a id="i1007000"></a>
<div id="APPUG1058" class="sect2">
<h3 class="sect2"><span class="secnum">8.6.4</span> Controlling <a id="sthref972"></a><a id="sthref973"></a><a id="sthref974"></a>TIP Runtime Data Conversion Tracing</h3>
<p>To enable data conversion tracing in <code>yourtip</code>, the client application should call the TIP initialization function with the following statement:</p>
<pre>
rc := yourtip_init(<span class="italic">trannum,</span>'00100000');
</pre>
<p>The following is input to the TIP trace pipe inlet at initialization time:</p>
<pre>
'data conversion trace enabled'
</pre></div>
<!-- class="sect2" -->
<a id="i1007008"></a>
<div id="APPUG1059" class="sect2">
<h3 class="sect2"><span class="secnum">8.6.5</span> Controlling <a id="sthref975"></a><a id="sthref976"></a><a id="sthref977"></a>TIP Runtime Gateway Exchange Tracing</h3>
<p>To enable runtime gateway exchange tracing in <code>yourtip</code>, the client application should call the TIP initialization function with the following statement:</p>
<pre>
rc := yourtip_init(<span class="italic">trannum,</span>'00010000');
</pre>
<p>The following is input to the TIP trace pipe inlet at initialization time:</p>
<pre>
'gateway exchange trace enabled'
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1007016"></a>
<div id="APPUG1060" class="sect1">
<h2 class="sect1"><span class="secnum">8.7</span> Suppressing TIP Warnings and Tracing<a id="sthref978"></a><a id="sthref979"></a><a id="sthref980"></a></h2>
<p>After debugging is finished, there are two ways to suppress the following:</p>
<ul>
<li>
<p>data conversion tracing</p>
</li>
<li>
<p>conversion warnings</p>
</li>
<li>
<p>function entry/exit tracing</p>
</li>
<li>
<p>gateway exchange tracing</p>
</li>
</ul>
<p>You can:</p>
<ol>
<li>
<p>Call the TIP initialization function without passing any diagnostic control parameters:</p>
<pre>
rc := yourtip_init(<span class="italic">trannum</span><span class="codeinlineitalic">)</span>;
</pre></li>
<li>
<p>Call the TIP initialization function passing a revised diagnostic control parameter which disables all tracing and warnings:</p>
<pre>
rc := yourtip_init(<span class="italic">trannum,</span>'00000000');
</pre>
<p>A third method, described in Method C, removes the logic for:</p>
<ul>
<li>
<p>data conversion tracing</p>
</li>
<li>
<p>conversion warnings</p>
</li>
</ul>
</li>
<li>
<p>Generate the TIP again without:</p>
<pre>
PKGEX(DC)
</pre></li>
</ol>
<p>Or you can recompile the previous version of the TIP body if it was saved.</p>
<p>Methods A and B allow you to use the same TIP without alteration, but without tracing or warnings. These methods are reversible without alteration or replacement of the TIP. Tracing and warnings can be redisplayed should a problem recur.</p>
<p>Method C also suppresses data conversion tracing and warnings and incurs reduced overhead by avoiding tests, but is not reversible without regenerating the TIP or recompiling an alternate version with data conversion tracing and warning diagnostics imbedded.</p>
<p>The logic for function entry/exit and gateway exchange tracing is included in every TIP and cannot be removed. It can be disabled by method A or B.</p>
</div>
<!-- class="sect1" -->
<a id="i1006808"></a>
<div id="APPUG1061" class="sect1">
<h2 class="sect1"><span class="secnum">8.8</span> Problem Analysis of Data Conversion and Truncation Errors<a id="sthref981"></a></h2>
<p>Oracle Database Gateway for APPC data lengths are limited by <a id="sthref982"></a>PL/SQL to 32,763 bytes per APPC exchange and PL/SQL variable.</p>
<p>The following steps can be used to diagnose data conversion or <a id="sthref983"></a>truncation errors.</p>
<p>Refer to <a href="tip.htm#g1011602">Chapter 3, "Creating a TIP"</a> to review the proper values and definitions referenced in items&nbsp;<a href="#i1011660">0</a> through&nbsp;<a href="#i1011646">4</a> below:</p>
<a id="i1011660"></a>
<ol>
<li>
<p>Ensure that the COBOL definitions used in the RHT match the input to PGAU;</p>
</li>
<li>
<p>Ensure the RHT transmission buffers are of sufficient length;</p>
</li>
<li>
<p><span class="bold">If your gateway uses SNA</span>: Ensure the RHT APPC call addresses the correct transmission buffer and uses the correct data length;</p>
<p><span class="bold">If your gateway uses TCP/IP</span>: Ensure the RHT I/O PCB call addresses the correct transmission buffer and uses the correct data length</p>
</li>
<li id="i1011646">
<p>Ensure the client application has declared the correct TIP datatypes used as arguments in the TIP calls.</p>
</li>
<li>
<p>Ensure that the client application is calling the TIP functions in the proper sequence (init, user-defined..., term), and that any input data to the RHT is correct. Also ensure that if multiple user-defined functions exist, they are being called in the proper sequence and passed the correct input values, if any.</p>
<p><code>DBMS_OUTPUT</code> calls can be inserted in the client application to trace its behavior.</p>
<p>For more information about calling TIP functions in proper sequence, refer to the chapter on configuring the Oracle database for first time installations, in the <a class="olink APPCI" href="../e12078/toc.htm"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64</span></a> or <a class="olink APPCW" href="../e12079/toc.htm"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a>.</p>
</li>
<li>
<p><a id="sthref984"></a><a id="sthref985"></a>Optionally, regenerate the TIP with diagnostic traces included and enable them. The following traces are particularly useful:</p>
<ul>
<li>
<p>data conversion trace</p>
</li>
<li>
<p>function entry/exit trace</p>
</li>
<li>
<p>gateway exchange trace</p>
</li>
</ul>
<p>Refer to <a href="#i1006891">"Problem Analysis with TIP Runtime Traces"</a> for more information about traces; refer also to <a href="admin_util.htm#i1007070">GENERATE</a> in <a href="admin_util.htm#g1029659">Chapter 2, "Procedural Gateway Administration Utility"</a>.</p>
<p>Note that the output of the trace is different for a gateway using SNA than for a gateway using TCP/IP. However, the method of invoking the trace is the same regardless of which communication protocol you are using.</p>
<p>On Microsoft Windows, the gateway server tracing must also be enabled in <code>%ORACLE_HOME%\\dg4appc\\admin\init<span class="italic">sid</span>.ora</code>. Set the parameters <a id="sthref986"></a><code>SET TRACE_LEVEL=255</code> and <a id="sthref987"></a><code>SET LOG_DESTINATION=C:\oracle\pga\11.2\dg4appc\log</code></p>
<p>On UNIX based systems, the gateway server tracing must also be enabled in <code>$ORACLE_HOME/dg4appc/admin/init<span class="italic">sid</span>.ora</code>. Set the parameters <a id="sthref988"></a><code>SET TRACE_LEVEL=255</code> and <code><a id="sthref989"></a>SET LOG_DESTINATION=/oracle/pga/11.2/dg4appc/log</code></p>
<p>Refer to <a href="#i1007042">"Gateway Server Tracing"</a> in this guide for more information about tracing.</p>
<ul>
<li>
<p><span class="bold">If your gateway is using SNA</span>: Refer to Appendix A, "Gateway Initialization Parameters for SNA Protocol" in your <span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide</span> for more information about these parameters;</p>
</li>
<li>
<p><span class="bold">If your gateway is using TCP/IP</span>: Refer to Appendix&nbsp;B, "Gateway Initialization Parameters for TCP/IP Communication Protocol" in the <a class="olink APPCI290" href="../../gateways.112/e12078/apb.htm#APPCI290"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64</span></a> or <a class="olink APPCW265" href="../../gateways.112/e12079/apb.htm#APPCW265"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a>. for more information about these parameters.</p>
</li>
</ul>
<p>Rerun the client application and examine the trace (see the next step for details).</p>
<p>To disable the trace, reset</p>
<p><code>SET TRACE_LEVEL=0</code></p>
</li>
<li>
<p>Examine the trace output.</p>
<p>The TIP trace output can be saved in a spool file, such as:</p>
<pre>
spool <span class="italic">tipname</span>.trc
</pre>
<p>TIP trace output is written to a named <code>DBMS_PIPE</code> and can be retrieved under SQL*Plus by issuing the following command:</p>
<pre>
exec rtrace('<span class="italic">tipname</span>');
</pre>
<p>or it can be purged by issuing the following command:</p>
<pre>
exec ptrace('<span class="italic">tipname</span>');  
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<code><span class="codeinlineitalic">tipname</span></code> is case-sensitive and must be specified exactly as it is in the TIP.</div>
<p>Gateway server trace output is written to a log file in a default directory path specified by the <a id="sthref990"></a><code>SET LOG_DESTINATION</code> gateway parameter in <code>%ORACLE_HOME%\\dg4appc\\admin\init<span class="italic">sid</span>.ora</code> for Microsoft Windows and in <code>$ORACLE_HOME/dg4appc/admin/initsid.ora</code> for UNIX based systems. For example, on Microsoft Windows:</p>
<pre>
SET LOG_DESTINATION=C:\oracle\pga\11.2\dg4appc\log
</pre>
<p>On UNIX based systems:</p>
<pre>
SET LOG_DESTINATION=$ORACLE_HOME/dg4appc/log/
</pre>
<p>Refer to <a href="#i1007042">"Gateway Server Tracing"</a> for more information.</p>
<p>The gateway server log file can be viewed be editing the file or by issuing other system commands that display file contents. The log file can also be copied and saved to document problem symptoms.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1007042"></a>
<div id="APPUG1062" class="sect1">
<h2 class="sect1"><span class="secnum">8.9</span> Gateway Server Tracing</h2>
<p><a id="sthref991"></a><a id="sthref992"></a><a id="sthref993"></a>The gateway contains extensive tracing logic in the gateway remote procedural calls (RPCs), and the APPC-specific code. Tracing is enabled through gateway initialization parameters or dynamic RPC calls to the gateway. The trace provides information about the execution of the gateway RPC functions and about the execution of the APPC interface. The trace file contains a text stream written in chronological sequence of events. The trace is designed to assist application programmers with the debugging of their OLTP transaction programs and Oracle applications that communicate with those transaction programs through the gateway.</p>
<p>A single trace file is created for an entire gateway session from the time the database link is opened until it is closed. The trace can be directed to a specific path/filename or to a path (directory) only. In the first case, the file is overwritten each time a new session begins for the gateway being traced. When the trace target is a directory, a separate file with a generated name (containing the operating system process ID) is written for each gateway session. The latter approach must be used whenever the gateway to be traced might be the target of new sessions after the desired trace is written but before it can be copied and saved. Conversely, in some situations you might choose to create a distinct gateway system identifier used solely for tracing, and direct its trace to a single specific filename. This avoids the problem of an ever-increasing set of trace files when, for example, repeated attempts are necessary to reproduce or debug a problem. A fixed filename should never be used if there is any chance that an unexpected gateway session could overlay a useful trace.</p>
<a id="i1007048"></a>
<div id="APPUG1063" class="sect2">
<h3 class="sect2"><span class="secnum">8.9.1</span> Defining the Gateway Trace Destination</h3>
<p>This section describes how to define the destination of trace files to the gateway, and how to cause the gateway to create the trace files during initialization. Note that this does not enable any gateway tracing, it merely defines the destination of any trace output produced when the gateway tracing is enabled.</p>
<ol>
<li>
<p>Choose a gateway system identifier to trace. Decide whether you will be tracing an existing gateway system identifier or a new one created specifically for tracing. If a new system identifier will be used, configure the new system identifier exactly the same as the old one by creating a new <a id="sthref994"></a><a id="sthref995"></a><code>init<span class="italic">sid</span>.ora</code> (a copy of the old), entries in <code>listener.ora</code> as necessary, and a new Oracle database link.</p>
<p>Test the new system identifier to ensure it works before proceeding.</p>
</li>
<li>
<p>For Microsoft Windows, in <code>%ORACLE_HOME%\\dg4appc\\admin</code>, edit the <a id="sthref996"></a><a id="sthref997"></a><code>init<span class="italic">sid</span>.ora</code> file so it contains the following:</p>
<pre>
SET <a id="sthref998"></a><a id="sthref999"></a>TRACE_LEVEL=255
<a id="sthref1000"></a>SET LOG_DESTINATION=<span class="italic">logdest</span> 
</pre>
<p>For UNIX based systems, in <code>$ORACLE_HOME/dg4appc/admin</code>, edit the <a id="sthref1001"></a><a id="sthref1002"></a><code>init<span class="italic">sid</span>.ora</code> file so it contains the following:</p>
<pre>
SET <a id="sthref1003"></a><a id="sthref1004"></a>TRACE_LEVEL=255
<a id="sthref1005"></a>SET LOG_DESTINATION=<span class="italic">logdest</span> 
</pre>
<p>where <code><span class="codeinlineitalic">logdest</span></code> is the directory path for the trace output. The logfile is usually in <code>%ORACLE_HOME%\dg4appc\log</code> for Microsoft Windows and <code>$ORACLE_HOME/dg4appc/log</code> for UNIX based systems. Refer to the earlier discussion about <a href="#i1006808">"Problem Analysis of Data Conversion and Truncation Errors"</a> for more information.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Misspelled parameter names in init<span class="italic">sid</span>.ora are not detected. The parameter is ignored.</div>
</li>
</ol>
<p>Once these two steps are completed, the gateway opens the specified trace file during initialization. Each session on this system identifier writes a trace file as specified by the <a id="sthref1006"></a><code>SET</code> <code>LOG_DESTINATION</code> parameter described in Step 2 above.</p>
<p>If a directory path was specified, each trace file has a name of the form:</p>
<pre>
<span class="italic">sid_pid.log</span> 
</pre>
<p>where <code><span class="codeinlineitalic">sid</span></code> is the gateway sid and <code><span class="codeinlineitalic">pid</span></code> is the operating system process ID of the gateway server expressed in decimal.</p>
</div>
<!-- class="sect2" -->
<div id="APPUG1064" class="sect2"><a id="sthref1007"></a>
<h3 class="sect2"><span class="secnum">8.9.2</span> Enabling the <a id="sthref1008"></a><a id="sthref1009"></a>Gateway Trace</h3>
<p>There are two ways to enable the gateway server tracing. The first is to set the tracing options in the gateway initialization file, <a id="sthref1010"></a><a id="sthref1011"></a><code>init<span class="italic">sid</span>.ora</code>. The second is to use the additional PGA remote procedural call (RPC) function, <code>PGATCTL</code>, to dynamically control the tracing from within the Oracle application. The first method causes tracing to be performed for all users of the gateway system identifier and is recommended only when the use of the gateway system identifier can be limited to users actually needing the trace. The second method is more flexible and allows the application programmer to selectively trace events on a single gateway session without affecting the operation of other users' gateway sessions.</p>
<p>Before the gateway server trace is enabled, perform the tasks listed in <a href="#i1007048">"Defining the Gateway Trace Destination"</a>.</p>
<div id="APPUG1065" class="sect3"><a id="sthref1012"></a>
<h4 class="sect3"><span class="secnum">8.9.2.1</span> Enabling the <a id="sthref1013"></a><a id="sthref1014"></a>Gateway Trace Using Initialization Parameters</h4>
<p>Edit the <a id="sthref1015"></a><a id="sthref1016"></a><code>init<span class="italic">sid</span>.ora</code> file, and add the following line at the end of the file (or, if a <a id="sthref1017"></a><code>SET TRACE_LEVEL</code> parameter is already specified, modify it):</p>
<pre>
SET TRACE_LEVEL=<span class="italic">trace</span> 
</pre>
<p>where <code>trace</code> is a numeric value from 1 to 255 indicating which traces are to be enabled. For further information on the use of this parameter, refer to "PGA Parameters" in Appendix&nbsp;A, "Gateway Initialization Parameters for SNA Protocol" of the <a class="olink APPCI283" href="../../gateways.112/e12078/apa.htm#APPCI283"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for AIX 5L Based Systems (64-Bit), HP-UX Itanium, Solaris Operating System (SPARC 64-Bit), Linux x86, and Linux x86-64</span></a> or <a class="olink APPCW258" href="../../gateways.112/e12079/apa.htm#APPCW258"><span class="italic">Oracle Database Gateway for APPC Installation and Configuration Guide for Microsoft Windows</span></a></p>
<p>Once this step is completed, tracing is enabled for the desired gateway system identifier.</p>
</div>
<!-- class="sect3" -->
<div id="APPUG1066" class="sect3"><a id="sthref1018"></a>
<h4 class="sect3"><span class="secnum">8.9.2.2</span> Enabling the <a id="sthref1019"></a><a id="sthref1020"></a><a id="sthref1021"></a>Gateway Trace Dynamically from <a id="sthref1022"></a>PL/SQL</h4>
<p>The following is only needed for user-written TIPs. PGAU-generated TIPs automatically include the following facilities. Refer to <a href="#i1007008">"Controlling TIP Runtime Gateway Exchange Tracing"</a> for more information.</p>
<p>Make the following changes to the PL/SQL application that calls the Transaction Interface Package(s) to execute remote transaction(s).</p>
<ol>
<li>
<p>Add a call to <code>PGATCTL</code> before any calls to TIP initialization functions are made:</p>
<pre>
PGATCTL@<span class="italic">dblink</span>(convid,
               traceF,
               t<span class="italic">raceS</span>);
</pre>
<p>Where <a href="#g1019874">Table 8-5</a> describes the parameters in <code>PGATCTL</code>:</p>
<div id="APPUG1321" class="tblformal">
<p class="titleintable"><a id="sthref1023"></a><a id="g1019874"></a>Table 8-5 PGATCTL Parameters</p>
<table class="cellalignment339" title="PGATCTL Parameters" summary="describes the parameters in PGATCTL" dir="ltr">
<thead>
<tr class="cellalignment333">
<th class="cellalignment340" id="r1c1-t8">Parameter</th>
<th class="cellalignment340" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment333">
<td class="cellalignment341" id="r2c1-t8" headers="r1c1-t8">
<p><code><span class="codeinlineitalic">dblink</span></code></p>
</td>
<td class="cellalignment341" headers="r2c1-t8 r1c2-t8">
<p>is the name of the database link to the gateway</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r3c1-t8" headers="r1c1-t8">
<p><code><span class="codeinlineitalic">convid</span></code></p>
</td>
<td class="cellalignment341" headers="r3c1-t8 r1c2-t8">
<p><span class="bold">For a gateway using SNA</span>: Conversation identifier returned by the <code>PGAINIT</code> function to be used to identify the conversation.</p>
<p><span class="bold">For a gateway using</span> <span class="bold">TCP/IP</span>: Socket file descriptor returned by the <code>PGAINIT</code> function to be used to identify the conversation</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r4c1-t8" headers="r1c1-t8">
<p><code><span class="codeinlineitalic">traceF</span></code></p>
</td>
<td class="cellalignment341" headers="r4c1-t8 r1c2-t8">
<p>is the trace control function to be performed.</p>
</td>
</tr>
<tr class="cellalignment333">
<td class="cellalignment341" id="r5c1-t8" headers="r1c1-t8">
<p><code><span class="codeinlineitalic">traceS</span></code></p>
</td>
<td class="cellalignment341" headers="r5c1-t8 r1c2-t8">
<p>specifies which traces are to be enabled, as described previously in the discussion of the <a id="sthref1024"></a><code>SET</code> <code>TRACE_LEVEL</code> initialization parameter.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>This call sets the trace flags for all new conversations started after the call to the value specified by <code>traceS</code>.</p>
</li>
<li>
<p>Recompile the PL/SQL application to pick up the new trace call.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment332">
<tr>
<td class="cellalignment341">
<table class="cellalignment337">
<tr>
<td class="cellalignment336"><a href="app_tcp.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment336"><a href="apa.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment344">
<table class="cellalignment335">
<tr>
<td class="cellalignment336"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment336"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment336"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment336"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment336"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment336"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
