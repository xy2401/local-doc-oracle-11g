<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Gateway Configuration Using TCP/IP Communication Protocol</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.1 Build 008" />
<meta name="dcterms.created" content="2009-07-30T16:20:34Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide" />
<meta name="dcterms.identifier" content="E12078-01" />
<meta name="dcterms.isVersionOf" content="APPCI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2004, 2009,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="ch12.htm" title="Previous" type="text/html" />
<link rel="Next" href="ch14.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12078.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/24</span> <!-- End Header --><a id="g1023426"></a><a id="APPCI239"></a><a id="i1008888"></a>
<h1 class="chapter"><span class="secnum">12</span> Gateway Configuration Using TCP/IP Communication Protocol</h1>
<p>This chapter describes how to configure Oracle database for a gateway using TCP/IP for IMS Connect on your UNIX platform. It also provides the steps necessary to verify installation and configuration of the gateway and OLTP components. This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CIHBEJHH">Before You Begin</a></p>
</li>
<li>
<p><a href="#i1011054">Preparing to Configure a Gateway Installation/Upgrade</a></p>
</li>
<li>
<p><a href="#i1014581">Configuring Oracle Database: First-Time Installation</a></p>
</li>
<li>
<p><a href="#i1009515">Optional Configuration Steps to Permit Multiple Users</a></p>
</li>
<li>
<p><a href="#i1008858">Configuring TCP/IP for the Gateway</a></p>
</li>
<li>
<p><a href="#i1007858">Configuring the Gateway</a></p>
</li>
<li>
<p><a href="#i1010100">Loading the PGA_TCP_IMSC Table</a></p>
</li>
<li>
<p><a href="#i1007506">Verifying the Gateway Installation and OLTP Configuration</a></p>
</li>
<li>
<p><a href="#i1007359">Performing Postinstallation Procedures</a></p>
</li>
</ul>
<p><a id="sthref815"></a><a id="sthref816"></a>Configuring Oracle Database Gateway for APPC using TCP/IP support for IMS Connect involves working with the following components:</p>
<ul>
<li>
<p>Oracle database</p>
</li>
<li>
<p>UNIX system</p>
</li>
<li>
<p>Network</p>
</li>
<li>
<p>OLTP</p>
</li>
</ul>
<a id="CIHBEJHH"></a><a id="APPCI240"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.1</span> Before You Begin</h2>
<p>This chapter requires you to input parameters unique to your system to correctly configure the gateway and TCP/IP communications interface.</p>
<p>Refer to <a href="ape.htm#g635941">Appendix D, "Configuration Worksheet"</a> for a worksheet listing the installation parameters that you will need to know before you can complete the configuration process. Ask your network administrator to provide you with these unique parameter names before you begin.</p>
</div>
<!-- class="sect1" -->
<a id="i1011054"></a><a id="APPCI241"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.2</span> Preparing to Configure a Gateway Installation<a id="sthref817"></a><a id="sthref818"></a>/Upgrade</h2>
<p>There are three ways to establish the gateway and Oracle database relationship when you are installing, upgrading, or migrating the gateway:</p>
<ul>
<li>
<p><a href="#i1011353">When Oracle Database and the Gateway Are Installed in the Same ORACLE_HOME</a></p>
</li>
<li>
<p><a href="#i1011368">When Oracle Database and the Gateway Are Installed on Separate Systems</a></p>
</li>
<li>
<p><a href="#i1011275">When Oracle Database and the Gateway Are on the Same System but in Different Directories</a></p>
</li>
</ul>
<p><a id="sthref819"></a><a id="sthref820"></a><a id="sthref821"></a>Depending on the location of your gateway and your Oracle database, you might need to transfer some of the gateway administrative files to the location where Oracle database is installed.</p>
<p>Follow the instructions applicable to your combination of the gateway-Oracle database locations listed below.</p>
<p class="subhead1"><a id="i1011353"></a><a id="APPCI365"></a>When Oracle Database and the Gateway Are Installed in the Same ORACLE_HOME</p>
<p>You do not need to transfer files. Proceed to <a href="#i1014581">Configuring Oracle Database: First-Time Installation</a>.</p>
<p class="subhead1"><a id="i1011368"></a><a id="APPCI366"></a>When Oracle Database and the Gateway Are Installed on Separate Systems</p>
<p>When Oracle database and the gateway are installed on separate systems, you need to perform the following tasks:</p>
<ol>
<li>
<p>Locate the gateway administrative files in the gateway <code>$ORACLE_HOME/dg4appc/admin</code> directory. All files in this directory that have the suffix <code>.sql</code>, <code>.pkh</code>, and <code>.pkb</code> must be copied into a similarly named directory in the Oracle database Oracle home directory.</p>
</li>
<li>
<p>Now, locate the gateway demo files and subdirectories in the gateway <code>$ORACLE_HOME/dg4appc/demo</code> directory. Copy the <code>pgavsn.sql</code> and <code>pgaecho.sql</code> files into a similarly named directory on Oracle database.</p>
</li>
<li>
<p>Copy the <code><a id="sthref822"></a>pgaims.sql</code> file from the gateway Oracle home <code>$ORACLE_HOME/dg4appc/demo/IMS</code> directory to the Oracle database Oracle home <code>$ORACLE_HOME/dg4appc/demo/IMS</code> directory.</p>
<p><span class="bold">Optional Steps</span>: If you want to run <code>IVTNV</code> and <code>IVTNO</code>, then you will need to copy the <code><a id="sthref823"></a><a id="sthref824"></a><a id="sthref825"></a><a id="sthref826"></a><a id="sthref827"></a>ivtno.ctl</code>, <code>ivtnod.sql</code>, <code>ivtnv.ctl</code>, and <code>ivtnvd.sql</code> files into the Oracle database Oracle home at <code>$ORACLE_HOME/dg4appc/demo/IMS</code> directory as well. Ensure that you generate the required TIPs and transfer them as well.</p>
</li>
</ol>
<p class="subhead1"><a id="i1011275"></a><a id="APPCI367"></a>When Oracle Database and the Gateway Are on the Same System but in Different Directories</p>
<p>You must change your gateway Oracle home to the Oracle database Oracle home directory.</p>
<ol>
<li>
<p>For example, if your gateway Oracle home is set as follows:</p>
<pre>
$ echo $ORACLE_HOME
/oracle/pga/11.2
</pre>
<p>and the server Oracle home is located in the <code>/oracle/pga/11.2</code> directory, then you need to do the following:</p>
<pre>
$ ORACLE_HOME=/oracle/pga/11.2; export ORACLE_HOME
</pre></li>
<li>
<p>Now, create the directories with the following commands:<a id="sthref828"></a></p>
<pre>
$ cd $ORACLE_HOME
$ mkdir dg4appc
$ mkdir dg4appc/admin
$ mkdir dg4appc/demo
$ mkdir dg4appc/demo/IMS
</pre></li>
<li>
<p>Use whatever file transfer mechanism is available on your system to copy all of the <code>.sql</code>, <code>.pkh</code>, and <code>.pkb</code> files from the gateway Oracle home <code>$ORACLE_HOME/dg4appc/admin</code> directory to the Oracle database Oracle home <code>$ORACLE_HOME/dg4appc/admin</code> directory.</p>
</li>
<li>
<p>You might also transfer the demo files from the gateway directory to the Oracle database directory. Copy the <code>pgavsn.sql</code> and <code>pgaecho.sql</code> files <code>and</code> directory recursively from the gateway Oracle home <code>$ORACLE_HOME/dg4appc/demo</code> directory to the Oracle database <code>$ORACLE_HOME/dg4appc/demo</code> directory.</p>
</li>
<li>
<p>You might also copy the <code><a id="sthref829"></a>pgaims.sql</code> file from the gateway Oracle home <code>$ORACLE_HOME/dg4appc/demo/IMS</code> directory to the Oracle database Oracle home <code>$ORACLE_HOME/dg4appc/demo/IMS</code> directory.</p>
<p><span class="bold">Optional Steps</span>: If you want to run <code>IVTNV</code> and <code>IVTNO</code>, then you will need to copy the <code><a id="sthref830"></a><a id="sthref831"></a><a id="sthref832"></a><a id="sthref833"></a><a id="sthref834"></a>ivtno.ctl</code>, <code>ivtnod.sql</code>, <code>ivtnv.ctl</code>, and <code>ivtnvd.sql</code> files into the Oracle database Oracle home <code>$ORACLE_HOME/dg4appc/demo/IMS</code> directory as well. Ensure that you generate the required TIPs and transfer them as well.</p>
</li>
</ol>
<p>Proceed with <a href="#i1014581">Configuring Oracle Database: First-Time Installation</a>. Following those steps, you may want to perform the <a href="#i1009515">Optional Configuration Steps to Permit Multiple Users</a>,.</p>
</div>
<!-- class="sect1" -->
<a id="i1014581"></a><a id="APPCI242"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.3</span> Configuring Oracle Database: First-Time Installation</h2>
<p>Follow these steps to configure your <a id="sthref835"></a>Oracle database after installing the Oracle Database Gateway for APPC.</p>
<ol>
<li>
<p>Ensure that the <a id="sthref836"></a><a id="sthref837"></a><a id="sthref838"></a><code>UTL_RAW</code> PL/SQL package has been installed on Oracle database. <a id="sthref839"></a><a id="sthref840"></a>All TIP specifications generated by Procedural Gateway Administrative Utility (PGAU) use <code>UTL_RAW</code>, which provides routines for manipulating raw data.</p>
<ol>
<li>
<p><a id="CHDIICCB"></a>Use <a id="sthref841"></a>SQL*Plus to connect to Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p>From SQL*Plus, enter the following command:</p>
<pre>
SQL&gt; DESCRIBE UTL_RAW
</pre>
<p>The <code>DESCR<a id="sthref842"></a>IBE</code> statement produces output on your screen. If you browse through the output, then you should see some functions, including a compare function. If you do not see this output, then continue the <code>UTL_RAW</code> installation by performing Step&nbsp;<a href="#i1009553">d</a> below.</p>
<p>If the <a id="sthref843"></a><a id="sthref844"></a><code>DESCRIBE</code> statement indicates success, then Oracle database has <a id="sthref845"></a><code>UTL_RAW</code> installed and you can proceed to Step&nbsp;<a href="#i1009086">2</a>.</p>
</li>
<li>
<p>Use SQL*Plus to connect to Oracle database as <code>SYS</code>.</p>
</li>
<li>
<p><a id="i1009553"></a>From SQL*Plus, run the <a id="sthref846"></a><a id="sthref847"></a><code>utlraw.sql</code> and <a id="sthref848"></a><a id="sthref849"></a><code>prvtrawb.plb</code> scripts in the Oracle database <code>$ORACLE_HOME/rdbms/admin</code> directory in the following order:</p>
<pre>
SQL&gt; @$ORACLE_HOME/rdbms/admin/utlraw.sql
SQL&gt; @$ORACLE_HOME/rdbms/admin/prvtrawb.sql
</pre></li>
</ol>
</li>
<li>
<p><a id="i1009086"></a>Ensure that the <a id="sthref850"></a><a id="sthref851"></a><code>DBMS_OUTPUT</code> standard PL/SQL <a id="sthref852"></a><a id="sthref853"></a><a id="sthref854"></a>package is enabled on <a id="sthref855"></a>Oracle database. The sample programs and installation verification programs on the distribution media use this standard package.</p>
<ol>
<li>
<p>If necessary, use SQL*Plus to connect to the Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre>
SQL&gt; DESCRIBE DBMS_OUTPUT
</pre>
<p>The <a id="sthref856"></a><a id="sthref857"></a><code>DESCRIBE</code> statement produces output on screen. If you browse through that output, then you should see some functions, including a <a id="sthref858"></a><a id="sthref859"></a><code>put_line</code> function.</p>
<p>If you do not see this output, then you must create the <code>DBMS_OUTPUT</code> package. Refer to the <a class="olink EXPRN" href="../../appdev.112/e14919/toc.htm"><span class="italic">Oracle Database Rules Manager and Expression Filter Developer's Guide</span></a> for more information about creating the <code>DBMS_OUTPUT</code> package. After installing the <code>DBMS_OUTPUT</code> package successfully, run the <code>DESCRIBE</code> statement.</p>
<p>If the <code>DESCRIBE</code> statement indicates success, then Oracle database has <code>DBMS_OUTPUT</code> created and you can proceed to Step&nbsp;3.</p>
</li>
</ol>
</li>
<li>
<p>Install the <a id="sthref860"></a><a id="sthref861"></a><code>UTL_PG</code> PL/SQL package. All <a id="sthref862"></a><a id="sthref863"></a>PGAU-generated TIP specifications use <code>UTL_PG</code>, which provides routines for performing numeric conversions to and from raw data.</p>
<ol>
<li>
<p>If necessary, use SQL*Plus to connect to Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref864"></a><a id="sthref865"></a>utlpg.sql</code> and <code><a id="sthref866"></a><a id="sthref867"></a>prvtpgb.plb</code> scripts in the Oracle database <code>$ORACLE_HOME/rdbms/admin</code> directory in the following order:</p>
<pre>
SQL&gt; @$ORACLE_HOME/rdbms/admin/utlpg.sql
SQL&gt; @$ORACLE_HOME/rdbms/admin/prvtpgb.plb
</pre></li>
</ol>
</li>
<li>
<p>I<a id="sthref868"></a>nstall the Heterogeneous Services (HS) catalogs.</p>
<ol>
<li>
<p>If necessary, use SQL*Plus to connect to Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre>
SQL&gt; DESCRIBE HS_FDS_CLASS
</pre>
<p>The <code>DESCRIBE</code> statement produces output on your screen. If the <code>DESCRIBE</code> statement indicates success, then heterogeneous services catalogs have been created on Oracle database and you can proceed to Step&nbsp;<a href="#i1008586">5</a>.</p>
<p>If the DESCRIBE statement does not indicate success, then you must create Heterogeneous Services catalogs, and you must follow Step&nbsp;<a href="#i1011512">c</a> below:</p>
</li>
<li>
<p><a id="i1011512"></a>If it is necessary to create the Heterogeneous Services catalog, then enter the following command:</p>
<pre>
SQL&gt; @$ORACLE_HOME/rdbms/admin/caths.sql
</pre></li>
</ol>
</li>
<li>
<p><a id="i1008586"></a><a id="sthref869"></a><a id="sthref870"></a>Create a public database link to access the Oracle Database Gateway for APPC:<a id="sthref871"></a></p>
<p>Use <a id="sthref872"></a>SQL*Plus to connect to the <a id="sthref873"></a>Oracle database as the <code>SYSTEM</code> user. You can use the following SQL*Plus<a id="sthref874"></a> sample whether the Oracle database and the gateway are on the same system or on different systems. In the following sample, <code>pgasrv</code> is the <code><span class="codeinlineitalic">tns_name_entry</span></code> that will be assigned to the gateway when you modify the <code><a id="sthref875"></a><a id="sthref876"></a>tnsnames.ora</code> file later in this chapter.</p>
<pre>
SQL&gt; CREATE PUBLIC DATABASE LINK PGA USING <span class="italic">'PGASRV'</span>
</pre></li>
<li>
<p>Create the gateway administrator user (<a id="sthref877"></a><code>PGAADMIN</code>) and install the <a id="sthref878"></a>PG DD.</p>
<ol>
<li>
<p>Use SQL*Plus to connect to Oracle database as the <code>SYSTEM</code> user.</p>
</li>
<li>
<p>From SQL*Plus, run the <code>pgacr8au.sql</code> <a id="sthref879"></a><a id="sthref880"></a>script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script creates the <code>PGAADMIN</code> user&nbsp;ID.</p>
<p>The initial password defined for <a id="sthref881"></a><code>PGAADMIN</code> is <code>PGAADMIN</code>. Use the <a id="sthref882"></a><a id="sthref883"></a><code>ALTER USER</code> command to change the password. For further information about password issues, refer to the <a class="olink SQLRF" href="../../server.112/e41084/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a>.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgacr8au.sql
</pre></li>
<li>
<p>Use SQL*Plus to connect to the Oracle database as <code>PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code>pgddcr8.sql</code> <a id="sthref884"></a><a id="sthref885"></a><a id="sthref886"></a>script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script installs the PG&nbsp;DD.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgddcr8.sql
</pre></li>
<li>
<p>From SQL*Plus, connect to the Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p><a id="sthref887"></a>Grant execute privileges on <a id="sthref888"></a><code>DBMS_PIPE</code> to <code>PGAADMIN</code>:<a id="sthref889"></a></p>
<pre>
SQL&gt; GRANT EXECUTE ON DBMS_PIPE TO PGAADMIN
</pre></li>
</ol>
</li>
<li>
<p>Ensure that the <a id="sthref890"></a><code>pg4tcpmap</code> package has been installed on your Oracle database. Follow Steps&nbsp;a through&nbsp;c to test for proper installation of <code>pg4tcpmap</code>.</p>
<p>Refer to <a href="apb.htm#i632026">Output for the pg4tcpmap Tool</a> in <a href="apb.htm#g635076">Appendix B</a> for a sample of the output from the <code>pg4tcpmap</code> tool, and refer to Chapter 6 of the <a class="olink APPUG600" href="../../gateways.112/e12071/tcpmap.htm#APPUG600"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a> for details about the commands needed to run the tool.</p>
<ol>
<li>
<p>Use <a id="sthref891"></a>SQL*Plus to connect to Oracle database as the <code>SYSTEM</code> user.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre>
SQL&gt; select owner, table_name
from dba_tables
where table_name = 'PGA_TCP_IMSC', 
and owner = 'PGAADMIN';
SQL&gt; column owner format a 10
SQL&gt; column index_name format a 18
SQL&gt; column table_name format a 14
SQL&gt; select owner, index_name, table_name
from dba_indexes
where index_name = 'PGA_TCP_IMSC_IND';
</pre>
<p>Each <code>SELECT</code> statement must produce one row. The following output is the result of the first <code>SELECT</code> statement:</p>
<pre>
TABLE_NAME                        OWNER            
------------------------------   ------------------------------
PGA_TCP_IMSC                      PGAADMIN
</pre>
<p>The following output is the result of the second <code>SELECT</code> statement:</p>
<pre>
OWNER          INDEX_NAME           TABLE_NAME      UNIQUENESS
----------     ------------------   --------------  ---------
PGAADMIN       PGA_TCP_IMSC_IND     PGA_TCP_IMSC    UNIQUE
</pre>
<p>If the <code>SELECT</code> statements produce the preceding output on your screen, then you can skip to Step 8. If the <code>SELECT</code> statement produces no output or more than one row, then the result is not the same as the output described above, and it is necessary for you to perform Step 1.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref892"></a>pgaimsc.sql</code> script in the Oracle database <code>$ORACLE_HOME/dg4appc/admin</code> directory:</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgaimsc.sql
</pre></li>
</ol>
</li>
<li>
<p>Install the <a id="sthref893"></a><a id="sthref894"></a>TIP trace access PL/SQL routines. These routines require that the <a id="sthref895"></a><code>DBMS_PIPES</code> standard PL/SQL package is installed and that <a id="sthref896"></a><code>PGAADMIN</code> has execute privileges on it. For more information on <code>DBMS_PIPES</code>, refer to the <a class="olink EXPRN" href="../../appdev.112/e14919/toc.htm"><span class="italic">Oracle Database Rules Manager and Expression Filter Developer's Guide</span></a>.</p>
<ol>
<li>
<p>If necessary, use SQL*Plus to connect to the <a id="sthref897"></a>Oracle database as user <code>PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref898"></a>pgatiptr.sql</code> script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script creates<a id="sthref899"></a> PL/SQL routines that can be called to read and purge trace information created by PGAU-generated <a id="sthref900"></a>TIP specifications. It also creates public synonyms for these routines. The script prompts you for the necessary user&nbsp;IDs and passwords.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgatiptr.sql
</pre></li>
</ol>
</li>
<li>
<p>Install the <code>GPGLOCAL</code> package. This package is required for compilation and execution of all PGAU-generated <a id="sthref901"></a>TIP specifications. <a id="sthref902"></a><a id="sthref903"></a><a id="sthref904"></a>TIP developers should be granted execute privileges on <a id="sthref905"></a><code>GPGLOCAL</code> (refer to <a href="#i1009515">Optional Configuration Steps to Permit Multiple Users</a>).</p>
<ol>
<li>
<p>Use SQL*Plus to connect to Oracle database as <a id="sthref906"></a><code>PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref907"></a><a id="sthref908"></a>gpglocal.pkh</code> script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script compiles the <a id="sthref909"></a><a id="sthref910"></a><code>GPGLOCAL</code> package specification.<a id="sthref911"></a><a id="sthref912"></a></p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/gpglocal.pkh
</pre></li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref913"></a><a id="sthref914"></a>gpglocal.pkb</code> script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script compiles the <code>GPGLOCAL</code> package body.<a id="sthref915"></a><a id="sthref916"></a></p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/gpglocal.pkb
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<span class="bold">Recompile TIPs when changing communication protocol from SNA to TCP/IP</span>:
<p>If you have existing TIPs that were generated previously on a gateway using the SNA communication package protocol and you want to utilize the new TCP/IP feature, then the TIPs have to be regenerated by PGAU with certain mandatory <code>NLS_LANGUAGE</code> and Side Profile Settings. Specify the correct ASCII character set in the <code>DEFINE TRANSACTION</code> command.</p>
<p>This is because the gateway assumes that the correct user exit in IMS Connect is being used, which would translate between the correct ASCII and EBCDIC character sets.</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDJCDEC"></a><a id="APPCI243"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.4</span> Upgrading or Migrating the Oracle Database from Previous Gateways<a id="sthref917"></a><a id="sthref918"></a></h2>
<p>Follow these instructions only if you have a previous version of the Oracle Database Gateway for APPC installed on your system and need to configure it for Release 11.2 of the gateway.</p>
<ol>
<li>
<p>Upgrade your Oracle Database Gateway for APPC to current version levels as follows:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p><a id="CHDCFHDH"></a>Install the <code>UTL_RAW</code> package body. From SQL*Plus, run the <code>prvtrawb.plb</code> <a id="sthref919"></a><a id="sthref920"></a>script from the <code>$ORACLE_HOME/rdbms/admin</code> directory. This script upgrades the <code>UTL_RAW</code> package body.</p>
<pre>
SQL&gt; @$ORACLE_HOME/rdbms/admin/prvtrawb.plb
</pre></li>
<li>
<p><a id="CHDCGCGF"></a>Install the <code>UTL_PG</code> package body. From SQL*Plus, run the <code>prvtpgb.plb</code> <a id="sthref921"></a><a id="sthref922"></a>script from the <code>$ORACLE_HOME/rdbms/admin</code> directory.<a id="sthref923"></a><a id="sthref924"></a> This script upgrades the <code>UTL_PG</code> package body.</p>
<pre>
SQL&gt; @$ORACLE_HOME/rdbms/admin/prvtpgb.plb
</pre>
<p>The <code>prvtrawb.plb</code> and <code>prvtpgb.plb</code> scripts should complete successfully. If they fail because specifications do not exist or were invalidated, then consider reinstalling the package specifications as directed in the following section.</p>
</li>
</ol>
</li>
</ol>
<a id="APPCI244"></a>
<div class="sect2"><a id="sthref925"></a>
<h3 class="sect2"><span class="secnum">12.4.1</span> If You Must <a id="sthref926"></a><a id="sthref927"></a>Reinstall Package Specifications</h3>
<p>If the <a id="sthref928"></a><a id="sthref929"></a><code>UTL_RAW</code> or <a id="sthref930"></a><a id="sthref931"></a><code>UTL_PG</code> package has been invalidated or deinstalled, then the <code>prvtrawb.plb</code> and <code>prvtpgb.plb</code> scripts might not complete successfully. You may have to reinstall <a id="sthref932"></a><a id="sthref933"></a><a id="sthref934"></a>the package specifications.</p>
<p>If you do reinstall the package specifications, then any dependent objects (such as existing user TIPs and client applications) are invalidated and subsequently need to be recompiled. The impact of this is a one-time performance delay while recompilation of the TIPs and dependent client applications proceeds.</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
Before proceeding with reinstallation of the package scripts, ensure that you are in the <code>$ORACLE_HOME/dg4appc/admin</code> directory.</div>
<p>TIPs were split into separate specification and body files in release&nbsp;3.3 to avoid cascaded recompilations in later releases.</p>
<dl>
<dd><a id="sthref935"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Run the Following Scripts Before Proceeding with the PGAU Upgrade</dt>
<dd>
<p>From SQL*Plus, run the <code>utlraw.sql</code> script:</p>
<ol>
<li>
<p>If necessary, use SQL*Plus to connect to the Oracle database as the <code>SYS</code> user.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref936"></a><a id="sthref937"></a>utlraw.sql</code> and <code><a id="sthref938"></a><a id="sthref939"></a>utlpg.sql</code> scripts in the Oracle database <code>$ORACLE_HOME/rdbms/admin</code> directory, in the following order, to upgrade their respective package specifications:<a id="sthref940"></a><a id="sthref941"></a><a id="sthref942"></a><a id="sthref943"></a></p>
<pre>
SQL&gt; @$ORACLE_HOME/rdbms/admin/utlraw.sql
SQL&gt; @$ORACLE_HOME/rdbms/admin/utlpg.sql
</pre></li>
</ol>
</dd>
<dd><a id="sthref944"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Repeat Installation of UTL_RAW and UTL_PG Package Body</dt>
<dd>
<p>After the scripts have run, repeat Steps b and c in <a href="#CHDJCDEC">"Upgrading or Migrating the Oracle Database from Previous Gateways"</a>. Then, proceed to the section titled <a href="#CHDGEIIG">"Upgrading PGAU from Previous Gateway Releases"</a>.</p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
TIPs and dependent client applications must be recompiled after reinstallation of the package specifications. Refer to the "Compiling a TIP" section in Chapter&nbsp;3 of the <a class="olink APPUG968" href="../../gateways.112/e12071/tip.htm#APPUG968"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a> for information about compiling TIPs.</div>
</dd>
</dl>
</div>
<!-- class="sect2" -->
<a id="CHDGEIIG"></a><a id="APPCI245"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">12.4.2</span> Upgrading PGAU from Previous Gateway Releases</h3>
<p>Upgrade the <a id="sthref945"></a>PG DD as follows before running the new PGAU:</p>
<ol>
<li>
<p>If necessary, use SQL*Plus to connect to Oracle database as the <code>PGAADMIN</code> user.</p>
</li>
<li>
<p>From SQL*Plus, run the <code>pgddupgr.sql</code> <a id="sthref946"></a><a id="sthref947"></a>script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script upgrades the PG&nbsp;DD.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1009515"></a><a id="APPCI246"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.5</span> Optional Configuration Steps<a id="sthref948"></a><a id="sthref949"></a><a id="sthref950"></a> to Permit Multiple Users</h2>
<p>The following configuration steps are optional. Perform these steps if you want to allow users other than <a id="sthref951"></a><code>PGAADMIN</code> to perform <a id="sthref952"></a>PG DD operations using PGAU.</p>
<ol>
<li>
<p>Create <a id="sthref953"></a><a id="sthref954"></a>public synonyms for the PG DD to allow other users to access the tables:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to Oracle database as the <code>SYSTEM</code> user.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref955"></a><a id="sthref956"></a>pgddcr8s.sql</code> script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script creates public synonyms for the PG DD.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgddcr8.sql
</pre></li>
</ol>
</li>
<li>
<p>Create roles for accessing the PG DD, performing definitions of transactions, and generating <a id="sthref957"></a>TIP specifications. The <code>PGAADMIN</code> user can grant these roles to other users as necessary.</p>
<ol>
<li>
<p>Use SQL*Plus to connect to Oracle database as user <code>PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the <code><a id="sthref958"></a><a id="sthref959"></a>pgddcr8r.sql</code> script in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. This script creates two roles, <code>PGDDDEF</code> and <code>PGDDGEN</code>. The <a id="sthref960"></a><a id="sthref961"></a><code>PGDDDEF</code> role provides <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, and <code>DELETE</code> privileges against some of the <a id="sthref962"></a>PG DD tables, and <code>SELECT</code> privileges against others, and allows execution of the PGAU <code>DEFINE</code>, <code>GENERATE</code>, <code>REDEFINE</code>, <code>REPORT</code>, and <code>UNDEFINE</code> statements. The <a id="sthref963"></a><a id="sthref964"></a><code>PGDDGEN</code> role provides select privileges against the PG DD tables and allows execution of the PGAU <code>GENERATE</code> and <code>REPORT</code> statements only.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgddcr8r.sql
</pre></li>
</ol>
</li>
<li>
<p><a id="sthref965"></a><a id="sthref966"></a><a id="sthref967"></a><a id="sthref968"></a>Grant access to PGA required packages.</p>
<p><a id="sthref969"></a><a id="sthref970"></a>TIP developers require access to the following PL/SQL packages, which are shipped with <a id="sthref971"></a>Oracle database:</p>
<ul>
<li>
<p><a id="sthref972"></a><code>DBMS_PIPE</code> in the <code>$ORACLE_HOME/rdbms/admin<a id="sthref973"></a></code> directory</p>
</li>
<li>
<p><a id="sthref974"></a><code>UTL_RAW</code> in the <code>$ORACLE_HOME/rdbms/admin</code><a id="sthref975"></a> directory</p>
</li>
<li>
<p><a id="sthref976"></a><code>UTL_PG</code> in the <code>$ORACLE_HOME/rdbms/admin</code><a id="sthref977"></a><a id="sthref978"></a> directory</p>
</li>
</ul>
<p>Explicit grants to run these packages must be made to TIP developers.</p>
<p>These grants can be private as in the following example:</p>
<pre>
$ sqlplus SYS/ pw@database_specification_string
SQL&gt; GRANT EXECUTE ON UTL_RAW TO tip_developer;
SQL&gt; GRANT EXECUTE ON UTL_PG TO tip_developer;
SQL&gt; GRANT EXECUTE ON DBMS_PIPE TO tip_developer;
SQL&gt; CONNECT PGAADMIN/ pw@database_specification_string
SQL&gt; GRANT EXECUTE ON PGAADMIN.PURGE_TRACE TO tip_developer;
SQL&gt; GRANT EXECUTE ON PGAADMIN.READ_TRACE TO tip_developer;
SQL&gt; GRANT EXECUTE ON PGAADMIN.GPGLOCAL TO tip_developer;
SQL&gt; EXIT
</pre>
<p>Alternatively, these grants can be public as in the following example:</p>
<pre>
$ sqlplus SYS/pw@ database_specification_string
SQL&gt; GRANT EXECUTE ON UTL_RAW TO PUBLIC;
SQL&gt; GRANT EXECUTE ON UTL_PG TO PUBLIC;
SQL&gt; GRANT EXECUTE ON DBMS_PIPE to PUBLIC;
SQL&gt; CONNECT PGAADMIN/ pw@database_specification_string
SQL&gt; GRANT EXECUTE ON PGAADMIN.PURGE_TRACE TO PUBLIC;
SQL&gt; GRANT EXECUTE ON PGAADMIN.READ_TRACE TO PUBLIC;
SQL&gt; GRANT EXECUTE ON PGAADMIN.GPGLOCAL TO PUBLIC;
SQL&gt; EXIT
</pre>
<p>You can use either private or public grants. Both are sufficient for using PGA. Public grants are easier and can be performed now. If you use private grants, then they must be given each time a new TIP developer user ID is created.</p>
<p>SQL scripts for performing these grants are provided in the <code>$ORACLE_HOME/dg4appc/admin</code> directory. The<a id="sthref979"></a><a id="sthref980"></a> <code><a id="sthref981"></a><a id="sthref982"></a>pgddapub.sql</code> script performs these grants for public access to the packages. The <code><a id="sthref983"></a><a id="sthref984"></a><a id="sthref985"></a><a id="sthref986"></a>pgddadev.sql</code> script performs the grants for private access to the packages by a single TIP developer. If you are going to use private grants, then you must run the <code>pgddadev.sql</code> script once for each TIP developer user&nbsp;ID:</p>
<ol>
<li>
<p>Use SQL*Plus to connect to Oracle database as <code>PGAADMIN</code>.</p>
</li>
<li>
<p>From SQL*Plus, run the appropriate script (<code>pgddapub.sql</code> or <code>pgddadev.sql</code>) from the <code>$ORACLE_HOME/dg4appc/admin</code> directory. The script performs the necessary grants as described earlier. You are prompted for the required user&nbsp;IDs, passwords, and database specification strings. If you are using private grants, then repeat this step for each user&nbsp;ID requiring access to the packages.</p>
<p>If you are using private grants, then repeat this step for each user ID requiring access to the packages.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgddapub.sql
</pre>
<p>or</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/admin/pgddadev.sql
</pre></li>
</ol>
</li>
<li>
<p><a id="sthref987"></a><a id="sthref988"></a>If you are upgrading from a previous release of the gateway when the communication protocol was SNA, to the current gateway using TCP/IP, and if you want to upgrade your existing <a id="sthref989"></a><a id="sthref990"></a><a id="sthref991"></a>TIPs with new function and maintenance, then regenerate existing T<a id="sthref992"></a>IP specifications using the <a id="sthref993"></a>PGAU <code>GENERATE</code> statement.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <a id="sthref994"></a>PGAU has been enhanced to automatically upgrade existing PG DD entries <a id="sthref995"></a><a id="sthref996"></a>with a new attribute when a <a id="sthref997"></a>PGAU <code>GENERATE</code> command is executed. To support this enhancement, add a new privilege to the <a id="sthref998"></a><code>PGDDGEN</code> role. To do this as the <code>PGAADMIN</code> user, use SQL*Plus to connect to the Oracle database installation where the PG&nbsp;DD is stored. Then issue the following SQL command:
<pre>
SQL&gt; GRANT INSERT ON PGA_DATA_VALUES TO PGDDGEN
</pre></div>
<ol>
<li>
<p>Start PGAU from the directory path where the PGAU control files are generated and where TIPs are stored:</p>
<pre>
$ pgau
PGAU&gt; CONNECT PGAADMIN/pgaadmin@<span class="italic">database_specification_string</span> 
PGAU&gt; GENERATE <span class="italic">tranname</span> 
PGAU&gt; EXIT
</pre></li>
</ol>
<p>For more information about the <code>GENERATE</code> command, refer to the PGAU <code>GENERATE</code> command section in Chapter 2 of the <a class="olink APPUG944" href="../../gateways.112/e12071/admin_util.htm#APPUG944"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a>.</p>
<p>Note that it is not necessary to define the PG DD entries again.</p>
</li>
<li>
<p>Start SQL*Plus in the same directory path where the newly-generated TIP specifications are stored.</p>
<pre>
$ sqlplus <span class="italic">tip_owner/pw@database_specification_string</span> 
SQL&gt; @<span class="italic">tipname.</span>pkh 
SQL&gt; @<span class="italic">tipname</span>.pkb
SQL&gt; exit
</pre>
<p><a id="sthref999"></a><a id="sthref1000"></a><a id="sthref1001"></a>PGAU <code>GENERATE</code> produces the TIP in two output files: a specification and a body. You must compile both, first the specification and then the body.</p>
<p>For more information about the <code>GENERATE</code> command, refer to the PGAU <code>GENERATE</code> command section in Chapter 2, of the <a class="olink APPUG944" href="../../gateways.112/e12071/admin_util.htm#APPUG944"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1008858"></a><a id="APPCI247"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.6</span> <a id="sthref1002"></a><a id="sthref1003"></a>Configuring <a id="sthref1004"></a>TCP/IP for the Gateway</h2>
<p>You must now configure the TCP/IP for IMS Connect communication package profiles for TCP/IP connections.</p>
<p>Configure the profiles to define the TCP/IP conversations with the <a id="sthref1005"></a>OLTP.</p>
<p>When you have finished configuring your communications package, return to the following section <a href="#i1007858">"Configuring the Gateway"</a>,.</p>
</div>
<!-- class="sect1" -->
<a id="i1007858"></a><a id="APPCI248"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.7</span> Configuring the Gateway</h2>
<p>To configure the gateway, perform the following:</p>
<ol>
<li>
<p>Tailor the gateway parameters.</p>
<p>There are a number of parameters specific to Oracle Database Gateway for APPC when it is using TCP/IP for IMS Connect. These are supplied in the gateway parameter file, <code>init</code><code><span class="codeinlineitalic">sid.</span></code><code>ora</code>, which is in the <a id="sthref1006"></a><code>$ORACLE_HOME/dg4appc/admin</code> directory. A sample gateway parameter <a id="sthref1007"></a><a id="sthref1008"></a><a id="sthref1009"></a>file, <code><a id="sthref1010"></a><a id="sthref1011"></a>initPGA.ora</code> is provided in this subdirectory.<a id="sthref1012"></a><a id="sthref1013"></a><a id="sthref1014"></a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In the <a id="sthref1015"></a><a id="sthref1016"></a><code>init</code><code><span class="codeinlineitalic">sid.</span></code><code>ora</code> file, substitute your gateway SID name for "<code><span class="codeinlineitalic">sid</span></code> " in this file name.
<p>The <code>init</code><code><span class="codeinlineitalic">sid.</span></code><code>ora</code> file contains both APPC and TCP/IP parameters separated by a description. You must modify the <code>init</code><code><span class="codeinlineitalic">sid.</span></code><code>ora</code> file by deleting the APPC parameters. Refer to <a href="apb.htm#i631393">"Gateway Initialization Parameter File Using TCP/IP"</a> for the valid TCP/IP parameters.</p>
</div>
<p>The parameters fall into two categories:</p>
<ul>
<li>
<p>Gateway initialization <a id="sthref1017"></a><a id="sthref1018"></a>parameters</p>
<p>These parameters control the general operation of the gateway in the Oracle environment.</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
Before performing the following step, refer to <a href="apb.htm#i631393">"Gateway Initialization Parameter File Using TCP/IP"</a> for information about tailoring gateway initialization and PGA parameters. Pay special attention to the information about using the <a id="sthref1019"></a><code>PGA_CAPABILITY</code> parameter.</div>
</li>
<li>
<p>PGA <a id="sthref1020"></a><a id="sthref1021"></a><a id="sthref1022"></a>parameters</p>
<p>PGA parameters control the TCP/IP interface portion of the gateway. Use the <a id="sthref1023"></a><a id="sthref1024"></a><code>SET</code> gateway initialization parameter to specify PGA parameters. Oracle recommends that you group all <code>SET</code> commands<a id="sthref1025"></a><a id="sthref1026"></a> for PGA parameters at the end of the <code>init</code><code><span class="codeinlineitalic">sid.</span></code><code>ora</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Misspelled parameters are ignored<a id="sthref1027"></a>. However, if the <code>$ORACLE_HOME/dg4appc/admin/init</code><code><span class="codeinlineitalic">sid</span></code>.<code>ora</code> file is missing all calls to the gateway fail and return a <code>PGA-20928</code> error.</div>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1010100"></a><a id="APPCI249"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.8</span> Loading the <a id="sthref1028"></a><a id="sthref1029"></a>PGA_TCP_IMSC Table</h2>
<p>Gateway users who want to employ the TCP/IP protocol do so by using the <code>pg4tcpmap</code> tool.</p>
<p>The <a id="sthref1030"></a><code>pg4tcpmap</code> tool is located on the gateway. Its function is to map the Side Profile Name to TCP/IP and IMS Connect attributes. You must run this tool before executing the PL/SQL gateway statements (such as <code>$ORACLE_HOME/dg4appc/demo/IMS/pgaims.sql</code>).</p>
<p>In <a id="sthref1031"></a><code>PGAINIT</code> TIP, for example, the user must specify a Side Profile Name. The SNA protocol recognizes and utilizes the parameter. In this release of the gateway, the <code>pg4tcpmap</code> tool uses the original <code>PGAINIT</code> TIP format to map the relevant SNA parameters to TCP/IP. The <code>pg4tcpmap</code> tool inserts the values of these parameters into a table called <a id="sthref1032"></a><a id="sthref1033"></a><code>PGA_TCP_IMSC</code>.</p>
<p>Before executing <code>pg4tcpmap</code>, you must specify the <code>ORACLE_HOME</code>, Oracle SID, and modify <code>init</code><code><span class="codeinlineitalic">sid.</span></code><code>ora</code>. Refer to <a href="apb.htm#g635076">Appendix B, "Gateway Initialization Parameters for TCP/IP Communication Protocol"</a> in this guide and Chapter 6 in the <a class="olink APPUG600" href="../../gateways.112/e12071/tcpmap.htm#APPUG600"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a> for complete information about the <code>pg4tcpmap</code> commands.</p>
<p>Chapter 6 of the <a class="olink APPUG600" href="../../gateways.112/e12071/tcpmap.htm#APPUG600"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a> contains a list of the <a id="sthref1034"></a><code>pg4tcpmap</code> commands and instructions for using them, as well as an example of the table. Refer to Chapter 8, "Troubleshooting" in the <a class="olink APPUG800" href="../../gateways.112/e12071/pro_det.htm#APPUG800"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a> for information about the trace file for the executed <code>pg4tcpmap</code> tool.</p>
<p>To operate this tool, execute the following command:</p>
<pre>
$ $ORACLE_HOME/bin/pg4tcpmap
</pre>
<p>Refer to <a href="apb.htm#i632026">Output for the pg4tcpmap Tool</a> for a sample of the <code>pg4tcpmap</code> output.</p>
</div>
<!-- class="sect1" -->
<a id="i1007506"></a><a id="APPCI250"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.9</span> Verifying the Gateway Installation and OLTP Configuration</h2>
<p>To verify the gateway installation and the OLTP configuration, perform the following procedures after installing the gateway.<a id="sthref1035"></a><a id="sthref1036"></a></p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
If your <a id="sthref1037"></a>database link name is not "PGA," modify the demonstration <code>.sql</code> files to give them the particular database link name that you created in Step <a href="#i1008586">5</a> of <a href="#i1014581">Configuring Oracle Database: First-Time Installation</a>. You must modify the following .<code>sql</code> files:
<ul>
<li>
<p><code><a id="sthref1038"></a><a id="sthref1039"></a>pgavsn.sql</code></p>
</li>
<li>
<p><code><a id="sthref1040"></a><a id="sthref1041"></a>pgaecho.sql</code></p>
</li>
<li>
<p><code><a id="sthref1042"></a><a id="sthref1043"></a>pgaims.sql</code></p>
</li>
</ul>
</div>
<a id="APPCI251"></a>
<div class="sect2"><a id="sthref1044"></a>
<h3 class="sect2"><span class="secnum">12.9.1</span> Verifying the Gateway Installation<a id="sthref1045"></a><a id="sthref1046"></a><a id="sthref1047"></a></h3>
<p>To verify the gateway software installation using the <a id="sthref1048"></a><a id="sthref1049"></a>database link PGA previously created, perform the following steps:</p>
<ol>
<li>
<p>Using SQL*Plus, connect to your <a id="sthref1050"></a>Oracle database as <a id="sthref1051"></a><code>PGAADMIN</code>.</p>
</li>
<li>
<p>Run <code>$ORACLE_HOME/dg4appc/demo/<a id="sthref1052"></a>pgavsn.sql</code>.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/demo/pgavsn.sql
</pre>
<p>The server version number banner appears at your terminal. The following output appears:</p>
<pre>
Oracle Database Gateway for APPC (extension TCP/IP for IMS connect).
Version
11.2.0.0.2 Thu Jun 11 14:52:36 2009
 
Copyright (c) Oracle Corporation 1979,
2009.  All rights reserved.

PL/SQL procedure successfully completed.
</pre></li>
<li>
<p>Run <code>$ORACLE_HOME/dg4appc/demo/<a id="sthref1053"></a>pgaecho.sql</code>.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/demo/pgaecho.sql
</pre>
<p>You will receive the following output:</p>
<pre>
==&gt; Congratulations, your installation was successful. &lt;==
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="APPCI252"></a>
<div class="sect2"><a id="sthref1054"></a>
<h3 class="sect2"><span class="secnum">12.9.2</span> Verifying the OLTP Configuration <a id="sthref1055"></a><a id="sthref1056"></a><a id="sthref1057"></a><a id="sthref1058"></a></h3>
<p>Use the following procedure to verify your OLTP configuration.</p>
<div class="infobox-note">
<p class="notep1">Attention:</p>
If you have not completed the file transfers detailed in <a href="#i1011054">Preparing to Configure a Gateway Installation/Upgrade</a>, then complete them now before proceeding to the next step.</div>
<a id="APPCI253"></a>
<div class="sect3"><a id="sthref1059"></a>
<h4 class="sect3"><span class="secnum">12.9.2.1</span> IMS/TM Verification<a id="sthref1060"></a><a id="sthref1061"></a><a id="sthref1062"></a></h4>
<p>Perform the following steps to verify the IMS/TM configuration. Be certain that you have installed and configured the IMS Connect and that it is up and running before you begin this procedure. Refer to the IBM <span class="italic">IMS Connect Guide and Reference</span> for information about how to perform the installation and configuration tasks.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref1063"></a><a id="sthref1064"></a><a id="sthref1065"></a><span class="bold">TIPs must be recompiled when changing communication protocol to TCP/IP</span>.
<p>TCP/IP only: <a id="sthref1066"></a><a id="sthref1067"></a>If you have existing TIPs that were generated previously on a gateway using the SNA communication package protocol and you want to utilize the new TCP/IP feature, then the TIPs will have to be regenerated by PGAU with mandatory <code>NLS_LANGUAGE</code> and Side Profile Settings. Specify the appropriate ASCII character set in the <code>DEFINE TRANSACTION</code> command.</p>
<p>This is because the gateway assumes that the appropriate user exit in IMS Connect is being used, which would translate between the appropriate ASCII and EBCDIC character sets.</p>
</div>
<ol>
<li>
<p>To verify that the <a id="sthref1068"></a><code>FLIP</code> transaction is installed correctly, log on to your IMS/TM system and enter the following transaction (replacing <code>FLIP</code> with the transaction ID you chose for <code>FLIP</code> when you configured your IMS/TM system for the gateway):</p>
<pre>
FLIP THIS MESSAGE
</pre>
<p>The following output appears on your terminal:</p>
<pre>
EGASSEM SIHT PILF
</pre></li>
<li>
<p>Log on to the UNIX based system.</p>
<div class="infobox-note">
<p class="notep1">Attention:</p>
If you have not completed the file transfers detailed in <a href="#i1011054">Section 12.2</a> <a href="#i1011054">Preparing to Configure a Gateway Installation/Upgrade</a>, complete them now, before proceeding to the next step.</div>
</li>
<li>
<p>Modify the <code>pgaims.sql</code> <a id="sthref1069"></a><a id="sthref1070"></a>file, which is located at <code>$ORACLE_HOME/dg4appc/demo/IMS/pgaims.sql</code>. Customize the following three items used for accessing the gateway and the IMS/TM system as described in the comments at the beginning of the file:</p>
<ul>
<li>
<p>IMS/TM transaction ID</p>
</li>
<li>
<p>Side Profile Name</p>
</li>
<li>
<p>Logmode entry name</p>
</li>
</ul>
</li>
<li>
<p>Ensure that the <a id="sthref1071"></a>TCP/IP communication protocol on your system has been started.</p>
</li>
<li>
<p>Using SQL*Plus, connect to your <a id="sthref1072"></a>Oracle database from <code>PGAADMIN</code>.</p>
</li>
<li>
<p>Run <code><a id="sthref1073"></a><a id="sthref1074"></a>pgaims.sql</code>.</p>
<pre>
SQL&gt; @$ORACLE_HOME/dg4appc/demo/IMS/pgaims.sql
</pre>
<p>The following message appears:</p>
</li>
</ol>
<pre>
==&gt; Congratulations, your gateway is communicating with IMS/TM &lt;==
</pre>
<p>Your IMS/TM installation verification is now complete.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1007359"></a><a id="APPCI254"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">12.10</span> Performing Postinstallation Procedures<a id="sthref1075"></a><a id="sthref1076"></a><a id="sthref1077"></a></h2>
<p>The following are optional steps that you can perform as necessary. Installation of the sample applications for your OLTP is recommended to help you to fully understand how the gateway works and how it interfaces with your OLTP.</p>
<a id="APPCI255"></a>
<div class="sect2"><a id="sthref1078"></a>
<h3 class="sect2"><span class="secnum">12.10.1</span> Installing Sample Applications<a id="sthref1079"></a><a id="sthref1080"></a><a id="sthref1081"></a><a id="sthref1082"></a></h3>
<p>Your Oracle Database Gateway for APPC featuring TCP/IP for IMS Connect contains sample PL/SQL procedures and OLTP transaction programs that demonstrate the gateway's capabilities.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you call a gateway that uses TCP/IP as the communication protocol, and you use EBCDIC as the language in the control files, then you must change the language from EBCDIC to ASCII. Some examples of control files that might be in EBCDIC language are <code>ivtno.ctl</code> and <code>ivtnv.ctl</code>.
<p>For more information, refer to the <code>$ORACLE_HOME/dg4appc/demo/IMS/ivtno.ctl</code> and <code>$ORACLE_HOME/dg4appc/demo/IMS/ivtnv.ctl</code> files.</p>
</div>
<p>Samples are provided for IMS/TM:</p>
<ul>
<li>
<p>IMS inquiry using <code>IVTNO</code> and <code>IVTNV</code> sample transactions</p>
</li>
</ul>
<p>Additional samples are added to the distribution media in newer releases of the product. Wherever possible, the sample applications use the sample databases provided with the database products.</p>
<p>For this release, the entire documentation about installing and using the sample applications is available in:</p>
<p><code>$ORACLE_HOME/dg4appc/demo/IMS/sample_IMS_applications.txt</code></p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment197">
<tr>
<td class="cellalignment204">
<table class="cellalignment202">
<tr>
<td class="cellalignment201"><a href="ch12.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment201"><a href="ch14.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2009,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment206">
<table class="cellalignment200">
<tr>
<td class="cellalignment201"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment201"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment201"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment201"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment201"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment201"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
