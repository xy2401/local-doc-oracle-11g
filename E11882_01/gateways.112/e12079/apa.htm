<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Gateway Initialization Parameters for SNA Protocol</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.1 Build 008" />
<meta name="dcterms.created" content="2010-02-22T15:5:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Gateway for APPC Installation and Configuration Guide" />
<meta name="dcterms.identifier" content="E12079-02" />
<meta name="dcterms.isVersionOf" content="APPCW" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="ch12.htm" title="Previous" type="text/html" />
<link rel="Next" href="apb.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e12079.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/21</span> <!-- End Header --><a id="g636937"></a><a id="APPCW258"></a><a id="i624650"></a>
<h1 class="appendix"><span class="secnum">A</span> Gateway Initialization Parameters for SNA Protocol</h1>
<p>This appendix describes the gateway initialization file location and lists the <a id="sthref1110"></a><a id="sthref1111"></a>gateway initialization parameters supported by the Oracle Database Gateway for APPC specifically for the SNA protocol. These parameters are fully documented in <a href="ch12.htm#i33501">Section 11.1, "Migrating an Existing Gateway Instance to New Release Using SNA Protocol"</a>. In addition, this appendix contains sample listener.ora and tnsnames files for a gateway using SNA.</p>
<p>This appendix contains the following section:</p>
<ul>
<li>
<p><a href="#i627100">Gateway Initialization Parameter File Using SNA Protocol</a></p>
</li>
</ul>
<a id="i627100"></a><a id="APPCW259"></a>
<div class="sect1">
<h2 class="sect1"><span class="secnum">A.1</span> Gateway Initialization Parameter File Using SNA Protocol<a id="sthref1112"></a><a id="sthref1113"></a></h2>
<p>The parameter file for the gateway is located in the <code>%ORACLE_HOME%\dg4appc\admin</code> directory and is called <a id="sthref1114"></a><a id="sthref1115"></a><a id="sthref1116"></a><a id="sthref1117"></a><code>init<span class="italic">sid</span>.ora</code>.</p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Note</span>:</p>
The <code>init<span class="italic">sid</span>.ora</code> file contains both SNA and TCP/IP parameters. You must modify these files with the suitable parameters.</div>
<a id="i624735"></a><a id="APPCW260"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">A.1.1</span> PGA Parameters</h3>
<p>The <a id="sthref1118"></a><a id="sthref1119"></a>PGA parameters control the APPC interface portion of the gateway.</p>
<p>PGA parameters are specified using the <code>SET</code> <a id="sthref1120"></a>gateway initialization parameter. For example:</p>
<pre>
SET <span class="italic">pga_parm=value</span> 
</pre>
<p>where:</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">pga_parm</span></code> is one of the PGA parameter names in the list that follows; and</p>
</li>
<li>
<p><code><span class="codeinlineitalic">value</span></code> is a character string with contents that depend on <code><span class="codeinlineitalic">pga_parm</span></code></p>
</li>
</ul>
<p><a href="#g635413">Table A-1</a> provides a list of PGA parameters and their descriptions.</p>
<div class="tblformal">
<p class="titleintable"><a id="APPCW327"></a><a id="sthref1121"></a><a id="g635413"></a>Table A-1 PGA Parameters for Gateway Using SNA</p>
<table class="cellalignment189" title="PGA Parameters for Gateway Using SNA" summary="provides a list of PGA parameters and their descriptions" dir="ltr">
<thead>
<tr class="cellalignment183">
<th class="cellalignment190" id="r1c1-t3">Parameter</th>
<th class="cellalignment190" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment183">
<td class="cellalignment191" id="r2c1-t3" headers="r1c1-t3">
<p><a id="sthref1122"></a><code>LOG_DESTINATION</code>=<code><span class="codeinlineitalic">logpath</span></code></p>
</td>
<td class="cellalignment191" headers="r2c1-t3 r1c2-t3">
<p><code><span class="codeinlineitalic">logpath</span></code> specifies the destination at which <code>STDERR</code> is reopened. <code>LOG_DESTINATION</code> specifies a directory only and <code>STDERR</code> is reopened to <code>logpath\</code><code><span class="codeinlineitalic">sid_pid</span></code><code>.log</code></p>
<p>where:</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">sid</span></code> is the sid name</p>
</li>
<li>
<p><code><span class="codeinlineitalic">pid</span></code> is the process ID assigned to the gateway</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r3c1-t3" headers="r1c1-t3">
<p><a id="sthref1123"></a><a id="sthref1124"></a><code>PGA_CAPABILITY</code></p>
</td>
<td class="cellalignment191" headers="r3c1-t3 r1c2-t3">
<p>PGA transaction capability. This controls whether updates are allowed through the gateway. The following are valid values:</p>
<p><code>READ_ONLY</code> or <code>RO</code>, read-only capabilities.</p>
<p><code>SINGLE_SITE</code> or <code>SS</code>, single-site update only. This indicates that in a distributed environment, only the gateway can perform updates. No other database updates can occur within the Oracle transaction.</p>
<p><a id="sthref1125"></a><code>COMMIT_CONFIRM</code> or <code>CC</code>, commit-confirm. This indicates that in a distributed environment, updates can be performed by both the gateway and other participants within the Oracle transaction. The gateway is always committed first in this mode, and no other commit-confirm sites are allowed to participate in the Oracle transaction.<a id="sthref1126"></a></p>
<p>The default is <code>SINGLE_SITE</code>.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r4c1-t3" headers="r1c1-t3">
<p><a id="sthref1127"></a><a id="sthref1128"></a><code>PGA_CONFIRM</code></p>
</td>
<td class="cellalignment191" headers="r4c1-t3 r1c2-t3">
<p>Incoming <code>APPC</code> <code>CONFIRM</code> request handling option. This controls what the gateway does when an <code>APPC</code> <code>CONFIRM</code> request is received from the remote transaction program (RTP). This parameter has meaning only when the conversation is running with <code>SYNCLEVEL &gt; 0</code>. The following are valid values:</p>
<p><code>ACCEPT</code> - respond to incoming <code>APPC</code> <code>CONFIRM</code> requests with <code>APPC</code> <code>CONFIRMED</code> responses.</p>
<p><code>REJECT</code> - treat incoming <code>APPC</code> <code>CONFIRM</code> requests as <a id="sthref1129"></a>errors causing the conversation to be deallocated and an error message to be issued.</p>
<p>The default is <code>REJECT</code>.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r5c1-t3" headers="r1c1-t3">
<p><a id="sthref1130"></a><a id="sthref1131"></a><code>PGA_LOG_DB</code></p>
</td>
<td class="cellalignment191" headers="r5c1-t3 r1c2-t3">
<p>The <a id="sthref1132"></a>Oracle Net service name for the Oracle database in which the gateway maintains its transaction log. This parameter can be from&nbsp;<code>1</code> to <code>255</code>&nbsp;characters long. This parameter is required only when <code>PGA_CAPABILITY</code> parameter is set to <code>COMMIT_CONFIRM</code>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r6c1-t3" headers="r1c1-t3">
<p><a id="sthref1133"></a><a id="sthref1134"></a><code>PGA_LOG_PASS</code></p>
</td>
<td class="cellalignment191" headers="r6c1-t3 r1c2-t3">
<p>The Oracle <a id="sthref1135"></a>password to be used by the gateway when connecting to the Oracle database specified by the <code>PGA_LOG_DB</code> parameter. The password can be from&nbsp;<code>1</code> to <code>30</code>&nbsp;characters long. This parameter is required only when <code>PGA_CAPABILITY</code> parameter is set to <code>COMMIT_CONFIRM</code>. The password can be encrypted. For more information about encrypting the password, refer to <a href="ch11.htm#i1008944">Section 10.6, "Passwords in the Gateway Initialization File"</a>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r7c1-t3" headers="r1c1-t3">
<p><a id="sthref1136"></a><a id="sthref1137"></a><code>PGA_LOG_USER</code></p>
</td>
<td class="cellalignment191" headers="r7c1-t3 r1c2-t3">
<p>The Oracle user&nbsp;ID to be used by the gateway when connecting to the Oracle database specified by the <code>PGA_LOG_DB</code> parameter. The user&nbsp;ID can be from<code>&nbsp;1</code> to <code>30</code>&nbsp;characters long. This parameter is required only when <code>PGA_CAPABILITY</code> parameter is set to <code>COMMIT_CONFIRM</code>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r8c1-t3" headers="r1c1-t3">
<p><a id="sthref1138"></a><a id="sthref1139"></a><code>PGA_RECOVERY_PASS</code></p>
</td>
<td class="cellalignment191" headers="r8c1-t3 r1c2-t3">
<p>The password to be used by the gateway when allocating an APPC conversation with the transaction specified by the <code>PGA_RECOVERY_TPNAME</code> parameter. The password can be from&nbsp;<code>1</code> to <code>8&nbsp;</code>characters long. This parameter is required only when <code>PGA_CAPABILITY</code> parameter is set to <code>COMMIT_CONFIRM</code> and <code>PGA_SECURITY_TYPE</code> parameter is set to <code>PROGRAM</code>. The password can be encrypted. For more information about encrypting the password, refer to <a href="ch11.htm#i1008944">Section 10.6, "Passwords in the Gateway Initialization File"</a>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r9c1-t3" headers="r1c1-t3">
<p><a id="sthref1140"></a><a id="sthref1141"></a><code>PGA_RECOVERY_TPNAME</code></p>
</td>
<td class="cellalignment191" headers="r9c1-t3 r1c2-t3">
<p>The <a id="sthref1142"></a>TP name of the transaction installed in the online transaction processor (OLTP) for commit-confirm <code>FORGET</code> and <code>RECOVERY</code> processing. The TP name can be from&nbsp;<code>1</code> to <code>64</code>&nbsp;characters long. For <a id="sthref1143"></a>CICS Transaction Server for z/OS, the TP name is limited to four&nbsp;characters. For <a id="sthref1144"></a>IMS/TM, the TP name is limited to eight&nbsp;characters. Other OLTPs might have other limits on the length of the TP name. This parameter is required only when <code>PGA_CAPABILITY</code> parameter is set to <code>COMMIT_CONFIRM</code>.</p>
<p>The default value is <code>RECO</code>.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r10c1-t3" headers="r1c1-t3">
<p><a id="sthref1145"></a><a id="sthref1146"></a><code>PGA_RECOVERY_USER</code></p>
</td>
<td class="cellalignment191" headers="r10c1-t3 r1c2-t3">
<p>The user&nbsp;ID to be used by the gateway when allocating an APPC conversation with the transaction specified by the <code>PGA_RECOVERY_TPNAME</code> parameter. The user&nbsp;ID can be from&nbsp;<code>1</code> to <code>8</code>&nbsp;characters long. This parameter is required only when <code>PGA_CAPABILITY</code> parameter is set to <code>COMMIT_CONFIRM</code> and <code>PGA_SECURITY_TYPE</code> parameter is set to <code>PROGRAM</code> or <code>SAME</code>.</p>
<p>There is no default value.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r11c1-t3" headers="r1c1-t3">
<p><a id="sthref1147"></a><code>PGA_SECURITY_TYPE</code></p>
</td>
<td class="cellalignment191" headers="r11c1-t3 r1c2-t3">
<p><a id="sthref1148"></a>APPC conversation security option. This controls what security parameters are sent to the OLTP in the FMH-5 at conversation allocation. The following are valid values:</p>
<p><code>NONE</code>, which sends no security parameters</p>
<p><code>SAME</code>, which sends only a user&nbsp;ID</p>
<p><code>PROGRAM</code>, which sends a user&nbsp;ID and password</p>
<p>The default is <code>NONE</code>.</p>
<p>For further information about these options, refer to <a href="ch11.htm#g1012554">Chapter 10, "Security Requirements"</a>.</p>
</td>
</tr>
<tr class="cellalignment183">
<td class="cellalignment191" id="r12c1-t3" headers="r1c1-t3">
<p><a id="sthref1149"></a><a id="sthref1150"></a><a id="sthref1151"></a><a id="sthref1152"></a><code>TRACE_LEVEL</code></p>
</td>
<td class="cellalignment191" headers="r12c1-t3 r1c2-t3">
<p>PGA trace level. This controls tracing output written to <code>STDERR</code> (the target of the <code>LOG_DESTINATION</code> parameter. The value must be an integer from&nbsp;<code>0</code> to&nbsp;<code>255</code>.</p>
<p>The default is&nbsp;<code>0</code>, indicating no tracing.</p>
<p>Any value between <code>1</code> and <code>255</code> will turn on tracing.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="i633378"></a><a id="APPCW261"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">A.1.2</span> PGA_CAPABILITY Parameter Considerations</h3>
<p><a id="sthref1153"></a>When choosing a setting for the <code>PGA_CAPABILITY</code> parameter, take care to ensure that the correct setting is used based on what the RTPs will be doing.</p>
<p>The <a id="sthref1154"></a><code>READ_ONLY</code> setting should always be used when the <a id="sthref1155"></a>RTPs are read-only, that is, when the RTPs perform no database updates. <code>READ_ONLY</code> should never be used when the RTPs perform database updates. For example, if the <code>READ_ONLY</code> setting is chosen, and if a RTP called by the gateway performs updates to a foreign database, then the <a id="sthref1156"></a>Oracle database does <span class="italic">not</span> provide any integrity protection for those updates. Further, <code>READ_ONLY</code> mode allows a gateway transaction to be part of a distributed transaction that might update several other databases. If the gateway calls a RTP that performs updates in this situation and if a failure occurs, then the database updated by the RTP is out of sync with the other databases.</p>
<p><a id="sthref1157"></a><a id="sthref1158"></a>In cases where the RTPs perform updates to foreign databases, there are <a id="sthref1159"></a><a id="sthref1160"></a>two options for <code>PGA_CAPABILITY</code>:</p>
<ul>
<li>
<p><code>SINGLE_SITE</code></p>
</li>
<li>
<p><code>COMMIT_CONFIRM</code></p>
</li>
</ul>
<p>Each of these options provides protection against data integrity problems by permitting <a id="sthref1161"></a><code>COMMIT</code> and <a id="sthref1162"></a><code>ROLLBACK</code> requests to be forwarded to the RTP and by informing the <a id="sthref1163"></a>Oracle database about the distributed update and recovery capabilities of the gateway. The particular option chosen depends on the design of the RTPs and upon the capabilities of the <a id="sthref1164"></a>OLTP where they execute.</p>
<p>If the OLTP has LU6.2 <code>SYNCLEVEL&nbsp;1</code> or&nbsp;<code>2</code> support, then the <a id="sthref1165"></a><code>COMMIT_CONFIRM</code> capability provides limited two-phase commit between the <a id="sthref1166"></a>Oracle database and the OLTP, with the restriction that no other <a id="sthref1167"></a>commit-confirm site (gateway or Oracle) can be part of the distributed transaction. If it is not possible to use <code>COMMIT_CONFIRM</code>, then the <code>SINGLE_SITE</code> capability provides update capability between the Oracle database and the <a id="sthref1168"></a>OLTP, with the restriction that only the OLTP can perform updates, and no updates can occur on the Oracle side.<a id="sthref1169"></a></p>
<p>Each of the <code>PGA_CAPABILITY</code> options for update control imposes specific requirements on the RTP and on the OLTP. For <code>COMMIT_CONFIRM</code> capability, these requirements are discussed in detail in Chapter&nbsp;5, "Implementing Commit-Confirm," of the <a class="olink APPUG500" href="../../gateways.112/e12071/com_con.htm#APPUG500"><span class="italic">Oracle Database Gateway for APPC User's Guide</span></a>. Also refer to <a href="ch9.htm#i1015053">Section 8.8.3, "Configuring the OLTP for Commit-Confirm"</a> in this guide. For <code>SINGLE_SITE</code> capability, the RTP is responsible for performing the suitable tasks in response to <code>COMMIT</code> and <code>ROLLBACK</code> requests received from the gateway on behalf of the <a id="sthref1170"></a>Oracle database . The gateway uses the <code>APPC</code> <code>CONFIRM</code> and <code>SEND_ERR</code> requests to implement <code>COMMIT</code> and <code>ROLLBACK</code>, respectively. On receipt of a <code>CONFIRM</code> command, the RTP must perform <code>COMMIT</code> processing and then respond to the gateway with an <code>APPC</code> <code>CONFIRMED</code> response. On receipt of a <code>SEND_ERR</code> command, the RTP must perform <code>ROLLBACK</code> processing.</p>
<p>Because the distributed transaction capability of the <a id="sthref1171"></a>Oracle database is affected by the <code>PGA_CAPABILITY</code> option used by the gateway, it is desirable to separate inquiry and update applications by using different gateway instances for each. One gateway can be defined with <code>PGA_CAPABILITY</code> set to <code>READ_ONLY</code> and others with <code>PGA_CAPABILITY</code> set to <code>SINGLE_SITE</code> or <code>COMMIT_CONFIRM</code>.</p>
<p>This allows read-only transaction programs to participate in distributed transactions under the control of the Oracle database . For example, data from DB2 can be retrieved through the <code>READ_ONLY</code> gateway by an inquiry-only RTP, and can then be used as input to database updates on the Oracle database , all in one Oracle transaction. A <code>SINGLE_SITE</code> gateway can be used only for accessing RTPs which perform updates to foreign databases outside the scope of control of the Oracle database . Data can be read from any databases accessible to the Oracle database , and that data can be used to perform updates through the gateway.</p>
<p>When it is necessary to update resources on both the Oracle side and the OLTP side, a <code>COMMIT_CONFIRM</code> gateway can be used, provided that the OLTP and the RTPs are set up to implement <code>COMMIT_CONFIRM</code>.</p>
<p>All that is necessary to set up multiple <a id="sthref1172"></a>gateway instances is to set up the following for each instance:</p>
<ul>
<li>
<p>an entry in the <code>listener.ora</code> <a id="sthref1173"></a><a id="sthref1174"></a>file defining the <code>sid</code> of the gateway instance</p>
</li>
<li>
<p>an entry in the <code>tnsnames.ora</code> <a id="sthref1175"></a><a id="sthref1176"></a>file defining an alias to be used to connect to the gateway instance defined in <code>listener.ora</code></p>
</li>
<li>
<p>a <a id="sthref1177"></a>database link in the Oracle database that specifies the alias defined in the <code>tnsnames.ora</code> file in its <code>USING</code> parameter.</p>
</li>
</ul>
<p>Note that the gateway instances can share one common directory structure and use the same executables.</p>
<p>For example, to set up two gateways, <a id="sthref1178"></a><code>PGAI</code> and <a id="sthref1179"></a><code>PGAU</code> (for inquiry and update use, respectively), the following steps are required:</p>
<ol>
<li>
<p>Define entries in <code>l<a id="sthref1180"></a><a id="sthref1181"></a>istener.ora</code> for two <code><span class="codeinlineitalic">sid</span></code>s, <code>PGAI</code> and <code>PGAU</code>.</p>
</li>
<li>
<p>Define two aliases in <a id="sthref1182"></a><a id="sthref1183"></a><code>tnsnames.ora</code> that connect to the two new <code><span class="codeinlineitalic">sid</span></code>s, <code>PGAI</code> and <code>PGAU</code>.</p>
</li>
<li>
<p>Define two database links in the <a id="sthref1184"></a>Oracle database , one connecting to <code>PGAI</code> and the other connecting to <code>PGAU</code>.</p>
</li>
<li>
<p>Finally, create the <a id="sthref1185"></a>initialization files <a id="sthref1186"></a><a id="sthref1187"></a><code>initPGAI.ora</code> and <code><a id="sthref1188"></a><a id="sthref1189"></a>initPGAU.ora</code>.</p>
<p>In <code>initPGAI.ora</code>, set <code>PGA_CAPABILITY</code> to <code>READ_ONLY</code>, and in <code>initPGAU.ora</code>, set <code>PGA_CAPABILITY</code> to <code>SINGLE_SITE</code> or <code>COMMIT_CONFIRM</code>. Then, use the <code>PGAI</code> gateway for inquiry-only transactions, and use the <code>PGAU</code> gateway for update transactions.</p>
<p>The same steps can be used to set up additional gateway instances.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="i627764"></a><a id="APPCW262"></a>
<div class="sect2">
<h3 class="sect2"><span class="secnum">A.1.3</span> PGA_CONFIRM Parameter Considerations</h3>
<p>When deciding upon the setting for the <code>PGA_CONFIRM</code><a id="sthref1190"></a> parameter, it is important to understand the effects of each setting. First, keep in mind that this parameter affects only those conversations running at <code>SYNCLEVEL&nbsp;1</code>. The default setting, <code>PGA_CONFIRM=REJECT</code>, is suitable for most applications. With this setting, the gateway generates an <a id="sthref1191"></a>error if a <code>CONFIRM</code> request is received from the remote transaction program. If you have a remote transaction that uses <code>CONFIRM</code> to verify that data was received by the gateway, then you must use <code>PGA_CONFIRM=ACCEPT</code> to allow the gateway to respond to those incoming <code>CONFIRM</code> requests with <code>CONFIRMED</code> responses. You must be aware that the gateway sends <code>CONFIRM</code> requests to the remote transaction when the Oracle application has issued a <code>COMMIT</code> request. In order for the <code>COMMIT</code> processing to work correctly, the remote transaction must be written to perform its local commit processing whenever a <code>CONFIRM</code> request is received from the gateway, and respond to the gateway with <code>CONFIRMED</code> after the commit processing has successfully completed. If an <a id="sthref1192"></a>error occurs during commit processing, then the remote transaction must respond to the gateway with <code>SEND_ERR</code> to indicate that the commit failed.</p>
<p>One special case for the use of <code>PGA_CONFIRM=ACCEPT</code> is with IMS/TM version&nbsp;7. When using the implied APPC support that is provided by IMS/TM version&nbsp;7, conversations that run at <code>SYNCLEVEL&nbsp;1</code> are handled differently than conversations that run at <code>SYNCLEVEL&nbsp;0.</code> IMS/TM automatically generates <code>CONFIRM</code> requests after each <code>APPC</code> <code>SEND</code> when the conversation is at <code>SYNCLEVEL 1</code>.<a id="sthref1193"></a> On the gateway side, if <code>PGA_CONFIRM=ACCEPT</code> is not specified, then the <code>CONFIRM</code> requests sent by IMS/TM result in errors generated by the gateway. Using <code>PGA_CONFIRM=ACCEPT</code> alleviates this problem, allowing the gateway to respond to incoming <code>CONFIRM</code> requests with <code>CONFIRMED</code> responses. The only limitation with running this way is that the implied APPC support provided by IMS does not notify the application when a <code>CONFIRM</code> request is received from the gateway. This means that the gateway cannot use <code>CONFIRM</code> to implement <code>COMMIT</code>, thereby disabling the use of <code>COMMIT/ROLLBACK</code> to control updates on the IMS side of the conversation.</p>
</div>
<!-- class="sect2" -->
<a id="CHDHIHAG"></a><a id="APPCW263"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">A.1.4</span> Sample <a id="sthref1194"></a>listener.ora File for a Gateway Using SNA</h3>
<pre>
LISTENER =
  (ADDRESS_LIST =
        (ADDRESS=
          (COMMUNITY= TCP.world)
          (Host = bay)
          (PROTOCOL= TCP)
          (Port= 2621)
        )
        (ADDRESS=
          (COMMUNITY= TCP.world)
          (Host = bay)
          (PROTOCOL= TCP)
          (Port= 2623)
        )
  )
 
SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = PGA)
      (ORACLE_HOME = C:\oracle\pga\11.2)
      (PROGRAM = pg4asrv)
    )
  )
</pre></div>
<!-- class="sect2" -->
<a id="CHDBHAIH"></a><a id="APPCW264"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">A.1.5</span> Sample <a id="sthref1195"></a>tnsnames.ora File for a Gateway Using SNA</h3>
<pre>
ORA920 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = bay.us.oracle.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = ORA920.bay)
    )
  )
 
PGA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = bay)(PORT = 2621))
    )
    (CONNECT_DATA =
      (SID = PGA)
    )
    (HS = OK)
  )
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment182">
<tr>
<td class="cellalignment191">
<table class="cellalignment187">
<tr>
<td class="cellalignment186"><a href="ch12.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment186"><a href="apb.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment193">
<table class="cellalignment185">
<tr>
<td class="cellalignment186"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment186"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment186"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment186"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment186"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment186"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
