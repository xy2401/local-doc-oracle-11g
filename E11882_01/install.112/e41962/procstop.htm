<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>How to Stop Processes in an Existing Oracle Real Application Clusters Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1088" />
<meta name="dcterms.created" content="2016-11-17T23:3:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Installation Guide" />
<meta name="dcterms.identifier" content="E41962-05" />
<meta name="dcterms.isVersionOf" content="RILIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="apa.htm" title="Previous" type="text/html" />
<link rel="Next" href="ports.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41962.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/20</span> <!-- End Header -->
<div id="RILIN1168" class="appendix"><a id="BABEHGJG"></a>
<h1 class="appendix"><span class="secnum">E</span> How to Stop Processes in an Existing Oracle Real Application Clusters Database</h1>
<p>This appendix describes how to stop all processes in an Oracle Real Application Clusters (Oracle RAC) database, in preparation for adding additional products to an existing database, or in preparation for patch updates. This appendix contains the following topics:</p>
<ul>
<li>
<p><a href="#BABJICBJ">Backing Up the Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#BABJFBGI">Shutting Down Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#BABFJDGE">Stopping All Oracle Processes</a></p>
</li>
<li>
<p><a href="#CEGCCJAB">Using CVU to Validate Readiness for Oracle RAC Upgrades</a></p>
</li>
</ul>
<a id="BABJICBJ"></a>
<div id="RILIN1169" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.1</span> Backing Up the Oracle RAC Database</h2>
<p>Before you make any changes to the Oracle software, Oracle recommends that you create a backup of the Oracle Database installation.</p>
</div>
<!-- class="sect1" -->
<a id="BABJFBGI"></a>
<div id="RILIN1170" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.2</span> Shutting Down Oracle RAC Databases</h2>
<p>Shut down any existing Oracle Database instances on each node, with normal or immediate priority. You can use Oracle Enterprise Manager or SRVCTL to shut down the Oracle RAC databases and their instances.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are using Oracle Clusterware or Cluster Ready Services, then you must shut down all Oracle Database instances on all of the cluster nodes before modifying the Oracle software. If you are performing a patch update, then review the instructions in the Patch Set Notes for detailed instructions.</div>
</div>
<!-- class="sect1" -->
<a id="BABFJDGE"></a>
<div id="RILIN1171" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.3</span> Stopping All Oracle Processes</h2>
<p>Stop all listener and other processes that are running in the Oracle home directories where you want to modify the database software.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you can shut down Oracle ASM instances, Oracle Clusterware, or Oracle Restart, you must first shut down all database instances that use them.</div>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABCCFFI">Stopping Oracle Database Processes Before Adding Products or Upgrading</a></p>
</li>
<li>
<p><a href="#BABBGHJH">Stopping Oracle Clusterware and Oracle ASM Instances</a></p>
</li>
</ul>
<a id="BABCCFFI"></a>
<div id="RILIN1172" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">E.3.1</span> Stopping Oracle Database Processes Before Adding Products or Upgrading<a id="sthref515"></a><a id="sthref516"></a></h3>
<p>This section provides an overview of what needs to be done before adding additional products to Oracle Database 11<span class="italic">g</span> release 2 (11.2). If you are performing a patch upgrade, then refer to the Database Patch Set Notes for the patch for additional instructions.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must perform these steps in the order listed.</div>
<ol>
<li>
<p>Shut down any processes in the Oracle home on each node that can access a database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you shut down any processes that are monitored by Enterprise Manager Grid Control, set a blackout in Grid Control for the processes that you intend to shut down. This is necessary so that the availability records for these processes indicate that the shutdown was planned downtime, rather than an unplanned system outage.</div>
<p>For example:</p>
<pre dir="ltr">
$ORACLE_HOME/bin/emctl stop dbconsole
</pre></li>
<li>
<p>Shut down all Oracle RAC instances on all nodes. To shut down all Oracle RAC instances for a database, enter the following command, where <code dir="ltr"><span class="codeinlineitalic">db_name</span></code> is the name of the database:</p>
<pre dir="ltr">
$ oracle_home/bin/srvctl stop database -d <span class="italic">db_name</span>
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABBGHJH"></a>
<div id="RILIN1173" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">E.3.2</span> Stopping Oracle Clusterware and Oracle ASM Instances</h3>
<p>If you are modifying an Oracle Clusterware or Oracle Cluster Ready Services (CRS) installation, then shut down the following Oracle Database services.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must perform these steps in the order listed.</div>
<ol>
<li>
<p>Shut down any processes in the Oracle home on each node that might be accessing a database; for example, Oracle Enterprise Manager Database Control.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you shut down any processes that are monitored by Oracle Enterprise Manager Grid Control, set a blackout in Grid Control for the processes that you intend to shut down. This is necessary so that the availability records for these processes indicate that the shutdown was planned downtime, rather than an unplanned system outage.</div>
</li>
<li>
<p>Shut down all Oracle RAC instances on all nodes. To shut down all Oracle RAC instances for a database, enter the following command, where <code dir="ltr"><span class="codeinlineitalic">db_name</span></code> is the name of the database:</p>
<pre dir="ltr">
$ oracle_home/bin/srvctl stop database -d <span class="italic">db_name</span>
</pre></li>
<li>
<p>Stop all node applications on all nodes. To stop node applications running on a node, enter the following command, where <code dir="ltr">u01/app/grid/11.2.0</code> is the Oracle Grid Infrastructure home, and <code dir="ltr"><span class="codeinlineitalic">node</span></code> is the name of the node where the applications are running</p>
<pre dir="ltr">
$ u01/app/grid/11.2.0/bin/srvctl stop nodeapps -n <span class="italic">node</span>
</pre></li>
<li>
<p>Shut down the Oracle Clusterware or CRS process by entering the following command on all nodes as the <code dir="ltr">root</code> user</p>
<pre dir="ltr">
# crsctl stop cluster
</pre>
<p>To stop Oracle Clusterware and Oracle ASM instances on all nodes in the cluster, you can enter a single command: <code dir="ltr">crsctl stop cluster -all</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref517"></a>The <code dir="ltr">crsctl stop crs</code> command is used to stop Oracle Restart services for single-instance databases.</div>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGCCJAB"></a>
<div id="RILIN1174" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">E.4</span> Using CVU to Validate Readiness for Oracle RAC Upgrades</h2>
<p>Review the contents in this section to validate that your Oracle RAC cluster is ready for upgrades.</p>
<div id="RILIN1175" class="sect2"><a id="sthref518"></a>
<h3 class="sect2"><span class="secnum">E.4.1</span> About the CVU Database Upgrade Validation Command Options</h3>
<p>Use the command <code dir="ltr">cluvfy stage -predbinst -upgrade</code> to check the readiness of your Oracle RAC installation for upgrades. Running <code dir="ltr">cluvfy</code> with the <code dir="ltr">-predbinst -upgrade</code> flags performs system checks to confirm if the cluster is in a correct state for upgrading from an existing Oracle RAC installation.</p>
<p>The command uses the following syntax, where variable content is indicated by italics:</p>
<pre dir="ltr">
cluvfy stage -pre dbinst -upgrade -src_dbhome <span class="italic">src_RAChome</span>  -dest_dbhome 
<span class="italic">dest_RAChome</span> -dest_version <span class="italic">dest_version</span> [-fixup[-<span class="italic">fixupdirpath</span>]] [-verbose]
</pre>
<p>The options are:</p>
<ul>
<li>
<p><code dir="ltr">-src_dbhome</code> <code dir="ltr"><span class="codeinlineitalic">src_RAChome</span></code></p>
<p>Use this flag to indicate the location of the source Oracle RAC home that you are upgrading, where <code dir="ltr"><span class="codeinlineitalic">src_RAChome</span></code> is the path to the home that you want to upgrade.</p>
</li>
<li>
<p><code dir="ltr">-dest_dbhome</code> <code dir="ltr"><span class="codeinlineitalic">dest_RAChome</span></code></p>
<p>Use this flag to indicate the location of the upgrade Oracle RAC home, where <code dir="ltr"><span class="codeinlineitalic">dest_RAChome</span></code> is the path to the Oracle RAC home.</p>
</li>
<li>
<p><code dir="ltr">-dest_version</code> <code dir="ltr"><span class="codeinlineitalic">dest_version</span></code></p>
<p>Use the dest_version flag to indicate the release number of the upgrade, including any patchset. The release number must include the five digits designating the release to the level of the platform-specific patch. For example: 11.2.0.2.0.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91025" href="../../rac.112/e41959/cvu.htm#CWADD91025"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about release number format</div>
</li>
<li>
<p><code dir="ltr">-fixup</code> [<code dir="ltr">-fixupdir</code> <code dir="ltr"><span class="codeinlineitalic">fixupdirpath</span></code>]]</p>
<p>Use the <code dir="ltr">-fixup</code> flag to indicate that you want to generate instructions for any required steps you need to complete to ensure that your cluster is ready for an upgrade. The default location is the CVU work directory. If you want to place the fixup instructions in a different directory, then add the flag <span class="bold">-fixupdir</span>, and provide the path to the fixup directory</p>
</li>
<li>
<p><code dir="ltr">-verbose</code></p>
<p>Use the <code dir="ltr">-verbose</code> flag to produce detailed output of individual checks</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="RILIN1176" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref519"></a>
<h3 class="sect2"><span class="secnum">E.4.2</span> Example of Verifying System Upgrade Readiness for Oracle RAC Infrastructure</h3>
<p>You can verify that the permissions required for installing Oracle RAC have been configured on the nodes <code dir="ltr">node1</code> and <code dir="ltr">node2</code> by running the following command:</p>
<pre dir="ltr">
$ ./cluvfy stage -pre dbinst -upgrade -src_dbhome /u01/app/oracle/product/11.1.0/dbhome_1 -dest_dbhome 
/u01/app/oracle/product/11.2.0/dbhome_1 -dest_version 11.2.0.3.0 -fixup
-fixupdirpath /home/oracle/fixup -verbose
</pre></div>
<!-- class="sect2" -->
<div id="RILIN1177" class="sect2"><a id="sthref520"></a>
<h3 class="sect2"><span class="secnum">E.4.3</span> Verifying System Readiness for Oracle Database Upgrades</h3>
<p>Use Cluster Verification Utility to assist you with system checks in preparation for starting a database upgrade. The installer runs the appropriate CVU checks automatically, and either prompts you to fix problems, or provides a fixup script to be run on all nodes in the cluster before proceeding with the upgrade.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="../../server.112/e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2585">
<tr>
<td class="cellalignment2594">
<table class="cellalignment2590">
<tr>
<td class="cellalignment2589"><a href="apa.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2589"><a href="ports.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2597">
<table class="cellalignment2588">
<tr>
<td class="cellalignment2589"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2589"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2589"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2589"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2589"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2589"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
