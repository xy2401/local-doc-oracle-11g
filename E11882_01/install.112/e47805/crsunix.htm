<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Installing Oracle Grid Infrastructure for a Cluster</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1088" />
<meta name="dcterms.created" content="2016-11-17T21:24:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide" />
<meta name="dcterms.identifier" content="E47805-03" />
<meta name="dcterms.isVersionOf" content="CWSOL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="storage.htm" title="Previous" type="text/html" />
<link rel="Next" href="postinst.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e47805.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/17</span> <!-- End Header -->
<div id="CWSOL278" class="chapter"><a id="BEHHDFEF"></a>
<h1 class="chapter"><span class="secnum">4</span> Installing Oracle Grid Infrastructure for a Cluster</h1>
<p><a id="sthref559"></a>This chapter describes the procedures for <a id="sthref560"></a>installing Oracle Grid Infrastructure for a cluster. Oracle Grid Infrastructure consists of Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM). If you plan afterward to install Oracle Database with Oracle Real Application Clusters (Oracle RAC), then this is phase one of a two-phase installation.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BEHIHBBF">Preparing to Install Oracle Grid Infrastructure with OUI</a></p>
</li>
<li>
<p><a href="#BEHCCIDH">Installing Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CBHFHABD">Installing Grid Infrastructure Using a Software-Only Installation</a></p>
</li>
<li>
<p><a href="#BABIFDEE">Restrictions for Oracle Berkeley DB</a></p>
</li>
<li>
<p><a href="#BEHDIEGH">Confirming Oracle Clusterware Function</a></p>
</li>
<li>
<p><a href="#BABJFDEE">Understanding Offline Processes in Oracle Grid Infrastructure</a></p>
</li>
</ul>
<a id="BEHIHBBF"></a>
<div id="CWSOL279" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.1</span> Preparing to Install Oracle Grid Infrastructure with OUI</h2>
<p>Before you install Oracle Grid Infrastructure with the installer, use the following checklist to ensure that you have all the information you will need during installation, and to ensure that you have completed all tasks that must be done before starting your installation. Check off each task in the following list as you complete it, and write down the information needed, so that you can provide it during installation.</p>
<ul>
<li>
<p><span class="bold">Shut Down Running Oracle Processes</span></p>
<p>You may need to shut down running Oracle processes:</p>
<p><span class="bold">Installing on a node with a standalone database not using Oracle ASM</span>: You do not need to shut down the database while you install Oracle Grid Infrastructure software.</p>
<p><span class="bold">Installing on a node that already has a standalone Oracle Database 11g release 2 (11.2) installation running on Oracle ASM</span>: Stop the existing Oracle ASM instances. The Oracle ASM instances are restarted during installation.</p>
<p><span class="bold">Installing on an Oracle RAC Database node</span>: This installation requires an upgrade of Oracle Clusterware, as Oracle Clusterware is required to run Oracle RAC. As part of the upgrade, you must shut down the database one node at a time as the rolling upgrade proceeds from node to node.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading an Oracle RAC 9<span class="italic">i</span> release 2 (9.2) node, and the TNSLSNR is listening to the same port on which the SCAN listens (default 1521), then the TNSLSNR should be shut down.</div>
<p>If a Global Services Daemon (GSD) from Oracle9<span class="italic">i</span> Release 9.2 or earlier is running, then stop it before installing Oracle Grid Infrastructure by running the following command:</p>
<pre dir="ltr">
$ <span class="italic">Oracle_home</span>/bin/gsdctl stop
</pre>
<p>where <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code> is the Oracle Database home that is running the GSD.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
If you have an existing Oracle9<span class="italic">i</span> release 2 (9.2) Oracle Cluster Manager (Oracle CM) installation, then <span class="italic">do not</span> shut down the Oracle CM service. Shutting down the Oracle CM service prevents the Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2) software from detecting the Oracle9<span class="italic">i</span> release 2 node list, and causes failure of the Oracle Grid Infrastructure installation.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you receive a warning to stop all Oracle services after starting OUI, then run the command
<pre dir="ltr">
<span class="italic">Oracle_home</span>/bin/localconfig delete
</pre>
<p>where <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code> is the existing Oracle Clusterware home.</p>
</div>
</li>
<li>
<p><span class="bold">Prepare for Oracle Automatic Storage Management and Oracle Clusterware Upgrade If You Have Existing Installations</span><a id="sthref561"></a><a id="sthref562"></a><a id="sthref563"></a><a id="sthref564"></a><a id="sthref565"></a><a id="sthref566"></a></p>
<p>During the Oracle Grid Infrastructure installation, existing Oracle Clusterware and clustered Oracle ASM installations are both upgraded.</p>
<p>When all member nodes of the cluster are running Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2), then the new clusterware becomes the active version.</p>
<p>If you intend to install Oracle RAC, then you must first complete the upgrade to Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2) on all cluster nodes before you install the Oracle Database 11<span class="italic">g</span> release 2 (11.2) version of Oracle RAC.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
All Oracle Grid Infrastructure upgrades (upgrades of existing Oracle Clusterware and Oracle ASM installations) are out-of-place upgrades.</div>
</li>
<li>
<p><span class="bold">Determine the Oracle Inventory (oraInventory) location</span></p>
<p>If you have already installed Oracle software on your system, then OUI detects the existing Oracle Inventory (oraInventory) directory from the <code dir="ltr">/var/opt/oracle/oraInst.loc</code> file, and uses this location. This directory is the central inventory of Oracle software installed on your system. Users who have the Oracle Inventory group as their primary group are granted the OINSTALL privilege to write to the central inventory.</p>
<p>If you are installing Oracle software for the first time on your system, and your system does not have an oraInventory directory, then the installer designates the installation owner's primary group as the Oracle Inventory group. Ensure that this group is available as a primary group for all planned Oracle software installation owners.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The oraInventory directory cannot be placed on a shared file system.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The preinstallation chapters in <a href="presolar.htm#CHDBBHGF">Chapter 2</a> for information about creating the Oracle Inventory, and completing required system configuration</div>
</li>
<li>
<p><span class="bold">Obtain root account access</span></p>
<p>During installation, you are asked to run configuration scripts as the <code dir="ltr">root</code> user. You must run these scripts as <code dir="ltr">root</code>, or be prepared to have your system administrator run them for you. You must run the <code dir="ltr">root.sh</code> script on the first node and wait for it to finish. If your cluster has four or more nodes, then <code dir="ltr">root.sh</code> can be run concurrently on all nodes but the first and last<a id="sthref567"></a><a id="sthref568"></a>.</p>
</li>
<li>
<p><span class="bold">Decide if you want to install other languages</span><a id="sthref569"></a><a id="sthref570"></a></p>
<p>During installation, you are asked if you want translation of user interface text into languages other than the default, which is English.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the language set for the operating system is not supported by the installer, then by default the installer runs in the English language.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NLSPG" href="../../server.112/e10729/toc.htm"><span class="italic">Oracle Database Globalization Support Guide</span></a> for detailed information on character sets and language configuration</div>
</li>
<li>
<p><span class="bold">Determine your cluster name, public node names, the SCAN, virtual node names, GNS VIP and planned interface use for each node in the cluster</span></p>
<p>During installation, you are prompted to provide the public and virtual host name, unless you use a third party cluster software. In that case, the public host name information will be filled in. You are also prompted to identify which interfaces are public, private, or interfaces in use for another purpose, such as a network file system.</p>
<p>If you use Grid Naming Service (GNS), then OUI displays the public and virtual host name addresses labeled as "AUTO" because they are configured automatically.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you configure IP addresses manually, then avoid changing host names<a id="sthref571"></a><a id="sthref572"></a> after you complete the Oracle Grid Infrastructure installation, including adding or deleting domain qualifications. A node with a new host name is considered a new host, and must be added to the cluster. A node under the old name will appear to be down until it is removed from the cluster.</div>
<p>If you use third-party clusterware, then use your vendor documentation to complete setup of your public and private domain addresses.</p>
<p>When you enter the <a id="sthref573"></a>public node name, use the primary host name of each node. In other words, use the name displayed by the <code dir="ltr">hostname</code> command.</p>
<p>In addition:</p>
<ul>
<li>
<p>Provide a <a id="sthref574"></a><a id="sthref575"></a><a id="sthref576"></a>cluster name with the following characteristics:</p>
<ul>
<li>
<p>It must be globally unique throughout your host domain.</p>
</li>
<li>
<p>It must be at least one character long and less than or equal to 15 characters long.</p>
</li>
<li>
<p>It must consist of the same character set used for host names, in accordance with RFC 1123: Hyphens (-), and single-byte alphanumeric characters (a to z, A to Z, and 0 to 9). If you use third-party vendor clusterware, then Oracle recommends that you use the vendor cluster name.</p>
</li>
</ul>
</li>
<li>
<p>If you are not using Grid Naming Service (GNS), then determine a <a id="sthref577"></a>virtual host name for each node. A virtual host name is a public node name that is used to reroute client requests sent to the node if the node is down. Oracle Database uses VIPs for client-to-database connections, so the VIP address must be publicly accessible. Oracle recommends that you provide a name in the format <span class="italic">hostname</span>-vip. For example: <code dir="ltr">myclstr2-vip</code>.</p>
</li>
<li>
<p>Provide SCAN addresses for client access to the cluster. These addresses should be configured as round robin addresses on the domain name service (DNS). Oracle recommends that you supply three SCAN addresses.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The following is a list of additional information about node IP addresses:
<ul>
<li>
<p>For the local node only, OUI automatically fills in public and VIP fields. If your system uses vendor clusterware, then OUI may fill additional fields.</p>
</li>
<li>
<p>Host names and virtual host names are not domain-qualified. If you provide a domain in the address field during installation, then OUI removes the domain from the address.</p>
</li>
<li>
<p>Interfaces identified as private for private IP addresses should not be accessible as public interfaces. Using public interfaces for Cache Fusion can cause performance problems.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Identify public and <a id="sthref578"></a>private interfaces. OUI configures public interfaces for use by public and virtual IP addresses, and configures private IP addresses on private interfaces.</p>
<p>The private subnet that the private interfaces use must connect all the nodes you intend to have as cluster members.</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Obtain proxy realm authentication information if you have a proxy realm on your network</span></p>
<p>During installation, OUI attempts to download updates. You are prompted to provide a proxy realm, and user authentication information to access the Internet through the proxy service. If you have a proxy realm configured, then be prepared to provide this information. If you do not have a proxy realm, then you can leave the proxy authentication fields blank.</p>
</li>
<li>
<p><span class="bold">Identify shared storage for Oracle Clusterware files and prepare storage if necessary</span></p>
<p>During installation, you are asked to provide paths for the following Oracle Clusterware files. These files must be shared across all nodes of the cluster, either on Oracle ASM, or on a supported file system:</p>
<ul>
<li>
<p><a id="sthref579"></a>Voting disks are files that Oracle Clusterware uses to verify cluster node membership and status.</p>
<p>Voting disk files must be owned by the user performing the installation (<code dir="ltr">oracle</code> or <code dir="ltr">grid</code>), and must have permissions set to 640.</p>
</li>
<li>
<p><a id="sthref580"></a>Oracle Cluster Registry files (OCR) contain cluster and database configuration information for Oracle Clusterware.</p>
<p>Before installation, OCR files must be owned by the user performing the installation (<code dir="ltr">grid</code> or <code dir="ltr">oracle</code>). That installation user must have <code dir="ltr">oinstall</code> as its primary group. During installation, OUI changes ownership of the OCR files to <code dir="ltr">root</code>.</p>
</li>
</ul>
<p>If your file system does not have external storage redundancy, then Oracle recommends that you provide two additional locations for the OCR disk, and two additional locations for the voting disks, for a total of six partitions (three for OCR, and three for voting disks). Creating redundant storage locations protects the OCR and voting disk in the event of a failure. To completely protect your cluster, the storage locations given for the copies of the OCR and voting disks should have completely separate paths, controllers, and disks, so that no single point of failure is shared by storage locations.</p>
<p>When you select to store the OCR on Oracle ASM, the default configuration is to create the OCR on one Oracle ASM disk group. If you create the disk group with normal or high redundancy, then the OCR is protected from physical disk failure.</p>
<p>To protect the OCR from logical disk failure, create another Oracle ASM disk group after installation and add the OCR to the second disk group using the <code dir="ltr">ocrconfig</code> command.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="presolar.htm#CHDBBHGF">Chapter 2, "Advanced Installation Oracle Grid Infrastructure for a Cluster Preinstallation Tasks"</a> and <a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for information about adding disks to disk groups</div>
</li>
<li>
<p><span class="bold"><a id="sthref581"></a><a id="sthref582"></a><a id="sthref583"></a>Ensure cron jobs do not run during installation</span></p>
<p>If the installer is running when daily cron jobs start, then you may encounter unexplained installation problems if your cron job is performing cleanup, and temporary files are deleted before the installation is finished. Oracle recommends that you complete installation before daily cron jobs are run, or disable daily cron jobs that perform cleanup until after the installation is completed.</p>
</li>
<li>
<p><a id="sthref584"></a><a id="sthref585"></a><span class="bold">Have IPMI Configuration completed and have IPMI administrator account information</span></p>
<p>If you intend to use IPMI, then ensure BMC interfaces are configured, and have an administration account username and password to provide when prompted during installation.</p>
<p>For nonstandard installations, if you must change configuration on one or more nodes after installation (for example, if you have different administrator usernames and passwords for BMC interfaces on cluster nodes), then decide if you want to reconfigure the BMC interface, or modify IPMI administrator account information after installation.</p>
</li>
<li>
<p><span class="bold"><a id="sthref586"></a><a id="sthref587"></a>Ensure that the Oracle home path you select for the Oracle Grid Infrastructure home uses only ASCII characters</span></p>
<p>This restriction includes installation owner user names, which are used as a default for some home paths, as well as other directory names you may select for paths.</p>
</li>
<li>
<p><span class="bold"><a id="sthref588"></a>Unset Oracle environment variables</span>. If you have set ORA_CRS_HOME as an environment variable, then unset it before starting an installation or upgrade. You should never use ORA_CRS_HOME as a user environment variable.</p>
<p>If you have had an existing installation on your system, and you are using the same user account to install this installation, then unset the following environment variables: ORA_CRS_HOME; ORACLE_HOME; ORA_NLS10; TNS_ADMIN</p>
</li>
<li>
<p><span class="bold">Decide if you want to use the Software Updates option.</span> OUI can install critical patch updates, system requirements updates (hardware, operating system parameters, and kernel packages) for supported operating systems, and other significant updates that can help to ensure your installation proceeds smoothly. Oracle recommends that you enable software updates during installation.</p>
<p>If you choose to enable software updates, then during installation you must provide a valid My Oracle Support user name and password during installation, so that OUI can download the latest updates, or you must provide a path to the location of an software updates packages that you have downloaded previously.</p>
<p>If you plan to run the installation in a secured data center, then you can download updates before starting the installation by starting OUI on a system that has Internet access in update download mode. To start OUI to download updates, enter the following command:</p>
<pre dir="ltr">
$ ./runInstaller -downloadUpdates
</pre>
<p>Provide the My Oracle Support user name and password, and provide proxy settings if needed. After you download updates, transfer the update file to a directory on the server where you plan to run the installation.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BEHCCIDH"></a>
<div id="CWSOL280" class="sect1">
<h2 class="sect1"><span class="secnum">4.2</span> Installing Grid Infrastructure</h2>
<p>This section provides you with information about how to use the installer to install Oracle Grid Infrastructure. It contains the following sections:</p>
<ul>
<li>
<p><a href="#BEHFHBJG">Running OUI to Install Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#BEHGAIEA">Installing Grid Infrastructure Using a Cluster Configuration File</a></p>
</li>
</ul>
<a id="BEHFHBJG"></a>
<div id="CWSOL281" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.1</span> Running OUI to Install Grid Infrastructure</h3>
<p>Complete the following steps to install Oracle Grid Infrastructure (Oracle Clusterware and Oracle Automatic Storage Management) on your cluster. At any time during installation, if you have a question about what you are being asked to do, click the <span class="bold">Help</span> button on the OUI page.</p>
<ol>
<li>
<p>Change to the /Disk1 directory on the installation media, or where you have downloaded the installation binaries, and run the <code dir="ltr">runInstaller</code> command. For example:</p>
<pre dir="ltr">
$ cd /home/grid/oracle_sw/Disk1
$ ./runInstaller
</pre></li>
<li>
<p>Select <span class="bold">Typical</span> or <span class="bold">Advanced</span> installation.</p>
</li>
<li>
<p>Provide information or run scripts as <code dir="ltr">root</code> when prompted by OUI. If <code dir="ltr">root.sh</code> fails on any of the nodes, then you can fix the problem and follow the steps in <a href="rem_orcl.htm#CBHCIDHD">Section 6.5, "Deconfiguring Oracle Clusterware Without Removing Binaries,"</a> rerun <code dir="ltr">root.sh</code> on that node, and continue.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you encounter an error when you run a fixup script, then you may need to delete projects created for the installation user by the fixup script before you run it again. See <a href="trouble.htm#CACBIHFF">"projadd: Duplicate project name "user.grid""</a> in <a href="trouble.htm#CIACEGFJ">Appendix A, "Troubleshooting the Oracle Grid Infrastructure Installation Process."</a></div>
<p>If you need assistance during installation, click <span class="bold">Help</span>. <a id="sthref589"></a><a id="sthref590"></a>Click <span class="bold">Details</span> to see the log file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must run the <code dir="ltr">root.sh</code> script on the first node and wait for it to finish. If your cluster has four or more nodes, then <code dir="ltr">root.sh</code> can be run concurrently on all nodes but the first and last. As with the first node, the <code dir="ltr">root.sh</code> script on the last node must be run separately.</div>
</li>
<li>
<p>After you run <code dir="ltr"><a id="sthref591"></a>root.sh</code> on all the nodes, OUI runs Net Configuration Assistant (<code dir="ltr"><a id="sthref592"></a>netca</code>) and Cluster Verification Utility. These programs run without user intervention.</p>
</li>
<li>
<p><a id="sthref593"></a>Oracle Automatic Storage Management Configuration Assistant (<a id="sthref594"></a><code dir="ltr">asmca</code>) configures Oracle ASM during the installation.</p>
</li>
</ol>
<p>When you have verified that your Oracle Grid Infrastructure installation is completed successfully, you can either use it to maintain high availability for other applications, or you can install an Oracle database.</p>
<p>The following is a list of additional information to note about installation:</p>
<ul>
<li>
<p>If you intend to install Oracle Database 11<span class="italic">g</span> release 2 (11.2) with Oracle RAC, then refer to <span class="italic">Oracle Real Application Clusters Installation Guide</span> <span class="italic">for Oracle Solaris</span>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD03202" href="../../rac.112/e41959/clonecluster.htm#CWADD03202"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for cloning Oracle Grid Infrastructure, and <a class="olink RACAD03202" href="../../rac.112/e41960/clonerac.htm#RACAD03202"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about using cloning and node addition procedures for adding Oracle RAC nodes</div>
</li>
<li>
<p>When you run <code dir="ltr">root.sh</code> during Oracle Grid Infrastructure installation, the Trace File (TF) Analyzer and Collector is also installed in the directory <code dir="ltr"><span class="codeinlineitalic">grid_home</span></code><code dir="ltr">/tfa</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD92407" href="../../rac.112/e41959/troubleshoot.htm#CWADD92407"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about using Trace File Analyzer and Collector</div>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BEHGAIEA"></a>
<div id="CWSOL282" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.2</span> Installing Grid Infrastructure Using a Cluster Configuration File<a id="sthref595"></a><a id="sthref596"></a></h3>
<p>During installation of Oracle Grid Infrastructure, you are given the option either of providing cluster configuration information manually, or of using a cluster configuration file. A cluster configuration file is a text file that you can create before starting OUI, which provides OUI with cluster node addresses that it requires to configure the cluster.</p>
<p>Oracle suggests that you consider using a cluster configuration file if you intend to perform repeated installations on a test cluster, or if you intend to perform an installation on many nodes.</p>
<p>To create a cluster configuration file manually, start a text editor, and create a file that provides the name of the public and virtual IP addresses for each cluster member node, in the following format:</p>
<pre dir="ltr">
<span class="italic">node1</span> <span class="italic">node1-</span>vip 
<span class="italic">node2</span> <span class="italic">node2-</span>vip
.
.
.
</pre>
<p>For example:</p>
<pre dir="ltr">
mynode1 mynode1-vip
mynode2 mynode2-vip
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CBHFHABD"></a>
<div id="CWSOL283" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.3</span> Installing Grid Infrastructure Using a Software-Only Installation</h2>
<ul>
<li>
<p><a href="#BABJABCJ">Installing the Software Binaries</a></p>
</li>
<li>
<p><a href="#BABFDAFG">Configuring the Software Binaries</a></p>
</li>
<li>
<p><a href="#BABIICAE">Configuring the Software Binaries Using a Response File</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that only advanced users should perform the software-only installation, as this installation option requires manual postinstallation steps to enable the Oracle Grid Infrastructure software.</div>
<p>A software-only installation consists of installing Oracle Grid Infrastructure for a cluster on one node.</p>
<p>If you use the Install Grid Infrastructure Software Only option during installation, then this installs the software binaries on the local node. To complete the installation for your cluster, you must perform the additional steps of configuring Oracle Clusterware and Oracle ASM, creating a clone of the local installation, deploying this clone on other nodes, and then adding the other nodes to the cluster.</p>
<div class="infoboxnotealso">
<p class="notep1"><a id="sthref597"></a><a id="sthref598"></a>See Also:</p>
<a class="olink CWADD03202" href="../../rac.112/e41959/clonecluster.htm#CWADD03202"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about how to clone an Oracle Grid Infrastructure installation to other nodes, and then adding them to the cluster</div>
<a id="BABJABCJ"></a>
<div id="CWSOL432" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.1</span> Installing the Software Binaries</h3>
<p>To perform a software-only installation:</p>
<ol>
<li>
<p>On the local node, verify that the cluster node meets installation requirements using the command <code dir="ltr">runcluvfy.sh stage -pre crsinst</code>. Ensure that you have completed all storage and server preinstallation requirements.</p>
</li>
<li>
<p>Run the <code dir="ltr">runInstaller</code> command from the relevant directory on the Oracle Database 11<span class="italic">g</span> release 2 (11.2) installation media or download directory. For example:</p>
<pre dir="ltr">
$ cd /home/grid/oracle_sw/Disk1
$ ./runInstaller
</pre></li>
<li>
<p>Complete a software-only installation of Oracle Grid Infrastructure on the first node.</p>
</li>
<li>
<p>When the software has been installed, run the <code dir="ltr">orainstRoot.sh</code> script when prompted.</p>
</li>
<li>
<p>For installations with Oracle RAC release 11.2.0.2 and later, proceed to step 6. For installations with Oracle RAC release 11.2.0.1, to relink Oracle Clusterware with the Oracle RAC option enabled, run commands similar to the following (in this example, the Grid home is <code dir="ltr">/u01/app/11.2.0/grid</code>):</p>
<pre dir="ltr">
$ cd /u01/app/11.2.0/grid/
$ set env ORACLE_HOME pwd
$ cd rdbms/lib
$ make -f ins_rdbms.mk rac_on ioracle
</pre></li>
<li>
<p>The <code dir="ltr">root.sh</code> script output provides information about how to proceed, depending on the configuration you plan to complete in this installation. Make note of this information.</p>
<p>However, ignore the instruction to run the <code dir="ltr">roothas.pl</code> script, unless you intend to install Oracle Grid Infrastructure on a standalone server (Oracle Restart).</p>
</li>
<li>
<p>On each remaining node, verify that the cluster node meets installation requirements using the command <code dir="ltr">runcluvfy.sh stage -pre crsinst</code>. Ensure that you have completed all storage and server preinstallation requirements.</p>
</li>
<li>
<p>Use Oracle Universal Installer as described in steps 1 through 4 to install the Oracle Grid Infrastructure software on every remaining node that you want to include in the cluster, and complete a software-only installation of Oracle Grid Infrastructure on every node.</p>
<p>Configure the cluster using the full OUI configuration wizard GUI as described in <a href="#BABFDAFG">Section 4.3.2, "Configuring the Software Binaries,"</a> or configure the cluster using a response file as described in section <a href="#BABIICAE">Section 4.3.3, "Configuring the Software Binaries Using a Response File."</a></p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABFDAFG"></a>
<div id="CWSOL433" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.2</span> Configuring the Software Binaries</h3>
<p>Configure the software binaries by starting Oracle Grid Infrastructure configuration wizard in GUI mode, available in release 11.2.0.2 and later:</p>
<ol>
<li>
<p>Log in to a terminal as the Grid infrastructure installation owner, and change directory to <code dir="ltr"><span class="codeinlineitalic">grid_home</span></code><code dir="ltr">/crs/config</code>.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">
$ ./config.sh
</pre>
<p>The configuration script starts OUI in Configuration Wizard mode. Provide information as needed for configuration. Each page shows the same user interface and performs the same validation checks that OUI normally does. However, instead of running an installation, The configuration wizard mode validates inputs and configures the installation on all cluster nodes.</p>
</li>
<li>
<p>When you complete inputs, OUI shows you the Summary page, listing all inputs you have provided for the cluster. Verify that the summary has the correct information for your cluster, and click <span class="bold">Install</span> to start configuration of the local node.</p>
<p>When configuration of the local node is complete, OUI copies the Oracle Grid Infrastructure configuration file to other cluster member nodes.</p>
</li>
<li>
<p>When prompted, run root scripts.</p>
</li>
<li>
<p>When you confirm that all root scripts are run, OUI checks the cluster configuration status, and starts other configuration tools as needed.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABIICAE"></a>
<div id="CWSOL434" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.3</span> Configuring the Software Binaries Using a Response File</h3>
<p>When you install or copy Oracle Grid Infrastructure software on any node, you can defer configuration for a later time. This section provides the procedure for completing configuration after the software is installed or copied on nodes, using the configuration wizard utility (<code dir="ltr">config.sh</code>), available with release 11.2.0.2 and later.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD92094" href="../../rac.112/e41959/admin.htm#CWADD92094"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about the configuration wizard.</div>
<p>To configure the Oracle Grid Infrastructure software binaries using a response file:</p>
<ol>
<li>
<p>As the Oracle Grid Infrastructure installation owner (<code dir="ltr">grid</code>) start OUI in Oracle Grid Infrastructure configuration wizard mode from the Oracle Grid Infrastructure software-only home using the following syntax, where Grid_home is the Oracle Grid Infrastructure home, and <span class="italic">filename</span> is the response file name:</p>
<p><span class="italic">Grid_home</span>/crs/config/config.sh [-debug] [-silent -responseFile <span class="italic">filename</span>]</p>
<p>For example:</p>
<pre dir="ltr">
$ cd /u01/app/grid/crs/config/
$ ./config.sh -responseFile /u01/app/grid/response/response_file.rsp
</pre>
<p>The configuration script starts OUI in Configuration Wizard mode. Each page shows the same user interface and performs the same validation checks that OUI normally does. However, instead of running an installation, The configuration wizard mode validates inputs and configures the installation on all cluster nodes.</p>
</li>
<li>
<p>When you complete inputs, OUI shows you the Summary page, listing all inputs you have provided for the cluster. Verify that the summary has the correct information for your cluster, and click <span class="bold">Install</span> to start configuration of the local node.</p>
<p>When configuration of the local node is complete, OUI copies the Oracle Grid Infrastructure configuration file to other cluster member nodes.</p>
</li>
<li>
<p>When prompted, run root scripts.</p>
</li>
<li>
<p>When you confirm that all root scripts are run, OUI checks the cluster configuration status, and starts other configuration tools as needed.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABIFDEE"></a>
<div id="CWSOL435" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.4</span> Restrictions for Oracle Berkeley DB</h2>
<p><a id="sthref599"></a>The Oracle Berkeley DB embedded database installation that is included with Oracle Grid Infrastructure for a Cluster 11<span class="italic">g</span> release 2 (11.2.0.2) is only for use with the Oracle Grid Infrastructure installation products. Refer to terms of the Berkeley DB license at the following URL for details:</p>
<pre dir="ltr">
 <a href="http://www.oracle.com/technetwork/database/berkeleydb/downloads/index.html">http://www.oracle.com/technetwork/database/berkeleydb/downloads/index.html </a>
</pre></div>
<!-- class="sect1" -->
<a id="BEHDIEGH"></a>
<div id="CWSOL286" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.5</span> Confirming Oracle Clusterware Function</h2>
<p><a id="sthref600"></a>After installation, log in as <code dir="ltr">root</code>, and use the following command syntax on each node to confirm that your Oracle Clusterware installation is installed and running correctly:</p>
<p>crsctl check crs</p>
<p>For example:</p>
<pre dir="ltr">
$ crsctl check crs
 
CRS-4638: Oracle High Availability Services is online
CRS-4537: Cluster Ready Services is online
CRS-4529: Cluster Synchronization Services is online
CRS-4533: Event Manager is online
</pre>
<div class="infobox-note">
<p class="notep1">Caution:</p>
<a id="sthref601"></a><a id="sthref602"></a>After installation is complete, do not remove manually or run cron jobs that remove <code dir="ltr">/tmp/.oracle</code> or <code dir="ltr">/var/tmp/.oracle</code> or its files while Oracle Clusterware is up. If you remove these files, then Oracle Clusterware could encounter intermittent hangs, and you will encounter error CRS-0184: Cannot communicate with the CRS daemon.</div>
</div>
<!-- class="sect1" -->
<div id="CWSOL436" class="sect1"><!-- infolevel="all" infotype="General" --><a id="sthref603"></a>
<h2 class="sect1"><span class="secnum">4.6</span> Confirming Oracle ASM Function for Oracle Clusterware Files</h2>
<p>If you installed the OCR and voting disk files on Oracle ASM, then use the following command syntax as the Oracle Grid Infrastructure installation owner to confirm that your Oracle ASM installation is running:</p>
<p>srvctl status asm</p>
<p>For example:</p>
<pre dir="ltr">
$ srvctl status asm
ASM is running on node1,node2
</pre>
<p>Oracle ASM is running only if it is needed for Oracle Clusterware files. If you have not installed OCR and voting disks files on Oracle ASM, then the Oracle ASM instance should be down.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To manage Oracle ASM or Oracle Net 11<span class="italic">g</span> release 2 (11.2) or later installations, use the <code dir="ltr">srvctl</code> binary in the Oracle Grid Infrastructure home for a cluster (Grid home). If you have Oracle Real Application Clusters or Oracle Database installed, then you cannot use the <code dir="ltr">srvctl</code> binary in the database home to manage Oracle ASM or Oracle Net.</div>
</div>
<!-- class="sect1" -->
<a id="BABJFDEE"></a>
<div id="CWSOL437" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.7</span> Understanding Offline Processes in Oracle Grid Infrastructure</h2>
<p>Oracle Grid Infrastructure provides required resources for various Oracle products and components. Some of those products and components are optional, so you can install and enable them after installing Oracle Grid Infrastructure. To simplify postinstall additions, Oracle Grid Infrastructure preconfigures and registers all required resources for all products available for these products and components, but only activates them when you choose to add them. As a result, some components may be listed as OFFLINE after the installation of Oracle Grid Infrastructure.</p>
<p>Resources listed as TARGET:OFFLINE and STATE:OFFLINE do not need to be monitored. They represent components that are registered, but not enabled, so they do not use any system resources. If an Oracle product or component is installed on the system, and it requires a particular resource to be online, then the software will prompt you to activate the required offline resource.</p>
<p>The Oracle GSD (Global Service Daemon) process, <code dir="ltr">ora.gsd</code>, is typically offline. You must enable Oracle GSD manually if you plan to use an Oracle 9<span class="italic">i</span> Real Application Clusters database on the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) cluster.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2760">
<tr>
<td class="cellalignment2767">
<table class="cellalignment2765">
<tr>
<td class="cellalignment2764"><a href="storage.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2764"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2769">
<table class="cellalignment2763">
<tr>
<td class="cellalignment2764"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2764"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2764"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2764"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2764"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2764"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
