<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Grid Infrastructure Postinstallation Procedures</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1088" />
<meta name="dcterms.created" content="2016-11-17T21:24:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide" />
<meta name="dcterms.identifier" content="E47805-03" />
<meta name="dcterms.isVersionOf" content="CWSOL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="crsunix.htm" title="Previous" type="text/html" />
<link rel="Next" href="rem_orcl.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e47805.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/17</span> <!-- End Header -->
<div id="CWSOL288" class="chapter"><a id="BABHHEHG"></a>
<h1 class="chapter"><span class="secnum">5</span> Oracle Grid Infrastructure Postinstallation Procedures</h1>
<p>This chapter describes how to complete the postinstallation tasks after you have installed the Oracle Grid Infrastructure software.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABGBHBB">Required Postinstallation Tasks</a></p>
</li>
<li>
<p><a href="#BABEJBEA">Recommended Postinstallation Tasks</a></p>
</li>
<li>
<p><a href="#BABEHEEH">Using Older Oracle Database Versions with Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#BABBEJFG">Modifying Oracle Clusterware Binaries After Installation</a></p>
</li>
</ul>
<a id="BABGBHBB"></a>
<div id="CWSOL289" class="sect1">
<h2 class="sect1"><span class="secnum">5.1</span> Required Postinstallation Tasks</h2>
<p>You must perform the following tasks after completing your installation:</p>
<ul>
<li>
<p><a href="#CHDCIICF">Downloading and Installing Patch Updates</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
In prior releases, backing up the voting disks using a <code dir="ltr">dd</code> command was a required postinstallation task. With Oracle Clusterware release 11.2 and later, backing up and restoring a voting disk using the <code dir="ltr">dd</code> command may result in the loss of the voting disk, so this procedure is not supported.</div>
<a id="CHDCIICF"></a>
<div id="CWSOL290" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.1.1</span> Downloading and Installing Patch Updates</h3>
<p>Refer to the My Oracle Support Web site for required <a id="sthref604"></a><a id="sthref605"></a><a id="sthref606"></a><a id="sthref607"></a><a id="sthref608"></a>patch updates for your <a id="sthref609"></a>installation.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Browsers require an Adobe Flash plug-in, version 9.0.115 or higher to use My Oracle Support. Check your browser for the correct version of Flash plug-in by going to the Adobe Flash checker page, and installing the latest version of Adobe Flash.
<p>If you do not have Flash installed, then download the latest version of the Flash Player from the Adobe Web site:</p>
<pre dir="ltr">
<a href="http://www.adobe.com/go/getflashplayer">http://www.adobe.com/go/getflashplayer</a>
</pre></div>
<p>To download required patch updates:</p>
<ol>
<li>
<p>Use a Web browser to view the My Oracle Support Web site:</p>
<p><code dir="ltr"><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</li>
<li>
<p>Log in to My Oracle Support Web site.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are not a My Oracle Support registered user, then click <span class="bold">Register for My Oracle Support</span> and register.</div>
</li>
<li>
<p>On the main My Oracle Support page, click <span class="bold">Patches &amp; Updates</span>.</p>
</li>
<li>
<p>On the Patches &amp; Update page, click <span class="bold">Advanced Search</span>.</p>
</li>
<li>
<p>On the Advanced Search page, click the search icon next to the Product or Product Family field.</p>
</li>
<li>
<p>In the Search and Select: Product Family field, select Database and Tools in the Search list field, enter RDBMS Server in the text field, and click <span class="bold">Go</span>.</p>
<p>RDBMS Server appears in the Product or Product Family field. The current release appears in the Release field.</p>
</li>
<li>
<p>Select your platform from the list in the Platform field, and at the bottom of the selection list, click <span class="bold">Go</span>.</p>
</li>
<li>
<p>Any available patch updates appear under the Results heading.</p>
</li>
<li>
<p>Click the patch number to download the patch.</p>
</li>
<li>
<p>On the Patch Set page, click <span class="bold">View README</span>&nbsp;and read the page that appears. The README page contains information about the patch set and how to apply the patches to your installation.</p>
</li>
<li>
<p>Return to the Patch Set page, click <span class="bold">Download</span>, and save the file on your system.</p>
</li>
<li>
<p>Use the unzip utility provided with Oracle Database 11<span class="italic">g</span> release 2 (11.2) to uncompress the Oracle patch updates that you downloaded from My Oracle Support. The unzip utility is located in the <code dir="ltr">$ORACLE_HOME/bin</code> directory.</p>
</li>
<li>
<p>Refer to <a href="procstop.htm#BABEHGJG">Appendix E</a> for information about how to stop database processes in preparation for installing patches.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEJBEA"></a>
<div id="CWSOL292" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">5.2</span> Recommended Postinstallation Tasks</h2>
<p>Oracle recommends that you complete the following tasks as needed after installing Oracle Grid Infrastructure:</p>
<ul>
<li>
<p><a href="#BABEHDFH">Backing Up the root.sh Script</a></p>
</li>
<li>
<p><a href="#BHAGIJHC">Configuring IPMI-based Failure Isolation Using Crsctl</a></p>
</li>
<li>
<p><a href="#BABFBABG">Tuning Semaphore Parameters</a></p>
</li>
<li>
<p><a href="#BABHFGFF">Creating a Fast Recovery Area Disk Group</a></p>
</li>
<li>
<p><a href="#CHDFFHGH">Running Oracle RAC Configuration Audit Tool</a></p>
</li>
</ul>
<a id="BABEHDFH"></a>
<div id="CWSOL293" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.1</span> Backing Up the root.sh Script</h3>
<p>Oracle recommends that you <a id="sthref610"></a><a id="sthref611"></a>back up the <code dir="ltr">root.sh</code> script after you complete an installation. If you install other products in the same Oracle home directory, then the installer updates the contents of the existing <code dir="ltr">root.sh</code> script during the installation. If you require information contained in the original <code dir="ltr">root.sh</code> script, then you can recover it from the <code dir="ltr">root.sh</code> file copy.</p>
</div>
<!-- class="sect2" -->
<a id="BHAGIJHC"></a>
<div id="CWSOL294" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.2</span> Configuring IPMI-based Failure Isolation Using Crsctl</h3>
<p><a id="sthref612"></a>On Oracle Solaris platforms, where Oracle does not currently support the native IPMI driver, DHCP addressing is not supported and manual configuration is required for IPMI support. OUI will not collect the administrator credentials, so failure isolation must be manually configured, the BMC must be configured with a static IP address, and the address must be manually stored in the OLR.</p>
<p>To configure Failure Isolation using IPMI, complete the following steps on each cluster member node:</p>
<ol>
<li>
<p>If necessary, start Oracle Clusterware using the following command:</p>
<pre dir="ltr">
$ crsctl start crs
</pre></li>
<li>
<p>Use the BMC management utility to obtain the BMC's IP address and then use the cluster control utility <code dir="ltr">crsctl</code> to store the BMC's IP address in the Oracle Local Registry (OLR) by issuing the <code dir="ltr">crsctl set css ipmiaddr</code> <code dir="ltr"><span class="codeinlineitalic">address</span></code> command. For example:</p>
<pre dir="ltr">
$crsctl set css ipmiaddr 192.168.10.45
</pre></li>
<li>
<p>Enter the following crsctl command to store the user ID and password for the resident BMC in the OLR, where <code dir="ltr"><span class="codeinlineitalic">youradminacct</span></code> is the IPMI administrator user account, and provide the password when prompted:</p>
<pre dir="ltr">
$ crsctl set css ipmiadmin <span class="italic">youradminact</span>
IPMI BMC Password: 
</pre>
<p>This command attempts to validate the credentials you enter by sending them to another cluster node. The command fails if that cluster node is unable to access the local BMC using the credentials.</p>
<p>When you store the IPMI credentials in the OLR, you must have the anonymous user specified explicitly, or a parsing error will be reported.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABFBABG"></a>
<div id="CWSOL297" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.3</span> Tuning Semaphore Parameters</h3>
<p>Refer to the following guidelines only if the default semaphore parameter values are too low to accommodate all Oracle processes:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you refer to the operating system documentation for more information about setting semaphore parameters.</div>
<ol>
<li>
<p>Calculate the minimum total semaphore requirements using the following formula:</p>
<p>2 * sum (process parameters of all database instances on the system) + overhead for background processes + system and other application requirements</p>
</li>
<li>
<p>Set <code dir="ltr">semmns</code> (total semaphores systemwide) to this total.</p>
</li>
<li>
<p>Set <code dir="ltr">semmsl</code> (semaphores for each set) to 250.</p>
</li>
<li>
<p>Set <code dir="ltr">semmni</code> (total semaphores sets) to <code dir="ltr">semmns</code> divided by <code dir="ltr">semmsl</code>, rounded up to the nearest multiple of 1024.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABHFGFF"></a>
<div id="CWSOL298" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.4</span> Creating a Fast Recovery Area Disk Group</h3>
<p>During installation, by default you can create one disk group. If you plan to add an Oracle Database for a standalone server or an Oracle RAC database, then you should create the Fast Recovery Area for database files.</p>
<div id="CWSOL299" class="sect3"><a id="sthref613"></a>
<h4 class="sect3"><span class="secnum">5.2.4.1</span> About the Fast Recovery Area and the Fast Recovery Area Disk Group</h4>
<p>The Fast Recovery Area is a unified storage location for all Oracle Database files related to recovery. Database administrators can define the DB_RECOVERY_FILE_DEST parameter to the path for the Fast Recovery Area to enable on-disk backups, and rapid recovery of data. Enabling rapid backups for recent data can reduce requests to system administrators to retrieve backup tapes for recovery operations.</p>
<p>When you enable Fast Recovery in the <code dir="ltr">init.ora</code> file, all RMAN backups, archive logs, control file automatic backups, and database copies are written to the Fast Recovery Area. RMAN automatically manages files in the Fast Recovery Area by deleting obsolete backups and archive files no longer required for recovery.</p>
<p>Oracle recommends that you create a Fast Recovery Area disk group. Oracle Clusterware files and Oracle Database files can be placed on the same disk group, and you can also place Fast recovery files in the same disk group. However, Oracle recommends that you create a separate Fast Recovery disk group to reduce storage device contention.</p>
<p>The Fast Recovery Area is enabled by setting DB_RECOVERY_FILE_DEST. The size of the Fast Recovery Area is set with DB_RECOVERY_FILE_DEST_SIZE. As a general rule, the larger the Fast Recovery Area, the more useful it becomes. For ease of use, Oracle recommends that you create a Fast Recovery Area disk group on storage devices that can contain at least three days of recovery information. Ideally, the Fast Recovery Area should be large enough to hold a copy of all of your data files and control files, the online redo logs, and the archived redo log files needed to recover your database using the data file backups kept under your retention policy.</p>
<p>Multiple databases can use the same Fast Recovery Area. For example, assume you have created one Fast Recovery Area disk group on disks with 150 GB of storage, shared by three different databases. You can set the size of the Fast Recovery Area for each database depending on the importance of each database. For example, if database1 is your least important database, database 2 is of greater importance and database 3 is of greatest importance, then you can set different DB_RECOVERY_FILE_DEST_SIZE settings for each database to meet your retention target for each database: 30 GB for database 1, 50 GB for database 2, and 70 GB for database 3.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Database Storage Administrator's Guide</span></a></div>
</div>
<!-- class="sect3" -->
<div id="CWSOL300" class="sect3"><a id="sthref614"></a>
<h4 class="sect3"><span class="secnum">5.2.4.2</span> Creating the Fast Recovery Area Disk Group</h4>
<p>To create a Fast recovery file disk group:</p>
<ol>
<li>
<p>Navigate to the Grid home bin directory, and start Oracle ASM Configuration Assistant <a id="sthref615"></a>(ASMCA). For example:</p>
<pre dir="ltr">
$ cd /u01/app/11.2.0/grid/bin
$ ./asmca
</pre></li>
<li>
<p>ASMCA opens at the Disk Groups tab. Click <span class="bold">Create</span> to create a new disk group</p>
</li>
<li>
<p>The Create Disk Groups window opens.</p>
<p>In the Disk Group Name field, enter a descriptive name for the Fast Recovery Area group. For example: FRA.</p>
<p>In the Redundancy section, select the level of redundancy you want to use.</p>
<p>In the Select Member Disks field, select eligible disks to be added to the Fast Recovery Area, and click <span class="bold">OK</span>.</p>
</li>
<li>
<p>The Diskgroup Creation window opens to inform you when disk group creation is complete. Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">Exit</span>.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDFFHGH"></a>
<div id="CWSOL484" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.2.5</span> Running Oracle RAC Configuration Audit Tool</h3>
<p>Oracle recommends that you run the Oracle RAC Configuration Audit tool (RACcheck) to check your Oracle RAC installation. RACcheck is an Oracle RAC auditing tool that checks various important configuration settings within Oracle Real Application Clusters, Oracle Clusterware, Oracle Automatic Storage Management and the Oracle Grid Infrastructure environment.</p>
<p>Oracle recommends that you download and run the latest version of RACcheck from My Oracle Support. For information about downloading, configuring, and running RACcheck configuration audit tool, refer to My Oracle Support note 1268927.1, which is available at the following URL:</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1268927.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1268927.1</a></code></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD8365" href="../../rac.112/e41960/racchk.htm#RACAD8365"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEHEEH"></a>
<div id="CWSOL301" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">5.3</span> Using Older Oracle Database Versions with Grid Infrastructure</h2>
<p>Review the following sections for information about using older Oracle Database releases with 11<span class="italic">g</span> release 2 (11.2) Oracle Grid Infrastructure installations:</p>
<ul>
<li>
<p><a href="#BABDCBHF">General Restrictions for Using Older Oracle Database Versions</a></p>
</li>
<li>
<p><a href="#CIHDJHDF">Using ASMCA to Administer Disk Groups for Older Database Versions</a></p>
</li>
<li>
<p><a href="#BABGIJDH">Pinning Cluster Nodes for Oracle Database Release 10.x or 11.x</a></p>
</li>
<li>
<p><a href="#BABFDGBI">Using the Correct LSNRCTL Commands</a></p>
</li>
</ul>
<a id="BABDCBHF"></a>
<div id="CWSOL302" class="sect2">
<h3 class="sect2"><span class="secnum">5.3.1</span> General Restrictions for Using Older Oracle Database Versions</h3>
<p>You can use Oracle Database release 9.2, release 10.x and release 11.1 with Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2).</p>
<p>However, placing Oracle Database homes on Oracle ACFS that are prior to Oracle Database release 11.2 is not supported, because earlier releases are not designed to use Oracle ACFS.</p>
<p>If you upgrade an existing version of Oracle Clusterware, then required configuration of existing databases is completed automatically. However, if you complete a new installation of Oracle Grid Infrastructure for a cluster, and then want to install a version of Oracle Database prior to 11.2, then you must complete additional manual configuration tasks.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you start an Oracle RAC or Oracle Database installation on an Oracle Clusterware release 11.2 installation, if you are upgrading from releases 11.1.0.7, 11.1.0.6, and 10.2.0.4, Oracle recommends that you check for the latest recommended patches for the release you are upgrading from, and install those patches as needed prior to the upgrade.
<p>For more information on recommended patches, refer to "Oracle Upgrade Companion," which is available through Note 785351.1 on My Oracle Support:</p>
<p><code dir="ltr"><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
<p>You may also refer to Notes 756388.1 and 756671.1 for the current list of recommended patches for each release</p>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHDJHDF"></a>
<div id="CWSOL438" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.3.2</span> Using ASMCA to Administer Disk Groups for Older Database Versions</h3>
<p><a id="sthref616"></a><a id="sthref617"></a><a id="sthref618"></a>Use Oracle ASM Configuration Assistant (ASMCA) to create and modify disk groups when you install older Oracle databases and Oracle RAC databases on Oracle Grid Infrastructure installations. Starting with 11g release 2, Oracle ASM is installed as part of an Oracle Grid Infrastructure installation, with Oracle Clusterware. You can no longer use Database Configuration Assistant (DBCA) to perform administrative tasks on Oracle ASM.</p>
</div>
<!-- class="sect2" -->
<a id="BABGIJDH"></a>
<div id="CWSOL303" class="sect2">
<h3 class="sect2"><span class="secnum">5.3.3</span> Pinning Cluster Nodes for Oracle Database Release 10.x or 11.x</h3>
<p>When Oracle Clusterware 11<span class="italic">g</span> release 11.2 is installed on a cluster with no previous Oracle software version, it configures cluster nodes dynamically, which is compatible with Oracle Database Release 11.2 and later, but Oracle Database 10g and 11.1 require a persistent configuration. This process of association of a node name with a node number is called pinning.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
During an upgrade, all cluster member nodes are pinned automatically, and no manual pinning is required for existing databases. This procedure is required only if you install older database versions after installing Oracle Grid Infrastructure release 11.2 software.</div>
<p><a id="sthref619"></a>To pin a node in preparation for installing or using an older Oracle Database version, use <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin/crsctl</code> with the following command syntax, where <code dir="ltr"><span class="codeinlineitalic">nodes</span></code> is a space-delimited list of one or more nodes in the cluster whose configuration you want to pin:</p>
<pre dir="ltr">
crsctl pin css -n <span class="italic">nodes</span>
</pre>
<p>For example, to pin nodes <code dir="ltr">node3</code> and <code dir="ltr">node4</code>, log in as <code dir="ltr">root</code> and enter the following command:</p>
<pre dir="ltr">
$ crsctl pin css -n node3 node4
</pre>
<p>To determine if a node is in a pinned or unpinned state, use <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin/olsnodes</code> with the following command syntax:</p>
<p>To list all pinned nodes:</p>
<pre dir="ltr">
olsnodes -t -n 
</pre>
<p>For example:</p>
<pre dir="ltr">
# /u01/app/11.2.0/grid/bin/olsnodes -t -n
node1 1       Pinned
node2 2       Pinned
node3 3       Pinned
node4 4       Pinned
</pre>
<p>To list the state of a particular node:</p>
<pre dir="ltr">
olsnodes -t -n node3
</pre>
<p>For example:</p>
<pre dir="ltr">
# /u01/app/11.2.0/grid/bin/olsnodes -t -n node3
node3 3       Pinned
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91595" href="../../rac.112/e41959/crsref.htm#CWADD91595"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about pinning and unpinning nodes</div>
</div>
<!-- class="sect2" -->
<a id="BABFDGBI"></a>
<div id="CWSOL305" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">5.3.4</span> Using the Correct LSNRCTL Commands</h3>
<p>To administer 11<span class="italic">g</span> release 2 local and scan listeners using the <code dir="ltr">lsnrctl</code> command, set your <code dir="ltr">$ORACLE_HOME</code> environment variable to the path for the Oracle Grid Infrastructure home (Grid home). Do not attempt to use the <code dir="ltr">lsnrctl</code> commands from Oracle home locations for previous releases, as they cannot be used with the new release.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBEJFG"></a>
<div id="CWSOL306" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">5.4</span> Modifying Oracle Clusterware Binaries After Installation</h2>
<p><a id="sthref620"></a><a id="sthref621"></a><a id="sthref622"></a><a id="sthref623"></a><a id="sthref624"></a>After installation, if you need to modify the Oracle Clusterware configuration, then you must unlock the Grid home.</p>
<p>For example, if you want to apply a one-off patch, or if you want to modify an Oracle Exadata configuration to run IPC traffic over RDS on the interconnect instead of using the default UDP, then you must unlock the Grid home.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before relinking executables, you must shut down all executables that run in the Oracle home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<p>Unlock the home using the following procedure:</p>
<ol>
<li>
<p>Change directory to the path <span class="italic">Grid_home</span>/crs/install, where <span class="italic">Grid_home</span> is the path to the Grid home, and unlock the Grid home using the command <code dir="ltr">rootcrs.pl -unlock -crshome</code> <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code>, where Grid_home is the path to your Grid infrastructure home. For example, with the Grid home <code dir="ltr">/u01/app/11.2.0/grid</code>, enter the following command:</p>
<pre dir="ltr">
# cd /u01/app/11.2.0/grid/crs/install
# perl rootcrs.pl -unlock -crshome /u01/app/11.2.0/grid
</pre></li>
<li>
<p>Change user to the Oracle Grid Infrastructure software owner, and relink binaries using the command syntax make -f <span class="italic">Grid_home</span>/rdbms/lib/ins_rdbms.mk <span class="italic">target</span>, where <span class="italic">Grid_home</span> is the Grid home, and <span class="italic">target</span> is the binaries that you want to relink. For example, where the grid user is <code dir="ltr">grid</code>, <code dir="ltr">$ORACLE_HOME</code> is set to the Grid home, and where you are updating the interconnect protocol from UDP to IPC, enter the following command:</p>
<pre dir="ltr">
# su grid
$ make -f $ORACLE_HOME/rdbms/lib/ins_rdbms.mk ipc_rds ioracle
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
To relink binaries, you can also change to the grid installation owner and run the command <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin/relink</code>.</div>
</li>
<li>
<p>Relock the Grid home and restart the cluster using the following command:</p>
<pre dir="ltr">
# perl rootcrs.pl -patch
</pre></li>
<li>
<p>Repeat steps 1 through 3 on each cluster member node.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2760">
<tr>
<td class="cellalignment2767">
<table class="cellalignment2765">
<tr>
<td class="cellalignment2764"><a href="crsunix.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2764"><a href="rem_orcl.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2769">
<table class="cellalignment2763">
<tr>
<td class="cellalignment2764"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2764"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2764"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2764"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2764"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2764"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
