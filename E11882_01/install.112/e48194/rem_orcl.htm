<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>How to Modify or Deinstall Oracle Grid Infrastructure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090" />
<meta name="dcterms.created" content="2017-01-19T21:44:28Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide" />
<meta name="dcterms.identifier" content="E48194-03" />
<meta name="dcterms.isVersionOf" content="CWWIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="postinst.htm" title="Previous" type="text/html" />
<link rel="Next" href="trouble.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e48194.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/17</span> <!-- End Header -->
<div id="CWWIN376" class="chapter"><a id="CHDGBBIJ"></a>
<h1 class="chapter"><span class="secnum">6</span> How to Modify or Deinstall Oracle Grid Infrastructure</h1>
<p><a id="sthref666"></a><a id="sthref667"></a>This chapter describes how to remove or deconfigure Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM) software from your server.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CBHFFAGE">Deciding When to Deinstall Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CBHJFBFB">Migrating Standalone Grid Infrastructure Servers to a Cluster</a></p>
</li>
<li>
<p><a href="#CIHEGCAC">Changing the Oracle Grid Infrastructure Home Path</a></p>
</li>
<li>
<p><a href="#CHDBFFJF">Deconfiguring Oracle Clusterware Without Removing the Software</a></p>
</li>
<li>
<p><a href="#CBHEFHAC">Removing Oracle Clusterware and Oracle ASM Software</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Product-specific documentation for requirements and restrictions to remove an individual product</div>
<a id="CBHFFAGE"></a>
<div id="CWWIN377" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.1</span> Deciding When to Deinstall Oracle Clusterware</h2>
<p><a id="sthref668"></a><a id="sthref669"></a><a id="sthref670"></a>Remove installed components in the following situations:</p>
<ul>
<li>
<p>You have successfully installed Oracle Clusterware, and you want to remove the Oracle Clusterware installation, either in an educational environment, or a test environment.</p>
</li>
<li>
<p>You have encountered errors during or after installing or upgrading Oracle Clusterware, and you want to reattempt an installation.</p>
</li>
<li>
<p>Your installation or upgrade stopped because of a hardware or operating system failure.</p>
</li>
<li>
<p>You are advised by Oracle Support to reinstall Oracle Clusterware.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CBHJFBFB"></a>
<div id="CWWIN378" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.2</span> Migrating Standalone Grid Infrastructure Servers to a Cluster</h2>
<p>If you have an Oracle Database installation using Oracle Restart (an Oracle Grid Infrastructure installation for a standalone server), and you want to configure that server as a cluster member node, then complete the following tasks:</p>
<ol>
<li id="CIHCFCFA">
<p><a id="sthref671"></a>Inspect the Oracle Restart configuration with the Server Control (SRVCTL) utility using the following syntax, where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the unique name for the database, and <code dir="ltr"><span class="codeinlineitalic">lsnrname</span></code> is the name of the listener for the database:</p>
<pre dir="ltr">
srvctl config database -d <span class="italic">db_unique_name</span>
srvctl config service -d <span class="italic">db_unique_name</span>
srvctl config listener -l <span class="italic">lsnrname</span>
</pre>
<p>Write down the configuration information for the server, because you will need this information in a later step.</p>
</li>
<li>
<p>Stop all of the databases, services, and listeners that you discovered in step <a href="#CIHCFCFA">1</a>.</p>
</li>
<li>
<p>If present, unmount all Oracle ASM Cluster File System (Oracle ACFS) file systems.</p>
</li>
<li>
<p>Go to the directory <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\crs\install</code>, where Grid_home is the location of your Oracle Grid Infrastructure home (Grid home) directory, for example:</p>
<pre dir="ltr">
C:\&gt; cd app\11.2.0\grid\crs\install
</pre></li>
<li>
<p>D<a id="sthref672"></a>econfigure and deinstall the Oracle Grid Infrastructure installation for a standalone server (Oracle Restart) using the following command:</p>
<pre dir="ltr">
C:\..\install&gt; C:\app\11.2.0\grid\perl\bin\perl.exe roothas.pl -deconfig
</pre></li>
<li>
<p>Prepare the server for Oracle Clusterware configuration, as described in either <a href="typinstl.htm#CHDHGIGC">Chapter 1, "Typical Installation for Oracle Grid Infrastructure for a Cluster"</a> or <a href="prewin.htm#BABFDGHJ">Chapter 2, "Advanced Installation Oracle Grid Infrastructure for a Cluster Preinstallation Tasks"</a>.</p>
</li>
<li>
<p>If you are using Oracle Grid Infrastructure release 11.2.0.2 or higher, then, as the Oracle Grid Infrastructure installation owner, run Oracle Clusterware Configuration Wizard. Save and stage the response file. For the <code dir="ltr">-responseFile</code> parameter, specify the full path name where the response file should be written by the Oracle Clusterware Configuration Wizard, for example:</p>
<pre dir="ltr">
C:\..\crs&gt; cd ..\config
C:\..\config&gt; config.bat -silent -responseFile C:\user\dba1\scripts\GI.rsp
</pre></li>
<li>
<p>If you are using Oracle Grid Infrastructure release 11.2.0.1, then configure the cluster using a response file as described in <a href="app_nonint.htm#BABFEECI">Appendix B, "Installing and Configuring Oracle Grid Infrastructure Using Response Files."</a></p>
</li>
<li>
<p>Mount the Oracle ASM disk group used by Oracle Restart.</p>
</li>
<li>
<p><a id="sthref673"></a>If you used Oracle ACFS with Oracle Restart, then start Oracle ASM Configuration Assistant (ASMCA). Run the <code dir="ltr">volenable</code> command to enable all Oracle Restart disk group volumes.</p>
</li>
<li>
<p>If you used Oracle ACFS with Oracle Restart, then mount all Oracle ACFS file systems manually.</p>
</li>
<li>
<p>Add back Oracle Clusterware services to the Oracle Clusterware home, using the information you wrote down in step <a href="#CIHCFCFA">1</a>:</p>
<ol>
<li>
<p>Register the Oracle ACFS resources. Use a command similar to the following, where <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> is the location of your Oracle Grid Infrastructure installation:</p>
<pre dir="ltr">
C:\&gt; <span class="codeinlineitalic">Grid_home</span>\bin\srvctl add filesystem -d \\.\ORCLDATADISK4  
-g ORestartData -v db1 -m C:\app\11.2.0\grid\db1 -u grid
</pre></li>
<li>
<p>Register the Oracle Database resources with Oracle Clusterware. Use the following command syntax, where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the unique name of the database on the node, and <code dir="ltr"><span class="codeinlineitalic">nodename</span></code> is the name of the node:</p>
<pre dir="ltr">
srvctl add database -d <span class="italic">db_unique_name</span> -o %ORACLE_HOME% -x <span class="italic">nodename</span>
</pre>
<p>For example, for the database name <code dir="ltr">mydb</code> on the local node <code dir="ltr">node1</code>, first verify that the <code dir="ltr">ORACLE_HOME</code> environment variable is set to the location of the database home directory, then enter the following command to register the database with Oracle Clusterware:</p>
<pre dir="ltr">
srvctl add database -d mydb -o %ORACLE_HOME% -x node1
</pre></li>
<li>
<p>Register each database service, using the command <code dir="ltr">srvctl add service</code>. For example, if your database name is <code dir="ltr">mydb</code> and you created a service named <code dir="ltr">myservice</code> for this database, then enter the following command:</p>
<pre dir="ltr">
srvctl add service -d mydb -s myservice
</pre></li>
</ol>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHEGCAC"></a>
<div id="CWWIN380" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.3</span> Changing the Oracle Grid Infrastructure Home Path</h2>
<p>With release 11.2.0.3 and later, after installing Oracle Grid Infrastructure for a cluster, if you need to change the location of the Grid home, then use the following steps as a guide to detach the existing Grid home, and to attach a new Grid home that uses the new location:</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before changing the Grid home, you must shut down all executables that run in the Grid home directory that you are modifying. In addition, shut down all applications that use Oracle shared libraries.</div>
<ol>
<li>
<p>Detach the existing Grid home by running the following command as an Administrator user, where <code dir="ltr">C:\app\11.2.0\grid</code> is the existing Grid home location:</p>
<pre dir="ltr">
C:\&gt; cd app\11.2.0\grid\oui\bin
C:\..\bin&gt; detachhome.bat -silent -local
</pre></li>
<li>
<p>Move the installed files for Oracle Grid Infrastructure from the old Grid home to the new Grid home. For example, if the old Grid home is <code dir="ltr">C:\app\11.2.0\grid</code> and the new Grid home is <code dir="ltr">C:\app\grid</code>, use the following command:</p>
<pre dir="ltr">
C:\&gt; xcopy C:\app\11.2.0\grid C:\app\grid /E /I /H /K
</pre></li>
<li>
<p>Clone the Oracle Grid Infrastructure installation, using the instructions provided in "Creating a Cluster by Cloning Oracle Clusterware Step 3: Run the clone.pl Script on Each Destination Node," in <a class="olink CWADD92126" href="../../rac.112/e41959/clonecluster.htm#CWADD92126"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</p>
<p>When you run the <code dir="ltr">clone.pl</code> script in the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\clone\bin</code> directory, provide values for the input parameters that provide the path information for the new Grid home.</p>
</li>
<li>
<p>Enter the following command to start Oracle Clusterware in the new home location:</p>
<pre dir="ltr">
C:\..bin\&gt; cd C:\app\grid\crs\install
C:\..install\&gt; perl rootcrs.pl -patch -destcrshome C:\app\grid
</pre></li>
<li>
<p>Repeat steps 1 through 4 on each cluster member node.</p>
</li>
</ol>
<p>You must reconfigure Oracle Clusterware and Oracle ASM every time you move the Grid home.</p>
</div>
<!-- class="sect1" -->
<a id="CHDBFFJF"></a>
<div id="CWWIN381" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.4</span> Deconfiguring Oracle Clusterware Without Removing the Software</h2>
<p><a id="sthref674"></a><a id="sthref675"></a><a id="sthref676"></a><a id="sthref677"></a>Running the <code dir="ltr">rootcrs.pl</code> command with the flags <code dir="ltr">-deconfig</code> <code dir="ltr">-force</code> enables you to deconfigure Oracle Clusterware on one or more nodes without removing the installed software. This feature is useful if you encounter an error on one or more cluster nodes during installation, such as incorrectly configured shared storage. By running <code dir="ltr">rootcrs.pl -deconfig -force</code> on nodes where you encounter an installation error, you can deconfigure Oracle Clusterware on those nodes, correct the cause of the error, and then run <code dir="ltr">rootcrs.pl</code> again.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Stop any databases, services, and listeners that may be installed and running before deconfiguring Oracle Clusterware.</div>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Commands used in this section remove the Oracle Grid infrastructure installation for the entire cluster. If you want to remove the installation from an individual node, then refer to <a class="olink CWADD1167" href="../../rac.112/e41959/adddelclusterware.htm#CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</div>
<p>To deconfigure Oracle Clusterware:</p>
<ol>
<li>
<p>Log in using a member of the Administrators group on a node where you encountered an error during installation.</p>
</li>
<li>
<p>Change directory to <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\crs\install</code>. For example:</p>
<pre dir="ltr">
C:\&gt; cd C:\app\11.2.0\grid\crs\install
</pre></li>
<li>
<p>Run <code dir="ltr">rootcrs.pl</code> with the <code dir="ltr">-deconfig -force</code> flags. For example:</p>
<pre dir="ltr">
C:\..\install&gt; perl rootcrs.pl -deconfig -force
</pre>
<p>Repeat on other nodes as required.</p>
</li>
<li>
<p>If you are deconfiguring Oracle Clusterware on all nodes in the cluster, then on the last node, enter the following command:</p>
<pre dir="ltr">
C:\..\install&gt; perl rootcrs.pl -deconfig -force -lastnode
</pre>
<p>The <code dir="ltr">-lastnode</code> flag completes deconfiguration of the cluster, including the Oracle Cluster Registry (OCR) and voting disks.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">-force</code> flag must be specified when running the <code dir="ltr">rootcrs.pl</code> script if there exist running resources that depend on the resources started from the Oracle Clusterware home you are deleting, such as databases, services, or listeners. You must also use the <code dir="ltr">-force</code> flag if you are removing a partial, or failed installation.</div>
</div>
<!-- class="sect1" -->
<a id="CBHEFHAC"></a>
<div id="CWWIN382" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.5</span> Removing Oracle Clusterware and Oracle ASM Software</h2>
<p>The <code dir="ltr">deinstall</code> tool removes Oracle Clusterware and Oracle ASM from your server. The following sections describe the command, and provide information about additional options to use with the command:</p>
<ul>
<li>
<p><a href="#CBHEFJFI">About the Deinstallation Tool</a></p>
</li>
<li>
<p><a href="#CIHBHCHD">Downloading The Deinstall Tool for Use with Failed Installations</a></p>
</li>
<li>
<p><a href="#CBHEECDB">Using the Deinstallation Tool to Remove Oracle Clusterware and Oracle ASM</a></p>
</li>
<li>
<p><a href="#CBHHDFDA">Example Parameter File for Deinstall of Oracle Grid Infrastructure</a></p>
</li>
</ul>
<a id="CBHEFJFI"></a>
<div id="CWWIN383" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.5.1</span> About the Deinstallation Tool</h3>
<p><a id="sthref678"></a><a id="sthref679"></a>The Deinstallation tool (<code dir="ltr">deinstall.bat</code>) stops Oracle programs, and removes Oracle software and configuration files on the operating system. The Deinstallation tool is available in Oracle home directories after installation as <code dir="ltr">%ORACLE_HOME%\deinstall\deinstall.bat</code>. The Deinstallation tool command is also available for download from Oracle Technology Network (OTN) at the following URL:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/">http://www.oracle.com/technetwork/database/enterprise-edition/downloads</a></code></p>
<p>You can download the Deinstallation tool with the complete Oracle Database 11<span class="italic">g</span> Release 2 software, or as a separate archive file. To download the Deinstallation tool separately, click the <span class="bold">See All</span> link next to the software version.</p>
<p>The Deinstallation tool command uses the information you provide, plus information gathered from the software home to create a parameter file. You can alternatively supply a parameter file generated previously by the <code dir="ltr">deinstall.bat</code> command using the <code dir="ltr">&ndash;checkonly</code> flag and <code dir="ltr">-o</code> flag. You can also edit a response file template to create a parameter file.</p>
<p>The Deinstallation tool command stops Oracle software, and removes Oracle software and configuration files on the operating system for a specific Oracle home. If you run the Deinstallation tool to remove an Oracle Grid Infrastructure for a cluster installation, then the tool prompts you to run the <code dir="ltr">rootcrs.pl</code> script as a user that is a member of the Administrators group.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you run the <code dir="ltr">deinstall</code> command, if the central inventory contains no other registered homes besides the home that you are deconfiguring and removing, then the Deinstallation tool removes the following files and directory contents in the Oracle base directory of the Oracle RAC installation owner:
<ul>
<li>
<p><code dir="ltr">admin</code></p>
</li>
<li>
<p><code dir="ltr">cfgtoollogs</code></p>
</li>
<li>
<p><code dir="ltr">checkpoints</code></p>
</li>
<li>
<p><code dir="ltr">diag</code></p>
</li>
<li>
<p><code dir="ltr">oradata</code></p>
</li>
<li>
<p><code dir="ltr">flash_recovery_area</code></p>
</li>
</ul>
<p>Oracle strongly recommends that you configure your installations using an Optimal Flexible Architecture (OFA) configuration, and that you reserve Oracle base and Oracle home paths for exclusive use of Oracle software. If you have any user data in these locations in the Oracle base that is owned by the user account that owns the Oracle software, then the <code dir="ltr">deinstall</code> command deletes this data.</p>
</div>
<p>The Deinstallation tool uses the following syntax, where variable content is indicated by italics:</p>
<pre dir="ltr">
deinstall.bat [-home <span class="italic">complete path of Oracle home</span>] [-silent] [-checkonly] [-local]
[-paramfile <span class="italic">complete path of input parameter property file</span>]
[-params name1=<span class="italic">value</span> name2=<span class="italic">value</span> ...] 
[-o <span class="italic">complete path of directory for saving files</span>] 
[-tmpdir <span class="italic">complete path of temporary directory to use</span>] 
[-logdir <span class="italic">complete path of log directory to use</span>] [-help]
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use the Deinstallation tool with the <code dir="ltr">-local</code> option for a shared Oracle home.</div>
<p>The default method for running the Deinstallation tool is from the <code dir="ltr">deinstall</code> directory in the Grid home. In addition, you can run the Deinstallation tool from other locations, or with a parameter file, or specify options when running the <code dir="ltr">deinstall.bat</code> command.</p>
<p>The options you can use with the <code dir="ltr">deinstall.bat</code> command are:</p>
<ul>
<li>
<p><code dir="ltr">-home</code></p>
<p>Use this flag to indicate the home path of the Oracle home to check or deinstall. To deinstall Oracle software using the <code dir="ltr">deinstall.bat</code> command located in the Oracle home being removed, provide a parameter file in a location outside the Oracle home, and do not use the <code dir="ltr">-home</code> flag.</p>
<p>If you run deinstall from the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\deinstall</code> path, then the <code dir="ltr">-home</code> flag is not required because the tool knows from which home it is being run. If you use the standalone version of the tool, then <code dir="ltr">-home</code> is mandatory</p>
</li>
<li>
<p>-<code dir="ltr">silent</code></p>
<p>Use this flag to run the command in noninteractive mode. This option requires one of the following:</p>
<ul>
<li>
<p>A working system that the Deinstallation tool can access to determine the installation properties</p>
</li>
<li>
<p>A properties file that contains the configuration values for the Oracle home that is being deinstalled or deconfigured</p>
</li>
</ul>
<p>To create a properties file, modify the template file <code dir="ltr">deinstall.rsp.tmpl</code>, located in the <code dir="ltr">response</code> folder of the Deinstallation tool home or the Oracle home.</p>
<p>If you have a working system, you can generate a properties file to use or modify by running the <code dir="ltr">deinstall.bat</code> command with the <code dir="ltr">-checkonly</code> flag. The <code dir="ltr">deinstall.bat</code> command then discovers information from the Oracle home to deinstall and deconfigure. It generates the properties file, which you can then use with the <code dir="ltr">-silent</code> option.</p>
</li>
<li>
<p><code dir="ltr">-checkonly</code></p>
<p>Use this flag to check the status of the Oracle software home configuration. Running the command with the <code dir="ltr">-checkonly</code> flag does not remove the Oracle configuration. This flag generates a properties file that you can use with the <code dir="ltr">deinstall.bat</code> command.</p>
<p>When you use the <code dir="ltr">-checkonly</code> flag to generate a properties file, you are prompted to provide information about your system. You can accept the default value the tool has obtained from your Oracle installation, indicated inside brackets ([]), or you can provide different values. To accept the defaults, press Enter at each prompt.</p>
</li>
<li>
<p><code dir="ltr">-local</code></p>
<p>Use this flag on a multinode environment to deconfigure Oracle software in a cluster.</p>
<p>When you run <code dir="ltr">deinstall.bat</code> with this flag, it deconfigures and deinstalls the Oracle software only on the local node (the node on which you run <code dir="ltr">deinstall.bat</code>) for non-shared Oracle home directories.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>This flag can only be used in cluster environments.</p>
</li>
<li>
<p>You cannot use the Deinstallation tool with the <code dir="ltr">-local</code> option for a shared Oracle home.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code dir="ltr">-paramfile</code> <code dir="ltr"><span class="codeinlineitalic">complete path of input parameter property file</span></code></p>
<p>This is an optional flag. You can use this flag to run <code dir="ltr">deinstall.bat</code> with a parameter file in a location other than the default. When you use this flag, provide the complete path where the parameter file is located. If you are running the deinstall.bat command from the Oracle home that you plan to deinstall, then you do not need to use the <code dir="ltr">-paramfile</code> flag.</p>
<p>The default location of the parameter file depends on the location of the Deinstallation tool:</p>
<ul>
<li>
<p>From the installation media or stage location: <code dir="ltr">&lt;</code><span class="italic">Drive</span><code dir="ltr">&gt;:\</code><span class="italic">staging_location</span><code dir="ltr">\deinstall\response</code></p>
</li>
<li>
<p>From a unzipped archive file downloaded from OTN: &lt;<span class="italic">Drive</span>&gt;:\<span class="italic">ziplocation</span>\<code dir="ltr">deinstall\</code><code dir="ltr">response</code>, where &lt;<span class="italic">Drive</span>&gt;:\<span class="italic">ziplocation</span> refers to the directory in which the downloaded archive file was extracted.</p>
</li>
<li>
<p>After installation, from the installed Oracle home: <code dir="ltr">%ORACLE_HOME%\deinstall\response</code>.</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">-params</code> [<code dir="ltr">name1</code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> <code dir="ltr">name2</code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> <code dir="ltr">name3</code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> . . .]</p>
<p>Use this flag with a parameter file to override one or more values in a parameter file that you created.</p>
</li>
<li>
<p>-<code dir="ltr">o</code> <code dir="ltr"><span class="codeinlineitalic">complete path of directory for saving response files</span></code></p>
<p>Use this flag to provide a path other than the default location where the properties file (<code dir="ltr">deinstall.rsp.tmpl</code>) is saved.</p>
<p>The default location of the properties file depends on the location of the Deinstallation tool:</p>
<ul>
<li>
<p>Extracted from an archive file downloaded from OTN: &lt;<span class="italic">Drive</span>&gt;:\<span class="italic">ziplocation</span>\<code dir="ltr">response</code>, where &lt;<span class="italic">Drive</span>&gt;:\<span class="italic">ziplocation</span>\ refers to directory in which the downloaded archive file was extracted.</p>
</li>
<li>
<p>After installation, from the installed Oracle home: <code dir="ltr">%ORACLE_HOME%\deinstall\response</code>.</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">-tmpdir</code> <code dir="ltr"><span class="codeinlineitalic">complete path of temporary directory</span></code></p>
<p>Specifies a non-default location where the deinstallation tool writes the temporary files for the deinstallation.</p>
</li>
<li>
<p><code dir="ltr">-logdir</code> <code dir="ltr"><span class="codeinlineitalic">complete path of log directory</span></code></p>
<p>Specifies a non-default location where the deinstallation tool writes the log files for the deinstallation.</p>
</li>
<li>
<p><code dir="ltr">-help</code></p>
<p>Use the help option (<code dir="ltr">-help</code>) to obtain additional information about the command option flags.</p>
</li>
</ul>
<p>If you use <a id="sthref680"></a>the <code dir="ltr">deinstall.bat</code> command located in an Oracle home, or the <code dir="ltr">deinstall.bat</code> command downloaded from OTN (not installed in an Oracle home), then it writes log files in the <code dir="ltr">C:\Program Files\Oracle\Inventory\</code><code dir="ltr">logs</code> directory. If, however, you are using the <code dir="ltr">deinstall.bat</code> command to remove the last Oracle home installed on the server, then the log files are written to:</p>
<ul>
<li>
<p><code dir="ltr">%TEMP%\OraDeinstall</code>&lt;<code dir="ltr"><span class="codeinlineitalic">timestamp</span></code>&gt;<code dir="ltr">\logs</code> if you use the <code dir="ltr">deinstall.bat</code> command located in the Oracle home</p>
</li>
<li>
<p>&lt;<span class="italic">Drive</span>&gt;<code dir="ltr">:\</code><code dir="ltr"><span class="codeinlineitalic">ziplocation</span></code><code dir="ltr">\deinstall\</code><code dir="ltr">logs</code> if you use the <code dir="ltr">deinstall.bat</code> command downloaded from OTN, where &lt;<span class="italic">Drive</span>&gt;:\<code dir="ltr"><span class="codeinlineitalic">ziplocation</span></code>\ refers to directory in which the downloaded archive file was extracted</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHBHCHD"></a>
<div id="CWWIN384" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.5.2</span> Downloading The Deinstall Tool for Use with Failed Installations</h3>
<p>You can use the Deinstallation tool (<code dir="ltr">deinstall.bat</code>) to remove failed or incomplete installations. It is available as a separate download from the Oracle Technology Network (OTN) web site.</p>
<p>To download the Deinstallation tool:</p>
<ol>
<li>
<p>Go to the following URL:</p>
<pre dir="ltr">
<a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html">http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html</a>
</pre></li>
<li>
<p>Read and accept the OTN license agreement.</p>
</li>
<li>
<p>Under <span class="bold">Oracle Database 11g Release 2</span>, click <span class="bold">See All</span> for the respective platform for which you want to download the Deinstallation tool.</p>
<p>The Deinstallation tool is available for download at the end of this page.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<div id="CWWIN385" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref681"></a>
<h3 class="sect2"><span class="secnum">6.5.3</span> Running the Deinstallation Tool</h3>
<p>Oracle recommends that you run the <code dir="ltr">deinstall</code> command as the user that installed Oracle Grid Infrastructure (<code dir="ltr">grid</code> user) or as an Administrator user.</p>
<p>After downloading the Deinstallation tool, ensure that:</p>
<ul>
<li>
<p>The user running the Deinstallation tool is the same on all cluster member nodes</p>
</li>
<li>
<p>User equivalence is set up</p>
</li>
</ul>
<p>To run the Deinstallation tool, follow these steps:</p>
<ol>
<li>
<p>Download or copy the Deinstallation tool to the <code dir="ltr">grid</code> user home directory.</p>
</li>
<li>
<p>Run the Deinstallation tool.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBHEECDB"></a>
<div id="CWWIN386" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.5.4</span> Using the Deinstallation Tool to Remove Oracle Clusterware and Oracle ASM</h3>
<p>This section provides examples of using the Deinstallation tool to remove Oracle Grid Infrastructure software.</p>
<div id="CWWIN387" class="example">
<p class="titleinexample"><a id="sthref682"></a>Example 6-1 Running deinstall.bat From Within the Oracle Home</p>
<p><a id="sthref683"></a>The most common method of running the Deinstallation tool is to use the version installed in the Oracle home being removed. The Deinstallation tool determines the software configuration for the local Oracle home, and then provides default values at each prompt. You can either accept the default value, or override it with a different value. If the software in the Oracle home is not running (for example, after an unsuccessful installation), then the Deinstallation tool cannot determine the configuration, and you must provide all the configuration details either interactively or in a properties file.</p>
<p>To use the Deinstallation tool located in the Oracle home directory, issue the following commands, where <code dir="ltr">C:\app\11.2.0\grid</code> is the location of Grid home:</p>
</div>
<!-- class="example" -->
<div id="CWWIN388" class="example">
<p class="titleinexample"><a id="sthref684"></a>Example 6-2 Running the Deinstallation Tool Installed in an Oracle Home</p>
<p>To run the <code dir="ltr">deinstall.bat</code> command located in an Oracle Database home in the path <code dir="ltr">C:\app\11.2.0\grid</code>, enter the following command while logged in as a member of the Administrator group:</p>
<pre dir="ltr">
C:\&gt; cd app\
C:\app\&gt; 11.2.0\grid\deinstall\deinstall.bat
</pre>
<p>To completely remove the Oracle Database installation, you must run the <code dir="ltr">deinstall.bat</code> command from a prompt that is located outside of the Oracle home. If you run the <code dir="ltr">deinstall.bat</code> command after changing into the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\deinstall</code> directory, then the Deinstallation tool will not be able to remove all the Oracle software files and directories.</p>
</div>
<!-- class="example" -->
<div id="CWWIN389" class="example">
<p class="titleinexample"><a id="sthref685"></a>Example 6-3 Running deinstall.bat Interactively From a Location Outside the Oracle Home</p>
<p><a id="sthref686"></a>If you use the separately downloaded version of the Deinstallation tool, then when the <code dir="ltr">deinstall.bat</code> command runs, it uses the information you provide to determine the system configuration and then provides default values at each prompt. You can either accept the default value, or override it with a different value. If the software in the specified Oracle home is not running (for example, after an unsuccessful install attempt), then the Deinstallation tool cannot determine the configuration, and you must provide all the configuration details either interactively or in a properties file.</p>
<p><a id="sthref687"></a><a id="sthref688"></a>If your Oracle Grid Infrastructure for a cluster home is <code dir="ltr">C:\app\11.2.0\grid</code>, then enter the following command while logged in as a member of the Administrators group to remove the Oracle Grid Infrastructure installation from your cluster:</p>
<pre dir="ltr">
C:\&gt; app\deinstall\deinstall.bat -home C:\app\11.2.0\grid
</pre>
<p>Provide additional information as prompted. When using the Deinstallation tool from a location other than within the Oracle home being removed, you must specify the <code dir="ltr">-home</code> option on the command line.</p>
</div>
<!-- class="example" -->
<div id="CWWIN390" class="example">
<p class="titleinexample"><a id="sthref689"></a>Example 6-4 Running deinstall.bat From the Oracle Home Using a Parameter File</p>
<p>To run the <code dir="ltr">deinstall.bat</code> command located in an Oracle Grid Infrastructure home and use a parameter file located at <code dir="ltr">C:\users\oracle\</code><code dir="ltr">paramfile4.tmpl</code>, enter the following commands while logged in as a member of the Administrators group:</p>
<pre dir="ltr">
C:\&gt; cd app\11.2.0
C:\&gt; grid\deinstall\deinstall.bat -paramfile C:\users\oracle\paramfile4.tmpl
</pre></div>
<!-- class="example" -->
<div id="CWWIN391" class="example">
<p class="titleinexample"><a id="sthref690"></a>Example 6-5 Generating a Response File For Use With the deinstall.bat Command</p>
<p><a id="sthref691"></a>You can generate the a parameter file by running the <code dir="ltr">deinstall.bat</code> command with the <code dir="ltr">-checkonly</code> and <code dir="ltr">-o</code> flags before you run the command to deinstall the Oracle home, or you can use the response file template and manually edit it to create the parameter file.</p>
<p>To generate the parameter file <code dir="ltr">deinstall_OraCrs11g_home1.rsp</code> using <code dir="ltr">deinstall.bat</code> command located in the Oracle home and the <code dir="ltr">-checkonly</code> flag, enter a command similar to the following, where <code dir="ltr">C:\app\11.2.0\grid</code> is the location of the Grid home and <code dir="ltr">C:\users\oracle</code> is the directory in which the generated parameter file is created:</p>
<pre dir="ltr">
C:\&gt; app\11.2.0\grid\deinstall\deinstall -checkonly -o C:\users\oracle\
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CBHHDFDA"></a>
<div id="CWWIN392" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.5.5</span> Example Parameter File for Deinstall of Oracle Grid Infrastructure</h3>
<p>You can run the <code dir="ltr">deinstall</code> command with the <code dir="ltr">-paramfile</code> option. When you use this option, the Deinstallation tool uses the values specified in the parameter file and, if needed, prompts you to supply any missing information.</p>
<p><a id="sthref692"></a>The following is an example of a parameter file for a cluster on nodes <code dir="ltr">node1</code> and <code dir="ltr">node2</code>, in which the Oracle Grid Infrastructure for a cluster is installed by the user <code dir="ltr">oracle</code>, the Grid home is <code dir="ltr">C:\app\11.2.0\grid</code>, the Oracle base (for the software owner, <code dir="ltr">oracle</code>) is <code dir="ltr">C:\app\oracle\</code>, the central Oracle Inventory home is <code dir="ltr">C:\Program Files\Oracle\Inventory</code>, the virtual IP addresses (VIP) are <code dir="ltr">192.0.2.2</code> and <code dir="ltr">192.0.2.4</code>, and the local node (the node on which you run the <code dir="ltr">deinstall.bat</code> command) is <code dir="ltr">node1</code>:</p>
<pre dir="ltr">
#Copyright (c) 2005, 2009 Oracle Corporation.  All rights reserved.
VIP1_IP=192.0.2.2
LOCAL_NODE=node1
ORA_VD_DISKGROUPS=+DATA
VIP1_IF=PublicNIC
OCRID=
ObaseCleanupPtrLoc=C:\Temp\OraDeinstall112010-02-11_10-14-30AM\utl\...
HELPJAR_NAME=help4.jar
local=false
ORACLE_HOME=C:\app\11.2.0\grid
ASM_HOME=C:\app\11.2.0\grid
ASM_DISK_GROUPS=
ASM_DISK_GROUP=DATA
ORA_DBA_GROUP=
ASM_DISCOVERY_STRING=
NEW_HOST_NAME_LIST=
PRIVATE_NAME_LIST=
ASM_DISKS=\\.\ORCLDISKDATA0,\\.\ORCLDISKDATA1,\\.\ORCLDISKDATA2
ASM_DISKSTRING=
CRS_HOME=true
JLIBDIR=C:\app\11.2.0\grid\jlib
OCRLOC=
JEWTJAR_NAME=jewt4.jar
EMBASEJAR_NAME=oemlt.jar
CRS_STORAGE_OPTION=1
ASM_REDUNDANCY=EXTERNAL
GPNPGCONFIGDIR=$ORACLE_HOME
LANGUAGE_ID='AMERICAN_AMERICA.WE8MSWIN1252'
CRS_NODEVIPS='node1-vip/255.255.252.0/PublicNIC,node2-vip/255.255.252.0/PublicNIC'
ORACLE_OWNER=Administrator
OLD_ACTIVE_ORACLE_HOME=
GNS_ALLOW_NET_LIST=
silent=false
LOGDIR=C:\Temp\OraDeinstall112010-02-11_10-14-30AM\logs\
OCFS_CONFIG=
NODE_NAME_LIST=node1,node2
GNS_DENY_ITF_LIST=
ORA_CRS_HOME=C:\app\11.2.0\grid
JREDIR=C:\app\11.2.0\grid\jdk\jre
ASM_LOCAL_SID=+asm1
ORACLE_BASE=C:\app\oracle\
GNS_CONF=false
NETCFGJAR_NAME=netcfg.jar
ORACLE_BINARY_OK=true
OCR_LOCATIONS=NO_VAL
ASM_ORACLE_BASE=C:\app\oracle
OLRLOC=
GPNPCONFIGDIR=$ORACLE_HOME
ORA_ASM_GROUP=
GNS_DENY_NET_LIST=
OLD_CRS_HOME=
EWTJAR_NAME=ewt3.jar
NEW_NODE_NAME_LIST=
GNS_DOMAIN_LIST=
ASM_UPGRADE=false
NETCA_LISTENERS_REGISTERED_WITH_CRS=LISTENER
CLUSTER_NODES=node1,node2
CLUSTER_GUID=
NEW_PRIVATE_NAME_LIST=
ASM_DIAGNOSTIC_DEST=C:\APP\ORACLE
CLSCFG_MISSCOUNT=
SCAN_PORT=1521
ASM_DROP_DISKGROUPS=true
NETWORKS="PublicNIC"/192.0.2.1:public,"PrivateNIC"/10.0.0.1:cluster_interconnect
OCR_VOTINGDISK_IN_ASM=true
NODELIST=node1,node2
ASM_IN_HOME=true
HOME_TYPE=CRS
GNS_ADDR_LIST=
CLUSTER_NAME=myrac-cluster
SHAREJAR_NAME=share.jar
VOTING_DISKS=NO_VAL
SILENT=false
VNDR_CLUSTER=false
GPNP_PA=
CSS_LEASEDURATION=400
REMOTE_NODES=node2
ASM_SPFILE=
HOST_NAME_LIST=node1,node2
SCAN_NAME=myrac-scan
VIP1_MASK=255.255.252.0
INVENTORY_LOCATION=C:\Program Files\Oracle\Inventory
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use quotation marks around any of the values in this file, except in the following cases:
<ul>
<li>
<p>Around addresses for the CRS_NODEVIPS parameter:</p>
<pre dir="ltr">
CRS_NODEVIPS='node1-vip/255.255.252.0/PublicNIC,node2-vip/..'
</pre></li>
<li>
<p>Around interface names for the NETWORKS parameters:</p>
<pre dir="ltr">
NETWORKS="PublicNIC"/192.0.2.1:public,"PrivateNIC"/10.0.0.1
 :cluster_interconnect
</pre></li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2745">
<tr>
<td class="cellalignment2752">
<table class="cellalignment2756">
<tr>
<td class="cellalignment2749"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2749"><a href="trouble.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2754">
<table class="cellalignment2755">
<tr>
<td class="cellalignment2749"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2749"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2749"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2749"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2749"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2749"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
