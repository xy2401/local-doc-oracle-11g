<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Configuring Storage for Oracle Grid Infrastructure and Oracle RAC</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1090" />
<meta name="dcterms.created" content="2017-01-19T21:44:28Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide" />
<meta name="dcterms.identifier" content="E48194-03" />
<meta name="dcterms.isVersionOf" content="CWWIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="prewin.htm" title="Previous" type="text/html" />
<link rel="Next" href="crswin.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e48194.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/17</span> <!-- End Header -->
<div id="CWWIN272" class="chapter"><a id="CDECEBGH"></a>
<h1 class="chapter"><span class="secnum">3</span> Configuring Storage for Oracle Grid Infrastructure and Oracle RAC</h1>
<p>This chapter describes the storage configuration tasks that you must complete before you start the installer to install Oracle Clusterware and Oracle Automatic Storage Management (Oracle ASM), and that you must complete before adding an Oracle Real Application Clusters (Oracle RAC) installation to the cluster.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGFFIC">Reviewing Oracle Grid Infrastructure Storage Options</a></p>
</li>
<li>
<p><a href="#CHDHBJHJ">Supported Storage Options for Oracle Grid Infrastructure and Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDGDEJC">Storage Requirements for Oracle Clusterware and Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDCEEGA">After You Have Selected the Shared Storage Options</a></p>
</li>
<li>
<p><a href="#CHDDDECF">Preliminary Shared Disk Preparation</a></p>
</li>
<li>
<p><a href="#CHDDDBDH">Configuring Shared Storage for Oracle ASM</a></p>
</li>
<li>
<p><a href="#CHDICFEI">Configuring Storage for Oracle Database Files on OCFS for Windows</a></p>
</li>
<li>
<p><a href="#CHDFEGJB">Configuring Direct NFS Client for Oracle RAC Data Files</a></p>
</li>
<li>
<p><a href="#CHDEHAEC">Upgrading or Migrating Existing Oracle ASM Instances</a></p>
</li>
<li>
<p><a href="#CHDIEEHH">Configuring Oracle Automatic Storage Management Cluster File System</a></p>
</li>
<li>
<p><a href="#CHDIFIBH">Desupport of Block and Raw Devices</a></p>
</li>
</ul>
<a id="CHDGFFIC"></a>
<div id="CWWIN273" class="sect1">
<h2 class="sect1"><span class="secnum">3.1</span> Reviewing Oracle Grid Infrastructure Storage Options</h2>
<p>This section describes supported options for storing Oracle Grid Infrastructure for a cluster software and shared files. It contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDDGGJC">General Storage Considerations for Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CHDBAGDJ">General Storage Considerations for Oracle RAC</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
T<a id="sthref313"></a>he Certification page in My Oracle Support for a list of supported vendors for Network Attached Storage options. See <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a> for instructions on how to access the certification information.</div>
<a id="CHDDGGJC"></a>
<div id="CWWIN274" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.1</span> General Storage Considerations for Oracle Grid Infrastructure</h3>
<p>Oracle Clusterware voting disks are used to monitor cluster node status, and the Oracle Cluster Registry (OCR) is a file that contains the configuration information and status of the cluster. The installer automatically initializes the OCR during the Oracle Clusterware installation. Oracle Database Configuration Assistant (DBCA) uses the OCR for storing the configurations for the cluster databases that it creates.</p>
<p>You can place voting disks and OCR files either in an Oracle ASM disk group, or on a cluster file system. Storage must be shared; any node that does not have access to an absolute majority of voting disks (more than half) will be restarted.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref314"></a><a id="sthref315"></a>To store the Oracle Clusterware files in an Oracle ASM disk group, the disk group compatibility must be at least 11.2, which is the default for new installations of Oracle Grid Infrastructure. If you are upgrading an Oracle ASM installation, then see <a class="olink OSTMG02700" href="../../server.112/e18951/asmdiskgrps.htm#OSTMG02700"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about disk group compatibility.</div>
<p>For a storage option to meet high availability requirements, the files stored on the disk must be protected by data redundancy, so that if one or more disks fail, then the data stored on the failed disks can be recovered. This redundancy can be provided externally using Redundant Array of Independent Disks (RAID) devices, or logical volumes on multiple physical devices and implement the stripe-and-mirror- everything methodology, also known as SAME. If you do not have a RAID devices or logical volumes, then you can create additional copies, or <span class="bold">mirrors</span>, of the files on different file systems. If you choose to mirror the files, then you must provide disk space for additional OCR files and at least two additional voting disk files.</p>
<p>Each OCR location should be placed on a different disk. For <a id="sthref316"></a><a id="sthref317"></a>voting disk file placement, ensure that each file is configured so that it does not share any hardware device or disk, or other single point of failure with the other voting disks. Any node that does not have available to it an absolute majority of voting disks configured (more than half) will be restarted.</p>
<p><a id="sthref318"></a><a id="sthref319"></a>Use the following guidelines when choosing storage options for the Oracle Clusterware files:</p>
<ul>
<li>
<p>You can choose any combination of the supported storage options for each file type if you satisfy all requirements listed for the chosen storage options.</p>
</li>
<li>
<p><a id="sthref320"></a>You can use Oracle ASM 11<span class="italic">g</span> Release 2 (11.2) for shared storage. You cannot use earlier Oracle ASM releases to do this.</p>
</li>
<li>
<p>If you do not have a storage option that provides external file redundancy, then you must configure at least three voting disk locations to provide redundancy.</p>
</li>
<li>
<p>The Oracle Grid Infrastructure home (Grid home) cannot be stored on a shared file system; it must be installed on a local disk.</p>
</li>
<li>
<p>If you choose to store Oracle Clusterware files on Oracle ASM and use redundancy for the disk group, then Oracle ASM automatically maintains the ideal number of voting files based on the redundancy of the diskgroup. The voting files are created within a single disk group and you cannot add extra voting files to this disk group manually.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDBAGDJ"></a>
<div id="CWWIN275" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.2</span> General Storage Considerations for Oracle RAC</h3>
<p><a id="sthref321"></a><a id="sthref322"></a><a id="sthref323"></a><a id="sthref324"></a><a id="sthref325"></a>For all Oracle RAC installations, you must choose the shared storage options to use for Oracle Database files. Oracle Database files include data files, control files, redo log files, the server parameter file, and the password file. To enable automated backups during the installation, you must also choose a shared storage option to use for recovery files (the fast recovery area).</p>
<ul>
<li>
<p><a href="#CHDCGJDD">Guidelines for Choosing a Storage Option</a></p>
</li>
<li>
<p><a href="#CHDGGBFI">Guidelines for Using Oracle ASM Disk Groups for Storage</a></p>
</li>
<li>
<p><a href="#CHDGFADE">Guidelines for Using Direct Network File System (NFS) Client with Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDGJEEJ">Guidelines for Using Oracle ACFS with Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDHGCDD">Guidelines for Placing Data Files on a File System</a></p>
</li>
<li>
<p><a href="#CHDHIDAA">Guidelines for Placing Recovery Files on a File System</a></p>
</li>
</ul>
<a id="CHDCGJDD"></a>
<div id="CWWIN276" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.1.2.1</span> Guidelines for Choosing a Storage Option</h4>
<p>Use the following guidelines when choosing the storage options to use for the Oracle Database files:</p>
<ul>
<li>
<p><a id="sthref326"></a>The shared storage option that you choose for recovery files can be the same as or different from the shared storage option that you choose for the data files. However, you cannot use raw devices to store recovery files.</p>
</li>
<li>
<p><a id="sthref327"></a><a id="sthref328"></a><a id="sthref329"></a><a id="sthref330"></a>Raw devices are supported only when upgrading an existing installation and using the previously configured raw partitions. On new installations, using raw disks or partitions is not supported by Oracle Automatic Storage Management Configuration Assistant (ASMCA) or Oracle Universal Installer (OUI), but is supported by the Oracle RAC if you perform manual configuration of the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink UPGRD" href="../../server.112/e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about how to prepare for upgrading an existing database</div>
</li>
<li>
<p>You can choose any combination of the supported shared storage options for each file type if you satisfy all requirements listed for the chosen storage options.</p>
</li>
<li>
<p><a id="sthref331"></a><a id="sthref332"></a><a id="sthref333"></a>Oracle recommends that you choose Oracle ASM as the shared storage option for the database data files and recovery files.</p>
</li>
<li>
<p><a id="sthref334"></a>For Standard Edition Oracle RAC installations, Oracle ASM is the only supported shared storage option for database or recovery files. You must use Oracle ASM for the storage of Oracle RAC data files, online redo logs, archived redo logs, control files, server parameter file (SPFILE), and the fast recovery area.</p>
</li>
<li>
<p>If you intend to use Oracle ASM with Oracle RAC, and you are configuring a new Oracle ASM instance, then your system must meet the following conditions:</p>
<ul>
<li>
<p>All the nodes in the cluster must have Oracle Clusterware and Oracle ASM 11<span class="italic">g</span> Release 2 (11.2) installed as part of an Oracle Grid Infrastructure for a cluster installation.</p>
</li>
<li>
<p>Any existing Oracle ASM instance on any node in the cluster is shut down before installing Oracle RAC or creating the Oracle RAC database.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDGGBFI"></a>
<div id="CWWIN277" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.1.2.2</span> Guidelines for Using Oracle ASM Disk Groups for Storage</h4>
<p><a id="sthref335"></a><a id="sthref336"></a><a id="sthref337"></a><a id="sthref338"></a>During Oracle Grid Infrastructure installation, you can create one disk group. After the Oracle Grid Infrastructure installation, you can create additional disk groups using ASMCA, SQL*Plus, or ASMCMD. Note that with Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and later releases, Oracle Database Configuration Assistant (DBCA) does not have the functionality to create disk groups for Oracle ASM.</p>
<p><a id="sthref339"></a>If you install Oracle Database or Oracle RAC after you install Oracle Grid Infrastructure, then you can either use the same disk group for database files, OCR, and voting disk files, or you can use different disk groups. If you create multiple disk groups before installing Oracle RAC or before creating a database, then you can decide whether you want to:</p>
<ul>
<li>
<p>Place the data files in the same disk group as the <a id="sthref340"></a>Oracle Clusterware files</p>
</li>
<li>
<p>Use the same Oracle ASM disk group for data files and recovery files</p>
</li>
<li>
<p>Use different disk groups for each file type</p>
</li>
</ul>
<p>If you create only one disk group for storage, then the OCR and voting disk files, database files, and recovery files are contained in the one disk group. If you create multiple disk groups for storage, then you can choose to place files in different disk groups.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Oracle ASM instance that manages the existing disk group should be running in the Grid home.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NTDBI" href="../e47798/toc.htm"><span class="italic">Oracle Database Installation Guide for Microsoft Windows</span></a> for information about configuring a database to use Oracle ASM storage</p>
</li>
<li>
<p><a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about creating disk groups</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDGFADE"></a>
<div id="CWWIN278" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.1.2.3</span> Guidelines for Using Direct Network File System (NFS) Client with Oracle RAC</h4>
<p><a id="sthref341"></a><a id="sthref342"></a><a id="sthref343"></a><a id="sthref344"></a><a id="sthref345"></a>Network attached storage (NAS) systems use a network file system (NFS) to access data. You can store Oracle RAC data files and recovery files on supported NAS servers using the Oracle Direct NFS Client.</p>
<p>The NFS file system must be mounted and available before you start the Oracle RAC installation. See your vendor documentation for NFS configuration and mounting information.</p>
<p>Note that the performance of Oracle Database software and the databases that use NFS storage depend on the performance of the network connection between the database server and the NAS device. For this reason, Oracle recommends that you connect the database server (or cluster node) to the NAS device using a private, dedicated, network connection, which should be Gigabit Ethernet or better.</p>
</div>
<!-- class="sect3" -->
<a id="CHDGJEEJ"></a>
<div id="CWWIN279" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.1.2.4</span> Guidelines for Using Oracle ACFS with Oracle RAC</h4>
<p><a id="sthref346"></a><a id="sthref347"></a><a id="sthref348"></a><a id="sthref349"></a>Oracle Automatic Storage Management Cluster File System (Oracle ACFS) provides a general purpose file system. You can place the Oracle home for an Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database on Oracle ACFS, but you cannot place Oracle data files or Oracle Clusterware files on Oracle ACFS. Note the following about Oracle ACFS:</p>
<ul>
<li>
<p>You cannot put Oracle Clusterware executable files or shared files on Oracle ACFS.</p>
</li>
<li>
<p><a id="sthref350"></a>You cannot put Oracle Database data files on Oracle ACFS.</p>
</li>
<li>
<p>You can put Oracle Database executable files and administrative files (for example, trace files) on Oracle ACFS.</p>
</li>
<li>
<p>Oracle ACFS provides a general purpose file system for file types other than Oracle data files.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref351"></a><a id="sthref352"></a><a id="sthref353"></a><a id="sthref354"></a><a id="sthref355"></a>For Oracle ASM 11<span class="italic">g</span> Release 2 (11.2.0.1), Oracle ACFS and Oracle ASM Dynamic Volume Manager (Oracle ADVM) are supported only in the following environments:
<ul>
<li>
<p>Windows Server 2003, x64</p>
</li>
<li>
<p>Windows Server 2003 R2, x64</p>
</li>
</ul>
<p>Oracle ACFS and Oracle ADVM are supported on Windows Server 2008, x64 and Windows Server 2008 R2, x64 starting with Oracle ASM 11<span class="italic">g</span> Release 2 (11.2.0.2).</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about using ACFS</div>
</div>
<!-- class="sect3" -->
<a id="CHDHGCDD"></a>
<div id="CWWIN280" class="sect3">
<h4 class="sect3"><span class="secnum">3.1.2.5</span> Guidelines for Placing Data Files on a File System</h4>
<p>If you decide to place the Oracle data files on Oracle Cluster File System for Windows (OCFS for Windows), then use the following guidelines when deciding where to place them:</p>
<ul>
<li>
<p><a id="sthref356"></a><a id="sthref357"></a><a id="sthref358"></a><a id="sthref359"></a>You can choose either a single cluster file system or multiple cluster file systems to store the data files:</p>
<ul>
<li>
<p>To use a single cluster file system, choose a cluster file system on a physical device that is dedicated to the database.</p>
<p>For best performance and reliability, choose a RAID device or a logical volume on multiple physical devices and implement the stripe-and-mirror-everything methodology, also known as SAME.</p>
</li>
<li>
<p>To use multiple cluster file systems, choose cluster file systems on separate physical devices or partitions that are dedicated to the database.</p>
<p>This method enables you to distribute physical I/O and create separate control files on different devices for increased reliability. It also enables you to fully implement Oracle Optimal Flexible Architecture (OFA) guidelines. To implement this method, you must choose the Advanced database creation option in OUI.</p>
</li>
</ul>
</li>
<li>
<p>If you intend to create a preconfigured database during the installation, then the cluster file systems that you choose must have at least 4 gigabyte (GB) of free disk space.</p>
<p><a id="sthref360"></a><a id="sthref361"></a><a id="sthref362"></a>For production databases, you must estimate the disk space requirement based on how you use the database.</p>
</li>
<li>
<p>For optimum performance, the cluster file systems that you choose should be on physical devices that are used by only the database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must not create a New Technology File System (NTFS) partition on a disk that you are using for OCFS for Windows.</div>
</li>
<li>
<p>OCFS for Windows does not support network access through NFS or Windows Network Shares.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDHIDAA"></a>
<div id="CWWIN281" class="sect3">
<h4 class="sect3"><span class="secnum">3.1.2.6</span> Guidelines for Placing Recovery Files on a File System</h4>
<p><a id="sthref363"></a>You must choose a location for the Oracle Database recovery files before installation only if you intend to enable automated backups during installation.</p>
<p>If you choose to place the recovery files on a cluster file system, then use the following guidelines when deciding where to place them:</p>
<ul>
<li>
<p>To prevent disk failure from making the database files and the recovery files unavailable, place the recovery files on a cluster file system that is on a different physical disk from the database files.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Alternatively use an Oracle ASM disk group with a normal or high redundancy level for either or both file types, or use external redundancy.</div>
</li>
<li>
<p>The cluster file system that you choose should have at least 3 GB of free disk space.</p>
<p>The disk space requirement is the default disk quota configured for the fast recovery area (specified by the <code dir="ltr">DB_RECOVERY_FILE_DEST_SIZE</code> initialization parameter).</p>
<p>If you choose the Advanced database configuration option, then you can specify a different disk quota value. After you create the database, you can also use Oracle Enterprise Manager to specify a different value.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8183" href="../../backup.112/e10642/rcmconfb.htm#BRADV8183"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about sizing the fast recovery area.</div>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDHBJHJ"></a>
<div id="CWWIN282" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.2</span> Supported Storage Options for Oracle Grid Infrastructure and Oracle RAC</h2>
<p>Both Oracle Clusterware and the Oracle RAC database use files that must be available to all the nodes in the cluster. These files must be placed on a supported type of shared storage.</p>
<p>Review the following topics when deciding which type of shared storage to use during installation of Oracle Grid Infrastructure and Oracle RAC:</p>
<ul>
<li>
<p><a href="#CHDGEICC">Supported Storage Options for Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CHDDCDJB">Supported Storage Options for Oracle RAC</a></p>
</li>
</ul>
<a id="CHDGEICC"></a>
<div id="CWWIN283" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.1</span> Supported Storage Options for Oracle Grid Infrastructure</h3>
<p><a id="sthref364"></a><a id="sthref365"></a>You cannot install the Oracle Grid Infrastructure software on a cluster file system. The Oracle Grid Infrastructure home (Grid home) must be on a local, NTFS formatted disk.</p>
<p>There are two ways of storing the shared Oracle Clusterware files:</p>
<ul>
<li>
<p><a id="sthref366"></a><a id="sthref367"></a><span class="bold">Oracle ASM</span>: You can install Oracle Clusterware files (OCR and voting disks) in Oracle ASM disk groups.</p>
<p>Oracle ASM is the required database storage option for Typical installations, and for Standard Edition Oracle RAC installations. It is an integrated, high-performance database file system and disk manager for Oracle Clusterware and Oracle Database files. It performs striping and mirroring of database files automatically.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>You can no longer use OUI to install Oracle Clusterware or Oracle Database files directly on raw devices.</p>
</li>
<li>
<p><a id="sthref368"></a><a id="sthref369"></a><a id="sthref370"></a>Only one Oracle ASM instance is permitted for each node regardless of the number of database instances on the node.</p>
</li>
<li>
<p>To store the Oracle Clusterware files in an Oracle ASM disk group, the disk group compatibility must be at least 11.2. See <a class="olink OSTMG02700" href="../../server.112/e18951/asmdiskgrps.htm#OSTMG02700"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about disk group compatibility.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="sthref371"></a>OCFS for Windows: OCFS for Windows is the only other supported cluster file system that you can use for storage of Oracle Clusterware and Oracle RAC files on Microsoft Windows platforms. OCFS for Windows is not the same as OCFS2, which is available on Linux platforms.</p>
<p>OCFS for Windows is included in the installation media for Oracle Grid Infrastructure and Oracle RAC on Microsoft Windows platforms and is installed automatically with Oracle Clusterware. However, for new installations, Oracle recommends that you use Oracle ASM to store the OCR and voting disk files. Oracle does not recommend using OCFS for Windows for Oracle Clusterware files.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot put Oracle Clusterware files on Oracle Automatic Storage Management Cluster File System (Oracle ACFS). You cannot install Oracle Grid Infrastructure on a cluster file system.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The Certify page on My Oracle Support for supported cluster file systems. See <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a>.</div>
</li>
</ul>
<p><a id="sthref372"></a><a href="#CHDIBCHA">Table 3-1, "Supported Storage Options for Oracle Clusterware and Oracle RAC Files and Home Directories"</a> shows the storage options supported for storing Oracle Clusterware and Oracle RAC files.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For the most up-to-date information about supported storage options for Oracle Clusterware and Oracle RAC installations, refer to the Certify pages on the My Oracle Support web site. See <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a>.</div>
</div>
<!-- class="sect2" -->
<a id="CHDDCDJB"></a>
<div id="CWWIN284" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.2</span> Supported Storage Options for Oracle RAC</h3>
<p><a id="sthref373"></a>There are several ways of storing Oracle Database (Oracle RAC) files that must be shared across all the nodes:</p>
<ul>
<li>
<p><a id="sthref374"></a><a id="sthref375"></a><a id="sthref376"></a><a id="sthref377"></a><span class="bold">Oracle ASM</span>: You can create Oracle RAC data files and recovery files in Oracle ASM disk groups.</p>
<p>Oracle ASM is the required database storage option for Typical installations, and for Standard Edition Oracle RAC installations.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can no longer use OUI to install Oracle Clusterware or Oracle Database files or binaries directly on raw devices.
<p><a id="sthref378"></a><a id="sthref379"></a><a id="sthref380"></a>Only one Oracle ASM instance is permitted for each node regardless of the number of database instances on the node.</p>
</div>
</li>
<li>
<p><span class="bold">A supported shared file system</span>: Supported file systems include the following:</p>
<ul>
<li>
<p><span class="bold"><a id="sthref381"></a>OCFS for Windows:</span> OCFS for Windows is a cluster file system used to store Oracle Database binary and data files. If you intend to use OCFS for Windows for your database storage, then you should create partitions large enough for all the database and recovery files when you create the unformatted disk partitions that are used by OCFS for Windows.</p>
</li>
<li>
<p><span class="bold"><a id="sthref382"></a><a id="sthref383"></a>Oracle ACFS:</span> Oracle ACFS provides a general purpose file system that can store administrative files as well as external general purpose data files. You can install the Oracle Database software on Oracle ACFS.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot put Oracle Clusterware or Oracle Database data files on Oracle ACFS.</div>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The Certify page on My Oracle Support for supported cluster file systems. See <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a>.</div>
</li>
<li>
<p><span class="bold"><a id="sthref384"></a><a id="sthref385"></a><a id="sthref386"></a><a id="sthref387"></a><a id="sthref388"></a>Network File System (NFS)</span> <span class="bold">with Oracle Direct NFS Client</span>: You can configure Oracle RAC to access NFS V3 servers directly using an Oracle internal Direct NFS Client.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref389"></a>You cannot use Direct NFS Client to store Oracle Clusterware files. You can only use Direct NFS Client to store Oracle Database files. To install Oracle RAC on Windows using Direct NFS Client, you must have access to a shared storage method other than NFS for the Oracle Clusterware files.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFAACD">Section 3.8.1, "About Direct NFS Client"</a> for more information on using Direct NFS Client</div>
</li>
</ul>
<p><a href="#CHDIBCHA">Table 3-1</a> <a id="sthref390"></a>shows the storage options supported for storing Oracle Clusterware and Oracle RAC files.</p>
<div id="CWWIN285" class="tblformalwidemax">
<p class="titleintable"><a id="sthref391"></a><a id="CHDIBCHA"></a>Table 3-1 Supported Storage Options<a id="sthref392"></a><a id="sthref393"></a><a id="sthref394"></a><a id="sthref395"></a> for Oracle Clusterware and Oracle RAC Files and Home Directories<a id="sthref396"></a><a id="sthref397"></a></p>
<table class="cellalignment2759" title="Supported Storage Options for Oracle Clusterware and Oracle RAC Files and Home Directories " summary="storage options for Oracle software and files" dir="ltr">
<thead>
<tr class="cellalignment2746">
<th class="cellalignment2758" id="r1c1-t21">Storage Option</th>
<th class="cellalignment2758" id="r1c2-t21">OCR and Voting Disks</th>
<th class="cellalignment2758" id="r1c3-t21">Oracle Grid Infrastructure Home</th>
<th class="cellalignment2758" id="r1c4-t21">Oracle RAC Home</th>
<th class="cellalignment2758" id="r1c5-t21">Oracle RAC Database Files</th>
<th class="cellalignment2758" id="r1c6-t21">Oracle Recovery Files</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r2c1-t21" headers="r1c1-t21">
<p>Oracle ASM</p>
</td>
<td class="cellalignment2752" headers="r2c1-t21 r1c2-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r2c1-t21 r1c3-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r2c1-t21 r1c4-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r2c1-t21 r1c5-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r2c1-t21 r1c6-t21">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r3c1-t21" headers="r1c1-t21">
<p>Oracle ACFS</p>
</td>
<td class="cellalignment2752" headers="r3c1-t21 r1c2-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r3c1-t21 r1c3-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r3c1-t21 r1c4-t21">
<p>11.2 or later: Yes</p>
<p>11.1 or earlier: No</p>
</td>
<td class="cellalignment2752" headers="r3c1-t21 r1c5-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r3c1-t21 r1c6-t21">
<p>No</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r4c1-t21" headers="r1c1-t21">
<p>OCFS for Windows</p>
</td>
<td class="cellalignment2752" headers="r4c1-t21 r1c2-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r4c1-t21 r1c3-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r4c1-t21 r1c4-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r4c1-t21 r1c5-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r4c1-t21 r1c6-t21">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r5c1-t21" headers="r1c1-t21">
<p><a id="sthref398"></a><a id="sthref399"></a>Direct NFS Client access to a certified network attached storage (NAS) filer</p>
<p><span class="bold">Note:</span> NFS or Direct NFS Client cannot be used for <a id="sthref400"></a>Oracle Clusterware files.</p>
</td>
<td class="cellalignment2752" headers="r5c1-t21 r1c2-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r5c1-t21 r1c3-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r5c1-t21 r1c4-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r5c1-t21 r1c5-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r5c1-t21 r1c6-t21">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r6c1-t21" headers="r1c1-t21">
<p>Shared disk partitions (raw devices)</p>
</td>
<td class="cellalignment2752" headers="r6c1-t21 r1c2-t21">
<p>Not supported by OUI or ASMCA, but supported by the software. They can be added or removed after installation.</p>
</td>
<td class="cellalignment2752" headers="r6c1-t21 r1c3-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r6c1-t21 r1c4-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r6c1-t21 r1c5-t21">
<p>Not supported by OUI or ASMCA, but supported by the software. They can be added or removed after installation.</p>
</td>
<td class="cellalignment2752" headers="r6c1-t21 r1c6-t21">
<p>No</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r7c1-t21" headers="r1c1-t21">
<p>Local file system</p>
</td>
<td class="cellalignment2752" headers="r7c1-t21 r1c2-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r7c1-t21 r1c3-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r7c1-t21 r1c4-t21">
<p>Yes</p>
</td>
<td class="cellalignment2752" headers="r7c1-t21 r1c5-t21">
<p>No</p>
</td>
<td class="cellalignment2752" headers="r7c1-t21 r1c6-t21">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwidemax" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
For the most up-to-date information about supported storage options for Oracle Clusterware and Oracle RAC installations, refer to the Certify pages on the My Oracle Support web site. See <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a>.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDGDEJC"></a>
<div id="CWWIN286" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.3</span> Storage Requirements for Oracle Clusterware and Oracle RAC</h2>
<p>Each supported file system type has additional requirements that must be met to support Oracle Clusterware and Oracle RAC. Use the following sections to help you select your storage option:</p>
<ul>
<li>
<p><a href="#CHDJHGJJ">Requirements for Using a Cluster File System for Oracle Clusterware Files</a></p>
</li>
<li>
<p><a href="#CHDEDJGI">Identifying Storage Requirements for Using Oracle ASM for Shared Storage</a></p>
</li>
<li>
<p><a href="#CHDEGIIG">Restrictions for Disk Partitions Used By Oracle ASM</a></p>
</li>
<li>
<p><a href="#CHDEIJDH">Requirements for Using a Shared File System</a></p>
</li>
<li>
<p><a href="#CHDHEDFE">Requirements for Files Managed by Oracle</a></p>
</li>
</ul>
<a id="CHDJHGJJ"></a>
<div id="CWWIN287" class="sect2">
<h3 class="sect2"><span class="secnum">3.3.1</span> Requirements for Using a Cluster File System for Oracle Clusterware Files</h3>
<p><a id="sthref401"></a>To use OCFS for Windows for Oracle Clusterware files, you must comply with the following requirements:</p>
<ul>
<li>
<p><a id="sthref402"></a>If you choose to place your OCR files on a shared file system, then Oracle recommends that one of the following is true:</p>
<ul>
<li>
<p>The disks used for the file system are on a highly available storage device, (for example, a RAID device that implements file redundancy)</p>
</li>
<li>
<p>At least two file systems are mounted, and you use the features of Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) to provide redundancy for the OCR and voting disks</p>
</li>
</ul>
</li>
<li>
<p>If you use a RAID device to store the Oracle Clusterware files, then you must have a partition that has at least 280 megabyte (MB) of available space for the OCR and 280 MB for each voting disk.</p>
</li>
<li>
<p>If you use the redundancy features of Oracle Clusterware to provide high availability for the OCR and voting disk files, then you need a minimum of three file systems, and each one must have 560 MB of available space for the OCR and voting disk.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The smallest partition size that OCFS for Windows can use is 500 MB</div>
</li>
</ul>
<p>For example, to store all OCR and voting disk files on a cluster file system that does not provide redundancy at the hardware level (external redundancy), you should have approximately 2 GB of storage available over a minimum of three volumes (three separate volume locations for the OCR and voting disk files, one on each volume). If you use a file system that provides data redundancy, then you need only one physical disk with 280 MB of available space to store the OCR and 560 MB of available space for each voting disk file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading from an earlier release of <a id="sthref403"></a><a id="sthref404"></a>Oracle Clusterware, and your existing cluster uses 100 MB disk partitions for the OCR and 20 MB disk partitions for the voting disk, then you must extend these partitions to at least 300 MB. Oracle recommends that you do not use partitions, but instead place the OCR and voting disks in Oracle ASM disk groups that are marked as QUORUM disk groups.
<p>If the existing OCR and voting disk files are 280 MB or larger, then you do not have to change the size of the OCR or voting disks before performing the upgrade.</p>
<p><a id="sthref405"></a>All storage products must be supported by both your server and storage vendors.</p>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDEDJGI"></a>
<div id="CWWIN288" class="sect2">
<h3 class="sect2"><span class="secnum">3.3.2</span> Identifying Storage Requirements for Using Oracle ASM for Shared Storage</h3>
<p>To identify the storage requirements for using Oracle ASM, you must determine how many devices and the amount of free disk space that you require. To complete this task, follow these steps:</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
As you progress through the following steps, make a list of the raw device names you intend to use to create the Oracle ASM disk groups and have this information available during the Oracle Grid Infrastructure installation or when creating your Oracle RAC database.</div>
<ol>
<li>
<p>Determine whether you want to use Oracle ASM for <a id="sthref406"></a><a id="sthref407"></a><a id="sthref408"></a>Oracle Clusterware files (OCR and voting disks), Oracle Database data files, recovery files, or all file types.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>You do not have to use the same storage mechanism for data files and recovery files. You can store one type of file in a cluster file system while storing the other file type within Oracle ASM. If you plan to use Oracle ASM for both data files and recovery files, then you should create separate Oracle ASM disk groups for the data files and the recovery files.</p>
</li>
<li>
<p>There are two types of Oracle Clusterware files: OCR files and voting disk files. Each type of file can be stored on either Oracle ASM or a cluster file system. All the OCR files or all the voting disk files must use the same type of storage. You cannot have some OCR files stored in Oracle ASM and other OCR files in a cluster file system. However, you can use one type of storage for the OCR files and a different type of storage for the voting disk files if all files of each type use the same type of storage.</p>
</li>
</ul>
</div>
<p><a id="sthref409"></a>If you plan to enable automated backups for your Oracle RAC database, then you must place the fast recovery area on shared storage. You can choose Oracle ASM as the shared storage mechanism for recovery files by specifying an Oracle ASM disk group for the fast recovery area. Depending on how you choose to create a database during the installation, you have the following options:</p>
<ul>
<li>
<p>If you created the Oracle ASM disk groups prior to performing the Oracle Database installation, and then select an installation method that runs DBCA in interactive mode (for example, by choosing the Advanced database configuration option), then you can decide whether you want to use the same Oracle ASM disk group for data files and recovery files. You can also choose to use different disk groups for each file type. Ideally, you should create separate Oracle ASM disk groups for data files and recovery files.</p>
<p>The same choice is available to you if you use DBCA after the installation to create a database.</p>
</li>
<li>
<p>If you select an installation type that runs DBCA in non-interactive mode, then you must use the same Oracle ASM disk group for data files and recovery files. The Oracle ASM disk group you select must have been created prior to starting the installation or DBCA.</p>
</li>
</ul>
</li>
<li>
<p>Choose the Oracle ASM redundancy level to use for the <a id="sthref410"></a><a id="sthref411"></a><a id="sthref412"></a><a id="sthref413"></a><a id="sthref414"></a>Oracle ASM disk <a id="sthref415"></a><a id="sthref416"></a>group.<a id="sthref417"></a><a id="sthref418"></a></p>
<p><a id="sthref419"></a><a id="sthref420"></a><a id="sthref421"></a>The <a id="sthref422"></a><a id="sthref423"></a><a id="sthref424"></a>redundancy level that you choose for the Oracle ASM disk group determines how Oracle ASM mirrors files in the disk group, and determines the number of disks and amount of disk space that you require. The redundancy levels are as follows:<a id="sthref425"></a><a id="sthref426"></a></p>
<ul>
<li>
<p>External redundancy</p>
<p>An external redundancy disk group requires a minimum of one disk device. The effective disk space in an external redundancy disk group is the sum of the disk space in all of its devices.</p>
<p><a id="sthref427"></a><a id="sthref428"></a>Because Oracle ASM does not mirror data in an external redundancy disk group, Oracle recommends that you use external redundancy with storage devices such as RAID, or other similar devices that provide their own data protection mechanisms.</p>
<p>Even if you select external redundancy, you must have at least three voting disks configured, as each voting disk is an independent entity, and cannot be mirrored.</p>
</li>
<li>
<p>Normal redundancy</p>
<p>A normal redundancy disk group requires a minimum of two disk devices (or two failure groups). The effective disk space in a normal redundancy disk group is <span class="italic">half</span> the sum of the disk space in all of its devices.</p>
<p>For Oracle Clusterware files, a normal redundancy disk group requires a minimum of three disk devices and provides three voting disk files, one OCR, and two OCR copies (one primary and one secondary mirror). When using a normal redundancy disk group, the cluster can survive the loss of one failure group.</p>
<p>For most installations, Oracle recommends that you select normal redundancy disk groups.</p>
</li>
<li>
<p>High redundancy</p>
<p>In a high redundancy disk group, Oracle ASM uses three-way mirroring to increase performance and provide the highest level of reliability. A high redundancy disk group requires a minimum of three disk devices (or three failure groups). The effective disk space in a high redundancy disk group is <span class="italic">one-third</span> the sum of the disk space in all of its devices.</p>
<p>For Oracle Clusterware files, a high redundancy disk group requires a minimum of five disk devices and provides five voting disk files, one OCR, and three copies of the OCR (one primary and two secondary mirrors). With high redundancy, the cluster can survive the loss of two failure groups.</p>
<p>While high redundancy disk groups provide a high level of data protection, you should consider the greater cost of additional storage devices before deciding to use this redundancy level.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
After a disk group is created, you cannot alter the redundancy level of the disk group.</div>
</li>
<li>
<p><a id="sthref429"></a><a id="sthref430"></a>Determine the total amount of disk space that you require for the Oracle Clusterware files.</p>
<p>Use <a href="#CHDJJBCG">Table 3-2</a> to determine the minimum number of disks and the minimum disk space requirements for installing Oracle Clusterware using Oracle ASM for shared storage:<a id="sthref431"></a><a id="sthref432"></a><a id="sthref433"></a><a id="sthref434"></a><a id="sthref435"></a></p>
<div id="CWWIN289" class="tblformal">
<p class="titleintable"><a id="sthref436"></a><a id="CHDJJBCG"></a>Table 3-2 Oracle Clusterware Disk Space for Oracle ASM by Redundancy Type</p>
<table class="cellalignment2757" title="Oracle Clusterware Disk Space for Oracle ASM by Redundancy Type" summary="Lists minimum partition sizes for shared file systems for Oracle Clusterware, including minimum sizes for database files if these are also stored on shared filesystem partitions" dir="ltr">
<thead>
<tr class="cellalignment2746">
<th class="cellalignment2758" id="r1c1-t28">File Types Stored</th>
<th class="cellalignment2758" id="r1c2-t28">Minimum Number of Disks</th>
<th class="cellalignment2758" id="r1c3-t28">Disk or Disk Partition Sizes</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r2c1-t28" headers="r1c1-t28">
<p>OCR and voting disks in an external redundancy disk group</p>
</td>
<td class="cellalignment2752" headers="r2c1-t28 r1c2-t28">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r2c1-t28 r1c3-t28">
<p>At least 300 MB for each voting disk file and 300 MB for each OCR</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r3c1-t28" headers="r1c1-t28">
<p>OCR and voting disks in a normal redundancy disk group</p>
</td>
<td class="cellalignment2752" headers="r3c1-t28 r1c2-t28">
<p>3</p>
</td>
<td class="cellalignment2752" headers="r3c1-t28 r1c3-t28">
<p>At least 600 MB for the OCR and its copies, at least 900 MB for the voting disk files, or at least 1.5 GB for both files types in one disk group.</p>
<p><span class="bold">Note:</span> If you create a disk group during installation, then it must be at least 2 GB in size.</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r4c1-t28" headers="r1c1-t28">
<p>OCR and voting disks in a high redundancy disk group</p>
</td>
<td class="cellalignment2752" headers="r4c1-t28 r1c2-t28">
<p>5</p>
</td>
<td class="cellalignment2752" headers="r4c1-t28 r1c3-t28">
<p>At least 900 MB for the OCR and its copies, at least 1.5 GB for the voting disk files, or at least 2.4 GB for both files types in one disk group.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref437"></a>If the voting disk files are in a disk group, then note that disk groups that contain Oracle Clusterware files (OCR and voting disk files) have a higher minimum number of failure groups than other disk groups.
<p>If you create a disk group for the OCR and voting disk files as part of the installation, then the installer requires that you create these files on a disk group with at least 2 GB of available space.</p>
<p>A <span class="bold">quorum failure group</span> is a special type of failure group. Disks in quorum failure groups do not contain user data, but can contain the Oracle Clusterware voting files. The quorum failure group is used to ensure that a quorum of the specified failure groups are available. A quorum failure group is not considered when determining redundancy requirements in respect to storing user data. However, a quorum failure group counts when mounting disk groups.</p>
</div>
<p>To ensure high availability of Oracle Clusterware files on Oracle ASM, for a normal redundancy disk group, you must have at least 4 GB of disk space (2 GB of effective disk space) for Oracle Clusterware files in three separate failure groups, with at least three physical disks. Each disk must have at least 1 GB of capacity to ensure that there is sufficient space to create Oracle Clusterware files.</p>
</li>
<li>
<p>Determine the total amount of disk space that you require for the Oracle database files and <a id="sthref438"></a><a id="sthref439"></a>recovery files.<a id="sthref440"></a><a id="sthref441"></a><a id="sthref442"></a></p>
<p><a id="sthref443"></a>Use the following table to determine the minimum number of disks and the minimum disk space requirements for installing the starter database:<a id="sthref444"></a><a id="sthref445"></a><a id="sthref446"></a></p>
<div id="CWWIN290" class="tblformal">
<p class="titleintable"><a id="sthref447"></a><a id="sthref448"></a>Table 3-3 Total Oracle Database Storage Space Required by Redundancy Type</p>
<table class="cellalignment2757" title="Total Oracle Database Storage Space Required by Redundancy Type" summary="database disk space requirements" dir="ltr">
<thead>
<tr class="cellalignment2746">
<th class="cellalignment2758" id="r1c1-t30">Redundancy Level</th>
<th class="cellalignment2758" id="r1c2-t30">Minimum Number of Disks</th>
<th class="cellalignment2758" id="r1c3-t30">Database Files</th>
<th class="cellalignment2758" id="r1c4-t30">Recovery Files</th>
<th class="cellalignment2758" id="r1c5-t30">Both File Types</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r2c1-t30" headers="r1c1-t30">
<p>External</p>
</td>
<td class="cellalignment2752" headers="r2c1-t30 r1c2-t30">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r2c1-t30 r1c3-t30">
<p>1.5 GB</p>
</td>
<td class="cellalignment2752" headers="r2c1-t30 r1c4-t30">
<p>3 GB</p>
</td>
<td class="cellalignment2752" headers="r2c1-t30 r1c5-t30">
<p>4.5 GB</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r3c1-t30" headers="r1c1-t30">
<p>Normal</p>
</td>
<td class="cellalignment2752" headers="r3c1-t30 r1c2-t30">
<p>2</p>
</td>
<td class="cellalignment2752" headers="r3c1-t30 r1c3-t30">
<p>3 GB</p>
</td>
<td class="cellalignment2752" headers="r3c1-t30 r1c4-t30">
<p>6 GB</p>
</td>
<td class="cellalignment2752" headers="r3c1-t30 r1c5-t30">
<p>9 GB</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r4c1-t30" headers="r1c1-t30">
<p>High</p>
</td>
<td class="cellalignment2752" headers="r4c1-t30 r1c2-t30">
<p>3</p>
</td>
<td class="cellalignment2752" headers="r4c1-t30 r1c3-t30">
<p>4.5 GB</p>
</td>
<td class="cellalignment2752" headers="r4c1-t30 r1c4-t30">
<p>9 GB</p>
</td>
<td class="cellalignment2752" headers="r4c1-t30 r1c5-t30">
<p>13.5 GB</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
The file sizes listed in the previous table are estimates of minimum requirements for a new installation (or a database without any user data). The file sizes for your database will be larger.</div>
</li>
<li>
<p>Determine if you can use an existing disk group.</p>
<p>If an Oracle ASM instance currently exists on the system, then you can use an existing disk group to meet these storage requirements. If necessary, you can add disks to an existing disk group during the installation. See <a href="#CHDHFBJE">Section 3.3.2.1, "Using an Existing Oracle ASM Disk Group"</a> for more information about using an existing disk group.</p>
</li>
<li>
<p>If there is no existing Oracle ASM disk group to use, then create one or more Oracle ASM disk groups, as needed, before installing Oracle RAC. See <a href="#CHDGBAFA">Section 3.3.2.2, "Selecting Disks to use with Oracle ASM Disk Groups"</a> for more information about selecting disks to use in a disk group.</p>
</li>
<li>
<p>Optionally, identify failure groups for the Oracle ASM disk group devices.<a id="sthref449"></a><a id="sthref450"></a><a id="sthref451"></a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You only have to complete this step if you plan to use an installation method that includes configuring Oracle ASM disk groups before installing Oracle RAC, or creating an Oracle RAC database.</div>
<p><a id="sthref452"></a><a id="sthref453"></a>If <a id="sthref454"></a><a id="sthref455"></a>you intend to use a normal or high redundancy disk group, then you can further protect your database against hardware failure by associating a set of disk devices in a custom failure group. <span class="bold">Failure groups</span> define Oracle ASM disks that share a common potential failure mechanism. By default, each device comprises its own failure group. If you choose to define custom failure groups, then note the following:</p>
<ul>
<li>
<p>You must specify a minimum of two failure groups for normal redundancy disk groups and three failure groups for high redundancy disk groups.</p>
</li>
<li>
<p>If the disk group contains data files and Oracle Clusterware files, including the voting disk files, then you must specify a minimum of three failure groups for normal redundancy disk groups and five failure groups for high redundancy disk groups.</p>
</li>
<li>
<p>Disk groups containing voting disk files must have at least three failure groups for normal redundancy or at least five failure groups for high redundancy. If the disk group does not contain the voting disk files, then the minimum number of required failure groups is two for normal redundancy and three for high redundancy. The minimum number of failure groups applies whether or not they are custom failure groups.</p>
</li>
</ul>
<p><a id="sthref456"></a>If two disk devices in a normal redundancy disk group are attached to the same small computer system interface (SCSI) controller, then the disk group becomes unavailable if the controller fails. The SCSI controller in this example is a single point of failure. To protect against failures of this type, you could use two SCSI controllers, each with two disks, and define a failure group for the disks attached to each controller. This configuration enables the disk group to tolerate the failure of one SCSI controller.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can define custom failure groups after installation of Oracle Grid Infrastructure using the GUI tool ASMCA, the command-line tool <code dir="ltr">asmcmd</code>, or SQL*Plus commands.</div>
<p>For more information about Oracle ASM failure groups, refer to <a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span>.</a></p>
</li>
</ol>
<a id="CHDHFBJE"></a>
<div id="CWWIN291" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.3.2.1</span> Using an Existing Oracle ASM Disk Group</h4>
<p><a id="sthref457"></a>To use Oracle ASM as the storage option for either database or recovery files, you must use an existing Oracle ASM disk group, or use ASMCA to create the necessary disk groups before installing Oracle Database 11<span class="italic">g</span> Release 2 and creating an Oracle RAC database.</p>
<p>To determine if an Oracle ASM disk group currently exists, or to determine whether there is sufficient disk space in an existing disk group, you can use Oracle Enterprise Manager, either Grid Control or Database Control. Alternatively, you can use the following procedure:</p>
<ol>
<li>
<p>In the <span class="bold">Services</span> Control Panel, ensure that the <code dir="ltr">OracleASMService+ASM</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> service, where <code dir="ltr"><span class="codeinlineitalic">n</span></code> is the node number, has started.</p>
</li>
<li>
<p>Open a Windows command prompt and temporarily set the <code dir="ltr">ORACLE_SID</code> environment variable to specify the appropriate value for the Oracle ASM instance to use.</p>
<p>For example, if the Oracle ASM system identifier (SID) is named <code dir="ltr">+ASM1</code>, then enter a setting similar to the following:</p>
<pre dir="ltr">
C:\&gt; set ORACLE_SID=+ASM1
</pre></li>
<li>
<p>If the <code dir="ltr">ORACLE_HOME</code> environment variable is not set to the Grid home, then temporarily set this variable to the location of the Grid home using a command similar to the following:</p>
<pre dir="ltr">
C:\&gt; set ORACLE_HOME=C:\app\11.2.0\grid
</pre></li>
<li>
<p>Use ASMCMD to connect to the Oracle ASM instance and start the instance if necessary with a command similar to the following:</p>
<pre dir="ltr">
C:\&gt;<span class="italic"> </span>%ORACLE_HOME%\bin\asmcmd
ASMCMD&gt; startup
</pre></li>
<li>
<p>Enter one of the following commands to view the existing disk groups, their redundancy level, and the amount of free disk space in each disk group:</p>
<pre dir="ltr">
ASMCMD&gt; lsdg
</pre>
<p>or:</p>
<pre dir="ltr">
C:\&gt; %ORACLE_HOME%\bin\asmcmd -p lsdg
</pre></li>
<li>
<p>From the output, identify a disk group with the appropriate redundancy level and note the free space that it contains.</p>
</li>
<li>
<p>If necessary, install, or identify the additional disk devices required to meet the storage requirements listed in the previous section<a id="sthref458"></a><a id="sthref459"></a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
I<a id="sthref460"></a>f you are adding devices to an existing disk group, then Oracle recommends that you use devices that have the same size and performance characteristics as the existing devices in that disk group.</div>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDGBAFA"></a>
<div id="CWWIN292" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.3.2.2</span> Selecting Disks to use with Oracle ASM Disk Groups</h4>
<p>If you are sure that a suitable disk group does not exist on the system, then install or identify appropriate disk devices to add to a new disk group. Use the following guidelines when identifying appropriate disk devices:</p>
<ul>
<li>
<p>All of the devices in an Oracle ASM disk group should be the same size and have the same performance characteristics.</p>
</li>
<li>
<p>Do not specify multiple partitions on a single physical disk as a disk group device. Oracle ASM expects each disk group device to be on a separate physical disk.</p>
</li>
<li>
<p>Nonshared logical partitions are not supported with Oracle RAC. If you want to use logical partitions for your Oracle RAC database, then you must use shared logical volumes created by a logical volume manager such as <code dir="ltr">diskpart.msc</code>.</p>
</li>
<li>
<p>Although you can specify a logical volume as a device in an Oracle ASM disk group, Oracle does not recommend their use because it adds a layer of complexity that is unnecessary with Oracle ASM. In addition, Oracle RAC requires a cluster logical volume manager in case you decide to use a logical volume with Oracle ASM and Oracle RAC.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDDECF">Section 3.5, "Preliminary Shared Disk Preparation"</a></p>
</li>
<li>
<p><a href="#CHDDDBDH">Section 3.6, "Configuring Shared Storage for Oracle ASM"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDEGIIG"></a>
<div id="CWWIN293" class="sect2">
<h3 class="sect2"><span class="secnum">3.3.3</span> Restrictions for Disk Partitions Used By Oracle ASM</h3>
<p><a id="sthref461"></a>Be aware of the following restrictions when configuring disk partitions for use with Oracle ASM:</p>
<ul>
<li>
<p>You cannot use primary partitions for storing Oracle Clusterware files while running OUI to install Oracle Clusterware as described in <a href="crswin.htm#BEHHDFEF">Chapter 4, "Installing Oracle Grid Infrastructure for a Cluster"</a>. You must create logical drives inside extended partitions for the disks to be used by Oracle Clusterware files and Oracle ASM.</p>
</li>
<li>
<p>With x64 Windows, you can create up to 128 primary partitions for each disk.</p>
</li>
<li>
<p>You can create shared directories only on primary partitions and logical drives.</p>
</li>
<li>
<p><a id="sthref462"></a>Oracle recommends that you limit the number of partitions you create on a single disk to prevent disk contention. Therefore, you may prefer to use extended partitions rather than primary partitions.</p>
</li>
</ul>
<p>For these reasons, you might prefer to use extended partitions for storing Oracle software files and not primary partitions.</p>
</div>
<!-- class="sect2" -->
<a id="CHDEIJDH"></a>
<div id="CWWIN294" class="sect2">
<h3 class="sect2"><span class="secnum">3.3.4</span> Requirements for Using a Shared File System</h3>
<p>To use a shared file system for Oracle Clusterware, Oracle ASM, and Oracle RAC, the file system must comply with the following requirements:</p>
<ul>
<li>
<p>To use a cluster file system, it must be a supported cluster file system, as listed in the section <a href="#CHDHBJHJ">Section 3.2, "Supported Storage Options for Oracle Grid Infrastructure and Oracle RAC"</a>.</p>
</li>
<li>
<p>To use <a id="sthref463"></a><a id="sthref464"></a>NFS, it must be on a certified network attached storage (NAS) device. Access the My Oracle Support web site as described in <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a> to find a list of certified NAS devices.</p>
</li>
<li>
<p>I<a id="sthref465"></a>f you choose to place your OCR files on a shared file system, then Oracle recommends that one of the following is true:</p>
<ul>
<li>
<p>The disks used for the file system are on a highly available storage device, for example, a RAID<a id="sthref466"></a><a id="sthref467"></a><a id="sthref468"></a> device.</p>
</li>
<li>
<p>At least two file systems are mounted, and use the features of Oracle Clusterware 11<span class="italic">g</span> Release 2 (11.2) to provide redundancy for the OCR.</p>
</li>
</ul>
</li>
<li>
<p>If you choose to place the Oracle RAC data files on a shared file system, then one of the following should be true:</p>
<ul>
<li>
<p>The disks used for the file system are on a highly available storage device, (for example, a RAID device).</p>
</li>
<li>
<p>The file systems consist of at least two independent file systems, with the data files on one file system, and the recovery files on a different file system.</p>
</li>
</ul>
</li>
<li>
<p>The user account with which you perform the installation (<code dir="ltr">oracle</code> or <code dir="ltr">grid</code>) must have write permissions to create the files in the path that you specify for the shared storage.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<p><a id="sthref469"></a><a id="sthref470"></a><a id="sthref471"></a><a id="sthref472"></a><a id="sthref473"></a><a id="sthref474"></a>If you are upgrading Oracle Clusterware, and your existing cluster uses 100 MB OCR and 20 MB voting disk partitions, then you must extend these partitions to at least 300 MB. Oracle recommends that you do not use partitions, but instead place OCR and voting disks in Oracle ASM disk groups marked as QUORUM disk groups.</p>
<p>All storage products must be supported by both your server and storage vendors.</p>
</div>
<p>Use <a href="#CHDIJCDG">Table 3-4</a> and <a href="#CHDEBJBF">Table 3-5</a> to determine the minimum size for shared file systems:</p>
<div id="CWWIN295" class="tblformal">
<p class="titleintable"><a id="sthref475"></a><a id="CHDIJCDG"></a>Table 3-4 Oracle Clusterware Shared File System Volume Size Requirements</p>
<table class="cellalignment2757" title="Oracle Clusterware Shared File System Volume Size Requirements" summary="Lists minimum partition sizes for shared file systems for Oracle Clusterware, including minimum sizes for database files if these are also stored on shared filesystem partitions" dir="ltr">
<thead>
<tr class="cellalignment2746">
<th class="cellalignment2758" id="r1c1-t37">File Types Stored</th>
<th class="cellalignment2758" id="r1c2-t37">Number of Volumes</th>
<th class="cellalignment2758" id="r1c3-t37">Volume Size</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r2c1-t37" headers="r1c1-t37">
<p>Voting disks with external redundancy</p>
</td>
<td class="cellalignment2752" headers="r2c1-t37 r1c2-t37">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r2c1-t37 r1c3-t37">
<p>At least 300 MB for each voting disk volume</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r3c1-t37" headers="r1c1-t37">
<p>OCR with external redundancy</p>
</td>
<td class="cellalignment2752" headers="r3c1-t37 r1c2-t37">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r3c1-t37 r1c3-t37">
<p>At least 300 MB for each OCR volume</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r4c1-t37" headers="r1c1-t37">
<p>Oracle Clusterware files (OCR and voting disks) with redundancy provided by Oracle software</p>
</td>
<td class="cellalignment2752" headers="r4c1-t37 r1c2-t37">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r4c1-t37 r1c3-t37">
<p>At least 300 MB for each OCR volume</p>
<p>At least 300 MB for each voting disk volume</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="CWWIN296" class="tblformal">
<p class="titleintable"><a id="sthref476"></a><a id="CHDEBJBF"></a>Table 3-5 Oracle RAC Shared File System Volume Size Requirements</p>
<table class="cellalignment2757" title="Oracle RAC Shared File System Volume Size Requirements" summary="Lists minimum partition sizes for shared file systems for Oracle Clusterware, including minimum sizes for database files if these are also stored on shared filesystem partitions" dir="ltr">
<thead>
<tr class="cellalignment2746">
<th class="cellalignment2758" id="r1c1-t38">File Types Stored</th>
<th class="cellalignment2758" id="r1c2-t38">Number of Volumes</th>
<th class="cellalignment2758" id="r1c3-t38">Volume Size</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r2c1-t38" headers="r1c1-t38">
<p>Oracle Database data files</p>
</td>
<td class="cellalignment2752" headers="r2c1-t38 r1c2-t38">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r2c1-t38 r1c3-t38">
<p>At least 1.5 GB for each volume</p>
</td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r3c1-t38" headers="r1c1-t38">
<p><a id="sthref477"></a>Recovery files</p>
<p><span class="bold">Note</span>: Recovery files must be on a different volume than database files</p>
</td>
<td class="cellalignment2752" headers="r3c1-t38 r1c2-t38">
<p>1</p>
</td>
<td class="cellalignment2752" headers="r3c1-t38 r1c3-t38">
<p>At least 2 GB for each volume</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>In <a href="#CHDIJCDG">Table 3-4</a> and <a href="#CHDEBJBF">Table 3-5</a>, the total required volume size is cumulative. For example, to store all Oracle Clusterware files on the shared file system with normal redundancy, you should have at least 2 GB of storage available over a minimum of three volumes (three separate volume locations for the OCR and two OCR mirrors, and one voting disk on each volume). You should have a minimum of three physical disks, each at least 500 MB, to ensure that voting disks and OCR files are on separate physical disks. If you also use this shared storage for Oracle RAC, using one volume for data files and one volume for recovery files, then you should have at least 3.5 GB available storage over two volumes, and at least 5.5 GB available total for all volumes.</p>
</div>
<!-- class="sect2" -->
<a id="CHDHEDFE"></a>
<div id="CWWIN297" class="sect2">
<h3 class="sect2"><span class="secnum">3.3.5</span> Requirements for Files Managed by Oracle</h3>
<p>If you use OCFS for Windows or Oracle ASM for your database files, then your database is created by default with files managed by Oracle Database. When using the Oracle Managed files feature, you need specify only the database object name instead of file names when creating or deleting database files.</p>
<p>Configuration procedures are required to enable Oracle Managed Files.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Using Oracle-Managed Files" in <a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDCEEGA"></a>
<div id="CWWIN298" class="sect1">
<h2 class="sect1"><span class="secnum">3.4</span> After You Have Selected the Shared Storage Options</h2>
<p>When you have determined your disk storage options, first perform the steps listed in the section <a href="#CHDDDECF">Section 3.5, "Preliminary Shared Disk Preparation"</a>, then configure the shared storage:<a id="sthref478"></a><a id="sthref479"></a><a id="sthref480"></a></p>
<ul>
<li>
<p><span class="bold">To use Oracle ASM</span>, refer to <a href="#CHDDDBDH">Section 3.6, "Configuring Shared Storage for Oracle ASM"</a>.</p>
</li>
<li>
<p><span class="bold">To use a file system</span>, refer to <a href="#CHDICFEI">Section 3.7, "Configuring Storage for Oracle Database Files on OCFS for Windows"</a>.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDDDECF"></a>
<div id="CWWIN299" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.5</span> Preliminary Shared Disk Preparation</h2>
<p>Complete the following steps to prepare shared disks for storage:</p>
<ul>
<li>
<p><a href="#CHDHEIFA">Disabling Write Caching</a></p>
</li>
<li>
<p><a href="#CHDGAGEH">Enabling Automounting for Windows</a></p>
</li>
</ul>
<a id="CHDHEIFA"></a>
<div id="CWWIN300" class="sect2">
<h3 class="sect2"><span class="secnum">3.5.1</span> Disabling Write Caching</h3>
<p>You must disable write caching on all disks that will be used to share data between the nodes in your cluster. Perform these steps to disable write caching:</p>
<ol>
<li>
<p>Click <span class="bold">Start</span>, then select <span class="bold">Control Panel</span>, then <span class="bold">Administrative Tools</span>, then <span class="bold">Computer Management</span>, then <span class="bold">Device Manager</span>, and then <span class="bold">Disk drives</span></p>
</li>
<li>
<p>Expand the Disk drives and double-click the first drive listed.</p>
</li>
<li>
<p>Under the Policies tab for the selected drive, uncheck the option that enables write caching.</p>
</li>
<li>
<p>Double-click each of the other drives that will be used by Oracle Clusterware and Oracle RAC and disable write caching as described in the previous step.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Any disks that you use to store files, including database files, that will be shared between nodes, must have write caching disabled.</div>
</div>
<!-- class="sect2" -->
<a id="CHDGAGEH"></a>
<div id="CWWIN301" class="sect2">
<h3 class="sect2"><span class="secnum">3.5.2</span> Enabling Automounting for Windows<a id="sthref481"></a><a id="sthref482"></a><a id="sthref483"></a></h3>
<p>If you are using Windows Server 2003 R2 Enterprise Edition or Datacenter Edition, then you must enable disk automounting, as it is disabled by default. For other Windows releases, even though the automount feature is enabled by default, you should verify that automount is enabled.</p>
<p>You must enable automounting when using:</p>
<ul>
<li>
<p>Raw partitions for Oracle RAC</p>
</li>
<li>
<p>OCFS for Windows</p>
</li>
<li>
<p>Oracle Clusterware</p>
</li>
<li>
<p>Raw partitions for single-node database installations</p>
</li>
<li>
<p>Logical drives for Oracle ASM</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Raw partitions are supported only when upgrading an existing installation using the configured partitions. On new installations, using raw partitions is not supported by ASMCA or OUI, but is supported by the software if you perform manual configuration</div>
<p>If you upgrade the operating system from one version of Windows to another (for example, Windows Server 2003 to Windows Advanced Server 2003), then you must repeat this procedure after the upgrade is finished.</p>
<p>To determine if automatic mounting of new volumes is enabled, use the following commands:</p>
<pre dir="ltr">
c:\&gt; diskpart
DISKPART&gt; automount
Automatic mounting of new volumes disabled.
</pre>
<p>To enable automounting:</p>
<ol>
<li>
<p>Enter the following commands at a command prompt:</p>
<pre dir="ltr">
c:\&gt; diskpart
DISKPART&gt; automount enable
Automatic mounting of new volumes enabled.
</pre></li>
<li>
<p>Type <code dir="ltr">exit</code> to end the <code dir="ltr">diskpart</code> session</p>
</li>
<li>
<p>Repeat steps 1 and 2 for each node in the cluster.</p>
</li>
<li>
<p>When you have prepared all of the cluster nodes in your Windows Server 2003 R2 system as described in the previous steps, restart all of the nodes.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
All nodes in the cluster must have automatic mounting enabled to correctly install Oracle RAC and Oracle Clusterware. <a id="sthref484"></a>Oracle recommends that you enable automatic mounting before creating any logical partitions for use by the database, Oracle ASM, or OCFS for Windows.
<p>You must restart each node after enabling disk automounting. After it is enabled and the node is restarted, automatic mounting remains active until it is disabled.</p>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDDDBDH"></a>
<div id="CWWIN302" class="sect1">
<h2 class="sect1"><span class="secnum">3.6</span> Configuring Shared Storage for Oracle ASM</h2>
<p>The installer does not suggest a default location for the OCR or the voting disk. If you choose to create these files on Oracle ASM, then you must first create and configure disk partitions to be used in the Oracle ASM disk group.</p>
<p>The following sections describe how to create and configure disk partitions to be used by Oracle ASM for storing Oracle Clusterware files or Oracle Database data files:</p>
<ul>
<li>
<p><a href="#CHDHAEHF">Creating Disk Partitions for Oracle ASM</a></p>
</li>
<li>
<p><a href="#CHDGGCAE">Marking Disk Partitions for Oracle ASM Before Installation</a></p>
</li>
</ul>
<a id="CHDHAEHF"></a>
<div id="CWWIN303" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.6.1</span> Creating Disk Partitions for Oracle ASM</h3>
<p><a id="sthref485"></a><a id="sthref486"></a><a id="sthref487"></a><a id="sthref488"></a>To <a id="sthref489"></a><a id="sthref490"></a><a id="sthref491"></a><a id="sthref492"></a><a id="sthref493"></a>use direct-attached storage (DAS) or storage area network (SAN) disks for Oracle ASM, each disk must have a partition table. Oracle recommends creating exactly one partition for each disk that encompasses the entire disk.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Y<a id="sthref494"></a><a id="sthref495"></a>ou can use any physical disk for Oracle ASM, if it is partitioned. However, you cannot use NAS or Microsoft dynamic disks.</div>
<p>Use Microsoft Computer Management utility or the command line tool <code dir="ltr">diskpart</code> to create the partitions. Ensure that you create the partitions without drive letters. After you have created the partitions, the disks can be configured.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NTDBI999" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=NTDBI999"><span class="italic">Oracle Database Installation Guide for Microsoft Windows</span></a> for information about creating DAS or SAN disk partitions</p>
</li>
<li>
<p><a href="typinstl.htm#CIHJFCCJ">Section 1.2.7, "Prepare Disk Partitions"</a> for more information about using <code dir="ltr">diskpart</code> to create a partition</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDGGCAE"></a>
<div id="CWWIN304" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.6.2</span> Marking Disk Partitions for Oracle ASM Before Installation</h3>
<p><a id="sthref496"></a>The only partitions that OUI displays for Windows systems are logical drives that are on disks that do not contain a primary partition, and have been marked (or <span class="bold">stamped</span>) with <code dir="ltr">asmtool</code>. Configure the disks before installation either by using <code dir="ltr">asmtoolg</code> (graphical user interface (GUI) version) or using <code dir="ltr">asmtool</code> (command line version). You also have the option of using the <code dir="ltr">asmtoolg</code> utility during Oracle Grid Infrastructure for a cluster installation.</p>
<p>The <code dir="ltr">asmtoolg</code> and <code dir="ltr">asmtool</code> utilities only work on partitioned disks; you cannot use Oracle ASM on unpartitioned disks. You can also use these tools to reconfigure the disks after installation. These utilities are installed automatically as part of Oracle Grid Infrastructure.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
On Windows Server 2008 and later releases, if user account control (UAC) is enabled, then running <code dir="ltr">asmtoolg</code> or <code dir="ltr">asmtool</code> requires administrator-level permissions.</div>
<div id="CWWIN305" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref497"></a>
<h4 class="sect3"><span class="secnum">3.6.2.1</span> Overview of asmtoolg and asmtool</h4>
<p>The <code dir="ltr">asmtoolg</code> and <code dir="ltr">asmtool</code> tools associate meaningful, persistent names with disks to facilitate using those disks with Oracle ASM. Oracle ASM uses disk strings to operate more easily on groups of disks at the same time. The names that <code dir="ltr">asmtoolg</code> or <code dir="ltr">asmtool</code> create make this easier than using Windows drive letters.</p>
<p><a id="sthref498"></a>All disk names created by <code dir="ltr">asmtoolg</code> or <code dir="ltr">asmtool</code> begin with the prefix <code dir="ltr">ORCLDISK</code> followed by a user-defined prefix (the default is <code dir="ltr">DATA</code>), and by a disk number for identification purposes. You can use them as raw devices in the Oracle ASM instance by specifying a name <code dir="ltr">\\.\ORCLDISK</code><code dir="ltr"><span class="codeinlineitalic">prefixn</span></code>, where <code dir="ltr"><span class="codeinlineitalic">prefix</span></code> either can be <code dir="ltr">DATA</code>, or a value you supply, and where <code dir="ltr"><span class="codeinlineitalic">n</span></code> represents the disk number.</p>
<p>To configure your disks with <code dir="ltr">asmtoolg</code>, see one of the following sections:</p>
<ul>
<li>
<p><a href="#CHDHBDEJ">Section 3.6.2.2, "Using asmtoolg (Graphical User Interface) To Mark Disks"</a></p>
</li>
<li>
<p><a href="#CHDCFCIB">Section 3.6.2.4, "Using asmtool (Command Line) To Mark Disks"</a></p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDHBDEJ"></a>
<div id="CWWIN306" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.6.2.2</span> Using asmtoolg (Graphical User Interface) To Mark Disks</h4>
<p>Use <a id="sthref499"></a><a id="sthref500"></a><a id="sthref501"></a><code dir="ltr">asmtoolg</code> (GUI version) to create device names; use <code dir="ltr">asmtoolg</code> to add, change, delete, and examine the devices available for use in Oracle ASM.</p>
<p>To add or change disk stamps:</p>
<ol>
<li>
<p>In the installation media for Oracle Grid Infrastructure, go the <code dir="ltr">asmtool</code> folder and double-click <code dir="ltr">asmtoolg</code>.</p>
<p>If Oracle Clusterware is installed, then go to the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\</code><code dir="ltr">bin</code> folder and double-click <code dir="ltr">asmtoolg.exe</code>.</p>
<p>On Windows Server 2008 and later releases, if user access control (UAC) is enabled, then you must create a desktop shortcut to a command window. Open the command window using the <span class="bold">Run as Administrator</span>, right-click the context menu, and launch <code dir="ltr">asmtoolg</code>.</p>
</li>
<li>
<p>Select the <span class="bold">Add or change label</span> option, and then click <span class="bold">Next</span>.</p>
<p><code dir="ltr">asmtoolg</code> shows the devices available on the system. Unrecognized disks have a status of "Candidate device", stamped disks have a status of "Stamped ASM device," and disks that have had their stamp deleted have a status of "Unstamped ASM device." The tool also shows disks that are recognized by Windows as a file system (such as NTFS). These disks are not available for use as Oracle ASM disks, and cannot be selected. In addition, Microsoft Dynamic disks are not available for use as Oracle ASM disks.</p>
<p>If necessary, follow the steps under <a href="typinstl.htm#CIHJFCCJ">Section 1.2.7, "Prepare Disk Partitions"</a> to create disk partitions for the Oracle ASM instance.</p>
</li>
<li>
<p>On the Stamp Disks window, select the disks to you want to use with Oracle ASM.</p>
<p>For ease of use, Oracle ASM can generate unique stamps for all of the devices selected for a given prefix. The stamps are generated by concatenating a number with the prefix specified. For example, if the prefix is <code dir="ltr">DATA</code>, then the first Oracle ASM link name is <code dir="ltr">ORCLDISKDATA0</code>.</p>
<p>You can also specify the stamps of individual devices.</p>
</li>
<li>
<p>Optionally, select a disk to edit the individual stamp (Oracle ASM link name).</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<div id="CWWIN307" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref502"></a>
<h4 class="sect3"><span class="secnum">3.6.2.3</span> Using asmtoolg To Remove Disk Stamps</h4>
<p>To delete disk stamps:</p>
<ol>
<li>
<p>In the installation media for Oracle Grid Infrastructure, go the <code dir="ltr">asmtool</code> folder and double-click <code dir="ltr">asmtoolg</code>.</p>
<p>If Oracle Clusterware is installed, then go to the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\</code><code dir="ltr">bin</code> folder and double-click <code dir="ltr">asmtoolg.exe</code>.</p>
<p>On Windows Server 2008 and later releases, if user access control (UAC) is enabled, then you must create a desktop shortcut to a command window. Open the command window using the <span class="bold">Run as Administrator</span>, right-click the context menu, and launch <code dir="ltr">asmtoolg</code>.</p>
</li>
<li>
<p>Select the <span class="bold">Delete labels</span> option, then click <span class="bold">Next</span>.</p>
<p>The delete option is only available if disks exist with stamps. The delete screen shows all stamped Oracle ASM disks.</p>
</li>
<li>
<p>On the Delete Stamps screen, select the disks to unstamp.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDCFCIB"></a>
<div id="CWWIN308" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">3.6.2.4</span> Using asmtool (Command Line) To Mark Disks</h4>
<p><a id="sthref503"></a><a id="sthref504"></a><code dir="ltr">asmtool</code> is a command-line interface for marking (or stamping) disks to be used with Oracle ASM. It has the following options:</p>
<div class="inftblinformalwide">
<table class="cellalignment2759" title="ASM command line options" summary="This table lists the asmtool command line options. column 1 lists the option, column 2 lists the description of the option, and column 3 gives an example." dir="ltr">
<thead>
<tr class="cellalignment2746">
<th class="cellalignment2758" id="r1c1-t46">Option</th>
<th class="cellalignment2758" id="r1c2-t46">Description</th>
<th class="cellalignment2758" id="r1c3-t46">Example</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r2c1-t46" headers="r1c1-t46"><code dir="ltr">-add</code></td>
<td class="cellalignment2752" headers="r2c1-t46 r1c2-t46">Adds or changes stamps. You must specify the hard disk, partition, and new stamp name. If the disk is a raw device or has an existing Oracle ASM stamp, then you must specify the <code dir="ltr">-force</code> option.
<p>If necessary, follow the steps under <a href="typinstl.htm#CIHJFCCJ">Section 1.2.7, "Prepare Disk Partitions"</a>to create disk partitions for the Oracle ASM instance.</p>
</td>
<td class="cellalignment2752" headers="r2c1-t46 r1c3-t46">
<pre dir="ltr">
asmtool -add [-force]
\Device\Harddisk1\Partition1 ORCLDISKASM0
\Device\Harddisk2\Partition1 ORCLDISKASM2...
</pre></td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r3c1-t46" headers="r1c1-t46"><code dir="ltr">-addprefix</code></td>
<td class="cellalignment2752" headers="r3c1-t46 r1c2-t46">Adds or changes stamps using a common prefix to generate stamps automatically. The stamps are generated by concatenating a number with the prefix specified. If the disk is a raw device or has an existing Oracle ASM stamp, then you must specify the <code dir="ltr">-force</code> option.</td>
<td class="cellalignment2752" headers="r3c1-t46 r1c3-t46">
<pre dir="ltr">
asmtool -addprefix ORCLDISKASM [-force]
\Device\Harddisk1\Partition1
\Device\Harddisk2\Partition1...
</pre></td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r4c1-t46" headers="r1c1-t46">-<code dir="ltr">create</code></td>
<td class="cellalignment2752" headers="r4c1-t46 r1c2-t46">Creates an Oracle ASM disk device from a file instead of a partition.
<p><span class="bold">Note</span>: Usage of this command is not supported for production environments.</p>
</td>
<td class="cellalignment2752" headers="r4c1-t46 r1c3-t46">
<pre dir="ltr">
asmtool -create \\server\share\file 1000
</pre>
<pre dir="ltr">
asmtool -create D:\asm\asmfile02.asm 240
</pre></td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r5c1-t46" headers="r1c1-t46"><code dir="ltr">-list</code></td>
<td class="cellalignment2752" headers="r5c1-t46 r1c2-t46">List available disks. The stamp, windows device name, and disk size in MB are shown.</td>
<td class="cellalignment2752" headers="r5c1-t46 r1c3-t46">
<pre dir="ltr">
asmtool -list
</pre></td>
</tr>
<tr class="cellalignment2746">
<td class="cellalignment2752" id="r6c1-t46" headers="r1c1-t46"><code dir="ltr">-delete</code></td>
<td class="cellalignment2752" headers="r6c1-t46 r1c2-t46">Removes existing stamps from disks.</td>
<td class="cellalignment2752" headers="r6c1-t46 r1c3-t46">
<pre dir="ltr">
asmtool -delete ORCLDISKASM0 ORCLDISKASM1...
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<p>On Windows Server 2008 and later releases, if user access control (UAC) is enabled, then you must create a desktop shortcut to a command window. Open the command window using the <span class="bold">Run as Administrator</span>, right-click the context menu, and launch <code dir="ltr">asmtool</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you use <code dir="ltr">-add</code>, <code dir="ltr">-addprefix</code>, or <code dir="ltr">-delete</code>, <code dir="ltr">asmtool</code> notifies the Oracle ASM instance on the local node and on other nodes in the cluster, if available, to rescan the available disks.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDICFEI"></a>
<div id="CWWIN309" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.7</span> Configuring Storage for Oracle Database Files on OCFS for Windows</h2>
<p><a id="sthref505"></a>To use OCFS for Windows for your Oracle home and data files, the following partitions, at a minimum, must exist before you run OUI to install Oracle Clusterware:</p>
<ul>
<li>
<p>5.5 GB or larger partition for the Oracle home, if you want a shared Oracle home</p>
</li>
<li>
<p>3 GB or larger partitions for the Oracle Database data files and recovery files</p>
</li>
</ul>
<p><a id="sthref506"></a>Log in to Windows using a member of the Administrators group and perform the steps described in this section to set up the shared disk raw partitions for OCFS for Windows. Windows refers to raw partitions as logical drives. If you need more information about creating partitions, then refer to the Windows online help from within the Disk Management utility.</p>
<ol>
<li>
<p>Run the Windows Disk Management utility from one node to create an extended partition. Use a basic disk; dynamic disks are not supported.</p>
</li>
<li>
<p>Create a partition for the Oracle Database data files and recovery files, and optionally create a second partition for the Oracle home.</p>
<p>The number of partitions used for OCFS for Windows affects performance. Therefore, you should create the minimum number of partitions needed for the OCFS for Windows option you choose.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
<p>Oracle supports installing the database into multiple Oracle Homes on a single system. This allows flexibility in deployment and maintenance of the database software. For example, it enables different versions of the database to run simultaneously on the same system, or it enables you to upgrade specific database or Oracle Automatic Storage Management instances on a system without affecting other running databases.</p>
<p>However, when you have installed multiple Oracle Homes on a single system, there is also some added complexity introduced that you may have to consider allowing these Oracle Homes to coexist. For more information on this topic, refer to <a class="olink NTQRF99998" href="../../win.112/e10845/tools.htm#NTQRF99998"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> and <a class="olink RIWIN" href="../e48195/toc.htm"><span class="italic">Oracle Real Application Clusters Installation Guide for Microsoft Windows x64 (64-Bit)</span></a></p>
</div>
<p>To create the required partitions, perform the following steps:</p>
<ol>
<li>
<p>From an existing node in the cluster, run the DiskPart utility as follows:</p>
<pre dir="ltr">
C:\&gt; diskpart
DISKPART&gt;
</pre></li>
<li id="CHDGEABA">
<p>List the available disks. By specifying its disk number (<code dir="ltr"><span class="codeinlineitalic">n</span></code>), select the disk on which you want to create a partition.</p>
<pre dir="ltr">
DISKPART&gt; list disk
DISKPART&gt; select disk <span class="italic">n</span>
</pre></li>
<li>
<p>Create an extended partition:</p>
<pre dir="ltr">
DISKPART&gt; create part ext
</pre></li>
<li id="CHDEIJJH">
<p>Create a logical drive of the desired size after the extended partition is created using the following syntax:</p>
<pre dir="ltr">
DISKPART&gt; create part log [size=n] [offset=n] [noerr]
</pre></li>
<li>
<p>Repeat steps <a href="#CHDGEABA">2</a> through <a href="#CHDEIJJH">4</a> for the second and any additional partitions. An optimal configuration is one partition for the Oracle home and one partition for Oracle Database files.</p>
</li>
<li>
<p>List the available volumes, and remove any drive letters from the logical drives you plan to use.</p>
<pre dir="ltr">
DISKPART&gt; list volume
DISKPART&gt; select volume <span class="italic">n</span>
DISKPART&gt; remove
</pre></li>
<li>
<p>If you are preparing drives on a Windows 2003 R2 system, then you should restart all nodes in the cluster after you have created the logical drives.</p>
</li>
<li>
<p>Check all nodes in the cluster to ensure that the partitions are visible on all the nodes and to ensure that none of the Oracle partitions have drive letters assigned. If any partitions have drive letters assigned, then remove them by performing these steps:</p>
<ul>
<li>
<p>Right-click the partition in the Windows Disk Management utility</p>
</li>
<li>
<p>Select "Change Drive Letters and Paths..." from the menu</p>
</li>
<li>
<p>Click Remove in the "Change Drive Letter and Paths" window</p>
</li>
</ul>
</li>
</ol>
<div id="CWWIN310" class="sect2"><a id="sthref507"></a>
<h3 class="sect2"><span class="secnum">3.7.1</span> Formatting Drives to Use OCFS for Windows after Installation</h3>
<p><a id="sthref508"></a>If you want to <a id="sthref509"></a><a id="sthref510"></a>use OCFS for Windows for storage for Oracle RAC, then you must configure OCFS for Windows and the disks to be used by OCFS for Windows before you can use OCFS for Windows for storing data files.</p>
<p>If you do not select OCFS for Windows as the storage type for the Oracle Clusterware files, then OCFS for Windows is not configured during the Oracle Grid Infrastructure installation. Before you can use OCFS for Windows, you must first install the OCFS for Windows driver.</p>
<div id="CWWIN311" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref511"></a>
<h4 class="sect3"><span class="secnum">3.7.1.1</span> Installing and Configuring OCFS for Windows</h4>
<p>T<a id="sthref512"></a>o install and start the OCFS for Windows driver, run the following command from the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\cfs</code> directory on each node in your cluster that will use OCFS for Windows:</p>
<pre dir="ltr">
<span class="italic">Grid_home</span>\cfs\OcfsInstall /y
</pre>
<p><a id="sthref513"></a><a id="sthref514"></a>To create the OracleClusterVolumeService service, run the following command on each node in your cluster:</p>
<pre dir="ltr">
<span class="italic">Grid_home</span>\cfs\OcfsFindVol /i:<span class="italic">Grid_home</span>\cfs\ocfsfindvol.exe
</pre>
<p>To start the OracleClusterVolumeService service, run the following command on each node in your cluster:</p>
<pre dir="ltr">
net start OracleClusterVolumeService
</pre></div>
<!-- class="sect3" -->
<div id="CWWIN312" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref515"></a>
<h4 class="sect3"><span class="secnum">3.7.1.2</span> Formatting Drives for Use with OCFS for Windows</h4>
<p>To OCFS for Windows to store Oracle data files you must create OCFS volumes on the shared disks.</p>
<p>To format a disk partition or logical drive as an OCFS volume, run the <code dir="ltr">ocfsformat.exe</code> command from the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\cfs</code> directory using the following syntax:</p>
<pre dir="ltr">
<span class="italic">Grid_home</span>\cfs\OcfsFormat /m <span class="italic">link_name</span> /c <span class="italic">ClusterSize_in_KB </span>/v <span class="italic">volume_label</span> /f 
  /a /d
</pre>
<p>In the previous command syntax example, the following variables were used:</p>
<ul>
<li>
<p><code dir="ltr">/m</code> <code dir="ltr"><span class="codeinlineitalic">link_name</span></code> is the mountpoint for this file system which you want to format with OCFS for Windows. On Windows, provide a drive letter corresponding to the logical drive.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">ClusterSize_in_KB</span></code> is the Cluster size or allocation size for the OCFS for Windows volume (this option must be used with the <code dir="ltr">/a</code> option or else the default size of 4 kilobytes (KB) is used)</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
T<a id="sthref516"></a>he Cluster size is essentially the block size. Recommended values are 1024 (1 MB) if the OCFS for Windows disk partition is to be used for Oracle datafiles and 4 (4 KB) if the OCFS for Windows disk partition is to be used for the Oracle home.</div>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">volume_label</span></code> is an optional volume label</p>
</li>
<li>
<p>The <code dir="ltr">/f</code> option forces the format of the specified volume</p>
</li>
<li>
<p>The <code dir="ltr">/a</code> option, if specified, forces <code dir="ltr">OcfsFormat</code> to use the clustersize specified with the <code dir="ltr">/c</code> option</p>
</li>
<li>
<p>The <code dir="ltr">/d</code> option forces all future volume operations to use direct IO mode</p>
</li>
</ul>
<p>For example, to create an OCFS for Windows formatted shared disk partition named DATA, mounted as <code dir="ltr">U:</code>, using a shared disk with a nondefault cluster size of 1 MB, you would use the following command:</p>
<pre dir="ltr">
ocfsformat /m U: /c 1024 /v DATA /f /a
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDFEGJB"></a>
<div id="CWWIN313" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">3.8</span> Configuring Direct NFS Client for Oracle RAC Data Files</h2>
<p>This section contains the following information about Direct NFS Client:</p>
<ul>
<li>
<p><a href="#CHDFAACD">About Direct NFS Client</a></p>
</li>
<li>
<p><a href="#CHDCHHBC">About the oranfstab File for Direct NFS Client</a></p>
</li>
<li>
<p><a href="#CHDEBCED">Mounting NFS Storage Devices with Direct NFS Client</a></p>
</li>
<li>
<p><a href="#CHDCJHAE">Specifying Network Paths for an NFS Server</a></p>
</li>
<li>
<p><a href="#CHDIDIIF">Enabling Direct NFS Client</a></p>
</li>
<li>
<p><a href="#CHDJFDAA">Performing Basic File Operations Using the ORADNFS Utility</a></p>
</li>
<li>
<p><a href="#CHDFBCGD">Disabling Direct NFS Client</a></p>
</li>
</ul>
<a id="CHDFAACD"></a>
<div id="CWWIN314" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.1</span> About Direct NFS Client</h3>
<p><a id="sthref517"></a><a id="sthref518"></a>With Oracle Database 11<span class="italic">g</span> Release 2 (11.2), instead of using the operating system or third-party NFS client, you can configure Oracle Database to use Direct NFS Client to access NFS V3 servers directly. Direct NFS Client tunes itself to make optimal use of available resources and enables the storage of data files on supported NFS servers.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Use NFS servers supported for Oracle RAC. Check My Oracle Support, as described in <a href="prewin.htm#BABCCGCJ">Section 2.4, "Checking Hardware and Software Certification on My Oracle Support"</a> for support information.</div>
<p>To enable Oracle Database to use Direct NFS Client, the NFS file systems must be mounted and available over regular NFS mounts before you start installation. Direct NFS Client manages settings after installation. If Oracle Database cannot open an NFS server using Direct NFS Client, then an informational message is logged into the Oracle alert log. A trace file is also created, indicating that Direct NFS Client could not connect to an NFS server.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Direct NFS does not work if the backend NFS server does not support a write size (<code dir="ltr">wtmax</code>) of 32768 or larger.</div>
<p>The Oracle files resident on the NFS server that are accessed by Direct NFS Client can also be accessed through a third party NFS client. Management of Oracle data files created with Direct NFS Client should be done according to the guidelines specified in the "Managing Datafiles and Tempfiles" chapter of <a class="olink ADMIN012" href="../../server.112/e25494/dfiles.htm#ADMIN012"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
<p><a id="sthref519"></a><a id="sthref520"></a>Volumes mounted through Common Internet File System (CIFS) can not be used for storing Oracle database files without configuring Direct NFS Client. The atomic write requirements needed for database writes are not guaranteed through the CIFS protocol, consequently CIFS can only be used for OS level access, for example, for commands such as <code dir="ltr">copy</code>.</p>
</div>
<!-- class="sect2" -->
<a id="CHDCHHBC"></a>
<div id="CWWIN315" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.2</span> About the oranfstab File for Direct NFS Client</h3>
<p><a id="sthref521"></a><a id="sthref522"></a><a id="sthref523"></a>If you use Direct NFS Client, then you must create a configuration file, <code dir="ltr">oranfstab</code>, to specify the options, attributes, and parameters that enable Oracle Database to use Direct NFS Client. Direct NFS Client looks for the mount point entries in <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\dbs</code><code dir="ltr">\oranfstab</code>. It uses the first matched entry as the mount point. You must create the <code dir="ltr">oranfstab</code> file in the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\dbs</code> directory.</p>
<p>When the <code dir="ltr">oranfstab</code> file is placed in <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\dbs</code>, the entries in the file are specific to a single database. For Oracle RAC installations in a shared Oracle home, the <code dir="ltr">oranfstab</code> file is globally available to all database instances. All instances that use the shared Oracle home use the same <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\dbs</code><code dir="ltr">\oranfstab</code> file. For a nonshared Oracle home, because all the Oracle RAC instances use the same <code dir="ltr">oranfstab</code> file, you must replicate the <code dir="ltr">oranfstab</code> file on all of the nodes. Also, you must keep the <code dir="ltr">oranfstab</code> file synchronized on all the nodes.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you remove an NFS path from <code dir="ltr">oranfstab</code> that Oracle Database is using, then you must restart the database for the change to be effective. In addition, the mount point that you use for the file system must be identical on each node.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIDIIF">Section 3.8.5, "Enabling Direct NFS Client"</a> for more information about creating the <code dir="ltr">oranfstab</code> file</div>
</div>
<!-- class="sect2" -->
<a id="CHDEBCED"></a>
<div id="CWWIN316" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.3</span> Mounting NFS Storage Devices with Direct NFS Client</h3>
<p>Direct NFS Client determines mount point settings for NFS storage devices based on the configuration information in <code dir="ltr">oranfstab</code>. If Oracle Database cannot open an NFS server using Direct NFS Client, then an error message is written into the Oracle alert and trace files indicating that Direct NFS Client could not establish a connection to the NFS server.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can have only one active Direct NFS Client implementation for each instance. Using Direct NFS Client on an instance will prevent another Direct NFS Client implementation.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDCDJB">Section 3.2.2, "Supported Storage Options for Oracle RAC"</a> for a list of the file types that are supported with Direct NFS Client</div>
</div>
<!-- class="sect2" -->
<a id="CHDCJHAE"></a>
<div id="CWWIN317" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.4</span> Specifying Network Paths for an NFS Server</h3>
<p><a id="sthref524"></a>Direct NFS Client can use up to four network paths defined in the <code dir="ltr">oranfstab</code> file for an NFS server. Direct NFS Client performs load balancing across all specified paths. If a specified path fails, then Direct NFS Client re-issues all outstanding requests over any remaining paths.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can have only one active Direct NFS Client implementation for each instance. Using Direct NFS Client on an instance prevents the use of another Direct NFS Client implementation.</div>
<p><a id="sthref525"></a><a id="sthref526"></a>Use the following global dynamic performance views for managing Direct NFS Client usage with your Oracle RAC database:</p>
<ul>
<li>
<p><code dir="ltr">GV$DNFS_SERVERS</code>: Lists the servers that are accessed using Direct NFS Client.</p>
</li>
<li>
<p><code dir="ltr">GV$DNFS_FILES</code>: Lists the files that are currently open using Direct NFS Client.</p>
</li>
<li>
<p><code dir="ltr">GV$DNFS_CHANNELS</code>: Shows the open network paths, or channels, to servers for which Direct NFS Client is providing files.</p>
</li>
<li>
<p><code dir="ltr">GV$DNFS_STATS</code>: Lists performance statistics for Direct NFS Client.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDIDIIF"></a>
<div id="CWWIN318" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.5</span> Enabling Direct NFS Client</h3>
<p><a id="sthref527"></a>To enable Direct NFS Client, you must add an <code dir="ltr">oranfstab</code> file to <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\dbs</code>. When <code dir="ltr">oranfstab</code> is placed in this directory, the entries in this file are specific to one particular database. Direct NFS Client searches for the mount point entries as they appear in <code dir="ltr">oranfstab</code>. Direct NFS Client uses the first matched entry as the mount point.</p>
<p>Complete the following procedure to enable Direct NFS Client:</p>
<ol>
<li>
<p><a id="sthref528"></a>Create an <code dir="ltr">oranfstab</code> file with the following attributes for each NFS server accessed by Direct NFS Client:</p>
<ul>
<li>
<p><code dir="ltr">server</code>: The NFS server name.</p>
</li>
<li>
<p><code dir="ltr">path</code>: Up to four network paths to the NFS server, specified either by internet protocol (IP) address, or by name, as displayed using the <code dir="ltr">ifconfig</code> command on the NFS server.</p>
</li>
<li>
<p><code dir="ltr">local</code>: Up to 4 network interfaces on the database host, specified by IP address, or by name, as displayed using the <code dir="ltr">ipconfig</code> command on the database host.</p>
</li>
<li>
<p><code dir="ltr">export</code>: The exported path from the NFS server. Use a UNIX-style path.</p>
</li>
<li>
<p><code dir="ltr">mount</code>: The corresponding local mount point for the exported volume. Use Windows-style path.</p>
</li>
<li>
<p><code dir="ltr">mnt_timeout</code>: (Optional) Specifies the time (in seconds) for which Direct NFS Client should wait for a successful mount before timing out. The default timeout is 10 minutes (600).</p>
</li>
<li>
<p><code dir="ltr">management</code>: Enables Direct NFS Client to use the management interface for SNMP queries. You can use this parameter if SNMP is running on separate management interfaces on the NFS server. The default value is the <code dir="ltr">server</code> parameter value.</p>
</li>
<li>
<p><code dir="ltr">community</code>: Specifies the community string for use in SNMP queries. Default value is <code dir="ltr">public</code>.</p>
</li>
<li>
<p><code dir="ltr">uid</code>: (Optional) The UNIX user ID to be used by Direct NFS Client to access all NFS servers listed in <code dir="ltr">oranfstab</code>. The default value is <code dir="ltr">uid:65534</code>, which corresponds to <code dir="ltr">user:nobody</code> on the NFS server.</p>
</li>
<li>
<p><code dir="ltr">gid</code>: (Optional) The UNIX group ID to be used by Direct NFS Client to access all NFS servers listed in <code dir="ltr">oranfstab</code>. The default value is <code dir="ltr">gid:65534</code>, which corresponds to <code dir="ltr">group:nogroup</code> on the NFS server.</p>
</li>
</ul>
<p>The mount point specified in the <code dir="ltr">oranfstab</code> file represents the local path where the database files would reside normally, as if Direct NFS Client was not used. For example, if the location for the data files if the database did not use Direct NFS Client would be <code dir="ltr">C:\app\oracle\oradata\orcl</code> directory, then you specify <code dir="ltr">C:\app\oracle\oradata\orcl</code> for the NFS virtual mount point in the corresponding <code dir="ltr">oranfstab</code> file.</p>
<p><a href="#CHDJBJBH">Example 3-1</a> and <a href="#CHDCIGFF">Example 3-2</a> provide examples of how Direct NFS Client attributes can be used in an <code dir="ltr">oranfstab</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Direct NFS Client ignores a <code dir="ltr">uid</code> or <code dir="ltr">gid</code> value of <code dir="ltr">0</code>.</p>
</li>
<li>
<p>The exported path from the NFS server must be accessible for <code dir="ltr">read/write/execute</code> by the user with the <code dir="ltr">uid</code>, <code dir="ltr">gid</code> specified in <code dir="ltr">oranfstab</code>. If neither <code dir="ltr">uid</code> nor <code dir="ltr">gid</code> is listed, then the exported path must be accessible by the user with <code dir="ltr">uid:65534</code> and <code dir="ltr">gid:65534</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="sthref529"></a>Replace the standard Oracle Disk Manager (ODM) library, <code dir="ltr">oraodm11.dll</code>, with the ODM NFS library.</p>
<p>Oracle Database uses the ODM library, <code dir="ltr">oranfsodm11.dll</code>, to enable Direct NFS Client. To replace the ODM library, complete the following steps:</p>
<ol>
<li>
<p>Change directory to <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\bin</code>.</p>
</li>
<li>
<p>Shut down the Oracle Database instance on a node using the Server Control Utility (SRVCTL).</p>
</li>
<li>
<p>Enter the following commands:</p>
<pre dir="ltr">
copy oraodm11.dll oraodm11.dll.orig
copy /Y oranfsodm11.dll oraodm11.dll 
</pre></li>
<li>
<p>Restart the Oracle Database instance using SRVCTL.</p>
</li>
<li>
<p>Repeat Step a to Step d for each node in the cluster.</p>
</li>
</ol>
</li>
</ol>
<div id="CWWIN319" class="example">
<p class="titleinexample"><a id="CHDJBJBH"></a>Example 3-1 oranfstab File Using Local and Path NFS Server Entries</p>
<p>The following example of an <code dir="ltr">oranfstab</code> file shows an NFS server entry, where the NFS server, <code dir="ltr">MyDataServer1</code>, uses 2 network paths specified with IP addresses.</p>
<pre dir="ltr">
server: MyDataServer1
local: 132.34.35.10
path: 132.34.35.12
local: 132.34.55.10
path: 132.34.55.12
export: /vol/oradata1 mount: C:\APP\ORACLE\ORADATA\ORCL
 
</pre></div>
<!-- class="example" -->
<div id="CWWIN320" class="example">
<p class="titleinexample"><a id="CHDCIGFF"></a>Example 3-2 oranfstab File Using Network Connection Names</p>
<p>The following example of an <code dir="ltr">oranfstab</code> file shows an NFS server entry, where the NFS server, <code dir="ltr">MyDataServer2</code>, uses 4 network paths specified by the network interface to use, or the network connection name. Multiple export paths are also used in this example.</p>
<pre dir="ltr">
server: MyDataServer2
local: LocalInterface1
path: NfsPath1
local: LocalInterface2
path: NfsPath2
local: LocalInterface3
path: NfsPath3
local: LocalInterface4
path: NfsPath4
export: /vol/oradata2 mount: C:\APP\ORACLE\ORADATA\ORCL2
export: /vol/oradata3 mount: C:\APP\ORACLE\ORADATA\ORCL3
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CHDJFDAA"></a>
<div id="CWWIN321" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.6</span> Performing Basic File Operations Using the ORADNFS Utility</h3>
<p><a id="sthref530"></a><a id="sthref531"></a>ORADNFS is a utility which enables the database administrators to perform basic file operations over Direct NFS Client on Microsoft Windows platforms.</p>
<p>ORADNFS is a multi-call binary, which is a single binary that acts like many utilities. You must be a member of the local <code dir="ltr">ORA_DBA</code> group to use ORADNFS. To execute commands using ORADNFS you issue the command as an argument on the command line.</p>
<p>The following command prints a list of commands available with ORADNFS:</p>
<pre dir="ltr">
C:\&gt; oradnfs help
</pre>
<p>To display the list of files in the NFS directory mounted as C:\ORACLE\ORADATA, use the following command:</p>
<pre dir="ltr">
C:\&gt; oradnfs ls C:\ORACLE\ORADATA\ORCL
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
A valid copy of the <code dir="ltr">oranfstab</code> configuration file must be present in <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\dbs</code> for ORADNFS to operate.</div>
</div>
<!-- class="sect2" -->
<a id="CHDFBCGD"></a>
<div id="CWWIN322" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">3.8.7</span> Disabling Direct NFS Client</h3>
<p><a id="sthref532"></a>Complete the following steps to disable Direct NFS Client:</p>
<ol>
<li>
<p>Restore the original <code dir="ltr">oraodm11.dll</code> file by reversing the process you completed in <a href="#CHDIDIIF">Section 3.8.5, "Enabling Direct NFS Client."</a></p>
</li>
<li>
<p>Remove the <code dir="ltr">oranfstab</code> file.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you remove an NFS path that Oracle Database is using, then you must restart the database for the change to be effective.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDEHAEC"></a>
<div id="CWWIN324" class="sect1">
<h2 class="sect1"><span class="secnum">3.9</span> Upgrading or Migrating Existing Oracle ASM Instances</h2>
<p><a id="sthref533"></a>If you have an Oracle ASM installation from a prior release installed on your server, or in an existing Oracle Clusterware installation, then you can use ASMCA to upgrade the existing Oracle ASM instance to Oracle ASM 11<span class="italic">g</span> Release 2 (11.2). You can also use ASMCA to configure failure groups, Oracle ASM volumes and Oracle ACFS.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must first shut down all database instances and applications on the node with the existing Oracle ASM instance before upgrading it.</div>
<p>During installation, if you chose to use Oracle ASM and ASMCA detects that there is a prior Oracle ASM version installed in another Oracle ASM home, then after installing the Oracle ASM 11<span class="italic">g</span> Release 2 (11.2) binaries, you can start ASMCA to upgrade the existing Oracle ASM instance. You can then choose to configure an Oracle ACFS deployment by creating Oracle ASM volumes and using the upgraded Oracle ASM to create the Oracle ACFS.</p>
<p>If you are upgrading from Oracle ASM 11<span class="italic">g</span> Release 2 (11.2.0.1) or later, then Oracle ASM is always upgraded with Oracle Grid Infrastructure as part of the rolling upgrade, and ASMCA is started during the upgrade. ASMCA cannot perform a separate upgrade of Oracle ASM from release 11.2.0.1 to 11.2.0.2.</p>
<p>On an existing Oracle Clusterware or Oracle RAC installation, if the prior version of Oracle ASM instances on all nodes is Oracle ASM 11<span class="italic">g</span> Release 1, then you are provided with the option to perform a rolling upgrade of Oracle ASM instances. If the prior version of the Oracle ASM instances for an Oracle RAC installation are from a release prior to Oracle ASM 11<span class="italic">g</span> Release 1, then rolling upgrades cannot be performed. Oracle ASM on all nodes will be upgraded to Oracle ASM 11<span class="italic">g</span> Release 2 (11.2).</p>
</div>
<!-- class="sect1" -->
<a id="CHDIEEHH"></a>
<div id="CWWIN326" class="sect1">
<h2 class="sect1"><span class="secnum">3.10</span> Configuring Oracle Automatic Storage Management Cluster File System</h2>
<p><a id="sthref534"></a><a id="sthref535"></a>Oracle <a id="sthref536"></a><a id="sthref537"></a>Grid Infrastructure includes Oracle Clusterware, Oracle ASM, Oracle ACFS, Oracle ADVM, and driver resources and software components, which are installed into the Grid home during installation with OUI. After an Oracle Grid Infrastructure installation, you can use Oracle ASM Configuration Assistant (ASMCA) to start the Oracle ASM instance and create Oracle ASM disk groups, Oracle ADVM volumes, and Oracle ACFS file systems (assuming Oracle Clusterware is operational). Alternatively, Oracle ASM disk groups and Oracle ADVM volumes can be created using SQL*Plus, ASMCMD command line tools, or Oracle Enterprise Manager. File systems can be created in Oracle ACFS using operating system command-line tools or Oracle Enterprise Manager.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Oracle ACFS is supported only on Windows Server 2003 x64 and Windows Server 2003 R2 x64 for Oracle Grid Infrastructure release 11.2.0.1.</p>
</li>
<li>
<p>Starting with Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 (11.2.0.2), Oracle ACFS is supported on Windows Server 2008 x64 and Windows Server 2008 R2 x64.</p>
</li>
<li>
<p>The compatibility parameters <code dir="ltr">COMPATIBLE.ASM</code> and <code dir="ltr">COMPATIBLE.ADVM</code> must be set to 11.2 or higher for the disk group to contain an Oracle ADVM volume.</p>
</li>
</ul>
</div>
<p>If you want to create the Oracle home for your Oracle RAC database in Oracle ACFS, then perform the following steps:</p>
<ol>
<li>
<p>Install Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM).</p>
</li>
<li>
<p>Go to the <code dir="ltr">bin</code> directory in the Grid home, for example:</p>
<pre dir="ltr">
C:\&gt; cd app\11.2.0\grid\bin
</pre></li>
<li>
<p><a id="sthref538"></a><a id="sthref539"></a>Start ASMCA as the Local Administrator user, for example:</p>
<pre dir="ltr">
C:\..\bin&gt; asmca
</pre>
<p>The Configure ASM: Disk Groups page is displayed.</p>
</li>
<li>
<p>On the Configure ASM: Disk Groups page, right-click the disk group in which you want to create the Oracle ADVM volume, then select <span class="bold">Create ACFS for Database Home</span>.</p>
</li>
<li>
<p>In the Create ACFS Hosted Database Home window, enter the following information:</p>
<ul>
<li>
<p>Database Home Volume Name: Enter the name of the database home. The name must be unique in your enterprise, for example: <code dir="ltr">racdb_01</code></p>
</li>
<li>
<p>Database Home Mountpoint: Enter the directory path or logical drive letter for the mountpoint. For example: <code dir="ltr">M:\acfsdisks\racdb_01</code></p>
<p>Make a note of this mountpoint for future reference.</p>
</li>
<li>
<p>Database Home Size (GB): Enter in gigabytes the size you want the database home to be.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> when you have entered the required information.</p>
</li>
</ul>
</li>
<li>
<p>If prompted, run any scripts as directed by ASMCA as the Local Administrator user.</p>
</li>
<li>
<p>During Oracle RAC 11<span class="italic">g</span> Release 2 (11.2) installation, ensure that you or the database administrator who installs Oracle RAC selects for the Oracle home the mountpoint you provided in the Database Home Mountpoint field (in the preceding example, this was <code dir="ltr">M:\acfsdisks\racdb_01</code>).</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot place the Oracle home directory for Oracle Database 11<span class="italic">g</span> Release 1 or earlier releases on Oracle ACFS.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG93000" href="../../server.112/e18951/asmfs_util005.htm#OSTMG93000"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about configuring and managing your storage with Oracle ACFS</div>
</div>
<!-- class="sect1" -->
<a id="CHDIFIBH"></a>
<div id="CWWIN327" class="sect1">
<h2 class="sect1"><span class="secnum">3.11</span> Desupport of Block and Raw Devices<a id="sthref540"></a><a id="sthref541"></a></h2>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and Oracle RAC 11<span class="italic">g</span> Release 2 (11.2), using DBCA or OUI to store Oracle Clusterware or Oracle Database files on raw devices is not supported.</p>
<p>If you upgrade an existing Oracle RAC database, or an Oracle RAC database with Oracle ASM instances, then you can use an existing raw device partition, and perform a rolling upgrade of your existing installation. Performing a new installation using raw devices is not allowed.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2745">
<tr>
<td class="cellalignment2752">
<table class="cellalignment2756">
<tr>
<td class="cellalignment2749"><a href="prewin.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2749"><a href="crswin.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2017,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2754">
<table class="cellalignment2755">
<tr>
<td class="cellalignment2749"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2749"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2749"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2749"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2749"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2749"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
