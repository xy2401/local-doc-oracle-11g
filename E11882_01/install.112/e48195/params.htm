<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Configuring the Server Parameter File in Oracle Real Application Clusters Environments</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1041" />
<meta name="dcterms.created" content="2015-02-05T19:13:54Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Installation Guide" />
<meta name="dcterms.identifier" content="E48195-02" />
<meta name="dcterms.isVersionOf" content="RIWIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="postinst.htm" title="Previous" type="text/html" />
<link rel="Next" href="srvpool.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e48195.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/22</span> <!-- End Header -->
<div id="RIWIN007" class="chapter"><a id="CIHFCHGH"></a>
<h1 class="chapter"><span class="secnum">5</span> Configuring the Server Parameter File in Oracle Real Application Clusters Environments</h1>
<p><a id="sthref303"></a>This chapter describes server parameter file (SPFILE) placement and configuration in Oracle Real Application Clusters (Oracle RAC) environments. This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CJAIAGDI">About Parameter Files and Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHIDAHD">Creating Server Parameter Files for Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHJDJGE">Storage Requirements for the Server Parameter File in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHCJHEB">Parameter File Search Order in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CIHICJBD">Migrating to an SPFILE in Oracle RAC Environments</a></p>
</li>
<li>
<p><a href="#CIHBAIGB">Server Parameter File Errors in Oracle RAC</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD020" href="../../rac.112/e41960/admin.htm#RACAD020"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about parameters, and for a discussion of parallel execution-related parameters in Oracle RAC data warehouse environments</div>
<a id="CJAIAGDI"></a>
<div id="RIWIN701" class="sect1">
<h2 class="sect1"><span class="secnum">5.1</span> About Parameter Files and Oracle RAC</h2>
<p><a id="sthref304"></a><a id="sthref305"></a>Oracle Database uses parameter settings in parameter files to determine how to control various database resources. You can use two types of files for parameter administration: the SPFILE or one or more traditional client-side parameter files (PFILEs). Oracle recommends that you manage parameters using an SPFILE. If you use client-side parameter files, then Oracle does not preserve database or instance parameter changes made for performance tuning after you shut down the instance.</p>
<p>When you create the database, Oracle Database creates an SPFILE. The SPFILE can be stored on an Oracle Automatic Storage Management (Oracle ASM) disk group, a cluster file system, or a shared raw device. The Oracle ASM instance also uses an SPFILE.</p>
<p><a id="sthref306"></a>All instances in the cluster database use the same SPFILE at startup. Because the SPFILE is a binary file, do not directly edit the SPFILE with an editor. Instead, change SPFILE parameter settings using Oracle Enterprise Manager or <code dir="ltr">ALTER SYSTEM</code> SQL statements.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you avoid modifying the values for self-tuning parameters; overriding these settings can affect performance adversely.</div>
<p><a id="sthref307"></a>With Oracle Database 11<span class="italic">g</span> release 2 and later databases, Database Agent automatically maintains the SPFILE based on the value you specify in the command <code dir="ltr">srvctl add/modify</code> <code dir="ltr">database</code> <code dir="ltr">-d</code> <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> <code dir="ltr">-p</code> <code dir="ltr"><span class="codeinlineitalic">spfile</span></code>, where <code dir="ltr"><span class="codeinlineitalic">spfile</span></code> is the full path name of the SPFILE and <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the unique name for your Oracle RAC database. You do not have to create or maintain <code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_SID</span></code><code dir="ltr">.ora</code> files.</p>
<p>The <a id="sthref308"></a>default location of the database SPFILE is:</p>
<pre dir="ltr">
%ORACLE_HOME%\database\SPFILE<span class="italic">%ORACLE_SID%</span>.ORA 
</pre>
<p><a id="sthref309"></a>Using local storage for the default location of the SPFILE is inappropriate for Oracle RAC databases and Oracle ASM instances, because all database instances must use the same SPFILE. See <a href="#CIHJDJGE">"Storage Requirements for the Server Parameter File in Oracle RAC"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN00202" href="../../server.112/e25494/create.htm#ADMIN00202"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about managing and modifying parameter files</div>
</div>
<!-- class="sect1" -->
<a id="CIHIDAHD"></a>
<div id="RIWIN702" class="sect1">
<h2 class="sect1"><span class="secnum">5.2</span> Creating Server Parameter Files for Oracle RAC</h2>
<p>When DBCA is used to create an Oracle RAC database, DBCA creates the SPFILE in either a cluster file system or in the disk group that is assigned for data files depending on whether data files are placed in a cluster file system or in an Oracle ASM disk group.</p>
<p>If you manually create your database, then Oracle recommends that you create an SPFILE from a PFILE.</p>
<p>If you are upgrading from a previous Oracle Database release, then review the section <a href="#CJAIAGDI">"About Parameter Files and Oracle RAC"</a>.</p>
</div>
<!-- class="sect1" -->
<a id="CIHJDJGE"></a>
<div id="RIWIN1033" class="sect1">
<h2 class="sect1"><span class="secnum">5.3</span> Storage Requirements for the Server Parameter File in Oracle RAC</h2>
<p>All instances in an Oracle RAC environment must use the same SPFILE. Place the SPFILE on shared storage, such as in an Oracle ASM disk group, a cluster file system, or on a network file system (NFS). Otherwise, place the SPFILE on a shared raw device that is at least 5 MB, although this is not recommended.</p>
<p><a id="sthref310"></a><a id="sthref311"></a>If you must use a parameter file stored on local storage on each node, then Oracle recommends that you use a PFILE. The PFILE should be located and named as follows:</p>
<pre dir="ltr">
%ORACLE_HOME%\database\init%ORACLE_SID%.ora
</pre>
<p>This path is valid for each instance and it refers to a single, nonshared PFILE. The PFILE should contain an entry similar to one of the following, where <code dir="ltr"><span class="codeinlineitalic">dbname</span></code> is the name of the Oracle RAC database:</p>
<p class="synopsis">Shared storage accessed using the Universal Naming Convention (UNC) format:</p>
<pre dir="ltr">
SPFILE='\\<span class="italic">server</span>\<span class="italic">share</span><span class="italic">_name</span>\<span class="italic">dbname</span>\spfile.ora'
</pre>
<p class="synopsis">Shared storage mapped to a network drive:</p>
<pre dir="ltr">
SPFILE='<span class="italic">X</span>:\<span class="italic">dbname</span>\spfile.ora'
</pre>
<p>The <code dir="ltr">SPFILE</code> entry directs each instance to read from a single, shared SPFILE that is located on shared storage.</p>
</div>
<!-- class="sect1" -->
<a id="CIHCJHEB"></a>
<div id="RIWIN703" class="sect1">
<h2 class="sect1"><span class="secnum">5.4</span> Parameter File Search Order in Oracle RAC</h2>
<p>Oracle RAC searches for your <a id="sthref312"></a>parameter file in the following order:</p>
<ol>
<li>
<p><kbd>%ORACLE_HOME%\database\spfile%ORACLE_SID%.ora</kbd></p>
</li>
<li>
<p><kbd>%ORACLE_HOME%\database\spfile.ora</kbd></p>
</li>
<li>
<p><kbd>%ORACLE_HOME%\database\init%ORACLE_SID%.ora</kbd></p>
</li>
</ol>
<p>If you do not have a shared Oracle home for your Oracle RAC database, then the default locations for the parameter file are not shared. Therefore, you must create a nondefault SPFILE for use with Oracle RAC.</p>
</div>
<!-- class="sect1" -->
<a id="CIHICJBD"></a>
<div id="RIWIN704" class="sect1">
<h2 class="sect1"><span class="secnum">5.5</span> Migrating to an SPFILE in Oracle RAC Environments</h2>
<p><a id="sthref313"></a>If your Oracle RAC database does not use an SPFILE, then you can switch to using an SPFILE by creating and editing a single PFILE using the procedures described in this section.</p>
<ol>
<li>
<p>Create a single PFILEs for all the instances of your Oracle RAC database using the name <code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">dbname</span></code><code dir="ltr">.ora</code> file, where <code dir="ltr"><span class="codeinlineitalic">dbname</span></code> is the name of your Oracle RAC database. The file should be located in the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\database</code> directory.</p>
</li>
<li>
<p>Copy all instance-specific parameter definitions from the PFILEs files using the following syntax, where the variable <code dir="ltr"><span class="codeinlineitalic">sid</span></code> is the <code dir="ltr">ORACLE_SID</code> for the instance:</p>
<pre dir="ltr">
<span class="italic">sid</span>.<span class="italic">parameter</span>=<span class="italic">value</span> 
</pre>
<p>For example, if your Oracle RAC database is named <code dir="ltr">sales</code>, and the values of <code dir="ltr">ORACLE_SID</code> for the instances are <code dir="ltr">sales1</code>, <code dir="ltr">sales2</code>, and so on, then the instance-specific parameters copied from each PFILE would have the following format:</p>
<pre dir="ltr">
sales1.LICENSE_MAX_USERS=<span class="italic">value</span>
sales2.LICENSE_MAX_USERS=<span class="italic">value</span>
...
</pre></li>
<li>
<p>Copy all shared IFILE content <span class="italic">as is</span>. All parameters defined in your IFILEs are global. Any parameters that have the same value for every instance are also global parameters. Therefore, create entries for these parameters in the format <span class="italic">parameter</span>=<span class="italic">value</span>, without <code dir="ltr">ORACLE_SID</code> prefixes.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">IFILE</code> entry in a PFILE is used to embed another parameter file within the current parameter file. These additional parameter files are called IFILEs.</div>
</li>
<li>
<p>Shutdown your Oracle RAC database.</p>
</li>
<li>
<p>Create an SPFILE from the combined PFILE using the <code dir="ltr">CREATE SPFILE</code> statement in SQL*Plus, as shown in the following example, where <code dir="ltr"><span class="codeinlineitalic">dbname</span></code> is the name of the Oracle RAC database and <code dir="ltr"><span class="codeinlineitalic">X:</span></code> represent a shared storage location:</p>
<pre dir="ltr">
CREATE SPFILE='<span class="codeinlineitalic">X</span>:\database\spfile<span class="italic">dbname</span>.ora'
FROM PFILE='%ORACLE_HOME%\database\init<span class="italic">dbname</span>.ora'
</pre>
<p>If you use Oracle ASM for shared storage, then use the following SQL statement to create the SPFILE, where <code dir="ltr"><span class="codeinlineitalic">disk_group_name</span></code> is the name of the Oracle ASM disk group, <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the database unique name, <code dir="ltr"><span class="codeinlineitalic">sid</span></code> is the <code dir="ltr">ORACLE_SID</code> for the Oracle RAC database, <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code> is the Oracle home path, and <code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">dbname</span></code><code dir="ltr">.ora</code> is the file you created in Step 1:</p>
<pre dir="ltr">
CREATE SPFILE='+<span class="italic">disk_group_name</span>\<span class="italic">db_unique_name\</span>spfile<span class="italic">dbname</span>.ora'
FROM PFILE='%ORACLE_HOME%\database\init<span class="italic">dbname</span>.ora'
</pre>
<p>The <code dir="ltr">CREATE SPFILE</code> SQL statement reads the <code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">dbname</span></code><code dir="ltr">.ora</code> file that you created by merging your PFILEs and IFILEs, and then transfers the settings for the parameters from the PFILE into an SPFILE.</p>
</li>
<li>
<p>Update the local <code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code><code dir="ltr">.ora</code> file on each node to contain an <code dir="ltr">SPFILE</code> entry that points to the location of the new SPFILE.</p>
<p>Because the SPFILE is located in a nondefault location, you must start up the database by first using a traditional parameter file that contains a single entry, <code dir="ltr">SPFILE</code>.</p>
</li>
<li>
<p>Start the Oracle RAC database using the <code dir="ltr">STARTUP</code> statement for the database and specify that the local PFILE should be used by the instance. For example, if you have set the environment variables <code dir="ltr">ORACLE_HOME</code> and <code dir="ltr">ORACLE_SID</code> for your Oracle RAC database, then you would use a SQL*Plus statement like the following, where <code dir="ltr">ORACLE_SID</code> is the name of the local Oracle RAC database instance:</p>
<pre dir="ltr">
STARTUP PFILE=%ORACLE_HOME%\database\init%ORACLE_SID%.ora
</pre>
<p>When you use this <code dir="ltr">STARTUP</code> command, then the Oracle Database uses the SPFILE parameter setting in the PFILE to locate the SPFILE in the nondefault location on shared storage.</p>
</li>
<li>
<p>Finally, update the Oracle RAC database configuration so that you do not have to use a local PFILE when starting the database. To update the Oracle RAC database configuration, use the following command to define the location of the new SPFILE, where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the database unique identifier and <code dir="ltr"><span class="codeinlineitalic">spfile</span></code> is the full path name of the SPFILE (the same value you used in Step 5):</p>
<pre dir="ltr">
%ORACLE_HOME%\bin&gt; srvctl modify database -d <span class="italic">db_unique_name</span> -p <span class="italic">spfile</span>
</pre></li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
With Oracle ASM 11<span class="italic">g</span> release 2 and later releases, the SPFILE for the Oracle ASM instance can be stored in Oracle ASM. You can also place an Oracle ASM instance SPFILE on a shared file system, or you can use a traditional client-side PFILE for each Oracle ASM instance.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG" href="../../server.112/e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about administering an Oracle ASM instance</div>
</div>
<!-- class="sect1" -->
<a id="CIHBAIGB"></a>
<div id="RIWIN705" class="sect1">
<h2 class="sect1"><span class="secnum">5.6</span> Server Parameter File Errors in Oracle RAC</h2>
<p>Oracle Database reports errors that occur during <a id="sthref314"></a>SPFILE creation, or while reading the file during startup. If an error occurs during a parameter update, then Oracle records the error in the database alert log file, and ignores subsequent parameter updates to the file. If this happens, then do either of the following:</p>
<ul>
<li>
<p>Shut down the instance, recover the SPFILE, and restart the instance.</p>
</li>
<li>
<p>Enable the instance to continue running without regard for subsequent parameter updates.</p>
</li>
</ul>
<p>Oracle Database displays errors for parameter changes that you attempt when you incorrectly use the <code dir="ltr">ALTER SYSTEM SET</code> statement. Oracle Database does this when an error occurs while reading from or writing to the SPFILE.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD819" href="../../rac.112/e41960/admin.htm#RACAD819"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about backing up the SPFILE</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2786">
<tr>
<td class="cellalignment2795">
<table class="cellalignment2791">
<tr>
<td class="cellalignment2790"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2790"><a href="srvpool.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2798">
<table class="cellalignment2789">
<tr>
<td class="cellalignment2790"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2790"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2790"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2790"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2790"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2790"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
