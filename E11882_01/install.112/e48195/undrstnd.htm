<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Understanding the Oracle Real Application Clusters Installed Configuration</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1041" />
<meta name="dcterms.created" content="2015-02-05T19:13:54Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Installation Guide" />
<meta name="dcterms.identifier" content="E48195-02" />
<meta name="dcterms.isVersionOf" content="RIWIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="srvpool.htm" title="Previous" type="text/html" />
<link rel="Next" href="rem_orcl.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e48195.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/22</span> <!-- End Header -->
<div id="RIWIN006" class="chapter"><a id="BEIHEFDB"></a>
<h1 class="chapter"><span class="secnum">7</span> Understanding the Oracle Real Application Clusters Installed Configuration</h1>
<p><a id="sthref385"></a>This chapter describes the configuration of an Oracle Real Application Clusters (Oracle RAC) installation.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BEIGJCAD">Understanding the Oracle RAC Configuration</a></p>
</li>
<li>
<p><a href="#CIHEFBAD">Understanding Time Zone Settings on Cluster Nodes</a></p>
</li>
<li>
<p><a href="#CIHEBBBF">Working with Multiple Oracle Home Directories on Windows</a></p>
</li>
<li>
<p><a href="#BEIBFAIE">Understanding the Database Components Created by DBCA</a></p>
</li>
<li>
<p><a href="#BEIHICJC">Managing Undo Tablespaces in Oracle RAC</a></p>
</li>
<li>
<p><a href="#BEIIADCC">Using Initialization Parameter Files</a></p>
</li>
<li>
<p><a href="#BEIBJHHJ">Oracle Database Vault Default Audit Policy and Initialization Parameters</a></p>
</li>
<li>
<p><a href="#CIHHBIFI">Understanding Oracle Net Services Configuration Files</a></p>
</li>
<li>
<p><a href="#BEIFFBBI">Using SCAN with Oracle RAC Databases</a></p>
</li>
</ul>
<a id="BEIGJCAD"></a>
<div id="RIWIN601" class="sect1">
<h2 class="sect1"><span class="secnum">7.1</span> Understanding the Oracle RAC Configuration</h2>
<p>Oracle Net Configuration Assistant (NETCA) and Oracle Database Configuration Assistant (DBCA) configure your environment to meet the requirements for database creation and to enable discovery of Oracle RAC databases by Oracle Enterprise Manager.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Configuration files are created on each node of your cluster database.</div>
<p>Avoid changing host names<a id="sthref386"></a><a id="sthref387"></a> after you complete the Oracle RAC installation, including adding or deleting domain qualifications. Node names are created from the host names during an Oracle Clusterware installation and are used extensively with database processes. Nodes with changed host names must be deleted from the cluster and added back with the new host names.</p>
</div>
<!-- class="sect1" -->
<a id="CIHEFBAD"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.2</span> Understanding Time Zone Settings on Cluster Nodes</h2>
<p>Oracle RAC requires that all cluster nodes have the same time zone setting. During an Oracle Clusterware installation, the installation process determines the time zone setting of the owner of the Oracle Grid Infrastructure installation on the node where Oracle Universal Installer (OUI) runs, and uses that time zone value on all of the nodes as the default time zone setting for all processes that Oracle Clusterware manages. This default setting is used for databases, Oracle Automatic Storage Management (Oracle ASM), and any other managed processes.</p>
<p>If you use SQL*Plus to start an instance, then you must ensure that the time zone value used by Oracle RAC is the same as the time zone value configured in Oracle Clusterware for the database. You can change the time zone that Oracle Clusterware uses for a database by running the following command, where <code dir="ltr"><span class="codeinlineitalic">time zone</span></code> is the time zone to which you want to change:</p>
<pre dir="ltr">
srvctl setenv database -T "TZ=<span class="italic">time zone</span>"
</pre></div>
<!-- class="sect1" -->
<a id="CIHEBBBF"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.3</span> Working with Multiple Oracle Home Directories on Windows</h2>
<p><a id="sthref388"></a>Each Oracle product should be installed in its own Oracle home. In other words, each product should be installed into a different directory structure from other Oracle products. The value for <code dir="ltr">%ORACLE_BASE%</code> is stored in the registry (for example, in <code dir="ltr">HKEY_LOCAL_MACHINE\SOFTWARE\ORACLE\HOME0</code>). The values for <code dir="ltr">ORACLE_HOME</code> and <code dir="ltr">ORACLE_SID</code> are also stored in the registry. Symbolic links for these directories, like those used on UNIX platforms, are not supported on Windows platforms.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NTQRF" href="../../win.112/e10845/toc.htm"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for more information about the registry keys</div>
<p>Oracle Universal Installer (OUI) records the values for environment variables such as <code dir="ltr">ORACLE_BASE</code>, <code dir="ltr">ORACLE_HOME</code>, and <code dir="ltr">ORACLE_SID</code> in the registry and also updates the value for the <code dir="ltr">PATH</code> environment variable for the user performing the installation. In Linux and UNIX systems, you must manually set these environment variables in the user session or user profile.</p>
<p>To change the current setting for <code dir="ltr">%ORACLE_HOME%</code> (the default Oracle home), perform the following steps:</p>
<ol>
<li>
<p>Run OUI, release 10.<span class="italic">n</span> or later.</p>
</li>
<li>
<p>Click the <span class="bold">Installed Products</span> button.</p>
</li>
<li>
<p>Click the <span class="bold">Environment</span> tab at the top of the window.</p>
</li>
<li>
<p>Move the Oracle home directory that you want as your default to the top of the list.</p>
</li>
<li>
<p>Apply the changes, and exit the installer.</p>
</li>
</ol>
<p>This procedure changes the value of the default <code dir="ltr">ORACLE_HOME</code> variable in the registry to the value you selected. It also ensures that the <code dir="ltr">%ORACLE_HOME%\bin</code> directories for each product are listed in the correct order in your <code dir="ltr">PATH</code> environment variable.</p>
</div>
<!-- class="sect1" -->
<a id="BEIBFAIE"></a>
<div id="RIWIN604" class="sect1">
<h2 class="sect1"><span class="secnum">7.4</span> Understanding the Database Components Created by DBCA</h2>
<p><a id="sthref389"></a>The <a id="sthref390"></a>database components that DBCA creates <a id="sthref391"></a>include:</p>
<ul>
<li>
<p><a href="#BEIEGGAD">Tablespaces and Data Files</a></p>
</li>
<li>
<p><a href="#BEIFGBJG">Control Files</a></p>
</li>
<li>
<p><a href="#BEIBFCJE">Online Redo Log Files</a></p>
</li>
</ul>
<a id="BEIEGGAD"></a>
<div id="RIWIN1054" class="sect2">
<h3 class="sect2"><span class="secnum">7.4.1</span> Tablespaces and Data Files<a id="sthref392"></a><a id="sthref393"></a><a id="sthref394"></a></h3>
<p>In both single-instance and <a id="sthref395"></a>cluster database environments, an Oracle database is divided into smaller logical areas of space known as <span class="bold">tablespaces</span>. Each <a id="sthref396"></a>tablespace corresponds to one or more <a id="sthref397"></a>data files on the shared storage. <a href="#CIHIHJAD">Table 7-1</a> shows the tablespace names used by an Oracle RAC database and the types of data they contain.</p>
<div id="RIWIN1055" class="tblformalwide">
<p class="titleintable"><a id="sthref398"></a><a id="CIHIHJAD"></a>Table 7-1 Tablespace Names Used with Oracle Real Application Clusters Databases</p>
<table class="cellalignment2793" title="Tablespace Names Used with Oracle Real Application Clusters Databases" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment2787">
<th class="cellalignment2794" id="r1c1-t4">Tablespace Name</th>
<th class="cellalignment2794" id="r1c2-t4">Contents</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">SYSTEM</code><a id="sthref399"></a><a id="sthref400"></a></p>
</td>
<td class="cellalignment2795" headers="r2c1-t4 r1c2-t4">
<p>A mandatory tablespace that consists of the data dictionary, including definitions of tables, views, and stored procedures needed by the database. Oracle Database automatically maintains information in this tablespace.</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">SYSAUX</code><a id="sthref401"></a><a id="sthref402"></a></p>
</td>
<td class="cellalignment2795" headers="r3c1-t4 r1c2-t4">
<p>A mandatory, auxiliary system tablespace that is used by many Oracle Database features and products. This tablespace contains content that was previously stored in the <code dir="ltr">DRSYS</code>, <code dir="ltr">CWMLITE</code>, <code dir="ltr">XDB</code>, <code dir="ltr">ODM</code>, <code dir="ltr">OEM_REPOSITORY</code>, and <code dir="ltr">SYSTEM</code> tablespaces.</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r4c1-t4" headers="r1c1-t4">
<p><code dir="ltr">USERS<a id="sthref403"></a><a id="sthref404"></a></code></p>
</td>
<td class="cellalignment2795" headers="r4c1-t4 r1c2-t4">
<p>An user-created tablespace that consists of application data. As you create and enter data into tables, Oracle Database fills this space with your data.</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r5c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TEMP</code> <a id="sthref405"></a><a id="sthref406"></a><a id="sthref407"></a></p>
</td>
<td class="cellalignment2795" headers="r5c1-t4 r1c2-t4">
<p>A mandatory tablespace that contains temporary tables and indexes created during SQL statement processing. You may have to expand this tablespace if you run SQL statements that involve significant sorting, such as <code dir="ltr">ANALYZE COMPUTE STATISTICS</code> on a very large table, or the constructs <code dir="ltr">GROUP BY</code>, <code dir="ltr">ORDER</code> <code dir="ltr">BY</code>, or <code dir="ltr">DISTINCT</code>.</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r6c1-t4" headers="r1c1-t4">
<p><code dir="ltr">UNDOTBS<a id="sthref408"></a><a id="sthref409"></a></code><span class="italic">n</span></p>
</td>
<td class="cellalignment2795" headers="r6c1-t4 r1c2-t4">
<p>System-managed tablespaces that contain undo data for each instance. Each Oracle RAC instance uses a different value for <span class="italic">n</span> in the tablespace name. These tablespaces are used for automatic undo management.</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r7c1-t4" headers="r1c1-t4">
<p><code dir="ltr">RBS<a id="sthref410"></a><a id="sthref411"></a></code></p>
</td>
<td class="cellalignment2795" headers="r7c1-t4 r1c2-t4">
<p>A system tablespace that contains rollback segments. If you do not use automatic undo management, then you must configure the <code dir="ltr">RBS</code> tablespace. The <code dir="ltr">RBS</code> tablespace should only be used when needed for compatibility with earlier versions of Oracle Database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11085" href="../../server.112/e25494/create.htm#ADMIN11085"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the <code dir="ltr">SYSTEM</code>, <code dir="ltr">SYSAUX</code>, and other tablespaces</div>
<p>You cannot alter these tablespace names if you select a preconfigured database templates, or database configuration type when installing Oracle RAC. However, you can change the names of the tablespaces if you select the Advanced database configuration type during the Oracle RAC installation. See <a href="racinstl.htm#BABIFABA">"Selecting an Oracle Database Configuration Type"</a> for more information about database configuration types.</p>
<p>As mentioned, each tablespace has one or more data files. The data file names created by the preconfigured database configuration types vary by storage type such as Oracle Automatic Storage Management (Oracle ASM), or a file system.</p>
<p>Windows platforms use symbolic link names for the data files and other database files as shown in <a href="#CIHEDFEG">Table 7-2</a>. You can specify different symbolic link names when you select the Advanced database configuration type during installation.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref412"></a><a id="CIHEDFEG"></a>Table 7-2 Symbolic Link Names for Database Files on Windows Platforms</p>
<table class="cellalignment2796" title="Symbolic Link Names for Database Files on Windows Platforms" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment2787">
<th class="cellalignment2794" id="r1c1-t6">Windows Symbolic Link Name</th>
<th class="cellalignment2794" id="r1c2-t6">Tablespace or Other Database File Name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_system<a id="sthref413"></a><a id="sthref414"></a></code></p>
</td>
<td class="cellalignment2795" headers="r2c1-t6 r1c2-t6">
<p><code dir="ltr">SYSTEM</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">db_name_SYSAUX</code></p>
</td>
<td class="cellalignment2795" headers="r3c1-t6 r1c2-t6">
<p><code dir="ltr">SYSAUX</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_users<a id="sthref415"></a><a id="sthref416"></a></code></p>
</td>
<td class="cellalignment2795" headers="r4c1-t6 r1c2-t6">
<p><code dir="ltr">USERS</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_temp<a id="sthref417"></a><a id="sthref418"></a></code></p>
</td>
<td class="cellalignment2795" headers="r5c1-t6 r1c2-t6">
<p><code dir="ltr">TEMP</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code>_<code dir="ltr">undotbs1</code><a id="sthref419"></a><a id="sthref420"></a></p>
</td>
<td class="cellalignment2795" headers="r6c1-t6 r1c2-t6">
<p><code dir="ltr">UNDOTBS1</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r7c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_undotbs2</code><a id="sthref421"></a><a id="sthref422"></a></p>
</td>
<td class="cellalignment2795" headers="r7c1-t6 r1c2-t6">
<p><code dir="ltr">UNDOTBS2</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r8c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_rbs<a id="sthref423"></a><a id="sthref424"></a></code></p>
</td>
<td class="cellalignment2795" headers="r8c1-t6 r1c2-t6">
<p><code dir="ltr">RBS</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r9c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_example</code></p>
</td>
<td class="cellalignment2795" headers="r9c1-t6 r1c2-t6">
<p><code dir="ltr">EXAMPLE</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r10c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_indx<a id="sthref425"></a><a id="sthref426"></a></code></p>
</td>
<td class="cellalignment2795" headers="r10c1-t6 r1c2-t6">
<p><code dir="ltr">INDX</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r11c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_spfile</code><a id="sthref427"></a><a id="sthref428"></a></p>
</td>
<td class="cellalignment2795" headers="r11c1-t6 r1c2-t6">
<p><code dir="ltr">SPFILE</code></p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r12c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_control1</code></p>
</td>
<td class="cellalignment2795" headers="r12c1-t6 r1c2-t6">
<p>First control file</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r13c1-t6" headers="r1c1-t6">
<p><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_control2</code></p>
</td>
<td class="cellalignment2795" headers="r13c1-t6 r1c2-t6">
<p>Second control file</p>
</td>
</tr>
<tr class="cellalignment2787">
<td class="cellalignment2795" id="r14c1-t6" headers="r1c1-t6">
<p><a id="sthref429"></a><a id="sthref430"></a><code dir="ltr"><span class="codeinlineitalic">db_name</span></code><code dir="ltr">_redo</code><code dir="ltr"><span class="codeinlineitalic">instance_number_log_number</span></code></p>
<p>Where <code dir="ltr"><span class="codeinlineitalic">instance_number</span></code> is the number of the instance and <code dir="ltr"><span class="codeinlineitalic">log_number</span></code> is the redo log number (1 or 2).</p>
</td>
<td class="cellalignment2795" headers="r14c1-t6 r1c2-t6">
<p>Online redo log files</p>
<p>Each database instance must have at least two online redo log files. If the database name is <code dir="ltr">db</code>, then the symbolic link names for online redo log files for the first database instance are:</p>
<p><code dir="ltr">db_redo1_1</code></p>
<p><code dir="ltr">db_redo1_2</code></p>
<p>The link names for the online redo log files for the second instance are:</p>
<p><code dir="ltr">db_redo2_1</code></p>
<p><code dir="ltr">db_redo2_2</code><a id="sthref431"></a><a id="sthref432"></a><a id="sthref433"></a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="BEIFGBJG"></a>
<div id="RIWIN1056" class="sect2">
<h3 class="sect2"><span class="secnum">7.4.2</span> Control Files</h3>
<p><a id="sthref434"></a><a id="sthref435"></a>The database is configured with two <a id="sthref436"></a>control files that must be stored on shared storage. Every database must has one unique control file; any additional control files configured for the database are identical copies of the original control file.</p>
<p>If a control file becomes unusable, then the database instance fails when it attempts to access the damaged control file. By multiplexing (creating multiple copies of) a control file on different disks, the database can achieve redundancy and thereby avoid a single point of failure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CNCPT404" href="../../server.112/e40540/physical.htm#CNCPT404"><span class="italic">Oracle Database Concepts</span></a> for more information about the control file</div>
</div>
<!-- class="sect2" -->
<a id="BEIBFCJE"></a>
<div id="RIWIN1057" class="sect2">
<h3 class="sect2"><span class="secnum">7.4.3</span> Online Redo Log Files</h3>
<p><a id="sthref437"></a><a id="sthref438"></a>Each database instance must have at least two online <a id="sthref439"></a>redo log files. The online redo log files for a database instance are called the <span class="bold">redo thread</span>. Each Oracle RAC database instance has its own redo thread to avoid contention for a single set of online redo log files. In case of instance failure, the online redo log files must be accessible by the surviving instances. Therefore, the online redo log files for an Oracle RAC database must be placed on shared storage or Oracle ASM. If you use a file system for storage, then the file system must be a shared or cluster file system.</p>
<p>The generated file names created by the preconfigured database configuration types for the online redo log files can vary depending on the type of storage used. Unless you are using a cluster file system or Oracle ASM, during installation or database creation, you must specify a raw device name for the storage location of each online redo log file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT11302" href="../../server.112/e40540/physical.htm#CNCPT11302"><span class="italic">Oracle Database Concepts</span></a> for more information about the online redo log files</p>
</li>
<li>
<p><a class="olink RACAD704" href="../../rac.112/e41960/storage.htm#RACAD704"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about storage for online redo log files</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BEIHICJC"></a>
<div id="RIWIN605" class="sect1">
<h2 class="sect1"><span class="secnum">7.5</span> Managing Undo Tablespaces in Oracle RAC</h2>
<p><a id="sthref440"></a><a id="sthref441"></a>Oracle Database stores rollback or undo information in <a id="sthref442"></a>undo tablespaces. To manage undo tablespaces, Oracle recommends that you use <a id="sthref443"></a><a id="sthref444"></a><span class="bold">automatic undo management</span>, which is an automated management mode for the undo tablespace that makes the undo tablespace easier to administer.</p>
<p>When Oracle ASM and Oracle Managed Files (OMF) are used along with automatic undo management, an instance that is started for the first time, and thus does not have an undo tablespace, has its undo tablespace created for it by another instance automatically. The same is also true for online redo logs.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11461" href="../../server.112/e25494/undo.htm#ADMIN11461"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about automatic undo management</p>
</li>
<li>
<p><a class="olink RACAD705" href="../../rac.112/e41960/storage.htm#RACAD705"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about managing undo tablespaces</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BEIIADCC"></a>
<div id="RIWIN606" class="sect1">
<h2 class="sect1"><span class="secnum">7.6</span> Using Initialization Parameter Files</h2>
<p><a id="sthref445"></a><a id="sthref446"></a><a id="sthref447"></a>Oracle recommends that you use a <a id="sthref448"></a>server parameter file (SPFILE) for storing Oracle Database initialization parameters. Oracle recommends that you store all SPFILEs on Oracle ASM, including the Oracle ASM SPFILE. SPFILEs must be located on shared storage so that all instances in a cluster database can access this parameter file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="params.htm#CIHFCHGH">Chapter 5, " Configuring the Server Parameter File in Oracle Real Application Clusters Environments"</a> for more information about the creation and use of parameter files</div>
</div>
<!-- class="sect1" -->
<a id="BEIBJHHJ"></a>
<div id="RIWIN1058" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.7</span> Oracle Database Vault Default Audit Policy and Initialization Parameters</h2>
<p>Oracle Database Vault installs a baseline database auditing policy. This policy covers the access control configuration information stored in Oracle Database Vault tables, information stored in the Oracle data dictionary (rollback segments, tablespaces, and so on), the use of system privileges, and Oracle Label Security configuration. When you install Oracle Database Vault, the security specific database initialization parameters are initialized with default values.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DVADM018" href="../../server.112/e23090/dv_impact.htm#DVADM018"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for more information about how installing Oracle Database Vault affects the Oracle RAC database configuration</div>
</div>
<!-- class="sect1" -->
<a id="CIHHBIFI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.8</span> Understanding Oracle Net Services Configuration Files</h2>
<p>Networking elements for the Oracle Database server and clients are preconfigured for most environments. The Easy Connect naming method is enabled by default and does not require a repository. If you use a naming method other than Easy Connect, then additional configuration of Oracle Net Services may be required.</p>
<p>The following sections the Oracle Net Services configuration for an Oracle RAC database:</p>
<ul>
<li>
<p><a href="#BEIHGBAD">Configuring the Listener Configuration File (listener.ora)</a></p>
</li>
<li>
<p><a href="#BEICCHHC">Net Service Names (tnsnames.ora File)</a></p>
</li>
<li>
<p><a href="#BEIHCDFC">Net Services Profile (sqlnet.ora File)</a></p>
</li>
</ul>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref449"></a>
<h3 class="sect2"><span class="secnum">7.8.1</span> Database Services for an Oracle RAC Database</h3>
<p><a id="sthref450"></a>Each database is represented by one or more services. A service is identified by a service name, for example, <code dir="ltr">sales.example.com</code>. A client uses a service name to identify the database it must access. The information about the database service and its location in the network is transparent to the client.</p>
<p><a id="sthref451"></a><a id="sthref452"></a>The information needed to use a service name to create a database connection is stored in a repository, which is represented by one or more naming methods. A <span class="bold">naming method</span> is a resolution method used by a client application to resolve a connect identifier (such as the service name) to a connect descriptor when attempting to connect to a database service. Oracle Net Services offers several types of naming methods that support localized configuration on each client, or centralized configuration that can be accessed by all clients in the network.</p>
<p><a id="sthref453"></a><a id="sthref454"></a>An Oracle Database 11<span class="italic">g</span> release 2 (11.2) database service automatically registers with the listeners specified in the <code dir="ltr">LOCAL_LISTENER</code> and <code dir="ltr">REMOTE_LISTENER</code> parameters. During registration, PMON sends information such as the service name, instance names, and workload information to the listeners. This feature is called <span class="bold">service registration</span></p>
<p>Services coordinate their sessions by registering their <span class="bold">workload</span>, or the amount of work they are currently handling, with the local listener and the SCAN listeners. Clients are redirected by the SCAN listener to a local listener on the least-loaded node that is running the instance for a particular service. This feature is called <span class="bold">load balancing</span>. The local listener either directs the client to a dispatcher process (if the database was configured for shared server), or directs the client to a dedicated server process.</p>
<p>When a <a id="sthref455"></a><a id="sthref456"></a>listener starts after the Oracle instance starts, and the listener is available for service registration, registration does not occur until the next time the Oracle Database process monitor (PMON) starts its discovery routine. By default, the PMON discovery routine is started every 60 seconds. To override the 60-second delay, use the SQL statement <code dir="ltr">ALTER SYSTEM REGISTER</code>. This statement forces PMON to register the service immediately.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you create a script to run this statement immediately after starting the listener. If you run this statement when the instance is registered are services are currently registered, or while the listener is down, then the statement has no effect.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG1080" href="../../network.112/e41945/net_arch.htm#NETAG1080"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about service registration</div>
</div>
<!-- class="sect2" -->
<a id="BEIHGBAD"></a>
<div id="RIWIN608" class="sect2">
<h3 class="sect2"><span class="secnum">7.8.2</span> Configuring the Listener Configuration File (listener.ora)</h3>
<p><a id="sthref457"></a>You can configure Oracle Net Services and listeners as described in the following sections:</p>
<ul>
<li>
<p><a href="#BEIHBEJC">Grid Naming Service and Listeners</a></p>
</li>
<li>
<p><a href="#BEICFAIC">Local Listeners</a></p>
</li>
<li>
<p><a href="#BEIDJJAG">Configuring Multiple Listeners for Your Database Using DBCA</a></p>
</li>
<li>
<p><a href="#BEIDCAIH">How Oracle Database Uses the Listener File (listener.ora)</a></p>
</li>
</ul>
<a id="BEIHBEJC"></a>
<div id="RIWIN1061" class="sect3">
<h4 class="sect3"><span class="secnum">7.8.2.1</span> Grid Naming Service and Listeners</h4>
<p>If you enable GNS, then you do not have to manually configure the listener.</p>
<p>In GNS configurations, there is one GNS daemon for the cluster. Service requests to the cluster domain that GNS manages are routed to the GNS VIP address, which routes these requests to the GNS daemon.</p>
<p>The GNS daemon listens for registrations. When a SCAN VIP starts on a node, it registers its addresses with GNS. When GNS receives a request from a DNS for the SCAN, it returns the registered addresses to the DNS.</p>
</div>
<!-- class="sect3" -->
<a id="BEICFAIC"></a>
<div id="RIWIN1062" class="sect3">
<h4 class="sect3"><span class="secnum">7.8.2.2</span> Local Listeners</h4>
<p><a id="sthref458"></a><a id="sthref459"></a><a id="sthref460"></a>Starting with Oracle Database 11<span class="italic">g</span> release 2 (11.2), the local listener, or default listener, is located in the Grid home when you have Oracle Grid Infrastructure installed. The <code dir="ltr">listener.ora</code> file is located in the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\network\admin</code> directory. You can use a non-default location for the <code dir="ltr">listener.ora</code> file by setting the <code dir="ltr">TNS_ADMIN</code> environment variable or registry value to point to the directory that contains the Oracle Net Services configuration files.</p>
<p><a id="sthref461"></a><a id="sthref462"></a>During Oracle Database creation, the <code dir="ltr">LOCAL_LISTENER</code> parameter is automatically configured to point to the local listener for the database. The Database Agent process (<code dir="ltr">oraagent.exe</code>, previously known as <code dir="ltr">racgimon</code>) sets the <code dir="ltr">LOCAL_LISTENER</code> parameter to a connect descriptor that does not require an Oracle Net service name.</p>
<p><a id="sthref463"></a>You can set a value manually for <code dir="ltr">LOCAL_LISTENER</code>. If you set <code dir="ltr">LOCAL_LISTENER</code>, then the Database Agent process does not automatically update this value. Oracle recommends that you leave the parameter unset so that the Database Agent process can maintain it automatically. If you do not set <code dir="ltr">LOCAL_LISTENER</code>, then the Database Agent process automatically updates the database associated with the local listener in the Grid home, even when the ports or IP address of that listener are changed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BEICCHHC">"Net Service Names (tnsnames.ora File)"</a> for more information about listener associations defined in the <code dir="ltr">tnsnames.ora</code> file</p>
</li>
<li>
<p><a class="olink NETRF292" href="../../network.112/e10835/listener.htm#NETRF292"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about the <code dir="ltr">listener.ora</code> file</p>
</li>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for information about understanding and configuring listeners</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BEIDCAIH"></a>
<div id="RIWIN1064" class="sect3">
<h4 class="sect3"><span class="secnum">7.8.2.3</span> How Oracle Database Uses the Listener File (listener.ora)</h4>
<p><a id="sthref464"></a><a id="sthref465"></a><a id="sthref466"></a><a id="sthref467"></a>Local listeners are configured to respond to database connection requests, and to nondatabase connection requests, such as external procedures or Oracle XML Database (XDB) requests. The <code dir="ltr">listener.ora</code> file is the configuration file for a listener. It can include the protocol addresses it is accepting connection requests on, a list of the database and nondatabase services it is listening for, and control parameters used by the listener. You can modify the configuration of the listeners used by Oracle Clusterware and Oracle RAC with Server Control Utility (SRVCTL) commands, or by using NETCA. Manual editing of the <code dir="ltr">listener.ora</code> file is not required.</p>
<p>Before you install Oracle RAC, during the Oracle Grid Infrastructure installation, NETCA creates and starts a default listener in the Grid home called <code dir="ltr">LISTENER</code>. The listener is configured with default protocol listening addresses. The listener is configured to respond to connection requests that are directed to one protocol address specified during installation.</p>
<p><a id="sthref468"></a><a id="sthref469"></a>During the Oracle RAC installation, the Oracle RAC database uses the listener in the Grid home, and configures service information about the Oracle RAC database. The database services are registered automatically and do not require configuration in the <code dir="ltr">listener.ora</code> file. Dynamic service registration eliminates the need for static configuration of database services. However, static service configuration is required if you plan to use Oracle Enterprise Manager.</p>
<p>Each listener is configured with one or more protocol addresses that specify its listening endpoints. The protocol address defines the protocol the listener listens on, and any other protocol specific information, such as the address, host, and port. Starting with Oracle Database 11<span class="italic">g</span> release 2, the <code dir="ltr">listener.ora</code> file now contains only an IPC key and the following information:</p>
<pre dir="ltr">
(ADDRESS = (PROTOCOL=TCP)(HOST=)(PORT=1521))
</pre>
<p>In the previous example, the protocol <code dir="ltr">ADDRESS</code> refers implicitly to the <code dir="ltr">HOST</code> endpoint of the local node. The <code dir="ltr">listener.ora</code> file is the same on every node for an Oracle RAC database. Listening endpoints, such as the port numbers, are dynamically registered with the listener.</p>
<div class="example">
<p class="titleinexample"><a id="sthref470"></a>Example 7-1 Example <code dir="ltr">listener.ora</code> File for an Oracle RAC Node</p>
<p>The following is an example <code dir="ltr">listener.ora</code> file as it would appear after installation, with an entry for a node named <code dir="ltr">node1</code> and a SCAN listener.</p>
<pre dir="ltr">
LISTENER_SCAN1=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC)(KEY=LISTENER_
SCAN1))))               # line added by Agent
LISTENER_NODE1=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=IPC) (KEY=LISTENER))))
          # line added by Agent
# listener.ora.mycluster Network Configuration File:
C:\app\oracle\product\11.2.0\dbhome_1\network\admin\listener.ora.mycluster
# Generated by Oracle configuration tools.
 
LISTENER_NODE1 =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  )
 
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LISTENER_NODE1=ON              # line added by Agent
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LISTENER_SCAN2=ON              # line added by Agent
ENABLE_GLOBAL_DYNAMIC_ENDPOINT_LISTENER_SCAN1=ON              # line added by Agent
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<a id="BEIDJJAG"></a>
<div id="RIWIN1063" class="sect3">
<h4 class="sect3"><span class="secnum">7.8.2.4</span> Configuring Multiple Listeners for Your Database Using DBCA</h4>
<p>It is possible to configure multiple listeners, each with unique name, in one listener.ora file. Multiple listener configurations are possible because each of the top-level configuration parameters has a suffix of the listener name or is the listener name itself.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends running only one listener for each node in most customer environments.</div>
<p>You can use DBCA to configure which listeners your Oracle RAC database registers with. If DBCA detects more than one listener on a node, then it displays a list of the listeners. You can select one or all of these listeners with which to register your database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To administer Oracle Database 11<span class="italic">g</span> release 2 (11.2) local and SCAN listeners using the <code dir="ltr">lsnrctl</code> command, set your <code dir="ltr">ORACLE_HOME</code> environment variable to the path for the Grid home. Do not attempt to use the <code dir="ltr">lsnrctl</code> commands from Oracle home locations for earlier releases, because they cannot be used with Oracle Database 11<span class="italic">g</span> release 2 (11.2).</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BEICCHHC"></a>
<div id="RIWIN610" class="sect2">
<h3 class="sect2"><span class="secnum">7.8.3</span> Net Service Names (tnsnames.ora File)</h3>
<p><a id="sthref471"></a><a id="sthref472"></a><a id="sthref473"></a>A <code dir="ltr">tnsnames.ora</code> file is created on each node and acts as a repository of net service names. Each net service name is associated with a connect identifier. A <span class="bold">connect identifier</span> is an identifier that maps a user-defined name to a connect descriptor. A connect descriptor contains the following information:</p>
<ul>
<li>
<p>The network route to the service, including the location of the listener through a protocol address</p>
</li>
<li>
<p>The <code dir="ltr">SERVICE_NAME</code> parameter, with the value set to the name of a database service</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">SERVICE_NAME</code> parameter you use in the <code dir="ltr">tnsnames.ora</code> file is singular, because you can specify only one service name. There is also the <code dir="ltr">service_names</code> parameter in the database initialization file. The <code dir="ltr">service_names</code> database parameter defaults to the global database name, a name comprising the <code dir="ltr">db_name</code> and <code dir="ltr">db_domain</code> parameters in the initialization parameter file.</div>
</li>
</ul>
<div class="example">
<p class="titleinexample"><a id="sthref474"></a>Example 7-2 Example <code dir="ltr">tnsnames.ora</code> File</p>
<p>The following is an example of a <code dir="ltr">tnsnames.ora</code> file. It contains a single net service name entry. The connect identifier for the net service name is <code dir="ltr">sales</code>. The database service associated with the <code dir="ltr">sales</code> connect identifier is <code dir="ltr">myApp</code>. The connect descriptor is the information in the line that starts with <code dir="ltr">ADDRESS</code>.</p>
<pre dir="ltr">
#  tnsnames.ora Network Configuration File:
C:\app\grid\11.2.0\network\admin\tnsnames.ora
#  Generated by Oracle configuration tools.

sales =
 (DESCRIPTION =
   (ADDRESS = (PROTOCOL = TCP)(HOST = myscan.mycluster.example.com)(PORT = 1522))
      (CONNECT_DATA =
        (SERVER = DEDICATED)
        (SERVICE_NAME = myApp)
    )
  )
</pre></div>
<!-- class="example" -->
<p>The <code dir="ltr">tnsnames.ora</code> file is located in both the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">\network\admin</code> and <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\network\admin</code> directories. By default, the <code dir="ltr">tnsnames.ora</code> file is read from the Grid home when Oracle Grid Infrastructure is installed.</p>
<div class="example">
<p class="titleinexample"><a id="sthref475"></a>Example 7-3 Example <code dir="ltr">tnsnames.ora</code> Entry for an Oracle RAC Database</p>
<p>The following is an example of a net service name stored in the tnsnames.ora file for an Oracle RAC 11<span class="italic">g</span> release 2 (11.2) database after installation, where the database name is <code dir="ltr">RACDB</code>, the cluster name is <code dir="ltr">mycluster</code>, and GNS is configured for the cluster:</p>
<pre dir="ltr">
RACDB =
   (DESCRIPTION = 
     (ADDRESS = (PROTOCOL = TCP)(HOST=myscan.mycluster.example.com)(PORT=1521))
     (CONNECT_DATA =
       (SERVER = DEDICATED)
       (SERVICE_NAME = RACDB)
      )
    )
</pre></div>
<!-- class="example" -->
<p><a id="sthref476"></a>With <a id="sthref477"></a><a id="sthref478"></a>Oracle Clusterware 11<span class="italic">g</span> release 2 and later, the listener association no longer requires <code dir="ltr">tnsnames.ora</code> file entries. The listener associations are configured as follows:</p>
<ul>
<li>
<p>DBCA no longer sets the <code dir="ltr">LOCAL_LISTENER</code> parameter. The Oracle Clusterware agent that starts the database sets the <code dir="ltr">LOCAL_LISTENER</code> parameter dynamically, and it sets it to the actual value, not an alias. So <code dir="ltr">listener_</code><code dir="ltr"><span class="codeinlineitalic">alias</span></code> entries are no longer needed in the <code dir="ltr">tnsnames.ora</code> file.</p>
</li>
<li>
<p>The <code dir="ltr">REMOTE_LISTENER</code> parameters is configured by DBCA to reference the SCAN and SCAN port, without any need for a <code dir="ltr">tnsnames.ora</code> entry. Oracle Clusterware uses the Easy Connect naming method with <code dir="ltr"><span class="codeinlineitalic">scanname</span></code>:<code dir="ltr"><span class="codeinlineitalic">scanport</span></code>, so no listener associations for the <code dir="ltr">REMOTE_LISTENER</code> parameter are needed in the <code dir="ltr">tnsnames.ora</code> file.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG302" href="../../network.112/e41945/listenercfg.htm#NETAG302"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about the <code dir="ltr">tnsnames.ora</code> file</div>
<p><a id="sthref479"></a>DBCA creates net service names for connections as described in the following sections:</p>
<ul>
<li>
<p><a href="#BEIGCIJF">Net Service Names for Database Connections</a></p>
</li>
<li>
<p><a href="#BEIBHCIG">Net Service Name for Instance Connections</a></p>
</li>
</ul>
<a id="BEIGCIJF"></a>
<div id="RIWIN1066" class="sect3">
<h4 class="sect3"><span class="secnum">7.8.3.1</span> Net Service Names for Database Connections</h4>
<p>Clients that connect to any instance of the database should use SCAN in the connect descriptor. You could also use a net service name to connect to the database. The net service name created by DBCA enables Oracle Enterprise Manager to discover an Oracle RAC database.</p>
<p><a id="sthref480"></a>Three SCAN addresses are configured for the cluster, and allocated to servers. When a client issues a connection request using SCAN, the three SCAN addresses are returned to the client. If the first address fails, then the connection request to the SCAN name fails over to the next address. Using multiple addresses allows a client to connect to an instance of the database even if the initial instance has failed.</p>
<div class="example">
<p class="titleinexample"><a id="sthref481"></a>Example 7-4 Sample Net Service Name Entry for a Database Connection</p>
<p>This example shows a connect descriptor that is used in a <code dir="ltr">tnsnames.ora</code> file. The connect identifier in this case is the same as the database name, <code dir="ltr">mycluster.example.com</code>. Instead of specifying an individual server, virtual Internet Protocol (VIP) address, or cluster node name, the connect descriptor uses SCAN, which is <code dir="ltr">myscan.mycluster.example.com</code>.</p>
<p>Connections that use the net service name <code dir="ltr">mycluster.example.com</code> are connected to any of the database instances of the <code dir="ltr">mycluster</code> database that runs the <code dir="ltr">myApp</code> database service.</p>
<pre dir="ltr">
mycluster.example.com =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = host=myscan.mycluster.example.com)
      (PORT = 1522))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = myApp)
    )
  )
</pre></div>
<!-- class="example" -->
<p>The net service name does not need to know the physical address of the server on which the database, database instance, or listener runs. SCAN is resolved by DNS, which returns three IP addresses to the client. The client then tries each address in succession until a connection is made.</p>
<div class="example">
<p class="titleinexample"><a id="CIHJFJAD"></a>Example 7-5 Connecting to Oracle RAC Using the Easy Connect Naming Method</p>
<p>Clients can use SCAN and the Easy Connect naming method to connect to an Oracle RAC database without configuring the <code dir="ltr">tnsnames.ora</code> file. If the Oracle RAC database runs on a cluster for which SCAN is <code dir="ltr">myscan.mycluster.example.com</code>, then you could use a connection request for the database service <code dir="ltr">RACDB.example.com</code> using a connect descriptor similar to the following:</p>
<pre dir="ltr">
<span class="codeinlineitalic">username</span>/@myscan.mycluster.example.com:1521/RACDB.example.com
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<a id="BEIBHCIG"></a>
<div id="RIWIN1067" class="sect3">
<h4 class="sect3"><span class="secnum">7.8.3.2</span> Net Service Name for Instance Connections</h4>
<p>Clients that connect to a particular instance of the database use the net service name for the instance. The <code dir="ltr">tnsnames.ora</code> entry in <a href="#CIHCFGAG">Example 7-6</a> enables Oracle Enterprise Manager to discover the database instances in the cluster. These entries are also used to start and stop instances.</p>
<div class="example">
<p class="titleinexample"><a id="CIHCFGAG"></a>Example 7-6 Sample Net Service Name Entry for an Instance Connection</p>
<p>This example shows a net service name that is used to connect to a specific database instance. The connect identifier is the same as the instance name, <code dir="ltr">mycluster1.example.com</code>. The connect descriptor uses SCAN to locate the instance. Connections that use the net service name <code dir="ltr">mycluster1.example.com</code> are connected to the <code dir="ltr">mycluster1</code> database instance of the <code dir="ltr">mycluster</code> database, without needing to know on which node the instance is running.</p>
<pre dir="ltr">
mycluster1.example.com=
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=TCP)(HOST=myscan.mycluster.example.com)(PORT=1521))
    (CONNECT_DATA=
      (SERVICE_NAME=mycluster.example.com)
      (INSTANCE_NAME=mycluster1)
    )
  )
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BEIHCDFC"></a>
<div id="RIWIN611" class="sect2">
<h3 class="sect2"><span class="secnum">7.8.4</span> Net Services Profile (sqlnet.ora File)</h3>
<p><a id="sthref482"></a><a id="sthref483"></a><a id="sthref484"></a><a id="sthref485"></a><a id="sthref486"></a>OUI starts NETCA after the database is created. NETCA creates the Oracle Net Services profile, or the <code dir="ltr">sqlnet.ora</code> file. In an Oracle Grid Infrastructure installation, the <code dir="ltr">sqlnet.ora</code> file is located in the following directory by default:</p>
<pre dir="ltr">
<span class="italic">Grid_home</span>\network\admin
</pre>
<p>In the <code dir="ltr">%ORACLE_HOME%\network\admin</code> directory, in addition to a default <code dir="ltr">sqlnet.ora</code> file, you also can find a sample <code dir="ltr">sqlnet.ora</code> file in the subdirectory <code dir="ltr">sample</code>.</p>
<p>During installation, NETCA creates the following entries in the <code dir="ltr">sqlnet.ora</code> file, where <code dir="ltr">%ORACLE_BASE%</code> is the path to the Oracle base directory for the Oracle RAC installation:</p>
<pre dir="ltr">
SQLNET.AUTHENTICATION_SERVICES= (NTS)
NAMES.DIRECTORY_PATH=(TNSNAMES, EZCONNECT)
ADR_BASE =%ORACLE_BASE%
</pre>
<p><a id="sthref487"></a><a id="sthref488"></a><a id="sthref489"></a><a id="sthref490"></a><a id="sthref491"></a><a id="sthref492"></a>The <code dir="ltr">AUTHENTICATION_SERVICES</code> parameter specifies the method by which users are authenticated for database access. The value <code dir="ltr">NTS</code> indicates that Microsoft Windows native operating system authentication should be used to authorize access to the database. The parameter <code dir="ltr">NAMES.DIRECTORY_PATH</code> specifies the priority order of the naming methods to use to resolve connect identifiers to connect descriptors. The <code dir="ltr">ADR_BASE</code> parameter specifies the base directory into which tracing and logging incidents are stored when Automatic Diagnostic Repository (ADR) is enabled for the database.</p>
<p>The Easy Connect naming method eliminates the need to lookup service names in the <code dir="ltr">tnsnames.ora</code> files for TCP/IP environments. With Easy Connect, clients use a connect string for a simple TCP/IP address, consisting of a host name and optional port and service name. If you use this method, then no naming or directory system is required. See <a href="#CIHJFJAD">Example 7-5, "Connecting to Oracle RAC Using the Easy Connect Naming Method"</a> for an example.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about the <code dir="ltr">sqlnet.ora</code> file</p>
</li>
<li>
<p><a class="olink CNCPT1556" href="../../server.112/e40540/cmntopc.htm#CNCPT1556"><span class="italic">Oracle Database Concepts</span></a> for more information about authentication</p>
</li>
<li>
<p><a class="olink NTCLI004" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=NTCLI004"><span class="italic">Oracle Database Client Installation Guide for Microsoft Windows</span></a> for more information about configuring clients for database connectivity</p>
</li>
<li>
<p><a class="olink ADMIN11261" href="../../server.112/e25494/diag.htm#ADMIN11261"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about ADR</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BEIFFBBI"></a>
<div id="RIWIN607" class="sect1">
<h2 class="sect1"><span class="secnum">7.9</span> Using SCAN with Oracle RAC Databases</h2>
<p><a id="sthref493"></a>Oracle RAC databases provide the important benefits of <a id="sthref494"></a>connection load balancing and failover. Standalone Oracle databases perform <a id="sthref495"></a>load balancing by distributing connections among the shared server dispatcher processes.</p>
<p><a id="sthref496"></a><a id="sthref497"></a>Oracle RAC databases increase load balancing by using the single client access name (SCAN) for the cluster to balance connections among all instances in a cluster database. SCAN also adds location independence for the databases, so that client configuration does not have to depend on which nodes are running a particular database or database instance.</p>
<p>Review the following sections to understand Oracle RAC load-balancing features:</p>
<ul>
<li>
<p><a href="#CIHJHIGC">Understanding SCAN</a></p>
</li>
<li>
<p><a href="#CIHHBDJJ">Understanding SCAN Listeners and Listener Registration</a></p>
</li>
<li>
<p><a href="#BEIFHHBE">Understanding Failover, Load Balancing, and SCAN</a></p>
</li>
<li>
<p><a href="#BEIGGFAD">Understanding Shared Server Use in an Oracle RAC Database</a></p>
</li>
</ul>
<a id="CIHJHIGC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.1</span> Understanding SCAN</h3>
<p>SCAN is a fully qualified name (<span class="italic">host name.</span><span class="italic">domain name</span>) that is configured to resolve to all the addresses allocated for the SCAN listeners. The default value for SCAN is <code dir="ltr"><span class="codeinlineitalic">cluster_name</span></code>.<code dir="ltr"><span class="codeinlineitalic">GNS_sub_domain</span></code>, or, <code dir="ltr"><span class="codeinlineitalic">cluster_name</span></code><code dir="ltr">-scan.</code><code dir="ltr"><span class="codeinlineitalic">domain_name</span></code> if GNS is not used. For example, in a cluster that does not use GNS, if your cluster name is <code dir="ltr">salesRAC</code>, and your domain is <code dir="ltr">example.com</code>, then the default SCAN address is <code dir="ltr">salesRAC-scan.example.com:1521</code>.</p>
<p>SCAN is configured in DNS to resolve to three IP addresses, and DNS should return the addresses using a round-robin algorithm. This means that when SCAN is resolved by DNS, the IP addresses are returned to the client in a different order each time.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Configuring SCAN in DNS using a round-robin algorithm does not ensure failover of connections. Instead, failover of connections is handled by the Oracle Client. Oracle recommends that you use Oracle Client 11<span class="italic">g</span> release 2 for connections that use SCAN.</div>
<p>SCAN provides location independence for the databases, so that the client configuration does not have to include the address of each node that hosts a particular database or database instance. For example, if you configure policy-managed server pools for a cluster, then SCAN enables connections to databases in these server pools regardless of which nodes are allocated to the server pool.</p>
<p>During the installation of Oracle Grid Infrastructure, several Oracle Clusterware resources are created for SCAN:</p>
<ul>
<li>
<p>A SCAN VIP is created for each IP address that SCAN resolves to</p>
</li>
<li>
<p>A SCAN listener is created for each SCAN VIP</p>
</li>
<li>
<p>A dependency on the SCAN VIP is configured for the SCAN listener</p>
</li>
</ul>
<p><a id="sthref498"></a><a id="sthref499"></a><a id="sthref500"></a>SCAN VIPs function like node VIPs, except that SCAN VIPs can run on any node in the cluster. Also, if you have three SCAN VIPs but only two nodes in your cluster, you can have two SCAN VIPs running on the same server. Clients (users or applications) that connect using SCAN instead of the node VIPs do not have to update the list of VIP addresses in their local <code dir="ltr">tnsnames.ora</code> file when nodes are added to or removed from the cluster.</p>
</div>
<!-- class="sect2" -->
<a id="CIHHBDJJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.2</span> Understanding SCAN Listeners and Listener Registration</h3>
<p><a id="sthref501"></a>During Oracle Grid Infrastructure installation, SCAN listeners are created for as many IP addresses as there are addresses assigned to resolve to the SCAN. Oracle recommends that the SCAN resolves to three addresses, to provide high availability and scalability. If the SCAN resolves to three addresses, then there are three SCAN listeners created.</p>
<p>The addresses for the SCAN listeners resolve with either the domain name service (DNS), or within the cluster for the Grid Naming Service (GNS), using a round-robin method. SCAN listeners can run on any node in the cluster.</p>
<p>The database parameter <code dir="ltr">LOCAL_LISTENER</code> specifies the listening endpoint of the local database listener, and the database parameter <code dir="ltr">REMOTE_LISTENER</code> parameter identifies the SCAN listeners. <a id="sthref502"></a>The database registers with the local and SCAN listeners by using the connect description information contained in these parameters. Oracle Database 11<span class="italic">g</span> release 2 and later instances only register with SCAN listeners as remote listeners. Upgraded databases register with SCAN listeners as remote listeners, and also continue to register with all node listeners.</p>
<p>Starting with Oracle Database 11<span class="italic">g</span> release 2, the <code dir="ltr">REMOTE_LISTENER</code> parameter is always set to the SCAN address. Do not set it to an Oracle Net alias that has a single address that uses SCAN for the host name (<code dir="ltr">HOST=</code><code dir="ltr"><span class="codeinlineitalic">scan</span></code>). For example, if SCAN for the cluster is <code dir="ltr">myscan</code>, and the GNS subdomain for the cluster is <code dir="ltr">mycluster.example.com</code>, then the <code dir="ltr">REMOTE_LISTENER</code> parameter has the following value:</p>
<pre dir="ltr">
myscan.mycluster.example.com:1521
</pre>
<p>The <a id="sthref503"></a><a id="sthref504"></a><a id="sthref505"></a><a id="sthref506"></a>Database Agent process (previously known as <code dir="ltr">racgimon</code>) configures the <code dir="ltr">LOCAL_LISTENER</code> initialization parameter automatically for Oracle RAC databases by specifying a connect descriptor for the node VIP address of the local node. You do not have to alter this setting. The <code dir="ltr">REMOTE_LISTENER</code><a id="sthref507"></a><a id="sthref508"></a><a id="sthref509"></a> parameter should be set to the SCAN and SCAN port. If you change the SCAN port, then you must change the value for the <code dir="ltr">REMOTE_LISTENER</code> parameter using the SQL statement <code dir="ltr">ALTER SYSTEM SET REMOTE_LISTENER</code>.</p>
</div>
<!-- class="sect2" -->
<a id="BEIFHHBE"></a>
<div id="RIWIN1059" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">7.9.3</span> Understanding Failover, Load Balancing, and SCAN</h3>
<p>Oracle RAC provides <a id="sthref510"></a>failover with the node VIP addresses by configuring multiple listeners on multiple nodes to manage client connection requests for the same database service. If a node fails, then the service connecting to the VIP is relocated transparently to a surviving node, enabling fast notification of the failure to the clients connecting through the VIP. If the application and client are configured with transparent application failover options, then the client is reconnected to the surviving node.</p>
<p><a id="sthref511"></a>Clients configured to use VIP addresses for Oracle RAC releases prior to Oracle Database 11<span class="italic">g</span> release 2 can continue to use their existing connection addresses; using SCAN is not required. When an earlier release of Oracle Database is upgraded, it registers with the SCAN listeners, and clients can start using SCAN to connect to that database.</p>
<p>There are two types of load balancing that you can implement for an Oracle RAC database: client-side and server-side load balancing. Client-side load balancing balances the connection requests across the listeners. With server-side load balancing, the SCAN listener directs a connection request to the best instance currently providing the service by using the load balancing advisory.</p>
<p>Based on the environment, the following actions occur when you use SCAN to connect to an Oracle RAC database using a service name. The numbered actions correspond to the arrows shown in <a href="#CIHIBEIH">Figure 7-1</a>.</p>
<ol>
<li>
<p>The PMON process of each instance registers the database services with the default listener on the local node and with each SCAN listener, which is specified by the <code dir="ltr">REMOTE_LISTENER</code> database parameter. The listeners are dynamically updated on the amount of work being handled by the instances and dispatchers.</p>
</li>
<li>
<p>The client issues a database connection request using a connect descriptor of the form:</p>
<pre dir="ltr">
orausr/@<span class="italic">scan_name</span>:1521/sales.example.com
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you use the Easy Connect naming method, then ensure the <code dir="ltr">sqlnet.ora</code> file on the client contains <code dir="ltr">EZCONNECT</code> in the list of naming methods specified by the <code dir="ltr">NAMES.DIRECTORY_PATH</code> parameter.</div>
</li>
<li>
<p>The client uses DNS to resolve <code dir="ltr"><span class="codeinlineitalic">scan_name</span></code>. After DNS returns the three addresses assigned to SCAN, the client sends a connect request to the first IP address. If the connect request fails, then the client attempts to connect using the next IP address.</p>
</li>
<li>
<p>When the connect request is successful, the client connects to a SCAN listener for the cluster which hosts the <code dir="ltr">sales</code> database. The SCAN listener compares the workload of the instances <code dir="ltr">sales1</code> and <code dir="ltr">sales2</code> and the workload of the nodes on which they are running. Because <code dir="ltr">node2</code> is less loaded than <code dir="ltr">node1</code>, the SCAN listener selects <code dir="ltr">node2</code> and sends the address for the listener on that node back to the client.</p>
</li>
<li>
<p>The client connects to the local listener on <code dir="ltr">node2</code>. The local listener starts a dedicated server process for the connection to the database.</p>
</li>
<li>
<p>The client connects directly to the dedicated server process on node2 and accesses the <code dir="ltr">sales2</code> database instance.</p>
</li>
</ol>
<div class="figure">
<p class="titleinfigure"><a id="CIHIBEIH"></a>Figure 7-1 Load Balancing Actions for Oracle RAC Connections That Use SCAN</p>
<img width="650" height="404" src="img/riwin001.gif" alt="Description of Figure 7-1 follows" /><br />
<a id="sthref512" href="img_text/riwin001.htm">Description of "Figure 7-1 Load Balancing Actions for Oracle RAC Connections That Use SCAN"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The <a class="olink CWWIN" href="../e48194/toc.htm"><span class="italic">Oracle Grid Infrastructure Installation Guide for Microsoft Windows x64 (64-Bit)</span></a> for more information about SCAN and its configuration</p>
</li>
<li>
<p><a class="olink RACAD076" href="../../rac.112/e41960/hafeats.htm#RACAD076"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about failover, load balancing, and the load balancing advisory</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BEIGGFAD"></a>
<div id="RIWIN1060" class="sect2">
<h3 class="sect2"><span class="secnum">7.9.4</span> Understanding Shared Server Use in an Oracle RAC Database</h3>
<p>By default, DBCA configures your Oracle RAC database with <a id="sthref513"></a>dedicated servers, not shared servers. <a id="sthref514"></a>However, if you select the <a id="sthref515"></a>shared server option when using DBCA, then DBCA configures shared servers. Oracle RAC uses both dedicated and shared server processing when shared servers are configured.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about cross-instance registration, shared and dedicated server configurations, and connection load balancing</p>
</li>
<li>
<p><a class="olink RACAD7122" href="../../rac.112/e41960/hafeats.htm#RACAD7122"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about connection load balancing in an Oracle RAC environment</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2786">
<tr>
<td class="cellalignment2795">
<table class="cellalignment2791">
<tr>
<td class="cellalignment2790"><a href="srvpool.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2790"><a href="rem_orcl.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2798">
<table class="cellalignment2789">
<tr>
<td class="cellalignment2790"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2790"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2790"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2790"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2790"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2790"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
