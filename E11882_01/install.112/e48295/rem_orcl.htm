<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>How to Modify or Deinstall Oracle Grid Infrastructure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1088" />
<meta name="dcterms.created" content="2016-11-17T23:35:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Grid Infrastructure Installation Guide" />
<meta name="dcterms.identifier" content="E48295-04" />
<meta name="dcterms.isVersionOf" content="CWHPX" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="postinst.htm" title="Previous" type="text/html" />
<link rel="Next" href="trouble.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e48295.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/17</span> <!-- End Header -->
<div id="CWHPX294" class="chapter"><a id="sthref615"></a>
<h1 class="chapter"><span class="secnum">6</span> How to Modify or Deinstall Oracle Grid Infrastructure</h1>
<p>This chapter describes how to remove Oracle Clusterware and Oracle ASM.</p>
<p>Starting with Oracle Database 11g Release 2 (11.2), Oracle recommends that you use the deinstallation tool to remove the entire Oracle home associated with the Oracle Database, Oracle Clusterware, Oracle ASM, Oracle RAC, or Oracle Database client installation. Oracle does not support the removal of individual products or components.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CBHCJIFJ">Deciding When to Deinstall Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CBHJCHAI">Migrating Standalone Grid Infrastructure Servers to a Cluster</a></p>
</li>
<li>
<p><a href="#CBHFEHIE">Relinking Oracle Grid Infrastructure for a Cluster Binaries</a></p>
</li>
<li>
<p><a href="#CIHJJABH">Changing the Oracle Grid Infrastructure Home Path</a></p>
</li>
<li>
<p><a href="#CBHGJAFB">Deconfiguring Oracle Clusterware Without Removing Binaries</a></p>
</li>
<li>
<p><a href="#CBHHDGDI">Removing Oracle Clusterware and ASM</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Product-specific documentation for requirements and restrictions to remove an individual product</div>
<a id="CBHCJIFJ"></a>
<div id="CWHPX295" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.1</span> <a id="sthref616"></a><a id="sthref617"></a><a id="sthref618"></a><a id="sthref619"></a><a id="sthref620"></a>Deciding When to Deinstall Oracle Clusterware</h2>
<p>Remove installed components in the following situations:</p>
<ul>
<li>
<p>You have successfully installed Oracle Clusterware, and you want to remove the Oracle Clusterware installation, either in an educational environment, or a test environment.</p>
</li>
<li>
<p>You have encountered errors during or after installing or upgrading Oracle Clusterware, and you want to reattempt an installation.</p>
</li>
<li>
<p>Your installation or upgrade stopped because of a hardware or operating system failure.</p>
</li>
<li>
<p>You are advised by Oracle Support to reinstall Oracle Clusterware.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CBHJCHAI"></a>
<div id="CWHPX296" class="sect1">
<h2 class="sect1"><span class="secnum">6.2</span> Migrating Standalone Grid Infrastructure Servers to a Cluster</h2>
<p>If you have an Oracle Database installation using Oracle Restart (that is, an Oracle Grid Infrastructure installation for a standalone server), and you want to configure that server as a cluster member node, then complete the following tasks:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This procedure uses Oracle Clusterware Configuration Wizard, available with release 11.2.0.2 and later.</div>
<ol>
<li>
<p>Inspect the Oracle Restart configuration with <code dir="ltr">srvctl</code> using the following syntax, where <span class="italic">db_unique_name</span> is the unique name for the database, and <span class="italic">lsnrname</span> is the name of the listeners:</p>
<p>srvctl config database -d <span class="italic">db_unique_name</span></p>
<p>srvctl config service -d <span class="italic">db_unique_name</span></p>
<p>srvctl config listener -l <span class="italic">lsnrname</span></p>
<p>Write down the configuration information for the server.</p>
</li>
<li>
<p>Change directory to <span class="italic">Grid home</span><code dir="ltr">/crs/install</code>. For example:</p>
<pre dir="ltr">
# cd /u01/app/11.2.0/grid/crs/install
</pre></li>
<li>
<p>Stop all of the databases, services, and listeners that you discovered in step 1.</p>
</li>
<li>
<p>Deconfigure and deinstall the Oracle Grid Infrastructure installation for a standalone server, using the following command:</p>
<pre dir="ltr">
# roothas.pl -deconfig -force
</pre></li>
<li>
<p>Prepare the server for Oracle Clusterware configuration, as described in this document.</p>
</li>
<li>
<p>As the Oracle Grid Infrastructure installation owner, run Oracle Clusterware Configuration Wizard, and save and stage the response file. For example:</p>
<pre dir="ltr">
$ Grid_home/crs/config/config.sh -silent -responseFile $HOME/GI.rsp
</pre></li>
<li>
<p>Run <code dir="ltr">root.sh</code> for the Oracle Clusterware Configuration Wizard.</p>
</li>
<li>
<p>Mount the Oracle Restart disk group.</p>
</li>
<li>
<p>Enter the <code dir="ltr">volenable</code> command to enable all Oracle Restart disk group volumes.</p>
</li>
<li>
<p>Add back Oracle Clusterware services to the Oracle Clusterware home, using the information you wrote down in step 1. For example:</p>
<pre dir="ltr">
/u01/app/grid/product/11.2.0/grid/bin/srvctl add filesystem -d /dev/asm/db1  -g ORestartData -v db1 -m /u01/app/grid/product/11.2.0/db1 -u grid
</pre></li>
<li>
<p>Add the Oracle Database for support by Oracle Grid Infrastructure for a cluster, using the configuration information you recorded in step 1. Use the following command syntax, where <span class="italic">db_unique_name</span> is the unique name of the database on the node, and nodename is the name of the node:</p>
<p>srvctl add database -d db_unique_name -o $ORACLE_HOME -x nodename</p>
<p>For example, with the database name <code dir="ltr">mydb</code>, and the service <code dir="ltr">myservice</code>, enter the following commands:</p>
<pre dir="ltr">
srvctl add database -d mydb -o $ORACLE_HOME -x node1

</pre></li>
<li>
<p>Add each service to the database, using the command <code dir="ltr">srvctl add service</code>. For example:</p>
<pre dir="ltr">
srvctl add service -d mydb -s myservice
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBHFEHIE"></a>
<div id="CWHPX297" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.3</span> Relinking Oracle Grid Infrastructure for a Cluster Binaries</h2>
<p><a id="sthref621"></a>After installing Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM configured for a cluster), if you need to modify the binaries, then use the following procedure, where <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> is the Oracle Grid Infrastructure for a Cluster home:</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before relinking executables, you must shut down all executables that run in the Oracle home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<p>As <code dir="ltr">root</code>:</p>
<pre dir="ltr">
# cd <span class="italic">Grid_home</span>/crs/install
# perl rootcrs.pl -unlock
</pre>
<p>As the Oracle Grid Infrastructure for a Cluster owner:</p>
<pre dir="ltr">
$ export ORACLE_HOME=<span class="italic">Grid_home</span>
$ <span class="italic">Grid_home</span>/bin/relink
</pre>
<p>As root again:</p>
<pre dir="ltr">
# cd <span class="italic">Grid_home</span>/rdbms/install/
# ./rootadd_rdbms.sh
# cd <span class="italic">Grid_home</span>/crs/install
# perl rootcrs.pl -patch
</pre>
<p>You must relink the Oracle Clusterware and Oracle ASM binaries every time you apply an operating system patch or after an operating system upgrade.</p>
<p>For upgrades from previous releases, if you want to deinstall the prior release Grid home, then you must first unlock the prior release Grid home. Unlock the previous release Grid home by running the command <code dir="ltr">rootcrs.pl -unlock</code> from the previous release home. After the script has completed, you can run the deinstall command.</p>
</div>
<!-- class="sect1" -->
<a id="CIHJJABH"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.4</span> Changing the Oracle Grid Infrastructure Home Path</h2>
<p><a id="sthref622"></a>With release 11.2.0.3 and later, after installing Oracle Grid Infrastructure for a cluster (Oracle Clusterware and Oracle ASM configured for a cluster), if you must change the Grid home path, then use the following example as a guide to detach the existing Grid home, and to attach a new Grid home:</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Before changing the Grid home, you must shut down all executables that run in the Grid home directory that you are relinking. In addition, shut down applications linked with Oracle shared libraries.</div>
<ol>
<li>
<p>Detach the existing Grid home by running the following command as the Oracle Grid Infrastructure installation owner (<code dir="ltr">grid</code>), where <code dir="ltr">/u01/app/11.2.0/grid</code> is the existing Grid home location:</p>
<pre dir="ltr">
$ cd /u01/app/11.2.0/grid/oui/bin
$ ./detachhome.sh -silent -local -invPtrLoc /u01/app/11.2.0/grid/oraInst.loc
</pre></li>
<li>
<p>As root, move the Grid binaries from the old Grid home location to the new Grid home location. For example, where the old Grid home is <code dir="ltr">/u01/app/11.2.0/grid</code> and the new Grid home is <code dir="ltr">/u01/app/grid</code>:</p>
<pre dir="ltr">
# mv /u01/app/11.2.0/grid /u01/app/grid
</pre></li>
<li>
<p>Clone the Oracle Grid Infrastructure installation, using the instructions provided in "Creating a Cluster by Cloning Oracle Clusterware Step 3: Run the clone.pl Script on Each Destination Node," in <a class="olink CWADD92126" href="../../rac.112/e41959/clonecluster.htm#CWADD92126"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</p>
<p>When you navigate to the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/clone/bin</code> directory and run the <code dir="ltr">clone.pl</code> script, provide values for the input parameters that provide the path information for the new Grid home.</p>
</li>
<li>
<p>As root again, enter the following commands to start up in the new home location:</p>
<pre dir="ltr">
# cd <span class="italic">Grid_home</span>/rdbms/install/
# ./rootadd_rdbms.sh
# cd <span class="italic">Grid_home</span>/crs/install
# perl rootcrs.pl -patch -destcrshome /u01/app/grid
</pre></li>
<li>
<p>Repeat steps 1 through 4 on each cluster member node.</p>
</li>
</ol>
<p>You must relink the Oracle Clusterware and Oracle ASM binaries every time you move the Grid home.</p>
</div>
<!-- class="sect1" -->
<a id="CBHGJAFB"></a>
<div id="CWHPX298" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.5</span> Deconfiguring Oracle Clusterware Without Removing Binaries</h2>
<p><a id="sthref623"></a><a id="sthref624"></a><a id="sthref625"></a><a id="sthref626"></a>Running the <code dir="ltr">rootcrs.pl</code> command flags <code dir="ltr">-deconfig -force</code> enables you to deconfigure Oracle Clusterware on one or more nodes without removing installed binaries. This feature is useful if you encounter an error on one or more cluster nodes during installation when running the <code dir="ltr">root.sh</code> command, such as a missing operating system package on one node. By running <code dir="ltr">rootcrs.pl -deconfig -force</code> on nodes where you encounter an installation error, you can deconfigure Oracle Clusterware on those nodes, correct the cause of the error, and then run <code dir="ltr">root.sh</code> again.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Stop any databases, services, and listeners that may be installed and running before deconfiguring Oracle Clusterware.</div>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Commands used in this section remove the Oracle Grid infrastructure installation for the entire cluster. If you want to remove the installation from an individual node, then refer to <a class="olink CWADD" href="../../rac.112/e41959/toc.htm"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</div>
<p>To deconfigure Oracle Clusterware:</p>
<ol>
<li>
<p>Log in as the <code dir="ltr">root</code> user on a node where you encountered an error.</p>
</li>
<li>
<p>Change directory to Grid_home/crs/install. For example:</p>
<pre dir="ltr">
# cd /u01/app/11.2.0/grid/crs/install
 
</pre></li>
<li>
<p>Run rootcrs.pl with the -deconfig -force flags. For example:</p>
<pre dir="ltr">
# perl rootcrs.pl -deconfig -force
</pre>
<p>Repeat on other nodes as required.</p>
</li>
<li>
<p>If you are deconfiguring Oracle Clusterware on all nodes in the cluster, then on the last node, enter the following command:</p>
<pre dir="ltr">
# perl rootcrs.pl -deconfig -force -lastnode
</pre>
<p>The <code dir="ltr">-lastnode</code> flag completes deconfiguration of the cluster, including the OCR and voting disks.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBHHDGDI"></a>
<div id="CWHPX299" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.6</span> Removing Oracle Database 11<span class="italic">g</span></h2>
<p>The <code dir="ltr">deinstall</code> command removes Oracle Clusterware and Oracle ASM from your server. The following sections describe the command, and provide information about additional options to use the command:</p>
<ul>
<li>
<p><a href="#CIHCHAGC">About the Deinstallation Tool</a></p>
</li>
<li>
<p><a href="#CIHJGABA">Deinstalling Previous Release Grid Home</a></p>
</li>
<li>
<p><a href="#CIHFHBEC">Downloading The Deinstall Tool for Use with Failed Installations</a></p>
</li>
<li>
<p><a href="#CHDBIAAD">Running The Deinstallation Tool</a></p>
</li>
<li>
<p><a href="#CIHBFIAE">Deinstall Command Example for Oracle Clusterware and Oracle ASM</a></p>
</li>
<li>
<p><a href="#CIHDDCBC">Deinstallation Parameter File Example for Grid Infrastructure for a Cluster</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Caution:</p>
You must use the deinstallation tool from the same release to remove Oracle software. Do not run the deinstallation tool from a later release to remove Oracle software from an earlier release. For example, do not run the deinstallation tool from the 12.1.0.1 installation media to remove Oracle software from an existing 11.2.0.4 Oracle home.</div>
<a id="CIHCHAGC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.1</span> About the Deinstallation Tool</h3>
<p>The Deinstallation Tool (<code dir="ltr">deinstall</code>) stops Oracle software, and removes Oracle software and configuration files on the operating system. It is available in the installation media before installation, and is available in Oracle home directories after installation. It is located in the path <code dir="ltr">$ORACLE_HOME/deinstall</code>. The Deinstallation tool command is also available for download from Oracle Technology Network (OTN) at the following URL:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/">http://www.oracle.com/technetwork/database/enterprise-edition/downloads</a></code></p>
<p>You can download the Deinstallation tool with the complete Oracle Database 11g release 2 software, or as a separate archive file. To download the Deinstallation tool separately, click the See All link next to the software version.</p>
<p>The Deinstallation tool command uses the information you provide and the information gathered from the software home to create a parameter file. Alternatively, you can use a parameter file generated previously by the <code dir="ltr">deinstall</code> command using the <code dir="ltr">-checkonly</code> flag and <code dir="ltr">-o</code> flag. You can also edit a response file template to create a parameter file.</p>
<p>The Deinstallation tool command stops Oracle software, and removes Oracle software and configuration files on the operating system for a specific Oracle home. If you run the Deinstallation tool to remove an Oracle Grid Infrastructure for a cluster installation, then the tool prompts you to run the <code dir="ltr">rootcrs.pl</code> script as <code dir="ltr">root</code>.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you run the deinstall command, if the central inventory (oraInventory) contains no other registered homes besides the home that you are deconfiguring and removing, then the deinstall command removes the following files and directory contents in the Oracle base directory of the Oracle RAC installation owner:
<ul>
<li>
<p>admin</p>
</li>
<li>
<p>cfgtoollogs</p>
</li>
<li>
<p>checkpoints</p>
</li>
<li>
<p>diag</p>
</li>
<li>
<p>oradata</p>
</li>
<li>
<p>flash_recovery_area</p>
</li>
</ul>
<p>Oracle strongly recommends that you configure your installations using an Optimal Flexible Architecture (OFA) configuration, and that you reserve Oracle base and Oracle home paths for exclusive use of Oracle software. If you have any user data in these locations in the Oracle base that is owned by the user account that owns the Oracle software, then the <code dir="ltr">deinstall</code> command deletes this data.</p>
</div>
<p>The command uses the following syntax, where variable content is indicated by italics:</p>
<pre dir="ltr">
deinstall -home <span class="italic">complete path of Oracle home</span> [-silent] [-checkonly] [-local] 
[-paramfile <span class="italic">complete path of input parameter property file</span>] 
[-params <span class="italic">name1</span>=<span class="italic">value</span> <span class="italic">name2</span>=<span class="italic">value</span> . . .] [-o <span class="italic">complete path of directory for saving files</span>] -h
 
</pre>
<p>The default method for running the deinstall tool is from the deinstall directory in the Grid home. For example:</p>
<pre dir="ltr">
$ cd /u01/app/11.2.0/grid/deinstall
$ ./deinstall
</pre>
<p>In addition, you can run the deinstall tool from other locations, or with a parameter file, or select other options to run the tool.</p>
<p>The options are:</p>
<ul>
<li>
<p><code dir="ltr">-home</code></p>
<p>Use this flag to indicate the home path of the Oracle home to check or deinstall. To deinstall Oracle software using the <code dir="ltr">deinstall</code> command in the Oracle home you plan to deinstall, provide a parameter file in another location, and do not use the <code dir="ltr">-home</code> flag.</p>
<p>If you run <code dir="ltr">deinstall</code> from the $ORACLE_HOME/deinstall path, then the <code dir="ltr">-home</code> flag is not required because the tool knows from which home it is being run. If you use the standalone version of the tool, then <code dir="ltr">-home</code> is mandatory.</p>
</li>
<li>
<p>-<code dir="ltr">silent</code></p>
<p>Use this flag to run the command in noninteractive mode. This option requires a properties file that contains the configuration values for the Oracle home that is being deinstalled or deconfigured.</p>
<p>To create a properties file and provide the required parameters, refer to the template file <code dir="ltr">deinstall.rsp.tmpl</code>, located in the <code dir="ltr">response</code> folder of the Deinstallation tool home or the Oracle home.</p>
<p>If you have a working system, then instead of using the template file, you can generate a properties file by running the <code dir="ltr">deinstall</code> command using the <code dir="ltr">-checkonly</code> flag. The <code dir="ltr">deinstall</code> command then discovers information from the Oracle home to deinstall and deconfigure. It generates the properties file, which you can then use with the <code dir="ltr">-silent</code> option.</p>
</li>
<li>
<p><code dir="ltr">-checkonly</code></p>
<p>Use this flag to check the status of the Oracle software home configuration. Running the command with the <code dir="ltr">checkonly</code> flag does not remove the Oracle configuration.</p>
</li>
<li>
<p><code dir="ltr">-local</code></p>
<p>Use this flag on a multinode non-shared environment to deconfigure Oracle software in a cluster.</p>
<p>When you run <code dir="ltr">deinstall</code> with this flag, it deconfigures and deinstalls the Oracle software on the local node (the node where <code dir="ltr">deinstall</code> is run) for non-shared home directories. On remote nodes, it deconfigures Oracle software, but does not deinstall the Oracle software.</p>
</li>
<li>
<p><code dir="ltr">-paramfile</code> <code dir="ltr"><span class="codeinlineitalic">complete path of input parameter property file</span></code></p>
<p>Use this flag to run <code dir="ltr">deinstall</code> with a parameter file in a location other than the default. When you use this flag, provide the complete path where the parameter file is located. If you run the deinstall command from the Oracle home that you plan to deinstall, then you do not need to use the <code dir="ltr">-paramfile</code> flag.</p>
<p>The default location of the parameter file depends on the location of <code dir="ltr">deinstall</code>:</p>
<ul>
<li>
<p>From the installation media or stage location: <code dir="ltr">$ORACLE_HOME/inventory/response</code>.</p>
</li>
<li>
<p>From a unzipped archive file from Oracle Technology Network (OTN): <code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">ziplocation</span></code><code dir="ltr">/response</code>.</p>
</li>
<li>
<p>After installation from the installed Oracle home: <code dir="ltr">$ORACLE_HOME/deinstall/response</code>.</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">-params</code> [<code dir="ltr"><span class="codeinlineitalic">name1</span></code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> <code dir="ltr"><span class="codeinlineitalic">name2</span></code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> <code dir="ltr"><span class="codeinlineitalic">name3</span></code>=<code dir="ltr"><span class="codeinlineitalic">value</span></code> ...]</p>
<p>Use this flag with a parameter file to override one or more values in a parameter file you have already created.</p>
</li>
<li>
<p>-<code dir="ltr">o</code> <code dir="ltr"><span class="codeinlineitalic">complete path of directory for saving response files</span></code></p>
<p>Use this flag to provide a path other than the default location where the properties file (<code dir="ltr">deinstall.rsp.tmpl</code>) is saved.</p>
<p>The default location of the parameter file depends on the location of <code dir="ltr">deinstall</code>:</p>
<ul>
<li>
<p>From the installation media or stage location before installation: <code dir="ltr">$ORACLE_HOME/</code>.</p>
</li>
<li>
<p>From a unzipped archive file from OTN: <code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">ziplocation</span></code><code dir="ltr">/response/</code>.</p>
</li>
<li>
<p>After installation from the installed Oracle home: <code dir="ltr">$ORACLE_HOME/deinstall/response</code>.</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">-h</code></p>
<p>Use the help option (<code dir="ltr">-h</code>) to obtain additional information about the command option flags.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHJGABA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.2</span> Deinstalling Previous Release Grid Home</h3>
<p>For upgrades from previous releases, if you want to deinstall the previous release Grid home, then as the <code dir="ltr">root</code> user, you must manually change the permissions of the previous release Grid home, and then run the <code dir="ltr">deinstall</code> command.</p>
<p>For example:</p>
<pre dir="ltr">
# chown -R grid:oinstall /u01/app/grid/11.2.0
# chmod -R 775 /u01/app/grid/11.2.0
</pre>
<p>In this example, <code dir="ltr">/u01/app/grid/11.2.0</code> is the previous release Grid home.</p>
</div>
<!-- class="sect2" -->
<a id="CIHFHBEC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.3</span> Downloading The Deinstall Tool for Use with Failed Installations</h3>
<p>You can use the Deinstallation tool (<code dir="ltr">deinstall</code>) to remove failed or incomplete installations. It is available as a separate download from the Oracle Technology Network (OTN) web site.</p>
<p>To download the Deinstallation tool:</p>
<ol>
<li>
<p>Go to the following URL:</p>
<pre dir="ltr">
<a href="http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html">http://www.oracle.com/technetwork/database/enterprise-edition/downloads/index.html</a>
</pre></li>
<li>
<p>Under <span class="bold">Oracle Database 11g Release 2</span>, click <span class="bold">See All</span> for the respective platform for which you want to download the Deinstallation Tool.</p>
<p>The Deinstallation tool is available for download at the end of this page.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDBIAAD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.4</span> Running The Deinstallation Tool</h3>
<p>Oracle recommends that you run the <code dir="ltr">deinstall</code> command as the Oracle Grid Infrastructure installation owner or the <code dir="ltr">grid</code> user that owns Oracle Clusterware.</p>
<p>After downloading the Deinstallation tool, ensure that:</p>
<ul>
<li>
<p>The user running the Deinstallation tool is the same on all cluster member nodes</p>
</li>
<li>
<p>User equivalence is set up</p>
</li>
</ul>
<p>To run the Deinstallation tool, follow these steps:</p>
<ol>
<li>
<p>Download or copy the Deinstallation tool to the <code dir="ltr">grid</code> user home directory.</p>
</li>
<li>
<p>Verify that the deinstall binary is owned by the <code dir="ltr">grid</code> user.</p>
</li>
<li>
<p>Run the Deinstallation tool.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHBFIAE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.5</span> Deinstall Command Example for Oracle Clusterware and Oracle ASM</h3>
<p>As the <code dir="ltr">deinstall</code> command runs, you are prompted to provide the home directory of the Oracle software to remove from your system. Provide additional information as prompted.</p>
<p>To run the <code dir="ltr">deinstall</code> command from an Oracle Grid Infrastructure for a cluster home, enter the following command:</p>
<pre dir="ltr">
$ cd /u01/app/11.2.0/grid/deinstall/
$ ./deinstall 
</pre>
<p>You can run generate a <code dir="ltr">deinstall</code> parameter file by running the <code dir="ltr">deinstall</code> command using the <code dir="ltr">-checkonly</code> flag before you run the command to deinstall the home, or you can use the response file template and manually edit it to create the parameter file to use with the <code dir="ltr">deinstall</code> command.</p>
</div>
<!-- class="sect2" -->
<a id="CIHDDCBC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">6.6.6</span> Deinstallation Parameter File Example for Grid Infrastructure for a Cluster</h3>
<p>You can run the <code dir="ltr">deinstall</code> command with the <code dir="ltr">-paramfile</code> option to use the values you specify in the parameter file. The following is an example of a parameter file for a cluster on nodes <code dir="ltr">node1</code> and <code dir="ltr">node2</code>, in which the Oracle Grid Infrastructure for a cluster software binary owner is <code dir="ltr">grid</code>, the Oracle Grid Infrastructure home (Grid home) is in the path <code dir="ltr">/u01/app/11.2.0/grid</code>, the Oracle base (the Oracle base for Oracle Grid Infrastructure, containing Oracle ASM log files, Oracle Clusterware logs, and other administrative files) is <code dir="ltr">/u01/app/11.2.0/grid/</code>, the central Oracle Inventory home (<code dir="ltr">oraInventory</code>) is <code dir="ltr">/u01/app/oraInventory</code>, the virtual IP addresses (VIP) are <code dir="ltr">192.0.2.2</code> and <code dir="ltr">192.0.2.4</code>, the local node (the node where you run the deinstallation session from) is <code dir="ltr">node1</code>:</p>
<pre dir="ltr">
#Copyright (c) 2005, 2006 Oracle Corporation.  All rights reserved.
#Fri Feb 06 00:08:58 PST 2009
LOCAL_NODE=node1
HOME_TYPE=CRS
ASM_REDUNDANCY=\
ORACLE_BASE=/u01/app/11.2.0/grid/
VIP1_MASK=255.255.252.0
VOTING_DISKS=/u02/storage/grid/vdsk
SCAN_PORT=1522
silent=true
ASM_UPGRADE=false
ORA_CRS_HOME=/u01/app/11.2.0/grid
GPNPCONFIGDIR=$ORACLE_HOME
LOGDIR=/home/grid/SH/deinstall/logs/
GPNPGCONFIGDIR=$ORACLE_HOME
ORACLE_OWNER=grid
NODELIST=node1,node2
CRS_STORAGE_OPTION=2
NETWORKS="lan0"/192.0.2.1\:public,"lan1"/10.0.0.1\:cluster_interconnect
VIP1_IP=192.0.2.2
NETCFGJAR_NAME=netcfg.jar
ORA_DBA_GROUP=dba
CLUSTER_NODES=node1,node2
JREDIR=/u01/app/11.2.0/grid/jdk/jre
VIP1_IF=lan0
REMOTE_NODES=node2
VIP2_MASK=255.255.252.0
ORA_ASM_GROUP=asm
LANGUAGE_ID=AMERICAN_AMERICA.WE8ISO8859P1
CSS_LEASEDURATION=400
NODE_NAME_LIST=node1,node2
SCAN_NAME=node1scn
SHAREJAR_NAME=share.jar
HELPJAR_NAME=help4.jar
SILENT=false
local=false
INVENTORY_LOCATION=/u01/app/oraInventory
GNS_CONF=false
JEWTJAR_NAME=jewt4.jar
OCR_LOCATIONS=/u02/storage/grid/ocr
EMBASEJAR_NAME=oemlt.jar
ORACLE_HOME=/u01/app/11.2.0/grid
CRS_HOME=true
VIP2_IP=192.0.2.4
ASM_IN_HOME=n
EWTJAR_NAME=ewt3.jar
HOST_NAME_LIST=node1,node2
JLIBDIR=/u01/app/11.2.0/grid/jlib
VIP2_IF=lan0
VNDR_CLUSTER=false
CRS_NODEVIPS='node1-vip/255.255.252.0/lan0,node2-vip/255.255.252.0/lan0'
CLUSTER_NAME=node1-cluster  
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use quotation marks with variables except in the following cases:
<ul>
<li>
<p>Around addresses in CRS_NODEVIPS:</p>
<pre dir="ltr">
CRS_NODEVIPS='n1-vip/255.255.252.0/lan0,n2-vip/255.255.252.0/lan0'
</pre></li>
<li>
<p>Around interface names in NETWORKS:</p>
<pre dir="ltr">
NETWORKS="lan0"/192.0.2.1\:public,"lan1"/10.0.0.1\:cluster_interconnect VIP1_IP=192.0.2.2
</pre></li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2532">
<tr>
<td class="cellalignment2539">
<table class="cellalignment2537">
<tr>
<td class="cellalignment2536"><a href="postinst.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2536"><a href="trouble.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2541">
<table class="cellalignment2535">
<tr>
<td class="cellalignment2536"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2536"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2536"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2536"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2536"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2536"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
