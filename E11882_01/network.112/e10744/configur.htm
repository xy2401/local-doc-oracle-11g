<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Enterprise User Security Configuration Tasks and Troubleshooting</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 735" />
<meta name="dcterms.created" content="2013-06-24T8:0:2Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Enterprise User Security Administrator's Guide" />
<meta name="dcterms.identifier" content="E10744-04" />
<meta name="dcterms.isVersionOf" content="DBIMI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="toolover.htm" title="Previous" type="text/html" />
<link rel="Next" href="adminste.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10744.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/15</span> <!-- End Header -->
<div id="DBIMI150" class="chapter"><a id="CHDFABCD"></a>
<h1 class="chapter"><span class="secnum">4</span> Enterprise User Security Configuration Tasks and Troubleshooting</h1>
<p>This chapter describes configuring Enterprise User Security using a sequence of steps. They include the initial database and directory preparation through connecting to the database as an enterprise user, where authentication can use passwords, Kerberos tickets, or SSL. A troubleshooting section helps you when you test your Enterprise User Security implementation.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i1008042">Enterprise User Security Configuration Overview</a></p>
</li>
<li>
<p><a href="#i1008049">Enterprise User Security Configuration Roadmap</a></p>
</li>
<li>
<p><a href="#i1006647">Preparing the Directory for Enterprise User Security (Phase One)</a></p>
</li>
<li>
<p><a href="#i1006636">Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)</a></p>
</li>
<li>
<p><a href="#BIBJAGDC">Configure Enterprise User Security for the Authentication Method You Require (Phase Three)</a></p>
</li>
<li>
<p><a href="#i1008086">Enabling Current User Database Links</a></p>
</li>
<li>
<p><a href="#i1007713">Troubleshooting Enterprise User Security</a></p>
</li>
</ul>
<a id="i1008042"></a>
<div id="DBIMI254" class="sect1">
<h2 class="sect1"><span class="secnum">4.1</span> Enterprise User Security Configuration Overview</h2>
<p>Configuring Enterprise User Security means creating shared schemas and global roles in databases that you want accessible to enterprise users. You configure the identity management realm in the directory to reflect those database roles and schemas, and then associate directory users with them. These steps apply regardless of the authentication method you choose: password, Kerberos, or SSL.</p>
<p>The primary configuration differences among the authentication types are in network connection configuration. You must consider the following three connection types:</p>
<ul>
<li>
<ul>
<li>
<p>Client-to-database</p>
</li>
<li>
<p>Database-to-directory</p>
</li>
<li>
<p>Database-to-database (current user database links can be secured by SSL only)</p>
</li>
</ul>
</li>
</ul>
<p>Enterprise User Security supports many combinations of authentication types between databases, directories, and clients. The three most common implementations of Enterprise User Security, described in this chapter, use the following authentication methods for client-database and database-directory connections:</p>
<ul>
<li>
<ul>
<li>
<p>Passwords for both connections</p>
</li>
<li>
<p>SSL for both connections</p>
</li>
<li>
<p>Kerberos for client-database connections and passwords for database-directory connections</p>
</li>
</ul>
</li>
</ul>
<p>You decide which of these to choose based primarily on your network environment, because the security and integrity of your enterprise data depend on creating secure network connections. Typical network environments can have all clients, databases, and directories residing within the same network behind a firewall, or distributed across several networks and perhaps exposed to the Internet. Different environments can dictate what authentication types you choose, in order to secure your Enterprise User Security network connections.</p>
<p>A second consideration in making such choices is the fact that more rigorous authentication types, such as SSL and Kerberos, require greater configuration complexity, additional software, and ongoing maintenance.</p>
<p><a href="#i1010104">Figure 4-1</a> shows the configuration process for Enterprise User Security. It is a step-by-step process with decision points based on your implementation and how your users are authenticated. The configuration steps represented with broken lines are optional.</p>
<div id="DBIMI576" class="figure">
<p class="titleinfigure"><a id="i1010104"></a>Figure 4-1 <a id="sthref93"></a>Enterprise User Security Configuration Flow Chart</p>
<img width="688" height="680" src="img/asoag034.gif" alt="Description of Figure 4-1 follows" /><br />
<a id="sthref94" href="img_text/asoag034.htm">Description of "Figure 4-1 Enterprise User Security Configuration Flow Chart"</a><br />
<br /></div>
<!-- class="figure" -->
<p>For brevity, some product names and features have been abbreviated in this flow chart. The following table lists the abbreviations used and the meaning of each:</p>
<div class="inftblinformal">
<table class="cellalignment2210" title="Product Abbreviations Used in Configuration Flowchart" summary="This table lists the product name abbreviations used in Figure 11-1 and provides their meanings." dir="ltr">
<thead>
<tr class="cellalignment2199">
<th class="cellalignment2211" id="r1c1-t2"><span class="bold">Abbreviation</span></th>
<th class="cellalignment2211" id="r1c2-t2">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r2c1-t2" headers="r1c1-t2">DBCA</td>
<td class="cellalignment2205" headers="r2c1-t2 r1c2-t2">Database Configuration Assistant</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r3c1-t2" headers="r1c1-t2">EM</td>
<td class="cellalignment2205" headers="r3c1-t2 r1c2-t2">Oracle Enterprise Manager Database Control or Grid Control</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r4c1-t2" headers="r1c1-t2">IM Realm</td>
<td class="cellalignment2205" headers="r4c1-t2 r1c2-t2">Identity Management Realm</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r5c1-t2" headers="r1c1-t2">Netmgr</td>
<td class="cellalignment2205" headers="r5c1-t2 r1c2-t2">Oracle Net Manager</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r6c1-t2" headers="r1c1-t2">ODM</td>
<td class="cellalignment2205" headers="r6c1-t2 r1c2-t2">Oracle Directory Manager</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r7c1-t2" headers="r1c1-t2">OID</td>
<td class="cellalignment2205" headers="r7c1-t2 r1c2-t2">Oracle Internet Directory</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r8c1-t2" headers="r1c1-t2">OID DAS</td>
<td class="cellalignment2205" headers="r8c1-t2 r1c2-t2">Oracle Internet Directory Delegated Administration Services</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r9c1-t2" headers="r1c1-t2">OWM</td>
<td class="cellalignment2205" headers="r9c1-t2 r1c2-t2">Oracle Wallet Manager</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r10c1-t2" headers="r1c1-t2">SQL</td>
<td class="cellalignment2205" headers="r10c1-t2 r1c2-t2">SQL*Plus</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="concepts.htm#g1027322">Chapter 1, "Introducing Enterprise User Security"</a> for information about the realm Oracle Context, its administrative groups, and entries that pertain to Enterprise User Security</div>
</div>
<!-- class="sect1" -->
<a id="i1008049"></a>
<div id="DBIMI255" class="sect1">
<h2 class="sect1"><span class="secnum">4.2</span> <a id="sthref95"></a>Enterprise User Security Configuration Roadmap</h2>
<p>This section provides detailed descriptions of the configuration steps that <a href="#i1010104">Figure 4-1</a> illustrates. They should be performed in the following order:</p>
<ol>
<li>
<p><a href="#i1006647">"Preparing the Directory for Enterprise User Security (Phase One)"</a></p>
</li>
<li>
<p><a href="#i1006636">"Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)"</a></p>
</li>
<li>
<p><a href="#BIBJAGDC">"Configure Enterprise User Security for the Authentication Method You Require (Phase Three)"</a>, which completes your Enterprise User Security configuration by establishing your chosen authentication method as one of the following three:</p>
<ul>
<li>
<p><a href="#i1008031">"Configuring Enterprise User Security for Password Authentication"</a></p>
</li>
<li>
<p><a href="#i1008030">"Configuring Enterprise User Security for Kerberos Authentication"</a></p>
</li>
<li>
<p><a href="#i1008032">"Configuring Enterprise User Security for SSL Authentication"</a></p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1006647"></a>
<div id="DBIMI120" class="sect1">
<h2 class="sect1"><span class="secnum">4.3</span> Preparing the Directory for Enterprise User Security (Phase One)</h2>
<p>This configuration phase must be performed before you can configure any other part of Enterprise User Security.</p>
<p>Enterprise User Security for 11<span class="italic">g</span> Release 2 (11.2) requires Release 9.0.4 (or later) version of Oracle Internet Directory, which installs with the required version of the Oracle schema. This schema is backward compatible. After you have installed Oracle Internet Directory, perform the following directory usage configuration tasks:</p>
<ul>
<li>
<p><a href="#i1009645">Task 1: (Optional) Create an identity management realm in the directory</a></p>
</li>
<li>
<p><a href="#i1009650">Task 2: (Optional) Set identity management realm properties</a></p>
</li>
<li>
<p><a href="#i1009655">Task 3: Identify administrative users in the directory</a></p>
</li>
<li>
<p><a href="#i1009661">Task 4: (Optional) Set the default database-to-directory authentication type for the identity management realm</a></p>
</li>
<li>
<p><a href="#i1009666">Task 5: (Optional) Configure your Oracle home for directory usage</a></p>
</li>
<li>
<p><a href="#i1009285">Task 6: Register the database in the directory</a></p>
</li>
</ul>
<p class="subhead2"><a id="i1009645"></a><a id="DBIMI577"></a>Task 1: (Optional) Create an identity management realm in the directory</p>
<p>If necessary, use Oracle Internet Directory Self-Service Console (Delegated Administration Service) to create an identity management realm in the directory. You can use Oracle Internet Directory Configuration Assistant to upgrade an Oracle9<span class="italic">i</span> Oracle Context to a 9.0.4 or higher version Identity Management Realm.</p>
<p>You must have version 9.0.4 (or later) identity management realm to use Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span>. Version 9.0.4 realms are backward compatible to Oracle9<span class="italic">i</span>, so you can register Oracle9<span class="italic">i</span> and Oracle Database 11<span class="italic">g</span> Release 2 (11.2) in the same realm and place them in the same domain, if desired.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OIMDA" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIMDA"><span class="italic">Oracle Identity Management Guide to Delegated Administration</span></a> for more information on creating identity management realms in Oracle Internet Directory</div>
<p class="subhead2"><a id="i1009650"></a><a id="DBIMI578"></a>Task 2: (Optional) Set identity management realm properties</p>
<p><a href="#BABFIBCD">Table 4-1</a> shows the defaults for a version 9.0.4 identity management realm.</p>
<div id="DBIMI579" class="tblformal">
<p class="titleintable"><a id="sthref96"></a><a id="BABFIBCD"></a>Table 4-1 Identity Realm Defaults</p>
<table class="cellalignment2212" title="Identity Realm Defaults" summary="This table shows the defaults for a version 9.0.4 identity management realm." dir="ltr">
<thead>
<tr class="cellalignment2199">
<th class="cellalignment2211" id="r1c1-t5">User Search Base</th>
<th class="cellalignment2211" id="r1c2-t5">Group Search Base</th>
<th class="cellalignment2211" id="r1c3-t5">Login Name Attribute (nickname)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r2c1-t5" headers="r1c1-t5">
<p><code>cn=Users,</code><code><span class="codeinlineitalic">realm_DN</span></code></p>
</td>
<td class="cellalignment2205" headers="r2c1-t5 r1c2-t5">
<p><code>cn=Groups,</code><code><span class="codeinlineitalic">realm_DN</span></code></p>
</td>
<td class="cellalignment2205" headers="r2c1-t5 r1c3-t5">
<p><code><span class="codeinlineitalic">uid</span></code>, the user id</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>If you want different settings, then use Oracle Internet Directory Self-Service Console to set the user search base, group search base, and login name attribute (<a id="sthref97"></a>nickname). You can also set up the necessary context administrators in the identity management realm you plan to use in the directory.</p>
<p>To perform this task, see <a href="adminste.htm#i1010223">"Setting Properties of an Identity Management Realm"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Each identity management realm includes an orcladmin user who is the root user of that realm only. These realm-specific orcladmin users are represented by the directory entries <code>cn=orcladmin,cn=Users,&lt;realm_DN&gt;</code>. Note that when you are logged in to Enterprise User Security administration tools as a realm-specific orcladmin user, then you can only manage directory objects for that realm. To manage objects in another realm, you must log in to administration tools as the orcladmin user for that realm.</div>
<p class="subhead2"><a id="i1009655"></a><a id="DBIMI580"></a>Task 3: Identify administrative users in the directory</p>
<p>Identify administrative users in the directory who are authorized to perform the following tasks:</p>
<ul>
<li>
<ul>
<li>
<p>Register databases</p>
</li>
<li>
<p>Administer database security</p>
</li>
<li>
<p>Create and manage enterprise domains</p>
</li>
</ul>
</li>
</ul>
<p>If administrative users do not already exist who can perform these tasks, then see <a href="adminste.htm#g1017276">Chapter 5, "Administering Enterprise User Security"</a> to create them.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Although one administrator can perform all Enterprise User Security administrative tasks, you can create many different kinds of administrators so security tasks can be assigned to different people. Separating security tasks in this way results in a more secure enterprise environment, but this requires coordination among the different administrators.</div>
<p class="subhead2"><a id="i1009661"></a><a id="DBIMI581"></a>Task 4: (Optional) Set the default database-to-directory authentication type for the identity management realm</p>
<p>By default, the database-to-directory authentication type for the identity management realm is set to passwords. If you want a different default setting, then use the Oracle Enterprise Manager Database Control or Grid Control interface to change it. For example, if you are using a public key infrastructure (PKI), then you would need to set the authentication type to SSL. See <a href="adminste.htm#i1011272">"Setting the Default Database-to-Directory Authentication Type for an Identity Management Realm"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>This default realmwide setting can be overridden on a database by setting the <code>LDAP_DIRECTORY_ACCESS</code> initialization parameter. See <a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information about this parameter.</p>
</li>
<li>
<p>If you are using SSL, then see <a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> for information about setting up SSL with two-way authentication for Oracle Internet Directory.</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="i1009666"></a><a id="DBIMI582"></a>Task 5: (Optional) Configure your Oracle home for directory usage</p>
<p>This step is optional because users of Domain Name System (DNS) discovery (automatic domain name lookup to locate the directory on a network) do not need to perform this step. (See <a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> for information about DNS server discovery.)</p>
<p>If you are <span class="italic">not</span> using DNS discovery, then you <span class="italic">must</span> use Oracle Net Configuration Assistant (NetCA) to create an <code>ldap.ora</code> file for your Oracle home. This configuration file specifies the directory host and port information, and the location of the identity management realm so the database can connect to the directory. (See <a href="toolover.htm#i1013262">"Starting Oracle Net Configuration Assistant"</a>)</p>
<p>To create an <code>ldap.ora</code> file for your Oracle home:</p>
<ol>
<li>
<p>In the Oracle Net Configuration Assistant welcome page, choose <span class="bold">Directory Service Usage Configuration</span>, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Directory Usage Configuration page, select an option appropriate for your environment. Then follow the prompts in the wizard and refer to the online Help to create an <code>ldap.ora</code> file for your Oracle home.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>SSL authentication between your database and directory requires that the SSL port entered in the <code>ldap.ora</code> file support two-way authentication, in which both client and server send certificates to each other. Thus, you must acquire a PKI digital certificate and wallet for Oracle Internet Directory, and bring up Oracle Internet Directory in the SSL mutual authentication mode. The second port in the <code>ldap.ora</code> file should have the SSL mutual authentication port. (See <a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a>.)</p>
</li>
<li>
<p>If you are using password authentication for your database-to-directory connection, then the SSL port entered in the <code>ldap.ora</code> file must support SSL with no authentication. No wallet or certificate is required for Oracle Internet Directory. The second port in the <code>ldap.ora</code> file should have the SSL no authentication port.</p>
</li>
</ul>
</div>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="getstrtd.htm#CBHDBFGC">"Configuring Your Database to Use the Directory"</a> for an example of using NetCA to configure directory usage</div>
<p class="subhead2"><a id="i1009285"></a><a id="DBIMI583"></a>Task 6: Register the database in the directory</p>
<p>After you have configured your Oracle home for directory usage, use Database Configuration Assistant to register the database in the directory. Registration creates an entry in the directory so the database can bind (log in) to it.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To perform this task, you must be the directory superuser or a member of either the <code>OracleDBCreators</code> group or the <code>OracleContextAdmins</code> group.</div>
<p>When registering a database in the directory, Database Configuration Assistant performs the following configuration tasks:</p>
<ul>
<li>
<p>Creates a new database service entry and subtree, and assigns a DN to it in the Oracle Context for the identity management realm you are using.</p>
</li>
<li>
<p>Adds the database to the default enterprise domain.</p>
</li>
<li>
<p>Establishes the authentication type of the database to the directory by setting the <code>LDAP_DIRECTORY_ACCESS</code> parameter to one of the three allowable settings: <code>NONE</code>, <code>PASSWORD</code>, or <code>SSL</code>. Database Configuration Assistant reads the default database to directory authentication attribute setting for the identity management realm to determine the authentication type setting for the database.</p>
<p>The <code>LDAP_DIRECTORY_ACCESS</code> parameter, residing in the database initialization parameter file, determines whether and how the database attempts authentication to the directory. An administrator can change this authentication type setting by using the <code>ALTER SYSTEM</code> command.</p>
</li>
<li>
<p>Creates a database wallet, containing the database DN in the following form:</p>
<p><code>cn=</code><code><span class="codeinlineitalic">short_database_name</span></code><code>,cn=OracleContext,</code><code><span class="codeinlineitalic">realm_DN</span></code></p>
<p>where <code><span class="codeinlineitalic">short_database_name</span></code> is the first part of the fully qualified domain name for a database.</p>
<p>For example, if you have a database named <code>db1.us.example.com</code>, then the short database name is <code>db1</code>.</p>
</li>
<li>
<p>Randomly generates a database password for directory access, storing it in the database wallet and in the directory.</p>
</li>
<li>
<p>After creating the wallet, Database Configuration Assistant stores it at <code>$ORACLE_BASE</code><code>/admin/</code><code><span class="codeinlineitalic">Oracle_SID</span></code><code>/wallet</code> (in UNIX environments), if the <code>ORACLE_BASE</code> environment variable is present. If the <code>ORACLE_BASE</code> environment variable is not present, then the <code>$ORACLE_HOME/admin/</code><code><span class="codeinlineitalic">Oracle_SID</span></code><code>/wallet</code> directory is used.</p>
<p>In Windows environments, replace the slashes (/) with backslashes (\).</p>
<p>If a database wallet already exists, then Database Configuration Assistant uses it and updates the password in the wallet.</p>
</li>
<li>
<p>Enables autologin for the database wallet.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The database's password-based credentials for authentication to Oracle Internet Directory are placed in the wallet when an Oracle database is registered in Oracle Internet Directory.</div>
<p class="subhead2"><a id="CHDDAAFB"></a><a id="DBIMI584"></a>To register a database with the directory:</p>
<p>See <a href="toolover.htm#i1012800">"Starting Database Configuration Assistant"</a> to start this tool.</p>
<ol>
<li>
<p>After starting Database Configuration Assistant, select <span class="bold">Configure Database Options in a Database</span> and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Select a database and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>To register the database, click <span class="bold">Yes, Register the Database</span>.</p>
</li>
<li>
<p>Enter the directory credentials for a user in the OracleDBCreators group.</p>
</li>
<li>
<p>Enter a password for the database wallet.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Remember the database wallet password you entered in Step 5. It cannot be retrieved after you finish database registration. If you do not know the password, a multistep process is required to generate a new wallet and reregister the database. See <a href="#i1006591">"About the Database Wallet and Password"</a> for further information.</div>
</li>
<li>
<p>Click <span class="bold">Finish</span> if you are only registering the database. Click <span class="bold">Next</span> if you want to configure additional database features.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="getstrtd.htm#CBHGBEIG">"Registering Your Database with the Directory"</a> for an example of using DBCA to register the database</div>
</li>
</ol>
<p class="subhead2"><a id="CHDHJDIF"></a><a id="DBIMI585"></a>To change the database's directory password:</p>
<p>After starting Database Configuration Assistant, select <span class="bold">Configure Database Options in a Database</span>, and click <span class="bold">Next</span>.</p>
<ol>
<li>
<p>Select a database and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Select <span class="bold">Regenerate database password</span>.</p>
</li>
<li>
<p>Enter the directory credentials for a user in the OracleDBCreators group and a password for the database wallet. Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span> if you are only regenerating the password. Click <span class="bold">Next</span> if you want to configure additional database features.</p>
</li>
</ol>
<p class="subhead2"><a id="DBIMI586"></a>To unregister a database from the directory:</p>
<p>See <a href="toolover.htm#i1012800">"Starting Database Configuration Assistant"</a> to start this tool.</p>
<ol>
<li>
<p>After starting Database Configuration Assistant, select <span class="bold">Configure Database Options in a Database</span> and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Select a database and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>To unregister the database, select the <span class="bold">Unregister</span> option.</p>
</li>
<li>
<p>Enter the directory credentials for a user with the appropriate permissions.</p>
</li>
<li>
<p>Enter a password for the database wallet.</p>
</li>
</ol>
<p>When you unregister a database from the directory, Database Configuration Assistant performs the following configuration tasks:</p>
<ul>
<li>
<p>Removes the database entry and subtree from the directory.</p>
</li>
<li>
<p>Sets the <code>LDAP_DIRECTORY_ACCESS</code> parameter to <code>NONE</code>.</p>
</li>
<li>
<p>Removes the database from its enterprise domain (if the user has sufficient permissions).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Depending on user permissions, Database Configuration Assistant may be unable to remove a database from its domain in the directory. If it cannot, then use Oracle Enterprise Manager Database Control or Grid Control to remove it from the enterprise domain.</div>
</li>
<li>
<p>Does not remove the database wallet.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
"Navigating the Oracle Wallet Manager User Interface" and <a class="olink ASOAG162" href="../../network.112/e40393/asowalet.htm#ASOAG162">"Managing Wallets"</a> in the <a class="olink ASOAG162" href="../../network.112/e40393/asowalet.htm#ASOAG162"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for more information about deleting the wallet</div>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
To succeed at unregistering an Oracle Database from Oracle Internet Directory by using Database Configuration Assistant, you must be one of the following:
<ul>
<li>
<p>A member of the Oracle Context Admin group</p>
</li>
<li>
<p>A member of both the Database Admin group (for the database you are unregistering) and the Database Security Admin group</p>
</li>
<li>
<p>A member of both the Database Admin group (for the database you are unregistering) and the Domain Admin group (for the enterprise domain that contains the database).</p>
</li>
</ul>
</div>
<a id="i1006591"></a>
<div id="DBIMI256" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.1</span> About the Database Wallet and Password</h3>
<p>The database requires the wallet even if no SSL (Secure Sockets Layer) is used to secure the connection between the database and the directory. If SSL is used, then this wallet should be used to store the database's digital PKI certificate.</p>
<p>The wallet password you enter when using Database Configuration Assistant to register a database in the directory is the password to the wallet itself. This password is not the database's directory login credentials.</p>
<p>You can change this wallet password later, using Oracle Wallet Manager. However, if you forget this wallet password, then you must generate an entirely new wallet and password. To do so, you must first delete the existing database wallet, create a new wallet (which can be empty) and put it at the default wallet location, <code>$ORACLE_HOME/admin/</code><code><span class="codeinlineitalic">Oracle_SID</span></code><code>/wallet</code> (in UNIX environment). Next, unregister the database from the directory, and reregister the database in the directory. During that registration, another database wallet and password can be generated.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG160" href="../../network.112/e40393/asowalet.htm#ASOAG160">"Using Oracle Wallet Manager"</a> in the <a class="olink ASOAG160" href="../../network.112/e40393/asowalet.htm#ASOAG160"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for information about using Oracle Wallet Manager to change wallet passwords and, in general, to manage public key infrastructure (PKI) credentials</div>
<p>After you have prepared the directory for Enterprise User Security, then you can create the Enterprise User Security database and directory objects as described in <a href="#i1006636">"Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> for information about configuring an identity management realm in the directory</p>
</li>
<li>
<p><a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about changing the value of the <code>LDAP_DIRECTORY_ACCESS</code> initialization parameter</p>
</li>
</ul>
</div>
<a id="CHDHGCGI"></a>
<div id="DBIMI257" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.3.1.1</span> Sharing Wallets and sqlnet.ora Files Among Multiple Databases</h4>
<p>Multiple databases (that are not replicas) cannot share wallets, because wallets contain a database's identity. Therefore, if a <code>sqlnet.ora</code> file contains a wallet location, then multiple databases cannot share that <code>sqlnet.ora</code> file.</p>
<p>In order to share a single <code>sqlnet.ora</code> file among multiple databases, the following preconditions are required:</p>
<ul>
<li>
<p>User authentication should use passwords or Kerberos.</p>
</li>
<li>
<p>The wallet containing the password should reside at the default wallet location, which is where Database Configuration Assistant creates it.</p>
</li>
</ul>
<p>If the preceding conditions are met, then multiple databases <span class="italic">can</span> share the <code>sqlnet.ora</code> file because no wallet location information is stored in that file.</p>
<p>However, when <span class="italic">SSL</span> authentication is used between the user (client) and the database, the wallet location must be specified in the database server's <code>sqlnet.ora</code> file. Such a <code>sqlnet.ora</code> file cannot be shared by multiple databases for SSL-authenticated enterprise users.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006636"></a>
<div id="DBIMI258" class="sect1">
<h2 class="sect1"><span class="secnum">4.4</span> Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)</h2>
<p>This is the second phase of configuration steps required to implement Enterprise User Security. The configuration steps in this section assume the following recommended setup:</p>
<ul>
<li>
<p>You have prepared your database and your directory by completing the tasks described in <a href="#i1006647">"Preparing the Directory for Enterprise User Security (Phase One)"</a>.</p>
</li>
<li>
<p>Your users are stored in an identity management realm Users subtree.</p>
</li>
<li>
<p>You use the OracleDefaultDomain, which is the default <a href="glossary.htm#i996963"><span class="xrefglossterm">enterprise domain</span></a> that Database Configuration Assistant uses when you register databases in the directory.</p>
</li>
</ul>
<p>Note that databases must be in an enterprise domain that is in an identity management realm in order for enterprise user logins to work.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<p>If you do not use the OracleDefaultDomain or store your users in an identity management realm Users subtree, then see the following documentation:</p>
<ul>
<li>
<p><a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> for information about creating a new identity management realm or modifying an existing one, and for information about setting access control lists on directory objects</p>
</li>
<li>
<p><a href="adminste.htm#CACDDEIF">"Creating an Enterprise Domain"</a> to create another domain in which to put your database. Then substitute your new domain name for OracleDefaultDomain in the following configuration steps</p>
</li>
</ul>
</div>
<p>To configure Enterprise User Security objects in the database and directory perform the following tasks:</p>
<ul>
<li>
<p><a href="#i1006748">Task 1: Create Global Schemas and Global Roles in the Database</a></p>
</li>
<li>
<p><a href="#i1010324">Task 2: Configure User-Schema Mappings for the Enterprise Domain</a></p>
</li>
<li>
<p><a href="#i1006807">Task 3: Create Enterprise Roles in the Enterprise Domain</a></p>
</li>
<li>
<p><a href="#i1009695">Task 4: Add Global Database Roles to Enterprise Roles</a></p>
</li>
<li>
<p><a href="#i1009700">Task 5: Grant Enterprise Roles to Enterprise Users for Database Access</a></p>
</li>
</ul>
<p class="subhead2"><a id="i1006748"></a><a id="DBIMI587"></a>Task 1: Create Global Schemas and Global Roles in the Database</p>
<p>Although this step can also be completed by using Oracle Enterprise Manager, the following examples use SQL*Plus directly:</p>
<ol>
<li>
<p>Create a shared schema for enterprise users. The following syntax example creates a shared schema named guest:</p>
<pre>
SQL&gt; CREATE USER guest IDENTIFIED GLOBALLY AS '';
</pre>
<p>If you do not want to use a shared schema, then specify a user DN between the single quotation marks to create an exclusive schema.</p>
</li>
<li>
<p>Grant the <code>CREATE SESSION</code> privilege to the shared schema created in Step 1 so users can connect to it. The following syntax example grants the <code>CREATE SESSION</code> privilege to the guest shared schema:</p>
<pre>
SQL&gt; GRANT CREATE SESSION TO guest;
</pre>
<p>Alternatively, you can grant the <code>CREATE SESSION</code> privilege to a global role, which you grant to specific users through an <a href="glossary.htm#i996975"><span class="xrefglossterm">enterprise role</span></a>. See Step 3.</p>
</li>
<li>
<p>Create global roles for the database to hold relevant privileges. The following syntax examples create the <code>emprole</code> and <code>custrole</code> global roles:</p>
<pre>
SQL&gt; CREATE ROLE emprole IDENTIFIED GLOBALLY;
SQL&gt; CREATE ROLE custrole IDENTIFIED GLOBALLY;
</pre>
<p>Global roles are associated with enterprise roles, which are created later, and then are allocated to enterprise users.</p>
</li>
<li>
<p>Grant privileges to the new global roles that were created in Step 3. The following syntax example grants the <code>SELECT</code> privilege to <code>emprole</code> and <code>custrole</code> global roles on the products table:</p>
<pre>
SQL&gt; GRANT select ON products TO custrole, emprole;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF" href="../../server.112/e41084/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about the syntax used for these steps</div>
</li>
</ol>
<p class="subhead2"><a id="i1010324"></a><a id="DBIMI588"></a>Task 2: Configure User-Schema Mappings for the Enterprise Domain</p>
<p>Use Enterprise Manager to configure user-schema mappings for the OracleDefaultDomain by using the following steps:</p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select <span class="bold">OracleDefaultDomain</span>. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">User-Schema Mappings</span> tab. All user-schema maps created at the domain level are displayed. User-schema maps created at database levels are not displayed here.</p>
</li>
<li>
<p>Click <span class="bold">Create</span> to create a new user-schema mapping for the domain.</p>
<p>The Create Mapping page is displayed.</p>
</li>
<li>
<p>Under the From section, select <span class="bold">Users</span> to map an individual enterprise user to a database schema. Alternatively, select <span class="bold">Subtree</span> to map a directory subtree containing multiple users. You can use the Search icon to search for the appropriate user or subtree.</p>
</li>
<li>
<p>Under the To section, enter the name of the <span class="bold">Schema</span> to which the user or subtree should be mapped. This is the schema that you created in Task 1.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span> in the Create Mapping page.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> in the Configure Domain page.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also create user-schema mappings for an individual database in an enterprise domain. Such mappings apply only to that particular database and not to other databases in the domain.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="getstrtd.htm#CBHDDECG">"Mapping Enterprise Users to the Shared Schema"</a> for an example on creating user-schema mappings</div>
<p class="subhead2"><a id="i1006807"></a><a id="DBIMI589"></a>Task 3: Create Enterprise Roles in the Enterprise Domain</p>
<p>Use Enterprise Manager to create enterprise roles in the OracleDefaultDomain by using the following steps:</p>
<ol>
<li>
<p>Select OracleDefaultDomain in the Manage Enterprise Domains page. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Enterprise Roles</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Create</span> to create a new enterprise role.</p>
<p>The <span class="bold">Create Enterprise Role</span> page appears.</p>
</li>
<li>
<p>Enter a name for the enterprise role in the <span class="bold">Name</span> field. Click <span class="bold">Continue</span>.</p>
<p>The new role is displayed in the Configure Domain page.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="getstrtd.htm#CBHBGHDI">"Using Enterprise Roles"</a> for an example on creating and using enterprise roles</div>
<p class="subhead2"><a id="i1009695"></a><a id="DBIMI590"></a>Task 4: Add Global Database Roles to Enterprise Roles</p>
<p>Use Enterprise Manager to add the global database roles that you created in Task 1 to the enterprise roles that you created in Task 3 by using the following steps:</p>
<ol>
<li>
<p>Select the enterprise role that you just created in the Configure Domain page. Click <span class="bold">Edit</span>.</p>
<p>The Edit Enterprise Role page is displayed.</p>
</li>
<li id="CHDHAABG">
<p>Make sure that the <span class="bold">DB Global Roles</span> tab is selected. Click <span class="bold">Add</span> to add global roles from databases that are part of the enterprise domain.</p>
<p>The Search and Select Database Global Roles page appears.</p>
</li>
<li id="CHDGAJGG">
<p>Select the <span class="bold">Database</span> that contains the global roles you wish to add. Log in to the selected database by supplying a <span class="bold">User Name</span> and <span class="bold">Password</span>. Click <span class="bold">Go</span>.</p>
</li>
<li id="CHDCJIFA">
<p>Select the global roles to add. Click <span class="bold">Select</span>.</p>
<p>The selected roles appear in the Edit Enterprise Role page.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="getstrtd.htm#CBHBGHDI">"Using Enterprise Roles"</a> for an example on creating and using enterprise roles</div>
<p class="subhead2"><a id="i1009700"></a><a id="DBIMI591"></a>Task 5: Grant Enterprise Roles to Enterprise Users for Database Access</p>
<p>Use Enterprise Manager to grant enterprise roles that you created in Task 3 to the enterprise users by using the following steps:</p>
<ol>
<li>
<p>Click the <span class="bold">Grantees</span> tab in the Edit Enterprise Role page.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Select Users or Groups page is displayed.</p>
</li>
<li>
<p>Select the <span class="bold">Search Base</span> or the subtree that contains the user or group. Select User under <span class="bold">View</span> if you are granting the enterprise role to a user. Select Group under <span class="bold">View</span>, if you are granting the role to a group. Optionally, enter the common name of the user or group in the <span class="bold">Name</span> field. Click <span class="bold">Go</span>.</p>
</li>
<li>
<p>Select the users or groups to be granted the enterprise role. Click <span class="bold">Select</span>.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span> in the Edit Enterprise Role page.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> in the Configure Domain page.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="getstrtd.htm#CBHBGHDI">"Using Enterprise Roles"</a> for an example on creating and using enterprise roles</div>
</div>
<!-- class="sect1" -->
<a id="BIBJAGDC"></a>
<div id="DBIMI259" class="sect1">
<h2 class="sect1"><span class="secnum">4.5</span> Configure Enterprise User Security for the Authentication Method You Require (Phase Three)</h2>
<p>In the third phase, you complete the Enterprise User Security configuration based on the authentication method you have chosen. Go to one of the following sections:</p>
<ul>
<li>
<p><a href="#i1008031">"Configuring Enterprise User Security for Password Authentication"</a></p>
</li>
<li>
<p><a href="#i1008030">"Configuring Enterprise User Security for Kerberos Authentication"</a></p>
</li>
<li>
<p><a href="#i1008032">"Configuring Enterprise User Security for SSL Authentication"</a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="concepts.htm#CHDFEJBG">Table 1-1, "Enterprise User Security Authentication: Selection Criteria"</a> for a comparison of the benefits provided by password, Kerberos, and SSL authentication for Enterprise User Security</div>
</li>
</ul>
<a id="i1008031"></a>
<div id="DBIMI122" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.1</span> Configuring Enterprise User Security for Password Authentication</h3>
<p>By default, new enterprise domains are configured to accept all supported user authentication types (password, Kerberos, and SSL). If you want enterprise users to be authenticated by passwords, then you must configure that as described in the following tasks.</p>
<p>The configuration steps in this section assume the following:</p>
<ul>
<li>
<p>You have prepared your directory by completing the tasks described in <a href="#i1006647">"Preparing the Directory for Enterprise User Security (Phase One)"</a>.</p>
</li>
<li>
<p>You have configured your Enterprise User Security objects in the database and the directory by completing the tasks described in <a href="#i1006636">"Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)"</a>.</p>
</li>
<li>
<p>You have configured an SSL instance with no authentication for Oracle Internet Directory as described in <span class="italic">Oracle Internet Directory Administrator's Guide</span>. If you are using an <code>ldap.ora</code> file, then also ensure that the port number for this SSL with no authentication instance is listed there as your directory SSL port.</p>
</li>
</ul>
<p>To configure Enterprise User Security for password authentication, perform the following tasks:</p>
<ul>
<li>
<p><a href="#i1009712">Task 1: (Optional) Enable the Enterprise Domain to Accept Password Authentication</a></p>
</li>
<li>
<p><a href="#i1009722">Task 2: Connect as a Password-Authenticated Enterprise User</a></p>
</li>
</ul>
<p class="subhead2"><a id="i1009712"></a><a id="DBIMI592"></a>Task 1: (Optional) Enable the Enterprise Domain to Accept Password Authentication</p>
<p>By default, OracleDefaultDomain is configured to accept password authentication. If this has been changed, then use Oracle Enterprise Manager Database Control or Grid Control to enable password authentication for OracleDefaultDomain using the following steps:</p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab for the database. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select <span class="bold">OracleDefaultDomain</span>. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Configuration</span> tab.</p>
</li>
<li>
<p>Under User Authentication Types Accepted, select <span class="bold">Password</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="i1009722"></a><a id="DBIMI593"></a>Task 2: Connect as a Password-Authenticated Enterprise User</p>
<p>For an enterprise user whose directory login name is <code>hscortea</code> and whose password is <code>Easy2rem</code>, enter the following to connect to the database by using SQL*Plus:</p>
<pre>
SQL&gt; connect hscortea@&lt;<span class="variable">Oracle Net Service Name</span>&gt;
Enter password:
/* Enter Easy2rem when prompted for the password*/
</pre>
<p>The database authenticates the enterprise user (<code>hscortea</code>) by verifying the username-password combination against the directory entry associated with this user. Then, it identifies the proper schema and retrieves the user's global roles. If successful, then the connection to the database is established.</p>
<p>If your connection succeeds, then the system responds <code>Connected to:...</code>. This is the confirmation message of a successful connect and setup. If an error message is displayed, then see <a href="#i1007746">"ORA-# Errors for Password-Authenticated Enterprise Users"</a>.</p>
<p>If you do connect successfully, then check that the appropriate global roles were retrieved from the directory, by entering the following at the SQL*Plus prompt:</p>
<pre>
select * from session_roles
</pre>
<p>If the global roles were not retrieved from the directory, then see <a href="#i1008271">"NO-GLOBAL-ROLES Checklist"</a>.</p>
<p>You have completed password-authenticated Enterprise User Security configuration.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1007713">"Troubleshooting Enterprise User Security"</a> for information about diagnosing and resolving errors</p>
</li>
<li>
<p><a href="adminste.htm#g1017276">Chapter 5, "Administering Enterprise User Security"</a> for information about configuring the identity management realm, and about creating and managing enterprise domains, enterprise roles, and enterprise users</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1008030"></a>
<div id="DBIMI123" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.2</span> Configuring Enterprise User Security for Kerberos Authentication</h3>
<p>The configuration steps in this section assume the following:</p>
<ul>
<li>
<p>You have registered your databases with the Kerberos authentication server and configured your Oracle Net Services as described under <a class="olink ASOAG060" href="../../network.112/e40393/asokerb.htm#ASOAG060">"Configuring Kerberos Authentication"</a> in the <a class="olink ASOAG060" href="../../network.112/e40393/asokerb.htm#ASOAG060"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a>.</p>
</li>
<li>
<p>You have prepared your directory by completing the tasks described in <a href="#i1006647">"Preparing the Directory for Enterprise User Security (Phase One)"</a>.</p>
</li>
<li>
<p>You have configured your Enterprise User Security objects in the database and the directory by completing the tasks described in <a href="#i1006636">"Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)"</a>.</p>
</li>
<li>
<p>You have configured an SSL instance with no authentication for Oracle Internet Directory as described in <span class="italic">Oracle Internet Directory Administrator's Guide</span>. If you are using an <code>ldap.ora</code>, then also ensure that the port number for this SSL with no authentication instance is listed there as your directory SSL port.</p>
</li>
</ul>
<p>To configure Enterprise User Security for Kerberos authentication, perform the following tasks:</p>
<ul>
<li>
<p><a href="#i1009790">Task 1: Configure Oracle Internet Directory Self-Service Console to display the Kerberos principal name attribute</a></p>
</li>
<li>
<p><a href="#i1009795">Task 2: (Optional) Configure the Kerberos Principal Name Directory Attribute for the Identity Management Realm</a></p>
</li>
<li>
<p><a href="#i1009800">Task 3: Specify the Enterprise User's Kerberos Principal Name in the krbPrincipalName Attribute</a></p>
</li>
<li>
<p><a href="#i1009805">Task 4: (Optional) Enable the Enterprise Domain to Accept Kerberos Authentication</a></p>
</li>
<li>
<p><a href="#i1009810">Task 5: Connect as a Kerberos-Authenticated Enterprise User</a></p>
</li>
</ul>
<p class="subhead2"><a id="i1009790"></a><a id="DBIMI594"></a>Task 1: Configure Oracle Internet Directory Self-Service Console to display the Kerberos principal name attribute</p>
<p>By default, the Oracle Internet Directory Self-Service Console user interface does not display the field where you can configure Kerberos principal names. The first time you create Kerberos-authenticated users in the directory, you must configure this tool to display the <code>krbPrincipalName</code> attribute in its Create User page by using the following steps:</p>
<ol>
<li>
<p>Log in to the Oracle Internet Directory Self-Service Console.</p>
<p>Enter the URL to access the Oracle Internet Directory Self-Service Console in a browser window. For example:</p>
<pre>
http://myhost1:7777/oiddas
</pre>
<p>Log in as the <code>orcladmin</code> user.</p>
</li>
<li>
<p>Click the <span class="bold">Configuration</span> tab. Click the <span class="bold">User Entry</span> subtab.</p>
</li>
<li>
<p>Click <span class="bold">Next</span> until the Configure User Attributes page appears.</p>
</li>
<li>
<p>In the Configure User Attributes page, click <span class="bold">Add New Attribute</span>.</p>
<p>The Add New Attribute page appears.</p>
</li>
<li>
<p>In the Add New Attribute page, select <span class="bold">krbPrincipalName</span> from the <span class="bold">Directory Attribute Name</span> box (or the attribute that you have configured for <code>orclCommonKrbPrincipalAttribute</code> in your identity management realm) and perform the following steps on this page:</p>
<ol>
<li>
<p>Enter a value, say Kerberos Principal Name, for the <span class="bold">UI Label</span>.</p>
</li>
<li>
<p>Select <span class="bold">Searchable</span> and <span class="bold">Viewable</span>.</p>
</li>
<li>
<p>Select <span class="bold">Single Line Text</span> from the <span class="bold">UI Type</span>.</p>
</li>
<li>
<p>Click<span class="bold">Done</span>.</p>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Next</span> to navigate to the Configure Attribute Categories page. Select <span class="bold">Basic Information</span> and click <span class="bold">Edit</span>.</p>
<p>The Edit Category page appears.</p>
</li>
<li>
<p>Perform the following steps on the <span class="bold">Edit Category</span> page:</p>
<ol>
<li>
<p>Select <span class="bold">krbPrincipalName</span> in the left category list.</p>
</li>
<li>
<p>Click <span class="bold">Move,</span> to move <span class="bold">krbPrincipalName</span> to the right-hand list.</p>
</li>
<li>
<p>Click <span class="bold">Done</span>.</p>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Next</span> until you reach the last step. Click <span class="bold">Finish</span> to save your work.</p>
</li>
</ol>
<p class="subhead2"><a id="i1009795"></a><a id="DBIMI595"></a>Task 2: (Optional) Configure the Kerberos Principal Name Directory Attribute for the Identity Management Realm</p>
<p>Use Oracle Internet Directory Self-Service Console to enter the directory attribute used to store the Kerberos principal name for the identity management realm you are using in the directory. By default, Kerberos principal names are stored in the <code>krbPrincipalName</code> attribute but can be changed to correspond to your directory configuration by changing <code>orclCommonKrbPrincipalAttribute</code> in the identity management realm. For more information about this task, see <a href="adminste.htm#i1010278">"Setting Login Name, Kerberos Principal Name, User Search Base, and Group Search Base Identity Management Realm Attributes"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
By default, the Oracle Internet Directory Self-Service Console user interface does not display the field where you can configure Kerberos principal names. The first time you create Kerberos-authenticated users in the directory, you must configure the console to display the <code>krbPrincipalName</code> attribute in its Create User window.</div>
<p class="subhead2"><a id="i1009800"></a><a id="DBIMI596"></a>Task 3: Specify the Enterprise User's Kerberos Principal Name in the krbPrincipalName Attribute</p>
<p>Use Oracle Internet Directory Self-Service Console to specify the enterprise user's Kerberos principal name (<code>Kerberos_username@Kerberos_realm</code>) in the <code>krbPrincipalName</code> attribute of the enterprise user's directory entry. For more information about this task, see <a href="adminste.htm#i1007943">"Creating New Enterprise Users"</a>.</p>
<p class="subhead2"><a id="i1009805"></a><a id="DBIMI597"></a>Task 4: (Optional) Enable the Enterprise Domain to Accept Kerberos Authentication</p>
<p>By default, OracleDefaultDomain is configured to accept all types of authentication. If this has been changed or if you are using another domain, then use Oracle Enterprise Manager Database Control or Grid Control to enable Kerberos authentication for your enterprise domain by performing the following steps:</p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab for the database. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select <span class="bold">OracleDefaultDomain</span>. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Configuration</span> tab.</p>
</li>
<li>
<p>Under User Authentication Types Accepted, select <span class="bold">Kerberos</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="i1009810"></a><a id="DBIMI598"></a>Task 5: Connect as a Kerberos-Authenticated Enterprise User</p>
<p>If the <a href="glossary.htm#i997756"><span class="xrefglossterm">KDC</span></a> is not part of the operating system, such as Kerberos V5 from MIT, then the user must get an initial ticket with the <code>FORWARDABLE</code> flag set by using the <code>okinit</code> utility. See <a class="olink ASOAG062" href="../../network.112/e40393/asokerb.htm#ASOAG062">"Obtaining the Initial Ticket with the okinit Utility"</a> in the <span class="italic">Oracle Database Advanced Security Administrator's Guide</span>.</p>
<p>If the KDC is part of the operating system, such as Windows 2000 or some versions of Linux or UNIX, then the operating system automatically picks up the user's ticket (with the <code>FORWARDABLE</code> flag set) from the cache when the user logs in.</p>
<p>The user connects to the database by launching SQL*Plus and entering the following at the command line:</p>
<pre>
SQL&gt; connect /@&lt;net_service_name&gt;
</pre>
<p>The database uses Kerberos to authenticate the user. The database authenticates itself to the directory by password.</p>
<p>If your connection succeeds, then the system responds with <code>Connected to:...</code>. This is the confirmation message of a successful connect and setup. If an error message is displayed, then see <a href="#i1008167">"ORA-# Errors for Kerberos-Authenticated Enterprise Users"</a>.</p>
<p>If you do connect successfully, then check that the appropriate global roles were retrieved from the directory, by entering the following at the SQL*Plus prompt:</p>
<pre>
select * from session_roles
</pre>
<p>If the global roles were not retrieved from the directory, then see <a href="#i1008271">"NO-GLOBAL-ROLES Checklist"</a>.</p>
<p>You have completed Kerberos-authenticated Enterprise User Security configuration.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1007713">"Troubleshooting Enterprise User Security"</a> for information about diagnosing and resolving errors</p>
</li>
<li>
<p><a href="adminste.htm#g1017276">Chapter 5, "Administering Enterprise User Security"</a> for information about configuring the identity management realm, and information about creating and managing enterprise domains, enterprise roles, and enterprise users</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1008032"></a>
<div id="DBIMI260" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.3</span> Configuring Enterprise User Security for SSL Authentication</h3>
<p>The configuration steps in this section assume the following:</p>
<ul>
<li>
<p>You have obtained the appropriate PKI credentials and used Oracle Wallet Manager to create wallets for the directories, databases, and clients that you want to include in your Enterprise User Security implementation.</p>
</li>
<li>
<p>You have confirmed that each enterprise user entry in Oracle Internet Directory is provisioned with a unique PKI credential. However, in this release an enterprise user can have different DNs in his or her PKI certificate and Oracle Internet Directory entry. Also in this release, the database entry can have different DNs in its PKI certificate and Oracle Internet Directory entry.</p>
<p>You must provision user certificates in their respective Oracle Internet Directory user entries in order to support using different DNs in the certificate and the directory. A user certificate is provisioned in to the <code>usercertificate</code> attribute of the user entry. If you prefer not to provision the certificates, then you must make sure that the subject DNs in the certificates match the user DNs in the directory.</p>
<p>Oracle Internet Directory 10<span class="italic">g</span> Release2 (10.1.2) includes certificate matching rules to support the new functionality of being able to use different DNs in the certificate and the directory. The <code>orclpkimatchingrule</code> attribute in Oracle Internet Directory determines the type of match that is used.</p>
<p>The default value of <code>orclpkimatchingrule</code> is 2. This enables you to support both provisioned and non-provisioned user entries. The database finds out a user's Oracle Internet Directory DN based on a search for the user's certificate provisioned in the directory. If the certificate search fails, then the database reverts to using an exact match between the user's certificate DN and his or her Oracle Internet Directory DN.</p>
<p>If all users have certificates provisioned in Oracle Internet Directory, then you can set the <code>orclpkimatchingrule</code> to 1. This instructs Oracle Internet Directory to always conduct a certificate search. For instance, if your certificate authority does not support two common names in certificate DNs but the directory DNs are using two common names, then you would need to provision all user certificates into the directory. You can then set the <code>orclpkimatchingrule</code> to 1.</p>
<p>If you do not want to support the functionality of using different DNs in the PKI certificate and Oracle Internet Directory, then you can set the <code>orclpkimatchingrule</code> value to 0. You use this setting if all certificate DNs match directory DNs and you do not wish to provision the certificates.</p>
<p>You can also create your own mapping rules to map certificate DNs to directory DNs in Oracle Internet Directory 10g Release 2 (10.1.2.0.2). To use mapping rules, <code>orclpkimatchingrule</code> is set to 3 or 4.</p>
<p>When you want to use the mapping rule for all users, set <code>orclpkimatchingrule</code> to 3. If you also need to support certificate-based search and exact match, then set <code>orclpkimatchingrule</code> to 4.</p>
<p><a href="#CHDCEJEB">Table 4-2</a> describes the values of the <code>orclpkimatchingrule</code> attribute.</p>
<div id="DBIMI599" class="tblformal">
<p class="titleintable"><a id="sthref98"></a><a id="CHDCEJEB"></a>Table 4-2 Oracle Internet Directory Matching Rules</p>
<table class="cellalignment2212" title="Oracle Internet Directory Matching Rules" summary="This tables lists the values that can be assigned to the orclpkimatchingrule attribute in Oracle Internet Directory." dir="ltr">
<thead>
<tr class="cellalignment2199">
<th class="cellalignment2211" id="r1c1-t31">Value</th>
<th class="cellalignment2211" id="r1c2-t31">Rule</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r2c1-t31" headers="r1c1-t31">
<p><code>orclpkimatchingrule=0</code></p>
</td>
<td class="cellalignment2205" headers="r2c1-t31 r1c2-t31">
<p>Exact match. The bind is based on the subject DN of the client certificate. This DN is compared with the DN of the user in the directory.</p>
</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r3c1-t31" headers="r1c1-t31">
<p><code>orclpkimatchingrule=1</code></p>
</td>
<td class="cellalignment2205" headers="r3c1-t31 r1c2-t31">
<p>Certificate hash. The bind is based on the hashed value of the certificate.</p>
</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r4c1-t31" headers="r1c1-t31">
<p><code>orclpkimatchingrule=2</code></p>
<p>(default)</p>
</td>
<td class="cellalignment2205" headers="r4c1-t31 r1c2-t31">
<p>Certificate hash/exact match. The bind is based on the hashed value of the certificate. If this operation fails, then a bind based on the subject DN of the client certificate is performed.</p>
</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r5c1-t31" headers="r1c1-t31">
<p><code>orclpkimatchingrule=3</code></p>
</td>
<td class="cellalignment2205" headers="r5c1-t31 r1c2-t31">
<p>Mapping rule only.</p>
</td>
</tr>
<tr class="cellalignment2199">
<td class="cellalignment2205" id="r6c1-t31" headers="r1c1-t31">
<p><code>orclpkimatchingrule=4</code></p>
</td>
<td class="cellalignment2205" headers="r6c1-t31 r1c2-t31">
<p>Mapping rule/certificate hash/exact match. The bind is based on the mapping rule. If this operation fails, a bind based on the hashed value of the certificate is performed. If this operation fails, then a bind based on an exact match of the certificate is performed.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> and <a class="olink OIMUR" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIMUR"><span class="italic">Oracle Identity Management User Reference Guide</span></a> for information on how to modify the <code>orclpkimatchingrule</code> attribute</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
A certificate search will fail if there is no user entry under the realm's user search base with that certificate, or if you are using an older version of Oracle Internet Directory that does not support the certificate search functionality. If the certificate search fails, then the database will revert to the old behavior of matching the user DN with the certificate DN for a successful connection.</div>
</li>
<li>
<p>You have enabled SSL for your client-database Oracle Net connections as described in <a class="olink ASOAG074" href="../../network.112/e40393/asossl.htm#ASOAG074">"Enabling SSL"</a> in the <span class="italic">Oracle Database Advanced Security Administrator's Guide</span>. Ensure that you included the following steps when you enabled SSL:</p>
<ul>
<li>
<p>Enabled SSL for your database listener on <code>TCPS</code> and provided a corresponding TNS name</p>
</li>
<li>
<p>Stored your database PKI credentials in the database wallet that Database Configuration Assistant automatically created during database registration</p>
</li>
</ul>
</li>
<li>
<p>You have configured an SSL instance with two-way authentication for Oracle Internet Directory as described in <a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a>.</p>
</li>
<li>
<p>You have prepared your directory by completing the tasks described in <a href="#i1006647">"Preparing the Directory for Enterprise User Security (Phase One)"</a>.</p>
</li>
<li>
<p>You have configured your Enterprise User Security objects in the database and the directory by completing the tasks described in <a href="#i1006636">"Configuring Enterprise User Security Objects in the Database and the Directory (Phase Two)"</a>.</p>
</li>
</ul>
<p>To configure Enterprise User Security for SSL authentication, perform the following tasks:</p>
<ul>
<li>
<p><a href="#i1009819">Task 1: Enable the Enterprise Domain to Accept SSL Authentication</a></p>
</li>
<li>
<p><a href="#i1009824">Task 2: Set the LDAP_DIRECTORY_ACCESS Initialization Parameter to SSL</a></p>
</li>
<li>
<p><a href="#i1009829">Task 3: Connect as an SSL-Authenticated Enterprise User</a></p>
</li>
</ul>
<p class="subhead2"><a id="i1009819"></a><a id="DBIMI600"></a>Task 1: Enable the Enterprise Domain to Accept SSL Authentication</p>
<p>By default, OracleDefaultDomain is configured to accept all types of authentication. If this has been changed or if you are using another domain, then use Oracle Enterprise Manager Database Control or Grid Control to enable SSL authentication for your enterprise domain by performing the following steps:</p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab for the database. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select <span class="bold">OracleDefaultDomain</span>. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Configuration</span> tab.</p>
</li>
<li>
<p>Under User Authentication Types Accepted, select <span class="bold">SSL</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="i1009824"></a><a id="DBIMI601"></a>Task 2: Set the LDAP_DIRECTORY_ACCESS Initialization Parameter to SSL</p>
<p>You can change this initialization parameter either by editing your database initialization parameter file or by issuing an <code>ALTER SYSTEM</code> SQL command with the <code>SET</code> clause.</p>
<p>For example, the following <code>ALTER SYSTEM</code> command changes the <code>LDAP_DIRECTORY_ACCESS</code> parameter value to <code>SSL</code> in the server parameter file:</p>
<pre>
ALTER SYSTEM SET LDAP_DIRECTORY_ACCESS=SSL SCOPE=SPFILE
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about editing initialization parameters</p>
</li>
<li>
<p><a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about the <code>LDAP_DIRECTORY_ACCESS</code> initialization parameter</p>
</li>
<li>
<p><a class="olink SQLRF" href="../../server.112/e41084/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about using the <code>ALTER SYSTEM</code> command with the <code>SET</code> clause</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="i1009829"></a><a id="DBIMI602"></a>Task 3: Connect as an SSL-Authenticated Enterprise User</p>
<p>Connecting as an SSL-authenticated enterprise user involves ensuring that you have the appropriate Oracle wallet features configured and that you do not have a wallet location specified in the client <code>sqlnet.ora</code> file. If the client <code>sqlnet.ora</code> file contains a wallet location, then multiple users and databases cannot share that file. Only the server <code>sqlnet.ora</code> file must have a value for the wallet location parameter.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Database Security Guide</span> for the default location of a user's wallet when the authentication used between the user and the database is SSL</div>
<p>To connect as an SSL-authentication enterprise user, perform the following steps:</p>
<ol>
<li>
<p>Use Oracle Wallet Manager to download a user wallet from the directory. See <a class="olink ASOAG164" href="../../network.112/e40393/asowalet.htm#ASOAG164">"Downloading a Wallet from an LDAP Directory"</a> in the <span class="italic">Oracle Database Advanced Security Administrator's Guide</span>.</p>
</li>
<li>
<p>Use Oracle Wallet Manager to enable autologin for the user wallet. Enabling autologin generates a single sign-on (<code>.sso</code>) file and enables authentication to the SSL adapter. See <a class="olink ASOAG161" href="../../network.112/e40393/asowalet.htm#ASOAG161"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for information about using the autologin feature of Oracle Wallet Manager.</p>
</li>
<li>
<p>Set the <code>TNS_ADMIN</code> environment variable (to point to the client's <code>sqlnet.ora</code> file) for the client if the client Oracle home points to a server Oracle home. (Because a server must have a wallet location set in its <code>sqlnet.ora</code> file and a client cannot have a wallet location specified there, the server and client cannot share <code>sqlnet.ora</code> files.)</p>
<p>If you have a separate client Oracle home, then you do not need to set the <code>TNS_ADMIN</code> environment variable.</p>
</li>
<li>
<p>Launch SQL*Plus and enter the following at the command line:</p>
<pre>
SQL&gt; /@<span class="variable">connect_identifier</span>
</pre>
<p>where <code>connect_identifer</code> is the Oracle Net service name you set up when you configured SSL for the database client.</p>
<p>If your connection succeeds, then the system responds with <code>Connected to:...</code>. This is the confirmation message of a successful connect and setup. If an error message is displayed, then see <a href="#i1008171">"ORA-# Errors for SSL-Authenticated Enterprise Users"</a>.</p>
<p>If you do connect successfully, then check that the appropriate global roles were retrieved from the directory, by entering the following at the SQL*Plus prompt:</p>
<pre>
select * from session_roles
</pre>
<p>If the global roles were not retrieved from the directory, then see <a href="#i1008271">"NO-GLOBAL-ROLES Checklist"</a>.</p>
</li>
</ol>
<p>You have completed SSL-authenticated Enterprise User Security configuration.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For security purposes, ensure that you disable auto login for the user wallet after logging out from the enterprise user session with the database. This is especially important if the client computer is shared by more than one user. See <a class="olink ASOAG161" href="../../network.112/e40393/asowalet.htm#ASOAG161"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for information about using Oracle Wallet Manager to disable auto login for an Oracle wallet.</div>
<a id="BIBHBIBE"></a>
<div id="DBIMI261" class="sect3">
<h4 class="sect3"><span class="secnum">4.5.3.1</span> Viewing the Database DN in the Wallet and in the Directory</h4>
<p>When you use Database Configuration Assistant to register your database in the directory, this tool automatically creates identical DNs for the database wallet and the database directory entry. To view the database DN, use one of the following options:</p>
<p>Use Oracle Directory Manager to look in the directory under the realm Oracle Context for</p>
<p><code>cn=&lt;short_database_name&gt;,cn=OracleContext,&lt;</code><code><span class="codeinlineitalic">realm_DN</span></code><code>&gt;</code></p>
<p>where <code><span class="codeinlineitalic">short_database_name</span></code> is the first part of the fully qualified domain name for a database. For example, if you have a database named <code>db1.us.example.com</code>, then the short database name is <code>db1</code>.</p>
<ul>
<li>
<p>Use the following <a id="sthref99"></a><a id="sthref100"></a><code>mkstore</code> utility syntax on the command line:</p>
<pre>
mkstore -wrl &lt;wallet_location&gt; -viewEntry ORACLE.SECURITY.DN
</pre>
<p>where <code><span class="codeinlineitalic">wallet_location</span></code> is the path to the database wallet.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1007713">"Troubleshooting Enterprise User Security"</a> for information about diagnosing and resolving errors</p>
</li>
<li>
<p><a href="adminste.htm#g1017276">Chapter 5, "Administering Enterprise User Security"</a> for information about configuring the identity management realm, and information about creating and managing enterprise domains, enterprise roles, and enterprise users</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1008086"></a>
<div id="DBIMI262" class="sect1">
<h2 class="sect1"><span class="secnum">4.6</span> Enabling Current User Database Links</h2>
<p>Current user database links require SSL-enabled network connections between the databases. Before you can enable current user database links, you must enable SSL, create Oracle wallets, and obtain PKI credentials for all databases involved.</p>
<p>Then, use Oracle Enterprise Manager Database Control or Grid Control to enable current user database links between databases within the <a href="glossary.htm#i996963"><span class="xrefglossterm">enterprise domain</span></a> in the directory by using the following steps:</p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select the enterprise domain that you wish to configure. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Configuration</span> tab.</p>
</li>
<li>
<p>Select <span class="bold">Enable Current User Database Links in this domain</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1007713"></a>
<div id="DBIMI263" class="sect1">
<h2 class="sect1"><span class="secnum">4.7</span> Troubleshooting Enterprise User Security</h2>
<p>This section describes potential problems and associated corrective actions in the following topics:</p>
<ul>
<li>
<p><a href="#i1007746">ORA-# Errors for Password-Authenticated Enterprise Users</a></p>
</li>
<li>
<p><a href="#i1008167">ORA-# Errors for Kerberos-Authenticated Enterprise Users</a></p>
</li>
<li>
<p><a href="#i1008171">ORA-# Errors for SSL-Authenticated Enterprise Users</a></p>
</li>
<li>
<p><a href="#i1008271">NO-GLOBAL-ROLES Checklist</a></p>
</li>
<li>
<p><a href="#i1007386">USER-SCHEMA ERROR Checklist</a></p>
</li>
<li>
<p><a href="#i1007706">DOMAIN-READ-ERROR Checklist</a></p>
</li>
</ul>
<a id="i1007746"></a>
<div id="DBIMI264" class="sect2">
<h3 class="sect2"><span class="secnum">4.7.1</span> ORA-# Errors for Password-Authenticated Enterprise Users</h3>
<p>If you receive an ORA-# error while using password-authenticated Enterprise User Security, then locate the error in the following section and take the recommended action.</p>
<div class="msgset">
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref101"></a>ORA-1017: Invalid username/password; login denied</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See <a href="#i1007386">"USER-SCHEMA ERROR Checklist"</a></div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<a id="i1007866"></a>
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref102"></a>ORA-28030: Server encountered problems accessing LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> Indicates a problem with the connection between the database and the directory.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Check that the correct <code>wallet_location</code> value is specified in the database's <code>sqlnet.ora</code> file in case you are not using the default wallet location. You can use Oracle Net Manager to enter the wallet location. You do not need to specify a wallet location in the <code>sqlnet.ora</code> file if the default wallet location is being used. If a wallet location is specified in the <code>sqlnet.ora</code> file, then you must ensure that it is correct.</p>
</li>
<li>
<p>If Domain Name System (DNS) server discovery of Oracle Internet Directory is not used, check that there is a correct <code>ldap.ora</code> file in <code>$LDAP_ADMIN</code>, <code>$ORACLE_HOME/ldap/admin</code>, <code>$TNS_ADMIN</code>, or <code>$ORACLE_HOME/network/admin</code>. (See <a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> for information about DNS server discovery.)</p>
</li>
<li>
<p>Check that the SSL port used (by way of either DNS discovery or an <code>ldap.ora</code> file) supports SSL with no authentication.</p>
</li>
<li>
<p>Check that the <code>LDAP_DIRECTORY_ACCESS</code> parameter is set to <code>PASSWORD</code> in the database initialization parameters file.</p>
</li>
<li>
<p>Use Database Configuration Assistant to reset the database password used to authenticate the database to Oracle Internet Directory. This resets it both locally in the database wallet, and remotely in the database entry in Oracle Internet Directory.</p>
</li>
<li>
<p>Check that the database wallet has autologin enabled. Either use Oracle Wallet Manager or check that there is a <code>cwallet.sso</code> file in <code>$ORACLE_HOME/admin/&lt;ORACLE_SID&gt;/wallet/</code>.</p>
</li>
<li>
<p>Use the password stored in the database wallet to check that the database can bind to Oracle Internet Directory:</p>
<ul>
<li>
<p>Use the <code>mkstore</code> command-line utility to retrieve the database password from the wallet by using the following syntax:</p>
<pre>
mkstore -wrl &lt;<span class="variable">database wallet location</span>&gt; -viewEntry ORACLE.SECURITY.PASSWORD
</pre></li>
<li>
<p>Use the password returned from <code>mkstore</code> in the following <code>ldapbind</code>:</p>
<pre>
ldapbind -h &lt;<span class="variable">directory host</span>&gt; -p &lt;<span class="variable">non-SSL directory port</span>&gt; -D "&lt;<span class="variable">database DN</span>&gt;" -q
Please enter bind password: <span class="italic">Password returned by mkstore</span>
</pre></li>
</ul>
</li>
<li>
<p>Check to ensure that the database belongs to only one enterprise domain.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>mkstore</code> utility is for troubleshooting purposes only. The name and functionality of this tool may change in the future.</div>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref103"></a>ORA-28043: Invalid bind credentials for DB/OID connection</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> The database directory password no longer synchronizes with the directory.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Use the <span class="bold">Regenerate Password</span> button in Database Configuration Assistant to generate a new directory password for the database, synchronize it with the directory, and store it in the database wallet.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<a id="i1007889"></a>
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref104"></a>ORA-28271: No permission to read user entry in LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Use Oracle Internet Directory Self-Service Console to check that a user search base containing this user is listed in the user search base attribute of the realm that you are using.</p>
</li>
<li>
<p>Check the ACL on the User Search Base in Oracle Internet Directory to ensure that the <code>verifierServices</code> group has read permission on the user entry, and that this permission is not prevented by an ACL between the User Search Base entry and the user entry in the directory tree.</p>
</li>
<li>
<p>Check that the enterprise domain is in the password-accessible domains group for that realm Oracle Context.</p>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref105"></a>ORA-28272: Domain policy restricts password-based GLOBAL user authentication.</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Use the Oracle Enterprise Manager interface to set the user authentication policy for this enterprise domain to <span class="bold">Password</span> or <span class="bold">ALL</span>.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref106"></a>ORA-28273: No mapping for user nickname to LDAP distinguished name exists</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Check that a user entry exists in Oracle Internet Directory for your user.</p>
</li>
<li>
<p>Use Oracle Internet Directory Self-Service Console to check that a user search base containing this user is listed in the identity management realm that you are using.</p>
</li>
<li>
<p>Check that the user entry contains the correct login name:</p>
<ul>
<li>
<p>Use Oracle Internet Directory Self-Service Console to find the login name attribute that is configured for the directory in your realm, and</p>
</li>
<li>
<p>Check that the name provided during the attempted user database login is the value for that attribute in the user directory entry.</p>
</li>
</ul>
</li>
<li>
<p>If you have an exclusive schema for the global user in the database, then check that the DN in the database matches the DN of the user entry in Oracle Internet Directory.</p>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref107"></a>ORA-28274: No ORACLE password attribute corresponding to user nickname exists</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Check that the user entry in the directory has the <code>orcluser</code> object class. If it does not, then perform the following steps:</p>
<ul>
<li>
<p>Use Oracle Internet Directory Self-Service Console to check that the default object classes for new user creation include <code>orcluser</code>, and then</p>
</li>
<li>
<p>Use Oracle Internet Directory Self-Service Console to re-create the user, or</p>
</li>
<li>
<p>Add the <code>orcluser</code> and the <code>orcluserV2</code> object classes.</p>
</li>
</ul>
</li>
<li>
<p>Check that there is a value for the attribute <code>orclpassword</code> in the user entry. If there is no value, then reset the user's directory password (<code>userpassword</code> attribute). This should prompt Oracle Internet Directory to regenerate the database password verifier for the user.</p>
</li>
<li>
<p>Use Oracle Internet Directory Self-Service Console to check that the user search base containing this user is listed in the user search base attribute of the realm that you are using.</p>
</li>
<li>
<p>Check that the ACL on the user search base attribute allows read and search access to the <code>orclpassword</code> attributes by the <code>verifierServices</code> group. This is set properly by default, but may have been altered.</p>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref108"></a>ORA-28275: Multiple mappings for user nickname to LDAP distinguished name exist</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> There are multiple user DNs in the directory within the user search base whose login name for the user matches what was provided during the database connection.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Use Oracle Internet Directory Self-Service Console to make the login name value unique (no two users share the same login name) within all user search bases associated with the realm Oracle Context.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref109"></a>ORA-28277: LDAP search, while authenticating global user with passwords, failed</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check that the relevant directory instance is up and running.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref110"></a>ORA-28278: No domain policy registered for password-based GLOBAL users</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> The database cannot read the enterprise domain information that it needs.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See <a href="#i1007706">"DOMAIN-READ-ERROR Checklist"</a></div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref111"></a>ORA-28862: SSL connection failed</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check that you are using a non-SSL connect string.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" --></div>
<!-- class="msgset" --></div>
<!-- class="sect2" -->
<a id="i1008167"></a>
<div id="DBIMI265" class="sect2">
<h3 class="sect2"><span class="secnum">4.7.2</span> ORA-# Errors for Kerberos-Authenticated Enterprise Users</h3>
<p>If you receive an ORA-# error while using Kerberos-authenticated Enterprise User Security, then locate the error in the following section and take the recommended action.</p>
<div class="msgset">
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref112"></a>ORA-1017: Invalid username/password; login denied</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See <a href="#i1007386">"USER-SCHEMA ERROR Checklist"</a></div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref113"></a>ORA-28030: Problem accessing LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> Indicates a problem with the connection between the database and the directory.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See the actions listed for resolving <a href="#i1007866">"ORA-28030: Server encountered problems accessing LDAP directory service"</a> in the troubleshooting section for password-authenticated enterprise users.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref114"></a>ORA-28271: No permission to read user entry in LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See the actions listed for resolving <a href="#i1007889">"ORA-28271: No permission to read user entry in LDAP directory service"</a> in the troubleshooting section for password-authenticated enterprise users.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref115"></a>ORA-28292: No domain policy registered for Kerberos-based authentication</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Perform the following actions:
<ol>
<li>
<p>Use Oracle Enterprise Manager Database Control or Grid Control to set the user authentication policy for this enterprise domain to <span class="bold">KERBEROS</span> or <span class="bold">ALL</span>.</p>
</li>
<li>
<p>See <a href="#i1007706">"DOMAIN-READ-ERROR Checklist"</a></p>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref116"></a>ORA-28290: Multiple entries found for the same Kerberos principal name</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> The Kerberos principal name for this user is not unique within the user search base containing this user.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Use Oracle Internet Directory Self-Service Console to change the Kerberos principal name, or to change the other copies so that it is unique.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref117"></a>ORA-28291: No Kerberos principal value found</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Check that the user entry in the directory has the <code>krbprincipalname</code> attribute.</p>
<p>If it does not have the <code>krbprincipalname</code> attribute, then check the following:</p>
<ul>
<li>
<p>Check that the default attributes for new user creation by using Oracle Internet Directory Self-Service Console include <code>krbprincipalname</code>, and then</p>
</li>
<li>
<p>Use Oracle Internet Directory Self-Service Console to create the user again, or</p>
</li>
<li>
<p>Add the <code>orclcommonattributes</code> object class.</p>
</li>
</ul>
</li>
<li>
<p>Check that there is a value for the attribute <code>krbprincipalname</code> in the user entry. If there is no value, then use Oracle Internet Directory Self-Service Console to enter one.</p>
</li>
<li>
<p>Use Oracle Internet Directory Self-Service Console to check that the user search base containing this user is listed in the realm Oracle Context that you are using.</p>
</li>
<li>
<p>Check that the ACL on the user search base attribute allows read and search access to the <code>krbprincipalname</code> attributes by the <code>verifierServices</code> group. This is set properly by default, but may have been altered.</p>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref118"></a>ORA-28293: No matched Kerberos principal found in any user entry.</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Check that a user entry exists in Oracle Internet Directory for your user.</p>
</li>
<li>
<p>Use Oracle Internet Directory Self-Service Console or <code>ldapsearch</code> to check that a user search base containing this user is listed in the identity management realm that you are using.</p>
</li>
<li>
<p>Check that the user entry in the directory contains the correct Kerberos principal name, by using the following steps:</p>
<ul>
<li>
<p>Use Oracle Internet Directory Self-Service Console to find the Kerberos principal name attribute that is configured for the directory in your realm, and</p>
</li>
<li>
<p>Check that the correct Kerberos principal name appears in that attribute in the user's directory entry.</p>
</li>
</ul>
</li>
<li>
<p>If you have an exclusive schema for the global user in the database, check that the DN in the database matches the DN of the user entry in Oracle Internet Directory.</p>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref119"></a>ORA-28300: No permission to read user entry in LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check that the database wallet contains the correct credentials for the database-to-directory connection. The wallet DN should be the DN of the database in Oracle Internet Directory. To retrieve the credentials, perform the following steps:
<ol>
<li>
<p>Use the <code>mkstore</code> command-line utility to retrieve the database password for the wallet by using the following syntax:</p>
<pre>
mkstore -wrl &lt;<span class="variable">database wallet location</span>&gt; -viewEntry ORACLE.SECURITY.PASSWORD -viewEntry ORACLE.SECURITY.DN
</pre></li>
<li>
<p>If these values are incorrect, reset the database wallet by using Database Configuration Assistant.</p>
</li>
<li>
<p>Use the DN and the password returned by <code>mkstore</code> in the following <code>ldapbind</code>:</p>
<pre>
ldapbind -h &lt;<span class="variable">directory host</span>&gt; -p &lt;<span class="variable">non-SSL directory port</span>&gt; -D "&lt;<span class="variable">database DN</span>&gt;" -q
Please enter bind password: <span class="italic">Password returned by mkstore</span>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>mkstore</code> utility is for troubleshooting purposes only. The name and functionality of this tool may change in the future.</div>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref120"></a>ORA-28302: User does not exist in the LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check that the user entry is present in the directory.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" --></div>
<!-- class="msgset" --></div>
<!-- class="sect2" -->
<a id="i1008171"></a>
<div id="DBIMI266" class="sect2">
<h3 class="sect2"><span class="secnum">4.7.3</span> ORA-# Errors for SSL-Authenticated Enterprise Users</h3>
<p>If you receive an ORA-# error while using SSL-authenticated Enterprise User Security, then locate the error in the following section and perform the recommended action.</p>
<div class="msgset">
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref121"></a>ORA-1017: Invalid username/password; login denied</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See <a href="#i1007386">"USER-SCHEMA ERROR Checklist"</a></div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref122"></a>ORA-28030: Problem accessing LDAP directory service</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> Indicates a problem with the connection between the database and the directory.</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Check the following:
<ol>
<li>
<p>Check that there is a correct <code>wallet_location</code> value in the database's <code>sqlnet.ora</code> file. If not, then use Oracle Net Manager to enter one.</p>
</li>
<li>
<p>If Domain Name System (DNS) server discovery of Oracle Internet Directory is not used, then check that there is a correct <code>ldap.ora</code> file in <code>$LDAP_ADMIN</code>, <code>$ORACLE_HOME/ldap/admin</code>, <code>$TNS_ADMIN</code> or <code>$ORACLE_HOME/network/admin</code>. (See <a class="olink OIDAG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OIDAG"><span class="italic">Oracle Internet Directory Administrator's Guide</span></a> for information about DNS server discovery.)</p>
</li>
<li>
<p>Check that the Oracle Internet Directory SSL port used (by way of DNS discovery or an <code>ldap.ora</code> file) supports SSL with two-way authentication.</p>
</li>
<li>
<p>Check that the <code>LDAP_DIRECTORY_ACCESS</code> parameter is set to <code>SSL</code> in the database initialization parameters file.</p>
</li>
<li>
<p>Check that the database wallet has autologin enabled. Either use Oracle Wallet Manager or check that there is a <code>cwallet.sso</code> file in <code>$ORACLE_HOME/admin/&lt;ORACLE_SID&gt;/wallet/.</code></p>
</li>
<li>
<p>Use the <code>mkstore</code> command-line utility to check that the database wallet has the database DN in it by using the following syntax:</p>
<pre>
mkstore -wrl &lt;database_wallet_location&gt; -viewEntry ORACLE.SECURITY.DN
</pre>
<p>If the wallet does not contain the database DN, then use Database Configuration Assistant to reregister the database with Oracle Internet Directory.</p>
</li>
<li>
<p>Check that the database can bind to Oracle Internet Directory, by using its wallet with the following <code>ldapbind</code>:</p>
<pre>
ldapbind -h &lt;<span class="variable">directory_host</span>&gt; -p &lt;<span class="variable">directory_SSLport</span>&gt; -U 3 -W "file:&lt;<span class="variable">database wallet_location</span>&gt;" -Q
Please enter SSL wallet password: <span class="italic">wallet_password</span>
</pre></li>
<li>
<p>Check to ensure that the database belongs to only one enterprise domain.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>mkstore</code> utility is for troubleshooting purposes only. The name and functionality of this tool may change in the future.</div>
</li>
</ol>
</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref123"></a>ORA-28301: Domain policy has not been registered for SSL authentication</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> Use Oracle Enterprise Manager Database Control or Grid Control to set the user authentication policy for this enterprise domain to include SSL.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" -->
<div class="msgentry">
<dl>
<dt><span class="msg"><a id="sthref124"></a>ORA-28862: SSL handshake failed</span> <!-- class="msg" --></dt>
<dd>
<div class="msgexplan"><span class="msgexplankw">Cause:</span> As in error message</div>
<!-- class="msgexplan" --></dd>
<dd>
<div class="msgaction"><span class="msgactionkw">Action:</span> See the SSL (Secure Sockets Layer) chapter in <a class="olink ASOAG070" href="../../network.112/e40393/asossl.htm#ASOAG070"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for information about configuring your SSL connection.</div>
<!-- class="msgaction" --></dd>
</dl>
</div>
<!-- class="msgentry" --></div>
<!-- class="msgset" --></div>
<!-- class="sect2" -->
<a id="i1008271"></a>
<div id="DBIMI267" class="sect2">
<h3 class="sect2"><span class="secnum">4.7.4</span> NO-GLOBAL-ROLES Checklist</h3>
<p>If the enterprise user can connect to the database but a <code>select * from session_roles</code> returns no global roles, then check the following:</p>
<ol>
<li>
<p>Check that the global role has been created in the database. To create global roles, use the following syntax:</p>
<pre>
CREATE ROLE &lt;<span class="variable">role_name</span>&gt; IDENTIFIED GLOBALLY;
</pre></li>
<li>
<p>Use Oracle Enterprise Manager to check that the global role is included in an enterprise role in the directory.</p>
</li>
<li>
<p>Use Oracle Enterprise Manager to check that the enterprise role is assigned to the user in the directory.</p>
</li>
<li>
<p>If these checks are fine, then see the <a href="#i1007706">"DOMAIN-READ-ERROR Checklist"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="i1007386"></a>
<div id="DBIMI268" class="sect2">
<h3 class="sect2"><span class="secnum">4.7.5</span> USER-SCHEMA ERROR Checklist</h3>
<p>If your database cannot read the user schema, then check the following:</p>
<ol>
<li>
<p>If this is an SSL-authenticated enterprise user, then ensure that the correct user wallet is being used by checking the following:</p>
<ul>
<li>
<p>There is no <code>WALLET_LOCATION</code> parameter value in the client <code>sqlnet.ora</code> file, and</p>
</li>
<li>
<p>The <code>TNS_ADMIN</code> parameter is set properly so that the correct <code>sqlnet.ora</code> file is being used.</p>
</li>
</ul>
</li>
<li>
<p>Check that the schema was created in the database as a global user, by using the following syntax:</p>
<pre>
CREATE USER username IDENTIFIED GLOBALLY AS ' ';
</pre>
<p>or by using the following syntax:</p>
<pre>
CREATE USER username IDENTIFIED GLOBALLY AS '&lt;DN&gt;';
</pre></li>
<li>
<p>Suppose the following is true:</p>
<ul>
<li>
<p>The user schema is an exclusive schema (created with the <code>CREATE USER</code> <code><span class="codeinlineitalic">username</span></code> <code>IDENTIFIED GLOBALLY AS '</code><code><span class="codeinlineitalic">user_DN</span></code><code>';</code> syntax), and</p>
</li>
<li>
<p>This is an SSL-authenticated user.</p>
</li>
</ul>
<p>Then, ensure that the DN in the user wallet matches the DN that was used in the <code>CREATE USER</code> statement.</p>
<p>Use Oracle Wallet Manager to view the DN in the user wallet.</p>
<p>Use the following syntax to view the DN that was used with the <code>CREATE USER</code> statement:</p>
<pre>
SELECT EXTERNAL_NAME FROM DBA_USERS WHERE USERNAME='<span class="italic">schema</span>';
</pre></li>
<li>
<p>If you are using a shared schema, then check the following:</p>
<ul>
<li>
<p>Use Oracle Enterprise Manager Database Control or Grid Control to ensure that you have created a user-schema mapping either for the entire enterprise domain or for the database.</p>
</li>
<li>
<p>If the user-schema mapping is intended to apply to this database (not to the entire enterprise domain), then check that the database can read its own entry and subtree in the directory.</p>
<p>To check this, enter the following <code>ldapsearch</code> command for your database-to-directory connection type:</p>
<ul>
<li>
<p>If the database connects to the directory over SSL, then use</p>
<pre>
ldapsearch -h <span class="italic">directory_host</span> -p <span class="italic">directory_SSLport</span> -U 3 -W "file:<span class="italic">database_wallet_path</span>" -Q -b "<span class="italic">database_DN</span>" "objectclass=*"
Please enter SSL wallet password: <span class="italic">wallet_password</span>
</pre>
<p>where <code><span class="codeinlineitalic">wallet_password</span></code> is the password to the wallet, which enables you to open or change the wallet.</p>
</li>
<li>
<p>If the database connects to the directory by using password authentication, then use</p>
<pre>
ldapsearch -h <span class="italic">directory_host</span> -p <span class="italic">directory_port</span> -D <span class="variable">database_DN</span> -q -b "<span class="italic">database_DN</span>" "objectclass=*"
Please enter bind password: <span class="italic">database_directory_password</span>
</pre>
<p>where <code><span class="codeinlineitalic">database_directory_password</span></code> is the database bind password returned by a utility like <code>mkstore</code>.</p>
</li>
</ul>
<p>You should see the database entry and the relevant mapping.</p>
</li>
<li>
<p>If the user-schema mapping applies to the entire enterprise domain rather than to only this individual database, then see <a href="#i1007706">"DOMAIN-READ-ERROR Checklist"</a>.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="i1007706"></a>
<div id="DBIMI269" class="sect2">
<h3 class="sect2"><span class="secnum">4.7.6</span> DOMAIN-READ-ERROR Checklist</h3>
<p>If your database cannot read its enterprise domain information in Oracle Internet Directory, then check the following:</p>
<ol>
<li>
<p>Use Oracle Enterprise Manager Database Control or Grid Control to check that the database is a member of exactly one enterprise domain, and add it to one if it is not.</p>
</li>
<li>
<p>Check that the database can see its domain, by entering one of the following at the command line:</p>
<ul>
<li>
<p>If the database connects to the directory over SSL, then use</p>
<pre>
ldapsearch -h <span class="italic">directory_host</span> -p <span class="italic">directory_SSLport</span> -U 3 -W "file:<span class="italic">database_wallet_path</span>" -Q -b "cn=OracleContext, <span class="italic">realm_DN</span>" "objectclass=orclDBEnterpriseDomain"
Please enter SSL wallet password: <span class="italic">wallet_password</span>
</pre>
<p>where <code><span class="codeinlineitalic">wallet_password</span></code> is the password to the wallet, which enables you to open or change the wallet.</p>
</li>
<li>
<p>If the database connects to the directory by using password authentication, then use</p>
<pre>
ldapsearch -h <span class="italic">directory_host</span> -p <span class="italic">directory_port</span> -D <span class="italic">database_DN</span> -q -b "cn=OracleContext, <span class="italic">realm_DN</span>" "objectclass=orclDBEnterpriseDomain"
Please enter bind password: <span class="italic">database_directory_password</span>
</pre>
<p>where <code><span class="codeinlineitalic">database_directory_password</span></code> is the password in the database wallet, which is the database's password to Oracle Internet Directory.</p>
</li>
</ul>
<p>The <code>ldapsearch</code> command should return exactly one enterprise domain.</p>
<p>If no domain is returned and Oracle Enterprise Manager shows the database as a member of a domain, then restart the database. Restarting the database updates the cached value for the enterprise domain.</p>
<p>If more than one domain is returned, then use Oracle Enterprise Manager to remove the database from the additional domain.</p>
</li>
<li>
<p>Check that the database can read the enterprise domain subtree and thus can read its enterprise roles and mappings, by entering one of the following at the command line:</p>
<ul>
<li>
<p>If the database connects to the directory over SSL, then use</p>
<pre>
ldapsearch -h <span class="italic">directory_host</span> -p <span class="italic">directory_SSLport</span> -U 3 -W "file:<span class="italic">database_wallet_path</span>" -Q -b "cn=OracleContext, <span class="italic">realm_DN</span>" "objectclass=orclDBEnterpriseRole"
Please enter SSL wallet password: <span class="italic">wallet_password</span>
</pre>
<p>where <code><span class="codeinlineitalic">wallet_password</span></code> is the password to the wallet, which enables you to open or change the wallet.</p>
</li>
<li>
<p>If the database connects to the directory by using password authentication, then use</p>
<pre>
ldapsearch -h <span class="italic">directory_host</span> -p <span class="italic">directory_port</span> -D <span class="italic">database_DN</span> -q -b "cn=OracleContext, <span class="italic">realm_DN</span>" "objectclass=orclDBEnterpriseRole"
Please enter bind password: <span class="italic">database_directory_password</span>
</pre>
<p>where <code><span class="codeinlineitalic">database_directory_password</span></code> is the password in the database wallet, which is the database password to Oracle Internet Directory.</p>
</li>
</ul>
<p>This <code>ldapsearch</code> should return all of the enterprise roles that you have created for this domain. If it does not, then use Oracle Enterprise Manager to create enterprise roles and mappings.</p>
</li>
<li>
<p>Use Oracle Enterprise Manager Database Control or Grid Control to set or reset the user authentication policy for the relevant enterprise domain. See <a href="adminste.htm#CACDJIAB">"Configuring User Authentication Types and Enabling Current User Database Links"</a> for information about setting the user authentication policy for an enterprise domain.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2198">
<tr>
<td class="cellalignment2205">
<table class="cellalignment2203">
<tr>
<td class="cellalignment2202"><a href="toolover.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2202"><a href="adminste.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2207">
<table class="cellalignment2201">
<tr>
<td class="cellalignment2202"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2202"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2202"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2202"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2202"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2202"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
