<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Getting Started with Enterprise User Security</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 735" />
<meta name="dcterms.created" content="2013-06-24T8:0:2Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Enterprise User Security Administrator's Guide" />
<meta name="dcterms.identifier" content="E10744-04" />
<meta name="dcterms.isVersionOf" content="DBIMI" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="concepts.htm" title="Previous" type="text/html" />
<link rel="Next" href="toolover.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10744.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/15</span> <!-- End Header -->
<div id="DBIMI234" class="chapter"><a id="CBHBHADG"></a>
<h1 class="chapter"><span class="secnum">2</span> Getting Started with Enterprise User Security</h1>
<p>Enterprise User Security enables you to centrally manage database users across the enterprise. Enterprise users are created in Oracle Internet Directory, and can be assigned roles and privileges across various enterprise databases registered with the directory.</p>
<p>This chapter uses a tutorial approach to help you get started with Enterprise User Security. The following steps discuss configuring Enterprise User Security:</p>
<ol>
<li>
<p><a href="#CBHDBFGC">Configuring Your Database to Use the Directory</a></p>
</li>
<li>
<p><a href="#CBHGBEIG">Registering Your Database with the Directory</a></p>
</li>
<li>
<p><a href="#CBHGAICB">Creating a Shared Schema in the Database</a></p>
</li>
<li>
<p><a href="#CBHDDECG">Mapping Enterprise Users to the Shared Schema</a></p>
</li>
<li>
<p><a href="#CBHBEGJJ">Connecting to the Database as an Enterprise User</a></p>
</li>
<li>
<p><a href="#CBHBGHDI">Using Enterprise Roles</a></p>
</li>
<li>
<p><a href="#CBHHCFAD">Using Proxy Permissions</a></p>
</li>
</ol>
<a id="CBHDBFGC"></a>
<div id="DBIMI235" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.1</span> Configuring Your Database to Use the Directory</h2>
<p>The first step in configuring Enterprise User Security is to configure the database to use the directory. Running the Net Configuration Assistant (NetCA) tool enables you to configure the directory host name and port that your database should use.</p>
<p class="subhead2"><a id="DBIMI565"></a>To configure your database for directory usage:</p>
<ol>
<li>
<p>Start NetCA using the <code>netca</code> command.</p>
<ul>
<li>
<p>On Windows, you can also start NetCA from the Start menu:</p>
<p>Click <span class="bold">Start, All Programs, Oracle -</span> <span class="bolditalic">OracleHomeName</span>, <span class="bold">Configuration and Migration Tools, Net Configuration Assistant.</span></p>
</li>
<li>
<p>On Unix systems, you can start NetCA using the following command:</p>
<p><code><span class="codeinlineitalic">$ORACLE_HOME</span></code><code>/bin/netca</code></p>
</li>
</ul>
<p>The Welcome screen appears.</p>
<img width="600" height="400" src="img/netca1.gif" alt="Description of netca1.gif follows" /><br />
<a id="sthref61" href="img_text/netca1.htm">Description of the illustration netca1.gif</a><br />
<br /></li>
<li>
<p>Select <span class="bold">Directory Usage Configuration</span>. Click <span class="bold">Next</span>.</p>
<p>The Directory Type screen appears.</p>
<img width="600" height="400" src="img/netca2.gif" alt="Description of netca2.gif follows" /><br />
<a id="sthref62" href="img_text/netca2.htm">Description of the illustration netca2.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Directory Location screen appears.</p>
<img width="600" height="400" src="img/netca3.gif" alt="Description of netca3.gif follows" /><br />
<a id="sthref63" href="img_text/netca3.htm">Description of the illustration netca3.gif</a><br />
<br /></li>
<li>
<p>Enter the name of the host on which the Oracle Internet Directory server is running. Also enter the LDAP non-SSL and SSL port numbers. These port numbers are 389 and 636 by default. Click Next.</p>
<p>The Select Oracle Context screen appears.</p>
<img width="600" height="400" src="img/netca4.gif" alt="Description of netca4.gif follows" /><br />
<a id="sthref64" href="img_text/netca4.htm">Description of the illustration netca4.gif</a><br />
<br /></li>
<li>
<p>Select the default Oracle Context to use. You need to select this if there are multiple identity management realms on the directory server. Click <span class="bold">Next</span>.</p>
<p>The Directory Usage Configuration, Done screen is displayed.</p>
</li>
<li>
<p>Confirm that the directory usage configuration is successfully completed. Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
<p>NetCA creates an <code>ldap.ora</code> file in the <code><span class="codeinlineitalic">$ORACLE_HOME</span></code><code>/network/admin</code> directory. This is the <code><span class="codeinlineitalic">$ORACLE_HOME</span></code><code>\network\admin</code> directory in Windows. The <code>ldap.ora</code> file stores the connection information details about the directory.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBHGBEIG"></a>
<div id="DBIMI236" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.2</span> Registering Your Database with the Directory</h2>
<p>The next step is to register the database with the directory service. The Database Configuration Assistant (DBCA) tool enables you to register the database with Oracle Internet Directory.</p>
<p class="subhead2"><a id="DBIMI566"></a>To register the database with the directory:</p>
<ol>
<li>
<p>Start DBCA using the <code>dbca</code> command.</p>
<ul>
<li>
<p>On Windows, you can also start DBCA from the Start menu:</p>
<p>Click <span class="bold">Start, All Programs, Oracle -</span> <span class="bolditalic">OracleHomeName</span>, <span class="bold">Configuration and Migration Tools, Database Configuration Assistant.</span></p>
</li>
<li>
<p>On Unix systems, you can start DBCA using the following command:</p>
<p><code><span class="codeinlineitalic">$ORACLE_HOME</span></code><code>/bin/dbca</code></p>
</li>
</ul>
<p>The Welcome screen appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Operations screen is displayed.</p>
<img width="754" height="533" src="img/dbca2.gif" alt="Description of dbca2.gif follows" /><br />
<a id="sthref65" href="img_text/dbca2.htm">Description of the illustration dbca2.gif</a><br />
<br /></li>
<li>
<p>Select <span class="bold">Configure Database Options</span>. Click <span class="bold">Next</span>.</p>
<p>The Database screen appears.</p>
</li>
<li>
<p>Select the database name that you wish to configure. You might also be asked to enter <code>SYS</code> user credentials if you are not using operating system authentication. Click <span class="bold">Next</span>.</p>
<p>The Management Options screen appears.</p>
</li>
<li>
<p>Select <span class="bold">Keep the database configured with Database Control</span> if you want to continue using Database Control to manage the database. You also have the option of using Grid Control to manage the database. Click <span class="bold">Next</span>.</p>
<p>The Security Settings screen appears.</p>
</li>
<li>
<p>Select <span class="bold">Keep the enhanced 11g default security settings</span> to keep the 11<span class="italic">g</span> security settings. Click <span class="bold">Next</span>.</p>
<p>The Network Configuration screen appears.</p>
<img width="754" height="533" src="img/dbca6.gif" alt="Description of dbca6.gif follows" /><br />
<a id="sthref66" href="img_text/dbca6.htm">Description of the illustration dbca6.gif</a><br />
<br /></li>
<li>
<p>Select <span class="bold">Yes, register the database</span> to register the database with the directory. Enter the distinguished name (DN) of a user who is authorized to register databases in Oracle Internet Directory. Also, enter the password for the directory user. Enter a wallet password. Reenter the password in the <span class="bold">Confirm Password</span> field. Click <span class="bold">Next</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The database uses a randomly generated password to log in to the directory. This database password is stored in an Oracle wallet. The wallet can also be used to store certificates needed for SSL connections.
<p>The wallet password that you specify is different from the database password. The wallet password is used to protect the wallet.</p>
</div>
<p>The <span class="bold">Database Components</span> screen appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The <span class="bold">Connection Mode</span> page appears.</p>
</li>
<li>
<p>Select <span class="bold">Dedicated Server Mode</span> or <span class="bold">Shared Server Mode</span>. Click <span class="bold">Finish</span>.</p>
<p>The <span class="bold">Confirmation</span> dialog box appears.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
After you register the database with the directory, make sure that auto login is enabled for the database wallet. The default wallet is created in the <code><span class="codeinlineitalic">$ORACLE_BASE</span></code><code>/admin/</code><code><span class="codeinlineitalic">database_sid</span></code><code>/wallet</code> directory.
<p>You can verify that auto login for the wallet is enabled by checking for the presence of the <code>cwallet.sso</code> file in the wallet directory. If the file is not present, you can enable auto login by opening the wallet using Oracle Wallet Manager, and using the option to enable auto login for the wallet.</p>
</div>
</div>
<!-- class="sect1" -->
<a id="CBHGAICB"></a>
<div id="DBIMI237" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.3</span> Creating a Shared Schema in the Database</h2>
<p>Creating a shared schema in the database enables you to map multiple enterprise users to the same schema. <a href="#CBHGCHGH">Example 2-1</a>creates a shared schema, <code>global_ident_schema_user</code>, and grants the <code>CONNECT</code> role to it.</p>
<div id="DBIMI567" class="example">
<p class="titleinexample"><a id="CBHGCHGH"></a>Example 2-1 Creating a Shared Schema</p>
<pre>
SQL&gt; CREATE USER global_ident_schema_user IDENTIFIED GLOBALLY;
User created.
SQL&gt; GRANT CONNECT TO global_ident_schema_user;
Grant succeeded.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CBHDDECG"></a>
<div id="DBIMI238" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.4</span> Mapping Enterprise Users to the Shared Schema</h2>
<p>Enterprise User Security can be managed using Enterprise Manager. <a href="#CBHJGBDH">Example 2-2</a> maps the DN, <code>cn=users, dc=us, dc=oracle, dc=com</code> to the shared database schema, <code>global_ident_schema_user</code>.</p>
<div id="DBIMI568" class="example">
<p class="titleinexample"><a id="CBHJGBDH"></a>Example 2-2 Mapping Enterprise Users to the Shared Schema</p>
<p>To create the user-schema mapping:</p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
<img width="437" height="242" src="img/getstrtd1.gif" alt="Description of getstrtd1.gif follows" /><br />
<a id="sthref67" href="img_text/getstrtd1.htm">Description of the illustration getstrtd1.gif</a><br />
<br /></li>
<li>
<p>Click the <span class="bold">Server</span> tab. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
<img width="616" height="268" src="img/getstrtd2.gif" alt="Description of getstrtd2.gif follows" /><br />
<a id="sthref68" href="img_text/getstrtd2.htm">Description of the illustration getstrtd2.gif</a><br />
<br /></li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
<img width="607" height="374" src="img/getstrtd3.gif" alt="Description of getstrtd3.gif follows" /><br />
<a id="sthref69" href="img_text/getstrtd3.htm">Description of the illustration getstrtd3.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears.</p>
<img width="484" height="342" src="img/getstrtd4.gif" alt="Description of getstrtd4.gif follows" /><br />
<a id="sthref70" href="img_text/getstrtd4.htm">Description of the illustration getstrtd4.gif</a><br />
<br /></li>
<li>
<p>Select the enterprise domain which contains the database. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">User-Schema Mappings</span> tab. All user-schema maps that apply to the enterprise domain are displayed.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create Mapping page is displayed.</p>
<img width="748" height="370" src="img/getstrtd5.gif" alt="Description of getstrtd5.gif follows" /><br />
<a id="sthref71" href="img_text/getstrtd5.htm">Description of the illustration getstrtd5.gif</a><br />
<br /></li>
<li>
<p>Under the From section, select <span class="bold">Subtree</span>. Click the Search icon. Select the DN, <span class="bold">cn=Users, dc=us,dc=oracle,dc=com</span>.</p>
</li>
<li>
<p>Under the To section, enter global_ident_schema_user in the <span class="bold">Schema</span> field. Click <span class="bold">Continue</span>.</p>
<p>The user-schema mapping is added in the Configure Domain page.</p>
<img width="750" height="309" src="img/getstrtd6.gif" alt="Description of getstrtd6.gif follows" /><br />
<a id="sthref72" href="img_text/getstrtd6.htm">Description of the illustration getstrtd6.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CBHBEGJJ"></a>
<div id="DBIMI239" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.5</span> Connecting to the Database as an Enterprise User</h2>
<p>All users in the mapped Oracle Internet Directory subtree can now connect to the database as enterprise users. <a href="#CBHEDHGI">Example 2-3</a> shows the <code>cn=orcladmin, cn=users, dc=us,dc=oracle,dc=com</code> user connecting to the database.</p>
<div id="DBIMI569" class="example">
<p class="titleinexample"><a id="CBHEDHGI"></a>Example 2-3 Connecting to the Database as an Enterprise User</p>
<pre>
SQL&gt; CONNECT orcladmin
Enter password:
Connected.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CBHBGHDI"></a>
<div id="DBIMI240" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.6</span> Using Enterprise Roles</h2>
<p>Enterprise roles are created in the directory. Enterprise roles contain global roles from different databases that are part of the enterprise domain. Enterprise roles are used to assign database privileges to enterprise users.</p>
<p><a href="#CBHEAFJD">Example 2-4</a> creates two enterprise users, Joe and Nina. Both these users are created in the subtree, <code>cn=Users, dc=us,dc=oracle,dc=com</code>, which is already mapped to the <code>global_ident_schema_user</code> in the EUSDB database.</p>
<p>Nina is an HR manager. She needs the <code>SELECT</code> privilege on the <code>hr.employees</code> table in the EUSDB database. <a href="#CBHEAFJD">Example 2-4</a> achieves this using enterprise roles.</p>
<div id="DBIMI570" class="example">
<p class="titleinexample"><a id="CBHEAFJD"></a>Example 2-4 Using Enterprise Roles</p>
<p>We start by creating two enterprise users, Joe and Nina. You can create enterprise users using the Oracle Internet Directory Self Service Console.</p>
<p><span class="bold">To create enterprise users, Joe and Nina:</span></p>
<ol>
<li>
<p>Connect to the Oracle Internet Directory Self Service Console. Use the following URL:</p>
<p><code>http://</code><code><span class="codeinlineitalic">hostname</span></code>:<code><span class="codeinlineitalic">port</span></code><code>/oiddas/</code></p>
<p>Here, <code><span class="codeinlineitalic">hostname</span></code> is the name of the host that is running the Oracle Internet Directory server. The <code><span class="codeinlineitalic">port</span></code> number is the TCP port number on which the Oracle Internet Directory Self Service Console is running. This is 7777 by default.</p>
<img width="750" height="284" src="img/getstrtd7.gif" alt="Description of getstrtd7.gif follows" /><br />
<a id="sthref73" href="img_text/getstrtd7.htm">Description of the illustration getstrtd7.gif</a><br />
<br /></li>
<li>
<p>Click the <span class="bold">Directory</span> tab.</p>
<p>The Sign In page appears.</p>
<img width="538" height="285" src="img/getstrtd8.gif" alt="Description of getstrtd8.gif follows" /><br />
<a id="sthref74" href="img_text/getstrtd8.htm">Description of the illustration getstrtd8.gif</a><br />
<br /></li>
<li>
<p>Log in as the user that can create users in Oracle Internet Directory.</p>
<p>The User page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create User page appears.</p>
<img width="700" height="416" src="img/getstrtd9.gif" alt="Description of getstrtd9.gif follows" /><br />
<a id="sthref75" href="img_text/getstrtd9.htm">Description of the illustration getstrtd9.gif</a><br />
<br /></li>
<li>
<p>Enter joe under <span class="bold">User Name</span>. Enter values for the other required fields. Select Enabled under <span class="bold">Is Enabled</span>.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
</li>
<li>
<p>Click <span class="bold">Create Another User</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Enter Nina under <span class="bold">User Name</span>. Enter values for the other required fields. Select Enabled under <span class="bold">Is Enabled</span>.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>. Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p>Next, we create a global role in the database that allows access to the <code>hr.employees</code> table. The following SQL*Plus statements create a global role, <code>hr_access</code> and grant the necessary privilege to it.</p>
<pre>
SQL&gt; CREATE ROLE hr_access IDENTIFIED GLOBALLY;
Role created.
SQL&gt; GRANT SELECT ON hr.employees TO hr_access;
Grant succeeded.
</pre>
<p>Next, we create an enterprise role called <code>hr_access</code> and assign the global role to it. We then assign this enterprise role to the enterprise user, Nina. The enterprise role can be created using Enterprise Manager.</p>
<p><span class="bold">To create the enterprise role,</span> <code><span class="codeinlinebold">hr_access:</span></code></p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select the enterprise domain that contains the database. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Enterprise Roles</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The <span class="bold">Create Enterprise Role</span> page appears.</p>
</li>
<li>
<p>Enter hr_access in the <span class="bold">Name</span> field.</p>
<img width="750" height="382" src="img/getstrtd11.gif" alt="Description of getstrtd11.gif follows" /><br />
<a id="sthref76" href="img_text/getstrtd11.htm">Description of the illustration getstrtd11.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Add</span> to add the database global role to the enterprise role.</p>
<p>The Search and Select Database Global Roles window is displayed.</p>
<img width="697" height="290" src="img/getstrtd12.gif" alt="Description of getstrtd12.gif follows" /><br />
<a id="sthref77" href="img_text/getstrtd12.htm">Description of the illustration getstrtd12.gif</a><br />
<br /></li>
<li>
<p>Select the <code>hr_access</code> global role in your database. Click <span class="bold">Select</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You will be required to log in to the database before you can select the global role.</div>
</li>
<li>
<p>Click the <span class="bold">Grantees</span> tab. Click <span class="bold">Add</span>.</p>
<p>The Select Users or Groups window appears.</p>
</li>
<li>
<p>Select user Nina. Click <span class="bold">Select</span>.</p>
<img width="693" height="355" src="img/getstrtd10.gif" alt="Description of getstrtd10.gif follows" /><br />
<a id="sthref78" href="img_text/getstrtd10.htm">Description of the illustration getstrtd10.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Continue</span> in the Create Enterprise Role page.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> in the Configure Domain page.</p>
</li>
</ol>
<p>The enterprise user, Nina can now access the <code>hr.employees</code> table in the database. The following SQL*Plus statements illustrate this:</p>
<pre>
SQL&gt; CONNECT Nina
Enter password:
Connected.
SQL&gt; SELECT employee_id FROM hr.employees;
EMPLOYEE_ID
-----------
        100
        101
        102
...
...
107 rows selected.
</pre>
<p>The enterprise user, Joe cannot access the <code>hr.employees</code> table, as he does not have the enterprise role assigned to him.</p>
<pre>
SQL&gt; CONNECT joe
Enter password:
Connected.
SQL&gt; SELECT employee_id FROM hr.employees;
SELECT employee_id FROM hr.employees

ERROR at line 1:
ORA-00942: table or view does not exist

</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" -->
<a id="CBHHCFAD"></a>
<div id="DBIMI241" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.7</span> Using Proxy Permissions</h2>
<p>Proxy permissions are created at the enterprise domain level. Proxy permissions allow an enterprise user to proxy a local database user, which means that the enterprise user can log in to the database as the local database user. You can grant proxy permissions to individual enterprise users or groups. Proxy permissions are especially useful for middle-tier applications that operate across multiple databases as enterprise users.</p>
<p><a href="#CBHJJJIG">Example 2-5</a> illustrates the use of proxy permissions. The enterprise user, <code>joe</code> is a sales manager and needs to log in to enterprise databases as the target database user, <code>SH</code>. The <code>SH</code> user owns the sample <code>SH</code> schema that contains Sales History related tables.</p>
<div id="DBIMI571" class="example">
<p class="titleinexample"><a id="CBHJJJIG"></a>Example 2-5 Using Proxy Permissions</p>
<p>The first step in allowing enterprise user proxy is to <code>ALTER</code> the target database user to allow <code>CONNECT</code> through enterprise users. The following <code>SQL</code> statements unlock the <code>SH</code> database account, set a password for it, and <code>ALTER</code> the account to allow enterprise user proxy:</p>
<pre>
SQL&gt; CONNECT SYSTEM
Enter password:
Connected.
SQL&gt; ALTER USER SH IDENTIFIED BY hrd2guess ACCOUNT UNLOCK;
User altered.
SQL&gt; ALTER USER SH GRANT CONNECT THROUGH ENTERPRISE USERS;
User altered.
</pre>
<p>Next, use Enterprise Manager to configure the proxy permission. This allows the enterprise user <code>joe</code> to connect as the local database user, <code>SH</code>.</p>
<p><span class="bold">To configure the proxy permission for enterprise user,</span> <code><span class="codeinlinebold">joe</span></code><span class="bold">:</span></p>
<ol>
<li>
<p>Log in to Enterprise Manager.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab. Under the Security section, click <span class="bold">Enterprise User Security</span>.</p>
<p>The Oracle Internet Directory Login page appears.</p>
</li>
<li>
<p>Enter the distinguished name (DN) of a directory user who can administer enterprise users in the <span class="bold">User</span> field. Enter the user password in the <span class="bold">Password</span> field. Click <span class="bold">Login</span>.</p>
<p>The Enterprise User Security page appears.</p>
</li>
<li>
<p>Click <span class="bold">Manage Enterprise Domains</span>.</p>
<p>The Manage Enterprise Domains page appears. This page lists the enterprise domains in the identity management realm.</p>
</li>
<li>
<p>Select the enterprise domain that you wish to configure. Click <span class="bold">Configure</span>.</p>
<p>The Configure Domain page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Proxy Permissions</span> tab.</p>
<img width="689" height="302" src="img/getstrtd13.gif" alt="Description of getstrtd13.gif follows" /><br />
<a id="sthref79" href="img_text/getstrtd13.htm">Description of the illustration getstrtd13.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Create</span> to create a new proxy permission.</p>
<p>The <span class="bold">Create Proxy Permission</span> page appears.</p>
</li>
<li>
<p>Enter SH_Proxy, as the name of the proxy permission, in the <span class="bold">Name</span> field.</p>
<img width="695" height="400" src="img/getstrtd14.gif" alt="Description of getstrtd14.gif follows" /><br />
<a id="sthref80" href="img_text/getstrtd14.htm">Description of the illustration getstrtd14.gif</a><br />
<br /></li>
<li>
<p>Ensure that the <span class="bold">Target DB Users</span> tab is selected. Click <span class="bold">Add</span>.</p>
<p>The Search and Select window appears.</p>
</li>
<li>
<p>Log in to the database that contains the <code>SH</code> user. A list of all database users that have been altered to allow enterprise user proxy is displayed.</p>
</li>
<li>
<p>Select the SH user. Click <span class="bold">Select</span>.</p>
<p>The <code>SH</code> user is added under Target DB Users in the Create Proxy Permission page.</p>
<img width="696" height="403" src="img/getstrtd15.gif" alt="Description of getstrtd15.gif follows" /><br />
<a id="sthref81" href="img_text/getstrtd15.htm">Description of the illustration getstrtd15.gif</a><br />
<br /></li>
<li>
<p>Click the <span class="bold">Grantees</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Select Users or Groups window appears.</p>
</li>
<li>
<p>Select <code>cn=users,dc=us,dc=oracle,dc=com</code> under <span class="bold">Search Base</span>. Select <code>User</code> under <span class="bold">View</span>. Click <span class="bold">Go</span>.</p>
<p>A list of users under the subtree, <code>cn=users,dc=us,dc=oracle,dc=com</code> is displayed.</p>
<img width="556" height="246" src="img/getstrtd16.gif" alt="Description of getstrtd16.gif follows" /><br />
<a id="sthref82" href="img_text/getstrtd16.htm">Description of the illustration getstrtd16.gif</a><br />
<br /></li>
<li>
<p>Select <code>cn=joe,cn=users,dc=us,dc=oracle,dc=com</code>. Click <span class="bold">Select</span>.</p>
<p>The user <code>joe</code> is added under <span class="bold">Grantees</span> in the Create Proxy Permission page.</p>
<img width="698" height="347" src="img/getstrtd17.gif" alt="Description of getstrtd17.gif follows" /><br />
<a id="sthref83" href="img_text/getstrtd17.htm">Description of the illustration getstrtd17.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Continue</span> in the Create Proxy Permission page.</p>
<p>The proxy permission, <code>SH_Proxy</code> is added in the Configure Domain page.</p>
<img width="689" height="295" src="img/getstrtd18.gif" alt="Description of getstrtd18.gif follows" /><br />
<a id="sthref84" href="img_text/getstrtd18.htm">Description of the illustration getstrtd18.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p>The enterprise user, <code>joe</code> can now log in as the local database user <code>SH</code>. The following <code>SQL</code> statements illustrate this:</p>
<pre>
SQL&gt; REMARK Joe uses his own password to connect as the local database user, SH.
SQL&gt; CONNECT joe[SH]
Enter password:
Connected.
SQL&gt; SELECT * FROM SH.sales WHERE cust_id=4;

   PROD_ID    CUST_ID TIME_ID   CHANNEL_ID   PROMO_ID QUANTITY_SOLD AMOUNT_SOLD
---------- ---------- --------- ---------- ---------- ------------- -----------
        37          4 31-MAY-00          3        999             1       60.43
        39          4 31-MAY-00          3        999             1       38.45
        40          4 31-MAY-00          3        999             1        48.1
...
...
72 rows selected.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2198">
<tr>
<td class="cellalignment2205">
<table class="cellalignment2203">
<tr>
<td class="cellalignment2202"><a href="concepts.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2202"><a href="toolover.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2207">
<table class="cellalignment2201">
<tr>
<td class="cellalignment2202"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2202"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2202"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2202"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2202"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2202"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
