<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Applying Policies to Tables and Schemas</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-08-19T10:59:35Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Label Security Administrator's Guide" />
<meta name="dcterms.identifier" content="E10745-04" />
<meta name="dcterms.isVersionOf" content="OLSAG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="enforce.htm" title="Previous" type="text/html" />
<link rel="Next" href="storproc.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10745.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/30</span> <!-- End Header -->
<div id="OLSAG062" class="chapter"><a id="BGBGFGHH"></a><a id="i1011244"></a>
<h1 class="chapter"><span class="secnum">10</span> Applying Policies to Tables and Schemas</h1>
<p>This chapter describes the <a id="sthref650"></a>SA_POLICY_ADMIN<a id="sthref651"></a> package, which enables you to administer policies on tables and schemas. It contains these sections:</p>
<ul>
<li>
<p><a href="#i1011267">Policy Administration Terminology</a></p>
</li>
<li>
<p><a href="#i1013328">Subscribing Policies in Directory-Enabled Label Security</a></p>
</li>
<li>
<p><a href="#i1011284">Policy Administration Functions for Tables and Schemas</a></p>
</li>
<li>
<p><a href="#i1011364">Administering Policies on Tables Using SA_POLICY_ADMIN</a></p>
</li>
<li>
<p><a href="#i1011531">Administering Policies on Schemas with SA_POLICY_ADMIN</a></p>
</li>
</ul>
<a id="i1011267"></a>
<div id="OLSAG063" class="sect1">
<h2 class="sect1"><span class="secnum">10.1</span> Policy Administration Terminology</h2>
<p><a id="sthref652"></a>When you <span class="italic">apply</span> a policy to a table, the policy is automatically enabled. To <span class="italic">disable</span> a policy is to turn off its protections, although it is still applied to the table. To <span class="italic">enable</span> a policy is to turn on and enforce its protections for a particular table or schema.</p>
<p>To <span class="italic">remove</span> a policy is to take it entirely away from the table or schema. Note, however, that the policy label column and the labels remain in the table unless you explicitly drop them.</p>
<p>You can <span class="italic">alter</span> the default policy enforcement options for future tables that may be created in a schema. This does not, however, affect policy enforcement options on existing tables in the schema.</p>
<p>To change the enforcement options on an existing table, you must first <span class="italic">remove</span> the policy from the table, make the desired changes, and then <span class="italic">reapply</span> the policy to the table.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="enforce.htm#i1010554">"Choosing Policy Options"</a></div>
</div>
<!-- class="sect1" -->
<a id="i1013328"></a>
<div id="OLSAG064" class="sect1">
<h2 class="sect1"><span class="secnum">10.2</span> Subscribing Policies in Directory-Enabled Label Security</h2>
<p>In an Oracle Internet Directory-enabled Oracle Label Security, a policy must be subscribed before it can be applied (by APPLY_TABLE_POLICY or APPLY_SCHEMA_POLICY). In a standalone Oracle Label Security installation, the latter functions can be used directly without the need to subscribe.</p>
<p>You subscribe a policy by using SA_POLICY_ADMIN.POLICY_SUBSCRIBE, as described in the next section.</p>
<p>Such a policy cannot be dropped unless it has been removed from any table or schema to which it was applied, and then has been unsubscribed.</p>
<p>You unsubscribe a policy by using SA_POLICY_ADMIN.POLICY_UNSUBSCRIBE as described in a subsequent section.</p>
<div id="OLSAG3331" class="sect2"><a id="sthref653"></a>
<h3 class="sect2"><span class="secnum">10.2.1</span> Subscribing to a Policy with SA_POLICY_ADMIN.POLICY_SUBSCRIBE</h3>
<p>In an Oracle Internet Directory-enabled Oracle Label Security configuration, use the POLICY_SUBSCRIBE procedure to subscribe to the policy for usage in APPLY_TABLE_POLICY and APPLY_SCHEMA_POLICY. This procedure must be called for a policy before that policy can be applied to a table or schema. Subscribing is needed only once, not for each use of the policy in a table or schema.</p>
<div id="OLSAG3332" class="sect3"><a id="sthref654"></a>
<h4 class="sect3"><span class="secnum">10.2.1.1</span> Syntax</h4>
<pre>
PROCEDURE POLICY_SUBSCRIBE(
  policy_name     IN VARCHAR2);
</pre>
<pre>
</pre>
<p>where policy_name specifies an existing policy.</p>
<div class="infobox-note">
<p class="notep1">Note::</p>
This procedure needs to be used before policy usage only in the case of Oracle Internet Directory-enabled Oracle Label Security configuration. In the standalone Oracle Label Security case, the policy can be used in APPLY_TABLE_POLICY and APPLY_SCHEMA_POLICY directly without the need to subscribe.</div>
<div id="OLSAG3333" class="sect4"><a id="sthref655"></a>
<h5 class="sect4"><span class="secnum">10.2.1.1.1</span> Example:</h5>
<p>The following statement subscribes the database to the HUMAN_RESOURCES policy so that it can used by applying on tables and schema.</p>
<pre>
SA_POLICY_ADMIN.POLICY_SUBSCRIBE('human_resources');
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="OLSAG3334" class="sect2"><a id="sthref656"></a>
<h3 class="sect2"><span class="secnum">10.2.2</span> Unsubscribing to a Policy with SA_POLICY_ADMIN.POLICY_UNSUBSCRIBE</h3>
<p>In an Oracle Internet Directory enabled Oracle Label Security configuration, use the POLICY_UNSUBSCRIBE procedure to unsubscribe to the policy. This procedure can be used only if the policy is not in use, that is, it has not been applied to any table or schema. (If it has been applied to tables or schemas, then it must be removed from all of them before it can be unsubscribed.) A policy can be dropped in Oracle Internet Directory (olsadmintool droppolicy in Appendix B) only if is not subscribed in any of the databases that have registered with that Oracle Internet Directory.</p>
<div id="OLSAG3335" class="sect3"><a id="sthref657"></a>
<h4 class="sect3"><span class="secnum">10.2.2.1</span> Syntax</h4>
<pre>
PROCEDURE POLICY_UNSUBSCRIBE(
  policy_name  IN VARCHAR2);
</pre>
<p>where policy_name specifies an existing policy.</p>
<div id="OLSAG3336" class="sect4"><a id="sthref658"></a>
<h5 class="sect4"><span class="secnum">10.2.2.1.1</span> <span class="bold">Example:</span></h5>
<p>The following statement unsubscribes the database to the HUMAN_RESOURCES policy.</p>
<pre>
SA_POLICY_ADMIN.POLICY_UNSUBSCRIBE('human_resources');
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1011284"></a>
<div id="OLSAG065" class="sect1">
<h2 class="sect1"><span class="secnum">10.3</span> Policy Administration Functions for Tables and Schemas</h2>
<p>Two sets of functions are available to administer Oracle Label Security policies:</p>
<ul>
<li>
<p>functions to administer policies at the table level<a id="sthref659"></a></p>
</li>
<li>
<p>functions to administer policies at the schema level<a id="sthref660"></a></p>
</li>
</ul>
<p>Schema-level functions are provided for convenience. Note, however, that administrative operations that you perform at the table level will override operations performed at the schema level.</p>
<div id="OLSAG3337" class="tblformal">
<p class="titleintable"><a id="sthref661"></a><a id="sthref662"></a>Table 10-1 Policy Administration Functions</p>
<table class="cellalignment2269" title="Policy Administration Functions" summary="This table lists each of the administrative table operations and names the table-level function to achieve it." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2272" id="r1c1-t4">Purpose</th>
<th class="cellalignment2272" id="r1c2-t4">Table-Level Function</th>
<th class="cellalignment2272" id="r1c3-t4">Schema-Level Function</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t4" headers="r1c1-t4">
<p>Apply policy</p>
</td>
<td class="cellalignment2268" headers="r2c1-t4 r1c2-t4">
<p><a id="sthref663"></a>APPLY_TABLE_POLICY</p>
</td>
<td class="cellalignment2268" headers="r2c1-t4 r1c3-t4">
<p><a id="sthref664"></a>APPLY_SCHEMA_POLICY</p>
</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t4" headers="r1c1-t4">
<p>Alter policy</p>
</td>
<td class="cellalignment2268" headers="r3c1-t4 r1c2-t4">
<p>Not applicable</p>
</td>
<td class="cellalignment2268" headers="r3c1-t4 r1c3-t4">
<p><a id="sthref665"></a>ALTER_SCHEMA_POLICY</p>
</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t4" headers="r1c1-t4">
<p>Disable policy</p>
</td>
<td class="cellalignment2268" headers="r4c1-t4 r1c2-t4">
<p><a id="sthref666"></a>DISABLE_TABLE_POLICY</p>
</td>
<td class="cellalignment2268" headers="r4c1-t4 r1c3-t4">
<p><a id="sthref667"></a>DISABLE_SCHEMA_POLICY</p>
</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r5c1-t4" headers="r1c1-t4">
<p>Reenable policy</p>
</td>
<td class="cellalignment2268" headers="r5c1-t4 r1c2-t4">
<p><a id="sthref668"></a>ENABLE_TABLE_POLICY</p>
</td>
<td class="cellalignment2268" headers="r5c1-t4 r1c3-t4">
<p><a id="sthref669"></a>ENABLE_SCHEMA_POLICY</p>
</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r6c1-t4" headers="r1c1-t4">
<p>Remove policy</p>
</td>
<td class="cellalignment2268" headers="r6c1-t4 r1c2-t4">
<p><a id="sthref670"></a>REMOVE_TABLE_POLICY</p>
</td>
<td class="cellalignment2268" headers="r6c1-t4 r1c3-t4">
<p><a id="sthref671"></a>REMOVE_SCHEMA_POLICY</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect1" -->
<a id="i1011364"></a>
<div id="OLSAG066" class="sect1">
<h2 class="sect1"><span class="secnum">10.4</span> Administering Policies on Tables<a id="sthref672"></a> Using SA_POLICY_ADMIN</h2>
<p>To administer policies on tables, a user must have the EXECUTE privilege for the SA_POLICY_ADMIN package, and must have been granted the <a id="sthref673"></a><span class="italic">policy</span>_DBA role. This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1011390">Applying a Policy with SA_POLICY_ADMIN.APPLY_TABLE_POLICY</a></p>
</li>
<li>
<p><a href="#i1011436">Removing a Policy with SA_POLICY_ADMIN.REMOVE_TABLE_POLICY</a></p>
</li>
<li>
<p><a href="#i1011471">Disabling a Policy with SA_POLICY_ADMIN.DISABLE_TABLE_POLICY</a></p>
</li>
<li>
<p><a href="#i1011501">Reenabling a Policy with SA_POLICY_ADMIN.ENABLE_TABLE_POLICY</a></p>
</li>
</ul>
<a id="i1011390"></a>
<div id="OLSAG3338" class="sect2">
<h3 class="sect2"><span class="secnum">10.4.1</span> Applying a Policy with SA_POLICY_ADMIN.APPLY_TABLE_POLICY</h3>
<p>Use the <a id="sthref674"></a>APPLY_TABLE_POLICY procedure to add the specified policy to a table. A policy label column is added to the table if it does not exist, and is set to NULL. When a policy is applied, it is automatically enabled. To change the table options, labeling function, or predicate, you must first remove the policy, and then reapply it.</p>
<div id="OLSAG3339" class="sect3"><a id="sthref675"></a>
<h4 class="sect3"><span class="secnum">10.4.1.1</span> Syntax</h4>
<pre>
PROCEDURE APPLY_TABLE_POLICY (
  policy_name       IN VARCHAR2,
  schema_name       IN VARCHAR2,
  table_name        IN VARCHAR2,
  table_options     IN VARCHAR2 DEFAULT NULL,
  label_function    IN VARCHAR2 DEFAULT NULL,
  predicate         IN VARCHAR2 DEFAULT NULL);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the APPLY_TABLE_POLICY procedure" summary="Parameters used by the APPLY_TABLE_POLICY procedure" dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t5">Parameter</th>
<th class="cellalignment2267" id="r1c2-t5">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t5" headers="r1c1-t5"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t5 r1c2-t5">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t5" headers="r1c1-t5"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t5 r1c2-t5">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t5" headers="r1c1-t5"><span class="italic">table_name</span></td>
<td class="cellalignment2268" headers="r4c1-t5 r1c2-t5">The table to be controlled by the policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r5c1-t5" headers="r1c1-t5"><span class="italic">table_options</span></td>
<td class="cellalignment2268" headers="r5c1-t5 r1c2-t5">A comma-delimited list of policy enforcement options to be used for the table. If NULL, then the policy's default options are used.</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r6c1-t5" headers="r1c1-t5"><span class="italic">label_function</span></td>
<td class="cellalignment2268" headers="r6c1-t5 r1c2-t5">A string calling a function to return a label value to use as the default. For example, <code>my_label(:new.dept,:new.status)</code> computes the label based on the new values of the DEPT and STATUS columns in the row.</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r7c1-t5" headers="r1c1-t5"><span class="italic">predicate</span></td>
<td class="cellalignment2268" headers="r7c1-t5 r1c2-t5">An additional predicate to combine (using AND or OR) with the label-based predicate for READ_CONTROL</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div id="OLSAG3340" class="sect4"><a id="sthref676"></a>
<h5 class="sect4"><span class="secnum">10.4.1.1.1</span> <span class="bold">Example:</span></h5>
<p>The following statement applies the HUMAN_RESOURCES policy to the EMP table in the SA_DEMO schema.</p>
<pre>
SA_POLICY_ADMIN.APPLY_TABLE_POLICY('human_resources',
</pre>
<pre>
'sa_demo','emp','no_control');
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011436"></a>
<div id="OLSAG3341" class="sect2">
<h3 class="sect2"><span class="secnum">10.4.2</span> Removing a Policy with SA_POLICY_ADMIN.REMOVE_TABLE_POLICY</h3>
<p>The <a id="sthref677"></a>REMOVE_TABLE_POLICY procedure removes the specified policy from a table. The policy predicate and any DML triggers will be removed from the table, and the policy label column can optionally be dropped. Policies can be removed from tables belonging to a schema that is protected by the policy.</p>
<div id="OLSAG3342" class="sect3"><a id="sthref678"></a>
<h4 class="sect3"><span class="secnum">10.4.2.1</span> Syntax</h4>
<pre>
PROCEDURE REMOVE_TABLE_POLICY (
policy_name        IN VARCHAR2,
schema_name        IN VARCHAR2,
table_name         IN VARCHAR2,
  drop_column      IN BOOLEAN DEFAULT FALSE);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the REMOVE_TABLE_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t6">Parameter</th>
<th class="cellalignment2267" id="r1c2-t6">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t6" headers="r1c1-t6"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t6 r1c2-t6">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t6" headers="r1c1-t6"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t6 r1c2-t6">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t6" headers="r1c1-t6"><span class="italic">table_name</span></td>
<td class="cellalignment2268" headers="r4c1-t6 r1c2-t6">The table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r5c1-t6" headers="r1c1-t6"><span class="italic">drop_column</span></td>
<td class="cellalignment2268" headers="r5c1-t6 r1c2-t6">Whether the column is to be dropped: if TRUE, then the policy's column will be dropped from the table, otherwise, it will remain</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div id="OLSAG3343" class="sect4"><a id="sthref679"></a>
<h5 class="sect4"><span class="secnum">10.4.2.1.1</span> <span class="bold">Example:</span></h5>
<p>The following statement removes the HUMAN_RESOURCES policy from the EMP table in the SA_DEMO schema:</p>
<pre>
SA_POLICY_ADMIN.REMOVE_TABLE_POLICY('human_resources','sa_demo','emp');
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011471"></a>
<div id="OLSAG3344" class="sect2">
<h3 class="sect2"><span class="secnum">10.4.3</span> Disabling a Policy with SA_POLICY_ADMIN.DISABLE_TABLE_POLICY</h3>
<p>The <a id="sthref680"></a>DISABLE_TABLE_POLICY procedure disables the enforcement of the policy for the specified table without changing the enforcement options, labeling function, or predicate values. It removes the RLS predicate and DML triggers from the table.</p>
<div id="OLSAG3345" class="sect3"><a id="sthref681"></a>
<h4 class="sect3"><span class="secnum">10.4.3.1</span> Syntax</h4>
<pre>
PROCEDURE DISABLE_TABLE_POLICY (
  policy_name      IN VARCHAR2,
  schema_name      IN VARCHAR2,
  table_name       IN VARCHAR2);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the DISABLE_TABLE_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t7">Parameter</th>
<th class="cellalignment2267" id="r1c2-t7">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t7" headers="r1c1-t7"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t7 r1c2-t7">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t7" headers="r1c1-t7"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t7 r1c2-t7">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t7" headers="r1c1-t7"><span class="italic">table_name</span></td>
<td class="cellalignment2268" headers="r4c1-t7 r1c2-t7">The table</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div id="OLSAG3346" class="sect4"><a id="sthref682"></a>
<h5 class="sect4"><span class="secnum">10.4.3.1.1</span> <span class="bold">Example:</span></h5>
<p>The following statement disables the HUMAN_RESOURCES policy on the EMP table in the SA_DEMO schema:</p>
<pre>
SA_POLICY_ADMIN.DISABLE_TABLE_POLICY('human_resources','sa_demo','emp');
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011501"></a>
<div id="OLSAG3347" class="sect2">
<h3 class="sect2"><span class="secnum">10.4.4</span> Reenabling a Policy with SA_POLICY_ADMIN.ENABLE_TABLE_POLICY</h3>
<p>The <a id="sthref683"></a>ENABLE_TABLE_POLICY procedure reenables the current enforcement options, labeling function, and predicate for the specified table by reapplying the RLS predicate and DML triggers.</p>
<div id="OLSAG3348" class="sect3"><a id="sthref684"></a>
<h4 class="sect3"><span class="secnum">10.4.4.1</span> Syntax</h4>
<pre>
PROCEDURE ENABLE_TABLE_POLICY (
  policy_name     IN VARCHAR2,
  schema_name     IN VARCHAR2,
  table_name      IN VARCHAR2);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the ENABLE_TABLE_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t8">Parameter</th>
<th class="cellalignment2267" id="r1c2-t8">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t8" headers="r1c1-t8"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t8 r1c2-t8">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t8" headers="r1c1-t8"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t8 r1c2-t8">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t8" headers="r1c1-t8"><span class="italic">table_name</span></td>
<td class="cellalignment2268" headers="r4c1-t8 r1c2-t8">The table</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div id="OLSAG3349" class="sect4"><a id="sthref685"></a>
<h5 class="sect4"><span class="secnum">10.4.4.1.1</span> <span class="bold">Example:</span></h5>
<p>The following statement reenables the HUMAN_RESOURCES policy on the EMP table in the SA_DEMO schema:</p>
<pre>
SA_POLICY_ADMIN.ENABLE_TABLE_POLICY('human_resources','sa_demo','emp');
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1011531"></a>
<div id="OLSAG067" class="sect1">
<h2 class="sect1"><span class="secnum">10.5</span> Administering Policies on Schemas<a id="sthref686"></a> with SA_POLICY_ADMIN</h2>
<p>To administer policies on schemas, a user must have the EXECUTE privilege on the SA_POLICY_ADMIN package, and must have been granted the <a id="sthref687"></a><span class="italic">policy</span>_DBA role.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1011566">Applying a Policy with SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</a></p>
</li>
<li>
<p><a href="#i1011593">Altering Enforcement Options: SA_POLICY_ADMIN.ALTER_SCHEMA_POLICY</a></p>
</li>
<li>
<p><a href="#i1011618">Removing a Policy with SA_POLICY_ADMIN.REMOVE_SCHEMA_POLICY</a></p>
</li>
<li>
<p><a href="#i1011645">Disabling a Policy with SA_POLICY_ADMIN.DISABLE_SCHEMA_POLICY</a></p>
</li>
<li>
<p><a href="#i1011667">Reenabling a Policy with SA_POLICY_ADMIN.ENABLE_SCHEMA_POLICY</a></p>
</li>
<li>
<p><a href="#i1011689">Policy Issues for Schemas</a></p>
</li>
</ul>
<a id="i1011566"></a>
<div id="OLSAG3350" class="sect2">
<h3 class="sect2"><span class="secnum">10.5.1</span> Applying a Policy with SA_POLICY_ADMIN.APPLY_SCHEMA_POLICY</h3>
<p>In addition to applying a policy to individual tables, you can apply a policy at the schema level. The <a id="sthref688"></a>APPLY_SCHEMA_POLICY procedure applies the specified policy to all of the existing tables in a schema (that is, to those which do not already have the policy applied) and enables the policy for these tables. Then, whenever a new table is created in the schema, the policy is automatically applied to that table, using the schema's default options. No changes are made to existing tables in the schema that already have the policy applied.</p>
<div id="OLSAG3351" class="sect3"><a id="sthref689"></a>
<h4 class="sect3"><span class="secnum">10.5.1.1</span> Syntax</h4>
<pre>
PROCEDURE APPLY_SCHEMA_POLICY (
  policy_name        IN VARCHAR2,
  schema_name        IN VARCHAR2,
  default_options    IN VARCHAR2 DEFAULT NULL);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the APPLY_SCHEMA_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t9">Parameter</th>
<th class="cellalignment2267" id="r1c2-t9">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t9" headers="r1c1-t9"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t9 r1c2-t9">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t9" headers="r1c1-t9"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t9 r1c2-t9">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t9" headers="r1c1-t9"><span class="italic">default_options</span></td>
<td class="cellalignment2268" headers="r4c1-t9 r1c2-t9">The default options to be used for tables in the schema</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>If the <span class="italic">default_options</span> parameter is NULL, then the policy's default options will be used to apply the policy to the tables in the schema.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011593"></a>
<div id="OLSAG3352" class="sect2">
<h3 class="sect2"><span class="secnum">10.5.2</span> Altering Enforcement Options: SA_POLICY_ADMIN.ALTER_SCHEMA_POLICY</h3>
<p>The <a id="sthref690"></a>ALTER_SCHEMA_POLICY procedure changes the default enforcement options for the policy. Any new tables created in the schema will automatically have the new enforcement options applied. The existing tables in the schema are not affected.</p>
<div id="OLSAG3353" class="sect3"><a id="sthref691"></a>
<h4 class="sect3"><span class="secnum">10.5.2.1</span> Syntax</h4>
<pre>
PROCEDURE ALTER_SCHEMA_POLICY (
  policy_name         IN VARCHAR2,
  schema_name         IN VARCHAR2,
  default_options     IN VARCHAR2);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the ALTER_SCHEMA_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t10">Parameter</th>
<th class="cellalignment2267" id="r1c2-t10">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t10" headers="r1c1-t10"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t10 r1c2-t10">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t10" headers="r1c1-t10"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t10 r1c2-t10">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t10" headers="r1c1-t10"><span class="italic">default_options</span></td>
<td class="cellalignment2268" headers="r4c1-t10 r1c2-t10">The default options to be used for new tables in the schema</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>To change enforcement options on a table (rather than a schema), you must first drop the policy from the table, make the change, and then reapply the policy.</p>
<p>If you alter the enforcement options on a schema, then this will take effect the next time a table is created in the schema. As a result, different tables within a schema may have different policy enforcement options in force.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011618"></a>
<div id="OLSAG3354" class="sect2">
<h3 class="sect2"><span class="secnum">10.5.3</span> Removing a Policy with SA_POLICY_ADMIN.REMOVE_SCHEMA_POLICY</h3>
<p>The <a id="sthref692"></a>REMOVE_SCHEMA_POLICY procedure removes the specified policy from a schema. The policy will be removed from all the tables in the schema and, optionally, the label column for the policy will be dropped from all the tables.</p>
<div id="OLSAG3355" class="sect3"><a id="sthref693"></a>
<h4 class="sect3"><span class="secnum">10.5.3.1</span> Syntax</h4>
<pre>
PROCEDURE REMOVE_SCHEMA_POLICY (
  policy_name     IN VARCHAR2,
  schema_name     IN VARCHAR2,
  drop_column     IN BOOLEAN DEFAULT FALSE);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the REMOVE_SCHEMA_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t11">Parameter</th>
<th class="cellalignment2267" id="r1c2-t11">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t11" headers="r1c1-t11"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t11 r1c2-t11">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t11" headers="r1c1-t11"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t11 r1c2-t11">The schema that contains the table</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t11" headers="r1c1-t11"><span class="italic">drop_column</span></td>
<td class="cellalignment2268" headers="r4c1-t11 r1c2-t11">If TRUE, then the policy's column will be dropped from the tables, otherwise, the column will remain.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011645"></a>
<div id="OLSAG3356" class="sect2">
<h3 class="sect2"><span class="secnum">10.5.4</span> Disabling a Policy with SA_POLICY_ADMIN.DISABLE_SCHEMA_POLICY</h3>
<p>The <a id="sthref694"></a>DISABLE_SCHEMA_POLICY procedure disables the enforcement of the policy for all of the tables in the specified schema, without changing the enforcement options, labeling function, or predicate values. It removes the RLS predicate and DML triggers from all the tables in the schema.</p>
<div id="OLSAG3357" class="sect3"><a id="sthref695"></a>
<h4 class="sect3"><span class="secnum">10.5.4.1</span> Syntax</h4>
<pre>
PROCEDURE DISABLE_SCHEMA_POLICY (
  policy_name    IN VARCHAR2,
  schema_name    IN VARCHAR2);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the DISABLE_SCHEMA_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t12">Parameter</th>
<th class="cellalignment2267" id="r1c2-t12">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t12" headers="r1c1-t12"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t12 r1c2-t12">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t12" headers="r1c1-t12"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t12 r1c2-t12">The schema that contains the table</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011667"></a>
<div id="OLSAG3358" class="sect2">
<h3 class="sect2"><span class="secnum">10.5.5</span> Reenabling a Policy with SA_POLICY_ADMIN.ENABLE_SCHEMA_POLICY</h3>
<p>The <a id="sthref696"></a>ENABLE_SCHEMA_POLICY procedure reenables the current enforcement options, labeling function, and predicate for the tables in the specified schema by re-applying the RLS predicate and DML triggers.</p>
<div id="OLSAG3359" class="sect3"><a id="sthref697"></a>
<h4 class="sect3"><span class="secnum">10.5.5.1</span> Syntax</h4>
<pre>
PROCEDURE ENABLE_TABLE_POLICY (
  policy_name    IN VARCHAR2,
  schema_name    IN VARCHAR2);
</pre>
<div class="inftblinformal">
<table class="cellalignment2266" title="Parameters used by the ENABLE_TABLE_POLICY procedure" summary="This informal table lists the parameters used by this procedure and what each specifies." dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t13">Parameter</th>
<th class="cellalignment2267" id="r1c2-t13">Specifies</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t13" headers="r1c1-t13"><span class="italic">policy_name</span></td>
<td class="cellalignment2268" headers="r2c1-t13 r1c2-t13">An existing policy</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t13" headers="r1c1-t13"><span class="italic">schema_name</span></td>
<td class="cellalignment2268" headers="r3c1-t13 r1c2-t13">The schema that contains the table</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>The result is like enabling a policy for a table, but it covers all the tables in the schema.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011689"></a>
<div id="OLSAG3360" class="sect2">
<h3 class="sect2"><span class="secnum">10.5.6</span> Policy Issues for Schemas</h3>
<p>Note the following aspects of using Oracle Label Security policies with schemas:</p>
<ul>
<li>
<p>If you apply a policy to an empty schema, then every time you create a table within that schema, the policy is applied. Once the policy is applied to the schema, the default options you choose are applied to every table added.</p>
</li>
<li>
<p>If you remove the policy from a table so that it is unprotected, and then run SA_POLICY_ADMIN.ENABLE_SCHEMA_POLICY, then the table will remain unprotected. If you wish to protect the table once again, then you must apply the policy to the table, or re-apply the policy to the schema.</p>
</li>
</ul>
<p>If you apply a policy to a schema that already contains tables protected by the policy, then all future tables will have the new options that were specified when you applied the policy. The existing tables will retain the options they already had.</p>
<pre>
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2259">
<tr>
<td class="cellalignment2268">
<table class="cellalignment2264">
<tr>
<td class="cellalignment2263"><a href="enforce.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2263"><a href="storproc.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2271">
<table class="cellalignment2262">
<tr>
<td class="cellalignment2263"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2263"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2263"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2263"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2263"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2263"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
