<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Getting Started with Oracle Label Security</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-08-19T10:59:34Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Label Security Administrator's Guide" />
<meta name="dcterms.identifier" content="E10745-04" />
<meta name="dcterms.isVersionOf" content="OLSAG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="part2.htm" title="Previous" type="text/html" />
<link rel="Next" href="worklabel.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10745.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/30</span> <!-- End Header -->
<div id="OLSAG3096" class="chapter"><a id="CBHGDADG"></a>
<h1 class="chapter"><span class="secnum">4</span> Getting Started with Oracle Label Security</h1>
<p>Oracle Label Security (OLS) provides row-level security for your database tables. It protects data rows by labeling individual rows. If a user tries to access a data row protected by a policy, then he must have proper authorization as determined by the OLS label for the row.</p>
<p>This chapter helps you get started with OLS. It discusses the tasks involved in creating a simple OLS policy. It also uses a scenario to help you create and test a sample OLS policy. This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#CIHHCEII">Installing OLS and Enabling the LBACSYS User</a></p>
</li>
<li>
<p><a href="#BABGBIBJ">Creating an OLS Policy</a></p>
</li>
<li>
<p><a href="#BABBHHFE">Creating a Sample OLS Policy</a></p>
</li>
</ul>
<a id="CIHHCEII"></a>
<div id="OLSAG3097" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.1</span> Installing OLS and Enabling the LBACSYS User</h2>
<p><a id="sthref219"></a><a id="sthref220"></a>A default Oracle Database installation does not include Oracle Label Security (OLS). Use Oracle Universal Installer to install OLS in an existing database. OLS provides its own user account, <code>LBACSYS</code>, which you need to enable after the installation.</p>
<p>This section covers the following topics:</p>
<ul>
<li>
<p><a href="#CIHBBJFA">Installing Oracle Label Security</a></p>
</li>
<li>
<p><a href="#CIHGGFGA">Registering Oracle Label Security with the Database</a></p>
</li>
<li>
<p><a href="#CIHEIJGE">Enabling the LBACSYS User Account</a></p>
</li>
</ul>
<p class="subhead2"><a id="CIHBBJFA"></a><a id="OLSAG3098"></a>Installing Oracle Label Security</p>
<p>This procedure explains how to install Oracle Label Security in an existing database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before you run Oracle Universal Installer (OUI) to install Oracle Label Security, you should shut down the database instance. You should also shut down the corresponding database service if you are using Windows.
<p>In case you haven't shut down the database service, you would be prompted to do so during installation.</p>
</div>
<p class="subhead2"><a id="OLSAG3099"></a>To install Oracle Label Security:</p>
<ol>
<li>
<p>Run Oracle Universal Installer from the installation media.</p>
<ul>
<li>
<p><span class="bold">UNIX</span>: Use the following command:</p>
<pre>
/mnt/cdrom/runInstaller
</pre></li>
<li>
<p><span class="bold">Windows</span>: Double click the file, <code>setup.exe</code> on the installation media.</p>
<p>The Welcome screen appears.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The <span class="bold">Select Installation Method</span> screen appears.</p>
</li>
<li>
<p>Select <span class="bold">Advanced Installation</span>. Click <span class="bold">Next</span>.</p>
<p>The <span class="bold">Select Installation Type</span> screen appears.</p>
</li>
<li>
<p>Select <span class="bold">Custom</span>. Click <span class="bold">Next</span>.</p>
<p>The Specify Home Details screen appears.</p>
</li>
<li>
<p>Ensure that the correct Oracle base and Oracle home directories are selected. Click <span class="bold">Next</span>.</p>
<p>At this point the installer verifies that your system meets the minimum requirements. Next, the Available Product Components screen is displayed.</p>
</li>
<li>
<p>Select the check box corresponding to <span class="bold">Oracle Label Security</span>. This option can be found under <span class="bold">Oracle Database 11g</span>, E<span class="bold">nterprise Edition Options</span>. Click <span class="bold">Next</span>.</p>
<p>The <span class="bold">Summary</span> screen is displayed.</p>
</li>
<li>
<p>Review your choices and click <span class="bold">Install</span>.</p>
<p>The progress screen is displayed.</p>
</li>
<li>
<p>The End of Installation screen is displayed. Click <span class="bold">Exit</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="CIHGGFGA"></a><a id="OLSAG3100"></a>Registering Oracle Label Security with the Database</p>
<p>After you complete the installation, you need to register Oracle Label Security with the database.</p>
<p class="subhead2"><a id="OLSAG3101"></a>To register Oracle Label Security with the Database:</p>
<ol>
<li>
<p>Start Database Configuration Assistant (DBCA).</p>
<ul>
<li>
<p><span class="bold">UNIX</span>: Run the following command:</p>
<pre>
<span class="italic">$ORACLE_HOME</span>/bin/dbca
</pre></li>
<li>
<p><span class="bold">Windows</span>: From the <span class="bold">Start</span> menu, click <span class="bold">All Programs</span>. Then click <span class="bold">Oracle -</span> <span class="bolditalic">ORACLE_HOME</span>, then <span class="bold">Configuration and Migration Tools</span>, and then <span class="bold">Database Configuration Assistant</span>.</p>
</li>
</ul>
<p>The Welcome screen appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Operations screen appears.</p>
</li>
<li>
<p>Select <span class="bold">Configure Database Options</span>. Click <span class="bold">Next</span>.</p>
<p>The Database screen appears.</p>
</li>
<li>
<p>From the list, select the database where you installed Oracle Label Security. Click <span class="bold">Next</span>.</p>
<p>The Database Content screen appears.</p>
</li>
<li>
<p>Select <span class="bold">Oracle Label Security</span>. Click <span class="bold">Next</span>.</p>
<p>The Connection Mode screen appears.</p>
</li>
<li>
<p>Select either <span class="bold">Dedicated Server Mode</span> or <span class="bold">Shared Server Mode</span>. Click <span class="bold">Finish</span>.</p>
<p>A dialog box is displayed informing you that the operation will require the database to be restarted.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>A confirmation dialog box is displayed.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The DBCA progress screen is displayed.</p>
</li>
<li>
<p>After the operation is complete, you are prompted to perform another operation. Click <span class="bold">No</span> to exit DBCA.</p>
</li>
</ol>
<p class="subhead2"><a id="CIHEIJGE"></a><a id="OLSAG3102"></a>Enabling the LBACSYS User Account</p>
<p>The OLS installation process creates a default user account, <code>LBACSYS</code>, which has the privileges to manage OLS administration. By default, <code>LBACSYS</code> is created as a locked account with it's password expired. Your next step is to unlock <code>LBACSYS</code> and create a new password. You also need to grant <code>LBACSYS</code> the <code>SELECT ANY DICTIONARY</code> system privilege. This privilege allows <code>LBACSYS</code> to log in to Enterprise Manager.</p>
<p class="subhead2"><a id="OLSAG3103"></a>To unlock LBACSYS and create a new password:</p>
<ol>
<li>
<p>Log in to Database Control as the <code>SYSTEM</code> user.</p>
</li>
<li>
<p>Click the <span class="bold">Schema</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Users</span> under Users and privileges.</p>
<p>The Users page appears</p>
</li>
<li>
<p>Select <span class="bold">LBACSYS</span>. Click <span class="bold">Edit</span>.</p>
<p>The Edit User page appears.</p>
</li>
<li>
<p>Change the Status to <span class="bold">Unlocked</span>.</p>
</li>
<li>
<p>Enter a password in the <span class="bold">Enter Password</span> field. Reenter the password in the <span class="bold">Confirm Password</span> field.</p>
</li>
<li>
<p>Click the <span class="bold">System Privileges</span> tab.</p>
</li>
<li>
<p>Select the <code>SELECT ANY DICTIONARY</code> system privilege.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABGBIBJ"></a>
<div id="OLSAG3104" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.2</span> Creating an OLS Policy</h2>
<p><a id="ABC6626280"></a>This section explores the following topics:</p>
<ul>
<li>
<p><a href="#CIHFDCAD">Step 1: Creating the Policy</a></p>
</li>
<li>
<p><a href="#CIHIDAHI">Step 2: Creating Label Components for the Policy</a></p>
</li>
<li>
<p><a href="#CIHDJDFJ">Step 3: Creating Data Labels for the Policy</a></p>
</li>
<li>
<p><a href="#CIHEBAFB">Step 4: Authorizing Users for the Policy</a></p>
</li>
<li>
<p><a href="#CIHJCGAB">Step 5: Applying the Policy to a Database Table</a></p>
</li>
<li>
<p><a href="#CIHHCGDG">Step 6: Adding Policy Labels to Table Rows</a></p>
</li>
</ul>
<a id="CIHFDCAD"></a>
<div id="OLSAG3105" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.1</span> Step 1: Creating the Policy</h3>
<p>You begin by defining a policy name, label column, and enforcement options for the policy.</p>
<p class="subhead2"><a id="OLSAG3106"></a>To create a policy with default policy enforcement options:</p>
<ol>
<li>
<p>Log in to Oracle Enterprise Manager Database Control using the <code>LBACSYS</code> account.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Oracle Label Security</span> under Security. The Label Security Policies page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span> to start creating a new label security policy.</p>
<p>The Create Label Security Policy page appears.</p>
</li>
<li>
<p>Define the policy's name, label column, and the default policy enforcement options.</p>
<ul>
<li>
<p><span class="bold">Name</span>: Enter a name for the policy, for example, <code>ACCESS_LOCATIONS</code>.</p>
</li>
<li>
<p><span class="bold">Label Column</span>: Enter a name for the label column, for example, <code>OLS_COLUMN</code>. Later on, when you apply the policy to a table, the label column is added to that table. By default, the data type of the policy label column is <code>NUMBER(10)</code>. You can also use an existing table column of the <code>NUMBER(10)</code> data type as the label column.</p>
</li>
<li>
<p><span class="bold">Hide Label Column</span>: Select to hide the column. When you first create the policy, you may want to disable <span class="bold">Hide Label Column</span> during the development phase of the policy. When the policy is satisfactory and ready for use by users, hide the column so that it is transparent to applications.</p>
</li>
<li>
<p><span class="bold">Enabled</span>: Toggle to enable or disable the policy.</p>
</li>
<li>
<p><span class="bold">Enforcement Options</span>: The default policy enforcement options are used when the policy is applied. Ensure that these meet the needs of the application to which you are applying the policy.</p>
<p>Select from the following options:</p>
<ul>
<li>
<p><span class="bold">Apply No Policy Enforcements (NO_CONTROL)</span></p>
</li>
<li>
<p><span class="bold">Apply Policy Enforcements</span></p>
<p><span class="bold">For all queries (READ_CONTROL)</span></p>
<p><span class="bold">For Insert operations (INSERT_CONTROL)</span></p>
<p><span class="bold">For Update Operations (UPDATE_CONTROL)</span></p>
<p><span class="bold">Use session's default label for label column update (LABEL_DEFAULT)</span></p>
<p><span class="bold">Operations that update the label column (LABEL_UPDATE)</span></p>
<p><span class="bold">Update and Insert operations so that they are read accessible (CHECK_CONTROL)</span></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The new policy appears in the Oracle Label Security Policies page.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHIDAHI"></a>
<div id="OLSAG3107" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.2</span> Step 2: Creating Label Components for the Policy</h3>
<p>At this stage, you have created a container for the policy and have set enforcement options for it. Next, you need to create label components for the policy.</p>
<p class="subhead2"><a id="OLSAG3108"></a>To create the label components:</p>
<ol>
<li>
<p>In the Oracle Label Security Policies page, select the policy you just created. Click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>In the Edit Label Security Policy page, select the <span class="bold">Label Components</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Add 5 Rows</span> under Levels to add levels for the policy. Enter a Long Name, Short Name, and Numeric Tag for each level that you create. The numeric tag corresponds to the sensitivity of the level. To create more levels, you can click <span class="bold">Add 5 Rows</span> again. Use the same steps to create compartments and rows. For compartments and groups, the numeric tags do not correspond to sensitivity.</p>
<p>At a minimum, you must create one level, such as SECRET. Creating compartments and groups is optional.</p>
<p>The level numbers indicate the level of sensitivity for their corresponding labels. A greater number implies greater sensitivity. Select a numeric range that can be expanded later on, in case your security policy needs more levels. For example, if you have created levels PUBLIC (7000) and SENSITIVE (8000), and you now want to create an intermediate level called CONFIDENTIAL, then you can assign the numeric value 7500 to this level.</p>
<p>Compartments identify categories associated with data, providing a finer level of granularity within a level. For example, a single table might have data corresponding to different departments that you might like to separate using compartments. Compartments are optional.</p>
<p>Groups identify organizations owning or accessing the data. Groups are useful for the controlled dissemination of data and for timely reaction to organizational change. Groups are optional.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHDJDFJ"></a>
<div id="OLSAG3109" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.3</span> Step 3: Creating Data Labels for the Policy</h3>
<p>You are now ready to create data labels for the policy. Each data label must have exactly one level associated with it. You can optionally add one or more compartments and groups to the label.</p>
<p>To create a data label, you need to assign a numeric tag to the label. Later on, the tag number will be stored in the security column when you apply the policy to a table. The label tag is not linked to the sensitivity (level) of the label. It is only used to identify the label.</p>
<p class="subhead2"><a id="OLSAG3110"></a>To create data labels for each level:</p>
<ol>
<li>
<p>In the Label Security Policies page, select the policy that needs to have labels linked to levels.</p>
</li>
<li>
<p>In the <span class="bold">Actions</span> box, select Data Labels. Click <span class="bold">Go</span>.</p>
<p>The Data Labels page appears.</p>
</li>
<li id="CIHIABEG">
<p>Click <span class="bold">Add</span>.</p>
<p>The Create Data Label page appears.</p>
</li>
<li id="CIHJBABB">
<p>Enter the following information:</p>
<ul>
<li>
<p><span class="bold">Numeric Tag</span>: Enter a number that uniquely identifies the label. This number should be unique across all policies.</p>
</li>
<li>
<p><span class="bold">Level</span>: Select a level from the list.</p>
</li>
</ul>
</li>
<li>
<p>You can optionally select Compartments to add to the label. To add compartments, click <span class="bold">Add</span> under Compartments. Select the compartments to be added to the label. Click <span class="bold">Select</span> to add the compartments.</p>
</li>
<li>
<p>You can optionally select Groups to add to the label. To add groups, click <span class="bold">Add</span> under Groups. Select the groups to be added to the label. Click <span class="bold">Select</span> to add the groups.</p>
</li>
<li id="CIHCACFI">
<p>Click <span class="bold">OK</span> in the Create Data Label page.</p>
<p>The data label appears in the Data Labels page.</p>
</li>
<li>
<p>Repeat steps <a href="#CIHIABEG">3</a> to <a href="#CIHCACFI">7</a> to create more data labels.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHEBAFB"></a>
<div id="OLSAG3111" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.4</span> Step 4: Authorizing Users for the Policy</h3>
<p>You are now ready to authorize users for the Oracle Label Security policy.</p>
<p class="subhead2"><a id="OLSAG3112"></a>To authorize users for the OLS policy:</p>
<ol>
<li>
<p>In the Label Security Policies page, select the policy that needs authorization.</p>
</li>
<li>
<p>In the <span class="bold">Actions</span> box, select Authorization. Click <span class="bold">Go</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Add users as follows:</p>
<ul>
<li>
<p>Under Database Users, click <span class="bold">Add</span>. In the Search and Select window, select users that you want and then click <span class="bold">Select</span>.</p>
</li>
<li>
<p>Under Non Database Users, click <span class="bold">Add 5 Rows</span>, and then add the user names of the non-database users that you want to add. Most application users are considered non-database users. A non-database user does not exist in the database. This can be any user name that meets the Oracle Label Security naming standards and can fit into the <code>VARCHAR2</code>(30) length field. However, be aware that Oracle Database does not automatically configure the associated security information for the non-database user when the application connects to the database. In this case, the application needs to call an Oracle Label Security function to assume the label authorizations of the specified user who is not a real database user.</p>
</li>
</ul>
</li>
<li>
<p>In the Create User page, select the user that you want to authorize. Click <span class="bold">Next</span>. If you have multiple users that need the same authorizations, then select all users who need the same authorizations. Click <span class="bold">Next</span>.</p>
<p>The Privileges step appears.</p>
</li>
<li>
<p>Next, you can assign privileges to the user you selected in the preceding step. Privileges allow a database user to bypass certain controls enforced by the policy. Select the privileges you want to grant. Click <span class="bold">Next</span>.</p>
<p>If you do not wish to assign any privilege to the user, click <span class="bold">Next</span> without selecting any privileges.</p>
<p>The Labels, Compartments, and Groups step appears.</p>
</li>
<li>
<p>Next, you need to create the user label for the user. Under Levels, use the flashlight icon to select data to enter for the following fields:</p>
<ul>
<li>
<p><span class="bold">Maximum Level</span>: Enter the highest level for read and write access for this user.</p>
</li>
<li>
<p><span class="bold">Minimum Level</span>: Enter the lowest level for write access.</p>
</li>
<li>
<p><span class="bold">Default Level</span>: Enter the default level when the user logs in.</p>
<p>This value is equal to or greater than the minimum level and equal to or less than the maximum level.</p>
</li>
<li>
<p><span class="bold">Row Level</span>: Enter the level given to the row when user writes to the table.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Add</span> under Compartments, to add compartments to the user label. Select the compartments to add. Click <span class="bold">Select</span>.</p>
</li>
<li>
<p>For each compartment that you add, you can select the following properties:</p>
<ul>
<li>
<p><span class="bold">Write</span>: Allows the user to write to data that has the compartment as part of it's label</p>
</li>
<li>
<p><span class="bold">Default</span>: Adds the compartment to the user's default session label</p>
</li>
<li>
<p><span class="bold">Row</span>: Adds the compartment to the data label when the user writes to the table</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Add</span> under Groups, to add groups to the user label. Select the groups and click <span class="bold">Select</span>.</p>
</li>
<li>
<p>For each group that you add, you can select the following properties:</p>
<ul>
<li>
<p><span class="bold">Write</span>: Allows the user to write to data that has the group as part of it's label</p>
</li>
<li>
<p><span class="bold">Default</span>: Adds the group to the user's default session label</p>
</li>
<li>
<p><span class="bold">Row</span>: Adds the group to the data label when the user writes to the table</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Audit step appears.</p>
</li>
<li>
<p>Next, you can choose to set the policy audit options for the selected user. You can set audit options for the following operations:</p>
<ul>
<li>
<p>Policy Applied:</p>
<p><span class="bold">Audit On Success By</span> audits successful application of the policy to a table or schema. Select ACCESS to audit by access or SESSION to audit by session.</p>
<p><span class="bold">Audit On Failure By</span> audits failed application of the policy to a table or schema. Select ACCESS to audit by access or SESSION to audit by session.</p>
</li>
<li>
<p>Policy Removed:</p>
<p><span class="bold">Audit On Success By</span> audits successful removal of the policy from a table or schema. Select ACCESS to audit by access or SESSION to audit by session.</p>
<p><span class="bold">Audit On Failure By</span> audits failed removal of the policy from a table or schema. Select ACCESS to audit by access or SESSION to audit by session.</p>
</li>
<li>
<p>Labels And Privileges Set:</p>
<p><span class="bold">Audit On Success By</span> audits successful setting of user authorizations and privileges. Select ACCESS to audit by access or SESSION to audit by session.</p>
<p><span class="bold">Audit On Failure By</span> audits failed setting of user authorizations and privileges. Select ACCESS to audit by access or SESSION to audit by session.</p>
</li>
<li>
<p>All Policy Specific Privileges:</p>
<p><span class="bold">Audit On Success By</span> audits successful use of policy privileges. Select ACCESS to audit by access or SESSION to audit by session.</p>
<p><span class="bold">Audit On Failure By</span> audits failed use of policy privileges. Select ACCESS to audit by access or SESSION to audit by session.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
</li>
<li>
<p>You can review the policy authorization settings. Click <span class="bold">Finish</span> to create the policy authorization. Alternatively, you can click <span class="bold">Back</span> to modify the authorization settings.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHJCGAB"></a>
<div id="OLSAG3113" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.5</span> Step 5: Applying the Policy to a Database Table</h3>
<p>Next, apply the OLS policy to a database table.</p>
<p class="subhead2"><a id="OLSAG3114"></a>To apply the policy to a database table:</p>
<ol>
<li>
<p>In the Label Security Policies page, select the policy that needs to be applied to a table.</p>
</li>
<li>
<p>Select Apply from the <span class="bold">Actions</span> box. Click <span class="bold">Go</span>.</p>
<p>The Apply page appears.</p>
</li>
<li>
<p>Select the <span class="bold">Tables</span> tab to apply the policy to a table.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Select the <span class="bold">Schemas</span> tab if you are applying the policy to a schema.The process is same as applying the policy to a table.</div>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Add Table page appears.</p>
</li>
<li>
<p>Next to the <span class="bold">Table</span> box, click the flashlight icon.</p>
</li>
<li>
<p>In the Search and Select window, enter the following information under Search:</p>
<ul>
<li>
<p><span class="bold">Schema</span>: Enter the name of the schema in which the table appears. Leaving this field empty displays tables in all schemas.</p>
</li>
<li>
<p><span class="bold">Name</span>: Optionally, enter the name of the table. Leaving this box empty displays all the tables within the schema.</p>
</li>
</ul>
<p>To narrow the search by using wildcards, use the percent (%) sign. For example, enter <code>O%</code> to search for all tables beginning with the letter O.</p>
</li>
<li>
<p>Select the table and click <span class="bold">Select</span>.</p>
<p>The Add Table page appears.</p>
</li>
<li>
<p>Enter the following information:</p>
<ul>
<li>
<p><span class="bold">Policy Enforcement Options</span>: Select enforcement options as needed. These options will apply to the table on top of the enforcement options that you selected when you created the policy in <a href="#CIHFDCAD">Step 1: Creating the Policy</a>.</p>
<p>To make no change from those enforcement options, that is, to use the same enforcement options created earlier, select <span class="bold">Use Default Policy Enforcement</span>. To add more enforcement options, select from the other options listed.</p>
</li>
<li>
<p><span class="bold">Labeling Function</span>: Optionally, specify a labeling function to automatically compute the label to be associated with a new or updated row. That function is always invoked thereafter to provide the data labels written under that policy, because active labeling functions take precedence over any alternative means of supplying a label.</p>
</li>
<li>
<p><span class="bold">Predicate</span>: Optionally, specify an additional predicate to combine (using <code>AND</code> or <code>OR</code>) with the label-based predicate for <code>READ_CONTROL</code>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHHCGDG"></a>
<div id="OLSAG3115" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.2.6</span> Step 6: Adding Policy Labels to Table Rows</h3>
<p>After you have applied a policy to a table, you need to add data labels to the rows in the table. These labels are stored in the policy label column created in the table. The user updating the table needs to have the FULL security privilege for the policy. This user is normally the owner of the table.</p>
<p class="subhead2"><a id="OLSAG3116"></a>To grant the table owner FULL privilege for the OLS Policy:</p>
<ol>
<li>
<p>Return to the Label Security Policies page by selecting the <span class="bold">Label Security Policies</span> link.</p>
</li>
<li>
<p>Select the <span class="bold">ACCESS_LOCATIONS</span> policy.</p>
</li>
<li>
<p>Select Authorization from the <span class="bold">Actions</span> box. Click <span class="bold">Go</span>.</p>
<p>The Authorization page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Under Database Users, click <span class="bold">Add</span>.</p>
<p>The Search and Select window appears.</p>
</li>
<li>
<p>Select the check box corresponding to the user that owns the table. Click <span class="bold">Select</span>.</p>
<p>The Create User page lists the user that was added.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Privileges step appears.</p>
</li>
<li>
<p>Select the following privilege:</p>
<p><span class="bold">Bypass all Label Security checks (FULL)</span></p>
<p>Click <span class="bold">Next</span>.</p>
<p>The Labels, Compartments, and Groups step appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Audit step appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Review step appears.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="OLSAG3117"></a>To add data labels to the table:</p>
<ul>
<li>
<p>In SQL*Plus, enter an <code>UPDATE</code> statement using the following syntax:</p>
<pre>
UPDATE LOCATIONS
SET <span class="italic">OLS_COLUMN</span> = CHAR_TO_LABEL('<span class="italic">OLS_POLICY</span>','<span class="italic">DATA_LABEL</span>')
WHERE UPPER(<span class="italic">TABLE_COLUMN</span>) IN (<span class="italic">COLUMN_DATA</span>);
</pre>
<p>For example, suppose <code>LABCSYS</code> has created a policy called <code>ACCESS_LOCATIONS</code> and wants to add the label <code>SENS</code> to the cities Beijing, Tokyo, and Singapore in the <code>HR.LOCATIONS</code> table. The policy label column is called <code>ROW_LABEL</code>. The <code>UPDATE</code> statement is as follows:</p>
<pre>
UPDATE LOCATIONS
SET ROW_LABEL = CHAR_TO_LABEL('ACCESS_LOCATIONS','SENS')
WHERE UPPER(city) IN ('BEIJING', 'TOKYO', 'SINGAPORE');
</pre></li>
</ul>
<p>If you want to check that your labels really made it into the table, run the following <code>SELECT</code> statement:</p>
<pre>
SELECT LABEL_TO_CHAR (ROW_LABEL) FROM LOCATIONS;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBHHFE"></a>
<div id="OLSAG3118" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.3</span> Creating a Sample OLS Policy</h2>
<p><a id="ABC6626291"></a><a id="ABC6626291SRI1"></a>This example demonstrates the general concepts of using Oracle Label Security. In it, you will apply security labels to the <code>HR.LOCATIONS</code> table. Three users, SKING, KPARTNERS, and LDORAN will have access to specific rows within this table, based on the cities listed in the LOCATIONS table.</p>
<p>The <code>HR.LOCATIONS</code> is described as follows:</p>
<pre>
SQL&gt; DESCRIBE locations

Name                                      Null?    Type
----------------------------------------- -------- -------------
LOCATION_ID                               NOT NULL NUMBER(4)
STREET_ADDRESS                                     VARCHAR2(40)
POSTAL_CODE                                        VARCHAR2(12)
CITY                                      NOT NULL VARCHAR2(30)
STATE_PROVINCE                                     VARCHAR2(25)
COUNTRY_ID                                         CHAR(2)
</pre>
<p>You will apply the following labels:</p>
<div class="inftblhruleinformal">
<table class="cellalignment2266" title="OLS Labels Assigned to OE.CUSTOMERS" summary="Example labels for the customers table" dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t4">Label</th>
<th class="cellalignment2267" id="r1c2-t4">Privileges</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t4" headers="r1c1-t4">CONFIDENTIAL</td>
<td class="cellalignment2268" headers="r2c1-t4 r1c2-t4">Read access to the cities Munich, Oxford, and Rome</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t4" headers="r1c1-t4">SENSITIVE</td>
<td class="cellalignment2268" headers="r3c1-t4 r1c2-t4">Read access to the cities Beijing, Tokyo, and Singapore</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t4" headers="r1c1-t4">PUBLIC</td>
<td class="cellalignment2268" headers="r4c1-t4 r1c2-t4">Read access to all other cities listed in <code>HR.LOCATIONS</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblhruleinformal" -->
<p>You will follow these steps to complete this example:</p>
<ul>
<li>
<p><a href="#CIHDGDFG">Step 1: Creating Users for the Oracle Label Security Example</a></p>
</li>
<li>
<p><a href="#BABCICBJ">Step 2: Creating the ACCESS_LOCATIONS Policy</a></p>
</li>
<li>
<p><a href="#BABEJCDB">Step 3: Defining the ACCESS_LOCATIONS Policy-Level Components</a></p>
</li>
<li>
<p><a href="#BABBDABC">Step 4: Creating the ACCESS_LOCATIONS Policy Data Labels</a></p>
</li>
<li>
<p><a href="#BABEAHIJ">Step 5: Creating the ACCESS_LOCATIONS Policy User Authorizations</a></p>
</li>
<li>
<p><a href="#BABBHCIE">Step 6: Applying the ACCESS_LOCATIONS Policy to the HR.LOCATIONS Table</a></p>
</li>
<li>
<p><a href="#CIHEHIFI">Step 7: Adding Policy Labels to Table Data</a></p>
</li>
<li>
<p><a href="#CIHIFJAE">Step 8: Testing the ACCESS_LOCATIONS Policy</a></p>
</li>
<li>
<p><a href="#CIHICGDG">Step 9: Removing the Components for This Example (Optional)</a></p>
</li>
</ul>
<a id="CIHDGDFG"></a>
<div id="OLSAG3119" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.1</span> Step 1: Creating Users for the Oracle Label Security Example</h3>
<p>You are ready to create a role and three users, and then grant these users the role.</p>
<ul>
<li>
<p><a href="#CIHGBBJC">Creating the EMP_ROLE Role</a></p>
</li>
<li>
<p><a href="#CIHEDHFH">Creating the Users SKING, KPARTNERS, and LDORAN</a></p>
</li>
</ul>
<p class="subhead2"><a id="CIHGBBJC"></a><a id="OLSAG3120"></a>Creating the EMP_ROLE Role</p>
<p>The <code>EMP_ROLE</code> role provides the necessary privileges for the three users that you will create.</p>
<p class="subhead2"><a id="OLSAG3121"></a>To create the role EMP_ROLE:</p>
<ol>
<li>
<p>Log in to Database Control as the <code>SYSTEM</code> user.</p>
</li>
<li>
<p>Click the <span class="bold">Schema</span> tab.</p>
</li>
<li>
<p>Under Users and Privileges, click <span class="bold">Roles</span>.</p>
<p>The Roles page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create Role page appears.</p>
</li>
<li>
<p>Enter EMP_ROLE in the <span class="bold">Name</span> field. Leave <span class="bold">Authentication</span> set to None.</p>
</li>
<li>
<p>Click the <span class="bold">Object Privileges</span> tab.</p>
</li>
<li>
<p>Select Table from the <span class="bold">Select Object Type</span> box. Click <span class="bold">Add</span>.</p>
<p>The Add Table Object Privileges page appears.</p>
</li>
<li>
<p>Under <span class="bold">Select Table Objects</span>, enter <code>HR.LOCATIONS</code> to select the LOCATIONS table in the <code>HR</code> schema. Under <span class="bold">Available Privileges</span>, move SELECT to the <span class="bold">Selected Privileges</span> list.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> in the Create Role page.</p>
</li>
</ol>
<p class="subhead2"><a id="CIHEDHFH"></a><a id="OLSAG3122"></a>Creating the Users SKING, KPARTNERS, and LDORAN</p>
<p>The three users you create will have different levels of access to the <code>HR.LOCATIONS</code> table, depending on their position. Steven King (SKING) is the Sales president, so he has full read access to the <code>HR.LOCATIONS</code> table. Karen Partners (KPARTNERS) is a sales manager who has less access, and Louise Doran (LDORAN) is a sales representative who has the least access.</p>
<p class="subhead2"><a id="OLSAG3123"></a>To create the users SKING, KPARTNERS, and LDORAN:</p>
<ol>
<li>
<p>Log in to Database Control as <code>SYSTEM</code>.</p>
</li>
<li>
<p>Click the <span class="bold">Schema</span> tab.</p>
</li>
<li>
<p>Under Users and Privileges, click <span class="bold">Users</span>.</p>
<p>The Users page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Enter the following information:</p>
<ul>
<li>
<p><span class="bold">Name</span>: SKING</p>
</li>
<li>
<p><span class="bold">Profile</span>: DEFAULT</p>
</li>
<li>
<p><span class="bold">Authentication</span>: Password</p>
</li>
<li>
<p><span class="bold">Enter Password</span> and <span class="bold">Confirm Password</span>: there4all</p>
</li>
<li>
<p><span class="bold">Default Tablespace</span>: USERS</p>
</li>
<li>
<p><span class="bold">Temporary Tablespace</span>: TEMP</p>
</li>
<li>
<p><span class="bold">Roles</span>: Select the <span class="bold">Roles</span> tab and grant the EMP_ROLE role to SKING. Select the <span class="bold">Default</span> check box.</p>
</li>
<li>
<p><span class="bold">System Privileges</span>: Select the <span class="bold">System Privileges</span> tab and grant the <code>CREATE SESSION</code> system privilege.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Users page, select SKING, select Create Like in the <span class="bold">Actions</span> box, and then click <span class="bold">Go</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Create accounts for KPARTNERS and LDORAN, with eager2please as the password for KPARTNERS and ready2go as the password for LDORAN.</p>
<p>You only need to create their names and passwords. You do not need to grant roles or system privileges to them. Their roles and system privileges, defined in <code>SKING</code>'s account, are automatically created.</p>
</li>
</ol>
<p>At this stage, you have created three users who have identical privileges.</p>
</div>
<!-- class="sect2" -->
<a id="BABCICBJ"></a>
<div id="OLSAG3124" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.2</span> Step 2: Creating the ACCESS_LOCATIONS Policy</h3>
<p>The policy is the container for the label components that you will create later.</p>
<p class="subhead2"><a id="OLSAG3125"></a>To create the ACCESS_LOCATIONS policy:</p>
<ol>
<li>
<p>Log in to Database Control as the <code>LBACSYS</code> user.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Oracle Label Security</span> under Security.</p>
<p>The Label Security Policies page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Label Security Policy page, enter the following information:</p>
<ul>
<li>
<p><span class="bold">Name</span>: ACCESS_LOCATIONS</p>
</li>
<li>
<p><span class="bold">Label Column</span>: OLS_COLUMN</p>
</li>
<li>
<p><span class="bold">Hide Label Column</span>: Deselect this check box so that the label column will not be hidden.</p>
<p>Usually, it should be hidden, but during the development phase, you may want to have it visible so that you can check it. After the policy is created and working, you should hide this column for greater security.</p>
</li>
<li>
<p><span class="bold">Enabled</span>: Toggle to enable this policy. (It should be enabled by default.)</p>
</li>
<li>
<p><span class="bold">Enforcement Options</span>: Select <span class="bold">Apply Policy Enforcements</span>, and then select the following options:</p>
<p><span class="bold">For all queries (READ_CONTROL)</span></p>
<p><span class="bold">Use session's default label for label column update (LABEL_DEFAULT)</span></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The ACCESS_LOCATIONS policy appears in the Label Security Policies page.</p>
<img width="482" height="336" src="img/ols_new_policy.gif" alt="Description of ols_new_policy.gif follows" /><br />
<a id="sthref221" href="img_text/ols_new_policy.htm">Description of the illustration ols_new_policy.gif</a><br />
<br /></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABEJCDB"></a>
<div id="OLSAG3126" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.3</span> Step 3: Defining the ACCESS_LOCATIONS Policy-Level Components</h3>
<p>You can now define the label components for the ACCESS_LOCATIONS policy.</p>
<p class="subhead2"><a id="OLSAG3127"></a>To define the label components for the ACCESS_LOCATIONS policy:</p>
<ol>
<li>
<p>In the Label Security policies page, select the <span class="bold">ACCESS_LOCATIONS</span> policy. Click <span class="bold">Edit</span>.</p>
<p>The Edit Label Security Policy page appears.</p>
</li>
<li>
<p>Select the <span class="bold">Label Components</span> tab.</p>
</li>
<li>
<p>Under Levels, click <span class="bold">Add 5 Rows</span>, and add the following levels:</p>
<div class="inftblinformal">
<table class="cellalignment2266" title="Values for OLS Levels" summary="Values for OLS Levels" dir="ltr">
<thead>
<tr class="cellalignment2260">
<th class="cellalignment2267" id="r1c1-t5">Long Name</th>
<th class="cellalignment2267" id="r1c2-t5">Short Name</th>
<th class="cellalignment2267" id="r1c3-t5">Numeric Tag</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r2c1-t5" headers="r1c1-t5">SENSITIVE</td>
<td class="cellalignment2268" headers="r2c1-t5 r1c2-t5">SENS</td>
<td class="cellalignment2268" headers="r2c1-t5 r1c3-t5">3000</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r3c1-t5" headers="r1c1-t5">CONFIDENTIAL</td>
<td class="cellalignment2268" headers="r3c1-t5 r1c2-t5">CONF</td>
<td class="cellalignment2268" headers="r3c1-t5 r1c3-t5">2000</td>
</tr>
<tr class="cellalignment2260">
<td class="cellalignment2268" id="r4c1-t5" headers="r1c1-t5">PUBLIC</td>
<td class="cellalignment2268" headers="r4c1-t5 r1c2-t5">PUB</td>
<td class="cellalignment2268" headers="r4c1-t5 r1c3-t5">1000</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" --></li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABBDABC"></a>
<div id="OLSAG3128" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.4</span> Step 4: Creating the ACCESS_LOCATIONS Policy Data Labels</h3>
<p>In this step, you create data labels corresponding to the levels that you created in the last step.</p>
<p class="subhead2"><a id="OLSAG3129"></a>To create the data labels:</p>
<ol>
<li>
<p>Return to the Label Security Policies page by clicking the <span class="bold">Label Security Policies</span> link.</p>
</li>
<li>
<p>Select the <span class="bold">ACCESS_LOCATIONS</span> policy.</p>
</li>
<li>
<p>Select Data Labels from the <span class="bold">Actions</span> list. Click <span class="bold">Go</span>.</p>
<p>The Data Labels page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Create Data Label page appears.</p>
</li>
<li>
<p>Enter the following information:</p>
<ul>
<li>
<p><span class="bold">Numeric Tag</span>: Enter <code>1000</code>.</p>
</li>
<li>
<p><span class="bold">Level</span>: From the list, select PUB.</p>
<img width="733" height="156" src="img/ols_dlabel.gif" alt="Description of ols_dlabel.gif follows" /><br />
<a id="sthref222" href="img_text/ols_dlabel.htm">Description of the illustration ols_dlabel.gif</a><br />
<br /></li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The data label appears in the Data Labels page.</p>
</li>
<li>
<p>Click <span class="bold">Add</span> again, and then create a data label for the CONF level. For the numeric tag, enter 2000.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>Click <span class="bold">Add</span> again, and then create a data label for the SENS level. For the numeric tag, enter 3000.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABEAHIJ"></a>
<div id="OLSAG3130" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.5</span> Step 5: Creating the ACCESS_LOCATIONS Policy User Authorizations</h3>
<p>Next, you are ready to create user authorizations for the policy.</p>
<p class="subhead2"><a id="OLSAG3131"></a>To create user authorizations for the policy:</p>
<ol>
<li>
<p>Return to the Label Security Policies page by selecting the <span class="bold">Label Security Policies</span> link.</p>
</li>
<li>
<p>Select the <span class="bold">ACCESS_LOCATIONS</span> policy.</p>
</li>
<li>
<p>Select Authorization from the <span class="bold">Actions</span> box. Click <span class="bold">Go</span>.</p>
<p>The Authorization page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Under Database Users, click <span class="bold">Add</span>.</p>
<p>The Search and Select window appears.</p>
</li>
<li>
<p>Select the check box for user <span class="bold">SKING</span> and then click <span class="bold">Select</span>.</p>
<p>The Create User page lists user SKING.</p>
<img width="388" height="210" src="img/ols_auth_user.gif" alt="Description of ols_auth_user.gif follows" /><br />
<a id="sthref223" href="img_text/ols_auth_user.htm">Description of the illustration ols_auth_user.gif</a><br />
<br /></li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Privileges step appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Labels, Compartments and Groups step appears.</p>
</li>
<li>
<p>Set the following levels for the user SKING:</p>
<ul>
<li>
<p><span class="bold">Maximum Level</span>: SENS (for SENSITIVE)</p>
</li>
<li>
<p><span class="bold">Minimum Level</span>: CONF (for CONFIDENTIAL)</p>
</li>
<li>
<p><span class="bold">Default Level</span>: SENS</p>
</li>
<li>
<p><span class="bold">Row Level</span>: SENS</p>
</li>
</ul>
<p>This allows SKING to read CONFIDENTIAL and SENSITIVE data.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Audit step appears.</p>
</li>
<li>
<p>Ensure that all of the audit operations are set to None, and then click <span class="bold">Next</span>.</p>
<p>The Review step appears.</p>
<img width="817" height="576" src="img/ols_auth.gif" alt="Description of ols_auth.gif follows" /><br />
<a id="sthref224" href="img_text/ols_auth.htm">Description of the illustration ols_auth.gif</a><br />
<br /></li>
<li>
<p>The Review step lists all the authorization settings you have selected. Ensure that the settings are correct, and then click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>Repeat these steps to create the following authorizations for user KPARTNERS, so that she can read confidential and public data in <code>HR.LOCATIONS</code>.</p>
<ul>
<li>
<p><span class="bold">Labels, Compartments And Groups</span>: Set all four levels to the following:</p>
<ul>
<li>
<p><span class="bold">Maximum Level</span>: CONF (for CONFIDENTIAL)</p>
</li>
<li>
<p><span class="bold">Minimum Level</span>: PUB (for PUBLIC)</p>
</li>
<li>
<p><span class="bold">Default Level</span>: CONF</p>
</li>
<li>
<p><span class="bold">Row Level</span>: CONF</p>
</li>
</ul>
</li>
<li>
<p><span class="bold">Audit</span>: Set all to None.</p>
</li>
</ul>
</li>
<li>
<p>Create the following authorizations for user LDORAN, who is only allowed to read public data from <code>HR.LOCATIONS</code>:</p>
<ul>
<li>
<p><span class="bold">Labels, Compartments And Groups</span>: Set all four levels to PUB.</p>
</li>
<li>
<p><span class="bold">Audit</span>: Set all to None.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABBHCIE"></a>
<div id="OLSAG3132" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.6</span> Step 6: Applying the ACCESS_LOCATIONS Policy to the HR.LOCATIONS Table</h3>
<p>Next, you are ready to apply the policy to the <code>HR.LOCATIONS</code> table.</p>
<p class="subhead2"><a id="OLSAG3133"></a>To apply the ACCESS_LOCATIONS policy to the HR.LOCATIONS table:</p>
<ol>
<li>
<p>Return to the Label Security Policies page by selecting the <span class="bold">Label Security Policies</span> link.</p>
</li>
<li>
<p>Select the <span class="bold">ACCESS_LOCATIONS</span> policy.</p>
</li>
<li>
<p>Select Apply from the <span class="bold">Actions</span> box. Click <span class="bold">Go</span>.</p>
<p>The Apply page appears.</p>
</li>
<li>
<p>Ensure that the <span class="bold">Tables</span> tab is selected. Click <span class="bold">Create</span>.</p>
<p>The Add Table page appears.</p>
</li>
<li>
<p>In the <span class="bold">Table</span> field, enter <code>HR.LOCATIONS</code>.</p>
</li>
<li>
<p>Ensure that the <span class="bold">Hide Policy Column</span> check box is not selected.</p>
</li>
<li>
<p>Ensure that the <span class="bold">Enabled</span> check box is selected.</p>
</li>
<li>
<p>Under Policy Enforcement Options, select <span class="bold">Use Default Policy Enforcement</span>.</p>
<p>The default policy enforcement options for ACCESS_LOCATIONS are:</p>
<ul>
<li>
<p><span class="bold">For all queries (READ_CONTROL)</span></p>
</li>
<li>
<p><span class="bold">Use session's default label for label column update (LABEL_DEFAULT)</span></p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The ACCESS_LOCATIONS policy is applied to the <code>HR.LOCATIONS</code> table.</p>
<img width="783" height="113" src="img/ols_apply.gif" alt="Description of ols_apply.gif follows" /><br />
<a id="sthref225" href="img_text/ols_apply.htm">Description of the illustration ols_apply.gif</a><br />
<br /></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHEHIFI"></a>
<div id="OLSAG3134" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.7</span> Step 7: Adding Policy Labels to Table Data</h3>
<p>After you have applied the ACCESS_LOCATIONS policy to the <code>HR.LOCATIONS</code> table, you need to label the rows in the table. <code>HR</code> is the owner of the LOCATIONS table. <code>HR</code> needs to have the <code>FULL</code> security privilege for the ACCESS_LOCATIONS policy, in order to successfully update the LOCATIONS table with the policy labels.</p>
<ul>
<li>
<p><a href="#CIHEIJEF">Granting FULL Privilege to the Owner of the Application Table</a></p>
</li>
<li>
<p><a href="#CIHDFGAF">Updating the OLS_COLUMN Table in HR.LOCATIONS</a></p>
</li>
</ul>
<p class="subhead2"><a id="CIHEIJEF"></a><a id="OLSAG3135"></a>Granting FULL Privilege to the Owner of the Application Table</p>
<p>The label security administrative user, <code>LBACSYS</code> can grant <code>HR</code> the necessary privilege.</p>
<p class="subhead2"><a id="OLSAG3136"></a>To grant HR FULL Privilege for the OLS Policy:</p>
<ol>
<li>
<p>Return to the Label Security Policies page by selecting the <span class="bold">Label Security Policies</span> link.</p>
</li>
<li>
<p>Select the <span class="bold">ACCESS_LOCATIONS</span> policy.</p>
</li>
<li>
<p>Select Authorization from the <span class="bold">Actions</span> box. Click <span class="bold">Go</span>.</p>
<p>The Authorization page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Create User page appears.</p>
</li>
<li>
<p>Under Database Users, click <span class="bold">Add</span>.</p>
<p>The Search and Select window appears.</p>
</li>
<li>
<p>Select the check box for user <span class="bold">HR</span> and then click <span class="bold">Select</span>.</p>
<p>The Create User page lists user <code>HR</code>.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Privileges step appears.</p>
</li>
<li>
<p>Select the following privilege:</p>
<p><span class="bold">Bypass all Label Security checks (FULL)</span></p>
<p>Click <span class="bold">Next</span>. The Labels, Compartments, and Groups step appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>. The Audit step appears.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>. The Review step appears.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="CIHDFGAF"></a><a id="OLSAG3137"></a>Updating the OLS_COLUMN Table in HR.LOCATIONS</p>
<p>The user <code>HR</code> can now update the <code>HR.LOCATIONS</code> table with the appropriate labels.</p>
<p class="subhead2"><a id="OLSAG3138"></a>To update the OLS_COLUMN table in HR.LOCATIONS:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user <code>HR</code>.</p>
<pre>
CONNECT HR
Enter password: 
</pre>
<p>If you receive an error message saying that <code>HR</code> is locked, you can unlock the account and reset its password by entering the following statements:</p>
<pre>
CONNECT system
Enter password: <span class="italic">sys_password</span>
ALTER USER HR ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">password</span>
CONNECT hr
Enter password:
</pre></li>
<li>
<p>Enter the following <code>UPDATE</code> statement to apply the SENS label to the cities Beijing, Tokyo, and Singapore:</p>
<pre>
UPDATE LOCATIONS
SET ols_column = CHAR_TO_LABEL('ACCESS_LOCATIONS','SENS')
WHERE UPPER(city) IN ('BEIJING', 'TOKYO', 'SINGAPORE');
</pre></li>
<li>
<p>Enter the following <code>UPDATE</code> statement to apply the CONF label to the cities Munich, Oxford, and Rome:</p>
<pre>
UPDATE LOCATIONS
SET ols_column = CHAR_TO_LABEL('ACCESS_LOCATIONS','CONF')
WHERE UPPER(city) IN ('MUNICH', 'OXFORD', 'ROME');
</pre></li>
<li>
<p>Enter the following <code>UPDATE</code> statement to apply the PUB label to the remaining cities:</p>
<pre>
UPDATE LOCATIONS
SET ols_column = CHAR_TO_LABEL('ACCESS_LOCATIONS','PUB')
WHERE ols_column IS NULL;
</pre></li>
<li>
<p>To check that the columns were updated, enter the following query:</p>
<pre>
SELECT LABEL_TO_CHAR (OLS_COLUMN) FROM LOCATIONS;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
<p>Using the label column name (<code>OLS_COLUMN</code>) explicitly in the preceding query enables you to see the label column even if it was hidden.</p>
<p>If the label column is hidden, and you do not specify the label column name explicitly, then the label column is not displayed in the query results. For example, using the <code>SELECT * FROM LOCATIONS</code> query will not show the label column if it is hidden. This feature allows the label column to remain transparent to applications. An application that was designed before the label column was added will not know about the label column and will never see it.</p>
</div>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHIFJAE"></a>
<div id="OLSAG3139" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.8</span> Step 8: Testing the ACCESS_LOCATIONS Policy</h3>
<p>The ACCESS_LOCATIONS policy is complete and ready to be tested. You can test it by logging in to SQL*Plus as each of the three users and performing a <code>SELECT</code> on the <code>HR.LOCATIONS</code> table.</p>
<p class="subhead2"><a id="OLSAG3140"></a>To test the ACCESS_LOCATIONS policy:</p>
<ol>
<li>
<p>In SQL*Plus, connect as user SKING, whose password is there4all.</p>
<pre>
CONNNECT SKING
Enter password: there4all
</pre></li>
<li>
<p>Enter the following statement:</p>
<pre>
COL city HEADING City FORMAT a25
COL country_id HEADING Country FORMAT a11
COL Label format a10
SELECT city, country_id, LABEL_TO_CHAR (OLS_COLUMN)
   AS Label FROM hr.locations ORDER BY ols_column;
</pre>
<p>User SKING is able to access all rows that are labeled PUB, CONF, and SENS.</p>
</li>
<li>
<p>Repeat these steps for users KPARTNERS and LDORAN.</p>
<p>The password for KPARTNERS is eager2please and the password for LDORAN is ready2go.</p>
<p>KPARTNERS can access rows labeled CONF and PUB, and LDORAN is able to access the rows labeled PUB.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHICGDG"></a>
<div id="OLSAG3141" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.3.9</span> Step 9: Removing the Components for This Example (Optional)</h3>
<p>If you want, remove the components that you created for this example.</p>
<p class="subhead2"><a id="OLSAG3142"></a>To remove the components for this example:</p>
<ol>
<li>
<p>In Database Control, connect as user <code>SYSTEM</code>.</p>
</li>
<li>
<p>Click the <span class="bold">Schema</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Users</span> under Users and Privileges.</p>
</li>
<li id="CIHIFFCH">
<p>Select user <span class="bold">KPARTNERS</span> and then click <span class="bold">Delete</span>.</p>
</li>
<li id="CIHEJDFH">
<p>In the Confirmation page, click <span class="bold">Yes</span>.</p>
</li>
<li>
<p>Repeat Step <a href="#CIHIFFCH">4</a> and Step <a href="#CIHEJDFH">5</a> for users LDORAN and SKING.</p>
</li>
<li>
<p>Log out of Database Control, and then log back in as the <code>LABCSYS</code> user.</p>
</li>
<li>
<p>Click the <span class="bold">Server</span> tab.</p>
</li>
<li>
<p>Click <span class="bold">Oracle Label Security</span> under Security.</p>
</li>
<li>
<p>In the Label Security Policies page, in the <span class="bold">Name</span> field, enter <code>ACCESS%</code> and then click <span class="bold">Go</span>.</p>
<img width="522" height="333" src="img/ols_delete.gif" alt="Description of ols_delete.gif follows" /><br />
<a id="sthref226" href="img_text/ols_delete.htm">Description of the illustration ols_delete.gif</a><br />
<br /></li>
<li>
<p>Ensure that <span class="bold">ACCESS_LOCATIONS</span> is selected, and then click <span class="bold">Delete</span>.</p>
<p>The Confirmation page appears.</p>
</li>
<li>
<p>If you select Drop Column, the OLS_COLUMN policy column is also dropped from the <code>HR.LOCATIONS</code> table. Click <span class="bold">Yes</span> to delete the policy.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2259">
<tr>
<td class="cellalignment2268">
<table class="cellalignment2264">
<tr>
<td class="cellalignment2263"><a href="part2.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2263"><a href="worklabel.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2271">
<table class="cellalignment2262">
<tr>
<td class="cellalignment2263"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2263"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2263"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2263"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2263"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2263"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
