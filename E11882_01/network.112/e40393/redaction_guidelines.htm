<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Security Guidelines for Oracle Data Redaction</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1079" />
<meta name="dcterms.created" content="2016-03-03T15:46:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Advanced Security Administrator's Guide" />
<meta name="dcterms.identifier" content="E40393-10" />
<meta name="dcterms.isVersionOf" content="ASOAG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="asogls.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="redaction_other.htm" title="Previous" type="text/html" />
<link rel="Next" href="asopart2.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40393.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">16/35</span> <!-- End Header -->
<div id="ASOAG10498" class="chapter"><a id="CHDHBIGH"></a>
<h1 class="chapter"><span class="secnum">7</span> Security Guidelines for Oracle Data Redaction</h1>
<p>This chapter provides a set of security guidelines for using Oracle Data Redaction.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDEDGBI">General Usage Guidelines</a></p>
</li>
<li>
<p><a href="#CACFHFEJ">Restricting Administrative Access to Oracle Data Redaction Policies</a></p>
</li>
<li>
<p><a href="#CACGCIJJ">How Oracle Data Redaction Affects the SYS, SYSTEM and Default Schemas</a></p>
</li>
<li>
<p><a href="#CHDDECAB">Writing Policy Expressions That Depend on SYS_CONTEXT Attributes</a></p>
</li>
<li>
<p><a href="#CHDBHFCF">Creating Policies on Materialized Views</a></p>
</li>
<li>
<p><a href="#CHDCGJAE">Dropping Policies When the Recycle Bin Is Enabled</a></p>
</li>
</ul>
<a id="CHDEDGBI"></a>
<div id="ASOAG10532" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.1</span> General Usage Guidelines</h2>
<ul>
<li>
<p>Oracle <a id="sthref190"></a><a id="sthref191"></a>Data Redaction is not intended to protect against attacks by privileged database users who run ad hoc queries directly against the database.</p>
</li>
<li>
<p>Oracle <a id="sthref192"></a>Data Redaction is not intended to protect against users who run exhaustive SQL queries that attempt to determine the actual values by <a href="asogls.htm#BABFDIAD"><span class="xrefglossterm">inference</span></a>.</p>
</li>
<li>
<p>Oracle <a id="sthref193"></a>Data Redaction relies on the database and application context values. For applications, it is the responsibility of the application to properly initialize the context value.</p>
</li>
<li>
<p>Oracle Data Redaction is not enforced for users who are logged in using the <code dir="ltr">SYSDBA</code> administrative privilege.</p>
</li>
<li>
<p>Certain <a id="sthref194"></a>DDL statements that attempt to copy the <a href="asogls.htm#BABIDFHF"><span class="xrefglossterm">actual data</span></a> out from under the control of a data redaction policy (that is, <code dir="ltr">CREATE TABLE AS SELECT</code>, <code dir="ltr">INSERT AS SELECT</code>) are blocked by default, but you can disable this behavior by granting the user the <code dir="ltr">EXEMPT REDACTION POLICY</code> system privilege</p>
</li>
<li>
<p>Oracle <a id="sthref195"></a>Data Redaction does not affect day-to-day database operations, such as backup and recovery, Oracle Data Pump exports and imports, Oracle Data Guard operations, and replication.</p>
</li>
<li>
<p>Do not include any redacted columns in a SQL expression that is used in a <code dir="ltr">GROUP BY</code> clause in a SQL statement. Oracle does not support this behavior, and raises an<a id="sthref196"></a> <code dir="ltr">ORA-00979: not a GROUP BY expression</code> error. This happens because internally the expression in the <code dir="ltr">SELECT</code> list must be modified by Data Redaction, but this causes it to no longer be found when it comes time to process the <code dir="ltr">GROUP BY</code> clause (which is currently not updated by Data Redaction) leading to this unintended error message.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CACFHFEJ"></a>
<div id="ASOAG748" class="sect1">
<h2 class="sect1"><span class="secnum">7.2</span> Restricting Administrative Access to Oracle Data Redaction Policies</h2>
<p>You <a id="sthref197"></a><a id="sthref198"></a><a id="sthref199"></a>can restrict the list of users who can create, view and edit Data Redaction policies by limiting who has the <code dir="ltr">EXECUTE</code> privilege on the <code dir="ltr">DBMS_REDACT</code> package and by limiting who has the <code dir="ltr">SELECT</code> privilege on the <code dir="ltr">REDACTION_POLICIES</code> and <code dir="ltr">REDACTION_COLUMNS</code> views. You also can restrict who is exempted from redaction by limiting the <code dir="ltr">EXEMPT REDACTION POLICY</code> privilege. If you use Oracle Database Vault to restrict privileged user access, then you can use realms to restrict granting of <code dir="ltr">EXEMPT REDACTION POLICY</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="redaction_config.htm#CACBEJAE">"Exempting Users from Oracle Data Redaction Policies"</a></p>
</li>
<li>
<p><a href="redaction_other.htm#CACDJBFE">"Oracle Data Redaction and Oracle Database Vault"</a></p>
</li>
<li>
<p><a class="olink DVADM001" href="../../server.112/e23090/dvintro.htm#DVADM001"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for more information about Oracle Database Vault</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CACGCIJJ"></a>
<div id="ASOAG360" class="sect1">
<h2 class="sect1"><span class="secnum">7.3</span> How Oracle Data Redaction Affects the SYS, SYSTEM and Default Schemas</h2>
<p>Both users <code dir="ltr">SYS</code> <a id="sthref200"></a><a id="sthref201"></a>and <code dir="ltr">SYSTEM</code> <a id="sthref202"></a><a id="sthref203"></a>automatically have the <code dir="ltr">EXEMPT REDACTION POLICY</code> system privilege. (<code dir="ltr">SYSTEM</code> has the <code dir="ltr">EXP_FULL_DATABASE</code> role, which includes the <code dir="ltr">EXEMPT REDACTION POLICY</code> system privilege.) This means that the <code dir="ltr">SYS</code> and <code dir="ltr">SYSTEM</code> users can always bypass any existing Oracle Data Redaction policies, and will always be able to view data from tables (or views) that have Data Redaction policies defined on them.</p>
<p>Follow these guidelines:</p>
<ul>
<li>
<p>Do not create Data Redaction policies on the default Oracle Database schemas, including the <code dir="ltr">SYS</code> and <code dir="ltr">SYSTEM</code> schemas.</p>
</li>
<li>
<p>Be aware that granting the <code dir="ltr">EXEMPT DATA REDACTION</code> system privilege to additional roles may enable users to bypass Oracle Data Redaction, because the grantee role may have been granted to additional roles.</p>
</li>
<li>
<p>Do not revoke the <code dir="ltr">EXEMPT DATA REDACTION</code> system privilege from the roles that it was granted to by default.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CHDDECAB"></a>
<div id="ASOAG10533" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.4</span> Writing Policy Expressions That Depend on SYS_CONTEXT Attributes</h2>
<p>Be careful when writing a policy expression that depends on a<a id="sthref204"></a><a id="sthref205"></a> <code dir="ltr">SYS_CONTEXT</code> attribute that is populated by an application, because the application might not always populate that attribute. If the user somehow connects directly (rather than through the application), then the <code dir="ltr">SYS_CONTEXT</code> attribute would not have been populated. If you do not handle this <code dir="ltr">NULL</code> scenario in your policy expression, you could unintentionally reveal <a href="asogls.htm#BABIDFHF"><span class="xrefglossterm">actual data</span></a> to the querying user.</p>
<p>For example, suppose you wanted to create a policy expression that intends to redact the query results for everyone except users who have the client identifier value of <code dir="ltr">SUPERVISOR</code>. The following expression unintentionally enables querying users who have <code dir="ltr">NULL</code> as the value for their <code dir="ltr">CLIENT_IDENTIFIER</code> to see the real data:</p>
<pre dir="ltr">
SYS_CONTEXT('USERENV', 'CLIENT_IDENTIFIER') IS NOT 'SUPERVISOR'
</pre>
<p>A more rigorous policy expression redacts the result of the query if the client identifier is not set, that is, it has a <code dir="ltr">NULL</code> value.</p>
<pre dir="ltr">
SYS_CONTEXT('USERENV', 'CLIENT_IDENTIFIER') IS NOT 'SUPERVISOR' OR IS NULL
</pre>
<p>Remember that in SQL, comparisons with <code dir="ltr">NULL</code> are undefined, and are thus <code dir="ltr">FALSE</code>, but redaction only takes place when the policy expression evaluates to <code dir="ltr">TRUE</code>.</p>
</div>
<!-- class="sect1" -->
<a id="CHDBHFCF"></a>
<div id="ASOAG10534" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.5</span> Creating Policies on Materialized Views</h2>
<p>You <a id="sthref206"></a><a id="sthref207"></a>can create Oracle Data Redaction policies on materialized views and on their base tables. However, ensure that the creator of the materialized view, or the user who performs the refresh of the materialized view, is not blocked by any Data Redaction policies. In other words, the user performing the materialized view creation or refresh operations should be exempt from the Data Redaction policy. As a best practice, when you create a new materalized view, treat it as a copy of the actual table, and then create a separate Data Redaction policy to protect it.</p>
</div>
<!-- class="sect1" -->
<a id="CHDCGJAE"></a>
<div id="ASOAG10535" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">7.6</span> Dropping Policies When the Recycle Bin Is Enabled</h2>
<p>If <a id="sthref208"></a>you drop<a id="sthref209"></a> a table or view that has an Oracle Data Redaction policy defined on it when the recycle bin feature is enabled, and if you query the <code dir="ltr">REDACTION_COLUMNS</code> or <code dir="ltr">REDACTION_POLICIES</code> data dictionary views before you purge the recycle bin, then you will see object names such as <code dir="ltr">BIN$...</code> (for example, <code dir="ltr">BIN$1Xu5PSW5VaPgQxGS5AoAEA==$0</code>). This is normal behavior. These policies are removed when you purge the recycle bin.</p>
<p>To find if the recycle bin is enabled, run the <code dir="ltr">SHOW PARAMETER RECYCLEBIN</code> command in SQL*Plus.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11682" href="../../server.112/e25494/tables.htm#ADMIN11682"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about purging objects from the recycle bin</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2227">
<tr>
<td class="cellalignment2236">
<table class="cellalignment2232">
<tr>
<td class="cellalignment2231"><a href="redaction_other.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2231"><a href="asopart2.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2238">
<table class="cellalignment2230">
<tr>
<td class="cellalignment2231"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2231"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2231"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2231"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2231"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2231"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
