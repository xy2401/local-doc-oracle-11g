<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Data Redaction Use with Oracle&nbsp;Database&nbsp;Features</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1079" />
<meta name="dcterms.created" content="2016-03-03T15:46:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Advanced Security Administrator's Guide" />
<meta name="dcterms.identifier" content="E40393-10" />
<meta name="dcterms.isVersionOf" content="ASOAG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="asogls.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="redaction_config.htm" title="Previous" type="text/html" />
<link rel="Next" href="redaction_guidelines.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40393.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">15/35</span> <!-- End Header -->
<div id="ASOAG10491" class="chapter"><a id="CHDGCJEG"></a>
<h1 class="chapter"><span class="secnum">6</span> Oracle Data Redaction Use with Oracle&nbsp;Database&nbsp;Features</h1>
<p>You can use Oracle Data Redaction with other Oracle products, such as Oracle Virtual Private Database or Oracle Enterprise Manager Data Masking and Subsetting Pack.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CJHFAFFF">Oracle Data Redaction and DML and DDL Operations</a></p>
</li>
<li>
<p><a href="#CJHEIIIG">Oracle Data Redaction and Nested Functions, Inline Views, and the WHERE Clause</a></p>
</li>
<li>
<p><a href="#CJHIHEEA">Oracle Data Redaction and Aggregate Functions</a></p>
</li>
<li>
<p><a href="#CJHBGGGB">Oracle Data Redaction and Object Types</a></p>
</li>
<li>
<p><a href="#CACHCIBA">Oracle Data Redaction and Editions</a></p>
</li>
<li>
<p><a href="#CACEEJIC">Oracle Data Redaction and Oracle Virtual Private Database</a></p>
</li>
<li>
<p><a href="#CACDJBFE">Oracle Data Redaction and Oracle Database Vault</a></p>
</li>
<li>
<p><a href="#CHDGGJAH">Oracle Data Redaction and the EXPDP Utility access_method Parameter</a></p>
</li>
<li>
<p><a href="#CACEDFGE">Oracle Data Redaction and Data Masking and Subsetting Pack</a></p>
</li>
</ul>
<a id="CJHFAFFF"></a>
<div id="ASOAG10652" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.1</span> Oracle Data Redaction and DML and DDL Operations</h2>
<p>Although you will use Oracle Data Redaction primarily for redacting the displayed results of application queries, you should understand of how it affects <a id="sthref172"></a>DML and <a id="sthref173"></a>DDL operations, especially if you have users who issue ad-hoc SQL against tables with redacted columns.</p>
<p>Note the following:</p>
<ul>
<li>
<p>Oracle Data Redaction treats the <code dir="ltr">RETURNING INTO</code> clause of a DML statement as a query, even though the result is not displayed. The result that is sent to the buffer is what would have been displayed had the <code dir="ltr">RETURNING INTO</code> clause been run as an ordinary SQL query, rather than as part of a DML statement. If your application performs further processing on the buffer that contains the <code dir="ltr">RETURNING INTO</code> value, then consider changing the application because it may not expect to find a redacted value in the buffer.</p>
</li>
<li>
<p>If a redacted column appears as the source in a DML or DDL operation, then Oracle Data Redaction considers this as an attempt to circumvent the policy and prevents it with an <a id="sthref174"></a><code dir="ltr">ORA-28081: Insufficient privileges - the command references a redacted object</code> error unless you have the <code dir="ltr">EXEMPT REDACTION POLICY</code> system privilege. Internally, Oracle Data Pump issues these kinds of operations, so you may also need to grant the <code dir="ltr">EXEMPT REDACTION POLICY</code> system privilege to a user if they need to perform schema-level exports of tables that have redacted columns.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CJHEIIIG"></a>
<div id="ASOAG10493" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.2</span> Oracle Data Redaction and Nested Functions, Inline Views, and the WHERE Clause</h2>
<p>Oracle Data Redaction policies work as follows:</p>
<ul>
<li>
<p><span class="bold">Nested functions are redacted innermost.</span> <a id="sthref175"></a><a id="sthref176"></a>For example, in <code dir="ltr">SELECT SUM(AVG(TO_NUMBER(((X))) FROM HR.EMPLOYEES WHERE ...</code>, the <code dir="ltr">TO_NUMBER</code> function is redacted first, followed by <code dir="ltr">AVG</code>, and then last the <code dir="ltr">SUM</code> function.</p>
</li>
<li>
<p><span class="bold">Inline views are redacted outermost.</span> <a id="sthref177"></a><a id="sthref178"></a>For example, in <code dir="ltr">SELECT XYZ &hellip; AS SELECT A&hellip; AS SELECT B&hellip; AS SELECT C&hellip;</code>, <code dir="ltr">SELECT XYZ</code> is redacted first, followed by <code dir="ltr">AS SELECT A</code>, then <code dir="ltr">AS SELECT B</code>, and so on. <code dir="ltr">AS SELECT C</code> is redacted last.</p>
</li>
<li>
<p><span class="bold">The WHERE clause is never redacted.</span> <a id="sthref179"></a><a id="sthref180"></a>Data Redaction redacts only data in the column <code dir="ltr">SELECT</code> list.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CJHIHEEA"></a>
<div id="ASOAG10495" class="sect1">
<h2 class="sect1"><span class="secnum">6.3</span> Oracle Data Redaction and Aggregate Functions</h2>
<p>Because <a id="sthref181"></a><a id="sthref182"></a>Oracle Data Redaction dynamically modifies the value of each row in a column, certain SQL queries that use aggregate functions cannot take full advantage of database optimizations that presume the row values to be static. In the case of SQL queries that call aggregate functions, it may be possible to notice performance overhead due to redaction.</p>
</div>
<!-- class="sect1" -->
<a id="CJHBGGGB"></a>
<div id="ASOAG10509" class="sect1">
<h2 class="sect1"><span class="secnum">6.4</span> Oracle Data Redaction and Object Types</h2>
<p>You cannot redact object types. This is because Database Redaction cannot handle all of the possible ways that you can configure object types.</p>
</div>
<!-- class="sect1" -->
<a id="CACHCIBA"></a>
<div id="ASOAG400" class="sect1">
<h2 class="sect1"><span class="secnum">6.5</span> Oracle Data Redaction and Editions</h2>
<p>You cannot<a id="sthref183"></a> redact editioned views. You also cannot use a redacted column in the definition of any editioned view.</p>
</div>
<!-- class="sect1" -->
<a id="CACEEJIC"></a>
<div id="ASOAG611" class="sect1">
<h2 class="sect1"><span class="secnum">6.6</span> Oracle Data Redaction and Oracle Virtual Private Database</h2>
<p>Oracle Virtual Private Database policies are unaffected by Oracle Data Redaction because the Virtual Private Database inline view, which contains the Virtual Private Database predicate, acts on actual values.</p>
<p>Oracle Data <a id="sthref184"></a><a id="sthref185"></a>Redaction differs from Oracle Virtual Private Database in the following ways:</p>
<ul>
<li>
<p>Oracle Data Redaction provides more redacting features than Oracle Virtual Private Database, which only supports <code dir="ltr">NULL</code> redacting. Many applications cannot use <code dir="ltr">NULL</code> redacting, so Data Redaction is a good solution for these applications.</p>
</li>
<li>
<p>Oracle Virtual Private Database policies can be static, dynamic, and context sensitive, whereas Data Redaction policies only allow static and context-sensitive policy expressions.</p>
</li>
<li>
<p>Data Redaction permits only one policy to be defined on a table or view, whereas you can define multiple Virtual Private Database policies on an object.</p>
</li>
<li>
<p>Data Redaction is when application users try to access an object that is protected by a Data Redaction policy using a synonym, but (unlike Oracle Virtual Private Database) Data Redaction does not support the creation of policies directly on the synonyms themselves.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CACDJBFE"></a>
<div id="ASOAG749" class="sect1">
<h2 class="sect1"><span class="secnum">6.7</span> Oracle Data Redaction and Oracle Database Vault</h2>
<p>You can use Oracle Data Redaction in an Oracle Database Vault environment. For example, if there is an Oracle Database Vault realm around an object, a user who does not belong to the authorized list of realm owners or participants cannot see the object data, regardless of whether the user was granted the <code dir="ltr">EXEMPT REDACTION POLICY</code> privilege. If the user attempts a DML or DDL statement on the data, error messages result.</p>
</div>
<!-- class="sect1" -->
<a id="CHDGGJAH"></a>
<div id="ASOAG10653" class="sect1">
<h2 class="sect1"><span class="secnum">6.8</span> Oracle Data Redaction and the EXPDP Utility access_method Parameter</h2>
<p>If <a id="sthref186"></a>you <a id="sthref187"></a>are using Oracle Data Pump to perform full database export operations using the new Data Pump default settings (<code dir="ltr">direct_path</code>), and if you receive error messages that you do not understand, then use this section to repeat the operation in such a way as to better understand the error.</p>
<p>If you try to use the Oracle Data Pump Export (<code dir="ltr">EXPDP</code>) utility with the <code dir="ltr">access_method</code> parameter set to <code dir="ltr">direct_path</code> to export data from a schema that contains an object that has a Data Redaction policy defined on it, then the following error message may appear and the export operation fails:</p>
<pre dir="ltr">
ORA-31696: unable to export/import TABLE_DATA:"<span class="italic">schema.table</span>" using client specified DIRECT_PATH method
</pre>
<p>This problem only occurs when you perform a schema-level export as a user who was not granted the <code dir="ltr">EXP_FULL_DATABASE</code> role. It does not occur during a full database export, which requires the <code dir="ltr">EXP_FULL_DATABASE</code> role. The <code dir="ltr">EXP_FULL_DATABASE</code> role includes the <code dir="ltr">EXEMPT REDACTION POLICY</code> system privilege, which bypasses Data Redaction policies.</p>
<p>To find the underlying problem, try the <code dir="ltr">EXPDP</code> invocation again, but do not set the <code dir="ltr">access_method</code> parameter to <code dir="ltr">direct_path</code>. Instead, use either <code dir="ltr">automatic</code> or <code dir="ltr">external_table</code>. The underlying problem could be a permissions problem, for example:</p>
<pre dir="ltr">
ORA-28081: Insufficient privileges - the command references a redacted object.
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL200" href="../../server.112/e22490/dp_export.htm#SUTIL200"><span class="italic">Oracle Database Utilities</span></a> for more information about using Data Pump Export.</div>
</div>
<!-- class="sect1" -->
<a id="CACEDFGE"></a>
<div id="ASOAG612" class="sect1">
<h2 class="sect1"><span class="secnum">6.9</span> Oracle Data Redaction and Data Masking and Subsetting Pack</h2>
<p>Oracle <a id="sthref188"></a>Enterprise <a id="sthref189"></a>Manager Data Masking and Subsetting Pack enables you to create a development or test copy of the production database, by taking the data in the production database, masking this data in bulk, and then putting the resulting masked data in the development or test copy. You can still apply Data Redaction policies to the non-production database, in order to redact columns that contain data that was already masked by Oracle Enterprise Manager Data Masking and Subsetting Pack.</p>
<p>Remember that Oracle Enterprise Manager Data Masking and Subsetting Pack is used to mask data sets when you want to move the data to development and test environments. Data Redaction is mainly designed for redacting at runtime for production applications in a consistent fashion across multiple applications, without having to make application code changes.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RATUG04000" href="../../server.112/e41481/tdm_data_masking.htm#RATUG04000"><span class="italic">Oracle Database Real Application Testing User's Guide</span></a> for more information about data masking</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2227">
<tr>
<td class="cellalignment2236">
<table class="cellalignment2232">
<tr>
<td class="cellalignment2231"><a href="redaction_config.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2231"><a href="redaction_guidelines.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2238">
<table class="cellalignment2230">
<tr>
<td class="cellalignment2231"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2231"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2231"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2231"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2231"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2231"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
