<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>ADVISE_SPARSITY Procedure</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 742" />
<meta name="dcterms.created" content="2013-11-14T21:22:0Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="OLAP DML Reference" />
<meta name="dcterms.identifier" content="E17122-08" />
<meta name="dcterms.isVersionOf" content="OLADM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1994, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="dml_app_dbms_aw008.htm" title="Previous" type="text/html" />
<link rel="Next" href="dml_app_dbms_aw010.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17122.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">566/593</span> <!-- End Header --><a id="CHDDBBFF"></a>
<hr />
<div id="OLADM972" class="refsect1">
<h1 class="refsect1">ADVISE_SPARSITY Procedure</h1>
<p>The <a id="sthref5521"></a><a id="sthref5522"></a><code>ADVISE_SPARSITY</code> procedure analyzes a fact table for sparsity using information about its dimensions provided by the <code>ADD_DIMENSION_SOURCE</code> procedure. It populates a table created by the <a id="sthref5523"></a><code>SPARSITY_ADVICE_TABLE</code> procedure with the results of its analysis.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot execute this procedure from within the OLAP Worksheet. You must execute if in a SQL tool such as SQL*Plus.</div>
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
<a href="dml_app_dbms_aw.htm#BABGGHHI">"Using the Sparsity Advisor"</a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5524"></a>Output Description</p>
<p><a href="#BABCCEGC">Table B-9</a> describes the information generated by <code>ADVISE_SPARSITY</code>.</p>
<div id="OLADM2992" class="tblformalwide">
<p class="titleintable"><a id="sthref5525"></a><a id="BABCCEGC"></a>Table B-9 Output Column Descriptions</p>
<table class="cellalignment3100" title="Output Column Descriptions" summary="Column descriptions for ADVISE_SPARSITY table in DBMS_AW package" dir="ltr">
<thead>
<tr class="cellalignment3089">
<th class="cellalignment3099" id="r1c1-t30">Column</th>
<th class="cellalignment3099" id="r1c2-t30">Data Type</th>
<th class="cellalignment3099" id="r1c3-t30">NULL</th>
<th class="cellalignment3099" id="r1c4-t30">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r2c1-t30" headers="r1c1-t30">
<p><code>CUBENAME</code></p>
</td>
<td class="cellalignment3095" headers="r2c1-t30 r1c2-t30">
<p><code>VARCHAR2(100)</code></p>
</td>
<td class="cellalignment3095" headers="r2c1-t30 r1c3-t30">
<p><code>NOT NULL</code></p>
</td>
<td class="cellalignment3095" headers="r2c1-t30 r1c4-t30">
<p>The values of <span class="italic">cubename</span> in calls to <code>ADVISE_SPARSITY</code>, typically the name of the logical cube.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r3c1-t30" headers="r1c1-t30">
<p><code>FACT</code></p>
</td>
<td class="cellalignment3095" headers="r3c1-t30 r1c2-t30">
<p><code>VARCHAR2(4000)</code></p>
</td>
<td class="cellalignment3095" headers="r3c1-t30 r1c3-t30">
<p><code>NOT NULL</code></p>
</td>
<td class="cellalignment3095" headers="r3c1-t30 r1c4-t30">
<p>The values of <span class="italic">fact</span> in calls to <code>ADVISE_SPARSITY</code>; the name of the fact table that provides the source data for one or more analytic workspace variables.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r4c1-t30" headers="r1c1-t30">
<p><code>DIMENSION</code></p>
</td>
<td class="cellalignment3095" headers="r4c1-t30 r1c2-t30">
<p><code>VARCHAR2(100)</code></p>
</td>
<td class="cellalignment3095" headers="r4c1-t30 r1c3-t30">
<p><code>NOT NULL</code></p>
</td>
<td class="cellalignment3095" headers="r4c1-t30 r1c4-t30">
<p>The logical names of the cube's dimensions; the dimensions described in calls to <code>ADVISE_DIMENSIONALITY</code>.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r5c1-t30" headers="r1c1-t30">
<p><code>DIMCOLUMN</code></p>
</td>
<td class="cellalignment3095" headers="r5c1-t30 r1c2-t30">
<p><code>VARCHAR2(100)</code></p>
</td>
<td class="cellalignment3095" headers="r5c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r5c1-t30 r1c4-t30">
<p>The names of dimension columns in <span class="italic">fact</span> (the source fact table), which relate to a dimension table.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r6c1-t30" headers="r1c1-t30">
<p><code>DIMSOURCE</code></p>
</td>
<td class="cellalignment3095" headers="r6c1-t30 r1c2-t30">
<p><code>VARCHAR2(4000)</code></p>
</td>
<td class="cellalignment3095" headers="r6c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r6c1-t30 r1c4-t30">
<p>The names of the dimension tables.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r7c1-t30" headers="r1c1-t30">
<p><code>MEMBERCOUNT</code></p>
</td>
<td class="cellalignment3095" headers="r7c1-t30 r1c2-t30">
<p><code>NUMBER(12,0)</code></p>
</td>
<td class="cellalignment3095" headers="r7c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r7c1-t30 r1c4-t30">
<p>The total number of dimension members at all levels.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r8c1-t30" headers="r1c1-t30">
<p><code>LEAFCOUNT</code></p>
</td>
<td class="cellalignment3095" headers="r8c1-t30 r1c2-t30">
<p><code>NUMBER(12,0)</code></p>
</td>
<td class="cellalignment3095" headers="r8c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r8c1-t30 r1c4-t30">
<p>The number of dimension members at the leaf (or least aggregate) level.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r9c1-t30" headers="r1c1-t30">
<p><code>ADVICE</code></p>
</td>
<td class="cellalignment3095" headers="r9c1-t30 r1c2-t30">
<p><code>VARCHAR2(10)</code></p>
</td>
<td class="cellalignment3095" headers="r9c1-t30 r1c3-t30">
<p><code>NOT NULL</code></p>
</td>
<td class="cellalignment3095" headers="r9c1-t30 r1c4-t30">
<p>The sparsity evaluation of the dimension: <code>DENSE</code>, <code>SPARSE</code>, or <code>COMPRESSED</code>.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r10c1-t30" headers="r1c1-t30">
<p><code>POSITION</code></p>
</td>
<td class="cellalignment3095" headers="r10c1-t30 r1c2-t30">
<p><code>NUMBER(4,0)</code></p>
</td>
<td class="cellalignment3095" headers="r10c1-t30 r1c3-t30">
<p><code>NOT NULL</code></p>
</td>
<td class="cellalignment3095" headers="r10c1-t30 r1c4-t30">
<p>The recommended order of the dimensions.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r11c1-t30" headers="r1c1-t30">
<p><code>DENSITY</code></p>
</td>
<td class="cellalignment3095" headers="r11c1-t30 r1c2-t30">
<p><code>NUMBER(11,8)</code></p>
</td>
<td class="cellalignment3095" headers="r11c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r11c1-t30 r1c4-t30">
<p>A number that provides an indication of sparsity relative to the other dimensions. The larger the number, the more sparse the dimension.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r12c1-t30" headers="r1c1-t30">
<p><code>PARTNUM</code></p>
</td>
<td class="cellalignment3095" headers="r12c1-t30 r1c2-t30">
<p><code>NUMBER(6,0)</code></p>
</td>
<td class="cellalignment3095" headers="r12c1-t30 r1c3-t30">
<p><code>NOT NULL</code></p>
</td>
<td class="cellalignment3095" headers="r12c1-t30 r1c4-t30">
<p>The number of the partition described in the <code>PARTBY</code> and <code>PARTTOPS</code> columns. If partitioning is not recommended, then <code>1</code> is the maximum number of partitions.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r13c1-t30" headers="r1c1-t30">
<p><code>PARTBY</code></p>
</td>
<td class="cellalignment3095" headers="r13c1-t30 r1c2-t30">
<p><code>CLOB</code></p>
</td>
<td class="cellalignment3095" headers="r13c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r13c1-t30 r1c4-t30">
<p>A list of all dimension members that should be stored in this partition. This list is truncated in SQL*Plus unless you significantly increase the size of the <code>LONG</code> setting.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r14c1-t30" headers="r1c1-t30">
<p><code>PARTTOPS</code></p>
</td>
<td class="cellalignment3095" headers="r14c1-t30 r1c2-t30">
<p><code>CLOB</code></p>
</td>
<td class="cellalignment3095" headers="r14c1-t30 r1c3-t30">&nbsp;</td>
<td class="cellalignment3095" headers="r14c1-t30 r1c4-t30">
<p>A list of top-level dimension members for this partition.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5526"></a>Syntax</p>
<pre>
ADVISE_SPARSITY ( 
          fact       IN      VARCHAR2,
          cubename   IN      VARCHAR2,
          dimsources IN      dbms_aw$_dimension_sources_t,
          advmode    IN      BINARY_INTEGER DEFAULT ADVICE_DEFAULT,
          partby     IN      BINARY_INTEGER DEFAULT PARTBY_DEFAULT,
          advtable   IN      VARCHAR2 DEFAULT NULL);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5527"></a>Parameters</p>
<div id="OLADM2993" class="tblformal">
<p class="titleintable"><a id="sthref5528"></a><a id="sthref5529"></a>Table B-10 ADVISE_SPARSITY Procedure Parameters</p>
<table class="cellalignment3098" title="ADVISE_SPARSITY Procedure Parameters" summary="Parameter descriptions for DBMS_AW.ADVISE_SPARSITY" dir="ltr">
<thead>
<tr class="cellalignment3089">
<th class="cellalignment3099" id="r1c1-t31">Parameter</th>
<th class="cellalignment3099" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r2c1-t31" headers="r1c1-t31">
<p><code>fact</code></p>
</td>
<td class="cellalignment3095" headers="r2c1-t31 r1c2-t31">
<p>The name of the source fact table.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r3c1-t31" headers="r1c1-t31">
<p><code>cubename</code></p>
</td>
<td class="cellalignment3095" headers="r3c1-t31 r1c2-t31">
<p>A name for the facts being analyzed, such as the name of the logical cube in the analytic workspace.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r4c1-t31" headers="r1c1-t31">
<p><code>dimsources</code></p>
</td>
<td class="cellalignment3095" headers="r4c1-t31 r1c2-t31">
<p>The name of the object type where the <code>ADD_DIMENSION_SOURCE</code> procedure has stored information about the cube's dimensions.</p>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r5c1-t31" headers="r1c1-t31">
<p><code>advmode</code></p>
</td>
<td class="cellalignment3095" headers="r5c1-t31 r1c2-t31">
<p>The level of advise you want to see. Select one of the following values:</p>
<br />
<code>DBMS_AW.ADVICE_DEFAULT</code><br />
<code>DBMS_AW.ADVICE_FAST</code><br />
<code>DBMS_AW.ADVICE_FULL</code></td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r6c1-t31" headers="r1c1-t31">
<p><code>partby</code></p>
</td>
<td class="cellalignment3095" headers="r6c1-t31 r1c2-t31">
<p>A keyword that controls partitioning. Use one of the following values:</p>
<ul>
<li>
<p><code>DBMS_AW.PARTBY_DEFAULT</code> Allow the Sparsity Advisor to determine whether or not partitioning is appropriate.</p>
</li>
<li>
<p><code>DBMS_AW.PARTBY_NONE</code> Do not allow partitioning.</p>
</li>
<li>
<p><code>DBMS_AW.PARTBY_FORCE</code> Force partitioning.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment3089">
<td class="cellalignment3095" id="r7c1-t31" headers="r1c1-t31">
<p><code>advtable</code></p>
</td>
<td class="cellalignment3095" headers="r7c1-t31 r1c2-t31">
<p>The name of a table created by the procedure for storing the results of analysis.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5530"></a>Example</p>
<p>The following PL/SQL program fragment analyzes the sparsity characteristics of the <code>UNITS_HISTORY_FACT</code> table.</p>
<pre>
DECLARE
     dimsources dbms_aw$_dimension_sources_t;
BEGIN
-- Calls to ADD_DIMENSION_SOURCE for each dimension in the cube
                .
                .
                .
     dbms_aw.advise_sparsity('units_history_fact', 'units_cube', dimsources, 
          dbms_aw.advice_default);
 
END;
/
</pre>
<p>The following <code>SELECT</code> command displays the results of the analysis, which indicate that there is one denser dimension (<code>CHANNEL</code>) and three comparatively sparse dimensions (<code>PRODUCT</code>, <code>CUSTOMER</code>, and <code>TIME</code>).</p>
<pre>
SELECT fact, dimension, dimcolumn, membercount nmem, leafcount nleaf, advice, density
     FROM aw_sparsity_advice
     WHERE cubename='units_cube';
 
FACT                 DIMENSION    DIMCOLUMN     NMEM  NLEAF ADVICE          DENSITY
-------------------- ------------ ------------ ----- ------ ------------ ----------
units_history_fact   channel      channel_id       3      3 DENSE         .86545382
units_history_fact   product      item_id         36     36 SPARSE        .98706809
units_history_fact   customer     ship_to_id      61     62 SPARSE        .99257713
units_history_fact   time         month_id        96     80 SPARSE        .99415964
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3088">
<tr>
<td class="cellalignment3095">
<table class="cellalignment3093">
<tr>
<td class="cellalignment3092"><a href="dml_app_dbms_aw008.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3092"><a href="dml_app_dbms_aw010.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1994, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3097">
<table class="cellalignment3091">
<tr>
<td class="cellalignment3092"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3092"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3092"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3092"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3092"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3092"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
