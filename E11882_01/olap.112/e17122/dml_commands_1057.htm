<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>GROUPINGID command</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 742" />
<meta name="dcterms.created" content="2013-11-14T21:21:46Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="OLAP DML Reference" />
<meta name="dcterms.identifier" content="E17122-08" />
<meta name="dcterms.isVersionOf" content="OLADM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1994, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="dml_commands_1056.htm" title="Previous" type="text/html" />
<link rel="Next" href="dml_commands_2.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17122.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">473/593</span> <!-- End Header --><a id="i78871"></a>
<hr />
<div id="OLADM826" class="refsect1">
<h1 class="refsect1">GROUPINGID command</h1>
<p><a id="sthref4391"></a>The GROUPINGID command populates a previously-defined object with the grouping ids for the values of a hierarchical dimension, and creates and populates the <a href="dml_properties009.htm#BABHCGIF">$GID_DEPTH</a> system property.</p>
<p>A grouping id is a numeric value that corresponds to a level of a hierarchical dimension. The grouping id for the lowest-level of the hierarchy is <code>0</code> (zero). Grouping ids are especially useful for identifying values of different levels of a hierarchical dimension. Dimension values in the same level of the hierarchy have the same value for their grouping id. Selecting dimension values for a specific level is easier with grouping ids because the desired values can be identified with a single condition of <span class="italic">groupingid</span> = <span class="italic">n</span>.</p>
<p>Typically, you use a GROUPINGID statement when you are planning on accessing analytic workspace data in SQL using the <code>OLAP_TABLE</code> function.</p>
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
See <a href="dml_basics.htm#BABCGJHG">"Gidrel Relation"</a> for more information and the <a class="olink SQLRF00648" href="../../server.112/e41084/functions072.htm#SQLRF00648">GROUPING_ID</a> function in <span class="italic">Oracle Database SQL Language Reference</span> for more information on grouping ids.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4392"></a>Syntax</p>
<p class="synopsis">GROUPINGID [<span class="italic">parent-relation</span>] INTO <span class="italic">destination-object</span> -</p>
<p class="synopsis">&nbsp;&nbsp;&nbsp;{USING <span class="italic">level-relation</span>} [INHIERARCHY {<span class="italic">inh-variable</span> | <span class="italic">inh-valueset</span>}] [LEVELORDER <span class="italic">lo-valueset</span>] -</p>
<p class="synopsis">[ROLLUP | GROUPSET]</p>
<p>where <span class="syntaxinlineitalic">destination-object</span> is one of the following:</p>
<dl>
<dd><span class="syntaxinlineitalic">grouping-relation</span></dd>
<dd><span class="syntaxinlineitalic">grouping-variable</span></dd>
<dd><span class="syntaxinlineitalic">grouping-surrogate</span></dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4393"></a>Parameters</p>
<dl>
<dt><span class="italic">parent-relation</span></dt>
<dd>
<p>A self-relation for a hierarchical dimension. This self-relation is dimensioned by a hierarchical dimension. The values of the self-relation are the parents of each value in the hierarchical dimension. The <span class="italic">parent-relation</span> argument is optional <span class="italic">only</span> when you use the GROUPINGID command to populate a surrogate and the GROUPINGID command includes a LEVELORDER clause.</p>
</dd>
<dt><span class="italic">grouping-relation</span></dt>
<dd>
<p>The name of a previously-defined relation. One dimension of <span class="italic">grouping-relation</span> must be the hierarchical dimension. The values of grouping-relation are calculated and populated when the GROUPINGID command executes. When you specify a relation as the destination object, Oracle OLAP automatically creates and sets the <a href="dml_properties009.htm#BABHCGIF">$GID_DEPTH</a> property on the relation when it populates it.</p>
</dd>
<dt><span class="bolditalic">grouping-variable</span></dt>
<dd>
<p>The name of a previously-defined numeric variable. One dimension of <span class="italic">grouping-variable</span> must be the hierarchical dimension. The data type of <span class="italic">grouping-variable</span> can be any numeric type including <code>NUMBER</code>. The values of grouping-variable are calculated and populated when the GROUPINGID command executes.See the <a href="dml_commands_1032.htm#i78533">DEFINE VARIABLE</a> command for information on defining variables.</p>
</dd>
<dt><span class="italic">grouping-surrogate</span></dt>
<dd>
<p>The name of a previously-defined surrogate for the hierarchical dimension. The values of grouping-surrogate are calculated and populated when the GROUPINGID command executes. See the <a href="dml_commands_1032.htm#i78523">DEFINE SURROGATE</a> command for information on defining surrogates.</p>
</dd>
<dt>USING</dt>
<dd>
<p>Specifies that the level of the values of the hierarchical dimension are to be considered when creating grouping ids.</p>
</dd>
<dt><span class="italic">level-relation</span></dt>
<dd>
<p>A relation that is dimensioned by the hierarchical dimension. For each value of the hierarchical dimension, the relation has its value the name of the level for the dimension's value.</p>
</dd>
<dt>INHIERARCHY</dt>
<dd>
<p>Specifies that only some values of the hierarchical dimension are to be considered when creating grouping ids.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot specify an INHIERARCHY clause when you specify ROLLUP or GROUPSET.</div>
</dd>
<dt><span class="italic">inh-variable</span></dt>
<dd>
<p>A BOOLEAN variable that is dimensioned by the hierarchical dimension and, when the hierarchical dimension is a multi-hierarchical dimension, by a dimension that is the names of the hierarchies. The values of the variable are <code>TRUE</code> when the dimension value is in a hierarchy and <code>FALSE</code> when it is not.</p>
</dd>
<dt><span class="italic">inh-valueset</span></dt>
<dd>
<p>The name of a valueset object whose values identify the hierarchical dimension values to be considered when creating grouping ids. Values not included in the valueset are ignored.</p>
</dd>
<dt>LEVELORDER</dt>
<dd>
<p>Specifies the top-down order of the levels when creating grouping ids.</p>
</dd>
<dt><span class="italic">lo-valueset</span></dt>
<dd>
<p>The name of a valueset object whose values are the names of the levels to be used when creating grouping ids. The order of the values in the valueset object determine the grouping id assigned.</p>
</dd>
<dt>ROLLUP</dt>
<dd>
<p>Specifies that Oracle OLAP creates the grouping ids in the same manner as SQL does when you specify ROLLUP in a SQL <code>SELECT</code> statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
R<a class="olink SQLRF55250" href="../../server.112/e41084/statements_10002.htm#SQLRF55250">ollup cube clause</a> in <span class="italic">Oracle Database SQL Language Reference</span>.</div>
<p>The ROLLUP keyword is valid only when the destination object is a relation. When you specify this keyword, <a href="dml_properties011.htm#BABBJJGG">$GID_TYPE</a> and <a href="dml_properties010.htm#BABEEJEA">$GID_LIST</a> properties.</p>
</dd>
<dt>GROUPSET</dt>
<dd>
<p>Specifies that Oracle OLAP creates the grouping ids in the same manner as SQL does when you specify GROUPING SET in a SQL <code>SELECT</code> statement.</p>
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
<a class="olink SQLRF55251" href="../../server.112/e41084/statements_10002.htm#SQLRF55251">Grouping sets clause</a> in <span class="italic">Oracle Database SQL Language Reference</span> for more information.</div>
<p>The GROUPSET keyword is valid only when the destination object is a relation. When you specify this keyword, Oracle OLAP also creates and populates two properties on the grouping id relation: the <a href="dml_properties011.htm#BABBJJGG">$GID_TYPE</a> and <a href="dml_properties010.htm#BABEEJEA">$GID_LIST</a> properties.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref4394"></a>Examples</p>
<div id="OLADM2451" class="example">
<p class="titleinexample"><a id="BGEHCIHC"></a>Example 9-145 Using GROUPINGID Command to Populate a Relation with Grouping Ids</p>
<p>Assume your analytic workspace contains the following objects.</p>
<pre>
DEFINE GEOG DIMENSION TEXT
LD A dimension with two hierarchies for geography
 
DEFINE geog_hierlist DIMENSION TEXT
LD List of Hierarchies for geog dimension
 
DEFINE GEOG_INHIER VALUESET GEOG &lt;GEOG_HIERLIST&gt;
LD A valueset of geog that are just the values in each hierarchy
 
DEFINE GEOG_PARENTREL RELATION GEOG &lt;GEOG GEOG_HIERLIST&gt;
LD Self-relation for geog showing parents of each value
 
DEFINE GEOG_INHIER VALUESET GEOG &lt;GEOG_HIERLIST&gt;
LD A valueset of geog that are just the values in each hierarchy
 
DEFINE GEOG_LEVELREL RELATION GEOG_LEVELLIST &lt;GEOG GEOG_HIERLIST&gt;
LD Level of each dimension member for geog
</pre>
<p>Assume that those objects have the values shown in the following reports.</p>
<pre>
REPORT geog_hierlist
 
GEOG_HIERLIST
--------------
Political_Geog
Sales_Geog
 
REPORT DOWN geog W 20 geog_parentrel
 
               -------------GEOG_PARENTREL--------------
               --------------GEOG_HIERLIST--------------
GEOG              Political_Geog         Sales_Geog
-------------- -------------------- --------------------
Boston         MA                   MA
Springfield    MA                   MA
Hartford       CT                   CT
Mansfield      CT                   CT
Montreal       Quebec               Quebec
Walla Walla    WA                   WA
Portland       WA                   WA
Oakland        CA                   CA
San Diego      CA                   CA
MA             USA                  East
CT             USA                  East
WA             USA                  West
CA             USA                  West
Quebec         Canada               East
East           NA                   All Regions
West           NA                   All Regions
All Regions    NA                   NA
USA            All Countries        NA
Canada         All Countries        NA
All Countries  NA                   NA
 
-&gt;REPORT W 20 geog_inhier
 
GEOG_HIERLIST      GEOG_INHIER
-------------- --------------------
Political_Geog Boston
               Springfield
               Hartford
               Mansfield
               Montreal
               Walla Walla
               Portland
               Oakland
               San Diego
               MA
               CT
               WA
               CA
               Quebec
               USA
               Canada
               All Countries
Sales_Geog     Boston
               Springfield
               Hartford
               Mansfield
               Montreal
               Walla Walla
               Portland
               Oakland
               San Diego
               MA
               CT
               WA
               CA
               Quebec
               East
               West
               All Regions
 
-&gt;REPORT DOWN geog W 20 geog_levelrel
 
               --------------GEOG_LEVELREL--------------
               --------------GEOG_HIERLIST--------------
GEOG              Political_Geog         Sales_Geog
-------------- -------------------- --------------------
Boston         City                 City
Springfield    City                 City
Hartford       City                 City
Mansfield      City                 City
Montreal       City                 City
Walla Walla    City                 City
Portland       City                 City
Oakland        City                 City
San Diego      City                 City
MA             State-Prov           State-Prov
CT             State-Prov           State-Prov
WA             State-Prov           State-Prov
CA             State-Prov           State-Prov
Quebec         State-Prov           State-Prov
East           NA                   Region
West           NA                   Region
All Regions    NA                   All Regions
USA            Country              NA
Canada         Country              NA
All Countries  All Countries        NA
 
</pre>
<p>To create grouping ids for the values of geog, you first define a GID dimension with the following definition and you populate it with more values than you expect to have for grouping ids.</p>
<pre>
DEFINE GID_DIMENSION DIMENSION NUMBER (16,0)
</pre>
<p>Next you define a relation to hold the grouping ids.</p>
<pre>
DEFINE GEOG_GIDREL RELATION GID_DIMENSION &lt;GEOG GEOG_HIERLIST&gt;
</pre>
<p>Now you execute the GROUPINGID command to populate the geog_gidrel relation.</p>
<pre>
GROUPINGID geog_parentrel INTO geog_gidrel USING geog_levelrel -
       INHIERARCHY geog_inhier
</pre>
<p>A report of geog_gidrel shows that the relation is now populated.</p>
<pre>
REPORT down geog w 20 geog_gidrel
 
               ---------------GEOG_GIDREL---------------
               --------------GEOG_HIERLIST--------------
GEOG              Political_Geog         Sales_Geog
-------------- -------------------- --------------------
Boston         0                    0
Springfield    0                    0
Hartford       0                    0
Mansfield      0                    0
Montreal       0                    0
Walla Walla    0                    0
Portland       0                    0
Oakland        0                    0
San Diego      0                    0
MA             1                    1
CT             1                    1
WA             1                    1
CA             1                    1
Quebec         1                    1
East           NA                   3
West           NA                   3
All Regions    NA                   7
USA            3                    NA
Canada         3                    NA
All Countries  7                    NA
 
</pre>
<p>When you execute a FULLDSC of geog_gidrel, you can see that the $GID_DEPTH property has been created and populated for <code>geog_gidrel</code>.</p>
<pre>
DEFINE GEOG_GIDREL RELATION GID_DIMENSION &lt;GEOG GEOG_HIERLIST&gt;
PROPERTY '$GID_DEPTH' 4
</pre></div>
<!-- class="example" -->
<div id="OLADM2452" class="example">
<p class="titleinexample"><a id="BGEHBJBA"></a>Example 9-146 Using GROUPINGID to Populate a Variable with Grouping Ids</p>
<p>Assume that you have the following objects in your analytic workspace.</p>
<pre>
DEFINE geography DIMENSION TEXT WIDTH 12
LD Geography Dimension Values
DEFINE geography.parent RELATION geography &lt;geography&gt;
LD Child-parent relation for geography
DEFINE geography.hierarchyid DIMENSION INTEGER
LD Dimension whose values are ids for hierarchies in geography
</pre>
<p>To create a grouping id variable for the <code>Standard</code> hierarchy of geography, define a child-parent relation of only those values that are in the hierarchy whose grouping ids you want to generate, and define a variable to hold the grouping ids. Examples of these definitions follow.</p>
<pre>
DEFINE geog.gid INTEGER VARIABLE &lt;geography&gt;
DEFINE geography.newparent RELATION geography &lt;geography&gt;
</pre>
<p>Then populate these variables using statements similar to these.</p>
<pre>
" Populate the child-parent relation for hierarchy 1
geography.newparent = geography.parent(geography.hierarchyid 1)
" Populate the grouping id variables
GROUPINGID geography.newparent INTO geog.gid
</pre>
<p>Reports for the new objects created by this code (<code>geography.newparen</code>t and <code>geog.gid</code>) follow.</p>
<pre>
REPORT geography.newparent

GEOGRAPHY          GEOGRAPHY.NEWPARENT
---------------- ----------------
World            NA
Americas         World
Canada           Americas
Toronto          Canada
Montreal         Canada
Ottawa           Canada
Vancouver        Canada
Edmonton         Canada
Calgary          Canada
Usa              Americas
Boston           Usa
Losangeles       Usa
Dallas           Usa
Denver           Usa
Newyork          Usa
Chicago          Usa
Seattle          Usa
Mexico           Americas
...              ...
Japan            Asia
Tokyo            Japan
Osaka            Japan
Kyoto            Japan
China            Asia
Beijing          China
Shanghai         China
...              ...
India            Asia
Ireland          Europe
Taiwan           Asia
Thailand         Asia

REPORT geog.gid
GEOGRAPHY            GEOG.GID
---------------- ----------------
World                           7
Americas                        3
Canada                          1
Toronto                         0
Montreal                        0
Ottawa                          0
Vancouver                       0
Edmonton                        0
Calgary                         0
Usa                             1
Boston                          0
Losangeles                      0
Dallas                          0
Denver                          0
Newyork                         0
Chicago                         0
Seattle                         0
Mexico                          1
...                             ...
Japan                           1
Tokyo                           0
Osaka                           0
Kyoto                           0
China                           1
Beijing                         0
Shanghai                        0
...                             ...
India                           1
Ireland                         1
Taiwan                          1
Thailand                        1
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" -->
<!-- class="chapter" -->
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3088">
<tr>
<td class="cellalignment3095">
<table class="cellalignment3093">
<tr>
<td class="cellalignment3092"><a href="dml_commands_1056.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3092"><a href="dml_commands_2.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1994, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3097">
<table class="cellalignment3091">
<tr>
<td class="cellalignment3092"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3092"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3092"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3092"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3092"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3092"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
