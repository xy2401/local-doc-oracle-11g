<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>SORT command</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 742" />
<meta name="dcterms.created" content="2013-11-14T21:21:58Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="OLAP DML Reference" />
<meta name="dcterms.identifier" content="E17122-08" />
<meta name="dcterms.isVersionOf" content="OLADM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1994, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="dml_commands_2056.htm" title="Previous" type="text/html" />
<link rel="Next" href="dml_commands_2058.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17122.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">531/593</span> <!-- End Header --><a id="i79281"></a>
<hr />
<div id="OLADM904" class="refsect1">
<h1 class="refsect1">SORT command</h1>
<p><a id="sthref5030"></a><a id="sthref5031"></a><a id="sthref5032"></a><a id="sthref5033"></a><a id="sthref5034"></a><a id="sthref5035"></a>The SORT command arranges the order of values in the current status list of a dimension or a dimension surrogate, or in a valueset.</p>
<div class="infoboxnotealso">
<p class="notep1">See also::</p>
<a href="dml_functions_2095.htm#CDFJDJEI">SORT function</a></div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5036"></a>Syntax</p>
<p class="synopsis">SORT&nbsp;<span class="italic">dimension&nbsp;</span>[<span class="italic">byhierarchy</span>] [<span class="italic">bycriterion</span>...]</p>
<p>where:</p>
<ul>
<li>
<p><span class="syntaxinlineitalic">byhierarchy</span> is an optional phrase that uses a parent relation to arrange the order of values in the current status list of a hierarchical dimension or its dimension surrogate, or to assign values to a valueset, based on family relationships within the hierarchy. You can include only one <span class="syntaxinlineitalic">byhierarchy</span> phrase in a SORT statement. It must be the first phrase in a SORT statement.</p>
<p><span class="syntaxinline">HIERARCHY</span> <span class="syntaxinlineitalic">parent-relation</span> <span class="syntaxinline">[INVERT] [DEPTH</span> <span class="syntaxinlineitalic">n</span><span class="syntaxinline">] [SORTORPHANS]</span></p>
</li>
<li>
<p><span class="syntaxinlineitalic">bycriterion</span> uses an explicit criterion to arrange the order of values in the current status list of a dimension or its dimension surrogate, or to assign values to a valueset. You can include as many <span class="syntaxinlineitalic">bycriterion</span> phrases as you want in a SORT statement.</p>
<p><span class="syntaxinline">{A|D} [NAFIRST]&nbsp;</span><span class="syntaxinlineitalic">criterion</span></p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5037"></a>Parameters</p>
<dl>
<dt><span class="italic">dimension</span></dt>
<dd>
<p>A text expression whose value is the name of a dimension, a dimension surrogate, or a valueset.</p>
</dd>
<dt>HIERARCHY</dt>
<dd>
<p>Specifies that Oracle OLAP is to sort <span class="italic">dimension</span> values based on the values position in <span class="italic">parentrel</span>.</p>
</dd>
<dt><span class="italic">parent-relation</span></dt>
<dd>
<p>Specifies the name of a child-parent self-relation for <span class="italic">dimension</span>. For each dimension value, the relation holds another value of the dimension which is its parent dimension value (the one immediately above it in a given hierarchy). This parent relation can have multiple dimensions.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
You can specify a QDR of <span class="italic">parent-relation</span> to specify a single value.</div>
</dd>
<dt>INVERT</dt>
<dd>
<p>Indicates that Oracle OLAP places the children in the hierarchy before their parents. (By default, children are placed after their parents.)</p>
</dd>
<dt>DEPTH <span class="italic">n</span></dt>
<dd>
<p>Specifies the number of generations down from the top of the hierarchy that Oracle OLAP should place into status and. there, for the values that are included in the result. The default value of <span class="italic">n</span> is 99. When you do not want any values in the result (that is, when you want a <code>NULL</code> status), specify <code>-1</code> for <span class="italic">n</span>. When you only want the top of the hierarchy in status (that is, those dimension values that do not have parents), specify <code>0</code> (zero).</p>
</dd>
<dt>SORTORPHANS</dt>
<dd>
<p>Specifies that all first cousins whose parents are not in status are sorted together. By default, Oracle OLAP preserves the hierarchical structure when sorting children even when their parents are not in status.</p>
</dd>
<dt>A</dt>
<dt>D</dt>
<dd>
<p>The order in which the values are to be sorted. <code>A</code> means ascending order (alphabetical when the sorting criterion is TEXT, ID, or a relation), and <code>D</code> means descending order (reverse alphabetical when the sorting criterion is TEXT, ID or a relation).</p>
</dd>
<dt>NAFIRST</dt>
<dd>
<p>Specifies that <code>NA</code> values are to placed first in the sort rather than last.</p>
</dd>
<dt><span class="italic">criterion</span></dt>
<dd>
<p>The expression to be used as a sorting criterion. Each <span class="italic">criterion</span> must be dimensioned by <span class="italic">dimension.</span> The first expression is the major sorting criterion. When the expression is multidimensional, SORT uses the first value in status for all dimensions other than the dimension being sorted. You cannot use a valueset as the sorting criterion.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5038"></a>Usage Notes</p>
<p class="subhead2"><a id="OLADM2774"></a>Sorting a Dimension and a Valueset</p>
<p>When Oracle OLAP sorts a dimension, it sorts the temporary status list of a dimension, not the data dimensioned by it. Because many OLAP DML statements operate on data according to the current status of its dimensions, sorting a dimension <span class="italic">appears</span> to have the effect of sorting data. A dimension and any dimension surrogates for it share the same status. Therefore, a SORT statement on a dimension or any of its surrogates sorts them all.</p>
<p>When Oracle OLAP sorts a valueset, it sorts the actual values within the valueset. When you execute UPDATE and COMMIT commands after sorting a valueset, the values in the valueset are stored in that sorted order.</p>
<p class="subhead2"><a id="OLADM2775"></a>Sorting Alphabetically</p>
<p>To sort a TEXT or ID dimension or its valueset in alphabetical order, use the dimension itself as the sorting criterion.</p>
<pre>
SORT district A district
</pre>
<p class="subhead2"><a id="OLADM2776"></a>Sort Order for Textual Data</p>
<p>The sort order for textual data in an alphabetical sort is controlled by the NLS_SORT option.</p>
<p class="subhead2"><a id="OLADM2777"></a>Sorting a Time Dimension</p>
<p>The values of dimensions of type DAY, WEEK, MONTH, QUARTER, and YEAR are stored internally as numbers. Therefore, when you sort a dimensions of type DAY, WEEK, MONTH, QUARTER, and YEAR dimension or its valueset in ascending order, with the dimension itself as the sorting criterion, then the values in the status list or valueset are placed in chronological order. When you sort a dimensions of type DAY, WEEK, MONTH, QUARTER, and YEAR dimension or its valueset in descending order, then the values are placed in reverse chronological order.</p>
<p class="subhead2"><a id="OLADM2778"></a>Sorting Using a Relation as a Criterion</p>
<p>When you use a relation as your sorting criterion, then the sorting is done alphabetically; that is, the dimension or valueset is sorted according to an alphabetical list of the related dimension values. To use a relation as the sorting criterion and keep the related dimension values in their original order, you must use the following expression as your sorting criterion See <a href="#i81668">Example 10-126, "Sorting Using a Relation as the Criterion"</a>.</p>
<pre>
CONVERT(relation, INTEGER)
</pre>
<p class="subhead2"><a id="OLADM2779"></a>Sorting Conjoint Dimensions</p>
<p>You can sort a conjoint dimension or its valueset by criteria dimensioned by either the conjoint dimension itself or by one of its base dimensions.</p>
<p class="subhead2"><a id="OLADM2780"></a>Sorting Concat Dimensions</p>
<p>You can sort a concat dimension or its valueset by criteria dimensioned by either the concat dimension itself or by one of its component dimensions. See <a href="#i81678">Example 10-127, "Sorting Based on a Concat"</a> and <a href="#i81685">Example 10-128, "Sorting Based on a Component"</a>.</p>
<p class="subhead2"><a id="OLADM2781"></a>Sorting a Worksheet</p>
<p>You cannot use a worksheet as a sort criterion. You must first use CONVERT to specify the data type to which values of the worksheet should be converted.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref5039"></a>Examples</p>
<div id="OLADM2782" class="example">
<p class="titleinexample"><a id="i81668"></a>Example 10-126 Sorting Using a Relation as the Criterion</p>
<p>This example sorts districts according to their unit sales of tents for July&nbsp;1996. They are sorted first by the region to which they belong and then in descending order of dollar sales. Notice that in the following SORT statement, a relation is used as the primary sorting criterion. Consequently, the districts are sorted by regions listed alphabetically.</p>
<pre>
LIMIT month TO 'Jul96'
LIMIT product TO 'Tents'
SORT district A Region.District D sales
</pre>
<p>Assume you issue the following REPORT statement.</p>
<pre>
REPORT DOWN district HEADING 'Region' region.district sales
</pre>
<p>The preceding statement produces the following report that reflects the work of the SORT statement.</p>
<pre>
PRODUCT: Tents
               --------MONTH--------
               --------JUL96--------
DISTRICT         Region     SALES
-------------- ---------- ----------
Dallas         Central    154,914.23
Chicago        Central     79,934.42
Atlanta        East       140,711.00
Boston         East        93,972.49
Seattle        West       123,700.17
Denver         West       100,413.49
</pre>
<p>In the following SORT statement, CONVERT is used to keep the regions in their original order.</p>
<pre>
SORT district A CONVERT(region.district INTEGER) D sales
</pre>
<p>Assume that you issue the following REPORT statement.</p>
<pre>
REPORT DOWN district HEADING 'Region' region.district sales
</pre>
<p>The preceding statement produces the following report that reflects the work of the last SORT statement.</p>
<pre>
PRODUCT: Tents
               --------MONTH--------
               --------JUL96--------
DISTRICT         Region     SALES
-------------- ---------- ----------
Atlanta        East       140,711.00
Boston         East        93,972.49
Dallas         Central    154,914.23
Chicago        Central     79,934.42
Seattle        West       123,700.17
Denver         West       100,413.49
</pre>
<p>When you want the dimension to keep the sorted order of its values permanently, use a MAINTAIN statement after you sort the dimension.</p>
<pre>
SORT district A district
MAINTAIN district MOVE STATUS FIRST
</pre></div>
<!-- class="example" -->
<div id="OLADM2783" class="example">
<p class="titleinexample"><a id="i81678"></a>Example 10-127 Sorting Based on a Concat</p>
<p>The following statements sort the concat dimension <code>reg.dist.ccdim</code> in ascending order based on all of its values and report the result.</p>
<pre>
sort reg.dist.ccdim d reg.dist.ccdim
report reg.dist.ccdim
</pre>
<p>The preceding statement produces the following results.</p>
<pre>
REG.DIST.CCDIM
--------------------
&lt;Region: West&gt;
&lt;Region: East&gt;
&lt;Region: Central&gt;
&lt;District: Seattle&gt;
&lt;District: Denver&gt;
&lt;District: Dallas&gt;
&lt;District: Chicago&gt;
&lt;District: Boston&gt;
&lt;District: Atlanta&gt;
</pre>
<p>The following statements sort the concat dimension <code>reg.dist.ccdim</code> in ascending order based on all of its values and report the result.</p>
<pre>
SORT reg.dist.ccdim A reg.dist.ccdim
REPORT reg.dist.ccdim
</pre>
<p>The preceding statement produces the following results.</p>
<pre>
REG.DIST.CCDIM
--------------------
&lt;District: Atlanta&gt;
&lt;District: Boston&gt;
&lt;District: Chicago&gt;
&lt;District: Dallas&gt;
&lt;District: Denver&gt;
&lt;District: Seattle&gt;
&lt;Region: Central&gt;
&lt;Region: East&gt;
&lt;Region: West&gt;
</pre></div>
<!-- class="example" -->
<div id="OLADM2784" class="example">
<p class="titleinexample"><a id="i81685"></a>Example 10-128 Sorting Based on a Component</p>
<p>The following statements sort the concat dimension <code>reg.dist.ccdim</code> in ascending order based on the values of one of its base dimensions and in descending order based on the values of its other base dimension, and report the result.</p>
<pre>
SORT reg.dist.ccdim A region D district
REPORT reg.dist.ccdim
</pre>
<p>The preceding statement produces the following results.</p>
<pre>
REG.DIST.CCDIM
--------------------
&lt;REGION: CENTRAL&gt;
&lt;REGION: EAST&gt;
&lt;REGION: WEST&gt;
&lt;DISTRICT: SEATTLE&gt;
&lt;DISTRICT: DENVER&gt;
&lt;DISTRICT: DALLAS&gt;
&lt;DISTRICT: CHICAGO&gt;
&lt;DISTRICT: BOSTON&gt;
&lt;DISTRICT: ATLANTA&gt; 
</pre></div>
<!-- class="example" -->
<div id="OLADM2785" class="example">
<p class="titleinexample"><a id="CDFEEGHB"></a>Example 10-129 Sorting by Hierarchy</p>
<p>Assume that your analytic workspace has two dimensions (<code>geog</code> and <code>time</code>), one relation (<code>geogparent</code>) and one variable (<code>sales</code>) with the following definitions.</p>
<pre>
DEFINE GEOG DIMENSION TEXT
DEFINE TIME DIMENSION TEXT
DEFINE GEOGPARENT RELATION GEOG &lt;GEOG&gt;
DEFINE SALES VARIABLE INTEGER &lt;TIME GEOG&gt;
 
</pre>
<p>If you issue a REPORT statement for <code>sales</code> when all of the values of <code>geog</code> are in status, Oracle OLAP produces the following report. This report displays the values for <code>geog</code> in the order in which they were added to the analytic workspace.</p>
<pre>
REPORT sales
               --------SALES--------
               --------TIME---------
GEOG              2004       2005
-------------- ---------- ----------
USA                 1,300         NA
Massachusetts       3,881         NA
Florida             3,479         NA
Boston              2,644         NA
Orlando             4,398         NA
Miami               3,294         NA
Pembroke            4,268         NA
California          1,899         NA
Texas               2,115         NA
Los Angeles         2,394         NA
San Francisco       1,334         NA
Dallas                839         NA
Houston               997         NA
 
</pre>
<p>However, assume that you issue a SORT statement to sort the values of <code>geog</code> by (1) <code>geogparent</code> and (2) descending by <code>sales</code>. After this sort if you issue a REPORT statement for <code>sales</code>, Oracle OLAP produces the following report. This report displays the values for <code>geog</code> with the states in descending order by <code>sales</code>, but with the cities of each state under the appropriate state.</p>
<pre>
SORT geog HIERARCHY geogparent D sales
REPORT SALES
 
               --------SALES--------
               --------TIME---------
GEOG              2004       2005
-------------- ---------- ----------
USA                 1,300         NA
Massachusetts       3,881         NA
Pembroke            4,268         NA
Boston              2,644         NA
Florida             3,479         NA
Orlando             4,398         NA
Miami               3,294         NA
Texas               2,115         NA
Houston               997         NA
Dallas                839         NA
California          1,899         NA
Los Angeles         2,394         NA
San Francisco       1,334         NA
 
</pre></div>
<!-- class="example" -->
<div id="OLADM2786" class="example">
<p class="titleinexample"><a id="sthref5040"></a>Example 10-130 Sorting Orphans of a Hierarchy</p>
<p>Assume that you have the same objects described in <a href="#CDFEEGHB">Example 10-129, "Sorting by Hierarchy"</a>. Assume also that the states of Florida and Massachusetts are not in status.</p>
<p>When you include the SORTORPHANS keyword in your SORT statement, the cities in Massachusetts and Florida are sorted together.</p>
<pre>
SORT geog HIERARCHY geogparent SORTORPHANS D sales
REPORT sales
               ------------------SALES------------------
               ------------------TIME-------------------
GEOG                   2004                 2005
-------------- -------------------- --------------------
USA                           1,300                   NA
Orlando                       4,398                   NA
Pembroke                      4,268                   NA
Miami                         3,294                   NA
Boston                        2,644                   NA
Texas                         2,115                   NA
Houston                         997                   NA
Dallas                          839                   NA
California                    1,899                   NA
Los Angeles                   2,394                   NA
San Francisco                 1,334                   NA
 
</pre>
<p>However, if you exclude the SORTORPHANS keyword, Massachusetts cities and Florida cities are sorted separately.</p>
<pre>
LIMIT geog COMPLEMENT 'Florida' 'Massachusetts'
SORT geog HIERARCHY geogparent D sales
REPORT SALES
 
              --------SALES--------
               --------TIME---------
GEOG              2004       2005
-------------- ---------- ----------
USA                 1,300         NA
Pembroke            4,268         NA
Boston              2,644         NA
Orlando             4,398         NA
Miami               3,294         NA
Texas               2,115         NA
Houston               997         NA
Dallas                839         NA
California          1,899         NA
Los Angeles         2,394         NA
San Francisco       1,334         NA
 
</pre></div>
<!-- class="example" --></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3088">
<tr>
<td class="cellalignment3095">
<table class="cellalignment3093">
<tr>
<td class="cellalignment3092"><a href="dml_commands_2056.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3092"><a href="dml_commands_2058.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1994, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3097">
<table class="cellalignment3091">
<tr>
<td class="cellalignment3092"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3092"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3092"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3092"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3092"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3092"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
