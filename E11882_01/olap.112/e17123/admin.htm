<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Administering Oracle OLAP</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 009" />
<meta name="dcterms.created" content="2010-08-04T11:18:43Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="OLAP User's Guide" />
<meta name="dcterms.identifier" content="E17123-03" />
<meta name="dcterms.isVersionOf" content="OLAUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="awgloss.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="reports.htm" title="Previous" type="text/html" />
<link rel="Next" href="security.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17123.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/17</span> <!-- End Header --><a id="CDCECHCD"></a><a id="i1006581"></a>
<h1 class="chapter"><span class="secnum">7</span> <a id="OLAUG701"></a>Administering Oracle OLAP</h1>
<p>Because Oracle OLAP is contained in the database and its resources are managed using the same tools, the management tasks of Oracle OLAP and the database converge. Nonetheless, you should address tasks such as database tuning in the specific context of data warehousing.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i1007281">Setting Database Initialization Parameters</a></p>
</li>
<li>
<p><a href="#BAJCEICE">Storage Management</a></p>
</li>
<li>
<p><a href="#i1006325">Dictionary Views and System Tables</a></p>
</li>
<li>
<p><a href="#BAJBHCDI">Partitioned Cubes and Parallelism</a></p>
</li>
<li>
<p><a href="#BAJECHJJ">Analyzing Cubes and Dimensions</a></p>
</li>
<li>
<p><a href="#BAJIDCGH">Monitoring Analytic Workspaces</a></p>
</li>
<li>
<p><a href="#BAJCICHI">Backup and Recovery</a></p>
</li>
<li>
<p><a href="#BAJJHIDD">Export and Import</a></p>
</li>
<li>
<p><a href="#CHDBCEGB">Cube Materialized Views</a></p>
</li>
</ul>
<a id="i1007281"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9227"></a>Setting Database Initialization Parameters</h2>
<p><a id="sthref474"></a><a href="#CDCJFADG">Table 7-1</a> identifies the parameters that affect the performance of Oracle OLAP. <a id="sthref475"></a>Alter your server parameter file or <code>init.ora</code> file to these values, then restart your database instance. You can monitor the effectiveness of these settings and adjust them as necessary.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink PFGRF013" href="../../server.112/e41573/build_db.htm#PFGRF013"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for information about tuning parameter settings</p>
</li>
<li>
<p><a class="olink REFRN00101" href="../../server.112/e40402/initparams002.htm#REFRN00101"><span class="italic">Oracle Database Reference</span></a> for descriptions of individual parameters</p>
</li>
</ul>
</div>
<div class="tblformalwide">
<p class="titleintable"><a id="sthref476"></a><a id="CDCJFADG"></a>Table 7-1 Initial Settings for Database Parameters</p>
<table class="cellalignment3128" title="Initial Settings for Database Parameters" summary="Recommends initial settings for database parameters" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t3">Parameter</th>
<th class="cellalignment3129" id="r1c2-t3">Default Value</th>
<th class="cellalignment3129" id="r1c3-t3">Recommended Setting</th>
<th class="cellalignment3129" id="r1c4-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t3" headers="r1c1-t3">
<p><code><a id="sthref477"></a>JOB_QUEUE_PROCESSES</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t3 r1c2-t3">
<p><code>1000</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t3 r1c3-t3">
<p>If you reduce this value to limit the maximum number of job slaves running on an instance, then calculate the following number of processes for use by OLAP:</p>
<p>Number of CPUs, plus one additional process for every three CPUs; in a multi-core CPU, each core counts as a CPU</p>
<p>For example, <code>JOB_QUEUE_PROCESSES=5</code> for a four-processor computer</p>
</td>
<td class="cellalignment3125" headers="r2c1-t3 r1c4-t3">
<p>Controls the degree of parallelism in OLAP builds, as described in <a href="#BAJJAIAC">"Parallelism"</a></p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t3" headers="r1c1-t3">
<p><code>PARALLEL_DEGREE_POLICY</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t3 r1c2-t3">
<p><code>MANUAL</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t3 r1c3-t3">
<p><code>AUTO</code> or <code>LIMITED</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t3 r1c4-t3">
<p>Controls how the degree of parallelism is determined</p>
<p>When set to <code>AUTO</code> or <code>LIMITED</code>, Oracle determines whether a SQL statement executes in parallel and, if so, the degree of parallelism used</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t3" headers="r1c1-t3">
<p><a id="sthref478"></a><a id="sthref479"></a><a id="sthref480"></a><a id="sthref481"></a><code>SESSIONS</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t3 r1c2-t3">
<p>Derived</p>
</td>
<td class="cellalignment3125" headers="r4c1-t3 r1c3-t3">
<p>2.5 * maximum number of simultaneous OLAP users</p>
</td>
<td class="cellalignment3125" headers="r4c1-t3 r1c4-t3">
<p>Provides sufficient background processes for each user</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t3" headers="r1c1-t3">
<p><code><a id="sthref482"></a>UNDO_MANAGEMENT</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t3 r1c2-t3">
<p><code>AUTO</code></p>
<p>(<code>MANUAL</code> in 10<span class="italic">g</span>)</p>
</td>
<td class="cellalignment3125" headers="r5c1-t3 r1c3-t3">
<p><code>AUTO</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t3 r1c4-t3">
<p>Specifies use of an undo tablespace</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r6c1-t3" headers="r1c1-t3">
<p><code><a id="sthref483"></a>UNDO_TABLESPACE</code></p>
</td>
<td class="cellalignment3125" headers="r6c1-t3 r1c2-t3">
<p>Derived</p>
</td>
<td class="cellalignment3125" headers="r6c1-t3 r1c3-t3">
<p>Name of the undo tablespace, which must be defined previously</p>
</td>
<td class="cellalignment3125" headers="r6c1-t3 r1c4-t3">
<p>Identifies the undo tablespace defined for OLAP use, as shown in <a href="#i1008594">"Creating an Undo Tablespace"</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<p class="orderedlisttitle">To set the system parameters:&nbsp;</p>
<ol>
<li>
<p>Open the <code>init.ora</code> initialization file in a text editor.</p>
</li>
<li>
<p>Add or change the settings in the file, as described in <a href="#CDCJFADG">Table 7-1</a>.</p>
</li>
<li>
<p>Stop and restart the database.</p>
<p>On Windows, use the Services utility to stop and restart <code>OracleService</code>.</p>
<p>On Linux, use commands like the following. Be sure to identify the initialization file in the <code>STARTUP</code> command.</p>
<pre>
SQLPLUS '/ AS SYSDBA'
SHUTDOWN IMMEDIATE
STARTUP pfile=$ORACLE_BASE/admin/orcl/pfile/init.ora.724200516420
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BAJCEICE"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9228"></a>Storage Management</h2>
<p><a id="sthref485"></a><a id="sthref486"></a>Analytic workspaces are stored in the owner's default tablespace, unless the owner specifies otherwise. All tablespaces for OLAP use should specify <code>EXTENT MANAGEMENT LOCAL</code>. Tablespaces created using default parameters may use resources inefficiently. You should create undo, permanent, and temporary tablespaces that are appropriate for storing analytic workspaces.</p>
<a id="i1008594"></a>
<div class="sect2">
<h3 class="sect2"><a id="OLAUG9229"></a>Creating an Undo Tablespace</h3>
<p>Create an undo tablespace with the <code>EXTENT MANAGEMENT LOCAL</code> clause, as shown in this example:</p>
<pre>
CREATE UNDO TABLESPACE olapundo DATAFILE '$ORACLE_BASE/oradata/undo.dbf'
     SIZE 64M REUSE AUTOEXTEND ON NEXT 8M
     MAXSIZE UNLIMITED EXTENT MANAGEMENT LOCAL;
</pre>
<p>After creating the undo tablespace, change your system parameter file to include the following settings, then restart the database as described in <a href="#i1007281">"Setting Database Initialization Parameters"</a>.</p>
<pre>
UNDO_TABLESPACE=<span class="italic">tablespace</span>
UNDO_MANAGEMENT=AUTO
</pre></div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref487"></a>
<h3 class="sect2"><a id="OLAUG9230"></a>Creating Permanent Tablespaces for OLAP Use</h3>
<p>Each dimensional object occupies at least one extent. A fixed extent size may waste most of the allocated space. For example, if an object is 64K and the extents are set to a uniform size of 1M (the default), then only a small portion of the extent is used.</p>
<p>Create permanent tablespaces with the <code>EXTENT MANAGEMENT LOCAL</code> and <code>SEGMENT SPACE MANAGEMENT AUTO</code> clauses, as shown in this example:</p>
<pre>
CREATE TABLESPACE glo DATAFILE '$ORACLE_BASE/oradata/glo.dbf'
     SIZE 64M REUSE AUTOEXTEND ON NEXT 8M MAXSIZE UNLIMITED
     EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
</pre></div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref488"></a>
<h3 class="sect2"><a id="OLAUG9231"></a>Creating Temporary Tablespaces for OLAP Use</h3>
<p>Oracle OLAP uses the temporary tablespace to store all changes to the data in a cube, whether the changes are the result of a data load or data analysis. Saving the cube moves the changes into the permanent tablespace and clears the temporary tablespace.</p>
<p>This usage creates numerous extents within the tablespace. A temporary tablespace suitable for use by Oracle OLAP should specify the <code>EXTENT MANAGEMENT LOCAL</code> clause and a <code>UNIFORM SIZE</code> clause with a small size, as shown in this example:</p>
<pre>
CREATE TEMPORARY TABLESPACE glotmp TEMPFILE '$ORACLE_BASE/oradata/glotmp.tmp'
     SIZE 50M REUSE AUTOEXTEND ON NEXT 5M MAXSIZE UNLIMITED
     EXTENT MANAGEMENT LOCAL UNIFORM SIZE 256K;
</pre></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref489"></a>
<h3 class="sect2"><a id="OLAUG9232"></a>Spreading Data Across Storage Resources</h3>
<p><a id="sthref490"></a><a id="sthref491"></a>Oracle Database provides excellent storage management tools to simplify routine tasks. Automatic Storage Management (ASM) provides a simple storage management interface that virtualizes database storage into disk groups. You can manage a small set of disk groups, and ASM automates the placement of the database files within those disk groups.</p>
<p>ASM spreads data evenly across all available storage resources to optimize performance and utilization. After you add or drop disks, ASM automatically rebalances files across the disk group.</p>
<p>Because OLAP is part of Oracle Database, you can use ASM to manage both relational and dimensional data.</p>
<p>ASM is highly recommended for analytic workspaces. A system managed with ASM is faster than a file system and easier to manage than raw devices. ASM optimizes the performance of analytic workspaces both on systems with Oracle RAC and those without Oracle RAC.</p>
<p>However, you do not need ASM to use Oracle OLAP. You can still spread your data across multiple disks, just by defining the tablespaces like in this example:</p>
<pre>
CREATE TABLESPACE glo DATAFILE 
     'disk1/oradata/glo1.dbf' SIZE 64M REUSE AUTOEXTEND ON NEXT 8M MAXSIZE 1024M
     EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;

ALTER TABLESPACE glo ADD DATAFILE 
     'disk2/oradata/glo2.dbf' SIZE 64M REUSE AUTOEXTEND ON NEXT 8M MAXSIZE 1024M,
     'disk3/oradata/glo3.dbf' SIZE 64M REUSE AUTOEXTEND ON NEXT 8M 
          MAXSIZE UNLIMITED;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006325"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9233"></a>Dictionary Views and System Tables</h2>
<p>Oracle Database data dictionary views and system tables contain extensive information about analytic workspaces.</p>
<div class="sect2"><a id="sthref492"></a>
<h3 class="sect2"><a id="OLAUG9234"></a>Static Data Dictionary Views</h3>
<p><a id="sthref493"></a><a id="sthref494"></a>Among the static views of the database data dictionary are several that provide information about analytic workspaces. <a href="#BAJBFEDD">Table 7-2</a> provides brief descriptions of them. All data dictionary views have corresponding <code>DBA</code> and <code>USER</code> views.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref495"></a><a id="BAJBFEDD"></a>Table 7-2 Static Data Dictionary Views for OLAP</p>
<table class="cellalignment3130" title="Static Data Dictionary Views for OLAP" summary="Descriptions of static data dictionary views for OLAP" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t4">View</th>
<th class="cellalignment3129" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t4" headers="r1c1-t4">
<p><code><a id="sthref496"></a><a id="sthref497"></a><a id="sthref498"></a>ALL_AWS</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t4 r1c2-t4">
<p>Describes all analytic workspaces accessible to the current user.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t4" headers="r1c1-t4">
<p><a id="sthref499"></a><a id="sthref500"></a><a id="sthref501"></a><code>ALL_AW_OBJ</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t4 r1c2-t4">
<p>Describes the current objects in all analytic workspaces accessible to the current user.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t4" headers="r1c1-t4">
<p><a id="sthref502"></a><a id="sthref503"></a><a id="sthref504"></a><code>ALL_AW_PROP</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t4 r1c2-t4">
<p>Describes the properties defined in all analytic workspaces accessible to the current user.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t4" headers="r1c1-t4">
<p><a id="sthref505"></a><a id="sthref506"></a><a id="sthref507"></a><code>ALL_AW_PS</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t4 r1c2-t4">
<p>Describes the page spaces currently in use by all analytic workspaces accessible to the current user.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="query.htm#CBABFFGJ">"Querying the Data Dictionary"</a> for a list of data dictionary views that describe OLAP dimensional objects</p>
</li>
<li>
<p><span class="italic">Oracle Database Reference</span> for full descriptions of all data dictionary views</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BAJFGAHE"></a>
<div class="sect2">
<h3 class="sect2"><a id="OLAUG9235"></a>System Tables</h3>
<p><a id="sthref508"></a>The <code>SYS</code> user owns several tables associated with analytic workspaces. <a href="#BAJIGCCC">Table 7-3</a> provides brief descriptions.</p>
<div class="infobox-note">
<p class="notep1"><span class="bold">Important</span>:</p>
These tables are vital for the operation of Oracle OLAP. Do not delete them or attempt to modify them directly without being fully aware of the consequences.</div>
<div class="tblformal">
<p class="titleintable"><a id="sthref509"></a><a id="BAJIGCCC"></a>Table 7-3 OLAP Tables Owned By SYS</p>
<table class="cellalignment3130" title="OLAP Tables Owned By SYS " summary="OLAP tables owned by SYS" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t7">Table</th>
<th class="cellalignment3129" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t7" headers="r1c1-t7">
<p><code><a id="sthref510"></a>AW$</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t7 r1c2-t7">
<p>Maintains a record of all analytic workspaces in the database, recording its name, owner, and other information.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t7" headers="r1c1-t7">
<p><code>AW$AWCREATE</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t7 r1c2-t7">
<p>Stores the <code>AWCREATE</code> analytic workspace, which contains programs for using OLAP Catalog metadata in Oracle Database 10<span class="italic">g</span> Release 10.1.0.2 and earlier releases. It exists only for backward compatibility.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t7" headers="r1c1-t7">
<p><code><a id="sthref511"></a>AW$AWCREATE10G</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t7 r1c2-t7">
<p>Stores the <code>AWCREATE10G</code> analytic workspace, which contains programs for using OLAP Catalog metadata in Oracle Database 10<span class="italic">g</span> Release 10.1.0.3. The OLAP Catalog is not used by later releases. It exists only for backward compatibility.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t7" headers="r1c1-t7">
<p><code>AW$AWMD</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t7 r1c2-t7">
<p><a id="sthref512"></a>Stores the <code>AWMD</code> analytic workspace, which contains programs for creating metadata catalogs.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r6c1-t7" headers="r1c1-t7">
<p><code>AW$AWREPORT</code></p>
</td>
<td class="cellalignment3125" headers="r6c1-t7 r1c2-t7">
<p>Stores the <code>AWREPORT</code> analytic workspace, which contains a program named <code>AWREPORT</code> for generating a summary space report.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r7c1-t7" headers="r1c1-t7">
<p><code>AW$AWXML</code></p>
</td>
<td class="cellalignment3125" headers="r7c1-t7 r1c2-t7">
<p>Stores the <code>AWXML</code> analytic workspace, which contains programs for creating and managing analytic workspaces for Oracle Database 10<span class="italic">g</span> Release 10.1.0.4 and later.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r8c1-t7" headers="r1c1-t7">
<p><code>AW$EXPRESS</code></p>
</td>
<td class="cellalignment3125" headers="r8c1-t7 r1c2-t7">
<p>Stores the <code>EXPRESS</code> analytic workspace. It contains objects and programs that support basic operations. <code>EXPRESS</code> is used any time a session is open.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r9c1-t7" headers="r1c1-t7">
<p><code>AW_OBJ$</code></p>
</td>
<td class="cellalignment3125" headers="r9c1-t7 r1c2-t7">
<p>Describes the objects stored in analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r10c1-t7" headers="r1c1-t7">
<p><code>AW_PRG$</code></p>
</td>
<td class="cellalignment3125" headers="r10c1-t7 r1c2-t7">
<p>Stores program data. Not currently used.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r11c1-t7" headers="r1c1-t7">
<p><code>AW_PROP$</code></p>
</td>
<td class="cellalignment3125" headers="r11c1-t7 r1c2-t7">
<p>Stores analytic workspace object properties.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r12c1-t7" headers="r1c1-t7">
<p><code>AW_TRACK$</code></p>
</td>
<td class="cellalignment3125" headers="r12c1-t7 r1c2-t7">
<p>Stores tracking data about access to aggregate cells. Not currently used.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r13c1-t7" headers="r1c1-t7">
<p><code><a id="sthref513"></a>PS$</code></p>
</td>
<td class="cellalignment3125" headers="r13c1-t7 r1c2-t7">
<p>Maintains a history of all page spaces. A page space is an ordered series of bytes equivalent to a file. Oracle OLAP manages a cache of workspace pages. Pages are read from storage in a table and written into the cache in response to a query. The same page can be accessed by several sessions.</p>
<p>The information stored in <code>PS$</code> enables Oracle OLAP to discard pages that are no longer in use, and to maintain a consistent view of the data for all users, even when the workspace is being modified during their sessions. When changes to a workspace are saved, unused pages are purged and the corresponding rows are deleted from <code>PS$</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref514"></a>
<h3 class="sect2"><a id="OLAUG9236"></a>Analytic Workspace Tables</h3>
<p><a id="sthref515"></a>Analytic workspaces are stored in tables in the Oracle database. The names of these tables always begin with <code>AW$</code>.</p>
<p>For example, if the <code>GLOBAL</code> user creates two analytic workspaces, one named <code>FINANCIALS</code> and the other named <code>MARKETING</code>, then these tables are created in the <code>GLOBAL</code> schema:</p>
<pre>
AW$FINANCIALS
AW$MARKETING
</pre>
<p>The tables store all of the object definitions and data.</p>
</div>
<!-- class="sect2" -->
<a id="BAJCAHGJ"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Maintenance Logs</h3>
<p>The first time you load data into a cube or dimension using Analytic Workspace Manager, it creates several logs. These logs are stored in tables in the same schema as the analytic workspace:</p>
<ul>
<li>
<p><span class="bold">Cube Build Log</span>: Contains information about what happened during a build. Use this log to determine whether the build produced the results you were expecting, and if not, why not. The log is continually updated whenever a cube or dimension is refreshed, whether by Analytic Workspace Manager, the database materialized view refresh subsystem, or a PL/SQL procedure. You can query the log at any time to evaluate the progress of the build and to estimate the time to completion. The default table name is <code>CUBE_BUILD_LOG</code>.</p>
</li>
<li>
<p><span class="bold">Cube Dimension Compile Log</span>: Contains errors that occur during the validation of the dimension hierarchies when OLAP is aggregating a cube. The default table name is <code>CUBE_DIMENSION_COMPILE</code>.</p>
</li>
<li>
<p><span class="bold">Cube Operations Log</span>: Contains messages and debugging information for all OLAP engine events. The default table name is <code>CUBE_OPERATIONS_LOG</code>.</p>
</li>
<li>
<p><span class="bold">Cube Rejected Records Log</span>: Identifies any records that were rejected because they did not meet the expected format. The default table name is <code>CUBE_DIMENSION_COMPILE</code>.</p>
</li>
</ul>
<p>These logs enable you to track the progress of long running processes, then use the results to profile performance characteristics. They provide information to help you diagnose and remedy problems that may occur during development and maintenance of a cube. They also help diagnose performance problems in querying cubes.</p>
<p>You can also run the $ORACLE_HOME/olap/admin/utlolaplog.sql script to create the build log with some useful views.</p>
<p>The Maintenance Wizard in Analytic Workspace Manager displays the relevant rows from these tables during every build on the Maintenance Log page. You can query the tables directly in any SQL interface.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code>DBMS_CUBE_LOG</code> entry in <span class="italic">Oracle Database PL/SQL Packages and Types Reference</span>.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BAJBHCDI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9238"></a>Partitioned Cubes and Parallelism</h2>
<p>Cubes are often partitioned to improve build and maintenance times. For information about creating a partitioned cube, refer to <a href="cubes.htm#CJACIHCG">"Choosing a Partitioning Strategy"</a>.</p>
<div class="sect2"><a id="sthref516"></a>
<h3 class="sect2"><a id="OLAUG9239"></a>Querying Metadata for Cube Partitioning</h3>
<p><a id="sthref517"></a>To discover the current partitioning, query the <code><a id="sthref518"></a>ALL_CUBES</code> data dictionary view. The <code>PARTITION_DIMENSION_NAME</code>, <code>PARTITION_HIERARCHY_NAME</code>, and <code>PARTITION_LEVEL_NAME</code> columns display partitioning information. For example, the following query shows that the Units Cube is partitioned on the Time dimension, the Calendar hierarchy, and the Calendar Year level.</p>
<pre>
SELECT partition_dimension_name, partition_hierarchy_name, 
     partition_level_name FROM all_cubes
     WHERE owner='GLOBAL' AND cube_name='UNITS_CUBE';

PARTITION_DIMENSION_NAME  PARTITION_HIERARCHY_NAME  PARTITION_LEVEL_NAME
------------------------- ------------------------- --------------------
TIME                      CALENDAR                  CALENDAR_YEAR
</pre></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref519"></a>
<h3 class="sect2"><a id="OLAUG9240"></a>Creating and Dropping Partitions</h3>
<p>The OLAP engine automatically creates and drops partitions as part of data maintenance, as members are added and deleted from the partitioning dimension.</p>
<p>For example, assume that in the sample Global analytic workspace, the Units cube is partitioned on the Time dimension, using the Calendar hierarchy, and at the Calendar Quarter level. The OLAP engine creates a partition for each Calendar Quarter and its children. The default top partition contains Calendar Years and all members of the Fiscal hierarchy. If Global has three years of data, then the Units cube has 13 partitions: Four bottom partitions for each Calendar Year, plus the top partition.</p>
<p>A data refresh typically creates new time periods and deletes old ones. Whenever a Calendar Quarter value is loaded into the Time dimension, a corresponding partition is added to the cube. Whenever a Calendar Quarter value is deleted from the Time dimension, the corresponding empty partition is deleted from the cube.</p>
</div>
<!-- class="sect2" -->
<a id="BAJJAIAC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9241"></a>Parallelism</h3>
<p>You can improve the performance of data maintenance by enabling parallel processing. There are two levels of parallelism:</p>
<ul>
<li>
<p>Parallel job execution: Loading and aggregating the data using multiple processes.</p>
</li>
<li>
<p>Parallel update: Moving the data from temporary to permanent tablespaces using multiple processes.</p>
</li>
</ul>
<p><a id="sthref520"></a><a id="sthref521"></a><a id="sthref522"></a>This number of parallel processes is controlled by these factors:</p>
<ul>
<li>
<p>The number of objects that can be aggregated in parallel. Each cube and each partition (including the top partition) can use a separate process.</p>
<p>You can control the number of partitions in a cube on the Partitioning tab of the cube property sheet in Analytic Workspace Manager.</p>
</li>
<li>
<p>The number of simultaneous database processes the user is authorized to run.</p>
<p>This number is controlled by the <a id="sthref523"></a><code>JOB_QUEUE_PROCESSES</code> parameter. If you have <code>SYS</code> privileges, you can obtain the current parameter setting with the following SQL command:</p>
<pre>
SHOW PARAMETER JOB_QUEUE_PROCESSES
</pre></li>
<li>
<p>For parallel update, the number of processes you allocate to the job. You can specify the number of processes in the Maintenance Wizard of Analytic Workspace Manager when specifying the task processing options, or on the Materialized View tab of the cube.</p>
</li>
<li>
<p>The number of processes allocated to SQL to fetch rows from the relational source tables. When <code>PARALLEL_DEGREE_POLICY</code> is set to <code>AUTO</code> or <code>LIMITED</code>, the database can allocate additional processes for executing SQL statements.</p>
</li>
</ul>
<p>Suppose that a cube is partitioned on the Quarter level of Time, and the cube contains three years of data. The cube has 3*4=12 bottom partitions, <code>JOB_QUEUE_PROCESSES</code> is set to 8, and you set the parallelism option to 4 for the build. Oracle Database processes the cube in this way when <code>PARALLEL_DEGREE_POLICY</code> is set to its default value of <code>MANUAL</code>:</p>
<ol>
<li>
<p>Load and build the dimensions of the cube serially using a single process.</p>
</li>
<li>
<p>Load and build the 12 bottom partitions in parallel using 4 processes. As soon as one process finishes, another begins until all 12 are complete.</p>
<p>This cube could use the 8 processes allowed by <code>JOB_QUEUE_PROCESSES</code>, but it is limited to 4 by the build setting.</p>
</li>
<li>
<p>Load and build the top partition.</p>
</li>
</ol>
<p>When <code>PARALLEL_DEGREE_POLICY</code> is set to <code>AUTO</code> or <code>LIMITED</code>, Oracle Database may allocate more than the designated processes.</p>
<p><a href="#BAJIDAEG">Example 7-1</a> shows excerpts from <code>CUBE_BUILD_LOG</code> for a build of the Units cube and its dimensions. Partitioning on the Calendar Year level of the Time dimension created 10 bottom partitions for 1998 to 2007. <code>JOB_QUEUE_PROCESSES</code> is set to 2 and the parallelism option is set to 2 for the build also. The log shows that Oracle Database processed the Global in this way:</p>
<ol>
<li>
<p>Processed the four dimensions serially.</p>
</li>
<li>
<p>Processed each partition of the Units cube</p>
</li>
</ol>
<div class="example">
<p class="titleinexample"><a id="BAJIDAEG"></a>Example 7-1 Build Log for Global Units Cube</p>
<pre>
SLAVE_NUMBER STATUS     COMMAND              BUILD_OBJECT    PARTITION
------------ ---------- -------------------- --------------- ---------------
           0 STARTED    BUILD
           0 STARTED    ATTACH AW RW WAIT
           0 COMPLETED  ATTACH AW RW WAIT
           0 STARTED    FREEZE
           0 COMPLETED  FREEZE
           0 STARTED    LOAD NO SYNCH        TIME
           0 SQL        LOAD NO SYNCH        TIME
               .
               .
               .
           0 SQL        LOAD NO SYNCH        PRODUCT
           0 SQL        LOAD NO SYNCH        PRODUCT
           0 COMPLETED  LOAD NO SYNCH        PRODUCT
           0 STARTED    COMPILE              PRODUCT
           0 COMPLETED  COMPILE              PRODUCT
           0 STARTED    COMPILE AGGMAP       UNITS_CUBE
           0 COMPLETED  COMPILE AGGMAP       UNITS_CUBE
           0 STARTED    COMPILE AGGMAP       PRICE_CUBE
           0 COMPLETED  COMPILE AGGMAP       PRICE_CUBE
           0 STARTED    UPDATE/COMMIT        PRODUCT
           0 COMPLETED  UPDATE/COMMIT        PRODUCT
           0 STARTED    UPDATE/COMMIT
           0 COMPLETED  UPDATE/COMMIT
           0 STARTED    REATTACH AW MULTI TH
                        AW
 
           0 COMPLETED  REATTACH AW MULTI TH
                        AW
 
           0 STARTED    SLAVE                UNITS_CUBE      P10:CY2007
           0 STARTED    SLAVE                UNITS_CUBE      P9:CY2006
           1 STARTED    BUILD                                P10:CY2007
           1 STARTED    ATTACH AW MULTI THAW UNITS_CUBE      P10:CY2007
           1 COMPLETED  ATTACH AW MULTI THAW UNITS_CUBE      P10:CY2007
           1 STARTED    ACQUIRE              UNITS_CUBE      P10:CY2007
           1 COMPLETED  ACQUIRE              UNITS_CUBE      P10:CY2007
           1 STARTED    LOAD                 UNITS_CUBE      P10:CY2007
           1 SQL        LOAD                 UNITS_CUBE      P10:CY2007
           1 COMPLETED  LOAD                 UNITS_CUBE      P10:CY2007
           1 STARTED    UPDATE/COMMIT        UNITS_CUBE      P10:CY2007
           1 COMPLETED  UPDATE/COMMIT        UNITS_CUBE      P10:CY2007
               .
               .
               .
          10 STARTED    BUILD                                P1:CY1998
          10 STARTED    ATTACH AW MULTI THAW UNITS_CUBE      P1:CY1998
          10 COMPLETED  ATTACH AW MULTI THAW UNITS_CUBE      P1:CY1998
          10 STARTED    ACQUIRE              UNITS_CUBE      P1:CY1998
          10 COMPLETED  ACQUIRE              UNITS_CUBE      P1:CY1998
          10 STARTED    LOAD                 UNITS_CUBE      P1:CY1998
          10 SQL        LOAD                 UNITS_CUBE      P1:CY1998
          10 COMPLETED  LOAD                 UNITS_CUBE      P1:CY1998
          10 STARTED    SOLVE                UNITS_CUBE      P1:CY1998
          10 COMPLETED  SOLVE                UNITS_CUBE      P1:CY1998
          10 STARTED    UPDATE/COMMIT        UNITS_CUBE      P1:CY1998
          10 COMPLETED  UPDATE/COMMIT        UNITS_CUBE      P1:CY1998
          10 STARTED    DETACH AW            UNITS_CUBE      P1:CY1998
          10 COMPLETED  DETACH AW            UNITS_CUBE      P1:CY1998
          10 COMPLETED  BUILD                                P1:CY1998
           0 COMPLETED  SLAVE                UNITS_CUBE      P1:CY1998
           0 STARTED    REATTACH AW MULTI TH
                        AW
 
           0 COMPLETED  REATTACH AW MULTI TH
                        AW
 
           0 STARTED    SLAVE                UNITS_CUBE      P0
          11 STARTED    BUILD                                P0
          11 STARTED    ATTACH AW MULTI THAW UNITS_CUBE      P0
          11 COMPLETED  ATTACH AW MULTI THAW UNITS_CUBE      P0
          11 STARTED    ACQUIRE              UNITS_CUBE      P0
          11 COMPLETED  ACQUIRE              UNITS_CUBE      P0
          11 STARTED    LOAD                 UNITS_CUBE      P0
          11 COMPLETED  LOAD                 UNITS_CUBE      P0
          11 STARTED    SOLVE                UNITS_CUBE      P0
          11 COMPLETED  SOLVE                UNITS_CUBE      P0
          11 STARTED    UPDATE/COMMIT        UNITS_CUBE      P0
          11 COMPLETED  UPDATE/COMMIT        UNITS_CUBE      P0
          11 STARTED    DETACH AW            UNITS_CUBE      P0
          11 COMPLETED  DETACH AW            UNITS_CUBE      P0
          11 COMPLETED  BUILD                                P0
           0 COMPLETED  SLAVE                UNITS_CUBE      P0
           0 STARTED    REATTACH AW RW WAIT
           0 COMPLETED  REATTACH AW RW WAIT
           0 STARTED    ANALYZE              UNITS_CUBE
           0 COMPLETED  ANALYZE              UNITS_CUBE
           0 STARTED    THAW
           0 COMPLETED  THAW
           0 STARTED    DETACH AW
           0 COMPLETED  DETACH AW
           0 COMPLETED  BUILD
 
268 rows selected.
</pre></div>
<!-- class="example" -->
<p>Oracle Database allocates the specified number of processes regardless of whether all of them can be used simultaneously at any point in the job. For example, if your job can use up to three processes, but you specify five, then two of the processes allocated to your job cannot be used by it or by any other job.</p>
<p><a id="sthref524"></a>If Oracle Database is installed with Real Application Clusters (Oracle RAC), then a script submitted to the job queue is distributed across all nodes in the cluster. The performance gains can be significant. For example, a job running on four nodes in a cluster may run up to four times faster than the same job running on a single computer.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BAJECHJJ"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9242"></a>Analyzing Cubes and Dimensions</h2>
<p>If your application executes queries directly against a single cube, you do not need to generate optimizer statistics for the cube. These queries are automatically optimized within the analytic workspace.</p>
<p>Optimizer statistics are used to create execution plans for queries that join two cube views or join a cube view to a table or a view of a table. They are also used for cost-based rewrite to cube materialized views. You must generate the statistics only for these types of queries.</p>
<p>To generate <a id="sthref525"></a>optimizer statistics, use the <a id="sthref526"></a><code>DBMS_AW_STATS</code> PL/SQL package. You can run this package in Analytic Workspace Manager as part of a cube script, in SQL*Plus, or in any other SQL interface. Generating the statistics does not have a significant performance cost.</p>
<p><code>DBMS_AW_STATS</code> has the following syntax:</p>
<pre>
DBMS_AW_STATS.ANALYZE
     (object       IN VARCHAR2);
</pre>
<p>The argument can be either a cube or a dimension. <a href="#BAJCHEFE">Example 7-2</a> shows a sample script for generating statistics on the Units cube and its dimensions.</p>
<div class="example">
<p class="titleinexample"><a id="BAJCHEFE"></a>Example 7-2 Generating Statistics for the Units Cube</p>
<pre>
BEGIN
     DBMS_AW_STATS.ANALYZE('units_cube');
     DBMS_AW_STATS.ANALYZE('time');
     DBMS_AW_STATS.ANALYZE('customer');
     DBMS_AW_STATS.ANALYZE('product');
     DBMS_AW_STATS.ANALYZE('channel');
END;
/
</pre></div>
<!-- class="example" -->
<p>Although you cannot view the statistics directly, you can examine the execution plans, as described in <a href="query.htm#CHDDHGII">"Viewing Execution Plans"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink PFGRF009" href="../../server.112/e41573/ex_plan.htm#PFGRF009"><span class="italic">Oracle Database Performance Tuning Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="BAJIDCGH"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9243"></a>Monitoring Analytic Workspaces</h2>
<p>Oracle Database provides various tools to help you diagnose performance problems. As an Oracle DBA, you may find these tools useful in tuning the database:</p>
<ul>
<li>
<p>Oracle Enterprise Manager <a id="sthref527"></a><a id="sthref528"></a>Database Control (Database Control) is a general database management and administration tool. In addition to facilitating basic tasks like adding users and modifying datafiles, Database Control presents a graphic overview of a database's current status. It also provides an interface to troubleshooting and performance tuning utilities.</p>
</li>
<li>
<p><a id="sthref529"></a>Automatic Workload Repository collects database performance statistics and metrics for analysis and tuning, shows the exact time spent in the database, and saves session information.</p>
</li>
<li>
<p><a id="sthref530"></a>Automatic Database Diagnostic Monitor watches database performance statistics to identify bottlenecks, analyze SQL statements, and offer suggestions to improve performance.</p>
</li>
</ul>
<p>Oracle Database also provides system views to help you diagnose performance problems. The following topics identify views that are either specific to OLAP or provide database information that is pertinent to OLAP.</p>
<div class="sect2"><a id="sthref531"></a>
<h3 class="sect2"><a id="OLAUG9244"></a>Dynamic Performance Views</h3>
<p><a id="sthref532"></a><a id="sthref533"></a>Each Oracle Database instance maintains fixed tables that record current database activity. These tables collect data on internal disk structures and memory structures. Among them are tables that collect data on Oracle OLAP.</p>
<p>These tables are available to users through a set of dynamic performance views. By monitoring these views, you can detect usage trends and diagnose system bottlenecks. <a href="#BAJDBFDA">Table 7-4</a> provides a brief description of each view. Global dynamic performance views (<code>GV$</code>) are also provided.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN003" href="../../server.112/e40402/dynviews_part.htm#REFRN003"><span class="italic">Oracle Database Reference</span></a> for full descriptions of the OLAP dynamic performance views.</div>
<div class="tblformal">
<p class="titleintable"><a id="sthref534"></a><a id="BAJDBFDA"></a>Table 7-4 OLAP Dynamic Performance Views</p>
<table class="cellalignment3130" title="OLAP Dynamic Performance Views" summary="Descriptions of OLAP Dynamic Performance Views" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t11">View</th>
<th class="cellalignment3129" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t11" headers="r1c1-t11">
<p><code><a id="sthref535"></a>V$AW_AGGREGATE_OP</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t11 r1c2-t11">
<p>Lists the aggregation operators available in analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t11" headers="r1c1-t11">
<p><code><a id="sthref536"></a>V$AW_ALLOCATE_OP</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t11 r1c2-t11">
<p>Lists the allocation operators available in analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t11" headers="r1c1-t11">
<p><code><a id="sthref537"></a>V$AW_CALC</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t11 r1c2-t11">
<p>Collects information about the use of cache space and the status of dynamic aggregation.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t11" headers="r1c1-t11">
<p><code><a id="sthref538"></a>V$AW_LONGOPS</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t11 r1c2-t11">
<p>Collects status information about SQL fetches.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r6c1-t11" headers="r1c1-t11">
<p><code><a id="sthref539"></a>V$AW_SESSION_INFO</code></p>
</td>
<td class="cellalignment3125" headers="r6c1-t11 r1c2-t11">
<p>Collects information about each active session.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r7c1-t11" headers="r1c1-t11">
<p><code><a id="sthref540"></a>V$AW_OLAP</code></p>
</td>
<td class="cellalignment3125" headers="r7c1-t11 r1c2-t11">
<p>Collects information about the status of active analytic workspaces.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p><a href="#BAJGDGHG">Table 7-5</a> describes some other dynamic performance views that are not specific to OLAP, but which you may want to use when tuning your database for OLAP.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref541"></a><a id="BAJGDGHG"></a>Table 7-5 Selected Database Performance Views</p>
<table class="cellalignment3130" title="Selected Database Performance Views" summary="Selected database performance views that help tune for OLAP" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t12">View</th>
<th class="cellalignment3129" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t12" headers="r1c1-t12">
<p><code>V$LOG</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t12 r1c2-t12">
<p>Displays log file information from the control file.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t12" headers="r1c1-t12">
<p><code>V$LOGFILE</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t12 r1c2-t12">
<p>Contains information about redo log files.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t12" headers="r1c1-t12">
<p><code>V$PGASTAT</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t12 r1c2-t12">
<p>Provides PGA memory usage statistics and statistics about the automatic PGA memory manager when <code>PGA_AGGREGATE_TARGET</code> is set.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t12" headers="r1c1-t12">
<p><code>V$ROWCACHE</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t12 r1c2-t12">
<p>Displays statistics for data dictionary activity. Each row contains statistics for one data dictionary cache.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r6c1-t12" headers="r1c1-t12">
<p><code>V$SYSSTAT</code></p>
</td>
<td class="cellalignment3125" headers="r6c1-t12 r1c2-t12">
<p>Lists system statistics.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="BAJBHFAI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9245"></a>Basic Queries for Monitoring the OLAP Option</h3>
<p>The following queries extract OLAP information from the data dictionary. You must have a privileged account to query the DBA views.</p>
<p>More complex queries are provided in a script that you can download from the Oracle OLAP Web site on the Oracle Technology Network. For descriptions of these scripts and download instructions, refer to <a href="#BAJJIHGD">"OLAP DBA Scripts"</a>.</p>
<a id="BAJFGBFJ"></a>
<div class="sect3">
<h4 class="sect3"><a id="OLAUG9246"></a><a id="sthref542"></a>Is the OLAP Option Installed in the Database?</h4>
<p><a id="sthref543"></a><a id="sthref544"></a>The OLAP option is provided with Oracle Database Enterprise Edition. To verify that the OLAP components have been installed, issue this SQL command:</p>
<pre>
SELECT comp_name, version, status FROM DBA_REGISTRY 
     WHERE comp_name LIKE '%OLAP%';

COMP_NAME                VERSION                        STATUS     
------------------------ ------------------------------ -----------
OLAP Analytic Workspace  11.2.0.1.0                     VALID      
Oracle OLAP API          11.2.0.1.0                     VALID      
OLAP Catalog             11.2.0.1.0                     VALID      
</pre></div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref545"></a>
<h4 class="sect3"><a id="OLAUG9247"></a>What Analytic Workspaces Are in the Database?</h4>
<p><a id="sthref546"></a><a id="sthref547"></a><a id="sthref548"></a><a id="sthref549"></a>The <code>DBA_AWS</code> view provides information about all analytic workspaces. Use the following SQL command to get a list of names, their owners, and the version:</p>
<pre>
SELECT owner, aw_name, aw_version FROM DBA_AWS;
 
OWNER      AW_NAME                        AW_VERSION
---------- ------------------------------ ----------
SYS        EXPRESS                        11.2
GLOBAL     GLOBAL                         11.2
SYS        AWCREATE                       11.2
SH         SH                             11.2
SYS        AWMD                           11.2
SYS        AWXML                          11.2
SYS        AWREPORT                       11.2
SYS        AWCREATE10G                    11.2
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BAJFGAHE">"System Tables"</a> for descriptions of the analytic workspaces owned by <code>SYS</code>.</div>
</div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref550"></a>
<h4 class="sect3"><a id="OLAUG9248"></a>How Big Is the Analytic Workspace?</h4>
<p><a id="sthref551"></a><a id="sthref552"></a><a id="sthref553"></a>To find out the size in bytes of the tablespace extents for a particular analytic workspace, use the following SQL statements, replacing <code>GLOBAL</code> with the name of your analytic workspace.</p>
<pre>
SELECT extnum, SUM(dbms_lob.getlength(awlob)) bytes FROM global.aw$global 
     GROUP BY extnum;
 
    EXTNUM      BYTES
---------- ----------
         0  191776956
</pre>
<p>To see the size of the LOB table containing an analytic workspace, use a SQL command like the following, replacing <code>GLOBAL.AW$GLOBAL</code> with the qualified name of your analytic workspace.</p>
<pre>
SELECT ROUND(SUM(dbms_lob.getlength(awlob))/1024,0) kb 
     FROM global.aw$global;
 
        KB
----------
    187282
</pre></div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref554"></a>
<h4 class="sect3"><a id="OLAUG9249"></a>When Were the Analytic Workspaces Created?</h4>
<p><a id="sthref555"></a><a id="sthref556"></a>The <code>DBA_OBJECTS</code> view provides the creation date of the objects in your database. The following SQL command generates an easily readable report for analytic workspaces.</p>
<pre>
SELECT owner, object_name, created, status FROM dba_objects 
      WHERE object_name LIKE 'AW$%' AND object_name!='AW$' 
      GROUP BY owner, object_name, created, status 
      ORDER BY owner, object_name;
 
OWNER      OBJECT_NAME     CREATED   STATUS
---------- --------------- --------- -------
GLOBAL     AW$GLOBAL       01-APR-09 VALID
SYS        AW$AWCREATE     26-MAR-09 VALID
SYS        AW$AWCREATE10G  26-MAR-09 VALID
SYS        AW$AWMD         26-MAR-09 VALID
SYS        AW$AWREPORT     26-MAR-09 VALID
SYS        AW$AWXML        26-MAR-09 VALID
SYS        AW$EXPRESS      26-MAR-09 VALID
 
7 rows selected.
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BAJJIHGD"></a>
<div class="sect2">
<h3 class="sect2"><a id="OLAUG9250"></a>OLAP DBA Scripts</h3>
<p><a id="sthref557"></a>You can download a file that contains several SQL scripts from the Oracle OLAP Web site on the Oracle Technology Network. These scripts typically extract information from two or more system views and generate a report that may be useful in monitoring and tuning a database. To download the file, use this URL:</p>
<p><code><a href="http://www.oracle.com/technology/products/bi/olap/olap_dba_scripts.zip">http://www.oracle.com/technology/products/bi/olap/olap_dba_scripts.zip</a></code></p>
<p><a href="#BAJGDEIH">Table 7-6</a> describes these scripts. For more information, refer to the <code>README</code> file provided with the scripts.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref558"></a><a id="BAJGDEIH"></a>Table 7-6 OLAP DBA Scripts</p>
<table class="cellalignment3130" title="OLAP DBA Scripts" summary="Description of scripts available for monitoring performance" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t14">SQL Script</th>
<th class="cellalignment3129" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t14" headers="r1c1-t14">
<p><code>aw_objects_in_cache</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t14 r1c2-t14">
<p>Identifies the objects in the buffer cache that are related to analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t14" headers="r1c1-t14">
<p><code>aw_reads_writes</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t14 r1c2-t14">
<p>Tallies the reads from temporary and permanent tablespaces, the writes to cache, and the rows processed in analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t14" headers="r1c1-t14">
<p><code>aw_size</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t14 r1c2-t14">
<p>Displays the amount of disk space used by each analytic workspace.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t14" headers="r1c1-t14">
<p><code>aw_tablespaces</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t14 r1c2-t14">
<p>Provides extensive information about the tablespaces used by analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r6c1-t14" headers="r1c1-t14">
<p><code>aw_users</code></p>
</td>
<td class="cellalignment3125" headers="r6c1-t14 r1c2-t14">
<p>Identifies the users of analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r7c1-t14" headers="r1c1-t14">
<p><code>aw_wait_events</code></p>
</td>
<td class="cellalignment3125" headers="r7c1-t14 r1c2-t14">
<p>Describes the wait events experienced by users of analytic workspaces over the previous hour.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r8c1-t14" headers="r1c1-t14">
<p><code>buffer_cache_hits</code></p>
</td>
<td class="cellalignment3125" headers="r8c1-t14 r1c2-t14">
<p>Calculates the buffer cache hit ratio.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r9c1-t14" headers="r1c1-t14">
<p><code>cursor_parameters</code></p>
</td>
<td class="cellalignment3125" headers="r9c1-t14 r1c2-t14">
<p>Indicates whether the database parameters that limit the number of open cursors are set too low.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r10c1-t14" headers="r1c1-t14">
<p><code>olap_pga_performance</code></p>
</td>
<td class="cellalignment3125" headers="r10c1-t14 r1c2-t14">
<p>Determines how much PGA is in use, the size of the OLAP page pool, and the hit/miss ratio for OLAP pages for each user.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r11c1-t14" headers="r1c1-t14">
<p><code>olap_pga_use</code></p>
</td>
<td class="cellalignment3125" headers="r11c1-t14 r1c2-t14">
<p>Determines how much PGA is consumed by the OLAP page pool to perform operations on analytic workspaces.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r12c1-t14" headers="r1c1-t14">
<p><code>session_resources</code></p>
</td>
<td class="cellalignment3125" headers="r12c1-t14 r1c2-t14">
<p>Identifies the use of cursors, PGA, and UGA for each open session.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r13c1-t14" headers="r1c1-t14">
<p><code>shared_pool_hits</code></p>
</td>
<td class="cellalignment3125" headers="r13c1-t14 r1c2-t14">
<p>Calculates the shared pool hit ratio.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref559"></a>
<h3 class="sect2"><a id="OLAUG9251"></a>Scripts for Monitoring Performance</h3>
<p>Several of the scripts listed in <a href="#BAJJIHGD">"OLAP DBA Scripts"</a> provide detailed information about the use of memory and other database resources by OLAP sessions. You can use these scripts as is, or you can use them as the starting point for developing your own scripts.</p>
<p><a href="#BAJGBFHE">Example 7-3</a> shows the information returned by the <code>session_resources</code> script. It lists the use of resources such as cursors, PGA, and UGA.</p>
<div class="example">
<p class="titleinexample"><a id="BAJGBFHE"></a>Example 7-3 Querying Session Resources</p>
<pre>
@session_resources
 
USERNAME             NAME                                VALUE
-------------------- ------------------------------ ----------
GLOBAL:86            opened cursors cumulative             621
                     opened cursors current                 18
                     session cursor cache count             50
                     session cursor cache hits             432
                     session pga memory                5356368
                     session pga memory max           10468176
                     session stored procedure space          0
                     session uga memory                4230692
                     session uga memory max            7049780
 
9 rows selected.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BAJIHJDG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9252"></a>Monitoring Disk Space</h3>
<p><a id="sthref560"></a><a id="sthref561"></a>Several of the scripts listed in <a href="#BAJJIHGD">"OLAP DBA Scripts"</a> provide detailed information about the use of disk space by analytic workspaces. <a href="#BAJHBHFE">Example 7-4</a> shows the information returned by the <code>aw_size</code> script. It lists all of the analytic workspaces in the database, the disk space they consume, and the tablespaces in which they are stored.</p>
<div class="example">
<p class="titleinexample"><a id="BAJHBHFE"></a>Example 7-4 Querying the Use of Disk Space By Analytic Workspaces</p>
<pre>
@aw_size
 
Analytic Workspace                            On Disk MB Tablespace
---------------------------------------- --------------- --------------------
GLOBAL.GLOBAL                                     249.31 GLOBAL
SYS.AWCREATE                                        7.81 SYSAUX
SYS.AWCREATE10G                                     1.63 SYSAUX
SYS.AWMD                                            8.00 SYSAUX
SYS.AWREPORT                                        1.63 SYSAUX
SYS.AWXML                                          18.00 SYSAUX
SYS.EXPRESS                                         2.25 SYSAUX
                                         ---------------
Total Disk:                                       288.63
 
7 rows selected.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BAJCICHI"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9253"></a>Backup and Recovery</h2>
<p>You can backup and recover analytic workspaces using the same tools and procedures as the rest of your database.</p>
<p><a id="sthref562"></a><a id="sthref563"></a><a id="sthref564"></a>Oracle Recovery Manager (RMAN) is a powerful tool that simplifies, automates, and improves the performance of backup and recovery operations. RMAN enables one time backup configuration, automatic management of backups, and archived logs based on a user-specified recovery window, restartable backups and restores, and test restore/recovery.</p>
<p>RMAN implements a recovery window to control when backups expire. This lets you establish a period of time during which it is possible to discover logical errors and fix the affected objects by doing a database or tablespace point-in-time recovery. RMAN also automatically expires backups that are no longer required to restore the database to a point-in-time within the recovery window. Control file auto backup also allows for restoring or recovering a database, even when an RMAN repository is not available.</p>
</div>
<!-- class="sect1" -->
<a id="BAJJHIDD"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9254"></a>Export and Import</h2>
<p><a id="sthref565"></a>You can copy analytic workspaces in several different ways, either to replicate them on another computer or to back them up.</p>
<ul>
<li>
<p><span class="bold"><a id="sthref566"></a><a id="sthref567"></a>Data Pump</span>. Analytic workspaces are copied with the other objects in a schema or database export. Use the <code>expdp</code>/<code>impdp</code> database utilities.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
Verify that the target schema of an import has the OLAP_XS_ADMIN privilege. Otherwise, the analytic workspace will not be created with the necessary permissions.</div>
</li>
<li>
<p><span class="bold"><a id="sthref568"></a>Transportable Tablespaces</span>. Analytic workspaces are copied with the other objects to a t<a id="sthref569"></a>ransportable tablespace. However, you can only transport the tablespace to the same platform (for example, from Linux to Linux, Solaris to Solaris, or Windows to Windows) because the OLAP <code>DECIMAL</code> data type is hardware dependent. Use the <code>expdp</code>/<code>impdp</code> database utilities. Transportable tablespaces are much faster than dump files.</p>
</li>
<li>
<p><a id="sthref570"></a><span class="bold">XML Templates</span>. A template saves the XML definition of objects in an analytic workspace. You can save the entire analytic workspace, or individual cubes, dimensions, and calculated measures. Using a saved template, you can create an analytic workspace exactly like an existing one. The template does not save any data, nor does it save any customizations to the analytic workspace. You can copy a template to a different platform.</p>
</li>
</ul>
<p>The owner of an analytic workspace can create an XML template, or export the schema to a dump file. Only users with the <a id="sthref571"></a><code>EXP_FULL_DATABASE</code> privilege or a privileged user (such as <code>SYS</code> or a user with the <code>DBA</code> role) can export the full database or create a transportable tablespace.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="cubes.htm#CHDFFEEE">"Using Templates to Re-Create Dimensional Objects"</a> for information about XML templates</p>
</li>
<li>
<p><a class="olink SUTIL100" href="../../server.112/e22490/dp_overview.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a>or information about Oracle Data Pump and the <code>expdp</code>/<code>impdp</code> commands</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CHDBCEGB"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG700"></a>Cube Materialized Views</h2>
<p>A <a id="sthref572"></a>cube materialized view is an Oracle OLAP cube that has been enhanced with the capabilities of a materialized view at build time.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="cubes.htm#CHDHBGGB">"Adding Materialized View Capability to a Cube"</a></div>
<a id="CHDBEAFC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9255"></a>Acquiring Information From the Data Dictionary</h3>
<p>The data dictionary contains numerous static views that provide information about materialized views. They list cube materialized views along with all other materialized views.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN20139" href="../../server.112/e40402/statviews_1153.htm#REFRN20139"><span class="italic">Oracle Database Reference</span></a> for complete descriptions of the data dictionary views</div>
<a id="BAJGCFBJ"></a>
<div class="sect3">
<h4 class="sect3"><a id="OLAUG9256"></a>Identifying Cube Materialized Views</h4>
<p><a id="sthref573"></a><code>USER_MVIEWS</code> contains a row for each materialized view owned by the current user. The following query lists the materialized views owned by the <code>GLOBAL</code> user. The <code>CB$</code> prefix identifies a cube materialized view.</p>
<pre>
SELECT mview_name, refresh_mode "MODE", refresh_method "METHOD", 
     last_refresh_date "DATE", staleness FROM user_mviews;
 
MVIEW_NAME               MODE     METHOD   DATE            STALENESS
------------------------ -------- -------- --------------- ----------
CB$CUSTOMER_MARKET       DEMAND   COMPLETE 20-MAR-09       UNKNOWN
CB$CHANNEL_PRIMARY       DEMAND   COMPLETE 20-MAR-09       UNKNOWN
CB$CUSTOMER_SHIPMENTS    DEMAND   COMPLETE 20-MAR-09       UNKNOWN
CB$PRODUCT_PRIMARY       DEMAND   COMPLETE 20-MAR-09       UNKNOWN
CB$TIME_CALENDAR         DEMAND   COMPLETE 20-MAR-09       UNKNOWN
CB$TIME_FISCAL           DEMAND   COMPLETE 20-MAR-09       UNKNOWN
CB$UNITS_CUBE            DEMAND   FORCE    20-MAR-09       UNKNOWN
 
7 rows selected.
</pre>
<p>The example shows the cube materialized views defined by Analytic Workspace Manager: One for each dimension hierarchy and one for each cube.</p>
</div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref574"></a>
<h4 class="sect3"><a id="OLAUG9257"></a>Identifying the Refresh Logs</h4>
<p><a id="sthref575"></a><a id="sthref576"></a>Oracle Database can maintain a set of logs on the master tables for the cube materialized views. These logs support incremental (fast) refresh of the cube. The script generated by the Relational Schema Advisor creates a log for each fact and dimension table to record any changes to the data. The following query lists the materialized view logs owned by the <code>GLOBAL</code> user:</p>
<pre>
SELECT master, log_table FROM user_mview_logs;
 
MASTER                         LOG_TABLE
------------------------------ ------------------------------
CHANNEL_DIM                    MLOG$_CHANNEL_DIM
CUSTOMER_DIM                   MLOG$_CUSTOMER_DIM
PRODUCT_DIM                    MLOG$_PRODUCT_DIM
TIME_DIM                       MLOG$_TIME_DIM
UNITS_FACT                     MLOG$_UNITS_FACT
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDICJAA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9258"></a>Initiating a Data Refresh</h3>
<p><a id="sthref577"></a>You can initiate a data refresh of a cube materialized view in several different ways using Analytic Workspace Manager or a PL/SQL package:</p>
<ul>
<li>
<p><span class="bold">Automatic Refresh</span>: On the Materialized View tab for a cube, you can create a regular schedule for the materialized view refresh subsystem, as described in <a href="cubes.htm#CHDHBGGB">"Adding Materialized View Capability to a Cube"</a>.</p>
</li>
<li>
<p><span class="bold">Maintenance Wizard</span>: The Maintenance Wizard is available for refreshing all cubes and dimensions, including cube materialized views.</p>
</li>
<li>
<p><code><span class="codeinlinebold">DBMS_CUBE</span></code>: The <code>DBMS_CUBE</code> PL/SQL package is available for refreshing all cubes, cube dimensions, and cube materialized views.</p>
</li>
<li>
<p><code><span class="codeinlinebold">DBMS_MVIEW</span></code>: The <code>DBMS_MVIEW</code> PL/SQL package contains several procedures for use with cube materialized views.</p>
</li>
</ul>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref578"></a>
<h4 class="sect3"><a id="OLAUG9259"></a>Using DBMS_CUBE</h4>
<p><code><a id="sthref579"></a>DBMS_CUBE</code> can be used to create and populate an analytic workspace. You can use it to maintain any cube, including cube materialized views.</p>
<p>The following command initiates a complete refresh of <code>UNITS_CUBE</code>, which is enabled as a cube materialized view. It automatically refreshes any stale dimensions before refreshing the cube.</p>
<pre>
EXECUTE dbms_cube.build('GLOBAL.UNITS_CUBE');
</pre>
<p>You can determine the refresh method from <code>USER_MVIEWS</code>, as shown in <a href="#BAJGCFBJ">"Identifying Cube Materialized Views"</a>.</p>
</div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref580"></a>
<h4 class="sect3"><a id="OLAUG9260"></a>Using DBMS_MVIEW</h4>
<p><code><a id="sthref581"></a>DBMS_MVIEW</code> can be used to refresh all types of materialized views. These refresh procedures can be used with cube materialized views:</p>
<ul>
<li>
<p><code>REFRESH</code> refreshes a list of one or more materialized views.</p>
</li>
<li>
<p><code>REFRESH_ALL_MVIEWS</code> refreshes all materialized views that meet certain criteria.</p>
</li>
<li>
<p><code>REFRESH_DEPENDENT</code> refreshes all materialized views that depend on a particular master table and meet certain criteria.</p>
</li>
</ul>
<p>Dimensions must be refreshed before the cube. An error is raised during refresh of a cube materialized view if any of its associated dimension materialized views are stale. The procedures in <code>DBMS_MVIEW</code> can refresh multiple materialized views in one call, but they do not guarantee the refresh order. To control the refresh order, call <code>DBMS_MVIEW.REFRESH</code> for the cube materialized view separately from its dimension materialized views.</p>
<p>The following command initiates a refresh of the materialized view for the <code>CHANNEL_PRIMARY</code> hierarchy.</p>
<pre>
EXECUTE dbms_mview.refresh('CB$CHANNEL_PRIMARY', 'C');
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref582"></a>
<h3 class="sect2"><a id="OLAUG9261"></a>Refresh Methods</h3>
<p>In Analytic Workspace Manager, you can specify the <code>COMPLETE</code>, <code>FAST</code>, or <code>FORCE</code> methods for refreshing a cube. Two additional methods, <code>FAST_PCT</code> and <code>FAST_SOLVE</code>, are invoked by the materialized view subsystem. They are not separate choices.</p>
<div class="sect3"><a id="sthref583"></a>
<h4 class="sect3"><a id="OLAUG9262"></a>Refresh Method Descriptions</h4>
<p><a id="sthref584"></a><a href="#BAJDHGIH">Table 7-7</a> describes the refresh methods that are supported on cube materialized views.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref585"></a><a id="BAJDHGIH"></a>Table 7-7 Refresh Methods For Cube Materialized Views</p>
<table class="cellalignment3130" title="Refresh Methods For Cube Materialized Views" summary="Cube MV Refresh Methods" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t19">Refresh Method</th>
<th class="cellalignment3129" id="r1c2-t19">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t19" headers="r1c1-t19">
<p><code>COMPLETE</code></p>
</td>
<td class="cellalignment3125" headers="r2c1-t19 r1c2-t19">
<p>Deletes and recreates the cube.</p>
<p>This option supports arbitrarily complex mappings from the source tables to the cube.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t19" headers="r1c1-t19">
<p><code>FAST</code></p>
</td>
<td class="cellalignment3125" headers="r3c1-t19 r1c2-t19">
<p>Loads and re-aggregates only changed values, based on the materialized view logs or, after direct path loading, on the ALL_SUMDELTA data dictionary view.</p>
<p>The source for the refresh is the incremental differences that have been captured in the materialized view logs, rather than the original mapped sources. These differences are used to incrementally rebuild the cube. Only cells that are affected by the changed values are re-aggregated.</p>
<p>This option supports only simple mappings for cube materialized views, that is, where no expressions (other than <span class="italic">table.column</span>), views, or aggregations occur in the query defining the mapping.</p>
<p>The materialized view subsystem determines whether to perform a <code>FAST</code> or a <code>FAST_PCT</code> refresh. See the <a class="olink DWHSG015" href="../../server.112/e25554/refresh.htm#DWHSG015"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information about the methodology.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t19" headers="r1c1-t19">
<p><code>FAST_PCT</code></p>
</td>
<td class="cellalignment3125" headers="r4c1-t19 r1c2-t19">
<p>Loads and re-aggregates data only from changed partitions. This method works best when the source table and the cube are partitioned on the same dimension.</p>
<p><code>FAST_PCT</code> does not use change logs. The materialized view subsystem determines whether to perform a <code>FAST</code> or a <code>FAST_PCT</code> refresh. See the <a class="olink DWHSG015" href="../../server.112/e25554/refresh.htm#DWHSG015"><span class="italic">Oracle Database Data Warehousing Guide</span></a> for information about the methodology.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r5c1-t19" headers="r1c1-t19">
<p><code>FAST_SOLVE</code></p>
</td>
<td class="cellalignment3125" headers="r5c1-t19 r1c2-t19">
<p>Loads and re-aggregates only changed values, based on the original mapped data source.</p>
<p><code>FAST_SOLVE</code> is a type of refresh only for cube materialized views. It incrementally re-aggregates the cube even when the refresh source is the original mapped source instead of the materialized view logs. The aggregation subsystem identifies the differences and then incrementally re-aggregates the cube.</p>
<p>This option is supported for arbitrarily complex mappings from the source tables to the cube. To discover whether a <code>FAST_SOLVE</code> refresh has occurred, review the <code>CUBE_BUILD_LOG</code> table as shown in <a href="#BAJFAGGE">"Fast Solve Refreshes"</a>. Or review the LAST_REFRESH_TYPE column of ALL_MVIEW; a <code>FAST_SOLVE</code> refresh appears as FAST_CS.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r6c1-t19" headers="r1c1-t19">
<p><code>FORCE</code></p>
</td>
<td class="cellalignment3125" headers="r6c1-t19 r1c2-t19">
<p>Loads and re-aggregates values using the best method possible.</p>
<p>When a <code>COMPLETE</code> refresh is not necessary, the materialized view system first attempts a <code>FAST</code> refresh. If it cannot <code>FAST</code> refresh a cube materialized view, it performs a <code>FAST_SOLVE</code> refresh.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect3" -->
<a id="BAJFAGGE"></a>
<div class="sect3">
<h4 class="sect3"><a id="OLAUG9263"></a>Fast Solve Refreshes</h4>
<p>The build log lists the <a id="sthref586"></a><code>CLEAR LEAVES</code> command when the <a id="sthref587"></a><code>FAST SOLVE</code> method was used. <a href="#BAJGCBIA">Example 7-5</a> shows the rows of <code>CUBE_BUILD_LOG</code> concerned with building <code>UNITS_CUBE</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BAJCAHGJ">"Maintenance Logs"</a></div>
<div class="example">
<p class="titleinexample"><a id="BAJGCBIA"></a>Example 7-5 Identifying a FAST SOLVE Refresh</p>
<pre>
SELECT build_object, status, command FROM cube_build_log
     WHERE build_object='UNITS_CUBE'
     AND build_id=8;
 
BUILD_OBJECT STATUS     COMMAND
------------ ---------- -------------------------
UNITS_CUBE   STARTED    COMPILE AGGMAP
UNITS_CUBE   COMPLETED  COMPILE AGGMAP
UNITS_CUBE   STARTED    UPDATE
UNITS_CUBE   COMPLETED  UPDATE
UNITS_CUBE   STARTED    CLEAR LEAVES
UNITS_CUBE   COMPLETED  CLEAR LEAVES
UNITS_CUBE   STARTED    LOAD
UNITS_CUBE   COMPLETED  LOAD
UNITS_CUBE   STARTED    SOLVE
UNITS_CUBE   COMPLETED  SOLVE
UNITS_CUBE   STARTED    UPDATE
UNITS_CUBE   COMPLETED  UPDATE
UNITS_CUBE   STARTED    ANALYZE
UNITS_CUBE   COMPLETED  ANALYZE
 
14 rows selected.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDGHEJD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9264"></a>Using Query Rewrite</h3>
<p><a id="sthref588"></a>Query rewrite changes a query to select data from the materialized views instead of calculating the result set from the master tables. The transformation is fully transparent to the client, and requires no mention of the materialized views in the SQL statement. In the case of cube materialized views, the query is written against the tables or views of a star or snowflake schema, and it is transformed into a query against a cube materialized view. This transformation can result in significant improvements in run-time performance.</p>
<p>Query rewrite requires optimizer statistics on the cubes and dimensions. You can discover whether a query is rewritten by generating and examining its execution plan.</p>
<p>Oracle Database uses two initialization parameters to control query rewrite:</p>
<ul>
<li>
<p><a id="sthref589"></a><code>QUERY_REWRITE_ENABLED</code>: Enables or disables query rewrite globally for the database.</p>
</li>
<li>
<p><code><a id="sthref590"></a>QUERY_REWRITE_INTEGRITY</code>: Determines the degree to which query rewrite monitors the consistency of materialized views with the source data. The <code>trusted</code> or <code>stale tolerated</code> settings are recommended when using rewrite to cube materialized views.</p>
</li>
</ul>
<p><a id="sthref591"></a><a id="sthref592"></a>Administration of cube materialized views is the same as any other materialized view except that the cube materialized views must be in the same schema as the analytic workspace. Users require the <a id="sthref593"></a><code>GLOBAL QUERY REWRITE</code> privilege to have rewrite to materialized views that are in schemas other than their own. However, the owner can access the materialized views from any schema without additional privileges.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BAJECHJJ">"Analyzing Cubes and Dimensions"</a> for information about optimizer statistics</p>
</li>
<li>
<p><a href="query.htm#CHDDHGII">Viewing Execution Plans</a> for information about execution plans</p>
</li>
<li>
<p><a class="olink REFRN10176" href="../../server.112/e40402/initparams203.htm#REFRN10176"><span class="italic">Oracle Database Reference</span></a> for complete descriptions of the initialization parameters</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDCEECI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9265"></a>Acquiring Additional Information About Cube Materialized Views</h3>
<p>Oracle Database has numerous PL/SQL packages for managing materialized views. Cube materialized views are optimized to provide the best performance, so you have no need to use most of these packages. Few design decisions remain for you to make. For this reason, the <code>TUNE_MVIEW</code> procedure of <code>DBMS_ADVISOR</code> is disabled for cube materialized views.</p>
<p>However, there are a few packages that you may find useful, as shown in <a href="#CHDICDCC">Table 7-8</a>.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref594"></a><a id="CHDICDCC"></a>Table 7-8 PL/SQL Packages for Cube Materialized Views</p>
<table class="cellalignment3130" title="PL/SQL Packages for Cube Materialized Views" summary="Descriptions of PL/SQL packages for cube mvs" dir="ltr">
<thead>
<tr class="cellalignment3119">
<th class="cellalignment3129" id="r1c1-t22">Package</th>
<th class="cellalignment3129" id="r1c2-t22">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r2c1-t22" headers="r1c1-t22">
<p><a class="olink ARPLS026" href="../../appdev.112/e40758/d_metada.htm#ARPLS026"><code>DBMS_METADATA</code></a></p>
</td>
<td class="cellalignment3125" headers="r2c1-t22 r1c2-t22">
<p><a id="sthref595"></a><a id="sthref596"></a><a id="sthref597"></a>Returns the metadata for an object.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r3c1-t22" headers="r1c1-t22">
<p><a class="olink ARPLS027" href="../../appdev.112/e40758/d_mview.htm#ARPLS027"><code>DBMS_MVIEW</code></a></p>
</td>
<td class="cellalignment3125" headers="r3c1-t22 r1c2-t22">
<p>Executes data refreshes. See <a href="#CHDICJAA">"Initiating a Data Refresh"</a>.</p>
<p>You can use the <code>EXPLAIN_REWRITE</code> and <code>EXPLAIN_MVIEW</code> procedures to obtain information about cube materialized views. <code>EXPLAIN_MVIEW</code> is particular useful for evaluating and explaining the <code>FAST</code> refresh capabilities of a cube.</p>
</td>
</tr>
<tr class="cellalignment3119">
<td class="cellalignment3125" id="r4c1-t22" headers="r1c1-t22">
<p><a class="olink ARPLS378" href="../../appdev.112/e40758/d_xplan.htm#ARPLS378"><code>DBMS_XPLAN</code></a></p>
</td>
<td class="cellalignment3125" headers="r4c1-t22 r1c2-t22">
<p>Displays an execution plan. See <a href="query.htm#CHDDHGII">"Viewing Execution Plans"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3118">
<tr>
<td class="cellalignment3125">
<table class="cellalignment3123">
<tr>
<td class="cellalignment3122"><a href="reports.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3122"><a href="security.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3127">
<table class="cellalignment3121">
<tr>
<td class="cellalignment3122"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3122"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3122"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3122"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3122"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3122"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
