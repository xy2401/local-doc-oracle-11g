<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Creating Dimensions and Cubes</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 009" />
<meta name="dcterms.created" content="2010-08-04T11:18:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="OLAP User's Guide" />
<meta name="dcterms.identifier" content="E17123-03" />
<meta name="dcterms.isVersionOf" content="OLAUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2003, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="awgloss.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="start.htm" title="Previous" type="text/html" />
<link rel="Next" href="query.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17123.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/17</span> <!-- End Header --><a id="BGBCCBJE"></a>
<h1 class="chapter"><span class="secnum">3</span> <a id="OLAUG300"></a>Creating Dimensions and Cubes</h1>
<p>This chapter explains how to design a data model and create dimensions and cubes using Analytic Workspace Manager. It contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDIAADG">Designing a Dimensional Model for Your Data</a></p>
</li>
<li>
<p><a href="#i76953">Introduction to Analytic Workspace Manager</a></p>
</li>
<li>
<p><a href="#i77011">Creating a Dimensional Data Store Using Analytic Workspace Manager</a></p>
</li>
<li>
<p><a href="#BGBDJAAG">Creating Dimensions</a></p>
</li>
<li>
<p><a href="#BGBEEECH">Creating Cubes</a></p>
</li>
<li>
<p><a href="#CHDGIECA">Choosing a Data Maintenance Method</a></p>
</li>
<li>
<p><a href="#BGBBJBDA">Supporting Multiple Languages</a></p>
</li>
<li>
<p><a href="#BGBDFJHF">Defining Measure Folders</a></p>
</li>
<li>
<p><a href="#CHDFFEEE">Using Templates to Re-Create Dimensional Objects</a></p>
</li>
</ul>
<a id="CHDIAADG"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9126"></a>Designing a Dimensional Model for Your Data</h2>
<p><a id="sthref105"></a>Chapter 1 introduced the dimensional objects: Cubes, measures, dimensions, levels, hierarchies, and attributes. In this chapter, you learn how to define them in Oracle Database, but first you should decide upon the dimensional model you want to create. What are your measures? What are your dimensions? How can you distinguish between a dimension and an attribute in your data? You can design a dimensional model using pencil and paper, a database design software package, or any other method that suits you.</p>
<p>If your source data is in a star or snowflake schema, then you have the elements of a dimensional model:</p>
<ul>
<li>
<p>Fact tables correspond to cubes.</p>
</li>
<li>
<p>Data columns in the fact tables correspond to measures.</p>
</li>
<li>
<p>Foreign key constraints in the fact tables identify the dimension tables.</p>
</li>
<li>
<p>Dimension tables identify the dimensions.</p>
</li>
<li>
<p>Primary keys in the dimension tables identify the base-level dimension members.</p>
</li>
<li>
<p>Parent columns in the dimension tables identify the higher level dimension members.</p>
</li>
<li>
<p>Columns in the dimension tables containing descriptions and characteristics of the dimension members identify the attributes.</p>
</li>
</ul>
<p>You can also get insights into the dimensional model by looking at the reports currently being generated from the source data. The reports identify the levels of aggregation that interest the report consumers and the attributes used to qualify the data.</p>
<p>While investigating your source data, you may decide to create relational views that more closely match the dimensional model that you plan to create.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<p><a href="overview.htm#i1017034">"Overview of the Dimensional Data Model"</a> for an introduction to dimensional objects</p>
<p><a href="global.htm#BABHHEJD">Appendix A, "Designing a Dimensional Model"</a> for a case study of developing a dimensional model for the Global analytic workspace</p>
</div>
</div>
<!-- class="sect1" -->
<a id="i76953"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9127"></a><a id="ABC2586641"></a>Introduction to Analytic Workspace Manager</h2>
<p>Analytic Workspace Manager is the primary tool for creating, developing, and managing dimensional objects in Oracle Database. Your goal in using Analytic Workspace Manager is to create a dimensional data store that supports business analysis. This data store can stand alone or store summary data as part of a relational data warehouse.</p>
<p>Populating dimensional objects involves a physical transformation of the data. The first step in that transformation is defining the cubes, measures, dimensions, levels, hierarchies, and attributes. Afterward, you can map these dimensional objects to their relational data sources. The data loading process transforms the data from a relational format into a dimensional format.</p>
<p><a id="sthref106"></a>Using Analytic Workspace Manager, you can:</p>
<ul>
<li>
<p>Develop a dimensional model of your data.</p>
</li>
<li>
<p>Instantiate that model as dimensional objects.</p>
</li>
<li>
<p>Load data from relational tables into those objects.</p>
</li>
<li>
<p>Define information-rich calculations.</p>
</li>
<li>
<p>Create materialized views that can be used by the database refresh system.</p>
</li>
<li>
<p>Automatically generate relational views of the dimensional objects.</p>
</li>
</ul>
<p><a id="sthref107"></a>You can load data from these sources in the database:</p>
<ul>
<li>
<p>Tables</p>
</li>
<li>
<p>Views</p>
</li>
<li>
<p>Synonyms</p>
</li>
</ul>
<p>You must have <code>SELECT</code> privileges on the relational data sources so you can load the data into the dimensions and cubes. This chapter assumes that you have a star, snowflake, or other relational schema that supports dimensional objects.</p>
<p><a href="#CHDCJBBB">Figure 3-1</a> shows the main window of Analytic Workspace Manager. It contains menus, a toolbar, a navigation tree, and property sheets. When you select an object in the navigation tree, the property sheet to the right provides detailed information about that object. When you right-click an object, you get a choice of menu items with appropriate actions for that object.</p>
<p>Analytic Workspace Manager has a full online Help system, which includes context-sensitive Help.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDCJBBB"></a>Figure 3-1 Analytic Workspace Manager Main Window</p>
<img width="834" height="526" src="img/awm_mod.gif" alt="Main window in Analytic Workspace Manager" title="Main window in Analytic Workspace Manager" /><br />
<a id="sthref108" href="img_text/awm_mod.htm">Description of "Figure 3-1 Analytic Workspace Manager Main Window"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="i77011"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9128"></a>Creating a Dimensional Data Store Using Analytic Workspace Manager</h2>
<p>An analytic workspace is a container for storing related cubes. You create dimensions, cubes, and other dimensional objects within an analytic workspace.</p>
<p class="orderedlisttitle"><a id="sthref110"></a>To create an analytic workspace:&nbsp;</p>
<ol>
<li>
<p>Open Analytic Workspace Manager and connect to your database instance as the user defined for this purpose.</p>
</li>
<li>
<p>Create an analytic workspace in the database:</p>
<ol>
<li>
<p>In the navigation tree, expand the folders until you see the schema where you want to create the analytic workspace.</p>
</li>
<li>
<p>Right-click Analytic Workspaces, then choose <span class="bold">Create Analytic Workspace</span>.</p>
</li>
<li>
<p>Complete the Create Analytic Workspace dialog box, then choose <span class="bold">Create</span>.</p>
<p>The analytic workspace appears in the Analytic Workspaces folder for the schema.</p>
</li>
</ol>
</li>
<li>
<p>Define the dimensions for the data.</p>
<p>See <a href="#BGBDJAAG">"Creating Dimensions"</a>.</p>
</li>
<li>
<p>Define the cubes for the data.</p>
<p>See <a href="#BGBEEECH">"Creating Cubes"</a>.</p>
</li>
<li>
<p>Load data into the cubes and dimensions.</p>
<p>See <a href="#CHDGEFDC">"Loading Data Into Cubes"</a></p>
</li>
</ol>
<p>When you have finished, you have an analytic workspace populated with the detail data fetched from relational tables or views. You may also have summarized data and calculated measures.</p>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref111"></a>
<h3 class="sect2"><a id="OLAUG9130"></a>Adding Functionality to Dimensional Objects</h3>
<p><a id="sthref112"></a>In addition to the basic steps, you can add functionality to the cubes in these ways:</p>
<ul>
<li>
<p>Develop custom cube scripts to customize the builds.</p>
<p>See <a href="#BGBCBCBH">"Creating and Executing Custom Cube Scripts"</a>.</p>
</li>
<li>
<p>Generate materialized views that support automatic refresh and query rewrite.</p>
<p>See <a href="#CHDHBGGB">"Adding Materialized View Capability to a Cube"</a>.</p>
</li>
<li>
<p>Support multiple languages by adding translations of metadata and attribute values.</p>
<p>See <a href="#BGBBJBDA">"Supporting Multiple Languages"</a>.</p>
</li>
<li>
<p>Define measure folders to simplify access for end users.</p>
<p>See <a href="#BGBDFJHF">"Defining Measure Folders"</a>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref113"></a>
<h3 class="sect2">When Does Analytic Workspace Manager Save Changes?</h3>
<p><a id="sthref114"></a><a id="sthref115"></a>Analytic Workspace Manager saves changes automatically that you make to the analytic workspace. You do not explicitly save your changes.</p>
<p>Saves occur when you take an action such as these:</p>
<ul>
<li>
<p>Click <span class="bold">OK</span> or the equivalent button in a dialog box.</p>
<p>For example, when you click <span class="bold">Create</span> in the Create Dimension dialog box, the dimension is committed to the database.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span> in a property sheet.</p>
<p>For example, when you change the labels on the General property page for an object, the change takes effect when you click <span class="bold">Apply</span>.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBDJAAG"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9132"></a>Creating Dimensions</h2>
<p><a id="sthref116"></a><a id="sthref117"></a><a id="sthref118"></a>Dimensions are lists of unique values that identify and categorize data. They form the edges of a cube, and thus of the measures within the cube. In a report, the dimension values (or their descriptive attributes) provide labels for the rows and columns.</p>
<p>You can define dimensions that have any of these common forms:</p>
<ul>
<li>
<p>Level-based dimensions that use parent-child relationships to group members into levels. Most dimensions are level-based.</p>
</li>
<li>
<p>Value-based dimensions that have parent-child relationships among their members, but these relationships do not form meaningful levels.</p>
</li>
<li>
<p>List or flat dimensions that have no levels or hierarchies.</p>
</li>
</ul>
<p class="subhead2"><a id="sthref119"></a>Dimension Members Must Be Unique</p>
<p>Every dimension member must be a unique value. Depending on your data, you can create a dimension that uses either natural keys or surrogate keys from the relational sources for its members. If you have any doubt that the values are unique across all levels, then keep the default choice of surrogate keys.</p>
<ul>
<li>
<p><a id="sthref120"></a><span class="bold">Source keys</span> are read from the relational sources without modification. To use the same exact keys as the source data, the values must be unique across levels. Because each level may be mapped to a different relational column, this uniqueness may not be enforced in the source data. For example, a dimension table might have a Day column with values of <code>1</code> to <code>366</code> and a Week column with values of <code>1</code> to <code>52</code>. Unless you take steps to assure uniqueness, the values from the Week column overwrite the first 52 Day values.</p>
</li>
<li>
<p><a id="sthref121"></a><span class="bold">Surrogate keys</span> ensure uniqueness by adding a level prefix to the members while loading them into the analytic workspace. For the previous example, surrogate keys create two dimension members named <code>DAY_1</code> and <code>WEEK_1</code>, instead of a single member named <code>1</code>. A dimension that has surrogate keys must be defined with at least one level-based hierarchy.</p>
</li>
</ul>
<p>Analytic Workspace Manager creates surrogate keys unless you specify otherwise.</p>
<p class="subhead2"><a id="sthref122"></a>Time Dimensions Have Special Requirements</p>
<p><a id="sthref123"></a>You can define dimensions as either User or Time dimensions. Business analysis is performed on historical data, so fully defined time periods are vital. A time dimension table must have columns for period end dates and time span. These required attributes support comparisons with earlier or later time periods. If this information is not available, then you can define Time as a User dimension, but it cannot support time-based analysis.</p>
<p>You must define a Time dimension with at least one level to support time-based analysis, such as a custom measure that calculates the difference from the prior period.</p>
<p class="orderedlisttitle"><a id="sthref125"></a>To create a dimension:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the analytic workspace.</p>
</li>
<li>
<p>Right-click <span class="bold">Dimensions</span>, then choose <span class="bold">Create Dimension</span>.</p>
<p>The Create Dimension dialog box is displayed.</p>
</li>
<li>
<p>Complete the General tab.</p>
</li>
<li>
<p>If the keys in the source table are unique across levels, you can change the default setting on the Implementation Details tab.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The dimension appears as a subfolder under Dimensions.</p>
</li>
</ol>
<p><a href="#CHDCCFEG">Figure 3-2</a> shows the creation of the Product dimension.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDCCFEG"></a>Figure 3-2 Creation of the Product Dimension</p>
<img width="436" height="290" src="img/proddim_gen.gif" alt="Create Dimension dialog box" title="Create Dimension dialog box" /><br />
<a id="sthref126" href="img_text/proddim_gen.htm">Description of "Figure 3-2 Creation of the Product Dimension"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref127"></a>
<h3 class="sect2"><a id="OLAUG9133"></a>Creating Levels</h3>
<p><a id="sthref128"></a>For business analysis, data is typically summarized by level. For example, your database may contain daily snapshots of a transactional database. Days are the base level. You might summarize this data at the weekly, quarterly, and yearly levels.</p>
<p>Levels have parent-child or one-to-many relationships, which form a <a id="sthref129"></a><a id="sthref130"></a><span class="bold">level-based hierarchy</span>. For example, each week summarizes seven days, each quarter summarizes 13 weeks, and each year summarizes four quarters. This hierarchical structure enables analysts to detect trends at the higher levels, then drill down to the lower levels to identify factors that contributed to a trend.</p>
<p>For each level that you define, you must identify a data source for dimension members at that level. Members at all levels are stored in the same dimension. In the previous example, the Time dimension contains members for weeks, quarters, and years.</p>
<p class="orderedlisttitle">To create a level:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the dimension.</p>
</li>
<li>
<p>Right-click <span class="bold">Levels</span>, then choose <span class="bold">Create Level</span>.</p>
<p>The Create Level dialog box is displayed.</p>
</li>
<li>
<p>Complete the General tab of the Create Level dialog box.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The level appears as an item in the Levels folder.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
Alternatively, you can create levels in the Create Dimension dialog box Levels tab.</div>
<p><a href="#CHDHEHFE">Figure 3-3</a> shows the creation of the Class level for the Product dimension.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDHEHFE"></a>Figure 3-3 Creation of the Class Level</p>
<img width="270" height="220" src="img/classlevel_gen.gif" alt="Create Level dialog box" title="Create Level dialog box" /><br />
<a id="sthref132" href="img_text/classlevel_gen.htm">Description of "Figure 3-3 Creation of the Class Level"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref133"></a>
<h3 class="sect2"><a id="OLAUG9134"></a>Creating Hierarchies</h3>
<p><a id="sthref134"></a>Dimensions can have one or more hierarchies. They can be level based or value based.</p>
<p class="subhead2"><a id="sthref135"></a>Level-Based Hierarchies</p>
<p>Most hierarchies are level based. Analytic Workspace Manager supports these common types of level-based hierarchies:</p>
<ul>
<li>
<p><a id="sthref136"></a><a id="sthref137"></a><a id="sthref138"></a><a id="sthref139"></a><span class="bold">Normal hierarchies</span> consist of one or more levels of aggregation. Members roll up into the next higher level in a many-to-one relationship, and these members roll up into the next higher level, and so forth to the top level.</p>
</li>
<li>
<p><span class="bold">Ragged hierarchies</span> contain at least one member with a different base, creating a "ragged" base level for the hierarchy. Ragged hierarchies are not supported for cube materialized views.</p>
</li>
<li>
<p><span class="bold">Skip-level hierarchies</span> contain at least one member whose parents are multiple levels above it, creating a hole in the hierarchy. An example of a skip-level hierarchy is City-State-Country, where at least one city has a country as its parent (for example, Washington D.C. in the United States).</p>
<p>In relational source tables, a skip-level hierarchy may contain nulls in the level columns. Skip-level hierarchies are not supported for cube materialized views.</p>
</li>
</ul>
<p>Multiple hierarchies for a dimension typically share the base-level dimension members and then branch into separate hierarchies. They can share the top level if they use all the same base members and use the same aggregation operators. Otherwise, they need different top levels to store different aggregate values. For example, a Customer dimension may have multiple hierarchies that include all base-level customers and are summed to a shared top level. However, a Time dimension with calendar and fiscal hierarchies must aggregate to separate Calendar Year (January to December) and Fiscal Year (July to June) levels, because they use different selections of base-level members.</p>
<p class="subhead2"><a id="sthref140"></a>Value-Based Hierarchies</p>
<p><a id="sthref141"></a>You may also have dimensions with parent-child relations that do not support levels. For example, an employee dimension might have a parent-child relation that identifies each employee's supervisor. However, levels that group first-, second-, and third-level supervisors and so forth may not be meaningful for analysis. Similarly, you might have a line-item dimension with members that cannot be grouped into meaningful levels. In this situation, you can create a <span class="bold">value-based hierarchy</span> defined by the parent-child relations, which does not have named levels. You can create value-based hierarchies only for dimensions that use the source keys, because surrogate keys are formed with the names of the levels.</p>
<p class="orderedlisttitle"><a id="sthref143"></a>To create a hierarchy:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the dimension.</p>
</li>
<li>
<p>Right-click <span class="bold">Hierarchies</span>, then choose <span class="bold">Create Hierarchy</span>.</p>
<p>The Create Hierarchy dialog box is displayed.</p>
</li>
<li>
<p>Complete the General tab of the Create Hierarchy dialog box.</p>
<p>Click <span class="bold">Help</span> for information about these choices.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The hierarchy appears as an item in the Hierarchies folder.</p>
</li>
</ol>
<p><a href="#CHDBCIDJ">Figure 3-4</a> shows the creation of the Primary hierarchy for the Product dimension.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDBCIDJ"></a>Figure 3-4 Creation of the Product Primary Hierarchy</p>
<img width="620" height="478" src="img/prodhier_gen.gif" alt="Create Hierarchy dialog box" title="Create Hierarchy dialog box" /><br />
<a id="sthref144" href="img_text/prodhier_gen.htm">Description of "Figure 3-4 Creation of the Product Primary Hierarchy"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref145"></a>
<h3 class="sect2"><a id="OLAUG9135"></a>Creating Attributes</h3>
<p><a id="sthref146"></a>Attributes provide information about the individual members of a dimension. They are used for labeling crosstabular and graphical data displays, selecting data, organizing dimension members, and so forth.</p>
<div class="sect3"><a id="sthref147"></a>
<h4 class="sect3"><a id="OLAUG9136"></a>Automatically Defined Attributes</h4>
<p>Analytic Workspace Manager creates some attributes automatically when creating a dimension. These attributes have a unique type, such as "Long Description."</p>
<p>All dimensions can be created with long and short description attributes. If your source tables include long and short descriptions, then you can map the attributes to the appropriate columns. However, if your source tables include only one set of descriptions, then you can create and map just one description attribute. If you map both the long and short description attributes to the same column, the data is loaded twice.</p>
<p><a id="sthref148"></a><a id="sthref149"></a>Time dimensions are created with time-span and end-date attributes. This information must be provided for all Time dimension members.</p>
</div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref150"></a>
<h4 class="sect3"><a id="OLAUG9137"></a>User-Defined Attributes</h4>
<p>You can create additional "User" attributes that provide supplementary information about the dimension members, such as the addresses and telephone numbers of customers, or the color and sizes of products.</p>
<p class="orderedlisttitle"><a id="sthref152"></a>To create an attribute:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the dimension.</p>
</li>
<li>
<p>Right-click <span class="bold">Attributes</span>, then choose <span class="bold">Create Attribute</span>.</p>
<p>The Create Attribute dialog box is displayed.</p>
</li>
<li>
<p>Complete the General tab of the Create Attribute dialog box.</p>
<p>Some attributes apply to all dimension members, and others apply to only one level. Your selection in the Apply Attributes To box controls the mapping of the attribute to one column or to multiple columns.</p>
<p>Click <span class="bold">Help</span> for information about these choices.</p>
</li>
<li>
<p>To change the data type from the default choice of <code>VARCHAR2</code>, complete the Implementation Details tab.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The attribute appears as an item in the Attributes folder.</p>
</li>
</ol>
<p><a href="#CHDDDHFF">Figure 3-5</a> shows the creation of the Marketing Manager attribute for the Product dimension. Notice that this attribute applies only to the Item level.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDDDHFF"></a>Figure 3-5 Creation of the Product Marketing Manager Attribute</p>
<img width="486" height="460" src="img/prodattr_gen.gif" alt="Create Attribute dialog box" title="Create Attribute dialog box" /><br />
<a id="sthref153" href="img_text/prodattr_gen.htm">Description of "Figure 3-5 Creation of the Product Marketing Manager Attribute"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" -->
<a id="CJADBCJE"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><a id="OLAUG9138"></a>Unique Key Attributes</h4>
<p>Materialized views require that each dimension of the cube have unique key attributes. These attributes store the original key values of the source dimensions, which may have been changed when creating the embedded total dimensions of the cubes.</p>
<p><a id="sthref154"></a>Analytic Workspace Manager automatically creates unique key attributes for the dimensions of a cube materialized view. You do not create or manage them manually.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDFEFHD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9139"></a>Mapping Dimensions</h3>
<p><a id="sthref155"></a><a id="sthref156"></a><a id="sthref157"></a>Mapping identifies the relational data source for each dimensional object. After mapping a dimension to a column of a relational table or view, you can load the data. You can create, map, and load each dimension individually, or perform each step for all dimensions before proceeding to the next step.</p>
<p class="subhead2"><a id="sthref158"></a>SQL Data Types for Dimensions</p>
<p>You can map dimensions and levels to columns having these SQL data types, which are converted to text during a data load:</p>
<ul>
<li>
<p>VARCHAR2</p>
</li>
<li>
<p>NVARCHAR2</p>
</li>
<li>
<p>NUMBER</p>
</li>
<li>
<p>INTEGER</p>
</li>
<li>
<p>DECIMAL</p>
</li>
<li>
<p>CHAR</p>
</li>
<li>
<p>NCHAR</p>
</li>
<li>
<p>DATE</p>
</li>
<li>
<p>TIMESTAMP</p>
</li>
<li>
<p>TIMESTAMP WITH TIMEZONE</p>
</li>
<li>
<p>TIMESTAMP WITH LOCAL TIMEZONE</p>
</li>
</ul>
<p>You can map attributes to the same data types as cubes and measures, as described in <a href="#CIHFEABI">"Data Types"</a>.</p>
<div class="sect3"><a id="sthref159"></a>
<h4 class="sect3"><a id="OLAUG9140"></a>Dimension Mapping Window</h4>
<p>The mapping window has a tabular view and a graphical view. You can switch between the two views, using the icons at the top of the canvas.</p>
<ul>
<li>
<p><span class="bold">Tabular view</span>: Drag-and-drop the names of individual columns from the schema navigation tree to the rows for the dimensional objects.</p>
</li>
<li>
<p><span class="bold">Graphical view</span>: Drag-and-drop icons, which represent tables and views, from the schema navigation tree onto the mapping canvas. Then draw lines from the columns to the dimensional objects.</p>
</li>
</ul>
<p>You can use the OLAP expression syntax when mapping dimensions in the tabular view. This capability enables you to create the top level of a dimension without having a source column in the dimension table.</p>
<p>You can also map attributes from different tables. OLAP automatically joins the tables on columns with the same name.</p>
<p>Click <span class="bold">Help</span> on the Mapping window for more information.</p>
<p class="orderedlisttitle">To map a dimension: &nbsp;</p>
<ol>
<li>
<p>In the navigation tree, expand the dimension folder and click <span class="bold">Mappings</span>.</p>
<p>The Mapping window contains a schema navigation tree on the left and a mapping table for the dimension with rows for the levels and their attributes. This is the tabular view.</p>
</li>
<li>
<p>For normalized dimension tables, select <span class="bold">Snowflake Schema</span> for the Type of Dimension Table.</p>
</li>
<li>
<p>To enlarge the Mapping Window, drag the divider to the left.</p>
</li>
<li>
<p>In the schema tree, expand the tables, views, or synonyms that contain the dimension members and attributes.</p>
</li>
<li>
<p>Drag-and-drop the source columns onto the appropriate cells in the mapping table for the dimension.</p>
</li>
<li>
<p>After you have mapped all levels and attributes, click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Drag the divider back to the right to reveal the navigation tree.</p>
</li>
</ol>
<p><a href="#BGBCFAJF">Figure 3-6</a> shows the Product dimension mapped in the tabular view. The arrow highlights how the <code>PRODUCT_DIM.ITEM_BUYER</code> column maps to the <code>PRODUCT.ITEM.BUYER</code> attribute.</p>
<div class="figure">
<p class="titleinfigure"><a id="BGBCFAJF"></a>Figure 3-6 Product Dimension Mapped in Tabular View</p>
<img width="738" height="424" src="img/maptbl_dim.gif" alt="Dimension mapping in tabular view" title="Dimension mapping in tabular view" /><br />
<a id="sthref161" href="img_text/maptbl_dim.htm">Description of "Figure 3-6 Product Dimension Mapped in Tabular View"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="orderedlisttitle">To map a top level without a relational source: &nbsp;</p>
<ol>
<li>
<p>Create the dimension and its levels (including the top level), hierarchies, and attributes.</p>
</li>
<li>
<p>Map the dimension as described previously for all but the top level.</p>
</li>
<li>
<p>Enter an expression in the OLAP expression syntax for the top level.</p>
</li>
</ol>
<div class="example">
<p class="titleinexample"><a id="sthref163"></a>Example 3-1 Creating a Top Level for the Global Time Dimension</p>
<p>This example shows a top level for all years in the Time dimension. The mapping expressions used for a Total level (that is, all years) in the Time dimension might look like this:</p>
<pre>
Member: 'TOTAL' 
LONG_DESCRIPTION: 'Total'
SHORT_DESCRIPTION: 'Total' 
END_DATE: TO_DATE('31-Dec-2007', 'dd-mon-yyyy')
TIME_SPAN: 3646 
</pre>
<p><code>Member</code>, <code>LONG_DESCRIPTION</code>, and <code>SHORT_DESCRIPTION</code> are set to literal strings, <code>END_DATE</code> uses the <code>TO_DATE</code> function, and <code>TIME_SPAN</code> is set to a number.</p>
</div>
<!-- class="example" --></div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref164"></a>
<h4 class="sect3"><a id="OLAUG9141"></a>Source Data Query</h4>
<p>You can view the contents of a particular source column without leaving the mapping window. The information is readily available, eliminating the guesswork when the names are not adequately descriptive.</p>
<p class="orderedlisttitle">To see the values in a particular source table or view:&nbsp;</p>
<ol>
<li>
<p>Right-click the source object in either the schema tree or the graphical view of the mapping canvas.</p>
</li>
<li>
<p>Choose <span class="bold">View Data</span> from the shortcut menu.</p>
</li>
</ol>
<p><a href="#CJABACEG">Figure 3-7</a> shows the data stored in the <code>PRODUCT_DIM</code> table.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJABACEG"></a>Figure 3-7 Data in the PRODUCT_DIM Table</p>
<img width="642" height="470" src="img/prod_data.gif" alt="GLOBAL.PRODUCT_DIM Data" title="GLOBAL.PRODUCT_DIM Data" /><br />
<a id="sthref166" href="img_text/prod_data.htm">Description of "Figure 3-7 Data in the PRODUCT_DIM Table"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDJFFEE"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9142"></a>Loading Data Into Dimensions</h3>
<p>Analytic Workspace Manager provides several ways to load data into dimensional objects. The quickest way when developing a data model is using the default choices of the Maintenance Wizard. Other methods may be more appropriate in a production environment than the one shown here. They are discussed in <a href="#CHDGIECA">"Choosing a Data Maintenance Method"</a>.</p>
<p class="orderedlisttitle"><a id="sthref168"></a><a id="sthref169"></a><a id="sthref170"></a>To load data into the dimensions:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, right-click the Dimensions folder or the folder for a particular dimension.</p>
</li>
<li>
<p>Choose <span class="bold">Maintain Dimension</span>.</p>
<p>The Maintenance Wizard opens on the Select Objects page.</p>
</li>
<li>
<p>Select one or more dimensions from Available Target Objects and use the shuttle buttons to move them to Selected Target Objects.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span> to load the dimension values immediately.</p>
<p>The additional pages of the wizard enable you to create a SQL script or submit the load to the Oracle job queue. To use these options, click <span class="bold">Next</span> instead.</p>
</li>
<li>
<p>Review the <a id="sthref171"></a>build log, which appears when the build is complete. If the log shows that errors occurred, then fix them and run the Maintenance Wizard again.</p>
<p>Errors are typically caused by problems in the mapping. Check for incomplete mappings or changes to the source objects.</p>
</li>
</ol>
<p><a href="#CHDJBBDF">Figure 3-8</a> shows the first page of the Maintenance Wizard. Only the Product dimension has been selected for maintenance. All the Product dimension members and attributes are fetched from the mapped relational sources.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDJBBDF"></a>Figure 3-8 Loading Dimension Values into the Product Dimension</p>
<img width="564" height="287" src="img/maintwiz_obj.gif" alt="Maintenance Wizard: Select Objects page" title="Maintenance Wizard: Select Objects page" /><br />
<a id="sthref172" href="img_text/maintwiz_obj.htm">Description of "Figure 3-8 Loading Dimension Values into the Product Dimension"</a><br />
<br /></div>
<!-- class="figure" -->
<p><a href="#CJAEJHJH">Figure 3-9</a> shows the Maintenance log for a dimension displayed by Analytic Workspace Manager. It refreshes throughout the build to provide you with the most up-to-date information.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAEJHJH"></a>Figure 3-9 Maintenance Log for the Product Dimension</p>
<img width="819" height="623" src="img/dim_log.gif" alt="Screen capture of Maintenance Log" title="Screen capture of Maintenance Log" /><br />
<a id="sthref173" href="img_text/dim_log.htm">Description of "Figure 3-9 Maintenance Log for the Product Dimension"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref174"></a>
<h3 class="sect2"><a id="OLAUG9144"></a>Displaying the Dimension View</h3>
<p>The Maintenance Wizard automatically generates relational views of dimensions and hierarchies. <a href="query.htm#BGBFGBIB">Chapter 4</a> describes these views and explains how to query them.</p>
<p><a href="#CJAJIABH">Figure 3-10</a> shows the description of the relational view of the Product Primary hierarchy. You can view the data on the Data tab.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAJIABH"></a>Figure 3-10 Product Primary Hierarchy View</p>
<img width="589" height="518" src="img/prod_hierview.gif" alt="Product Primary Hierarchy View" title="Product Primary Hierarchy View" /><br />
<a id="sthref175" href="img_text/prod_hierview.htm">Description of "Figure 3-10 Product Primary Hierarchy View"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref176"></a>
<h3 class="sect2"><a id="OLAUG9143"></a>Displaying the Default Hierarchy</h3>
<p><a id="sthref177"></a><a id="sthref178"></a>After loading a dimension, you can display the default hierarchy.</p>
<p class="orderedlisttitle">To display the default hierarchy:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, right-click the name of a dimension.</p>
</li>
<li>
<p>Choose <span class="bold">View Data</span>.</p>
</li>
</ol>
<p><a href="#CHDDJIAD">Figure 3-11</a> shows the Primary hierarchy of the Product dimension.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDDJIAD"></a>Figure 3-11 Displaying the Product Primary Hierarchy</p>
<img width="330" height="260" src="img/product_dim.gif" alt="Dimension viewer" title="Dimension viewer" /><br />
<a id="sthref180" href="img_text/product_dim.htm">Description of "Figure 3-11 Displaying the Product Primary Hierarchy"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBEEECH"></a>
<div class="sect1">
<h2 class="sect1"><a id="OLAUG9145"></a>Creating Cubes</h2>
<p><a id="sthref181"></a>Cubes are informational objects that identify measures with the exact same dimensions and thus are candidates for being processed together at all stages: data loading, aggregation, storage, and querying.</p>
<p><a id="sthref182"></a>Cubes define the shape of your business measures. They are defined by a set of ordered dimensions. The dimensions form the edges of a cube, and the measures are the cells in the body of the cube.</p>
<p class="orderedlisttitle">To create a cube:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the analytic workspace.</p>
</li>
<li>
<p>Right-click <span class="bold">Cubes</span>, then choose <span class="bold">Create Cube</span>.</p>
<p>The Create Cube dialog box is displayed.</p>
</li>
<li>
<p>On the General tab, enter a name for the cube and select its dimensions.</p>
</li>
<li>
<p>On the Aggregation tab, click the Rules subtab and select an aggregation method for each dimension. If the cube uses multiple methods, then you may need to specify the order in which the dimensions are aggregated to get the desired results.</p>
<p>You can ignore the bottom of the tab, unless you want to exclude a hierarchy from the aggregation.</p>
</li>
<li>
<p>If you run the advisors after mapping the cube, Oracle OLAP can determine the best partitioning and storage options. Alternatively, to define these options yourself, complete the Partitioning and Storage tabs before creating the cube.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>. The cube appears as a subfolder under <span class="bold">Cubes</span>.</p>
</li>
</ol>
<p><a id="sthref184"></a><a href="#CHDJJDIC">Figure 3-12</a> shows the Rules subtab for the Units cube with the list of operators displayed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="aggregate.htm#CIAIIDBF">"Aggregation Operators"</a> for descriptions of the aggregation operators.</div>
<div class="figure">
<p class="titleinfigure"><a id="CHDJJDIC"></a>Figure 3-12 Selecting an Aggregation Operator</p>
<img width="770" height="349" src="img/cube_rules.gif" alt="Create Cube dialog box Aggregation tab" title="Create Cube dialog box Aggregation tab" /><br />
<a id="sthref185" href="img_text/cube_rules.htm">Description of "Figure 3-12 Selecting an Aggregation Operator"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref186"></a>
<h3 class="sect2"><a id="OLAUG9146"></a>Creating Measures</h3>
<p><a id="sthref187"></a>Measures store the facts collected about your business. Each measure belongs to a particular cube, and thus shares particular characteristics with other measures in the cube, such as the same dimensions. The default characteristics of a measure are inherited from the cube.</p>
<p class="orderedlisttitle">To create a measure:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the cube that has the dimensions of the measure.</p>
</li>
<li>
<p>Right-click <span class="bold">Measures</span>, then choose <span class="bold">Create Measure</span>.</p>
<p>The Create Measure dialog box is displayed.</p>
</li>
<li>
<p>On the General tab, enter a name for the measure.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The measure appears in the navigation tree as an item in the Measures folder.</p>
</li>
</ol>
<p><a href="#CHDCDCEH">Figure 3-13</a> shows the General tab of the Create Measure dialog box.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDCDCEH"></a>Figure 3-13 Creating the Sales Measure</p>
<img width="329" height="226" src="img/meas_gen.gif" alt="Create Measure dialog box" title="Create Measure dialog box" /><br />
<a id="sthref189" href="img_text/meas_gen.htm">Description of "Figure 3-13 Creating the Sales Measure"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref190"></a>
<h3 class="sect2"><a id="OLAUG9147"></a>Mapping Cubes</h3>
<p>You use the same interface to map cubes as you did to map dimensions, as described in <a href="#CHDFEFHD">"Mapping Dimensions"</a>. You can map a cube directly to a single fact table, or you can create more complex mappings using the OLAP expression syntax, which supports expressions, join conditions, and filters.</p>
<p>Although the dimension columns in a fact table typically contain only key values at the detail level, you can also map cubes to summary tables that contain the values from multiple levels. For example, a Time column might contain days, months, quarters, and years; a Geography column might contain cities, states, and countries. When a build rolls up the data in the cube from the detail level, the calculated values overwrite the loaded summary values, thereby correcting any inconsistencies.</p>
<p class="subhead2"><a id="CIHFEABI"></a>Data Types</p>
<p>You can map cubes and measures to columns having these SQL data types:</p>
<ul>
<li>
<p>NUMBER</p>
</li>
<li>
<p>INTEGER</p>
</li>
<li>
<p>DECIMAL</p>
</li>
<li>
<p>BINARY_FLOAT</p>
</li>
<li>
<p>BINARY_DOUBLE</p>
</li>
<li>
<p>VARCHAR2</p>
</li>
<li>
<p>NVARCHAR2</p>
</li>
<li>
<p>CHAR</p>
</li>
<li>
<p>NCHAR</p>
</li>
<li>
<p>DATE</p>
</li>
<li>
<p>TIMESTAMP</p>
</li>
<li>
<p>TIMESTAMP WITH TIMEZONE</p>
</li>
<li>
<p>TIMESTAMP WITH LOCAL TIMEZONE</p>
</li>
<li>
<p>INTERVAL YEAR TO MONTH</p>
</li>
<li>
<p>INTERVAL DAY TO SECOND</p>
</li>
</ul>
<p class="subhead2"><a id="sthref191"></a>Expressions</p>
<p>You can use the OLAP expression syntax when mapping cubes in the tabular view. This capability enables you to perform tasks like these as part of data maintenance, without any intermediate staging of the data:</p>
<ul>
<li>
<p>Perform calculations on the relational data using any combination of functions and operators available in the OLAP expression syntax.</p>
</li>
<li>
<p>Create measures that are more aggregate than their relational sources. For example, suppose the Time dimension has columns for Day, Month, Quarter, and Year, and the fact table for Sales is related to Time by the Day foreign key column. In a basic mapping, you would store data in the cube at the Day level. However, you could aggregate it to the Month level during the data refresh. Using a technique called one-up mapping, you would map the cube to the Month column for Time, and specify a join between the dimension table and the fact table on the Day columns.</p>
</li>
</ul>
<p class="subhead2"><a id="sthref192"></a>Join Conditions</p>
<p>In the tabular view, the mapping for each dimension includes a join condition. In the basic case where you are mapping the foreign keys in a fact table to the primary keys in the related dimension tables, you can leave the join condition blank. Analytic Workspace Manager derives this information from the relational source tables when you save the mapping.</p>
<p>For example, Analytic Workspace Manager provides this join condition for the <code>TIME</code> dimension in the <code>UNITS_CUBE</code> mapping:</p>
<pre>
GLOBAL.TIME_DIM.MONTH_ID = GLOBAL.UNITS_FACT.MONTH_ID
</pre>
<p class="subhead2"><a id="sthref193"></a>Filters</p>
<p>A filter applies a <code>WHERE</code> clause to the query that loads data from the relational source into the cube. You can use a filter to limit the rows to those matching a certain condition. This filter restricts the data to the year 2007:</p>
<pre>
GLOBAL.UNITS_FACT.MONTH_ID LIKE '2007%'
</pre>
<p>You can also use a filter to join two or more tables containing the measures. This filter joins the <code>UNITS_FACT</code> and <code>PRICE_FACT</code> tables in the Global schema on the Time (<code>MONTH_ID</code>) and Product (<code>ITEM_ID</code>) dimensions:</p>
<pre>
GLOBAL.PRICE_FACT.MONTH_ID=GLOBAL.UNITS_FACT.MONTH_ID AND GLOBAL.PRICE_FACT.ITEM_ID=GLOBAL.UNITS_FACT.ITEM_ID 
</pre>
<p class="orderedlisttitle"><a id="sthref195"></a>To map a cube:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, expand the cube folder and click <span class="bold">Mappings</span>.</p>
<p>The Mapping window contains a schema navigation tree on the left and a mapping table for the cube and its dimensions. This is the tabular view.</p>
</li>
<li>
<p>To enlarge the Mapping window, drag the divider to the left.</p>
</li>
<li>
<p>In the schema tree, expand the tables, views, or synonyms that contain the data for the measures.</p>
</li>
<li>
<p>Drag-and-drop the source columns onto the appropriate cells in the mapping table for the cube.</p>
</li>
<li>
<p>After you have mapped all dimensions and measures, click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Drag the divider back to the right to reduce the size of the Mapping window.</p>
</li>
</ol>
<p><a href="#BGBEHADB">Figure 3-14</a> shows the mapping canvas with the Units cube mapped to columns in the <code>UNITS_FACT</code> table. After you save the mappings, Analytic Workspace Manager provides the join conditions for base-level mappings such as the ones shown here.</p>
<div class="figure">
<p class="titleinfigure"><a id="BGBEHADB"></a>Figure 3-14 Units Cube Mapped in the Tabular View</p>
<img width="553" height="490" src="img/map_cube.gif" alt="Cube mapping in graphical view" title="Cube mapping in graphical view" /><br />
<a id="sthref196" href="img_text/map_cube.htm">Description of "Figure 3-14 Units Cube Mapped in the Tabular View"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="orderedlisttitle">To calculate the facts of a measure as they are loaded into a cube:&nbsp;</p>
<ol>
<li>
<p>Create the cube.</p>
</li>
<li>
<p>Map all dimensions and measures to the source tables.</p>
</li>
<li>
<p>Edit the mapping of the measure to include a calculation in the OLAP expression syntax.</p>
<p>For example, you might change <code>UNITS_FACT.SALES</code> to <code>UNITS_FACT.SALES*1.06</code>.</p>
<p>You can use row expressions, column expressions, and conditions, but not nested SQL queries.</p>
</li>
</ol>
<p class="orderedlisttitle">To map a cube above the detail level:&nbsp;</p>
<ol>
<li>
<p>Create the cube dimensions with the desired levels and map them to the source dimension table.</p>
</li>
<li>
<p>Create the cube and its measures.</p>
</li>
<li>
<p>Map each measure to its source column in the fact table.</p>
</li>
<li>
<p>For dimensions that are not being consolidated, map the detail level to its source column in the fact table, the same as you would in a basic cube mapping.</p>
</li>
<li>
<p>For dimensions being consolidated:</p>
<ol>
<li>
<p>Map the dimension to the appropriate column in the dimension table, not to the fact table. In the previous scenario, you would map the Month level of the Time dimension to the Month column of the Time dimension table. For example, you would map Month to time_dim.month_column.</p>
</li>
<li>
<p>Enter a join condition between the fact table and the dimension table at the detail level. For example, <code>time_dim.day_key = fact_tbl.day_foreign_key</code>.</p>
</li>
</ol>
</li>
</ol>
<p class="orderedlisttitle">To map measures to different tables:&nbsp;</p>
<ol>
<li>
<p>Create the cube dimensions with the desired levels and map them to the source dimension table.</p>
</li>
<li>
<p>Create the cube and its measures.</p>
</li>
<li>
<p>Map each measure to its source column in the appropriate table.</p>
</li>
<li>
<p>Map the detail level of the dimensions to its source column in each of the tables. When you drop the additional source column names, you are asked whether to add or replace the existing mapping. Choose <span class="bold">Add</span>.</p>
</li>
</ol>
<div class="example">
<p class="titleinexample"><a id="sthref200"></a>Example 3-2 Mapping Measures to Different Tables</p>
<p>This example maps the two measures of a cube to columns in two different fact tables. The data for <code>UNIT_PRICE</code> is in the <code>UNITS_FACT</code> table, and the data for <code>UNITS_SOLD</code> is in the <code>PRICE_FACT</code> table. The following mapping identifies the dimension keys in both tables for <code>MONTH</code> and <code>PRODUCT</code>.</p>
<pre>
UNIT_PRICE: GLOBAL.PRICE_FACT.UNIT_PRICE
UNITS_SOLD: GLOBAL.UNITS_FACT.UNITS
MONTH:      GLOBAL.PRICE_FACT.MONTH_ID
            GLOBAL.UNITS_FACT.MONTH_ID
PRODUCT:    GLOBAL.PRICE_FACT.ITEM_ID
            GLOBAL.UNITS_FACT.ITEM_ID
</pre>
<p>The next example maps one measure of a cube to columns in two different fact tables. The data for North America is in the <code>AMERICA</code> table, and the data for Europe is in the <code>EMEA</code> table. The following mapping for the <code>UNITS_SOLD</code> measure of <code>UNION_CUBE</code> creates a union of the two fact columns.</p>
<pre>
UNITS_SOLD: GLOBAL.AMERICA.UNITS
            GLOBAL.EMEA.UNITS
TIME:       GLOBAL.AMERICA.MONTH_ID
            GLOBAL.EMEA.MONTH_ID
CHANNEL:    GLOBAL.AMERICA.CHANNEL_ID
            GLOBAL.EMEA.CHANNEL_ID
CUSTOMER:   GLOBAL.AMERICA.SHIP_TO_ID
            GLOBAL.EMEA.SHIP_TO_ID
PRODUCT:    GLOBAL.AMERICA.ITEM_ID
            GLOBAL.EMEA.ITEM_ID
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CJACIHCG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9148"></a>Choosing a Partitioning Strategy</h3>
<p><a id="sthref201"></a>Partitioning is a method of physically storing the measures in a cube. It improves the performance of large measures in the following ways:</p>
<ul>
<li>
<p>Improves scalability by keeping data structures small. Each partition functions like a smaller measure.</p>
</li>
<li>
<p>Keeps the working set of data smaller both for queries and maintenance, since the relevant data is stored together.</p>
</li>
<li>
<p>Enables parallel aggregation during data maintenance. Each partition can be aggregated by a separate process.</p>
</li>
<li>
<p>Simplifies removal of old data from storage. Old partitions can be dropped, and new partitions can be added.</p>
</li>
</ul>
<p>The number of partitions affects the database resources that can be allocated to loading and aggregating the data in a cube. Partitions can be aggregated simultaneously when sufficient resources have been allocated.</p>
<p><a id="sthref202"></a><a id="sthref203"></a>The Cube Partitioning Advisor analyzes the source tables and develops a partitioning strategy. You can accept the recommendations of the Cube Partitioning Advisor, or you can make your own decisions about partitioning.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Run the Cube Partitioning Advisor after mapping the cube to a data source and before loading the data. You can change the partitioning strategy at any time, but you must reload the data afterward.</div>
<div class="sect3"><a id="sthref204"></a>
<h4 class="sect3"><a id="OLAUG9149"></a>Choosing a Dimension for Partitioning</h4>
<p><a id="sthref205"></a>If your partitioning strategy is driven primarily by life-cycle management considerations, then you should partition the cube on the Time dimension. Old time periods can then be dropped as a unit, and new time periods added as a new partition. In <a href="#CJAIEIBA">Figure 3-16</a>, for instance, the Quarter level of the Time dimension is used as the partitioning key. The Cube Partitioning Advisor has a Time option, which recommends a hierarchy and a level in the Time dimension for partitioning.</p>
<p>If life-cycle management is not a primary consideration, then run the Cube Partitioning Advisor and choose the Statistics option. The Cube Partitioning Advisor develops a strategy designed to achieve optimal build and query performance.</p>
<p class="orderedlisttitle">To run the Cube Partitioning Advisor:&nbsp;</p>
<ol>
<li>
<p>Map the cube to its data source, if you have not done so already.</p>
</li>
<li>
<p>On the navigation tree, select the cube to display its property pages.</p>
</li>
<li>
<p>On the Partitioning tab, click <span class="bold">Cube Partitioning Advisor</span>.</p>
</li>
<li>
<p>Choose <span class="bold">Partition Using a Time Dimension</span> or <span class="bold">Partition Using Statistics.</span></p>
<p>Wait while the Cube Partitioning Advisor analyzes the cube. When it is done, the Cube Partitioning Advisor displays its recommendations.</p>
</li>
<li>
<p>Evaluate the recommendations of the Cube Partitioning Advisor.</p>
<ul>
<li>
<p>Select <span class="bold">Accept Partition Advice</span> to accept the recommendations. The cube is re-created with the partitions.</p>
</li>
<li>
<p>Clear the <span class="bold">Accept Partition Advice</span> box to reject the recommendations.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
<p><a href="#CJAIBBDJ">Figure 3-15</a> shows the Cube Partitioning Advisor dialog box.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAIBBDJ"></a>Figure 3-15 Partitioning a Cube</p>
<img width="368" height="298" src="img/part_advisor.gif" alt="Partitioning Advisor dialog box" title="Partitioning Advisor dialog box" /><br />
<a id="sthref207" href="img_text/part_advisor.htm">Description of "Figure 3-15 Partitioning a Cube"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref208"></a>
<h4 class="sect3"><a id="OLAUG9150"></a>Example of a Partitioned Dimension</h4>
<p><a id="sthref209"></a>The Cube Partitioning Advisor might recommend partitioning at the Quarter level of the Calendar hierarchy of the Time dimension. Each Quarter and its descendants are stored in a separate partition. If there are three years of data in the analytic workspace, then partitioning on Quarter produces 12 bottom partitions, in addition to the default top partition. The top partition contains all remaining levels, that is, those above Quarter (such as Year) and those in other hierarchies (such as Fiscal Year or Year-to-Date).</p>
<p><a href="#CJAIEIBA">Figure 3-16</a> illustrates a Time dimension partitioned by Quarter.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAIEIBA"></a>Figure 3-16 Partitioning Time by Quarter</p>
<img width="773" height="399" src="img/partition.gif" alt="Partitioning Diagram" title="Partitioning Diagram" /><br />
<a id="sthref210" href="img_text/partition.htm">Description of "Figure 3-16 Partitioning Time by Quarter"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDGEFDC"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9151"></a>Loading Data Into Cubes</h3>
<p><a id="sthref211"></a><a id="sthref212"></a><a id="sthref213"></a>You load data into cubes using the same methods as dimensions. However, loading and aggregating the data for your business measures typically takes more time to complete. Unless you are developing a dimensional model using a small sample of data, you may prefer to run the build in one or more background processes.</p>
<p class="orderedlisttitle">To load data into a cube:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, right-click the Cubes folder or the name of a particular cube.</p>
</li>
<li>
<p>Choose <span class="bold">Maintain Cube</span>.</p>
<p>The Maintenance Wizard opens on the Select Objects page.</p>
</li>
<li>
<p>Select one or more cubes from Available Target Objects and use the shuttle buttons to move them to Selected Target Objects. If the dimensions are loaded, you can omit them from Selected Target Objects.</p>
</li>
<li>
<p>On the Dimension Data Processing Options page, you can keep the default values.</p>
</li>
<li>
<p>On the Task Processing Options page, you can submit the build to the Oracle job queue or create a SQL script that you can run outside of Analytic Workspace Manager.</p>
<p>You can also select the number of processes to dedicate to this build. The number of parallel processes is limited by the smallest of these numbers: the number of partitions in the cube, the number of processes dedicated to the build, and the setting of the <code>JOB_QUEUE_PROCESSES</code> initialization parameter.</p>
<p>Click <span class="bold">Help</span> for information about these choices.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p><a href="#CHDFIABF">Figure 3-17</a> shows the build submitted immediately to the Oracle job queue.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDFIABF"></a>Figure 3-17 Selecting the Scheduling Options</p>
<img width="566" height="334" src="img/maintwiz_opt.gif" alt="Maintenance wizard task processing options page" title="Maintenance wizard task processing options page" /><br />
<a id="sthref215" href="img_text/maintwiz_opt.htm">Description of "Figure 3-17 Selecting the Scheduling Options"</a><br />
<br /></div>
<!-- class="figure" -->
<p><a href="#CJABCHEA">Example 3-2, "Maintenance Log for the Units Cube"</a> shows the maintenance log displayed by Analytic Workspace Manager for a cube. The log refreshes throughout the build to provide you with the most up-to-date information. The maintenance log is displayed automatically for maintenance tasks that run immediately in the session. When you submit a job to the Oracle job queue, you can track its progress through the various reports in the Maintenance Reports folder: Jobs Scheduled, Jobs Running, and Jobs History. The reports in Jobs Running and Jobs History are the same as the one shown in <a href="#CJABCHEA">Example 3-2</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJABCHEA"></a>Figure 3-18 Maintenance Log for the Units Cube</p>
<img width="807" height="542" src="img/cube_log.gif" alt="Description of Figure 3-18 follows" title="Description of Figure 3-18 follows" /><br />
<a id="sthref216" href="img_text/cube_log.htm">Description of "Figure 3-18 Maintenance Log for the Units Cube"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref217"></a>
<h3 class="sect2"><a id="OLAUG9152"></a>Displaying the Data in a Cube</h3>
<p><a id="sthref218"></a><a id="sthref219"></a>After loading a cube, you can display the data for your business measures in Analytic Workspace Manager.</p>
<p class="orderedlisttitle">To display the data in a cube:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, right-click the cube.</p>
</li>
<li>
<p>Choose <span class="bold">View Data</span> from the shortcut menu.</p>
</li>
</ol>
<p>The Measure Data Viewer displays the selected measure in a crosstab at the top of the page and a graph at the bottom of the page. On the crosstab, you can expand and collapse the dimension hierarchies that label the rows and columns. You can also change the location of a dimension by pivoting or swapping it. If you want, you can use multiple dimensions to label the columns and rows, by nesting one dimension under another.</p>
<p class="itemizedlisttitle">To change the default display:&nbsp;</p>
<ul>
<li>
<p>To pivot, drag a dimension from one location and drop it at another location, usually above or below another dimension.</p>
</li>
<li>
<p>To swap dimensions, drag and drop one dimension directly over another dimension, so they exchange locations.</p>
</li>
</ul>
<p>To make extensive changes to the selection of data, choose <span class="bold">Query Builder</span> from the File menu.</p>
<p><a href="#CJABJDEJ">Figure 3-19</a> shows the Units cube in the Measure Viewer.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJABJDEJ"></a>Figure 3-19 Displaying the Units Cube</p>
<img width="755" height="521" src="img/meas_view.gif" alt="Measure Data Viewer" title="Measure Data Viewer" /><br />
<a id="sthref222" href="img_text/meas_view.htm">Description of "Figure 3-19 Displaying the Units Cube"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref223"></a>
<h3 class="sect2"><a id="OLAUG9153"></a>Displaying the Cube View Descriptions</h3>
<p><a id="sthref224"></a>The Maintenance Wizard automatically generates relational views of a cube. <a href="query.htm#BGBFGBIB">Chapter 4</a> describes these views and explains how to query them.</p>
<p><a href="#CJAGABFC">Figure 3-20</a> shows the description of the relational view of the Units cube.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAGABFC"></a>Figure 3-20 Description of the Units Cube View</p>
<img width="573" height="402" src="img/cube_view.gif" alt="Units Cube View property sheet" title="Units Cube View property sheet" /><br />
<a id="sthref225" href="img_text/cube_view.htm">Description of "Figure 3-20 Description of the Units Cube View"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDGIECA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9154"></a>Choosing a Data Maintenance Method</h2>
<p><a id="sthref226"></a><a id="sthref227"></a>While developing a dimensional model of your data, mapping and loading each object immediately after you create it is a good idea. That way, you can detect and correct any errors that you made to the object definition or the mapping.</p>
<p>However, in a production environment, you want to perform routine maintenance as quickly and easily as possible. For this stage, you can choose among data maintenance methods.</p>
<p>You can refresh all cubes using the Maintenance Wizard. This wizard enables you to refresh a cube immediately, or submit the refresh as a job to the Oracle job queue, or generate a PL/SQL script. You can run the script manually or using a scheduling utility, such as Oracle Enterprise Manager Scheduler or the <a id="sthref228"></a><code>DBMS_SCHEDULER</code> PL/SQL package.</p>
<p>The generated script calls the <code>BUILD</code> procedure of the <a id="sthref229"></a><code>DBMS_CUBE</code> PL/SQL package. You can modify this script or develop one from the start using this package.</p>
<p>The data for a partitioned cube is loaded and aggregated in parallel when multiple processes have been allocated to the build. You are able to see this in the build log.</p>
<p>In addition, each cube can support these data maintenance methods:</p>
<ul>
<li>
<p>Custom cube scripts</p>
</li>
<li>
<p>Maintenance scripts</p>
</li>
<li>
<p>Cube materialized views</p>
</li>
</ul>
<p>If you are defining cubes to replace existing materialized views, then you use the materialized views as an integral part of data maintenance. Materialized view capabilities restrict the types of analytics that can be performed by a custom cube script.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="admin.htm#BAJCAHGJ">"Maintenance Logs"</a></p>
</li>
<li>
<p><a href="admin.htm#BAJJAIAC">"Parallelism"</a></p>
</li>
</ul>
</div>
<a id="BGBCBCBH"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9155"></a>Creating and Executing Custom Cube Scripts</h3>
<p><a id="sthref230"></a>A cube script is an ordered list of steps that prepare a cube for querying. Each step represents a particular data transformation. By specifying the order in which these steps are performed, you can allow for interdependencies.</p>
<p><a id="sthref231"></a>You can choose from these step types:</p>
<ul>
<li>
<p><span class="bold"><a id="sthref232"></a>Clear Data</span>: Clears the data from the entire cube, from selected measures, or from selected portions of the cube. You can clear just the detail data (called <span class="bold">leaves</span>) for a fast refresh, just the aggregate data, or both for a complete refresh. Clearing old data values is typically done before loading new values.</p>
</li>
<li>
<p><span class="bold"><a id="sthref233"></a>Load</span>: Loads the data from the source tables into the cube. You can load all measures in the cube or just selected measures.</p>
</li>
<li>
<p><span class="bold"><a id="sthref234"></a>Aggregation</span>: Generates aggregate values using the rules defined for the cube. You can aggregate the entire cube, selected measures, or selected portions of the cube.</p>
</li>
<li>
<p><span class="bold"><a id="sthref235"></a>Analyze</span>: Generates optimizer statistics, which can improve the performance of some types of queries. For more information, see <a href="admin.htm#BAJECHJJ">"Analyzing Cubes and Dimensions"</a>. Generating statistics is typically done immediately after data maintenance.</p>
</li>
<li>
<p><span class="bold"><a id="sthref236"></a>OLAP DML</span>: Executes a command or program in the OLAP DML.</p>
</li>
<li>
<p><a id="sthref237"></a><span class="bold">PL/SQL</span>: Executes a PL/SQL command or script. You can run a PL/SQL script, for example, at the beginning of data maintenance to initiate a refresh of the relational source tables.</p>
</li>
</ul>
<p>If a cube is used to support advanced analytics in a cube script, then it cannot be enhanced as a cube materialized view, as described in <a href="#CHDHBGGB">"Adding Materialized View Capability to a Cube"</a>. In this case, you are responsible for detecting when the data in the cube is stale and must be refreshed.</p>
<div class="sect3"><a id="sthref238"></a>
<h4 class="sect3">Creating Cube Scripts</h4>
<p>To create a cube script:</p>
<ol>
<li>
<p>Expand the folder for a cube that is not defined as a cube materialized view.</p>
</li>
<li>
<p>Right-click <span class="bold">Cube Scripts</span>, then choose <span class="bold">Create Cube Script</span>.</p>
<p>The Create Cube Script dialog box is displayed.</p>
</li>
<li>
<p>On the General tab, enter a name for the cube script.</p>
</li>
<li>
<p>To create a step, click <span class="bold">New Step</span>.</p>
</li>
<li>
<p>Choose the type of step.</p>
<p>The New Step dialog box is displayed for that type of step.</p>
</li>
<li>
<p>Complete the tabs, then click <span class="bold">OK</span>.</p>
<p>The step is listed on the Cube Script General tab.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The cube script appears as an item in the Cube Script folder.</p>
</li>
<li>
<p>To run the cube script:</p>
<ol>
<li>
<p>Right-click the cube script on the navigation tree, and choose <span class="bold">Run Cube Script</span>.</p>
<p>The Maintenance Wizard opens.</p>
</li>
<li>
<p>Follow the steps of the wizard.</p>
</li>
<li>
<p>To view the results, right-click the cube and choose <span class="bold">View Data</span>.</p>
</li>
</ol>
</li>
</ol>
<p><a href="#CJADGECA">Figure 3-21</a> shows the Create Cube Script dialog box, in which several steps have been defined.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJADGECA"></a>Figure 3-21 Creating a Cube Script</p>
<img width="500" height="334" src="img/cube_script.gif" alt="Create Cube Script dialog box" title="Create Cube Script dialog box" /><br />
<a id="sthref239" href="img_text/cube_script.htm">Description of "Figure 3-21 Creating a Cube Script"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref240"></a>
<h4 class="sect3">Running a Cube Script</h4>
<p>Each cube automatically has a default cube script named <code>LOAD_AND_AGGREGATE</code> that loads the data and aggregates it using the rules defined on the cube. You can define any number of additional scripts and designate one as the default cube script. All methods of refreshing a cube execute the default cube script. You can execute other cube scripts manually using the Maintenance Wizard.</p>
<p class="orderedlisttitle">To manually run a custom cube script:&nbsp;</p>
<ol>
<li>
<p>Expand the Cube Scripts folder for the cube.</p>
</li>
<li>
<p>Right-click the cube script and choose Run Cube Script to open the Maintenance Wizard.</p>
</li>
<li>
<p>Follow the steps of the Maintenance Wizard.</p>
</li>
</ol>
<p class="orderedlisttitle">To run a custom cube script as the default script:&nbsp;</p>
<ol>
<li>
<p>Expand the Cube Scripts folder for the cube.</p>
</li>
<li>
<p>Select the cube script so the General tab is displayed.</p>
</li>
<li>
<p>Select Default Script For This Cube and click Apply.</p>
</li>
<li>
<p>Open the Maintenance Wizard anywhere on the navigation tree and select the cube.</p>
</li>
<li>
<p>Follow the steps of the Maintenance Wizard.</p>
</li>
</ol>
<p class="orderedlisttitle">To run a cube script as a step in a maintenance script:&nbsp;</p>
<ol>
<li>
<p>Create a maintenance script.</p>
</li>
<li>
<p>Add the cube script as a step.</p>
</li>
<li>
<p>Run the maintenance script.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHJDFBI"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating and Executing Maintenance Scripts</h3>
<p><a id="sthref244"></a>A maintenance script is an ordered list of steps for maintaining multiple cubes in a schema. By using a maintenance script, you can manage interdependencies among the cubes.</p>
<p>To load and aggregate a cube or a dimension, add it as a step. For more control over the maintenance of a particular cube or dimension, either create a cube script or enter the individual steps directly into the maintenance script:</p>
<ul>
<li>
<p>Clear Data</p>
</li>
<li>
<p>Load</p>
</li>
<li>
<p>Aggregation</p>
</li>
<li>
<p>Analyze</p>
</li>
<li>
<p>OLAP DML</p>
</li>
<li>
<p>PL/SQL</p>
</li>
</ul>
<p>These are the same steps described in <a href="#BGBCBCBH">"Creating and Executing Custom Cube Scripts"</a>.</p>
<div class="sect3"><a id="sthref245"></a>
<h4 class="sect3">Creating Maintenance Scripts</h4>
<p>To create a maintenance script:</p>
<ol>
<li>
<p>In the navigation tree, right-click Maintenance Scripts, then choose <span class="bold">Create Maintenance Script</span> to display the Create Maintenance Script dialog box.</p>
</li>
<li>
<p>Enter the name, labels, and description on the General tab.</p>
</li>
<li>
<p>To create a new step, click <span class="bold">Add</span>, then select the type of step from the list.</p>
</li>
<li>
<p>Create additional steps as desired. You can edit, delete, or re-order the steps at any time.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>. The new maintenance script appears as an object in the Maintenance Scripts folder.</p>
</li>
</ol>
<p><a href="#CIHJIGJC">Figure 3-22</a> shows the General tab of the Create Maintenance Script dialog box.</p>
<div class="figure">
<p class="titleinfigure"><a id="CIHJIGJC"></a>Figure 3-22 Creating a Maintenance Script</p>
<img width="750" height="434" src="img/maint_script.gif" alt="Description of Figure 3-22 follows" title="Description of Figure 3-22 follows" /><br />
<a id="sthref246" href="img_text/maint_script.htm">Description of "Figure 3-22 Creating a Maintenance Script"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" -->
<div class="sect3"><a id="sthref247"></a>
<h4 class="sect3">Running Maintenance Scripts</h4>
<p>To run a maintenance script:</p>
<ol>
<li>
<p>Expand the Maintenance Scripts folder.</p>
</li>
<li>
<p>Right-click the script, then choose <span class="bold">Run Maintenance Script</span>.</p>
</li>
<li>
<p>The Maintenance Wizard opens.</p>
</li>
<li>
<p>Follow the steps of the Maintenance Wizard.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDHBGGB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><a id="OLAUG9156"></a>Adding Materialized View Capability to a Cube</h3>
<p><a id="sthref248"></a><a id="sthref249"></a><a id="sthref250"></a>Oracle OLAP cubes can be enhanced with materialized view capabilities. Cubes can be incrementally refreshed through the Oracle Database materialized view subsystem, and they can serve as targets for transparent rewrite of queries against the source tables. A cube that has been enhanced in this way is called a <span class="bold">cube materialized view</span>.</p>
<p>The OLAP dimensions associated with a cube materialized view are also defined with materialized view capabilities.</p>
<p>A cube must conform to these requirements, before it can be designated as a cube materialized view:</p>
<ul>
<li>
<p>All dimensions of the cube have at least one level and one level-based hierarchy. Ragged and skip-level hierarchies are not supported. The dimensions must be mapped.</p>
</li>
<li>
<p>All dimensions of the cube use the same aggregation operator, which is either <code>SUM</code>, <code>MIN</code>, or <code>MAX</code>.</p>
</li>
<li>
<p>The cube has one or more dimensions and one or more measures.</p>
</li>
<li>
<p>The cube is fully defined and mapped. For example, if the cube has five measures, then all five are mapped to the source tables.</p>
</li>
<li>
<p>The data type of the cube is <code>NUMBER</code>, <code>VARCHAR2</code>, <code>NVARCHAR2</code>, or <code>DATE</code>.</p>
</li>
<li>
<p>The source detail tables support dimension and rely constraints. If they have not been defined, then use the Relational Schema Advisor to generate a script that defines them on the detail tables.</p>
</li>
<li>
<p>The cube is compressed.</p>
</li>
<li>
<p>The cube can be enriched with calculated measures, but it cannot support more advanced analytics in a cube script.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="admin.htm#CHDBCEGB">"Cube Materialized Views"</a></div>
<p class="orderedlisttitle">To add materialized view capabilities:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, select a cube.</p>
<p>The property sheets for the cube are displayed.</p>
</li>
<li>
<p>Choose the Materialized Views tab.</p>
</li>
<li>
<p>Review the checklist and, if some tests failed, fix the cause of the problem.</p>
<p>You cannot define a cube materialized view until the cube is valid.</p>
</li>
<li>
<p>For automatic refresh, complete just the top half page. For query rewrite, complete the entire page.</p>
<p>Click <span class="bold">Help</span> for information about the choices on this page.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
</li>
</ol>
<p>The cube materialized views appear in the same schema as the analytic workspace. A materialized view is created for the cube and each of its dimensions. Unlike traditional materialized views, cube materialized views do not use relational tables to store data; the data is stored in the backing cube. A <code>CB$</code> prefix identifies the tables as cube materialized views.</p>
<p>The initial state of a new materialized view is invalid, so it does not support query rewrite until after it is refreshed. You can specify the first refresh time on the Materialized View tab of the cube, or you can run the Maintenance Wizard.</p>
<p><a href="#CJAJAJFE">Figure 3-23</a> shows the Materialized View tab of the Units Cube.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAJAJFE"></a>Figure 3-23 Defining a Materialized View</p>
<img width="755" height="542" src="img/mv.gif" alt="Cube Materialized View tab" title="Cube Materialized View tab" /><br />
<a id="sthref252" href="img_text/mv.htm">Description of "Figure 3-23 Defining a Materialized View"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBBJBDA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Supporting Multiple Languages</h2>
<p><a id="sthref253"></a><a id="sthref254"></a>A single analytic workspace can support multiple languages. This support enables users of OLAP applications and tools to view the metadata in their native languages. For example, you can provide translations for the display names of measures, cubes, and dimensions. You can also map attributes to multiple columns, one for each language.</p>
<p>The number and choice of languages is restricted only by the database character set and your ability to provide translated text. Languages can be added or removed at any time.</p>
<p class="orderedlisttitle">To add support for multiple languages:&nbsp;</p>
<ol>
<li>
<p>In the navigation tree, expand the folder for the analytic workspace.</p>
</li>
<li>
<p>Select Languages to display its property page.</p>
</li>
<li>
<p>On the General tab, click <span class="bold">Modify Languages</span>.</p>
</li>
<li>
<p>On the Modify Languages dialog box, select the languages that the analytic workspace must support. Use the shuttle keys to move them to the Selected Languages box.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to return to the Languages property page.</p>
</li>
<li>
<p>Enter the translations of the various labels and descriptions. Each language has a column where you can enter this information.</p>
</li>
<li>
<p>For each dimension, open the Mappings window. Map the attributes to the source columns for each language.</p>
</li>
</ol>
<p><a href="#CJAEAADA">Figure 3-24</a> shows the addition of French to the analytic workspace.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAEAADA"></a>Figure 3-24 Adding a Language</p>
<img width="622" height="585" src="img/lang_gen.gif" alt="Description of Figure 3-24 follows" title="Description of Figure 3-24 follows" /><br />
<a id="sthref256" href="img_text/lang_gen.htm">Description of "Figure 3-24 Adding a Language"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="BGBDFJHF"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9157"></a>Defining Measure Folders</h2>
<p>Measure folders organize and label groups of measures. Users may have access to several analytic workspaces or relational schemas with measures named Sales or Costs, and measure folders provide a way for applications to differentiate among them.</p>
<p class="orderedlisttitle"><a id="sthref258"></a>To create a measure folder:&nbsp;</p>
<ol>
<li>
<p>Expand the folder for the analytic workspace.</p>
</li>
<li>
<p>Right-click Measure Folders, then choose <span class="bold">Create Measure Folder</span> from the shortcut menu.</p>
</li>
<li>
<p>Complete the General tab of the Create Measure Folder dialog box.</p>
<p>Click <span class="bold">Help</span> for specific information about these choices.</p>
</li>
</ol>
<p>The measure folder appears in the navigation tree under Measure Folders. You can also create subfolders.</p>
<p><a href="#CJAHJJAJ">Figure 3-25</a> shows creation of a measure folder.</p>
<div class="figure">
<p class="titleinfigure"><a id="CJAHJJAJ"></a>Figure 3-25 Creating a Measure Folder</p>
<img width="590" height="382" src="img/meas_folder.gif" alt="Create Measure Folder dialog box" title="Create Measure Folder dialog box" /><br />
<a id="sthref259" href="img_text/meas_folder.htm">Description of "Figure 3-25 Creating a Measure Folder"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="CHDFFEEE"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><a id="OLAUG9158"></a>Using Templates to Re-Create Dimensional Objects</h2>
<p><a id="sthref260"></a><a id="sthref261"></a><a id="sthref262"></a>Analytic Workspace Manager enables you to save all or part of the data model as a text file. This text file contains the XML definitions of the dimensional objects, such as dimensions, levels, hierarchies, attributes, and measures. Only the metadata is saved, not the data. Templates are small files, so you can easily distribute them by email or on a Web site, just as the templates for Global and Sales History are distributed on the Oracle Web site. To re-create the dimensional objects, you simply identify the templates in Analytic Workspace Manager.</p>
<p>You can save the following types of objects as XML templates:</p>
<ul>
<li>
<p><span class="bold">Analytic workspace</span>: Saves all dimensional objects. You can save measure folders only by saving the complete analytic workspace.</p>
</li>
<li>
<p><span class="bold">Dimension</span>: Saves the dimension and its levels, hierarchies, attributes, and mappings.</p>
</li>
<li>
<p><span class="bold">Cube</span>: Saves the cube and its measures, calculated measures, cube scripts, and mappings.</p>
</li>
</ul>
<p>You can save the template anywhere on your local system.</p>
<p class="itemizedlisttitle">To create a template:&nbsp;</p>
<ul>
<li>
<p>In the navigation tree, right-click an analytic workspace, a dimension, or a cube, and choose <span class="bold">Save</span> <span class="bolditalic">object</span> <span class="bold">to Template</span>.</p>
</li>
</ul>
<p class="itemizedlisttitle">To re-create an analytic workspace from a template:&nbsp;</p>
<ul>
<li>
<p>In the navigation tree, right-click <span class="bold">Analytic Workspaces</span> and choose <span class="bold">Create Analytic Workspace From Template</span>.</p>
</li>
</ul>
<p class="orderedlisttitle">To add or modify a dimension or a cube using a template:&nbsp;</p>
<ol>
<li>
<p>Create or open an analytic workspace.</p>
</li>
<li>
<p>In the navigation tree, right-click <span class="bold">Dimensions</span> or <span class="bold">Cubes</span> and choose <span class="bold">Create</span> <span class="bolditalic">object</span> <span class="bold">From Template</span>. To overwrite the metadata for an existing dimension or cube, select <span class="bold">Modify Existing Objects</span> on the Options tab.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment3118">
<tr>
<td class="cellalignment3125">
<table class="cellalignment3123">
<tr>
<td class="cellalignment3122"><a href="start.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment3122"><a href="query.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2003, 2010,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment3127">
<table class="cellalignment3121">
<tr>
<td class="cellalignment3122"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment3122"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment3122"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment3122"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment3122"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment3122"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
