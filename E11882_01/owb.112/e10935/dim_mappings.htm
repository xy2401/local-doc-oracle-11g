<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Performing ETL Using Dimensional Objects</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 037" />
<meta name="dcterms.created" content="2011-09-21T18:21:28Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Warehouse Builder Data Modeling, ETL, and Data Quality Guide" />
<meta name="dcterms.identifier" content="E10935-05" />
<meta name="dcterms.isVersionOf" content="WBETL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2000, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="mappings.htm" title="Previous" type="text/html" />
<link rel="Next" href="sap_km_mappings.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10935.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/37</span> <!-- End Header --><a id="BEICCCJF"></a><a id="WBETL06000"></a>
<h1 class="chapter"><span class="secnum">6</span> Performing ETL Using Dimensional Objects</h1>
<p>Oracle Warehouse Builder enables you to design mappings that perform ETL using dimensional objects. This chapter describes extracting data from, removing data from, and loading data into dimensional objects.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BEIGFHJD">"Using Dimensions in ETL Mappings"</a></p>
</li>
<li>
<p><a href="#BEIDHCBD">"Using Cubes in ETL Mappings"</a></p>
</li>
</ul>
<a id="BEIGFHJD"></a><a id="WBETL06001"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using Dimensions in <a id="sthref955"></a><a id="sthref956"></a>ETL Mappings</h2>
<p>The Dimension operator enables you to perform ETL on dimensions, slowly changing dimensions (SCDs) and time dimensions. You can extract data from, load data into, or remove data from dimensions using the Dimension operator. The dimensions may be deployed in relational form to an Oracle Database or to an analytic workspace.</p>
<a id="CHDIGIJD"></a>
<div class="sect2">
<h3 class="sect2">Loading Data Into Dimensions</h3>
<p>Use a Dimension operator as a target in a mapping to load data into dimensions and SCDs. Define a data flow from the operators that represent the source objects to the dimension or SCD.</p>
<p>Oracle Warehouse Builder loads data into the dimension starting from the highest level.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot map a data flow to the surrogate identifier or the parent surrogate identifier reference of a level.</div>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref957"></a>
<h4 class="sect3">Loading <a id="sthref958"></a><a id="sthref959"></a>Data into Type 1 Dimensions</h4>
<p>While loading data into a dimension, Oracle Warehouse Builder checks if a similar record exists in the dimension by comparing the business identifier of the source records with the business identifier of the existing dimension records.</p>
<p><span class="bold">To load data into a dimension:</span></p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Dimension operator to the mapping. Ensure that this operator is bound to the dimension into which you want to load data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>Add operators corresponding to the source objects and to any transformations that must be performed before the source data is loaded into the dimension.</p>
</li>
<li>
<p>Map the attributes from the source operators to intermediate transformation operators (if the source data is to be transformed before loading it into the dimension) and then to the target dimension. Complete mapping all attributes according to your requirements.</p>
<p>If a record with the same business identifier as the one being loaded exists in the dimension, the record is updated with the attribute values from the source; otherwise the source record is loaded into the dimension.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHGFACA">"Loading Type"</a> property of the Dimension operator to Load.</p>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<p class="subhead2"><a id="sthref960"></a>Example: Loading <a id="sthref961"></a><a id="sthref962"></a><a id="sthref963"></a>Dimensions</p>
<p><a href="#CHDIIJFJ">Figure 6-1</a> displays a mapping that loads data into the <code>PRODUCTS</code> dimension, represented by the operator <code>PRODUCTS_OUT</code>. The source data is stored in two tables, <code>CATEGORIES</code> and <code>PRODUCTS</code>. The <code>CATEGORIES</code> table stores both the category and subcategory information. So the data from this table is filtered using two Filter operators <code>CATS</code> and <code>SUBCATS</code>. The filtered data is then mapped to the <code>CATEGORIES</code> level and the <code>SUBCATEGORIES</code> dimension levels. The <code>TOTAL</code> level of the dimension is loaded using a Constant operator. The data from the <code>PRODUCTS</code> table is mapped directly to the <code>PRODUCTS</code> level in the dimension.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDIIJFJ"></a>Figure 6-1 Loading the Products Dimension</p>
<img width="515" height="326" src="img/dim_load_map.gif" alt="Description of Figure 6-1 follows" /><br />
<a id="sthref964" href="img_text/dim_load_map.htm">Description of "Figure 6-1 Loading the Products Dimension"</a><br />
<br /></div>
<!-- class="figure" -->
<p>When you define a data flow to load a dimension, an inline pluggable mapping that loads data into the dimension is created. To view this pluggable mapping, select the Dimension operator on the Mapping Editor canvas and click <span class="bold">Visit Child Graph</span> on the graphical toolbar.</p>
</div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref965"></a>
<h4 class="sect3">Loading <a id="sthref966"></a><a id="sthref967"></a>Data into Type 2 Slowly Changing Dimensions (SCDs)</h4>
<p>A Type 2 SCD stores both historic and current records. When the value of any <a href="dim_objects.htm#BABFDDJB">"Triggering Attribute"</a> in the Type 2 SCD is modified, the current record is marked as closed and a new record containing the changed values is created. A record is marked as closed by setting the value specified by the <a href="src_tgt_opers.htm#CIHEAIFF">"Default Expiration Time of Open Record"</a> property to the expiration date attribute. Regardless of the input connection defined in a mapping, the expiration date of a historic record is set using the Default Expiration Time of Open Record property.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you load some Type 2 SCDs, if the target is an Oracle9<span class="italic">i</span> database, only row-based mode is supported.
<p>A workaround is to switch on hierarchy versioning, by setting the parent surrogate identifier reference attribute as a trigger for all levels.</p>
</div>
<p>Before loading records into the Type 2 SCD, Oracle Warehouse Builder checks if a record with the same business identifier exists in the Type 2 SCD. If the record does not exist, then Oracle Warehouse Builder adds the record to the Type 2 SCD. If the record exists, then Oracle Warehouse Builder performs the following steps.</p>
<ul>
<li>
<p>Marks the existing record as closed by setting the value specified in the property <a href="src_tgt_opers.htm#CIHEAIFF">"Default Expiration Time of Open Record"</a>.</p>
</li>
<li>
<p>Creates a new record using the changed attribute values.</p>
<ul>
<li>
<p>If the effective date input for the level is not mapped, the effective time and expiration time are set using the <a href="src_tgt_opers.htm#CIHJHFCI">"Default Effective Time of Open Record"</a> and the <a href="src_tgt_opers.htm#CIHEAIFF">"Default Expiration Time of Open Record"</a> properties of the operator.</p>
</li>
<li>
<p>If the effective date input for the level is mapped, then the effective time of the new record is set to the value that is obtained from the effective date input data flow. The effective date input, if connected, represents the actual effective date of each individual new record.</p>
</li>
</ul>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
To load multiple records for a particular business identifier during a single load, set the <a href="src_tgt_opers.htm#CIHEEFHG">"Support Multiple History Loading"</a> property for the Dimension operator that is bound to the Type 2 SCD.</div>
<p class="subhead2"><a id="sthref968"></a>Steps to Load Data into Type 2 SCDs</p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Dimension operator to the mapping. Ensure that this operator is bound to the Type 2 SCD into which you want to load data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>(Optional) Select the Dimension operator on the canvas by clicking the operator name, and use the Property Inspector to set the following properties:</p>
<ul>
<li>
<p><a href="src_tgt_opers.htm#CIHCIDAI">"Default Effective Time of Initial Record"</a></p>
</li>
<li>
<p><a href="src_tgt_opers.htm#CIHJHFCI">"Default Effective Time of Open Record"</a></p>
</li>
<li>
<p><a href="src_tgt_opers.htm#CIHEAIFF">"Default Expiration Time of Open Record"</a></p>
</li>
<li>
<p><a href="src_tgt_opers.htm#CIHEAFFE">"Type 2 Gap"</a></p>
</li>
<li>
<p><a href="src_tgt_opers.htm#CIHBBJBF">"Type 2 Gap Units"</a></p>
</li>
</ul>
<p>If you do not explicitly set values for these properties, the default values are used.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHGFACA">"Loading Type"</a> property of the Dimension operator to Load.</p>
</li>
<li>
<p>Add operators corresponding to the source objects and to any transformations that must be performed before the source data is loaded into the dimension.</p>
</li>
<li>
<p>Map the attributes from the source operators through intermediate transformation operators (if the source data is to be transformed before loading it into the dimension) and then to the target dimension operator. Complete mapping all attributes according to your requirements.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot map attributes to the expiration date attribute of the Type 2 SCD.</div>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<p class="subhead2"><a id="sthref969"></a>Mapping Source <a id="sthref970"></a><a id="sthref971"></a>Attributes to the Effective Data Attribute</p>
<p>In a mapping that loads a Type 2 SCD, if you map attributes from the source operator to the effective date attribute of a level, Oracle Warehouse Builder does the following:</p>
<ul>
<li>
<p>While loading the initial record, if the value of the source attribute is earlier than the value specified by the <a href="src_tgt_opers.htm#CIHCIDAI">"Default Effective Time of Initial Record"</a> property of the dimension operator (bound to the Type 2 SCD), Oracle Warehouse Builder uses the value from the source as the effective date of the record; otherwise Oracle Warehouse Builder takes the value specified in the Default Effective Time of Initial Record property as the effective date of the record.</p>
</li>
<li>
<p>During subsequent loads for the record, if the record is being versioned, Oracle Warehouse Builder takes the effective time of the new record from the source. If no value is given for the effective time, then <code>SYSDATE</code> is used. Oracle Warehouse Builder sets the expiration time of the closed record to the effective time of the new record minus the gap.</p>
</li>
</ul>
<p>If you do not map attributes from the source to the effective date attribute of a level, then Oracle Warehouse Builder does the following:</p>
<ul>
<li>
<p>While loading the initial record, Oracle Warehouse Builder uses the value specified in the <a href="src_tgt_opers.htm#CIHCIDAI">"Default Effective Time of Initial Record"</a> property as the effective date of the record.</p>
</li>
<li>
<p>During subsequent loads for the record, if a new version is being created, Oracle Warehouse Builder takes the effective time of the new record from the source. If no value is given for the effective time, then <code>SYSDATE</code> is used. Oracle Warehouse Builder takes the expiration time of the previous version as the effective time of the new version minus the gap.</p>
<p>For more information about the gap, see <a href="src_tgt_opers.htm#CIHEAFFE">"Type 2 Gap"</a> and <a href="src_tgt_opers.htm#CIHBBJBF">"Type 2 Gap Units"</a>.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Mapping to the Expiration Date attribute of a level is not enabled. While loading a record, the Default Expiration Time of Open Record property is used as the expiration date. The default value of this property is <code>NULL</code>.</div>
<p class="subhead2"><a id="sthref972"></a>Example: Values Assigned to Type 2 SCD Versioned Records</p>
<p>You create a mapping that loads the <code>Products</code> Type 2 SCD. The leaf level of this Type 2 SCD, <code>Product</code>, is loaded from a source table.The effective date attribute of the <code>Product</code> level is mapped from the source attribute <code>EFF_DATE</code>.</p>
<p>The Dimension operator has the following properties:</p>
<ul>
<li>
<p>Default Effective Time of Initial Record: 01-jan-2000</p>
</li>
<li>
<p>Default Effective Time of Open Record: SYSDATE</p>
</li>
<li>
<p>Default Expiration Time of Open Record: 01-jan-2099</p>
</li>
<li>
<p>Type 2 Gap: 1</p>
</li>
</ul>
<p>Consider a source <code>Product</code> level record with the value of <code>EFF_DATE</code> as 21-mar-2007 10.25.05.000000 PM.When the initial <code>Product</code> level record is loaded, the values assigned to the record are:</p>
<p>Effective date: 01-jan-2000</p>
<p>Expiration date: 01-jan-2099</p>
<p>When the <code>Product</code> level record is versioned during a subsequent load on 21-mar-2007, the following occurs:</p>
<ul>
<li>
<p>The value of the source attribute overrides the Default Effective Time of Open Record property. Thus, the effective date stored in the new <code>Product</code> level record is 21-mar-2007 and the expiration date is set to 01-jan-2099.</p>
</li>
<li>
<p>The initial <code>Product</code> level record is closed with the value of the expiration date set to 21-mar-200710.25.04.000000 PM.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref973"></a>
<h4 class="sect3">Loading Data <a id="sthref974"></a><a id="sthref975"></a>into Type 3 Slowly Changing Dimensions (SCDs)</h4>
<p>Use the following steps to load data into Type 3 SCDs.</p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Dimension operator to the mapping. Ensure that this operator is bound to the Type 3 SCD into which you want to load data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHGFACA">"Loading Type"</a> property of the Dimension operator to Load.</p>
</li>
<li>
<p>Add operators corresponding to the source objects and to any transformations that must be performed before the source data is loaded into the Type 3 SCD.</p>
</li>
<li>
<p>Map the attributes from the source operators to intermediate transformation operators (if the source data is to be transformed before loading it into the dimension) and then to the target dimension operator. Complete mapping all attributes according to your requirements.</p>
<p>While loading data, Oracle Warehouse Builder checks if a record with the same business identifier exists in the Type 3 SCD. If the record does not exist, then it is added. If the record exists, then the following steps are performed:</p>
<ul>
<li>
<p>The values of the versioned attributes are moved to the attributes that store the previous values of versioned attributes.</p>
</li>
<li>
<p>The record with the values from the source record is updated.</p>
</li>
</ul>
</li>
<li>
<p>Set the Loading Type property of the Dimension operator to Load.</p>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<p class="subhead2"><a id="sthref976"></a>Example: <a id="sthref977"></a><a id="sthref978"></a><a id="sthref979"></a>Loading Data into Type 3 SCDs</p>
<p><a href="#CHDHAFAJ">Figure 6-2</a> displays a mapping that loads data into the PRODUCTS level of the Type 3 SCD. In this mapping, the effective time of the current record is loaded from the source. You can also use the <span class="bold">Default Effective Time of Current Record</span> property to set a default value for the effective time of a level record.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDHAFAJ"></a>Figure 6-2 Loading a Type 3 SCD</p>
<img width="578" height="293" src="img/type3scd_load_map.gif" alt="Description of Figure 6-2 follows" /><br />
<a id="sthref980" href="img_text/type3scd_load_map.htm">Description of "Figure 6-2 Loading a Type 3 SCD"</a><br />
<br /></div>
<!-- class="figure" -->
<p>You cannot map a data flow to the attributes that represent the previous values of versioned attributes.</p>
<p>For example, in the mapping shown in <a href="#CHDHAFAJ">Figure 6-2</a>, you cannot map an attribute to the <code>PREV_PACK_SIZE</code> and <code>PREV_DESCRIPTION</code> attributes of the <code>PRODUCTS</code> level.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref981"></a>
<h3 class="sect2">Example: <a id="sthref982"></a><a id="sthref983"></a><a id="sthref984"></a>Loading Data Into Type 2 Slowly Changing Dimensions</h3>
<p>The Type 2 SCD PRODUCTS_TYPE2 contains the levels Total, Categories, and Product. Product is the leaf level and its attribute Pack_size is the versioned attribute. The Effective_date and expiration_date attributes store the effective date and expiration date, respectively, for the product records.</p>
<p>The source data that is to be loaded into this dimension is stored in two tables: <code>Categories_tab</code> and <code>Product_information</code>. The name and the description of the highest level in the Type 2 SCD are loaded using the <code>Total_desc</code> attribute of a Constant operator.</p>
<p>Use the following steps to load the PRODUCTS_TYPE2 Type 2 SCD.</p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>From the Projects Navigator, drag and drop the PRODUCTS_TYPE2 Type 2 SCD, the Categories_tab table, and the Product_information table onto the mapping canvas.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHGFACA">"Loading Type"</a> property of the Dimension operator to Load.</p>
<p>Select the Dimension operator on the canvas. The Property Inspector displays the dimension properties. Loading Type is listed under the Dimension Properties node.</p>
</li>
<li>
<p>Drag and drop a Constant operator used to load the Total level onto the mapping canvas.</p>
<p>Also, add an output attribute called Total_desc to this operator. Set the Expression property of the Total_desc operator to the value assigned to the total_name and total_desc attributes.</p>
</li>
<li>
<p>Map the attributes from the source operators to the Type 2 SCD.</p>
<p><a href="#CHDJDEIC">Figure 6-3</a> displays the mapping with the source operator mapped to the target. Type 2 SCD.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDJDEIC"></a>Figure 6-3 Loading Data Into a Type 2 SCD</p>
<img width="553" height="384" src="img/map_load_type2scd.gif" alt="Description of Figure 6-3 follows" /><br />
<a id="sthref985" href="img_text/map_load_type2scd.htm">Description of "Figure 6-3 Loading Data Into a Type 2 SCD"</a><br />
<br /></div>
<!-- class="figure" -->
<p>In this example, the effective time of a record is loaded from the source. You can also choose to set this to a default value, such as <code>SYSDATE</code>, using the <span class="bold">Default Effective Time of Current Record</span> property.</p>
<p>Because no values are explicitly assigned to the history logging properties, the default values are used.</p>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<p>You have now designed a mapping that loads data into a Type 2 SCD. To actually move the data from the source tables into the Type 2 SCD, you must deploy and run this mapping. For more details about deploying and executing mappings, see <a href="deploy.htm#BEIDEDIG">"Starting ETL Jobs"</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BCFJBAFE"></a>
<div class="sect2">
<h3 class="sect2">Extracting Data Stored in Dimensions</h3>
<p>You can extract data stored in a workspace dimension, slowly changing dimension (SCD), or time dimension by using a Dimension operator as a source in a mapping.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot extract data from dimensions that use a MOLAP implementation.</div>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref986"></a>
<h4 class="sect3">Extracting Data from <a id="sthref987"></a><a id="sthref988"></a>Dimensions</h4>
<p>Use the following steps to define a mapping that extracts data stored in dimensions.</p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Dimension operator to the mapping. Ensure that this operator is bound to the dimension from which you want to extract data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>Add operators corresponding to the target object and to any transformations that must be performed before the dimension data is loaded into the target.</p>
</li>
<li>
<p>Map the attributes from the dimension levels to the target operator or to intermediate operators that transform the source data. Complete mapping all attributes according to your requirements.</p>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref989"></a>
<h4 class="sect3">Extracting Data <a id="sthref990"></a><a id="sthref991"></a>from Type 2 Slowly Changing Dimensions (SCDs)</h4>
<p>Use a mapping containing a Dimension operator to extract data stored in a Type 2 SCD. The Dimension operator should be bound to the Type 2 SCD that contains the source data.</p>
<p>Because a Type 2 SCD stores multiple versions of a single record, you must specify the version of the record that should be extracted. To extract the current version of a record, set the <a href="src_tgt_opers.htm#CIHCACBA">"Type 2 Extract/Remove Current Only"</a> property of the Dimension operator to Yes. To extract all records, including historic ones, set the <a href="src_tgt_opers.htm#CIHCACBA">"Type 2 Extract/Remove Current Only"</a> property to No.</p>
<p>Additionally, you can set the following properties for the Dimension operator: <a href="src_tgt_opers.htm#CIHCIDAI">"Default Effective Time of Initial Record"</a>, <a href="src_tgt_opers.htm#CIHJHFCI">"Default Effective Time of Open Record"</a>, <a href="src_tgt_opers.htm#CIHEAIFF">"Default Expiration Time of Open Record"</a>, <a href="src_tgt_opers.htm#CIHEAFFE">"Type 2 Gap"</a>, and <a href="src_tgt_opers.htm#CIHBBJBF">"Type 2 Gap Units"</a>. These properties enable you to assign values to the versioned attributes in the Type 2 SCD. All these properties have default values as displayed in the Property Inspector for the Dimension operator. If you do not explicitly assign values to these properties, then Oracle Warehouse Builder uses the default values.</p>
<p><span class="bold">To define a mapping that extracts data from a Type 2 SCD:</span></p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Dimension operator to the mapping. Ensure that this operator is bound to the Type 2 SCD from which you want to extract data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>Add operators corresponding to the target object and to any transformations that must be performed before the Type 2 SCD data is loaded into the target.</p>
</li>
<li>
<p>Map the attributes from the source Type 2 SCD to the target or to intermediate operators that transform the source data. Complete mapping all attributes according to your requirements.</p>
<p>To specify the version of source records from the Type 2 SCD that should be extracted:</p>
<ul>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHCACBA">"Type 2 Extract/Remove Current Only"</a> property to Yes to extract the current record.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHCACBA">"Type 2 Extract/Remove Current Only"</a> property to No to extract historic records.</p>
</li>
</ul>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref992"></a>
<h4 class="sect3">Extracting <a id="sthref993"></a><a id="sthref994"></a>Data from Type 3 Slowly Changing Dimensions (SCDs)</h4>
<p>Use a mapping containing a Dimension operator to extract data from a Type 3 SCD. The operator must be bound to the Type 3 SCD that contains the source data.</p>
<p>A Type 3 SCD uses separate attributes to store historic values of versioned attributes. Depending on whether you want to extract the current record or historic values, you map the attributes in the Type 3 SCD to the target operators.</p>
<p><span class="bold">To define a mapping that extracts data from a Type 3 SCD:</span></p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Dimension operator to the mapping. Ensure that this operator is bound to the Type 3 SCD from which you want to extract data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>Add operators for the target object and for any transformations that are needed before the dimension data is loaded into the target.</p>
</li>
<li>
<p>Map the attributes from the source Type 3 SCD either to the target operator or to operators that transform the source data.</p>
<ul>
<li>
<p>To extract historic data, map the attributes that represent the previous values of versioned attributes to the target or intermediate operator.</p>
</li>
<li>
<p>To extract the current record, map the attributes that store the level attributes to the target or intermediate operator.</p>
</li>
</ul>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<p><a href="#CHDDFEAE">Figure 6-4</a> displays a mapping that sources the historic data records from the <code>PRODUCTS</code> Type 3 dimension. In this example, to source historic data, use the <code>PREV_DESCRIPTION</code>, <code>PREV_PACKAGE_TYPE</code>, or <code>PREV_PACKAGE_SIZE</code> attributes. To source current data, use <code>DESCRIPTION</code>, <code>PACKAGE_TYPE</code>, or <code>PACKAGE_SIZE</code>.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDDFEAE"></a>Figure 6-4 Mapping That Sources Data from a Type 3 SCD</p>
<img width="582" height="282" src="img/type3scd_source_data.gif" alt="Description of Figure 6-4 follows" /><br />
<a id="sthref995" href="img_text/type3scd_source_data.htm">Description of "Figure 6-4 Mapping That Sources Data from a Type 3 SCD"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref996"></a>
<h3 class="sect2">Removing <a id="sthref997"></a><a id="sthref998"></a><a id="sthref999"></a><a id="sthref1000"></a>Data from Dimensions</h3>
<p>Use the Dimension operator to remove data from dimensions and SCDs. You create a mapping with the Dimension operator, the source objects containing the data that must be removed from the dimension, and any required transformation operators. Map attributes from the source or transformation operators to the Dimension operator. When the map is run, the business identifier of the source record is compared to the business identifiers in the dimension. If the business identifiers match, then the corresponding record in the dimension is removed.</p>
<p>To remove data from dimensions or SCDs, set the <a href="src_tgt_opers.htm#CIHGFACA">"Loading Type"</a> property of the Dimension operator to Remove.</p>
<p class="subhead2"><a id="sthref1001"></a>Effect of Surrogate Keys on Dimension Data Removal</p>
<p>When you remove data from a dimension that was created with surrogate keys, parent records of existing children are removed, but child records are left referencing nonexistent parents.</p>
<p>When you remove data from a dimension that was created with no surrogate keys, parent records of existing child records and the child records are removed. This is in effect a cascade operation.</p>
</div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref1002"></a>
<h3 class="sect2">Example: <a id="sthref1003"></a><a id="sthref1004"></a><a id="sthref1005"></a>Removing Data from Dimensions</h3>
<p>The DF1_SINGLEH1_SCD1 is a dimension containing the levels Total, Region, Territory, and Salesrep. This dimension contains existing data that was loaded earlier using another mapping. The tables WBSALESREP_ALL, WB_REGIONS, WB_TERRITORIES, and WBSALESREPTERRITORIES contain the data that must be removed from the various levels in the dimension.</p>
<p>Use the following steps to remove data from the DF1_SINGLEH1_SCD1 dimension.</p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>From the Projects Navigator, drag and drop the DF1_SINGLEH1_SCD1 dimension onto the mapping canvas.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHGFACA">"Loading Type"</a> property of the Dimension operator to Remove.</p>
</li>
<li>
<p>From the Projects Navigator, drag and drop the following tables onto the mapping canvas: WBSALESREP_ALL, WB_REGIONS, WB_TERRITORIES, and WBSALESREPTERRITORIES.</p>
</li>
<li>
<p>Add a Constant operator to the mapping. Create two output attributes ID and Name. To the Expression property of both attributes, assign the values to remove from the Total level.</p>
<p>For example, if you set the Expression attribute of ID to 100 and that of Name to Asia, then all level records, in the Total level, whose ID and Name match these values are deleted. Also, because the ID attribute of the Constant operator is mapped to the Region attribute, all child records of the Total level records that are removed are also removed.</p>
</li>
<li>
<p>Map the attributes from the source operators to the Dimension operator.</p>
<p><a href="#BEIEDCAB">Figure 6-5</a> displays the mapping with the attributes connected to the Dimension operator.</p>
<div class="figure">
<p class="titleinfigure"><a id="BEIEDCAB"></a>Figure 6-5 Mapping that Removes Data From a Dimension</p>
<img width="745" height="533" src="img/map_remove_dim.gif" alt="Description of Figure 6-5 follows" /><br />
<a id="sthref1006" href="img_text/map_remove_dim.htm">Description of "Figure 6-5 Mapping that Removes Data From a Dimension"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The business identifier of the source records is compared to the business identifier of the dimension level record to which it is mapped. If the business identifier matches, then the corresponding record is removed from the dimension.</p>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<p>You have now designed a mapping that removes data from a dimension. To actually remove the specified data from the dimension, you must deploy and run this mapping. For more details about deploying and executing mappings, see <a href="deploy.htm#BEIDEDIG">"Starting ETL Jobs"</a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BEIDHCBD"></a><a id="WBETL06002"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using Cubes in <a id="sthref1007"></a><a id="sthref1008"></a>ETL Mappings</h2>
<p>The Cube operator enables you to extract data from, load data into, and remove data from cubes. To extract data from cubes, use the Cube operator as a source in a mapping.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot extract data from cubes that use a MOLAP implementation.</div>
<p>Use the <a href="src_tgt_opers.htm#CIHEDGGJ">"Loading Type"</a> property of the Cube operator to indicate if data is being loaded into the cube or removed from the cube. For cubes, the Loading Type property can have the following three values: LOAD, INSERT_LOAD, and REMOVE.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="src_tgt_opers.htm#CIHEDGGJ">"Loading Type"</a> for more information about the Loading Type property of cubes</div>
<p class="subhead2"><a id="sthref1009"></a>ACTIVE_DATE <a id="sthref1010"></a><a id="sthref1011"></a><a id="sthref1012"></a>Attribute in Cubes</p>
<p>Cube operators contain an attribute called ACTIVE_DATE. This attribute represents the point in time that is used to determine which record in a Type 2 SCD is the active record. This property is applicable only when the cube that you are loading has one or more Type 2 SCDs.</p>
<p>If you do not map an attribute from the source to ACTIVE_DATE, <code>SYSDATE</code> is used as the default.</p>
<p>If you map a source attribute to ACTIVE_DATE, the value of the source attribute is used to determine which version of the Type 2 SCD record is referenced by the cube record.For any cube that references a dimension in which the level is of a Type 2 SCD, the <code>WHERE</code> clause generated to determine the dimension member is as follows:</p>
<pre>
...
WHERE
(...
   (&lt;dim_name&gt;.DIMKEY = &lt;lookup_for_dimension_dimkey&gt; AND
           (&lt;level&gt;_EFFECTIVE_DATE &lt;= ACTIVE_DATE AND
                    &lt;level&gt;_EXPIRATION_DATE &gt;= ACTIVE_DATE) OR
           (&lt;level&gt;_EFFECTIVE_DATE &lt;= ACTIVE_DATE AND
                    &lt;level&gt;_EXPIRATION_DATE IS NULL))
...)
</pre>
<p class="subhead2"><a id="sthref1013"></a>Loading <a id="sthref1014"></a><a id="sthref1015"></a>Data from Type 2 SCDs into Cubes</p>
<p>If a mapping that loads a cube references at least one Type 2 SCD that has the Default Expiration Time of Open Record set to a non-NULL value, then the ACTIVE_DATE attribute of the Cube operator must be mapped from the source that contains the date value that defines the range for the dimension record.</p>
<p>If the ACTIVE_DATE attribute is not mapped from the source, then the <code>SYSDATE</code> value defines the date range for the dimension record.</p>
<p>When the ACTIVE_DATE attribute is mapped from the source, the source attribute value is used to perform a range comparison to determine which dimension record should be loaded.</p>
<p>The <code>WHERE</code> clause listed previously describes the logic used to perform the lookup for the dimension member.</p>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1016"></a>
<h3 class="sect2">Loading <a id="sthref1017"></a><a id="sthref1018"></a>Data Into Cubes</h3>
<p>When you load a cube, you map the data flow from the source to the attribute that represents the business identifier of the referencing level. Oracle Warehouse Builder performs a lookup on the dimensions and then stores the corresponding surrogate identifier in the cube table. For example, when you map the attributes from the dimension operator to the cube operator, a Lookup operator is created in cases where it is needed to lookup the surrogate identifier of the dimension.</p>
<p>If there is a possibility of the lookup condition returning multiple rows, you must ensure that only one row is selected out of the returned rows. You can do this by using the Deduplicator operator or Filter operator.</p>
<p>Use the following steps to load data into a cube.</p>
<ol>
<li>
<p>Define a mapping as described in <a href="mappings.htm#i1170011">"Defining Mappings"</a>.</p>
</li>
<li>
<p>Add a Cube operator to the mapping. Ensure that this operator is bound to the cube into which you want to load data.</p>
<p>For information about adding operators to mappings, see <a href="mappings.htm#i1171414">"Adding Operators to Mappings"</a>.</p>
</li>
<li>
<p>Add operators corresponding to the source objects and to any transformations that must be performed before the source data is loaded into the dimension. Ensure that all source data objects are bound to the repository objects.</p>
</li>
<li>
<p>Map the attributes from the source operators to intermediate transformation operators (if the source data is to be transformed before loading it into the dimension) and then to the target cube. Complete mapping all attributes according to your requirements.</p>
</li>
<li>
<p>Set the <a href="src_tgt_opers.htm#CIHEDGGJ">"Loading Type"</a> property of the Cube operator to Load.</p>
</li>
<li>
<p>Validate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Validate</span> on the toolbar.</p>
<p>Resolve errors, if any, that result from the validation process.</p>
</li>
<li>
<p>Generate the mapping by selecting the mapping in the Projects Navigator and clicking <span class="bold">Generate</span> on the toolbar.</p>
<p>The generation results are displayed in a new Results tab in the Log window. Resolve generation errors, if any.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the source data for your cube contains invalid or null values for the dimension references, it is recommended that you use Orphan Management or DML Error Logging to avoid possible problems during subsequent cube loads.</div>
<p><a href="#CHDCAJAF">Figure 6-6</a> displays a mapping that uses the Cube operator as a target. Data from three source tables is joined using a Joiner operator. An Aggregator operator is used to aggregate the joined data with the data from another source table. The output of the Aggregator operator is mapped to the Cube operator.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDCAJAF"></a>Figure 6-6 Mapping that Loads a Cube</p>
<img width="588" height="207" src="img/cube_load_map.gif" alt="Description of Figure 6-6 follows" /><br />
<a id="sthref1019" href="img_text/cube_load_map.htm">Description of "Figure 6-6 Mapping that Loads a Cube"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2968">
<tr>
<td class="cellalignment2977">
<table class="cellalignment2973">
<tr>
<td class="cellalignment2972"><a href="mappings.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2972"><a href="sap_km_mappings.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2000, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2980">
<table class="cellalignment2971">
<tr>
<td class="cellalignment2972"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2972"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2972"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2972"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2972"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2972"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
