<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Managing Database Workload Using Services</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-07-11T15:26:27Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Real Application Clusters Guide" />
<meta name="dcterms.identifier" content="E17264-15" />
<meta name="dcterms.isVersionOf" content="TDPRC" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="racbureco.htm" title="Previous" type="text/html" />
<link rel="Next" href="racmon2.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17264.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/16</span> <!-- End Header -->
<div id="TDPRC289" class="chapter"><a id="i37797"></a>
<h1 class="chapter"><span class="secnum">7</span> Managing Database Workload Using Services</h1>
<p>Using workload management, you can distribute the workload across database instances to achieve optimal database and cluster performance for users and applications. This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CACEGBDF">About Workload Management</a></p>
</li>
<li>
<p><a href="#CACFEADG">Creating Services</a></p>
</li>
<li>
<p><a href="#CACEDJBG">Administering Services</a></p>
</li>
<li>
<p><a href="#CHDCGJJJ">Configuring Clients for High Availability</a></p>
</li>
</ul>
<a id="CACEGBDF"></a>
<div id="TDPRC290" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Workload Management</h2>
<p>Applications using a clustered database generally want to load balance their workload across the cluster. Oracle Real Application Clusters (Oracle RAC) includes a highly available (HA) application framework that provides the necessary service and integration points between Oracle RAC and custom enterprise applications.</p>
<p>You can deploy Oracle RAC and single-instance Oracle database environments to use workload management features in many different ways. Depending on the number of nodes and your environment's complexity and objectives, your choices for the optimal workload management and high availability configuration depend on a variety of considerations, as described in this chapter.</p>
<p><a id="sthref410"></a>To implement workload management for an Oracle RAC database, you can use a number of different features. This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDJIAJH">About Oracle Services</a></p>
</li>
<li>
<p><a href="#CHDEDEII">About the Database Resource Manager</a></p>
</li>
<li>
<p><a href="#CACIIGCE">About Oracle RAC High Availability Framework</a></p>
</li>
<li>
<p><a href="#CHDDCDFA">About Fast Application Notification (FAN)</a></p>
</li>
<li>
<p><a href="#CACCBDFA">About FAN Callouts</a></p>
</li>
<li>
<p><a href="#CHDJGAAI">About the Load Balancing Advisory</a></p>
</li>
<li>
<p><a href="#CHDGCCDI">About Connection Load Balancing</a></p>
</li>
<li>
<p><a href="#CHDBCGEJ">About Run-time Connection Load Balancing</a></p>
</li>
</ul>
<a id="CHDJIAJH"></a>
<div id="TDPRC291" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Oracle Services</h3>
<p><a id="sthref411"></a>Oracle Database 10<span class="italic">g</span> introduced an automatic workload management facility, called database services. Database services (services) are logical abstractions for managing workloads in Oracle Database. Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities.</p>
<p>A single service can represent an application, multiple applications or a subset of a single application. For example, the Oracle E-Business suite defines a service for each responsibility, such as general ledger, accounts receivable, order entry, and so on. A single service can be associated with one or more instances of an Oracle RAC database, and a single instance can support multiple services.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
A database service can only be offered on a single network.</div>
<p>Services provide the following benefits:</p>
<ul>
<li>
<p>A single entity for managing applications that compete for the same resources</p>
</li>
<li>
<p>Allow each workload to be managed as a unit</p>
</li>
<li>
<p>Hide the complexity of the cluster from the client</p>
</li>
</ul>
<p><a id="sthref412"></a>To manage workloads, you can define services that you assign to a particular application or to a subset of an application's operations. You can also use services to manage the workload for different types of work. For example, online users can use one service while batch processing can use a different service and reporting can use yet another service type.</p>
<p>Traditionally an Oracle database provided a single service and all users connected to the same service. A database always has this default database service that is the database name. This service cannot be modified and always enables you to connect to the database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not use the default database service for application workloads. Create at least one service as described in <a href="#CACFEADG">"Creating Services"</a>.</div>
<p>When a user or application connects to a database, Oracle recommends that you use a service for the connection. Oracle Database automatically creates one database service when the database is created. For many installations, this may be all you need. For more flexibility in the management of the workload using the database, Oracle Database enables you to create multiple services and specify which database instances offer the services.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
By default, any named user may create a server pool. To restrict the operating system users that have this privilege, Oracle strongly recommends that you add specific users to the CRS Administrators list. See <a class="olink CWADD91105" href="../../rac.112/e41959/admin.htm#CWADD91105"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about adding users to the CRS Administrators list.</div>
<p>You can define services for both policy-managed and administrator-managed databases.</p>
<ul>
<li>
<p><span class="bold">Policy-managed database</span>: When you define services for a policy-managed database, you assign the service to a server pool where the database is running. You can define the service as either uniform (running on all instances in the server pool) or singleton (running on only one instance in the server pool).</p>
</li>
<li>
<p><span class="bold">Administrator-managed database</span>: <a id="sthref413"></a>When you define a service for an administrator-managed database, you define which instances normally support that service.These are known as the <code>PREFERRED</code> instances. <a id="sthref414"></a>You can also define other instances to support a service if the preferred instance fails. These are known as <code>AVAILABLE</code> instances.</p>
</li>
</ul>
<p>Services are integrated with the Database Resource Manager, which enables you to restrict the resources that are used by a service within an instance. In addition, Oracle Scheduler jobs can run using a service, as opposed to using a specific instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACFEADG">"Creating Services"</a></p>
</li>
<li>
<p><a href="#CACEDJBG">"Administering Services"</a></p>
</li>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
<li>
<p><a class="olink ADMQS12313" href="../../server.112/e10897/network.htm#ADMQS12313"><span class="italic">Oracle Database 2 Day DBA</span></a></p>
</li>
<li>
<p><a class="olink ADMIN11125" href="../../server.112/e25494/create.htm#ADMIN11125"><span class="italic">Oracle Database Administrator's Guide</span></a></p>
</li>
</ul>
</div>
<div id="TDPRC292" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref415"></a>
<h4 class="sect3">About Service Failover in Administrator-Managed Databases</h4>
<p><a id="sthref416"></a>When you specify a preferred instance for a service, the service runs on that instance during normal operation. Oracle Clusterware attempts to ensure that the service always runs on all the preferred instances that have been configured for a service. If the instance fails, then the service is relocated to an available instance. You can also manually relocate the service to an available instance.</p>
<p>If a service fails over to an available instance, then the service is not moved back to its preferred instance automatically. However, you can automate the relocation of a service to its preferred instance by using a callout. For more information about callouts, see <a href="#CACCBDFA">"About FAN Callouts"</a>. An example callout script for relocating services back to their preferred instances is available on Oracle Technology Network at: <code><a href="http://www.oracle.com/technetwork/database/enterprise-edition/twpracwkldmgmt-132994.pdf">http://www.oracle.com/technetwork/database/enterprise-edition/twpracwkldmgmt-132994.pdf</a></code></p>
<p>You do not have to specify available instances for a service. If you do not specify preferred or available instances when you create a service, then by default, every instance in the Oracle RAC database is a preferred instance for that service. However, if you configure a preferred instance for a service, but do not specify at least one available instance for the service, then the service does not relocate to another instance if the preferred instance fails.</p>
<p>You can also specify an instance as Not Used. This setting means the service does not run on the instance, even if the preferred instance for the service fails.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACCBDFA">"About FAN Callouts"</a></p>
</li>
<li>
<p><a href="#CACFEADG">"Creating Services"</a></p>
</li>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="TDPRC587" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref417"></a>
<h4 class="sect3">About Service Failover in Policy-Managed Databases</h4>
<p><a id="sthref418"></a>When you specify that a service is UNIFORM, Oracle Clusterware attempts to ensure that the service always runs on all the available instances for the specified server pool. If the instance fails, then the service is no longer available on that instance. If the cardinality of the server pool increases and a instance is added to the database, then the service is started on the new instance. You cannot manually relocate the service to a specific instance.</p>
<p>When you specify that a service is SINGLETON, Oracle Clusterware attempts to ensure that the service always runs on only one of the available instances for the specified server pool. If the instance fails, then the service fails overs to a different instance in the server pool. You cannot specify which instance in the server pool the service should run on.</p>
<p>For SINGLETON services, if a service fails over to an new instance, then the service is not moved back to its original instance when that instance becomes available again.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACCBDFA">"About FAN Callouts"</a></p>
</li>
<li>
<p><a href="#CACFEADG">"Creating Services"</a></p>
</li>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="TDPRC500" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref419"></a>
<h4 class="sect3">About Automatic Starting of Services</h4>
<p>When you define a service, you can also define the management policy for that service. You can choose either an automatic or manual management policy:</p>
<ul>
<li>
<p><span class="bold">automatic</span>: The service always starts when the database starts.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you use automatic services in an administrator-managed database, during planned database startup, services may start on the first instances that become available rather than their preferred instances.</div>
</li>
<li>
<p><span class="bold">manual</span>: Requires you to start the service manually after the database starts. Prior to Oracle Database 11<span class="italic">g</span> release 2 (11.2), all services worked as though they were defined with a manual management policy.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACFEADG">"Creating Services"</a></p>
</li>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDEDEII"></a>
<div id="TDPRC293" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About the Database Resource Manager</h3>
<p><a id="sthref420"></a>The Database Resource Manager is a database feature you can use to control the database resources allocated to users, applications, and services. This approach ensures that users, applications, and services receive their share of the available database resources. The Database Resource Manager enables an Oracle RAC database running on one or more nodes to support multiple applications and mixed workloads with optimal efficiency.</p>
<p>The Database Resource Manager provides the ability to prioritize work within an Oracle database or your Oracle RAC environment. For example, high priority users, such as online workers, would get more resources to minimize response time, while lower priority users, such as batch jobs or reports, would get fewer resources, and could take longer to run. This allows for more granular control over resources.</p>
<p><a id="ABC2451661"></a>Resources are allocated to users according to a resource plan specified by the database administrator. The following terms are used in specifying a resource plan:</p>
<ul>
<li>
<p>A <span class="italic">resource plan</span> specifies how the resources are to be distributed among various users (resource consumer groups).</p>
</li>
<li>
<p><span class="italic">Resource consumer groups</span> allow the administrator to group user sessions by resource requirements. Resource consumer groups are different from user roles; one database user can have different sessions assigned to different resource consumer groups.</p>
</li>
<li>
<p><span class="italic">Resource allocation methods</span> are the methods or policies used by the Database Resource Manager when allocating for a particular resource. Resource allocation methods are used by resource consumer groups and resource plans. The database provides the resource allocation methods that are available, but the DBA determines which method to use.</p>
</li>
<li>
<p><span class="italic">Resource plan directives</span> are a means of assigning consumer groups to particular plans and partitioning resources among consumer groups by specifying parameters for each resource allocation method.</p>
</li>
<li>
<p><span class="italic">Subplans</span>, which the DBA can create within a resource plan, allow further subdivision of resources among different users of an application.</p>
</li>
<li>
<p><span class="italic">Levels</span> provide a mechanism to specify distribution of unused resources among available users. Up to eight levels of resource allocation can be specified.<a id="sthref421"></a></p>
</li>
</ul>
<p>The Database Resource Manager enables you to map a resource consumer group to a service so that users who connect using that service are members of the specified resource consumer group, and thus restricted to the resources available to that resource consumer group.</p>
<p>To learn more about managing the Database Resource Manager using Enterprise Manager:</p>
<ol>
<li>
<p>Access the Database Home page.</p>
</li>
<li>
<p>At the top of the page, click <span class="gui-object-action">Server</span> to display the Server page.</p>
</li>
<li>
<p>In the Resource Manager section, click <span class="gui-object-action">Getting Started</span>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
<li>
<p><a class="olink ADMIN027" href="../../server.112/e25494/dbrm.htm#ADMIN027"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the Database Resource Manager</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACIIGCE"></a>
<div id="TDPRC294" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Oracle RAC High Availability Framework</h3>
<p><a id="sthref422"></a>The Oracle RAC high availability framework enables Oracle RAC to maintain the database, components, and applications in a running state always. If an instance, component, or application fails, then it can be automatically restarted to keep Oracle Database operating at full capacity</p>
<p>Oracle Database focuses on maintaining service availability. In Oracle RAC, Oracle services are designed to be continuously available with workloads shared across one or more instances. <a id="sthref423"></a>The Oracle RAC high availability framework maintains service availability by storing the configuration information for each service in the Oracle Cluster Registry (OCR). Oracle Clusterware recovers and balances services across instances based on the service definition.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="adminoc.htm#BEJEBJAD">"About Oracle Clusterware"</a></p>
</li>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDDCDFA"></a>
<div id="TDPRC295" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Fast Application Notification (FAN)</h3>
<p>One of the main requirements of a highly available application is for it to be quickly notified when something happens to critical system components. This allows the application to execute event-handling programs. The timely execution of such programs minimizes the time it takes to react to cluster resource organizations and the impact of cluster component failures by avoiding costly connection time outs and application time outs.</p>
<p><a id="sthref424"></a><a id="sthref425"></a>Fast Application Notification is a notification mechanism that Oracle RAC uses to notify other processes about cluster configuration and service-level information, including status changes such as <code>UP</code> or <code>DOWN</code> events. FAN <code>UP</code> and <code>DOWN</code> events can apply to instances, services, and nodes. FAN also publishes Load Balancing Advisory events.</p>
<p>FAN enables the automated recovery of applications when cluster components fail. For cluster configuration changes, the Oracle RAC high availability framework publishes a FAN event immediately when a change occurs regarding the state of the instances in the cluster. Instead of waiting for the application to query the database and detect a problem, applications can receive FAN events and react immediately.</p>
<p><a id="sthref426"></a>FAN <code>UP</code> and <code>DOWN</code> events provide the following benefits:</p>
<ul>
<li>
<p>For <code>DOWN</code> events, the disruption to the application can be minimized because sessions that are connected to the failed instance or node can be terminated. Incomplete transactions can be terminated and the application user notified immediately. Application users who request connections are directed to instances that are started and are providing the requested service.</p>
</li>
<li>
<p>For <code>UP</code> events, when services and instances are started, new connections can be created so that the application can immediately take advantage of the extra resources.</p>
</li>
</ul>
<p><a id="sthref427"></a>Oracle Clusterware and Oracle RAC utilize Oracle Notification Service (ONS) to propagate FAN messages both within the Oracle cluster and to client or mid-tier machines. ONS is installed with Oracle RAC and the Oracle Clusterware resources to manage the ONS daemon are created automatically during the installation process. ONS daemons run locally sending messages to and receiving messages from a configured list of nodes (where other ONS daemons are active).</p>
</div>
<!-- class="sect2" -->
<a id="CACCBDFA"></a>
<div id="TDPRC296" class="sect2">
<h3 class="sect2">About FAN Callouts</h3>
<p><a id="ABC2451807"></a><a id="ABC2451807SRI1"></a><span class="bold">FAN callouts</span> are server-side executable files that Oracle RAC runs immediately when high availability events occur. A callout is essentially a shell script or precompiled executable written in any programming language. Some examples of how you can use FAN callouts to automate the actions performed when events occur in a cluster configuration are as follows:</p>
<ul>
<li>
<p>Starting and stopping server-side applications</p>
</li>
<li>
<p>Relocating low-priority services when high-priority services come online</p>
</li>
<li>
<p>Sending text or numeric messages to pagers</p>
</li>
<li>
<p>Executing shell scripts</p>
</li>
</ul>
<p>The executable files for FAN callouts are stored in the <code><span class="italic">Grid_home</span>/racg/usrco</code> subdirectory. If this subdirectory does not exist in your Grid home, then you must create this directory with the same permissions and ownership as the <code><span class="codeinlineitalic"><span class="italic">Grid_home</span></span></code><code>/</code><code>racg/tmp</code> subdirectory.</p>
<p>All executables in the <code><span class="italic">Grid_home</span>/racg/usrco</code> subdirectory are executed immediately, in an asynchronous fashion, when a FAN event received through the ONS. A copy of the executable files used by FAN callouts should be available on every node that runs Oracle Clusterware. <a id="sthref428"></a>Example callout scripts are available on Oracle Technology Network at <code><a href="http://www.oracle.com/technetwork/database/enterprise-edition/twpracwkldmgmt-132994.pdf">http://www.oracle.com/technetwork/database/enterprise-edition/twpracwkldmgmt-132994.pdf</a></code></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDGCCDI">"About Connection Load Balancing"</a></p>
</li>
<li>
<p><a href="#CHDJGAAI">"About the Load Balancing Advisory"</a></p>
</li>
<li>
<p><a class="olink RACAD7128" href="../../rac.112/e41960/hafeats.htm#RACAD7128"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about configuring Fast Application Notification and FAN callouts</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDJGAAI"></a>
<div id="TDPRC297" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About the Load Balancing Advisory</h3>
<p><a id="ABC2451683"></a>The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing. Applications can take advantage of the load balancing Fast Application Notification (FAN) events to direct work requests to the instance in the cluster that provides the best performance based on the workload management directives that you have defined for that service. Also, when an instance is restarted, Oracle RAC uses FAN events to notify the application's connection pool so that the connection pool can create connections to the recently started instance and take advantage of the additional resources that this instance provides</p>
<p>The load balancing advisory is integrated with the Automatic Workload Repository built into Oracle Database 11<span class="italic">g</span>. The Automatic Workload Repository measures response time and CPU consumption for each service.</p>
<p>The advice given by the Load Balancing Advisory takes into account the power of the server and the current workload of the service on the server. Enabling the Load Balancing Advisory helps improve the throughput of applications by not sending work to instances that are overworked, running slowly, not responding, or have failed.</p>
<p><a id="sthref429"></a>Your application can take advantage of the Load Balancing Advisory without any programmatic changes if you use an integrated Oracle client, one that has the Run-time Connection Load Balancing feature. Due to the integration with FAN, Oracle integrated clients are more aware of the current status of an Oracle cluster. This prevents client connections from waiting or trying to connect to an instance that is no longer available. The integrated clients for FAN events include Oracle Database 11<span class="italic">g</span> JDBC, Oracle Database 11<span class="italic">g</span> ODP.NET, and Oracle Database 11<span class="italic">g</span> Oracle Call Interface (OCI).</p>
<p><a id="sthref430"></a>You configure your Oracle RAC environment to use the Load Balancing Advisory by defining service-level goals for each service used. Defining a service-level goal enables the Load Balancing Advisory for that service and enables the publication of FAN load balancing events. There are two types of service-level goals for Run-time Connection Load Balancing:</p>
<ul>
<li>
<p>Service Time&mdash;The Load Balancing Advisory attempts to direct work requests to instances according to their response time. Load Balancing Advisory data is based on the elapsed time for work done by connections using the service, and the available bandwidth to the service. This goal is best suited for workloads that require varying lengths of time to complete, for example, an internet shopping system.</p>
</li>
<li>
<p>Throughput&mdash;The Load Balancing Advisory measures the percentage of the total response time that the CPU consumes for the service. This measures the efficiency of an instance, rather than the response time. This goal is best suited for workloads where each work request completes in a similar amount of time, for example, a trading system.</p>
</li>
</ul>
<p>If you do not select the Enable Load Balancing Advisory option, then the service-level goal is set to None, which disables load balancing for that service.<a id="sthref431"></a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDCDFA">"About Fast Application Notification (FAN)"</a></p>
</li>
<li>
<p><a href="#CHDCGJJJ">"Configuring Clients for High Availability"</a></p>
</li>
<li>
<p><a href="#CACEDJBG">"Administering Services"</a></p>
</li>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
<li>
<p><a class="olink RACAD7134" href="../../rac.112/e41960/hafeats.htm#RACAD7134"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about integrated Oracle clients</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDGCCDI"></a>
<div id="TDPRC298" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Connection Load Balancing</h3>
<p><a id="sthref432"></a>Oracle Net is a software component that resides on the client and on the Oracle database server. It establishes and maintains the connection between the client application and the server, and exchanges messages between them using industry standard protocols. For the client application and a database to communicate, the client application must specify location details for the database it wants to connect to, and the database must provide some sort of identification or address.</p>
<p><a id="sthref433"></a>On the database server, the Oracle Net Listener, commonly known as the listener, is a process that listens for client connection requests. The configuration file for the listener is the <code>listener.ora</code>.</p>
<p>Oracle Database 11<span class="italic">g</span> database clients use SCAN and the easy connect method to connect to the database. SCAN can resolve to multiple IP addresses, reflecting multiple listeners in the cluster handling public client connections. When using the easy connect method, you do not have to configure any client network files. You simply specify a connect identifier with the following format:</p>
<pre>
<span class="italic">SCAN</span>[:<span class="italic">port</span>]/<span class="italic">service_name</span>
</pre>
<p><span class="italic">SCAN</span> represents the SCAN for your cluster. Specifying the TCP port identifier is optional. The <span class="italic">service_name</span> is the name of a database service.</p>
<p>You can also use Net Configuration Assistant (NETCA) to create a <span class="bold">net service name</span>, a simple name for the database service. The net service name resolves to the <span class="bold">connect descriptor</span>, which is the network address of the database and the name of the database service. The address portion of the connect descriptor is actually the protocol address of the listener. <a id="sthref434"></a><a id="sthref435"></a><a id="sthref436"></a>The client uses a connect descriptor to specify the database or instance to which the client wants to connect.</p>
<p>When a net service name is used, establishing a connection to a database instance takes place by first mapping the net service name to the connect descriptor. This mapped information is stored in one or more repositories of information that are accessed using naming methods. The most commonly used naming method is Local Naming, where the net service names and their connect descriptors are stored in a localized configuration file named <code>tnsnames.ora</code>.</p>
<p><a id="sthref437"></a><a id="sthref438"></a><a id="sthref439"></a>When the client connects to the cluster database using a service, you can use the Oracle Net connection load balancing feature to spread user connections across all the instances that are supporting that service. There are two types of load balancing that you can implement: client-side and server-side load balancing. In an Oracle RAC database, client connections should use both types of connection load balancing. When you create an Oracle RAC database using Oracle Database Configuration Assistant (DBCA), DBCA configures and enables server-side load balancing by default.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDGECDC">"Verifying Oracle Net Supports Newly Created Services"</a></p>
</li>
<li>
<p><a class="olink ADMQS041" href="../../server.112/e10897/network.htm#ADMQS041"><span class="italic">Oracle Database 2 Day DBA</span></a></p>
</li>
</ul>
</div>
<div id="TDPRC299" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref440"></a>
<h4 class="sect3">About Client-Side Load Balancing</h4>
<p><a id="sthref441"></a><a id="sthref442"></a><a id="sthref443"></a>Client-side load balancing balances the connection requests across the listeners. When the listener receives the connection request, the listener connects the user to an instance that the listener knows provides the requested service.</p>
<p><a id="sthref444"></a>Client-side load balancing is defined in your client connection definition by setting the parameter <code>LOAD_BALANCE=yes</code> in the <code>tnsnames.ora</code> file. When you set this parameter to <code>yes</code>, the Oracle client randomly selects an address from the address list, and connects to that node's listener. This balances client connections across the available listeners in the cluster.</p>
<p>When you create an Oracle RAC database using DBCA, the assistant creates a sample load balancing connection definition in the <code>tnsnames.ora</code> file.</p>
<p>Client-side load balancing includes connection failover. With connection failover, if an error is returned from the chosen address, then Oracle Net Services tries the next address in the address list until either a successful connection is made or it has exhausted all the addresses in the list.</p>
</div>
<!-- class="sect3" -->
<div id="TDPRC300" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref445"></a>
<h4 class="sect3">About Server-Side Load Balancing</h4>
<p><a id="sthref446"></a><a id="sthref447"></a><a id="sthref448"></a>With server-side load balancing, the listener directs a connection request to the best instance currently providing the service by using information from the Load Balancing Advisory.</p>
<p><a id="sthref449"></a><a id="sthref450"></a>For each service, you can define the method the listener uses for load balancing by setting the connection load balancing goal. You can use a goal of either long or short for connection load balancing. These goals have the following characteristics:</p>
<ul>
<li>
<p>Short&mdash;Connections are distributed across instances based on the amount of time that the service is used. Use the Short connection load balancing goal for applications that have connections of brief duration.</p>
</li>
<li>
<p>Long&mdash;Connections are distributed across instances based on the number of sessions in each instance, for each instance that supports the service. Use the Long connection load balancing goal for applications that have connections of long duration. This is typical for connection pools and SQL*Forms sessions. Long is the default connection load balancing goal.</p>
</li>
</ul>
<p>Any services created by using DBCA use the Long connection load balancing goal by default.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you did not use DBCA to create your database, or if you are using listener ports other than the default of 1521, then you must configure the <code>LOCAL_LISTENER</code> and <code>REMOTE_LISTENER</code> database initialization parameters for your cluster database to point to <code><span class="codeinlineitalic">SCAN:port</span></code>.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDBCGEJ"></a>
<div id="TDPRC301" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Run-time Connection Load Balancing</h3>
<p><a id="sthref451"></a><a id="sthref452"></a>Run-time Connection Load Balancing is a feature of Oracle <a id="sthref453"></a>connection pools that can distribute client work requests across the instances in an Oracle RAC database based on the Load Balancing Advisory information. The connection allocation is based on the current performance level provided by the database instances as indicated by the Load Balancing Advisory FAN events. This provides load balancing at the transaction level, instead of load balancing at the time of the initial database connection.</p>
<p><a id="sthref454"></a>With Run-time Connection Load Balancing, applications use Load Balancing Advisory information to provide better performance to users. OCI Session pools and ODP.NET connection pools support Run-time Connection Load Balancing. <a id="sthref455"></a>For Java applications, Oracle recommends the Universal Connection Pool (UCP). The Universal Connection Pool is integrated to take advantage of Load Balancing Advisory information. UCP, introduced in Oracle Database 11<span class="italic">g</span> patch set 1 (11.1.0.7), can be used against Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span>.</p>
<p>You must enable the client data source for Run-time Connection Load Balancing with a service that has the following configuration:</p>
<ul>
<li>
<p>The Load Balancing Advisory is enabled and the service-level goal is set to either Service Time or Throughput.</p>
</li>
<li>
<p>The service connection load balancing goal is set to Short.</p>
</li>
</ul>
<p><a href="#CHDCHAEB">Figure 7-1, "Run-time Connection Load Balancing"</a> illustrates Run-time Connection Load Balancing. In this illustration, the Oracle RAC database has three instances. Suppose that the Load Balancing Advisory indicates that Instance1 and Instance3 have the best performance, while Instance2 currently has less than optimal performance. When Run-time Connection Load Balancing is enabled on the implicit connection cache, the following process occurs:</p>
<ol>
<li>
<p>A client requests a connection from the connection pool.</p>
</li>
<li>
<p>Run-time Connection Load Balancing selects the connection that belongs to the most efficient (best) instance from the connection pool. In <a href="#CHDCHAEB">Figure 7-1</a>, there are three possible nodes to which the connection can be routed. Instance1, which has the least amount of CPU workload, is currently being assigned about 60 percent of the incoming connections. Instance2, which is currently overloaded, is only being assigned around 10 percent of the incoming connections. Instance3, which has a high workload, is being assigned around 30 percent of the incoming connections. The best instance to handle the connection request in this case would be Instance1.</p>
</li>
<li>
<p>The client receives the connection that would process the work request with the best response time.</p>
</li>
</ol>
<div id="TDPRC302" class="figure">
<p class="titleinfigure"><a id="CHDCHAEB"></a>Figure 7-1 Run-time Connection Load Balancing</p>
<img width="356" height="521" src="img/tdprc003.gif" alt="Description of Figure 7-1 follows" /><br />
<a id="sthref456" href="img_text/tdprc003.htm">Description of "Figure 7-1 Run-time Connection Load Balancing"</a><br />
<br /></div>
<!-- class="figure" -->
<p><a id="sthref457"></a>Oracle Database 11<span class="italic">g</span> introduces an additional flag in the load balancing advisory event called affinity hint. The affinity hint is automatic when load balancing advisory is turned on through setting the goal on the service. This flag is for temporary affinity that lasts for the duration of a web session. Web conversations often connect and disconnect many times during the entire session. During each of these connects, it may access the same or similar data, for example, a shopping cart, Siebel, and so on. Affinity can improve buffer cache efficiency, which lowers cpu usage and transaction latency. The Affinity Hint is a flag that indicates if Affinity is active or inactive for a particular instance and service combination. Different instances offering the same service can have different settings for the Affinity Hint.</p>
<p>Applications using Oracle Database 11<span class="italic">g</span> and UCP, can take advantage of this new affinity feature. If the affinity flag is turned on in the Load Balancing Advisory event, then UCP creates an Affinity Context for the Web session such that when that session does a get connection from the pool, the pool always tries to give it a connection to the instance it connected to the first time it acquired a session. The choice of instance for the first connection is based on the current load balancing advisory information.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACFEADG"></a>
<div id="TDPRC303" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Creating Services</h2>
<p>To manage workloads, you can define services that you assign to a particular application or to a subset of an application's operations. You can also use services to manage the workload for different types of work. You <a id="sthref458"></a>can create a service using Oracle Enterprise Manager Database Control.</p>
<p class="subhead2"><a id="TDPRC304"></a>To create a service:</p>
<ol>
<li>
<p>On the Cluster Database Home page, click <span class="gui-object-action">Availability</span>.</p>
<p>The Availability page appears.</p>
<img width="800" height="391" src="img/wlm001_new.gif" alt="Description of wlm001_new.gif follows" /><br />
<a id="sthref459" href="img_text/wlm001_new.htm">Description of the illustration wlm001_new.gif</a><br />
<br /></li>
<li>
<p>Click <span class="gui-object-action">Cluster Managed Database Services</span> in the Services section. Enter or confirm the credentials for the Oracle RAC database and host operating system and click <span class="gui-object-action">Continue</span>.</p>
<p>The Cluster Managed Database Services page appears.</p>
<img width="659" height="196" src="img/wlm005.gif" alt="Description of wlm005.gif follows" /><br />
<a id="sthref460" href="img_text/wlm005.htm">Description of the illustration wlm005.gif</a><br />
<br /></li>
<li>
<p>Click <span class="gui-object-action">Create Service</span>.</p>
<p>The Create Service page appears.</p>
</li>
<li>
<p>Enter the name of your service in the Service Name field, for example, <code>DEVUSERS</code>.</p>
</li>
<li>
<p>Select <span class="gui-object-action">Start Service after creation</span> if you want the service to be started after it is created. Select <span class="gui-object-action">Update local naming parameter (tnsnames.ora) file</span> if you want DB Control to add the new service to the local Oracle Net Services <code>tnsnames.ora</code> file.</p>
<img width="650" height="162" src="img/wlm006_new.gif" alt="Description of wlm006_new.gif follows" /><br />
<a id="sthref461" href="img_text/wlm006_new.htm">Description of the illustration wlm006_new.gif</a><br />
<br /></li>
<li>
<p>(Policy-managed databases only) For the service type, select <span class="gui-object-action">UNIFORM</span> or SINGLETON.</p>
<img width="719" height="298" src="img/wlm006.gif" alt="Description of wlm006.gif follows" /><br />
<a id="sthref462" href="img_text/wlm006.htm">Description of the illustration wlm006.gif</a><br />
<br /></li>
<li>
<p>(Administrator-managed databases only) For each instance choose whether that instance is a Preferred instance or an Available instance. If you do not want the service to run on an instance under any circumstances, then set the Service Policy for that instance to Not Used.</p>
<img width="608" height="153" src="img/wlm006_admin_new.gif" alt="Description of wlm006_admin_new.gif follows" /><br />
<a id="sthref463" href="img_text/wlm006_admin_new.htm">Description of the illustration wlm006_admin_new.gif</a><br />
<br /></li>
<li>
<p>In the Service Properties section, select <span class="gui-object-action">Short</span> for Connection Load Balancing Goal to distribute the connection workload based on elapsed time instead of the overall number of connections. Otherwise, choose <span class="gui-object-action">Long</span>.</p>
</li>
<li>
<p>Select <span class="gui-object-action">Enable Load Balancing Advisory</span> under the sub-heading Notification Properties to enable the Load Balancing Advisory for this service, as shown in the following screenshot. Choose a service-level goal of either <span class="gui-object-action">Service Time</span> or <span class="gui-object-action">Throughput</span>.</p>
<img width="632" height="653" src="img/wlm007_editions.gif" alt="Description of wlm007_editions.gif follows" /><br />
<a id="sthref464" href="img_text/wlm007_editions.htm">Description of the illustration wlm007_editions.gif</a><br />
<br /></li>
<li>
<p>Select <span class="gui-object-action">Enable Fast Application Notification</span> under the heading Notification Properties if this service is used by an Oracle Call Interface (OCI) or ODP.NET application, and you want to enable FAN.</p>
</li>
<li>
<p>In the Service Threshold Levels section, you can optionally set the service-level thresholds by entering a value in milliseconds for Warning and Critical thresholds for the Elapsed Time and CPU Time metrics.</p>
</li>
<li>
<p>If you want to use a Resource Plan to control the resources used by this service, then select the name of the consumer group from the Consumer Group Mapping list in the Resource Management Properties section. For example, you might choose the <code>LOW_GROUP</code> consumer group to give development users low priority to database resources.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot change the consumer group name for a service on the Edit Service page. This is because there may be several consumer groups associated with a given service. However, the Edit Service page contains a link to the Resource Consumer Group Mapping page, where you can modify the consumer group mapping for the service.</div>
</li>
<li>
<p>If this service is used by a specific Oracle Scheduler job class, then you can specify the mapping by selecting the name from the Job Scheduler Mapping list in the Resource Management Properties.</p>
</li>
<li>
<p>Click <span class="gui-object-action">OK</span> to create the service.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
<li>
<p><a href="#CHDGCCDI">"About Connection Load Balancing"</a></p>
</li>
<li>
<p><a href="#CHDJGAAI">"About the Load Balancing Advisory"</a></p>
</li>
<li>
<p><a href="#CHDDCDFA">"About Fast Application Notification (FAN)"</a></p>
</li>
<li>
<p><a href="#CACEDJBG">"Administering Services"</a></p>
</li>
<li>
<p><a class="olink ADMIN033" href="../../server.112/e25494/schedover.htm#ADMIN033"><span class="italic">Oracle Database Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CACEDJBG"></a>
<div id="TDPRC307" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Administering Services</h2>
<p><a id="sthref465"></a>You can create and administer services using Enterprise Manager. You can also use the SRVCTL utility to perform most service management tasks.</p>
<p>The following sections describe how to manage services for your cluster database:</p>
<ul>
<li>
<p><a href="#CHDBBIHD">About Service Administration Using Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CHDEGAFG">Using the Cluster Managed Database Services Page</a></p>
</li>
<li>
<p><a href="#CHDGECDC">Verifying Oracle Net Supports Newly Created Services</a></p>
</li>
</ul>
<a id="CHDBBIHD"></a>
<div id="TDPRC308" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Service Administration Using Enterprise Manager</h3>
<p>The Cluster Managed Database Services page is the master page for beginning all tasks related to services. To access this page, go to the Cluster Database Maintenance page, then click <span class="gui-object-action">Cluster Managed Database Services</span> in the Services section. You can use this page and links from this page to do the following:</p>
<ul>
<li>
<p>View a list of services for the cluster.</p>
</li>
<li>
<p>View the instances on which each service is currently running.</p>
</li>
<li>
<p>View the status for each service.</p>
</li>
<li>
<p>Create or edit a service.</p>
</li>
<li>
<p>Start or stop a service.</p>
</li>
<li>
<p>Enable or disable a service.</p>
</li>
<li>
<p>Perform instance-level tasks for a service.</p>
</li>
<li>
<p>Delete a service.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACEDJBG">"Administering Services"</a></p>
</li>
<li>
<p><a href="#CHDJIAJH">"About Oracle Services"</a></p>
</li>
<li>
<p><a href="#CACFEADG">"Creating Services"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDEGAFG"></a>
<div id="TDPRC309" class="sect2">
<h3 class="sect2">Using the Cluster Managed Database Services Page</h3>
<p><a id="sthref466"></a>When managing services using Enterprise Manager, you use the Cluster Managed Database Services page.</p>
<p>On the Cluster Managed Database Services page you can perform the following tasks:</p>
<ul>
<li>
<p>View a list of services for the cluster, the instances on which each service is currently running, the status of each service, the server pool associated with the service, the responsiveness of the service, and any alerts or messages for that service.</p>
</li>
<li>
<p>Start or stop a service.</p>
</li>
<li>
<p>Test the connection for a service, or display the Oracle Net TNS strings being used.</p>
</li>
<li>
<p>Access the Create Service page.</p>
</li>
<li>
<p>Edit, delete, enable, or disable a service.</p>
</li>
<li>
<p>Access the Edit Server Pool page for the server pool associate with each service.</p>
</li>
</ul>
<p class="subhead2"><a id="TDPRC310"></a>To access the Cluster Managed Database Services page:</p>
<ol>
<li>
<p>On the Cluster Database Home page, click the <span class="gui-object-action">Availability</span> tab.</p>
</li>
<li>
<p>On the Availability subpage, under the Services heading, click <span class="gui-object-action">Cluster Managed Database Services</span>.</p>
<p>The Cluster and Database Login page appears.</p>
</li>
<li>
<p>Enter credentials for the database and for the cluster that hosts the Oracle RAC database, then click <span class="gui-object-action">Continue</span>.</p>
<p>The Cluster Managed Database Services page appears and displays the services that are available on the cluster database instances.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBBIHD">"About Service Administration Using Enterprise Manager"</a></p>
</li>
<li>
<p><a href="#CHDJIAJH">"About Oracle Services"</a></p>
</li>
<li>
<p><a href="#CACFEADG">"Creating Services"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDGECDC"></a>
<div id="TDPRC305" class="sect2">
<h3 class="sect2">Verifying Oracle Net Supports Newly Created Services</h3>
<p><a id="sthref467"></a>By using GNS and configuring a SCAN for your cluster, you no longer have to modify the network setup on each client. This section shows you how to verify that the new service is recognized by Oracle Net and available to the database clients.</p>
<p>When using utilities to manage your cluster, databases, database instances, Oracle Automatic Storage Management (Oracle ASM), and listeners, use the appropriate binary that is in the home directory of the object or component you are managing and set your <code>ORACLE_HOME</code> environment variable to point to this directory. For example, to use <code>lsnrctl</code> to manage a database instance or its listener, then use the binaries located in the Oracle home where the database instance or listener is running, and set the <code>ORACLE_HOME</code> environment variable to the location of that Oracle home.</p>
<p class="subhead2"><a id="TDPRC306"></a>To verify Oracle Net Services supports the newly created service:</p>
<ol>
<li>
<p><a id="sthref468"></a>Determine if the listener on the local node recognizes the new service by using the following command:</p>
<pre>
lsnrctl status LISTENER_SCAN1
</pre>
<p>You should see a list for the new service, similar to the following:</p>
<pre>
Services Summary...
Service "DEVUSERS.example.com" has 2 instance(s).
  Instance "sales1", status READY, has 1 handler(s) for this service...
  Instance "sales2", status READY, has 1 handler(s) for this service...
</pre>
<p>The displayed name for your newly created service, for example <code>DEVUSERS.example.com</code>, is the service name you use in your connection strings.</p>
</li>
<li>
<p>Test the Oracle Net Services configuration by attempting to connect to the Oracle RAC database using SQL*Plus and the SCAN. The connect identifier for easy connect naming has the following format:</p>
<pre>
"[//]<span class="italic">SCAN</span>[:<span class="italic">port</span>]/<span class="italic">service_name</span>"
</pre>
<p><span class="italic">SCAN</span> is the SCAN for your cluster, which defaults to <span class="italic">cluster_name</span>.<span class="italic">GNS_sub_domain</span>. The <span class="italic">service_name</span> is the name of the database service you want to use for connecting to the database. You can optionally specify the TCP port number on which the Oracle SCAN listener listens for connections.</p>
<p>For example, you might use the following commands to connect to the DEVUSERS service for Oracle RAC database in the <code>docrac</code> cluster:</p>
<pre>
$ sqlplus /nolog
SQL&gt; CONNECT system@"docrac/DEVUSERS.example.com"
Enter password: <span class="italic">password</span>
</pre>
<p>After you enter the password, you should see a message indicating you are successfully connected to the Oracle RAC database. If you get an error message, then examine the connect identifier and verify the user name, password, and service name were typed in correctly and all the information is correct for your Oracle RAC environment.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDCGJJJ"></a>
<div id="TDPRC311" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Clients for High Availability</h2>
<p>There are two central elements to consider when automating failover for application clients. First, clients that are connected at the time of failure must be quickly and automatically notified that a failure has occurred to avoid waiting for TCP/IP network time-outs before attempting to connect to the new database instance (such time-outs range anywhere from eight minutes to two hours, depending on operating system). Oracle RAC configurations use Fast Application Notification (FAN) to notify JDBC clients, OCI clients, and ODP.NET clients. FAN event notifications and callouts enable automatic and fast redirection of clients after a site failure.</p>
<p>The second central element of client failover, is the redirection of clients to the new instance after a failure has occurred, which can be implemented using services. When you create services in an Oracle RAC database, if an instance to which you have assigned a service becomes unavailable, then Oracle RAC relocates the service to an available instance in the database. Users can access the service independent of the instance providing it because, using listener registration, all listeners in the cluster are aware of which instances are currently providing a service when a connection request comes in.</p>
<p>In addition to FAN, the client can limit the time it waits for a response from the server before trying the next address in the connection list without waiting for the TCP/IP network time out. To enable the time out limit, set the <code>sqlnet.ora</code> parameter <code>sqlnet.outbound_connection_timeout</code> = <span class="italic">x</span>, where <span class="italic">x</span> represents the maximum amount of time, in seconds, for a client to establish an Oracle Net connection to the database instance, for example three seconds.</p>
<pre>
sqlnet.outbound_connection_timeout = 3
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You should not configure the sqlnet.outbound_connection_timeout parameter on the server <code>sqlnet.ora</code> file, as this can impact Oracle Clusterware operations.</div>
<p>This section deals with configuration FAN for application clients, and contains the following topics:</p>
<ul>
<li>
<p><a href="#BABJDGJD">Configuring JDBC Clients</a></p>
</li>
<li>
<p><a href="#BABBIEFB">Configuring OCI Clients</a></p>
</li>
<li>
<p><a href="#CHDJJHJJ">Configuring ODP.NET Clients</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDCDFA">"About Fast Application Notification (FAN)"</a></p>
</li>
<li>
<p><a href="#CHDJIAJH">"About Oracle Services"</a></p>
</li>
</ul>
</div>
<a id="BABJDGJD"></a>
<div id="TDPRC312" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring JDBC Clients</h3>
<p>An application that uses JDBC connections can use a connection pool, so an existing connection can be used in the pool instead of making a new connection to the database every time you access data. The Universal Connection Pool (UCP) is a Java-based connection pool that supports any type of connection (JDBC, LDAP, JCA), to any type of database (Oracle or non-Oracle) with any middle tier (Oracle or non-Oracle). It also supports standalone deployments such as TopLink or BPEL. UCP includes integration features of Oracle Database such as Oracle RAC, including Fast Connection Failover, Run-time Connection Load Balancing, and Connection Affinity for Oracle RAC instances.</p>
<p>Without Fast Connection Failover, if a node goes down and the application attempts to connect to that instance, then the connection request might hang for several minutes waiting for the TCP time-out to be reached. If you chose not to use a connection pool with the integrated FCF feature, then your application can still be notified of Oracle RAC high availability events by configuring the Connection Failure Notification feature.</p>
<p>This section explains how to configure Java Database Connectivity (JDBC) clients for:</p>
<ul>
<li>
<p><a href="#CACBAGAA">Configuring JDBC Clients for Fast Connection Failover</a></p>
</li>
<li>
<p><a href="#CACBFIHB">Configuring JDBC Clients for Connection Failure Notification</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Connection Failure Notification is redundant with Fast Connection Failover as implemented by the UCP. You should not configure both within the same application.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACEGBDF">"About Workload Management"</a></p>
</li>
<li>
<p><a href="#CHDJIAJH">"About Oracle Services"</a></p>
</li>
<li>
<p><a class="olink JJUCP" href="../../java.112/e12265/toc.htm"><span class="italic">Oracle Universal Connection Pool for JDBC Developer's Guide</span></a></p>
</li>
</ul>
</div>
<a id="CACBAGAA"></a>
<div id="TDPRC313" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Configuring JDBC Clients for Fast Connection Failover</h4>
<p>The Universal Connection Pool subscribes to the FAN Load Balancing events automatically when you configure fast connection failover. Instead of randomly assigning a free connection to a work request, the connection pool chooses the connection that gives the best service according to the latest information it has received. If a node becomes hung, then the connection pool gradually shifts connections from the hung node to other nodes in the cluster.</p>
<p class="subhead2"><a id="TDPRC314"></a>To configure JDBC clients for Fast Connection Failover:</p>
<ol>
<li>
<p>Use the Cluster Managed Services page in Oracle Enterprise Manager Database Control or Oracle Enterprise Manager Grid Control to create new services. See <a href="#CACFEADG">"Creating Services"</a> for more information about creating services.</p>
</li>
<li>
<p>Enable fast connection failover for JDBC clients by setting the UCP DataSource property FastConnectionFailoverEnabled to <code>TRUE</code>. Also, Configure a remote Oracle Notification Services (ONS) subscription on the JDBC client so that an ONS daemon is not required on the client, as shown in the following example:</p>
<pre>
PoolDataSource pds = PoolDataSourceFactory.getPoolDataSource();
Pds.setConnnectionPoolName(&rdquo;FCFSampleUCP&rdquo;);
<span class="bold">pds.setONSConfiguration(&rdquo;nodes=racnode1:4200,racnode2:4200&rdquo;);</span>
<span class="bold">pds.setFastConnectionFailoverEnabled(true);</span>
pds.setConnectionFactoryClassName(&rdquo;oracle.jdbc.pool.OracleDataSource&rdquo;);
</pre>
<p>The remote ONS subscription must contain every host that the client application can use for failover.</p>
</li>
<li>
<p>Set the <code>oracle.net.ns.SQLnetDef.TCP_CONNTIMEOUT_STR</code> property to a nonzero value on the data source. When this property is set, if the JDBC client attempts to connect to a host that is unavailable, then the connection attempt is bounded to the time specified for <code>oracle.net.ns.SQLnetDef.TCP_CONNTIMEOUT_STR</code>. After the specified time has elapsed and a successful connection has not been made, the client attempts to connect to the next host in the address list. Setting this property to a value of three seconds is sufficient for most installations.</p>
</li>
<li>
<p>Configure JDBC clients to use a connect descriptor that includes the SCAN and the service name, and optionally the port that the SCAN listener listens on, for example:</p>
<pre>
@//docrac.example.com:1521/orcl_JDBC
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not configure Transparent Application Failover (TAF) with Fast Connection Failover for JDBC clients as TAF processing can interfere with FAN ONS processing.</div>
<p>In the JDBC application, you would connect to the database using a connect string, such as the following one:</p>
<pre>
pds.setURL("jdbc:oracle:thin:@//docrac.example.com:1521/orcl_JDBC")
</pre>
<p>If you are using a JDBC driver, then you must include the complete connect descriptor in the URL because the JDBC driver does not use Oracle Net.</p>
</li>
<li>
<p>Make sure that both <code>ucp.jar</code> and <code>ons.jar</code> are in the application CLASSPATH.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDCDFA">"About Fast Application Notification (FAN)"</a></p>
</li>
<li>
<p><a href="#CHDCGJJJ">"Configuring Clients for High Availability"</a></p>
</li>
<li>
<p><a class="olink JJDBC27000" href="../../java.112/e16548/ocitaf.htm#JJDBC27000"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about fast connection failover and configuring ONS</p>
</li>
<li>
<p><a class="olink JJUCP" href="../../java.112/e12265/toc.htm"><span class="italic">Oracle Universal Connection Pool for JDBC Developer's Guide</span> f</a>or more information</p>
</li>
<li>
<p><a class="olink TDPJD176" href="../../appdev.112/e12137/querdata.htm#TDPJD176"><span class="italic">Oracle Database 2 Day + Java Developer's Guide</span></a> for information about creating a method to authenticate users</p>
</li>
<li>
<p><a class="olink RACAD7134" href="../../rac.112/e41960/hafeats.htm#RACAD7134"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about configuring client failover</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CACBFIHB"></a>
<div id="TDPRC315" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Configuring JDBC Clients for Connection Failure Notification</h4>
<p>JDBC Connection Failure Notification enables standalone Oracle JDBC connections to respond to node failures quicker. This feature enables a stand-alone connection to listen for Oracle RAC node down events and respond to a node down event by marking the connection closed, permitting user applications to begin recovery quicker. It does not alter the behavior of the application, except that JDBC method calls throw exceptions more quickly after a node goes down.</p>
<p>To configure Connection Failure Notification, you use the ConnectionFailureNotification connection property.</p>
<p class="subhead2"><a id="TDPRC588"></a>To configure JDBC clients for Connection Failure Notification:</p>
<ol>
<li>
<p>Set the Connection Failure Notification property either as a system property using the -D option, or by including it in the connection properties argument when creating a connection.</p>
<p>To set it as a system property, use a command similar to the following:</p>
<pre>
java -Doracle.jdbc.ConnectionFailureNotification=true
</pre>
<p>To set it within the connection properties argument, use code similar to the following:</p>
<pre>
Properties props = new Properties();
props.put("ConnectionFailureNotification", "true");
Connection = DriverManager.getConnection(url, props);
</pre></li>
<li>
<p>Configure the transport mechanism by which the node down events are received. If ONS is the selected transport mechanism, then use the SetONSConfiguration property, as demonstrated in the following code, where <code>racnode1</code> and <code>racnode2</code> represent nodes in the cluster that have ONS running on them:</p>
<pre>
props.setONSConfiguration(&rdquo;nodes=racnode1:4200,racnode2:4200&rdquo;);
</pre></li>
<li>
<p>Make sure that <code>ons.jar</code> is in the application CLASSPATH.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACIIGCE">"About Oracle RAC High Availability Framework"</a></p>
</li>
<li>
<p><a href="#CHDCGJJJ">"Configuring Clients for High Availability"</a></p>
</li>
<li>
<p><a class="olink JJDBC27000" href="../../java.112/e16548/ocitaf.htm#JJDBC27000"><span class="italic">Oracle Database JDBC Developer's Guide</span></a> for more information about configuring ONS</p>
</li>
<li>
<p><a class="olink TDPJD176" href="../../appdev.112/e12137/querdata.htm#TDPJD176"><span class="italic">Oracle Database 2 Day + Java Developer's Guide</span></a> for information about creating a method to authenticate users</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABBIEFB"></a>
<div id="TDPRC317" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring OCI Clients</h3>
<p>The Oracle Call Interface (OCI) provides integration with FAN and Load Balancing Advisory events. To take advantage of the Load Balancing Advisory, you must enable the OCI Session pool. OCI clients can register to receive notifications about Oracle RAC high availability events and respond when events occur. This improves the connection failover response time in OCI and also removes terminated connections from connection and session pools. This feature works for all OCI client applications.</p>
<p class="subhead2"><a id="TDPRC318"></a>To configure OCI clients to receive FAN notifications:</p>
<ol>
<li>
<p>Use the Cluster Managed Services page in Oracle Enterprise Manager Database Control or Oracle Enterprise Manager Grid Control to a create services for the OCI clients. See <a href="#CACFEADG">"Creating Services"</a> for more information about creating services.</p>
<p>You should configure the primary instance as preferred for that service. For Notification Properties, choose "Enable Fast Application Notification for OCI and ODP.NET Applications".</p>
<p>See <a href="#CACEDJBG">"Administering Services"</a> for more information about modifying services using Enterprise Manager.</p>
</li>
<li>
<p>Enable FAN for OCI clients by initializing the environment with the <code>OCI_EVENTS</code> parameter, as in the following example:</p>
<pre>
OCIEnvCreate(...OCI_EVENTS...)
</pre></li>
<li>
<p>Link the OCI client applications with thread library <code>libthread</code> or <code>libpthread</code>.</p>
</li>
<li>
<p>In your application, you must check if an event has occurred, using code similar to the following example:</p>
<pre>
void evtcallback_fn(ha_ctx, eventhp)
...  
printf("HA Event received.\n");
  if (OCIHandleAlloc( (dvoid *)envhp, (dvoid **)&amp;errhp, (ub4) OCI_HTYPE_ERROR, 
                      (size_t) 0, (dvoid **) 0))
    return;
  if (retcode = OCIAttrGet(eventhp, OCT_HTYPE_EVENT, (dvoid *)&amp;srvhp, (ub4 *)0,
                           OCI_ATTR_HA_SRVFIRST, errhp))
    checkerr (errhp, (sword)retcode;
  else {
     printf("found first server handle.\n");
     /*get associated instance name */
     if (retcode = OCIAttrGet(srvhp, OCI_HTYPE_SERVER, (dvoid *)&amp;instname,
                           (ub4 *)&amp;sizep, OCI_ATTR_INSTNAME, errhp))
       checkerr (errhp, (sword)retcode);
     else
       printf("instance name is %s.\n", instname);
</pre></li>
<li>
<p>After a HA event is received, clients and applications can register a callback that is invoked whenever a high availability event occurs, as shown in the following example:</p>
<pre>
/*Registering HA callback function */
  if (checkerr(errhp, OCIAttrSet(envhp, (ub4) OCI_HTYPE_ENV, 
                             (dvoid *)<span class="bold">evtcallback_fn</span>, (ub4) 0,
   <span class="bold">                          (ub4)OCI_ATTR_EVTCBK</span>, errhp)))
  {
    printf("Failed to set register EVENT callback.\n");
    return EX_FAILURE;
  }
  if (checkerr(errhp, OCIAttrSet(envhp, (ub4) OCI_HTYPE_ENV,
                                (dvoid *)<span class="bold">evtctx</span>, (ub4) 0, 
  <span class="bold">                              (ub4)OCI_ATTR_EVTCTX</span>, errhp)))
  {
    printf("Failed to set register EVENT callback context.\n");
    return EX_FAILURE;
  }
return EX_SUCCESS;
</pre>
<p>After registering an event callback and context, OCI calls the registered function once for each high availability event.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDCDFA">"About Fast Application Notification (FAN)"</a></p>
</li>
<li>
<p><a href="#CHDCGJJJ">"Configuring Clients for High Availability"</a></p>
</li>
<li>
<p><a class="olink LNOCI090" href="../../appdev.112/e10646/oci09adv.htm#LNOCI090"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for more information about event notification and user-registered callbacks</p>
</li>
<li>
<p><a class="olink RACAD7134" href="../../rac.112/e41960/hafeats.htm#RACAD7134"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about configuring fast application notification for OCI clients.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDJJHJJ"></a>
<div id="TDPRC319" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring ODP.NET Clients</h3>
<p>Oracle Data Provider for .NET (ODP.NET) connection pools subscribe to FAN notifications from Oracle RAC that indicate when nodes are down and when services are up or down. Based on these notifications, ODP.NET connection pools make idle connections, connections that were previously connected to node that failed, available again. It also creates new connections to healthy nodes if possible.</p>
<p>ODP.NET provides Run-time Connection Load Balancing to provide enhanced load balancing of the application workload. Instead of randomly selecting an available connection from the connection pool, it chooses the connection that can provide the best service based on the current workload information.</p>
<p>The procedures for enabling ODP.NET are similar to the procedures for enabling JDBC in that you must set parameters in the connection string to enable FCF. This section explains how to configure Oracle Data Provider for .NET (ODP.NET) clients for failover using FAN events.</p>
<p class="subhead2"><a id="TDPRC320"></a>To configure ODP.Net clients to receive FAN notifications:</p>
<ol>
<li>
<p>Use the Cluster Managed Services page in Oracle Enterprise Manager Database Control or Oracle Enterprise Manager Grid Control to a create services for the ODP.NET clients. See <a href="#CACFEADG">"Creating Services"</a> for more information about creating services.</p>
<p>For Notification Properties, choose "Enable Fast Application Notification for OCI and ODP.NET Applications". Set the Connection Load Balancing Goal to Long.</p>
</li>
<li>
<p>Enable Fast Connection Failover for ODP.NET connection pools by subscribing to FAN high availability events. Do this by setting the <code>ha events</code> connection string attribute to <code>true</code> either at connection time or in the data source definition. Note that this only works if you are using connection pools (the <code>pooling</code> attribute to <code>true</code>).</p>
<p>You can also enable Run-time Connection Load Balancing by setting the <code>load balancing</code> connection string attribute to <code>true</code>.</p>
<p>Use code similar to the following, where <span class="italic">username</span> is the name of the database user that the application uses to connect to the database, <span class="italic">password</span> is the password for that database user, and the service name is <code>odpserv</code>:</p>
<pre>
// C#
using System;
using Oracle.DataAccess.Client;
class HAEventEnablingSample
{
  static void Main()
  {
    OracleConnection con = new OracleConnection();

    // Open a connection using ConnectionString attributes
    // Also, enable "load balancing"
    con.ConnectionString =
      "User Id=<span class="italic">username</span>;Password=<span class="codeinlineitalic">password</span>;" +
      "Data Source=//docrac.example.com/odpserv;" +
      "Min Pool Size=10;Connection Lifetime=120;Connection Timeout=60;" +
      "HA Events=true;Incr Pool Size=5;Decr Pool Size=2";

    con.Open();
    // Carry out work against the database here.
    con.Close();
    // Dispose OracleConnection object
    con.Dispose();
    }
 }
</pre></li>
<li>
<p>The HA events are published as messages in the SYS.SYS$SERVICE_METRICS queue. You must grant dequeue permission on this queue to the database user that the application uses to connect to the database.</p>
<p>Use a command similar to the following, where <span class="italic">username</span> represents the database user that the .NET application uses to connect to the database:</p>
<pre>
execute
dbms_aqadm.grant_queue_privilege('DEQUEUE','SYS.SYS$SERVICE_METRICS', <span class="italic">username</span>);
</pre>
<p>The <span class="italic">username</span> specified in this step equals the <span class="italic">username</span> used for the User Id argument in the previous step.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDCDFA">"About Fast Application Notification (FAN)"</a></p>
</li>
<li>
<p><a href="#CHDCGJJJ">"Configuring Clients for High Availability"</a></p>
</li>
<li>
<p><a class="olink ODPNT0007" href="../../win.112/e23174/features.htm#ODPNT0007"><span class="italic">Oracle Data Provider for .NET Developer's Guide</span></a> for more information about event notification and user-registered callbacks</p>
</li>
<li>
<p><a class="olink RACAD7136" href="../../rac.112/e41960/hafeats.htm#RACAD7136"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about configuring fast application notification for ODP.NET clients.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment392">
<tr>
<td class="cellalignment399">
<table class="cellalignment397">
<tr>
<td class="cellalignment396"><a href="racbureco.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment396"><a href="racmon2.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment401">
<table class="cellalignment395">
<tr>
<td class="cellalignment396"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment396"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment396"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment396"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment396"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment396"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
