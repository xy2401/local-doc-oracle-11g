<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Administering Oracle Clusterware</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="dcterms.created" content="2015-06-03T16:55:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41959-04" />
<meta name="dcterms.isVersionOf" content="CWADD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="intro.htm" title="Previous" type="text/html" />
<link rel="Next" href="votocr.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41959.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/21</span> <!-- End Header -->
<div id="CWADD838" class="chapter"><a id="CHDJIEJC"></a> <a id="BABGEEEJ"></a>
<h1 class="chapter"><span class="secnum">2</span> Administering Oracle Clusterware</h1>
<p>This chapter describes how to administer Oracle Clusterware and includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDHIDGF">Policy-Based Cluster and Capacity Management</a></p>
</li>
<li>
<p><a href="#CHDEHIHA">Role-Separated Management</a></p>
</li>
<li>
<p><a href="#BGBGAJGA">Configuring Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CHDGIAAD">Configuring IPMI for Failure Isolation</a></p>
</li>
<li>
<p><a href="#CHDCECBJ">Cluster Time Management</a></p>
</li>
<li>
<p><a href="#BGBGDHFG">Changing Network Addresses on Manually Configured Networks</a></p>
</li>
</ul>
<a id="CHDHIDGF"></a>
<div id="CWADD91100" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Policy-Based Cluster and Capacity Management</h2>
<p>Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) introduces a different method of managing nodes and resources used by a database called <span class="italic">policy-based management</span>.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDICCFH">Overview of Server Pools and Policy-Based Management</a></p>
</li>
<li>
<p><a href="#CHDIJJJF">Server Attributes Assigned by Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CHDHDADE">Understanding Server Pools</a></p>
</li>
<li>
<p><a href="#CHDJEFIB">How Oracle Clusterware Assigns New Servers</a></p>
</li>
</ul>
<a id="CHDICCFH"></a>
<div id="CWADD92105" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Overview of Server Pools and Policy-Based Management</h3>
<p>With Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) and later, <a href="glossary.htm#CBAIFEGI"><span class="xrefglossterm">resource</span></a>s managed by Oracle Clusterware are contained in logical groups of servers called <a href="glossary.htm#CBAHHIDI"><span class="xrefglossterm">server pool</span></a>s. Resources are hosted on a shared infrastructure and are contained within server pools. The resources are restricted with respect to their hardware resource (such as CPU and memory) consumption by policies, behaving as if they were deployed in a single-system environment.</p>
<p>You can choose to manage resources dynamically using server pools to provide policy-based management of resources in the cluster, or you can choose to manage resources using the traditional method of physically assigning resources to run on particular nodes.</p>
<p>Policy-based management:</p>
<ul>
<li>
<p>Enables dynamic capacity assignment when needed to provide server capacity in accordance with the priorities you set with policies</p>
</li>
<li>
<p>Enables allocation of resources by importance, so that applications obtain the required minimum resources, whenever possible, and so that lower priority applications do not take resources from more important applications</p>
</li>
<li>
<p>Ensures isolation where necessary, so that you can provide dedicated servers in a cluster for applications and databases</p>
</li>
</ul>
<p>Applications and databases running in server pools do not share resources. Because of this, server pools isolate resources where necessary, but enable dynamic capacity assignments as required. Together with role-separated management, this capability addresses the needs of organizations that have standardized cluster environments, but allow multiple administrator groups to share the common cluster infrastructure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="resatt.htm#CHDCECHH">Appendix B, "Oracle Clusterware Resource Reference"</a> for more information about resource attributes</div>
<p>Oracle Clusterware efficiently allocates different resources in the cluster. You need only to provide the minimum and maximum number of nodes on which a resource can run, combined with a level of importance for each resource that is running on these nodes.</p>
</div>
<!-- class="sect2" -->
<a id="CHDIJJJF"></a>
<div id="CWADD91113" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Server Attributes Assigned by Oracle Clusterware</h3>
<p><a id="sthref111"></a><a id="sthref112"></a>Oracle Clusterware assigns each server a set of attributes as soon as you add a server to a cluster. If you remove the server from the cluster, then Oracle Clusterware revokes those settings. <a href="#CHDBIACG">Table 2-1</a> lists and describes server attributes.</p>
<div id="CWADD91258" class="tblhruleformal">
<p class="titleintable"><a id="sthref113"></a><a id="CHDBIACG"></a>Table 2-1 Server Attributes</p>
<table class="cellalignment414" title="Server Attributes" summary="This table lists and describes the various server attributes." dir="ltr">
<thead>
<tr class="cellalignment408">
<th class="cellalignment415" id="r1c1-t3">Attribute</th>
<th class="cellalignment415" id="r1c2-t3">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment408">
<td class="cellalignment416" id="r2c1-t3" headers="r1c1-t3">
<pre dir="ltr">
NAME
</pre></td>
<td class="cellalignment416" headers="r2c1-t3 r1c2-t3">
<p>The node name of the server. A server name can contain any platform-supported characters except the exclamation point (!) and the tilde (~). A server name cannot begin with a period, or with <span class="italic">ora</span>. This attribute is required.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r3c1-t3" headers="r1c1-t3">
<pre dir="ltr">
ACTIVE_POOLS
</pre></td>
<td class="cellalignment416" headers="r3c1-t3 r1c2-t3">
<p>A space-delimited list of the names of the server pools to which a server belongs. Oracle Clusterware manages this list, automatically.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r4c1-t3" headers="r1c1-t3">
<pre dir="ltr">
STATE
</pre></td>
<td class="cellalignment416" headers="r4c1-t3 r1c2-t3">
<p>A server can be in one of the following states:</p>
<pre dir="ltr">
ONLINE
</pre>
<p>The server is a member of the cluster and is available for resource placement.</p>
<pre dir="ltr">
OFFLINE
</pre>
<p>The server is not currently a member of the cluster. Subsequently, it is not available for resource placement.</p>
<pre dir="ltr">
JOINING
</pre>
<p>When a server joins a cluster, Oracle Clusterware processes the server to ensure that it is valid for resource placement. Oracle Clusterware also checks the state of resources configured to run on the server. Once the validity of the server and the state of the resources are determined, the server transitions out of this state.</p>
<pre dir="ltr">
LEAVING
</pre>
<p>When a planned shutdown for a server begins, the state of the server transitions to <code dir="ltr">LEAVING</code>, making it unavailable for resource placement.</p>
<pre dir="ltr">
VISIBLE
</pre>
<p>Servers that have Oracle Clusterware running, but not the Cluster Ready Services daemon (<code dir="ltr">crsd</code>), are put into the <code dir="ltr">VISIBLE</code> state. This usually indicates an intermittent issue or failure and Oracle Clusterware trying to recover (restart) the daemon. Oracle Clusterware cannot manage resources on servers while the servers are in this state.</p>
<pre dir="ltr">
RECONFIGURING
</pre>
<p>When servers move between server pools due to server pool reconfiguration, a server is placed into this state if resources that ran on it in the current server pool must be stopped and relocated. This happens because resources running on the server may not be configured to run in the server pool to which the server is moving. As soon as the resources are successfully relocated, the server is put back into the <code dir="ltr">ONLINE</code> state.</p>
<p>Use the <code dir="ltr"><a href="crsref.htm#CHEIGIDF">crsctl status server</a></code> command to obtain server information.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r5c1-t3" headers="r1c1-t3">
<pre dir="ltr">
STATE_DETAILS
</pre></td>
<td class="cellalignment416" headers="r5c1-t3 r1c2-t3">
<p>This is a read-only attribute that Oracle Clusterware manages. The attribute provides additional details about the state of a server. Possible additional details about a server state are:</p>
<p>Server state: <code dir="ltr">ONLINE</code>:</p>
<ul>
<li>
<p><code dir="ltr">AUTOSTARTING RESOURCES</code></p>
<p>Indicates that the resource autostart procedure (performed when a server reboots or the Oracle Clusterware stack is restarted) is in progress for the server.</p>
</li>
<li>
<p><code dir="ltr">AUTOSTART QUEUED</code></p>
<p>The server is waiting for the resource autostart to commence. Once that happens, the attribute value changes to <code dir="ltr">AUTOSTARTING RESOURCES</code>.</p>
</li>
</ul>
<p>Server state: <code dir="ltr">RECONFIGURING</code>:</p>
<ul>
<li>
<p><code dir="ltr">STOPPING RESOURCES</code></p>
<p>Resources that are restricted from running in a new server pool are stopping.</p>
</li>
<li>
<p><code dir="ltr">STARTING RESOURCES</code></p>
<p>Resources that can run in a new server pool are starting.</p>
</li>
<li>
<p><code dir="ltr">RECONFIG FAILED</code></p>
<p>One or more resources did not stop and thus the server cannot transition into the <code dir="ltr">ONLINE</code> state. At this point, manual intervention is required. You must stop or unregister resources that did not stop. After that, the server automatically transitions into the <code dir="ltr">ONLINE</code> state.</p>
</li>
</ul>
<p>Server state: <code dir="ltr">JOINING</code>:</p>
<ul>
<li>
<p><code dir="ltr">CHECKING RESOURCES</code></p>
<p>Whenever a server reboots, the Oracle Clusterware stack restarts, or <code dir="ltr">crsd</code> on a server restarts, the policy engine must determine the current state of the resources on the server. While that procedure is in progress, this value is returned.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect2" -->
<a id="CHDHDADE"></a>
<div id="CWADD91114" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Understanding Server Pools</h3>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDCDEBA">How Server Pools Work</a></p>
</li>
<li>
<p><a href="#CHDCDDIG">The Free Server Pool</a></p>
</li>
<li>
<p><a href="#CHDBJAID">The Generic Server Pool</a></p>
</li>
</ul>
<a id="CHDCDEBA"></a>
<div id="CWADD00100" class="sect3">
<h4 class="sect3">How Server Pools Work</h4>
<p>Server pools divide the cluster into groups of servers hosting the same or similar resources. They distribute a uniform workload (a set of Oracle Clusterware resources) over several servers in the cluster. For example, you can restrict Oracle databases to run only in certain server pools. When you enable role-separated management, you can explicitly grant permission to operating system users to change attributes of certain server pools.</p>
<p><a id="sthref114"></a>Top-level server pools:</p>
<ul>
<li>
<p>Logically divide the cluster</p>
</li>
<li>
<p>Are always exclusive, meaning that one server can only reside in one particular server pool at a certain point in time</p>
</li>
</ul>
<p>Server pools each have three attributes that they are assigned when they are created:</p>
<ul>
<li>
<p><code dir="ltr">MIN_SIZE</code>: The minimum number of servers the server pool should contain. If the number of servers in a server pool is below the value of this attribute, then Oracle Clusterware automatically moves servers from elsewhere into the server pool until the number of servers reaches the attribute value.</p>
</li>
<li>
<p><code dir="ltr">MAX_SIZE</code>: The maximum number of servers the server pool should contain.</p>
</li>
<li>
<p><code dir="ltr">IMPORTANCE</code>: A number from 0 to 1000 (0 being least important) that ranks a server pool among all other server pools in a cluster.</p>
<p><a href="#CHDCIEJJ">Table 2-2</a> lists and describes all server pool attributes.</p>
<div id="CWADD91259" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref115"></a><a id="CHDCIEJJ"></a>Table 2-2 Server Pool Attributes</p>
<table class="cellalignment414" title="Server Pool Attributes" summary="This table lists and describes server group attributes." dir="ltr">
<thead>
<tr class="cellalignment408">
<th class="cellalignment415" id="r1c1-t4">Attribute</th>
<th class="cellalignment415" id="r1c2-t4">Values and Format</th>
<th class="cellalignment415" id="r1c3-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment408">
<td class="cellalignment416" id="r2c1-t4" headers="r1c1-t4">
<pre dir="ltr">
ACL
</pre></td>
<td class="cellalignment416" headers="r2c1-t4 r1c2-t4">
<p>String in the following format:</p>
<pre dir="ltr">
owner:<span class="italic">user</span>:rwx,pgrp:<span class="italic">group</span>:rwx,other::r&mdash;
</pre></td>
<td class="cellalignment416" headers="r2c1-t4 r1c3-t4">
<p>Defines the owner of the server pool and which privileges are granted to various operating system users and groups. The server pool owner defines the operating system user of the owner, and which privileges that user is granted.</p>
<p>The value of this optional attribute is populated at the time a server pool is created based on the identity of the process creating the server pool, unless explicitly overridden. The value can subsequently be changed, if such a change is allowed based on the existing privileges of the server pool.</p>
<p>In the string:</p>
<ul>
<li>
<p><code dir="ltr">owner</code>: The operating system user of the server pool owner, followed by the privileges of the owner</p>
</li>
<li>
<p><code dir="ltr">pgrp</code>: The operating system group that is the primary group of the owner of the server pool, followed by the privileges of members of the primary group</p>
</li>
<li>
<p><code dir="ltr">other</code>: Followed by privileges of others</p>
</li>
<li>
<p><code dir="ltr">r</code>: Read only</p>
</li>
<li>
<p><code dir="ltr">w</code>: Modify attributes of the pool or delete it</p>
</li>
<li>
<p><code dir="ltr">x</code>: Assign resources to this pool</p>
</li>
</ul>
<p>By default, the identity of the client that creates the server pool is the <code dir="ltr">owner</code>. Also by default, <code dir="ltr">root</code>, and the <code dir="ltr"><span class="codeinlineitalic">user</span></code> specified in <code dir="ltr">owner</code> have full privileges. You can grant required operating system users and operating system groups their privileges by adding the following lines to the <code dir="ltr">ACL</code> attribute:</p>
<pre dir="ltr">
user:<span class="italic">username</span>:rwx
group:<span class="italic">group_name</span>:rwx
</pre></td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r3c1-t4" headers="r1c1-t4">
<pre dir="ltr">
ACTIVE_SERVERS
</pre></td>
<td class="cellalignment416" headers="r3c1-t4 r1c2-t4">
<p>A string of server names in the following format:</p>
<pre dir="ltr">
server_name1 server_name2 ...
</pre></td>
<td class="cellalignment416" headers="r3c1-t4 r1c3-t4">
<p>Oracle Clusterware automatically manages this attribute, which contains the space-delimited list of servers that are currently assigned to a server pool.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r4c1-t4" headers="r1c1-t4">
<pre dir="ltr">
EXCLUSIVE_POOLS
</pre></td>
<td class="cellalignment416" headers="r4c1-t4 r1c2-t4">
<p>String</p>
</td>
<td class="cellalignment416" headers="r4c1-t4 r1c3-t4">
<p>This optional attribute indicates if servers assigned to this server pool are shared with other server pools. A server pool can explicitly state that it is exclusive of any other server pool that has the same value for this attribute. Two or more server pools are mutually exclusive when the sets of servers assigned to them do not have a single server in common. For example, server pools A and B must be exclusive if they both set the value of this attribute to <code dir="ltr">foo_A_B</code>.</p>
<p>Top-level server pools are mutually exclusive, by default.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r5c1-t4" headers="r1c1-t4">
<pre dir="ltr">
IMPORTANCE
</pre></td>
<td class="cellalignment416" headers="r5c1-t4 r1c2-t4">
<p>Any integer from 0 to 1000</p>
</td>
<td class="cellalignment416" headers="r5c1-t4 r1c3-t4">
<p>Relative importance of the server pool, with <code dir="ltr">0</code> denoting the lowest level of importance and <code dir="ltr">1000</code>, the highest. This optional attribute is used to determine how to reconfigure the server pools when a node joins or leaves the cluster. The default value is <code dir="ltr">0</code>.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r6c1-t4" headers="r1c1-t4">
<pre dir="ltr">
MAX_SIZE
</pre></td>
<td class="cellalignment416" headers="r6c1-t4 r1c2-t4">
<p>Any nonnegative integer or <code dir="ltr">-1</code> (no limit)</p>
</td>
<td class="cellalignment416" headers="r6c1-t4 r1c3-t4">
<p>The maximum number of servers a server pool can contain. This attribute is optional and is set to <code dir="ltr">-1</code> (no limit), by default.</p>
<p><span class="bold">Note:</span> A value of <code dir="ltr">-1</code> for this attribute spans the entire cluster.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r7c1-t4" headers="r1c1-t4">
<pre dir="ltr">
MIN_SIZE
</pre></td>
<td class="cellalignment416" headers="r7c1-t4 r1c2-t4">
<p>Any nonnegative integer</p>
</td>
<td class="cellalignment416" headers="r7c1-t4 r1c3-t4">
<p>The minimum size of a server pool. If the number of servers contained in a server pool is below the number you specify in this attribute, then Oracle Clusterware automatically moves servers from other pools into this one until that number is met.</p>
<p><span class="bold">Note:</span> The value of this optional attribute does not set a hard limit. It governs the priority for server assignment whenever the cluster is reconfigured. The default value is <code dir="ltr">0</code>.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r8c1-t4" headers="r1c1-t4">
<pre dir="ltr">
NAME
</pre></td>
<td class="cellalignment416" headers="r8c1-t4 r1c2-t4">
<p>String</p>
</td>
<td class="cellalignment416" headers="r8c1-t4 r1c3-t4">
<p>The name of the server pool, which you must specify when you create the server pool. Server pool names must be unique within the domain of names of user-created entities, such as resources, types, and servers. A server pool name can contain any platform-supported characters except the exclamation point (!) and the tilde (~). A server pool name cannot begin with a period nor with <span class="italic">ora</span>.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r9c1-t4" headers="r1c1-t4">
<pre dir="ltr">
PARENT_POOLS
</pre></td>
<td class="cellalignment416" headers="r9c1-t4 r1c2-t4">
<p>A string of space-delimited server pool names in the following format:</p>
<pre dir="ltr">
sp1 sp2 ...
</pre></td>
<td class="cellalignment416" headers="r9c1-t4 r1c3-t4">
<p>Use of this attribute makes it possible to create nested server pools. Server pools listed in this attribute are referred to as <span class="italic">parent</span> server pools. A server pool included in a parent server pool is referred to as a <span class="italic">child</span> server pool.</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r10c1-t4" headers="r1c1-t4">
<pre dir="ltr">
SERVER_NAMES
</pre></td>
<td class="cellalignment416" headers="r10c1-t4 r1c2-t4">
<p>A string of space-delimited server names in the following format:</p>
<pre dir="ltr">
server1 server2 ...
</pre></td>
<td class="cellalignment416" headers="r10c1-t4 r1c3-t4">
<p>A list of candidate node names that may be associated with a server pool. If this optional attribute is empty, Oracle Clusterware assumes that any server may be assigned to any server pool, to the extent allowed by values of other attributes, such as <code dir="ltr">PARENT_POOLS</code>.</p>
<p>The server names identified as candidate node names are not validated to confirm that they are currently active cluster members. Cluster administrators can use this attribute to define servers as candidates that have not yet been added to the cluster.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" --></li>
</ul>
<p>You manage server pools that are managing Oracle RAC databases with the Server Control (SRVCTL) utility. Use the Oracle Clusterware Control (CRSCTL) utility to manage all other server pools. Only cluster administrators have permission to create top-level server pools.</p>
<p>When Oracle Clusterware is installed, two server pools are created automatically: <a id="sthref116"></a><a id="sthref117"></a><span class="italic">Generic</span> and <a id="sthref118"></a><a id="sthref119"></a><span class="italic">Free</span>. All servers in a new installation are assigned to the Free server pool, initially. Servers move from Free to newly defined server pools automatically. When you upgrade Oracle Clusterware from a previous release, all nodes are assigned to the Generic server pool, to ensure compatibility with database releases before Oracle Database 11<span class="italic">g</span> release 2 (11.2).</p>
</div>
<!-- class="sect3" -->
<a id="CHDCDDIG"></a>
<div id="CWADD00101" class="sect3">
<h4 class="sect3">The Free Server Pool</h4>
<p>The <a id="sthref120"></a>Free server pool contains servers that are not assigned to any other server pools. The attributes of the Free server pool are restricted, as follows:</p>
<ul>
<li>
<p><code dir="ltr">SERVER_NAMES</code>, <code dir="ltr">MIN_SIZE</code>, and <code dir="ltr">MAX_SIZE</code> cannot be edited by the user</p>
</li>
<li>
<p><code dir="ltr">IMPORTANCE</code> and <code dir="ltr">ACL</code> can be edited by the user</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDBJAID"></a>
<div id="CWADD91261" class="sect3">
<h4 class="sect3">The Generic Server Pool</h4>
<p>The <a id="sthref121"></a>Generic server pool stores pre-11<span class="italic">g</span> release 2 (11.2) Oracle Databases and administrator-managed databases that have fixed configurations. Additionally, the Generic server pool contains servers that match either of the following:</p>
<ul>
<li>
<p>Servers that you specified in the <code dir="ltr">HOSTING_MEMBERS</code> resource attribute of all resources of the <code dir="ltr">application</code> resource type</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="resatt.htm#CHDBFAGG">"HOSTING_MEMBERS"</a> for more information about this attribute</p>
</li>
<li>
<p><a href="crschp.htm#BGBEHFDB">"Resource Types"</a> for more information about resource types</p>
</li>
</ul>
</div>
</li>
<li>
<p>Servers with names you specified in the <code dir="ltr">SERVER_NAMES</code> attribute of the server pools that list the Generic server pool as a parent server pool</p>
</li>
</ul>
<p>The Generic server pool's attributes are restricted, as follows:</p>
<ul>
<li>
<p>No one can modify configuration attributes of the Generic server pool (all attributes are read-only)</p>
</li>
<li>
<p>When you specify a server name in the <code dir="ltr">HOSTING_MEMBERS</code> resource attribute, Oracle Clusterware only allows it if the server is:</p>
<ul>
<li>
<p>Online and exists in the Generic server pool</p>
</li>
<li>
<p>Online and exists in the Free server pool, in which case Oracle Clusterware moves the server into the Generic server pool</p>
</li>
<li>
<p>Online and exists in any other server pool <span class="italic">and</span> the client is either a cluster administrator or is allowed to use the server pool's servers, in which case, the server is moved into the Generic server pool</p>
</li>
<li>
<p>Offline and the client is a cluster administrator</p>
</li>
</ul>
</li>
<li>
<p>When you register a child server pool with the Generic server pool, Oracle Clusterware only allows it if the server names pass the same requirements as previously specified for the resources.</p>
<p>Servers are initially considered for assignment into the Generic server pool at cluster startup time or when a server is added to the cluster, and only after that to other server pools.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDJEFIB"></a>
<div id="CWADD91116" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">How Oracle Clusterware Assigns New Servers</h3>
<p>Oracle Clusterware assigns new servers to server pools in the following order:</p>
<ol>
<li>
<p>Generic server pool</p>
</li>
<li>
<p>User-created server pool</p>
</li>
<li>
<p>Free server pool</p>
</li>
</ol>
<p>Oracle Clusterware continues to assign servers to server pools until the following conditions are met:</p>
<ol>
<li>
<p>Until all server pools are filled in order of importance to their minimum (<code dir="ltr">MIN_SIZE</code>).</p>
</li>
<li>
<p>Until all server pools are filled in order of importance to their maximum (<code dir="ltr">MAX_SIZE</code>).</p>
</li>
<li>
<p>By default, any servers not placed in a server pool go into the Free server pool.</p>
<p>You can modify the <code dir="ltr">IMPORTANCE</code> attribute for the Free server pool.</p>
</li>
</ol>
<p><a id="sthref122"></a>When a server joins a cluster, several things occur.</p>
<p>Consider the server pools configured in <a href="#CHDHAFID">Table 2-3</a>:</p>
<div id="CWADD91262" class="tblhruleformal">
<p class="titleintable"><a id="sthref123"></a><a id="CHDHAFID"></a>Table 2-3 Sample Server Pool Attributes Configuration</p>
<table class="cellalignment414" title="Sample Server Pool Attributes Configuration" summary="This table contains a sample server group configuration." dir="ltr">
<thead>
<tr class="cellalignment408">
<th class="cellalignment415" id="r1c1-t6">NAME</th>
<th class="cellalignment415" id="r1c2-t6">IMPORTANCE</th>
<th class="cellalignment415" id="r1c3-t6">MIN_SIZE</th>
<th class="cellalignment415" id="r1c4-t6">MAX_SIZE</th>
<th class="cellalignment415" id="r1c5-t6">PARENT_POOLS</th>
<th class="cellalignment415" id="r1c6-t6">EXCLUSIVE_POOLS</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment408">
<td class="cellalignment416" id="r2c1-t6" headers="r1c1-t6">
<pre dir="ltr">
sp1
</pre></td>
<td class="cellalignment416" headers="r2c1-t6 r1c2-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r2c1-t6 r1c3-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r2c1-t6 r1c4-t6">
<pre dir="ltr">
10
</pre></td>
<td class="cellalignment416" headers="r2c1-t6 r1c5-t6">
<p>&nbsp;</p>
</td>
<td class="cellalignment416" headers="r2c1-t6 r1c6-t6">
<p>&nbsp;</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r3c1-t6" headers="r1c1-t6">
<pre dir="ltr">
sp2
</pre></td>
<td class="cellalignment416" headers="r3c1-t6 r1c2-t6">
<pre dir="ltr">
3
</pre></td>
<td class="cellalignment416" headers="r3c1-t6 r1c3-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r3c1-t6 r1c4-t6">
<pre dir="ltr">
6
</pre></td>
<td class="cellalignment416" headers="r3c1-t6 r1c5-t6">
<p>&nbsp;</p>
</td>
<td class="cellalignment416" headers="r3c1-t6 r1c6-t6">
<p>&nbsp;</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r4c1-t6" headers="r1c1-t6">
<pre dir="ltr">
sp3
</pre></td>
<td class="cellalignment416" headers="r4c1-t6 r1c2-t6">
<pre dir="ltr">
2
</pre></td>
<td class="cellalignment416" headers="r4c1-t6 r1c3-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r4c1-t6 r1c4-t6">
<pre dir="ltr">
2
</pre></td>
<td class="cellalignment416" headers="r4c1-t6 r1c5-t6">
<p>&nbsp;</p>
</td>
<td class="cellalignment416" headers="r4c1-t6 r1c6-t6">
<p>&nbsp;</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r5c1-t6" headers="r1c1-t6">
<pre dir="ltr">
sp2_1
</pre></td>
<td class="cellalignment416" headers="r5c1-t6 r1c2-t6">
<pre dir="ltr">
2
</pre></td>
<td class="cellalignment416" headers="r5c1-t6 r1c3-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r5c1-t6 r1c4-t6">
<pre dir="ltr">
5
</pre></td>
<td class="cellalignment416" headers="r5c1-t6 r1c5-t6">
<pre dir="ltr">
sp2
</pre></td>
<td class="cellalignment416" headers="r5c1-t6 r1c6-t6">
<pre dir="ltr">
S123
</pre></td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r6c1-t6" headers="r1c1-t6">
<pre dir="ltr">
sp2_2
</pre></td>
<td class="cellalignment416" headers="r6c1-t6 r1c2-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r6c1-t6 r1c3-t6">
<pre dir="ltr">
1
</pre></td>
<td class="cellalignment416" headers="r6c1-t6 r1c4-t6">
<pre dir="ltr">
5
</pre></td>
<td class="cellalignment416" headers="r6c1-t6 r1c5-t6">
<pre dir="ltr">
sp2
</pre></td>
<td class="cellalignment416" headers="r6c1-t6 r1c6-t6">
<pre dir="ltr">
S123
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>For example, assume that there are no servers in a cluster; all server pools are empty.</p>
<p>When a server, named <code dir="ltr">server1</code>, joins the cluster:</p>
<ol>
<li>
<p>Server-to-pool assignment commences.</p>
</li>
<li>
<p>Oracle Clusterware only processes top-level server pools (those that have no parent server pools), first. In this example, the top-level server pools are <code dir="ltr">sp1</code>, <code dir="ltr">sp2</code>, and <code dir="ltr">sp3</code>.</p>
</li>
<li>
<p>Oracle Clusterware lists the server pools in order of <code dir="ltr">IMPORTANCE</code>, as follows: <code dir="ltr">sp2</code>, <code dir="ltr">sp3</code>, <code dir="ltr">sp1</code>.</p>
</li>
<li>
<p>Oracle Clusterware assigns <code dir="ltr">server1</code> to <code dir="ltr">sp2</code> because <code dir="ltr">sp2</code> has the highest <code dir="ltr">IMPORTANCE</code> value and its <code dir="ltr">MIN_SIZE</code> value has not yet been met.</p>
</li>
<li>
<p>Oracle Clusterware processes the remaining two server pools, <code dir="ltr">sp2_1</code> and <code dir="ltr">sp2_2</code>. The sizes of both server pools are below the value of the <code dir="ltr">MIN_SIZE</code> attribute (both server pools are empty and have <code dir="ltr">MIN_SIZE</code> values of <code dir="ltr">1</code>).</p>
</li>
<li>
<p>Oracle Clusterware lists the two remaining pools in order of <code dir="ltr">IMPORTANCE</code>, as follows: <code dir="ltr">sp2_1</code>, <code dir="ltr">sp2_2</code>.</p>
</li>
<li>
<p>Oracle Clusterware assigns <code dir="ltr">server1</code> to <code dir="ltr">sp2_1</code> but cannot assign <code dir="ltr">server1</code> to <code dir="ltr">sp2_2</code> because <code dir="ltr">sp2_1</code> is configured to be exclusive with <code dir="ltr">sp2_2</code>.</p>
</li>
</ol>
<p>After processing, the cluster configuration appears, as follows</p>
<div id="CWADD91263" class="tblhruleformal">
<p class="titleintable"><a id="sthref124"></a><a id="sthref125"></a>Table 2-4 Post Processing Server Pool Configuration</p>
<table class="cellalignment414" title="Post Processing Server Pool Configuration" summary="This table contains a sample server group configuration after processing is complete." dir="ltr">
<thead>
<tr class="cellalignment408">
<th class="cellalignment415" id="r1c1-t7">Server Pool Name</th>
<th class="cellalignment415" id="r1c2-t7">Assigned Servers</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment408">
<td class="cellalignment416" id="r2c1-t7" headers="r1c1-t7">
<pre dir="ltr">
sp1
</pre></td>
<td class="cellalignment416" headers="r2c1-t7 r1c2-t7">
<p>&nbsp;</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r3c1-t7" headers="r1c1-t7">
<pre dir="ltr">
sp2
</pre></td>
<td class="cellalignment416" headers="r3c1-t7 r1c2-t7">
<pre dir="ltr">
server1
</pre></td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r4c1-t7" headers="r1c1-t7">
<pre dir="ltr">
sp3
</pre></td>
<td class="cellalignment416" headers="r4c1-t7 r1c2-t7">
<p>&nbsp;</p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r5c1-t7" headers="r1c1-t7">
<pre dir="ltr">
sp2_1
</pre></td>
<td class="cellalignment416" headers="r5c1-t7 r1c2-t7">
<pre dir="ltr">
server1
</pre></td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r6c1-t7" headers="r1c1-t7">
<pre dir="ltr">
sp2_2
</pre></td>
<td class="cellalignment416" headers="r6c1-t7 r1c2-t7">
<p>&nbsp;</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<a id="CHDIEABC"></a>
<div id="CWADD92000" class="sect3">
<h4 class="sect3">Servers Moving from Server Pool to Server Pool</h4>
<p>If the number of servers in a server pool falls below the value of the <code dir="ltr">MIN_SIZE</code> attribute for the server pool (such as when a server fails), based on values you set for the <code dir="ltr">MIN_SIZE</code> and <code dir="ltr">IMPORTANCE</code> attributes for all server pools, Oracle Clusterware can move servers from other server pools into the server pool whose number of servers has fallen below the value for <code dir="ltr">MIN_SIZE</code>. Oracle Clusterware selects servers from other server pools to move into the deficient server pool that meet the following criteria:</p>
<ul>
<li>
<p>For server pools that have a lower <code dir="ltr">IMPORTANCE</code> value than the deficient server pool, Oracle Clusterware can take servers from those server pools even if it means that the number of servers falls below the value for the <code dir="ltr">MIN_SIZE</code> attribute.</p>
</li>
<li>
<p>For server pools with equal or greater <code dir="ltr">IMPORTANCE</code>, Oracle Clusterware only takes servers from those server pools if the number of servers in a server pool is greater than the value of its <code dir="ltr">MIN_SIZE</code> attribute.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDEHIHA"></a>
<div id="CWADD91105" class="sect1">
<h2 class="sect1">Role-Separated Management</h2>
<p>This section contains the following topics</p>
<ul>
<li>
<p><a href="#CHDEGACH">About Role-Separated Management</a></p>
</li>
<li>
<p><a href="#CHDDEIBE">Managing CRS Administrators in the Cluster</a></p>
</li>
<li>
<p><a href="#CHDDGAAA">Configuring Horizontal Role Separation</a></p>
</li>
</ul>
<a id="CHDEGACH"></a>
<div id="CWADD92107" class="sect2">
<h3 class="sect2">About Role-Separated Management</h3>
<p><a id="sthref126"></a>Role-separated management is a feature you can implement that enables multiple resources to share the same cluster and hardware resources. This is done by setting permissions on server pools or resources, and then using access control lists (ACLs) to provide access. By default, this feature is not enabled during installation. Resource allocation is controlled by a user assigned the <a id="sthref127"></a><a id="sthref128"></a><a href="glossary.htm#CBAEAEAG"><span class="xrefglossterm">CRS Administrator</span></a> role. You can implement role-separated management in one of the following ways:</p>
<ul>
<li>
<p><a id="sthref129"></a><span class="bold">Vertical implementation</span>: Access permissions to server pools or resources are granted by assigning ownership of them to different users for each layer in the enterprise architecture, and using ACLs assigned to those users. Oracle ASM provides an even more granular approach using groups. Careful planning is required to enable overlapping tasks.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWLIN205" href="../../install.112/e41961/prelinux.htm#CWLIN205"><span class="italic">Oracle Grid Infrastructure Installation Guide for Linux</span></a> for more information about using groups</div>
</li>
<li>
<p><a id="sthref130"></a><span class="bold">Horizontal implementation</span>: Access permissions for resources are granted using ACLs assigned to server pools and policy-managed databases or applications.</p>
</li>
</ul>
<div id="CWADD92401" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref131"></a>
<h4 class="sect3">About the CRS Administrator</h4>
<div class="infobox-note">
<p class="notep1">Caution:</p>
To restrict the operating system users that have this privilege, Oracle strongly recommends that you add specific users to the CRS Administrators list.</div>
<p>The CRS Administrator is a predefined administrator role in Oracle Clusterware that controls the creation of server pools. Users to whom you grant the CRS Administrator role can grant or revoke access to system resources only for server pools. The CRS Administrator role does not influence administrative rights on the server.</p>
<p>Additionally, the CRS Administrator can create resources with restricted placement, that use the asterisk (<code dir="ltr">*</code>) as the value for the <code dir="ltr">SERVER_POOLS</code> attribute to control placement, and grant and revoke access to those resources managed by Oracle Clusterware.</p>
<p>The set of users that have the CRS Administrator role is managed by a list of named CRS Administrators within Oracle Clusterware, as opposed to that set of users being members of an operating system group. Sever pool creation enables the CRS Administrator to divide the cluster into groups of servers used by different groups of users in the organization (a horizontal implementation, as described in the preceding section), thereby enabling role-separated management.</p>
<p>By default, after installing Oracle Grid Infrastructure for a cluster, or after an upgrade, all users are CRS Administrators (as denoted by the asterisk (<code dir="ltr">*</code>) in the CRS Administrators list), assuming all users sharing the same infrastructure are equally privileged to manage the cluster. This default configuration allows <span class="italic">any</span> named operating system user to create server pools within Oracle Clusterware.</p>
<p>Restricting CRS Administrator privileges to the Grid user and <code dir="ltr">root</code> can prevent subsequently created policy-managed databases from being automatically created in newly created server pools. If you enable role-separated management, then a CRS Administrator must create the required server pools in advance.</p>
<p>The user (Grid user) that installed Oracle Clusterware in the Grid Infrastructure home (Grid home) and the system superuser (<code dir="ltr">root</code> on Linux and UNIX, or Administrator on Windows) are <span class="italic">permanent</span> CRS Administrators, and only these two users can add or remove users from the CRS Administrators list, enabling role-separated management.</p>
<p>If the cluster is shared by various users, then the CRS Administrator can restrict access to certain server pools and, consequently, to certain hardware resources to specific users in the cluster. The permissions are stored for each server pool in the <code dir="ltr">ACL</code> attribute, described in <a href="#CHDCIEJJ">Table 2-2</a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDDEIBE"></a>
<div id="CWADD92108" class="sect2">
<h3 class="sect2">Managing CRS Administrators in the Cluster</h3>
<p>Use the following <a id="sthref132"></a>commands to manage CRS Administrators in the cluster:</p>
<ul>
<li>
<p>To query the list of users that are CRS Administrators:</p>
<pre dir="ltr">
$ crsctl query crs administrator
</pre></li>
<li>
<p>To enable role-separated management and grant privileges to non-permanent CRS Administrators, you must add specific users to the CRS Administrators list. As a permanent CRS Administrator, run the following command:</p>
<pre dir="ltr">
# crsctl add crs administrator -u <span class="italic">user_name</span>
</pre>
<p>The default asterisk (<code dir="ltr">*</code>) value is replaced by the user or users you add using this command.</p>
</li>
<li>
<p>To remove specific users from the group of CRS Administrators:</p>
<pre dir="ltr">
# crsctl delete crs administrator -u <span class="italic">user_name</span>
</pre></li>
<li>
<p>To make all users CRS Administrators, add the asterisk (<code dir="ltr">*</code>) value back to the list, as follows:</p>
<pre dir="ltr">
# crsctl add crs administrator -u "*"
</pre>
<p>The asterisk (<code dir="ltr">*</code>) value must be enclosed in double quotation marks (<code dir="ltr">""</code>). This value replaces any previously specified users in the CRS Administrators list.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDDGAAA"></a>
<div id="CWADD92109" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring Horizontal Role Separation</h3>
<p>Use the <code dir="ltr">crsctl setperm</code> command to configure horizontal role separation using ACLs that are assigned to server pools, resources, or both. The CRSCTL utility is located in the path <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code><code dir="ltr">/bin</code>, where <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> is the Oracle Grid Infrastructure home.</p>
<p>The command uses the following syntax, where you can choose to set permissions on either a resource, a resource type, or a server pool:</p>
<pre dir="ltr">
crsctl setperm {resource | type | serverpool} {-u <span class="italic">acl_string </span>| 
-x <span class="italic">acl_string </span>| -o <span class="italic">user_name</span> | -g <span class="italic">group_name</span>}
</pre>
<p>The flag options are:</p>
<ul>
<li>
<p><code dir="ltr">-u</code>: Update the entity ACL</p>
</li>
<li>
<p><code dir="ltr">-x</code>: Delete the entity ACL</p>
</li>
<li>
<p><code dir="ltr">-o</code>: Change the entity owner</p>
</li>
<li>
<p><code dir="ltr">-g</code>: Change the entity primary group</p>
</li>
</ul>
<p>The ACL strings are:</p>
<pre dir="ltr">
{ user:<span class="italic">user_name</span>[:<span class="italic">readPerm</span><span class="italic">writePerm</span><span class="italic">execPerm</span>] |
     group:<span class="italic">group_name</span>[:<span class="italic">readPerm</span><span class="italic">writePerm</span><span class="italic">execPerm</span>] |
     other[::<span class="italic">readPerm</span><span class="italic">writePerm</span><span class="italic">execPerm</span>] }
</pre>
<p>where:</p>
<ul>
<li>
<p><code dir="ltr">user</code>: Designates the user ACL (access permissions granted to the designated user)</p>
</li>
<li>
<p><code dir="ltr">group</code>: Designates the group ACL (permissions granted to the designated group members)</p>
</li>
<li>
<p><code dir="ltr">other</code>: Designates the other ACL (access granted to users or groups not granted particular access permissions)</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">readperm</span></code>: Location of the read permission (<code dir="ltr">r</code> grants permission and "<code dir="ltr">-</code>" forbids permission)</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">writeperm</span></code>: Location of the write permission (<code dir="ltr">w</code> grants permission and "<code dir="ltr">-</code>" forbids permission)</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">execperm</span></code>: Location of the execute permission (<code dir="ltr">x</code> grants permission, and "<code dir="ltr">-</code>" forbids permission)</p>
</li>
</ul>
<p>For example, as the CRS Administrator, you can set permissions on a database server pool called <code dir="ltr">testadmin</code> for the <code dir="ltr">oracle</code> user and the <code dir="ltr">oinstall</code> group, where only the CRS Administrator (owner) has read, write, and execute privileges, and the user, as well as the members of the <code dir="ltr">oinstall</code> group, have only read and execute privileges. All other users outside of the group have no access. The following command, run as the CRS Administrator, shows how this is done:</p>
<pre dir="ltr">
# crsctl setperm serverpool ora.testadmin -u user:oracle:r-x,group:oinstall:r-x,
  other::---
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The preceding example is an explicitly granted exception of using a CRSCTL command on an Oracle (<code dir="ltr">ora.*</code>) resource (the <code dir="ltr">ora.testadmin</code> server pool) for the purpose of enabling horizontal role separation.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBGAJGA"></a>
<div id="CWADD92094" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Oracle Grid Infrastructure</h2>
<p>After performing a software-only installation of the Oracle Grid Infrastructure, you can configure the software using <a id="sthref133"></a>Configuration Wizard. This wizard assists you with editing the <code dir="ltr">crsconfig_params</code> configuration file. Similar to the Oracle Grid Infrastructure installer, the Configuration Wizard performs various validations of the Grid home and inputs before and after you run through the wizard.</p>
<p>Using the Configuration Wizard, you can configure a new Grid Infrastructure on one or more nodes, or configure an upgraded Grid Infrastructure. You can also run the Configuration Wizard in silent mode.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>Before running the Configuration Wizard, ensure that the Grid Infrastructure home is current, with all necessary patches applied.</p>
</li>
<li>
<p>To launch the Configuration Wizard in the following procedures:</p>
<p>On Linux and UNIX, run the following command:</p>
<pre dir="ltr">
<span class="italic">Oracle_home</span>/crs/config/config.sh
</pre>
<p>On Windows, run the following command:</p>
<pre dir="ltr">
<span class="italic">Oracle_home</span>\crs\config\config.bat
</pre></li>
</ul>
</div>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BGBEFCEF">Configuring a Single Node</a></p>
</li>
<li>
<p><a href="#BGBCDFDH">Configuring Multiple Nodes</a></p>
</li>
<li>
<p><a href="#BGBIBIFH">Upgrading Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#BGBJDIEA">Running the Configuration Wizard in Silent Mode</a></p>
</li>
</ul>
<a id="BGBEFCEF"></a>
<div id="CWADD92095" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring a Single Node</h3>
<p>To use the Configuration Wizard to configure a single node:</p>
<ol>
<li>
<p>Start the Configuration Wizard, as follows:</p>
<pre dir="ltr">
$ <span class="italic">Oracle_home</span>/crs/config/config.sh
</pre></li>
<li>
<p>On the Select Installation Option page, select <span class="bold">Configure Grid Infrastructure for a Cluster</span>.</p>
</li>
<li>
<p>On the Cluster Node Information page, select only the local node and corresponding VIP name.</p>
</li>
<li>
<p>Continue adding your information on the remaining wizard pages.</p>
</li>
<li>
<p>Review your inputs on the Summary page and click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>Run the <code dir="ltr">root.sh</code> script as instructed by the Configuration Wizard.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BGBCDFDH"></a>
<div id="CWADD92096" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring Multiple Nodes</h3>
<p>To use the Configuration Wizard to configure multiple nodes:</p>
<ol>
<li>
<p>Start the Configuration Wizard, as follows:</p>
<pre dir="ltr">
$ <span class="italic">Oracle_home</span>/crs/config/config.sh
</pre></li>
<li>
<p>On the Select Installation Option page, select <span class="bold">Configure Grid Infrastructure for a Cluster</span>.</p>
</li>
<li>
<p>On the Cluster Node Information page, select the nodes you want to configure and their corresponding VIP names. The Configuration Wizard validates the nodes you select to ensure that they are ready.</p>
</li>
<li>
<p>Continue adding your information on the remaining wizard pages.</p>
</li>
<li>
<p>Review your inputs on the Summary page and click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>Run the <code dir="ltr">root.sh</code> script as instructed by the Configuration Wizard.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BGBIBIFH"></a>
<div id="CWADD92097" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Upgrading Grid Infrastructure</h3>
<p>To use the Configuration Wizard to upgrade the Grid Infrastructure:</p>
<ol>
<li>
<p>Start the Configuration Wizard, as follows:</p>
<pre dir="ltr">
$ <span class="italic">Oracle_home</span>/crs/config/config.sh
</pre></li>
<li>
<p>On the Select Installation Option page, select <span class="bold">Upgrade Grid Infrastructure</span>.</p>
</li>
<li>
<p>On the Grid Infrastructure Node Selection page, select the nodes you want to upgrade.</p>
</li>
<li>
<p>Continue adding your information on the remaining wizard pages.</p>
</li>
<li>
<p>Review your inputs on the Summary page and click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>Run the <code dir="ltr">rootupgrade.sh</code> script as instructed by the Configuration Wizard.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BGBJDIEA"></a>
<div id="CWADD92098" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Running the Configuration Wizard in Silent Mode</h3>
<p>To use the Configuration Wizard in silent mode to configure or upgrade nodes, start the Configuration Wizard from the command line with <code dir="ltr">-silent -responseFile</code> <code dir="ltr"><span class="codeinlineitalic">file_name</span></code>. The wizard validates the response file and proceeds with the configuration. If any of the inputs in the response file are found to be invalid, then the Configuration Wizard displays an error and exits. Run the <code dir="ltr">root</code> and <code dir="ltr">configToolAllCommands</code> scripts as prompted.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDGIAAD"></a>
<div id="CWADD92099" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring IPMI for Failure Isolation</h2>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BGBGAJEI">About Using IPMI for Failure Isolation</a></p>
</li>
<li>
<p><a href="#CHDCECHJ">Configuring Server Hardware for IPMI</a></p>
</li>
<li>
<p><a href="#BGBECJHG">Postinstallation Configuration of IPMI-based Failure Isolation Using CRSCTL</a></p>
</li>
</ul>
<a id="BGBGAJEI"></a>
<div id="CWADD92100" class="sect2">
<h3 class="sect2">About Using IPMI for Failure Isolation</h3>
<p>Failure isolation is a process by which a failed node is isolated from the rest of the cluster to prevent the failed node from corrupting data. The ideal fencing involves an external mechanism capable of restarting a problem node without cooperation either from Oracle Clusterware or from the operating system running on that node. To provide this capability, Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) supports the <a id="sthref134"></a>Intelligent Management Platform Interface specification (IPMI) (also known as Baseboard Management Controller (BMC)), an industry-standard management protocol.</p>
<p>Typically, you configure failure isolation using IPMI during Grid Infrastructure installation, when you are provided with the option of configuring IPMI from the Failure Isolation Support screen. If you do not configure IPMI during installation, then you can configure it after installation using the Oracle Clusterware Control utility (CRSCTL), as described in <a href="#BGBECJHG">"Postinstallation Configuration of IPMI-based Failure Isolation Using CRSCTL"</a>.</p>
<p>To use IPMI for failure isolation, each cluster member node must be equipped with an IPMI device running firmware compatible with IPMI version 1.5, which supports IPMI over a local area network (LAN). During database operation, failure isolation is accomplished by communication from the evicting Cluster Synchronization Services daemon to the failed node's IPMI device over the LAN. The IPMI-over-LAN protocol is carried over an authenticated session protected by a user name and password, which are obtained from the administrator during installation.</p>
<p>In order to support dynamic IP address assignment for IPMI using DHCP, the Cluster Synchronization Services daemon requires direct communication with the local IPMI device during Cluster Synchronization Services startup to obtain the IP address of the IPMI device. (This is not true for HP-UX and Solaris platforms, however, which require that the IPMI device be assigned a static IP address.) This is accomplished using an IPMI probe command (OSD), which communicates with the IPMI device through an IPMI driver, which you must install on each cluster system.</p>
<p>If you assign a static IP address to the IPMI device, then the IPMI driver is not strictly required by the Cluster Synchronization Services daemon. The driver <span class="italic">is</span> required, however, to use <code dir="ltr">ipmitool</code> or <code dir="ltr">ipmiutil</code> to configure the IPMI device but you can also do this with management consoles on some platforms.</p>
</div>
<!-- class="sect2" -->
<a id="CHDCECHJ"></a>
<div id="CWADD92101" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring Server Hardware for IPMI</h3>
<p>Install and enable the IPMI driver, and configure the IPMI device, as described in the <a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform.</p>
</div>
<!-- class="sect2" -->
<a id="BGBECJHG"></a>
<div id="CWADD92102" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Postinstallation Configuration of IPMI-based Failure Isolation Using CRSCTL</h3>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDIBHEH">IPMI Postinstallation Configuration with Oracle Clusterware</a></p>
</li>
<li>
<p><a href="#CHDCBJEI">Modifying IPMI Configuration Using CRSCTL</a></p>
</li>
<li>
<p><a href="#BGBDCIIE">Removing IPMI Configuration Using CRSCTL</a></p>
</li>
</ul>
<a id="CHDIBHEH"></a>
<div id="CWADD92103" class="sect3">
<h4 class="sect3">IPMI Postinstallation Configuration with Oracle Clusterware</h4>
<p>When you install IPMI during Oracle Clusterware installation, <a id="sthref135"></a><a id="sthref136"></a>you configure failure isolation in two phases. Before you start the installation, you install and enable the IPMI driver in the server operating system, and configure the IPMI hardware on each node (IP address mode, admin credentials, and so on), as described in <a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a>. When you install Oracle Clusterware, the installer collects the IPMI administrator user ID and password, and stores them in an Oracle Wallet in node-local storage, in OLR.</p>
<p>After you complete the server configuration, complete the following procedure on each cluster node to register IPMI administrators and passwords on the nodes.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If IPMI is configured to obtain its IP address using DHCP, it may be necessary to reset IPMI or restart the node to cause it to obtain an address.</div>
<ol>
<li>
<p>Start Oracle Clusterware, which allows it to obtain the current IP address from IPMI. This confirms the ability of the clusterware to communicate with IPMI, which is necessary at startup.</p>
<p>If Oracle Clusterware was running before IPMI was configured, you can shut Oracle Clusterware down and restart it. Alternatively, you can use the IPMI management utility to obtain the IPMI IP address and then use CRSCTL to store the IP address in OLR by running a command similar to the following:</p>
<pre dir="ltr">
crsctl set css ipmiaddr 192.168.10.45
</pre></li>
<li>
<p>Use CRSCTL to store the previously established user ID and password for the resident IPMI in OLR by running the <code dir="ltr">crsctl set css ipmiadmin</code> command, and supplying password at the prompt. For example:</p>
<pre dir="ltr">
crsctl set css ipmiadmin <span class="italic">administrator_name</span>
IPMI BMC password: <span class="italic">password</span>
</pre>
<p>This command validates the supplied credentials and fails if another cluster node cannot access the local IPMI using them.</p>
<p>After you complete hardware and operating system configuration, and register the IPMI administrator on Oracle Clusterware, IPMI-based failure isolation should be fully functional.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDCBJEI"></a>
<div id="CWADD92104" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Modifying IPMI Configuration Using CRSCTL</h4>
<p>To <a id="sthref137"></a>modify an existing IPMI-based failure isolation configuration (for example to change IPMI passwords, or to configure IPMI for failure isolation in an existing installation), use CRSCTL with the IPMI configuration tool appropriate to your platform. For example, to change the administrator password for IPMI, you must first modify the IMPI configuration as described in <a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a>, and then use CRSCTL to change the password in OLR.</p>
<p>The configuration data needed by Oracle Clusterware for IPMI is kept in an Oracle Wallet in OCR. Because the configuration information is kept in a secure store, it must be written by the Oracle Clusterware installation owner account (the Grid user), so you must log in as that installation user.</p>
<p>Use the following procedure to modify an existing IPMI configuration:</p>
<ol>
<li>
<p>Enter the <code dir="ltr">crsctl set css ipmiadmin</code> <code dir="ltr"><span class="codeinlineitalic">administrator_name</span></code> command. For example, with the user <code dir="ltr">IPMIadm</code>:</p>
<pre dir="ltr">
crsctl set css ipmiadmin IPMIadm
</pre>
<p>Provide the administrator password. Oracle Clusterware stores the administrator name and password for the local IPMI in OLR.</p>
<p>After storing the new credentials, Oracle Clusterware can retrieve the new credentials and distribute them as required.</p>
</li>
<li id="BGBFCCIA">
<p>Enter the <code dir="ltr">crsctl set css ipmiaddr</code> <code dir="ltr"><span class="codeinlineitalic">bmc_ip_address</span></code> command. For example:</p>
<pre dir="ltr">
crsctl set css ipmiaddr 192.0.2.244
</pre>
<p>This command stores the new IPMI IP address of the local IPMI in OLR, After storing the IP address, Oracle Clusterware can retrieve the new configuration and distribute it as required.</p>
</li>
<li id="BGBBDGCG">
<p>Enter the <code dir="ltr">crsctl get css ipmiaddr</code> command. For example:</p>
<pre dir="ltr">
crsctl get css ipmiaddr
</pre>
<p>This command retrieves the IP address for the local IPMI from OLR and displays it on the console.</p>
</li>
<li>
<p>Remove the IPMI configuration information for the local IPMI from OLR and delete the registry entry, as follows:</p>
<pre dir="ltr">
crsctl unset css ipmiconfig
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="crsref.htm#CHDFEEEG">"Oracle RAC Environment CRSCTL Commands"</a> for descriptions of these CRSCTL commands</div>
</div>
<!-- class="sect3" -->
<a id="BGBDCIIE"></a>
<div id="CWADD92174" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Removing IPMI Configuration Using CRSCTL</h4>
<p>You can <a id="sthref138"></a>remove an IPMI configuration from a cluster using CRSCTL if you want to stop using IPMI completely or if IPMI was initially configured by someone other than the user that installed Oracle Clusterware. If the latter is true, then Oracle Clusterware cannot access the IPMI configuration data and IPMI is not usable by the Oracle Clusterware software, and you must reconfigure IPMI as the user that installed Oracle Clusterware.</p>
<p>To completely remove IPMI, perform the following steps. To reconfigure IPMI as the user that installed Oracle Clusterware, perform steps <a href="#BGBFEAID">3</a> and <a href="#BGBDADCG">4</a>, then repeat steps <a href="#BGBFCCIA">2</a> and <a href="#BGBBDGCG">3</a> in <a href="#CHDCBJEI">"Modifying IPMI Configuration Using CRSCTL"</a>.</p>
<ol>
<li>
<p>Disable the IPMI driver and eliminate the boot-time installation, as follows:</p>
<pre dir="ltr">
/sbin/modprobe &ndash;r
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for more information about the IPMI driver</div>
</li>
<li>
<p>Disable IPMI-over-LAN for the local IPMI using either <code dir="ltr">ipmitool</code> or <code dir="ltr">ipmiutil</code>, to prevent access over the LAN or change the IPMI administrator user ID and password.</p>
</li>
<li id="BGBFEAID">
<p>Ensure that Oracle Clusterware is running and then use CRSCTL to remove the IPMI configuration data from OLR by running the following command:</p>
<pre dir="ltr">
crsctl unset css ipmiconfig
</pre></li>
<li id="BGBDADCG">
<p>Restart Oracle Clusterware so that it runs without the IPMI configuration by running the following commands as <code dir="ltr">root</code>:</p>
<pre dir="ltr">
# crsctl stop crs
# crsctl start crs
</pre></li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDCECBJ"></a>
<div id="CWADD91999" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Cluster Time Management</h2>
<p>The <a id="sthref139"></a><a id="sthref140"></a>Cluster Time Synchronization Service (CTSS) is installed as part of Oracle Clusterware and runs in <span class="italic">observer</span> mode if it detects a time synchronization service or a time synchronization service configuration, valid or broken, on the system.If CTSS detects that there is no time synchronization service or time synchronization service configuration on <span class="italic">any</span> node in the cluster, then CTSS goes into <span class="italic">active</span> mode and takes over time management for the cluster.</p>
<p>When nodes join the cluster, if CTSS is in active mode, then it compares the time on those nodes to a reference clock located on one node in the cluster. If there is a discrepancy between the two times and the discrepancy is within a certain stepping limit, then CTSS performs <a id="sthref141"></a><span class="italic">step time synchronization</span>, which is to step the time of the nodes joining the cluster to synchronize them with the reference.</p>
<p>When Oracle Clusterware starts, if CTSS is running in active mode and the time discrepancy is outside the stepping limit (the limit is 24 hours), then CTSS generates an alert in the alert log, exits, and Oracle Clusterware startup fails. You must manually adjust the time of the nodes joining the cluster to synchronize with the cluster, after which Oracle Clusterware can start and CTSS can manage the time for the nodes.</p>
<p>Clocks on the nodes in the cluster become desynchronized with the reference clock (a time CTSS uses as a basis and is on the first node started in the cluster) periodically for various reasons. When this happens, CTSS performs <a id="sthref142"></a><span class="italic">slew time synchronization</span>, which is to speed up or slow down the system time on the nodes until they are synchronized with the reference system time. In this time synchronization method, CTSS does not adjust time backward, which guarantees monotonic increase of the system time.</p>
<p>When performing slew time synchronization, CTSS never runs time backward to synchronize with the reference clock. CTSS periodically writes alerts to the alert log containing information about how often it adjusts time on nodes to keep them synchronized with the reference clock.</p>
<p>To activate CTSS in your cluster, you must stop and deconfigure the vendor time synchronization service on <span class="italic">all</span> nodes in the cluster. CTSS detects when this happens and assumes time management for the cluster.</p>
<p>For example, to deconfigure NTP, you must remove or rename the <code dir="ltr">ntp.conf</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In Windows, CTSS does not check whether the <code dir="ltr">ntp.conf</code> file exists, rather, it only detects whether there is a time synchronization service.</div>
<p>Similarly, if you want to deactivate CTSS in your cluster, then do the following:</p>
<ol>
<li>
<p>Configure the vendor time synchronization service on <span class="italic">all</span> nodes in the cluster. CTSS detects this change and reverts back to observer mode.</p>
</li>
<li>
<p>Use the <code dir="ltr"><a href="crsref.htm#CHEDBDHA">crsctl check ctss</a></code> command to ensure that CTSS is operating in observer mode.</p>
</li>
<li>
<p>Start the vendor time synchronization service on <span class="italic">all</span> nodes in the cluster.</p>
</li>
<li>
<p>Use the <code dir="ltr"><a href="cvu.htm#CACJEGGE">cluvfy comp clocksync</a> -n all</code> command to verify that the vendor time synchronization service is operating.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for information about configuring NTP for Oracle Clusterware, or disabling it to use CTSS</div>
</div>
<!-- class="sect1" -->
<a id="BGBGDHFG"></a>
<div id="CWADD90979" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Changing Network Addresses on Manually Configured Networks</h2>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABECJDA">Understanding When You Must Configure Network Addresses</a></p>
</li>
<li>
<p><a href="#CACFIGCH">Understanding SCAN Addresses and Client Service Connections</a></p>
</li>
<li>
<p><a href="#BABGJADH">Changing the Virtual IP Addresses</a></p>
</li>
<li>
<p><a href="#BGBCFGFB">Changing Oracle Clusterware Private Network Configuration</a></p>
</li>
</ul>
<a id="BABECJDA"></a>
<div id="CWADD92079" class="sect2">
<h3 class="sect2">Understanding When You Must Configure Network Addresses</h3>
<p>An Oracle Clusterware configuration requires at least two interfaces:</p>
<ul>
<li>
<p>A public network interface, on which users and application servers connect to access data on the database server</p>
</li>
<li>
<p>A private network interface for internode communication.</p>
</li>
</ul>
<p>If you use Grid Naming Service and DHCP to manage your network connections, then you may not need to configure address information on the cluster. Using GNS allows public Virtual Internet Protocol (VIP) addresses to be dynamic, DHCP-provided addresses. Clients submit name resolution requests to your network's Domain Name Service (DNS), which forwards the requests to the grid naming service (GNS), managed within the cluster. GNS then resolves these requests to nodes in the cluster.</p>
<p>If you do not use GNS, and instead configure networks manually, then public VIP addresses must be statically configured in the DNS, VIPs must be statically configured in the DNS and hosts file, and private IP addresses require static configuration.</p>
</div>
<!-- class="sect2" -->
<a id="CACFIGCH"></a>
<div id="CWADD11847" class="sect2">
<h3 class="sect2">Understanding SCAN Addresses and Client Service Connections</h3>
<p>Public network addresses are used to provide services to clients. If your clients are connecting to the Single Client Access Name (SCAN) addresses, then you may need to change public and virtual IP addresses as you add or remove nodes from the cluster, but you do not need to update clients with new cluster addresses.</p>
<p>SCANs function like a cluster alias. However, SCANs are resolved on any node in the cluster, so unlike a VIP address for a node, clients connecting to the SCAN no longer require updated VIP addresses as nodes are added to or removed from the cluster. Because the SCAN addresses resolve to the cluster, rather than to a node address in the cluster, nodes can be added to or removed from the cluster without affecting the SCAN address configuration.</p>
<p>The SCAN is a fully qualified name (host name+domain) that is configured to resolve to all the addresses allocated for the SCAN. The addresses resolve using Round Robin DNS either on the DNS server, or within the cluster in a GNS configuration. SCAN listeners can run on any node in the cluster. SCANs provide location independence for the databases, so that client configuration does not have to depend on which nodes run a particular database.</p>
<p>Oracle Database 11<span class="italic">g</span> release 2 (11.2) and later instances only register with SCAN listeners as remote listeners. Upgraded databases register with SCAN listeners as remote listeners, and also continue to register with all node listeners.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Because of the Oracle Clusterware installation requirement that you provide a SCAN name during installation, if you resolved at least one IP address using the server <code dir="ltr">/etc/hosts</code> file to bypass the installation requirement but you do not have the infrastructure required for SCAN, then, after the installation, you can ignore the SCAN and connect to the databases in the cluster using VIPs.
<p>Oracle <span class="italic">does not</span> support removing the SCAN address.</p>
</div>
</div>
<!-- class="sect2" -->
<a id="BABGJADH"></a>
<div id="CWADD92080" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Changing the Virtual IP Addresses</h3>
<p><a id="sthref143"></a>Clients configured to use public VIP addresses for Oracle Database releases before Oracle Database 11<span class="italic">g</span> release 2 (11.2) can continue to use their existing connection addresses. Oracle recommends that you configure clients to use SCANs, but it is not required that you use SCANs. When an earlier version of Oracle Database is upgraded, it is registered with the SCAN, and clients can start using the SCAN to connect to that database, or continue to use VIP addresses for connections.</p>
<p>If you continue to use VIP addresses for client connections, you can modify the VIP address while Oracle Database and Oracle ASM continue to run. However, you must stop services while you modify the address. When you restart the VIP address, services are also restarted on the node.</p>
<p>This procedure cannot be used to change a static public subnet to use DHCP. Only the <code dir="ltr">srvctl add network -S</code> command creates a DHCP network.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The following instructions describe how to change only a VIP address, and assume that the host name associated with the VIP address does not change. Note that you do not need to update VIP addresses manually if you are using GNS, and VIPs are assigned using DHCP.
<p>If you are changing only the VIP address, then update the DNS and the client hosts files. Also, update the server hosts files, if those are used for VIP addresses.</p>
</div>
<p>Perform the following steps to change a VIP address:</p>
<ol>
<li>
<p><a id="sthref144"></a><a id="sthref145"></a>Stop all services running on the node whose VIP address you want to change using the following command syntax, where <code dir="ltr"><span class="codeinlineitalic">database_name</span></code> is the name of the database, <code dir="ltr"><span class="codeinlineitalic">service_name_list</span></code> is a list of the services you want to stop, and <code dir="ltr"><span class="codeinlineitalic">my_node</span></code> is the name of the node whose VIP address you want to change:</p>
<pre dir="ltr">
srvctl stop service -d <span class="italic">database_name</span>  -s <span class="italic">service_name_list</span> -n <span class="italic">my_node</span>
</pre>
<p>This example specifies the database name (<code dir="ltr">grid</code>) using the <code dir="ltr">-d</code> option and specifies the services (<code dir="ltr">sales,oltp</code>) on the appropriate node (<code dir="ltr">mynode</code>).</p>
<pre dir="ltr">
$ srvctl stop service -d grid -s sales,oltp -n mynode
</pre></li>
<li>
<p>Confirm the current IP address for the VIP address by running the <code dir="ltr">srvctl config vip</code> command. This command displays the current VIP address bound to one of the network interfaces. The following example displays the configured VIP address:</p>
<pre dir="ltr">
$ srvctl config vip -n stbdp03
VIP exists.:stbdp03
VIP exists.: /stbdp03-vip/192.168.2.20/255.255.255.0/eth0
</pre></li>
<li>
<p>Stop the VIP resource using the <a id="sthref146"></a><code dir="ltr">srvctl stop vip</code> command:</p>
<pre dir="ltr">
$ srvctl stop vip -n mynode
</pre></li>
<li>
<p>Verify that the VIP resource is no longer running by running the <code dir="ltr">ifconfig -a</code> command on Linux and UNIX systems (or issue the <code dir="ltr">ipconfig /all</code> command on Windows systems), and confirm that the interface (in the example it was <code dir="ltr">eth0:1</code>) is no longer listed in the output.</p>
</li>
<li>
<p>Make any changes necessary to the <code dir="ltr">/etc/hosts</code> files on all nodes on Linux and UNIX systems, or the <code dir="ltr">%windir%\system32\drivers\etc\hosts</code> file on Windows systems, and make any necessary DNS changes to associate the new IP address with the old host name.</p>
</li>
<li>
<p>To use a different subnet or NIC for the default network before you change any VIP resource, you must use the <code dir="ltr">srvctl modify network -S</code> <code dir="ltr"><span class="codeinlineitalic">subnet</span></code><code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">netmask</span></code><code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">interface</span></code> command as <code dir="ltr">root</code> to change the network resource, where <code dir="ltr"><span class="codeinlineitalic">subnet</span></code> is the new subnet address, <code dir="ltr"><span class="codeinlineitalic">netmask</span></code> is the new netmask, and <code dir="ltr"><span class="codeinlineitalic">interface</span></code> is the new interface. After you change the subnet, then you must change each node's VIP to an IP address on the new subnet, as described in the next step.</p>
</li>
<li>
<p>Modify the node applications and provide the new VIP address using the following <code dir="ltr">srvctl modify nodeapps</code> syntax:</p>
<pre dir="ltr">
$ srvctl modify nodeapps -n <span class="italic">node_name</span> -A <span class="italic">new_vip_address</span>
</pre>
<p>The command includes the following flags and values:</p>
<ul>
<li>
<p><code dir="ltr">-n</code> <code dir="ltr"><span class="codeinlineitalic">node_name</span></code> is the node name</p>
</li>
<li>
<p><code dir="ltr">-A</code> <code dir="ltr"><span class="codeinlineitalic">new_vip_address</span></code> is the node-level VIP address: <code dir="ltr"><span class="codeinlineitalic">name</span></code>|<code dir="ltr"><span class="codeinlineitalic">ip</span></code><code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">netmask</span></code><code dir="ltr">/</code><code dir="ltr">[</code><code dir="ltr"><span class="codeinlineitalic">if1</span></code><code dir="ltr">[|</code><code dir="ltr"><span class="codeinlineitalic">if2</span></code><code dir="ltr">|...]]</code></p>
<p>For example, issue the following command as the <code dir="ltr">root</code> user:</p>
<pre dir="ltr">
srvctl modify nodeapps -n mynode -A 192.168.2.125/255.255.255.0/eth0
</pre>
<p>Attempting to issue this command as the installation owner account may result in an error. For example, if the installation owner is <code dir="ltr">oracle</code>, then you may see the error <code dir="ltr">PRCN-2018: Current user oracle is not a privileged user</code>.To avoid the error, run the command as the <code dir="ltr">root</code> or system administrator account.</p>
</li>
</ul>
</li>
<li>
<p>Start the node VIP by running the <code dir="ltr">srvctl start vip</code> command:</p>
<pre dir="ltr">
$ srvctl start vip -n <span class="italic">node_name</span>
</pre>
<p>The following command example starts the VIP on the node named <code dir="ltr">mynode</code>:</p>
<pre dir="ltr">
$ srvctl start vip -n mynode
</pre></li>
<li>
<p>Repeat the steps for each node in the cluster.</p>
<p>Because the SRVCTL utility is a clusterwide management tool, you can accomplish these tasks for any specific node from any node in the cluster, without logging in to each of the cluster nodes.</p>
</li>
<li>
<p>Run the following command to verify node connectivity between all of the nodes for which your cluster is configured. This command discovers all of the network interfaces available on the cluster nodes and verifies the connectivity between all of the nodes by way of the discovered interfaces. This command also lists all of the interfaces available on the nodes which are suitable for use as VIP addresses.</p>
<pre dir="ltr">
$ <a id="sthref147"></a>cluvfy comp nodecon -n all -verbose
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BGBCFGFB"></a>
<div id="CWADD90980" class="sect2">
<h3 class="sect2">Changing Oracle Clusterware Private Network Configuration</h3>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDDAIIC">About Private Networks and Network Interfaces</a></p>
</li>
<li>
<p><a href="#BGBEIABB">Redundant Interconnect Usage</a></p>
</li>
<li>
<p><a href="#CHDBJAAF">Consequences of Changing Interface Names Using OIFCFG</a></p>
</li>
<li>
<p><a href="#CHDJFJFJ">Changing a Network Interface</a></p>
</li>
</ul>
<a id="CHDDAIIC"></a>
<div id="CWADD92112" class="sect3">
<h4 class="sect3">About Private Networks and Network Interfaces</h4>
<p>Oracle Clusterware requires that each node is connected through a private network<a id="sthref148"></a> (in addition to the public network). The private network connection is referred to as the <span class="italic"><a id="sthref149"></a>cluster interconnect</span>. <a href="#CHDJJEJH">Table 2-5</a> describes how the network interface card <a id="sthref150"></a>(NIC) and the private IP address are stored.</p>
<p>Oracle only supports clusters in which all of the nodes use the same network interface connected to the same subnet (defined as a global interface with the <code dir="ltr">oifcfg</code> command). You cannot use different network interfaces for each node (node-specific interfaces). Refer to <a href="oifcfg.htm#BCGGJJCI">Appendix D, "Oracle Interface Configuration Tool (OIFCFG) Command Reference"</a> for more information about global and node-specific interfaces.</p>
<div id="CWADD91499" class="tblhruleformal">
<p class="titleintable"><a id="sthref151"></a><a id="CHDJJEJH"></a>Table 2-5 Storage for the Network Interface, Private IP Address, and Private Host Name</p>
<table class="cellalignment414" title="Storage for the Network Interface, Private IP Address, and Private Host Name" summary="This table provides information about storage of the network adapter, the private network IP address, and the private host name." dir="ltr">
<thead>
<tr class="cellalignment408">
<th class="cellalignment415" id="r1c1-t19">Entity</th>
<th class="cellalignment415" id="r1c2-t19">Stored In...</th>
<th class="cellalignment415" id="r1c3-t19">Comments</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment408">
<td class="cellalignment416" id="r2c1-t19" headers="r1c1-t19">
<p>Network interface name</p>
</td>
<td class="cellalignment416" headers="r2c1-t19 r1c2-t19">
<p>Operating system</p>
<p>For example: <code dir="ltr">eth1</code></p>
</td>
<td class="cellalignment416" headers="r2c1-t19 r1c3-t19">
<p>You can use wildcards when specifying network interface names.</p>
<p>For example: <code dir="ltr">eth*</code></p>
</td>
</tr>
<tr class="cellalignment408">
<td class="cellalignment416" id="r3c1-t19" headers="r1c1-t19">
<p>Private network Interfaces</p>
</td>
<td class="cellalignment416" headers="r3c1-t19 r1c2-t19">
<p>Oracle Clusterware, in the Grid Plug and Play (GPnP) Profile</p>
</td>
<td class="cellalignment416" headers="r3c1-t19 r1c3-t19">
<p>Configure an interface for use as a private interface during installation by marking the interface as <span class="bold">Private</span>, or use the <code dir="ltr">oifcfg setif</code> command to designate an interface as a private interface.</p>
<p><span class="bold">See Also:</span> <a href="oifcfg.htm#BCGGEFEI">"OIFCFG Commands"</a> for more information about the <code dir="ltr">oifcfg setif</code> command</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" --></div>
<!-- class="sect3" -->
<a id="BGBEIABB"></a>
<div id="CWADD92358" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Redundant Interconnect Usage</h4>
<p>You can define multiple interfaces for Redundant Interconnect Usage by classifying the interfaces as private either during installation or after installation using the <code dir="ltr">oifcfg setif</code> command. When you do, Oracle Clusterware creates from one to four (depending on the number of interfaces you define) <a id="sthref152"></a><a id="sthref153"></a>highly available IP (HAIP) addresses, which Oracle Database and Oracle ASM instances use to ensure highly available and load balanced communications.</p>
<p>The Oracle software (including Oracle RAC, Oracle ASM, and Oracle ACFS, all 11<span class="italic">g</span> release 2 (11.2.0.2), or later), by default, uses these HAIP addresses for all of its traffic, allowing for load balancing across the provided set of cluster interconnect interfaces. If one of the defined cluster interconnect interfaces fails or becomes non-communicative, then Oracle Clusterware transparently moves the corresponding HAIP address to one of the remaining functional interfaces.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Clusterware uses at most four interfaces at any given point, regardless of the number of interfaces defined. If one of the interfaces fails, then the HAIP address moves to another one of the configured interfaces in the defined set.
<p>When there is only a single HAIP address and multiple interfaces from which to select, the interface to which the HAIP address moves is no longer the original interface upon which it was configured. Oracle Clusterware selects the interface with the <span class="italic">lowest</span> numerical subnet to which to add the HAIP address.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your platform for information about defining interfaces</div>
</div>
<!-- class="sect3" -->
<a id="CHDBJAAF"></a>
<div id="CWADD92113" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Consequences of Changing Interface Names Using OIFCFG</h4>
<p><a id="sthref154"></a><a id="sthref155"></a>The consequences of changing interface names depend on which name you are changing, and whether you are also changing the IP address. In cases where you are only changing the interface names, the consequences are minor. If you change the name for the public interface that is stored in OCR, then you also must modify the node applications for the cluster. Therefore, you must stop the node applications for this change to take effect.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support (formerly Oracle<span class="italic">MetaLink</span>) note 276434.1 for more details about changing the node applications to use a new public interface name, available at the following URL:
<pre dir="ltr">
<a href="https://metalink.oracle.com">https://metalink.oracle.com</a>
</pre></div>
</div>
<!-- class="sect3" -->
<a id="CHDJFJFJ"></a>
<div id="CWADD92114" class="sect3">
<h4 class="sect3">Changing a Network Interface</h4>
<p>You can <a id="sthref156"></a><a id="sthref157"></a>change a network interface and its associated subnet address using the following procedure. You must perform this change on all nodes in the cluster.</p>
<p>This procedure changes the network interface and IP address on each node in the cluster used previously by Oracle Clusterware and Oracle Database.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
The interface that the Oracle RAC (RDBMS) interconnect uses must be the same interface that Oracle Clusterware uses with the host name. Do not configure the private interconnect for Oracle RAC on a separate interface that is not monitored by Oracle Clusterware.</div>
<ol>
<li>
<p>Ensure that Oracle Clusterware is running on all of the cluster nodes by running the following command:</p>
<pre dir="ltr">
$ olsnodes -s
</pre>
<p>The command returns output similar to the following, showing that Oracle Clusterware is running on all of the nodes in the cluster:</p>
<pre dir="ltr">
./olsnodes -s
myclustera Active
myclusterc Active
myclusterb Active
</pre></li>
<li>
<p>Ensure that the replacement interface is configured and operational in the operating system on all of the nodes. Use the <code dir="ltr">ifconfig</code> command (or <code dir="ltr">ipconfig</code> on Windows) for your platform. For example, on Linux, use:</p>
<pre dir="ltr">
$ /sbin/ifconfig..
</pre></li>
<li>
<p>Add the new interface to the cluster as follows, providing the name of the new interface and the subnet address, using the following command:</p>
<pre dir="ltr">
$ oifcfg setif -global <span class="italic">if_name</span>/<span class="italic">subnet</span>:cluster_interconnect
</pre>
<p>You can use wildcards with the interface name. For example, <code dir="ltr">oifcfg setif -global "eth*/192.168.0.0:cluster_interconnect</code> is valid syntax. However, be careful to avoid ambiguity with other addresses or masks used with other cluster interfaces. If you use wildcards, then the command returns a warning similar to the following:</p>
<pre dir="ltr">
eth*/192.168.0.0 global cluster_interconnect
PRIF-29: Warning: wildcard in network parameters can cause mismatch
among GPnP profile, OCR, and system
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
Legacy network configuration does not support wildcards; thus wildcards are resolved using current node configuration at the time of the update.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="oifcfg.htm#BCGGJJCI">Appendix D, "Oracle Interface Configuration Tool (OIFCFG) Command Reference"</a> for more information about using OIFCFG commands</div>
</li>
<li>
<p>After the previous step completes, you can remove the former subnet, as follows, by providing the name and subnet address of the former interface:</p>
<pre dir="ltr">
oifcfg delif -global <span class="italic">if_name</span>/<span class="italic">subnet</span>
</pre>
<p>For example:</p>
<pre dir="ltr">
$ oifcfg delif -global eth1/10.10.0.0
</pre>
<div class="infobox-note">
<p class="notep1">Caution:</p>
This step should be performed only after a replacement interface is committed into the Grid Plug and Play configuration. Simple deletion of cluster interfaces without providing a valid replacement can result in invalid cluster configuration.</div>
</li>
<li>
<p>Verify the current configuration using the following command:</p>
<pre dir="ltr">
oifcfg getif
</pre>
<p>For example:</p>
<pre dir="ltr">
$ oifcfg getif
eth2 10.220.52.0 global cluster_interconnect
eth0 10.220.16.0 global public
</pre></li>
<li>
<p>Stop Oracle Clusterware on all nodes by running the following command as <code dir="ltr">root</code> on each node:</p>
<pre dir="ltr">
# crsctl stop crs
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
With cluster network configuration changes, the cluster must be fully stopped; do not use rolling stops and restarts.</div>
</li>
<li>
<p>When Oracle Clusterware stops, deconfigure the deleted network interface in the operating system using the <code dir="ltr">ifconfig</code> command. For example:</p>
<pre dir="ltr">
$ ifconfig down
</pre>
<p>At this point, the IP address from network interfaces for the former subnet is deconfigured from Oracle Clusterware. This command does not affect the configuration of the IP address on the operating system.</p>
<p>You must update the operating system configuration changes, because changes made using <code dir="ltr">ifconfig</code> are not persistent.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Your operating system documentation for more information about how to make <code dir="ltr">ifconfig</code> commands persistent</div>
</li>
<li>
<p>Restart Oracle Clusterware by running the following command on each node in the cluster as the <code dir="ltr">root</code> user:</p>
<pre dir="ltr">
# crsctl start crs
</pre>
<p>The changes take effect when Oracle Clusterware restarts.</p>
<p>If you use the <a id="sthref158"></a><a id="sthref159"></a><code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter, then you must update it to reflect the changes.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment407">
<tr>
<td class="cellalignment416">
<table class="cellalignment412">
<tr>
<td class="cellalignment411"><a href="intro.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment411"><a href="votocr.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment419">
<table class="cellalignment410">
<tr>
<td class="cellalignment411"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment411"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment411"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment411"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment411"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment411"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
