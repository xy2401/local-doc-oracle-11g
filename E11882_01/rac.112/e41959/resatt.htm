<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Clusterware Resource Reference</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="dcterms.created" content="2015-06-03T16:55:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Clusterware Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41959-04" />
<meta name="dcterms.isVersionOf" content="CWADD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="cvu.htm" title="Previous" type="text/html" />
<link rel="Next" href="olsnodes.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41959.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/21</span> <!-- End Header -->
<div id="CWADD91383" class="appendix"><a id="CHDCECHH"></a>
<h1 class="appendix"><span class="secnum">B</span> Oracle Clusterware Resource Reference</h1>
<p>This appendix is a reference for Oracle Clusterware resources. It includes descriptions and usage examples of all resource attributes and a detailed description and examples of action scripts.</p>
<p>This appendix includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDBHEAH">Resource Attributes</a></p>
</li>
<li>
<p><a href="#CHDJHDCA">Examples of Action Scripts for Third-Party Applications</a></p>
</li>
</ul>
<div class="refentry"><a id="CHDBHEAH"></a>
<div id="CWADD91443" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Resource Attributes</h2>
<p>This section lists and describes attributes used when you register applications as resources in Oracle Clusterware. Use these attributes with the <code dir="ltr">crsctl add resource</code> command, as follows:</p>
<pre dir="ltr">
$ crsctl add resource <span class="italic">resource_name</span> -type <span class="italic">resource_type</span>
{[-attr "<span class="italic">attribute_name</span>='<span class="italic">attribute_value</span>', <span class="italic">attribute_name</span>='<span class="italic">attribute_value</span>'
, ..."] | [-file <span class="italic">file_name</span>]}
</pre>
<p>List attribute-value pairs in a comma-delimited list after the <code dir="ltr">-attr</code> flag and enclose the value of each attribute in single quotation marks (<code dir="ltr">''</code>). Some resource attributes you cannot configure and are read only.</p>
<p>Alternatively, you can create a text file that contains the attribute-value pairs. For example:</p>
<pre dir="ltr">
PLACEMENT=favored
HOSTING_MEMBERS=node1 node2 node3
RESTART_ATTEMPTS@CARDINALITYID(1)=0
RESTART_ATTEMPTS@CARDINALITYID(2)=0
FAILURE_THRESHOLD@CARDINALITYID(1)=2
FAILURE_THRESHOLD@CARDINALITYID(2)=4
FAILURE_INTERVAL@CARDINALITYID(1)=300
FAILURE_INTERVAL@CARDINALITYID(2)=500
CHECK_INTERVAL=2
CARDINALITY=2
</pre>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDHGBGE">Configurable Resource Attributes</a></p>
</li>
<li>
<p><a href="#CHDIFBEH">Read-Only Resource Attributes</a></p>
</li>
</ul>
<div id="CWADD91385" class="refsect2"><a id="CHDHGBGE"></a>
<h3 class="refsect2">Configurable Resource Attributes</h3>
<p>This section describes the following resource attributes that you can configure when registering an application as a resource in Oracle Clusterware:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Values for all attributes must be in lowercase. Attribute names must be in all uppercase letters.</div>
<ul>
<li>
<p><a href="#CHDIAFJB">ACL</a></p>
</li>
<li>
<p><a href="#CHDHEAGJ">ACTION_SCRIPT</a></p>
</li>
<li>
<p><a href="#CHDFHAEI">ACTIVE_PLACEMENT</a></p>
</li>
<li>
<p><a href="#CHDHBCIH">AGENT_FILENAME</a></p>
</li>
<li>
<p><a href="#CHDFFEHJ">AUTO_START</a></p>
</li>
<li>
<p><a href="#CHDDAFEJ">CARDINALITY</a></p>
</li>
<li>
<p><a href="#CHDECBJC">CHECK_INTERVAL</a></p>
</li>
<li>
<p><a href="#CHDJBFFI">DEGREE</a></p>
</li>
<li>
<p><a href="#CHDDJAHC">DESCRIPTION</a></p>
</li>
<li>
<p><a href="#CHDGBGIE">ENABLED</a></p>
</li>
<li>
<p><a href="#CHDGIJEA">FAILURE_INTERVAL</a></p>
</li>
<li>
<p><a href="#CHDEEBDC">FAILURE_THRESHOLD</a></p>
</li>
<li>
<p><a href="#CHDBFAGG">HOSTING_MEMBERS</a></p>
</li>
<li>
<p><a href="#CHDIEHCH">LOAD</a></p>
</li>
<li>
<p><a href="#CHDJGCEA">NAME</a></p>
</li>
<li>
<p><a href="#CHDFGAAB">OFFLINE_CHECK_INTERVAL</a></p>
</li>
<li>
<p><a href="#CHDBDHFI">PLACEMENT</a></p>
</li>
<li>
<p><a href="#CHDBEAGD">RESTART_ATTEMPTS</a></p>
</li>
<li>
<p><a href="#CHDFFDBE">SCRIPT_TIMEOUT</a></p>
</li>
<li>
<p><a href="#CHDDDBJF">SERVER_POOLS</a></p>
</li>
<li>
<p><a href="#CHDJHECG">START_DEPENDENCIES</a></p>
</li>
<li>
<p><a href="#CHDJCAHF">START_TIMEOUT</a></p>
</li>
<li>
<p><a href="#CHDBFBFH">STOP_DEPENDENCIES</a></p>
</li>
<li>
<p><a href="#CHDHDHDE">STOP_TIMEOUT</a></p>
</li>
<li>
<p><a href="#CHDEEEJC">TYPE</a></p>
</li>
<li>
<p><a href="#CHDIHGEH">UPTIME_THRESHOLD</a></p>
</li>
</ul>
<div id="CWADD91386" class="refsect3"><a id="CHDIAFJB"></a>
<h4 class="refsect3">ACL</h4>
<p><a id="sthref579"></a><a id="sthref580"></a>Defines the owner of a resource and the access privileges granted to various operating system users and groups. The resource owner defines the operating system user of the owner and its privileges. You configure this optional attribute when you create a resource. If you do not configure this attribute, then the value is based on the identity of the process creating the resource. You can change the value of the attribute if such a change is allowed based on the existing privileges of the resource.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
All operating system user names and user groups, including <code dir="ltr">owner</code>, <code dir="ltr">pgrp</code>, <code dir="ltr">user</code>, and <code dir="ltr">group</code>, <span class="italic">must</span> be registered on <span class="italic">all</span> servers in the cluster.</div>
<p>In the string:</p>
<ul>
<li>
<p><code dir="ltr">owner</code>: The operating system user that owns a resource and the user under which the action script or application-specific agent runs, followed by the privileges of the owner.</p>
</li>
<li>
<p><code dir="ltr">pgrp</code>: The operating system group that is the primary group of the owner of a resource, followed by the privileges of members of the primary group.</p>
</li>
<li>
<p><code dir="ltr">other</code>: Operating system users that are neither the owner nor member of the primary group</p>
</li>
<li>
<p><code dir="ltr">r</code>: The read option, which gives the ability to only see a resource, its state, and configuration</p>
</li>
<li>
<p><code dir="ltr">w</code>: The write option, which gives the ability to modify a resource's attributes and to delete the resource</p>
</li>
<li>
<p><code dir="ltr">x</code>: The execute option, which gives the ability to start, stop, and relocate a resource</p>
</li>
</ul>
<p>By default, the identity of the client that creates a resource is the <code dir="ltr">owner</code>. Also by default, <code dir="ltr">root</code>, and the user specified in <code dir="ltr">owner</code> have full privileges. You can grant required operating system users and operating system groups their privileges by adding the following lines to the <code dir="ltr">ACL</code> attribute:</p>
<pre dir="ltr">
user:<span class="italic">user_name</span>:rwx
group:<span class="italic">group_name</span>:rwx
</pre>
<p class="subhead2"><a id="CWADD91387"></a>Usage Example</p>
<pre dir="ltr">
ACL=owner:user_1:rwx,pgrp:osdba:rwx,other::r-
</pre>
<p>In the preceding example, the owner of the resource is <code dir="ltr">user_1</code>, whose primary group is <code dir="ltr">osdba</code>. The user, <code dir="ltr">user_1</code>, has all privileges, as does the <code dir="ltr">osdba</code> group, while other users can only view the resource.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD91390" class="refsect3"><a id="CHDHEAGJ"></a>
<h4 class="refsect3">ACTION_SCRIPT</h4>
<p><a id="sthref581"></a><a id="sthref582"></a>An absolute file name that includes the path and file name of an action script. The agent specified in the <code dir="ltr">AGENT_FILENAME</code> attribute calls the script specified in the <code dir="ltr">ACTION_SCRIPT</code> attribute.</p>
<p class="subhead2"><a id="CWADD91508"></a>Usage Example</p>
<pre dir="ltr">
ACTION_SCRIPT=<span class="italic">fully_qualified_path_to_action_script</span>
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91394" class="refsect3"><a id="CHDFHAEI"></a>
<h4 class="refsect3">ACTIVE_PLACEMENT</h4>
<p><a id="sthref583"></a><a id="sthref584"></a>When set to <code dir="ltr">1</code>, Oracle Clusterware uses this attribute to reevaluate the placement of a resource during addition or restart of a cluster server. For resources where <code dir="ltr">PLACEMENT=favored</code>, Oracle Clusterware may relocate running resources if the resources run on a non-favored server when a favored one joins the cluster.</p>
<p class="subhead2"><a id="CWADD91509"></a>Usage Example</p>
<pre dir="ltr">
ACTIVE_PLACEMENT=1
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91392" class="refsect3"><a id="CHDHBCIH"></a>
<h4 class="refsect3">AGENT_FILENAME</h4>
<p><a id="sthref585"></a><a id="sthref586"></a>A fully qualified file name of an agent program that a resource type uses to manage its resources. Every resource type must have an agent program to manage its resources. Resource types use agent programs by either specifying a value for this attribute or inheriting it from their base resource type. There are two script agents included with Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2): <code dir="ltr">application</code> and <code dir="ltr">scriptagent</code>. Oracle Clusterware uses the <code dir="ltr">application</code> script agent for resources of the deprecated <code dir="ltr">application</code> resource type. The default value for this attribute is <code dir="ltr">scriptagent</code>.</p>
<p class="subhead2"><a id="CWADD91510"></a>Usage Example</p>
<pre dir="ltr">
AGENT_FILENAME=%Grid_home%/bin/application
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91444" class="refsect3"><a id="CHDFFEHJ"></a>
<h4 class="refsect3">AUTO_START</h4>
<p><a id="sthref587"></a><a id="sthref588"></a>Indicates whether Oracle Clusterware automatically starts a resource after a cluster server restart. Valid <code dir="ltr">AUTO_START</code> values are:</p>
<ul>
<li>
<p><code dir="ltr">always</code>: Restarts the resource when the server restarts regardless of the state of the resource when the server stopped.</p>
</li>
<li>
<p><code dir="ltr">restore</code>: Restores the resource to the same state that it was in when the server stopped. Oracle Clusterware attempts to restart the resource if the value of <code dir="ltr">TARGET</code> was <code dir="ltr">ONLINE</code> before the server stopped.</p>
</li>
<li>
<p><code dir="ltr">never</code>: Oracle Clusterware never restarts the resource regardless of the state of the resource when the server stopped.</p>
</li>
</ul>
</div>
<!-- class="refsect3" -->
<div id="CWADD91445" class="refsect3"><a id="CHDDAFEJ"></a>
<h4 class="refsect3">CARDINALITY</h4>
<p><a id="sthref589"></a><a id="sthref590"></a>The number of servers on which a resource can run, simultaneously. This is the upper limit for resource cardinality.</p>
<p class="subhead2"><a id="CWADD91446"></a>Usage Example</p>
<pre dir="ltr">
CARDINALITY=1
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91447" class="refsect3"><a id="CHDECBJC"></a>
<h4 class="refsect3">CHECK_INTERVAL</h4>
<p><a id="sthref591"></a><a id="sthref592"></a>The time interval, in seconds, between repeated executions of the <code dir="ltr">check</code> action. Shorter intervals enable more frequent checks but also increase resource consumption if you use the script agent. Use an application-specific agent to reduce resource consumption.</p>
<p class="subhead2"><a id="CWADD91448"></a>Usage Example</p>
<pre dir="ltr">
CHECK_INTERVAL=60
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91449" class="refsect3"><a id="CHDJBFFI"></a>
<h4 class="refsect3">DEGREE</h4>
<p><a id="sthref593"></a><a id="sthref594"></a>The number of instances of a cluster resource that can run on a single server.</p>
<p class="subhead2"><a id="CWADD91450"></a>Usage Example</p>
<pre dir="ltr">
DEGREE=1
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91451" class="refsect3"><a id="CHDDJAHC"></a>
<h4 class="refsect3">DESCRIPTION</h4>
<p><a id="sthref595"></a><a id="sthref596"></a>Enter a description of the resource you are adding.</p>
<p class="subhead2"><a id="CWADD91452"></a>Usage Example</p>
<pre dir="ltr">
DESCRIPTION=Apache Web server
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91453" class="refsect3"><a id="CHDGBGIE"></a>
<h4 class="refsect3">ENABLED</h4>
<p><a id="sthref597"></a><a id="sthref598"></a>Oracle Clusterware uses this attribute to manage the state of the resource. Oracle Clusterware does not attempt to manage a disabled (<code dir="ltr">ENABLED=0</code>) resource either directly or because of a dependency to another resource. A disabled resource cannot be started but it can be stopped.</p>
<p>Oracle Clusterware does not actively monitor disabled resources, meaning that Oracle Clusterware does not check their state. However, when Oracle Clusterware starts, it does query the state of disabled resources.</p>
<p class="subhead2"><a id="CWADD91454"></a>Usage Example</p>
<pre dir="ltr">
ENABLED=1
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91455" class="refsect3"><a id="CHDGIJEA"></a>
<h4 class="refsect3">FAILURE_INTERVAL</h4>
<p><a id="sthref599"></a><a id="sthref600"></a>The interval, in seconds, before which Oracle Clusterware stops a resource if the resource has exceeded the number of failures specified by the <code dir="ltr">FAILURE_THRESHOLD</code> attribute. If the value is zero (<code dir="ltr">0</code>), then tracking of failures is disabled.</p>
<p class="subhead2"><a id="CWADD91456"></a>Usage Example</p>
<pre dir="ltr">
FAILURE_INTERVAL=30
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91457" class="refsect3"><a id="CHDEEBDC"></a>
<h4 class="refsect3">FAILURE_THRESHOLD</h4>
<p><a id="sthref601"></a><a id="sthref602"></a>The number of failures of a resource detected within a specified <code dir="ltr">FAILURE_INTERVAL</code> for the resource before Oracle Clusterware marks the resource as unavailable and no longer monitors it. If a resource fails the specified number of times, then Oracle Clusterware stops the resource. If the value is zero (<code dir="ltr">0</code>), then tracking of failures is disabled. The maximum value is <code dir="ltr">20</code>.</p>
<p class="subhead2"><a id="CWADD91458"></a>Usage Example</p>
<pre dir="ltr">
FAILURE_THRESHOLD=3
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91459" class="refsect3"><a id="CHDBFAGG"></a>
<h4 class="refsect3">HOSTING_MEMBERS</h4>
<p><a id="sthref603"></a><a id="sthref604"></a>A space-separated, ordered list of cluster server names that can host a resource. This attribute is required only when using administrator management, and when the value of the <code dir="ltr">PLACEMENT</code> attribute is set to <code dir="ltr">favored</code> or <code dir="ltr">restricted</code>. When registering applications as Oracle Clusterware resources, use the <code dir="ltr">SERVER_POOLS</code> attribute, instead.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For resources of <code dir="ltr">application</code> type, Oracle Clusterware places servers listed in the <code dir="ltr">HOSTING_MEMBERS</code> attribute in the Generic server pool.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="admin.htm#CHDHDADE">"Understanding Server Pools"</a> for more information about the Generic server pool</p>
</li>
<li>
<p><a href="#CHDIEHCH">"LOAD"</a> for more information about this attribute</p>
</li>
<li>
<p><a href="#CHDBDHFI">"PLACEMENT"</a> for more information about this attribute</p>
</li>
</ul>
</div>
<p>To obtain a list of candidate node names, run the <code dir="ltr">olsnodes</code> command to display a list of your server names.</p>
<p class="subhead2"><a id="CWADD91511"></a>Usage Example</p>
<pre dir="ltr">
HOSTING_MEMBERS=server1 server2 server3
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91460" class="refsect3"><a id="CHDIEHCH"></a>
<h4 class="refsect3">LOAD</h4>
<p><a id="sthref605"></a><a id="sthref606"></a>Oracle Clusterware interprets the value of this attribute along with that of the <code dir="ltr">PLACEMENT</code> attribute. When the value of <code dir="ltr">PLACEMENT</code> is <code dir="ltr">balanced</code>, the value of <code dir="ltr">LOAD</code> determines where best to place a resource. A nonnegative, numeric value that quantitatively represents how much server capacity an instance of a resource consumes relative to other resources. Oracle Clusterware attempts to place resources on servers with the least total load of running resources.</p>
<p class="subhead2"><a id="CWADD91461"></a>Usage Example</p>
<pre dir="ltr">
LOAD=1
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91462" class="refsect3"><a id="CHDJGCEA"></a>
<h4 class="refsect3">NAME</h4>
<p><a id="sthref607"></a><a id="sthref608"></a>A case-sensitive alphanumeric string that names the resource. Oracle recommends a naming convention that starts with an alphanumeric prefix, such as <code dir="ltr">myApache</code>, and complete the name with an identifier to describe it. A resource name can contain any platform-supported characters except the exclamation point (!) and the tilde (~). A resource name cannot begin with a period (.) nor with the string <span class="italic">ora</span>.</p>
<p class="subhead2"><a id="CWADD91463"></a>Usage Example</p>
<pre dir="ltr">
NAME=myApache
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91464" class="refsect3"><a id="CHDFGAAB"></a>
<h4 class="refsect3">OFFLINE_CHECK_INTERVAL</h4>
<p><a id="sthref609"></a><a id="sthref610"></a>Controls offline monitoring of a resource. The value represents the interval (in seconds) that Oracle Clusterware monitors a resource when its state is <code dir="ltr">OFFLINE</code>. Monitoring is disabled if the value is <code dir="ltr">0</code>.</p>
<p class="subhead2"><a id="CWADD91465"></a>Usage Example</p>
<pre dir="ltr">
OFFLINE_CHECK_INTERVAL=30
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91466" class="refsect3"><a id="CHDBDHFI"></a>
<h4 class="refsect3">PLACEMENT</h4>
<p><a id="sthref611"></a><a id="sthref612"></a>Specifies how Oracle Clusterware selects a cluster server on which to start a resource. Valid values are <code dir="ltr">balanced</code>, <code dir="ltr">favored</code>, or <code dir="ltr">restricted</code>.</p>
<p>If you set the <code dir="ltr">PLACEMENT</code> attribute to <code dir="ltr">favored</code> or <code dir="ltr">restricted</code>, then you must also assign values to the <code dir="ltr">SERVER_POOLS</code> and <code dir="ltr">HOSTING_MEMBERS</code> attributes. If you set the value of the <code dir="ltr">PLACEMENT</code> attribute to <code dir="ltr">balanced</code>, then the <code dir="ltr">HOSTING_MEMBERS</code> attribute is not required.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="crschp.htm#BGBHCCAE">"Application Placement Policies"</a> for more information about the <code dir="ltr">PLACEMENT</code> attribute</p>
</li>
<li>
<p><a href="#CHDBFAGG">"HOSTING_MEMBERS"</a> for more information about this attribute</p>
</li>
<li>
<p><a href="#CHDDDBJF">"SERVER_POOLS"</a> for more information about this attribute</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="CWADD91467"></a>Usage Example</p>
<pre dir="ltr">
PLACEMENT=favored
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91470" class="refsect3"><a id="CHDBEAGD"></a>
<h4 class="refsect3">RESTART_ATTEMPTS</h4>
<p><a id="sthref613"></a><a id="sthref614"></a>The number of times that Oracle Clusterware attempts to restart a resource on the resource's current server before attempting to relocate it. A value of <code dir="ltr">1</code> indicates that Oracle Clusterware only attempts to restart the resource once on a server. A second failure causes Oracle Clusterware to attempt to relocate the resource. A value of <code dir="ltr">0</code> indicates that there is no attempt to restart but Oracle Clusterware always tries to fail the resource over to another server.</p>
<p class="subhead2"><a id="CWADD91471"></a>Usage Example</p>
<pre dir="ltr">
RESTART_ATTEMPTS=2
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91472" class="refsect3"><a id="CHDFFDBE"></a>
<h4 class="refsect3">SCRIPT_TIMEOUT</h4>
<p><a id="sthref615"></a><a id="sthref616"></a>The maximum time (in seconds) for an action to run. Oracle Clusterware returns an error message if the action script does not complete within the time specified. The timeout applies to all actions (<code dir="ltr">start</code>, <code dir="ltr">stop</code>, <code dir="ltr">check</code>, and <code dir="ltr">clean</code>).</p>
<p class="subhead2"><a id="CWADD91473"></a>Usage Example</p>
<pre dir="ltr">
SCRIPT_TIMEOUT=45
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91474" class="refsect3"><a id="CHDDDBJF"></a>
<h4 class="refsect3">SERVER_POOLS</h4>
<p>A space-separated list of the server pools to which a particular resource can belong. If a resource can run on any server in a cluster, then use the default value, <code dir="ltr">*</code>, unless the resource is a <code dir="ltr">cluster_resource</code> type, in which case, the default value for the <code dir="ltr">SERVER_POOLS</code> attribute is empty. Only cluster administrators can specify <code dir="ltr">*</code> as the value for this attribute.</p>
<ul>
<li>
<p>Use the <code dir="ltr">PLACEMENT</code> attribute with the <code dir="ltr">SERVER_POOLS</code> attribute, as follows: If you set the value of the <code dir="ltr">PLACEMENT</code> attribute to either <code dir="ltr">restricted</code> or <code dir="ltr">favored</code>, then you must also provide a value for the <code dir="ltr">SERVER_POOLS</code> attribute when using policy management for the resource.</p>
</li>
<li>
<p>If the value for <code dir="ltr">PLACEMENT</code> is set to <code dir="ltr">balanced</code>, then the resource only runs in the Generic and Free pools, unless <code dir="ltr">SERVER_POOLS=*</code>.</p>
</li>
</ul>
<p><a id="sthref617"></a><a id="sthref618"></a>This attribute creates an affinity between a resource and one or more server pools regarding placement, and is dependent on the value of the <code dir="ltr">PLACEMENT</code> attribute.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="admin.htm#CHDHDADE">"Understanding Server Pools"</a> for more information about server pools and <a href="admin.htm#CHDEHIHA">"Role-Separated Management"</a> for more information about cluster administrators</p>
</li>
<li>
<p><a href="#CHDBFAGG">"HOSTING_MEMBERS"</a> for more information about this attribute</p>
</li>
<li>
<p><a href="#CHDBDHFI">"PLACEMENT"</a> for more information about this attribute</p>
</li>
</ul>
</div>
<p class="subhead2"><a id="CWADD91512"></a>Usage Example</p>
<pre dir="ltr">
SERVER_POOLS=pool1 pool2 pool3
</pre></div>
<!-- class="refsect3" -->
<div id="CWADD91475" class="refsect3"><a id="CHDJHECG"></a>
<h4 class="refsect3">START_DEPENDENCIES</h4>
<p><a id="sthref619"></a><a id="sthref620"></a>Specifies a set of relationships that Oracle Clusterware considers when starting a resource. You can specify a space-separated list of dependencies on several resources and resource types on which a particular resource can depend.</p>
<p class="subhead2"><a id="CWADD91476"></a>Syntax</p>
<pre dir="ltr">
START_DEPENDENCIES=<span class="italic">dependency</span>(<span class="italic">resource_set</span>) [<span class="italic">dependency</span>(<span class="italic">resource_set</span>)] [...]
</pre>
<p>In the preceding syntax example the variables are defined, as follows:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">dependency</span></code>: Possible values are <code dir="ltr">hard</code>, <code dir="ltr">weak</code>, <code dir="ltr">attraction</code>, <code dir="ltr">pullup</code>, and <code dir="ltr">dispersion</code>. You can specify each dependency only once, except for <code dir="ltr">pullup</code>, which you can specify multiple times.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">resource_set</span></code>: A comma-delimited list of resource entities&mdash;either individual resources or resource types&mdash;enclosed in parentheses <code dir="ltr">()</code>, in the form of <code dir="ltr">res1[, res2[, ...]]</code>, upon which the resource you are configuring depends.</p>
<p>Each resource entity is defined, as follows:</p>
<pre dir="ltr">
[<span class="italic">modifier</span>1:[<span class="italic">modifier</span>2:]] {<span class="italic">resource_name</span> | type:<span class="italic">resource_type</span>}
</pre>
<p>In the preceding syntax example, <code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> is the name of a specific resource and <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code> is the name of a specific resource type. The resource type must be preceded by <code dir="ltr">type</code> and the <code dir="ltr">type</code> modifier must be the last resource entity in the list.</p>
<p>Optionally, you can specify modifiers to further configure resource entity dependencies. You can modify each dependency by prefixing the following modifiers to the resource entity:</p>
<ul>
<li>
<p><a id="sthref621"></a><a id="sthref622"></a><code dir="ltr">hard([intermediate:][global:]{</code><code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> <code dir="ltr">|</code> <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code><code dir="ltr">})</code>&mdash;Specify a <code dir="ltr">hard</code> start dependency for a resource when you want the resource to start only when a particular resource or resource of a particular type starts.</p>
<p>Use <code dir="ltr">intermediate</code> to specify that Oracle Clusterware can start this resource if a resource on which it depends is in either the <code dir="ltr">ONLINE</code> or <code dir="ltr">INTERMEDIATE</code> state. If not specified, then resources <span class="italic">must</span> be in the <code dir="ltr">ONLINE</code> state for Oracle Clusterware to start this resource.</p>
<p>Use <code dir="ltr">global</code> to specify that resources are <span class="italic">not</span> required to reside on the same server as a condition to Oracle Clusterware starting this resource. If not specified, then resources must reside on the same server for Oracle Clusterware to start this resource.</p>
<p>If you specify the <code dir="ltr">hard</code> dependency on a resource type for a resource, then the resource can start if any resource of that particular type is running.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that resources with <code dir="ltr">hard</code> start dependencies also have <code dir="ltr">pullup</code> start dependencies.</div>
</li>
<li>
<p><a id="sthref623"></a><a id="sthref624"></a><code dir="ltr">weak([concurrent:][global:][uniform:]{</code><code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> <code dir="ltr">|</code> <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code><code dir="ltr">})</code>&mdash;Specify a <code dir="ltr">weak</code> start dependency for a resource when you want that resource to start despite whether named resources are running, or not. An attempt to start this resource also attempts to start any resources on which this resource depends if they are not running.</p>
<p>Use <code dir="ltr">concurrent</code> to specify that Oracle Clusterware can start a dependent resource while a resource on which it depends is in the process of starting. If <code dir="ltr">concurrent</code> is not specified, then resources must complete startup before Oracle Clusterware can start the dependent resource.</p>
<p>Use <code dir="ltr">global</code> to specify that resources are <span class="italic">not</span> required to reside on the same server as a condition to Oracle Clusterware starting the dependent resource.</p>
<p>Use <code dir="ltr">uniform</code> to start all instances of the resource everywhere the resource can run. If you do not specify a modifier (the default), then the resource starts on the same server as the resource on which it depends.</p>
<p>If you specify the <code dir="ltr">weak</code> start dependency on a resource type for a resource, then the resource can start if any resource of that particular type is running.</p>
</li>
<li>
<p><a id="sthref625"></a><a id="sthref626"></a><code dir="ltr">attraction([intermediate:]{</code><code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> <code dir="ltr">|</code> <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code><code dir="ltr">})</code>&mdash;Use the <code dir="ltr">attraction</code> start dependency when you want this resource to run on the same server with a particular named resource or any resource of a particular type.</p>
<p>Use <code dir="ltr">intermediate</code> to specify that this resource is attracted to resource entities on which it depends that are in the <code dir="ltr">INTERMEDIATE</code> state. If not specified, then resources must be in the <code dir="ltr">ONLINE</code> state to attract the dependent resource.</p>
<p>If you specify the <code dir="ltr">attraction</code> dependency on a resource type for a resource, then any resource of that particular type attracts the dependent resource.</p>
</li>
<li>
<p><a id="sthref627"></a><a id="sthref628"></a><code dir="ltr">pullup[:always]([intermediate:][global:]{</code><code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> <code dir="ltr">|</code> <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code><code dir="ltr">})</code>&mdash;When you specify the <code dir="ltr">pullup</code> start dependency for a resource, then this resource starts as a result of named resources starting.</p>
<p>Use the <code dir="ltr">always</code> modifier for <code dir="ltr">pullup</code> so that Oracle Clusterware starts this resource despite the value of its <code dir="ltr">TARGET</code> attribute, whether that value is <code dir="ltr">ONLINE</code> or <code dir="ltr">OFFLINE</code>. Otherwise, if you do not specify the <code dir="ltr">always</code> modifier, then Oracle Clusterware starts this resource only if the value of the <code dir="ltr">TARGET</code> attribute is <code dir="ltr">ONLINE</code> for this resource.</p>
<p>Use <code dir="ltr">intermediate</code> to specify that Oracle Clusterware can start this resource if a resource on which it depends is in either the <code dir="ltr">ONLINE</code> or <code dir="ltr">INTERMEDIATE</code> state. If not specified, then resources must be in the <code dir="ltr">ONLINE</code> state for Oracle Clusterware to start this resource.</p>
<p>Use <code dir="ltr">global</code> to specify that resources on which this resource depends are <span class="italic">not</span> required to reside on the same server as a condition to Oracle Clusterware starting this resource. If not specified, then resources on which this resource depends must reside on the same server for Oracle Clusterware to start this resource.</p>
<p>If you specify the <code dir="ltr">pullup</code> dependency on a resource type for a resource, then, when any resource of that particular type starts, Oracle Clusterware can start this resource.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that resources with <code dir="ltr">hard</code> start dependencies also have <code dir="ltr">pullup</code> start dependencies.</div>
</li>
<li>
<p><a id="sthref629"></a><a id="sthref630"></a><code dir="ltr">dispersion[:active]([intermediate:]{</code><code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> <code dir="ltr">|</code> <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code><code dir="ltr">})</code>&mdash;Specify the <code dir="ltr">dispersion</code> start dependency for a resource that you want to run on a server that is different from the named resources or resources of a particular type. Resources may still end up running on the same server, depending on availability of servers.</p>
<p>Use the <code dir="ltr">active</code> modifier to configure the <code dir="ltr">dispersion</code> dependency so that Oracle Clusterware attempts to relocate the dependent resource to another server if it is co-located with another resource and another server comes online. Oracle Clusterware does not relocate resources to newly available servers unless you specify the <code dir="ltr">active</code> modifier.</p>
<p>Use <code dir="ltr">intermediate</code> to specify that Oracle Clusterware can relocate the dependent resource if a resource is in either the <code dir="ltr">ONLINE</code> or <code dir="ltr">INTERMEDIATE</code> state. If not specified, then resources must be in the <code dir="ltr">ONLINE</code> state for dispersion of the dependent resource to occur.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="crschp.htm#BGBECIFD">"Start Dependencies"</a> for more details about start dependencies</div>
</div>
<!-- class="refsect3" -->
<div id="CWADD91477" class="refsect3"><a id="CHDJCAHF"></a>
<h4 class="refsect3">START_TIMEOUT</h4>
<p><a id="sthref631"></a><a id="sthref632"></a>The maximum time (in seconds) in which a start action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify a value for this attribute or you specify <code dir="ltr">0</code> seconds, then Oracle Clusterware uses the value of the <code dir="ltr">SCRIPT_TIMEOUT</code> attribute.</p>
<p class="subhead2"><a id="CWADD91478"></a>Usage Example</p>
<pre dir="ltr">
START_TIMEOUT=30
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFFDBE">"SCRIPT_TIMEOUT"</a> for more information about this attribute</div>
</div>
<!-- class="refsect3" -->
<div id="CWADD91481" class="refsect3"><a id="CHDBFBFH"></a>
<h4 class="refsect3">STOP_DEPENDENCIES</h4>
<p><a id="sthref633"></a><a id="sthref634"></a>Specifies a set of relationships that Oracle Clusterware considers when stopping a resource.</p>
<p class="subhead2"><a id="CWADD91482"></a>Syntax</p>
<pre dir="ltr">
STOP_DEPENDENCIES=<span class="italic">dependency</span>(<span class="italic">resource_set</span>) [<span class="italic">dependency</span>(<span class="italic">resource_set</span>)] ...
</pre>
<p>In the preceding syntax example the variables are defined, as follows:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">dependency</span></code>: The only possible value is <code dir="ltr">hard</code>.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">resource_set</span></code>: A comma-delimited list, in the form of <code dir="ltr">res1[, res2 [,...]]</code>, of resource entities&mdash;either individual resources or resource types&mdash;upon which the resource you are configuring depends.</p>
<p>Each resource entity is defined, as follows:</p>
<pre dir="ltr">
[<span class="italic">modifier</span>1:[<span class="italic">modifier</span>2:][<span class="italic">modifier</span>3:]] <span class="italic">resource_name</span> | type:<span class="italic">resource_type</span>
</pre>
<p>In the preceding syntax example, <code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> is the name of a specific resource and <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code> is the name of a specific resource type. The resource type must be preceded by <code dir="ltr">type:</code>.</p>
<p>Optionally, you can specify modifiers to further configure resource entity dependencies. You can modify each dependency by prefixing the following modifiers to the resource entity:</p>
<p><a id="sthref635"></a><a id="sthref636"></a><code dir="ltr">hard([intermediate:][global:][shutdown:]{</code><code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> <code dir="ltr">|</code> <code dir="ltr">type:</code><code dir="ltr"><span class="codeinlineitalic">resource_type</span></code><code dir="ltr">})</code>&mdash;Specify a <code dir="ltr">hard</code> stop dependency for a resource that you want to stop when named resources or resources of a particular resource type stop.</p>
<p>Use <code dir="ltr">intermediate</code> to specify that the dependent resource can remain in an <code dir="ltr">ONLINE</code> state if a resource is in either the <code dir="ltr">ONLINE</code> or <code dir="ltr">INTERMEDIATE</code> state. If not specified, then Oracle Clusterware stops the dependent resource unless resources are in the <code dir="ltr">ONLINE</code> state.</p>
<p>Use <code dir="ltr">global</code> to specify that the dependent resource remains in an <code dir="ltr">ONLINE</code> state if a resource is in an <code dir="ltr">ONLINE</code> state on any node in the cluster. If not specified, then when resources residing on the same server go offline, Oracle Clusterware stops the dependent resource.</p>
<p>Use <code dir="ltr">shutdown</code> to apply this dependency when the Oracle Clusterware stack is shut down. This is a convenient way to affect the order of stopping resources when stopping the stack, without having any affect on planned or unplanned events on the individual resources. This dependency, when used with the <code dir="ltr">shutdown</code> modifier, does not go into effect if somebody stops the resource directly, but only when the stack is shut down.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="crschp.htm#BGBJFGIF">"Stop Dependencies"</a> for more details about stop dependencies</div>
</div>
<!-- class="refsect3" -->
<div id="CWADD91483" class="refsect3"><a id="CHDHDHDE"></a>
<h4 class="refsect3">STOP_TIMEOUT</h4>
<p><a id="sthref637"></a><a id="sthref638"></a>The maximum time (in seconds) in which a <code dir="ltr">stop</code> or <code dir="ltr">clean</code> action can run. Oracle Clusterware returns an error message if the action does not complete within the time specified. If you do not specify this attribute or if you specify <code dir="ltr">0</code> seconds, then Oracle Clusterware uses the value of the <code dir="ltr">SCRIPT_TIMEOUT</code> attribute.</p>
<p class="subhead2"><a id="CWADD91484"></a>Usage Example</p>
<pre dir="ltr">
STOP_TIMEOUT=30
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDFFDBE">"SCRIPT_TIMEOUT"</a> for more information about this attribute</p>
</li>
<li>
<p><a href="#CHDJCAHF">"START_TIMEOUT"</a> for more information about this attribute</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="CWADD91485" class="refsect3"><a id="CHDEEEJC"></a>
<h4 class="refsect3">TYPE</h4>
<p><a id="sthref639"></a><a id="sthref640"></a>The type of resource indicated when you create a resource. This attribute is required when creating a resource.</p>
<p class="subhead2"><a id="CWADD91486"></a>Usage Example</p>
<pre dir="ltr">
 
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="crschp.htm#BGBEHFDB">"Resource Types"</a> for details of resource types</div>
</div>
<!-- class="refsect3" -->
<div id="CWADD91487" class="refsect3"><a id="CHDIHGEH"></a>
<h4 class="refsect3">UPTIME_THRESHOLD</h4>
<p><a id="sthref641"></a><a id="sthref642"></a>The value for <code dir="ltr">UPTIME_THRESHOLD</code> represents the length of time that a resource must be up before Oracle Clusterware considers the resource to be stable. By setting a value for the <code dir="ltr">UPTIME_THRESHOLD</code> attribute, you can indicate the stability of a resource.</p>
<p>Enter values for this attribute as a number followed by a letter that represents seconds (s), minutes (m), hours (h), days (d), or weeks (w). For example, a value of <code dir="ltr">7h</code> represents an uptime threshold of seven hours.</p>
<p>After the time period you specify for <code dir="ltr">UPTIME_THRESHOLD</code> elapses, Oracle Clusterware resets the value for <code dir="ltr">RESTART_COUNT</code> to <code dir="ltr">0</code> at the next resource state change event, such as stop, start, relocate, or failure. Oracle Clusterware can alert you when the value for <code dir="ltr">RESTART_COUNT</code> reaches the value that you set for <code dir="ltr">RESTART_ATTEMPTS</code>. The counter is effectively reset the next time the resource fails or restarts. The threshold represents the amount of time that restarts are to be counted and discarded. If the resource fails after the threshold, it will still restart.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Clusterware writes an alert to the clusterware alert log file when the value for <code dir="ltr">RESTART_COUNT</code> reaches the value that you set for <code dir="ltr">RESTART_ATTEMPTS</code>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBEAGD">"RESTART_ATTEMPTS"</a> for more information about this attribute</p>
</li>
<li>
<p><a href="#CHDBCBAG">"RESTART_COUNT"</a> for more information about this attribute</p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="CWADD91488" class="refsect2"><a id="CHDIFBEH"></a>
<h3 class="refsect2">Read-Only Resource Attributes</h3>
<p>You can view these attributes when you run the <code dir="ltr">crsctl status resource</code> command on a particular resource. Oracle Clusterware sets these attributes when you register resources.</p>
<ul>
<li>
<p><a href="#CHDCEGIF">ACTION_FAILURE_EVENT_TEMPLATE</a></p>
</li>
<li>
<p><a href="#BABJFAAC">INTERNAL_STATE</a></p>
</li>
<li>
<p><a href="#CHDDBGFJ">LAST_SERVER</a></p>
</li>
<li>
<p><a href="#BABJCADC">LAST_STATE_CHANGE</a></p>
</li>
<li>
<p><a href="#CHDBHHIH">PROFILE_CHANGE_EVENT_TEMPLATE</a></p>
</li>
<li>
<p><a href="#CHDBCBAG">RESTART_COUNT</a></p>
</li>
<li>
<p><a href="#BABFCHIA">STATE</a></p>
</li>
<li>
<p><a href="#CHDHCDGJ">STATE_CHANGE_EVENT_TEMPLATE</a></p>
</li>
<li>
<p><a href="#CHDDCGED">STATE_DETAILS</a></p>
</li>
<li>
<p><a href="#CHDIJDHF">TARGET</a></p>
</li>
</ul>
<div id="CWADD91388" class="refsect3"><a id="CHDCEGIF"></a>
<h4 class="refsect3">ACTION_FAILURE_EVENT_TEMPLATE</h4>
<p><a id="sthref643"></a><a id="sthref644"></a>This is an internally-managed attribute for an <code dir="ltr">ora.*</code> resource. You cannot edit this attribute.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD92145" class="refsect3"><a id="BABJFAAC"></a>
<h4 class="refsect3">INTERNAL_STATE</h4>
<p><a id="sthref645"></a><a id="sthref646"></a>An internally managed, read-only attribute that describes what, if any, action the policy engine is currently executing on the resource. Possible values and their meanings are as follows:</p>
<ul>
<li>
<p><code dir="ltr">STARTING</code>: The policy engine is currently starting the resource</p>
</li>
<li>
<p><code dir="ltr">STOPPING</code>: The policy engine is currently stopping the resource</p>
</li>
<li>
<p><code dir="ltr">CLEANING</code>: The policy engine is currently cleaning the resource</p>
</li>
<li>
<p><code dir="ltr">STABLE</code>: The policy engine is not currently executing any action on the resource</p>
<p>Note, however, that the resource can still be locked as part of some other command.</p>
</li>
</ul>
</div>
<!-- class="refsect3" -->
<div id="CWADD91489" class="refsect3"><a id="CHDDBGFJ"></a>
<h4 class="refsect3">LAST_SERVER</h4>
<p><a id="sthref647"></a><a id="sthref648"></a>For <code dir="ltr">cluster_resource</code>-type resources, this is an internally managed, read-only attribute that contains the name of the server on which the last <code dir="ltr">start</code> action for the resource succeeded.</p>
<p>For <code dir="ltr">local_resource</code>-type resources, this is the name of the server to which the resource instance is pinned.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD92146" class="refsect3"><a id="BABJCADC"></a>
<h4 class="refsect3">LAST_STATE_CHANGE</h4>
<p><a id="sthref649"></a><a id="sthref650"></a>An internally managed, read-only attribute that describes when the policy engine registers the current state of the resource. Note that this may either be the timestamp of when state of the resource changed or when the policy engine discovered the state, as occurs when <code dir="ltr">crsd</code> restarts.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD91468" class="refsect3"><a id="CHDBHHIH"></a>
<h4 class="refsect3">PROFILE_CHANGE_EVENT_TEMPLATE</h4>
<p><a id="sthref651"></a><a id="sthref652"></a>This is an internally-managed attribute for an <code dir="ltr">ora.*</code> resource. You cannot edit this attribute.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD91490" class="refsect3"><a id="CHDBCBAG"></a>
<h4 class="refsect3">RESTART_COUNT</h4>
<p><a id="sthref653"></a><a id="sthref654"></a>An internally-managed attribute used by the Oracle Clusterware daemon to count the number of attempts to restart a resource, starting from zero up to the value specified in the <code dir="ltr">RESTART_ATTEMPTS</code> attribute. You cannot edit this attribute.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD92147" class="refsect3"><a id="BABFCHIA"></a>
<h4 class="refsect3">STATE</h4>
<p>An internally-managed attribute that reflects the current state of the resource as reported by Oracle Clusterware. The state of a resource can be one of the following:</p>
<ul>
<li>
<p><code dir="ltr">ONLINE</code>: The resource is online and resource monitoring is enabled (see <code dir="ltr"><a href="#CHDECBJC">CHECK_INTERVAL</a></code>).</p>
</li>
<li>
<p><code dir="ltr">OFFLINE</code>: The resource is offline and only offline resource monitoring is enabled, if configured (see <code dir="ltr"><a href="#CHDFGAAB">OFFLINE_CHECK_INTERVAL</a></code>).</p>
</li>
<li>
<p><code dir="ltr">INTERMEDIATE</code>: The resource is either partially online or was known to be online before and subsequent attempts to determine its state have failed; resource monitoring is enabled (see <code dir="ltr"><a href="#CHDECBJC">CHECK_INTERVAL</a></code>).</p>
</li>
<li>
<p><code dir="ltr">UNKNOWN</code>: The resource is unmanageable and its current state is unknown; manual intervention is required to resume its operation. A resource in this state is not monitored.</p>
</li>
</ul>
</div>
<!-- class="refsect3" -->
<div id="CWADD91479" class="refsect3"><a id="CHDHCDGJ"></a>
<h4 class="refsect3">STATE_CHANGE_EVENT_TEMPLATE</h4>
<p><a id="sthref655"></a><a id="sthref656"></a>This is an internally-managed attribute for an <code dir="ltr">ora.*</code> resource. You cannot edit this attribute.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD91491" class="refsect3"><a id="CHDDCGED"></a>
<h4 class="refsect3">STATE_DETAILS</h4>
<p><a id="sthref657"></a><a id="sthref658"></a>An internally managed, read-only attribute that contains details about the state of a resource.</p>
<p>The four resource states&mdash;<code dir="ltr">ONLINE</code>, <code dir="ltr">OFFLINE</code>, <code dir="ltr">UNKNOWN</code>, and <code dir="ltr">INTERMEDIATE</code>&mdash;may map to different resource-specific values, such as mounted, unmounted, and open. Resource agent developers can use the <code dir="ltr">STATE_DETAILS</code> attribute to provide a more detailed description of this mapping, resource to the resource state.</p>
<p>Providing details is optional. If details are not provided, then Oracle Clusterware uses only the four possible resource states. Additionally, if the agent cannot provide these details (as may also happen to the value of the resource state), then Oracle Clusterware sets the value of this attribute to provide minimal details about why the resource is in its current state.</p>
</div>
<!-- class="refsect3" -->
<div id="CWADD91492" class="refsect3"><a id="CHDIJDHF"></a>
<h4 class="refsect3">TARGET</h4>
<p><a id="sthref659"></a><a id="sthref660"></a>An internal, read-only attribute that describes the desired state of a resource. Using the <code dir="ltr">crsctl start</code> <code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> or <code dir="ltr">crsctl stop</code> <code dir="ltr"><span class="codeinlineitalic">resource_name</span></code> commands, however, can affect the value of this attribute.</p>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" -->
<a id="CHDJHDCA"></a>
<div id="CWADD91495" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Examples of Action Scripts for Third-Party Applications</h2>
<p>This section includes examples of third-party applications using script agents.</p>
<p><a href="#CHDJABHC">Example B-1</a> shows an action script that fails over the Apache Web server.</p>
<div id="CWADD92006" class="example">
<p class="titleinexample"><a id="CHDJABHC"></a>Example B-1 Apache Action Script</p>
<pre dir="ltr">
#!/bin/sh

HTTPDCONFLOCATION=/etc/httpd/conf/httpd.conf
WEBPAGECHECK=http://&lt;MyVIP&gt;:80/icons/apache_pb.gif

case $1 in
'start')
    /usr/sbin/apachectl -k start -f $HTTPDCONFLOCATION
   RET=$?
    ;;
sleep(10)
    ;;
'stop')
    /usr/sbin/apachectl -k stop
   RET=$?
    ;;
'clean')
    /usr/sbin/apachectl -k stop
   RET=$?
    ;;
'check')
    /usr/bin/wget -q --delete-after $WEBPAGECHECK
   RET=$?
    ;;
*)
   RET=0
    ;;
esac
# 0: success; 1 : error
if [ $RET -eq 0 ]; then
exit 0
else
exit 1
fi
</pre></div>
<!-- class="example" -->
<p><a href="#CHDCDGHF">Example B-2</a> shows the <span class="bold">xclock</span> script, which is a simple action script using <code dir="ltr">xclock</code> available as a default binary on all Linux and UNIX platforms.</p>
<div id="CWADD91496" class="example">
<p class="titleinexample"><a id="CHDCDGHF"></a>Example B-2 xclock Action Script</p>
<pre dir="ltr">
#!/bin/bash
# start/stop/check script for xclock example
# To test this change BIN_DIR to the directory where xclock is based
# and set the DISPLAY variable to a server within your network.

BIN_DIR=/usr/X11R6/bin
LOG_DIR=/tmp
BIN_NAME=xclock
DISPLAY=yourhost.domain.com:0.0
export DISPLAY
exit_code=0

if [ ! -d $BIN_DIR ]
then
        echo "start failed"
        exit 2
fi

PID1=`ps -ef | grep $BIN_NAME | grep -v grep | grep -v xclock_app | awk '{ print $2 }'`
case $1 in
'start')
        if [ "$PID1" != "" ]
        then
           status_p1="running"
        else
           if [ -x $BIN_DIR/$BIN_NAME ]
           then
             umask 002
             ${BIN_DIR}/${BIN_NAME} &amp; 2&gt;${LOG_DIR}/${BIN_NAME}.log
             status_p1="started"
           else
             echo `basename $0`": $BIN_NAME: Executable not found"
             exit_code=1
           fi
        fi

         echo "$BIN_NAME: $status_p1"
         exit $exit_code
        ;;

'stop')
        if [ "${PID1}" != "" ]
        then
           kill -9 ${PID1} &amp;&amp; echo "$BIN_NAME daemon killed"
        else
           echo "$BIN_NAME: no running Process!"
        fi
        exit $exit_code
        ;;
'check')
        if [ "$PID1" != "" ]
        then
           echo "running"
           exit 0
        else
           echo "not running"
           exit 1
        fi
        ;;*)
        echo "Usage: "`basename $0`" {start|stop|check}"
        ;;
esac
</pre></div>
<!-- class="example" -->
<p><a href="#CHDGJFJG">Example B-3</a> shows an example of a shell script for an agent to monitor a file. When the agent is started, it creates the file (which is specified through an attribute) and when it is stopped, it deletes the file. The CHECK action consists of merely checking if the file exists or not. The variables with the <code dir="ltr">_CRS_</code> prefix are attribute values that are provided to the script in its environment.</p>
<div id="CWADD91497" class="example">
<p class="titleinexample"><a id="CHDGJFJG"></a>Example B-3 Action Script Example</p>
<pre dir="ltr">
#!/bin/sh
TOUCH=/bin/touch
RM=/bin/rm
PATH_NAME=/tmp/$_CRS_NAME

#
# These messages go into the CRSD agent log file.
echo " *******   `date` ********** "
echo "Action script '$_CRS_ACTION_SCRIPT' for resource[$_CRS_NAME] called for action $1"
#

case "$1" in
  'start')
     echo "START entry point has been called.."
     echo "Creating the file: $PATH_NAME"
     $TOUCH $PATH_NAME
     exit 0
     ;;

  'stop')
     echo "STOP entry point has been called.." 
     echo "Deleting the file: $PATH_NAME"
     $RM $PATH_NAME
     exit 0
     ;;

  'check')
    echo "CHECK entry point has been called.."
    if [ -e $PATH_NAME ]; then
        echo "Check -- SUCCESS"
        exit 0
    else
        echo "Check -- FAILED"
        exit 1
    fi
    ;;

  'clean')
     echo "CLEAN entry point has been called.."
     echo "Deleting the file: $PATH_NAME"
     $RM -f $PATH_NAME
     exit 0
     ;;

esac
</pre></div>
<!-- class="example" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment407">
<tr>
<td class="cellalignment416">
<table class="cellalignment412">
<tr>
<td class="cellalignment411"><a href="cvu.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment411"><a href="olsnodes.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment419">
<table class="cellalignment410">
<tr>
<td class="cellalignment411"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment411"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment411"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment411"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment411"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment411"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
