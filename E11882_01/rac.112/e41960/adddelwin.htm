<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Adding and Deleting Oracle RAC from Nodes on Windows Systems</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="adddelunix.htm" title="Previous" type="text/html" />
<link rel="Next" href="design.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">16/24</span> <!-- End Header -->
<div id="RACAD067" class="chapter"><a id="CHDFAEJB"></a>
<h1 class="chapter"><span class="secnum">11</span> Adding and Deleting Oracle RAC from Nodes on Windows Systems</h1>
<p>This chapter describes how to extend an existing Oracle Real Application Clusters (Oracle RAC) home to other nodes and instances in the cluster, and delete Oracle RAC from nodes and instances in the cluster. This chapter provides instructions for Windows systems.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
In this chapter, the entries for <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> refer to the full path name for the Oracle Grid Infrastructure home, and the entries for <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code> refer to substitutes for environment variables for the Oracle home with Oracle RAC.</div>
<p>If your goal is to clone an existing Oracle RAC home to create multiple new Oracle RAC installations across the cluster, then use the cloning procedures that are described in <a href="clonerac.htm#CHDGFHCA">Chapter 8, "Cloning Oracle RAC to Nodes in a New Cluster"</a>.</p>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDCAHJB">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</a></p>
</li>
<li>
<p><a href="#CHDFADDA">Deleting Oracle RAC from a Cluster Node</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>Ensure that you have a current backup of Oracle Cluster Registry (OCR) before adding or deleting Oracle RAC by running the <code dir="ltr">ocrconfig -showbackup</code> command.</p>
</li>
<li>
<p>Using Oracle Enterprise Manager to add and delete nodes and instances is not supported on Windows.</p>
</li>
<li>
<p>For all of the add node and delete node procedures, temporary directories such as <code dir="ltr">%TEMP%</code> or <code dir="ltr">C:\Temp</code> <span class="italic">should not be</span> shared directories. If your temporary directories are shared, then set your temporary environment variable, such as <code dir="ltr">%TEMP%</code>, to a location on a local node. In addition, use a directory path that exists on all of the nodes.</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPRC009" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=TDPRC009"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for additional information about configuring a new Oracle RAC cluster or adding to and deleting nodes from an existing Oracle RAC cluster.</div>
<a id="CHDCAHJB"></a>
<div id="RACAD8196" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding Oracle RAC to Nodes with Oracle Clusterware Installed</h2>
<p>Before beginning this procedure, ensure that your existing nodes have the correct path to the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> and that the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code> environment variables are set correctly.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD1167" href="../../rac.112/e41959/adddelclusterware.htm#CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about adding nodes to a cluster</div>
<p>To <a id="sthref789"></a><a id="sthref790"></a>add Oracle RAC database instances to nodes that already have Oracle Clusterware installed, you must extend the Oracle RAC home that is on an existing node (<code dir="ltr">node1</code> in this procedure) of the cluster to the target nodes.</p>
<ol>
<li>
<p>Navigate to the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\oui\bin</code> directory on <code dir="ltr">node1</code> and run the <code dir="ltr">addNode.bat</code> script using the following syntax, where <code dir="ltr">node2</code> is the name of the node you are adding:</p>
<pre dir="ltr">
addNode.bat "CLUSTER_NEW_NODES={node2}"
</pre></li>
<li>
<p><a id="sthref791"></a><a id="sthref792"></a>If you store your policy-managed database on Oracle Automatic Storage Management (Oracle ASM), <a href="rac_glossary.htm#BABHFFBJ"><span class="xrefglossterm">Oracle Managed Files</span></a> is enabled, and if there is space in a server pool for <code dir="ltr">node2</code>, then <code dir="ltr">crsd</code> adds the Oracle RAC database instance to <code dir="ltr">node2</code> and no further action is necessary. If Oracle Managed Files is not enabled, then you must manually add undo and redo logs.</p>
<p>If there is no space in a server pool, then <code dir="ltr">node2</code> moves into the Free server pool. Use the <code dir="ltr">srvctl modify srvpool</code> command to increase the cardinality of the server pool to accommodate <code dir="ltr">node2</code>, after which time <code dir="ltr">node2</code> moves out of the Free server pool and into the modified server pool, and <code dir="ltr">crsd</code> adds the Oracle RAC database instance to <code dir="ltr">node2</code>.</p>
</li>
<li>
<p>If you have an administrator-managed database, then add a new instance on <code dir="ltr">node2</code> as described in <a href="#CHDCFHHJ">"Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes"</a>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you back up your voting disk and Oracle Cluster Registry (OCR) files after you complete the node addition process.</div>
<a id="CHDCFHHJ"></a>
<div id="RACAD8197" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Adding Administrator-Managed Oracle RAC Database Instances to Target Nodes</h3>
<p>Before adding an Oracle RAC database instance, run the following command on an existing node to configure Oracle Enterprise Manager on the node where you plan to add the database instance:</p>
<pre dir="ltr">
C:\&gt;emca -addNode db
</pre>
<p>The Oracle Enterprise Manager Configuration Assistant prompts you for database and node information.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RIWIN" href="../../install.112/e48195/toc.htm"><span class="italic">Oracle Real Application Clusters Installation Guide for Microsoft Windows</span></a> for more information about configuring Oracle Enterprise Manager</div>
<p><a id="sthref793"></a><a id="sthref794"></a>You can use either Oracle Enterprise Manager or DBCA to add Oracle RAC database instances to the target nodes. To add a database instance to a target node with <a id="sthref795"></a>Oracle Enterprise Manager, see the <a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for complete information.</p>
<p>This section describes using DBCA to add Oracle RAC database instances under the following topics:</p>
<ul>
<li>
<p><a href="#CHDIFJEB">Using DBCA in Interactive Mode to Add Database Instances to Target Nodes</a></p>
</li>
<li>
<p><a href="#CHDFIFCC">Using DBCA in Silent Mode to Add Database Instances to Target Nodes</a></p>
</li>
</ul>
<p>These tools guide you through the following tasks:</p>
<ul>
<li>
<p>Creating a new database instance on each target node</p>
</li>
<li>
<p>Creating and configuring high availability components</p>
</li>
<li>
<p>Creating the Oracle Net configuration for a non-default listener from the Oracle home</p>
</li>
<li>
<p>Starting the new instance</p>
</li>
<li>
<p>Creating and starting services if you entered services information on the Services Configuration page</p>
</li>
</ul>
<p>After adding the instances to the target nodes, you should perform any necessary service configuration procedures, as described in <a href="hafeats.htm#BABIAICG">Chapter 5, "Introduction to Automatic Workload Management"</a>.</p>
<a id="CHDIFJEB"></a>
<div id="RACAD8198" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Using DBCA in Interactive Mode to Add Database Instances to Target Nodes</h4>
<p><a id="sthref796"></a>To add a database instance to a target node using DBCA in interactive mode, perform the following steps:</p>
<ol>
<li>
<p>Ensure that your existing nodes have the Oracle home environment variable set correctly.</p>
</li>
<li>
<p>Start DBCA by entering <code dir="ltr">dbca</code> at the system prompt from the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\bin</code> directory on an existing node.</p>
<p>DBCA performs certain CVU checks while running. However, you can also run CVU from the command line to perform various verifications.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD1100" href="../../rac.112/e41959/cvu.htm#CWADD1100"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about CVU</div>
<p>DBCA displays the <a id="sthref797"></a><a id="sthref798"></a>Welcome page for Oracle RAC. Click <span class="bold">Help</span> on any DBCA page for additional information.</p>
</li>
<li>
<p>Select <span class="bold">Oracle Real Application Clusters database</span>, click <span class="bold">Next</span>, and DBCA displays the <a id="sthref799"></a><a id="sthref800"></a>Operations page.</p>
</li>
<li>
<p>Select <span class="bold">Instance Management</span>, click <span class="bold">Next</span>, and DBCA displays the <a id="sthref801"></a><a id="sthref802"></a>Instance Management page.</p>
</li>
<li>
<p>Select <span class="bold">Add Instance</span> and click <span class="bold">Next</span>. DBCA displays the <a id="sthref803"></a><a id="sthref804"></a>List of Cluster Databases page that shows the databases and their current status, such as <code dir="ltr">ACTIVE</code> or <code dir="ltr">INACTIVE</code>.</p>
</li>
<li>
<p>From the List of Cluster Databases page, select the active Oracle RAC database to which you want to add an instance. Enter the user name and password for a database user that has <code dir="ltr">SYSDBA</code> privileges. Click <span class="bold">Next</span> and DBCA displays the List of Cluster Database Instances page showing the names of the existing instances for the Oracle RAC database that you selected.</p>
</li>
<li>
<p>Click <span class="bold">Next</span> to add a new instance and DBCA displays the <a id="sthref805"></a><a id="sthref806"></a>Adding an Instance page.</p>
</li>
<li>
<p>On the Adding an Instance page, enter the instance name in the field at the top of this page if the instance name that DBCA provides does not match your existing instance naming scheme. Then select the new node name from the list, click <span class="bold">Next</span>, and DBCA displays the Services Page.</p>
</li>
<li>
<p>Enter the services information for the new node's instance, click <span class="bold">Next</span>, and DBCA displays the Instance Storage page.</p>
</li>
<li>
<p>If you are using Oracle ASM or a cluster file system, then click <span class="bold">Finish</span> on the Instance Storage page.</p>
</li>
<li>
<p>Review the information on the Summary dialog and click <span class="bold">OK</span> or click <span class="bold">Cancel</span> to end the instance addition operation. The DBCA displays a progress dialog showing DBCA performing the instance addition operation. When DBCA completes the instance addition operation, DBCA displays a dialog asking whether you want to perform another operation.</p>
</li>
<li>
<p>After you terminate your DBCA session, run the following command to verify the administrative privileges on the new node and obtain detailed information about these privileges where <span class="italic">nodelist</span> consists of the newly added nodes:</p>
<pre dir="ltr">
cluvfy comp admprv -o db_config -d oracle_home -n <span class="italic">nodelist</span> [-verbose]
</pre></li>
<li>
<p>Perform any necessary service configuration procedures, as described in <a href="hafeats.htm#BABIAICG">Chapter 5, "Introduction to Automatic Workload Management"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDFIFCC"></a>
<div id="RACAD8199" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Using DBCA in Silent Mode to Add Database Instances to Target Nodes</h4>
<p><a id="sthref807"></a>You can use DBCA in silent mode to add instances to nodes on which you have extended an Oracle Clusterware home and an Oracle Database home. Use the following syntax:</p>
<pre dir="ltr">
dbca -silent -addInstance -nodeList <span class="italic">node_name</span> -gdbName <span class="italic">gdb_name</span>
[-instanceName <span class="italic">instance_name</span> -sysDBAUserName <span class="italic">sysdba</span> -sysDBAPassword <span class="italic">password</span>]
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="adddelunix.htm#CEGGDIGA">Table 10-1</a> for definitions of the variables used in the preceding syntax</div>
<p>Perform any necessary service configuration procedures, as described in <a href="hafeats.htm#BABIAICG">Chapter 5, "Introduction to Automatic Workload Management"</a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDFADDA"></a>
<div id="RACAD8200" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Deleting Oracle RAC from a Cluster Node</h2>
<p>To remove Oracle RAC from a cluster node, you must delete the database instance and the Oracle RAC software prior to removing the node from the cluster.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If there are no database instances on the node you want to delete, then proceed to <a href="#CHDJGFBA">"Removing Oracle RAC"</a>.</div>
<p>This section includes the following procedures to delete nodes from clusters in an Oracle RAC environment:</p>
<ul>
<li>
<p><a href="#CHDFIBBD">Deleting Instances from Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#CHDJGFBA">Removing Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDFEADF">Deleting Nodes from the Cluster</a></p>
</li>
</ul>
<a id="CHDFIBBD"></a>
<div id="RACAD8201" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Deleting Instances from Oracle RAC Databases</h3>
<p>The procedures for deleting instances are different for policy-managed and administrator-managed databases. Deleting a policy-managed database instance involves reducing the size of the server pool in which the database instance resides. Deleting an administrator-managed database instance involves using DBCA to delete the database instance.</p>
<p class="subhead2"><a id="RACAD8202"></a>Deleting Policy-Managed Databases</p>
<p>If you plan to delete the node on which the database resides from the cluster, then, before deleting the database instance, run the following command on a node that you <span class="italic">are not deleting</span> to deconfigure Oracle Enterprise Manager on the node you plan to delete:</p>
<pre dir="ltr">
emca -deleteNode db
</pre>
<p>The Oracle Enterprise Manager Configuration Assistant prompts you for database and node information.</p>
<p>To delete a <a id="sthref808"></a>policy-managed database, decrease the size of the server pool in which a database instance resides. This effectively removes the instance without having to remove the Oracle RAC software from the node or the node from the cluster.</p>
<p>For example, you can delete a policy-managed database by running the following commands on any node in the cluster:</p>
<pre dir="ltr">
srvctl stop instance -d db_unique_name -n <span class="italic">node_name</span>
srvctl relocate server -n <span class="italic">node_name</span> -g Free
</pre>
<p>The first command stops on the instance on a particular node and the second command moves the node out of its current server pool and into the Free server pool.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDJGFBA">"Removing Oracle RAC"</a> for information about removing the Oracle RAC software from a node</div>
<p class="subhead2"><a id="RACAD8203"></a>Deleting Instances from Administrator-Managed Databases</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before deleting an instance from an Oracle RAC database, use either SRVCTL or Oracle Enterprise Manager to do the following:
<ul>
<li>
<p>If you have services configured, then relocate the services</p>
</li>
<li>
<p>Modify the services so that each service can run on one of the remaining instances</p>
</li>
<li>
<p>Ensure that the instance to be removed from an administrator-managed database is neither a preferred nor an available instance of any service</p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="hafeats.htm#BABEDIIC">"Administering Services with Oracle Enterprise Manager"</a> and <a href="hafeats.htm#BABGDFGI">"Administering Services with SRVCTL"</a></div>
<p><a id="sthref809"></a><a id="sthref810"></a>The procedures in this section explain how to use DBCA in interactive or silent mode, to delete an instance from an Oracle RAC database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPRC401" href="../../rac.112/e17264/addnodes.htm#TDPRC401"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for information about how to delete a database instance from a target node with <a id="sthref811"></a>Oracle Enterprise Manager</div>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CEGGEAHD">Using DBCA in Interactive Mode to Delete Instances from Nodes</a></p>
</li>
<li>
<p><a href="#CHDECDHI">Using DBCA in Silent Mode to Delete Instances from Nodes</a></p>
</li>
</ul>
<a id="CEGGEAHD"></a>
<div id="RACAD7384" class="sect3">
<h4 class="sect3">Using DBCA in Interactive Mode to Delete Instances from Nodes</h4>
<p><a id="sthref812"></a>To delete an instance using DBCA in interactive mode, perform the following steps:</p>
<ol>
<li>
<p>Verify there is a current backup of OCR.</p>
<p>Run the <code dir="ltr">ocrconfig -showbackup</code> command to ensure there is a valid backup.</p>
</li>
<li>
<p>Start DBCA.</p>
<p>Start DBCA on a node <span class="italic">other than</span> the node that hosts the instance that you want to delete. The database and the instance that you plan to delete should continue to be started and running during this step.</p>
</li>
<li>
<p>On the DBCA Welcome page select <span class="bold">Oracle Real Application Clusters Database</span>, click <span class="bold">Next</span>, and DBCA displays the Operations page.</p>
</li>
<li>
<p>On the DBCA Operations page, select <span class="bold">Instance Management</span>, click <span class="bold">Next</span>, and DBCA displays the Instance Management page.</p>
</li>
<li>
<p>On the Instance Management page, select <span class="bold">Delete Instance</span>, click <span class="bold">Next</span>, and DBCA displays the List of Cluster Databases page.</p>
</li>
<li>
<p>Select an Oracle RAC database from which to delete an instance. Enter a user name and password for the database user that has <code dir="ltr">SYSDBA</code> privileges. Click <span class="bold">Next</span> and DBCA displays the List of Cluster Database Instances page. The List of Cluster Database Instances page shows the instances that are associated with the Oracle RAC database that you selected and the status of each instance.</p>
</li>
<li>
<p>On the List of Cluster Databases page, select the Oracle RAC database from which to delete the instance, as follows:</p>
<ol>
<li>
<p>On the List of Cluster Database Instances page, DBCA displays the instances that are associated with the Oracle RAC database that you selected and the status of each instance. Select the cluster database from which you will delete the instance. Click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> on the Confirmation dialog to proceed to delete the instance.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> on the next Confirmation dialog to delete the instance and related Optimal Flexible Architecture (OFA) directory structure.</p>
<p>DBCA displays a progress dialog showing that DBCA is deleting the instance. During this operation, DBCA removes the instance and the instance's Oracle Net configuration. When DBCA completes this operation, DBCA displays a dialog asking whether you want to perform another operation.</p>
<p>Click <span class="bold">No</span> and exit DBCA or click <span class="bold">Yes</span> to perform another operation. If you click <span class="bold">Yes</span>, then DBCA displays the Operations page.</p>
</li>
</ol>
</li>
<li>
<p>Verify that the dropped instance's redo thread has been removed using SQL*Plus to query the <code dir="ltr">V$LOG</code> view from an existing instance. If the redo thread is not disabled, then disable the thread. For example:</p>
<pre dir="ltr">
SQL&gt; ALTER DATABASE DISABLE THREAD 2;
</pre></li>
<li>
<p>Verify that the instance has been removed from OCR by running the following command, where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the name of the database:</p>
<pre dir="ltr">
srvctl config database -d <span class="italic">db_unique_name</span>
</pre></li>
<li>
<p>If you are deleting more than one node, then repeat these steps to delete the instances from all the nodes that you are going to delete.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDECDHI"></a>
<div id="RACAD8204" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Using DBCA in Silent Mode to Delete Instances from Nodes</h4>
<p><a id="sthref813"></a>You can use DBCA in silent mode to delete a database instance from a node.</p>
<p>Run the following command, where the variables are the same as those shown in <a href="adddelunix.htm#CEGGDIGA">Table 10-1</a> for the DBCA command to add an instance. Provide a node name only if you are deleting an instance from a node other than the one on where DBCA is running as shown in the following example where <code dir="ltr"><span class="codeinlineitalic">password</span></code> is the SYSDBA password:</p>
<pre dir="ltr">
dbca -silent -deleteInstance [-nodeList <span class="italic">node_name</span>] -gdbName <span class="italic">gdb_name</span>
-instanceName <span class="italic">instance_name</span> -sysDBAUserName <span class="italic">sysdba</span> -sysDBAPassword <span class="italic">password</span>
</pre>
<p>At this point, you have accomplished the following:</p>
<ul>
<li>
<p>Deregistered the selected instance from its associated Oracle Net Services listeners</p>
</li>
<li>
<p>Deleted the selected database instance from the instance's configured node</p>
</li>
<li>
<p>Removed the Oracle Net configuration</p>
</li>
<li>
<p>Deleted the Oracle Flexible Architecture directory structure from the instance's configured node.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDJGFBA"></a>
<div id="RACAD8205" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Removing Oracle RAC</h3>
<p>This procedure removes the <a id="sthref814"></a>Oracle RAC software from the node you are deleting from the cluster and updates inventories on the remaining nodes.</p>
<ol>
<li>
<p>If there is a listener in the Oracle RAC home on the node you are deleting, then you must disable and stop it before deleting the Oracle RAC software. Run the following commands on any node in the cluster, specifying the name of the listener and the name of the node you are deleting:</p>
<pre dir="ltr">
srvctl disable listener -l <span class="italic">listener_name</span> -n <span class="italic">name_of_node_to_delete</span>
srvctl stop listener -l <span class="italic">listener_name</span> -n <span class="italic">name_of_node_to_delete</span>
</pre></li>
<li>
<p>Run the following command from <code dir="ltr">%ORACLE_HOME%\oui\bin</code> on the node that you are deleting to update the inventory on that node:</p>
<pre dir="ltr">
setup.exe -updateNodeList ORACLE_HOME=<span class="italic">Oracle_home_location</span>
"CLUSTER_NODES={<span class="italic">name_of_node_to_delete</span>}" -local
</pre></li>
<li>
<p>Depending on whether you have a shared or nonshared Oracle home, complete one of the following two procedures:</p>
<ul>
<li>
<p>For a shared home, detach the node instead of deinstalling it by running the following command from the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\oui\bin</code> directory on each of the nodes that you want to delete:</p>
<pre dir="ltr">
setup.exe &ndash;detachHome ORACLE_HOME=<span class="italic">Oracle_home</span>
</pre></li>
<li>
<p>For a nonshared home, deinstall the Oracle home from the node that you are deleting by running the following command from the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\deinstall</code> directory:</p>
<pre dir="ltr">
deinstall -local
</pre></li>
</ul>
</li>
<li>
<p>Run the following command from the <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code><code dir="ltr">\oui\bin</code> directory on any one of the remaining nodes in the cluster to update the inventories of those nodes, specifying a comma-delimited list of remaining node names:</p>
<pre dir="ltr">
setup.exe -updateNodeList ORACLE_HOME=<span class="italic">Oracle_home_location</span>
"CLUSTER_NODES={<span class="italic">remaining_node_list</span>}"
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDFEADF"></a>
<div id="RACAD8206" class="sect2">
<h3 class="sect2">Deleting Nodes from the Cluster</h3>
<p>After you delete the instance, you can begin the process of deleting the node from the cluster. You accomplish this by running scripts on the node you want to delete to remove the Oracle Clusterware installation and you run scripts on the remaining nodes to update the node list.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWADD90992" href="../../rac.112/e41959/adddelclusterware.htm#CWADD90992"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about deleting nodes from the cluster</p>
</li>
<li>
<p><a class="olink CWWIN" href="../../install.112/e48194/toc.htm"><span class="italic">Oracle Grid Infrastructure Installation Guide for Microsoft Windows</span></a> for more information about removing Oracle Clusterware and Oracle ASM</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="adddelunix.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="design.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
