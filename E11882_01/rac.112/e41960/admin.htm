<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Administering Database Instances and Cluster Databases</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:38Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="storage.htm" title="Previous" type="text/html" />
<link rel="Next" href="onenode.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/24</span> <!-- End Header -->
<div id="RACAD900" class="chapter"><a id="g1063881"></a> <a id="i1013916"></a>
<h1 class="chapter"><span class="secnum">3</span> Administering Database Instances and Cluster Databases</h1>
<p>This chapter describes how to administer Oracle Real Application Clusters (Oracle RAC) databases and database instances.</p>
<p>The topics in this chapter include:</p>
<ul>
<li>
<p><a href="#CEGDFGFE">Tools for Administering Oracle RAC</a></p>
</li>
<li>
<p><a href="#BCEBGHHC">Starting and Stopping Instances and Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#CIHIEAJJ">Verifying That Instances are Running</a></p>
</li>
<li>
<p><a href="#CACIAJHB">Terminating Sessions On a Specific Cluster Instance</a></p>
</li>
<li>
<p><a href="#BCEFICEE">Overview of Initialization Parameter Files in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CBBCDFIJ">Initialization Parameter Use in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CACJJGFE">Converting an Administrator-Managed Database to a Policy-Managed Database</a></p>
</li>
<li>
<p><a href="#i20584">Quiescing Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#BGBBDEDG">Administering Multiple Cluster Interconnects on Linux and UNIX Platforms</a></p>
</li>
<li>
<p><a href="#CACJCGBE">Customizing How Oracle Clusterware Manages Oracle RAC Databases</a></p>
</li>
<li>
<p><a href="#CACBGADB">Advanced Oracle Enterprise Manager Administration</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The Oracle Enterprise Manager online help for more information about Oracle Enterprise Manager</div>
<a id="CEGDFGFE"></a>
<div id="RACAD803" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Tools for Administering Oracle RAC</h2>
<p>The following sections introduce Oracle RAC administration using the three tools that you commonly use to manage Oracle RAC databases and instances: Oracle Enterprise Manager, SQL*Plus, and the SRVCTL utility. In many cases, you use these tools the same way to manage Oracle RAC environments as you would use them manage noncluster<a id="sthref161"></a><a id="sthref162"></a><a id="sthref163"></a> Oracle databases:</p>
<ul>
<li>
<p><a href="#CHDFBBGE">Overview of Oracle RAC Database Administration</a></p>
</li>
<li>
<p><a href="#CACCFJJA">Administering Oracle RAC with Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CBBBAJBC">Administering Oracle RAC with SQL*Plus</a></p>
</li>
<li>
<p><a href="#CBBFCBEF">Administering Oracle RAC with SRVCTL</a></p>
</li>
</ul>
<a id="CHDFBBGE"></a>
<div id="RACAD7893" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Overview of Oracle RAC Database Administration</h3>
<p>Prior to Oracle RAC 11<span class="italic">g</span> release 2 (11.2), DBAs had to hard-code parameters, such as database instance number and redo threads, to allocate specific Oracle RAC database instances to nodes within the cluster. If a node in the cluster does not start, then the database instance does not start. In Oracle RAC 11<span class="italic">g</span> release 2 (11.2.0.2), this method of managing your Oracle RAC database continues to be available. An Oracle RAC database managed in this manner is referred to as an <a id="sthref164"></a><a id="sthref165"></a><a href="rac_glossary.htm#CHDJIDFE"><span class="xrefglossterm">administrator-managed database</span></a>. Administrator-managed databases include pre-11<span class="italic">g</span> release 2 (11.2) Oracle databases and upgraded Oracle databases. You can manage these databases using the same commands or methods (such as DBCA or Oracle Enterprise Manager) you used with previous releases of Oracle Database. All commands and utilities maintain backward compatibility.</p>
<p>With Oracle RAC 11<span class="italic">g</span> release 2 (11.2), you define a <a id="sthref166"></a>database as a resource in Oracle Clusterware. The resource is automatically created when you create your database with DBCA or the resource can be manually created by adding your database with SRVCTL. This resource contains the Oracle home, the SPFILE, one or more server pools, and one or more Oracle ASM disk groups required for the database. The database resource also has a <span class="italic">weak start dependency</span> on the VIP, which means that the resource tries to start the VIP for the node when the database instance starts. If the VIP does not start successfully, then the instance still starts but the service does not. The database service resource depends on a running VIP.</p>
<p>When you review the database resource for an administrator-managed database, you see a <a id="sthref167"></a>server pool defined with the same name as the Oracle database. This server pool is part of a special Oracle-defined server pool called <a id="sthref168"></a><a id="sthref169"></a><span class="italic">Generic</span>. Oracle RAC manages the Generic server pool to support administrator-managed databases. When you add or remove an administrator-managed database using either SRVCTL or DBCA, Oracle RAC creates or removes the server pools that are members of Generic. You cannot use SRVCTL or CRSCTL commands to modify the Generic server pool.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91277" href="../../rac.112/e41959/crschp.htm#CWADD91277"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about defining resources, server pools, and resource dependencies</div>
<p>In Oracle RAC 11<span class="italic">g</span> release 2 (11.2), Oracle introduces <a id="sthref170"></a><a id="sthref171"></a><a href="rac_glossary.htm#CHDDIIAF"><span class="xrefglossterm">policy-managed database</span></a>s to move away from any hard coding of parameters, and to help to replace nodes in a cluster or expand the cluster as requirements change. If you use policy-managed databases, then you must install the Oracle home software on every node in your cluster. Policy-managed databases must use Oracle Database 11<span class="italic">g</span> release 2 (11.2) and cannot coexist on the same servers as administrator-managed databases.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot run more than one instance of the same database on the same node.</div>
<p>A policy-managed database is defined by <a id="sthref172"></a><span class="italic"><a href="rac_glossary.htm#CHDHCIFH"><span class="xrefglossterm">cardinality</span></a></span>, which is the number of database instances you want running during normal operations. A policy-managed database runs in one or more database server pools that are created in the cluster by a user assigned the <a id="sthref173"></a>CRS Administrator role, and it can run on different servers at different times. A database instance starts on all servers that are in the server pools defined for the database. If you are using Oracle Automatic Storage Management (Oracle ASM) with <a id="sthref174"></a>Oracle Managed Files for your database storage, then, when an instance starts and there is no <a id="sthref175"></a>redo thread available, Oracle RAC automatically enables one and creates the required redo log files and <a id="sthref176"></a>undo tablespace. <a id="sthref177"></a>Clients can connect to a policy-managed database using the same SCAN-based connect string no matter which servers they happen to be running on at the time.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CACJJGFE">"Converting an Administrator-Managed Database to a Policy-Managed Database"</a></div>
<p class="subhead2"><a id="RACAD8313"></a>Using the Same Cluster for Administrator-Managed and Policy-Managed Databases</p>
<p>If you want to create an administrator-managed database on a cluster that already hosts policy-managed databases, then you must carefully select the nodes for the administrator-managed database. This is because the nodes that you select for an administrator-managed database that are in policy-managed server pools will be moved into the Generic server pool as part of this process.</p>
<p>If you select nodes that already run other policy-managed database instances, then DBCA prompts you with a message that lists the instances and services that will be shut down when DBCA creates the administrator-managed database. If you select the <span class="bold">Yes</span> button on the dialog box when DBCA asks "Do you want to continue?," then your policy-managed database instances and services will be shut down as a result of the administrator-managed database creation process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This is also true if you use the <code dir="ltr">srvctl add instance</code> command, which returns a similar error message indicating that the databases would be shut down. If you also use the force option (<code dir="ltr">-f</code>) with the <code dir="ltr">srvctl add instance</code> command, then this is the same as choosing <span class="bold">Yes</span> on the DBCA dialog. Doing this shuts down any policy-managed databases that are running on the node before moving the node into the Generic server pool.</div>
</div>
<!-- class="sect2" -->
<a id="CACCFJJA"></a>
<div id="RACAD804" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Administering Oracle RAC with Oracle Enterprise Manager</h3>
<p>Oracle Enterprise Manager provides a central point of control for the Oracle RAC environment, allowing you to perform administrative tasks simultaneously on multiple cluster databases. It has both the Database Control and Grid Control graphical user interfaces (GUIs) for managing noncluster and Oracle RAC environments. Because there is one Oracle Enterprise Manager Agent on each node of an Oracle RAC database, for Database Control you can use any URL for that database to administer it with Oracle Enterprise Manager.</p>
<p>In <a id="sthref178"></a>Oracle Enterprise Manager, Oracle RAC-specific administrative tasks generally focus on two levels: tasks that affect an entire <a href="rac_glossary.htm#CHDDEDDI"><span class="xrefglossterm">cluster database</span></a> and tasks that affect specific instances. For example, you can use Oracle Enterprise Manager to start, stop, and monitor databases, cluster database instances, and their listeners, and to schedule jobs or set up alert thresholds for metrics. Or you can perform instance-specific commands such as setting parameters or creating resource plans. You can also use Oracle Enterprise Manager to manage schemas, security, and cluster database storage features.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for a task-oriented guide that explains how to use Oracle Enterprise Manager to perform routine Oracle RAC database administrative tasks</p>
</li>
<li>
<p><a href="#CACBGADB">"Advanced Oracle Enterprise Manager Administration"</a> for advanced administration tasks not covered in <a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CBBBAJBC"></a>
<div id="RACAD806" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Administering Oracle RAC with <a id="sthref179"></a>SQL*Plus</h3>
<p><a id="sthref180"></a><a id="sthref181"></a>SQL*Plus commands operate on the current instance. The current instance can be either the local default instance on which you initiated your SQL*Plus session, or it can be a remote instance to which you connect with Oracle Net Services.</p>
<p>Because, by default, the SQL*Plus prompt does not identify the current instance, you should direct your commands to the correct instance. Starting a SQL*Plus session and connecting to the database without specifying an instance directs all SQL*Plus commands to the local instance. In this case, the default instance is also the current instance.</p>
<p>To connect to a different instance in <a id="sthref182"></a>SQL*Plus, issue a new <code dir="ltr">CONNECT</code> command and specify a remote instance <a id="sthref183"></a>net service name, as shown in the following example, where <code dir="ltr"><span class="codeinlineitalic">password</span></code> is the password:</p>
<pre dir="ltr">
CONNECT <span class="codeinlineitalic">user_name</span>@<span class="italic">net_service_name</span>
Enter password: <span class="italic">password</span>
</pre>
<p>Connecting as <a id="sthref184"></a><code dir="ltr">SYSOPER</code> or <a id="sthref185"></a><code dir="ltr">SYSDBA</code> enables you to perform privileged operations, such as instance startup and shutdown. Multiple SQL*Plus sessions can connect to the same instance at the same time. SQL*Plus automatically disconnects you from the first instance whenever you connect to another one.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Use the <a id="sthref186"></a><code dir="ltr">SYSASM</code> privilege instead of the <code dir="ltr">SYSDBA</code> privilege to connect to and administer an Oracle ASM instance. If you use the <a id="sthref187"></a><code dir="ltr">SYSDBA</code> privilege to connect to an Oracle ASM instance, then Oracle Database writes warnings to the alert log files because commands that run using the <code dir="ltr">SYSDBA</code> privilege on an Oracle ASM instance are deprecated.
<p>See the <a class="olink OSTMG02600" href="../../server.112/e18951/asminst.htm#OSTMG02600"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a class="olink SQPUG" href="../../server.112/e16604/toc.htm"><span class="italic">SQL*Plus User's Guide and Reference</span></a></p>
</li>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for the proper specification of <code dir="ltr">net_service_name</code></p>
</li>
<li>
<p><a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to the database using <code dir="ltr">SYSDBA<a id="sthref188"></a></code> or <code dir="ltr">SYSOPER<a id="sthref189"></a></code> privileges</p>
</li>
</ul>
</div>
<div id="RACAD7292" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref190"></a>
<h4 class="sect3"><a id="sthref191"></a>Changing the SQL*Plus Prompt</h4>
<p>To change the <a id="sthref192"></a>SQL*Plus prompt so that it includes the name of the current instance:</p>
<pre dir="ltr">
SET SQLPROMPT '_CONNECT_IDENTIFIER&gt; '
</pre>
<p>This command replaces the "SQL" string in front of the greater than symbol (&gt;) with the user variable <code dir="ltr">_CONNECT_IDENTIFIER</code> that displays the current instance name for the duration of your current session.</p>
<p>To change the prompt for all sessions automatically, add an entry similar to the following entry in your <code dir="ltr">glogin.sql</code> file, found in the SQL*Plus administrative directory:</p>
<pre dir="ltr">
SET SQLPROMPT '_CONNECT_IDENTIFIER&gt; '
</pre>
<p>You may include any other required text or SQL*Plus user variable between the single quotes in the command.</p>
</div>
<!-- class="sect3" -->
<a id="CIHEGEDB"></a>
<div id="RACAD039" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">How SQL*Plus Commands Affect Instances</h4>
<p><a id="i56347"></a>Most SQL statements affect the current instance. You can use SQL*Plus to start and stop instances in the Oracle RAC database. You do not need to run SQL*Plus commands as <code dir="ltr">root</code> on Linux and UNIX systems or as <code dir="ltr">Administrator</code> on Windows systems. You need only the proper database account with the privileges that you normally use for a noncluster Oracle database. Some examples of how SQL*Plus commands affect instances are:</p>
<ul>
<li>
<p><code dir="ltr"><a id="sthref193"></a>ALTER SYSTEM CHECKPOINT LOCAL</code> affects only the instance to which you are currently connected, rather than the default instance or all instances.<a id="sthref194"></a><a id="sthref195"></a></p>
</li>
<li>
<p><code dir="ltr">ALTER SYSTEM CHECKPOINT</code> or <code dir="ltr">ALTER SYSTEM CHECKPOINT GLOBAL</code> affects <span class="italic">all</span> instances in the cluster database.<a id="sthref196"></a><a id="sthref197"></a><a id="sthref198"></a><a id="sthref199"></a></p>
</li>
<li>
<p><code dir="ltr"><a id="sthref200"></a>ALTER SYSTEM SWITCH LOGFILE</code> affects only the current instance.</p>
<ul>
<li>
<p>To force a global log switch, use the <a id="sthref201"></a><code dir="ltr">ALTER SYSTEM ARCHIVE LOG CURRENT</code> statement.</p>
</li>
<li id="i56925">
<p>The <code dir="ltr">INSTANCE</code> option of <code dir="ltr">ALTER SYSTEM ARCHIVE LOG</code> enables you to archive each online redo log file for a specific instance.<a id="sthref202"></a><a id="sthref203"></a><a id="sthref204"></a><a id="sthref205"></a></p>
</li>
</ul>
</li>
</ul>
<p><a href="#CHDBHEDB">Table 3-1</a> describes how SQL*Plus commands<a id="sthref206"></a><a id="sthref207"></a> affect instances.</p>
<div id="RACAD7683" class="tblformal">
<p class="titleintable"><a id="sthref208"></a><a id="CHDBHEDB"></a>Table 3-1 How SQL*Plus Commands Affect Instances</p>
<table class="cellalignment429" title="How SQL*Plus Commands Affect Instances" summary="How SQL*Plus Commands Affect Instances" dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t10"><span class="bold">SQL*Plus Command</span></th>
<th class="cellalignment430" id="r1c2-t10"><span class="bold">Associated Instance</span></th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t10" headers="r1c1-t10">
<p><a id="sthref209"></a><code dir="ltr">ARCHIVE LOG</code></p>
</td>
<td class="cellalignment431" headers="r2c1-t10 r1c2-t10">
<p>Always affects the current instance.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t10" headers="r1c1-t10">
<p><a id="sthref210"></a><code dir="ltr">CONNECT</code></p>
</td>
<td class="cellalignment431" headers="r3c1-t10 r1c2-t10">
<p>Affects the default instance if no instance is specified in the <code dir="ltr">CONNECT</code> command<a id="sthref211"></a>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t10" headers="r1c1-t10">
<p><a id="sthref212"></a><code dir="ltr">HOST</code></p>
</td>
<td class="cellalignment431" headers="r4c1-t10 r1c2-t10">
<p>Affects the node running the SQL*Plus session, regardless of the location of the current and default instances.<a id="sthref213"></a></p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r5c1-t10" headers="r1c1-t10">
<p><a id="sthref214"></a><code dir="ltr">RECOVER</code></p>
</td>
<td class="cellalignment431" headers="r5c1-t10 r1c2-t10">
<p>Does not affect any particular instance, but rather the database<a id="sthref215"></a>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r6c1-t10" headers="r1c1-t10">
<p><a id="sthref216"></a><code dir="ltr">SHOW INSTANCE</code></p>
</td>
<td class="cellalignment431" headers="r6c1-t10 r1c2-t10">
<p>Displays information about the current instance, which can be different from the default local instance<a id="sthref217"></a> if you have redirected your commands to a remote instance.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r7c1-t10" headers="r1c1-t10">
<p><a id="sthref218"></a><code dir="ltr">SHOW PARAMETER</code> and <a id="sthref219"></a><code dir="ltr">SHOW SGA</code></p>
</td>
<td class="cellalignment431" headers="r7c1-t10 r1c2-t10">
<p>Displays parameter and SGA information from the current<a id="sthref220"></a> instance<a id="sthref221"></a>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r8c1-t10" headers="r1c1-t10">
<p><a id="sthref222"></a><code dir="ltr">STARTUP</code> and <a id="sthref223"></a><code dir="ltr">SHUTDOWN</code></p>
</td>
<td class="cellalignment431" headers="r8c1-t10 r1c2-t10">
<p>Always affects the current instance. These are privileged SQL*Plus commands.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CBBFCBEF"></a>
<div id="RACAD808" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Administering Oracle RAC with <a id="sthref224"></a>SRVCTL</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
if you currently set environment variables other than Oracle home and Oracle SID in your session or profile when accessing the Oracle database, then use the <a id="sthref225"></a><a id="sthref226"></a><code dir="ltr">srvctl setenv</code> command to set them for SRVCTL.</div>
<p>The Server Control Utility (SRVCTL) is a command-line interface that you can use to manage an Oracle RAC database from a single point. You can use SRVCTL to start and stop the database and instances, and to delete or move instances and services. You can also use SRVCTL to add services and manage configuration information, in addition to other resources in the cluster.</p>
<p>When you use SRVCTL to perform configuration operations on your cluster, SRVCTL stores configuration data in the <a id="sthref227"></a>Oracle Cluster Registry (OCR). SRVCTL performs other operations, such as starting and stopping instances, by configuring and managing Oracle Clusterware resources, which define agents that perform database startup and shutdown operations using Oracle Call Interface APIs.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="srvctladmin.htm#CHDEBCFF">Appendix A, "Server Control Utility Reference"</a> for more information about SRVCTL</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BCEBGHHC"></a>
<div id="RACAD801" class="sect1"><!-- infolevel="all" infotype="General" --><a id="BGBHIGHB"></a>
<h2 class="sect1">Starting and Stopping Instances and Oracle RAC Databases</h2>
<p>You can start and stop <a id="sthref228"></a>instances with Oracle Enterprise Manager, SQL*Plus or SRVCTL as described in the following sections. Both Oracle Enterprise Manager and SRVCTL provide options to start and stop all of the instances in an Oracle RAC database with a single step.</p>
<p>You can only perform certain operations when the <a id="sthref229"></a>database is in a <code dir="ltr">NOMOUNT</code> or <code dir="ltr">MOUNT</code> state. Performing other operations requires that the database be <code dir="ltr">OPEN</code>. In addition, some operations require that only one instance be in the required state, while other operations require that all of the instances be in an identical state.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle does not support running more than one instance of the same database on the same node.</div>
<p>The procedures in the following sections discuss starting and stopping Oracle RAC database instances:</p>
<ul>
<li>
<p><a href="#CACJCGFA">Overview of Starting and Stopping Oracle RAC Instances</a></p>
</li>
<li>
<p><a href="#CBBJEDFI">Starting and Stopping with Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CBBBHBDG">Starting Up and Shutting Down with SQL*Plus</a></p>
</li>
<li>
<p><a href="#CBBGGBJD">Starting Up and Shutting Down with SRVCTL</a></p>
</li>
</ul>
<a id="CACJCGFA"></a>
<div id="RACAD8314" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Overview of Starting and Stopping Oracle RAC Instances</h3>
<p>Before you can start an Oracle RAC instance, your clusterware and any required operating system-specific processes must be running. For more information about these processes, see your operating system documentation.</p>
<p><a id="sthref230"></a><a id="sthref231"></a>The procedure for shutting down Oracle RAC instances is identical to shutting down instances in noncluster Oracle databases, with the exceptions described here.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../../server.112/e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about shutting down Oracle databases</div>
<ul>
<li>
<p>In Oracle RAC, shutting down one instance does not interfere with the operation of other running instances. <a id="sthref232"></a></p>
</li>
<li>
<p>To shut down an <a id="sthref233"></a>Oracle RAC database completely, shut down every instance that has the database open or mounted.</p>
</li>
<li>
<p>After a <code dir="ltr">NORMAL</code> or <code dir="ltr">IMMEDIATE</code> shutdown, instance recovery is not required. Recovery is required, however, after you issue the <a id="sthref234"></a><code dir="ltr">SHUTDOWN ABORT</code> command or after an <a id="sthref235"></a>instance terminates abnormally. An instance that is still running performs instance recovery for the instance that shut down. If no other instances are running, the next instance to open the database performs <a id="sthref236"></a>instance recovery for any instances needing it.<a id="sthref237"></a><a id="sthref238"></a><a id="sthref239"></a><a id="sthref240"></a><a id="sthref241"></a><a id="sthref242"></a><a id="sthref243"></a><a id="sthref244"></a></p>
</li>
<li>
<p>The <a id="sthref245"></a><code dir="ltr">SHUTDOWN TRANSACTIONAL</code> command with the <code dir="ltr">LOCAL</code> option is useful to shutdown an instance after all active transactions on the instance have either committed or rolled back. This is in addition to what this command does for <code dir="ltr">SHUTDOWN IMMEDIATE</code>. Transactions on other instances do not block this operation. If you omit the <code dir="ltr">LOCAL</code> option, then this operation waits until transactions on all other instances that started before the shutdown was issued either commit or rollback.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CBBJEDFI"></a>
<div id="RACAD810" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting and Stopping with Oracle Enterprise Manager</h3>
<p>See the <a class="olink TDPRC193" href="../../rac.112/e17264/adminrac.htm#TDPRC193"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for step-by-step instructions on using <a id="sthref246"></a>Oracle Enterprise Manager to start or stop a cluster database instance or a cluster database.</p>
</div>
<!-- class="sect2" -->
<a id="CBBBHBDG"></a>
<div id="RACAD811" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting Up and Shutting Down with SQL*Plus</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This section assumes you are using an SPFILE.</div>
<p>If you want to start or stop just one instance and you are connected to your local node, you should first ensure that your current environment includes the SID for the local instance. Note that any subsequent commands in your session, whether inside or outside a SQL*Plus session, are associated with that same SID.</p>
<p>To start or shutdown your <a id="sthref247"></a><a id="sthref248"></a>local instance, initiate a SQL*Plus session and connect with the <code dir="ltr">SYSDBA</code> or <code dir="ltr">SYSOPER</code> privilege and then issue the required command. For example to start and mount an instance on your local node, run the following commands in your SQL*Plus session:</p>
<pre dir="ltr">
   CONNECT / AS SYSDBA 
   STARTUP MOUNT
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you use Oracle ASM disk groups, use the <code dir="ltr"><a id="sthref249"></a><a id="sthref250"></a><a id="sthref251"></a>SYSASM</code> privilege instead of the <code dir="ltr">SYSDBA</code> privilege to connect to and administer the Oracle ASM instances. See the <a class="olink OSTMG02600" href="../../server.112/e18951/asminst.htm#OSTMG02600"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information.</div>
<p>You can start multiple <a id="sthref252"></a><a id="sthref253"></a>instances from a single SQL*Plus session on one node using Oracle Net Services. Connect to each instance in turn by using a Net Services connection string, typically an instance-specific alias from your <code dir="ltr">TNSNAMES.ORA</code> file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To ensure that you connect to the correct instance, you must use an alias in the connect string that is associated with just one instance. If you use an alias to a service or with multiple addresses, you may not be connected to your intended instance.</div>
<p>For example, you can use a SQL*Plus session on a local node to perform a transactional shutdown for two instances on remote nodes by connecting to each in turn using the instance's individual alias name. Assume the alias name for the first instance is <code dir="ltr">db1</code> and that the alias for the second instance is <code dir="ltr">db2</code>. Connect to the first instance and shut it down as follows:</p>
<pre dir="ltr">
   <a id="sthref254"></a>CONNECT /@db1 AS SYSDBA
   SHUTDOWN TRANSACTIONAL
</pre>
<p>Then connect to and shutdown the second instance by entering the following from your SQL*Plus session:</p>
<pre dir="ltr">
   CONNECT /@db2 AS SYSDBA 
   SHUTDOWN TRANSACTIONAL
</pre>
<p>It is not possible to start or stop multiple instances, simultaneously, with SQL*Plus, so you cannot start or stop all of the instances for a cluster database with a single SQL*Plus command. You may want to create a script that connects to each instance in turn and start it up and shut it down. However, you must maintain this script manually if you add or drop instances.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQPUG" href="../../server.112/e16604/toc.htm"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for information about other startup and shut down keywords, such as <code dir="ltr">NOMOUNT</code>, <code dir="ltr">MOUNT</code>, <code dir="ltr">IMMEDIATE</code>, and so on</div>
</div>
<!-- class="sect2" -->
<a id="CBBGGBJD"></a>
<div id="RACAD812" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting Up and Shutting Down with SRVCTL</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This section assumes that you are using an SPFILE for your database.</div>
<p><a id="sthref255"></a><a id="sthref256"></a><a id="sthref257"></a><a id="sthref258"></a><a id="sthref259"></a><a id="sthref260"></a><a id="sthref261"></a>Enter the following SRVCTL syntax from the command line, providing the required database name and instance name, or include multiple instance names to start multiple specific instances:</p>
<p>To start administrator-managed databases, enter a comma-delimited list of instance names:</p>
<pre dir="ltr">
<a id="sthref262"></a>$ srvctl start instance -d <span class="codeinlineitalic">db_unique_name</span> -i <span class="codeinlineitalic">instance_name_list</span> [-o <span class="codeinlineitalic">start_options</span>]
</pre>
<p>In Windows you must enclose a comma-delimited list in double quotation marks (<code dir="ltr">""</code>).</p>
<p>To start policy-managed databases, enter a single node name:</p>
<pre dir="ltr">
$ srvctl start instance -d <span class="codeinlineitalic">db_unique_name</span> -n <span class="codeinlineitalic">node_name</span> [-o <span class="codeinlineitalic">start_options</span>]
</pre>
<p>Note that this command also starts all enabled and non-running services that have <code dir="ltr">AUTOMATIC</code> management policy, and for which the database role matches one of the service's roles.</p>
<p>To stop one or more instances, enter the following SRVCTL syntax from the command line:</p>
<pre dir="ltr">
<a id="sthref263"></a>$ srvctl stop instance -d <span class="codeinlineitalic">db_unique_name</span> [ -i "<span class="codeinlineitalic">instance_name_list</span>" | 
  -n <span class="codeinlineitalic">node_name</span> ] [ -o <span class="codeinlineitalic">stop_options</span> ]
</pre>
<p>You can enter either a comma-delimited list of instance names to stop several instances or you can enter a node name to stop one instance. In Windows you must enclose a comma-delimited list in double quotation marks (<code dir="ltr">""</code>).</p>
<p>This command also stops the services related to the terminated instances on the nodes where the instances were running. As an example, the following command shuts down the two instances, <code dir="ltr">orcl3</code> and <code dir="ltr">orcl4</code>, on the <code dir="ltr">orcl</code> database using the <code dir="ltr">immediate</code> stop option:</p>
<pre dir="ltr">
$ srvctl stop instance -d orcl -i "orcl3,orcl4" -o immediate
</pre>
<p>To start or stop your entire cluster database, that is, all of the instances and its enabled services, enter the following SRVCTL commands:</p>
<pre dir="ltr">
<a id="sthref264"></a>$ srvctl start database -d <span class="italic">db_unique_name</span> [-o <span class="codeinlineitalic">start_options</span>]
</pre>
<pre dir="ltr">
<a id="sthref265"></a>$ srvctl stop database -d <span class="italic">db_unique_name</span> [-o <span class="codeinlineitalic">stop_options</span>]
</pre>
<p>The following SRVCTL command, for example, mounts all of the non-running instances of an Oracle RAC database:</p>
<pre dir="ltr">
$ srvctl start database -d orcl -o mount
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="srvctladmin.htm#CHDEBCFF">Appendix A, "Server Control Utility Reference"</a> for information about SRVCTL options and information about other administrative tasks that you can perform with SRVCTL</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHIEAJJ"></a>
<div id="RACAD920" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Verifying That Instances <a id="sthref266"></a>are Running<a id="sthref267"></a></h2>
<p><a id="sthref268"></a>To verify that instances are running, on any node from a SQL*Plus prompt enter the following, where <code dir="ltr"><span class="codeinlineitalic">password</span></code> is the password:</p>
<pre dir="ltr">
CONNECT SYS/as SYSDBA
Enter password: <span class="italic">password</span>
SELECT * FROM <a id="sthref269"></a><a id="sthref270"></a>V$ACTIVE_INSTANCES;
</pre>
<p>This query returns output similar to the following:</p>
<pre dir="ltr">
INST_NUMBER INST_NAME    
-----------  ----------------- 
1            db1-sun:db1  
2            db2-sun:db2  
3            db3-sun:db3  
</pre>
<p>The output columns for this example are shown in <a href="#g58991">Table 3-2</a>.</p>
<div id="RACAD7684" class="tblformal">
<p class="titleintable"><a id="sthref271"></a><a id="g58991"></a>Table 3-2 Descriptions of V$ACTIVE_INSTANCES Columns</p>
<table class="cellalignment429" title="Descriptions of V$ACTIVE_INSTANCES Columns " summary="Descriptions of V$ACTIVE_INSTANCES Columns" dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t21">Column</th>
<th class="cellalignment430" id="r1c2-t21">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t21" headers="r1c1-t21">
<p><code dir="ltr">INST_NUMBER</code></p>
</td>
<td class="cellalignment431" headers="r2c1-t21 r1c2-t21">
<p>Identifies the instance number.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t21" headers="r1c1-t21">
<p><code dir="ltr">INST_NAME</code></p>
</td>
<td class="cellalignment431" headers="r3c1-t21 r1c2-t21">
<p>Identifies the host name and instance name as <code dir="ltr"><span class="codeinlineitalic">host_name</span></code>:<code dir="ltr"><span class="codeinlineitalic">instance_name</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect1" -->
<a id="CACIAJHB"></a>
<div id="RACAD7293" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Terminating Sessions On a Specific Cluster Instance<a id="sthref272"></a><a id="sthref273"></a><a id="sthref274"></a><a id="sthref275"></a></h2>
<p>You can use the <code dir="ltr">ALTER SYSTEM KILL SESSION</code> statement to <a id="sthref276"></a>terminate a session on a specific instance. When a session is terminated, any active <a id="sthref277"></a>transactions of the session are rolled back, and <a id="sthref278"></a>resources held by the session (such as locks and memory areas) are immediately released and available to other sessions.</p>
<p>Using this statement enables you to maintain strict application <a id="sthref279"></a>service-level agreements in Oracle RAC environments. Often, the goal of a service-level agreement is to execute a transaction in a specified time limit. In an Oracle RAC environment, this may require terminating a transaction on an instance and retrying the transaction on another instance within a specified time frame.</p>
<p>To terminate sessions, follow these steps:</p>
<ol>
<li>
<p>Query the value of the <code dir="ltr">INST_ID</code> column in the <a id="sthref280"></a><a id="sthref281"></a><code dir="ltr">GV$SESSION</code> dynamic performance view to identify which session to terminate.</p>
</li>
<li>
<p>Issue the <code dir="ltr">ALTER SYSTEM KILL SESSION</code> and specify the session index number (SID) and serial number of a session that you identified with the <code dir="ltr">GV$SESSION</code> dynamic performance view.</p>
<pre dir="ltr">
KILL SESSION '<span class="italic">integer1</span>, <span class="italic">integer2</span>[, @<span class="italic">integer3</span>]'
</pre>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">integer1</span></code>, specify the value of the SID column.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">integer2</span></code>, specify the value of the SERIAL# column.</p>
</li>
<li>
<p>For the optional <code dir="ltr"><span class="codeinlineitalic">integer3</span></code>, specify the ID of the instance where the session to be killed exists. You can find the instance ID by querying the <code dir="ltr">GV$</code> tables.</p>
</li>
</ul>
<p>To use this statement, your instance must have the database open, and your session and the session to be terminated must be on the same instance unless you specify <code dir="ltr"><span class="codeinlineitalic">integer3</span></code>.</p>
</li>
</ol>
<p>If the session is performing some activity that must be completed, such as waiting for a reply from a remote database or rolling back a transaction, then Oracle Database waits for this activity to complete, marks the session as terminated, and then returns control to you. If the waiting lasts a minute, then Oracle Database marks the session to be terminated and returns control to you with a message that the session is marked to be terminated. The <a id="sthref282"></a>PMON background process then marks the session as terminated when the activity is complete.</p>
<p>The following examples provide three scenarios in which a user identifies and terminates a specific session. In each example, the SYSDBA first queries the <a id="sthref283"></a><a id="sthref284"></a><code dir="ltr">GV$SESSION</code> view for the <code dir="ltr">SCOTT</code> user's session to identify the session to terminate, and then runs the <code dir="ltr">ALTER SYSTEM KILL SESSION</code> statement to terminate the session on the instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPPT367" href="../../server.112/e10822/tdppt_realtime.htm#TDPPT367"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for examples of these procedures using Oracle Enterprise Manager</div>
<dl>
<dd><a id="RACAD8327"></a><a id="sthref285"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;Identify and terminate the session on an busy instance</dt>
<dd>
<p>In this example, assume that the executing session is <code dir="ltr">SYSDBA</code> on the instance <code dir="ltr">INST_ID=1</code>. The <code dir="ltr">ORA-00031</code> message is returned because some activity must be completed before the session can be terminated.</p>
<pre dir="ltr">
SQL&gt; SELECT SID, SERIAL#, INST_ID FROM GV$SESSION WHERE USERNAME='SCOTT';
 
       SID    SERIAL#    INST_ID
---------- ---------- ----------
        80          4          2
 
SQL&gt; ALTER SYSTEM KILL SESSION '80, 4, @2';
alter system kill session '80, 4, @2'
*
ERROR at line 1:
ORA-00031: session marked for kill
SQL&gt;
</pre></dd>
<dd><a id="RACAD8328"></a><a id="sthref286"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;Identify and terminate the session on an idle instance</dt>
<dd>
<p>In this example, assume that the executing session is <code dir="ltr">SYSDBA</code> on the instance <code dir="ltr">INST_ID=1</code>. The session on instance <code dir="ltr">INST_ID=2</code> is terminated immediately when Oracle Database executes the statement within 60 seconds.</p>
<pre dir="ltr">
SQL&gt; SELECT SID, SERIAL#, INST_ID FROM GV$SESSION WHERE USERNAME='SCOTT';
 
       SID    SERIAL#    INST_ID
---------- ---------- ----------
        80          6          2
 
SQL&gt; ALTER SYSTEM KILL SESSION '80, 6, @2';

System altered.

SQL&gt; 
</pre></dd>
<dd><a id="RACAD8329"></a><a id="sthref287"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;Using the IMMEDIATE parameter</dt>
<dd>
<p>The following example includes the optional <code dir="ltr">IMMEDIATE</code> clause to immediately terminate the session without waiting for outstanding activity to complete.</p>
<pre dir="ltr">
SQL&gt; SELECT SID, SERIAL#, INST_ID FROM GV$SESSION WHERE USERNAME='SCOTT';
 
       SID    SERIAL#    INST_ID
---------- ---------- ----------
        80          8          2
 
SQL&gt; ALTER SYSTEM KILL SESSION '80, 8, @2' IMMEDIATE;
 
System altered.
 
SQL&gt; 
</pre></dd>
</dl>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11192" href="../../server.112/e25494/manproc.htm#ADMIN11192"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about terminating sessions</div>
</div>
<!-- class="sect1" -->
<a id="BCEFICEE"></a>
<div id="RACAD020" class="sect1"><a id="CIHDDAGG"></a>
<h2 class="sect1">Overview of Initialization Parameter Files in Oracle RAC</h2>
<p>When you create the database, Oracle Database creates an <a id="sthref288"></a><a id="sthref289"></a>SPFILE in the file location that you specify. This location can be an Oracle ASM disk group, a <a href="rac_glossary.htm#CHDDAHDH"><span class="xrefglossterm">cluster file system</span></a>, or a shared raw device. If you manually create your database, then Oracle recommends that you <a id="sthref290"></a><a id="sthref291"></a>create an SPFILE from an initialization <a id="sthref292"></a>parameter file (PFILE).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle RAC uses a traditional PFILE only if an SPFILE does not exist or if you specify <code dir="ltr">PFILE</code> in your <code dir="ltr">STARTUP</code> command. Oracle recommends that you use an SPFILE to simplify administration, to maintain parameter setting consistency, and to guarantee parameter setting persistence across database shutdown and startup events. In addition, you can configure RMAN to back up your SPFILE.</div>
<p>All instances in the cluster database use the same SPFILE at startup. Because the SPFILE is a binary file, do not directly edit the SPFILE with an editor. Instead, change <a id="sthref293"></a>SPFILE parameter settings using Oracle Enterprise Manager or <code dir="ltr">ALTER SYSTEM</code> SQL statements.</p>
<p>When creating an SPFILE, if you include the <a id="sthref294"></a><a id="sthref295"></a><a id="sthref296"></a><a id="sthref297"></a><a id="sthref298"></a><code dir="ltr">FROM MEMORY</code> clause (for example, <code dir="ltr">CREATE PFILE FROM MEMORY</code> or <code dir="ltr">CREATE SPFILE FROM MEMORY</code>), then the <code dir="ltr">CREATE</code> statement creates a PFILE or SPFILE using the current system-wide parameter settings. In an Oracle RAC environment, the created file contains the parameter settings from each instance. Because the <code dir="ltr">FROM MEMORY</code> clause requires all other instances to send their parameter settings to the instance that is trying to create the parameter file, the total execution time depends on the number of instances, the number of parameter settings on each instance, and the amount of data for these settings.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#i53151">Setting SPFILE Parameter Values for Oracle RAC</a></p>
</li>
<li>
<p><a href="#CHDHFIGC">Parameter File Search Order in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CBBGCFIJ">Backing Up the Server Parameter File</a></p>
</li>
</ul>
<a id="i53151"></a>
<div id="RACAD815" class="sect2">
<h3 class="sect2">Setting SPFILE Parameter Values for Oracle RAC</h3>
<p><a id="sthref299"></a>You can change SPFILE settings with Oracle Enterprise Manager or by using the <code dir="ltr">SET</code> clause of the <code dir="ltr">ALTER SYSTEM</code> statement.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Modifying the <a id="sthref300"></a>SPFILE using tools other than Oracle Enterprise Manager or SQL*Plus can corrupt the file and prevent database startup. To repair the file, you might be required to create a PFILE and then regenerate the SPFILE.</div>
<p>The examples in this section appear in ASCII text although the SPFILE is a binary file. Assume that you start an instance with an SPFILE containing the following entries:</p>
<pre dir="ltr">
*.OPEN_CURSORS=500
prod1.OPEN_CURSORS=1000
</pre>
<p>The value before the period (.) in an SPFILE entry identifies the instance to which the particular parameter value belongs. When an asterisk (*) precedes the period, the value is applied to all instances that do not have a subsequent, individual value listed in the SPFILE.</p>
<p>For the instance with the Oracle system identifier (SID) <code dir="ltr">prod1</code>, the <code dir="ltr">OPEN_CURSORS</code> parameter is set to <code dir="ltr">1000</code> even though it has a database-wide setting of <code dir="ltr">500</code>. Parameter file entries that have the asterisk (*) wildcard character only affect the instances without an instance-specific entry. This gives you control over parameter settings for instance <code dir="ltr">prod1</code>. These two types of settings can appear in any order in the parameter file.</p>
<p>If another DBA runs the following statement, then Oracle Database updates the setting on all instances except the instance with SID <code dir="ltr">prod1</code>:</p>
<pre dir="ltr">
ALTER SYSTEM SET OPEN_CURSORS=1500 sid='*' SCOPE=MEMORY;
</pre>
<p>Then if you run the following statement on another instance, the instance with sid <code dir="ltr">prod1</code> also assumes the new setting of <code dir="ltr">2000</code>:</p>
<pre dir="ltr">
ALTER SYSTEM SET OPEN_CURSORS=2000 sid='*' SCOPE=MEMORY;
</pre>
<p>In the following example, the server parameter file contains these entries:</p>
<pre dir="ltr">
<span class="italic">prod1</span>.OPEN_CURSORS=1000
*.OPEN_CURSORS=500
</pre>
<p>Run the following statement to make Oracle Database disregard the first entry from the server parameter file:</p>
<pre dir="ltr">
ALTER SYSTEM RESET OPEN_CURSORS SCOPE=SPFILE;
</pre>
<p>Run the following statement to reset a parameter to its default value for instance <code dir="ltr">prod1</code> only:</p>
<pre dir="ltr">
ALTER SYSTEM RESET OPEN_CURSORS SCOPE=SPFILE SID='prod1';
</pre></div>
<!-- class="sect2" -->
<a id="CHDHFIGC"></a>
<div id="RACAD7294" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Parameter File Search Order in Oracle RAC</h3>
<p>Oracle Database searches for your <a id="sthref301"></a>parameter file in a particular order depending on your platform.</p>
<p>On Linux and UNIX platforms, the search order is as follows:</p>
<ol>
<li>
<p><code dir="ltr">$ORACLE_HOME/dbs/spfile</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code><code dir="ltr">.ora</code></p>
</li>
<li>
<p><code dir="ltr">$ORACLE_HOME/dbs/spfile.ora</code></p>
</li>
<li>
<p><code dir="ltr">$ORACLE_HOME/dbs/init</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code><code dir="ltr">.ora</code></p>
</li>
</ol>
<p>On Windows platforms, the search order is as follows:</p>
<ol>
<li>
<p><code dir="ltr">%ORACLE_HOME%\database\spfile</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code><code dir="ltr">.ora</code></p>
</li>
<li>
<p><code dir="ltr">%ORACLE_HOME%\database\spfile.ora</code></p>
</li>
<li>
<p><code dir="ltr">%ORACLE_HOME%\database\init</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code><code dir="ltr">.ora</code></p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you do not use the default <a id="sthref302"></a><a id="sthref303"></a>SPFILE names because all instances must use the same file and they all have different SIDs. Instead, store the SPFILE on Oracle ASM. If you store the SPFILE on a cluster file system, then use the following naming convention for the SPFILE: <code dir="ltr">$ORACLE_HOME/dbs/spfile</code><code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code><code dir="ltr">.ora</code>. Create a PFILE named <code dir="ltr">$ORACLE_HOME/dbs/init</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code><code dir="ltr">.ora</code> that contains the name <code dir="ltr">SPFILE=</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">/dbs/spfile</code><code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code><code dir="ltr">.ora</code>.</div>
</div>
<!-- class="sect2" -->
<a id="CBBGCFIJ"></a>
<div id="RACAD819" class="sect2">
<h3 class="sect2">Backing Up the Server Parameter File</h3>
<p><a id="sthref304"></a>Oracle recommends that you regularly back up the <a id="sthref305"></a><a id="sthref306"></a>server parameter file for recovery purposes. Do this using <a id="sthref307"></a>Oracle Enterprise Manager (as described in the <a class="olink TDPRC298" href="../../rac.112/e17264/configwlm.htm#TDPRC298"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a>) or use the <a id="sthref308"></a><code dir="ltr">CREATE PFILE</code> statement. For example:</p>
<pre dir="ltr">
CREATE PFILE='?/dbs/init<span class="italic">dbname</span>.ora'
FROM SPFILE='/dev/vx/rdsk/oracle_dg/dbspfile'
</pre>
<p><a id="sthref309"></a><a id="sthref310"></a><a id="sthref311"></a>You can use Recovery Manager (RMAN) to create backups of the server parameter file. You can also recover an <a id="sthref312"></a>SPFILE by starting an instance using a client-side initialization parameter file. Then re-create the server parameter file using the <code dir="ltr">CREATE SPFILE</code> statement. Note that if the parameter file that you use for this operation was for a single instance, then the parameter file does not contain instance-specific values, even those that must be unique in Oracle RAC instances. Therefore, ensure that your parameter file contains the appropriate settings as described earlier in this chapter.</p>
<p>To ensure that your SPFILE (and control files) are automatically backed up by RMAN during typical backup operations, use Oracle Enterprise Manager or the RMAN <code dir="ltr">CONTROLFILE AUTOBACKUP</code> statement to enable the RMAN autobackup feature</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink TDPRC0711" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=TDPRC0711"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> to perform backup jobs using Oracle Enterprise Manager</p>
</li>
<li>
<p><a class="olink SQLRF013" href="../../server.112/e41084/statements_6.htm#SQLRF013"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code dir="ltr">CREATE SPFILE</code> statement</p>
</li>
<li>
<p><a class="olink RCMRF90084" href="../../backup.112/e10643/rcmsynta010.htm#RCMRF90084"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about the <code dir="ltr">CONTROLFILE AUTOBACKUP</code> statement</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CBBCDFIJ"></a>
<div id="RACAD017" class="sect1">
<h2 class="sect1">Initialization Parameter Use in Oracle RAC</h2>
<p>By default, most parameters are set to a default value and this value is the same across all instances. However, many initialization parameters can also have different values on different instances as described in <a href="#CACFJFJB">Table 3-3</a>. Other parameters <span class="italic">must</span> either be unique or identical as described in the following sections</p>
<ul>
<li>
<p><a href="#i21705">Parameters That Must Have Identical Settings on All Instances</a></p>
</li>
<li>
<p><a href="#i21775">Parameters That Have Unique Settings on All Instances</a></p>
</li>
<li>
<p><a href="#CACFBJHD">Parameters That Should Have Identical Settings on All Instances</a></p>
</li>
</ul>
<p><a href="#CACFJFJB">Table 3-3</a> summarizes the initialization <a id="sthref313"></a><a id="sthref314"></a>parameters used specifically for Oracle RAC databases.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../../server.112/e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for additional information about these and other initialization parameters</div>
<div id="RACAD7685" class="tblformalwide">
<p class="titleintable"><a id="sthref315"></a><a id="CACFJFJB"></a>Table 3-3 Initialization Parameters Specific to Oracle RAC</p>
<table class="cellalignment432" title="Initialization Parameters Specific to Oracle RAC " summary="This table summarizes considerations for using specific initialization parameters in Oracle RAC databases" dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t29">Parameter</th>
<th class="cellalignment430" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t29" headers="r1c1-t29">
<p><a class="olink REFRN10001" href="../../server.112/e40402/initparams007.htm#REFRN10001"><code dir="ltr">ACTIVE_INSTANCE_COUNT</code></a><a id="sthref316"></a></p>
</td>
<td class="cellalignment431" headers="r2c1-t29 r1c2-t29">
<p>This initialization parameter is deprecated in Oracle RAC 11<span class="italic">g</span> release 2 (11.2). Instead, use a service with one preferred and one available instance.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t29" headers="r1c1-t29">
<p><a id="sthref317"></a><a class="olink REFRN10279" href="../../server.112/e40402/initparams013.htm#REFRN10279"><code dir="ltr">ASM_PREFERRED_READ_FAILURE_GROUPS</code></a><a id="sthref318"></a></p>
</td>
<td class="cellalignment431" headers="r3c1-t29 r1c2-t29">
<p>Specifies a set of disks to be the preferred disks from which to read mirror data copies. The values you set for this parameter are instance specific and need not be the same on all instances.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t29" headers="r1c1-t29">
<p><a id="sthref319"></a><a class="olink REFRN10015" href="../../server.112/e40402/initparams028.htm#REFRN10015"><code dir="ltr">CLUSTER_DATABASE</code></a></p>
</td>
<td class="cellalignment431" headers="r4c1-t29 r1c2-t29">
<p>Enables a database to be started in cluster mode. Set this parameter to <code dir="ltr">TRUE</code>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r5c1-t29" headers="r1c1-t29">
<p><a id="sthref320"></a><a class="olink REFRN10016" href="../../server.112/e40402/initparams029.htm#REFRN10016"><code dir="ltr">CLUSTER_DATABASE_INSTANCES</code></a></p>
</td>
<td class="cellalignment431" headers="r5c1-t29 r1c2-t29">
<p>Oracle RAC uses this parameter to allocate adequate memory resources. It must be set to the same value on all instances.</p>
<ul>
<li>
<p>For policy-managed databases, Oracle internally sets this parameter to 16</p>
</li>
<li>
<p>For administrator-managed databases, Oracle internally sets it to the number of configured Oracle RAC instances</p>
</li>
</ul>
<p>You can set this parameter to a value that is <span class="italic">greater than</span> the current number of instances, if you are planning to add instances. For policy-managed databases, you should set this parameter to a higher value only if you intend to run a database with more than 16 instances. In this case, set the parameter to the expected maximum number of instances on which this database will run.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r6c1-t29" headers="r1c1-t29">
<p><a class="olink REFRN10017" href="../../server.112/e40402/initparams030.htm#REFRN10017"><code dir="ltr">CLUSTER_INTERCONNECTS</code></a></p>
</td>
<td class="cellalignment431" headers="r6c1-t29 r1c2-t29">
<p>Specifies an alternative cluster interconnect for the private network when there are multiple interconnects. The <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter is used only in Linux and UNIX environments where UDP IPC is enabled.</p>
<p><span class="bold">Notes:</span></p>
<ul>
<li>
<p>Oracle recommends that all Oracle databases and Oracle Clusterware use the same interconnect network. If an Oracle database runs on a separate network from Oracle Clusterware, then the timeout on error is 900s.</p>
</li>
<li>
<p>Oracle does not recommend setting the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter except in certain situations. See <a href="#BGBBDEDG">"Administering Multiple Cluster Interconnects on Linux and UNIX Platforms"</a> for more details.</p>
</li>
<li>
<p>This parameter is stored in the Grid Plug and Play profile in a Grid Plug and Play environment.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r7c1-t29" headers="r1c1-t29">
<p><a id="sthref321"></a><code dir="ltr">DB_NAME</code></p>
</td>
<td class="cellalignment431" headers="r7c1-t29 r1c2-t29">
<p>If you set a value for <code dir="ltr">DB_NAME</code> in instance-specific parameter files, the setting must be identical for all instances.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r8c1-t29" headers="r1c1-t29">
<p><a id="sthref322"></a><a class="olink REFRN10049" href="../../server.112/e40402/initparams080.htm#REFRN10049"><code dir="ltr">DISPATCHERS</code></a></p>
</td>
<td class="cellalignment431" headers="r8c1-t29 r1c2-t29">
<p>Set the <code dir="ltr">DISPATCHERS</code> parameter to enable a <a id="sthref323"></a>shared server configuration, that is a server that is configured to enable many user processes to share very few server processes. With shared server configurations, many user processes connect to a dispatcher. The <code dir="ltr">DISPATCHERS</code> parameter may contain many attributes.</p>
<p>Oracle recommends that you configure at least the <code dir="ltr">PROTOCOL</code> and <code dir="ltr">LISTENER</code> attributes. <code dir="ltr">PROTOCOL</code> specifies the network protocol for which the dispatcher process generates a listening end point. <code dir="ltr">LISTENER</code> specifies an alias name for the Oracle Net Services listeners. Set the alias to a name that is resolved through a naming method such as a <code dir="ltr">tnsnames.ora</code> file. The <a id="sthref324"></a><code dir="ltr">tnsnames.ora</code> file contains net service names. Clients, nodes, and the Oracle Performance Manager node need this file. Oracle Enterprise Manager does not require <code dir="ltr">tnsnames.ora</code> entries on the client for Database Control or Grid Control.</p>
<p><span class="bold">See Also:</span> <a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for complete information about configuring the <code dir="ltr">DISPATCHERS</code> parameter and its attributes and for configuring the shared server</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r9c1-t29" headers="r1c1-t29">
<p><a id="sthref325"></a><a class="olink REFRN10259" href="../../server.112/e40402/initparams096.htm#REFRN10259"><code dir="ltr">GCS_SERVER_PROCESSES</code></a></p>
</td>
<td class="cellalignment431" headers="r9c1-t29 r1c2-t29">
<p>This static parameter specifies the initial number of server processes for an Oracle RAC instance's <a id="sthref326"></a>Global Cache Service (GCS). The GCS processes manage the routing of interinstance traffic among Oracle RAC instances. The default number of GCS server processes is calculated based on system resources with a minimum setting of 2. For systems with one CPU, there is one GCS server process. For systems with two to eight CPUs, there are two GCS server processes. For systems with more than eight CPUs, the number of GCS server processes equals the number of CPUs divided by 4, dropping any fractions. For example, if you have 10 CPUs, then 10 divided by 4 means that your system has 2 GCS processes. You can set this parameter to different values on different instances.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r10c1-t29" headers="r1c1-t29">
<p><a class="olink REFRN10072" href="../../server.112/e40402/initparams105.htm#REFRN10072"><code dir="ltr">INSTANCE_NAME</code></a><a id="sthref327"></a></p>
</td>
<td class="cellalignment431" headers="r10c1-t29 r1c2-t29">
<p>Specifies the unique name of an instance. Clients can use this name to force their session to be connected to a specific instance in the cluster. The format of the <code dir="ltr">INSTANCE_NAME</code> parameter is generally <code dir="ltr"><span class="codeinlineitalic">db_unique_name_instance_number</span></code>, such as <code dir="ltr">orcldb_2</code>.</p>
<p><span class="bold">Note:</span> In Grid Plug and Play environments, the <code dir="ltr">INSTANCE_NAME</code> parameter is not required and defaults to <code dir="ltr"><span class="codeinlineitalic">db_unique_name_instance_number</span></code> if not specified.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r11c1-t29" headers="r1c1-t29">
<p><a class="olink REFRN10272" href="../../server.112/e40402/initparams220.htm#REFRN10272"><code dir="ltr">RESULT_CACHE_MAX_SIZE</code></a><a id="sthref328"></a></p>
</td>
<td class="cellalignment431" headers="r11c1-t29 r1c2-t29">
<p>In a clustered database, you can either set <code dir="ltr">RESULT_CACHE_MAX_SIZE=0</code> on every instance to disable the <a id="sthref329"></a><a href="rac_glossary.htm#CHDIEHGH"><span class="xrefglossterm">result cache</span></a>, or use a nonzero value on every instance to enable the result cache. To switch between enabled and disabled result cache requires that you restart every instance:</p>
<ul>
<li>
<p><span class="bold">Enabling the <a id="sthref330"></a>result cache:</span> Set <code dir="ltr">RESULT_CACHE_MAX_SIZE</code> to a value greater than <code dir="ltr">0</code>, or leave the parameter unset. You can size the cache differently on individual instances.</p>
</li>
<li>
<p><span class="bold">Disabling the <a id="sthref331"></a>result cache:</span> Set <code dir="ltr">RESULT_CACHE_MAX_SIZE=0</code> on all instances to disable the result cache. If you set <code dir="ltr">RESULT_CACHE_MAX_SIZE=0</code> upon startup of any one instance, then you must set the parameter to zero on all instance startups because disabling the result cache must done clusterwide. Disabling the result cache on some instances may lead to incorrect results.</p>
</li>
</ul>
<p>If you do not set the <code dir="ltr">RESULT_CACHE_MAX_SIZE</code> parameter, the parameter resolves to a default, nonzero value.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r12c1-t29" headers="r1c1-t29">
<p><a id="sthref332"></a><a class="olink REFRN10194" href="../../server.112/e40402/initparams231.htm#REFRN10194"><code dir="ltr">SERVICE_NAMES</code></a></p>
</td>
<td class="cellalignment431" headers="r12c1-t29 r1c2-t29">
<p>When you use <a id="sthref333"></a>services, Oracle recommends that you do not set a value for the <a id="sthref334"></a><a id="sthref335"></a><code dir="ltr">SERVICE_NAMES</code> parameter but instead you should create cluster managed services through the Cluster Managed Services page in Oracle Enterprise Manager Database Control. This is because Oracle Clusterware controls the setting for this parameter for the services that you create and for the <a id="sthref336"></a>default database service. The service features described in <a href="hafeats.htm#BABIAICG">Chapter 5, "Introduction to Automatic Workload Management"</a> are not directly related to the features that Oracle provides when you set <code dir="ltr">SERVICE_NAMES</code>. In addition, setting a value for this parameter may override some benefits of using services.</p>
<p><span class="bold">Note:</span> Entries in the <code dir="ltr">SERVICE_NAMES</code> parameter may be used by client connections rather than the <code dir="ltr">INSTANCE_NAME</code> parameter value. The <code dir="ltr">SERVICE_NAMES</code> parameter may include one or more names and different instances may share one or more names with other instances, enabling a client to connect to either a specific instance or to any one of a set of instances, depending on the service name chosen in the connection string.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r13c1-t29" headers="r1c1-t29">
<p><a id="sthref337"></a><a class="olink REFRN10207" href="../../server.112/e40402/initparams247.htm#REFRN10207"><code dir="ltr">SPFILE</code></a></p>
</td>
<td class="cellalignment431" headers="r13c1-t29 r1c2-t29">
<p>When you use an SPFILE, all Oracle RAC database instances must use the SPFILE and the file must be on shared storage.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r14c1-t29" headers="r1c1-t29">
<p><a id="sthref338"></a><a class="olink REFRN10216" href="../../server.112/e40402/initparams257.htm#REFRN10216"><code dir="ltr">THREAD</code></a></p>
</td>
<td class="cellalignment431" headers="r14c1-t29 r1c2-t29">
<p>Specifies the number of the redo threads to be used by an instance. You can specify any available redo thread number if that thread number is enabled and is not used. If specified, this parameter must have unique values on all instances. The best practice is to use the <code dir="ltr">INSTANCE_NAME</code> parameter to specify redo log groups.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<a id="i21705"></a>
<div id="RACAD816" class="sect2">
<h3 class="sect2">Parameters That Must Have Identical Settings on All Instances</h3>
<p>Certain <a id="sthref339"></a>initialization <a id="sthref340"></a>parameters that are critical at database creation or that affect certain database operations must have the same value for every instance in an Oracle RAC database. Specify these parameter values in the SPFILE or in the individual PFILEs for each instance. The following list contains the parameters that must be identical on every instance:</p>
<br />
<a id="sthref341"></a><a class="olink REFRN10019" href="../../server.112/e40402/initparams035.htm#REFRN10019"><code dir="ltr">COMPATIBLE</code></a><br />
<a id="sthref342"></a><a class="olink REFRN10015" href="../../server.112/e40402/initparams028.htm#REFRN10015"><code dir="ltr">CLUSTER_DATABASE</code></a><br />
<a id="sthref343"></a><a class="olink REFRN10016" href="../../server.112/e40402/initparams029.htm#REFRN10016"><code dir="ltr">CLUSTER_DATABASE_INSTANCES</code></a><br />
<a id="sthref344"></a><a class="olink REFRN10021" href="../../server.112/e40402/initparams037.htm#REFRN10021"><code dir="ltr">CONTROL_FILES</code></a><br />
<a id="sthref345"></a><a class="olink REFRN10031" href="../../server.112/e40402/initparams050.htm#REFRN10031"><code dir="ltr">DB_BLOCK_SIZE</code></a><br />
<a id="sthref346"></a><a class="olink REFRN10036" href="../../server.112/e40402/initparams055.htm#REFRN10036"><code dir="ltr">DB_DOMAIN</code></a><br />
<a id="sthref347"></a><a class="olink REFRN10039" href="../../server.112/e40402/initparams058.htm#REFRN10039"><code dir="ltr">DB_FILES</code></a><br />
<a id="sthref348"></a><a class="olink REFRN10041" href="../../server.112/e40402/initparams064.htm#REFRN10041"><code dir="ltr">DB_NAME</code></a><br />
<a id="sthref349"></a><a class="olink REFRN10234" href="../../server.112/e40402/initparams065.htm#REFRN10234"><code dir="ltr">DB_RECOVERY_FILE_DEST</code></a><br />
<a id="sthref350"></a><a class="olink REFRN10235" href="../../server.112/e40402/initparams066.htm#REFRN10235"><code dir="ltr">DB_RECOVERY_FILE_DEST_SIZE</code></a><br />
<a id="sthref351"></a><a class="olink REFRN10242" href="../../server.112/e40402/initparams070.htm#REFRN10242"><code dir="ltr">DB_UNIQUE_NAME</code></a><br />
<a id="sthref352"></a><a class="olink REFRN10244" href="../../server.112/e40402/initparams107.htm#REFRN10244"><code dir="ltr">INSTANCE_TYPE</code></a> (RDBMS or ASM)<br />
<a id="sthref353"></a><a class="olink REFRN10156" href="../../server.112/e40402/initparams182.htm#REFRN10156"><code dir="ltr">PARALLEL_EXECUTION_MESSAGE_SIZE</code></a><br />
<a id="sthref354"></a><a class="olink REFRN10184" href="../../server.112/e40402/initparams212.htm#REFRN10184"><code dir="ltr">REMOTE_LOGIN_PASSWORDFILE</code></a><br />
<a id="sthref355"></a><a class="olink REFRN10224" href="../../server.112/e40402/initparams264.htm#REFRN10224"><code dir="ltr">UNDO_MANAGEMENT</code></a>
<p>The following parameters must be identical on every instance only if the parameter value is set to zero:</p>
<br />
<a id="sthref356"></a><code dir="ltr">DML_LOCKS</code><br />
<a id="sthref357"></a><code dir="ltr">RESULT_CACHE_MAX_SIZE</code></div>
<!-- class="sect2" -->
<a id="i21775"></a>
<div id="RACAD817" class="sect2">
<h3 class="sect2"><a id="sthref358"></a>Parameters That Have Unique Settings on All Instances</h3>
<p><a id="sthref359"></a>When it is necessary to set parameters that have unique settings on a <a id="sthref360"></a>policy-managed database, you can ensure that instances always use the same name on particular nodes by running the <code dir="ltr">srvctl modify instance -n</code> <code dir="ltr"><span class="codeinlineitalic">node_name</span></code> <code dir="ltr">-i</code> <code dir="ltr"><span class="codeinlineitalic">instance_name</span></code> command for each server that can be assigned to the database's server pool. Then a unique value of the parameter can be specified for <code dir="ltr"><span class="codeinlineitalic">instance_name</span></code> that is used whenever the database runs on <code dir="ltr"><span class="codeinlineitalic">node_name</span></code>.</p>
<p>Specify the <code dir="ltr"><a id="sthref361"></a>ORACLE_SID</code> environment variable, which consists of the database name and the number of the <code dir="ltr">INSTANCE_NAME</code> assigned to the instance.</p>
<p>Use the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter to specify an alternative interconnect to the one Oracle Clusterware is using for the private network. Each instance of the Oracle RAC database gets a unique value when setting the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BGBBDEDG">"Administering Multiple Cluster Interconnects on Linux and UNIX Platforms"</a> for more information about the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter</div>
<p>Oracle Database uses the <a id="sthref362"></a><code dir="ltr">INSTANCE_NUMBER</code> parameter to distinguish among instances at startup and the <a id="sthref363"></a><code dir="ltr">INSTANCE_NAME</code> parameter to assign redo log groups to specific instances. The instance name can take the form <code dir="ltr"><span class="codeinlineitalic">db_unique_name_instance_number</span></code> and when it has this form of name and number separated by an underscore, the number after the underscore is used as the <code dir="ltr">INSTANCE_NUMBER</code>. With Oracle Database 11.2 using Grid Plug and Play, you no longer have to explicitly assign instance numbers for policy-managed databases and the instance name defaults to <code dir="ltr"><span class="codeinlineitalic">db_unique_name_instance_number</span></code>, where Oracle Database assigns the instance number.</p>
<p>When you specify <a id="sthref364"></a><code dir="ltr">UNDO_TABLESPACE</code> with automatic undo management enabled, then set this parameter to a unique undo tablespace name for each instance.</p>
<p>If you use the <code dir="ltr">ROLLBACK_SEGMENTS</code> parameters, then Oracle recommends setting unique values for it by using the <code dir="ltr">SID</code> identifier in the SPFILE. However, you must set a unique value for <code dir="ltr">INSTANCE_NUMBER</code> for each instance and you cannot use a default value.</p>
<p>Using the <code dir="ltr">ASM_PREFERRED_READ_FAILURE_GROUPS</code> initialization parameter, you can specify a list of preferred read failure group names. The disks in those failure groups become the preferred read disks. Thus, every node can read from its local disks. This results in higher efficiency and performance and reduced network traffic. The setting for this parameter is instance-specific, and the values need not be the same on all instances.</p>
</div>
<!-- class="sect2" -->
<a id="CACFBJHD"></a>
<div id="RACAD818" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Parameters That Should Have Identical Settings on All Instances</h3>
<p>Oracle recommends that you set the values for the <a id="sthref365"></a>parameters in <a href="#CACBIBFA">Table 3-4</a> to the same value on all instances. Although you can have different settings for these parameters on different instances, setting each parameter to the same value on all instances simplifies administration.</p>
<div id="RACAD7686" class="tblformal">
<p class="titleintable"><a id="sthref366"></a><a id="CACBIBFA"></a>Table 3-4 Parameters That Should Have Identical Settings on All Instances</p>
<table class="cellalignment429" title="Parameters That Should Have Identical Settings on All Instances" summary="This table lists initialization parameters that should (but do not have to) be set the same way on all instances in the Oracle RAC environment." dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t31">Parameter</th>
<th class="cellalignment430" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t31" headers="r1c1-t31">
<p><a id="sthref367"></a><a class="olink REFRN10003" href="../../server.112/e40402/initparams009.htm#REFRN10003"><code dir="ltr">ARCHIVE_LAG_TARGET</code></a></p>
</td>
<td class="cellalignment431" headers="r2c1-t31 r1c2-t31">
<p>Different values for instances in your Oracle RAC database are likely to increase overhead because of additional automatic synchronization performed by the database processing.</p>
<p>When using Streams with your Oracle RAC database, the value should be greater than zero.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t31" headers="r1c1-t31">
<p><a id="sthref368"></a><a class="olink REFRN10080" href="../../server.112/e40402/initparams117.htm#REFRN10080"><code dir="ltr">LICENSE_MAX_USERS</code></a></p>
</td>
<td class="cellalignment431" headers="r3c1-t31 r1c2-t31">
<p>Because this parameter determines a database-wide limit on the number of users defined in the database, it is useful to have the same value on all instances of your database so you can see the current value no matter which instance you are using. Setting different values may cause Oracle Database to generate additional warning messages during instance startup, or cause commands related to database user management to fail on some instances.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t31" headers="r1c1-t31">
<p><a id="sthref369"></a><a class="olink REFRN10089" href="../../server.112/e40402/initparams128.htm#REFRN10089"><code dir="ltr">LOG_ARCHIVE_FORMAT</code></a></p>
</td>
<td class="cellalignment431" headers="r4c1-t31 r1c2-t31">
<p>If you do not use the same value for all your instances, then you unnecessarily complicate media recovery. The recovering instance expects the required archive log file names to have the format defined by its own value of <code dir="ltr">LOG_ARCHIVE_FORMAT</code>, regardless of which instance created the archive log files.</p>
<p>Databases that support Data Guard, either to send or receive archived redo log files, must use the same value of <code dir="ltr">LOG_ARCHIVE_FORMAT</code> for all instances.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r5c1-t31" headers="r1c1-t31">
<p><a id="sthref370"></a><a class="olink REFRN10207" href="../../server.112/e40402/initparams247.htm#REFRN10207"><code dir="ltr">SPFILE</code></a></p>
</td>
<td class="cellalignment431" headers="r5c1-t31 r1c2-t31">
<p>If this parameter does not identify the same file to all instances, then each instance may behave differently and unpredictably in fail over, load-balancing, and during normal operations. Additionally, a change you make to the SPFILE with an <code dir="ltr">ALTER SYSTEM SET</code> or <code dir="ltr">ALTER SYSTEM RESET</code> command is saved only in the SPFILE used by the instance where you run the command. Your change is not reflected in instances using different SPFILEs.</p>
<p>If the SPFILE values are different in instances for which the values were set by the server, then you should restart the instances that are not using the default SPFILE.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r6c1-t31" headers="r1c1-t31">
<p><a id="sthref371"></a><a class="olink REFRN10219" href="../../server.112/e40402/initparams260.htm#REFRN10219"><code dir="ltr">TRACE_ENABLED</code></a></p>
</td>
<td class="cellalignment431" headers="r6c1-t31 r1c2-t31">
<p>If you want diagnostic trace information to be always available for your Oracle RAC database, you must set <code dir="ltr">TRACE_ENABLED</code> to <code dir="ltr">TRUE</code> on all of your database instances. If you trace on only some of your instances, then diagnostic information might not be available when required should the only accessible instances be those with <code dir="ltr">TRACE_ENABLED</code> set to <code dir="ltr">FALSE</code>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r7c1-t31" headers="r1c1-t31">
<p><a id="sthref372"></a><a class="olink REFRN10225" href="../../server.112/e40402/initparams265.htm#REFRN10225"><code dir="ltr">UNDO_RETENTION</code></a></p>
</td>
<td class="cellalignment431" headers="r7c1-t31 r1c2-t31">
<p>By setting different values for <code dir="ltr">UNDO_RETENTION</code> in each instance, you are likely to reduce scalability and encounter unpredictable behavior following a failover. Therefore, you should carefully consider whether there are any benefits before you assign different values for this parameter to the instances in your Oracle RAC database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACJJGFE"></a>
<div id="RACAD8211" class="sect1">
<h2 class="sect1">Converting an Administrator-Managed Database to a Policy-Managed Database</h2>
<p>You can convert an <a id="sthref373"></a>administrator-managed database to a policy-managed database, as follows:</p>
<ol>
<li id="CACCGFAI">
<p>Check the current configuration of all services and the database (if you make a mistake and need to recover, then you can know what the configuration looked like when you began), as follows:</p>
<pre dir="ltr">
srvctl config database -d <span class="italic">db_unique_name</span>
srvctl config service -d <span class="italic">db_unique_name</span>
</pre></li>
<li>
<p>&nbsp;</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
By default, any named user may create a server pool. To restrict the operating system users that have this privilege, Oracle strongly recommends that you add specific users to the CRS Administrators list.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91105" href="../../rac.112/e41959/admin.htm#CWADD91105"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about adding users to the CRS Administrators list</div>
<p>Create a <a id="sthref374"></a>server pool for the policy-managed database (you must have CRS Administrator privileges to do this), as follows:</p>
<pre dir="ltr">
srvctl add srvpool -g <span class="italic">server_pool</span> -l 0 -u <span class="italic">n</span>
</pre>
<p>In the preceding command, <code dir="ltr"><span class="codeinlineitalic">n</span></code> is the number of servers you want in the server pool.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This step does not necessarily place servers in the newly-created server pool. If there are no servers in the Free pool from which the new server pool can allocate servers, for example, then you may have to use the <code dir="ltr">srvctl relocate server</code> command to <a id="sthref375"></a>relocate a server from another server pool.</div>
</li>
<li>
<p>Modify the database to be in the new server pool, as follows:</p>
<pre dir="ltr">
srvctl modify database -d <span class="italic">db_unique_name</span> -g <span class="italic">server_pool</span>
</pre></li>
<li>
<p>Check the status of the database to confirm that it is now policy managed by repeating the commands in step <a href="#CACCGFAI">1</a>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="srvctladmin.htm#CHDEBCFF">Appendix A, "Server Control Utility Reference"</a> for more information about these commands</div>
<p>Configure <a id="sthref376"></a>Oracle Enterprise Manager to recognize the change you made in the previous procedure, as follows:</p>
<ol>
<li>
<p>In order for Oracle Enterprise Manager Database Control to recognize the new database instances, you must change the instance name from <code dir="ltr"><span class="codeinlineitalic">db_unique_name#</span></code> to <code dir="ltr"><span class="codeinlineitalic">db_unique_name_#</span></code> (notice the additional underscore (_) before the number sign (#) character).</p>
</li>
<li>
<p>Rename the <a id="sthref377"></a><code dir="ltr">orapwd</code> file in the <code dir="ltr">dbs/database</code> directory (or create a new <code dir="ltr">orapwd</code> file by running the <code dir="ltr">orapwd</code> command).</p>
<p>By default, there is an <code dir="ltr">orapwd</code> file with the instance name appended to it, such as <code dir="ltr">orapwdORCL1</code>. You must change the name of the file to correspond to the instance name you changed in the previous step. For example, you must change <code dir="ltr">orapwdORCL1</code> to <code dir="ltr">orapwdORCL_1</code> or create a new <code dir="ltr">orapwd</code> file.</p>
</li>
<li>
<p>Run <code dir="ltr">emca</code> to reconfigure <a id="sthref378"></a>Oracle Enterprise Manager Database Control, as follows:</p>
<pre dir="ltr">
emca -config dbcontrol db -cluster
</pre></li>
</ol>
<p>You cannot directly convert a policy-managed database to an administrator-managed database. Instead, you can remove the policy-managed configuration using the <code dir="ltr">srvctl remove database</code> and <code dir="ltr">srvctl remove service</code> commands, and then register the same database as an administrator-managed database using the <code dir="ltr">srvctl add database</code> and <code dir="ltr">srvctl add instance</code> commands. Once you register the database and instance, you must use the <code dir="ltr">srvctl add service</code> command to add back the services as you removed them.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="srvctladmin.htm#i1001971">"SRVCTL Command Reference"</a> for more information about these commands</div>
<p><a id="sthref379"></a>Services for administrator-managed databases continue to be defined by the <code dir="ltr">PREFERRED</code> and <code dir="ltr">AVAILABLE</code> definitions. For policy-managed databases, a service is defined to a database server pool and can either be <a id="sthref380"></a><span class="italic">uniform</span> (running on all instances in the server pool) or <a id="sthref381"></a><span class="italic">singleton</span> (running on only one instance in the server pool). If you change the management policy of the database, then you must recreate the database services to be either uniform/singleton or <code dir="ltr">PREFERRED</code>/<code dir="ltr">AVAILABLE</code>, depending upon which database management policy you choose.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="hafeats.htm#BABHBDJD">"Service Deployment Options"</a> for more information about managing services</div>
</div>
<!-- class="sect1" -->
<a id="i20584"></a>
<div id="RACAD038" class="sect1">
<h2 class="sect1">Quiescing Oracle RAC Databases</h2>
<p><a id="sthref382"></a>The procedure for quiescing Oracle RAC <a id="sthref383"></a><a id="sthref384"></a>databases is identical to quiescing a noncluster database. You use the <a id="sthref385"></a><a id="sthref386"></a><a id="sthref387"></a><code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement from one instance. You cannot open the database from any instance while the database is in the process of being quiesced. When all non-DBA sessions become inactive, the <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement finishes, and the database is considered as in a quiesced state. In an Oracle RAC environment, this statement affects all instances, not just the one from which the statement is issued.</p>
<p>To successfully issue the <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement in an Oracle RAC environment, you must have the <a id="sthref388"></a>Database Resource Manager feature activated, and it must have been activated since instance startup for all instances in the cluster database. It is through the facilities of the Database Resource Manager that non-DBA sessions are prevented from becoming active. Also, while this statement is in effect, any attempt to change the current resource plan is queued until after the system is unquiesced.</p>
<p>These conditions apply to Oracle RAC:</p>
<ul>
<li>
<p>If you issued the <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement but Oracle Database has not finished processing it, you cannot open the database.</p>
</li>
<li>
<p>You cannot open the database if it is in a quiesced state.</p>
</li>
<li>
<p>The <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> and <code dir="ltr">ALTER SYSTEM UNQUIESCE</code> statements affect all instances in an Oracle RAC environment, not just the instance that issues the command.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use the quiesced state to take a <a id="sthref389"></a>cold backup. This is because Oracle Database background processes may still perform updates for Oracle Database internal purposes even while the database is in quiesced state. In addition, the file headers of online data files continue to look like they are being accessed. They do not look the same as if a clean shutdown were done. You can still take online backups while the database is in a quiesced state.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN10263" href="../../server.112/e25494/start.htm#ADMIN10263"><span class="italic">Oracle Database Administrator's Guide</span></a> for details on the quiesce database feature</p>
</li>
<li>
<p><a class="olink SQLRF00902" href="../../server.112/e41084/statements_2014.htm#SQLRF00902"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> syntax</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BGBBDEDG"></a>
<div id="RACAD7295" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Administering Multiple Cluster Interconnects on Linux and UNIX Platforms</h2>
<p>In Oracle RAC environments that run on Linux and UNIX platforms where UDP IPC is enabled, you can use the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter to specify an <a id="sthref390"></a><a id="sthref391"></a>alternative interconnect to the one Oracle Clusterware is using for the private network.</p>
<p>If you set <a id="sthref392"></a>multiple values for <code dir="ltr">CLUSTER_INTERCONNECTS</code>, then Oracle Database uses all of the interconnects that you specify, providing load balancing if all of the listed interconnects remain operational. You must use identical values, including the order in which the interconnects are listed, on all instances of your database when defining multiple interconnects with this parameter.</p>
<p>Oracle does not recommend setting the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter, which overrides the default interconnect settings at the operating system level. Instead, the best practice is to use operating system bonding techniques (also referred to as <a id="sthref393"></a>NIC (network interface card) bonding). See your platform-specific Oracle RAC installation guide for information about setting up NIC bonding at the operating system level.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CACBDEII">Recommendations for Setting the CLUSTER_INTERCONNECTS Parameter</a></p>
</li>
<li>
<p><a href="#CACJAHED">Usage Examples for the CLUSTER_INTERCONNECTS Parameter</a></p>
</li>
</ul>
<a id="CACBDEII"></a>
<div id="RACAD7296" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Recommendations for Setting the CLUSTER_INTERCONNECTS Parameter</h3>
<p>The <a id="sthref394"></a><a id="sthref395"></a><code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter requires an IP address. It enables you to specify multiple IP addresses, separated by colons. Oracle RAC network traffic is distributed between the specified IP addresses.</p>
<div class="infobox-note">
<p class="notep1">Notes:</p>
<ul>
<li>
<p>Oracle does not recommend setting the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter when using a policy-managed database.</p>
<p>If you must set the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter for a policy-managed database, then Oracle recommends that you use the <code dir="ltr">srvctl modify instance -n</code> <code dir="ltr"><span class="codeinlineitalic">node_name</span></code> <code dir="ltr">-i</code> <code dir="ltr"><span class="codeinlineitalic">instance_name</span></code> command for all servers in the server pool.</p>
</li>
<li>
<p>Oracle recommends that all databases and Oracle Clusterware use the same interconnect network.</p>
</li>
</ul>
</div>
<p>Typically, <a id="sthref396"></a>you set the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter only in the following situations:</p>
<ul>
<li>
<p>Due to operating system limitations, you cannot use NIC bonding to provide increased bandwidth using multiple network interfaces.</p>
</li>
<li>
<p>The cluster is running <a id="sthref397"></a>multiple databases and you need the interconnect traffic to be separated.</p>
</li>
<li>
<p>You have a single IP address that is made highly available by the operating system, and it does not have a stable interface name (for example, the name can change when you restart).</p>
</li>
</ul>
<p>Do not set the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter for the following common configurations:</p>
<ul>
<li>
<p>If you have only one cluster interconnect.</p>
</li>
<li>
<p>If the default cluster interconnect meets the bandwidth requirements of your Oracle RAC database, which is typically the case.</p>
</li>
</ul>
<p>Consider the following important points when specifying the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter:</p>
<ul>
<li>
<p>The <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter is useful only in Linux and UNIX environments where UDP IPC is enabled.</p>
</li>
<li>
<p>Specify a different value for each instance of the Oracle RAC database when setting the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter in the parameter file.</p>
</li>
<li>
<p>The IP addresses you specify for the different instances of the same database on different nodes must belong to network adapters that connect to the same interconnect network.</p>
</li>
<li>
<p>If you specify multiple IP addresses for this parameter, then list them in the same order for all instances of the same database. For example, if the parameter for the first instance on <code dir="ltr">node1</code> lists the IP addresses of the <code dir="ltr">alt0:</code>, <code dir="ltr">fta0:</code>, and <code dir="ltr">ics0:</code> devices in that order, then the parameter for the second instance on <code dir="ltr">node2</code> must list the IP addresses of the equivalent network adapters in the same order. See the examples in <a href="#CACJAHED">"Usage Examples for the CLUSTER_INTERCONNECTS Parameter"</a> for more information about setting multiple interconnects with this parameter.</p>
</li>
<li>
<p>If an operating system error occurs while Oracle Database is writing to the interconnect that you specify with the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter, then Oracle Database returns an error even if some other interfaces are available. This is because the communication protocols between Oracle Database and the interconnect can vary greatly depending on your platform. See your Oracle Database platform-specific documentation for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN10017" href="../../server.112/e40402/initparams030.htm#REFRN10017"><span class="italic">Oracle Database Reference</span></a> for more information about the <code dir="ltr">CLUSTER_INTERCONNECTS</code> initialization parameter</div>
</div>
<!-- class="sect2" -->
<a id="CACJAHED"></a>
<div id="RACAD7297" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Usage Examples for the CLUSTER_INTERCONNECTS Parameter<a id="sthref398"></a></h3>
<p>This section provides two <a id="sthref399"></a><a id="sthref400"></a>examples for setting the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter.</p>
<dl>
<dd><a id="RACAD8330"></a><a id="sthref401"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Consider setting <code dir="ltr">CLUSTER_INTERCONNECTS</code> when a single cluster interconnect cannot meet your bandwidth requirements. You may need to set this parameter in data warehouse environments with high interconnect bandwidth demands from one or more databases as described here.</p>
<p>For example, if you have two databases with high interconnect bandwidth requirements, then you can override the default interconnect provided by your operating system and nominate a different interconnect for each database using the following syntax in each server parameter file where <code dir="ltr">ip</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> is an IP address in standard dot-decimal format, for example: <code dir="ltr">144.25.16.214</code>:</p>
<pre dir="ltr">
Database One: crm1.CLUSTER_INTERCONNECTS = ip1
Database Two: ext1.CLUSTER_INTERCONNECTS = ip2
</pre>
<p>If you have one database with high bandwidth demands, then you can nominate multiple interconnects using the following syntax:</p>
<pre dir="ltr">
CLUSTER_INTERCONNECTS = ip1:ip2:...:ip<span class="italic">n</span>
</pre></dd>
<dd><a id="RACAD8331"></a><a id="CACHCHFJ"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Use the <a id="sthref402"></a><code dir="ltr">ifconfig</code> or <a id="sthref403"></a><code dir="ltr">netstat</code> command to display the IP address of a device. This command provides a map between device names and IP addresses. For example, to determine the IP address of a device, run the following command as the <code dir="ltr">root</code> user:</p>
<pre dir="ltr">
# /usr/sbin/ifconfig -a 
fta0: flags=c63&lt;UP,BROADCAST,NOTRAILERS,RUNNING,MULTICAST,SIMPLEX&gt; 
      inet 192.34.137.212 netmask fffffc00 broadcast 192.34.139.255 ipmtu 1500

lo0:  flags=100c89&lt;UP,LOOPBACK,NOARP,MULTICAST,SIMPLEX,NOCHECKSUM&gt; 
      inet 172.0.0.1 netmask ff000000 ipmtu 4096 

ics0:  flags=1100063&lt;UP,BROADCAST,NOTRAILERS,RUNNING,NOCHECKSUM,CLUIF&gt; 
      inet 10.0.0.1 netmask ffffff00 broadcast 10.0.0.255 ipmtu 7000 

sl0:  flags=10&lt;POINTOPOINT&gt;

tun0: flags=80&lt;NOARP&gt;
</pre>
<p>In the preceding example, the interface <code dir="ltr">fta0:</code> has an IP address of <code dir="ltr">192.34.137.212</code> and the interface <code dir="ltr">ics0:</code> has an IP address of <code dir="ltr">10.0.0.1</code>.</p>
<p>To use the network interface whose IP address is <code dir="ltr">192.34.137.212</code> for all GCS, GES, and IPQ IPC traffic, set the <code dir="ltr">CLUSTER_INTERCONNECTS</code> parameter as follows:</p>
<pre dir="ltr">
CLUSTER_INTERCONNECTS=192.34.137.212
</pre></dd>
</dl>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACJCGBE"></a>
<div id="RACAD7298" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Customizing How Oracle Clusterware Manages Oracle RAC Databases<a id="sthref404"></a><a id="sthref405"></a></h2>
<p>By default, Oracle Clusterware controls database restarts in Oracle RAC environments. In some cases, you may need to minimize the level of control that Oracle Clusterware has over your Oracle RAC database, for example, during database upgrades.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When using third-party clusterware, Oracle recommends that you allow Oracle Clusterware to manage the Oracle RAC instances. If you set the instance to manual and start it with third-party clusterware, do not use the third-party clusterware to monitor and restart database instances, Oracle Clusterware must do that.</div>
<p>To prevent Oracle Clusterware from restarting your Oracle RAC database when you restart your system, or to avoid restarting failed instances more than once, configure a policy to define the degree of control. There are two policies: <a id="sthref406"></a>AUTOMATIC, which is the default, and <a id="sthref407"></a>MANUAL. If the policy is set to AUTOMATIC, the database is automatically restored to its previous running condition (started or stopped) upon restart of the database host computer. If MANUAL, the database is never automatically restarted upon restart of the database host computer. A MANUAL setting does not prevent Oracle Restart from monitoring the database while it is running and restarting it if a failure occurs.</p>
<p>Use <a id="sthref408"></a>SRVCTL commands to display and change the Oracle Clusterware policies, as shown in the following examples:</p>
<dl>
<dd><a id="RACAD8332"></a><a id="CACFADFF"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;Display the Current Policy</dt>
<dd>
<p>For example, use the following command syntax to display the current policy where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the name of the database for which you want to change policies:</p>
<pre dir="ltr">
srvctl config database -d <span class="italic">db_unique_name</span> -a
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="srvctladmin.htm#i1008779">"srvctl config database"</a></code> for more information about the <code dir="ltr">srvctl config database</code> command and its options</div>
</dd>
<dd><a id="RACAD8333"></a><a id="sthref409"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;Change the Current Policy to Another Policy</dt>
<dd>
<p>Use the following SRVCTL command syntax to change the current policy to either AUTOMATIC or MANUAL:</p>
<pre dir="ltr">
srvctl modify database -d <span class="italic">db_unique_name</span> -y [AUTOMATIC | MANUAL]
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="srvctladmin.htm#i1009665">"srvctl modify database"</a></code> for more information about the <code dir="ltr">srvctl modify database</code> command and its options</div>
<p>This command syntax sets the resource attribute of the database resource.</p>
</dd>
<dd><a id="RACAD8334"></a><a id="sthref410"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;Specify a Policy for a New Database</dt>
<dd>
<p>When you add a new database using the SRVCTL command, you can use the <code dir="ltr">-y</code> option to specify the management policy as either AUTOMATIC or MANUAL, as shown in the following example where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> is the name of the database:</p>
<pre dir="ltr">
srvctl add database -d <span class="italic">db_unique_name</span> -y [AUTOMATIC | MANUAL] -o $ORACLE_HOME -a DATA
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="srvctladmin.htm#i1008470">"srvctl add database"</a></code> for more information about the <code dir="ltr">srvctl add database</code> command and its options</div>
<p>This command syntax places the new database under the control of Oracle Clusterware. If you do not provide a management policy option, then Oracle Database uses the default value of <code dir="ltr">automatic</code>. After you change the policy, the Oracle Clusterware resource records the new value for the affected database.</p>
</dd>
</dl>
</div>
<!-- class="sect1" -->
<a id="CACBGADB"></a>
<div id="RACAD1804" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Advanced Oracle Enterprise Manager Administration</h2>
<p>You can install, configure, and monitor an Oracle RAC database from a single location using either Oracle Enterprise Manager Database Control or Oracle Enterprise Manager Grid Control.</p>
<p>This section provides advanced administration tasks that are not covered in <a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> or in <a href="monitor.htm#i1006534">"Overview of Monitoring and Tuning Oracle RAC Databases"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for a task-oriented guide that explains how to use Oracle Enterprise Manager to perform routine Oracle RAC database administrative tasks</div>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CACIBHGE">Using Oracle Enterprise Manager Grid Control to Discover Nodes and Instances</a></p>
</li>
<li>
<p><a href="#CACJGFCF">Other Oracle Enterprise Manager Capabilities</a></p>
</li>
<li>
<p><a href="#i1059319">Administering Jobs and Alerts in Oracle RAC</a></p>
</li>
</ul>
<a id="CACIBHGE"></a>
<div id="RACAD901" class="sect2"><!-- infolevel="all" infotype="General" --><a id="CHDIHFIJ"></a>
<h3 class="sect2">Using <a id="sthref411"></a><a id="sthref412"></a><a id="sthref413"></a><a id="sthref414"></a>Oracle Enterprise Manager Grid Control to Discover Nodes and Instances</h3>
<p>Discovering Oracle RAC database and instance targets in Oracle Enterprise Manager enables monitoring and administration from the console:</p>
<ul>
<li>
<p><span class="bold">Database Control</span> does not require discovery because DBCA performs any necessary configuration while creating the database. Database Control also monitors a single database.</p>
</li>
<li>
<p><span class="bold">Grid Control</span> enables you to use the Oracle Enterprise Manager console interface to discover Oracle RAC database and instance targets.</p>
<p>If the Grid Control agents are installed on a cluster that has an Oracle RAC database, Oracle RAC database targets are discovered at install time. You can use the console interface to discover targets if a database is created after agents are installed or if a database is not automatically discovered at agent install time.</p>
</li>
</ul>
<p>To discover nodes and instances, use Oracle Enterprise Manager Grid Control as follows:</p>
<ol>
<li>
<p>Log in to Oracle Enterprise Manager and click the <span class="bold">Targets</span> tab.</p>
</li>
<li>
<p>Click the <span class="bold">Database</span> tab to view all of the available targets. The column labeled <span class="bold">Types</span> shows the Oracle RAC databases using the entry <span class="italic">Cluster Database</span>.</p>
</li>
<li>
<p>Add the database target by selecting the target name, then clicking <span class="bold">Add</span>. The Add Database Target: Specify Host page appears, which enables you to add databases, listeners, and Oracle ASM as monitored targets.</p>
</li>
<li>
<p>Click the flashlight icon to display the available host names, select a host, then click <span class="bold">Continue</span>. The Add Database: Specify Source page appears.</p>
</li>
<li>
<p>Either request Oracle Enterprise Manager to discover only noncluster databases and listeners, or to discover all cluster databases, noncluster databases, and listeners on the cluster, then click <span class="bold">Continue</span>.</p>
</li>
<li>
<p>If this procedure did not discover your reconfigured cluster database and all of its instances, you can use the Targets Discovered on Cluster page to manually configure your cluster database and noncluster databases.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CACJGFCF"></a>
<div id="RACAD8213" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Other Oracle Enterprise Manager Capabilities</h3>
<p>This section lists Oracle Enterprise Manager capabilities available with Oracle Enterprise Manager 11<span class="italic">g</span> release 2 (11.2).</p>
<ul>
<li>
<p>A new deployment procedure&mdash;Oracle Grid Infrastructure/Oracle RAC Provisioning&mdash;provisions Oracle RAC 11<span class="italic">g</span> release 2 (11.2) and Oracle Grid Infrastructure. This procedure also introduces a feature called <span class="italic">Profiles</span>, which enables you to record the inputs and subsequently use them for repeated deployments.</p>
</li>
<li>
<p>Dynamic prerequisites for the new procedures enable Oracle Enterprise Manager, when connected to My Oracle Support (formerly Oracle<span class="italic">MetaLink</span>), to download the latest prerequisites and tools for Oracle RAC provisioning.</p>
</li>
<li>
<p>The existing <span class="italic">One-Click Extend Cluster Database</span> capability now supports Oracle RAC 11<span class="italic">g</span> release 2 (11.2) stack.</p>
</li>
<li>
<p>The existing <span class="italic">Delete/Scale down Oracle Real Application Clusters</span> capability is certified with Oracle RAC 11<span class="italic">g</span> release 2 (11.2) clusters.</p>
</li>
<li>
<p>The existing <span class="italic">Oracle Database Provisioning</span> procedure now supports provisioning of single instances of Oracle Database 11<span class="italic">g</span> release 2 (11.2).</p>
</li>
<li>
<p>A new deployment procedure&mdash;Oracle Grid Infrastructure Provisioning for Standalone Servers&mdash;has been introduced to provision Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2) for noncluster databases.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1059319"></a>
<div id="RACAD915" class="sect2">
<h3 class="sect2">Administering Jobs and Alerts in Oracle RAC</h3>
<p>The Cluster Database Home page shows all of the instances in the Oracle RAC database and provides an aggregate collection of several Oracle RAC-specific statistics that are collected by the <a href="rac_glossary.htm#CHDEEFED"><span class="xrefglossterm">Automatic Workload Repository (AWR)</span></a> for server manageability.</p>
<p>You do not need to navigate to an instance-specific page to see these details. However, on the Cluster Database Home page, if an instance is down that should be operating, or if an instance has a high number of alerts, then you can drill down to the instance-specific page for each alert.</p>
<p>To perform specific administrative tasks as described in the remainder of this section, log in to the target Oracle RAC database, navigate to the Cluster Database Home page, and click the <span class="bold">Administration</span> tab.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CACGEDGF">Administering Jobs in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CACHBDEI">Administering Alerts in Oracle RAC with Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CACJAIEE">Performing Scheduled Maintenance Using Defined Blackouts in Oracle Enterprise Manager</a></p>
</li>
</ul>
<a id="CACGEDGF"></a>
<div id="RACAD916" class="sect3">
<h4 class="sect3">Administering Jobs in Oracle RAC</h4>
<p>You can administer <a id="sthref415"></a><a id="sthref416"></a><a id="sthref417"></a>Oracle Enterprise Manager jobs at both the database and instance levels. For example, you can create a job at the cluster database level to run on any active instance of the target Oracle RAC database. Or you can create a job at the instance level to run on the specific instance for which you created it. In the event of a failure, recurring jobs can run on a surviving instance.</p>
<p>Because you can create jobs at the instance level, cluster level, or cluster database level, jobs can run on any available host in the cluster database. This applies to scheduled jobs as well. Oracle Enterprise Manager also displays job activity in several categories, including, <code dir="ltr">Active</code>, <code dir="ltr">History</code>, and <code dir="ltr">Library</code>.</p>
<p>Use the Jobs tab to submit operating system scripts and SQL scripts and to examine scheduled jobs. For example, to create a backup job for a specific Oracle RAC database:</p>
<ol>
<li>
<p>Click <span class="bold">Targets</span> and click the database for which you want to create the job.</p>
</li>
<li>
<p>Log in to the target database.</p>
</li>
<li>
<p>When Oracle Enterprise Manager displays the Database Home page, click <span class="bold">Maintenance</span>.</p>
</li>
<li>
<p>Complete the Enterprise Manage Job Wizard pages to create the job.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CACHBDEI"></a>
<div id="RACAD917" class="sect3">
<h4 class="sect3">Administering Alerts in Oracle RAC with Oracle Enterprise Manager</h4>
<p>You can use Oracle Enterprise Manager to configure Oracle RAC environment alerts<a id="sthref418"></a><a id="sthref419"></a>. You can also configure special Oracle RAC database tests, such as global cache converts, consistent read requests, and so on.</p>
<p>Oracle Enterprise Manager distinguishes between database- and instance-level alerts in Oracle RAC environments. Alert thresholds for instance-level alerts, such as archive log alerts, can be set at the instance target level. This function enables you to receive alerts for the specific instance if performance exceeds your threshold. You can also configure alerts at the database level, such as setting alerts for tablespaces, to avoid receiving duplicate alerts at each instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Oracle Technology Network for an example of configuring alerts in Oracle RAC and the <a class="olink ARPLS" href="../../appdev.112/e40758/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about using packages to configure thresholds</div>
</div>
<!-- class="sect3" -->
<a id="CACJAIEE"></a>
<div id="RACAD918" class="sect3">
<h4 class="sect3">Performing Scheduled Maintenance Using Defined Blackouts<a id="sthref420"></a><a id="sthref421"></a> in Oracle Enterprise Manager</h4>
<p>You can <a id="sthref422"></a>define blackouts (which are time periods in which database monitoring is suspended so that maintenance operations do not skew monitoring data or generate needless alerts) for all managed targets of an Oracle RAC database to prevent alerts from occurring while performing maintenance. You can define blackouts for an entire cluster database or for specific cluster database instances.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN13425" href="../../server.112/e25494/dbcontrol.htm#ADMIN13425"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about defining blackouts</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="storage.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="onenode.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
