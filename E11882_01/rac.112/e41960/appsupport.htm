<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Troubleshooting Oracle RAC</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="srvctladmin.htm" title="Previous" type="text/html" />
<link rel="Next" href="racdb.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">20/24</span> <!-- End Header -->
<div id="RACAD025" class="appendix"><a id="g635218"></a> <a id="i632140"></a>
<h1 class="appendix"><span class="secnum">B</span> Troubleshooting Oracle RAC</h1>
<p>This appendix explains how <a id="sthref1898"></a><a id="sthref1899"></a>diagnose problems for Oracle Real Application Clusters (Oracle RAC) components using trace and log files. This section includes the following topics:</p>
<ul>
<li>
<p><a href="#i632171">Where to Find Files for Analyzing Errors</a></p>
</li>
<li>
<p><a href="#BEHGIECJ">Managing Diagnostic Data in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i632345">Using Instance-Specific Alert Files in Oracle RAC</a></p>
</li>
<li>
<p><a href="#BEHIJCJA">Enabling Tracing for Java-Based Tools and Utilities in Oracle RAC</a></p>
</li>
<li>
<p><a href="#BEHGGHBF">Resolving Pending Shutdown Issues</a></p>
</li>
<li>
<p><a href="#BEHHHHEI">How to Determine If Oracle RAC Instances Are Using the Private Network</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Trace and log files, similar to those generated for Oracle Database with Oracle RAC, are also available for the Oracle Clusterware components. For Oracle Clusterware, Oracle Database stores these under a unified directory log structure.
<p>See the <a class="olink CWADD025" href="../../rac.112/e41959/troubleshoot.htm#CWADD025"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about troubleshooting Oracle Clusterware.</p>
</div>
<a id="i632171"></a>
<div id="RACAD512" class="sect1">
<h2 class="sect1">Where to Find Files for Analyzing Errors</h2>
<p><a id="sthref1900"></a><a id="sthref1901"></a>Oracle Database records information about important events that occur in your Oracle RAC environment in trace files. The trace files for Oracle RAC are the same as those in noncluster Oracle databases. As a best practice, monitor and back up trace files regularly for all instances to preserve their content for future troubleshooting.</p>
<p>Information about <code dir="ltr">ORA-600</code> errors appear in the <code dir="ltr"><span class="codeinlineitalic">alert_SID</span></code><code dir="ltr">.log</code> file for each instance where <span class="italic">SID</span> is the instance identifier.</p>
<p>The alert log and all trace files for background and server processes are written to the Automatic Diagnostic Repository, the location of which you can specify with the <code dir="ltr">DIAGNOSTIC_DEST</code> initialization parameter. For example:</p>
<pre dir="ltr">
diagnostic_dest=/oracle/11.1/diag/rdbms/rac/RAC2/trace
</pre>
<p>Oracle Database creates a different trace file for each background thread. Oracle RAC <a id="sthref1902"></a>background threads use <a id="sthref1903"></a>trace files to record database operations and database errors. These trace logs help troubleshoot and also enable Oracle Support to more efficiently debug <a href="rac_glossary.htm#CHDDEDDI"><span class="xrefglossterm">cluster database</span></a> configuration problems. The names of trace files are operating system specific, but each file usually includes the name of the process writing the file (such as LGWR and RECO). For Linux, UNIX, and Windows systems, <a id="sthref1904"></a>trace files for the background processes are named <code dir="ltr">SID_</code><code dir="ltr"><span class="codeinlineitalic">process name</span></code>_<code dir="ltr"><span class="codeinlineitalic">process identifier</span></code><code dir="ltr">.trc</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN005" href="../../server.112/e25494/monitoring.htm#ADMIN005"><span class="italic">Oracle Database Administrator's Guide</span></a> and <a class="olink TDPRC260" href="../../rac.112/e17264/racbureco.htm#TDPRC260"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for more information about monitoring errors and alerts in trace files</div>
<p>Trace files are also created for user processes if you set the <code dir="ltr"><a id="sthref1905"></a><a id="sthref1906"></a>DIAGNOSTIC_DEST</code> initialization parameter. <a id="sthref1907"></a>User process trace file names have the format <code dir="ltr"><span class="codeinlineitalic">SID</span></code><code dir="ltr">_ora_</code><code dir="ltr"><span class="codeinlineitalic">process_identifier/thread_identifier</span></code>.<code dir="ltr">trc</code>, where <code dir="ltr"><span class="codeinlineitalic">process_identifier</span></code> is a 5-digit number indicating the process identifier (PID) on Linux and UNIX systems, and <code dir="ltr"><span class="codeinlineitalic">thread_identifier</span></code> is the thread identifier on Windows systems.</p>
</div>
<!-- class="sect1" -->
<a id="BEHGIECJ"></a>
<div id="RACAD7590" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Diagnostic Data in Oracle RAC<a id="sthref1908"></a><a id="sthref1909"></a></h2>
<p>Problems that span Oracle RAC instances can be the most difficult types of problems to diagnose. For example, you may need to correlate the trace files from across multiple instances, and merge the trace files. Oracle Database 11<span class="italic">g</span> includes an advanced fault diagnosability infrastructure for collecting and managing diagnostic data, and uses the <a id="sthref1910"></a>Automatic Diagnostic Repository (ADR) file-based repository for storing the database diagnostic data. When you create the ADR base on a shared disk, you can place ADR homes for all instances of the same Oracle RAC database under the same ADR Base. With shared storage:</p>
<ul>
<li>
<p>You can use the ADRCI<a id="sthref1911"></a><a id="sthref1912"></a><a id="sthref1913"></a> command-line tool to correlate diagnostics across all instances.</p>
<p>ADRCI is a command-line tool that enables you to view diagnostic data in the ADR and package incident and problem information into a zip file for transmission to Oracle Support. The diagnostic data includes incident and problem descriptions, trace files, dumps, health monitor reports, alert log entries, and so on.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a> for information about using ADRCI</div>
</li>
<li>
<p>You can use the <a id="sthref1914"></a><a id="sthref1915"></a><a id="sthref1916"></a>Data Recovery Advisor to help diagnose and repair corrupted data blocks, corrupted or missing files, and other data failures.</p>
<p>The Data Recovery Advisor is an Oracle Database infrastructure that automatically diagnoses persistent data failures, presents repair options, and repairs problems at your request.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11007" href="../../server.112/e25494/diag.htm#ADMIN11007"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about managing diagnostic data</div>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i632345"></a>
<div id="RACAD527" class="sect1">
<h2 class="sect1">Using Instance-Specific Alert Files in Oracle RAC</h2>
<p>Each instance in an Oracle RAC database has one alert fil<a id="sthref1917"></a><a id="sthref1918"></a><a id="sthref1919"></a>e. The alert file for each instance, <code dir="ltr"><span class="codeinlineitalic">alert.SID.log</span></code>, contains important information about error messages and exceptions that occur during database operations. Information is appended to the alert file each time you start the instance. All process threads can write to the alert file for the instance.</p>
<p>The <code dir="ltr"><span class="codeinlineitalic">alert_SID</span></code><code dir="ltr">.log</code> file is in the directory specified by the <code dir="ltr"><a id="sthref1920"></a>DIAGNOSTIC_DEST</code> initialization parameter.</p>
</div>
<!-- class="sect1" -->
<a id="BEHIJCJA"></a>
<div id="RACAD534" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Enabling Tracing for Java-Based Tools and Utilities in Oracle RAC</h2>
<p><a id="sthref1921"></a>All <a id="sthref1922"></a><a id="sthref1923"></a><a id="sthref1924"></a><a id="sthref1925"></a>Java-based tools <a id="sthref1926"></a><a id="sthref1927"></a><a id="sthref1928"></a>and utilities that are available in Oracle RAC are called by executing scripts of the same name as the tool or utility. This includes the Cluster Verification Utility (CVU), Database Configuration Assistant (DBCA), the Net Configuration Assistant (NETCA), Server Control Utility (SRVCTL), and the Global Services Daemon (GSD). For example to run DBCA, enter the command <code dir="ltr">dbca</code>.</p>
<p>By default, Oracle Database enables traces for DBCA and the Database Upgrade Assistant (DBUA). For the CVU, GSDCTL, and SRVCTL, you can set the<a id="sthref1929"></a> <a id="sthref1930"></a><code dir="ltr">SRVM_TRACE</code> environment variable to <code dir="ltr">TRUE</code> to make Oracle Database generate traces. Oracle Database writes traces to log files. For example, Oracle Database writes <a id="sthref1931"></a><a id="sthref1932"></a>traces to log files in <code dir="ltr"><span class="codeinlineitalic">Oracle home</span></code><code dir="ltr">/cfgtoollogs/dbca</code> and <code dir="ltr"><span class="codeinlineitalic">Oracle home</span></code><code dir="ltr">/cfgtoollogs/dbua</code> for DBCA and DBUA, respectively.</p>
</div>
<!-- class="sect1" -->
<a id="BEHGGHBF"></a>
<div id="RACAD529" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Resolving Pending Shutdown Issues</h2>
<p><a id="sthref1933"></a><a id="sthref1934"></a>In some situations a <code dir="ltr">SHUTDOWN IMMEDIATE</code> may be pending and Oracle Database will not quickly respond to repeated shutdown requests. This is because Oracle Clusterware may be processing a current shutdown request. In such cases, issue a <code dir="ltr">SHUTDOWN ABORT</code> using SQL*Plus for subsequent shutdown requests.</p>
</div>
<!-- class="sect1" -->
<a id="BEHHHHEI"></a>
<div id="RACAD7591" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">How to Determine If Oracle RAC Instances Are Using the Private Network<a id="sthref1935"></a><a id="sthref1936"></a><a id="sthref1937"></a></h2>
<p>This section describes how to manually determine if Oracle RAC instances are using the private network. However, the best practice for this task is to use Oracle Enterprise Manager Database Control graphical user interfaces (GUI) to check the interconnect. Also, see the <a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for more information about monitoring Oracle RAC using Oracle Enterprise Manager.</p>
<p><a id="sthref1938"></a><a id="sthref1939"></a><a id="sthref1940"></a><a id="sthref1941"></a>With most network protocols, you can issue the <code dir="ltr">oradebug ipc</code> command to see the interconnects that the database is using. For example:</p>
<pre dir="ltr">
oradebug <span class="variable">setmypid</span>
oradebug ipc
</pre>
<p>These commands dump a trace file to the location specified by the <code dir="ltr">DIAGNOSTIC_DEST</code> initialization parameter. The output may look similar to the following:</p>
<pre dir="ltr">
SSKGXPT 0x1a2932c flags SSKGXPT_READPENDING     info for network 0
        socket no 10    IP 172.16.193.1         UDP 43749
        sflags SSKGXPT_WRITESSKGXPT_UP  info for network 1
        socket no 0     IP 0.0.0.0      UDP 0...
</pre>
<p>In the example, you can see the database is using IP 172.16.193.1 with a User <a id="sthref1942"></a>Datagram Protocol (UDP) protocol. Also, you can issue the <code dir="ltr">oradebug tracefile_name</code> command to print the trace location where the output is written.</p>
<p>Additionally, you can query the <code dir="ltr">V$CLUSTER_INTERCONNECTS</code> view to see information about the private interconnect. For example:</p>
<pre dir="ltr">
SQL&gt; SELECT * FROM V$CLUSTER_INTERCONNECTS;

NAME  IP_ADDRESS          IS_  SOURCE
----- -------------------------- ---  -------------------------------
eth0  138.2.236.114         NO  Oracle Cluster Repository
</pre></div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="srvctladmin.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="racdb.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
