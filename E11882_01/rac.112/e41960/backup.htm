<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Managing Backup and Recovery</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="rman.htm" title="Previous" type="text/html" />
<link rel="Next" href="clonerac.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">12/24</span> <!-- End Header -->
<div id="RACAD059" class="chapter"><a id="g494903"></a> <a id="i443637"></a>
<h1 class="chapter"><span class="secnum">7</span> Managing Backup and Recovery</h1>
<p>This chapter explains instance recovery and how to use Recovery Manager (RMAN) to back up and restore Oracle Real Application Clusters (Oracle RAC) databases. This chapter also describes Oracle RAC instance recovery, parallel backup, recovery with SQL*Plus, and using the Fast Recovery Area in Oracle RAC. The topics in this chapter include:</p>
<ul>
<li>
<p><a href="#i491932">RMAN Backup Scenario for Noncluster File System Backups</a></p>
</li>
<li>
<p><a href="#i472023">RMAN Restore Scenarios for Oracle RAC</a></p>
</li>
<li>
<p><a href="#i492578">Instance Recovery in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i492536">Media Recovery in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i491126">Parallel Recovery in Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABEGJFG">Using a Fast Recovery Area in Oracle RAC</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
For restore and recovery in Oracle RAC environments, you do not have to configure the instance that performs the recovery to also be the sole instance that restores all of the data files. In Oracle RAC, data files are accessible from every node in the <a href="rac_glossary.htm#CHDIADDF"><span class="xrefglossterm">cluster</span></a>, so any node can restore archived redo log files.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD91888" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWADD91888"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about backing up and restoring the Oracle Clusterware components such as the Oracle Cluster Registry (OCR) and the voting disk</div>
<a id="i491932"></a>
<div id="RACAD062" class="sect1">
<h2 class="sect1">RMAN Backup Scenario for Noncluster File System Backups</h2>
<p>In a non<a href="rac_glossary.htm#CHDDAHDH"><span class="xrefglossterm">cluster file system</span></a> environment, each node can back up only to a locally mounted noncluster file system directory. For example, <code dir="ltr">node1</code> cannot access the archived redo log files on <code dir="ltr">node2</code> or <code dir="ltr">node3</code> unless you configure the network file system for remote access. If you configure a network file system file for backups, then each node backs up its archived redo logs to a local directory.</p>
</div>
<!-- class="sect1" -->
<a id="i472023"></a>
<div id="RACAD065" class="sect1">
<h2 class="sect1">RMAN <a id="sthref670"></a><a id="sthref671"></a>Restore Scenarios for Oracle RAC</h2>
<p>This section describes the following common RMAN restore scenarios:</p>
<ul>
<li>
<p><a href="#i472034">Restoring Backups from a Cluster File System</a></p>
</li>
<li>
<p><a href="#i472050">Restoring Backups from a Noncluster File System</a></p>
</li>
<li>
<p><a href="#BABCABAF">Using RMAN or Oracle Enterprise Manager to Restore the Server Parameter File (SPFILE)</a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The restore and recovery procedures in a cluster file system scheme do not differ substantially from Oracle noncluster scenarios.</div>
</li>
</ul>
<a id="i472034"></a>
<div id="RACAD883" class="sect2">
<h3 class="sect2"><a id="sthref672"></a><a id="sthref673"></a>Restoring Backups from a Cluster File System</h3>
<p>The scheme that this section describes assumes that you are using the <a href="rman.htm#i490879">"Oracle Automatic Storage Management and Cluster File System Archiving Scheme"</a>. In this scheme, assume that <code dir="ltr">node3</code> performed the backups to a cluster file system. If <code dir="ltr">node3</code> is available for the restore and recovery operation, and if all of the archived logs have been backed up or are on disk, then run the following commands to perform complete recovery:</p>
<pre dir="ltr">
RESTORE DATABASE;
RECOVER DATABASE;
</pre>
<p>If <code dir="ltr">node3</code> performed the backups but is unavailable, then configure a media management device for one of the remaining nodes and make the backup media from <code dir="ltr">node3</code> available to this node.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you configured RMAN as described in <a href="rman.htm#BABCFIGH">"Configuring Channels to Use Automatic Load Balancing"</a>, then, in order to load balance the channels across nodes, note that channels cannot be load balanced before at least one instance has successfully opened the database. This means that the channels will not be load balanced across the nodes during a full database restore. To achieve load balancing of channels for <code dir="ltr">RESTORE</code> and <code dir="ltr">RECOVER</code> commands, you can temporarily reallocate channels by running commands similar to the following:
<pre dir="ltr">
run {
ALLOCATE CHANNEL DEVICE TYPE sbt C1 CONNECT '@racinst_1'
ALLOCATE CHANNEL DEVICE TYPE sbt C2 CONNECT '@racinst_2'
...
}
</pre></div>
</div>
<!-- class="sect2" -->
<a id="i472050"></a>
<div id="RACAD884" class="sect2">
<h3 class="sect2">Restoring Backups from a Noncluster <a id="sthref674"></a><a id="sthref675"></a>File System</h3>
<p>The scheme that this section describes assumes that you are using the <a href="rman.htm#i490918">"Noncluster File System Local Archiving Scheme"</a>. In this scheme, each node archives locally to a different directory. For example, <code dir="ltr">node1</code> archives to <code dir="ltr">/arc_dest_1</code>, <code dir="ltr">node2</code> archives to <code dir="ltr">/arc_dest_2</code>, and <code dir="ltr">node3</code> archives to <code dir="ltr">/arc_dest_3</code>. You must configure a network file system file so that the recovery node can read the archiving directories on the remaining nodes.</p>
<p>If all nodes are available and if all archived redo logs have been backed up, then you can perform a complete restore and recovery by mounting the database and running the following commands from any node:</p>
<pre dir="ltr">
RESTORE DATABASE;
RECOVER DATABASE;
</pre>
<p>Because the network file system configuration enables each node read access to the redo log files on other nodes, then the recovery node can read and apply the archived redo logs located on the local and remote disks. No manual transfer of archived redo logs is required.</p>
</div>
<!-- class="sect2" -->
<a id="BABCABAF"></a>
<div id="RACAD867" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using RMAN or Oracle Enterprise Manager to Restore the Server Parameter File (<a id="sthref676"></a><a id="sthref677"></a>SPFILE)</h3>
<p>RMAN can restore the server parameter file either to the default location or to a location that you specify.</p>
<p>You can also use <a id="sthref678"></a>Oracle Enterprise Manager to restore the SPFILE. From the Backup/Recovery section of the <span class="bold">Maintenance</span> tab, click <span class="bold">Perform Recovery</span>. The Perform Recovery link is context-sensitive and navigates you to the SPFILE restore only when the database is closed.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i492578"></a>
<div id="RACAD063" class="sect1">
<h2 class="sect1">Instance Recovery in Oracle RAC</h2>
<p>Instance <a id="sthref679"></a><a id="sthref680"></a>failure occurs when software or hardware problems disable an instance. After instance failure, Oracle Database automatically uses the online redo logs to perform recovery as described in this section.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#i471859">Single Node Failure in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i471907">Multiple-Node Failures in Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABJCIAG">Using RMAN to Create Backups in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i470947">Node Affinity Awareness of Fast Connections</a></p>
</li>
<li>
<p><a href="#i470995">Deleting Archived Redo Logs after a Successful Backup</a></p>
</li>
<li>
<p><a href="#BABGDCID">Autolocation for Backup and Restore Commands</a></p>
</li>
</ul>
<a id="i471859"></a>
<div id="RACAD856" class="sect2">
<h3 class="sect2">Single Node Failure in Oracle RAC</h3>
<p><a id="sthref681"></a><a id="sthref682"></a><a id="sthref683"></a><a id="sthref684"></a><a id="sthref685"></a><a id="sthref686"></a><a id="sthref687"></a><a id="sthref688"></a>Instance recovery in Oracle RAC does not include the recovery of applications that were running on the failed instance. Oracle Clusterware restarts the instance automatically.</p>
<p>Applications that were running on a node before it failed continue running by using failure recognition and recovery. This provides consistent and uninterrupted service if hardware or software fails. When one instance performs recovery for another instance, the surviving instance reads online redo logs generated by the failed instance and uses that information to ensure that committed transactions are recorded in the database. Thus, data from committed transactions is not lost.<a id="sthref689"></a><a id="sthref690"></a> The instance performing recovery rolls back transactions that were active at the time of the failure and releases resources used by those transactions.<a id="sthref691"></a><a id="sthref692"></a><a id="sthref693"></a><a id="sthref694"></a><a id="sthref695"></a><a id="sthref696"></a><a id="sthref697"></a><a id="sthref698"></a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
All online redo logs must be accessible for instance recovery. Therefore, Oracle recommends that you mirror your online redo logs.</div>
</div>
<!-- class="sect2" -->
<a id="i471907"></a>
<div id="RACAD865" class="sect2">
<h3 class="sect2">Multiple-Node Failures in Oracle RAC</h3>
<p>When <a id="sthref699"></a>multiple node <a id="sthref700"></a>failures occur, if one instance survives, then Oracle RAC performs instance recovery for any other instances that fail. <a id="sthref701"></a><a id="sthref702"></a><a id="sthref703"></a>If all instances of an Oracle RAC database fail, then Oracle Database automatically recovers the instances the next time one instance opens the database. The instance performing recovery can mount the database in either <a href="rac_glossary.htm#CHDDEDDI"><span class="xrefglossterm">cluster database</span></a> or exclusive mode from any node of an Oracle RAC database. This recovery procedure is the same for Oracle Database running in shared mode as it is for Oracle Database running in exclusive mode, except that one instance performs instance recovery for all of the failed instances.<a id="sthref704"></a></p>
</div>
<!-- class="sect2" -->
<a id="BABJCIAG"></a>
<div id="RACAD866" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using RMAN to Create Backups in Oracle RAC</h3>
<p>Oracle Database provides RMAN for backing up and restoring the database. RMAN enables you to back up, restore, and recover data files, control files, SPFILEs, and archived redo logs. RMAN is included with the Oracle Database server and it is installed by default. You can run RMAN from the command line or you can use it from the Backup Manager in Oracle Enterprise Manager. In addition, RMAN is the recommended backup and recovery tool if you are using Oracle Automatic Storage Management (Oracle ASM). The procedures for using RMAN in Oracle RAC environments do not differ substantially from those for Oracle noncluster environments.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about noncluster RMAN backup procedures</div>
<a id="i472961"></a>
<div id="RACAD869" class="sect3">
<h4 class="sect3">Channel Connections to Cluster Instances with RMAN</h4>
<p>Channel connections to the instances are determined using the connect string defined by channel configurations. For example, in the following configuration, three channels are allocated using <code dir="ltr">dbauser/pwd@</code><code dir="ltr"><span class="codeinlineitalic">service_name</span></code>. If you configure the SQL Net service name with load balancing turned on, then the channels are allocated at a node as decided by the load balancing algorithm.</p>
<pre dir="ltr">
CONFIGURE DEVICE TYPE sbt PARALLELISM 3;
CONFIGURE DEFAULT DEVICE TYPE TO sbt;
CONFIGURE CHANNEL DEVICE TYPE SBT CONNECT 'dbauser/pwd@<span class="italic">service_name</span>'
</pre>
<p>However, if the service name used in the connect string is not for load balancing, then you can control at which instance the channels are allocated using separate connect strings for each channel configuration, as follows:</p>
<pre dir="ltr">
CONFIGURE DEVICE TYPE sbt PARALLELISM 3;
CONFIGURE CHANNEL 1.. CONNECT 'dbauser/pwd@mydb_1';
CONFIGURE CHANNEL 2.. CONNECT 'dbauser/pwd@mydb_2';
CONFIGURE CHANNEL 3.. CONNECT 'dbauser/pwd@mydb_3';
</pre>
<p>In the previous example, it is assumed that <code dir="ltr">mydb_1</code>, <code dir="ltr">mydb_2</code> and <code dir="ltr">mydb_3</code> are SQL*Net service names that connect to pre-defined nodes in your Oracle RAC environment. Alternatively, you can also use manually allocated channels to backup your database files. For example, the following command backs up the SPFILE, controlfile, data files and archived redo logs:</p>
<pre dir="ltr">
RUN
{
    ALLOCATE CHANNEL CH1 CONNECT 'dbauser/pwd@mydb_1';
    ALLOCATE CHANNEL CH2 CONNECT 'dbauser/pwd@mydb_2';
    ALLOCATE CHANNEL CH3 CONNECT 'dbauser/pwd@mydb_3';
    BACKUP DATABASE PLUS ARCHIVED LOG;
}
</pre>
<p>During a backup operation, if at least one channel allocated has access to the archived log, then RMAN automatically schedules the backup of the specific log on that channel. Because the control file, SPFILE, and data files are accessible by any channel, the backup operation of these files is distributed across the allocated channels.</p>
<p>For a local archiving scheme, there must be at least one channel allocated to all of the nodes that write to their local archived logs. For a cluster file system archiving scheme, if every node writes the archived logs in the same cluster file system, then the backup operation of the archived logs is distributed across the allocated channels.</p>
<p>During a backup, the instances to which the channels connect must be either all mounted or all open. For example, if the instance on <code dir="ltr">node1</code> has the database mounted while the instances on <code dir="ltr">node2</code> and <code dir="ltr">node3</code> have the database open, then the backup fails.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RCMRF" href="../../backup.112/e10643/toc.htm"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more information about the <code dir="ltr">CONNECT</code> clause of the <code dir="ltr">CONFIGURE CHANNEL</code> statement</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i470947"></a>
<div id="RACAD870" class="sect2">
<h3 class="sect2"><a id="sthref705"></a>Node Affinity Awareness of Fast Connections</h3>
<p>In some cluster database configurations, some nodes of the cluster have faster access to certain data files than to other data files. RMAN automatically detects this situation, which is known as <a id="sthref706"></a>node affinity awareness. When deciding which channel to use to back up a particular data file, RMAN gives preference to the nodes with faster access to the data files that you want to back up. For example, if you have a three-node cluster, and if <code dir="ltr">node1</code> has faster read/write access to data files 7, 8, and 9 than the other nodes, then <code dir="ltr">node1</code> has greater node affinity to those files than <code dir="ltr">node2</code> and <code dir="ltr">node3</code>.</p>
</div>
<!-- class="sect2" -->
<a id="i470995"></a>
<div id="RACAD7337" class="sect2">
<h3 class="sect2">Deleting Archived Redo Logs after a Successful Backup</h3>
<p>If you have configured the automatic channels as defined in section <a href="#i472961">"Channel Connections to Cluster Instances with RMAN"</a>, then you can use the following example to delete the archived logs that you backed up <code dir="ltr"><span class="codeinlineitalic">n</span></code> times. The device type can be <code dir="ltr">DISK</code> or <code dir="ltr">SBT</code>:</p>
<pre dir="ltr">
DELETE ARCHIVELOG ALL BACKED UP <span class="italic">n</span> TIMES TO DEVICE TYPE <span class="italic">device_type</span>;
</pre>
<p>During a delete operation, if at least one channel allocated has access to the archived log, then RMAN automatically schedules the deletion of the specific log on that channel. For a local archiving scheme, there must be at least one channel allocated that can delete an archived log. For a cluster file system archiving scheme, assuming that every node writes to the archived logs on the same cluster file system, the archived log can be deleted by any allocated channel.</p>
<p>If you have not configured automatic channels, then you can manually allocate the maintenance channels as follows and delete the archived logs.</p>
<pre dir="ltr">
ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE DISK CONNECT 'SYS/oracle@node1';
ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE DISK CONNECT 'SYS/oracle@node2';
ALLOCATE CHANNEL FOR MAINTENANCE DEVICE TYPE DISK CONNECT 'SYS/oracle@node3';
DELETE ARCHIVELOG ALL BACKED UP <span class="italic">n</span> TIMES TO DEVICE TYPE <span class="italic">device_type</span>;
</pre></div>
<!-- class="sect2" -->
<a id="BABGDCID"></a>
<div id="RACAD874" class="sect2">
<h3 class="sect2">Autolocation for Backup and Restore Commands</h3>
<p>RMAN automatically performs autolocation of all files that it must back up or restore. If you use the noncluster file system local archiving scheme, then a node can only read the archived redo logs that were generated by an instance on that node. RMAN never attempts to back up archived redo logs on a channel it cannot read.</p>
<p>During a restore operation, RMAN automatically performs the autolocation of backups. A channel connected to a specific node only attempts to restore files that were backed up to the node. For example, assume that log sequence 1001 is backed up to the drive attached to <code dir="ltr">node1</code>, while log 1002 is backed up to the drive attached to <code dir="ltr">node2</code>. If you then allocate channels that connect to each node, then the channel connected to <code dir="ltr">node1</code> can restore log 1001 (but not 1002), and the channel connected to <code dir="ltr">node2</code> can restore log 1002 (but not 1001).</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i492536"></a>
<div id="RACAD881" class="sect1">
<h2 class="sect1">Media Recovery in Oracle RAC</h2>
<p><a id="sthref707"></a>Media recovery must be user-initiated through a client application, whereas instance recovery is automatically performed by the database. In these situations, use RMAN to restore backups of the data files and then <a id="sthref708"></a>recover the database. The procedures for RMAN media recovery in Oracle RAC environments do not differ substantially from the media recovery procedures for noncluster environments.</p>
<p>The node that performs the recovery must be able to restore all of the required data files. That node must also be able to either read all of the required archived redo logs on disk or be able to restore them from backups.</p>
<p>When recovering a database with encrypted tablespaces (for example after a <code dir="ltr">SHUTDOWN ABORT</code> or a catastrophic error that brings down the database instance), you must open the Oracle Wallet after database mount and before you open the database, so the recovery process can decrypt data blocks and redo.</p>
</div>
<!-- class="sect1" -->
<a id="i491126"></a>
<div id="RACAD066" class="sect1">
<h2 class="sect1">Parallel Recovery in Oracle RAC</h2>
<p>Oracle Database automatically selects the optimum degree of parallelism for instance, crash, and media recovery. Oracle Database applies archived redo logs using an optimal number of parallel processes based on the availability of CPUs. You can use parallel instance recovery and parallel media recovery in Oracle RAC databases as described under the following topics:</p>
<ul>
<li>
<p><a href="#i491018">Parallel Recovery with RMAN</a></p>
</li>
<li>
<p><a href="#i491055">Disabling Parallel Recovery</a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information on these topics</div>
</li>
</ul>
<a id="i491018"></a>
<div id="RACAD890" class="sect2">
<h3 class="sect2">Parallel Recovery with RMAN</h3>
<p><a id="i491020"></a>With RMAN's <code dir="ltr">RESTORE</code> and <code dir="ltr">RECOVER</code> commands, Oracle Database automatically makes parallel the following three stages of recovery:</p>
<p><a id="i491034"></a><a id="RACAD7706"></a><span class="subhead3"><span class="bold">Restoring Data Files</span>&nbsp;</span>When restoring data files, the number of channels you allocate in the RMAN recover script effectively sets the parallelism that RMAN uses. For example, if you allocate five channels, you can have up to five parallel streams restoring data files.</p>
<p><a id="i491037"></a><a id="RACAD7707"></a><span class="subhead3"><span class="bold">Applying Incremental Backups</span>&nbsp;</span>Similarly, when you are applying incremental backups, the number of channels you allocate determines the potential parallelism.</p>
<p><a id="i491040"></a><a id="RACAD7708"></a><span class="subhead3"><span class="bold">Applying Archived Redo Logs</span>&nbsp;</span>With RMAN, the application of <a id="sthref709"></a>archived redo logs is performed in parallel. Oracle Database automatically selects the optimum degree of parallelism based on available CPU resources.</p>
</div>
<!-- class="sect2" -->
<a id="i491055"></a>
<div id="RACAD892" class="sect2">
<h3 class="sect2">Disabling Parallel Recovery</h3>
<p>You can override <a id="sthref710"></a>parallel recovery using the procedures under the following topics:</p>
<ul>
<li>
<p><a href="#BABDEAJF">Disabling Instance and Crash Recovery Parallelism</a></p>
</li>
<li>
<p><a href="#BABCFHEJ">Disabling Media Recovery Parallelism</a></p>
</li>
</ul>
<a id="BABDEAJF"></a>
<div id="RACAD7338" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Disabling Instance and Crash Recovery Parallelism</h4>
<p><a id="sthref711"></a><a id="sthref712"></a>To disable parallel instance and crash recovery on a system with multiple CPUs, set the <a id="sthref713"></a><a id="sthref714"></a><code dir="ltr">RECOVERY_PARALLELISM</code> parameter in the database initialization parameter file, SPFILE, to <code dir="ltr">0</code> or <code dir="ltr">1</code>.</p>
</div>
<!-- class="sect3" -->
<a id="BABCFHEJ"></a>
<div id="RACAD7072" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Disabling Media Recovery Parallelism</h4>
<p>Use the <code dir="ltr">NOPARALLEL</code> clause of the RMAN <code dir="ltr">RECOVER</code> command or the <code dir="ltr">ALTER DATABASE RECOVER</code> statement to force Oracle Database to use non-parallel media recovery.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEGJFG"></a>
<div id="RACAD895" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using a Fast Recovery Area in Oracle RAC</h2>
<p>To use a <a id="sthref715"></a><a id="sthref716"></a><a id="sthref717"></a>fast recovery area in Oracle RAC, you must place it on an Oracle ASM disk group, a Cluster File System, or on a shared directory that is configured through a network file system file for each Oracle RAC instance. In other words, the fast recovery area must be shared among all of the instances of an Oracle RAC database. In addition, set the parameter <code dir="ltr">DB_RECOVERY_FILE_DEST</code> to the same value on all instances.</p>
<p><a id="sthref718"></a>Oracle Enterprise Manager enables you to set up a fast recovery area. To use this feature:</p>
<ol>
<li>
<p>From the Cluster Database home page, click the <span class="bold">Maintenance</span> tab.</p>
</li>
<li>
<p>Under the Backup/Recovery options list, click <span class="bold">Configure Recovery Settings</span>.</p>
</li>
<li>
<p>Specify your requirements in the Fast Recovery Area section of the page.</p>
</li>
<li>
<p>Click <span class="bold">Help</span> on this page for more information.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV8183" href="../../backup.112/e10642/rcmconfb.htm#BRADV8183"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about setting up and configuring the fast recovery area</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="rman.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="clonerac.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
