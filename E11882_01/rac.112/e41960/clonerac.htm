<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Cloning Oracle RAC to Nodes in a New Cluster</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="backup.htm" title="Previous" type="text/html" />
<link rel="Next" href="cloneracwithoui.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">13/24</span> <!-- End Header -->
<div id="RACAD03202" class="chapter"><a id="CHDGFHCA"></a>
<h1 class="chapter"><span class="secnum">8</span> Cloning Oracle RAC to Nodes in a New Cluster</h1>
<p>This chapter describes how to <a id="sthref719"></a><a id="sthref720"></a><a id="sthref721"></a>clone Oracle Real Application Clusters (Oracle RAC) database homes on Linux and UNIX systems to nodes in a new cluster. To extend Oracle RAC to nodes in an existing cluster, see <a href="cloneracwithoui.htm#BCGEJGAJ">Chapter 9, "Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster"</a>.</p>
<p>This chapter describes a noninteractive cloning technique that you implement with scripts. The cloning techniques described in this chapter are best suited for performing <a id="sthref722"></a>multiple simultaneous cluster installations. Creating the scripts is a manual process and can be error prone. If you only have one cluster to install, then you should use the traditional automated and interactive installation methods, such as Oracle Universal Installer, or the Provisioning Pack feature of Oracle Enterprise Manager.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Cloning is not a replacement for Oracle Enterprise Manager cloning that is a part of the Provisioning Pack. During Oracle Enterprise Manager cloning, the provisioning process interactively asks you the details about the Oracle home (such as the location to which you want to deploy the clone, the name of the Oracle Database home, a list of the nodes in the cluster, and so on).
<p>The Provisioning Pack feature of Oracle Enterprise Manager Grid Control provides a framework to make it easy for you to automate the provisioning of new nodes and clusters. For data centers with many Oracle RAC clusters, the investment in creating a cloning procedure to easily provision new clusters and new nodes to existing clusters is worth the effort.</p>
</div>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#BABGAGEC">Introduction to Cloning Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABDFEBB">Preparing to Clone Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABEGEFC">Deploying Oracle RAC Clone to Nodes in a Cluster</a></p>
</li>
<li>
<p><a href="#BCGJCDBB">Locating and Viewing Log Files Generated During Cloning</a></p>
</li>
</ul>
<a id="BABGAGEC"></a>
<div id="RACAD7331" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Introduction to Cloning Oracle RAC</h2>
<p>Cloning is the process of copying an existing Oracle RAC installation to a different location and updating the copied bits to work in the new environment. The changes made by one-off patches applied on the source Oracle home, would also be present after the clone operation. The source and the destination path (host to be cloned) need not be the same.</p>
<p>Some situations in which cloning is useful are<a id="sthref723"></a>:</p>
<ul>
<li>
<p>Cloning provides a way to prepare an Oracle home once and deploy it to many hosts simultaneously. You can complete the installation silently, as a noninteractive process. You do not need to use a graphical user interface (GUI) console and you can perform cloning from a Secure Shell (SSH) terminal session, if required.</p>
</li>
<li>
<p>Cloning enables you to create an installation (copy of a production, test, or development installation) with all patches applied to it in a single step. Once you have performed the base installation and applied all patch sets and patches on the source system, the clone performs all of these individual steps as a single procedure. This is in contrast to going through the installation process to perform the separate steps to install, configure, and patch the installation on each node in the cluster.</p>
</li>
<li>
<p>Installing Oracle RAC by cloning is a very quick process. For example, cloning an Oracle home to a new cluster of more than two nodes requires a few minutes to install the Oracle base software, plus a few minutes more for each node (approximately the amount of time it takes to run the <code dir="ltr">root.sh</code> script).</p>
</li>
</ul>
<p>The cloned installation behaves the same as the source installation. For example, the cloned Oracle home can be removed using Oracle Universal Installer or patched using OPatch. You can also use the cloned Oracle home as the source for another cloning operation. You can create a cloned copy of a test, development, or production installation by using the command-line cloning scripts. The default cloning procedure is adequate for most usage cases. However, you can also customize various aspects of cloning, for example, to specify custom port assignments, or to preserve custom settings.</p>
<p>The cloning process works by copying all of the files from the source Oracle home to the destination Oracle home. Thus, any files used by the source instance that are located outside the source Oracle home's directory structure are not copied to the destination location.</p>
<p>The <a id="sthref724"></a>size of the binaries at the source and the destination may differ because these are relinked as part of the clone operation and the operating system patch levels may also differ between these two locations. Additionally, the number of files in the cloned home would increase because several files copied from the source, specifically those being instantiated, are backed up as part of the clone operation.</p>
</div>
<!-- class="sect1" -->
<a id="BABDFEBB"></a>
<div id="RACAD7332" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Preparing to Clone Oracle RAC<a id="sthref725"></a><a id="sthref726"></a></h2>
<p>In the preparation phase, you create a copy of an Oracle home that you then use to perform the cloning procedure on one or more nodes. You also install Oracle Clusterware.</p>
<dl>
<dd><a id="RACAD8335"></a><a id="sthref727"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Install Oracle RAC</dt>
<dd>
<p>Use the detailed instructions in the <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Real Application Clusters Installation Guide</span></a> to install the Oracle RAC software and patches:</p>
<ol>
<li>
<p>Install Oracle RAC and choose the <span class="bold">Software only</span> installation option.</p>
</li>
<li>
<p>Patch the release to the required level (for example, 11.2.0.<span class="italic">n</span>).</p>
</li>
<li>
<p>Apply one-off patches, if necessary.</p>
</li>
</ol>
</dd>
<dd><a id="RACAD8336"></a><a id="sthref728"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Create a backup of the source home</dt>
<dd>
<p>Create a copy of the Oracle RAC home. Use this file to copy the <a id="sthref729"></a>Oracle RAC home to each node in the cluster (as described in <a href="#BABEGEFC">"Deploying Oracle RAC Clone to Nodes in a Cluster"</a>).</p>
<p>When creating the backup (tar) file, the best practice is to include the release number in the name of the file. For example:</p>
<pre dir="ltr">
# cd /opt/oracle/product/11g/db_1
# tar &ndash;zcvf /<span class="italic">pathname</span>/db1120.tgz .
</pre></dd>
<dd><a id="RACAD8337"></a><a id="sthref730"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Install and start Oracle Clusterware</dt>
<dd>
<p>Before you can use cloning to create an Oracle RAC home, you must first install and start Oracle Clusterware on the node or nodes to which you want to copy a cloned Oracle RAC home. In other words, you configure an Oracle RAC home that you cloned from a source cluster onto the nodes in a target cluster in the same order that you installed the Oracle Clusterware and Oracle RAC software components on the original nodes.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD03202" href="../../rac.112/e41959/clonecluster.htm#CWADD03202"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about <a id="sthref731"></a>cloning <a id="sthref732"></a>Oracle Clusterware homes to create new clusters, and starting Oracle Clusterware by issuing the <code dir="ltr">crsctl start crs</code> command</div>
</dd>
</dl>
</div>
<!-- class="sect1" -->
<a id="BABEGEFC"></a>
<div id="RACAD7333" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Deploying Oracle RAC Clone to Nodes in a Cluster<a id="sthref733"></a><a id="sthref734"></a></h2>
<p>After you complete the <a id="sthref735"></a>prerequisite tasks described in <a href="#BABDFEBB">"Preparing to Clone Oracle RAC"</a>, you can deploy cloned Oracle homes.</p>
<p>Deploying the Oracle RAC database home to a cluster is a multiple-step process.</p>
<p>This section provides step-by-step instructions that describe how to:</p>
<ol>
<li>
<p><a href="#CHDIGIII">Prepare the new cluster nodes</a></p>
</li>
<li>
<p><a href="#CHDIGHEE">Deploy the Oracle RAC database software</a></p>
</li>
<li>
<p><a href="#CHDFCHCA">Run the clone.pl script on each node</a></p>
</li>
<li>
<p><a href="#CHDCJEAG">Run the $ORACLE_HOME/root.sh script on each node</a></p>
</li>
<li>
<p><a href="#CHDFJEGB">Run DBCA on one node to create the Oracle RAC instances on each node</a></p>
</li>
</ol>
<dl>
<dd><a id="RACAD8338"></a><a id="CHDIGIII"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Prepare the new cluster nodes</dt>
<dd>
<p>Perform the Oracle RAC preinstallation steps, including such things as:</p>
<ul>
<li>
<p>Specify the kernel parameters.</p>
</li>
<li>
<p>Ensure Oracle Clusterware is active.</p>
</li>
<li>
<p>Ensure that Oracle ASM is active and that at least one Oracle ASM disk group exists and is mounted.</p>
</li>
</ul>
<p>See your platform-specific Oracle RAC installation guide for a complete preinstallation checklist.</p>
</dd>
<dd><a id="RACAD8339"></a><a id="CHDIGHEE"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Deploy the Oracle RAC database software</dt>
<dd>
<p>To deploy the Oracle RAC software, you must:</p>
<ol>
<li>
<p>Copy the clone of the Oracle home to all nodes. For example:</p>
<pre dir="ltr">
[root@node1 root]# mkdir -p /opt/oracle/product/11g/db
[root@node1 root]# cd /opt/oracle/product/11g/db
[root@node1 db]# tar &ndash;zxvf /<span class="italic">path_name</span>/db1120.tgz
</pre>
<p>When providing the home location and <code dir="ltr"><span class="codeinlineitalic">path_name</span></code>, the home location can be in the same directory path or in a different directory path from the source home that you used to create the tar.</p>
</li>
<li>
<p>If either the <code dir="ltr">oracle</code> user or the <code dir="ltr">oinstall</code> group, or both is different between the source and destination nodes, then change the ownership of the Oracle Inventory files, as follows:</p>
<pre dir="ltr">
[root@node1]# chown -R oracle:oinstall /opt/oracle/product/11g/db
</pre>
<p>When you run the preceding command on the Grid home, it clears <code dir="ltr">setuid</code> and <code dir="ltr">setgid</code> information from the Oracle binary.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can perform this step at the same time you perform Step <a href="#CHDFCHCA">3</a> and Step <a href="#CHDCJEAG">4</a> to run the <code dir="ltr">clone.pl</code> and <code dir="ltr">$ORACLE_HOME/root.sh</code> scripts on each cluster node.</div>
</li>
</ol>
</dd>
<dd><a id="RACAD8340"></a><a id="CHDFCHCA"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Run the clone.pl script on each node</dt>
<dd>
<p>To run the <code dir="ltr">clone.pl</code> script, which performs the main Oracle RAC cloning tasks, you must:</p>
<ul>
<li>
<p>Supply the environment variables and cloning parameters in the <code dir="ltr">start.sh</code> script, as described in <a href="#CHDICHEI">Table 8-2</a> and <a href="#CHDIADDC">Table 8-3</a>. Because the <code dir="ltr">clone.pl</code> script is sensitive to the parameters being passed to it, you must be accurate in your use of brackets, single quotation marks, and double quotation marks.</p>
</li>
<li>
<p>Run the script as <code dir="ltr">oracle</code> or the user that owns the Oracle RAC software.</p>
</li>
</ul>
<p><a href="#BABHJGAI">Table 8-1</a> lists and describes the <code dir="ltr">clone.pl</code> script parameters.</p>
<div id="RACAD7900" class="tblhruleformal">
<p class="titleintable"><a id="sthref736"></a><a id="BABHJGAI"></a>Table 8-1 clone.pl Script Parameters</p>
<table class="cellalignment432" title="clone.pl Script Parameters" summary="This table lists and describes parameters used with the clone.pl script." dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t5">Parameter</th>
<th class="cellalignment430" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t5" headers="r1c1-t5">
<pre dir="ltr">
ORACLE_HOME=<span class="italic">Oracle_home</span>
</pre></td>
<td class="cellalignment431" headers="r2c1-t5 r1c2-t5">
<p>The complete path to the Oracle home you want to clone. If you specify an invalid path, then the script exits. This parameter is required.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t5" headers="r1c1-t5">
<pre dir="ltr">
ORACLE_BASE=<span class="italic">ORACLE_BASE</span>
</pre></td>
<td class="cellalignment431" headers="r3c1-t5 r1c2-t5">
<p>The complete path to the Oracle base you want to clone. If you specify an invalid path, then the script exits. This parameter is required.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t5" headers="r1c1-t5">
<pre dir="ltr">
ORACLE_HOME_NAME=
<span class="italic">Oracle_home_name</span> |
-defaultHomeName
</pre></td>
<td class="cellalignment431" headers="r4c1-t5 r1c2-t5">
<p>The Oracle home name of the home you want to clone. Optionally, you can specify the <code dir="ltr">-defaultHomeName</code> flag. This parameter is optional.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r5c1-t5" headers="r1c1-t5">
<pre dir="ltr">
OSDBA_GROUP=<span class="italic">group_name</span>
</pre></td>
<td class="cellalignment431" headers="r5c1-t5 r1c2-t5">
<p>Specify the operating system group you want to use as the OSDBA privileged group. This parameter is optional.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r6c1-t5" headers="r1c1-t5">
<pre dir="ltr">
OSOPER_GROUP=<span class="italic">group_name</span>
</pre></td>
<td class="cellalignment431" headers="r6c1-t5 r1c2-t5">
<p>Specify the operating system group you want to use as the OSOPER privileged group. This parameter is optional.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r7c1-t5" headers="r1c1-t5">
<pre dir="ltr">
OSASM_GROUP=<span class="italic">group_name</span>
</pre></td>
<td class="cellalignment431" headers="r7c1-t5 r1c2-t5">
<p>Specify the operating system group you want to use as the OSASM privileged group. This parameter is optional.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r8c1-t5" headers="r1c1-t5">
<pre dir="ltr">
-O
</pre></td>
<td class="cellalignment431" headers="r8c1-t5 r1c2-t5">
<p>The <code dir="ltr">clone.pl</code> script passes anything following this flag to the Oracle Universal Installer command line.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r9c1-t5" headers="r1c1-t5">
<pre dir="ltr">
-debug
</pre></td>
<td class="cellalignment431" headers="r9c1-t5 r1c2-t5">
<p>Specify this option to run the <code dir="ltr">clone.pl</code> script in debug mode</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r10c1-t5" headers="r1c1-t5">
<pre dir="ltr">
-help
</pre></td>
<td class="cellalignment431" headers="r10c1-t5 r1c2-t5">
<p>Specify this option to obtain help for the <code dir="ltr">clone.pl</code> script.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><a href="#CHDDDJJD">Example 8-1</a> shows an excerpt from the <code dir="ltr">start.sh</code> script that calls the <code dir="ltr">clone.pl</code> script.</p>
<div id="RACAD7701" class="example">
<p class="titleinexample"><a id="CHDDDJJD"></a>Example 8-1 Excerpt From the start.sh Script to Clone Oracle RAC for Linux and UNIX</p>
<pre dir="ltr">
ORACLE_BASE=/opt/oracle
ORACLE_HOME=/opt/oracle/product/11g/db
cd $ORACLE_HOME/clone
THISNODE=&amp;rsquor;hostname -s&amp;rsquor;

<span class="bold">E01</span>=ORACLE_HOME=/opt/oracle/product/11g/db
<span class="bold">E02</span>=ORACLE_HOME_NAME=OraDBRAC
<span class="bold">E03</span>=ORACLE_BASE=/opt/oracle
<span class="bold">C01</span>="-O'\"CLUSTER_NODES={node1, node2}\"'"
<span class="bold">C02</span>="-O'\"LOCAL_NODE=$THISNODE\"'"

perl $ORACLE_HOME/clone/bin/clone.pl $E01 $E02 $E03 $C01 $C02
</pre></div>
<!-- class="example" -->
<p><a href="#BHCIGDAI">Example 8-2</a> shows an excerpt from the <code dir="ltr">start.bat</code> script that the user must create that calls the <code dir="ltr">clone.pl</code> script.</p>
<div id="RACAD7702" class="example">
<p class="titleinexample"><a id="BHCIGDAI"></a>Example 8-2 Excerpt From the start.bat Script to Clone Oracle RAC for Windows</p>
<pre dir="ltr">
set ORACLE_home=C:\oracle\product\11g\db1
cd %ORACLE_home%\clone\bin
set THISNODE=%hostname%
set E01=ORACLE_HOME=%ORACLE_home%
set E02=ORACLE_HOME_NAME=OraDBRAC
set E03=ORACLE_BASE=<span class="italic">Oracle_Base</span>
set C01="-O'\"CLUSTER_NODES={node1,node2}\"'"
set C02="-O'\"LOCAL_NODE=%THISNODE%\"'"
perl clone.pl %E01% %E02% %E03% %C01% %C02%
</pre></div>
<!-- class="example" -->
<p><a href="#CHDICHEI">Table 8-2</a> describes the environment variables E01, E02, and E03 that are shown in bold typeface in <a href="#CHDDDJJD">Example 8-1</a>.</p>
<div id="RACAD7703" class="tblformal">
<p class="titleintable"><a id="sthref737"></a><a id="CHDICHEI"></a>Table 8-2 <a id="sthref738"></a><a id="sthref739"></a>Environment Variables Passed to the clone.pl Script</p>
<table class="cellalignment429" title="Environment Variables Passed to the clone.pl Script" summary="This table describes the 3 environment variables that you must pass to the clone.pl script." dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t6">Symbol</th>
<th class="cellalignment430" id="r1c2-t6">Variable</th>
<th class="cellalignment430" id="r1c3-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t6" headers="r1c1-t6">
<p>E01</p>
</td>
<td class="cellalignment431" headers="r2c1-t6 r1c2-t6">
<p><code dir="ltr"><a id="sthref740"></a><a id="sthref741"></a>ORACLE_HOME</code></p>
</td>
<td class="cellalignment431" headers="r2c1-t6 r1c3-t6">
<p>The location of the Oracle RAC database home. This directory location must exist and must be owned by&thinsp;the Oracle operating system group: <code dir="ltr">oinstall</code>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t6" headers="r1c1-t6">
<p>E02</p>
</td>
<td class="cellalignment431" headers="r3c1-t6 r1c2-t6">
<p><code dir="ltr"><a id="sthref742"></a><a id="sthref743"></a>ORACLE_HOME_NAME</code></p>
</td>
<td class="cellalignment431" headers="r3c1-t6 r1c3-t6">
<p>The name of the Oracle home for the Oracle RAC database. This is stored in the Oracle Inventory.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t6" headers="r1c1-t6">
<p>E03</p>
</td>
<td class="cellalignment431" headers="r4c1-t6 r1c2-t6">
<p><code dir="ltr"><a id="sthref744"></a><a id="sthref745"></a>ORACLE_BASE</code></p>
</td>
<td class="cellalignment431" headers="r4c1-t6 r1c3-t6">
<p>The location of the Oracle Base directory.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p><a href="#CHDIADDC">Table 8-3</a> describes the cloning parameters C01 and C02, that are shown in bold typeface in <a href="#CHDDDJJD">Example 8-1</a>.</p>
<div id="RACAD7704" class="tblformal">
<p class="titleintable"><a id="sthref746"></a><a id="CHDIADDC"></a>Table 8-3 Cloning Parameters <a id="sthref747"></a><a id="sthref748"></a>Passed to the clone.pl Script.</p>
<table class="cellalignment429" title="Cloning Parameters Passed to the clone.pl Script." summary="This table describes the eight cloning parameters that are passed to the clone.pl script." dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t7">Variable</th>
<th class="cellalignment430" id="r1c2-t7">Name</th>
<th class="cellalignment430" id="r1c3-t7">Parameter</th>
<th class="cellalignment430" id="r1c4-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t7" headers="r1c1-t7">
<p>C01</p>
</td>
<td class="cellalignment431" headers="r2c1-t7 r1c2-t7">
<p><a id="sthref749"></a>Cluster Nodes</p>
</td>
<td class="cellalignment431" headers="r2c1-t7 r1c3-t7">
<p><code dir="ltr"><a id="sthref750"></a>CLUSTER_NODES</code></p>
</td>
<td class="cellalignment431" headers="r2c1-t7 r1c4-t7">
<p>Lists the nodes in the cluster.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t7" headers="r1c1-t7">
<p>C02</p>
</td>
<td class="cellalignment431" headers="r3c1-t7 r1c2-t7">
<p><a id="sthref751"></a>Local Node</p>
</td>
<td class="cellalignment431" headers="r3c1-t7 r1c3-t7">
<p><a id="sthref752"></a><code dir="ltr">LOCAL_NODE</code></p>
</td>
<td class="cellalignment431" headers="r3c1-t7 r1c4-t7">
<p>The name of the local node.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></dd>
<dd><a id="RACAD8341"></a><a id="CHDCJEAG"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;Run the <a id="sthref753"></a><a id="sthref754"></a><a id="sthref755"></a><a id="sthref756"></a>$ORACLE_HOME/root.sh script on each node</dt>
<dd>
<div class="infobox-note">
<p class="notep1">Note:</p>
This step applies to Linux and UNIX installations, only.</div>
<p>Run the <code dir="ltr">$ORACLE_HOME/root.sh</code> as the <code dir="ltr">root</code> operating system user as soon as the <code dir="ltr">clone.pl</code> procedure completes on the node.</p>
<pre dir="ltr">
[root@node1 root]# /opt/oracle/product/11g/db/root.sh -silent
</pre>
<p>Note that you can run the script on each node simultaneously:</p>
<pre dir="ltr">
[root@node2 root]# /opt/oracle/product/11g/db/root.sh -silent
</pre>
<p>Ensure the script has completed on each node before proceeding to the next step.</p>
</dd>
<dd><a id="RACAD8342"></a><a id="CHDFJEGB"></a></dd>
<dt class="seghead">Step 5&nbsp;&nbsp;&nbsp;Run DBCA on one node to create the Oracle RAC instances on each <a id="sthref757"></a><a id="sthref758"></a>node</dt>
<dd>
<div class="infobox-note">
<p class="notep1">Note:</p>
You need only run DBCA on one node in the cluster to create Oracle RAC instances on all nodes.</div>
<p>This step shows how to run the DBCA in silent mode and provide response file input to create the Oracle RAC instances.</p>
<p>The following example creates an Oracle RAC database named ERI on each node, creates database instances on each node, registers the instances in OCR, creates the database files in the Oracle ASM disk group called <code dir="ltr">DATA</code>, and creates sample schemas. It also sets the <code dir="ltr">SYS</code>, <code dir="ltr">SYSTEM</code>, <code dir="ltr">SYSMAN</code> and <code dir="ltr">DBSNMP</code> passwords to <code dir="ltr"><span class="codeinlineitalic">password</span></code>, which is the password for each account:</p>
<pre dir="ltr">
[oracle@node1 oracle]$ export ORACLE_HOME=/opt/oracle/product/11g/db
[oracle@node1 oracle]$ cd $ORACLE_HOME/bin/
[oracle@node1 bin]$./dbca -silent -createDatabase -templateName General_Purpose.dbc \
-gdbName ERI -sid ERI \
-sysPassword <span class="italic">password</span> -systemPassword <span class="italic">password</span> \
-sysmanPassword <span class="italic">password</span> -dbsnmpPassword <span class="italic">password</span> \
-emConfiguration LOCAL \
-storageType ASM -diskGroupName DATA \
-datafileJarLocation $ORACLE_HOME/assistants/dbca/templates \
-nodelist node1,node2 -characterset WE8ISO8859P1 \
-obfuscatedPasswords false -sampleSchema true
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMQS023" href="../../server.112/e10897/install.htm#ADMQS023"><span class="italic">Oracle Database 2 Day DBA</span></a> for information about using DBCA to create and configure a database</div>
</dd>
</dl>
</div>
<!-- class="sect1" -->
<a id="BCGJCDBB"></a>
<div id="RACAD7336" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Locating and Viewing Log Files Generated During Cloning<a id="sthref759"></a></h2>
<p>The cloning script runs multiple tools, each of which may generate its own log files. After the <a id="sthref760"></a><a id="sthref761"></a><code dir="ltr">clone.pl</code> script finishes running, you can view log files to obtain more information about the cloning process.</p>
<p>The following log files that are generated during cloning are the key log files of interest for diagnostic purposes:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">Central_Inventory</span></code><code dir="ltr">/logs/cloneActions</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.log</code></p>
<p>Contains a detailed log of the actions that occur during the Oracle Universal Installer part of the cloning.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">Central_Inventory</span></code><code dir="ltr">/logs/oraInstall</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.err</code></p>
<p>Contains information about errors that occur when Oracle Universal Installer is running.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">Central_Inventory</span></code><code dir="ltr">/logs/oraInstall</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.out</code></p>
<p>Contains other miscellaneous messages generated by Oracle Universal Installer.</p>
</li>
<li>
<p><code dir="ltr">$ORACLE_HOME/clone/logs/clone</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.log</code></p>
<p>Contains a detailed log of the actions that occur before cloning and during the cloning operations.</p>
</li>
<li>
<p><code dir="ltr">$ORACLE_HOME/clone/logs/error</code><code dir="ltr"><span class="codeinlineitalic">timestamp</span></code><code dir="ltr">.log</code></p>
<p>Contains information about errors that occur before cloning and during cloning operations.</p>
</li>
</ul>
<p><a href="#BABHHGBH">Table 8-4</a> describes how to find the location of the Oracle inventory directory.</p>
<div id="RACAD7705" class="tblformal">
<p class="titleintable"><a id="sthref762"></a><a id="BABHHGBH"></a>Table 8-4 Finding the Location of the Oracle Inventory Directory</p>
<table class="cellalignment429" title="Finding the Location of the Oracle Inventory Directory" summary="This table describes how to find the location of the Oracle inventory directory" dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t11">Type of System...</th>
<th class="cellalignment430" id="r1c2-t11">Location of the Oracle Inventory Directory</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t11" headers="r1c1-t11">
<p>All UNIX computers except Linux and IBM AIX</p>
</td>
<td class="cellalignment431" headers="r2c1-t11 r1c2-t11">
<p><code dir="ltr">/var/opt/oracle/oraInst.loc</code></p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t11" headers="r1c1-t11">
<p>IBM AIX and Linux</p>
</td>
<td class="cellalignment431" headers="r3c1-t11 r1c2-t11">
<p><code dir="ltr">/etc/oraInst.loc</code> file.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t11" headers="r1c1-t11">
<p>Windows</p>
</td>
<td class="cellalignment431" headers="r4c1-t11 r1c2-t11">
<p><code dir="ltr">C:\Program Files\Oracle\Inventory</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="backup.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="cloneracwithoui.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
