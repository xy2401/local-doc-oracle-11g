<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="clonerac.htm" title="Previous" type="text/html" />
<link rel="Next" href="adddelunix.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/24</span> <!-- End Header -->
<div id="RACAD007" class="chapter"><a id="BCGEJGAJ"></a>
<h1 class="chapter"><span class="secnum">9</span> Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster</h1>
<p>This chapter provides information about using cloning to extend Oracle Real Application Clusters (Oracle RAC) to nodes in an existing cluster. To add Oracle RAC to nodes in a new cluster, see <a href="clonerac.htm#CHDGFHCA">Chapter 8, "Cloning Oracle RAC to Nodes in a New Cluster"</a>.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABFJGHG">About Adding Nodes Using Cloning in Oracle RAC Environments</a></p>
</li>
<li>
<p><a href="#BABDCBGD">Cloning Local Oracle Homes on Linux and UNIX Systems</a></p>
</li>
<li>
<p><a href="#CIHFFIJB">Cloning Shared Oracle Homes on Linux and UNIX Systems</a></p>
</li>
<li>
<p><a href="#CIHICJFE">Cloning Oracle Homes on Windows Systems</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="clonerac.htm#BABGAGEC">"Introduction to Cloning Oracle RAC"</a> for an overview of cloning and a discussion about the benefits of cloning</p>
</li>
<li>
<p><a class="olink CWADD1167" href="../../rac.112/e41959/adddelclusterware.htm#CWADD1167"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about adding nodes to your cluster</p>
</li>
</ul>
</div>
<a id="BABFJGHG"></a>
<div id="RACAD8291" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Adding Nodes Using Cloning in Oracle RAC Environments</h2>
<p><a id="sthref763"></a>The cloning procedures assume that you have successfully installed and configured an Oracle RAC environment to which you want to add nodes and instances. To add nodes to an Oracle RAC environment using cloning, first extend the Oracle Clusterware configuration, then extend the Oracle Database software with Oracle RAC, and then add the listeners and instances by running the Oracle assistants</p>
<p>The cloning script runs multiple tools, each of which may generate its own log files. After the <code dir="ltr">clone.pl</code> script finishes running, you can view log files to obtain more information about the cloning process. See <a href="clonerac.htm#BCGJCDBB">"Locating and Viewing Log Files Generated During Cloning"</a> for more information.</p>
</div>
<!-- class="sect1" -->
<a id="BABDCBGD"></a>
<div id="RACAD8292" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Cloning Local Oracle Homes on Linux and UNIX Systems</h2>
<p>This section explains how to add nodes to existing Oracle RAC environments by cloning a local (non-shared) Oracle home in Linux and UNIX system environments.</p>
<p>Complete the following steps to clone Oracle Database with Oracle RAC software:</p>
<ol>
<li>
<p>Follow the steps in the <a href="clonerac.htm#BABDFEBB">"Preparing to Clone Oracle RAC"</a> to create a copy of an Oracle home that you then use to perform the cloning procedure on one or more nodes.</p>
</li>
<li>
<p>Use the <code dir="ltr">tar</code> utility to create an archive of the Oracle home on the existing node and copy it to the new node. If the location of the Oracle home on the source node is <code dir="ltr">$ORACLE_HOME</code>, then you must use this same directory as the destination location on the new node.</p>
</li>
<li>
<p>On the new node, configure the environment variables <code dir="ltr">ORACLE_HOME</code> and <code dir="ltr">ORACLE_BASE</code>. Then go to the <code dir="ltr">$ORACLE_HOME/clone/bin</code> directory and run the following command where <code dir="ltr"><span class="codeinlineitalic">existing_node</span></code> is the name of the node that you are cloning, <code dir="ltr"><span class="codeinlineitalic">new_node2</span></code> and <code dir="ltr"><span class="codeinlineitalic">new_node3</span></code> are the names of the new nodes, and <code dir="ltr"><span class="codeinlineitalic">Oracle_home_name</span></code> is the name of the Oracle home:</p>
<pre dir="ltr">
perl clone.pl '-O"CLUSTER_NODES={<span class="italic">existing_node,new_node2</span>,<span class="italic">new_node3</span>}"'
 '-O"LOCAL_NODE=<span class="italic">new_node2</span>"' ORACLE_BASE=$ORACLE_BASE ORACLE_HOME=$ORACLE_HOME
 ORACLE_HOME_NAME=<span class="italic">Oracle_home_name</span> '-O-noConfig' 
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you run this command on Windows, then <span class="italic">do not</span> use the <code dir="ltr">-O</code> option.</div>
</li>
<li>
<p>Run the following command to run the configuration assistants to configure Oracle RAC on the new nodes:</p>
<pre dir="ltr">
$ORACLE_HOME/cfgtoollogs/configToolFailedCommands
</pre>
<p>This script contains all commands that failed, were skipped, or were cancelled during the installation. You can use this script to run the database configuration assistants outside of Oracle Universal Installer. Note that before you run the script you should check the script to see if any passwords within it need to be updated.</p>
</li>
<li>
<p>Run the following command on the existing node from the <code dir="ltr">$ORACLE_HOME/oui/bin</code> directory to update the inventory in the Oracle Database home with Oracle RAC, specified by <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code>, where <code dir="ltr"><span class="codeinlineitalic">existing_node</span></code> is the name of the original node that you are cloning and <code dir="ltr"><span class="codeinlineitalic">new_node2</span></code> and <code dir="ltr"><span class="codeinlineitalic">new_node3</span></code> are the names of the new nodes:</p>
<pre dir="ltr">
./runInstaller -updateNodeList ORACLE_HOME=$ORACLE_HOME "CLUSTER_
NODES={<span class="italic">existing_node</span>,<span class="italic">new_node2,new_node3</span>}" 
</pre></li>
<li>
<p>On each new node, go to the <code dir="ltr">$ORACLE_HOME</code> directory and run the following command:</p>
<pre dir="ltr">
./root.sh
</pre></li>
<li>
<p>From the node that you cloned, run Database Configuration Assistant (DBCA) to add Oracle RAC database instances on the new nodes.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHFFIJB"></a>
<div id="RACAD8293" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Cloning Shared Oracle Homes on Linux and UNIX Systems</h2>
<p>This section explains how to add nodes to existing Oracle RAC environments by cloning a shared Oracle home in Linux and UNIX system environments.</p>
<p>Complete the following steps to clone Oracle Database with Oracle RAC software:</p>
<ol>
<li>
<p>Follow the steps in the <a href="clonerac.htm#BABDFEBB">"Preparing to Clone Oracle RAC"</a> to create a copy of an Oracle home that you then use to perform the cloning procedure on one or more nodes.</p>
</li>
<li>
<p>On the new node, configure the environment variables <code dir="ltr">ORACLE_HOME</code> and <code dir="ltr">ORACLE_BASE</code>. Then go to the <code dir="ltr">$ORACLE_HOME/clone/bin</code> directory and run the following command where <code dir="ltr"><span class="codeinlineitalic">existing_node</span></code> is the name of the node that you are cloning, <code dir="ltr"><span class="codeinlineitalic">new_node2</span></code> and <code dir="ltr"><span class="codeinlineitalic">new_node3</span></code> are the names of the new nodes, <code dir="ltr"><span class="codeinlineitalic">Oracle_home_name</span></code> is the name of the Oracle home, and the <code dir="ltr">-O-cfs</code> option indicates the Oracle home is shared:</p>
<pre dir="ltr">
perl clone.pl '-O"CLUSTER_NODES={existing_node,new_node2,new_node3}"'
'-O"LOCAL_NODE=new_node2"' ORACLE_BASE=$ORACLE_BASE ORACLE_HOME=$ORACLE_HOME
 ORACLE_HOME_NAME=<span class="italic">Oracle_home_name</span> '-O-noConfig' '-O-cfs'
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you run this command on Windows, then <span class="italic">do not</span> use the <code dir="ltr">-O</code> option.</div>
</li>
<li>
<p>Run the following command to run the configuration assistants to configure Oracle RAC on the new nodes:</p>
<pre dir="ltr">
$ORACLE_HOME/cfgtoollogs/configToolFailedCommands
</pre></li>
<li>
<p>Run the following command on the existing node from the <code dir="ltr">$ORACLE_HOME/oui/bin</code> directory to update the inventory in the Oracle Database home with Oracle RAC, specified by <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code>, where <code dir="ltr"><span class="codeinlineitalic">existing_node</span></code> is the name of the original node that you are cloning and <code dir="ltr"><span class="codeinlineitalic">new_node2</span></code> and <code dir="ltr"><span class="codeinlineitalic">new_node3</span></code> are the names of the new nodes:</p>
<pre dir="ltr">
./runInstaller -updateNodeList ORACLE_HOME=$ORACLE_HOME "CLUSTER_
NODES={<span class="italic">existing_node</span>,<span class="italic">new_node2,new_node3</span>}"
</pre></li>
<li>
<p>On each new node, go to the <code dir="ltr">$ORACLE_HOME</code> directory and run the following command:</p>
<pre dir="ltr">
./root.sh
</pre></li>
<li>
<p>From the node that you cloned, run Database Configuration Assistant (DBCA) to add Oracle RAC database instances to the new nodes.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CIHICJFE"></a>
<div id="RACAD8294" class="sect1">
<h2 class="sect1">Cloning Oracle Homes on Windows Systems</h2>
<p>This section explains how to add nodes to existing Oracle RAC environments by cloning a shared or local Oracle home in Windows system environments.</p>
<p>Complete the following steps to clone Oracle Database with Oracle RAC software:</p>
<ol>
<li>
<p>If you have a local Oracle home, then use the ZIP utility to create an archive of the Oracle Database home with Oracle RAC on the existing node and copy it to the new node. Otherwise, proceed to the next step.</p>
<p>Extract the Oracle Database with Oracle RAC home files from the ZIP file on the new node in the same directory in which the Oracle Database home with Oracle RAC resided on the existing node. For example, assume that the location of the destination Oracle RAC home on the new node is <code dir="ltr">%ORACLE_HOME%</code>.</p>
</li>
<li>
<p>On the new node, go to the <code dir="ltr">%ORACLE_HOME%\clone\bin</code> directory and run the following command where <code dir="ltr"><span class="codeinlineitalic">Oracle_Home</span></code> is the Oracle Database home, <code dir="ltr"><span class="codeinlineitalic">Oracle_Home_Name</span></code> is the name of the Oracle Database home, <code dir="ltr"><span class="codeinlineitalic">Oracle_Base</span></code> is the Oracle base directory, <code dir="ltr"><span class="codeinlineitalic">existing_node</span></code> is the name of the existing node, and <code dir="ltr"><span class="codeinlineitalic">new_node</span></code> is the name of the new node:</p>
<pre dir="ltr">
perl clone.pl ORACLE_HOME=<span class="italic">Oracle_Home</span> ORACLE_BASE=<span class="italic">Oracle_Base</span> 
 ORACLE_HOME_NAME=<span class="italic">Oracle_Home_Name</span> -O'"CLUSTER_NODES={<span class="italic">existing_node</span>,<span class="italic">new_node</span>}"'
 -O'"LOCAL_NODE=<span class="italic">new_node</span>"'
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you run this command on Windows, then <span class="italic">do not</span> use the <code dir="ltr">-O</code> option.</div>
<p>If you have a shared Oracle Database home with Oracle RAC, then append the <code dir="ltr">-cfs</code> option to the command to indicate that the Oracle home is shared, as shown in the following example:</p>
<pre dir="ltr">
perl clone.pl ORACLE_HOME=<span class="italic">Oracle_Home</span> ORACLE_BASE=<span class="italic">Oracle_Base</span> 
ORACLE_HOME_NAME=<span class="italic">Oracle_Home_Name</span> -O'"CLUSTER_NODES={<span class="italic">existing_node</span>,<span class="italic">new_node</span>}"'
-O'"LOCAL_NODE=<span class="italic">new_node</span>"' '-O-noConfig' '-O-cfs'
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you run this command on Windows, then <span class="italic">do not</span> use the <code dir="ltr">-O</code> option.</div>
</li>
<li>
<p>On the existing node, from the <code dir="ltr">%ORACLE_HOME%\oui\bin</code> directory run the following command to update the inventory in the Oracle Database home with Oracle RAC, specified by <code dir="ltr"><span class="codeinlineitalic">Oracle_home</span></code>, where <code dir="ltr"><span class="codeinlineitalic">existing_node</span></code> is the name of the existing node, and <code dir="ltr"><span class="codeinlineitalic">new_node</span></code> is the name of the new node:</p>
<pre dir="ltr">
setup.exe -updateNodeList ORACLE_HOME=<span class="italic">Oracle_home</span> "CLUSTER_NODES={<span class="italic">existing_node</span>,<span class="italic">new_node</span>}" LOCAL_NODE=<span class="italic">existing_node</span>
</pre></li>
<li>
<p>From the node that you cloned, run DBCA to add Oracle RAC database instances to the new nodes.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="clonerac.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="adddelunix.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
