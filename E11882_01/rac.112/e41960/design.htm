<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Design and Deployment Techniques</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="adddelwin.htm" title="Previous" type="text/html" />
<link rel="Next" href="monitor.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/24</span> <!-- End Header -->
<div id="RACAD755" class="chapter"><a id="CJHCIBIE"></a>
<h1 class="chapter"><span class="secnum">12</span> Design and Deployment Techniques</h1>
<p>This chapter briefly describes database design and deployment<a id="sthref815"></a><a id="sthref816"></a> techniques for Oracle Real Application Clusters (Oracle RAC) environments. It also describes considerations for high availability and provides general guidelines for various Oracle RAC deployments.</p>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#CJHGAGBD">Deploying Oracle RAC for High Availability</a></p>
</li>
<li>
<p><a href="#CJHBHJGG">General Design Considerations for Oracle RAC</a></p>
</li>
<li>
<p><a href="#i1006530">General Database Deployment Topics for Oracle RAC</a></p>
</li>
</ul>
<a id="CJHGAGBD"></a>
<div id="RACAD7386" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Deploying Oracle RAC for High Availability</h2>
<p>Many customers implement Oracle RAC to provide <a id="sthref817"></a><a id="sthref818"></a>high availability for their Oracle Database applications. For true high availability, you must make the entire infrastructure of the application highly available. This requires detailed planning to ensure there are no single points of failure throughout the infrastructure. Even though Oracle RAC makes your database highly available, if a critical application becomes unavailable, then your business can be negatively affected. For example, if you choose to use the Lightweight Directory Access Protocol (LDAP) for authentication, then you must make the LDAP server highly available. If the database is up but the users cannot connect to the database because the LDAP server is not accessible, then the entire system appears to be down to your users.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#CJHCAGDJ">About Designing a High Availability System</a></p>
</li>
<li>
<p><a href="#CACCDJEA">Best Practices for Deploying Oracle RAC in a High Availability Environment</a></p>
</li>
<li>
<p><a href="#CACBDHDB">Consolidating Multiple Applications in a Database or Multiple Databases in a Cluster</a></p>
</li>
<li>
<p><a href="#CACDEEDB">Scalability of Oracle RAC</a></p>
</li>
</ul>
<a id="CJHCAGDJ"></a>
<div id="RACAD8317" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Designing a High Availability System</h3>
<p>For <a id="sthref819"></a>mission critical systems, you must be able to perform failover and recovery, and your environment must be resilient to all types of failures. To reach these goals, start by defining service level requirements for your business. The requirements should include definitions of maximum transaction response time and recovery expectations for failures within the datacenter (such as for node failure) or for disaster recovery (if the entire data center fails). Typically, the <a id="sthref820"></a>service level objective is a target response time for work, regardless of failures. Determine the recovery time for each redundant component. Even though you may have hardware components that are running in an active/active mode, do not assume that if one component fails the other hardware components can remain operational while the faulty components are being repaired. Also, when components are running in active/passive mode, perform regular tests to validate the failover time. For example, recovery times for storage channels can take minutes. Ensure that the outage times are within your business' service level agreements, and where they are not, work with the hardware vendor to tune the configuration and settings.</p>
<p>When deploying mission critical systems, the testing should include functional testing, destructive testing, and performance testing. Destructive testing includes the injection of various faults in the system to test the recovery and to make sure it satisfies the service level requirements. Destructive testing also allows the creation of operational procedures for the production system.</p>
<p>To help you design and implement a mission critical or highly available system, Oracle provides a range of solutions for every organization regardless of size. Small workgroups and global enterprises alike are able to extend the reach of their critical business applications. With Oracle and the Internet, applications and their data are now reliably accessible everywhere, at any time. The <a id="sthref821"></a>Oracle Maximum Availability Architecture (MAA) is the Oracle best practices blueprint that is based on proven Oracle high availability technologies and recommendations. The goal of the MAA is to remove the complexity in designing an optimal high availability architecture.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink HAOVW" href="../../server.112/e17157/toc.htm"><span class="italic">Oracle Database High Availability Overview</span></a></p>
</li>
<li>
<p>Oracle Maximum Availability Architecture (MAA) Web site at</p>
<pre dir="ltr">
<a href="http://www.oracle.com/technology/deploy/availability/htdocs/maa.htm">http://www.oracle.com/technology/deploy/availability/htdocs/maa.htm</a>
</pre></li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACCDJEA"></a>
<div id="RACAD7387" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Best Practices for Deploying Oracle RAC in a High Availability Environment<a id="sthref822"></a><a id="sthref823"></a></h3>
<p>Applications can take advantage of many Oracle Database, Oracle Clusterware, and Oracle RAC features and capabilities to minimize or mask any failure in the Oracle RAC environment. For example, you can:</p>
<ul>
<li>
<p>Remove TCP/IP timeout waits by using the VIP address to connect to the database.</p>
</li>
<li>
<p>Create detailed operational procedures and ensure you have the appropriate support contracts in place to match defined service levels for all components in the infrastructure.</p>
</li>
<li>
<p>Take advantage of the Oracle RAC Automatic Workload Management features such as connect time failover, Fast Connection Failover, Fast Application Notification, and the Load Balancing Advisory. See <a href="hafeats.htm#BABIAICG">Chapter 5, "Introduction to Automatic Workload Management"</a> for more details.</p>
</li>
<li>
<p>Place voting disks on separate volume groups to mitigate outages due to slow I/O throughput. To survive the failure of <span class="italic">x</span> voting devices, configure 2<span class="italic">x</span> + 1 mirrors.</p>
</li>
<li>
<p>Use Oracle Database Quality of Service Management (Oracle Database QoS Management) to monitor your system and detect performance bottlenecks</p>
</li>
<li>
<p>Place OCR with I/O service times in the order of 2 milliseconds (ms) or less.</p>
</li>
<li>
<p>Tune database recovery using the <code dir="ltr">FAST_START_MTTR_TARGET</code> initialization parameter.</p>
</li>
<li>
<p>Use Oracle Automatic Storage Management (Oracle ASM) to manage database storage.</p>
</li>
<li>
<p>Ensure that strong change control procedures are in place.</p>
</li>
<li>
<p>Check the surrounding infrastructure for high availability and resiliency, such as LDAP, NIS, and DNS. These entities affect the availability of your Oracle RAC database. If possible, perform a local backup procedure routinely.</p>
</li>
<li>
<p>Use Oracle Enterprise Manager to administer your entire Oracle RAC environment, not just the Oracle RAC database. Use Oracle Enterprise Manager to create and modify services, and to start and stop the cluster database instances and the cluster database. See the <a class="olink TDPRC" href="../e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> for more information using Oracle Enterprise Manager in an Oracle RAC environment.</p>
</li>
<li>
<p>Use Recovery Manager (RMAN) to back up, restore, and recover data files, control files, server parameter files (SPFILEs) and archived redo log files. You can use RMAN with a media manager to back up files to external storage. You can also configure parallelism when backing up or recovering Oracle RAC databases. In Oracle RAC, RMAN channels can be dynamically allocated across all of the Oracle RAC instances. Channel failover enables failed operations on one node to continue on another node. You can start RMAN from Oracle Enterprise Manager Backup Manager or from the command line. See <a href="rman.htm#g496102">Chapter 6, "Configuring Recovery Manager and Archiving"</a> for more information about using RMAN.</p>
</li>
<li>
<p>If you use sequence numbers, then always use <code dir="ltr">CACHE</code> with the <code dir="ltr">NOORDER</code> option for optimal performance in sequence number generation. With the <code dir="ltr">CACHE</code> option, however, you may have gaps in the sequence numbers. If your environment cannot tolerate sequence number gaps, then use the <code dir="ltr">NOCACHE</code> option or consider pre-generating the sequence numbers. If your application requires sequence number ordering but can tolerate gaps, then use <code dir="ltr">CACHE</code> and <code dir="ltr">ORDER</code> to cache and order sequence numbers in Oracle RAC. If your application requires ordered sequence numbers without gaps, then use <code dir="ltr">NOCACHE</code> and <code dir="ltr">ORDER</code>. The <code dir="ltr">NOCACHE</code> and <code dir="ltr">ORDER</code> combination has the most negative effect on performance compared to other caching and ordering combinations.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If your environment cannot tolerate sequence number gaps, then consider pre-generating the sequence numbers or use the <code dir="ltr">ORDER</code> and <code dir="ltr">CACHE</code> options.</div>
</li>
<li>
<p>If you use indexes, then consider alternatives, such as reverse key indexes to optimize index performance. Reverse key indexes are especially helpful if you have frequent inserts to one side of an index, such as indexes that are based on insert date.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CACBDHDB"></a>
<div id="RACAD7388" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Consolidating Multiple Applications in a Database or Multiple Databases in a Cluster</h3>
<p>Many people want to <a id="sthref824"></a>consolidate multiple applications in a single database or <a id="sthref825"></a><a id="sthref826"></a>consolidate multiple databases in a single cluster. Oracle Clusterware and Oracle RAC support both types of consolidation.</p>
<p>Creating a cluster with a single pool of storage managed by Oracle ASM provides the infrastructure to manage multiple databases whether they are single instance databases or Oracle RAC databases.</p>
<p>With Oracle RAC databases, you can adjust the number of instances and which nodes run instances for a given database, based on workload requirements. Features such as cluster-managed services allow you to manage multiple workloads on a single database or across multiple databases.</p>
<p>It is important to properly manage the capacity in the cluster when adding work. The processes that manage the cluster&mdash;including processes both from Oracle Clusterware and the database&mdash;must be able to obtain CPU resources in a timely fashion and must be given higher priority in the system. Oracle Database Quality of Service Management (Oracle Database QoS Management) can assist consolidating multiple applications in a cluster or database by dynamically allocating CPU resources to meet performance objectives.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink APQOS" href="../../server.112/e24611/toc.htm"><span class="italic">Oracle Database Quality of Service Management User's Guide</span></a> for more information</div>
<p>Oracle recommends that the number of real time <a id="sthref827"></a><a id="sthref828"></a>Global Cache Service Processes (LMS<span class="italic">n</span>) on a server is less than or equal to the number of processors. (Note that this is the number of recognized CPUs that includes cores. For example, a dual-core CPU is considered to be two CPUs.) It is important that you load test your system when adding instances on a node to ensure that you have enough capacity to support the workload.</p>
<p>If you are consolidating many small databases into a cluster, you may want to reduce the number of LMS<span class="italic">n</span> created by the Oracle RAC instance. By default, Oracle Database calculates the number of processes based on the number of CPUs it finds on the server. This calculation may result in more LMS<span class="italic">n</span> processes than is needed for the Oracle RAC instance. One LMS process may be sufficient for up to 4 CPUs.To <a id="sthref829"></a><a id="sthref830"></a><a id="sthref831"></a>reduce the number of LMS<span class="italic">n</span> processes, set the <code dir="ltr">GC_SERVER_PROCESSES</code> initialization parameter minimally to a value of 1. Add a process for every four CPUs needed by the application. In general, it is better to have few busy LMS<span class="italic">n</span> processes. Oracle Database calculates the number of processes when the instance is started, and you must restart the instance if you want to change the value.</p>
</div>
<!-- class="sect2" -->
<a id="CACDEEDB"></a>
<div id="RACAD7389" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Scalability of Oracle RAC</h3>
<p><a id="sthref832"></a><a id="sthref833"></a><a id="sthref834"></a><a id="sthref835"></a><a id="sthref836"></a>Oracle RAC provides concurrent, transactionally consistent access to a single copy of the data from multiple systems. It provides scalability beyond the capacity of a single server. If your application scales transparently on symmetric multiprocessing (SMP) servers, then it is realistic to expect the application to scale well on Oracle RAC, without the need to make changes to the application code.</p>
<p>Traditionally, when a database server runs out of capacity, it is replaced with a new larger server. As servers grow in capacity, they become more expensive. However, for Oracle RAC databases, you have alternatives for increasing the capacity:</p>
<ul>
<li>
<p>You can <a id="sthref837"></a>migrate applications that traditionally run on large SMP servers to run on clusters of small servers.</p>
</li>
<li>
<p>You can maintain the investment in the current hardware and add a new server to the cluster (or create or add a new cluster) to increase the capacity.</p>
</li>
</ul>
<p>Adding servers to a cluster with Oracle Clusterware and Oracle RAC does not require an outage. As soon as the new instance is started, the application can take advantage of the extra capacity.</p>
<p>All servers in the cluster must run the same operating system and same version of Oracle Database but the servers do not have to be exactly the same capacity. With Oracle RAC, you can build a cluster that fits your needs, whether the cluster is made up of servers where each server is a two-CPU commodity server or clusters where the servers have 32 or 64 CPUs in each server. The Oracle parallel execution feature allows a single SQL statement to be divided up into multiple processes, where each process completes a subset of work. In an Oracle RAC environment, you can define the parallel processes to run only on the instance where the user is connected or to run across multiple instances in the cluster.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="clonerac.htm#CHDGFHCA">Chapter 8, "Cloning Oracle RAC to Nodes in a New Cluster"</a></p>
</li>
<li>
<p><a href="cloneracwithoui.htm#BCGEJGAJ">Chapter 9, "Using Cloning to Extend Oracle RAC to Nodes in the Same Cluster"</a></p>
</li>
<li>
<p><a href="adddelunix.htm#BABJEABD">Chapter 10, "Adding and Deleting Oracle RAC from Nodes on Linux and UNIX Systems"</a></p>
</li>
<li>
<p><a href="adddelwin.htm#CHDFAEJB">Chapter 11, "Adding and Deleting Oracle RAC from Nodes on Windows Systems"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CJHBHJGG"></a>
<div id="RACAD7390" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">General Design Considerations for Oracle RAC</h2>
<p>This section briefly describes database design and deployment techniques for Oracle RAC environments. It also describes considerations for high availability and provides general guidelines for various Oracle RAC deployments.</p>
<p>Consider performing the following steps during the design and development of applications that you are deploying on an Oracle RAC database:</p>
<ol>
<li>
<p>Tune the design and the application</p>
</li>
<li>
<p>Tune the memory and I/O</p>
</li>
<li>
<p>Tune contention</p>
</li>
<li>
<p>Tune the operating system</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If an application does not scale on an SMP system, then moving the application to an Oracle RAC database cannot improve performance.</div>
<p>Consider using <a id="sthref838"></a>hash partitioning for insert-intensive online transaction processing (OLTP) applications. Hash partitioning:</p>
<ul>
<li>
<p><a id="sthref839"></a>Reduces contention on concurrent inserts into a single database structure</p>
</li>
<li>
<p>Affects <a id="sthref840"></a><a id="sthref841"></a>sequence-based indexes when indexes are locally partitioned with a table and tables are partitioned on sequence-based keys</p>
</li>
<li>
<p>Is transparent to the application</p>
</li>
</ul>
<p>If you use hash partitioning for tables and indexes for <a id="sthref842"></a>OLTP environments, then you can greatly improve performance in your Oracle RAC database. Note that you cannot use index range scans on an index with hash partitioning.</p>
</div>
<!-- class="sect1" -->
<a id="i1006530"></a>
<div id="RACAD712" class="sect1">
<h2 class="sect1">General Database Deployment Topics for Oracle RAC</h2>
<p>This section describes considerations when deploying Oracle RAC databases. Oracle RAC database performance is not compromised if you do not employ these techniques. If you have an effective noncluster design, then your application will run well on an Oracle RAC database.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#i1007686">Tablespace Use in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i1008056">Object Creation and Performance in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CJHJIADC">Node Addition and Deletion and the SYSAUX Tablespace in Oracle RAC</a></p>
</li>
<li>
<p><a href="#CJHCIGAG">Distributed Transactions and Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABIHCEG">Deploying OLTP Applications in Oracle RAC</a></p>
</li>
<li>
<p><a href="#i1006232">Flexible Implementation with Cache Fusion</a></p>
</li>
<li>
<p><a href="#i1006243">Deploying Data Warehouse Applications with Oracle RAC</a></p>
</li>
<li>
<p><a href="#CEGEIAEJ">Data Security Considerations in Oracle RAC</a></p>
</li>
</ul>
<a id="i1007686"></a>
<div id="RACAD713" class="sect2">
<h3 class="sect2">Tablespace Use in Oracle RAC<a id="sthref843"></a></h3>
<p>In addition to using <a id="sthref844"></a><a id="sthref845"></a>locally managed tablespaces, you can further simplify space administration by using <a id="sthref846"></a><a id="sthref847"></a>automatic segment space management (ASSM)<a id="sthref848"></a> and <a id="sthref849"></a><a id="sthref850"></a>automatic undo management.</p>
<p>ASSM distributes instance workloads among each instance's subset of blocks for inserts. This improves Oracle RAC performance because it minimizes block transfers. To deploy automatic undo management in an Oracle RAC environment, each instance must have its own undo tablespace.</p>
</div>
<!-- class="sect2" -->
<a id="i1008056"></a>
<div id="RACAD714" class="sect2">
<h3 class="sect2">Object Creation and Performance in Oracle RAC</h3>
<p><a id="sthref851"></a>As a general rule, only use <a id="sthref852"></a>DDL statements for maintenance tasks and avoid executing DDL statements during peak system operation periods. In most systems, the amount of new object creation and other DDL statements should be limited. Just as in noncluster Oracle databases, excessive <a id="sthref853"></a>object creation and deletion can increase performance overhead.</p>
</div>
<!-- class="sect2" -->
<a id="CJHJIADC"></a>
<div id="RACAD966" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Node Addition and Deletion and the SYSAUX Tablespace in Oracle RAC</h3>
<p>If you add nodes to your Oracle RAC database environment, then you may need to increase the size of the <a id="sthref854"></a><a id="sthref855"></a><code dir="ltr">SYSAUX</code> tablespace. Conversely, if you remove nodes from your <a href="rac_glossary.htm#CHDDEDDI"><span class="xrefglossterm">cluster database</span></a>, then you may be able to reduce the size of your <code dir="ltr">SYSAUX</code> tablespace.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Your platform-specific Oracle RAC installation guide for guidelines about sizing the <code dir="ltr">SYSAUX</code> tablespace for multiple instances</div>
</div>
<!-- class="sect2" -->
<a id="CJHCIGAG"></a>
<div id="RACAD967" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Distributed Transactions and Oracle RAC</h3>
<p>If you are running <a id="sthref856"></a>XA Transactions in an Oracle RAC environment and the performance is poor, direct all branches of a tightly coupled distributed transaction to the same instance.</p>
<p>To ensure this, create multiple Oracle <a id="sthref857"></a><a id="sthref858"></a>Distributed Transaction Processing (DTP) services, with one or more on each Oracle RAC instance. Each DTP service is a singleton service that is available on one and only one Oracle RAC instance. All access to the database server for distributed transaction processing must be done by way of the DTP services. Ensure that all of the branches of a single global distributed transaction use the same DTP service. In other words, a network connection descriptor, such as a TNS name, a JDBC URL, and so on, must use a DTP service to support distributed transaction processing.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="hafeats.htm#BABBBCFG">"Services and Distributed Transaction Processing in Oracle RAC"</a> for more details about enabling services and distributed transactions</p>
</li>
<li>
<p><a class="olink ADFNS" href="../../appdev.112/e41502/toc.htm"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for more information about distributed transactions in Oracle RAC</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABIHCEG"></a>
<div id="RACAD788" class="sect2">
<h3 class="sect2">Deploying OLTP Applications in Oracle RAC</h3>
<p><a id="sthref859"></a><a id="sthref860"></a>Cache Fusion makes <a id="sthref861"></a>Oracle RAC databases the optimal deployment servers for <a id="sthref862"></a>online transaction processing (OLTP) applications. This is because these types of applications require:</p>
<ul>
<li>
<p>High availability in the event of failures</p>
</li>
<li>
<p><a id="sthref863"></a>Scalability to accommodate increased system demands</p>
</li>
<li>
<p><a id="sthref864"></a>Load balancing according to demand fluctuations</p>
</li>
</ul>
<p>The high availability features of Oracle Database and Oracle RAC <a id="sthref865"></a>can re-distribute and load balance workloads to surviving instances without interrupting processing. Oracle RAC also provides excellent scalability so that if you add or replace a node, then Oracle Database re-masters resources and re-distributes processing loads.</p>
</div>
<!-- class="sect2" -->
<a id="i1006232"></a>
<div id="RACAD503" class="sect2">
<h3 class="sect2">Flexible Implementation with Cache Fusion</h3>
<p>To accommodate the frequently changing workloads of online transaction processing systems, Oracle RAC remains flexible and dynamic despite changes in system load and system availability. Oracle RAC addresses a wide range of <a id="sthref866"></a><a href="rac_glossary.htm#CHDBEICF"><span class="xrefglossterm">service level</span></a>s that, for example, fluctuate due to:</p>
<ul>
<li>
<p>Varying user demands</p>
</li>
<li>
<p>Peak scalability issues like trading storms (bursts of high volumes of transactions)</p>
</li>
<li>
<p>Varying availability of system resources</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i1006243"></a>
<div id="RACAD799" class="sect2">
<h3 class="sect2">Deploying Data Warehouse Applications with Oracle RAC</h3>
<p><a id="sthref867"></a><a id="sthref868"></a>This section discusses how to deploy data warehouse systems in Oracle RAC environments by briefly describing the data warehouse features available in shared disk architectures.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#i1006268">Speed-Up for Data Warehouse Applications on Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABJBJCI">Parallel Execution in Data Warehouse Systems and Oracle RAC</a></p>
</li>
</ul>
<a id="i1006268"></a>
<div id="RACAD506" class="sect3">
<h4 class="sect3">Speed-Up for Data Warehouse Applications on Oracle RAC</h4>
<p>Oracle RAC is ideal for data warehouse applications because it augments the noncluster benefits of Oracle Database. Oracle RAC does this by maximizing the processing available on all of the nodes that belong to an Oracle RAC database to provide <a id="sthref869"></a>speed-up for data warehouse systems.</p>
<p><a id="sthref870"></a><a id="sthref871"></a><a id="sthref872"></a>The query optimizer considers parallel execution when determining the <a id="sthref873"></a>optimal execution plans. The default cost model for the query optimizer is <span class="bold">CPU+I/O</span> and the cost unit is <span class="bold">time</span>. In Oracle RAC, the query optimizer dynamically computes intelligent defaults for parallelism based on the number of processors in the nodes of the cluster. An evaluation of the costs of alternative access paths, table scans versus indexed access, for example, takes into account the <a id="sthref874"></a>degree of parallelism (DOP) available for the operation. This results in Oracle Database selecting the execution plans that are optimized for your Oracle RAC configuration.</p>
</div>
<!-- class="sect3" -->
<a id="BABJBJCI"></a>
<div id="RACAD507" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Parallel Execution in Data Warehouse Systems and Oracle RAC</h4>
<p><a id="sthref875"></a><a id="sthref876"></a>Oracle Database's parallel execution feature uses multiple processes to run SQL statements on one or more CPUs. Parallel execution is available on both noncluster Oracle databases and Oracle RAC databases.</p>
<p>Oracle RAC takes full advantage of parallel execution by distributing parallel processing across all available instances. The number of processes that can participate in parallel operations depends on the DOP assigned to each table or index.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink PFGRF001" href="../../server.112/e41573/optimops.htm#PFGRF001"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information about the query optimizer</p>
</li>
<li>
<p><a class="olink PFGRF94545" href="../../server.112/e41573/instance_tune.htm#PFGRF94545"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information about parallel execution</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CEGEIAEJ"></a>
<div id="RACAD510" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Data Security Considerations in Oracle RAC</h3>
<p>This section describes the following two <a id="sthref877"></a>Oracle RAC security considerations:</p>
<ul>
<li>
<p><a href="#CEGIHBCH">Transparent Data Encryption and Wallets</a></p>
</li>
<li>
<p><a href="#BHCHFBIF">Windows Firewall Considerations</a></p>
</li>
</ul>
<a id="CEGIHBCH"></a>
<div id="RACAD7269" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Transparent Data Encryption and Wallets</h4>
<p>Oracle Database 11<span class="italic">g</span> release 2 (11.2) <a id="sthref878"></a><a id="sthref879"></a><a id="sthref880"></a><a id="sthref881"></a>enables Oracle RAC nodes to share the <a href="rac_glossary.htm#CHDGIIGD"><span class="xrefglossterm">wallet</span></a>. This eliminates the need to manually copy and synchronize the wallet across all nodes. Oracle recommends that you create the wallet on a shared file system. This allows all instances to access the same shared wallet.</p>
<p>Oracle RAC uses wallets in the following ways:</p>
<ol>
<li>
<p>Any wallet operation, like opening or closing the wallet, performed on any one Oracle RAC instance is applicable for all other Oracle RAC instances. This means that when you open and close the wallet for one instance, then it opens and closes the wallet for all Oracle RAC instances.</p>
</li>
<li>
<p>When using a shared file system, ensure that the <code dir="ltr">ENCRYPTION_WALLET_LOCATION</code> parameter for all Oracle RAC instances points to the same shared wallet location. The security administrator must also ensure security of the shared wallet by assigning appropriate directory permissions.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If Oracle Automatic Storage Management Cluster File System (Oracle ACFS) is available for your operating system, then Oracle recommends that you store the wallet in Oracle ACFS. If you do not have Oracle ACFS in Oracle ASM, then use the Oracle ASM Configuration Assistant (ASMCA) to create it. You must add the mount point to the <code dir="ltr">sqlnet.ora</code> file in each instance, as follows:
<pre dir="ltr">
ENCRYPTION_WALLET_LOCATION=
  (SOURCE = (METHOD = FILE)
    (METHOD_DATA =
      (DIRECTORY = /opt/oracle/acfsmounts/data_wallet)))
</pre>
<p>This file system is mounted automatically when the instances start. Opening and closing the wallet, as well as commands to set or rekey and rotate the TDE master encryption key, are synchronized between all nodes.</p>
</div>
</li>
<li>
<p>A master key rekey performed on one instance is applicable for all instances. When a new Oracle RAC node comes up, it is aware of the current wallet open or close status.</p>
</li>
<li>
<p>Do not issue any wallet <code dir="ltr">open</code> or <code dir="ltr">close</code> commands while setting up or changing the master key.</p>
</li>
</ol>
<p>Deployments where shared storage does not exist for the wallet require that each Oracle RAC node maintain a local wallet. After you create and provision a wallet on a single node, you must copy the wallet and make it available to all of the other nodes, as follows:</p>
<ul>
<li>
<p>For systems using Transparent Data Encryption with encrypted wallets, you can use any standard file transport protocol, though Oracle recommends using a secured file transport.</p>
</li>
<li>
<p>For systems using Transparent Data Encryption with obfuscated wallets, file transport through a secured channel is recommended.</p>
</li>
</ul>
<p>To specify the directory in which the wallet must reside, set the or <a id="sthref882"></a><a id="sthref883"></a><code dir="ltr">ENCRYPTION_WALLET_LOCATION</code> parameter in the <code dir="ltr">sqlnet.ora</code> file. The local copies of the wallet need not be synchronized for the duration of Transparent Data Encryption usage until the server key is re-keyed though the <code dir="ltr">ALTER SYSTEM SET KEY</code> SQL statement. Each time you issue the <code dir="ltr">ALTER SYSTEM SET KEY</code> statement on a database instance, you must again copy the wallet residing on that node and make it available to all of the other nodes. Then, you must close and reopen the wallet on each of the nodes. To avoid unnecessary administrative overhead, reserve re-keying for exceptional cases where you believe that the server master key may have been compromised and that not re-keying it could cause a serious security problem.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG10163" href="../../network.112/e40393/asotrans.htm#ASOAG10163"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for more information about creating and provisioning a wallet</div>
</div>
<!-- class="sect3" -->
<a id="BHCHFBIF"></a>
<div id="RACAD7391" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Windows Firewall Considerations</h4>
<p>By default, all installations of Windows Server 2003 Service Pack 1 and higher enable the <a id="sthref884"></a>Windows Firewall to block virtually all <a id="sthref885"></a>TCP network ports to incoming connections. As a result, any Oracle products that listen for incoming connections on a TCP port will not receive any of those connection requests, and the clients making those connections will report errors.</p>
<p>Depending upon which Oracle products you install and how they are used, you may need to perform additional Windows post-installation configuration tasks so that the Firewall products are functional on Windows Server 2003.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWWIN003" href="../../install.112/e48194/postinst.htm#CWWIN003"><span class="italic">Oracle Real Application Clusters Installation Guide for Microsoft Windows</span></a> for more information about Oracle RAC executables requiring Windows Firewall exceptions</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="adddelwin.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="monitor.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
