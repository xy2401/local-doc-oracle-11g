<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Administering Oracle RAC One Node</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:38Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="admin.htm" title="Previous" type="text/html" />
<link rel="Next" href="hafeats.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/24</span> <!-- End Header -->
<div id="RACAD7894" class="chapter"><a id="BABGAJGH"></a>
<h1 class="chapter"><span class="secnum">4</span> Administering Oracle RAC One Node</h1>
<p><a id="sthref423"></a><a id="sthref424"></a>Oracle Real Application Clusters One Node (Oracle RAC One Node) is a single instance of an Oracle Real Application Clusters (Oracle RAC) database that runs on one node in a cluster. This option adds to the flexibility that Oracle offers for database consolidation. You can consolidate many databases into one cluster with minimal overhead while also providing the high availability benefits of failover protection, online rolling patch application, and rolling upgrades for the operating system and Oracle Clusterware.</p>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#BABJCGBC">Overview of Oracle Real Application Clusters One Node</a></p>
</li>
<li>
<p><a href="#BABBAHAI">Adding an Oracle RAC One Node Database</a></p>
</li>
<li>
<p><a href="#BABHCBEE">Converting Databases</a></p>
</li>
<li>
<p><a href="#BABFBJAE">Online Database Relocation</a></p>
</li>
</ul>
<a id="BABJCGBC"></a>
<div id="RACAD8315" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Overview of Oracle Real Application Clusters One Node</h2>
<p>You can limit the CPU consumption of individual database instances per server within the cluster through Resource Manager Instance Caging and dynamically change this limit if needed. With Oracle RAC One Node, there is no limit to server scalability and if applications grow to require more resources than a single node can supply, then you can easily upgrade your applications online to Oracle RAC. If the node that is running Oracle RAC One Node becomes overloaded, then you can relocate the instance to another node in the cluster using the online database relocation utility with no downtime for application users.</p>
<p>Oracle RAC One Node is supported on all platforms on which Oracle RAC is certified. Similar to Oracle RAC, Oracle RAC One Node is certified on Oracle Virtual Machine (Oracle VM). Using Oracle RAC or Oracle RAC One Node with Oracle VM increases the benefits of Oracle VM with the high availability and scalability of Oracle RAC.</p>
<p>Using Oracle RAC One Node online database relocation, you can relocate the Oracle RAC One Node instance to another server, if the current server is running short on resources or requires maintenance operations, such as operating system patches. You can use the same technique to relocate Oracle RAC One Node instances to high capacity servers to accommodate changes in workload, for example, depending on the resources available in the cluster. In addition, Resource Manager Instance Caging or memory optimization parameters can be set dynamically to further optimize the placement of the Oracle RAC One Node instance on the new server.</p>
<p>Using the Single Client Access Name (SCAN) to connect to the database, clients can locate the service independently of the node on which it is running. Relocating an Oracle RAC One Node instance is therefore mostly transparent to the client, depending on the client connection. Oracle recommends to use either Oracle Fast Application Notification or Transparent Application Failover to minimize the impact of a relocation on the client.</p>
<p>Oracle RAC One Node databases are administered slightly differently from Oracle RAC or noncluster databases. For administrator-managed Oracle RAC One Node databases, you must monitor the candidate node list and make sure a server is always available for failover, if possible. Candidate servers reside in the Generic server pool and the database and its services will fail over to one of those servers.</p>
<p>For policy-managed Oracle RAC One Node databases, you must ensure that the server pools are configured such that a server will be available for the database to fail over to in case its current node becomes unavailable. Also, for policy-managed Oracle RAC One Node databases, the destination node for online database relocation must be located in the database's server pool.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In order to cover all failure scenarios, you must add at least one dynamic database service (Oracle Clusterware-managed database service) to an Oracle RAC One Node database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle Real Application Clusters Installation Guide for Linux and UNIX</span> for information about installing Oracle RAC One Node databases</div>
</div>
<!-- class="sect1" -->
<a id="BABBAHAI"></a>
<div id="RACAD8194" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Adding an Oracle RAC One Node Database</h2>
<p>Use the <code dir="ltr">srvctl add database</code> command to add an <a id="sthref425"></a><a id="sthref426"></a>Oracle RAC One Node database to your cluster. For example:</p>
<pre dir="ltr">
srvctl add database -c  RACONENODE [-e <span class="italic">server_list</span>] [-i <span class="italic">instance_name</span>] [-w <span class="italic">timeout</span>]
</pre>
<p>Use the <code dir="ltr">-e</code> option and the <code dir="ltr">-i</code> option when adding an administrator-managed Oracle RAC One Node database.</p>
<p>Using DBCA to create an Oracle RAC One Node database adds the newly created database to the cluster.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><code dir="ltr"><a href="srvctladmin.htm#i1008470">"srvctl add database"</a></code> for usage information</p>
</li>
<li>
<p><a href="adddelunix.htm#CEGEJAIH">"Using DBCA in Interactive Mode to Add Database Instances to Target Nodes"</a> for information adding an Oracle RAC One Node database</p>
</li>
</ul>
</div>
<p>Each service on an <a id="sthref427"></a><a id="sthref428"></a>Oracle RAC One Node database is configured by using the same value for the <code dir="ltr">SERVER_POOLS</code> attribute as the underlying database. When you add services to an Oracle RAC One Node database, the Server Control Utility (SRVCTL) does not accept any placement information, but instead configures those services using the value of the <code dir="ltr">SERVER_POOLS</code> attribute.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When adding an administrator-managed Oracle RAC One Node database, you can optionally supply an instance prefix with the <code dir="ltr">-i</code> <code dir="ltr"><span class="codeinlineitalic">instance_name</span></code> option of the <code dir="ltr">srvctl add database</code> command. The name of the instance will then be <code dir="ltr"><span class="codeinlineitalic">prefix</span></code><code dir="ltr">_1</code>. If you do not specify an instance prefix, then the first 12 characters of the unique name of the database becomes the prefix. The instance name changes to <code dir="ltr"><span class="codeinlineitalic">prefix</span></code><code dir="ltr">_2</code> during an online database relocation and reverts back to <code dir="ltr"><span class="codeinlineitalic">prefix</span></code><code dir="ltr">_1</code> during a subsequent online database relocation. The same instance name is used on failover.</div>
</div>
<!-- class="sect1" -->
<a id="BABHCBEE"></a>
<div id="RACAD7896" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Converting Databases</h2>
<p>Using SRVCTL, you can <a id="sthref429"></a><a id="sthref430"></a><a id="sthref431"></a><a id="sthref432"></a>convert an Oracle RAC database with one instance to an Oracle RAC One Node database and vice versa.</p>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BABEFFAA">Converting a Database from Oracle RAC to Oracle RAC One Node</a></p>
</li>
<li>
<p><a href="#BABFDJAA">Converting a Database from Oracle RAC One Node to Oracle RAC</a></p>
</li>
</ul>
<a id="BABEFFAA"></a>
<div id="RACAD7897" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Converting a Database from Oracle RAC to Oracle RAC One Node</h3>
<p>You can <a id="sthref433"></a><a id="sthref434"></a>convert an Oracle RAC database with one instance to an Oracle RAC One Node database using the <code dir="ltr">srvctl convert database</code> command, as follows:</p>
<pre dir="ltr">
srvctl convert database -d <span class="italic">db_unique_name</span> -c RACONENODE [-i <span class="italic">instance_name</span>
-w <span class="italic">timeout</span>]
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="srvctladmin.htm#CDCFADGH">"convert"</a></code> for more information about the <code dir="ltr">srvctl convert database</code> command</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
An Oracle RAC database that you want to convert to Oracle RAC One Node must either use Oracle Managed Files (to enable automatic thread allocation) or have at least two redo threads.</div>
<p>Prior to converting an Oracle RAC database to an Oracle RAC One Node database, you must first ensure that the Oracle RAC database has only one instance.</p>
<p>If the Oracle RAC database is administrator managed, then you must <a id="sthref435"></a>change the configuration of all services to set the preferred instance to the instance that you want to keep as an Oracle RAC One Node database after conversion. If any service had a <code dir="ltr">PRECONNECT TAF</code> policy, then its TAF policy must be updated to <code dir="ltr">BASIC</code> or <code dir="ltr">NONE</code> before starting the conversion process. These services must no longer have any available instance.</p>
<p>If the Oracle RAC database is policy managed, then you must change the configuration of all services so that they all use the same server pool before you convert the Oracle RAC database to an Oracle RAC One Node database.</p>
</div>
<!-- class="sect2" -->
<a id="BABFDJAA"></a>
<div id="RACAD7898" class="sect2">
<h3 class="sect2">Converting a Database from Oracle RAC One Node to Oracle RAC</h3>
<p>You can <a id="sthref436"></a><a id="sthref437"></a>convert a database from Oracle RAC One Node to Oracle RAC using the <code dir="ltr">srvctl convert database</code> command, as follows:</p>
<pre dir="ltr">
srvctl convert database -d <span class="italic">db_unique_name</span> -c RAC [-n <span class="italic">node_name</span>]
</pre>
<p>If the database is up and running and you do not specify the node where the database is running, then the command returns an error instructing you to specify the node.</p>
<p>If you are relocating the database you want to convert to Oracle RAC using online database relocation, or an online database relocation has failed, then you must either abort or complete the relocation before you run the <code dir="ltr">srvctl convert database</code> command.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="srvctladmin.htm#CDCFADGH">"convert"</a></code> for more information</div>
<p>Converting an administrator-managed Oracle RAC One Node database to an Oracle RAC database sets all database services so that the single instance is preferred. After you convert the database, you can add instances using DBCA.</p>
<p>Converting a policy-managed Oracle RAC One Node database to an Oracle RAC database sets all database services to UNIFORM cardinality. It also results in reusing the server pool in which the database currently runs. The conversion reconfigures the database to run on all nodes in the server pool. The command does not start any additional instances but running the <code dir="ltr">srvctl start database</code> command starts the database on all nodes in the server pool.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFBJAE"></a>
<div id="RACAD7899" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Online Database Relocation</h2>
<p>You can relocate an Oracle RAC One Node database to another node while still maintaining service availability using the <a id="sthref438"></a><a id="sthref439"></a><a id="sthref440"></a>online database relocation utility. Only during a planned online database relocation is a second instance of an Oracle RAC One Node database created, so that any database sessions can continue while the database is relocated to a new node.</p>
<p>If your Oracle RAC One Node database is administrator managed, then the target node to which you want to relocate the database must be in the candidate list or in the Free server pool. If the target node is in the Free server pool, then the node is added to the candidate list.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you relocate a database instance to a target node that is not currently in the candidate server list for the database, you must copy the password file, if configured, to the target node.
<p>When you use <a id="sthref441"></a>password file-based authentication for remote management of Oracle RAC One Node databases without any shared password file, you must have two password files on each node where the database can run: one named <code dir="ltr"><span class="codeinlineitalic">SID_prefix</span></code><code dir="ltr">_1</code> and the other named <code dir="ltr"><span class="codeinlineitalic">SID_prefix</span></code><code dir="ltr">_2</code>. You must recopy both of these files to all candidate nodes every time you update the password file. This is true for both policy-managed and administrator-managed databases.</p>
<p>Oracle recommends using OS authentication, instead, or using Oracle Clusterware to start and stop the database, and defining users in the data dictionary for other management.</p>
</div>
<p>Use the <code dir="ltr">srvctl relocate database</code> command to initiate relocation of an Oracle RAC One Node database. For example:</p>
<pre dir="ltr">
srvctl relocate database -d rac1 -n node7
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<code dir="ltr"><a href="srvctladmin.htm#CDCDFFJB">"srvctl relocate database"</a></code> for more information</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="admin.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="hafeats.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
