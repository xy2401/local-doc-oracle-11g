<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle RAC Configuration Audit Tool</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-06-24T11:50:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Real Application Clusters Administration and Deployment Guide" />
<meta name="dcterms.identifier" content="E41960-04" />
<meta name="dcterms.isVersionOf" content="RACAD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="rac_glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="racdb.htm" title="Previous" type="text/html" />
<link rel="Next" href="rac_glossary.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41960.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/24</span> <!-- End Header -->
<script  >
<!-- // <![CDATA[
window.name='racchk'
// ]]> -->
</script> <script  >
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=120,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><h1>Footnote ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/body><\/html>');
    msg.document.close();
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="RACAD8365" class="appendix"><a id="BABGCIBF"></a>
<h1 class="appendix"><span class="secnum">D</span> Oracle RAC Configuration Audit Tool</h1>
<p>This appendix includes the information required to run and maintain the <a id="sthref1949"></a>Oracle Real Application Clusters (Oracle RAC) Configuration Audit Tool (RACcheck). The tool is designed to audit various important configuration settings within an Oracle RAC system.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
if you have not upgraded to Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.4), which includes RACcheck, or to get the latest version of RACcheck (to which Oracle adds checks every three months), then you can download RACcheck from the following URL:
<p><code ><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1268927.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1268927.1</a></code></p>
</div>
<p>This appendix includes the following topics:</p>
<ul>
<li>
<p><a href="#BABIBFEE">RACcheck Features</a></p>
</li>
<li>
<p><a href="#BABHICDJ">RACcheck Usage</a></p>
</li>
<li>
<p><a href="#BABGHGBC">Using RACcheck</a></p>
</li>
<li>
<p><a href="#BABFADFJ">Troubleshooting RACcheck</a></p>
</li>
</ul>
<div class="refentry"><a id="BABIBFEE"></a>
<div id="RACAD8366" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">RACcheck Features</h2>
<p>Use RACcheck to audit configuration settings within the following categories:</p>
<ul>
<li>
<p>Operating system kernel parameters</p>
</li>
<li>
<p>Operating system packages and other operating system configuration settings important to Oracle RAC</p>
</li>
<li>
<p>Oracle Grid Infrastructure</p>
</li>
<li>
<p>Oracle Automatic Storage Management (Oracle ASM)</p>
</li>
<li>
<p>Oracle Database</p>
</li>
<li>
<p>Database parameters and other database configuration settings important to Oracle RAC</p>
</li>
<li>
<p>Upgrade readiness assessment to Oracle Database 11<span class="italic">g</span> release 2 (11.2)</p>
</li>
</ul>
<p>You can use RACcheck with Oracle RAC database servers, Oracle RAC databases (10<span class="italic">g</span> release 2 (10.2), 11<span class="italic">g</span> release 1 (11.1), and 11<span class="italic">g</span> release 2 (11.2)), Oracle Grid Infrastructure, hardware, and operating system and Oracle RAC software. You can also use RACcheck with nonclustered Oracle Databases (10<span class="italic">g</span> release 2 (10.2), 11<span class="italic">g</span> release 1 (11.1), and 11<span class="italic">g</span> release 2 (11.2)), Oracle Restart systems, and Oracle Real Application Clusters One Node configurations.</p>
<p>You can use RACcheck on the following platforms:</p>
<ul>
<li>
<p>Intel Linux<a id="sthref1950" href="#sthref1950" onclick='footdisplay(1,"Oracle does not plan to support Linux Itanium")'><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a> (Enterprise Linux, RedHat and SuSE 9,10, 11)</p>
</li>
<li>
<p>Oracle Solaris SPARC (Solaris 10 and 11)</p>
</li>
<li>
<p>Oracle Solaris x86-64 (Solaris 10 and 11)</p>
</li>
<li>
<p>IBM AIX<a id="BABFIBHH" href="#BABFIBHH" onclick='footdisplay(2,"Requires BASH Shell 3.2 or higher to be installed on the systems")'><sup class="tablefootnote">Foot&nbsp;2&nbsp;</sup></a></p>
</li>
<li>
<p>HP-UX<a id="sthref1951" href="#sthref1951" onclick='footdisplay(2,"Requires BASH Shell 3.2 or higher to be installed on the systems")'><sup class="footnotenumber">Footref&nbsp;2</sup></a></p>
</li>
</ul>
<p>Other RACcheck features include:</p>
<ul>
<li>
<p>RACcheck is nonintrusive and does not change anything in the environment, except as follows:</p>
<ul>
<li>
<p>SSH user equivalence for the Oracle Database software owner is assumed to be configured among all the database servers being audited so that RACcheck can run commands on remote database server nodes. If RACcheck determines that SSH user equivalence is not configured, then the tool gives you the option to set up user equivalence either temporarily or permanently. If you choose to set up SSH user equivalence temporarily, then, at the end of the session, RACcheck removes the keys to restore the system to its original SSH user equivalence state. If you want to configure SSH user equivalence outside of RACcheck (if it is not already configured), then consult My Oracle Support note 372795.1 at the following URL:</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=372795.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=372795.1</a></code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
SSH user equivalence is always required for the Oracle Database software installation owner, but is <span class="italic">not</span> required for Oracle Grid Infrastructure configurations.</div>
</li>
<li>
<p>RACcheck creates a number of small output files into which the data necessary to perform the assessment is collected.</p>
</li>
<li>
<p>RACcheck creates and executes some scripts dynamically in order to accomplish some of the data collection.</p>
</li>
<li>
<p>RACcheck deletes any temporary files that are created and not needed as part of the collection.</p>
</li>
</ul>
</li>
<li>
<p>RACcheck interrogates the system to determine the status of the Oracle stack components (specifically, Oracle Grid Infrastructure, Oracle Database, Oracle RAC, and so on) and whether they are installed and whether they are running. Depending upon the status of each component, RACcheck runs the appropriate collections and audit checks.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Troubleshooting if, because of local environmental configuration, RACcheck is unable to properly determine the necessary environmental information</div>
</li>
<li>
<p>RACcheck automatically runs a process in the background to monitor command execution progress. If, for any reason, one of the commands run by RACcheck should hang or take longer to run than anticipated, then this monitor process stops the command after a configurable amount of time, so that RACcheck can continue to run. If that happens, then RACcheck skips the collection or command that was hung and a notation is made in the log.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABBJIIF">"Runtime Command Timeouts"</a> to adjust the <code dir="ltr">RAT_TIMEOUT</code> and <code dir="ltr">RAT_ROOT_TIMEOUT</code> parameters if the default timeout duration is too short</div>
</li>
<li>
<p>If the RACcheck driver files are older than 90 days, then the driver files are considered to be stale and you will be notified of a stale driver file.</p>
</li>
<li>
<p>When RACcheck completes the collection and analysis, it produces a detailed HTML formatted report that contains benefit, impact, risk, and action and repair information. The report may also reference publicly available documents with additional information about the problem and its resolution. RACcheck also produces a compressed output file. This output file can be provided to My Oracle Support for further analysis, if necessary.</p>
</li>
<li>
<p>The results of the audit checks can be optionally uploaded into database tables for reporting purposes.</p>
</li>
<li>
<p>In some cases, you may want to stage RACcheck on a shared file system, so that various systems can access it, while still being maintained in a single location, rather than copying to each cluster on which it may be used. The default behavior of RACcheck is to create a subdirectory and its output files in the location where the it is staged. If that staging area is a read-only file system or if you would like the output to be created elsewhere, then there is an environment variable that you can use for that purpose. You can configure the <code dir="ltr">RAT_OUTPUT</code> parameter to any valid writable location.</p>
</li>
</ul>
</div>
<!-- class="refsect1" -->
<a id="BABHICDJ"></a>
<div id="RACAD8367" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">RACcheck Usage</h2>
<p>When using RACcheck, consider the following:</p>
<ul>
<li>
<p>Run RACcheck on Oracle Database servers as the Oracle Database software owner (<code dir="ltr">oracle</code>).</p>
</li>
<li>
<p>RACcheck includes a daemon that enables RACcheck to run noninteractively (in batch or silent mode) at regular intervals.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABJJAEG">"Running RACcheck Using the RACcheck Daemon"</a></div>
</li>
<li>
<p>Oracle recommends that you install and run RACcheck from a local file system on a single database server to provide the best performance.</p>
</li>
<li>
<p>To maximize its usefulness, run RACcheck when Oracle Grid Infrastructure and at least one database are up and running.</p>
</li>
<li>
<p>Oracle recommends that you run RACcheck during times of least load on the system.</p>
</li>
<li>
<p>To avoid possible problems running RACcheck from terminal sessions on a network attached workstation or laptop, consider running the tool using VNC so that, if there is a network interruption, then the tool will continue to run until it is finished.</p>
</li>
<li>
<p>If RACcheck fails for some reason, then you can run it again from the beginning. RACcheck does not resume from the point of failure.</p>
</li>
<li>
<p>You can run RACcheck on all nodes, simultaneously. To take advantage of the <code dir="ltr">root</code>-specific checks while still running the tool in parallel, use the <code dir="ltr">EXPECT</code> utility installed on the system or configure <code dir="ltr">sudo</code> for RACcheck to use.</p>
<p>To configure <code dir="ltr">sudo</code>, use the <code dir="ltr">visudo</code> command to add the following line to the <code dir="ltr">sudoers</code> file on each of the cluster nodes, replacing <code dir="ltr"><span class="codeinlineitalic">owner</span></code> with the user that installed the database software:</p>
<pre dir="ltr">
<span class="italic">owner</span> ALL=(root)  NOPASSWD:/tmp/root_raccheck.sh
</pre></li>
<li>
<p>Ensure that permissions for RACcheck are <code dir="ltr">755</code> (<code dir="ltr">-rwxr-xr-x</code>). If the permissions are not set appropriately, then run the following command:</p>
<pre dir="ltr">
$ chmod 755 raccheck
</pre></li>
</ul>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BABGCABB">When to Use RACcheck</a></p>
</li>
<li>
<p><a href="#BABFBGAD">Options to Use with RACcheck</a></p>
</li>
<li>
<p><a href="#BABBDEFA">Guidelines for Using RACcheck</a></p>
</li>
<li>
<p><a href="#BABFGIJI">How RACcheck Handles Passwords</a></p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABGCABB"></a>When to Use RACcheck</p>
<p>You can use RACcheck at any time but Oracle recommends that you use RACcheck:</p>
<ul>
<li>
<p>After initially deploying Oracle RAC</p>
</li>
<li>
<p>Before and after any planned system maintenance</p>
</li>
<li>
<p>At least once every 90 days</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABFBGAD"></a>Options to Use with RACcheck</p>
<p><a href="#BABBAFEG">Table D-1</a> lists and describes <a id="sthref1952"></a>options you can use with RACcheck.</p>
<div id="RACAD8368" class="tblformal">
<p class="titleintable"><a id="sthref1953"></a><a id="BABBAFEG"></a>Table D-1 RACcheck Options</p>
<table class="cellalignment429" title="RACcheck Options" summary="This table lists and describes the various parameters you can use with RACcheck." dir="ltr">
<thead>
<tr class="cellalignment423">
<th class="cellalignment430" id="r1c1-t7">Option</th>
<th class="cellalignment430" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment423">
<td class="cellalignment431" id="r2c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-a
</pre></td>
<td class="cellalignment431" headers="r2c1-t7 r1c2-t7">
<p>Specify this option to perform both best practice and recommended patch checks. This is the default method in which RACcheck runs.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r3c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-b
</pre></td>
<td class="cellalignment431" headers="r3c1-t7 r1c2-t7">
<p>Specify this option to run a best practice check, only.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r4c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-p
</pre></td>
<td class="cellalignment431" headers="r4c1-t7 r1c2-t7">
<p>Specify this option to run a recommended patch check, only.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r5c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-v
</pre></td>
<td class="cellalignment431" headers="r5c1-t7 r1c2-t7">
<p>Specify this option to display the version of RACcheck currently in use.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r6c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-m
</pre></td>
<td class="cellalignment431" headers="r6c1-t7 r1c2-t7">
<p>Specify this option to exclude checks for maximum availability architecture (MAA) scorecard.</p>
<p>The MAA scorecard is the findings related to a set of maximum availability architecture best practices and shows how prepared your system is for various types of failures that can occur in an Oracle RAC environment.</p>
<p>RACcheck shows the MAA scorecard, because Oracle considers MAA to be an important concept and set of features. However, it is most helpful when you have implemented Oracle Data Guard standby databases.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r7c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-u
</pre></td>
<td class="cellalignment431" headers="r7c1-t7 r1c2-t7">
<p>Use this option to run RACcheck to check pre-upgrade or post-upgrade best practices. You must use <code dir="ltr">-o pre</code> or <code dir="ltr">-o post</code> with the <code dir="ltr">-u</code> option. For example:</p>
<pre dir="ltr">
$ raccheck -u -o pre
</pre></td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r8c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-o
</pre></td>
<td class="cellalignment431" headers="r8c1-t7 r1c2-t7">
<p>Use this option to add an argument to an option. Arguments include:</p>
<ul>
<li>
<p><code dir="ltr">verbose</code>: If you specify this argument, then RACcheck prints checks that pass. The default behavior is that RACcheck only prints checks that fail, issue warnings, or contain other information.</p>
</li>
<li>
<p><code dir="ltr">pre</code>: Specify this argument when you want RACcheck to check pre-upgrade best practices (to be used with the <code dir="ltr">-u</code> option).</p>
</li>
<li>
<p><code dir="ltr">post</code>: Specify this argument when you want RACcheck to check post-upgrade best practices (to be used with the <code dir="ltr">-u</code> option).</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r9c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-f
</pre></td>
<td class="cellalignment431" headers="r9c1-t7 r1c2-t7">
<p>Use this option to perform checks offline on data already collected from the system.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r10c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-clusternodes
</pre></td>
<td class="cellalignment431" headers="r10c1-t7 r1c2-t7">
<p>Use this option to enter a comma-delimited list of node names on which to run RACcheck.</p>
<p>RACcheck requires this option only when you want to run the tool on subset of cluster nodes, or when RACcheck fails to retrieve cluster node information from the environment using <code dir="ltr">olsnodes</code>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r11c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-localonly
</pre></td>
<td class="cellalignment431" headers="r11c1-t7 r1c2-t7">
<p>Use this option to run RACcheck only on the local node.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r12c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-nopass
</pre></td>
<td class="cellalignment431" headers="r12c1-t7 r1c2-t7">
<p>Use this option to omit checks from the HTML report that have passed.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r13c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-diff <span class="italic">report_1</span> <span class="italic">report_2</span>
 [-outfile <span class="italic">output_HTML</span>]
</pre></td>
<td class="cellalignment431" headers="r13c1-t7 r1c2-t7">
<p>Use this option along with two RACcheck reports, in the form of a directory name, a zip file, or an HTML report, to compare them to each other. Optionally, you can use the <code dir="ltr">-outfile</code> option to direct the output of the comparison to HTML.</p>
<p><span class="bold">Note:</span> To limit security vulnerabilities, Oracle recommends that you set the permissions of the output directory as restrictive as possible. The output directory can contain sensitive configuration information and, when no other mechanism is available, temporary data collection files.</p>
<p><span class="bold">See Also:</span> <a href="#BABDJEHF">"Comparing Reports with RACcheck"</a> for more information</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r14c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-daemon
</pre></td>
<td class="cellalignment431" headers="r14c1-t7 r1c2-t7">
<p>Use this option to run RACcheck commands only if the RACcheck daemon is running.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r15c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-nodaemon
</pre></td>
<td class="cellalignment431" headers="r15c1-t7 r1c2-t7">
<p>Use this option if you do not want to use the RACcheck daemon to run the command.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r16c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-d <span class="italic">command</span>
</pre></td>
<td class="cellalignment431" headers="r16c1-t7 r1c2-t7">
<p>Use this option with commands to control the RACcheck daemon. Commands include:</p>
<ul>
<li>
<p><code dir="ltr">start</code>: Starts the RACcheck daemon</p>
</li>
<li>
<p><code dir="ltr">stop</code>: Stops the RACcheck daemon</p>
</li>
<li>
<p><code dir="ltr">status</code>: Obtains the current status of the RACcheck daemon</p>
</li>
<li>
<p><code dir="ltr">nextautorun</code>: When the RACcheck daemon is running, use this command to obtain the time of the next scheduled run of RACcheck, according to the value of the <code dir="ltr">AUTORUN_INTERVAL</code> configuration parameter, as described in <a href="#BABJJAEG">"Running RACcheck Using the RACcheck Daemon"</a>.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r17c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-set "<span class="italic">parameter_1</span>=<span class="italic">value_1</span>
;<span class="italic">parameter_2</span>=<span class="italic">value_2</span>..."
</pre></td>
<td class="cellalignment431" headers="r17c1-t7 r1c2-t7">
<p>Use this option to set the RACcheck configuration parameters listed in <a href="#BABJJAEG">"Running RACcheck Using the RACcheck Daemon"</a>.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r18c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-get <span class="italic">parameter</span> | all
</pre></td>
<td class="cellalignment431" headers="r18c1-t7 r1c2-t7">
<p>Specify this option to obtain the value of a specific RACcheck configuration parameter, or the value of all RACcheck configuration parameters.</p>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r19c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-profile <span class="italic">profile_name</span>
</pre></td>
<td class="cellalignment431" headers="r19c1-t7 r1c2-t7">
<p>Use this option to configure RACcheck to run a specific profile. Supported profiles include:</p>
<ul>
<li>
<p><code dir="ltr">asm</code>: This profile checks Oracle ASM configuration</p>
</li>
<li>
<p><code dir="ltr">clusterware</code>: This profile checks Oracle Clusterware (part of Oracle Grid Infrastructure) configuration</p>
</li>
<li>
<p><code dir="ltr">dba</code>: This profile checks the database administrator configuration</p>
</li>
<li>
<p><code dir="ltr">sysadmin</code>: This profile checks the system administrator configuration</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment423">
<td class="cellalignment431" id="r20c1-t7" headers="r1c1-t7">
<pre dir="ltr">
-h
</pre></td>
<td class="cellalignment431" headers="r20c1-t7 r1c2-t7">
<p>Use this option to display RACcheck usage</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABBDEFA"></a>Guidelines for Using RACcheck</p>
<p>If the <code dir="ltr">oracle</code> user exists on the system and all the Oracle components are installed or running (including Oracle Clusterware, Oracle Database, and Oracle ASM), then Oracle recommends that you run RACcheck as the <code dir="ltr">oracle</code> (or Oracle Database software installation owner) user. RACcheck does perform some audit checks that require root privileges, in which case, if <code dir="ltr">sudo</code> is not configured or the <code dir="ltr">root</code> password is not available, then you can configure RACcheck to skip these audit checks by selecting option <code dir="ltr">3</code> on the <code dir="ltr">root</code> password menu.</p>
<p>RACcheck can run as <code dir="ltr">root</code> only if you specify the <code dir="ltr">sysadmin</code> profile using the <code dir="ltr">raccheck -profile sysadmin</code> command. In this case, RACcheck skips all database-related best practices but you must set up SSH user equivalence for the <code dir="ltr">root</code> user among cluster nodes, so RACcheck will not prompt you for the <code dir="ltr">root</code> password.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Typically, when you run RACcheck as <code dir="ltr">oracle</code>, operating system authentication is already set up for the Oracle Database software owner and RACcheck will not require the database login credentials.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>For instructions about configuring SSH user equivalence, go to the following URL:</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=372795.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=372795.1</a></code></p>
</li>
<li>
<p><a href="#BABCHJAF">"Database Login Problems"</a> if you want to run RACcheck as another user, and additional information on how to verify database authentication before running the tool</p>
</li>
</ul>
</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABFGIJI"></a>How RACcheck Handles Passwords</p>
<p>RACcheck does not store or save any passwords. The handling of <code dir="ltr">root</code> passwords depends on whether the <code dir="ltr">expect</code> utility is installed.</p>
<p>If the <code dir="ltr">expect</code> utility is not installed (which is the default for all platforms, except Oracle Enterprise Linux 5), then the <code dir="ltr">root</code> password prompts are deferred and you must closely monitor RACcheck as it runs and enter the passwords, as prompted, once for each node of the cluster. Otherwise, RACcheck uses the <code dir="ltr">expect</code> utility for interactive password automation. You can install the <code dir="ltr">expect</code> utility on other Linux distributions in order to automate interactive password handling.</p>
<p>When RACcheck finds the <code dir="ltr">expect</code> utility, the tool gathers the <code dir="ltr">root</code> passwords at the beginning of the process, and the <code dir="ltr">expect</code> utility will supply them, when needed, at the <code dir="ltr">root</code> password prompts for each node, so that RACcheck can continue without further input from you.</p>
<p>RACcheck inquires if the <code dir="ltr">root</code> password is the same for all database servers of the cluster. If you respond affirmatively (which is the default), then you will be prompted for the <code dir="ltr">root</code> password once and it will be validated and subsequently used for all nodes in the cluster. If you respond negatively (that the <code dir="ltr">root</code> password is not the same for all nodes in the cluster), then RACcheck will prompt for and validate the <code dir="ltr">root</code> password for each individual node in the cluster.</p>
<p>Additionally, when RACcheck finds the <code dir="ltr">expect</code> utility, when validating the <code dir="ltr">root</code> passwords, you have three opportunities to type the correct password. If you fail to enter the correct password after three attempts, then RACcheck proceeds to the next node and displays a message stating that the password is still incorrect and that the checks dependent upon data collected from that node will be skipped. At this point, you can either cancel running RACcheck and obtain the correct <code dir="ltr">root</code> password, or continue with the understanding that important data may be missing from the report.</p>
<p>When RACcheck uses the <code dir="ltr">expect</code> utility, it is possible that, between the time that the <code dir="ltr">root</code> passwords are entered and validated and nodes for those passwords are reached, that the passwords could have been changed. In that case, RACcheck displays a message stating that the password must have been changed and that the collections for that node will be skipped, which means the checks for that node will also be skipped. You can either allow RACcheck to continue to completion knowing that data and checks will be skipped or cancel running RACcheck and resolve the problem.</p>
<p>If RACcheck skips any checks for any reason, then the tool reports in the log any checks that were skipped and on which nodes, when it finishes running.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABGHGBC"></a>
<div id="RACAD8369" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Using RACcheck</h2>
<p>You can run RACcheck interactively or silently, or you can run RACcheck automatically at specified intervals. To run <a id="sthref1954"></a>RACcheck interactively, run the following command:</p>
<pre dir="ltr">
$ raccheck
</pre>
<p>RACcheck prompts you through the auditing process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The time it takes RACcheck to run varies based on factors such as the number of nodes in a cluster, CPU load, and network latency. Typically, the entire process should only take five minutes, or so, for each node. This is just a general guideline but if it takes substantially more time than that, then there may be some other problem that should be investigated.</div>
<p>This section includes the following topics:</p>
<ul>
<li>
<p><a href="#BABIGCFF">Running RACcheck in Silent Mode without the RACcheck Daemon</a></p>
</li>
<li>
<p><a href="#BABJJAEG">Running RACcheck Using the RACcheck Daemon</a></p>
</li>
<li>
<p><a href="#BABDJEHF">Comparing Reports with RACcheck</a></p>
</li>
<li>
<p><a href="#BABIGCCE">Running RACcheck to Determine Upgrade Readiness</a></p>
</li>
<li>
<p><a href="#BABHFGBJ">Maintaining the Output File</a></p>
</li>
<li>
<p><a href="#BABIFHJI">Multiple Database Support</a></p>
</li>
<li>
<p><a href="#BABJDHCD">Uploading RACcheck Results and Patches to a Database for Reporting</a></p>
</li>
<li>
<p><a href="#BABFGHIC">Excluding Audit Checks</a></p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABIGCFF"></a>Running RACcheck in Silent Mode without the RACcheck Daemon</p>
<p>To run <a id="sthref1955"></a>RACcheck in silent mode:</p>
<ol>
<li>
<p>You must first configure SSH user equivalence. For instructions about configuring SSH user equivalence, go to the following URL:</p>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=372795.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=372795.1</a></code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
SSH user equivalence is <span class="italic">only</span> necessary if your system is running Oracle Grid Infrastructure to support a cluster. This is <span class="italic">not</span> required for nonclustered databases or Oracle Restart configurations.</div>
</li>
<li>
<p>RACcheck requires <code dir="ltr">root</code> access to run the <code dir="ltr">root</code>-specific checks. To facilitate these checks in silent mode, you must configure passwordless <code dir="ltr">sudo</code> and use the <code dir="ltr">-s</code> option to run RACcheck.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If <code dir="ltr">sudo</code> is not allowed within your environment, you can skip this step. In this case, you can still run RACcheck silently without the root-specific checks using the <code dir="ltr">-S</code> option. Eliminating the root-specific checks limits the capabilities of RACcheck and Oracle does not recommend this method of running RACcheck.</div>
</li>
<li>
<p>To run RACcheck silently, you must specify one of the following arguments, depending on your configuration:</p>
<ul>
<li>
<p><code dir="ltr">-s</code>: Use this option to run RACcheck unattended when the <code dir="ltr">oracle</code> user can <code dir="ltr">sudo</code> to <code dir="ltr">root</code> without a password</p>
</li>
<li>
<p><code dir="ltr">-S</code>: Use this option to run RACcheck unattended without the <code dir="ltr">root</code> password and make no <code dir="ltr">root</code>-privileged collections or audits</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that you implement passwordless <code dir="ltr">sudo</code> to <code dir="ltr">root</code> for <code dir="ltr">/tmp/root_raccheck.sh</code> for full functionality of RACcheck, as described in <a href="#BABHICDJ">"RACcheck Usage"</a>.</div>
<p>RACcheck runs in silent mode using the information it gathers from Oracle Clusterware. When RACcheck runs in silent mode, it performs data collection and audit checks on all databases running on the local node that are defined as Oracle Clusterware resources.</p>
</li>
</ol>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABJJAEG"></a>Running RACcheck Using the RACcheck Daemon</p>
<p>To use the <a id="sthref1956"></a>RACcheck daemon, you must first configure the daemon parameters by running the <code dir="ltr">raccheck -set</code> <code dir="ltr"><span class="codeinlineitalic">parameter</span></code><code dir="ltr">=</code><code dir="ltr"><span class="codeinlineitalic">value</span></code> command. You can set the following <a id="sthref1957"></a>configuration parameters:</p>
<ul>
<li>
<p><code dir="ltr">AUTORUN_INTERVAL</code>: This parameter defines the time interval at which RACcheck runs, specified in days or hours (<code dir="ltr">d | h</code>). For example:</p>
<pre dir="ltr">
$ raccheck -set AUTORUN_INTERVAL=1d
</pre>
<p>The preceding command configures the RACcheck daemon to run every day. If you set this parameter to 0, then the RACcheck daemon will not run automatically. This is the default setting for this parameter.</p>
</li>
<li>
<p><code dir="ltr">AUTORUN_FLAGS</code>: This parameter defines how RACcheck runs, using the flags listed in <a href="#BABBAFEG">Table D-1</a>. For example:</p>
<pre dir="ltr">
$ raccheck -set "AUTORUN_INTERVAL=12h;AUTORUN_FLAGS=-profile sysadmin"
</pre>
<p>The preceding command configures RACcheck to run the <code dir="ltr">sysadmin</code> profile every 12 hours.</p>
</li>
<li>
<p><code dir="ltr">PASSWORD_CHECK_INTERVAL</code>: This parameter defines the frequency (specified in hours) with which the running daemon validates the passwords entered when the daemon starts. If the daemon encounters an invalid password (due to a password change), then the daemon stops running and enters a notification in the daemon log (<code dir="ltr">raccheck_daemon.log</code>), and also sends an email, if configured to do so. For example:</p>
<pre dir="ltr">
$ raccheck -set PASSWORD_CHECK_INTERVAL=1
</pre>
<p>The preceding command validates passwords every hour.</p>
</li>
<li>
<p><code dir="ltr">NOTIFICATION_EMAIL</code>: This parameter configures the RACcheck daemon to email notifications to a specific person. For example:</p>
<pre dir="ltr">
$ raccheck -set NOTIFICATION_EMAIL=firstname.lastname@company.com
</pre></li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can configure more than one parameter in a single command by providing each parameter in a semi-colon delimited list enclosed in double quotation marks (<code dir="ltr">""</code>). For example, the following command configures the RACcheck daemon to run every day in verbose mode, specifies an email address for daemon notices, and checks for changed passwords hourly:
<pre dir="ltr">
$ raccheck -set "AUTORUN_INTERVAL=1d;AUTORUN_FLAGS= -o verbose;
NOTIFICATION_EMAIL=firstname.lastname@company.com;PASSWORD_CHECK_INTERVAL=1"
</pre></div>
<p>To obtain the current configuration of all of the parameters of the RACcheck daemon, run the following command:</p>
<pre dir="ltr">
$ raccheck -get all
</pre>
<p>The preceding command returns output similar to the following:</p>
<pre dir="ltr">
AUTORUN_INTERVAL = 1d
AUTORUN_FLAGS = -o verbose
NOTIFICATION_EMAIL = firstname.lastname@company.com
PASSWORD_CHECK_INTERVAL = 1
</pre></div>
<!-- class="refsubsect" -->
<p>You can set or modify RACcheck parameters after the RACcheck daemon has started.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends that, at a minimum, you configure the <code dir="ltr">NOTIFICATION_EMAIL</code> and <code dir="ltr">PASSWORD_CHECK_INTERVAL</code> parameters.</div>
<p>To start the RACcheck daemon, run the following command:</p>
<pre dir="ltr">
$ raccheck &ndash;d start
</pre>
<p>RACcheck launches an interactive graphical user interface to collect the required information and start the daemon process.</p>
<p>You can run RACcheck on demand while the RACcheck daemon is running by entering <code dir="ltr">raccheck</code> on the command line without any arguments as the user that started the daemon process from the same directory from which you launched the RACcheck daemon. Running RACcheck this way is non-interactive, because the daemon passes parameters at all the prompts, and produces output on the screen similar to that which RACcheck produces when running interactively.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the RACcheck daemon is running and want to run RACcheck interactively, then run the following command:
<pre dir="ltr">
$ raccheck -nodaemon
</pre></div>
<p class="subhead2"><a id="RACAD8370"></a>RACcheck Daemon Usage Notes</p>
<ul>
<li>
<p>If you start the RACcheck daemon, then no other user can use the RACcheck daemon to run RACcheck in non-interactive mode. To use the RACcheck daemon, you must be the same user you must run RACcheck on demand from the same directory where you started daemon.</p>
</li>
<li>
<p>Once you start the RACcheck daemon, it continues to run in the background until either you explicitly stop the daemon (using the <code dir="ltr">raccheck &ndash;d stop</code> command) or one of the following conditions is met:</p>
<ul>
<li>
<p>The server on which the daemon is running is rebooted or stops.</p>
</li>
<li>
<p>If a password is changed on any node, then the daemon stops and an entry is placed in <code dir="ltr">raccheck_daemon.log</code>. Additionally, RACcheck sends an email to address entered in the <code dir="ltr">NOTIFICATION_EMAIL</code> configuration parameter. Configure the <code dir="ltr">PASSWORD_CHECK_INTERVAL</code> configuration parameter to ensure validity of the required passwords.</p>
</li>
<li>
<p>If the RACcheck script has changed or has been replaced with a new script since you started daemon, then any further attempts to run RACcheck on demand, as well as auto run will not succeed. You will have to restart daemon with new script for future run.</p>
</li>
</ul>
</li>
<li>
<p>If the system configuration has changed (such as nodes or instances being added or deleted), then you must restart the RACcheck daemon for the configuration changes to be recognized.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABDJEHF"></a>Comparing Reports with RACcheck</p>
<p>You can use <a id="sthref1958"></a>RACcheck to compare results from two RACcheck reports. You can use the results of comparisons to monitor trends and best practice changes over time or after planned maintenance presented in a user-friendly HTML report. Ensure that the RACcheck reports in the RACcheck output directories, <code dir="ltr">.zip</code> output files, or HTML reports are accessible.</p>
<p>To compare two RACcheck reports, run the following command:</p>
<pre dir="ltr">
$ raccheck -diff <span class="italic">report_1</span> <span class="italic">report_2</span>
</pre>
<p>Specify the names of the two report files you want to compare. When RACcheck finishes comparing the two files, the utility prints a summary and provides a location of the comparison report for viewing.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABIGCCE"></a>Running RACcheck to Determine Upgrade Readiness</p>
<p>You can use RACcheck to obtain an automated upgrade readiness assessment to help facilitate upgrade planning for Oracle RAC and Oracle Clusterware. Use RACcheck to automate many of the manual pre- and post-upgrade checks detailed in the following upgrade-related documents:</p>
<ul>
<li>
<p>Oracle Database Upgrade Guide</p>
</li>
<li>
<p>Oracle Grid Infrastructure Installation Guide for your platform</p>
</li>
<li>
<p>The following My Oracle Support notes:</p>
<ul>
<li>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1</a></code></p>
</li>
<li>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=837570.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=837570.1</a></code></p>
</li>
<li>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1363369.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1363369.1</a></code></p>
</li>
<li>
<p><code dir="ltr"><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=810394.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=810394.1</a></code></p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<p>You can run RACcheck before and after upgrading your software. Run the pre-upgrade check during the planning phase of the upgrade process to ensure that enough time is available to resolve any potential issues prior to the actual upgrade process. Run the post-upgrade check to ensure the health of Oracle Grid Infrastructure and Oracle Database. Following is a summary of what you can expect from RACcheck upgrade checks:</p>
<ul>
<li>
<p>When performing pre-upgrade checks, RACcheck detects all databases registered with Oracle Clusterware and produces a list of databases on which it will perform pre-upgrade checks. If any databases of the most current version are detected, then RACcheck skips them and will not perform any checks.</p>
</li>
<li>
<p>When performing post-upgrade checks, RACcheck detects all databases registered with Oracle Clusterware and produces a list of databases on which it will perform post-upgrade checks. If RACcheck detects any databases versions preceding Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3), then RACcheck skips them and will not perform any checks.</p>
</li>
<li>
<p>When performing either pre- or post-upgrade checks, RACcheck checks both Oracle Clusterware and the operating system.</p>
</li>
<li>
<p>When RACcheck finishes its checks, the tool produces a report in HTML format that contains the findings and links to additional details and information.</p>
</li>
</ul>
<p>Use the following syntax to run RACcheck upgrade checks:</p>
<pre dir="ltr">
$ raccheck -u -o pre | post
</pre>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABHFGBJ"></a>Maintaining the Output File</p>
<p>When you run RACcheck, the tool creates a subdirectory using a naming convention that begins with "raccheck" and includes a date and time (such as, <code dir="ltr">raccheck_SIEBXL_072613_141001</code>), and a zip file that contains the contents of the subdirectory (such as, <code dir="ltr">raccheck_SIEBXL_072611_141001.zip</code>) at the same level on the file system as RACcheck, itself. The total size of the subdirectory and zip file should be less than 5 MB on the file system. The exact varies depending upon how many nodes and how many databases there are in the system. While Oracle recommends that you run RACcheck when there is the least load on the system, over time, the number of files will build up and you must maintain and clean out older files, subdirectories, or both.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABIFHJI"></a>Multiple Database Support</p>
<p>Oracle designed RACcheck to support multiple databases. The tool presents a list of running databases, which are registered in the Oracle Grid Infrastructure. You can choose one, all, or enter a comma-delimited list of numbers that designate the listed databases. You do not have to install the tool on multiple nodes to check database instances running on other nodes in the cluster.</p>
<p>RACcheck logs into all databases by using local bequeath connections and assumes the existence of operating system authentication in the database for the user running the tool. In some configurations, there could be multiple database homes all owned by the same operating system user (such as <code dir="ltr">oracle</code>), while in other configurations, there could be any number of database homes all owned by different operating system users.</p>
<p>In the former case, run RACcheck as <code dir="ltr">oracle</code>. In the latter case, you may want to deploy RACcheck on the home with the greatest number of databases to obtain the most information possible, in which case install RACcheck as the owner of that home. To scan the other databases, RACcheck must be installed and run under each database home user account.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABJDHCD"></a>Uploading RACcheck Results and Patches to a Database for Reporting</p>
<p>Oracle supports uploading the results of audit checks done by RACcheck or the list of installed patches into database tables for use as a source of data for reporting.</p>
<p>To take advantage of this optional feature, you must set a number of environment variables in the runtime environment, and you must create two tables to receive the data: one for the audit check results and another for the patches installed on the systems.</p>
<p>To create a results table called <code dir="ltr">auditcheck_result</code>, run the following DDL command:</p>
<pre dir="ltr">
create table
  auditcheck_result
    (
    COLLECTION_DATE TIMESTAMP,
     CHECK_NAME VARCHAR2(256),
     PARAM_NAME VARCHAR2(256),
     STATUS VARCHAR2(256),
     STATUS_MESSAGE VARCHAR2(256),
     ACTUAL_VALUE VARCHAR2(256),
     RECOMMENDED_VALUE VARCHAR2(256),
     COMPARISON_OPERATOR VARCHAR2(256),
     HOSTNAME VARCHAR2(256),
     INSTANCE_NAME VARCHAR2(256),
     CHECK_TYPE VARCHAR2(256),
     DB_PLATFORM VARCHAR2(256),
     OS_DISTRO VARCHAR2(256),
     OS_KERNEL VARCHAR2(256),
     OS_VERSION NUMBER,
     DB_VERSION VARCHAR2(256),
     CLUSTER_NAME VARCHAR2(256),
     DB_NAME VARCHAR2(256),
     ERROR_TEXT VARCHAR2(256)
     CHECK_ID VARCHAR2(40),
     NEEDS_RUNNING VARCHAR2(100),
     MODULES VARCHAR2(4000),
     DATABASE_ROLE VARCHAR2(100),
     CLUSTERWARE_VERSION VARCHAR2(100),
     GLOBAL_NAME VARCHAR2(256)
);
</pre>
<p>To create a table for patches called <code dir="ltr">auditcheck_patch_result</code>, run the following DDL command:</p>
<pre dir="ltr">
create table
  auditcheck_patch_result
       ( COLLECTION_DATE     TIMESTAMP(6),
          HOSTNAME            VARCHAR2(256),
          ORACLE_HOME_TYPE    VARCHAR2(256),
          ORACLE_HOME_PATH    VARCHAR2(256),
          ORACLE_HOME_VERSION VARCHAR2(256),
          PATCH_NUMBER NUMBER,
         CLUSTER_NAME VARCHAR2(256),
         DESCRIPTION         VARCHAR2(256),
         PATCH_TYPE VARCHAR2(128),
         APPLIED NUMBER,
         RECOMMENDED NUMBER
         );
</pre>
<p>Set the following environment variables (shown with example values):</p>
<pre dir="ltr">
$ export RAT_UPLOAD_CONNECT_STRING="(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)
(HOST = bonanza)(PORT = 1521)) (LOAD_BALANCE = yes) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = orcl)))"
$ export RAT_UPLOAD_TABLE=auditcheck_result <span class="bold">(name must match that of the table created for the purpose)</span>
$ export RAT_PATCH_UPLOAD_TABLE=auditcheck_patch_result <span class="bold">(name must match the name of the table created for the purpose)</span>
$ export RAT_UPLOAD_USER=auditcheck <span class="bold">(schema owner of the table created for the purpose)</span>
$ export RAT_UPLOAD_PASSWORD=auditcheck <span class="bold">(password for the schema owner)</span>
$ export RAT_UPLOAD_ORACLE_HOME=<span class="italic">path_of_database_home</span> <span class="bold">(optional, alternate home</span>
<span class="bold">containing sqlplus that you want to use for connecting in case it is not the</span>
<span class="bold">current $ORACLE_HOME as derived by RACcheck from the environment)</span>
</pre></div>
<!-- class="refsubsect" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Use the fully-qualified address (as shown in the preceding example) for the connect string rather than an alias from the <code dir="ltr">tnsnames.ora</code> file, so that it is not necessary to rely on <code dir="ltr">tnsnames.ora</code> file name resolution on all the servers where RACcheck might run. You must use double quotation marks (<code dir="ltr">""</code>).</div>
<p>When you set the first four environment variables (shown in the preceding example) in the runtime environment, RACcheck assumes that the intent is to upload the data into the tables at the end of the process, and it attempts to upload the data. This process requires that you properly set the environment, that is, that the connect string is reachable, the user name and password are correct, and the table name is correct. If RACcheck cannot connect to the database, then a message to that effect will be written to the log. If the <code dir="ltr">RAT_UPLOAD_ORACLE_HOME</code> variable is set, then RACcheck invokes SQL*Plus from that home rather than attempting to invoke SQL*Plus from the current Oracle home derived by RACcheck. If you do not set any of the first four environment variables, then RACcheck will not attempt to upload the data.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABFGHIC"></a>Excluding Audit Checks</p>
<p>Optionally, you can exclude one or more audit checks after the first run of RACcheck, as follows:</p>
<ol>
<li>
<p>Create a text file named <code dir="ltr">excluded_check_ids.txt</code> in the same directory as the RACcheck script and driver files.</p>
</li>
<li>
<p>Open the <code dir="ltr">raccheck.log</code> file, which is located in the output directory of the previous run of the tool.</p>
</li>
<li>
<p>Search for the audit checks that you want to exclude in subsequent runs.</p>
</li>
<li>
<p>Note the <code dir="ltr">CHECK_ID</code> of the audit checks you want to exclude. The <code dir="ltr">CHECK ID</code> is an alphanumeric string similar to <code dir="ltr">CHECK_ID = 65E4DC8B76BC4DA6E040E50A1EC03704</code>. If the audit check block does not contain a <code dir="ltr">CHECK_ID</code> line, then you cannot exclude that audit check.</p>
</li>
<li>
<p>Enter the <code dir="ltr">CHECK_ID</code>s for the audit checks that you want to exclude in the <code dir="ltr">excluded_check_ids.txt</code> file, one <code dir="ltr">CHECK_ID</code> per line.</p>
</li>
<li>
<p>Subsequently, when you run RACcheck, before the tool runs an audit check, it checks the <code dir="ltr">excluded_check_ids.txt</code> file for any excluded checks and skips them.</p>
</li>
</ol>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABFADFJ"></a>
<div id="RACAD8371" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">Troubleshooting RACcheck</h2>
<p>This section discusses various problems you may encounter when running <a id="sthref1959"></a>RACcheck and how to solve them, included in the following sections:</p>
<ul>
<li>
<p><a href="#BABBJIIF">Runtime Command Timeouts</a></p>
</li>
<li>
<p><a href="#BABHFFJD">The raccheck_error.log File Contains Errors</a></p>
</li>
<li>
<p><a href="#BABEHEHB">Remote root Login Problems</a></p>
</li>
<li>
<p><a href="#BABGEJDH">Local Environmental Issues</a></p>
</li>
<li>
<p><a href="#BABCHJAF">Database Login Problems</a></p>
</li>
<li>
<p><a href="#BABEFBDC">User Profiles</a></p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABBJIIF"></a>Runtime Command Timeouts</p>
<p>If any non-<code dir="ltr">root</code>-privileged individual commands timeout before they finish running, then RACcheck stops that process and does not collect the desired data. If this happens, then you can lengthen the timeout by setting the following environment variable in the script execution environment:</p>
<pre dir="ltr">
$ export RAT_TIMEOUT=120
</pre>
<p>The default value for this environment variable is 90 seconds.</p>
<p>RACcheck runs a set of <code dir="ltr">root</code>-privileged data collections, once for each node in the cluster. If collections timeout before the data can be collected, then RACcheck stops that process and does not collect the desired data. If this happens, then you can lengthen the timeout by setting the following environment variable in the script execution environment:</p>
<pre dir="ltr">
$ export RAT_ROOT_TIMEOUT=600
</pre>
<p>The default value for this environment variable is 300 seconds.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you encounter either of these timeouts, then Oracle recommends that you determine the cause of the delay and correct it, and that you run RACcheck during times of least load on the system.</div>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABHFFJD"></a>The raccheck_error.log File Contains Errors</p>
<p>You can ignore the following errors that do appear in the <code dir="ltr">raccheck_error.log</code> file:</p>
<ul>
<li>
<p><code dir="ltr">/bin/sh: /u01/app/11.2.0/grid/OPatch/opatch: Permission denied</code></p>
</li>
<li>
<p><code dir="ltr">chmod: changing permissions of '/u01/app/oracle_ebs/product/11.2.0.2/VIS_RAC/.patch_storage': Operation not permitted</code></p>
</li>
<li>
<p><code dir="ltr">OPatch could not open log file, logging will not be possible</code></p>
</li>
<li>
<p><code dir="ltr">Inventory load failed... OPatch cannot load inventory for the given Oracle Home.</code></p>
</li>
</ul>
<p>The preceding errors occur in role-separated environments when RACcheck, which is run as the database software owner, attempts to list the patch inventories of homes owned by other users (<code dir="ltr">grid</code>, for example, or other database home owners) using OPatch. When you run OPatch to list the patch inventories for those other users it causes errors because the current user does not have permissions on the other homes. In these cases the OPatch errors are ignored and the patch inventories for those homes are gathered by other means.</p>
<p>Additionally, you can ignore errors similar to the following:</p>
<p><code dir="ltr">./raccheck: line [N]: [: : integer expression expected</code></p>
<p>The line number may change over time but this error occurs when RACcheck expects an integer return value but no value was found. RACcheck returns that error when trying to make the comparison. You could see this error repeated many times for the same command, once for each node.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABEHEHB"></a>Remote root Login Problems</p>
<p>If remote <code dir="ltr">root</code> login is not permitted over SSH, then the <code dir="ltr">root</code>-privileged commands will fail. To verify the Oracle software owner (<code dir="ltr">oracle</code>), run the following command manually from whichever node is not working and ensure you get similar output, as follows:</p>
<pre dir="ltr">
$ ssh root@remotehostname "id"
root@remotehostname's password:
uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel)
</pre>
<p>If remote <code dir="ltr">root</code> login is not working, then RACcheck cannot check the remote nodes. Contact a system administrator to correct this, if only temporarily, for running RACcheck.</p>
<p>If you can configure the remote <code dir="ltr">root</code> login, then edit the <code dir="ltr">/etc/ssh/sshd_config</code> file, as follows:</p>
<pre dir="ltr">
PermitRootLogin to yes
</pre>
<p>Run the following command as <code dir="ltr">root</code> on all nodes of the cluster:</p>
<pre dir="ltr">
# /etc/init.d/sshd restart
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABGEJDH"></a>Local Environmental Issues</p>
<p>RACcheck attempts to derive all the data it requires from the environment (operating system and Oracle Cluster Registry) but the tool may not work as expected because of local system differences, and it is difficult to anticipate and test every possible scenario. Therefore, support for a number of environment variables has been included so that you can override the default behavior of the tool or provide the required information. Following is a list of environment variables and descriptions for each:</p>
<ul>
<li>
<p><code dir="ltr">RAT_INV_LOC</code>: If the <code dir="ltr">oraInst.loc</code> file is not located where expected (<code dir="ltr">/u01/app/oraInventory</code>), then you can specify the correct location of the <code dir="ltr">oraInventory</code> directory in this environment variable.</p>
</li>
<li>
<p><code dir="ltr">RAT_CRS_HOME</code>: You can set this environment variable if RACcheck cannot determine the correct <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> path, and displays information stating that the software is not installed, even though you know that Oracle Clusterware is installed.</p>
</li>
<li>
<p><code dir="ltr">RAT_ORACLE_HOME</code>: You can set this environment variable if RACcheck cannot determine the correct <code dir="ltr">ORACLE_HOME</code> paths for the databases registered with Oracle Clusterware, and displays information stating that the software is not installed, even though you know that the database software is installed. RACcheck performs best practice and recommended patch checks for all the databases running from the home specified in this environment variable.</p>
</li>
<li>
<p><code dir="ltr">RAT_ASM_HOME</code>: You can set this environment variable if RACcheck cannot determine the correct Oracle ASM home path (which is the same as the <code dir="ltr"><span class="codeinlineitalic">Grid_home</span></code> path) from Oracle Clusterware, and displays information stating that the software is not installed, even though you know that the Oracle ASM software is installed.</p>
</li>
<li>
<p><code dir="ltr">RAT_OS</code>: You can set this environment variable if RACcheck fails to determine the correct platform, and the tool informs you that the data necessary for the determined platform could not be found.</p>
</li>
<li>
<p><code dir="ltr">RAT_DB</code>: You can set this environment variable if RACcheck determines an incorrect database version.</p>
</li>
<li>
<p><code dir="ltr">RAT_DBNAMES</code>: You can set this environment variable if RACcheck fails to determine valid database names from Oracle Clusterware. You can specify a space-delimited list of database names, and RACcheck will use that list instead of what it derives from Oracle Clusterware. For example:</p>
<pre dir="ltr">
$ export RAT_DBNAMES="ORCL ORADB PROD"
</pre>
<p>Use double quotation marks (<code dir="ltr">""</code>) if specifying more than one database name.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you configure <code dir="ltr">RAT_DBNAMES</code> as a subset of databases registered with Oracle Clusterware, and you want the patch inventories of all databases found registered with Oracle Clusterware to have their patch inventories checked for recommended patches, then Oracle recommends that you also configure <code dir="ltr">RAT_DBHOMES</code>.</div>
</li>
<li>
<p><code dir="ltr">RAT_DBHOMES</code>: If you set the <code dir="ltr">RAT_DBNAMES</code> environment variable, then, by default, the recommended patch analysis will be limited to the homes for the database names you listed. If you want to perform the recommended patch analysis for additional database homes than those specified in <code dir="ltr">RAT_DBNAMES</code>, then specify a space-delimited list of databases whose homes you want checked for recommended patches. For example, assume that you run the <code dir="ltr">export RAT_DBNAMES="ORCL ORADB"</code> command but that you also want to check the <code dir="ltr">PROD</code> database home, even if the <code dir="ltr">PROD</code> database is down. Run the <code dir="ltr">export RAT_DBHOMES="ORCL ORADB PROD"</code> command so that best practices will be checked for the <code dir="ltr">ORCL</code> and <code dir="ltr">ORADB</code> databases but the recommended patches will be checked for the <code dir="ltr">ORCL</code>, <code dir="ltr">ORADB</code>, and <code dir="ltr">PROD</code> database homes. Use double quotation marks (<code dir="ltr">""</code>) if specifying more than one database name.</p>
</li>
<li>
<p><code dir="ltr">RAT_SSHELL</code>: Set this environment variable to specify a secure shell location that overrides the default location (typically, <code dir="ltr">/usr/bin/ssh</code>), in case <code dir="ltr">ssh</code> is not where it is expected, and <code dir="ltr">ssh</code> commands return the following error:</p>
<pre dir="ltr">
-bash: /usr/bin/ssh -q: No such file or directory
</pre></li>
<li>
<p><code dir="ltr">RAT_SCOPY</code>: Set this environment variable to specify a secure copy location that overrides the default secure copy location (typically, <code dir="ltr">/usr/bin/scp</code>), in case <code dir="ltr">scp</code> is not where it is expected, and <code dir="ltr">scp</code> commands return the following error:</p>
<pre dir="ltr">
/usr/bin/scp -q: No such file or directory
</pre></li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABCHJAF"></a>Database Login Problems</p>
<p>If you intend to run RACcheck as a user other than the database software installation owner (such as <code dir="ltr">root</code> or <code dir="ltr">grid</code>), and if you experience problems connecting to the database, then do the following:</p>
<ol>
<li>
<p>Log in to the system as <code dir="ltr">grid</code>.</p>
</li>
<li>
<p>Run the following commands:</p>
<pre dir="ltr">
$ export ORACLE_HOME=<span class="italic">path_to_Oracle_Database_home</span>
$ export ORACLE_SID=<span class="italic">database_SID</span>
$ export PATH=$ORACLE_HOME/bin:$ORACLE_HOME/lib:$PATH
</pre></li>
<li>
<p>Add an alias in the <code dir="ltr">$ORACLE_HOME/network/admin/tnsnames.ora</code> file for the <code dir="ltr"><span class="codeinlineitalic">database_SID</span></code>.</p>
</li>
<li>
<p>Connect to the database as follows, including the password:</p>
<pre dir="ltr">
$ORACLE_HOME/bin/sqlplus sys@<span class="italic">SID</span> as sysdba
</pre></li>
<li>
<p>Ensure that you have successful connection.</p>
</li>
</ol>
<p>If this method of connecting to the database fails, then RACcheck will be unable to connect, as well. Consider running the tool as the Oracle database software installation owner.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="BABEFBDC"></a>User Profiles</p>
<p>The presence of prompts or traps in the user profile can lead to RACcheck hanging while it is running, because it sources the profile at runtime. For this reason, RACcheck checks the profile in the environment for these statements and presents a message advising you to temporarily comment out those statements on all nodes.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="appendix" -->
<hr />
<br />
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:&nbsp;Oracle does not plan to support Linux Itanium<br />
Footnote&nbsp;2:&nbsp;Requires BASH Shell 3.2 or higher to be installed on the systems<br /></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment422">
<tr>
<td class="cellalignment431">
<table class="cellalignment427">
<tr>
<td class="cellalignment426"><a href="racdb.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment426"><a href="rac_glossary.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment434">
<table class="cellalignment425">
<tr>
<td class="cellalignment426"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment426"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment426"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment426"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment426"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment426"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
</body>
</html>
