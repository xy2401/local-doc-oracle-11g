<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>OCI Programming in a Global Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 070" />
<meta name="dcterms.created" content="2013-07-05T0:14:31Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Globalization Support Guide" />
<meta name="dcterms.identifier" content="E10729-08" />
<meta name="dcterms.isVersionOf" content="NLSPG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="ch9sql.htm" title="Previous" type="text/html" />
<link rel="Next" href="ch11charsetmig.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10729.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/21</span> <!-- End Header --><a id="g1012464"></a><a id="NLSPG010"></a>
<h1 class="chapter"><span class="secnum">10</span> OCI Programming in a Global Environment</h1>
<p>This chapter contains information about OCI programming in a globalized environment. This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#i1005937">Using the OCI NLS Functions</a></p>
</li>
<li>
<p><a href="#i1005942">Specifying Character Sets in OCI</a></p>
</li>
<li>
<p><a href="#CIAHAJGJ">Getting Locale Information in OCI</a></p>
</li>
<li>
<p><a href="#i1008403">Mapping Locale Information Between Oracle and Other Standards</a></p>
</li>
<li>
<p><a href="#i1006335">Manipulating Strings in OCI</a></p>
</li>
<li>
<p><a href="#i1007031">Classifying Characters in OCI</a></p>
</li>
<li>
<p><a href="#i1007308">Converting Character Sets in OCI</a></p>
</li>
<li>
<p><a href="#i1007466">OCI Messaging Functions</a></p>
</li>
<li>
<p><a href="#i1007610">lmsgen Utility</a></p>
</li>
</ul>
<a id="i1005937"></a><a id="NLSPG451"></a>
<div class="sect1">
<h2 class="sect1">Using the OCI NLS Functions</h2>
<p>Many OCI NLS functions accept one of the following handles:</p>
<ul>
<li>
<p>The environment handle</p>
</li>
<li>
<p>The user session handle</p>
</li>
</ul>
<p>The OCI environment handle is associated with the client NLS environment and initialized with the client NLS environment variables. This environment does not change when <code>ALTER</code> <code>SESSION</code> statements are issued to the server. The character set associated with the environment handle is the client character set.</p>
<p>The OCI session handle is associated with the server session environment. Its NLS settings change when the session environment is modified with an <code>ALTER</code> <code>SESSION</code> statement. The character set associated with the session handle is the database character set.</p>
<p>Note that the OCI session handle does not have any NLS settings associated with it until the first transaction begins in the session. <code>SELECT</code> statements do not begin a transaction.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink LNOCI210" href="../../appdev.112/e10646/oci22glb.htm#LNOCI210"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for detailed information about the OCI NLS functions</div>
</div>
<!-- class="sect1" -->
<a id="i1005942"></a><a id="NLSPG452"></a>
<div class="sect1">
<h2 class="sect1">Specifying Character Sets in OCI</h2>
<p>Use the <code><a id="sthref1014"></a><a id="sthref1015"></a>OCIEnvNlsCreate</code> function to specify client-side database and national character sets when the OCI environment is created. This function enables users to set character set information dynamically in applications, independent of the <code>NLS_LANG</code> and <code>NLS_NCHAR</code> initialization parameter settings. In addition, one application can initialize several environment handles for different client environments in the same server environment.</p>
<p>Any Oracle character set ID except AL16UTF16 can be specified through the <code>OCIEnvNlsCreate</code> function to specify the encoding of metadata, SQL <code>CHAR</code> data, and SQL <code>NCHAR</code> data. Use <code>OCI_UTF16ID</code> in the <code>OCIEnvNlsCreate</code> function to specify UTF-16 data.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink LNOCI210" href="../../appdev.112/e10646/oci22glb.htm#LNOCI210"><span class="italic">Oracle Call Interface Programmer's Guide</span></a> for more information about the <code>OCIEnvNlsCreate</code> function</div>
</div>
<!-- class="sect1" -->
<a id="CIAHAJGJ"></a><a id="NLSPG453"></a>
<div class="sect1">
<h2 class="sect1">Getting Locale Information in OCI</h2>
<p>An Oracle locale consists of language, territory, and character set definitions. The locale determines conventions such as day and month names, as well as date, time, number, and currency formats. A globalized application complies with a user's locale setting and cultural conventions. For example, when the locale is set to German, users expect to see day and month names in German.</p>
<p>You can use the <code><a id="sthref1016"></a>OCINlsGetInfo()</code> function to retrieve the following locale information:</p>
<dl>
<dd>Days of the week (translated)</dd>
<dd>Abbreviated days of the week (translated)</dd>
<dd>Month names (translated)</dd>
<dd>Abbreviated month names (translated)</dd>
<dd>Yes/no (translated)</dd>
<dd>AM/PM (translated)</dd>
<dd>AD/BC (translated)</dd>
<dd>Numeric format</dd>
<dd>Debit/credit</dd>
<dd>Date format</dd>
<dd>Currency formats</dd>
<dd>Default language</dd>
<dd>Default territory</dd>
<dd>Default character set</dd>
<dd>Default linguistic sort</dd>
<dd>Default calendar</dd>
</dl>
<p><a href="#g1009360">Table 10-1</a> summarizes OCI functions that return locale information.</p>
<div class="tblformalwide">
<p class="titleintable"><a id="NLSPG848"></a><a id="sthref1017"></a><a id="g1009360"></a>Table 10-1 OCI Functions That Return Locale Information</p>
<table class="cellalignment1914" title="OCI Functions That Return Locale Information " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1905">
<th class="cellalignment1915" id="r1c1-t4">Function</th>
<th class="cellalignment1915" id="r1c2-t4">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r2c1-t4" headers="r1c1-t4">
<p><a id="sthref1018"></a><code>OCINlsGetInfo()</code></p>
</td>
<td class="cellalignment1911" headers="r2c1-t4 r1c2-t4">
<p>Returns locale information. See preceding text.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r3c1-t4" headers="r1c1-t4">
<p><a id="sthref1019"></a><code>OCINlsCharSetNameTold()</code></p>
</td>
<td class="cellalignment1911" headers="r3c1-t4 r1c2-t4">
<p>Returns the Oracle character set ID for the specified Oracle character set name</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r4c1-t4" headers="r1c1-t4">
<p><a id="sthref1020"></a><code>OCINlsCharSetIdToName()</code></p>
</td>
<td class="cellalignment1911" headers="r4c1-t4 r1c2-t4">
<p>Returns the Oracle character set name from the specified character set ID</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r5c1-t4" headers="r1c1-t4">
<p><a id="sthref1021"></a><code>OCINlsNumericInfoGet()</code></p>
</td>
<td class="cellalignment1911" headers="r5c1-t4 r1c2-t4">
<p>Returns specified numeric information such as maximum character size</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r6c1-t4" headers="r1c1-t4">
<p><a id="sthref1022"></a><code>OCINlsEnvironmentVariableGet()</code></p>
</td>
<td class="cellalignment1911" headers="r6c1-t4 r1c2-t4">
<p>Returns the character set ID from <code>NLS_LANG</code> or the national character set ID from <code>NLS_NCHAR</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink LNOCI210" href="../../appdev.112/e10646/oci22glb.htm#LNOCI210"><span class="italic">Oracle Call Interface Programmer's Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="i1008403"></a><a id="NLSPG454"></a>
<div class="sect1">
<h2 class="sect1">Mapping <a id="sthref1023"></a>Locale Information Between Oracle and Other Standards</h2>
<p>The <code><a id="sthref1024"></a>OCINlsNameMap</code> function maps Oracle character set names, language names, and territory names to and from Internet Assigned Numbers Authority (IANA) and International Organization for Standardization (ISO) names.</p>
</div>
<!-- class="sect1" -->
<a id="i1006335"></a><a id="NLSPG455"></a>
<div class="sect1">
<h2 class="sect1"><a id="sthref1025"></a>Manipulating Strings in OCI</h2>
<p>Two types of data structures are supported for string manipulation:</p>
<ul>
<li>
<p>Native character strings</p>
</li>
<li>
<p>Wide character strings</p>
</li>
</ul>
<p>Native character strings are encoded in native Oracle character sets. Functions that operate on native character strings take the string as a whole unit with the length of the string calculated in bytes. Wide character (<code>wchar</code>) string functions provide more flexibility in string manipulation. They support character-based and string-based operations with the length of the string calculated in characters.</p>
<p>The wide character data type is Oracle-specific and should not be confused with the <code>wchar_t</code> data type defined by the ANSI/ISO C standard. The Oracle wide character data type is always 4 bytes in all platforms, while the size of <code>wchar_t</code> depends on the implementation and the platform. The Oracle wide character data type normalizes native characters so that they have a fixed width for easy processing. This guarantees no data loss for round-trip conversion between the Oracle wide character format and the native character format.</p>
<p>String manipulation includes the :</p>
<ul>
<li>
<p>Conversion of strings between native character format and wide character format</p>
</li>
<li>
<p>Character classifications</p>
</li>
<li>
<p>Case conversion</p>
</li>
<li>
<p>Calculations of display length</p>
</li>
<li>
<p>General string manipulation, such as comparison, concatenation, and searching</p>
</li>
</ul>
<p><a href="#g1009164">Table 10-2</a> summarizes the OCI string manipulation functions.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The functions and descriptions in <a href="#g1009164">Table 10-2</a> that refer to multibyte strings apply to native character strings.</div>
<div class="tblformalwidemax">
<p class="titleintable"><a id="NLSPG849"></a><a id="sthref1026"></a><a id="g1009164"></a>Table 10-2 OCI String Manipulation Functions</p>
<table class="cellalignment1914" title="OCI String Manipulation Functions " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1905">
<th class="cellalignment1915" id="r1c1-t7">Function</th>
<th class="cellalignment1915" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r2c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1027"></a>OCIMultiByteToWideChar()</code></p>
</td>
<td class="cellalignment1911" headers="r2c1-t7 r1c2-t7">
<p>Converts an entire null-terminated string into the <code>wchar</code> format</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r3c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1028"></a>OCIMultiByteInSizeToWideChar()</code></p>
</td>
<td class="cellalignment1911" headers="r3c1-t7 r1c2-t7">
<p>Converts part of a string into the <code>wchar</code> format</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r4c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1029"></a>OCIWideCharToMultiByte()</code></p>
</td>
<td class="cellalignment1911" headers="r4c1-t7 r1c2-t7">
<p>Converts an entire null-terminated wide character string into a multibyte string</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r5c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1030"></a>OCIWideCharInSizeToMultiByte()</code></p>
</td>
<td class="cellalignment1911" headers="r5c1-t7 r1c2-t7">
<p>Converts part of a wide character string into the multibyte format</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r6c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1031"></a>OCIWideCharToLower()</code></p>
</td>
<td class="cellalignment1911" headers="r6c1-t7 r1c2-t7">
<p>Converts the <code>wchar</code> character specified by <code>wc</code> into the corresponding lowercase character if it exists in the specified locale. If no corresponding lowercase character exists, then it returns <code>wc</code> itself.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r7c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1032"></a>OCIWideCharToUpper()</code></p>
</td>
<td class="cellalignment1911" headers="r7c1-t7 r1c2-t7">
<p>Converts the <code>wchar</code> character specified by <code>wc</code> into the corresponding uppercase character if it exists in the specified locale. If no corresponding uppercase character exists, then it returns <code>wc</code> itself.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r8c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1033"></a>OCIWideCharStrcmp()</code></p>
</td>
<td class="cellalignment1911" headers="r8c1-t7 r1c2-t7">
<p>Compares two wide character strings by binary, linguistic, or case-insensitive comparison method.</p>
<p><span class="bold">Note:</span> The <code>UNICODE_BINARY</code> sort method cannot be used with <code>OCIWideCharStrcmp()</code> to perform a linguistic comparison of the supplied wide character arguments.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r9c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1034"></a>OCIWideCharStrncmp()</code></p>
</td>
<td class="cellalignment1911" headers="r9c1-t7 r1c2-t7">
<p>Similar to <code>OCIWideCharStrcmp()</code>. Compares two wide character strings by binary, linguistic, or case-insensitive comparison methods. At most <code>len1</code> bytes form <code>str1</code>, and <code>len2</code> bytes form <code>str2</code>.</p>
<p><span class="bold">Note:</span> As with <code>OCIWideCharStrcmp()</code>, the <code>UNICODE_BINARY</code> sort method cannot be used with <code>OOCIWideCharStrncmp()</code> to perform a linguistic comparison of the supplied wide character arguments.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r10c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1035"></a>OCIWideCharStrcat()</code></p>
</td>
<td class="cellalignment1911" headers="r10c1-t7 r1c2-t7">
<p>Appends a copy of the string pointed to by <code>wsrcstr</code>. Then it returns the number of characters in the resulting string.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r11c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1036"></a>OCIWideCharStrncat()</code></p>
</td>
<td class="cellalignment1911" headers="r11c1-t7 r1c2-t7">
<p>Appends a copy of the string pointed to by <code>wsrcstr</code>. Then it returns the number of characters in the resulting string. At most <code><span class="codeinlineitalic">n</span></code> characters are appended.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r12c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1037"></a>OCIWideCharStrchr()</code></p>
</td>
<td class="cellalignment1911" headers="r12c1-t7 r1c2-t7">
<p>Searches for the first occurrence of <code>wc</code> in the string pointed to by <code>wstr</code>. Then it returns a pointer to the <code>wchar</code> if the search is successful.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r13c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1038"></a>OCIWideCharStrrchr()</code></p>
</td>
<td class="cellalignment1911" headers="r13c1-t7 r1c2-t7">
<p>Searches for the last occurrence of <code>wc</code> in the string pointed to by <code>wstr</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r14c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1039"></a>OCIWideCharStrcpy()</code></p>
</td>
<td class="cellalignment1911" headers="r14c1-t7 r1c2-t7">
<p>Copies the <code>wchar</code> string pointed to by <code>wsrcstr</code> into the array pointed to by <code>wdststr</code>. Then it returns the number of characters copied.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r15c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1040"></a>OCIWideCharStrncpy()</code></p>
</td>
<td class="cellalignment1911" headers="r15c1-t7 r1c2-t7">
<p>Copies the <code>wchar</code> string pointed to by <code>wsrcstr</code> into the array pointed to by <code>wdststr</code>. Then it returns the number of characters copied. At most <code><span class="codeinlineitalic">n</span></code> characters are copied from the array.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r16c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1041"></a>OCIWideCharStrlen()</code></p>
</td>
<td class="cellalignment1911" headers="r16c1-t7 r1c2-t7">
<p>Computes the number of characters in the <code>wchar</code> string pointed to by <code>wstr</code> and returns this number</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r17c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1042"></a>OCIWideCharStrCaseConversion()</code></p>
</td>
<td class="cellalignment1911" headers="r17c1-t7 r1c2-t7">
<p>Converts the wide character string pointed to by <code>wsrcstr</code> into the case specified by a flag and copies the result into the array pointed to by <code>wdststr</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r18c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1043"></a>OCIWideCharDisplayLength()</code></p>
</td>
<td class="cellalignment1911" headers="r18c1-t7 r1c2-t7">
<p>Determines the number of column positions required for <code>wc</code> in display</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r19c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1044"></a>OCIWideCharMultibyteLength()</code></p>
</td>
<td class="cellalignment1911" headers="r19c1-t7 r1c2-t7">
<p>Determines the number of bytes required for <code>wc</code> in multibyte encoding</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r20c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1045"></a>OCIMultiByteStrcmp()</code></p>
</td>
<td class="cellalignment1911" headers="r20c1-t7 r1c2-t7">
<p>Compares two multibyte strings by binary, linguistic, or case-insensitive comparison methods</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r21c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1046"></a>OCIMultiByteStrncmp()</code></p>
</td>
<td class="cellalignment1911" headers="r21c1-t7 r1c2-t7">
<p>Compares two multibyte strings by binary, linguistic, or case-insensitive comparison methods. At most <code>len1</code> bytes form <code>str1</code> and <code>len2</code> bytes form <code>str2.</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r22c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1047"></a>OCIMultiByteStrcat()</code></p>
</td>
<td class="cellalignment1911" headers="r22c1-t7 r1c2-t7">
<p>Appends a copy of the multibyte string pointed to by <code>srcstr</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r23c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1048"></a>OCIMultiByteStrncat()</code></p>
</td>
<td class="cellalignment1911" headers="r23c1-t7 r1c2-t7">
<p>Appends a copy of the multibyte string pointed to by <code>srcstr</code>. At most <code><span class="codeinlineitalic">n</span></code> bytes from <code>srcstr</code> are appended to <code>dststr</code>.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r24c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1049"></a>OCIMultiByteStrcpy()</code></p>
</td>
<td class="cellalignment1911" headers="r24c1-t7 r1c2-t7">
<p>Copies the multibyte string pointed to by <code>srcstr</code> into an array pointed to by <code>dststr</code>. It returns the number of bytes copied.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r25c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1050"></a>OCIMultiByteStrncpy()</code></p>
</td>
<td class="cellalignment1911" headers="r25c1-t7 r1c2-t7">
<p>Copies the multibyte string pointed to by <code>srcstr</code> into an array pointed to by <code>dststr</code>. It returns the number of bytes copied. At most <code><span class="codeinlineitalic">n</span></code> bytes are copied from the array pointed to by <code>srcstr</code> to the array pointed to by <code>dststr</code>.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r26c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1051"></a>OCIMultiByteStrlen()</code></p>
</td>
<td class="cellalignment1911" headers="r26c1-t7 r1c2-t7">
<p>Returns the number of bytes in the multibyte string pointed to by <code>str</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r27c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1052"></a>OCIMultiByteStrnDisplayLength()</code></p>
</td>
<td class="cellalignment1911" headers="r27c1-t7 r1c2-t7">
<p>Returns the number of display positions occupied by the complete characters within the range of <code><span class="codeinlineitalic">n</span></code> bytes</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r28c1-t7" headers="r1c1-t7">
<p><code><a id="sthref1053"></a>OCIMultiByteStrCaseConversion()</code></p>
</td>
<td class="cellalignment1911" headers="r28c1-t7 r1c2-t7">
<p>Converts part of a string from one character set to another</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwidemax" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink LNOCI210" href="../../appdev.112/e10646/oci22glb.htm#LNOCI210"><span class="italic">Oracle Call Interface Programmer&rsquo;s Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="i1007031"></a><a id="NLSPG456"></a>
<div class="sect1">
<h2 class="sect1">Classifying Characters in OCI</h2>
<p><a href="#g1009256">Table 10-3</a> shows the OCI character classification functions.</p>
<div class="tblformalwidemax">
<p class="titleintable"><a id="NLSPG850"></a><a id="sthref1054"></a><a id="g1009256"></a>Table 10-3 OCI Character Classification Functions</p>
<table class="cellalignment1914" title="OCI Character Classification Functions " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1905">
<th class="cellalignment1915" id="r1c1-t9">Function</th>
<th class="cellalignment1915" id="r1c2-t9">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r2c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1055"></a>OCIWideCharIsAlnum()</code></p>
</td>
<td class="cellalignment1911" headers="r2c1-t9 r1c2-t9">
<p>Tests whether the wide character is an alphabetic letter or decimal digit</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r3c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1056"></a>OCIWideCharIsAlpha()</code></p>
</td>
<td class="cellalignment1911" headers="r3c1-t9 r1c2-t9">
<p>Tests whether the wide character is an alphabetic letter</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r4c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1057"></a>OCIWideCharIsCntrl()</code></p>
</td>
<td class="cellalignment1911" headers="r4c1-t9 r1c2-t9">
<p>Tests whether the wide character is a control character</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r5c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1058"></a>OCIWideCharIsDigit()</code></p>
</td>
<td class="cellalignment1911" headers="r5c1-t9 r1c2-t9">
<p>Tests whether the wide character is a decimal digit</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r6c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1059"></a>OCIWideCharIsGraph()</code></p>
</td>
<td class="cellalignment1911" headers="r6c1-t9 r1c2-t9">
<p>Tests whether the wide character is a graph character</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r7c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1060"></a>OCIWideCharIsLower()</code></p>
</td>
<td class="cellalignment1911" headers="r7c1-t9 r1c2-t9">
<p>Tests whether the wide character is a lowercase letter</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r8c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1061"></a>OCIWideCharIsPrint()</code></p>
</td>
<td class="cellalignment1911" headers="r8c1-t9 r1c2-t9">
<p>Tests whether the wide character is a printable character</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r9c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1062"></a>OCIWideCharIsPunct()</code></p>
</td>
<td class="cellalignment1911" headers="r9c1-t9 r1c2-t9">
<p>Tests whether the wide character is a punctuation character</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r10c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1063"></a>OCIWideCharIsSpace()</code></p>
</td>
<td class="cellalignment1911" headers="r10c1-t9 r1c2-t9">
<p>Tests whether the wide character is a space character</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r11c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1064"></a>OCIWideCharIsUpper()</code></p>
</td>
<td class="cellalignment1911" headers="r11c1-t9 r1c2-t9">
<p>Tests whether the wide character is an uppercase character</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r12c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1065"></a>OCIWideCharIsXdigit()</code></p>
</td>
<td class="cellalignment1911" headers="r12c1-t9 r1c2-t9">
<p>Tests whether the wide character is a hexadecimal digit</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r13c1-t9" headers="r1c1-t9">
<p><code><a id="sthref1066"></a>OCIWideCharIsSingleByte()</code></p>
</td>
<td class="cellalignment1911" headers="r13c1-t9 r1c2-t9">
<p>Tests whether <code>wc</code> is a single-byte character when converted into multibyte</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwidemax" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink LNOCI210" href="../../appdev.112/e10646/oci22glb.htm#LNOCI210"><span class="italic">Oracle Call Interface Programmer&rsquo;s Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="i1007308"></a><a id="NLSPG457"></a>
<div class="sect1">
<h2 class="sect1"><a id="sthref1067"></a><a id="sthref1068"></a>Converting Character Sets in OCI</h2>
<p>Conversion between Oracle character sets and Unicode (16-bit, fixed-width Unicode encoding) is supported. Replacement characters are used if a character has no mapping from Unicode to the Oracle character set. Therefore, conversion back to the original character set is not always possible without data loss.</p>
<p><a href="#g1009299">Table 10-4</a> summarizes the OCI character set conversion functions.</p>
<div class="tblformalwidemax">
<p class="titleintable"><a id="NLSPG851"></a><a id="sthref1069"></a><a id="g1009299"></a>Table 10-4 OCI Character Set Conversion Functions</p>
<table class="cellalignment1914" title="OCI Character Set Conversion Functions " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1905">
<th class="cellalignment1915" id="r1c1-t11">Function</th>
<th class="cellalignment1915" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r2c1-t11" headers="r1c1-t11">
<p><code><a id="sthref1070"></a>OCICharSetToUnicode()</code></p>
</td>
<td class="cellalignment1911" headers="r2c1-t11 r1c2-t11">
<p>Converts a multibyte string pointed to by <code>src</code> to Unicode into the array pointed to by <code>dst</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r3c1-t11" headers="r1c1-t11">
<p><code><a id="sthref1071"></a>OCIUnicodeToCharSet()</code></p>
</td>
<td class="cellalignment1911" headers="r3c1-t11 r1c2-t11">
<p>Converts a Unicode string pointed to by <code>src</code> to multibyte into the array pointed to by <code>dst</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r4c1-t11" headers="r1c1-t11">
<p><a id="sthref1072"></a><code>OCINlsCharSetConvert()</code></p>
</td>
<td class="cellalignment1911" headers="r4c1-t11 r1c2-t11">
<p>Converts a string from one character set to another</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r5c1-t11" headers="r1c1-t11">
<p><code><a id="sthref1073"></a>OCICharSetConversionIsReplacementUsed()</code></p>
</td>
<td class="cellalignment1911" headers="r5c1-t11 r1c2-t11">
<p>Indicates whether replacement characters were used for characters that could not be converted in the last invocation of <code>OCINlsCharSetConvert()</code> or <code>OCIUnicodeToCharSet()</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwidemax" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink LNOCI210" href="../../appdev.112/e10646/oci22glb.htm#LNOCI210"><span class="italic">Oracle Call Interface Programmer&rsquo;s Guide</span></a></p>
</li>
<li>
<p><a href="ch7progrunicode.htm#i1006356">"OCI Programming with Unicode"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1007466"></a><a id="NLSPG458"></a>
<div class="sect1">
<h2 class="sect1">OCI Messaging Functions</h2>
<p>The user message API provides a simple interface for cartridge developers to retrieve their own messages as well as Oracle messages.</p>
<p><a href="#g1009322">Table 10-5</a> summarizes the OCI messaging functions.</p>
<div class="tblformalwide">
<p class="titleintable"><a id="NLSPG852"></a><a id="sthref1074"></a><a id="g1009322"></a>Table 10-5 OCI Messaging Functions</p>
<table class="cellalignment1914" title="OCI Messaging Functions " summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1905">
<th class="cellalignment1915" id="r1c1-t13">Function</th>
<th class="cellalignment1915" id="r1c2-t13">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r2c1-t13" headers="r1c1-t13">
<p><code><a id="sthref1075"></a>OCIMessageOpen()</code></p>
</td>
<td class="cellalignment1911" headers="r2c1-t13 r1c2-t13">
<p>Opens a message handle in a language pointed to by <code>hndl</code></p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r3c1-t13" headers="r1c1-t13">
<p><code><a id="sthref1076"></a>OCIMessageGet()</code></p>
</td>
<td class="cellalignment1911" headers="r3c1-t13 r1c2-t13">
<p>Retrieves a message with message number identified by <code>msgno</code>. If the buffer is not zero, then the function copies the message into the buffer specified by <code>msgbuf</code>.</p>
</td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r4c1-t13" headers="r1c1-t13">
<p><code><a id="sthref1077"></a>OCIMessageClose()</code></p>
</td>
<td class="cellalignment1911" headers="r4c1-t13 r1c2-t13">
<p>Closes a message handle pointed to by <code>msgh</code> and frees any memory associated with this handle</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADDCI" href="../../appdev.112/e10765/toc.htm"><span class="italic">Oracle Database Data Cartridge Developer's Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="i1007610"></a><a id="NLSPG459"></a>
<div class="sect1">
<h2 class="sect1"><a id="sthref1078"></a>lmsgen Utility</h2>
<p class="subhead1"><a id="NLSPG853"></a>Purpose</p>
<p>The <code>lmsgen</code> utility converts text-based message files (<code>.msg</code>) into binary format (<code>.msb</code>) so that Oracle messages and OCI messages provided by the user can be returned to OCI functions in the desired language.</p>
<p>Messages used by the server are stored in binary-format files that are placed in the <code>$ORACLE_HOME/product_name/mesg</code> directory, or the equivalent for your operating system. Multiple versions of these files can exist, one for each supported language, using the following filename convention:</p>
<pre>
&lt;product_id&gt;&lt;language_abbrev&gt;.msb
</pre>
<p>For example, the file containing the server messages in French is called <code>oraf.msb</code>, because <code>ORA</code> is the product ID (&lt;<code>product_id</code>&gt;) and <code>F</code> is the language abbreviation (&lt;<code>language_abbrev</code>&gt;) for French. The value for <code>product_name</code> is rdbms, so it is in the <code>$ORACLE_HOME/rdbms/mesg</code> directory.</p>
<p class="subhead1"><a id="NLSPG854"></a>Syntax</p>
<pre>
LMSGEN <span class="codeinlineitalic">text_file</span> <span class="codeinlineitalic">product</span> <span class="codeinlineitalic">facility</span> [<span class="codeinlineitalic">language</span>] [-i <span class="italic">indir</span>] [-o <span class="italic">outdir</span>]
</pre>
<br />
<code><span class="codeinlineitalic">text_file</span></code> is a message text file.<br />
<code><span class="codeinlineitalic">product</span></code> is the name of the product.<br />
<code><span class="codeinlineitalic">facility</span></code> is the name of the facility.<br />
<code><span class="codeinlineitalic">language</span></code> is the optional message language corresponding to the language specified in the <code>NLS_LANG</code> parameter. The language parameter is required if the message file is not tagged properly with language.<br />
<code><span class="codeinlineitalic">indir</span></code> is the optional directory to specify the text file location.<br />
<code><span class="codeinlineitalic">outdir</span></code> is the optional directory to specify the output file location.<br />
<p>The output (<code>.msb</code>) file will be generated under the <code>$ORACLE_HOME/product/mesg/</code> directory.</p>
<p class="subhead1"><a id="i1007622"></a><a id="NLSPG855"></a>Text Message Files</p>
<p>Text message files must follow these guidelines:</p>
<ul>
<li>
<p>Lines that start with <code>/</code> and <code>//</code> are treated as internal comments and are ignored.</p>
</li>
<li>
<p>To tag the message file with a specific language, include a line similar to the following:</p>
</li>
</ul>
<pre>
    #   CHARACTER_SET_NAME= Japanese_Japan.JA16EUC
</pre>
<ul>
<li>
<p>Each message contains three fields:</p>
</li>
</ul>
<pre>
<span class="codeinlineitalic">     message_number</span>, <span class="codeinlineitalic">warning_level</span>, <span class="codeinlineitalic">message_text</span>
</pre>
<dl>
<dd>The message number must be unique within a message file.</dd>
<dd>The warning level is not currently used. Use <code>0</code>.</dd>
<dd>The message text cannot be longer than 511 bytes.</dd>
</dl>
<p>The following example shows an Oracle message text file:</p>
<pre>
/ Copyright (c) 2006 by Oracle.  All rights reserved.
/ This is a test us7ascii message file
# CHARACTER_SET_NAME= american_america.us7ascii
/
00000, 00000, "Export terminated unsuccessfully\n"
00003, 00000, "no storage definition found for segment(%lu, %lu)"
</pre>
<p class="subhead1"><a id="NLSPG856"></a>Example: Creating a Binary Message File from a Text Message File</p>
<p>The following table contains sample values for the <code>lmsgen</code> parameters:</p>
<div class="inftblinformal">
<table class="cellalignment1914" title="lmsgn parameters" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1905">
<th class="cellalignment1915" id="r1c1-t15">Parameter</th>
<th class="cellalignment1915" id="r1c2-t15">Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r2c1-t15" headers="r1c1-t15"><code><span class="codeinlineitalic">product</span></code></td>
<td class="cellalignment1911" headers="r2c1-t15 r1c2-t15"><code>myapp</code></td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r3c1-t15" headers="r1c1-t15"><code><span class="codeinlineitalic">facility</span></code></td>
<td class="cellalignment1911" headers="r3c1-t15 r1c2-t15"><code>imp</code></td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r4c1-t15" headers="r1c1-t15"><code><span class="codeinlineitalic">language</span></code></td>
<td class="cellalignment1911" headers="r4c1-t15 r1c2-t15"><code>AMERICAN</code></td>
</tr>
<tr class="cellalignment1905">
<td class="cellalignment1911" id="r5c1-t15" headers="r1c1-t15"><code><span class="codeinlineitalic">text_file</span></code></td>
<td class="cellalignment1911" headers="r5c1-t15 r1c2-t15"><code>impus.msg</code></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>One of the lines in the text message file is the following:</p>
<pre>
00128,2, "Duplicate entry %s found in %s"
</pre>
<p>The <code>lmsgen</code> utility converts the text message file (<code>impus.msg</code>) into binary format, resulting in a file called <code>impus.msb</code>. The directory <code>$ORACLE_HOME/myapp/mesg</code> must already exist.</p>
<pre>
% lmsgen impus.msg myapp imp AMERICAN
</pre>
<p>The following output results:</p>
<pre>
Generating message file impus.msg --&gt;
$ORACLE_HOME/myapp/mesg/impus.msb

NLS Binary Message File Generation Utility: Version 10.2.0.1.0 - Production

Copyright (c) Oracle 1979, 2006.  All rights reserved.

CORE 10.2.0.1.0       Production
</pre></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1904">
<tr>
<td class="cellalignment1911">
<table class="cellalignment1909">
<tr>
<td class="cellalignment1908"><a href="ch9sql.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1908"><a href="ch11charsetmig.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1913">
<table class="cellalignment1907">
<tr>
<td class="cellalignment1908"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1908"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1908"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1908"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1908"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1908"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
