<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Reducing Downtime for Planned Maintenance</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1022" />
<meta name="dcterms.created" content="2014-06-05T10:54:0Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database High Availability Best Practices" />
<meta name="dcterms.identifier" content="E10803-06" />
<meta name="dcterms.isVersionOf" content="HABPT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="outage.htm" title="Previous" type="text/html" />
<link rel="Next" href="glossary.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10803.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">19/21</span> <!-- End Header -->
<div id="HABPT044" class="chapter"><a id="BABBGGBG"></a>
<h1 class="chapter"><span class="secnum">14</span> Reducing Downtime for Planned Maintenance</h1>
<p>This chapter describes scheduled outages and the Oracle operational best practices that can tolerate or manage each outage type and minimize downtime.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#CACFFBJF">Overview of Scheduled Outages</a></p>
</li>
<li>
<p><a href="#CACCFHHC">Eliminating or Reducing Downtime for Scheduled Outages</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="outage.htm#CDEGEJJJ">Chapter 13, "Recovering from Unscheduled Outages"</a> for information about unscheduled outages</div>
<a id="CACFFBJF"></a>
<div id="HABPT00404" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">14.1</span> Overview of Scheduled Outages</h2>
<p>Scheduled <a id="sthref900"></a>outages are required for regular maintenance of the technology infrastructure that supports the application, including tasks such as:</p>
<ul>
<li>
<p>Hardware maintenance, repair, and upgrades</p>
</li>
<li>
<p>Software upgrades and patching</p>
</li>
<li>
<p>Application (programmatic) changes, patches, and upgrades</p>
</li>
<li>
<p>Changes to improve performance and manageability of systems</p>
</li>
</ul>
<p>You can implement many of these tasks while maintaining continuous application availability.</p>
<p>The following sections provide best practice recommendations for reducing scheduled outages on the primary and secondary sites:</p>
<ul>
<li>
<p><a href="#i1011892">Managing Scheduled Outages on the Primary Site</a></p>
</li>
<li>
<p><a href="#i1011896">Managing Scheduled Outages On the Secondary Site</a></p>
</li>
</ul>
<a id="i1011892"></a>
<div id="HABPT5081" class="sect2">
<h3 class="sect2"><span class="secnum">14.1.1</span> Managing Scheduled Outages on the Primary Site</h3>
<p><a href="#BABCCIFD">Table 14-1</a> shows the <a id="sthref901"></a><a id="sthref902"></a><a id="sthref903"></a>preferred solutions for performing scheduled outages on the primary site. The table includes links to detailed descriptions in <a href="#CACCFHHC">Section 14.2, "Eliminating or Reducing Downtime for Scheduled Outages"</a>.</p>
<div id="HABPT5313" class="tblruleformalwide">
<p class="titleintable"><a id="sthref904"></a><a id="BABCCIFD"></a>Table 14-1 Solutions for Scheduled Outages on the Primary Site</p>
<table class="cellalignment1620" title="Solutions for Scheduled Outages on the Primary Site" summary="solutions for scheduled outages on the primary site" dir="ltr">
<thead>
<tr class="cellalignment1611">
<th class="cellalignment1621" id="r1c1-t3">Planned Maintenance</th>
<th class="cellalignment1621" id="r1c2-t3">Description and Examples</th>
<th class="cellalignment1621" id="r1c3-t3">Preferred Oracle Solution</th>
<th class="cellalignment1621" id="r1c4-t3">Estimated Downtime</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r2c1-t3" headers="r1c1-t3">
<p>Site maintenance</p>
</td>
<td class="cellalignment1617" headers="r2c1-t3 r1c2-t3">
<p>Maintenance performed on the entire site where the current primary database resides is unavailable. Usually known well in advance.</p>
<ul>
<li>
<p>Scheduled power outages</p>
</li>
<li>
<p>Site maintenance</p>
</li>
<li>
<p>Regular planned switchovers to test infrastructure</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r2c1-t3 r1c3-t3">
<p><a href="#i1006524">Section 14.2.1, "Site, Hardware, and Software Maintenance Using Database Switchover"</a></p>
</td>
<td class="cellalignment1617" headers="r2c1-t3 r1c4-t3">
<p>&lt; 5 minutes</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r3c1-t3" headers="r1c1-t3">
<p>Hardware maintenance or system software maintenance that impacts the entire database cluster</p>
</td>
<td class="cellalignment1617" headers="r3c1-t3 r1c2-t3">
<p>Hardware maintenance on a database server cluster.</p>
<ul>
<li>
<p>Upgrade of the cluster interconnect</p>
</li>
<li>
<p>Upgrade to the storage tier that requires downtime on the database tier</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r3c1-t3 r1c3-t3">
<p><a href="#i1006524">Section 14.2.1, "Site, Hardware, and Software Maintenance Using Database Switchover"</a></p>
</td>
<td class="cellalignment1617" headers="r3c1-t3 r1c4-t3">
<p>&lt; 5 minutes</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r4c1-t3" headers="r1c1-t3">
<p>Hardware maintenance or system software maintenance that impacts a subset of the database cluster</p>
</td>
<td class="cellalignment1617" headers="r4c1-t3 r1c2-t3">
<p>Hardware maintenance or system software maintenance on a database server. The scope of the downtime is restricted to a node of the database cluster.</p>
<ul>
<li>
<p>Proactive replacement of RAID card battery</p>
</li>
<li>
<p>Addition of memory or CPU to an existing node in the database tier</p>
</li>
<li>
<p>Upgrade of a software component such as the operating system</p>
</li>
<li>
<p>Changes to the configuration parameters for the operating system</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r4c1-t3 r1c3-t3">
<p>Oracle RAC service relocation (see <a href="#BABCEJGA">Section 14.2.11, "Automatic Workload Management for System Maintenance"</a>)</p>
</td>
<td class="cellalignment1617" headers="r4c1-t3 r1c4-t3">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r5c1-t3" headers="r1c1-t3">
<p>Perform patch set, maintenance, or major upgrade to Oracle Grid Infrastructure upgrade (includes Oracle Clusterware and Oracle ASM)</p>
</td>
<td class="cellalignment1617" headers="r5c1-t3 r1c2-t3">
<p>Software maintenance of Grid Infrastructure.</p>
<ul>
<li>
<p>Patch set upgrade Grid from 11g Release 2 (11.2.0.1) to 11g Release 2 (11.2.0.2) Patch Set 1</p>
</li>
<li>
<p>Maintenance release upgrade from 11g Release 1 to 11g Release 2</p>
</li>
<li>
<p>Major release upgrade from 10g to 11g</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r5c1-t3 r1c3-t3">
<ul>
<li>
<p><a href="#CACHHFBD">Section 14.2.5, "Grid Infrastructure Maintenance"</a></p>
<p><span class="italic">or</span></p>
</li>
<li>
<p><a href="#i1006524">Section 14.2.1, "Site, Hardware, and Software Maintenance Using Database Switchover"</a></p>
<p><span class="italic">or</span></p>
</li>
<li>
<p><a href="#BABEEDHD">Section 14.2.3, "Data Guard Standby-First Patch Apply"</a></p>
</li>
</ul>
<p>See <a class="olink TDPRC443" href="../../rac.112/e17264/softpatch2.htm#TDPRC443"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a> and see your platform-specific Oracle Grid Infrastructure Installation Guide for complete details, in the appendix, "How to Upgrade to Oracle Grid Infrastructure"</p>
</td>
<td class="cellalignment1617" headers="r5c1-t3 r1c4-t3">
<p>No downtime</p>
<pre>
   
   
   
</pre>
<p>&lt; 5 minutes</p>
<pre>
   
   
   
   
   
</pre>
<p>No downtime (when no role transition or &lt; 5 minutes if role transition occurs</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r6c1-t3" headers="r1c1-t3">
<p>Perform patch set, maintenance, or major upgrade to Oracle Database</p>
</td>
<td class="cellalignment1617" headers="r6c1-t3 r1c2-t3">
<p>Software maintenance of Oracle Database.</p>
<ul>
<li>
<p>Patch set upgrade Grid from 11g Release 2 (11.2.0.1) to 11g Release 2 (11.2.0.2) Patch Set 1</p>
</li>
<li>
<p>Maintenance release upgrade from 11g Release 1 to 11g Release 2</p>
</li>
<li>
<p>Major release upgrade from 10g to 11g</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r6c1-t3 r1c3-t3">
<ul>
<li>
<p>Oracle Database rolling upgrade with Data Guard SQL Apply (see <a href="#BABJDCBB">Section 14.2.6.2, "Upgrading with Data Guard SQL Apply or Transient Logical Standby Database"</a>)</p>
<p><span class="italic">or</span></p>
</li>
<li>
<p>Oracle GoldenGate (see <a href="#BABBEJID">Section 14.2.6.3, "Upgrading with Oracle GoldenGate"</a>)</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r6c1-t3 r1c4-t3">
<p>&lt; 5 minutes</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r7c1-t3" headers="r1c1-t3">
<p>Apply Patch Set Update (PSU), Critical Patch Update (CPU), or patch bundle</p>
</td>
<td class="cellalignment1617" headers="r7c1-t3 r1c2-t3">
<p>Software maintenance of Grid Infrastructure or Oracle Database.</p>
<ul>
<li>
<p>Installation of Patch Set Update 11.2.0.2.3</p>
</li>
<li>
<p>Installation of 11.2.0.2 Grid Infrastructure Bundle 1</p>
</li>
<li>
<p>Installation of Critical Patch Update July 2011</p>
</li>
<li>
<p>Installation of Exadata Database Bundle Patch 8</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r7c1-t3 r1c3-t3">
<ul>
<li>
<p>Oracle RAC rolling patch upgrade using OPatch (see <a href="#i1006430">Section 14.2.4, "Oracle RAC Patches"</a>)</p>
<p><span class="italic">or</span></p>
</li>
<li>
<p><a href="#BABEEDHD">Section 14.2.3, "Data Guard Standby-First Patch Apply"</a></p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r7c1-t3 r1c4-t3">
<p>No downtime</p>
<pre>
   
   
   
   
</pre>
<p>No downtime (when no role transition or &lt; 5 minutes if role transition occurs</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r8c1-t3" headers="r1c1-t3">
<p>Apply Oracle interim ("one-off") or diagnostic patch</p>
</td>
<td class="cellalignment1617" headers="r8c1-t3 r1c2-t3">
<p>Patch Oracle software to fix a specific customer issue.</p>
<ul>
<li>
<p>Installation of patch 10205230</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r8c1-t3 r1c3-t3">
<ul>
<li>
<p>Oracle RAC rolling patch upgrade using OPatch (see <a href="#i1006430">Section 14.2.4, "Oracle RAC Patches"</a>)</p>
<p><span class="italic">or</span></p>
</li>
<li>
<p><a href="#BABEEDHD">Section 14.2.3, "Data Guard Standby-First Patch Apply"</a></p>
<p><span class="italic">or</span></p>
</li>
<li>
<p><a href="#BABCAGCJ">Section 14.2.2, "Online Patching"</a></p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r8c1-t3 r1c4-t3">
<p>No downtime</p>
<pre>
   
   
   
   
</pre>
<p>No downtime (when no role transition or &lt; 5 minutes if role transition occurs</p>
<pre>
   
   
</pre>
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r9c1-t3" headers="r1c1-t3">
<p>Database object reorganization or redefinition</p>
</td>
<td class="cellalignment1617" headers="r9c1-t3 r1c2-t3">
<p>Changes to the logical structure or the physical organization of Oracle Database objects, primarily to improve performance or manageability.</p>
<p>Changes to the data or schema.</p>
<p>Using the Oracle Database online redefinition feature enables objects to be available during the reorganization or redefinition.</p>
<ul>
<li>
<p>Moving an object to a different tablespace</p>
</li>
<li>
<p>Converting a table to a partitioned table</p>
</li>
<li>
<p>Add, modify, or drop one or more columns in a table or cluster</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r9c1-t3 r1c3-t3">
<p>Online object reorganization with <code>DBMS_REDEFINITION</code> (see <a href="#i1006337">Section 14.2.10, "Data Reorganization and Redefinition"</a>)</p>
</td>
<td class="cellalignment1617" headers="r9c1-t3 r1c4-t3">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r10c1-t3" headers="r1c1-t3">
<p>Database storage maintenance</p>
</td>
<td class="cellalignment1617" headers="r10c1-t3 r1c2-t3">
<p>Maintenance of storage where database files reside.</p>
<ul>
<li>
<p>Converting to Oracle ASM</p>
</li>
<li>
<p>Adding or removing storage</p>
</li>
<li>
<p>Patching or upgrading storage firmware or software</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r10c1-t3 r1c3-t3">
<p>Online storage maintenance using Oracle ASM (see <a href="#CDEIFEHD">Section 14.2.5.2, "Storage Maintenance"</a>)</p>
</td>
<td class="cellalignment1617" headers="r10c1-t3 r1c4-t3">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r11c1-t3" headers="r1c1-t3">
<p>Database platform or location migration</p>
</td>
<td class="cellalignment1617" headers="r11c1-t3 r1c2-t3">
<p>Changing operating system platform of the primary and standby databases.</p>
<p>Changing physical location of the primary database</p>
<ul>
<li>
<p>Moving to the Linux operating system</p>
</li>
<li>
<p>Moving the primary database from one data center to another</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r11c1-t3 r1c3-t3">
<p><a href="#BABBEBIC">Section 14.2.7, "Database Platform or Location Migration"</a></p>
</td>
<td class="cellalignment1617" headers="r11c1-t3 r1c4-t3">
<p>&lt; 5 minutes to hours</p>
<p>(depending on method chosen)</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r12c1-t3" headers="r1c1-t3">
<p>Application changes</p>
</td>
<td class="cellalignment1617" headers="r12c1-t3 r1c2-t3">
<p>May include data changes, schema, and other programmatic changes.</p>
<ul>
<li>
<p>Application upgrades</p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r12c1-t3 r1c3-t3">
<ul>
<li>
<p><a href="#BABEGJBF">Section 14.2.8, "Edition-Based Redefinition for Online Application Maintenance and Upgrades"</a></p>
<p><span class="italic">or</span></p>
</li>
<li>
<p><a href="#BABBEJID">Section 14.2.6.3, "Upgrading with Oracle GoldenGate"</a></p>
</li>
</ul>
</td>
<td class="cellalignment1617" headers="r12c1-t3 r1c4-t3">
<p>&lt; 5 minutes</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformalwide" --></div>
<!-- class="sect2" -->
<a id="i1011896"></a>
<div id="HABPT5083" class="sect2">
<h3 class="sect2"><span class="secnum">14.1.2</span> Managing Scheduled Outages On the Secondary Site</h3>
<p><a id="sthref905"></a><a id="sthref906"></a><a id="sthref907"></a>Scheduled outages on the secondary site may impact availability of applications that use Active Data Guard to offload read-intensive work from the primary database. Outages on the secondary site might affect the RTO and RPO if there are concurrent failures on the primary site. Outages on the secondary site can be managed with no effect on primary database availability:</p>
<ul>
<li>
<p>If maximum protection database mode is configured and there is only one standby database protecting the primary database, then you must downgrade the protection mode before scheduled outages on the standby instance or database so that there is no downtime on the primary database.</p>
</li>
<li>
<p>If maximum protection database mode is configured and there are multiple standby databases, there is no need to downgrade the protection mode if at least one standby database that is configured with the <code>LGWR SYNC AFFIRM</code> attributes is available, and to which the primary database can transmit redo data.</p>
</li>
</ul>
<p>When scheduling secondary site maintenance, consider that the duration of a site-wide or clusterwide outage adds to the time that the standby database lags behind the primary database, which in turn lengthens the time to restore fault tolerance. See <a href="config_dg.htm#CEGDJEDB">Section 9.2, "Determine Protection Mode and Data Guard Transport"</a>for an overview of the Data Guard protection modes.</p>
<p><a href="#CACHBDDI">Table 14-2</a> describes the steps for performing scheduled outages on the secondary site.</p>
<div id="HABPT5084" class="tblruleformalwide">
<p class="titleintable"><a id="sthref908"></a><a id="CACHBDDI"></a>Table 14-2 Managing Scheduled Outages on the Secondary Site</p>
<table class="cellalignment1620" title="Managing Scheduled Outages on the Secondary Site" summary="This table presents recovery steps for scheduled outages on secondary sites for Data Guard Only and MAA architectures." dir="ltr">
<thead>
<tr class="cellalignment1611">
<th class="cellalignment1621" id="r1c1-t4">Planned Maintenance</th>
<th class="cellalignment1621" id="r1c2-t4">Oracle Database 11<span class="italic">g</span> with Data Guard</th>
<th class="cellalignment1621" id="r1c3-t4">Oracle Database 11<span class="italic">g</span> - MAA</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r2c1-t4" headers="r1c1-t4">
<p>Site shutdown</p>
</td>
<td class="cellalignment1617" headers="r2c1-t4 r1c2-t4">
<p>Before the outage:</p>
<p><a href="#i1011896">Section 14.1.2, "Managing Scheduled Outages On the Secondary Site"</a></p>
<p>After the outage:</p>
<p><a href="outage.htm#BABHJEJB">Section 13.3.4, "Restoring Fault Tolerance After Planned Downtime on Secondary Site or Cluster"</a></p>
</td>
<td class="cellalignment1617" headers="r2c1-t4 r1c3-t4">
<p>Before the outage:</p>
<p><a href="#i1011896">Section 14.1.2, "Managing Scheduled Outages On the Secondary Site"</a></p>
<p>After the outage:</p>
<p><a href="outage.htm#BABHJEJB">Section 13.3.4, "Restoring Fault Tolerance After Planned Downtime on Secondary Site or Cluster"</a></p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r3c1-t4" headers="r1c1-t4">
<p>Hardware or non-Oracle database software maintenance on the node that is running the managed recovery process (MRP)</p>
</td>
<td class="cellalignment1617" headers="r3c1-t4 r1c2-t4">
<p>Before the outage:</p>
<p><a href="#i1011896">Section 14.1.2, "Managing Scheduled Outages On the Secondary Site"</a></p>
</td>
<td class="cellalignment1617" headers="r3c1-t4 r1c3-t4">
<p>Before the outage:</p>
<p><a href="#i1011896">Section 14.1.2, "Managing Scheduled Outages On the Secondary Site"</a></p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r4c1-t4" headers="r1c1-t4">
<p>Hardware or non-Oracle database software maintenance on a node that is not running the MRP</p>
</td>
<td class="cellalignment1617" headers="r4c1-t4 r1c2-t4">
<p>Not applicable</p>
</td>
<td class="cellalignment1617" headers="r4c1-t4 r1c3-t4">
<p>No effect because the primary standby node or instance receives redo logs that are applied with the managed recovery process</p>
<p>After the outage: Restart node and instance, when available</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r5c1-t4" headers="r1c1-t4">
<p>Hardware or non-Oracle database software maintenance (clusterwide impact)</p>
</td>
<td class="cellalignment1617" headers="r5c1-t4 r1c2-t4">
<p>Not applicable</p>
</td>
<td class="cellalignment1617" headers="r5c1-t4 r1c3-t4">
<p>Before the outage:</p>
<p><a href="#i1011896">Section 14.1.2, "Managing Scheduled Outages On the Secondary Site"</a></p>
<p>After the outage:</p>
<p><a href="outage.htm#BABHJEJB">Section 13.3.4, "Restoring Fault Tolerance After Planned Downtime on Secondary Site or Cluster"</a></p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r6c1-t4" headers="r1c1-t4">
<p>Oracle patch and software upgrades</p>
</td>
<td class="cellalignment1617" headers="r6c1-t4 r1c2-t4">
<p>Downtime needed for upgrade, but there is no effect on the primary node unless the configuration is in maximum protection database mode</p>
</td>
<td class="cellalignment1617" headers="r6c1-t4 r1c3-t4">
<p>Downtime needed for upgrade, but there is no effect on the primary node unless the configuration is in maximum protection database mode</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformalwide" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACCFHHC"></a>
<div id="HABPT00407" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">14.2</span> Eliminating or Reducing Downtime for Scheduled Outages</h2>
<p><a id="ABC3588605"></a>The best practices for eliminating or reducing downtime for scheduled outages includes the following sections:</p>
<ul>
<li>
<p><a href="#i1006524">Site, Hardware, and Software Maintenance Using Database Switchover</a></p>
</li>
<li>
<p><a href="#BABCAGCJ">Online Patching</a></p>
</li>
<li>
<p><a href="#BABEEDHD">Data Guard Standby-First Patch Apply</a></p>
</li>
<li>
<p><a href="#i1006430">Oracle RAC Patches</a></p>
</li>
<li>
<p><a href="#CDEIFEHD">Storage Maintenance</a></p>
</li>
<li>
<p><a href="#i1006387">Database Upgrades</a></p>
</li>
<li>
<p><a href="#BABBEBIC">Database Platform or Location Migration</a></p>
</li>
<li>
<p><a href="#BABEGJBF">Edition-Based Redefinition for Online Application Maintenance and Upgrades</a></p>
</li>
<li>
<p><a href="#CACEJAAE">Oracle GoldenGate for Online Application Upgrades</a></p>
</li>
<li>
<p><a href="#i1006337">Data Reorganization and Redefinition</a></p>
</li>
<li>
<p><a href="#BABCEJGA">Automatic Workload Management for System Maintenance</a></p>
</li>
</ul>
<p>Before performing any update to your system, Oracle recommends you perform extensive testing.</p>
<a id="i1006524"></a>
<div id="HABPT5085" class="sect2">
<h3 class="sect2"><span class="secnum">14.2.1</span> Site, Hardware, and Software Maintenance Using Database Switchover</h3>
<p><a id="sthref909"></a><a id="sthref910"></a>A <span class="italic">switchover</span> is a planned transition that includes a series of steps to switch database roles between the primary and standby databases. Following a successful switchover operation, the standby database assumes the primary role and the primary database becomes a standby database. Database switchover can be done by Oracle Enterprise Manager, Oracle Data Guard broker, or by issuing SQL*Plus statements. At times the term <span class="italic">switchback</span> is also used within the scope of database role management. A switchback operation is a subsequent switchover operation to return the standby databases to their original roles.</p>
<p>Switchovers are useful in many situations when performing site maintenance, and hardware or software maintenance such as database upgrades.</p>
<a id="i1006623"></a>
<div id="HABPT5086" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.1.1</span> When to Perform a Data Guard Switchover</h4>
<p><a id="sthref911"></a><a id="sthref912"></a>Switchover can occur whenever a primary database is started, the target standby database is available, and all the archived redo logs are available.</p>
<p>Switchovers are useful in the following situations:</p>
<ul>
<li>
<p>Scheduled maintenance such as hardware maintenance or firmware patches on the primary host</p>
</li>
<li>
<p>Resolution of data failures when the primary database is still opened</p>
</li>
<li>
<p>Testing and validating the secondary resources, as a means to test disaster recovery readiness</p>
</li>
<li>
<p>When using SQL Apply to perform a rolling upgrade (see <a href="#BABJDCBB">Section 14.2.6.2, "Upgrading with Data Guard SQL Apply or Transient Logical Standby Database"</a>)</p>
</li>
</ul>
<p>Switchover is not possible or practical under the following circumstances:</p>
<ul>
<li>
<p>Archived redo log files that are needed for apply are missing</p>
</li>
<li>
<p>A point-in-time recovery is required</p>
</li>
<li>
<p>The primary database is not open and cannot be opened</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABDGGAC"></a>
<div id="HABPT5087" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.1.2</span> Best Practices for Configuring Data Guard Switchover<a id="sthref913"></a></h4>
<p>Before performing a switchover, employ the Data Guard configuration best practices. For more information, see <a href="config_dg.htm#CEGIEBCF">Section 9.4.1, "Oracle Data Guard Switchovers Best Practices"</a>.</p>
</div>
<!-- class="sect3" -->
<a id="BABIGAAB"></a>
<div id="HABPT5088" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.1.3</span> How to Perform Data Guard Switchover</h4>
<p><a id="sthref914"></a><a id="sthref915"></a>You should perform switchovers dynamically using Oracle Enterprise Manager. If you are not using Oracle Enterprise Manager, then you can perform switchovers manually using the DGMGRL command-line interface or SQL*Plus statements:</p>
<ul>
<li>
<p>Using Oracle Enterprise Manager, as described in <a class="olink DGBKR570" href="../../server.112/e40771/cli.htm#DGBKR570"><span class="italic">Oracle Data Guard Broker</span></a></p>
</li>
<li>
<p>Using the DGMGRL command-line interface, as described in <a class="olink DGBKR570" href="../../server.112/e40771/cli.htm#DGBKR570"><span class="italic">Oracle Data Guard Broker</span></a></p>
</li>
<li>
<p>Using SQL*Plus:</p>
<ul>
<li>
<p><a id="sthref916"></a><a id="sthref917"></a>Role Transitions Involving Physical Standby Databases:</p>
<p>See <a class="olink SBYDB00620" href="../../server.112/e41134/role_management.htm#SBYDB00620"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for detailed steps on Role Transitions Involving Physical Standby Databases.</p>
</li>
<li>
<p><a id="sthref918"></a><a id="sthref919"></a>Role Transitions Involving Logical Standby Databases:</p>
<p>See <a class="olink SBYDB00630" href="../../server.112/e41134/role_management.htm#SBYDB00630"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for detailed step on Role Transitions Involving Logical Standby Databases.</p>
</li>
</ul>
</li>
</ul>
<p>After performing the Data Guard Switchover do the following:</p>
<ul>
<li>
<p>If the database is moved to the secondary site and the application tier is also moved to the secondary site, perform complete site failover. For more information see <a href="outage.htm#BABHCAIA">Section 13.2.1, "Complete Site Failover (Failover to Secondary Site)."</a></p>
</li>
<li>
<p>If only the database is moved to the secondary site, perform application failover. See <a href="outage.htm#CACFJFEG">Section 13.2.4, "Application Failover"</a> for more information.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABCAGCJ"></a>
<div id="HABPT5095" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">14.2.2</span> Online Patching</h3>
<p><a id="sthref920"></a><a id="sthref921"></a><a id="sthref922"></a><a id="sthref923"></a><a id="sthref924"></a>Beginning with Oracle Database 11<span class="italic">g</span> there is support for online patching for some qualified interim and diagnostic patches. Online patching provides the ability to patch the processes in an Oracle instance without bringing the instance down. Each process associated with the instance checks for patched code at a safe execution point, and then copies the code into its process space. Thus, the processes being patched may not necessarily pick up the new code at the exact same time.</p>
<p>A key difference between traditional patching and online patching is that traditional patching is implemented at the software level and online patching is implemented at the software or Oracle Database instance level. In other words, instances using an <code>ORACLE_HOME</code> that receives a traditional patch always use the patched code whereas instances using an <code>ORACLE_HOME</code> that receives an online patch receive the patched code only if the instance is specified when the patch is applied.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
For online patching, note the following:
<ul>
<li>
<p>See the patch README for details on whether a patch supports online installable.</p>
</li>
</ul>
</div>
<p>The best practices for online patching:</p>
<ul>
<li>
<p>During the next scheduled maintenance, when instances can be shutdown, rollback all online patches and apply the patches in an offline manner.</p>
</li>
<li>
<p>Patches that are online installable should be installed in an online manner when the patch needs to be applied urgently and downtime cannot be taken to apply the patch. If instance downtime is acceptable, then apply the patch in an offline manner (as described in the patch README).</p>
</li>
<li>
<p>Apply the patch to one instance at a time.</p>
</li>
<li>
<p>When rolling back online patches, ensure all patched instances are included to avoid the dangerous and confusing situation of having different software across instances using the same <code>$ORACLE_HOME</code>.</p>
</li>
<li>
<p>Assess memory impact on a test system before deploying to production (for example: using the <code>pmap</code> command).</p>
</li>
<li>
<p>Never remove the <code>$ORACLE_HOME/hpatch</code> directory.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OUICG305" href="../../em.112/e12255/oui7_opatch.htm#OUICG305"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a> for information about Patching Oracle Software with OPatch</p>
</li>
<li>
<p>For the most up-to-date information about online patching, installation and rollback, see "RDBMS Online Patching - Hot Patching" in My Oracle Support Note 761111.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=761111.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=761111.1</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABEEDHD"></a>
<div id="HABPT5321" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">14.2.3</span> Data Guard Standby-First Patch Apply</h3>
<p><a id="sthref925"></a><a id="sthref926"></a><a id="sthref927"></a>Oracle Data Guard Standby-First Patch Apply provides support for different software releases between a primary database and its physical standby database to apply and validate Oracle patches in rolling fashion for low risk to the production database. Oracle Data Guard Standby-First Patch Apply is supported for certified software patches for Oracle Database Enterprise Edition Release 2 (11.2) release 11.2.0.1 and later. Refer to the README for the patch to determine if a target patch is certified as being a Standby-First Patch.</p>
<p>The Oracle Database <a id="sthref928"></a><code>COMPATIBLE</code> initialization parameter values must remain the same between the primary and physical standby systems.</p>
<p>All Oracle Exadata Storage Server Software changes that do not have any dependencies on the existing database or Oracle Grid Infrastructure software releases are applicable.</p>
<p>Software changes that potentially disrupt the interoperability between primary and physical standby systems, or any SQL code changes, may not be applicable.</p>
<p>Oracle Data Guard Standby-First Patch Apply provides a supported method to apply a patch initially to a physical standby database while the primary database remains at the previous software release.</p>
<p>If the standby database is completely separate from the primary database (i.e. it does not share any storage, network, or cluster component), then</p>
<ul>
<li>
<p>Qualified Oracle patches applied to the database home can be applied and tested on the standby database first. Examples of Oracle database software in this category are:</p>
<ul>
<li>
<p>Exadata Database Bundle Patch</p>
</li>
<li>
<p>Patch Set Update (PSU)</p>
</li>
<li>
<p>Critical Patch Update (CPU)</p>
</li>
<li>
<p>Interim (&ldquo;one-off&rdquo;) patches</p>
</li>
</ul>
</li>
<li>
<p>Any other Oracle or system software can be applied and tested on the standby database first. Examples of software in this category are:</p>
<ul>
<li>
<p>Oracle patches applied to the grid home</p>
</li>
<li>
<p>Operating system patches and firmware</p>
</li>
<li>
<p>Storage patches</p>
</li>
<li>
<p>Network patches</p>
</li>
</ul>
</li>
</ul>
<p>If the standby database shares infrastructure or server components with the primary database then you cannot evaluate patches to the shared components in a manner that will reduce risk to the primary database. For example, if you have a standby database running on a cluster separate from the primary database but it shares the same storage grid as the primary database, then you cannot patch the standby storage first without affecting the primary database.</p>
<p>The following are the advantages for Oracle Data Guard Standby-First Patch Apply:</p>
<ul>
<li>
<p>Ability to apply software changes to the physical standby database for recovery, backup, or query validation before role transition, or before application on the primary production database. This mitigates risk and potential downtime on the production database.</p>
</li>
<li>
<p>Ability to switch over to the targeted database after completing validation with reduced risk and minimum downtime.</p>
</li>
<li>
<p>Ability to switch back, also known as fallback, if there are any major stability or performance regressions.</p>
</li>
</ul>
<p>Oracle patch sets and major release upgrades do not apply. Use the Data Guard transient logical standby method for patch sets and major releases. For more information, see <a href="#BABJDCBB">Section 14.2.6.2, "Upgrading with Data Guard SQL Apply or Transient Logical Standby Database"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink UPGRD12474" href="../../server.112/e23633/intro.htm#UPGRD12474"><span class="italic">Oracle Database Upgrade Guide</span></a> for information about Considerations for Downgrading and Compatibility and the Oracle Database <code>COMPATIBLE</code> parameter</p>
</li>
<li>
<p><a class="olink OSTMG10045" href="../../server.112/e18951/asmdiskgrps.htm#OSTMG10045"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for information about Disk Group Compatibility Attributes</p>
</li>
<li>
<p>See "Oracle Patch Assurance - Data Guard Standby-First Patch Apply" in My Oracle Support Note 1265700.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1265700.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1265700.1</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1006430"></a>
<div id="HABPT00403" class="sect2">
<h3 class="sect2"><span class="secnum">14.2.4</span> Oracle RAC Patches</h3>
<p><a id="sthref929"></a><a id="sthref930"></a><a id="sthref931"></a><a id="sthref932"></a><a id="sthref933"></a>With Oracle RAC, you can apply certain database patches to one node or instance at a time, which enables continual application and database availability. Interim ("one-off" patches, Patch Set Updates (PSUs), and Critical Patch Updates (CPUs) to database software are usually applied to implement known fixes for software problems an installation has encountered or to apply diagnostic patches to gather information regarding a problem. Such patch application is often carried out during a scheduled maintenance outage.</p>
<p>Oracle now provides the capability to do rolling patch upgrades with Oracle RAC with little or no database downtime. The tool used to achieve this is the <code><a id="sthref934"></a><a id="sthref935"></a><a id="sthref936"></a>opatch</code> command-line utility.</p>
<p>The advantage of an Oracle RAC rolling upgrade is that it enables at least some instances of the Oracle RAC installation to be available during the scheduled outage required for patch upgrades. Only the Oracle RAC instance that is currently being patched must be brought down. The other instances can continue to remain available. Thus, the effect on the application downtime required for such scheduled outages is further minimized. Oracle's <code>opatch</code> utility enables the user to apply the patch successively to the different instances of the Oracle RAC installation.</p>
<p>Rolling upgrade is available only for patches that have been certified by Oracle to be eligible for rolling upgrades. The patch README file indicates whether a patch can be applied in an Oracle RAC rolling manner. Typically, patches that can be installed in a rolling manner include:</p>
<ul>
<li>
<p>Exadata Database Bundle Patches</p>
</li>
<li>
<p>Patch Set Update (PSU)</p>
</li>
<li>
<p>Critical Patch Update (CPU)</p>
</li>
<li>
<p>Interim (&ldquo;one-off&rdquo;) patches</p>
</li>
<li>
<p>Diagnostic patches</p>
</li>
</ul>
<p>Rolling upgrade of patches is currently available for one-off patches only. Rolling upgrade is not available for patch sets.</p>
<p>Rolling patch upgrades are not available for deployments where the Oracle Database software is shared across the different nodes. This is the case where the Oracle home is on Cluster File System (CFS) or on shared volumes provided by file servers or NFS-mounted drives. The feature is only available where each node has its own copy of the Oracle Database software.</p>
<div id="HABPT5096" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref937"></a>
<h4 class="sect3"><span class="secnum">14.2.4.1</span> Best Practices to Minimize Downtime for All Database Patch Upgrades</h4>
<p><a id="sthref938"></a><a id="sthref939"></a>Use the following recommended practices for all <a id="sthref940"></a>database patch upgrades:</p>
<ul>
<li>
<p>Always confirm with Oracle Support Services that the patch is valid for your problem and for your deployment environment.</p>
</li>
<li>
<p>Have a plan for applying the patch and a plan for backing out the patch.</p>
</li>
<li>
<p>Apply the patch to your test environment first and verify that it fixes the problem.</p>
</li>
<li>
<p>When you plan the elapsed time for applying the patch, include time for starting up and shutting down the other tiers of your technology stack if necessary.</p>
</li>
<li>
<p>If the patch is not a candidate for Oracle RAC rolling upgrade and you can incur the downtime for applying the patch, go to <a href="#i1006387">Section 14.2.6, "Database Upgrades"</a> to assess whether other solutions are feasible.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="HABPT5097" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref941"></a>
<h4 class="sect3"><span class="secnum">14.2.4.2</span> Best Practices to Minimize Downtime for Database Rolling Upgrades</h4>
<p><a id="sthref942"></a><a id="sthref943"></a>The following are additional recommended practices for Oracle RAC rolling upgrades.</p>
<ul>
<li>
<p>If multiple instances share an Oracle home, then all of them are affected by application of a patch. Administrators should verify that this does not cause unintentional side effects. Also, you must shut down all such instances on a node during the patch application. You must take this into account when scheduling a planned outage. As a best practice, only similar applications should share an Oracle home on a node. This provides greater flexibility for patching.</p>
</li>
<li>
<p>The Oracle inventory on each node is the repository that keeps a central inventory of all Oracle software installed. The inventory is node-specific. It is shared by all Oracle software installed on the node. It is similar across nodes only if all nodes are the same in terms of the Oracle Database software deployed, the deployment configuration, and patch levels. Because the Oracle inventory greatly aids the patch application and patch management process, it is recommended that its integrity be maintained. Oracle inventory should be backed up after each patch installation to any Oracle software on a specific node. This applies to the Oracle inventory on each node of the cluster.</p>
</li>
<li>
<p>Use the <a id="sthref944"></a>Oracle Universal Installer to install all Oracle database software. This creates the relevant repository entries in the Oracle inventory on each node of the cluster. Also, use the Oracle Universal Installer to add nodes to an existing Oracle RAC cluster.</p>
<p>However, if this was not done or is not feasible for some reason, adding information about an existing Oracle database software installation to the Oracle inventory can be done with the <code>attach</code> option of the <code>opatch</code> utility. Node information can be also added with this option.</p>
</li>
<li>
<p>The nature of the Oracle rolling patch upgrade enables it to be applied to only some nodes of the Oracle RAC cluster. So an instance can be operating with the patch applied, while another instance is operating without the patch. This is not possible for nonrolling patch upgrades. Apply nonrolling patch upgrades to all instances before the Oracle RAC deployment is activated. A mixed environment is useful if a patch must be tested before deploying it to all the instances. Applying the patch with the <code>-local</code> option is the recommended way to do this.</p>
<p>In the interest of keeping all instances of the Oracle RAC cluster at the same patch level, it is strongly recommended that after a patch has been validated, it should be applied to all nodes of the Oracle RAC installation. When instances of an Oracle RAC cluster have similar patch software, services can be migrated among instances without running into the problem a patch might have fixed.</p>
</li>
<li>
<p>Maintain all patches (including those applied by rolling upgrades) online and do not remove them after they have been applied. Keeping the patches is useful if a patch must be rolled back or applied again.</p>
<p>Store the patches in a location that is accessible by all nodes of the cluster. Thus all nodes of the cluster are equivalent in their capability to apply or roll back a patch.</p>
</li>
<li>
<p>Perform rolling patch upgrades, just like any other patch upgrade, when no other patch upgrade or Oracle installation is being performed on the node. The application of multiple patches is a sequential process, so plan the scheduled outage accordingly.</p>
</li>
<li>
<p>If you must apply multiple patches at the same time but only some patches are eligible for rolling upgrade, then apply all of the patches in a nonrolling manner. This reduces the overall time required to accomplish the patching process.</p>
</li>
<li>
<p>For patches that are not eligible for rolling upgrade, the next best option for Oracle RAC deployments is the <code>MINIMIZE_DOWNTIME</code> option of the <code>APPLY</code> command.</p>
</li>
<li>
<p>Perform the rolling upgrade when system usage is low to ensure minimal disruption of service for the end users.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OUICG" href="../../em.112/e12255/toc.htm"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a> for more information about the opatch utility</div>
</div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref945"></a>
<h4 class="sect3"><span class="secnum">14.2.4.3</span> Out-of-place Software Installation and Patching</h4>
<p>The following software installations are performed, by default, out-of-place by Oracle Universal Installer (OUI). Software installations performed by OUI are full software installations:</p>
<ul>
<li>
<p>Major release</p>
</li>
<li>
<p>Maintenance release</p>
</li>
<li>
<p>Patch set (beginning with 11g Release 2)</p>
</li>
</ul>
<p>The following software installations are performed in-place by the OPatch utility. OPatch installs the software update into an existing <code>ORACLE_HOME</code> by overwriting existing software with updated software from the patch being installed:</p>
<ul>
<li>
<p>Interim patch installation</p>
</li>
<li>
<p>Bundle patch installation</p>
</li>
<li>
<p>Patch Set Update (PSU) installation</p>
</li>
<li>
<p>Critical Patch Update (CPU) installation</p>
</li>
<li>
<p>Diagnostic patch installation</p>
</li>
</ul>
<p class="subhead2"><a id="sthref946"></a>Advantages of out-of-place patching</p>
<ul>
<li>
<p>Applications remain available while software is upgraded in the new <code>ORACLE_HOME</code>.</p>
</li>
<li>
<p>The configuration inside the <code>ORACLE_HOME</code> is retained because the cloning procedure involves physically copying the software (examples are files such as <code>LISTENER.ORA</code>, <code>TNSNAMES.ORA</code>, and <code>INITSID.ORA</code>).</p>
</li>
<li>
<p>It is easier to rollback or test between the original <code>ORACLE_HOME</code> and the patched <code>ORACLE_HOME</code>.</p>
</li>
<li>
<p>When consolidating, you could have multiple versions of <code>ORACLE_HOME</code>, so this option should better support consolidation.</p>
</li>
</ul>
<p class="subhead2"><a id="sthref947"></a>Considerations for using out-of-place patching</p>
<ul>
<li>
<p>When performing out-of-place patch installation with cloning, you must change any <code>ORACLE_HOME</code> environment variable hard coded in application code and Oracle-specific scripts.</p>
</li>
<li>
<p>Out-of-place patching requires more disk space than in-place patching.</p>
</li>
</ul>
<p class="subhead2"><a id="sthref948"></a>Out-of-place patching with OPatch</p>
<p>Traditionally, patches installed with OPatch are done in-place, which means that the new code is applied directly over the old code.</p>
<p>The disadvantages of in-place patching are:</p>
<ul>
<li>
<p>The application cannot connect to the database while new code is being installed.</p>
</li>
<li>
<p>If patch rollback is required, the application cannot connect to the database while old code is being reinstalled.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
This downside to an in-place database patch set upgrade does not apply when you use Standby-First Patch apply.
<p>For more information, see <a href="#BABEEDHD">Section 14.2.3, "Data Guard Standby-First Patch Apply."</a></p>
</div>
<p>Software installation performed by OPatch to the Oracle Database software home or the Grid Infrastructure software home can be performed out-of-place by using <code>ORACLE_HOME</code> cloning techniques to copy the software to a new home directory before applying a patch to the new <code>ORACLE_HOME</code> with OPatch. The high-level approach to perform out-of-place patching is:</p>
<ol>
<li>
<p>Clone the active <code>ORACLE_HOME</code> to a new <code>ORACLE_HOME</code>.</p>
</li>
<li>
<p>Patch the new <code>ORACLE_HOME</code>.</p>
</li>
<li>
<p>Switch to make the new <code>ORACLE_HOME</code> the active software home. This can be done in a rolling manner one node at a time.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
For details about out-of-place patching, see "Minimal downtime patching via cloning 11gR2 ORACLE_HOME directories on Oracle Database Machine" My Oracle Support Note 1136544.1 at
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1136544.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1136544.1</a></code></p>
</div>
</div>
<!-- class="sect3" -->
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref949"></a>
<h4 class="sect3"><span class="secnum">14.2.4.4</span> Using OPlan for Patching</h4>
<p>OPlan is a utility that facilitates the patch installation process by providing you with step-by-step patching instructions specific to your environment for both in-place and out-of-place patch installation. Currently, OPlan is supported for Exadata Database Bundle Patches. For the latest information, see "Oracle Software Patching with OPLAN" in My Oracle Support Note 1306814.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1306814.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1306814.1</a></code></p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CACHHFBD"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">14.2.5</span> Grid Infrastructure Maintenance</h3>
<p>Beginning with Oracle Database 11g release 2 (11.2), Oracle ASM is installed when you install the Oracle Grid Infrastructure components, and it shares an Oracle home with Oracle Clusterware when installed in a cluster such as with Oracle RAC. When performing maintenance on the Grid Infrastructure, such as patching or upgrade, it will impact both Oracle ASM and Oracle Clusterware.</p>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref950"></a>
<h4 class="sect3"><span class="secnum">14.2.5.1</span> Grid Infrastructure Rolling Upgrade</h4>
<p>Grid Infrastructure upgrade means taking the Oracle Clusterware and Oracle ASM to a later major version, maintenance version, or patch set. Grid Infrastructure upgrade is performed in a rolling manner.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink TDPRC" href="../../rac.112/e17264/toc.htm"><span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span></a>
<p><span class="italic">Oracle Grid Infrastructure Installation Guide</span> for your platform for complete details, in the Appendix, "How to Upgrade to Oracle Grid Infrastructure"</p>
</div>
</div>
<!-- class="sect3" -->
<a id="CDEIFEHD"></a>
<div id="HABPT5098" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.5.2</span> Storage Maintenance</h4>
<p>Use the following procedure when adding or upgrading storage on the system. The procedures in the following sections assume that you are adding storage to an Oracle ASM disk group.</p>
<ul>
<li>
<p><a href="#CDEGIJGJ">Migrating to Oracle ASM Storage</a></p>
</li>
<li>
<p><a href="#CDEDIAIB">Adding and Removing Storage</a></p>
</li>
<li>
<p><a href="#BABHCEJG">Upgrading Oracle ASM Nodes</a></p>
</li>
</ul>
<a id="CDEGIJGJ"></a>
<div id="HABPT5099" class="sect4">
<h5 class="sect4"><span class="secnum">14.2.5.2.1</span> Migrating to Oracle ASM Storage<a id="sthref951"></a></h5>
<p>If you have an existing Oracle database that stores database files on a file system or on raw devices, you can migrate some or all of these database files to Oracle ASM. To minimize downtime, use a physical standby database to migrate data to Oracle ASM storage. Use Oracle Recovery Manager (RMAN) or the ASMCMD utility to migrate to Oracle ASM with very little downtime. The Oracle Recovery Manager (RMAN) and ASMCMD utility allow you to copy individual files into Oracle ASM.</p>
<p>For complete migrations Oracle Data Guard or Oracle GoldenGate are better alternatives to migrate to Oracle ASM with even less downtime (migration occurs in approximately the same amount of time it takes to perform a switchover).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink BRADV010" href="../../backup.112/e10642/rcmdupdb.htm#BRADV010"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about performing Oracle ASM data migration using RMAN</p>
</li>
<li>
<p>The MAA white paper: "Minimal Downtime Migration to ASM" at</p>
<pre>
<a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a> 
</pre></li>
</ul>
</div>
</div>
<!-- class="sect4" -->
<a id="CDEDIAIB"></a>
<div id="HABPT5100" class="sect4">
<h5 class="sect4"><span class="secnum">14.2.5.2.2</span> Adding and Removing Storage</h5>
<p>Disks can be added to and removed from Oracle ASM with no downtime. When disks are added or removed, Oracle ASM automatically starts a rebalance operation to evenly spread the disk group contents over all drives in the disk group.The best practices for adding or removing storage include:</p>
<ul>
<li>
<p>Make sure your host operating system and storage hardware can support adding and removing storage with no downtime before using Oracle ASM to do so.</p>
</li>
<li>
<p>Use a single <code>ALTER DISKGROUP</code> command when adding or removing multiple disk drives (this way there is only one rebalance operation where, with separate drops and adds there are two or more rebalance operations. For more information, see <a href="config_storage.htm#CDEIGFJE">Section 4.5.4, "Use a Single Command to Add or Remove Storage"</a>).</p>
<p>For example, if the storage maintenance is to add drives and remove existing drives, use a single <code>ALTER DISKGROUP</code> command with the <code>DROP DISK</code> clause to remove the existing drives and the <code>ADD DISK</code> clause to add the drives:</p>
<pre>
ALTER DISKGROUP data
       DROP DISK diska5
       ADD FAILGROUP failgrp1 DISK '/devices/diska9' NAME diska9;
</pre></li>
<li>
<p>When dropping disks from a disk group, specify the <code>WAIT</code> option in the <code>REBALANCE</code> clause so the <code>ALTER DISKGROUP</code> statement does not return until the contents of the drives being dropped have been moved to other drives. After the statement completes, the drives can be safely removed from the system. For example:</p>
<pre>
ALTER DISKGROUP data
DROP DISK diska5
ADD FAILGROUP failgrp1 DISK '/devices/diska9' NAME diska9
REBALANCE WAIT;
</pre></li>
<li>
<p>When dropping disks in a normal or high redundancy disk group, ensure there is enough free disk space in the disk group to reconstruct full redundancy.</p>
</li>
<li>
<p>Monitor the progress of rebalance operations using Enterprise Manager or by querying <code><a id="sthref952"></a><a id="sthref953"></a><a id="sthref954"></a>V$ASM_OPERATION</code>.</p>
</li>
<li>
<p>For long-running rebalance operations that occur during periods of low database activity, increase the rebalance power limit to reduce the rebalance time.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG" href="../e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a></div>
</div>
<!-- class="sect4" -->
<a id="BABHCEJG"></a>
<div id="HABPT5101" class="sect4">
<h5 class="sect4"><span class="secnum">14.2.5.2.3</span> Upgrading Oracle ASM Nodes</h5>
<p><a id="sthref955"></a><a id="sthref956"></a>Perform an Oracle ASM rolling upgrade to independently upgrade or patch clustered Oracle ASM nodes without affecting database availability, thus providing greater uptime. You can use Oracle ASM rolling upgrades only to upgrade clustered Oracle ASM instances for environments running Oracle Database 11<span class="italic">g</span> or later releases.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink OSTMG02400" href="../../server.112/e18951/asminst.htm#OSTMG02400"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for complete information about Using Oracle ASM Rolling Upgrades</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1006387"></a>
<div id="HABPT02323" class="sect2">
<h3 class="sect2"><span class="secnum">14.2.6</span> Database Upgrades</h3>
<p>Database upgrade means taking the database to a later major release, maintenance release, or patch set. The following Oracle features are available to perform database upgrades:</p>
<ul>
<li>
<p><a href="#BABBGIHI">Upgrading with Database Upgrade Assistant (DBUA)</a></p>
</li>
<li>
<p><a href="#BABJDCBB">Upgrading with Data Guard SQL Apply or Transient Logical Standby Database</a></p>
</li>
<li>
<p><a href="#BABBEJID">Upgrading with Oracle GoldenGate</a></p>
</li>
<li>
<p><a href="#BABGIFFG">Upgrading with Transportable Tablespaces</a></p>
</li>
</ul>
<p>The method you choose to perform database upgrades can vary depending on the following considerations:</p>
<ul>
<li>
<p>Downtime required to complete the upgrade</p>
</li>
<li>
<p>Setup time and effort required before the downtime</p>
</li>
<li>
<p>Temporary additional resources necessary (for example, disk space or CPU)</p>
</li>
<li>
<p>Complexity of the steps allowed to complete the upgrade</p>
</li>
</ul>
<p><a href="#CACIEGCJ">Table 14-3</a> lists the methods that you can use for <a id="sthref957"></a><a id="sthref958"></a><a id="sthref959"></a>database upgrades, and recommends what method to use for particular cases.</p>
<div id="HABPT5102" class="tblruleformal">
<p class="titleintable"><a id="sthref960"></a><a id="CACIEGCJ"></a>Table 14-3 Database Upgrade Options</p>
<table class="cellalignment1620" title="Database Upgrade Options" summary="Each row is a database upgrade option. The first column is the name of the option, which is also a link to a subsection describing it. The second column says when to use this option." dir="ltr">
<thead>
<tr class="cellalignment1611">
<th class="cellalignment1621" id="r1c1-t15">Upgrade Method</th>
<th class="cellalignment1621" id="r1c2-t15">Use This Method When...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r2c1-t15" headers="r1c1-t15">
<p><a href="#BABBGIHI">Upgrading with Database Upgrade Assistant (DBUA)</a></p>
</td>
<td class="cellalignment1617" headers="r2c1-t15 r1c2-t15">
<p>Recommended method when the maintenance window is sufficient or when data type constraints prohibit the use of the other methods in this table.</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r3c1-t15" headers="r1c1-t15">
<p><a href="#BABJDCBB">Upgrading with Data Guard SQL Apply or Transient Logical Standby Database</a></p>
</td>
<td class="cellalignment1617" headers="r3c1-t15 r1c2-t15">
<p>DBUA cannot finish within the maintenance window and the database is not a candidate for Oracle RAC rolling patch upgrade.</p>
<p>Use a transient logical standby when the configuration has only a physical standby database.</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r4c1-t15" headers="r1c1-t15">
<p><a href="#BABBEJID">Upgrading with Oracle GoldenGate</a></p>
</td>
<td class="cellalignment1617" headers="r4c1-t15 r1c2-t15">
<p>Oracle GoldenGate is already used for complete database replication or when the database version predates Oracle 10<span class="italic">g</span> (the minimum version for Oracle Data Guard database rolling upgrades), or when additional flexibility for replicating back to the previous version is required (fast fall back option) or where zero downtime upgrades using multi-master replication is required.</p>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r5c1-t15" headers="r1c1-t15">
<p><a href="#BABGIFFG">Upgrading with Transportable Tablespaces</a></p>
</td>
<td class="cellalignment1617" headers="r5c1-t15 r1c2-t15">
<p>The database is using data types unsupported by Data Guard SQL Apply or Oracle GoldenGate, and the user schemas are simple.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p>Regardless of the upgrade method you use, you should follow the guidelines and recommendations provided in the <a class="olink UPGRD" href="../e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> and its companion document, "Oracle 11gR2 Upgrade Companion" in My Oracle Support Note 785351.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1</a></code></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>"Oracle Support Lifecycle Advisors" in My Oracle Support Note 250.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=250.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=250.1</a></code></p>
</li>
<li>
<p>Oracle Technology Network Oracle Database Upgrade web page at</p>
<p><code><a href="http://www.oracle.com/technetwork/database/upgrade/index.html">http://www.oracle.com/technetwork/database/upgrade/index.html</a></code></p>
</li>
</ul>
</div>
<a id="BABBGIHI"></a>
<div id="HABPT02324" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.6.1</span> Upgrading with Database Upgrade Assistant (DBUA)</h4>
<p><a id="sthref961"></a><a id="sthref962"></a>Database Upgrade Assistant (DBUA) is used to upgrade a database in place from an earlier software version.</p>
<p>When deciding if DBUA is the proper tool to use when performing a database upgrade with minimal downtime, consider the following:</p>
<ul>
<li>
<p>DBUA upgrades the database dictionary and all components. For example: Java, XDB, and so on, that have been installed while the database is unavailable for normal user activity.</p>
</li>
<li>
<p>Downtime required for a database upgrade when using DBUA is determined by the time needed to:</p>
<ul>
<li>
<p>Upgrade all database dictionary objects to the new version</p>
</li>
<li>
<p>Restart the database</p>
</li>
<li>
<p>Reconnect the clients to the upgraded database</p>
</li>
</ul>
</li>
<li>
<p>To reduce the amount of downtime required for a database upgrade when using DBUA:</p>
<ul>
<li>
<p>Remove any database options that are not being used.</p>
<p>DBUA upgrades all of the installed database options, whether they are required by an application. By reducing the number of options that must be upgraded, you can reduce the overall upgrade time.</p>
</li>
<li>
<p>Update data dictionary statistics immediately before the upgrade.</p>
</li>
</ul>
</li>
</ul>
<p>Use DBUA for a database upgrade when the time to perform the upgrade with this method fits within the maintenance window.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink UPGRD105" href="../../server.112/e23633/upgrade.htm#UPGRD105"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about DBUA and upgrading your Oracle Database software</p>
</li>
<li>
<p>"Oracle 11gR2 Upgrade Companion" in My Oracle Support Note 785351.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1</a></code></p>
</li>
<li>
<p>To upgrade from Oracle9<span class="italic">i</span> to Oracle Database 11<span class="italic">g</span>, see "Oracle 11gR1 Upgrade Companion" in My Oracle Support Note 601807.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=601807.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=601807.1</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABJDCBB"></a>
<div id="HABPT5103" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.6.2</span> Upgrading with Data Guard SQL Apply or Transient Logical Standby Database</h4>
<p><a id="sthref963"></a><a id="sthref964"></a><a id="sthref965"></a><a id="sthref966"></a>Use Data Guard SQL Apply or a transient logical standby database to upgrade a database with minimal downtime using a process called a <span class="italic">rolling upgrade</span>. Data Guard currently supports homogeneous environments where the primary and standby databases run on the same platform.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
For exceptions that are specific to heterogeneous environments and for other late-breaking information about rolling upgrades with SQL Apply, see "Data Guard Support for Heterogeneous Primary and Physical Standbys in Same Data Guard Configuration" in My Oracle Support Note 413484.1 at
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1</a></code></p>
</div>
<div id="HABPT5322" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref967"></a>
<h5 class="sect4"><span class="secnum">14.2.6.2.1</span> SQL Apply Rolling Upgrades</h5>
<p>Use Data Guard SQL Apply for rolling database upgrade when a conventional upgrade cannot complete the upgrade within the maintenance window and the application does not use user-defined types. Oracle Data Guard using SQL Apply is the recommended solution for performing patch set and database upgrades with minimal downtime.</p>
<p>Note the following points when deciding if Data Guard SQL Apply is the appropriate method for minimizing downtime during a database upgrade:</p>
<ul>
<li>
<p>SQL Apply has some data type restrictions (see <a class="olink SBYDB00305" href="../../server.112/e41134/data_support.htm#SBYDB00305"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for a list of the restrictions). If there are data type restrictions, consider implementing Extended Datatype Support (EDS)<a id="sthref968"></a>. If the source database is using data types not natively supported by SQL Apply, you can use Extended Datatype Support (EDS) to accommodate several more advanced data types.</p>
</li>
<li>
<p>You can perform a SQL Apply rolling upgrade for any upgrade, including a major release upgrade if the source release is Oracle Database 10<span class="italic">g</span> release 1 (10.1.0.3) or higher. Before you begin, review the detailed steps for a SQL Apply rolling upgrade and verify the supported data types in <a class="olink SBYDB00830" href="../../server.112/e41134/rollup.htm#SBYDB00830"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>.</p>
</li>
<li>
<p>If the source database is using a software version not supported by SQL Apply rolling upgrade (earlier than Oracle Database release 10.1.0.3) or using EDS cannot sufficiently resolve SQL Apply data type conflicts, then consider using Database Upgrade Assistant (DBUA), transportable tablespace, or Oracle GoldenGate.</p>
</li>
<li>
<p>Downtime required for a database upgrade (rolling upgrade) when using Data Guard SQL Apply is determined by the time needed to:</p>
<ul>
<li>
<p>Perform a Data Guard switchover</p>
</li>
<li>
<p>Reconnect the clients to the new database</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SBYDB00830" href="../../server.112/e41134/rollup.htm#SBYDB00830"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for information about Using SQL Apply to Upgrade the Oracle Database</p>
</li>
<li>
<p>The MAA white paper "Database Rolling Upgrade Using Data Guard SQL Apply Oracle Database 11g and 10gR2" at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
<li>
<p>For SQL Apply, EDS support starts from Oracle Database Release 10.2.0.4. The ESD implementation is different from 10.2.0.4 to 11.1 and in Oracle Database Release 11.2, for more information:</p>
<p>From 10.2.0.4 to 11.1 you must build ESD following the examples specified in detail in "Extended Datatype Support (EDS) for SQL Apply" in My Oracle Support Note 559353.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=559353.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=559353.1</a></code></p>
<p>In Oracle Database Release 11.2 EDS-related procedures are part of the <code>DBMS_LOGSTDBY</code> package; for more information see "SQL Apply Extended Datatype Support - 11.2" in My Oracle Support Note 949516.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=949516.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=949516.1</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect4" -->
<div id="HABPT5323" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref969"></a>
<h5 class="sect4"><span class="secnum">14.2.6.2.2</span> Transient Logical Standby Database Rolling Upgrade</h5>
<p><a id="sthref970"></a><a id="sthref971"></a>You can use a <a href="glossary.htm#CHDCCHGI"><span class="xreftitlebold">transient logical standby database</span></a> to perform a rolling database upgrade using your current physical standby database by temporarily converting it to a logical standby database. Use a transient logical standby when your configuration only has a physical standby database. Performing a rolling upgrade using a transient logical standby is similar to the standard SQL Apply rolling upgrade with the following differences:</p>
<ul>
<li>
<p>A guaranteed restore point is created on the primary database to flash the database back to a physical standby database after the switchover.</p>
</li>
<li>
<p>The conversion of a physical standby database to a logical standby database uses the <a id="sthref972"></a><code>KEEP IDENTITY</code> clause to retain the same <code>DB_NAME</code> and <code>DBID</code> as that of its primary database.</p>
</li>
<li>
<p>The <code>ALTER DATABASE CONVERT TO PHYSICAL STANDBY</code> statement converts the original primary database from a logical standby to a physical standby database.</p>
</li>
<li>
<p>The original primary database is actually upgraded through Redo Apply after it is converted from the transient logical standby database role to a physical standby database.</p>
</li>
</ul>
<p><a href="#BABGBADE">Figure 14-1</a> shows the flow of processing that occurs when you perform a rolling upgrade with a transient logical standby database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To simplify the operation shown in <a href="#BABGBADE">Figure 14-1</a>, a Bourne shell script is available that automates the database rolling upgrade procedure (starting with Oracle Database 11<span class="italic">g</span> Release 1). The database rolling upgrade is performed using an existing Data Guard physical standby database and the transient logical standby rolling upgrade process. The Bourne shell script, named <code>physru</code>, is available for download with details in "Oracle 11g Data Guard: Database Rolling Upgrade Shell Script" in My Oracle Support Note 949322.1 at
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=949322.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=949322.1</a></code></p>
</div>
<div id="HABPT5106" class="figure">
<p class="titleinfigure"><a id="BABGBADE"></a>Figure 14-1 Using a Transient Logical Standby Database for Database Rolling Upgrade</p>
<img width="477" height="734" src="img/habpt020.gif" alt="Description of Figure 14-1 follows" /><br />
<a id="sthref973" href="img_text/habpt020.htm">Description of "Figure 14-1 Using a Transient Logical Standby Database for Database Rolling Upgrade"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SBYDB00830" href="../../server.112/e41134/rollup.htm#SBYDB00830"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about "<a class="olink SBYDB00830" href="../../server.112/e41134/rollup.htm#SBYDB00830">Performing a Rolling Upgrade With an Existing Physical Standby Database</a>"</p>
</li>
<li>
<p>The MAA white paper, "Database Rolling Upgrades Made Easy by Using a Data Guard Physical Standby Database", which describes the process of automating many of the tasks associated with a database rolling upgrade, available from the MAA Best Practices area for Oracle Database at</p>
<p><code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="BABBEJID"></a>
<div id="HABPT5107" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.6.3</span> Upgrading with Oracle GoldenGate</h4>
<p><a id="sthref974"></a><a id="sthref975"></a><a id="sthref976"></a>Consider using Oracle GoldenGate as an alternative to Data Guard database rolling upgrades for upgrading the database software from one version to another with minimal downtime, for requirements that Oracle Data Guard is not designed to address. Oracle GoldenGate offers the following advantages over Oracle Data Guard for this purpose:</p>
<ul>
<li>
<p>Oracle GoldenGate can upgrade an Oracle Database in rolling fashion from an Oracle Database release before Oracle Database 10<span class="italic">g</span> (Data Guard Database Rolling Upgrades are supported beginning with Oracle Database 10<span class="italic">g</span>).</p>
</li>
<li>
<p>Oracle GoldenGate can be configured for one-way replication from a later Oracle Database release to a previous Oracle Database release to enable a fast fall-back option (Oracle Data Guard can only replicate from a earlier database release to a later release). This is useful in cases where you want to operate at the new release for a period and have the option to quickly revert to the previous release should unanticipated issues arise days after production cut-over. By configuring one-way replication from the new release to the previous release, production can be switched to the prior release quickly, without losing data or incurring the time of a downgrade, while the problems are resolved.</p>
</li>
<li>
<p>Oracle GoldenGate can be configured for multi-master replication between different Oracle Database releases to facilitate a zero downtime upgrade (Oracle Data Guard is a one-way replication solution). When the new Oracle release is deployed and ready for user connections, new user connections can be directed to the new release while existing user connections at the old release continue to process transactions. As existing user connections terminate, utilization of the Oracle Database operating at the previous release diminishes naturally without users perceiving any downtime. Multi-master replication keeps both databases synchronized during this transitional phase. Once all users have migrated to the new release, simpler one-way replication can maintain synchronization of the previous database release to provide a fast fall-back option as described in the previous bullet item. Note that multi-master replication is not suitable for all applications - conflict detection and resolution is required.</p>
</li>
<li>
<p>If you cannot use the procedure described in <a href="#BABJDCBB">Section 14.2.6.2, "Upgrading with Data Guard SQL Apply or Transient Logical Standby Database"</a> to upgrade your database and you require zero-to-minimum downtime while performing the database or application upgrade, then configure Oracle GoldenGate to perform a database upgrade with little or no downtime. For more information, see the White Paper, "Zero-Downtime Database Upgrades Using Oracle GoldenGate" at</p>
<p><code><a href="http://www.oracle.com/technetwork/middleware/goldengate/overview/ggzerodowntimedatabaseupgrades-174928.pdf">http://www.oracle.com/technetwork/middleware/goldengate/overview/ggzerodowntimedatabaseupgrades-174928.pdf</a></code></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<span class="italic">Oracle GoldenGate For Windows and UNIX Administrator's Guide</span> for more information about database upgrades using Oracle GoldenGate</div>
</div>
<!-- class="sect3" -->
<a id="BABGIFFG"></a>
<div id="HABPT5108" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.6.4</span> Upgrading with Transportable Tablespaces<a id="sthref977"></a><a id="sthref978"></a></h4>
<p>Use transportable tablespaces to accomplish a database upgrade by transporting all user data files into a pre-created, prepared target database.</p>
<p>Note the following points when deciding if transportable tablespaces is the appropriate method for performing a database upgrade:</p>
<ul>
<li>
<p>The <code>SYSTEM</code> tablespace cannot be moved with transportable tablespaces. The target database <code>SYSTEM</code> tablespace contents, including user definitions and objects necessary for the application, must be built manually. Use Data Pump to move the contents of the <code>SYSTEM</code> tablespace.</p>
</li>
<li>
<p>Downtime required for a database upgrade when using transportable tablespaces is determined by the time needed to:</p>
<ul>
<li>
<p>Place the source database tablespaces in read-only mode.</p>
</li>
<li>
<p>Perform a network import of the transportable metadata.</p>
</li>
<li>
<p>If the target database is on a remote system, then include the time to transfer all data files from the source system to the target system. However, note that using transportable tablespaces to perform a database upgrade is useful only if you can use the data files in their current location. Using the transportable tablespace method is <span class="italic">not</span> recommended if doing so requires that you copy the data files to the target location.</p>
<p>The time it takes to transfer the data files can be reduced significantly by using a storage infrastructure that can make the data files available to the target system without physically moving the files, or by using a physical standby database.</p>
</li>
</ul>
</li>
</ul>
<p>Using transportable tablespaces to perform a database upgrade is recommended when:</p>
<ul>
<li>
<p>You can use the data files in their current location to avoid copying data files as part of the transport process. If the target database is on a different machine, this requires that the storage is accessible to both the source and target systems.</p>
</li>
<li>
<p>DBUA cannot complete within the maintenance window.</p>
</li>
<li>
<p>Oracle GoldenGate or Data Guard SQL Apply cannot be used due to data type restrictions.</p>
</li>
<li>
<p>The Oracle database has a simple schema.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN01101" href="../../server.112/e25494/tspaces.htm#ADMIN01101"><span class="italic">Oracle Database Administrator's Guide</span></a> for an Introduction to Transportable Tablespaces</p>
</li>
<li>
<p>The MAA white paper "Database Upgrade Using Transportable Tablespaces" available at</p>
<p><code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABBEBIC"></a>
<div id="HABPT5314" class="sect2">
<h3 class="sect2"><span class="secnum">14.2.7</span> Database Platform or Location Migration</h3>
<p><a id="sthref979"></a><a id="sthref980"></a>When you perform a database migration, the primary goal is to move your data out of an existing source system and into an Oracle 11<span class="italic">g</span> database. Moving your data is accomplished with tools such as Data Pump, Transportable Tablespaces, Oracle Data Guard, and Oracle GoldenGate. However, during a migration you should address two equally important items that should be goals for any migration plan:</p>
<ul>
<li>
<p>Simplify: during a migration, simplify your implementation. Most database environments that have evolved through different versions and different DBAs contain old information (and the current DBA might question why something is used in the system). The purpose of simplifying is to make administration easier and more reliable; this simplification leads to a more highly available system.</p>
</li>
<li>
<p>Optimize: during a migration you can optimize your implementation. In many cases the migration involves an updated database version so you have new features available. While performing a migration you should consider adopting new features and practices.</p>
</li>
</ul>
<p>Add the following steps to your migration planning to simplify and optimize:</p>
<ul>
<li>
<p><a href="#BABGAGDC">Consider Your Options and Your Migration Strategy</a></p>
</li>
<li>
<p><a href="#BABCEFEF">Plan Your Migration</a></p>
</li>
<li>
<p><a href="#BABDBEJH">Oracle Features for Platform Migration and Upgrades</a></p>
</li>
</ul>
<a id="BABGAGDC"></a>
<div id="HABPT5315" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.1</span> Consider Your Options and Your Migration Strategy</h4>
<p><a id="sthref981"></a><a id="sthref982"></a>When developing your migration strategy the first step will be to learn about your new target environment and determine how your data is going to physically move from your source system to the target system. At the heart of the target environment is the Oracle Database. As with any Oracle database upgrade or migration, you should follow the guidelines and recommendations provided in the <a class="olink UPGRD" href="../e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> and its companion document, "Oracle 11gR2 Upgrade Companion" in My Oracle Support Note 785351.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=785351.1</a></code></p>
<ul>
<li>
<p>Update init.ora during migration.</p>
<p>Take your existing init.ora file and remove parameters you consider no longer important. For changes that take parameters away from their default setting, justify the changes. For example, you might be able to remove underscore parameters that are set to work around issues found in previous releases (for example to handle an optimizer problem you resolved in a previous release).</p>
</li>
<li>
<p>Update SQL during migration.</p>
<p>Remove SQL hints added in a previous Oracle Database version that were put in place to force the optimizer to generate the desired plan. The optimizer generally creates a good execution plan without the need for hints when provided good statistics.</p>
</li>
<li>
<p>Simplify or change schema objects during migration.</p>
<p>You should consider if there are changes to the schema layout that you can make during a migration. For example, consider the following:</p>
<ul>
<li>
<p>Changes in the partitioning scheme for large tables</p>
</li>
<li>
<p>Adoption of newly available compression capabilities, such as Hybrid Columnar Compression (HCC) if migrating to Oracle Exadata Database Machine (see <a class="olink CNCPT89198" href="../../server.112/e40540/tablecls.htm#CNCPT89198"><span class="italic">Oracle Database Concepts</span></a> for more information)</p>
</li>
<li>
<p>Adoption of Transparent Data Encryption (TDE), especially if migrating to a system that provides cryptographic hardware acceleration</p>
</li>
</ul>
<p>Also, determine if there are objects that should not be migrated, such as excessive use of indexes. If you are going to have altered or fewer schema objects in the database you must consider whether it is better to migrate the database in its current form, then perform the changes after migration, or be more selective during the migration.</p>
</li>
<li>
<p>Remove unused tablespaces and data files during migration.</p>
<p>You should consider if you can remove unused or unnecessary tablespaces and data files during a migration. Using fewer tablespaces and data files leads to better manageability and performance.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABCEFEF"></a>
<div id="HABPT5320" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.2</span> Plan Your Migration</h4>
<p><a id="sthref983"></a><a id="sthref984"></a>As you plan the migration consider the following points:</p>
<ul>
<li>
<p>Consider upgrading the source database to Oracle Database 11<span class="italic">g</span> Release 2 as this may improve the migration (in some cases significantly). For example, the parallel capabilities of Data Pump are significantly better in Oracle Database 11<span class="italic">g</span> Release 2 than in Oracle Database Release 10.2, so a database export from the source system could be improved and completed faster if the source database is upgraded to Oracle Database 11<span class="italic">g</span> Release 2.</p>
</li>
<li>
<p>Consider dropping schema objects that are not needed in the source database before the migration. This can reduce the amount of data that has to be migrated.</p>
</li>
<li>
<p>Determine and consider the business needs and downtime requirements. Review the Oracle features for platform migration in <a href="#BABDBEJH">Section 14.2.7.3, "Oracle Features for Platform Migration and Upgrades,"</a> for the factors that influence the amount of downtime required.</p>
</li>
<li>
<p>Consider whether there is a requirement or an opportunity to perform the migration in stages. For example, if there is a large amount of read only data in the source database, it might be migrated well before the live data migration to reduce downtime.</p>
</li>
<li>
<p>Any platform migration exercise should include a significant amount of testing.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABDBEJH"></a>
<div id="HABPT5356" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">14.2.7.3</span> Oracle Features for Platform Migration and Upgrades</h4>
<p>The following Oracle features are available to perform platform migrations and upgrades:</p>
<ul>
<li>
<p><a href="#CDEGBCIB">Physical Standby Databases for Platform Migration</a></p>
</li>
<li>
<p><a href="#BABDGDGE">Transportable Database for Platform Migration</a></p>
</li>
<li>
<p><a href="#BABICHFE">Oracle GoldenGate for Platform Migration</a></p>
</li>
<li>
<p><a href="#BABEJCHD">Oracle Data Pump for Platform Migration</a></p>
</li>
<li>
<p><a href="#BABEFEID">Transportable Tablespaces for Platform Migration</a></p>
</li>
<li>
<p><a href="#BABFIJGF">Data Guard Redo Apply (Physical Standby Database) for Location Migration</a></p>
</li>
</ul>
<p>The method you choose to perform these database maintenance tasks depends on the following considerations:</p>
<ul>
<li>
<p>Downtime required to complete the maintenance operations</p>
</li>
<li>
<p>Setup time and effort required before the downtime</p>
</li>
<li>
<p>Amount of temporary additional resources necessary, such as disk space or CPU</p>
</li>
<li>
<p>Complexity of the steps allowed to complete maintenance operations</p>
</li>
</ul>
<p><a href="#CACGEHEG">Table 14-4</a> summarizes the methods you can use for platform migrations and database upgrades, and recommends which method to use for each operation.</p>
<div id="HABPT5110" class="tblruleformal">
<p class="titleintable"><a id="sthref985"></a><a id="CACGEHEG"></a>Table 14-4 Platform and Location Migration Options</p>
<table class="cellalignment1620" title="Platform and Location Migration Options" summary="Each row is a platform or location migration option. The first column specifies details of the operation. The second column is the name of the option and a link to a subsection describing it. The third column says when to use this option." dir="ltr">
<thead>
<tr class="cellalignment1611">
<th class="cellalignment1621" id="r1c1-t24">Operation</th>
<th class="cellalignment1621" id="r1c2-t24">Recommended Method</th>
<th class="cellalignment1621" id="r1c3-t24">Alternate Methods</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r2c1-t24" headers="r1c1-t24">
<p>Platform migration to same endian platform</p>
</td>
<td class="cellalignment1617" headers="r2c1-t24 r1c2-t24">
<p><a href="#CDEGBCIB">Physical Standby Databases for Platform Migration</a></p>
</td>
<td class="cellalignment1617" headers="r2c1-t24 r1c3-t24">
<ol>
<li>
<p>Use <a href="#BABDGDGE">Transportable Database for Platform Migration</a> when a cross-platform physical standby database is not available for the platform combination to be migrated.</p>
</li>
<li>
<p>Use <a href="#BABICHFE">Oracle GoldenGate for Platform Migration</a> transportable database cannot finish within the maintenance window.</p>
</li>
</ol>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r3c1-t24" headers="r1c1-t24">
<p>Platform migration to different endian platform</p>
</td>
<td class="cellalignment1617" headers="r3c1-t24 r1c2-t24">
<p><a href="#BABEJCHD">Oracle Data Pump for Platform Migration</a></p>
</td>
<td class="cellalignment1617" headers="r3c1-t24 r1c3-t24">
<ol>
<li>
<p>Use <a href="#BABICHFE">Oracle GoldenGate for Platform Migration</a> when Data Pump cannot finish within the maintenance window.</p>
</li>
<li>
<p>Use <a href="#BABEFEID">Transportable Tablespaces for Platform Migration</a> when the database is using data types unsupported by Oracle GoldenGate.</p>
</li>
</ol>
</td>
</tr>
<tr class="cellalignment1611">
<td class="cellalignment1617" id="r4c1-t24" headers="r1c1-t24">
<p>Location Migration Only</p>
</td>
<td class="cellalignment1617" headers="r4c1-t24 r1c2-t24">
<p><a href="#BABFIJGF">Data Guard Redo Apply (Physical Standby Database) for Location Migration</a></p>
</td>
<td class="cellalignment1617" headers="r4c1-t24 r1c3-t24">
<p>None.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Query the <code>V$TRANSPORTABLE_PLATFORM</code> view to determine the <a id="sthref986"></a><a id="sthref987"></a>endian format of all platforms. Query the <code>V$DATABASE</code> view to determine the platform ID and platform name of the current system.</div>
</div>
<!-- class="sect3" -->
<a id="CDEGBCIB"></a>
<div id="HABPT5111" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.4</span> Physical Standby Databases for Platform Migration</h4>
<p><a id="sthref988"></a><a id="sthref989"></a><a id="sthref990"></a>The recommended approach for platform migration is to create a physical standby and perform a switchover. Physical standby databases support certain heterogeneous platform combinations. For an up-to-date list of platform combinations, see "Data Guard Support for Heterogeneous Primary and Physical Standbys in Same Data Guard Configuration" in My Oracle Support Note 413484.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1</a></code></p>
<p>Oracle Data Guard and physical standby databases are the recommended solution for performing system and cluster upgrades that are not upgradeable using Oracle RAC rolling upgrades. For example, Data Guard is also recommended for:</p>
<ul>
<li>
<p>System upgrades that cannot be upgraded using Oracle RAC rolling upgrades due to system restrictions.</p>
</li>
<li>
<p>Migrations to Oracle ASM, to Oracle RAC from a nonclustered environment, to 64-bit systems, to a different platform with the same endian format or to a different platform with the same processor architecture, or to Windows from Linux or to Linux from Windows.</p>
</li>
<li>
<p>When you have a primary database with 32-bit Oracle binaries on Linux 32-bit, and a physical standby database with 64-bit Oracle binaries on Linux 64-bit. Such configurations must follow additional procedures during Data Guard role transitions (switchover and failover) as described in Support Note 414043.1.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>See "Data Guard Support for Heterogeneous Primary and Physical Standbys in Same Data Guard Configuration" in My Oracle Support Note 413484.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1</a></code></p>
</li>
<li>
<p>See "Role Transitions for Data Guard Configurations Using Mixed Oracle Binaries" in My Oracle Support Note 414043.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=414043.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=414043.1</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABDGDGE"></a>
<div id="HABPT5112" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.5</span> Transportable Database for Platform Migration</h4>
<p><a id="sthref991"></a><a id="sthref992"></a><a id="sthref993"></a>Transportable database is the recommended solution for migrating an entire database to another platform that has the same endian format, but only when a cross-platform physical standby database is not available for the source/target platform combination to be migrated.</p>
<p>Consider the following points when deciding if transportable database is the appropriate method to use when moving a database to another platform:</p>
<ul>
<li>
<p>Transportable database supports moving databases between platforms with the same endian format.</p>
</li>
<li>
<p>Downtime required for a platform migration when using transportable database is determined by the time needed to:</p>
<ul>
<li>
<p>Place the source database in read-only mode.</p>
</li>
<li>
<p>Convert data files. Only files that contain undo segments, or files that contain automatic segment-space management (ASSM) segment headers if converting from or to HP Tru64, require conversion.</p>
</li>
<li>
<p>Transfer all data files from the source system to the target system.</p>
<p>You can significantly reduce the amount of downtime by using a storage infrastructure that can make the data files available to the target system without physically moving the files.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink BRADV05432" href="../../backup.112/e10642/rcmxplat.htm#BRADV05432"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about cross platform use of transportable database</p>
</li>
<li>
<p>The MAA white paper "Platform Migration Using Transportable Database" at</p>
<p><code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABICHFE"></a>
<div id="HABPT5113" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.6</span> Oracle GoldenGate for Platform Migration</h4>
<p><a id="sthref994"></a>You can use Oracle GoldenGate to move a database from one platform to another with minimal downtime. Consider using Oracle GoldenGate if transportable database cannot perform the migration quickly enough, when the application does not use user-defined types, and you can perform any extra administrative effort required to perform the migration.</p>
<p>Note the following points when deciding if Oracle GoldenGate is an appropriate method for performing a platform migration:</p>
<ul>
<li>
<p>Oracle GoldenGate does not support user-defined types, such as object types, REF values, varrays, and nested tables.</p>
</li>
<li>
<p>Extra administrative effort may be required to set up and maintain the Oracle GoldenGate environment.</p>
</li>
<li>
<p>Downtime required for a platform migration when using Oracle GoldenGate is determined by the time needed to apply the remaining transactions in the queue and to reconnect clients to the new database.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See:</p>
<a class="olink GWUAD" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GWUAD"><span class="italic">Oracle GoldenGate For Windows and UNIX Administrator's Guide</span></a></div>
</div>
<!-- class="sect3" -->
<a id="BABEJCHD"></a>
<div id="HABPT5114" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.7</span> Oracle Data Pump for Platform Migration</h4>
<p><a id="sthref995"></a><a id="sthref996"></a><a id="sthref997"></a>Oracle Data Pump technology enables very high-speed movement of data and metadata from one database to another, across different platforms and different database versions.</p>
<p>Note the following when deciding if Data Pump is an appropriate method for a platform migration:</p>
<ul>
<li>
<p>Downtime required for a platform migration when using Data Pump is determined by the time needed to perform a full database export, transfer the export dump files to the target system, then perform a full database import.</p>
</li>
<li>
<p>Downtime may be reduced by performing the export to storage that is shared between the source and target systems, thus eliminating the need to transfer the export dump files.</p>
</li>
<li>
<p>Data Pump supports the ability to load the target database directly from the source database over database links, known as network import. In some cases a network import may be faster than the multi-step approach of export database, transfer dump files, and import database.</p>
</li>
</ul>
<p>Use Data Pump when moving a database to a platform with different endian format when the network import time is acceptable.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SUTIL100" href="../../server.112/e22490/dp_overview.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a> for more information about Oracle Data Pump</p>
</li>
<li>
<p><a class="olink UPGRD" href="../e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about upgrading your Oracle Database software</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABEFEID"></a>
<div id="HABPT5115" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.8</span> Transportable Tablespaces for Platform Migration</h4>
<p><a id="sthref998"></a>Transportable tablespaces accomplish a platform migration by transporting all user data files into a pre-created, prepared target database. Use transportable tablespaces when the database is using data types unsupported by Oracle GoldenGate and the user schemas are simple.</p>
<p>Note the following points when deciding if transportable tablespaces is the appropriate method for performing a platform migration:</p>
<ul>
<li>
<p>The <code>SYSTEM</code> tablespace cannot be moved with transportable tablespaces. The target database <code>SYSTEM</code> tablespace contents, including user definitions and objects necessary for the clients, must be built manually. Use Data Pump to move the necessary contents of the <a id="sthref999"></a><a id="sthref1000"></a><code>SYSTEM</code> tablespace.</p>
</li>
<li>
<p>Downtime required for a platform migration or database upgrade when using transportable tablespaces is determined by the time needed to:</p>
<ul>
<li>
<p>Place the source database tablespaces in read-only mode.</p>
</li>
<li>
<p>Perform a network import of the transportable metadata.</p>
</li>
<li>
<p>Transfer all data files from the source system to the target system.</p>
<p>This time can be reduced significantly by using a storage infrastructure that can make the data files available to the target system without the physically moving the files.</p>
</li>
<li>
<p>Convert all data files to the new platform format using RMAN.</p>
</li>
</ul>
</li>
</ul>
<p>Use transportable tablespaces to migrate to a platform when Oracle Data Pump cannot complete within the maintenance window, and Oracle GoldenGate or Data Guard SQL Apply cannot be used due to data type restrictions.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN01101" href="../../server.112/e25494/tspaces.htm#ADMIN01101"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about transportable tablespaces</div>
</div>
<!-- class="sect3" -->
<a id="BABFIJGF"></a>
<div id="HABPT5116" class="sect3">
<h4 class="sect3"><span class="secnum">14.2.7.9</span> Data Guard Redo Apply (Physical Standby Database) for Location Migration</h4>
<p><a id="sthref1001"></a>You can use Data Guard Redo Apply to change the location of a database to a remote site with minimal downtime by setting up a temporary standby database at a remote location and performing a switchover operation.</p>
<p>The downtime required for a location migration when using Data Guard Redo Apply is determined by the time required to perform a switchover operation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about Redo Apply and physical standby databases</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABEGJBF"></a>
<div id="HABPT5324" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">14.2.8</span> Edition-Based Redefinition for Online Application Maintenance and Upgrades</h3>
<p><a id="sthref1002"></a><a id="sthref1003"></a><a id="sthref1004"></a>Edition-based redefinition enables you to upgrade a database component of an application while it is in use, thereby minimizing or eliminating down time. This is accomplished by changing (redefining) database objects in a private environment known as an edition.</p>
<p>To upgrade an application while it is in use, you copy the database objects that comprise the application and redefine the copied objects in isolation. Your changes do not affect users of the application&mdash;they continue to run the unchanged application. When you are sure that your changes are correct, you make the upgraded application available to all users.</p>
<p>In favorable cases, rollover is possible. You can use the pre-upgrade and the post-upgrade editions concurrently so that sessions that were started before the post-upgrade edition was published can continue to use the pre-upgrade edition until they are terminated naturally while new sessions use the post-upgrade edition. In less favorable cases, all pre-upgrade sessions must be terminated before new sessions can be allowed to use the post-upgrade edition. In such cases, the application suffers a small amount of downtime.</p>
<div class="infoboxnotealso">
<p class="notep1">See:</p>
<ul>
<li>
<p><a class="olink ADFNS020" href="../../appdev.112/e41502/adfns_editions.htm#ADFNS020"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for information about Edition-Based Redefinition</p>
</li>
<li>
<p><a class="olink ADMIN13166" href="../../server.112/e25494/general.htm#ADMIN13166"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about Managing Editions</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACEJAAE"></a>
<div id="HABPT5118" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">14.2.9</span> Oracle GoldenGate for Online Application Upgrades<a id="sthref1005"></a><a id="sthref1006"></a></h3>
<p>An application upgrade may include a database upgrade plus any required application code and schema changes. If you require zero-to-minimum downtime while performing the database or application upgrade, then use Oracle GoldenGate to perform a database upgrade with little or no downtime. Oracle GoldenGate provides continuous system availability and eliminates planned outages to allow uninterrupted business operations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink GWUAD" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GWUAD"><span class="italic">Oracle GoldenGate For Windows and UNIX Administrator's Guide</span></a></div>
</div>
<!-- class="sect2" -->
<a id="i1006337"></a>
<div id="HABPT5119" class="sect2">
<h3 class="sect2"><span class="secnum">14.2.10</span> Data Reorganization and Redefinition</h3>
<p><a id="sthref1007"></a>Many scheduled outages related to the data server involve some reorganization of the database objects. The Online Reorganization and Redefinition feature of Oracle Database enables data reorganization to be performed even while the underlying data is being modified. This feature enhances availability and manageability by allowing users full access to the database during a data reorganization operation.</p>
<p>In highly available systems, it is occasionally necessary to redefine large tables that are constantly accessed to improve the performance of queries or DML. Using Online Reorganization and Redefinition, administrators have the flexibility to modify table physical attributes and transform both data and table structure at the same time users have full access to the database. This capability improves data availability, query performance, response time, and disk space usage, all of which are important in a mission-critical environment. Plus, <a id="sthref1008"></a>Online Reorganization and Redefinition can make the application upgrade process easier, safer and faster.</p>
<p>The recommended best practice is to reorganize tables using the <a id="sthref1009"></a><code>DBMS_REDEFINITION</code> PL/SQL package, because it provides a significant increase in availability compared to traditional methods of redefining tables that require tables to be taken offline. Whether you call <code>DBMS_REDEFINITION</code> manually at the command line or using Oracle Enterprise Manager Reorganize Objects wizard, the entire reorganization process occurs while users have full access to the table, thus ensuring system availability.</p>
<p><a href="#BABCIHAI">Figure 14-2</a> shows a page in the Oracle Enterprise Manage<a id="sthref1010"></a>r Reorganize Objects wizard that you can use as an alternative to calling the <code>DBMS_REDEFINITION</code> package at the SQL*Plus command line. After you answer a few questions in the wizard, it generates a script and performs the reorganization.</p>
<div id="HABPT5343" class="figure">
<p class="titleinfigure"><a id="BABCIHAI"></a>Figure 14-2 Database Object Reorganization Using Oracle Enterprise Manager</p>
<img width="1039" height="494" src="img/habpt_gc_reorg_obj.png" alt="Description of Figure 14-2 follows" /><br />
<a id="sthref1011" href="img_text/habpt_gc_reorg_obj.htm">Description of "Figure 14-2 Database Object Reorganization Using Oracle Enterprise Manager"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Consider the following when performing data reorganization:</p>
<ul>
<li>
<p>Minimize concurrent activity on the table during an online operation.</p>
<p>During an online operation, Oracle recommends users minimize activities on the base table. Database activities should affect less than 10% of the table while an online operation is in progress. Also the database administrator can use the Database Resource Manager to minimize the affect of the data reorganization to users by allocating enough resources to the users.</p>
</li>
<li>
<p>Oracle does not recommend running online operations at peak times or running a batch job that modifies a large amount of data during an online data reorganization.</p>
</li>
<li>
<p>Rebuild indexes online versus dropping an index and then re-creating an index online.</p>
<p>Rebuilding an index online requires additional disk space for the new index during the operation, whereas dropping an index and then re-creating an index does not require additional disk space.</p>
</li>
<li>
<p>Coalesce an index online versus rebuilding an index online.</p>
<p>Online index coalesce is an in-place data reorganization operation, hence does not require additional disk space like index rebuild does. Index rebuild requires temporary disk space equal to the size of the index plus sort space during the operation. Index coalesce does not reduce the height of the B-tree. It only tries to reduce the number of leaf blocks. The coalesce operation does not free up space for users but does improve index scan performance.</p>
<p>If a user must move an index to a new tablespace, use online index rebuild.</p>
</li>
<li>
<p>Perform online maintenance of local and global indexes.</p>
<p>Oracle Database 11<span class="italic">g</span> supports both local and global partitioned indexes with online operations. When tables and indexes are partitioned, this allows administrators to perform maintenance on these objects, one partition at a time, while the other partitions remain online.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN01514" href="../../server.112/e25494/tables.htm#ADMIN01514"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about redefining tables online</p>
</li>
<li>
<p>The Online Reorganization link from the Oracle Database High Availability page at</p>
<p><code><a href="http://www.oracle.com/technetwork/database/features/availability/index.html">http://www.oracle.com/technetwork/database/features/availability/index.html</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABCEJGA"></a>
<div id="HABPT5121" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">14.2.11</span> Automatic Workload Management for System Maintenance</h3>
<p><a id="sthref1012"></a><a id="sthref1013"></a><a id="sthref1014"></a><a id="sthref1015"></a>For a scheduled outage that requires an instance, node, or other component to be isolated, Oracle RAC provides the ability to relocate, disable, and enable services. Relocation migrates a service to another instance. Services and instances can be selectively disabled while repair, change, or upgrade is performed on hardware or system software and reenabled after the maintenance is complete. This ensures that the service or instance is not started during the maintenance outage. The service and instance is disabled at the beginning of the planned outage. It is then enabled after the maintenance outage.</p>
<p>When using Oracle RAC, Oracle Clusterware daemons start automatically at the time the node is started. When performing maintenance that requires one or more system restarts or requires that all non-operating system processes be shut down, use the <code>crsctl</code> command to stop and disable the startup of the Oracle Clusterware daemons. After maintenance is complete, enable and start the Oracle Clusterware daemons with <code>crsctl</code> commands.<a id="sthref1016"></a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink RACAD7276" href="../../rac.112/e41960/admcon.htm#RACAD7276"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about Automatic Workload Management</p>
</li>
<li>
<p><a class="olink RACAD025" href="../../rac.112/e41960/appsupport.htm#RACAD025"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about using the <code>crsctl</code> command</p>
</li>
<li>
<p>The MAA white paper: "Optimizing Availability During Planned Maintenance Using Oracle Clusterware and Oracle RAC" at</p>
<p><code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1610">
<tr>
<td class="cellalignment1617">
<table class="cellalignment1615">
<tr>
<td class="cellalignment1614"><a href="outage.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1614"><a href="glossary.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1619">
<table class="cellalignment1613">
<tr>
<td class="cellalignment1614"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1614"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1614"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1614"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1614"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1614"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
