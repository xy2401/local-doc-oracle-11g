<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Database Performance Method</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 040" />
<meta name="dcterms.created" content="2011-11-21T13:27:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide" />
<meta name="dcterms.identifier" content="E10822-04" />
<meta name="dcterms.isVersionOf" content="TDPPT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdppt_intro.htm" title="Previous" type="text/html" />
<link rel="Next" href="tdppt_parttwo.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10822.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/21</span> <!-- End Header --><a id="CIHIEGEC"></a><a id="TDPPT006"></a>
<h1 class="chapter"><span class="secnum">2</span> Oracle Database Performance Method</h1>
<p>Performance improvement is an iterative process. Removing the first <span class="bold">bottleneck</span> (a point where resource contention is highest) may not lead to performance improvement immediately because another bottleneck might be revealed that has an even greater performance impact on the system. For this reason, the Oracle performance method<a id="sthref9"></a><a id="sthref10"></a> is iterative. Accurately diagnosing the performance problem is the first step toward ensuring that your changes improve performance.</p>
<p>Typically, performance problems result from a lack of <span class="bold">throughput</span> (the amount of work that can be completed in a specified time), unacceptable user or job <span class="bold">response time</span> (the time to complete a specified workload), or both. The problem might be localized to specific application modules or span the system.</p>
<p>Before looking at database or operating system statistics, it is crucial to get feedback from the system users and the people paying for the application. This feedback makes it easier to set performance goals. Improved performance can be measured in terms of business goals rather than system statistics.</p>
<p>The Oracle performance method can be applied until performance goals are met or deemed impractical. Because this process is iterative, some investigations may have little impact on system performance. It takes time and experience to accurately pinpoint critical bottlenecks quickly. Automatic Database Diagnostic Monitor (ADDM) implements the Oracle performance method and analyzes statistics to provide automatic diagnosis of major performance problems. Because ADDM can significantly shorten the time required to improve the performance of a system, it is the method used in this guide.</p>
<p>This chapter discusses the Oracle Database performance method and contains the following sections:</p>
<ul>
<li>
<p><a href="#CAEICJEI">Gathering Database Statistics Using the Automatic Workload Repository</a></p>
</li>
<li>
<p><a href="#CIHFFHBI">Using the Oracle Performance Method</a></p>
</li>
<li>
<p><a href="#i11221">Common Performance Problems Found in Oracle Databases</a></p>
</li>
</ul>
<a id="CAEICJEI"></a><a id="TDPPT007"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Gathering Database Statistics Using the Automatic Workload Repository</h2>
<p><a id="sthref11"></a><a id="sthref12"></a><a id="sthref13"></a>Database statistics provide information about the type of load on the database and the internal and external resources used by the database. To accurately diagnose performance problems with the database using ADDM, statistics must be available.</p>
<p>A <span class="bold">cumulative statistic</span> is a count such as the number of block reads. Oracle Database generates many types of cumulative statistics for the system, sessions, and individual SQL statements. Oracle Database also tracks cumulative statistics about segments and services. <a id="sthref14"></a>Automatic Workload Repository (AWR) automates database statistics gathering by collecting, processing, and maintaining performance statistics for database problem detection and self-tuning purposes.</p>
<p>By default, the database gathers statistics every hour and creates an <span class="bold">AWR snapshot</span>, which is a set of data for a specific time that is used for performance comparisons<a id="sthref15"></a><a id="sthref16"></a>. The delta values captured by the snapshot represent the changes for each statistic over the time period. Statistics gathered by AWR are queried from memory. The gathered data can be displayed in both reports and views.</p>
<p>The following initialization parameters are relevant for AWR:</p>
<ul>
<li>
<p><code>STATISTICS_LEVEL</code></p>
<p>Set this parameter to <code>TYPICAL</code> (default) or <code>ALL</code> to enable statistics gathering by AWR. Setting <code>STATISTICS_LEVEL</code> to <code>BASIC</code> disables many database features, including AWR, and is not recommended. To learn more about this initialization parameter, see <a class="olink REFRN10214" href="../../server.112/e40402/initparams254.htm#REFRN10214"><span class="italic">Oracle Database Reference</span></a>.</p>
</li>
<li>
<p><code>CONTROL_MANAGEMENT_PACK_ACCESS</code></p>
<p>Set to <code>DIAGNOSTIC+TUNING</code> (default) or <code>DIAGNOSTIC</code> to enable automatic database diagnostic monitoring. Setting <code>CONTROL_MANAGEMENT_PACK_ACCESS</code> to <code>NONE</code> disables many database features, including ADDM, and is strongly discouraged. To learn more about this initialization parameter, see <a class="olink REFRN10296" href="../../server.112/e40402/initparams038.htm#REFRN10296"><span class="italic">Oracle Database Reference</span></a>.</p>
</li>
</ul>
<p><a id="sthref17"></a><a id="sthref18"></a>The database statistics collected and processed by AWR include:</p>
<ul>
<li>
<p><a href="#CIHCACJG">Time Model Statistics</a></p>
</li>
<li>
<p><a href="#CIHGGECF">Wait Event Statistics</a></p>
</li>
<li>
<p><a href="#CIHFGGBH">Session and System Statistics</a></p>
</li>
<li>
<p><a href="#CIHBEFGH">Active Session History Statistics</a></p>
</li>
<li>
<p><a href="#CIHIEFBG">High-Load SQL Statistics</a></p>
</li>
</ul>
<a id="CIHCACJG"></a><a id="TDPPT008"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Time Model Statistics</h3>
<p><a id="sthref19"></a><a id="sthref20"></a>Time model statistics measure the time spent in the database by operation type. The most important time model statistic is <span class="bold">database time (DB time)</span><a id="sthref21"></a><a id="sthref22"></a><a id="sthref23"></a>. Database time represents the total time spent in database calls by foreground sessions, and is an indicator of the total instance workload. As shown in <a href="#CIHCDGCI">Figure 2-1</a>, database time makes up a portion of an application's overall user response time.</p>
<div class="figure">
<p class="titleinfigure"><a id="CIHCDGCI"></a><a id="TDPPT345"></a>Figure 2-1 DB Time in Overall User Response Time</p>
<img width="674" height="89" src="img/tdppt001.gif" alt="Description of Figure 2-1 follows" /><br />
<a id="sthref24" href="img_text/tdppt001.htm">Description of "Figure 2-1 DB Time in Overall User Response Time"</a><br />
<br /></div>
<!-- class="figure" -->
<p>A <span class="bold">session</span> is a logical entity in the database instance memory that represents the state of a current user login to a database. Database time is calculated by aggregating the CPU time and wait time of all <span class="bold">active sessions</span> (sessions that are not idle). For any database request, the CPU time is the sum of the time spent working on the request, while the wait time is the sum of all the waits for various database instance resources. DB time includes only time spent on client processes and does not include time spent on background processes such as PMON.</p>
<p>For example, a user session may involve an online transaction made at an online bookseller consisting of the actions shown in <a href="#CIHDFGGJ">Figure 2-2</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="CIHDFGGJ"></a><a id="TDPPT346"></a>Figure 2-2 DB Time in User Transaction</p>
<img width="561" height="135" src="img/tdppt002.gif" alt="Description of Figure 2-2 follows" /><br />
<a id="sthref25" href="img_text/tdppt002.htm">Description of "Figure 2-2 DB Time in User Transaction"</a><br />
<br /></div>
<!-- class="figure" -->
<ol>
<li>
<p>Query for novels by author</p>
<p>The user performs a search for novels by a particular author. This action causes the application to perform a database query for novels by the author.</p>
</li>
<li>
<p>Browse results of query</p>
<p>The user browses the returned list of novels by the author and accesses additional details, such as user reviews and inventory status. This action causes the application to perform additional database queries.</p>
</li>
<li>
<p>Add item to cart</p>
<p>After browsing details about the novels, the user decides to add one novel to the shopping cart. This action causes the application to make a database call to update the shopping cart.</p>
</li>
<li>
<p>Checkout</p>
<p>The user completes the transaction by checking out, using the address and payment information previously saved at the bookseller's website from a previous purchase. This action causes the application to perform various database operations to retrieve the user's information, add a new order, update the inventory, and generate an e-mail confirmation.</p>
</li>
</ol>
<p>For each of the preceding actions, the user makes a request to the database, as represented by the down arrow in <a href="#CIHDFGGJ">Figure 2-2</a>. The CPU time spent by the database processing the request and the wait time spent waiting for the database are considered DB time, as represented by the shaded areas. After the request is completed, the results are returned to the user, as represented by the up arrow. The space between the up and down arrows represents the total user response time for processing the request, which contains other components besides DB time, as illustrated in <a href="#CIHCDGCI">Figure 2-1</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
DB time is measured cumulatively from when the instance started. Because DB time combines times from all non-idle user sessions, DB time can exceed the time elapsed since the instance started. For example, an instance that has run 5 minutes could have four active sessions whose cumulative DB time is 20 minutes.</div>
<p>The objective of database tuning is to reduce database time. In this way, you can improve the overall response time of user transactions in the application.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGGECF"></a><a id="TDPPT009"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Wait Event Statistics</h3>
<p><a id="sthref26"></a><a id="sthref27"></a>Wait events are incremented by a session to indicate that the session had to wait for an event to complete before being able to continue processing. When a session has to wait while processing a user request, the database records the wait by using one of a set of predefined wait events. The events are then grouped into wait classes, such as User I/O and Network. Wait event data reveals symptoms of problems that might be affecting performance, such as latch, buffer, or I/O contention.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink PFGRF02410" href="../../server.112/e41573/instance_tune.htm#PFGRF02410"><span class="italic">Oracle Database Performance Tuning Guide</span></a></p>
</li>
<li>
<p><a class="olink REFRN101" href="../../server.112/e40402/waitevents.htm#REFRN101"><span class="italic">Oracle Database Reference</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHFGGBH"></a><a id="TDPPT010"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Session and System Statistics</h3>
<p><a id="sthref28"></a><a id="sthref29"></a>A large number of cumulative database statistics are available on a system and session level. Some of these statistics are collected by AWR.</p>
</div>
<!-- class="sect2" -->
<a id="CIHBEFGH"></a><a id="TDPPT011"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Active Session History Statistics</h3>
<p>The Active Session History<a id="sthref30"></a><a id="sthref31"></a> (ASH) statistics are samples of session activity in the database. The database samples active sessions every second and stores them in a circular buffer in the System Global Area (SGA). Any session that is connected to the database and using CPU, or is waiting for an event that does not belong to the idle wait class, is considered an active session. By capturing only active sessions, a manageable set of data is represented. The size of the data is directly related to the work being performed, rather than the number of sessions allowed on the database.</p>
<p>Using the DB time example described in <a href="#CIHCACJG">"Time Model Statistics"</a>, samples of session activity are collected from the online transaction made at the bookseller's website, represented as vertical lines below the horizontal arrow in <a href="#CIHBAFGI">Figure 2-3</a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="CIHBAFGI"></a><a id="TDPPT347"></a>Figure 2-3 Active Session History</p>
<img width="561" height="147" src="img/tdppt003.gif" alt="Description of Figure 2-3 follows" /><br />
<a id="sthref32" href="img_text/tdppt003.htm">Description of "Figure 2-3 Active Session History"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The light vertical lines represent samples of inactive session activity that are not captured in the ASH statistics. The bold vertical lines represent samples of active sessions that are captured at:</p>
<ul>
<li>
<p>7:38, while novels by the author are being queried</p>
</li>
<li>
<p>7:42, while the user is browsing the query results</p>
</li>
<li>
<p>7:50, when one novel is added to the shopping cart</p>
</li>
<li>
<p>7:52, during the checkout process</p>
</li>
</ul>
<p><a href="#CIHDGJAH">Table 2-1</a> lists ASH statistics collected for the active sessions, along with examples of the session ID (SID), module, SQL ID, session state, and wait events that are sampled.</p>
<div class="tblformal">
<p class="titleintable"><a id="TDPPT348"></a><a id="sthref33"></a><a id="CIHDGJAH"></a>Table 2-1 Active Session History</p>
<table class="cellalignment1752" title="Active Session History" summary="4 ASH samplings are listed with values for time, SID, module, SQL ID, state, and event" dir="ltr">
<thead>
<tr class="cellalignment1739">
<th class="cellalignment1749" id="r1c1-t4">Time</th>
<th class="cellalignment1749" id="r1c2-t4">SID</th>
<th class="cellalignment1749" id="r1c3-t4">Module</th>
<th class="cellalignment1749" id="r1c4-t4">SQL ID</th>
<th class="cellalignment1749" id="r1c5-t4">State</th>
<th class="cellalignment1749" id="r1c6-t4">Event</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1739">
<td class="cellalignment1745" id="r2c1-t4" headers="r1c1-t4">
<p>7:38</p>
</td>
<td class="cellalignment1745" headers="r2c1-t4 r1c2-t4">
<p>213</p>
</td>
<td class="cellalignment1745" headers="r2c1-t4 r1c3-t4">
<p>Book by author</p>
</td>
<td class="cellalignment1745" headers="r2c1-t4 r1c4-t4">
<p>qa324jffritcf</p>
</td>
<td class="cellalignment1745" headers="r2c1-t4 r1c5-t4">
<p>Waiting</p>
</td>
<td class="cellalignment1745" headers="r2c1-t4 r1c6-t4">
<p>db file sequential read</p>
</td>
</tr>
<tr class="cellalignment1739">
<td class="cellalignment1745" id="r3c1-t4" headers="r1c1-t4">
<p>7:42</p>
</td>
<td class="cellalignment1745" headers="r3c1-t4 r1c2-t4">
<p>213</p>
</td>
<td class="cellalignment1745" headers="r3c1-t4 r1c3-t4">
<p>Get review ID</p>
</td>
<td class="cellalignment1745" headers="r3c1-t4 r1c4-t4">
<p>aferv5desfzs5</p>
</td>
<td class="cellalignment1745" headers="r3c1-t4 r1c5-t4">
<p>CPU</p>
</td>
<td class="cellalignment1745" headers="r3c1-t4 r1c6-t4">
<p>n/a</p>
</td>
</tr>
<tr class="cellalignment1739">
<td class="cellalignment1745" id="r4c1-t4" headers="r1c1-t4">
<p>7:50</p>
</td>
<td class="cellalignment1745" headers="r4c1-t4 r1c2-t4">
<p>213</p>
</td>
<td class="cellalignment1745" headers="r4c1-t4 r1c3-t4">
<p>Add item to cart</p>
</td>
<td class="cellalignment1745" headers="r4c1-t4 r1c4-t4">
<p>hk32pekfcbdfr</p>
</td>
<td class="cellalignment1745" headers="r4c1-t4 r1c5-t4">
<p>Waiting</p>
</td>
<td class="cellalignment1745" headers="r4c1-t4 r1c6-t4">
<p>buffer busy wait</p>
</td>
</tr>
<tr class="cellalignment1739">
<td class="cellalignment1745" id="r5c1-t4" headers="r1c1-t4">
<p>7:52</p>
</td>
<td class="cellalignment1745" headers="r5c1-t4 r1c2-t4">
<p>213</p>
</td>
<td class="cellalignment1745" headers="r5c1-t4 r1c3-t4">
<p>Checkout</p>
</td>
<td class="cellalignment1745" headers="r5c1-t4 r1c4-t4">
<p>abngldf95f4de</p>
</td>
<td class="cellalignment1745" headers="r5c1-t4 r1c5-t4">
<p>Waiting</p>
</td>
<td class="cellalignment1745" headers="r5c1-t4 r1c6-t4">
<p>log file sync</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="CIHIEFBG"></a><a id="TDPPT012"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">High-Load SQL Statistics</h3>
<p><a id="sthref34"></a><a id="sthref35"></a>SQL statements that are consuming the most resources produce the highest load on the system, based on criteria such as elapsed time and CPU time.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHFFHBI"></a><a id="TDPPT490"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Using the Oracle Performance Method</h2>
<p>Performance tuning using the Oracle performance method<a id="sthref36"></a> is driven by identifying and eliminating bottlenecks in the database, and by developing efficient SQL statements. Database tuning is performed in two phases: proactively and reactively.</p>
<p>In the proactive tuning phase, you must perform tuning tasks as part of your daily database maintenance routine, such as reviewing ADDM analysis and findings, monitoring the real-time performance of the database, and responding to alerts.</p>
<p>In the reactive tuning phase, you must respond to issues reported by users, such as performance problems that may occur for only a short duration of time, or performance degradation to the database over a period of time.</p>
<p>SQL tuning is an iterative process to identify, tune, and improve the efficiency of high-load SQL statements.</p>
<p>Applying the Oracle performance method involves the following:</p>
<ul>
<li>
<p>Performing pre-tuning preparations, as described in <a href="#CIHBHFHG">"Preparing the Database for Tuning"</a></p>
</li>
<li>
<p>Tuning the database proactively on a regular basis, as described in <a href="#CIHJFHBJ">"Tuning the Database Proactively"</a></p>
</li>
<li>
<p>Tuning the database reactively when performance problems are reported by the users, as described in <a href="#CIHDAEBE">"Tuning the Database Reactively"</a></p>
</li>
<li>
<p>Identifying, tuning, and optimizing high-load SQL statements, as described in <a href="#CIHJJADE">"Tuning SQL Statements"</a></p>
</li>
</ul>
<p>To improve database performance, you must apply these principles iteratively.</p>
<a id="CIHBHFHG"></a><a id="TDPPT491"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Preparing the Database for Tuning</h3>
<p>This section lists and describes the steps that must be performed before the database can be properly tuned.</p>
<p class="orderedlisttitle">To prepare the database for tuning<a id="sthref38"></a><a id="sthref39"></a>:&nbsp;</p>
<ol>
<li>
<p>Get feedback from users.</p>
<p>Determine the scope of the performance project and subsequent performance goals, and determine performance goals for the future. This process is key for future capacity planning.</p>
</li>
<li>
<p>Check the operating systems of all systems involved with user performance.</p>
<p>Check for hardware or operating system resources that are fully utilized. List any overused resources for possible later analysis. In addition, ensure that all hardware is functioning properly.</p>
</li>
<li>
<p>Ensure that the <code><a id="sthref40"></a><a id="sthref41"></a><a id="sthref42"></a><a id="sthref43"></a>STATISTICS_LEVEL</code> initialization parameter is set to <code>TYPICAL</code> (default) or <code>ALL</code> to enable the automatic performance tuning features of Oracle Database, including AWR and ADDM.</p>
</li>
<li>
<p>Ensure that the <code>CONTROL_MANAGEMENT_PACK_ACCESS</code> initialization parameter is set to <code>DIAGNOSTIC+TUNING</code> (default) or <code>DIAGNOSTIC</code> to enable ADDM.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CAEICJEI">"Gathering Database Statistics Using the Automatic Workload Repository"</a> for information about configuring AWR</p>
</li>
<li>
<p><a href="tdppt_auto.htm#CHDDFAGH">"Configuring Automatic Database Diagnostic Monitor"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHJFHBJ"></a><a id="TDPPT492"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Tuning the Database Proactively</h3>
<p>This section lists and describes the proactive steps required to keep the database properly tuned on a regular basis. Perform these steps as part of your daily maintenance of Oracle Database. Repeat the tuning process until your performance goals are met or become impossible to achieve because of other constraints.</p>
<p class="orderedlisttitle">To tune the database proactively<a id="sthref45"></a><a id="sthref46"></a>:&nbsp;</p>
<ol>
<li>
<p>Review the ADDM findings, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>.</p>
<p>ADDM automatically detects and reports on performance problems with the database, including most of the <a href="#i11221">"Common Performance Problems Found in Oracle Databases"</a>. The results are displayed as ADDM findings on the Database Home page in Oracle Enterprise Manager (Enterprise Manager). Reviewing these findings enables you to quickly identify the performance problems that require your attention.</p>
</li>
<li>
<p>Implement the ADDM recommendations, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>.</p>
<p>With each ADDM finding, ADDM automatically provides a list of recommendations for reducing the impact of the performance problem. Implementing a recommendation applies the suggested changes to improve the database performance.</p>
</li>
<li>
<p>Monitor performance problems with the database in real time, as described in <a href="tdppt_realtime.htm#CHDIHEBJ">Chapter 4, "Monitoring Real-Time Database Performance"</a>.</p>
<p>The Performance page in Enterprise Manager enables you to identify and respond to real-time performance problems. By drilling down to the appropriate pages, you can identify and resolve performance problems with the database in real time, without having to wait until the next ADDM analysis.</p>
</li>
<li>
<p>Respond to performance-related alerts, as described in <a href="tdppt_alerts.htm#BEIDDIIG">Chapter 5, "Monitoring Performance Alerts"</a>.</p>
<p>The Database Home page in Enterprise Manager displays performance-related alerts generated by the database. Typically, resolving the problems indicated by these alerts improves database performance.</p>
</li>
<li>
<p>Validate that any changes made have produced the desired effect, and verify that the users experience performance improvements.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHDAEBE"></a><a id="TDPPT493"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Tuning the Database Reactively</h3>
<p>This section lists and describes the steps required to tune the database based on user feedback. This tuning procedure is considered reactive. Perform this procedure periodically when performance problems are reported by the users.</p>
<p class="orderedlisttitle">To tune the database reactively<a id="sthref48"></a><a id="sthref49"></a>:&nbsp;</p>
<ol>
<li>
<p>Run ADDM manually to diagnose current and historical database performance when performance problems are reported by the users, as described in <a href="tdppt_manual.htm#CHDHGBIC">Chapter 6, "Manual Database Performance Monitoring"</a>.</p>
<p>In this way you can analyze current database performance before the next ADDM analysis, or analyze historical database performance when you were not proactively monitoring the system.</p>
</li>
<li>
<p>Resolve transient performance problems, as described in <a href="tdppt_transient.htm#CHDHHDHE">Chapter 7, "Resolving Transient Performance Problems"</a>.</p>
<p>The Active Session History (ASH) reports enable you to analyze transient performance problems with the database that are short-lived and do not appear in the ADDM analysis.</p>
</li>
<li>
<p>Resolve performance degradation over time, as described in <a href="tdppt_degrade.htm#BABEIEDD">Chapter 8, "Resolving Performance Degradation Over Time"</a>.</p>
<p>The Automatic Workload Repository (AWR) Compare Periods report enables you to compare database performance between two periods of time, and resolve performance degradation that may happen from one time period to another.</p>
</li>
<li>
<p>Validate that the changes made have produced the desired effect, and verify that the users experience performance improvements.</p>
</li>
<li>
<p>Repeat these steps until your performance goals are met or become impossible to achieve due to other constraints.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHJJADE"></a><a id="TDPPT494"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Tuning SQL Statements</h3>
<p>This section lists and describes the steps required to identify, tune, and optimize high-load SQL statements.</p>
<p class="orderedlisttitle">To tune SQL statements<a id="sthref51"></a><a id="sthref52"></a>:&nbsp;</p>
<ol>
<li>
<p>Identify high-load SQL statements, as described in <a href="tdppt_sqlid.htm#BABFHBFJ">Chapter 9, "Identifying High-Load SQL Statements"</a>.</p>
<p>Use the ADDM findings and the Top SQL section to identify high-load SQL statements that are causing the greatest contention.</p>
</li>
<li>
<p>Tune high-load SQL statements, as described in <a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a>.</p>
<p>You can improve the efficiency of high-load SQL statements by tuning them using SQL Tuning Advisor.</p>
</li>
<li>
<p>Optimize data access paths, as described in <a href="tdppt_sqlopt.htm#BABGHCAE">Chapter 11, "Optimizing Data Access Paths"</a>.</p>
<p>You can optimize the performance of data access paths by creating the proper set of <a id="sthref53"></a>materialized views, <a id="sthref54"></a>materialized view logs, and <a id="sthref55"></a>indexes for a given workload by using SQL Access Advisor.</p>
</li>
<li>
<p>Analyze the SQL performance impact of SQL tuning and other system changes by using SQL Performance Analyzer.</p>
<p>To learn how to use SQL Performance Analyzer, see <a class="olink RATUG166" href="../../server.112/e41481/spa_intro.htm#RATUG166"><span class="italic">Oracle Database Real Application Testing User's Guide</span></a>.</p>
</li>
<li>
<p>Repeat these steps until all high-load SQL statements are tuned for greatest efficiency.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i11221"></a><a id="TDPPT018"></a>
<div class="sect1">
<h2 class="sect1">Common Performance Problems Found in Oracle Databases</h2>
<p>This section lists and describes common performance problems found in Oracle databases<a id="sthref56"></a>. By following the Oracle performance method, you should be able to avoid these problems. If you experience these problems, then repeat the steps in the Oracle performance method, as described in <a href="#CIHFFHBI">"Using the Oracle Performance Method"</a>, or consult the appropriate section that addresses these problems:</p>
<ul>
<li>
<p>CPU bottlenecks</p>
<p>Is the application performing poorly because the system is CPU-bound? Performance problems caused by CPU bottlenecks are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. You can also identify CPU bottlenecks by using the Performance page in Enterprise Manager, as described in <a href="tdppt_realtime.htm#CHDFEGDA">"Monitoring CPU Utilization"</a>.</p>
</li>
<li>
<p>Undersized memory structures</p>
<p>Are the Oracle memory structures such as the System Global Area (SGA), Program Global Area (PGA), and buffer cache adequately sized? Performance problems caused by undersized memory structures are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. You can also identify memory usage issues by using the Performance page in Enterprise Manager, as described in <a href="tdppt_realtime.htm#CHDFAGCD">"Monitoring Memory Utilization"</a>.</p>
</li>
<li>
<p>I/O capacity issues</p>
<p>Is the I/O subsystem performing as expected? Performance problems caused by I/O capacity issues are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. You can also identify disk I/O issues by using the Performance page in Oracle Enterprise Manager, as described in <a href="tdppt_realtime.htm#CHDCCFDG">"Monitoring Disk I/O Utilization"</a>.</p>
</li>
<li>
<p>Suboptimal use of Oracle Database by the application</p>
<p>Is the application making suboptimal use of Oracle Database? Problems such as establishing new database connections repeatedly, excessive SQL parsing, and high levels of contention for a small amount of data (also known as application-level block contention) can degrade the application performance significantly. Performance problems caused by suboptimal use of Oracle Database by the application are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. You can also monitor top activity in various dimensions&mdash;including SQL, session, services, modules, and actions&mdash;by using the Performance page in Enterprise Manager, as described in <a href="tdppt_realtime.htm#CHDEIBAB">"Monitoring User Activity"</a>.</p>
</li>
<li>
<p>Concurrency issues</p>
<p>Is the database performing suboptimally due to a high degree of concurrent activities in the database? A high degree of concurrent activities might result in contention for shared resources that can manifest in the forms of locks or waits for buffer cache. Performance problems caused by concurrency issues are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. You can also identify concurrency issues by using Top Sessions in Enterprise Manager, as described in <a href="tdppt_realtime.htm#CHDEFEEH">"Monitoring Top Sessions"</a>.</p>
</li>
<li>
<p>Database configuration issues</p>
<p>Is the database configured optimally to provide desired performance levels? For example, is there evidence of incorrect sizing of log files, archiving issues, too many checkpoints, or suboptimal parameter settings? Performance problems caused by database configuration issues are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>.</p>
</li>
<li>
<p>Short-lived performance problems</p>
<p>Are users complaining about short-lived or intermittent performance problems? Depending on the interval between snapshots taken by AWR, performance problems that have a short duration may not be captured by ADDM. You can identify short-lived performance problems by using the Active Session History report, as described in <a href="tdppt_transient.htm#CHDHHDHE">Chapter 7, "Resolving Transient Performance Problems"</a>.</p>
</li>
<li>
<p>Degradation of database performance over time</p>
<p>Is there evidence that the database performance has degraded over time? For example, are you or your users noticing that the database is not performing as well as it was 6 months ago? You can generate an AWR Compare Periods report to compare the period when the performance was poor to a period when the performance is stable to identify configuration settings, workload profile, and statistics that are different between these two time periods. This technique helps you identify the cause of the performance degradation, as described in <a href="tdppt_degrade.htm#BABEIEDD">Chapter 8, "Resolving Performance Degradation Over Time"</a>.</p>
</li>
<li>
<p>Inefficient or high-load SQL statements</p>
<p>Are any SQL statements using excessive system resources that impact the system? Performance problems caused by high-load SQL statements are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a> and <a href="tdppt_sqlid.htm#BABFJJCJ">"Identification of High-Load SQL Statements Using ADDM Findings"</a>. You can also identify high-load SQL statements by using Top SQL in Enterprise Manager, as described in <a href="tdppt_sqlid.htm#BABECDJG">"Identifying High-Load SQL Statements Using Top SQL"</a>. After they have been identified, you can tune the high-load SQL statements using SQL Tuning Advisor, as described in <a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a>.</p>
</li>
<li>
<p>Object contention</p>
<p>Are any database objects the source of bottlenecks because they are continuously accessed? Performance problems caused by object contention are diagnosed by ADDM, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. You can also optimize the data access path to these objects using SQL Access Advisor, as described in <a href="tdppt_sqlopt.htm#BABGHCAE">Chapter 11, "Optimizing Data Access Paths"</a>.</p>
</li>
<li>
<p>Unexpected performance regression after tuning SQL statements</p>
<p>Is the performance of SQL statements degrading after they have been tuned? Tuning SQL statements may cause changes to their execution plans, resulting in a significant impact on SQL performance. In some cases, the changes may result in the improvement of SQL performance. In other cases, the changes may cause SQL statements to regress, resulting in a degradation of SQL performance.</p>
<p>Before making changes on a production system, you can analyze the impact of SQL tuning on a test system by using SQL Performance Analyzer. This feature enables<a id="sthref57"></a> you to forecast the impact of system changes on a SQL workload by:</p>
<ul>
<li>
<p>Measuring the performance before and after the change</p>
</li>
<li>
<p>Generating a report that describes the change in performance</p>
</li>
<li>
<p>Identifying the SQL statements that regressed or improved</p>
</li>
<li>
<p>Providing tuning recommendations for each SQL statement that regressed</p>
</li>
<li>
<p>Enabling you to implement the tuning recommendations when appropriate</p>
</li>
</ul>
<p>To learn how to use SQL Performance Analyzer, see <a class="olink RATUG166" href="../../server.112/e41481/spa_intro.htm#RATUG166"><span class="italic">Oracle Database Real Application Testing User's Guide</span></a>.</p>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1738">
<tr>
<td class="cellalignment1745">
<table class="cellalignment1743">
<tr>
<td class="cellalignment1742"><a href="tdppt_intro.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1742"><a href="tdppt_parttwo.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1747">
<table class="cellalignment1741">
<tr>
<td class="cellalignment1742"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1742"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1742"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1742"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1742"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1742"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
