<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Monitoring Real-Time Database Performance</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 040" />
<meta name="dcterms.created" content="2011-11-21T13:27:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide" />
<meta name="dcterms.identifier" content="E10822-04" />
<meta name="dcterms.isVersionOf" content="TDPPT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdppt_auto.htm" title="Previous" type="text/html" />
<link rel="Next" href="tdppt_alerts.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10822.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/21</span> <!-- End Header --><a id="CHDIHEBJ"></a><a id="TDPPT033"></a>
<h1 class="chapter"><span class="secnum">4</span> Monitoring Real-Time Database Performance</h1>
<p>The Performance page in Oracle Enterprise Manager (Enterprise Manager) displays information in three sections that you can use to assess the overall performance of the database in real time.<a id="sthref115"></a><a id="sthref116"></a><a id="sthref117"></a></p>
<p><a href="#CACEBJJJ">Figure 4-1</a> shows the Performance page.</p>
<div class="figure">
<p class="titleinfigure"><a id="CACEBJJJ"></a><a id="TDPPT361"></a>Figure 4-1 Performance Page</p>
<img width="857" height="746" src="img/db_perf.gif" alt="Description of Figure 4-1 follows" /><br />
<a id="sthref118" href="img_text/db_perf.htm">Description of "Figure 4-1 Performance Page"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Typically, you should use the automatic diagnostic feature of Automatic Database Diagnostic Monitor (ADDM) to identify performance problems with the database, as described in <a href="tdppt_auto.htm#CHDEBDAJ">Chapter 3, "Automatic Database Performance Monitoring"</a>. In some cases, you may want to monitor the database performance in real time to identify performance problems as they occur. For example, ADDM performs its analysis after each Automatic Workload Repository (AWR) snapshot, which by default is once every hour. However, if you notice a sudden spike in database activity on the Performance page, then you may want to investigate the incident before the next ADDM analysis.</p>
<p>By drilling down to other pages from the Performance page, you can identify database performance problems in real time. If you find a problem, then you can run ADDM manually to analyze it immediately without having to wait until the next ADDM analysis. To learn how to run ADDM manually, see <a href="tdppt_manual.htm#CHDGGEBG">"Manually Running ADDM to Analyze Current Database Performance"</a>.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDEIBAB">Monitoring User Activity</a></p>
</li>
<li>
<p><a href="#CHDBEHAG">Monitoring Instance Activity</a></p>
</li>
<li>
<p><a href="#CHDEBIAA">Monitoring Host Activity</a></p>
</li>
<li>
<p><a href="#CBBIHFDF">Determining the Cause of Spikes in Database Activity</a></p>
</li>
<li>
<p><a href="#CBBIGBHH">Customizing the Database Performance Page</a></p>
</li>
</ul>
<a id="CHDEIBAB"></a><a id="TDPPT034"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring User Activity</h2>
<p>The Average Active Sessions chart of the Performance page shows the average load on the database. The <span class="bold">average active sessions</span> for a time period equals the total DB time of all sessions during this period divided by the elapsed time (wall clock time) for this period. The chart shows which active sessions are running on the CPU or waiting on an event.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDGCHIA"></a><a id="TDPPT362"></a>Figure 4-2 Monitoring User Activity</p>
<img width="696" height="316" src="img/average_active_sess.gif" alt="Description of Figure 4-2 follows" /><br />
<a id="sthref119" href="img_text/average_active_sess.htm">Description of "Figure 4-2 Monitoring User Activity"</a><br />
<br /></div>
<!-- class="figure" -->
<p>By following the performance method explained in <a href="tdppt_method.htm#CIHIEGEC">Chapter 2, "Oracle Database Performance Method"</a>, you can drill down from the charts to identify the causes of instance-related performance issues and resolve them.</p>
<p class="orderedlisttitle">To monitor user activity:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>Locate any sudden increases in the Average Active Sessions chart.</p>
<p>Each component shows the average number of active sessions in the specified state for the specified time. For example, if only one session were active, then the value .8 for CPU would mean that the session consumed CPU in 4 of 5 sampled seconds around the target time. The Maximum CPU equals the number of CPUs on the system. When the CPU Used value reaches the Maximum CPU line, the database instance is consuming 100 percent of CPU time on the host system.</p>
<p>The wait classes show how much database activity is consumed by waiting for a resource such as disk I/O. Values that use a larger block of active sessions represent bottlenecks caused by a particular wait class, as indicated by the corresponding color in the legend.</p>
<p>In the chart shown in <a href="#CHDGCHIA">Figure 4-2</a>, the largest amount of activity after 3:35 p.m. appears in dark green and corresponds to the CPU Used wait class.</p>
</li>
<li>
<p>To identify each wait class, move your cursor over the block in the Average Active Sessions chart corresponding to the class.</p>
<p>The corresponding wait class is highlighted in the chart legend.</p>
</li>
<li>
<p>Click the largest block of color on the chart or its corresponding wait class in the legend to drill down to the wait class with the most active sessions.</p>
<p>If you click <span class="bold">CPU Used</span>, then the Active Sessions Working page for the wait class appears. If you click a different wait class, such as <span class="bold">User I/O</span>, then the Active Sessions Waiting page appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBIEIDI"></a><a id="TDPPT364"></a>Figure 4-3 Active Sessions Working page</p>
<img width="942" height="712" src="img/act_sess_wrk.gif" alt="Description of Figure 4-3 follows" /><br />
<a id="sthref121" href="img_text/act_sess_wrk.htm">Description of "Figure 4-3 Active Sessions Working page"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The Active Sessions Working page shows a 1-hour timeline. Details for each wait class are shown in 5-minute intervals under Detail for Selected 5 Minute Interval.</p>
<p>You can view the details of wait classes in different dimensions by proceeding to one of the following sections:</p>
<ul>
<li>
<p><a href="#CHDCFFHE">"Monitoring Top SQL"</a></p>
</li>
<li>
<p><a href="#CHDEFEEH">"Monitoring Top Sessions"</a></p>
</li>
<li>
<p><a href="#CHDJEGHG">"Monitoring Top Services"</a></p>
</li>
<li>
<p><a href="#CHDFJFBJ">"Monitoring Top Modules"</a></p>
</li>
<li>
<p><a href="#CHDCDIBG">"Monitoring Top Actions"</a></p>
</li>
<li>
<p><a href="#CBBGBJHB">"Monitoring Top Clients"</a></p>
</li>
<li>
<p><a href="#CBBDJABH">"Monitoring Top PL/SQL"</a></p>
</li>
<li>
<p><a href="#CBBDGJHH">"Monitoring Top Files"</a></p>
</li>
<li>
<p><a href="#CBBHFAHB">"Monitoring Top Objects"</a></p>
</li>
</ul>
</li>
<li>
<p>To change the selected time interval, move the slider below the chart to a different interval.</p>
<p>The information contained in the Detail for Selected 5 Minute Interval section is automatically updated to display the selected time period.</p>
<p>In the example shown in <a href="#CBBIEIDI">Figure 4-3</a>, the 5 -minute interval from 5:03 to 5:08 is selected for the CPU Used wait class.</p>
</li>
<li>
<p>If you discover a performance problem, then you can attempt to resolve it in real time. On the Performance page, do one of the following:</p>
<ul>
<li>
<p>Below the chart, click the snapshot corresponding to the time when the performance problem occurred to run ADDM for this time period.</p>
<p>For information about ADDM analysis, see <a href="tdppt_auto.htm#CHDCGBHB">"Reviewing the Automatic Database Diagnostic Monitor Analysis"</a>.</p>
</li>
<li>
<p>Click <span class="bold">Run ADDM Now</span> to create a snapshot manually.</p>
<p>For information about creating snapshots manually, see <a href="tdppt_auto.htm#CIHHBFGG">"Creating Snapshots"</a>. For information about running ADDM manually, see <a href="tdppt_manual.htm#CHDGGEBG">"Manually Running ADDM to Analyze Current Database Performance"</a>.</p>
</li>
<li>
<p>Click <span class="bold">Run ASH Report</span> to create an Active Session History (ASH) report to analyze transient, short-lived performance problems.</p>
<p>For information about ASH reports, see <a href="tdppt_transient.htm#DAFGDAJC">"Active Session History Reports"</a>.</p>
</li>
</ul>
</li>
</ol>
<a id="CHDCFFHE"></a><a id="TDPPT035"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top SQL</h3>
<p>On the Active Sessions Working page, the Top Working SQL table shows the database activity for actively running SQL statements that are consuming CPU resources. The Activity (%) column shows the percentage of this activity consumed by each SQL statement. If one or several SQL statements are consuming most of the activity, then you should investigate them.</p>
<div class="figure">
<p class="titleinfigure"><a id="CACHAFFF"></a><a id="TDPPT365"></a>Figure 4-4 Monitoring Top SQL</p>
<img width="443" height="394" src="img/top_wrk_sql.gif" alt="Description of Figure 4-4 follows" /><br />
<a id="sthref122" href="img_text/top_wrk_sql.htm">Description of "Figure 4-4 Monitoring Top SQL"</a><br />
<br /></div>
<!-- class="figure" -->
<p>In the example shown in <a href="#CACHAFFF">Figure 4-4</a>, a single <code>SELECT</code> statement is consuming over 47% of database activity, while four modification DML statements are consuming about 35%. These statements should be investigated.</p>
<p class="orderedlisttitle">To monitor the top working SQL statements:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click the CPU block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>In the Top Working SQL table, click the <span class="bold">SQL ID</span> link of the most active SQL statement<a id="sthref124"></a><a id="sthref125"></a>.</p>
<p>The SQL Details page appears.</p>
<p>For SQL statements that are using the majority of the wait time, use SQL Tuning Advisor or create a SQL tuning set to tune the problematic SQL statements.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_sqlid.htm#CHDCAJCB">"Viewing Details of SQL Statements"</a></p>
</li>
<li>
<p><a href="tdppt_sqltune.htm#CACHECBD">"Tuning SQL Statements Using SQL Tuning Advisor"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDEFEEH"></a><a id="TDPPT036"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Sessions</h3>
<p><a id="sthref126"></a><a id="sthref127"></a>On the Active Sessions Working page, the Top Working Sessions table displays the top sessions waiting for the corresponding wait class during the selected time period. A <span class="bold">session</span> is a logical entity in the database instance memory that represents the state of a current user login to the database.</p>
<div class="figure">
<p class="titleinfigure"><a id="CACFFIHC"></a><a id="TDPPT367"></a>Figure 4-5 Monitoring Top Sessions</p>
<img width="519" height="306" src="img/top_wrk_sess.gif" alt="Description of Figure 4-5 follows" /><br />
<a id="sthref128" href="img_text/top_wrk_sess.htm">Description of "Figure 4-5 Monitoring Top Sessions"</a><br />
<br /></div>
<!-- class="figure" -->
<p>A session lasts from the time a user logs in to the database until the user disconnects. For example, when a user starts SQL*Plus, the user must provide a valid database user name and password to establish a session. If a single session is consuming the majority of database activity, then you should investigate it.</p>
<p class="orderedlisttitle">To monitor the top working sessions:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click the CPU Used block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Sessions</span> from the View list.</p>
<p>The Top Working Sessions table appears.</p>
</li>
<li>
<p>In the Top Working Sessions table, click the <span class="bold">Session ID</span> link of the session consuming the most database activity.</p>
<p>The Session Details page appears.</p>
<p>This page contains information such as session activity, session statistics, open cursors, blocking sessions, wait events, and parallel SQL for the selected session.</p>
<p>If a session is consuming too much database activity, then consider clicking <span class="bold">Kill Session</span>, and then tuning the session's SQL statement.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDJEGHG"></a><a id="TDPPT037"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Services</h3>
<p><a id="sthref130"></a><a id="sthref131"></a>The Top Services table displays the top services waiting for the corresponding wait event during the selected time period.</p>
<p>A <span class="bold">service</span> is a group of of applications with common attributes, service-level thresholds, and priorities. For example, the <code>SYS$USERS</code> service is the default service name used when a user session is established without explicitly identifying its service name. The <code>SYS$BACKGROUND</code> service consists of all database background processes. If a service is using the majority of the wait time, then you should investigate it.</p>
<p class="orderedlisttitle">To monitor a service:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click a block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Services</span> from the View list<a id="sthref133"></a><a id="sthref134"></a>.</p>
<p>The Top Services table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CACBJEJJ"></a><a id="TDPPT371"></a>Figure 4-6 Monitoring Top Services</p>
<img width="328" height="142" src="img/top_serv.gif" alt="Description of Figure 4-6 follows" /><br />
<a id="sthref135" href="img_text/top_serv.htm">Description of "Figure 4-6 Monitoring Top Services"</a><br />
<br /></div>
<!-- class="figure" -->
<p>In the example shown in <a href="#CACBJEJJ">Figure 4-6</a>, the <code>SYS$USERS</code> service is consuming 86.47% of database activity. This service corresponds to the database sessions for users <code>hr</code> and <code>sh</code> shown in <a href="#CACFFIHC">Figure 4-5</a>.</p>
</li>
<li>
<p>Click the <span class="bold">Service</span> link of the most active service.</p>
<p>The Service page appears.</p>
<p>This page contains information about the modules, activity, and statistics for the selected service.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDFJFBJ"></a><a id="TDPPT038"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Modules</h3>
<p><a id="sthref136"></a><a id="sthref137"></a>The Top Modules table displays the top modules waiting for the corresponding wait event during the selected time period.</p>
<p>Modules<a id="sthref138"></a> represent the applications that set the service name as part of the workload definition. For example, the <code>DBMS_SCHEDULER</code> module may assign jobs that run within the <code>SYS$BACKGROUND</code> service. If a single module is using the majority of the wait time, then it should be investigated.</p>
<p class="orderedlisttitle">To monitor a module:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click a block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Modules</span> from the View list.</p>
<p>The Top Modules table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CACFIGFJ"></a><a id="TDPPT373"></a>Figure 4-7 Monitoring Top Modules</p>
<img width="466" height="221" src="img/top_mod.gif" alt="Description of Figure 4-7 follows" /><br />
<a id="sthref140" href="img_text/top_mod.htm">Description of "Figure 4-7 Monitoring Top Modules"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Module</span> link of the module that is showing the highest percentage of activity.</p>
<p>The Module page appears.</p>
<p>This page contains information about the actions, activity, and statistics for the selected module.</p>
<p>In the example shown in <a href="#CACFIGFJ">Figure 4-7</a>, the SQL*Plus module is consuming over 84% of database activity and should be investigated. As shown in <a href="#CACFFIHC">Figure 4-5</a>, the SQL*Plus session for users <code>sh</code> and <code>hr</code> are consuming a huge percentage of database activity.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDCDIBG"></a><a id="TDPPT039"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Actions</h3>
<p><a id="sthref141"></a><a id="sthref142"></a>The Top Actions table displays the top actions waiting for the corresponding wait event during the selected time period.</p>
<p>Actions<a id="sthref143"></a> represent the jobs that are performed by a module. For example, the <code>DBMS_SCHEDULER</code> module can run the <code>GATHER_STATS_JOB</code> action to gather statistics on all database objects. If a single action is using the majority of the wait time, then you should investigate it.</p>
<p class="orderedlisttitle">To monitor an action:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click a block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Actions</span> from the View list.</p>
<p>The Top Actions table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CACBGFJH"></a><a id="TDPPT375"></a>Figure 4-8 Monitoring Top Actions</p>
<img width="550" height="280" src="img/top_act.gif" alt="Description of Figure 4-8 follows" /><br />
<a id="sthref145" href="img_text/top_act.htm">Description of "Figure 4-8 Monitoring Top Actions"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Action</span> link of the most active action.</p>
<p>The Action page appears.</p>
<p>This page contains statistics for the selected action.</p>
<p>In the example shown in <a href="#CACBGFJH">Figure 4-8</a>, the <code>SALES_INFO</code> action associated with the SQL*Plus module is consuming 40.3% of the database activity, while <code>EMP_DML</code> is consuming 39.55% and <code>EMP_QUERY</code> is consuming 4.48%. This information is consistent with <a href="#CACFFIHC">Figure 4-5</a>, which shows that the two database sessions for users <code>HR</code> and <code>SH</code> are consuming over 84% of database activity.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBBGBJHB"></a><a id="TDPPT303"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Clients</h3>
<p><a id="sthref146"></a><a id="sthref147"></a>The Top Clients table displays the top clients waiting for the corresponding wait event during the selected time period. A client<a id="sthref148"></a> can be a Web browser or any client process that initiates requests for an operation to be performed by the database. If a single client is using the majority of the wait time, then you should investigate it.</p>
<p class="orderedlisttitle">To monitor a client:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click a block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Clients</span> from the View list.</p>
<p>The Top Clients table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBHJEFG"></a><a id="TDPPT377"></a>Figure 4-9 Monitoring Top Clients</p>
<img width="273" height="142" src="img/top_client.gif" alt="Description of Figure 4-9 follows" /><br />
<a id="sthref150" href="img_text/top_client.htm">Description of "Figure 4-9 Monitoring Top Clients"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Client ID</span> link of the most active client.</p>
<p>The Clients page appears.</p>
<p>This page contains statistics for the selected client process.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBBDJABH"></a><a id="TDPPT304"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top PL/SQL</h3>
<p><a id="sthref151"></a><a id="sthref152"></a>The Top PL/SQL table displays the top PL/SQL subprograms waiting for the corresponding wait event during the selected time period. If a single PL/SQL subprogram is using the majority of the wait time, then you should investigate it.</p>
<p class="orderedlisttitle">To monitor a PL/SQL subprogram:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click a block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Working page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top PL/SQL</span> from the View list.</p>
<p>The Top PL/SQL table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBFEACJ"></a><a id="TDPPT379"></a>Figure 4-10 Monitoring Top PL/SQL</p>
<img width="349" height="100" src="img/top_plsql.gif" alt="Description of Figure 4-10 follows" /><br />
<a id="sthref154" href="img_text/top_plsql.htm">Description of "Figure 4-10 Monitoring Top PL/SQL"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">PL/SQL Subprogram</span> link of the most active subprogram.</p>
<p>The PL/SQL Subprogram page appears.</p>
<p>This page contains statistics for the selected subprogram.</p>
<p>In <a href="#CBBFEACJ">Figure 4-10</a>, the <code>SYS.DBMS_AQ.LISTEN#2</code> subprogram is consuming 100% of database activity.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBBDGJHH"></a><a id="TDPPT321"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Files</h3>
<p><a id="sthref155"></a><a id="sthref156"></a>The Top Files table displays the average wait time for specific files during the selected time period. This data is available from the Active Sessions Waiting: User I/O page.</p>
<p class="orderedlisttitle">To monitor a file:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click the User I/O block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Waiting: User I/O page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Files</span> from the View list.</p>
<p>The Top Files table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBEDDAB"></a><a id="TDPPT381"></a>Figure 4-11 Monitoring Top Files</p>
<img width="522" height="158" src="img/top_files.gif" alt="Description of Figure 4-11 follows" /><br />
<a id="sthref158" href="img_text/top_files.htm">Description of "Figure 4-11 Monitoring Top Files"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Tablespace</span> link of the file with the highest average wait time.</p>
<p>The View Tablespace page appears.</p>
<p>In the example shown in <a href="#CBBEDDAB">Figure 4-11</a>, 75% of the wait times are associated with I/O to the files in the <code>SYSTEM</code> and <code>SYSAUX</code> tablespaces.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBBHFAHB"></a><a id="TDPPT322"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Top Objects</h3>
<p><a id="sthref159"></a><a id="sthref160"></a>The Top Objects table displays the top database objects waiting for the corresponding wait event during the selected time period. This data is available from the Active Sessions Waiting: User I/O page.</p>
<p class="orderedlisttitle">To monitor an object:&nbsp;</p>
<ol>
<li>
<p>On the Performance page, in the Average Active Sessions chart, click the User I/O block on the chart or its corresponding wait class in the legend.</p>
<p>The Active Sessions Waiting: User I/O page appears.</p>
</li>
<li>
<p>Under Detail for Selected 5 Minute Interval, select <span class="bold">Top Objects</span> from the View list.</p>
<p>The Top Objects table appears.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBDHFCC"></a><a id="TDPPT383"></a>Figure 4-12 Monitoring Top Objects</p>
<img width="507" height="149" src="img/top_obj.gif" alt="Description of Figure 4-12 follows" /><br />
<a id="sthref162" href="img_text/top_obj.htm">Description of "Figure 4-12 Monitoring Top Objects"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Click the <span class="bold">Object Name</span> link of the object with the highest average wait time.</p>
<p>The View page for the object appears.</p>
<p>This example in <a href="#CBBDHFCC">Figure 4-12</a> shows that over 84% of the waits are for an object whose name is unavailable. Based on the information in <a href="#CACHAFFF">Figure 4-4</a> and <a href="#CACFFIHC">Figure 4-5</a>, you can conclude that the performance problem is caused by the query and modification DML statements.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBEHAG"></a><a id="TDPPT040"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring Instance Activity</h2>
<p>In the Average Active Sessions section of the Performance page<a id="sthref163"></a>, you can use the instance charts to monitor database instance activity. As explained in <a href="#CBBIGBHH">"Customizing the Database Performance Page"</a>, you can also customize the Performance page so that the most useful charts are displayed by default.</p>
<p>You can use the instance activity charts to perform the following tasks:</p>
<ul>
<li>
<p><a href="#CBBIFFHE">Monitoring Throughput</a></p>
</li>
<li>
<p><a href="#CBBIFFJE">Monitoring I/O</a></p>
</li>
<li>
<p><a href="#CBBCBFFI">Monitoring Parallel Execution</a></p>
</li>
<li>
<p><a href="#CBBFBFAA">Monitoring Services</a></p>
</li>
</ul>
<a id="CBBIFFHE"></a><a id="TDPPT325"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Throughput</h3>
<p>Database <span class="bold">throughput</span> measures the amount of work the database performs in a unit of time. The Throughput charts show any contention that appears in the Average Active Sessions chart. The Throughput charts on the Performance page<a id="sthref164"></a><a id="sthref165"></a> display:</p>
<ul>
<li>
<p>Number of logons, transactions, physical reads, and redo size per second</p>
</li>
<li>
<p>Number of physical reads and redo size per transaction</p>
</li>
</ul>
<div class="figure">
<p class="titleinfigure"><a id="CBBECFIJ"></a><a id="TDPPT385"></a>Figure 4-13 Monitoring Throughput</p>
<img width="653" height="226" src="img/through_per_sec.gif" alt="Description of Figure 4-13 follows" /><br />
<a id="sthref166" href="img_text/through_per_sec.htm">Description of "Figure 4-13 Monitoring Throughput"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Compare the peaks on the Throughput charts with the peaks on the Average Active Sessions chart. If the Average Active Sessions chart displays a large number of sessions waiting, indicating internal contention, but throughput is high, then the situation may be acceptable. The database is probably also performing efficiently if internal contention is low but throughput is high. However, if internal contention is high but throughput is low, then consider tuning the database.</p>
<p class="orderedlisttitle">To monitor throughput:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>In the instance activity chart, click <span class="bold">Throughput</span>.</p>
<p>The Throughput charts are shown with <span class="bold">Instance Throughput Rate</span> set to the default value of <span class="bold">Per Second</span>. You can select <span class="bold">Per Transaction</span> to show the throughput rate per transaction.</p>
<p>In the example in shown in <a href="#CBBECFIJ">Figure 4-13</a>, the number of transactions and physical reads per second went up around 12:30 p.m. and remained up until around 5 p.m.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBBIFFJE"></a><a id="TDPPT326"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring I/O</h3>
<p><a id="sthref168"></a><a id="sthref169"></a>The I/O charts show I/O statistics collected from all database clients. The I/O wait time for a database process represents the amount of time that the process could have been doing useful work if a pending I/O had completed. Oracle Database captures the I/O wait times for all important I/O components in a uniform fashion so that every I/O wait by any Oracle process can be derived from the I/O statistics.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBBDBEH"></a><a id="TDPPT387"></a>Figure 4-14 Monitoring I/O</p>
<img width="752" height="777" src="img/io_function.gif" alt="Description of Figure 4-14 follows" /><br />
<a id="sthref170" href="img_text/io_function.htm">Description of "Figure 4-14 Monitoring I/O"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The Latency for Synchronous Single Block Reads chart shows the total perceived <span class="bold">I/O latency</span> for a block read, which is the time difference between when an I/O request is submitted and when the first byte of the transfer arrives. Most systems are performing satisfactorily if latency is fewer than 10 milliseconds. This type of I/O request is the best indicator of I/O performance for the following reasons:</p>
<ul>
<li>
<p>Write operations may exhibit good performance because of write caches in storage.</p>
</li>
<li>
<p>Because multiblock I/O requests have varying sizes, they can take different amounts of time.</p>
</li>
<li>
<p>The latency of asynchronous I/O requests does not represent the full I/O wait time.</p>
</li>
</ul>
<p>The other charts shown depend on your selection for <span class="bold">I/O Breakdown</span>, as described in the following sections:</p>
<ul>
<li>
<p><a href="#CBBEFAAC">Monitoring I/O by Function</a></p>
</li>
<li>
<p><a href="#CBBIHDHB">Monitoring I/O by Type</a></p>
</li>
<li>
<p><a href="#CBBEBAAH">Monitoring I/O by Consumer Group</a></p>
</li>
</ul>
<a id="CBBEFAAC"></a><a id="TDPPT329"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Monitoring I/O by Function</h4>
<p>The I/O Function charts determine I/O usage level by application or job. The component-level statistics give a detailed view of the I/O bandwidth usage, which you can then use in scheduling jobs and I/O provisioning. The component-level statistics fall in the following categories:</p>
<ul>
<li>
<p>Background type</p>
<p>This category includes ARCH, LGWR, and DBWR.</p>
</li>
<li>
<p>Activity</p>
<p>This category includes XML DB, Streams AQ, Data Pump, Recovery, and RMAN.</p>
</li>
<li>
<p>I/O type</p>
<p>The category includes the following:</p>
<ul>
<li>
<p>Direct Write</p>
<p>This write is made by a foreground process and is not from the buffer cache.</p>
</li>
<li>
<p>Direct Read</p>
<p>This read is physical I/O from a data file that bypasses the buffer cache and reads the data block directly into process-private memory.</p>
</li>
<li>
<p>Buffer Cache Read</p>
</li>
</ul>
</li>
<li>
<p>Others</p>
<p>This category includes I/Os such as control file I/Os.</p>
</li>
</ul>
<p class="orderedlisttitle">To monitor I/O by function:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>In the instance activity chart, click <span class="bold">I/O</span>.</p>
<p>The I/O Megabytes per Second and I/O Requests per Second charts appear.</p>
</li>
<li>
<p>For <span class="bold">I/O Breakdown</span>, select <span class="bold">I/O Function</span>.</p>
<p>The I/O Megabytes per Second by I/O Function and I/O Requests per Second by I/O Function charts appear.</p>
<p>The example in <a href="#CBBBDBEH">Figure 4-14</a> shows that a significant amount of I/O is being performed by the log writer. The log writer activity peaked at approximately 500 I/O requests per second.</p>
</li>
<li>
<p>Click the largest block on the chart or its corresponding function in the legend to drill down to the function with the highest I/O rate.</p>
<p>The I/O Details page appears.</p>
<p>You can view real-time or historical data for details on I/O megabytes or I/O requests.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT1249" href="../../server.112/e40540/process.htm#CNCPT1249"><span class="italic">Oracle Database Concepts</span></a> to learn about database background processes such as ARCH, LGWR, and DBWR</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CBBIHDHB"></a><a id="TDPPT330"></a>
<div class="sect3">
<h4 class="sect3">Monitoring I/O by Type</h4>
<p>The I/O Type charts enable you to monitor I/O by the types of read and write operations. Small I/Os are requests smaller than 128 KB and are typically single database block I/O operations. Large I/Os are requests greater than or equal to 128 KB. Large I/Os are generated by database operations such as table/index scans, direct data loads, backups, restores, and archiving.</p>
<img width="698" height="592" src="img/perf_io_type.gif" alt="Description of perf_io_type.gif follows" /><br />
<a id="sthref172" href="img_text/perf_io_type.htm">Description of the illustration perf_io_type.gif</a><br />
<br />
<p>When optimizing for short transaction times, such as in an OLTP environment, monitor latency for small I/Os. High latencies typically indicate that the storage system is a bottleneck.</p>
<p>When optimizing for large queries, such as in a data warehouse, performance depends on the maximum throughput the storage system can achieve rather than the latency of the I/O requests. In this case, monitor the I/O megabytes per second rather than the synchronous single-block I/O latencies.</p>
<p class="orderedlisttitle">To monitor I/O by type:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>In the instance activity chart, click <span class="bold">I/O</span>.</p>
<p>The I/O Megabytes per Second and I/O Requests per Second charts appear.</p>
</li>
<li>
<p>For <span class="bold">I/O Breakdown</span>, select <span class="bold">I/O Type</span>.</p>
<p>The I/O Megabytes per Second by I/O Type and I/O Requests per Second by I/O Type charts appear.</p>
<p>In this example, the number of small writes per second increased to more than 600. These writes correspond to the log writer I/O requests shown in <a href="#CBBBDBEH">Figure 4-14</a>.</p>
</li>
<li>
<p>Click the largest block on the chart or its corresponding function in the legend to drill down to the function with the highest I/O rate.</p>
<p>The I/O Details page appears.</p>
<p>You can view real-time or historical data for details on I/O megabytes or I/O requests.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CBBEBAAH"></a><a id="TDPPT331"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Monitoring I/O by Consumer Group</h4>
<p>When Oracle Database Resource Manager is enabled, the database collects I/O statistics for all consumer groups that are part of the currently enabled resource plan. The Consumer Group charts enable you to monitor I/O by consumer group.</p>
<p>A resource plan specifies how the resources are to be distributed among various users (resource consumer groups). Resource consumer groups enable you to organize user sessions by resource requirements. Note that the <code>_ORACLE_BACKGROUND_GROUP_</code> consumer group contains I/O requests issued by background processes.</p>
<img width="741" height="592" src="img/perf_io_consum.gif" alt="Description of perf_io_consum.gif follows" /><br />
<a id="sthref174" href="img_text/perf_io_consum.htm">Description of the illustration perf_io_consum.gif</a><br />
<br />
<p class="orderedlisttitle">To monitor I/O requests by consumer group:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>In the instance activity chart, click <span class="bold">I/O</span>.</p>
<p>The I/O Megabytes per Second and I/O Requests per Second charts appear.</p>
</li>
<li>
<p>For <span class="bold">I/O Breakdown</span>, select <span class="bold">Consumer Group</span>.</p>
<p>The I/O Megabytes per Second by Consumer Group and I/O Requests per Second by Consumer Group charts appear.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CBBCBFFI"></a><a id="TDPPT327"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Parallel Execution</h3>
<p><a id="sthref176"></a><a id="sthref177"></a>The Parallel Execution charts show system metrics related to parallel queries. <span class="bold">Metrics</span> are statistical counts per unit. The unit could be a time measure, such as seconds, or per transaction, or session.</p>
<p>A parallel query divides the work of executing a SQL statement across multiple processes. The charts show parallel queries that were waiting for a particular wait event that accounted for the highest percentages of sampled session activity.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBEDCFA"></a><a id="TDPPT391"></a>Figure 4-15 Monitoring Parallel Execution</p>
<img width="751" height="453" src="img/pe.gif" alt="Description of Figure 4-15 follows" /><br />
<a id="sthref178" href="img_text/pe.htm">Description of "Figure 4-15 Monitoring Parallel Execution"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="orderedlisttitle">To monitor parallel execution:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>In the instance activity chart, click <span class="bold">Parallel Execution</span>.</p>
<p>The Parallel Execution charts appear.</p>
<p>Two pairs of charts are shown. The first pair shows the number of sessions on the y-axis, whereas the second pair shows the per second rate on the y-axis.</p>
<p>In the example shown in <a href="#CBBEDCFA">Figure 4-15</a>, query parallelization was active between 12:30 p.m. to 4 p.m.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CBBFBFAA"></a><a id="TDPPT328"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Services</h3>
<p><a id="sthref180"></a><a id="sthref181"></a>The Services charts show services waiting for the corresponding wait event during the time period shown. Services<a id="sthref182"></a> represent groups of applications with common attributes, service-level thresholds, and priorities. For example, the <code>SYS$USERS</code> service is the default service name used when a user session is established without explicitly identifying its service name. Only active services are shown.</p>
<div class="figure">
<p class="titleinfigure"><a id="CBBBCGBB"></a><a id="TDPPT393"></a>Figure 4-16 Monitoring Services</p>
<img width="754" height="287" src="img/services.gif" alt="Description of Figure 4-16 follows" /><br />
<a id="sthref183" href="img_text/services.htm">Description of "Figure 4-16 Monitoring Services"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="orderedlisttitle">To monitor services:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>In the instance activity chart, click <span class="bold">Services</span>.</p>
<p>The Services chart appears.</p>
<p>In <a href="#CBBBCGBB">Figure 4-16</a>, the <code>SYS$USERS</code> service has the greatest number of active sessions.</p>
</li>
<li>
<p>Click the largest block of color on the chart or its corresponding service in the legend to drill down to the service with the highest number of active sessions.</p>
<p>The Service page appears, showing the Activity subpage.</p>
<p>You can view real-time data showing the session load for all wait classes associated with the service.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDEBIAA"></a><a id="TDPPT041"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring Host Activity</h2>
<p>The Host chart on the Performance page displays utilization information about the system hosting the database<a id="sthref185"></a>.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDDFIGE"></a><a id="TDPPT395"></a>Figure 4-17 Monitoring Host Activity</p>
<img width="681" height="108" src="img/host.gif" alt="Description of Figure 4-17 follows" /><br />
<a id="sthref186" href="img_text/host.htm">Description of "Figure 4-17 Monitoring Host Activity"</a><br />
<br /></div>
<!-- class="figure" -->
<p>To determine if the host system has enough resources available to run the database, establish appropriate expectations for the amount of CPU, memory, and disk resources that your system should be using. You can then verify that the database is not consuming too many of these resources.</p>
<p class="orderedlisttitle">To view details about CPU, memory, and disk utilization:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, under Host CPU, click the <span class="bold">Load</span> link.</p>
<img width="173" height="190" src="img/host_cpu.gif" alt="Description of host_cpu.gif follows" /><br />
<a id="sthref188" href="img_text/host_cpu.htm">Description of the illustration host_cpu.gif</a><br />
<br />
<p>The Host page appears, showing the Performance subpage.</p>
<div class="figure">
<p class="titleinfigure"><a id="TDPPT495"></a><a id="sthref189"></a>Figure 4-18 Performance Summary</p>
<img width="947" height="549" src="img/perf_summ.gif" alt="Description of Figure 4-18 follows" /><br />
<a id="sthref190" href="img_text/perf_summ.htm">Description of "Figure 4-18 Performance Summary"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The Performance Summary view is shown by default. The Performance Summary view displays metric values for CPU utilization<a id="sthref191"></a>, memory utilization<a id="sthref192"></a>, disk I/O utilization<a id="sthref193"></a>, and the top 10 processes ordered by both CPU and memory utilization.</p>
</li>
<li>
<p>Determine whether sufficient resources are available and whether your system is using too many resources.</p>
<p>For example, determine the amount of CPU, memory, and disk resources the database uses in the following scenarios:</p>
<ul>
<li>
<p>When your system is idle, or when little database and nondatabase activity exists</p>
</li>
<li>
<p>At average workloads</p>
</li>
<li>
<p>At peak workloads</p>
</li>
</ul>
<p>Workload is an important factor when evaluating the level of resource utilization for your system. During peak workload hours, 90 percent utilization of a resource, such as a CPU with 10 percent idle and waiting time, can be acceptable. However, if your system shows high utilization at normal workload, then there is no room for additional workload.</p>
<p>Perform the following tasks to monitor the host activity for your database:</p>
<ul>
<li>
<p><a href="#CHDFEGDA">Monitoring CPU Utilization</a></p>
</li>
<li>
<p><a href="#CHDFAGCD">Monitoring Memory Utilization</a></p>
</li>
<li>
<p><a href="#CHDCCFDG">Monitoring Disk I/O Utilization</a></p>
</li>
</ul>
</li>
<li>
<p>Set the appropriate threshold values for the performance metrics so the system can automatically generate alerts when these thresholds are exceeded.</p>
<p>For information about setting metric thresholds, see <a href="tdppt_alerts.htm#BEIJHEAI">"Setting Metric Thresholds for Performance Alerts"</a>.</p>
</li>
</ol>
<a id="CHDFEGDA"></a><a id="TDPPT042"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring CPU Utilization</h3>
<p>To address CPU problems, first establish appropriate expectations for the amount of CPU resources your system should be using. You can then determine whether sufficient CPU resources are available and recognize when your system is consuming too many resources. This section describes how to monitor CPU utilization.</p>
<p class="orderedlisttitle">To monitor CPU utilization<a id="sthref195"></a>:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, under Host CPU, click the <span class="bold">Load</span> link.</p>
<p>The Host page appears, showing the Performance subpage.</p>
</li>
<li>
<p>Select <span class="bold">CPU Details</span> from the View list.</p>
<p>The CPU Details view appears.</p>
<p>This view contains statistics about CPU utilization, I/O wait times, and load gathered over the last hour. The top 10 processes are listed based on CPU utilization.</p>
</li>
<li>
<p>Verify the current CPU utilization using the CPU Utilization chart.</p>
<p>The CPU Utilization chart shows CPU utilization over the last hour. The current value is displayed below the chart. During standard workload hours, the value should not exceed the critical threshold.</p>
</li>
<li>
<p>Click <span class="bold">CPU Utilization</span>.</p>
<p>The CPU Utilization page appears.</p>
<p>This page contains CPU utilization statistics and related alerts generated over the last 24 hours.</p>
<p>In the following example, the CPU utilization has suddenly spiked from approximately 6% to 99.86%, which is above the warning threshold of 80%.</p>
<img width="824" height="359" src="img/cpu_util.gif" alt="Description of cpu_util.gif follows" /><br />
<a id="sthref196" href="img_text/cpu_util.htm">Description of the illustration cpu_util.gif</a><br />
<br />
<p>If you notice an unexpected spike in this value that is sustained through normal workload hours, then the CPU performance problem should be investigated.</p>
</li>
<li>
<p>Verify the current CPU I/O wait time using the CPU I/O Wait chart.</p>
<p>The CPU I/O Wait chart shows CPU I/O wait time over the last hour. The current value is displayed below the chart. During normal workload hours, the value of CPU I/O wait should not exceed the warning threshold.</p>
<p>CPU I/O wait<a id="sthref197"></a> represents the average number of jobs waiting for I/O during an interval.</p>
</li>
<li>
<p>Click <span class="bold">CPU I/O Wait</span>.</p>
<p>The CPU in I/O Wait page appears.</p>
<p>This page contains CPU I/O wait statistics and related alerts generated over the last 24 hours.</p>
<p>If you notice an unexpected increase in this value that is sustained through standard workload hours, then a CPU performance problem may exist.</p>
</li>
<li>
<p>Verify the current CPU load using the CPU Load chart.</p>
<p>The CPU Load chart shows the CPU load over the last hour. The current value is displayed below the chart. During standard workload hours, the value of CPU load should not exceed the warning threshold.</p>
<p>CPU load<a id="sthref198"></a> represents the average number of processes waiting to be scheduled for CPU resources in the previous minute, or the level of CPU contention time over time.</p>
</li>
<li>
<p>Click <span class="bold">CPU Load</span>.</p>
<p>The Run Queue Length page appears.</p>
<p>This page contains CPU load statistics and related alerts generated over the last 24 hours.</p>
<p>If you notice an unexpected spike in this value that is sustained through normal workload hours, then a CPU performance problem might exist.</p>
</li>
<li>
<p>Return to the CPU Details view of the Host Performance subpage and review the Top 10 Processes table.</p>
<p>If a process is consuming too much of the CPU utilization percentage, then this process should be investigated.</p>
<p>In the following example, two database processes are consuming 87.6% of CPU utilization. Therefore, the database is the likely source of a potential CPU performance problem and should be investigated.</p>
<img width="727" height="149" src="img/top_10_proc.gif" alt="Description of top_10_proc.gif follows" /><br />
<a id="sthref199" href="img_text/top_10_proc.htm">Description of the illustration top_10_proc.gif</a><br />
<br /></li>
<li>
<p>If a CPU performance problem<a id="sthref200"></a><a id="sthref201"></a> is identified, then you can try to resolve the issue by doing the following:</p>
<ul>
<li>
<p>Use Oracle <a id="sthref202"></a>Database Resource Manager to reduce the impact of peak-load-use patterns by prioritizing CPU resource allocation</p>
</li>
<li>
<p>Avoid running too many processes that use a large amount of CPU</p>
</li>
<li>
<p>Increase hardware capacity, including changing the system architecture</p>
</li>
</ul>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink PFGRF016" href="../../server.112/e41573/os.htm#PFGRF016"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for information about resolving CPU issues</p>
</li>
<li>
<p><a class="olink ADMIN027" href="../../server.112/e25494/dbrm.htm#ADMIN027"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about Oracle Database Resource Manager</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDFAGCD"></a><a id="TDPPT043"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Memory Utilization</h3>
<p>Operating system performance issues commonly involve process management, memory management, and scheduling. This section describes how to monitor memory utilization and identify problems such as paging and swapping.</p>
<p class="orderedlisttitle">To monitor memory utilization<a id="sthref204"></a>:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, under Host CPU, click the <span class="bold">Load</span> link.</p>
<p>The Host page appears, showing the Performance subpage.</p>
</li>
<li>
<p>Select <span class="bold">Memory Details</span> from the View list.</p>
<p>The Memory Details view of the Performance subpage appears.</p>
<p>This view contains statistics about memory utilization, page scan rates, and swap utilization gathered over the last hour. The top 10 processes are also listed ordered by memory utilization.</p>
<img width="945" height="269" src="img/mem_details.gif" alt="Description of mem_details.gif follows" /><br />
<a id="sthref205" href="img_text/mem_details.htm">Description of the illustration mem_details.gif</a><br />
<br /></li>
<li>
<p>Verify the current memory page scan rate using the Memory Page Scan Rate chart.</p>
<p>The current value of the memory page scan rate is displayed below the chart. On UNIX and Linux, this value represents the number of pages scanned per second. On Microsoft Windows, this value represents the rate at which pages are read from or written to disk to resolve hard page faults. This value is a primary indicator of the kinds of faults that may be causing systemwide delays.</p>
</li>
<li>
<p>Click <span class="bold">Memory Scan Rate</span>.</p>
<p>The Memory Page Scan Rate page appears.</p>
<p>This page contains memory page scan rate statistics and related alerts over the last 24 hours.</p>
<p>If you notice an unexpected increase in this value that is sustained through standard workload hours, then a memory performance problem might exist.</p>
</li>
<li>
<p>Verify the current memory utilization using the Memory Utilization chart.</p>
<p>The Memory Utilization chart shows how much memory is being used. The current value of memory utilization is displayed below the chart. During standard workload hours, the value should not exceed the warning threshold (shown in yellow).</p>
</li>
<li>
<p>Click <span class="bold">Memory Utilization</span>.</p>
<p>The Memory Utilization page appears.</p>
<p>This page contains memory utilization statistics and related alerts generated over the last 24 hours.</p>
<img width="843" height="442" src="img/mem_util.gif" alt="Description of mem_util.gif follows" /><br />
<a id="sthref206" href="img_text/mem_util.htm">Description of the illustration mem_util.gif</a><br />
<br />
<p>In this example, memory utilization never exceeded 60%, so a warning was not generated.</p>
<p>If you notice an unexpected spike in this value that is sustained through normal workload hours, then a memory performance problem might exist.</p>
</li>
<li>
<p>Verify current swap utilization using the Swap Utilization chart.</p>
<p>The Swap Utilization<a id="sthref207"></a> chart shows how much swap space is being used. The current value of swap utilization is displayed below the chart. During normal workload hours, the value should not exceed the warning threshold.</p>
</li>
<li>
<p>Click <span class="bold">Swap Utilization</span>.</p>
<p>The Swap Utilization page appears.</p>
<p>This page contains swap utilization statistics and related alerts generated over the last 24 hours.</p>
<p>If you notice an unexpected spike in this value that is sustained through normal workload hours, then a memory performance problem might exist.</p>
</li>
<li>
<p>Return to the Memory Details view of the Host Performance subpage and review the top processes in the Top 10 Processes (ordered by Memory) table.</p>
<p>If a process is taking up too much memory, then this process should be investigated.</p>
</li>
<li>
<p>If a memory performance problem<a id="sthref208"></a><a id="sthref209"></a> is identified, you can attempt to resolve the issue by doing the following:</p>
<ul>
<li>
<p>Use Automatic Memory Management to automatically manage and distribute memory between the System Global Area (SGA) and the aggregate program global area (PGA aggregate).</p>
</li>
<li>
<p>Use the Memory Advisor to set SGA and PGA memory target values.</p>
</li>
<li>
<p>Use Automatic PGA Management to manage SQL memory execution.</p>
</li>
<li>
<p>Avoid running too many processes that consume large amounts of memory.</p>
</li>
<li>
<p>Reduce paging or swapping.</p>
</li>
<li>
<p>Reduce the number of open cursors and hard parsing with cursor sharing.</p>
</li>
</ul>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11011" href="../../server.112/e25494/memory.htm#ADMIN11011"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about using Automatic Memory Management</p>
</li>
<li>
<p><a class="olink ADMQS1034" href="../../server.112/e10897/montune.htm#ADMQS1034"><span class="italic">Oracle Database 2 Day DBA</span></a> for information about using the Memory Advisor</p>
</li>
<li>
<p><a class="olink PFGRF014" href="../../server.112/e41573/memory.htm#PFGRF014"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for information about resolving memory issues</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDCCFDG"></a><a id="TDPPT044"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Disk I/O Utilization</h3>
<p>Because the database resides on a set of disks, the performance of the I/O subsystem is very important to database performance. Important disk statistics include the disk I/Os per second and the length of the service times. These statistics show if the disk is performing optimally or if the storage system is being overworked. This section describes how to monitor disk I/O utilization.</p>
<p class="orderedlisttitle">To monitor disk I/O utilization<a id="sthref211"></a>:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, under Host CPU, click the <span class="bold">Load</span> link.</p>
<p>The Host page appears, showing the Performance subpage.</p>
</li>
<li>
<p>Select <span class="bold">Disk Details</span> from the View list.</p>
<p>The Disk Details view appears.</p>
<p>This view contains disk I/O utilization and service time statistics gathered over the last hour, and the top disk devices ordered by the percentage of time that they were in use.</p>
<img width="761" height="425" src="img/disk_details.gif" alt="Description of disk_details.gif follows" /><br />
<a id="sthref212" href="img_text/disk_details.htm">Description of the illustration disk_details.gif</a><br />
<br /></li>
<li>
<p>Verify the current disk I/O utilization using the Disk I/O Utilization chart.</p>
<p>The Disk I/O Utilization chart shows how many disk I/Os are being performed per second. The current value for total I/Os per second is displayed below the chart.</p>
</li>
<li>
<p>Click <span class="bold">Total I/Os per Second</span>.</p>
<p>The Total Disk I/O Per Second page appears.</p>
<p>This page contains disk utilization statistics and related alerts generated over the last 24 hours.</p>
<p>If you notice an unexpected spike in this value that is sustained through standard workload hours, then a disk I/O performance problem might exist and should be investigated.</p>
</li>
<li>
<p>Verify the current I/O service time using the Longest I/O Service Time chart.</p>
<p>The Longest I/O Service Time chart shows the longest service time for disk I/Os in milliseconds. The current value for longest I/O service time is displayed below the chart.</p>
</li>
<li>
<p>Click <span class="bold">Longest I/O Service Time</span>.</p>
<p>The Longest Service Time page appears.</p>
<p>This page contains I/O service time statistics and related alerts generated over the last 24 hours.</p>
<p>If you notice an unexpected spike in this value that is sustained through normal workload hours, then a disk I/O performance problem might exist and should be investigated.</p>
</li>
<li>
<p>On the Disk Details page, verify the disk devices in the Top Disk Devices table.</p>
<p>If a particular disk is busy a high percentage of the time, then this disk should be investigated.</p>
<p>In this example, the drives that host Oracle Database (xvda and xvda1) are only busy about 1.41 percent of the time, so no disk performance problem appears to exist.</p>
<img width="732" height="94" src="img/top_disk_devices.gif" alt="Description of top_disk_devices.gif follows" /><br />
<a id="sthref213" href="img_text/top_disk_devices.htm">Description of the illustration top_disk_devices.gif</a><br />
<br /></li>
<li>
<p>If a disk I/O performance problem<a id="sthref214"></a><a id="sthref215"></a> is identified, you can attempt to resolve the problem by doing the following:</p>
<ul>
<li>
<p>Use Oracle Automatic Storage Management (Oracle ASM) to manage database storage.</p>
</li>
<li>
<p>Stripe everything across every disk to distribute I/O.</p>
</li>
<li>
<p>Move files such as archived redo logs and online redo logs to separate disks.</p>
</li>
<li>
<p>Store required data in memory to reduce the number of physical I/Os.</p>
</li>
</ul>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink PFGRF015" href="../../server.112/e41573/iodesign.htm#PFGRF015"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for information about resolving disk I/O issues</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CBBIHFDF"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Determining the Cause of Spikes in Database Activity</h2>
<p><a id="sthref216"></a>If you see a spike in database activity in the Performance page, you can access the ASH Analytics page to find out which sessions are consuming the most database time. This page provides a stacked chart to help you visualize the active session activity for several dimensions, such as Event, Activity Class, Module/Action, Session, Instance ID, and PL/SQL function. You can drill down into specific members of a dimension (vertical zooming), and zoom in and out of any time period (horizontal zooming).</p>
<ol>
<li>
<p>From the Performance menu in the database instance, select <span class="bold">ASH Analytics</span>.</p>
</li>
<li>
<p>View a macro perspective of top activity during a selected time period by dragging the shaded area in the top chart to the desired time period.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
When you move your mouse over the shaded block area, two user controls on both ends of the slider appear that enable you to select the desired time period.
<p>You can select a time period within the default setting of one hour, or you can use the selector buttons to display time periods of one day, one week, or one month. You can also use the Calendar and Custom buttons to display a time period other than one of the preset choices.</p>
</div>
</li>
<li>
<p>View a micro perspective of your selected time period by viewing the Activity chart on the page. By default, the chart shows workload activity breakdown values for wait classes.</p>
</li>
<li>
<p>Investigate the impact by viewing detailed statistics for the top activity sessions that are adversely affecting the system.</p>
<ol>
<li>
<p>Click the largest spike in the chart or the corresponding wait class in the legend beside the chart. The viewer now filters out everything in the chart except for the wait class of interest.</p>
<p>For instance, if the chart shows that the Concurrency wait class has the biggest spike, click the chart area of the legend for Concurrency. The viewer refreshes the chart and now only shows the Concurrency value and displays a Wait Class: Concurrency icon in the Filters bar.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
You can create an unlimited number of filters.</div>
</li>
<li>
<p>Expand the <span class="bold">Activity</span> icon, then select <span class="bold">Top Dimensions</span> from the menu, which provides a list of common processes of interest. The chart refreshes in response to your selection, displaying values for the particular category you selected.</p>
<p>For instance, if you create a filter for Concurrency as described above, select Top Dimensions from the menu, then User Session, the chart shows user sessions only for Concurrency.</p>
</li>
</ol>
</li>
<li>
<p><span class="italic">Optional:</span> Use the Load Map for a graphical view of system activity.</p>
<p>The Load Map is useful for viewing activity in a single- or multi-dimensional layout when you are not interested in seeing how activity has changed over time within the selected period.</p>
</li>
<li>
<p><span class="italic">Optional:</span> Click <span class="bold">Save</span> to save the current page view as an HTML file for offline reference. When you click Save, a pop-up window appears, and you can specify where you want to save the report. This action creates an Enterprise Manager Active Report covering all data currently gathered as part of the analysis. You can use this later to conduct a more thorough postmortem analysis, for instance. You can view the report without Enterprise Manager or database connectivity.</p>
<p>You can also click <span class="bold">Mail</span> and specify an email address to send the page as an attachment.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CBBIGBHH"></a><a id="TDPPT313"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Customizing the Database Performance Page</h2>
<p><a id="sthref217"></a><a id="sthref218"></a>You can customize the Performance page so that it specifically addresses your requirements. As explained in <a href="#CHDBEHAG">"Monitoring Instance Activity"</a>, you can specify which charts you want to appear by default in the Performance page, and how you want them to appear. You can also decide whether to include baseline values in the Throughput and Services charts.</p>
<p>Enterprise Manager stores persistent customization information for each user in the repository. Enterprise Manager retrieves the customization data when you access the Performance page and caches it for the remainder of the browser session until you change the settings.</p>
<p class="orderedlisttitle">To customize the Performance page:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>On the Performance page, click <span class="bold">Settings</span>.</p>
<p>The Performance Page Settings page appears.</p>
<img width="662" height="302" src="img/perf_page_sett.gif" alt="Description of perf_page_sett.gif follows" /><br />
<a id="sthref220" href="img_text/perf_page_sett.htm">Description of the illustration perf_page_sett.gif</a><br />
<br /></li>
<li>
<p>In the Detailed Chart Settings section, choose the defaults for display of the instance activity charts. Complete the following steps:</p>
<ol>
<li>
<p>In <span class="bold">Default View</span>, select the instance activity chart to appear by default in the Average Active Session section.</p>
<p>See <a href="#CHDBEHAG">"Monitoring Instance Activity"</a> for a description of the Throughput, I/O, Parallel Execution, and Services charts.</p>
</li>
<li>
<p>In <span class="bold">Throughput Chart Settings</span>, select <span class="bold">Per Second</span> or <span class="bold">Per Transaction</span> as the default instance throughput rate to be displayed in the Throughput chart.</p>
<p>See <a href="#CBBIFFHE">"Monitoring Throughput"</a> to learn how to use the Throughput charts.</p>
</li>
<li>
<p>In <span class="bold">I/O Chart Settings</span>, select the default I/O breakdown to be displayed in the I/O chart.</p>
<p>See <a href="#CBBIFFJE">"Monitoring I/O"</a> to learn how to use the I/O charts.</p>
</li>
</ol>
</li>
<li>
<p>In the Baseline Display section, choose how AWR baselines will be displayed in the performance charts. Do one of the following:</p>
<ul>
<li>
<p>Select <span class="bold">Do not show the baseline values</span> to prevent baselines from appearing.</p>
</li>
<li>
<p>Select <span class="bold">Show the 99th percentile line using the system moving window baseline</span> to specify a percentile to display for the Throughput and Services charts.</p>
</li>
<li>
<p>Select <span class="bold">Show the 99th percentile line using a static baseline with computed statistics</span> and then select a baseline name from the Baseline Name list.</p>
<p>You can select only baselines that have undergone schedule statistics computation, as described in <a href="tdppt_degrade.htm#CACDAEHC">"Computing Threshold Statistics for Baselines"</a>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Performance page appears.</p>
<p>The charts are now displayed according to your customized settings.</p>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1738">
<tr>
<td class="cellalignment1745">
<table class="cellalignment1743">
<tr>
<td class="cellalignment1742"><a href="tdppt_auto.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1742"><a href="tdppt_alerts.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1747">
<table class="cellalignment1741">
<tr>
<td class="cellalignment1742"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1742"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1742"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1742"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1742"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1742"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
