<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Identifying High-Load SQL Statements</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 040" />
<meta name="dcterms.created" content="2011-11-21T13:27:43Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Performance Tuning Guide" />
<meta name="dcterms.identifier" content="E10822-04" />
<meta name="dcterms.isVersionOf" content="TDPPT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdppt_partfour.htm" title="Previous" type="text/html" />
<link rel="Next" href="tdppt_sqltune.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10822.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/21</span> <!-- End Header --><a id="BABFHBFJ"></a><a id="TDPPT140"></a>
<h1 class="chapter"><span class="secnum">9</span> Identifying High-Load SQL Statements</h1>
<p>High-load SQL statements<a id="sthref337"></a> may consume a disproportionate amount of system resources. These SQL statements often greatly affect database performance and must be tuned to optimize their performance and resource consumption. Even when a database is properly tuned, inefficient SQL can significantly degrade performance.</p>
<p>Identifying high-load SQL statements is an important SQL tuning activity that you must perform regularly. Automatic Database Diagnostic Monitor (ADDM) automates this task by proactively identifying potential high-load SQL statements. Additionally, you can use Oracle Enterprise Manager (Enterprise Manager) to identify high-load SQL statements that require further investigation. After you have identified the high-load SQL statements, you can tune them with SQL Tuning Advisor and SQL Access Advisor.</p>
<p>This chapter describes how to identify high-load SQL statements and contains the following sections:</p>
<ul>
<li>
<p><a href="#BABFJJCJ">Identification of High-Load SQL Statements Using ADDM Findings</a></p>
</li>
<li>
<p><a href="#BABECDJG">Identifying High-Load SQL Statements Using Top SQL</a></p>
</li>
</ul>
<a id="BABFJJCJ"></a><a id="TDPPT141"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Identification of High-Load SQL Statements Using ADDM Findings</h2>
<p>By default, ADDM runs proactively once every hour. It analyzes key statistics gathered by the Automatic Workload Repository (AWR) over the last hour to identify any performance problems, including high-load SQL statements<a id="sthref338"></a><a id="sthref339"></a>. When the system finds performance problems, it displays them as ADDM findings in the Automatic Database Diagnostic Monitor (ADDM) page.</p>
<p>ADDM provides recommendations with each ADDM finding. When a high-load SQL statement is identified, ADDM gives recommendations, such as running SQL Tuning Advisor on the SQL statement. You can begin tuning SQL statements as described in <a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_auto.htm#CHDJBEGD">"Overview of Automatic Database Diagnostic Monitor"</a></p>
</li>
<li>
<p><a href="tdppt_auto.htm#CHDFAFIF">"Interpretation of Automatic Database Diagnostic Monitor Findings"</a></p>
</li>
<li>
<p><a href="tdppt_auto.htm#CEGFBDIJ">"Implementing Automatic Database Diagnostic Monitor Recommendations"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABECDJG"></a><a id="TDPPT142"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Identifying High-Load SQL Statements Using Top SQL</h2>
<p>ADDM automatically identifies high-load SQL statements that may be causing systemwide performance degradation. Under normal circumstances, manual identification of high-load SQL statements is not necessary. In some cases, however, you may want to monitor SQL statements at a more granular level. The Top SQL section<a id="sthref340"></a><a id="sthref341"></a> of the Top Activity page in Enterprise Manager enables you to identify high-load SQL statements for any 5-minute interval.</p>
<p><a href="#CHDEDBJE">Figure 9-1</a> shows an example of the Top Activity page.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDEDBJE"></a><a id="TDPPT430"></a>Figure 9-1 Top Activity Page</p>
<img width="926" height="822" src="img/top_activity.gif" alt="Description of Figure 9-1 follows" /><br />
<a id="sthref342" href="img_text/top_activity.htm">Description of "Figure 9-1 Top Activity Page"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="orderedlisttitle">To access the Top Activity page:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>Under Additional Monitoring Links, click <span class="bold">Top Activity</span>.</p>
<p>The Top Activity page<a id="sthref344"></a> appears.</p>
<p>This page shows a 1-hour time line of the top activity running on the database. SQL statements that are using the highest percentage of database activity are listed under the Top SQL section, and are displayed in 5-minute intervals.</p>
</li>
<li>
<p>To move the 5-minute interval, drag the shaded box to the desired time.</p>
<p>The information contained in the Top SQL section will be automatically updated to reflect the selected time period. Use this page to identify high-load SQL statements that may be causing performance problems.</p>
</li>
<li>
<p>To monitor SQL statements for a longer duration than one hour, select <span class="bold">Historical</span> from the View Data list.</p>
<p>In Historical view, you can view the top SQL statements for the duration defined by the AWR retention period.</p>
</li>
</ol>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDHJBGI">Viewing SQL Statements by Wait Class</a></p>
</li>
<li>
<p><a href="#CHDCAJCB">Viewing Details of SQL Statements</a></p>
</li>
</ul>
<a id="CHDHJBGI"></a><a id="TDPPT143"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing SQL Statements by Wait Class</h3>
<p>The SQL statements that appear in the Top SQL section of the Top Activity page<a id="sthref345"></a><a id="sthref346"></a><a id="sthref347"></a> are categorized into various wait classes, based on their corresponding class as described in the legend on the Top Activity chart.</p>
<p>To view the SQL statements for a particular wait class, click the block of color on the chart for the wait class, or its corresponding wait class in the legend. The Active Sessions Working page for the selected wait class appears, and the Top SQL section will be automatically updated to show only the SQL statements for that wait class.</p>
<p>The example in <a href="#BJEJFEBG">Figure 9-2</a> shows the Active Sessions Working page for the CPU Used wait class. Only SQL statements that are consuming the most CPU time are displayed in the Top Working SQL section.</p>
<div class="figure">
<p class="titleinfigure"><a id="BJEJFEBG"></a><a id="TDPPT432"></a>Figure 9-2 Viewing SQL Statements by Wait Class</p>
<img width="926" height="744" src="img/active_sessions_working_cpu.gif" alt="Description of Figure 9-2 follows" /><br />
<a id="sthref348" href="img_text/active_sessions_working_cpu.htm">Description of "Figure 9-2 Viewing SQL Statements by Wait Class"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_realtime.htm#CHDEIBAB">"Monitoring User Activity"</a> for information about using the Active Sessions Working page</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDCAJCB"></a><a id="TDPPT144"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Details of SQL Statements</h3>
<p>The Top SQL section of the Top Activity page displays the SQL statements<a id="sthref349"></a> executed within the selected 5-minute interval in descending order based on their resource consumption. The SQL statement at the top of this table represents the most resource-intensive SQL statement during that time period, followed by the second most resource-intensive SQL statement, and so on.</p>
<p>In the example shown in <a href="#BJEJFEBG">Figure 9-2, "Viewing SQL Statements by Wait Class"</a>, the <code>SELECT</code> statement with the SQL ID <code>axabnfyfp4r3p</code> is consuming 12.14% of database activity and should be investigated.</p>
<p class="orderedlisttitle">To view details of SQL statements:&nbsp;</p>
<ol>
<li>
<p>From the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page appears.</p>
</li>
<li>
<p>Under Additional Monitoring Links, click <span class="bold">Top Activity</span>.</p>
<p>The Top Activity page<a id="sthref351"></a> appears.</p>
</li>
<li>
<p>In the Top SQL section, click the <span class="bold">SQL ID</span> link of the SQL statement.</p>
<p>The SQL Details page for the selected SQL statement appears.</p>
</li>
<li>
<p>To view SQL details for a longer period, select <span class="bold">Historical</span> from the View Data list.</p>
<img width="283" height="101" src="img/sql_details_historical.gif" alt="Description of sql_details_historical.gif follows" /><br />
<a id="sthref352" href="img_text/sql_details_historical.htm">Description of the illustration sql_details_historical.gif</a><br />
<br />
<p>You can now view SQL details in the past, up to the duration defined by the AWR retention period.</p>
</li>
<li>
<p>In the Text section, review the SQL text for the SQL statement.</p>
<p>The Text section<a id="sthref353"></a> contains the SQL text for the selected SQL statement. Note that if only part of the SQL statement is displayed, then a plus sign (<code>+</code>) icon appears next to the Text heading. To view the SQL text for the entire SQL statement, click the plus sign (<span class="bold">+</span>) icon.</p>
<p>In this example, the text of SQL statement <code>batd1pgpg49zf</code> is as follows:</p>
<pre>
SELECT E.LAST_NAME, J.JOB_TITLE, D.DEPARTMENT_NAME
FROM   HR.EMPLOYEES E, HR.DEPARTMENTS D, HR.JOBS J
WHERE  E.DEPARTMENT_ID = D.DEPARTMENT_ID 
AND    E.JOB_ID = J.JOB_ID 
AND    E.LAST_NAME LIKE 'A%'
</pre></li>
<li>
<p>In the Plan Hash Values list in the Details section, do one of the following:</p>
<ul>
<li>
<p>If the SQL statement has multiple plans, then select <span class="bold">All</span> to show SQL details for all plans.</p>
</li>
<li>
<p>Select a particular plan to display SQL details for this plan only.</p>
</li>
</ul>
</li>
<li>
<p>View the subpages available on the SQL Details page to display additional information about the SQL statement, as described in the following sections:</p>
<ul>
<li>
<p><a href="#CHDGCGBD">Viewing SQL Statistics</a></p>
</li>
<li>
<p><a href="#CHDHAFDH">Viewing Session Activity</a></p>
</li>
<li>
<p><a href="#CHDJIHHD">Viewing the SQL Execution Plan</a></p>
</li>
<li>
<p><a href="#CHDEBJCH">Viewing the Plan Control</a></p>
</li>
<li>
<p><a href="#CHDCEBDH">Viewing the Tuning History</a></p>
</li>
</ul>
</li>
<li>
<p>If the SQL statement is a high-load SQL statement, then tune it as described in <a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a>.</p>
</li>
</ol>
<a id="CHDGCGBD"></a><a id="TDPPT497"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing SQL Statistics</h4>
<p>The <a id="sthref354"></a><a id="sthref355"></a>Statistics subpage of the SQL Details page displays statistical information about the SQL statement.</p>
<p class="orderedlisttitle">To view statistics for the SQL statement:&nbsp;</p>
<ol>
<li>
<p>On the SQL Details page, under Details, click <span class="bold">Statistics</span>.</p>
<p>The SQL Details page appears, showing the Statistics subpage.</p>
<img width="826" height="632" src="img/sql_details_statistics.gif" alt="Description of sql_details_statistics.gif follows" /><br />
<a id="sthref357" href="img_text/sql_details_statistics.htm">Description of the illustration sql_details_statistics.gif</a><br />
<br /></li>
<li>
<p>View the statistics for the SQL statement, as described in the following sections:</p>
<ul>
<li>
<p><a href="#CHDJBBDE">SQL Statistics Summary</a></p>
</li>
<li>
<p><a href="#CHDDABEG">General SQL Statistics</a></p>
</li>
<li>
<p><a href="#CHDIEHBA">Activity by Wait Statistics and Activity by Time Statistics</a></p>
</li>
<li>
<p><a href="#CHDJHACC">Elapsed Time Breakdown Statistics</a></p>
</li>
<li>
<p><a href="#CHDBIHDD">Shared Cursors Statistics and Execution Statistics</a></p>
</li>
<li>
<p><a href="#CHDFCEFB">Other SQL Statistics</a></p>
</li>
</ul>
</li>
</ol>
<a id="CHDJBBDE"></a><a id="TDPPT499"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">SQL Statistics Summary</h5>
<p>The Summary section displays SQL statistics and activity on a chart.</p>
<p>In the Real Time view, the Active Sessions chart shows the average number of active sessions executing the SQL statement in the last hour. If the SQL statement has multiple plans and <span class="bold">All</span> is selected in the Plan Hash Value list, then the chart will display each plan in different colors, enabling you to easily spot if the plan changed and whether this may be the cause of the performance degradation. Alternatively, you can select a particular plan to display that plan only.</p>
<p>In the Historical view, the chart shows execution statistics in different dimensions. To view execution statistics, select the desired dimension from the View list:</p>
<ul>
<li>
<p>Elapsed time per execution</p>
</li>
<li>
<p>Executions per hour</p>
</li>
<li>
<p>Disk reads per execution</p>
</li>
<li>
<p>Buffer gets per execution</p>
</li>
</ul>
<p>This technique enables you to track the response time of the SQL statement using different dimensions. You can determine whether the performance of the SQL statement has degraded based on the dimension selected.</p>
<p>To view statistics of the SQL statement for a particular time interval, click the snapshot icon below the chart. You can also use the arrows to scroll the chart to locate a desired snapshot.</p>
</div>
<!-- class="sect4" -->
<a id="CHDDABEG"></a><a id="TDPPT500"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">General SQL Statistics</h5>
<p>The General section enables you to identify the origin of the SQL statement by listing the following information:</p>
<ul>
<li>
<p>Module, if specified using the <code>DBMS_APPLICATION_INFO</code> package</p>
</li>
<li>
<p>Action, if specified using the <code>DBMS_APPLICATION_INFO</code> package</p>
</li>
<li>
<p>Parsing schema, or the database account used to execute the SQL statement</p>
</li>
<li>
<p>PL/SQL source, or the code line if the SQL statement is part of a PL/SQL program</p>
</li>
</ul>
</div>
<!-- class="sect4" -->
<a id="CHDIEHBA"></a><a id="TDPPT501"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Activity by Wait Statistics and Activity by Time Statistics</h5>
<p>The Activity by Wait and Activity by Time sections enable you to identify how the SQL statement spent most of its time. The Activity by Wait section contains a graphical representation of how much elapsed time is consumed by CPU and by remaining waits. The Activity by Time section breaks out the total elapsed time into CPU time and wait time by seconds.</p>
</div>
<!-- class="sect4" -->
<a id="CHDJHACC"></a><a id="TDPPT502"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Elapsed Time Breakdown Statistics</h5>
<p>The Elapsed Time Breakdown section enables you to identify if the SQL statement itself is consuming a lot of time, or if the total elapsed time is inflated due to the amount of time the originating program or application spent with the PL/SQL or Java engine. If the PL/SQL time or Java time makes up a significant portion of the elapsed time, then there may be minimal benefit gained by tuning the SQL statement. Instead, you should examine the application to determine how the PL/SQL time or Java time can be reduced.</p>
</div>
<!-- class="sect4" -->
<a id="CHDBIHDD"></a><a id="TDPPT503"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Shared Cursors Statistics and Execution Statistics</h5>
<p>The Shared Cursors Statistics and Execution Statistics sections provide information about the efficiency of various stages of the SQL execution process.</p>
</div>
<!-- class="sect4" -->
<a id="CHDFCEFB"></a><a id="TDPPT504"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Other SQL Statistics</h5>
<p>The Other Statistics section provides additional information about the SQL statement, such as average persistent and run-time memory.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CHDHAFDH"></a><a id="TDPPT505"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Session Activity</h4>
<p>The Activity subpage<a id="sthref358"></a><a id="sthref359"></a> contains a graphical representation of the session activity.</p>
<p class="orderedlisttitle">To view session activity for the SQL statement:&nbsp;</p>
<ol>
<li>
<p>On the SQL Details page, under Details, click <span class="bold">Activity</span>.</p>
<p>The SQL Details page appears, showing the Activity subpage.</p>
<img width="695" height="452" src="img/sql_details_activity.gif" alt="Description of sql_details_activity.gif follows" /><br />
<a id="sthref361" href="img_text/sql_details_activity.htm">Description of the illustration sql_details_activity.gif</a><br />
<br />
<p>The Activity subpage displays details of various sessions executing the SQL statement. The Active Sessions chart profiles the average number of active sessions over time.</p>
</li>
<li>
<p>Optionally, drag the shaded box to select a 5-minute interval.</p>
<p>The Detail for Selected 5 Minute Interval section lists the sessions that executed the SQL statement during the selected 5-minute interval. The multicolored bar in the Activity % column depicts how the database time is divided for each session while executing the SQL statement.</p>
</li>
<li>
<p>Optionally, click the link in the <span class="bold">SID</span> column of the session you want to view to display the Session Details page.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_realtime.htm#CHDEFEEH">"Monitoring Top Sessions"</a> for information about monitoring session activity and details</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDJIHHD"></a><a id="TDPPT506"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing the SQL Execution Plan</h4>
<p>The <span class="bold">execution plan</span> for a SQL statement is the sequence of operations Oracle Database performs to run the statement. The Plan subpage<a id="sthref362"></a><a id="sthref363"></a> displays the execution plan for the SQL statement in a graph view and a table view.</p>
<p class="orderedlisttitle">To view the execution plan for the SQL statement:&nbsp;</p>
<ol>
<li>
<p>On the SQL Details page, under Details, click <span class="bold">Plan</span>.</p>
<p>The SQL Details page appears, showing the Plan subpage.</p>
</li>
<li>
<p>Click <span class="bold">Graph</span> to view the SQL execution in a graph view.</p>
<img width="1036" height="537" src="img/sql_details_plan_graph.gif" alt="Description of sql_details_plan_graph.gif follows" /><br />
<a id="sthref365" href="img_text/sql_details_plan_graph.htm">Description of the illustration sql_details_plan_graph.gif</a><br />
<br /></li>
<li>
<p>Optionally, select an operation in the graph to display details about the operations shown in the execution plan.</p>
<p>The Selection Details section refreshes to show details about the selected operations.</p>
</li>
<li>
<p>If the selected operation is on a particular database object (such as a table), then click the <span class="bold">Object</span> link to view further details about the database object.</p>
</li>
<li>
<p>To view the SQL execution in a table view, click <span class="bold">Table</span>.</p>
<p>The Plan subpage refreshes to show the explain plan in a table.</p>
<img width="1031" height="435" src="img/sql_details_plan_table.gif" alt="Description of sql_details_plan_table.gif follows" /><br />
<a id="sthref366" href="img_text/sql_details_plan_table.htm">Description of the illustration sql_details_plan_table.gif</a><br />
<br />
<p><span class="bold">Query rewrite</span> is an optimization technique that transforms a user request written in terms of master tables into a semantically equivalent request that includes materialized views. The database compares the cost for the query, with and without query rewrite, and selects the least costly option. If a rewrite is necessary, then query rewrite and its cost benefit are shown in the Explain Rewrite section.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a> for information about execution plan and the query optimizer</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDEBJCH"></a><a id="TDPPT507"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing the Plan Control</h4>
<p>The <a id="sthref367"></a>Plan Control subpage contains information about the following items:</p>
<ul>
<li>
<p>SQL profiles</p>
<p>A SQL profile contains additional statistics for the SQL statement. The optimizer uses these statistics to generate a better execution plan for the statement.</p>
</li>
<li>
<p>SQL patches</p>
<p>A SQL patch is automatically generated to work around an error or performance problem for a single SQL statement.</p>
</li>
<li>
<p>SQL plan baselines</p>
<p>A SQL plan baseline is an execution plan proven to have acceptable performance for a given SQL statement.</p>
</li>
</ul>
<p class="orderedlisttitle">To view plan control information:&nbsp;</p>
<ol>
<li>
<p>On the SQL Details page, under Details, click <span class="bold">Plan Control</span>.</p>
<p>The SQL Details page appears, showing the Plan Control subpage.</p>
</li>
<li>
<p>Review the plan-related information.</p>
<p>In the following example, the optimizer used a SQL plan baseline named <code>STMT01</code> for the SQL statement.</p>
<img width="664" height="259" src="img/sql_details_plan_control.gif" alt="Description of sql_details_plan_control.gif follows" /><br />
<a id="sthref369" href="img_text/sql_details_plan_control.htm">Description of the illustration sql_details_plan_control.gif</a><br />
<br /></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a> for information about SQL Tuning Advisor and SQL profiles</p>
</li>
<li>
<p><a href="tdppt_sqltune.htm#CHDDAGBE">"Managing SQL Profiles"</a></p>
</li>
<li>
<p><a href="tdppt_sqlopt.htm#BABGHCAE">Chapter 11, "Optimizing Data Access Paths"</a> for information about SQL Access Advisor</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDCEBDH"></a><a id="TDPPT508"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing the Tuning History</h4>
<p>The SQL Tuning History section displays a history of SQL Tuning Advisor and SQL Access Advisor tasks.</p>
<p class="orderedlisttitle">To view the SQL tuning history:&nbsp;</p>
<ol>
<li>
<p>On the SQL Details page, under Details, click <span class="bold">Tuning History</span>.</p>
<p>The SQL Details page appears, showing the Tuning History subpage.</p>
</li>
<li>
<p>Review the information about the tuning history.</p>
<p>The ADDM Findings for this SQL During Historic Period section displays the number of occurrences of ADDM findings that are associated with the SQL statement.</p>
<p>The following example shows that SQL tuning task was performed by user <code>DBA1</code> on February 9, 2009.</p>
<img width="664" height="191" src="img/sql_details_tuning.gif" alt="Description of sql_details_tuning.gif follows" /><br />
<a id="sthref371" href="img_text/sql_details_tuning.htm">Description of the illustration sql_details_tuning.gif</a><br />
<br /></li>
</ol>
<p>The SQL Tuning History section displays a history of SQL Tuning Advisor or SQL Access Advisor tasks.</p>
<p>The ADDM Findings for this SQL During Historic Period section displays the number of occurrences of ADDM findings that are associated with the SQL statement.</p>
<img width="664" height="191" src="img/sql_details_tuning.gif" alt="Description of sql_details_tuning.gif follows" /><br />
<a id="sthref372" href="img_text/sql_details_tuning.htm">Description of the illustration sql_details_tuning.gif</a><br />
<br />
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdppt_sqltune.htm#CAEBFCFJ">Chapter 10, "Tuning SQL Statements"</a> for information about SQL Tuning Advisor and SQL profiles</p>
</li>
<li>
<p><a href="tdppt_sqltune.htm#CHDDAGBE">"Managing SQL Profiles"</a></p>
</li>
<li>
<p><a href="tdppt_sqlopt.htm#BABGHCAE">Chapter 11, "Optimizing Data Access Paths"</a> for information about SQL Access Advisor</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1738">
<tr>
<td class="cellalignment1745">
<table class="cellalignment1743">
<tr>
<td class="cellalignment1742"><a href="tdppt_partfour.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1742"><a href="tdppt_sqltune.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1747">
<table class="cellalignment1741">
<tr>
<td class="cellalignment1742"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1742"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1742"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1742"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1742"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1742"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
