<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Managing Database Storage Structures</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 072" />
<meta name="dcterms.created" content="2012-08-09T22:26:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day DBA" />
<meta name="dcterms.identifier" content="E10897-10" />
<meta name="dcterms.isVersionOf" content="ADMQS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2004, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="instance.htm" title="Previous" type="text/html" />
<link rel="Next" href="users_secure.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e10897.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/19</span> <!-- End Header --><a id="CHDIFFDC"></a><a id="ADMQS006"></a>
<h1 class="chapter"><span class="secnum">6</span> Managing Database Storage Structures</h1>
<p>This chapter discusses using Oracle Enterprise Manager Database Control (Database Control) to view and manage the storage structures of your database. This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CACECHEH">About Database Storage Structures</a></p>
</li>
<li>
<p><a href="#CACEABCJ">Viewing Database Storage Structure Information</a></p>
</li>
<li>
<p><a href="#CHDJAAFF">Performing Common Database Storage Tasks</a></p>
</li>
<li>
<p><a href="#CACDDADD">Managing the Online Redo Log</a></p>
</li>
<li>
<p><a href="#CACJFFJI">Managing Undo Data</a></p>
</li>
<li>
<p><a href="#CACHDCBJ">Storage: Oracle By Example Series</a></p>
</li>
</ul>
<a id="CACECHEH"></a><a id="ADMQS12047"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Database Storage Structures</h2>
<p><a id="sthref235"></a><a id="sthref236"></a>An Oracle database is made up of physical and logical structures. Physical structures can be seen and operated on from the operating system, such as the physical files that store data on a disk.</p>
<p>Logical structures are created and recognized by Oracle Database and are not known to the operating system. The primary logical structure in a database, a tablespace, contains physical files. The applications developer or user may be aware of the logical structure, but is not usually aware of this physical structure. The database administrator (DBA) must understand the relationship between the physical and logical structures of a database.</p>
<p><a href="#CHDHBBHJ">Figure 6-1</a> shows the relationships between logical and physical structures. This figure also shows recovery-related structures that are optionally kept in the fast recovery area. See <a href="backrest.htm#CHDJABGG">"Fast Recovery Area"</a> for more information.</p>
<div class="figure">
<p class="titleinfigure"><a id="CHDHBBHJ"></a><a id="ADMQS12332"></a>Figure 6-1 Oracle Database Storage Structures</p>
<img width="672" height="569" src="img/admqs003.gif" alt="Description of Figure 6-1 follows" /><br />
<a id="sthref237" href="img_text/admqs003.htm">Description of "Figure 6-1 Oracle Database Storage Structures"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Oracle Database can automate much of the management of its structure. Oracle Enterprise Manager Database Control (Database Control) provides a Web-based graphical user interface (GUI) to enable easier management and monitoring of your database.</p>
<p>To view a database storage structure, go to the Storage section of the Server subpage and click on any of the links to access the storage pages.</p>
<img width="243" height="205" src="img/storageheadr2.gif" alt="Description of storageheadr2.gif follows" /><br />
<a id="sthref238" href="img_text/storageheadr2.htm">Description of the illustration storageheadr2.gif</a><br />
<br />
<p>This section provides background information about the various database storage structures. It contains the following topics:</p>
<ul>
<li>
<p><a href="#CACBFEHH">About Control Files</a></p>
</li>
<li>
<p><a href="#CACDFFGG">About Online Redo Log Files</a></p>
</li>
<li>
<p><a href="#CACGGFIC">About Archived Redo Log Files</a></p>
</li>
<li>
<p><a href="#CACBAJHJ">About Rollback Segments</a></p>
</li>
<li>
<p><a href="#CACJHGAA">About Data Files</a></p>
</li>
<li>
<p><a href="#CACDCJHD">About Tablespaces</a></p>
</li>
<li>
<p><a href="#CACIIFCD">About Other Storage Structures</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACEABCJ">"Viewing Database Storage Structure Information"</a></p>
</li>
<li>
<p><a class="olink CNCPT88790" href="../../server.112/e40540/intro.htm#CNCPT88790"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
</ul>
</div>
<a id="CACBFEHH"></a><a id="ADMQS12048"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Control Files</h3>
<p><a id="sthref239"></a><a id="sthref240"></a>A control file tracks the physical components of the database. It is the root file that the database uses to find all the other files used by the database. Because of the importance of the control file, Oracle recommends that the control file be <span class="bold">multiplexed</span>, or have multiple identical copies. For databases created with Oracle Database Configuration Assistant (DBCA), three copies of the control file are automatically created and kept synchronized with each other.</p>
<p>If any control file fails, then your database becomes unavailable. If you have a control file copy, however, you can shut down your database and re-create the failed control file from the copy, then restart your database. Another option is to delete the failed control file from the <code>CONTROL_FILES</code> initialization parameter and restart your database using the remaining control files.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN006" href="../../server.112/e25494/control.htm#ADMIN006"><span class="italic">Oracle Database Administrator's Guide</span></a> for detailed information about control files</p>
</li>
<li>
<p><a href="#CACJBFBD">"Viewing Control File Information"</a></p>
</li>
<li>
<p><a class="olink CNCPT404" href="../../server.112/e40540/physical.htm#CNCPT404"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACDFFGG"></a><a id="ADMQS12049"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Online Redo Log Files</h3>
<p><a id="sthref241"></a><a id="sthref242"></a>Every Oracle database has a set of two or more online redo log files. The set of online redo log files is collectively known as the <span class="bold">redo log</span> for the database. A redo log is made up of redo entries, which are also called <span class="bold">redo records</span>.</p>
<p>The online redo log stores a copy of the changes made to data. If a failure requires a data file to be restored from backup, then the recent data changes that are missing from the restored data file can be obtained from the online redo log files, so work is never lost. The online redo log files are used to recover a database after hardware, software, or media failure. To protect against a failure involving the online redo log file itself, Oracle Database can multiplex the online redo log file so that two or more identical copies of the online redo log file can be maintained on different disks.</p>
<p>The online redo log for a database consists of groups of online redo log files. A group consists of an online redo log file and its multiplexed copies. Each identical copy is considered to be a member of that group. Each group is defined by a number, such as Group 1.</p>
<p><a href="#BABBAHGB">Figure 6-2</a> shows the configuration of a database that has three online redo log groups and two members in each group. For each group, the members are stored on separate disks for maximum availability. For example, the members of Group 1 are the redo log files <code>A_LOG1</code> and <code>B_LOG1</code>.</p>
<div class="figure">
<p class="titleinfigure"><a id="BABBAHGB"></a><a id="ADMQS12334"></a>Figure 6-2 Online Redo Log Groups and Their Members</p>
<img width="509" height="371" src="img/admqs001.gif" alt="Description of Figure 6-2 follows" /><br />
<a id="sthref243" href="img_text/admqs001.htm">Description of "Figure 6-2 Online Redo Log Groups and Their Members"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The database log writer process (LGWR) writes redo records from the memory buffer to a redo log group until the log files in that group reach their storage size limit, or until you request a log switch operation. The LGWR process then writes to the next log group. The LGWR process performs this action in a circular fashion so that the oldest group is overwritten by the most recent redo records.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN007" href="../../server.112/e25494/onlineredo.htm#ADMIN007"><span class="italic">Oracle Database Administrator's Guide</span></a> for detailed information about redo logs</p>
</li>
<li>
<p><a href="#CACFFHCB">"Viewing Online Redo Log File Information"</a></p>
</li>
<li>
<p><a href="#CACCHCJD">"Switching a Log File"</a></p>
</li>
<li>
<p><a href="#CACDDADD">"Managing the Online Redo Log"</a></p>
</li>
<li>
<p><a class="olink CNCPT11302" href="../../server.112/e40540/physical.htm#CNCPT11302"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACGGFIC"></a><a id="ADMQS12050"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Archived Redo Log Files</h3>
<p><a id="sthref244"></a>When you enable archiving of the online redo logs, Oracle Database copies the online redo log files to another location before they are overwritten. These copied files are referred to as <span class="bold">archived redo log files</span>. You can archive to multiple locations.</p>
<p>These archived redo log files extend the amount of redo data that can be saved and are used for recovery. Archived redo log files are required to recover a backup of the database from the time of the backup to the current time. Archiving can be either enabled or disabled for the database, but Oracle strongly recommends that you enable archiving. Oracle also recommends that you configure the database to write archived redo log files to the fast recovery area.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN008" href="../../server.112/e25494/archredo.htm#ADMIN008"><span class="italic">Oracle Database Administrator's Guide</span></a> for detailed information about archived redo log files</p>
</li>
<li>
<p><a href="#CACBCFDA">"Viewing Archived Redo Log File Information"</a></p>
</li>
<li>
<p><a href="backrest.htm#CHDJHFDB">"Configuring Recovery Settings"</a> for information about enabling redo log archiving</p>
</li>
<li>
<p><a href="backrest.htm#CHDJABGG">"Fast Recovery Area"</a> for background information about the fast recovery area</p>
</li>
<li>
<p><a class="olink CNCPT928" href="../../server.112/e40540/physical.htm#CNCPT928"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACBAJHJ"></a><a id="ADMQS12051"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Rollback Segments</h3>
<p><span class="bold">Rollback segments</span> were database structures used to track undo information for the database <a id="sthref245"></a>in earlier releases of Oracle Database. Now, the preferred way of managing undo information is with the undo tablespace. For more information, see <a href="#CACJFFJI">"Managing Undo Data"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Database uses a <code>SYSTEM</code> rollback segment for performing system transactions. It is created automatically when the database is created, and is always brought online at instance startup. It is located in the <code>SYSTEM</code> tablespace. You are not required to perform any operations to manage the <code>SYSTEM</code> rollback segment.</div>
</div>
<!-- class="sect2" -->
<a id="CACJHGAA"></a><a id="ADMQS12052"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Data Files</h3>
<p><a id="sthref246"></a><a id="sthref247"></a><span class="bold">Data files</span> are the operating system files that store the data within the database. The data is written to these files in an Oracle proprietary format that cannot be read by other programs. <span class="bold">Tempfiles</span> are a special class of data files that are associated only with temporary tablespaces.</p>
<p>Data files can be broken down into the following components:</p>
<ul>
<li>
<p><a id="sthref248"></a><a id="sthref249"></a>Segment</p>
<p>A <span class="bold">segment</span> contains a specific type of database object. For example, a table is stored in a table segment, and an index is stored in an index segment. A data file can contain many segments.</p>
</li>
<li>
<p><a id="sthref250"></a><a id="sthref251"></a>Extent</p>
<p>An <span class="bold">extent</span> is a contiguous set of data blocks within a segment. Oracle Database allocates space for segments in units of one extent. When the existing extents of a segment are full, the database allocates another extent for that segment.</p>
</li>
<li>
<p><a id="sthref252"></a><a id="sthref253"></a>Data block</p>
<p>A <span class="bold">data block</span>, also called a <span class="bold">database block</span>, is the smallest unit of I/O to database storage. An extent consists of several contiguous data blocks. The database uses a default block size at database creation.</p>
<p>After the database has been created, it is not possible to change the default block size without re-creating the database. It is possible, however, to create a tablespace with a block size different than the default block size.</p>
</li>
</ul>
<p>Segments, extents, and data blocks are all logical structures. Only Oracle Database can determine how many data blocks are in a file. The operating system recognizes only files and operating system blocks, not the number of data blocks in an Oracle Database file. Each data block maps to one or more operating system blocks.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN012" href="../../server.112/e25494/dfiles.htm#ADMIN012"><span class="italic">Oracle Database Administrator's Guide</span></a> for detailed information about data files</p>
</li>
<li>
<p><a href="#CACDEIBG">"Viewing Data File Information"</a></p>
</li>
<li>
<p><a class="olink CNCPT004" href="../../server.112/e40540/logical.htm#CNCPT004"><span class="italic">Oracle Database Concepts</span></a> for more information about segments, extents, and blocks</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACDCJHD"></a><a id="ADMQS12053"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Tablespaces</h3>
<p><a id="sthref254"></a>A database is divided into logical storage units called <span class="bold">tablespaces</span>, which group related logical structures (such as tables, views, and other database objects). For example, all application objects can be grouped into a single tablespace to simplify maintenance operations.</p>
<p>A tablespace consists of one or more physical data files. Database objects assigned to a tablespace are stored in the physical data files of that tablespace.</p>
<p>When you create an Oracle database, some tablespaces already exist, such as <code>SYSTEM</code> and <code>SYSAUX</code>.</p>
<p>Tablespaces provide a means to physically locate data on storage. When you define the data files that comprise a tablespace, you specify a storage location for these files. For example, you might specify a data file location for a certain tablespace as a designated host directory (implying a certain disk volume) or designated Oracle Automatic Storage Management disk group. Any schema objects assigned to that tablespace then get located in the specified storage location. Tablespaces also provide a unit of backup and recovery. The backup and recovery features of Oracle Database enable you to back up or recover at the tablespace level.</p>
<p><a href="#CACBBEHD">Table 6-1</a> describes some tablespaces included in the database.</p>
<div class="tblformal">
<p class="titleintable"><a id="ADMQS12335"></a><a id="sthref255"></a><a id="CACBBEHD"></a>Table 6-1 Tablespaces and Descriptions</p>
<table class="cellalignment1432" title="Tablespaces and Descriptions" summary="This table describes some of the tablespaces included in the database." dir="ltr">
<thead>
<tr class="cellalignment1418">
<th class="cellalignment1425" id="r1c1-t8">Tablespace</th>
<th class="cellalignment1425" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1418">
<td class="cellalignment1426" id="r2c1-t8" headers="r1c1-t8">
<p><a id="sthref256"></a><a id="sthref257"></a><code>EXAMPLE</code></p>
</td>
<td class="cellalignment1426" headers="r2c1-t8 r1c2-t8">
<p>This tablespace contains the sample schemas that are included with Oracle Database. The sample schemas provide a common platform for examples. Oracle documentation and educational materials contain examples based on the sample schemas.</p>
</td>
</tr>
<tr class="cellalignment1418">
<td class="cellalignment1426" id="r3c1-t8" headers="r1c1-t8">
<p><a id="sthref258"></a><a id="sthref259"></a><code>SYSTEM</code></p>
</td>
<td class="cellalignment1426" headers="r3c1-t8 r1c2-t8">
<p>This tablespace is automatically created at database creation. Oracle Database uses it to manage the database. It contains the data dictionary, which is the central set of tables and views used as a read-only reference for a particular database. It also contains various tables and views that contain administrative information about the database. These are all contained in the <code>SYS</code> schema, and can be accessed only by the <code>SYS</code> user or other administrative users with the required privilege.</p>
</td>
</tr>
<tr class="cellalignment1418">
<td class="cellalignment1426" id="r4c1-t8" headers="r1c1-t8">
<p><a id="sthref260"></a><a id="sthref261"></a><code>SYSAUX</code></p>
</td>
<td class="cellalignment1426" headers="r4c1-t8 r1c2-t8">
<p>This is an auxiliary tablespace to the <code>SYSTEM</code> tablespace.</p>
<p>The <code>SYSAUX</code> tablespace contains data for some components and products, reducing the load on the <code>SYSTEM</code> tablespace. Every database using Oracle Database 10<span class="italic">g</span> release 1 (10.1) or later must have a <code>SYSAUX</code> tablespace.</p>
<p>Components that use <code>SYSAUX</code> as their default tablespace during installation include Automatic Workload Repository, Oracle Streams, Oracle Text, and Database Control Repository. For more information, see <a class="olink ADMIN00203" href="../../server.112/e25494/create.htm#ADMIN00203"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
</td>
</tr>
<tr class="cellalignment1418">
<td class="cellalignment1426" id="r5c1-t8" headers="r1c1-t8">
<p><a id="sthref262"></a><a id="sthref263"></a><code>TEMP</code></p>
</td>
<td class="cellalignment1426" headers="r5c1-t8 r1c2-t8">
<p>This tablespace stores temporary data generated when processing SQL statements. For example, this tablespace would be used for query sorting. Every database should have a temporary tablespace that is assigned to users as their temporary tablespace. In the preconfigured database, the <code>TEMP</code> tablespace is specified as the default temporary tablespace. If no temporary tablespace is specified when a user account is created, then Oracle Database assigns this tablespace to the user.</p>
</td>
</tr>
<tr class="cellalignment1418">
<td class="cellalignment1426" id="r6c1-t8" headers="r1c1-t8">
<p><a id="sthref264"></a><a id="sthref265"></a><code>UNDOTBS1</code></p>
</td>
<td class="cellalignment1426" headers="r6c1-t8 r1c2-t8">
<p>This is the undo tablespace used by the database to store undo information. See <a href="#CACJFFJI">"Managing Undo Data"</a> to understand how an Oracle database uses the undo tablespace. Every database must have an undo tablespace.</p>
</td>
</tr>
<tr class="cellalignment1418">
<td class="cellalignment1426" id="r7c1-t8" headers="r1c1-t8">
<p><a id="sthref266"></a><a id="sthref267"></a><code>USERS</code></p>
</td>
<td class="cellalignment1426" headers="r7c1-t8 r1c2-t8">
<p>This tablespace is used to store permanent user objects and data. Similar to the <code>TEMP</code> tablespace, every database should have a tablespace for permanent user data that is assigned to users. Otherwise, user objects will be created in the <code>SYSTEM</code> tablespace, which is not good practice. In the preconfigured database, <code>USERS</code> is designated as the default tablespace for all new users.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>You can create new tablespaces to support your user and application data requirements. During tablespace creation, you set the following parameters:</p>
<ul>
<li>
<p><a href="#CACEBGEH">Locally Managed Tablespaces</a></p>
</li>
<li>
<p><a href="#CACGHABE">Tablespace Types</a></p>
</li>
<li>
<p><a href="#CACGJHJC">Tablespace Status</a></p>
</li>
<li>
<p><a href="#CACIHFAE">Autoextend Tablespace</a></p>
</li>
<li>
<p><a href="#CHDCGHJF">Encrypted Tablespaces</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACHCBHF">"Viewing Tablespace Information"</a></p>
</li>
<li>
<p><a href="#CHDEHEIG">"Creating a Tablespace"</a></p>
</li>
<li>
<p><a href="#BABDIAAI">"Modifying a Tablespace"</a></p>
</li>
<li>
<p><a class="olink CNCPT402" href="../../server.112/e40540/logical.htm#CNCPT402"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
</ul>
</div>
<a id="CACEBGEH"></a><a id="ADMQS12054"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><a id="sthref268"></a><a id="sthref269"></a>Locally Managed Tablespaces</h4>
<p>Space management within a tablespace involves keeping track of available (free) and used space, so that space is allocated efficiently during data insertion and deletion. Locally managed tablespaces keep the space allocation information within the tablespace, not in the data dictionary, thus offering better performance. By default, Oracle Database sets all newly created tablespaces to be locally managed with automatic segment management, a feature that further improves performance.</p>
</div>
<!-- class="sect3" -->
<a id="CACGHABE"></a><a id="ADMQS12055"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Tablespace Types</h4>
<p><a id="sthref270"></a>There are three types of tablespaces:</p>
<ul>
<li>
<p>Permanent</p>
<p>You use permanent tablespaces to store your user and application data. Oracle Database uses permanent tablespaces to store permanent data, such as system data. Each user is assigned a default permanent tablespace.</p>
</li>
<li>
<p><a id="sthref271"></a><a id="sthref272"></a>Undo</p>
<p>A database running in automatic undo management mode transparently creates and manages undo data in the undo tablespace. Oracle Database uses undo data to roll back transactions, to provide read consistency, to help with database recovery, and to enable features such as Oracle Flashback Query. A database instance can have only one active undo tablespace.</p>
</li>
<li>
<p>Temporary</p>
<p><a id="sthref273"></a><a id="sthref274"></a>Temporary tablespaces are used for storing temporary data, as would be created when SQL statements perform sort operations. An Oracle database gets a temporary tablespace when the database is created. You would create another temporary tablespace if you were creating a temporary tablespace group. Under typical circumstances, you do not have to create additional temporary tablespaces. If you have an extremely large database, then you might configure additional temporary tablespaces.</p>
<p>The physical files that comprise a temporary tablespace are called tempfiles, as opposed to data files.</p>
<p>The <code>TEMP</code> tablespace is typically used as the default temporary tablespace for users who are not explicitly assigned a temporary tablespace.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11366" href="../../server.112/e25494/tspaces.htm#ADMIN11366"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn more about temporary tablespaces</p>
</li>
<li>
<p><a class="olink CNCPT305" href="../../server.112/e40540/logical.htm#CNCPT305"><span class="italic">Oracle Database Concepts</span></a> for more information about undo tablespaces</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CACGJHJC"></a><a id="ADMQS12056"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Tablespace Status</h4>
<p><a id="sthref275"></a><a id="sthref276"></a><a id="sthref277"></a><a id="sthref278"></a><a id="sthref279"></a>You can set tablespace status as follows:</p>
<ul>
<li>
<p>Read Write</p>
<p>Users can read and write to the tablespace after it is created. This is the default.</p>
</li>
<li>
<p>Read Only</p>
<p>If the tablespace is created Read Only, then the tablespace cannot be written to until its status is changed to Read Write. It is unlikely that you would create a Read Only tablespace, but you might change it to that status after you have written data to it that you do not want modified.</p>
</li>
<li>
<p>Offline</p>
<p>If the tablespace has a status of Offline, then no users can access it. You might change the status of a tablespace to Offline before performing maintenance or recovery on the data files associated with that tablespace.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CACIHFAE"></a><a id="ADMQS12057"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Autoextend Tablespace</h4>
<p><a id="sthref280"></a><a id="sthref281"></a><a id="sthref282"></a><a id="sthref283"></a>You can set a tablespace to automatically extend itself by a specified amount when it reaches its size limit. If you do not enable autoextend, then you are alerted when the tablespace reaches its critical or warning threshold size. The critical and warning threshold parameters have default values that you can change at any time. These parameters also cause alerts to be generated for autoextending tablespaces that are approaching their specified size limit. You can respond to size alerts by manually increasing the tablespace size. You do so by increasing the size of one or more of the tablespace data files or by adding another data file to the tablespace.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Although it is common to refer to tablespaces as autoextending, automatic extension is a data file property, not a tablespace property. That is, when you create the data files that comprise a tablespace, you indicate whether these data files automatically extend. A tablespace that has autoextending data files is considered to be an autoextending tablespace. You can specify a maximum size for an autoextending data file.</div>
</div>
<!-- class="sect3" -->
<a id="CHDCGHJF"></a><a id="ADMQS12383"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Encrypted Tablespaces</h4>
<p>Encrypted tablespaces primarily protect your data from unauthorized access by means other than through the database. For example, when encrypted tablespaces are written to backup media for travel from one Oracle database to another or for travel to an off-site facility for storage, they remain encrypted. Also, encrypted tablespaces protect data from users who try to circumvent the security features of the database and access database files directly through the operating system file system.</p>
<p>You can encrypt any permanent tablespace to protect sensitive data. When you encrypt a tablespace, all tablespace blocks are encrypted. All segment types are supported for encryption, including tables, clusters, indexes, LOBs, table and index partitions, and so on.Tablespace encryption is completely transparent to your applications, so no application modification is necessary.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink TDPSG40000" href="../../server.112/e10575/tdpsg_securing_data.htm#TDPSG40000"><span class="italic">Oracle Database 2 Day + Security Guide</span></a> for more information on securing data by using encryption</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CACIIFCD"></a><a id="ADMQS12058"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Other Storage Structures</h3>
<p>Other storage structures that can exist in an Oracle database include the initialization parameter file, the password file, and backup files.</p>
<p class="subhead2"><a id="ADMQS12059"></a>Initialization Parameter File</p>
<p><a id="sthref284"></a><a id="sthref285"></a>Initialization parameters are used by the Oracle instance at startup to determine the run-time properties and resources for the database. Some parameters can be set or modified while the database is running. Other initialization parameters require the database to be restarted for the changes to take effect. See <a href="instance.htm#CACDDIID">"Viewing and Modifying Initialization Parameters"</a>.</p>
<p class="subhead2"><a id="ADMQS12060"></a>Password File</p>
<p><a id="sthref286"></a><a id="sthref287"></a><a id="sthref288"></a>A database can use a password file to authenticate administrative users with <code>SYS<a id="sthref289"></a>DBA</code> or <code>SYSOPER</code> connection privileges. A password file is required for remote connections to the database as <code>SYSDBA</code> or <code>SYSOPER</code>. These privileges enable a DBA to start and shut down the database and perform other high-level administrative tasks. This password file is outside of the database itself, thereby enabling the authentication of a DBA when the database is not yet started. (A DBA must authenticate before starting the database.)</p>
<p>When you invoke DBCA as part of the Oracle Database installation process, DBCA creates a password file with one entry: the <code>SYS</code> user. Granting <code>SYSDBA</code> to a user adds that user to the password file automatically.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Database can also use operating system authentication to authenticate users with the <code>SYSDBA</code> or <code>SYSOPER</code> privileges. See <a href="em_manage.htm#BABDJBCJ">"Starting SQL*Plus and Connecting to the Database"</a>.</div>
<p class="subhead2"><a id="ADMQS12061"></a>Backup Files</p>
<p>Back<a id="sthref290"></a>up files are not technically database files, but are copies of the database in some form that can be used to recover the database if a failure causes loss of data.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="instance.htm#CACFBJED">Chapter 5, "Managing the Oracle Instance"</a> for more information about initialization parameters and the initialization parameter file</p>
</li>
<li>
<p><a class="olink CNCPT1289" href="../../server.112/e40540/startup.htm#CNCPT1289"><span class="italic">Oracle Database Concepts</span></a> for more information about password files and operating system authentication</p>
</li>
<li>
<p><a href="users_secure.htm#CHDECEBA">"SYSDBA and SYSOPER System Privileges"</a></p>
</li>
<li>
<p><a href="backrest.htm#CIHEHFJJ">Chapter 9, "Performing Backup and Recovery"</a> for more information about backup files</p>
</li>
<li>
<p><a class="olink CNCPT031" href="../../server.112/e40540/cncptdba.htm#CNCPT031"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACEABCJ"></a><a id="ADMQS12062"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Viewing Database Storage Structure Information</h2>
<p>To assist you in managing the storage structures within your database, this section provides instructions for viewing information about the various database storage structures using Oracle Enterprise Manager Database Control (Database Control).</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CACJBFBD">Viewing Control File Information</a></p>
</li>
<li>
<p><a href="#CACFFHCB">Viewing Online Redo Log File Information</a></p>
</li>
<li>
<p><a href="#CACBCFDA">Viewing Archived Redo Log File Information</a></p>
</li>
<li>
<p><a href="#CACDEIBG">Viewing Data File Information</a></p>
</li>
<li>
<p><a href="#CACHCBHF">Viewing Tablespace Information</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACECHEH">"About Database Storage Structures"</a></p>
</li>
</ul>
</div>
<a id="CACJBFBD"></a><a id="ADMQS12063"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Control File Information</h3>
<p>You can use Database Control to view location and status information about control files.</p>
<p class="subhead2"><a id="ADMQS12160"></a>To view control file information:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Control Files</span>.</p>
<p>The Control Files page appears, showing the General subpage.</p>
<p>This page shows whether your database has a multiplexed control file. The Advanced and Record Section subpages give you more detailed information about your control files.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACBFEHH">"About Control Files"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACFFHCB"></a><a id="ADMQS12064"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Online Redo Log File Information</h3>
<p><a id="sthref291"></a>You use Database Control to view status and multiplexing information about online redo log files.</p>
<p class="subhead2"><a id="ADMQS12161"></a>To view online redo log file information:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Redo Log Groups</span>.</p>
<p>The Redo Log Groups page appears. This page shows the attributes of the online redo log groups for your database.</p>
<p>When an online redo log group contains only one member, it is not multiplexed. Note the Status attribute for the online redo log groups. The online redo log group with status Current is the one currently being written to disk by the log writer.</p>
</li>
<li>
<p>(Optional) In the <span class="bold">Group</span> column, click a group number to view information about online redo log group members.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACDFFGG">"About Online Redo Log Files"</a></p>
</li>
<li>
<p><a href="#CACDDADD">"Managing the Online Redo Log"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACBCFDA"></a><a id="ADMQS12065"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Archived Redo Log File Information</h3>
<p><a id="sthref292"></a>You use Database Control to view status information about archived redo log files.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Archived redo log files do not exist until you set the database in <code>ARCHIVELOG</code> mode.</div>
<p class="subhead2"><a id="ADMQS12162"></a>To view archived redo log file information:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Archive Logs</span>.</p>
<p>The Archive Logs page appears.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACGGFIC">"About Archived Redo Log Files"</a></p>
</li>
<li>
<p><a href="backrest.htm#i1006225">"Configuring Your Database for Basic Backup and Recovery"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACDEIBG"></a><a id="ADMQS12066"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Data File Information</h3>
<p><a id="sthref293"></a>You use Database Control to view status and location information about data files.</p>
<p class="subhead2"><a id="ADMQS12163"></a>To view data file information:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Datafiles</span>.</p>
<p>The Datafiles page appears.</p>
</li>
<li>
<p>(Optional) Select a data file, and then click <span class="bold">View</span> to display more attributes for the data file.</p>
</li>
<li>
<p>(Optional) Click the name of a tablespace in the <span class="bold">Tablespace</span> column to display the attributes of the tablespace associated with the data file.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACJHGAA">"About Data Files"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACHCBHF"></a><a id="ADMQS12067"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Tablespace Information</h3>
<p><a id="sthref294"></a>You use Database Control to view configuration, size, and status information about tablespaces.</p>
<p class="subhead2"><a id="ADMQS12164"></a>To view tablespace information:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Tablespaces</span>.</p>
<p>The Tablespaces page appears.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACDCJHD">"About Tablespaces"</a></p>
</li>
<li>
<p><a href="#BABDIAAI">Modifying a Tablespace</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDJAAFF"></a><a id="ADMQS062"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Performing Common Database Storage Tasks</h2>
<p>As data is added to your database, the tablespace requirements for your database change. As a database administrator (DBA), you can use Oracle Enterprise Manager Database Control (Database Control) to perform the following tasks to effectively manage the tablespaces and database storage:</p>
<ul>
<li>
<p><a href="#CHDEHEIG">Creating a Tablespace</a></p>
</li>
<li>
<p><a href="#BABDIAAI">Modifying a Tablespace</a></p>
</li>
<li>
<p><a href="#CACJAJAJ">Dropping a Tablespace</a></p>
</li>
<li>
<p><a href="#BABHEBCJ">Reclaiming Unused Space</a></p>
</li>
</ul>
<a id="CHDEHEIG"></a><a id="ADMQS0622"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating a Tablespace</h3>
<p><a id="sthref295"></a>You can create additional tablespaces to store user data, so that not all data is stored in the <code>USERS</code> tablespace. The following are some reasons to create additional tablespaces:</p>
<ul>
<li>
<p>For certain users, groups of users, or applications, it may be convenient to keep all application data in a separate tablespace or set of tablespaces for backup and recovery or maintenance reasons. For example, suppose you must recover all application data from backup due to a hardware or software failure, and you want to perform an offline recovery. If the application data is kept in a separate tablespace, then you can take just that tablespace offline and recover it, without affecting the operation of other database applications.</p>
</li>
<li>
<p>Some applications, such as those with large partitioned tables, may benefit from distributing data across multiple tablespaces. This approach allows the optimal use of the available storage because frequently accessed data can be placed on high performance disks, and infrequently retrieved data can be placed on less expensive storage.</p>
</li>
</ul>
<p class="subhead2"><a id="ADMQS12165"></a>To create a tablespace:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Tablespaces</span>.</p>
<p>The Tablespaces page appears.</p>
<img width="1003" height="525" src="img/tablespaces.gif" alt="Description of tablespaces.gif follows" /><br />
<a id="sthref296" href="img_text/tablespaces.htm">Description of the illustration tablespaces.gif</a><br />
<br /></li>
<li>
<p>Do one of the following:</p>
<ol>
<li>
<p>To create a new tablespace, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>To create a tablespace that is similar to an existing tablespace, in the <span class="bold">Select</span> column, select the tablespace whose attributes you want to reproduce. In the Actions list, select <span class="bold">Create Like</span> and then click <span class="bold">Go</span>.</p>
</li>
</ol>
<p>The Create Tablespace page appears, showing the General subpage.</p>
<img width="790" height="541" src="img/create_tablespace.gif" alt="Description of create_tablespace.gif follows" /><br />
<a id="sthref297" href="img_text/create_tablespace.htm">Description of the illustration create_tablespace.gif</a><br />
<br /></li>
<li>
<p>In the <span class="bold">Name</span> field, enter a name for the tablespace.</p>
</li>
<li>
<p>In the Extent Management section, select <span class="bold">Locally Managed</span>.</p>
<p>See <a href="#CACEBGEH">"Locally Managed Tablespaces"</a>.</p>
</li>
<li>
<p>In the Type section, select <span class="bold">Permanent</span>.</p>
<p>See <a href="#CACGHABE">"Tablespace Types"</a>.</p>
</li>
<li>
<p>In the Status section, select <span class="bold">Read Write</span>.</p>
<p>See <a href="#CACGJHJC">"Tablespace Status"</a>.</p>
</li>
<li>
<p>In the Datafiles section, click <span class="bold">Add</span> to add one or more data files to the tablespace.</p>
<p>The Add Datafile page appears.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you select <span class="bold">Use bigfile tablespace</span>, then the tablespace can have only one data file. Bigfile tablespaces are used with very large databases that use Automatic Storage Management or other logical volume managers that support striping, RAID, and dynamically extensible logical volumes.</div>
</li>
<li>
<p>If the Storage Type is File System, then in the <span class="bold">File Name</span> field, enter a file name. In the <span class="bold">File Directory</span> and <span class="bold">File Size</span> fields, enter appropriate values for your data file location and initial size.</p>
</li>
<li>
<p>In the Storage section, complete the following steps:</p>
<ol>
<li>
<p>Select <span class="bold">Automatically extend data file when full (AUTOEXTEND)</span>.</p>
</li>
<li>
<p>Set a suitable increment, such as 10 MB.</p>
<p>This is the amount of disk space that is added to the data file when it needs more storage space.</p>
</li>
<li>
<p>For Maximum File Size, do one of the following, depending on available storage:</p>
<ul>
<li>
<p>Select <span class="bold">Unlimited</span> to permit the file to increase without limits.</p>
</li>
<li>
<p>Select <span class="bold">Value</span>, and then enter a value in KB, MB, GB, or TB.</p>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
<p>The Create Tablespace page returns.</p>
</li>
<li>
<p>(Optional) Toward the top of the page, click <span class="bold">Storage</span> to view the Storage subpage. Examine all of the default settings on this subpage.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to add the tablespace.</p>
<p>The Tablespaces page returns, showing the newly created tablespace.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACDCJHD">"About Tablespaces"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABDIAAI"></a><a id="ADMQS0623"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Modifying a Tablespace</h3>
<p><a id="sthref298"></a><a id="sthref299"></a>You can use Database Control to modify a tablespace. For example, you can extend it by increasing data file sizes or adding another data file, set it to automatically extend, change its space usage alert thresholds, or change its status to Offline. When you get a critical or warning alert, you might have to extend a tablespace if the alert is related to a space limitation or you might have to take the tablespace offline for recovery if the alert is related to corrupted data or other serious errors.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CACFHABF">Setting a Tablespace to Automatically Extend</a></p>
</li>
<li>
<p><a href="#CACDFDGJ">Changing Space Usage Alert Thresholds for a Tablespace</a></p>
</li>
<li>
<p><a href="#CACBJEGH">Taking a Tablespace Offline</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACDCJHD">"About Tablespaces"</a></p>
</li>
</ul>
</div>
<a id="CACFHABF"></a><a id="ADMQS12068"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Setting a Tablespace to Automatically Extend</h4>
<p><a id="sthref300"></a><a id="sthref301"></a><a id="sthref302"></a>This section explains how to set a tablespace to automatically extend when it reaches its size limit. The following instructions assume that the tablespace was previously not an autoextending tablespace.</p>
<p class="subhead2"><a id="ADMQS12166"></a>To set a tablespace to automatically extend:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Tablespaces</span>.</p>
<p>The Tablespaces page appears.</p>
</li>
<li>
<p>Select the tablespace for which you want to enable autoextend, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Tablespace page appears.</p>
</li>
<li>
<p><a id="BABCGJEG"></a>Select the first data file associated with the tablespace, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Datafile page appears.</p>
</li>
<li>
<p>In the Storage section, complete the following steps:</p>
<ol>
<li>
<p>Select <span class="bold">Automatically extend data file when full (AUTOEXTEND)</span>.</p>
</li>
<li>
<p>Set a suitable increment, such as 10 MB.</p>
<p>This is the amount of disk space that is added to the data file when it needs more storage space.</p>
</li>
<li>
<p>For Maximum File Size, do one of the following, depending on available storage:</p>
<ul>
<li>
<p>Select <span class="bold">Unlimited</span> to permit the file to increase without limits.</p>
</li>
<li>
<p>Select <span class="bold">Value</span>, and then enter a value in KB, MB, GB, or TB.</p>
</li>
</ul>
</li>
</ol>
</li>
<li>
<p><a id="BABGIHBC"></a>Click <span class="bold">Continue</span>.</p>
<p>The Edit Tablespace page returns.</p>
</li>
<li>
<p>Repeat Step <a href="#BABCGJEG">5</a> through Step <a href="#BABGIHBC">7</a> for each additional data file associated with the tablespace.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
<p>A confirmation message appears.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CACDFDGJ"></a><a id="ADMQS12069"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Changing Space Usage Alert Thresholds for a Tablespace</h4>
<p><a id="sthref303"></a><a id="sthref304"></a><a id="sthref305"></a>You receive an alert in Database Control when a space usage threshold for a tablespace is reached. There are two types of space usage alerts that you can enable: <span class="bold">warning</span>, for when tablespace space is somewhat low, and <span class="bold">critical</span>, for when the tablespace is almost completely full and action must be taken immediately.</p>
<p>For both warning and critical alerts, you can specify alert thresholds in the following ways:</p>
<ul>
<li>
<p>By space used (%)</p>
<p>When space used becomes greater than or equal to a percentage of total space, an alert is issued.</p>
</li>
<li>
<p>By free space (MB)</p>
<p>When remaining space falls below an amount (in MB), an alert is issued.</p>
<p>Free-space thresholds are more useful for large tablespaces. For example, for a 10 TB tablespace, setting the percentage full critical alert to as high as 99 percent means that the database would issue an alert when there is still 100 GB of free space remaining. Usually, 100 GB remaining would not be a critical situation, and the alert would not be useful. For this tablespace, it might be better to use a free-space threshold, which you could set to issue a critical alert when 5 GB of free space remains.</p>
</li>
</ul>
<p>For both warning and critical alerts for a tablespace, you can enable either the space used threshold or the free-space threshold, or you can enable both thresholds.</p>
<p class="subhead2"><a id="ADMQS12167"></a>To change space usage alert thresholds for tablespaces:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Tablespaces</span>.</p>
<p>The Tablespaces page appears.</p>
</li>
<li>
<p>Select the tablespace whose threshold you want to change, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Tablespace page appears, showing the General subpage.</p>
</li>
<li>
<p>Click the <span class="bold">Thresholds</span> link at the top of the page to display the Thresholds subpage.</p>
<img width="859" height="408" src="img/tablespace_thresholds.gif" alt="Description of tablespace_thresholds.gif follows" /><br />
<a id="sthref306" href="img_text/tablespace_thresholds.htm">Description of the illustration tablespace_thresholds.gif</a><br />
<br /></li>
<li>
<p>In the Space Used (%) section, do one of the following:</p>
<ul>
<li>
<p>Accept the default thresholds.</p>
</li>
<li>
<p>Select <span class="bold">Specify Thresholds</span>, and then enter a <span class="bold">Warning (%)</span> threshold and a <span class="bold">Critical (%)</span> threshold.</p>
</li>
<li>
<p>Select <span class="bold">Disable Thresholds</span> to disable the percentage full thresholds.</p>
</li>
</ul>
</li>
<li>
<p>In the Free Space (MB) section, do one of the following:</p>
<ul>
<li>
<p>Accept the default thresholds.</p>
</li>
<li>
<p>Select <span class="bold">Specify Thresholds</span>, and then enter a <span class="bold">Warning (MB)</span> threshold and a <span class="bold">Critical (MB)</span> threshold.</p>
</li>
<li>
<p>Select <span class="bold">Disable Thresholds</span> to disable the threshold for free space remaining.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
<p>A confirmation message appears.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CACBJEGH"></a><a id="ADMQS12070"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Taking a Tablespace Offline</h4>
<p><a id="sthref307"></a><a id="sthref308"></a>You may want to take a tablespace offline for any of the following reasons:</p>
<ul>
<li>
<p>To make a portion of the database unavailable while still allowing access to the remainder of the database</p>
</li>
<li>
<p>To make an application and its group of tables temporarily unavailable while updating or maintaining the application</p>
</li>
<li>
<p>To perform an offline tablespace backup (even though a tablespace can be backed up while online and in use)</p>
</li>
<li>
<p>To recover a tablespace after a hardware or software failure</p>
</li>
<li>
<p>To rename or relocate tablespace data files</p>
</li>
</ul>
<p class="subhead2"><a id="ADMQS12168"></a>To take a tablespace offline:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Tablespaces</span>.</p>
<p>The Tablespaces page appears.</p>
</li>
<li>
<p>Select the tablespace to take offline, and then click <span class="bold">Edit</span>.</p>
<p>The Edit Tablespace page appears.</p>
</li>
<li>
<p>In the Status section, select <span class="bold">Offline</span>.</p>
<p>For more information about the selections on this page, click <span class="bold">Help</span>.</p>
</li>
<li>
<p>Make a selection from the <span class="bold">Offline Mode</span> list, and then click <span class="bold">Apply</span>.</p>
<p>A confirmation message appears.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
To bring the tablespace back online, return to this page, and then, under the Status section, click <span class="bold">Read Write</span>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11376" href="../../server.112/e25494/tspaces.htm#ADMIN11376"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about taking tablespaces offline and for information about renaming or relocating data files.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CACJAJAJ"></a><a id="ADMQS0624"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Dropping a Tablespace</h3>
<p><a id="sthref309"></a><a id="sthref310"></a>After a tablespace has been dropped (deleted), the objects and data in it are no longer available. To recover them can be a time-consuming process. Oracle recommends performing a backup before and after dropping a tablespace.</p>
<p class="subhead2"><a id="ADMQS12169"></a>To drop a tablespace:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Tablespaces</span>.</p>
<p>The Tablespaces page appears.</p>
</li>
<li>
<p>Select the tablespace to drop, and then click <span class="bold">Delete</span>.</p>
<p>Database Control asks for confirmation to delete the tablespace and gives you the option to also delete the associated data files from the disk.</p>
</li>
<li>
<p>Click <span class="bold">Yes</span> to remove the tablespace.</p>
<p>A confirmation is displayed and the deleted tablespace no longer appears on the Tablespaces page.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACDCJHD">"About Tablespaces"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABHEBCJ"></a><a id="ADMQS0625"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Reclaiming Unused Space</h3>
<p>This section provides background information about reclaimable unused space in the database, and provides instructions about how to reclaim this space. It contains the following topics:</p>
<ul>
<li>
<p><a href="#BABHGIAG">About Reclaimable Unused Space</a></p>
</li>
<li>
<p><a href="#BABDCGBB">About the Segment Advisor</a></p>
</li>
<li>
<p><a href="#CACJGCJA">Viewing Segment Advisor Recommendations and Reclaiming Space</a></p>
</li>
<li>
<p><a href="#CACIHABF">Running the Segment Advisor Manually</a></p>
</li>
</ul>
<a id="BABHGIAG"></a><a id="ADMQS12071"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About Reclaimable Unused Space</h4>
<p><a id="sthref311"></a><a id="sthref312"></a><a id="sthref313"></a><a id="sthref314"></a>Over time, performing insert, update, and delete operations (also referred to as DML operations) on objects within a tablespace can create pockets of empty space that individually are not big enough to be reused. Collectively, these pockets can waste large amounts of space. The sparsely populated objects that result can degrade performance during queries and DML operations.</p>
<p>Oracle Database enables you reclaim this empty space with the following online operations&mdash;that is, operations that do not block queries or DML against affected objects while the operations are proceeding:</p>
<ul>
<li>
<p>Online segment shrink</p>
<p>Online segment shrink operates on table segments and on the segments of the dependent objects of the table, such as indexes and partitions. For each segment, data is compacted to the front of the segment. Free space can either be returned to the tablespace or kept in the segment for future insert operations.</p>
<p>Online segment shrink is permitted only on segments in a locally managed tablespace with automatic segment space management. Online segment shrink is an in-place operation; no additional free space in the tablespace is required.</p>
</li>
<li>
<p>Online table redefinition (also known as <span class="bold">reorganization</span>)</p>
<p>Reorganization relocates the table and its dependent objects in a different part of the tablespace. This operation has the desirable side effect of compacting the data for those objects. For this operation to succeed, however, the tablespace must have free space equal to the size of the table and its dependent objects. Reorganization is the only permitted operation for dictionary-managed tablespaces or for locally managed tablespaces with manual segment space management.</p>
</li>
</ul>
<p>The Segment Advisor generates recommendations for shrinking or reorganizing segments that have a significant amount of reclaimable unused space.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11600" href="../../server.112/e25494/schema.htm#ADMIN11600"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about online segment shrink and online redefinition of tables</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABDCGBB"></a><a id="ADMQS12072"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About the Segment Advisor</h4>
<p><a id="sthref315"></a><a id="sthref316"></a>The Segment Advisor identifies database objects that have unused space that you can reclaim. It performs its analysis by examining usage and growth statistics and by sampling the data in the object. By default, it is configured to run automatically at regular intervals, during all maintenance windows (time periods). You can also run the Segment Advisor manually.</p>
<p>The regularly scheduled Segment Advisor task is known as the Automatic Segment Advisor. Results from the advisor are summarized on the Space Summary section of the Database Home page as Segment Advisor Recommendations.</p>
<p>During each run of the Automatic Segment Advisor, only a subset of the segments in the database are analyzed. If you suspect that segments have reclaimable space, but these segments do not appear among the Segment Advisor recommendations, then the Automatic Segment Advisor may not have chosen them for analysis. You can run the Segment Advisor manually on those segments at any time. See <a class="olink ADMIN01401" href="../../server.112/e25494/schema.htm#ADMIN01401"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about how the Automatic Segment Advisor selects tablespaces and segments for analysis.</p>
<a id="ADMQS12170"></a>
<div class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref317"></a>
<h5 class="sect4"><a id="sthref318"></a>Segment Advisor Recommendations</h5>
<p>Segment Advisor recommendations are grouped by tablespace. Only tablespace names appear on the Segment Advisor Recommendations page in Database Control.</p>
<p>If a tablespace contains any segments for which a shrink operation or reorganization is recommended, then the tablespace appears on the Segment Advisor Recommendations page. This page estimates the amount of reclaimable space for each tablespace. If you request recommendation details for a tablespace, then Database Control displays the segments in that tablespace for which recommendations were generated.</p>
<p>The recommendations provided by the Segment Adviser depend on the characteristics of the tablespace in which the segment is located. If the tablespace was created with default options, then the Segment Advisor typically recommends shrinking. If the segment is not eligible for online segment shrinking, or if it is in a dictionary-managed tablespace or a tablespace created with manual segment space management, then the Segment Advisor recommends reorganization instead.</p>
<p><a id="sthref319"></a><a id="sthref320"></a>In addition, the Automatic Segment Advisor evaluates tables that are 10MB or larger and have at least three indexes to determine the amount of space that could be saved if the tables are compressed with the OLTP compression method.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN0235" href="../../server.112/e25494/tasks.htm#ADMIN0235"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about maintenance windows</p>
</li>
</ul>
</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CACJGCJA"></a><a id="ADMQS06251"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Segment Advisor Recommendations and Reclaiming Space</h4>
<p><a id="sthref321"></a>Each Segment Advisor recommendation includes a button that you can click to begin the space reclamation process. Although space reclamation is an online process, it can consume significant resources, so you should reclaim space during off-peak hours.</p>
<p class="subhead2"><a id="ADMQS12171"></a>To view Segment Advisor recommendations and reclaim space:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>In the Space Summary section, click the numeric link adjacent to Segment Advisor Recommendations.</p>
<img width="300" height="126" src="img/home_page_space_summary.gif" alt="Description of home_page_space_summary.gif follows" /><br />
<a id="sthref322" href="img_text/home_page_space_summary.htm">Description of the illustration home_page_space_summary.gif</a><br />
<br />
<p>The Segment Advisor Recommendations page appears, showing recommendations from the most recent automatic and manual runs of the Segment Advisor.</p>
<img width="800" height="292" src="img/segment_reccom_new.gif" alt="Description of segment_reccom_new.gif follows" /><br />
<a id="sthref323" href="img_text/segment_reccom_new.htm">Description of the illustration segment_reccom_new.gif</a><br />
<br /></li>
<li>
<p>(Optional) In the View list, select <span class="bold">Recommendations for Last Automatic Run</span> to view recommendations from only the most recent automatic run of the Segment Advisor.</p>
</li>
<li>
<p>Select a tablespace, and then click <span class="bold">Recommendation Details</span>.</p>
<p>The Recommendation Details for Tablespace page appears.</p>
<p>This page lists the tablespace segments for which online segment shrink or reorganization is recommended.</p>
<img width="791" height="397" src="img/reccomend_details_new.gif" alt="Description of reccomend_details_new.gif follows" /><br />
<a id="sthref324" href="img_text/reccomend_details_new.htm">Description of the illustration reccomend_details_new.gif</a><br />
<br /></li>
<li>
<p>(Optional) Reduce the number of segments displayed in the segment list by entering search criteria in the Schema, Segment, Partition, or Minimum Reclaimable Space fields, and then clicking <span class="bold">Search</span>.</p>
</li>
<li>
<p>Examine the recommendation for each segment, and then proceed as follows:</p>
<ul>
<li>
<p>If the recommendation for any segments is to reorganize, then start reorganization for those segments by clicking the <span class="bold">Reorganize</span> button, or select multiple segments and then click the Reorganize button above the table. Follow the directions in the succeeding pages to generate a reorganization script for the selected segments.</p>
</li>
<li>
<p>If the recommendation for any segments is to shrink, then proceed with Step <a href="#BABEDIGB">7</a> through Step <a href="#BABEAGBA">13</a> for those segments.</p>
</li>
</ul>
</li>
<li>
<p><a id="BABEDIGB"></a>Do one of the following to select one or more segments to shrink:</p>
<ul>
<li>
<p>To reclaim space in a single segment, click <span class="bold">Shrink</span> under the Recommendation column for that segment.</p>
</li>
<li>
<p>To shrink one or more segments, select the segments, and then click the <span class="bold">Shrink</span> button above the table.</p>
</li>
</ul>
</li>
<li>
<p>On the Shrink Segment: Options page, accept <span class="bold">Compact Segments and Release Space</span>.</p>
<p>This option returns freed space to the tablespace. If you do not want to release the freed space to the tablespace, then choose <span class="bold">Compact Segments</span>. You can rerun the shrink process later to release the freed space.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Choose <span class="bold">Compact Segments</span> if you believe that you may have long-running queries currently in operation that involve the segments being shrunk. Long-running queries that were started before the shrink operation completes might attempt to read from blocks that have been reclaimed, which results in an error. Alternatively, you can schedule the shrink operation for an off-peak period in Step <a href="#BABIDFFG">10</a>.</div>
</li>
<li>
<p>Click <span class="bold">Implement</span>.</p>
<p>The Shrink Segment: Schedule page appears.</p>
</li>
<li>
<p><a id="BABIDFFG"></a>Note your job name, or replace it with a job name of your choosing.</p>
</li>
<li>
<p>Under the heading Start, select <span class="bold">Immediately</span>.</p>
<p>Because the shrink operation can be resource intensive, you can also select <span class="bold">Later</span> and schedule the operation for an off-peak period.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
<p>The Scheduler Jobs page appears, and shows the shrink job in the Running subpage.</p>
</li>
<li>
<p><a id="BABEAGBA"></a>Click <span class="bold">Refresh</span> to update the page until the job disappears from the Running subpage.</p>
<p>You can then switch to the History or All subpage to view the completed status of the job.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CACIHABF"></a><a id="ADMQS06252"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Running the Segment Advisor Manually</h4>
<p><a id="sthref325"></a>You can run the Segment Advisor manually. You do so when you want to analyze objects not selected for analysis by the Automatic Segment Advisor, or when you want more up-to-date recommendations on a tablespace.</p>
<p>See <a class="olink ADMIN11603" href="../../server.112/e25494/schema.htm#ADMIN11603"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about running the Segment Advisor manually.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACDDADD"></a><a id="ADMQS12073"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing the Online Redo Log</h2>
<p>The online redo log files are a critical component in database recovery. Every transaction in the database updates the redo logs, regardless of whether archiving is enabled. During crash, instance, or media recovery, the database properly applies redo log files in ascending order by using the log sequence number of the necessary archived and redo log files.</p>
<p>If properly configured, the online redo logs require little maintenance. This section describes the more common redo log management tasks. It contains the following topics:</p>
<ul>
<li>
<p><a href="#CACGBBGJ">Multiplexing the Online Redo Log</a></p>
</li>
<li>
<p><a href="#CACCHCJD">Switching a Log File</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACDFFGG">"About Online Redo Log Files"</a></p>
</li>
<li>
<p><a href="#CACFFHCB">"Viewing Online Redo Log File Information"</a></p>
</li>
</ul>
</div>
<a id="CACGBBGJ"></a><a id="ADMQS12074"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Multiplexing the Online Redo Log</h3>
<p>Oracle recommends that you multiplex the online redo log. Multiplexing provides better protection for data if an instance or media failure occurs.</p>
<p><a id="sthref326"></a>To multiplex your online redo log, you must add members to each online redo log group. It is not required that online redo log groups be symmetrical, but Oracle recommends that your groups all have the same number of members. A database must have a minimum of two online redo log groups.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When you multiplex the online redo log, the database must increase the amount of I/O that it performs. Depending on your configuration, this action may affect overall database performance.</div>
<p class="subhead2"><a id="ADMQS12172"></a>To multiplex the online redo log:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Redo Log Groups</span>.</p>
<p>The Redo Log Groups page appears.</p>
</li>
<li>
<p><a id="BABDCHEI"></a>Select a group and click <span class="bold">Edit</span>.</p>
<p>The Edit Redo Log Group page appears.</p>
</li>
<li>
<p>Click <span class="bold">Add</span>.</p>
<p>The Add Redo Log Member page appears.</p>
</li>
<li>
<p>If the Storage Type is set to File System, then in the <span class="bold">File Name</span> field, enter a file name for the new redo log member.</p>
<p>For example, if your existing member file name is <code>REDO01.log</code>, then you might name this member <code>REDO01a.log</code>.</p>
</li>
<li>
<p>In the <span class="bold">File Directory</span> field, enter the directory where you want the data file to be stored on disk.</p>
<p>You can create this file in the same directory as the other member of the redo log file group, but it is recommended that you store members on separate disk drives. That way, if there is a drive failure, then you still have access to one member.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>, and then click <span class="bold">Apply</span> to accept your changes.</p>
<p>A confirmation message appears.</p>
</li>
<li>
<p><a id="BABDGBCD"></a>At the top of the page, click the <span class="bold">Redo Log Groups</span> link to return to the Redo Log Groups page.</p>
</li>
<li>
<p>Repeat Step <a href="#BABDCHEI">4</a> through Step <a href="#BABDGBCD">9</a> for every existing log group.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CACCHCJD"></a><a id="ADMQS12075"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Switching a Log File</h3>
<p><a id="sthref327"></a><a id="sthref328"></a><a id="sthref329"></a><a id="sthref330"></a>When a log switch occurs, the log writer (LGWR) process stops writing to the current online redo log group and starts writing to the next available redo log group. After a log switch, the current online redo log group becomes inactive, and the next available online redo log group becomes the current online redo log group.</p>
<p>You can force a log switch to make the current redo group inactive and available for redo log maintenance operations. Forcing a log switch is useful in configurations with large redo log files that take a long time to fill. For example, you might want to:</p>
<ul>
<li>
<p>Drop the current redo group, but are not able to do so until the group is inactive</p>
</li>
<li>
<p>Archive the current online redo log group members immediately, even though they are not yet completely filled</p>
</li>
</ul>
<p class="subhead2"><a id="ADMQS12173"></a>To switch a log file:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Storage section, click <span class="bold">Redo Log Groups</span>.</p>
<p>The Redo Log Groups page appears.</p>
</li>
<li>
<p>In the Actions list, select <span class="bold">Switch logfile</span>, and then click <span class="bold">Go</span>.</p>
<p>A confirmation message appears. The status of the group that had been Current changes to Active, and the status of the next group in the list changes from Inactive to Current.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACJFFJI"></a><a id="ADMQS063"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Undo Data</h2>
<p><a id="sthref331"></a>Beginning with Oracle Database 11<span class="italic">g</span>, for a default installation, Oracle Database automatically manages the undo data. There is typically no need for database administrator (DBA) intervention. However, if your installation uses Oracle Flashback operations, then you may have to perform some undo management tasks to ensure the success of these operations.</p>
<p>This section provides background information and instructions for managing undo data. It contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDFJHBI">About Undo Data</a></p>
</li>
<li>
<p><a href="#BABHGEEH">About Managing Undo Data</a></p>
</li>
<li>
<p><a href="#CHDBAEDB">Viewing Undo Information</a></p>
</li>
<li>
<p><a href="#BABDJDBF">Computing the Minimum Undo Tablespace Size Using the Undo Advisor</a></p>
</li>
<li>
<p><a href="#BABEAIHJ">Changing the Undo Tablespace to a Fixed Size</a></p>
</li>
</ul>
<a id="CHDFJHBI"></a><a id="ADMQS0631"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Undo Data</h3>
<p>When a transaction modifies data, Oracle Database copies the original data before<a id="sthref332"></a> modifying it. The original copy of the modified data is called <span class="bold">undo data</span>. Saving this information is necessary for the following reasons:</p>
<ul>
<li>
<p><a id="sthref333"></a>To undo any uncommitted changes made to the database if a rollback is necessary. A rollback can be needed because a user wants to undo the changes of a misguided or unintentional transaction, or it can be part of a recovery operation.</p>
</li>
<li>
<p><a id="sthref334"></a>To provide <span class="bold">read consistency</span>, which means that each user can get a consistent view of data, even while other changes may be occurring against the data. With read consistency, a user session does not see uncommitted changes made in other user sessions (sometimes referred to as <span class="italic">dirty reads</span>). For example, if a user issues a query at 10:00 a.m. and the query lasts for 15 minutes, then the query results reflect the entire state of the data at 10:00 a.m., regardless of update or insert operations performed by other users after the query started.</p>
</li>
<li>
<p>To enable certain Oracle Flashback features, such as Oracle Flashback Query and Oracle Flashback Table, which enable you to view or recover data to a previous point in time.</p>
</li>
</ul>
<p class="subhead2"><a id="ADMQS12174"></a>Undo Tablespace</p>
<p>With automatic undo management, undo data is stored in an <a id="sthref335"></a><a id="sthref336"></a>undo tablespace. Undo tablespaces have additional properties beyond those of permanent tablespaces. There can be multiple undo tablespaces, but only one can be active for an Oracle instance.</p>
<p><a id="sthref337"></a>When you create the database using Database Configuration Assistant (DBCA), it creates an autoextending undo tablespace named <code>UNDOTBS1</code>, with a maximum extension size of 32,767 MB.</p>
<p class="subhead2"><a id="ADMQS12175"></a>Undo Retention</p>
<p><a id="sthref338"></a>Oracle Database automatically ensures that undo data that is in use by an active transaction is never overwritten until that transaction has been committed. After the transaction has been committed, the space occupied by that undo data can be reused, or overwritten. In this case, that undo data could be overwritten if space in the undo tablespace becomes scarce.</p>
<p>Even after a transaction has been committed, it is useful to retain (not overwrite) its undo data, to ensure the success of Oracle Flashback features and for read consistency for long-running queries. To this end, the database maintains and automatically tunes an <span class="bold">undo retention period</span>. Committed undo data whose age is less than the undo retention period is retained for use by queries or Oracle Flashback operations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CNCPT221" href="../../server.112/e40540/consist.htm#CNCPT221"><span class="italic">Oracle Database Concepts</span></a> for more information about read consistency</p>
</li>
<li>
<p><a class="olink ADFNS1008" href="../../appdev.112/e41502/adfns_flashback.htm#ADFNS1008"><span class="italic">Oracle Database Advanced Application Developer's Guide</span></a> for more information about Oracle Flashback features</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABHGEEH"></a><a id="ADMQS12104"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Managing Undo Data</h3>
<p><a id="sthref339"></a>Although by default Oracle Database manages undo data and the undo tablespace automatically, if your installation uses Oracle Flashback features, then you may have to perform some undo management tasks to ensure the success of these operations.</p>
<p>Oracle Flashback operations resulting in <code>snapshot</code> <code>too</code> <code>old</code> errors indicate that you must intervene to ensure that sufficient undo data is retained to support these operations.</p>
<p><a id="sthref340"></a><a id="sthref341"></a><a id="sthref342"></a>The following methods better support Oracle Flashback operations:</p>
<ul>
<li>
<p>Set the minimum undo retention period for the autoextending tablespace to be as long as the longest expected Oracle Flashback operation.</p>
<p>You achieve this goal by setting the <code>UNDO_RETENTION</code> initialization parameter. See <a class="olink ADMIN11465" href="../../server.112/e25494/undo.htm#ADMIN11465"><span class="italic">Oracle Database Administrator's Guide</span></a> for details.</p>
</li>
<li>
<p>Change the undo tablespace to a fixed size.</p>
<p><a id="sthref343"></a><a id="sthref344"></a><a id="sthref345"></a>For an autoextending undo tablespace, Oracle Database always automatically tunes the undo retention period to be slightly longer than the longest-running active query. However, this autotuned retention period may be insufficient to accommodate Oracle Flashback operations. If the undo tablespace has autoextending disabled, or has a fixed size, then Oracle Database uses a different method for tuning the undo retention period to better accommodate Oracle Flashback operations.</p>
<p>To change the undo tablespace to a fixed size, you must choose a tablespace size that is sufficiently large. If you choose an undo tablespace size that is too small, then the following errors could occur:</p>
<ul>
<li>
<p>DML could fail because there is not enough space to accommodate undo data for new transactions.</p>
</li>
<li>
<p>Long-running queries could fail with a <code>snapshot</code> <code>too</code> <code>old</code> error, which means that there was insufficient undo data for read consistency.</p>
</li>
</ul>
<p>Oracle Enterprise Manager Database Control (Database Control) includes an Undo Advisor to help you determine the minimum size for the fixed size of the undo tablespace. See <a href="#BABDJDBF">"Computing the Minimum Undo Tablespace Size Using the Undo Advisor"</a>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDFJHBI">"About Undo Data"</a></p>
</li>
<li>
<p><a href="#BABDJDBF">"Computing the Minimum Undo Tablespace Size Using the Undo Advisor"</a></p>
</li>
<li>
<p><a href="#BABEAIHJ">"Changing the Undo Tablespace to a Fixed Size"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDBAEDB"></a><a id="ADMQS0634"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Undo Information</h3>
<p><a id="sthref346"></a>You can use the Automatic Undo Management page to view the following information about your undo configuration:</p>
<ul>
<li>
<p>Name and current size of the undo tablespace</p>
</li>
<li>
<p>Autoextend tablespace setting (Yes or No)</p>
</li>
<li>
<p>Current autotuned undo retention period</p>
</li>
</ul>
<p class="subhead2"><a id="ADMQS12176"></a>To view undo information:</p>
<ol>
<li>
<p>Go to the Database Home page.</p>
<p>See <a href="em_manage.htm#BABHJAGE">"Accessing the Database Home Page"</a>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to view the Server subpage.</p>
</li>
<li>
<p>In the Database Configuration section, click <span class="bold">Automatic Undo Management</span>.</p>
<p>The Automatic Undo Management page appears.</p>
</li>
</ol>
<img width="859" height="644" src="img/undo_management_112.gif" alt="Description of undo_management_112.gif follows" /><br />
<a id="sthref347" href="img_text/undo_management_112.htm">Description of the illustration undo_management_112.gif</a><br />
<br />
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDFJHBI">"About Undo Data"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABDJDBF"></a><a id="ADMQS0635"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Computing the Minimum Undo Tablespace Size Using the Undo Advisor</h3>
<p><a id="sthref348"></a><a id="sthref349"></a><a id="sthref350"></a><a id="sthref351"></a>If you must change the undo tablespace to a fixed size, then use the Undo Advisor to help determine the minimum required size.<a id="sthref352"></a><a id="sthref353"></a> You can also use the Undo Advisor to set the minimum undo retention period.</p>
<p>To configure the undo tablespace to have a fixed size, Oracle suggests that you first allow enough time after database creation to run a full workload, thus allowing the undo tablespace to grow to its minimum required size to handle the workload. Then, you can use the Undo Advisor to determine the best size to configure the undo tablespace to allow for future long-running queries and Oracle Flashback operations.</p>
<p class="subhead2"><a id="ADMQS12177"></a>To compute the minimum undo tablespace size using the Undo Advisor:</p>
<ol>
<li>
<p>Go to the Automatic Undo Management page.</p>
<p>See <a href="#CHDBAEDB">"Viewing Undo Information"</a>.</p>
</li>
<li>
<p>Decide whether you want to compute the minimum size of the undo tablespace based on statistics gathered over a designated time period (such as the last 7 days), or based on an undo retention period of a duration that you choose.</p>
<p>The automatically gathered statistics include the duration of the longest-running query and the undo generation rate. Computing the minimum undo tablespace size based on these statistics is advisable if you do not use Oracle Flashback features or if you do not expect future long-running queries to exceed the duration of previous long-running queries.</p>
<p>If you prefer to choose and enter the duration of a desired undo retention period, then the duration must be based on your expectations of the duration of future long-running queries or Oracle Flashback operations.</p>
</li>
<li>
<p>To compute the minimum undo tablespace size based on statistics gathered over a period, complete the following steps:</p>
<ol>
<li>
<p>In the Analysis Period section, in the Analysis Time Period list, select the desired analysis time period.</p>
<p>If you select Customize Time Period, then a page appears that enables you to enter the starting and ending date and time for the period.</p>
</li>
<li>
<p>Select <span class="bold">Automatically chosen based on longest query in analysis period</span>.</p>
</li>
<li>
<p>Click <span class="bold">Run Analysis</span>.</p>
<p>The minimum required undo tablespace size is displayed in the Analysis Results section.</p>
</li>
<li>
<p>(Optional) Click <span class="bold">Show Graph</span> to view a graph of the analysis results.</p>
</li>
</ol>
</li>
<li>
<p>To compute the minimum undo tablespace size based on a duration that you enter, complete the following steps:</p>
<ol>
<li>
<p>In the Analysis Period section, select <span class="bold">Specified manually to allow for longer duration queries or flashback</span>.</p>
</li>
<li>
<p>In the <span class="bold">Duration</span> field, enter the desired duration of the undo retention period in seconds, minutes, hours, or days.</p>
<p>You may compute this duration as follows:</p>
<ul>
<li>
<p>Determine the duration of the expected longest-running query for your workload.</p>
<p>You can base your determination on the longest-running query recorded during a previous workload period. This information is available from the System Activity subpage of the Automatic Undo Management page. You choose the analysis period for this subpage by selecting from the Analysis Time Period list on the General subpage. You can choose a custom analysis period that corresponds to your typical workload period.</p>
</li>
<li>
<p>Determine the longest duration that is expected for an Oracle Flashback operation.</p>
</li>
<li>
<p>Take the maximum of these two durations.</p>
</li>
</ul>
</li>
<li>
<p>In the Analysis Period section of the General subpage, click <span class="bold">Run Analysis</span>.</p>
<p>The minimum required undo tablespace size is displayed in the Analysis Results section.</p>
</li>
<li>
<p>(Optional) Click <span class="bold">Show Graph</span> to view a graph of the analysis results.</p>
<img width="520" height="526" src="img/undo_management_graph.gif" alt="Description of undo_management_graph.gif follows" /><br />
<a id="sthref354" href="img_text/undo_management_graph.htm">Description of the illustration undo_management_graph.gif</a><br />
<br /></li>
</ol>
</li>
<li>
<p>(Optional) Click the tick-mark, or point, on the curve that corresponds to the desired undo retention period.</p>
<p>The Duration field changes to match the selected undo retention period, and the Minimum Required Undo Tablespace Size field above the graph changes to reflect the matching required size.</p>
</li>
<li>
<p>(Optional) Click <span class="bold">Apply</span>.</p>
<p>The minimum undo retention period is set to the value of the Duration field.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Running an analysis or setting the minimum undo retention with the Undo Advisor does not change the size of the undo tablespace. You must follow the instructions in <a href="#BABEAIHJ">"Changing the Undo Tablespace to a Fixed Size"</a> to change the size of the undo tablespace.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDFJHBI">"About Undo Data"</a></p>
</li>
<li>
<p><a href="#BABHGEEH">"About Managing Undo Data"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABEAIHJ"></a><a id="ADMQS12105"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Changing the Undo Tablespace to a Fixed Size</h3>
<p><a id="sthref355"></a>You change the undo tablespace to a fixed size to prevent the tablespace from growing too large or to better support Oracle Flashback operations.</p>
<p class="subhead2"><a id="ADMQS12178"></a>To change the undo tablespace to a fixed size:</p>
<ol>
<li>
<p>On the Automatic Undo Management page, after determining the minimum required undo tablespace size, click <span class="bold">Edit Undo Tablespace</span>.</p>
<p>The Edit Tablespace page appears, displaying the properties of the undo tablespace.</p>
</li>
<li>
<p>In the Datafiles section, click <span class="bold">Edit</span>.</p>
<p>The Edit Datafile page appears.</p>
</li>
<li>
<p>In the <span class="bold">File Size</span> field, enter the computed minimum size for the undo tablespace.</p>
<p>See <a href="#BABDJDBF">"Computing the Minimum Undo Tablespace Size Using the Undo Advisor"</a>.</p>
</li>
<li>
<p>In the Storage section, deselect <span class="bold">Automatically extend data file when full (AUTOEXTEND)</span>.</p>
</li>
<li>
<p>Click <span class="bold">Continue</span>.</p>
<p>The Edit Tablespace page returns.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span>.</p>
<p>A confirmation message appears.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDFJHBI">"About Undo Data"</a></p>
</li>
<li>
<p><a href="#BABHGEEH">"About Managing Undo Data"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACHDCBJ"></a><a id="ADMQS065"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Storage: Oracle By Example Series</h2>
<p>Oracle By Example (OBE) has a series on the <span class="italic">Oracle Database 2 Day DBA</span> guide. This OBE steps you through the tasks in this chapter and includes annotated screenshots.</p>
<p>To view the Storage OBE, in your browser, enter the following URL:</p>
<p><code><a href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/11g/r2/2day_dba/storage/storage.htm">http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/11g/r2/2day_dba/storage/storage.htm</a></code></p>
</div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1417">
<tr>
<td class="cellalignment1426">
<table class="cellalignment1422">
<tr>
<td class="cellalignment1421"><a href="instance.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1421"><a href="users_secure.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2004, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1428">
<table class="cellalignment1420">
<tr>
<td class="cellalignment1421"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1421"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1421"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1421"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1421"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1421"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
