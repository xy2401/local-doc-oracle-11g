<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Monitoring XStream</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 735" />
<meta name="dcterms.created" content="2013-07-02T6:44:43Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database XStream Guide" />
<meta name="dcterms.identifier" content="E16545-09" />
<meta name="dcterms.isVersionOf" content="XSTRM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2009, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="xstrm_man.htm" title="Previous" type="text/html" />
<link rel="Next" href="xstrm_trouble.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e16545.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/22</span> <!-- End Header -->
<div id="XSTRM1437" class="chapter"><a id="CHDDBGIA"></a>
<h1 class="chapter"><span class="secnum">6</span> Monitoring XStream</h1>
<p><a id="sthref257"></a>This chapter provides instructions for monitoring XStream.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CJHGFGHI">About Monitoring XStream</a></p>
</li>
<li>
<p><a href="#CJHBGGDG">Monitoring Session Information About XStream Components</a></p>
</li>
<li>
<p><a href="#CHDCGBEC">Monitoring XStream Out</a></p>
</li>
<li>
<p><a href="#CHDIGIIB">Monitoring XStream In</a></p>
</li>
<li>
<p><a href="#CHDIEBBF">Monitoring XStream Rules</a></p>
</li>
<li>
<p><a href="#CFFECFAH">XStream and the Oracle Streams Performance Advisor</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_cncpt.htm#BCEBDGFJ">Chapter 2, "XStream Concepts"</a></p>
</li>
<li>
<p><a href="xstrm_use.htm#CHDCFEHI">Chapter 3, "XStream Use Cases"</a></p>
</li>
<li>
<p><a href="xstrm_config.htm#CBDIJEFE">Chapter 4, "Configuring XStream"</a></p>
</li>
<li>
<p><a href="xstrm_man.htm#CHDFDFHB">Chapter 5, "Managing XStream"</a></p>
</li>
<li>
<p><a href="xstrm_trouble.htm#BABJJCEG">Chapter 7, "Troubleshooting XStream"</a></p>
</li>
</ul>
</div>
<a id="CJHGFGHI"></a>
<div id="XSTRM72638" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Monitoring XStream</h2>
<p>This chapter describes monitoring an XStream Out configuration and an XStream In configuration. This chapter provides instructions for querying data dictionary views related to XStream. The queries provide information about XStream components and statistics related to XStream.</p>
<p>The main interface for monitoring XStream database components is SQL*Plus, although you can monitor some aspects of an XStream configuring using Oracle Enterprise Manager. For example, you can view information about capture processes, outbound servers, inbound servers, and rules in Enterprise Manager. Outbound servers and inbound servers appear as apply processes in Enterprise Manager.</p>
<p>This chapter also describes using the Oracle Streams Performance Advisor to monitor an XStream configuration. The Oracle Streams Performance Advisor consists of the <code>DBMS_STREAMS_ADVISOR_ADM</code> package and a collection of data dictionary views. The Oracle Streams Performance Advisor enables you to monitor the topology and performance of an XStream environment.</p>
</div>
<!-- class="sect1" -->
<a id="CJHBGGDG"></a>
<div id="XSTRM72607" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring Session Information About XStream Components<a id="sthref258"></a><a id="sthref259"></a></h2>
<div class="infobox-note">
<p class="notep1">Note:</p>
This functionality is available starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2).</div>
<p>The query in this section displays the following session information about each XStream component in a database:</p>
<ul>
<li>
<p>The XStream component name</p>
</li>
<li>
<p>The session identifier</p>
</li>
<li>
<p>The serial number</p>
</li>
<li>
<p>The operating system process identification number</p>
</li>
<li>
<p>The XStream process number</p>
</li>
</ul>
<p>This query is especially useful for determining the session information for specific XStream components when there are multiple XStream Out or XStream In components configured in a database.</p>
<p class="orderedlisttitle">To display this information for each XStream component in a database:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN ACTION HEADING 'XStream Component' FORMAT A30
COLUMN SID HEADING 'Session ID' FORMAT 99999
COLUMN SERIAL# HEADING 'Session|Serial|Number' FORMAT 99999999
COLUMN PROCESS HEADING 'Operating System|Process Number' FORMAT A17
COLUMN PROCESS_NAME HEADING 'XStream|Process|Number' FORMAT A7
 
SELECT /*+PARAM('_module_action_old_length',0)*/ ACTION,
       SID,
       SERIAL#,
       PROCESS,
       SUBSTR(PROGRAM,INSTR(PROGRAM,'(')+1,4) PROCESS_NAME
  FROM V$SESSION
  WHERE MODULE ='XStream';
</pre></li>
</ol>
<p>Your output for an XStream Out configuration looks similar to the following:</p>
<pre>
                                            Session                   XStream
                                             Serial Operating System  Process
XStream Component              Session ID    Number Process Number    Number
------------------------------ ---------- --------- ----------------- -------
XOUT - Apply Server                    35        33 16386             TNS
XOUT - Apply Coordinator               41         1 14093             AP01
XOUT - Apply Reader                    43         1 14095             AS01
XOUT - Apply Server                    45         1 14097             AS02
XOUT - Propagation Send/Rcv            47        55 16401             CS01
CAP$_XOUT_1 - Capture                  48         7 16399             CP01
</pre>
<p>The row that shows <code>TNS</code> for the XStream process number contains information about the session for the XStream client application that is attached to the outbound server.</p>
<p>Your output for an XStream In configuration looks similar to the following:</p>
<pre>
                                            Session                   XStream
                                             Serial Operating System  Process
XStream Component              Session ID    Number Process Number    Number
------------------------------ ---------- --------- ----------------- -------
XIN - Propagation Receiver             32        21 16386             TNS
XIN - Apply Coordinator                38        23 16414             AP01
XIN - Apply Reader                     40         3 16418             AS01
XIN - Apply Server                     42         1 16420             AS02
XIN - Apply Server                     44         1 16422             AS03
XIN - Apply Server                     46         1 16424             AS04
XIN - Apply Server                     48         1 16426             AS05
</pre>
<p>The row that shows <code>TNS</code> for the XStream process number contains information about the session for the XStream client application that is attached to the inbound server.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN30223" href="../../server.112/e40402/dynviews_3016.htm#REFRN30223"><span class="italic">Oracle Database Reference</span></a> for more information about the <code>V$SESSION</code> view</div>
</div>
<!-- class="sect1" -->
<a id="CHDCGBEC"></a>
<div id="XSTRM1438" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring XStream Out<a id="sthref261"></a><a id="sthref262"></a><a id="sthref263"></a></h2>
<p>This section provides sample queries that you can use to monitor XStream Out.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CHDJCIEH">Displaying General Information About an Outbound Server</a></p>
</li>
<li>
<p><a href="#CHDFJFJD">Displaying Status and Error Information for an Outbound Server</a></p>
</li>
<li>
<p><a href="#CJHJAADG">Displaying Information About an Outbound Server's Current Transaction</a></p>
</li>
<li>
<p><a href="#CJHDDHFI">Displaying Statistics for an Outbound Server</a></p>
</li>
<li>
<p><a href="#CHDJHEGH">Displaying the Processed Low Position for an Outbound Server</a></p>
</li>
<li>
<p><a href="#CHDFDAAA">Determining the Process Information for an Outbound Server</a></p>
</li>
</ul>
<p>With XStream Out, an Oracle Streams apply process functions as an outbound server. Therefore, you can also use the data dictionary views for apply processes to monitor outbound servers. In addition, an XStream Out environment includes capture processes and queues, and might include other components, such as propagations, rules, and rule-based transformations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS846" href="../../server.112/e17069/pt_mon.htm#STRMS846"><span class="italic">Oracle Streams Concepts and Administration</span></a></div>
<a id="CHDJCIEH"></a>
<div id="XSTRM1439" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying General Information About an Outbound Server<a id="sthref264"></a></h3>
<p>You can display the following information for an outbound server by running the query in this section:</p>
<ul>
<li>
<p>The outbound server name</p>
</li>
<li>
<p>The name of the connect user for the outbound server</p>
<p>The connect user is the user who can attach to the outbound server to retrieve the logical change record (LCR) stream. The client application must attach to the outbound server as the specified connect user.</p>
</li>
<li>
<p>The name of the capture user for the capture process that captures changes for the outbound server to process</p>
</li>
<li>
<p>The name of the capture process that captures changes for the outbound server to process</p>
</li>
<li>
<p>The name of the source database for the captured changes</p>
</li>
<li>
<p>The owner of the queue used by the outbound server</p>
</li>
<li>
<p>The name of the queue used by the outbound server</p>
</li>
</ul>
<p>The <code>DBA_XSTREAM_OUTBOUND</code> view contains information about the capture user, the capture process, and the source database in either of the following cases:</p>
<ul>
<li>
<p>The outbound server was created using the <code>CREATE_OUTBOUND</code> procedure in the <code>DBMS_XSTREAM_ADM</code> package.</p>
</li>
<li>
<p>The outbound server was created using the <code>ADD_OUTBOUND</code> procedure in the <code>DBMS_XSTREAM_ADM</code> package, and the capture process for the outbound server runs on the same database as the outbound server.</p>
</li>
</ul>
<p>If the outbound server was created using the <code>ADD_OUTBOUND</code> procedure, and the capture process for the outbound server is on a different database, then the <code>DBA_XSTREAM_OUTBOUND</code> view does not contain information about the capture user, the capture process, or the source database.</p>
<p class="orderedlisttitle">To display this general information about an outbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Outbound|Server|Name' FORMAT A10
COLUMN CONNECT_USER HEADING 'Connect|User' FORMAT A10
COLUMN CAPTURE_USER HEADING 'Capture|User' FORMAT A10
COLUMN CAPTURE_NAME HEADING 'Capture|Process|Name' FORMAT A11
COLUMN SOURCE_DATABASE HEADING 'Source|Database' FORMAT A11
COLUMN QUEUE_OWNER HEADING 'Queue|Owner' FORMAT A10
COLUMN QUEUE_NAME HEADING 'Queue|Name' FORMAT A10

SELECT SERVER_NAME, 
       CONNECT_USER, 
       CAPTURE_USER, 
       CAPTURE_NAME,
       SOURCE_DATABASE,
       QUEUE_OWNER,
       QUEUE_NAME
  FROM DBA_XSTREAM_OUTBOUND;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Outbound                         Capture
Server     Connect    Capture    Process     Source      Queue      Queue
Name       User       User       Name        Database    Owner      Name
---------- ---------- ---------- ----------- ----------- ---------- ----------
XOUT       XSTRMADMIN XSTRMADMIN CAP$_XOUT_1 DB.EXAMPLE. XSTRMADMIN Q$_XOUT_2
                                             COM
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_static_views.htm#CHDCDHFG">"ALL_XSTREAM_OUTBOUND"</a></p>
</li>
<li>
<p><a class="olink STRMS878" href="../../server.112/e17069/strms_cpmon.htm#STRMS878"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDFJFJD"></a>
<div id="XSTRM1440" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying Status and Error Information for an Outbound Server<a id="sthref266"></a></h3>
<p>You can monitor an outbound server using the same queries as you use to monitor an Oracle Streams apply process. See <a class="olink STRMS940" href="../../server.112/e17069/strms_apmon.htm#STRMS940"><span class="italic">Oracle Streams Concepts and Administration</span></a> for instructions.</p>
<p>The <code>ALL_APPLY</code> and <code>DBA_APPLY</code> views show <code>XStream</code> <code>Out</code> in the <code>PURPOSE</code> column for an apply process that is functioning as an outbound server.</p>
<p class="orderedlisttitle">To display detailed information about an outbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN APPLY_NAME HEADING 'Apply Name' FORMAT A10
COLUMN STATUS HEADING 'Status' FORMAT A8
COLUMN ERROR_NUMBER HEADING 'Error Number' FORMAT 9999999
COLUMN ERROR_MESSAGE HEADING 'Error Message' FORMAT A40

SELECT APPLY_NAME, 
       STATUS,
       ERROR_NUMBER,
       ERROR_MESSAGE
  FROM DBA_APPLY
  WHERE PURPOSE = 'XStream Out';
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Apply Name Status   Error Number Error Message
---------- -------- ------------ ----------------------------------------
XOUT       ENABLED
</pre>
<p>This output shows that <code>XOUT</code> is an apply process that is functioning as an outbound server. Use the instructions in <a class="olink STRMS940" href="../../server.112/e17069/strms_apmon.htm#STRMS940"><span class="italic">Oracle Streams Concepts and Administration</span></a> to display detailed information about the outbound server.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_static_views.htm#CHDCIIAB">"ALL_APPLY"</a></div>
</div>
<!-- class="sect2" -->
<a id="CJHJAADG"></a>
<div id="XSTRM72608" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying Information About an Outbound Server's Current Transaction<a id="sthref268"></a><a id="sthref269"></a><a id="sthref270"></a><a id="sthref271"></a></h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This functionality is available starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2).</div>
<p>The <code>V$XSTREAM_OUTBOUND_SERVER</code> view contains the following information about the transaction currently being processed by an XStream outbound server:</p>
<ul>
<li>
<p>The name of the outbound server</p>
</li>
<li>
<p>The transaction ID of the transaction currently being processed</p>
</li>
<li>
<p>Commit system change number (SCN) of the transaction currently being processed</p>
</li>
<li>
<p>Commit position of the transaction currently being processed</p>
</li>
<li>
<p>The position of the last LCR sent to the XStream client application</p>
</li>
<li>
<p>The message number of the current LCR being processed by the outbound server</p>
</li>
</ul>
<p>Run this query to determine how many LCRs an outbound server has processed in a specific transaction. You can query the <code>TOTAL_MESSAGE_COUNT</code> column in the <code>V$XSTREAM_TRANSACTION</code> view to determine the total number of LCRs in a transaction.</p>
<p class="orderedlisttitle">To display information about an outbound server's current transaction:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Outbound|Server|Name' FORMAT A10
COLUMN 'Transaction ID' HEADING 'Transaction|ID' FORMAT A11
COLUMN COMMITSCN HEADING 'Commit SCN' FORMAT 9999999999999
COLUMN COMMIT_POSITION HEADING 'Commit Position' FORMAT A15
COLUMN LAST_SENT_POSITION HEADING 'Last Sent|Position' FORMAT A15
COLUMN MESSAGE_SEQUENCE HEADING 'Message|Number' FORMAT 999999999
 
SELECT SERVER_NAME,
       XIDUSN ||'.'|| 
       XIDSLT ||'.'||
       XIDSQN "Transaction ID",
       COMMITSCN,
       COMMIT_POSITION,
       LAST_SENT_POSITION,
       MESSAGE_SEQUENCE
  FROM V$XSTREAM_OUTBOUND_SERVER;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Outbound
Server     Transaction                                Last Sent          Message
Name       ID              Commit SCN Commit Position Position            Number
---------- ----------- -------------- --------------- --------------- ----------
XOUT       17.23.59            645856 00000009DAE0000 00000009DAE0000          4
                                      000010000000100 000010000000100
                                      000009DAE000000 000009DAE000000
                                      0010000000101   0010000000101
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>COMMITSCN</code> and <code>COMMIT_POSITION</code> values are populated only if the <code>COMMITTED_DATA_ONLY</code> value is <code>YES</code> in <code>V$XSTREAM_OUTBOUND_SERVER</code>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_dp_views.htm#BABDJDFJ">"V$XSTREAM_OUTBOUND_SERVER"</a></p>
</li>
<li>
<p><a href="xstrm_dp_views.htm#CHDGHDAB">"V$XSTREAM_TRANSACTION"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CJHDDHFI"></a>
<div id="XSTRM72609" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying Statistics for an Outbound Server<a id="sthref273"></a><a id="sthref274"></a><a id="sthref275"></a><a id="sthref276"></a></h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This functionality is available starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2).</div>
<p>The <code>V$XSTREAM_OUTBOUND_SERVER</code> view contains the following statistics about the database changes processed by an XStream outbound server:</p>
<ul>
<li>
<p>The name of the outbound server</p>
</li>
<li>
<p>The number of transactions sent from the outbound server to the XStream client application since the last time the client application attached to the outbound server</p>
</li>
<li>
<p>The number of LCRs sent from the outbound server to the XStream client application since the last time the client application attached to the outbound server</p>
</li>
<li>
<p>The number of megabytes sent from the outbound server to the XStream client application since the last time the client application attached to the outbound server</p>
</li>
<li>
<p>The amount of time the outbound server spent sending LCRs to the XStream client application since the last time the client application attached to the outbound server</p>
</li>
<li>
<p>The message number of the last LCR sent by the outbound server to the XStream client application</p>
</li>
<li>
<p>Creation time at the source database of the last LCR sent by the outbound server to the client application</p>
</li>
</ul>
<p class="orderedlisttitle">To display statistics for an outbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Outbound|Server|Name' FORMAT A8
COLUMN TOTAL_TRANSACTIONS_SENT HEADING 'Total|Trans|Sent' FORMAT 9999999
COLUMN TOTAL_MESSAGES_SENT HEADING 'Total|LCRs|Sent' FORMAT 9999999999
COLUMN BYTES_SENT HEADING 'Total|MB|Sent' FORMAT 99999999999999
COLUMN ELAPSED_SEND_TIME HEADING 'Time|Sending|LCRs|(in seconds)' FORMAT 99999999
COLUMN LAST_SENT_MESSAGE_NUMBER HEADING 'Last|Sent|Message|Number' FORMAT 99999999
COLUMN LAST_SENT_MESSAGE_CREATE_TIME HEADING 'Last|Sent|Message|Creation|Time' FORMAT A10
 
SELECT SERVER_NAME,
       TOTAL_TRANSACTIONS_SENT,
       TOTAL_MESSAGES_SENT,
       (BYTES_SENT/1024)/1024 BYTES_SENT,
       (ELAPSED_SEND_TIME/100) ELAPSED_SEND_TIME,
       LAST_SENT_MESSAGE_NUMBER,
       LAST_SENT_MESSAGE_CREATE_TIME
  FROM V$XSTREAM_OUTBOUND_SERVER;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
                                                                     Last
                                                      Time      Last Sent
Outbound    Total       Total           Total      Sending      Sent Message
Server      Trans        LCRs              MB         LCRs   Message Creation
Name         Sent        Sent            Sent (in seconds)    Number Time
-------- -------- ----------- --------------- ------------ --------- ----------
XOUT         2000      216000              56          291   9381070 4-AUG-10
                                                                     11:03 A.M.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>TOTAL_TRANSACTIONS_SENT</code> value is populated only if the <code>COMMITTED_DATA_ONLY</code> value is <code>YES</code> in <code>V$XSTREAM_OUTBOUND_SERVER</code>.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_dp_views.htm#BABDJDFJ">"V$XSTREAM_OUTBOUND_SERVER"</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDJHEGH"></a>
<div id="XSTRM1441" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying the Processed Low Position for an Outbound Server<a id="sthref278"></a><a id="sthref279"></a><a id="sthref280"></a><a id="sthref281"></a><a id="sthref282"></a></h3>
<p>For an outbound server, the processed low position is the position below which all transactions have been committed and logged by the client application. The processed low position is important when the outbound server or the client application is restarted.</p>
<p>You can display the following information about the processed low position for an outbound server by running the query in this section:</p>
<ul>
<li>
<p>The outbound server name</p>
</li>
<li>
<p>The name of the source database for the captured changes</p>
</li>
<li>
<p>The processed low position, which indicates the low watermark position processed by the client application</p>
</li>
<li>
<p>The time when the processed low position was last updated by the outbound server</p>
</li>
</ul>
<p class="orderedlisttitle">To display the processed low position for an outbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Outbound|Server|Name' FORMAT A10
COLUMN SOURCE_DATABASE HEADING 'Source|Database' FORMAT A20
COLUMN PROCESSED_LOW_POSITION HEADING 'Processed|Low LCR|Position' FORMAT A30
COLUMN PROCESSED_LOW_TIME HEADING 'Processed|Low|Time' FORMAT A9

SELECT SERVER_NAME,
       SOURCE_DATABASE,
       PROCESSED_LOW_POSITION,
       TO_CHAR(PROCESSED_LOW_TIME,'HH24:MI:SS MM/DD/YY') PROCESSED_LOW_TIME
FROM DBA_XSTREAM_OUTBOUND_PROGRESS; 
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Outbound                        Processed                      Processed
Server     Source               Low LCR                        Low
Name       Database             Position                       Time
---------- -------------------- ------------------------------ ---------
XOUT       DB.EXAMPLE.COM       00000008F17A000000000000000000 13:39:01
                                000008F17A000000000000000001   07/15/09
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_static_views.htm#CHDFJFFC">"ALL_XSTREAM_OUTBOUND_PROGRESS"</a></p>
</li>
<li>
<p><a href="xstrm_cncpt.htm#BCEHDIDB">"The Processed Low Position and Restartability for XStream Out"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDFDAAA"></a>
<div id="XSTRM1656" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Determining the Process Information for an Outbound Server<a id="sthref284"></a><a id="sthref285"></a></h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
This functionality is available starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2).</div>
<p>An outbound server is an Oracle background process. This background process runs only when an XStream client application attaches to the outbound server. The <code>V$XSTREAM_OUTBOUND_SERVER</code> view contains information about this background process.</p>
<p>You can display the following information for an outbound server by running the query in this section:</p>
<ul>
<li>
<p>The outbound server name</p>
</li>
<li>
<p>The session ID of the outbound server's session</p>
</li>
<li>
<p>The serial number of the outbound server's session</p>
</li>
<li>
<p>The process identification number of the operating-system process that sends LCRs to the client application</p>
</li>
</ul>
<p class="orderedlisttitle">To display the process information for an outbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Outbound Server Name' FORMAT A20
COLUMN SID HEADING 'Session ID' FORMAT 9999999999
COLUMN SERIAL# HEADING 'Serial Number' FORMAT 9999999999
COLUMN SPID HEADING 'Operating-System Process' FORMAT A25

SELECT SERVER_NAME, 
       SID, 
       SERIAL#, 
       SPID
  FROM V$XSTREAM_OUTBOUND_SERVER;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Outbound Server Name  Session ID Serial Number Operating-System Process
-------------------- ----------- ------------- -------------------------
XOUT                          53           406 25783
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>V$STREAMS_APPLY_SERVER</code> view provides additional information about the outbound server process, and information about the apply server background processes used by the outbound server.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_dp_views.htm#BABDJDFJ">"V$XSTREAM_OUTBOUND_SERVER"</a></p>
</li>
<li>
<p><a href="xstrm_dp_views.htm#CHDDGBAA">"V$STREAMS_APPLY_SERVER"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDIGIIB"></a>
<div id="XSTRM1442" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring XStream In<a id="sthref287"></a><a id="sthref288"></a><a id="sthref289"></a></h2>
<p>This section provides sample queries that you can use to monitor XStream&nbsp;In.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CHDBFDEF">Displaying General Information About an Inbound Server</a></p>
</li>
<li>
<p><a href="#CHDIBFCH">Displaying the Status and Error Information for an Inbound Server</a></p>
</li>
<li>
<p><a href="#CHDBJBEB">Displaying the Position Information for an Inbound Server</a></p>
</li>
</ul>
<p>With XStream In, an Oracle Streams apply process functions as an inbound server. Therefore, you can also use the data dictionary views for apply processes to monitor inbound servers.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS940" href="../../server.112/e17069/strms_apmon.htm#STRMS940"><span class="italic">Oracle Streams Concepts and Administration</span></a></div>
<a id="CHDBFDEF"></a>
<div id="XSTRM1443" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying General Information About an Inbound Server<a id="sthref290"></a></h3>
<p>You can display the following information for an inbound server by running the query in this section:</p>
<ul>
<li>
<p>The inbound server name</p>
</li>
<li>
<p>The owner of the queue used by the inbound server</p>
</li>
<li>
<p>The name of the queue used by the inbound server</p>
</li>
<li>
<p>The apply user for the inbound server</p>
</li>
</ul>
<p class="orderedlisttitle">To display general information about an inbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Inbound Server Name' FORMAT A20
COLUMN QUEUE_OWNER HEADING 'Queue Owner' FORMAT A15
COLUMN QUEUE_NAME HEADING 'Queue Name' FORMAT A15
COLUMN APPLY_USER HEADING 'Apply User' FORMAT A15
 
SELECT SERVER_NAME, 
       QUEUE_OWNER,
       QUEUE_NAME,
       APPLY_USER
  FROM DBA_XSTREAM_INBOUND;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Inbound Server Name  Queue Owner     Queue Name      Apply User
-------------------- --------------- --------------- ---------------
XIN                  XSTRMADMIN      XQUEUE          XSTRMADMIN
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_static_views.htm#CHDFBIGA">"ALL_XSTREAM_INBOUND"</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDIBFCH"></a>
<div id="XSTRM1444" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying the Status and Error Information for an Inbound Server<a id="sthref292"></a></h3>
<p>You can monitor an inbound server using the same queries that you use to monitor an Oracle Streams apply process. See <a class="olink STRMS940" href="../../server.112/e17069/strms_apmon.htm#STRMS940"><span class="italic">Oracle Streams Concepts and Administration</span></a> for instructions.</p>
<p>The <code>ALL_APPLY</code> and <code>DBA_APPLY</code> views show <code>XStream</code> <code>In</code> in the <code>PURPOSE</code> column for an apply process that is functioning as an inbound server.</p>
<p class="orderedlisttitle">To display the status of an inbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN APPLY_NAME HEADING 'Apply Name' FORMAT A10
COLUMN STATUS HEADING 'Status' FORMAT A8
COLUMN ERROR_NUMBER HEADING 'Error Number' FORMAT 9999999
COLUMN ERROR_MESSAGE HEADING 'Error Message' FORMAT A40

SELECT APPLY_NAME, 
       STATUS,
       ERROR_NUMBER,
       ERROR_MESSAGE
  FROM DBA_APPLY
  WHERE PURPOSE = 'XStream In';
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Apply Name Status   Error Number Error Message
---------- -------- ------------ ----------------------------------------
XIN        ENABLED
</pre>
<p>This output shows that <code>XIN</code> is an apply process that is functioning as an inbound server. Use the instructions in <a class="olink STRMS940" href="../../server.112/e17069/strms_apmon.htm#STRMS940"><span class="italic">Oracle Streams Concepts and Administration</span></a> to display detailed information about the inbound server.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_static_views.htm#CHDCIIAB">"ALL_APPLY"</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDBJBEB"></a>
<div id="XSTRM1634" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying the Position Information for an Inbound Server<a id="sthref294"></a><a id="sthref295"></a><a id="sthref296"></a><a id="sthref297"></a><a id="sthref298"></a><a id="sthref299"></a><a id="sthref300"></a><a id="sthref301"></a></h3>
<p>For an inbound server, you can view position information by querying the <code>DBA_XSTREAM_INBOUND_PROGRESS</code> view. Specifically, you can display the following position information by running the query in this section:</p>
<ul>
<li>
<p>The inbound server name</p>
</li>
<li>
<p>The applied low position for the inbound server</p>
</li>
<li>
<p>The spill position for the inbound server</p>
</li>
<li>
<p>The applied high position for the inbound server</p>
</li>
<li>
<p>The processed low position for the inbound server</p>
</li>
</ul>
<p class="orderedlisttitle">To display the position information for an inbound server:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN SERVER_NAME HEADING 'Inbound|Server|Name' FORMAT A10
COLUMN APPLIED_LOW_POSITION HEADING 'Applied Low|Position' FORMAT A15
COLUMN SPILL_POSITION HEADING 'Spill Position' FORMAT A15
COLUMN APPLIED_HIGH_POSITION HEADING 'Applied High|Position' FORMAT A15
COLUMN PROCESSED_LOW_POSITION HEADING 'Processed Low|Position' FORMAT A15
 
SELECT SERVER_NAME, 
       APPLIED_LOW_POSITION,
       SPILL_POSITION,
       APPLIED_HIGH_POSITION,
       PROCESSED_LOW_POSITION
  FROM DBA_XSTREAM_INBOUND_PROGRESS;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Inbound
Server     Applied Low                     Applied High    Processed Low
Name       Position        Spill Position  Position        Position
---------- --------------- --------------- --------------- ---------------
XIN        C10A            C11D            C10A            C11D
</pre>
<p>The values of the positions shown in the output were set by the client application that attaches to the inbound server. However, the inbound server determines which values are the current applied low position, spill position, applied high position, and processed low position.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_static_views.htm#CHDGIHDH">"ALL_XSTREAM_INBOUND_PROGRESS"</a></p>
</li>
<li>
<p><a href="xstrm_cncpt.htm#BCEBFIIA">"Position of LCRs and XStream In"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDIEBBF"></a>
<div id="XSTRM1445" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring XStream Rules<a id="sthref303"></a><a id="sthref304"></a></h2>
<p>The <code>ALL_XSTREAM_RULES</code> and <code>DBA_XSTREAM_RULES</code> views contain information about the rules used by outbound servers and inbound servers. If an outbound server was created using the <code>CREATE_OUTBOUND</code> procedure in the <code>DBMS_XSTREAM_ADM</code> package, then these views also contain information about the rules used by the capture process that sends changes to the outbound server. However, if an outbound server was created using the <code>ADD_OUTBOUND</code> procedure, then these views do not contain information about the capture process rules. Also, these views do not contain information about the rules used by any propagation in the stream from a capture process to an outbound server.</p>
<p class="orderedlisttitle">To display information about the rules used by XStream components:&nbsp;</p>
<ol>
<li>
<p>Connect to the database as the XStream administrator.</p>
<p>See <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about connecting to a database in SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN STREAMS_NAME HEADING 'Oracle|Streams|Name' FORMAT A12
COLUMN STREAMS_TYPE HEADING 'Oracle|Streams|Type' FORMAT A11
COLUMN RULE_NAME HEADING 'Rule|Name' FORMAT A10
COLUMN RULE_SET_TYPE HEADING 'Rule Set|Type' FORMAT A8
COLUMN STREAMS_RULE_TYPE HEADING 'Oracle|Streams|Rule|Level' FORMAT A7
COLUMN SCHEMA_NAME HEADING 'Schema|Name' FORMAT A6
COLUMN OBJECT_NAME HEADING 'Object|Name' FORMAT A11
COLUMN RULE_TYPE HEADING 'Rule|Type' FORMAT A4

SELECT STREAMS_NAME, 
       STREAMS_TYPE,
       RULE_NAME,
       RULE_SET_TYPE,
       STREAMS_RULE_TYPE,
       SCHEMA_NAME,
       OBJECT_NAME,
       RULE_TYPE
  FROM DBA_XSTREAM_RULES;
</pre></li>
</ol>
<p>Your output looks similar to the following:</p>
<pre>
Oracle       Oracle                          Streams
Streams      Streams     Rule       Rule Set Rule    Schema Object      Rule
Name         Type        Name       Type     Level   Name   Name        Type
------------ ----------- ---------- -------- ------- ------ ----------- ----
CAP$_XOUT_49 CAPTURE     DB52       POSITIVE GLOBAL                     DML
CAP$_XOUT_49 CAPTURE     DB53       POSITIVE GLOBAL                     DDL
XOUT         APPLY       DB55       POSITIVE GLOBAL                     DML
XOUT         APPLY       DB56       POSITIVE GLOBAL                     DDL
</pre>
<p>Notice that the <code>STREAMS_TYPE</code> is <code>APPLY</code> even though the rules are in the positive rule set for the outbound server <code>xout</code>. You can determine the purpose of an apply process by querying the <code>PURPOSE</code> column in the <code>DBA_APPLY</code> view.</p>
<p>To view information about the rules used by all components, including capture processes, propagations, apply processes, outbound servers, and inbound servers, you can query the <code>ALL_STREAMS_RULES</code> and <code>DBA_STREAMS_RULES</code> views. See <a class="olink STRMS975" href="../../server.112/e17069/strms_rumon.htm#STRMS975"><span class="italic">Oracle Streams Concepts and Administration</span></a> for sample queries that enable you to monitor rules.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_static_views.htm#CHDFJFJF">"ALL_XSTREAM_RULES"</a></div>
</div>
<!-- class="sect1" -->
<a id="CFFECFAH"></a>
<div id="XSTRM72463" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">XStream and the Oracle Streams Performance Advisor<a id="sthref306"></a><a id="sthref307"></a></h2>
<p>The Oracle Streams Performance Advisor consists of the <code>DBMS_STREAMS_ADVISOR_ADM</code> PL/SQL package and a collection of data dictionary views. The Oracle Streams Performance Advisor enables you to monitor the topology and performance of an XStream environment. The XStream topology includes information about the components in an XStream environment, the links between the components, and the way information flows from capture to consumption. The Oracle Streams Performance Advisor also provides information about how Oracle Streams components are performing.</p>
<p>Apply processes function as XStream outbound servers and inbound servers. In general, the Oracle Streams Performance Advisor works the same way for an Oracle Streams environment with apply processes and an XStream environment with outbound servers or inbound servers. This section describes important considerations about using the Oracle Streams Performance Advisor in an XStream environment.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CFFHEGJE">XStream Components</a></p>
</li>
<li>
<p><a href="#CFFDIDDA">Topology and Stream Paths</a></p>
</li>
<li>
<p><a href="#CFFBJAHI">XStream and Component-Level Statistics</a></p>
</li>
<li>
<p><a href="#CFFHHDEI">The UTL_SPADV Package</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS170" href="../../server.112/e17069/strms_topology.htm#STRMS170"><span class="italic">Oracle Streams Concepts and Administration</span></a> for detailed information about using the Oracle Streams Performance Advisor</div>
<a id="CFFHEGJE"></a>
<div id="XSTRM72464" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">XStream Components</h3>
<p>The Oracle Streams Performance Advisor tracks the following types of components in an XStream environment:</p>
<ul>
<li>
<p><code>QUEUE</code></p>
</li>
<li>
<p><code>CAPTURE</code></p>
</li>
<li>
<p><code>PROPAGATION</code> <code>SENDER</code></p>
</li>
<li>
<p><code>PROPAGATION</code> <code>RECEIVER</code></p>
</li>
<li>
<p><code>APPLY</code></p>
</li>
</ul>
<p>The preceding types are the same in an Oracle Streams environment and an XStream environment, except for <code>APPLY</code>. The <code>APPLY</code> component type can be an XStream outbound server or inbound server.</p>
<p>The following subcomponent types are possible for apply processes, outbound servers, and inbound servers:</p>
<ul>
<li>
<p><code>PROPAGATION</code> <code>SENDER+RECEIVER</code> for sending LCRs from a capture process directly to an apply process or outbound server in a combined capture and apply optimization</p>
</li>
<li>
<p><code>APPLY</code> <code>READER</code> for a reader server</p>
</li>
<li>
<p><code>APPLY</code> <code>COORDINATOR</code> for a coordinator process</p>
</li>
<li>
<p><code>APPLY</code> <code>SERVER</code> for an apply server</p>
</li>
</ul>
<p>In addition, the Oracle Streams Performance Advisor identifies a bottleneck component as the busiest component or the component with the least amount of idle time. In an XStream configuration, the XStream client application might be the bottleneck when <code>EXTERNAL</code> appears in the <code>ACTION_NAME</code> column of the <code>DBA_STREAMS_TP_PATH_BOTTLENECK</code> view.</p>
</div>
<!-- class="sect2" -->
<a id="CFFDIDDA"></a>
<div id="XSTRM72465" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Topology and Stream Paths</h3>
<p>In the Oracle Streams topology, a <span class="bold">stream path</span> is a flow of messages from a source to a destination. A stream path begins where a capture process, synchronous capture, or application enqueues messages into a queue. A stream path ends where an apply process, outbound server, or inbound server dequeues the messages. The stream path might flow through multiple queues and propagations before it reaches an apply process, outbound server, or inbound server. Therefore, a single stream path can consist of multiple source/destination component pairs before it reaches last component.</p>
<p>The Oracle Streams topology only gathers information about a stream path if the stream path ends with an apply process, an outbound server, or an inbound server. The Oracle Streams topology does not track stream paths that end when a messaging client or an application that dequeues messages.</p>
</div>
<!-- class="sect2" -->
<a id="CFFBJAHI"></a>
<div id="XSTRM72466" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">XStream and Component-Level Statistics</h3>
<p>The Oracle Streams Performance Advisor tracks the following component-level statistics:</p>
<ul>
<li>
<p>The <code>MESSAGE</code> <code>APPLY</code> <code>RATE</code> is the average number of messages applied each second by the apply process, outbound server, or inbound server.</p>
</li>
<li>
<p>The <code>TRANSACTION</code> <code>APPLY</code> <code>RATE</code> is the average number of transactions applied by the apply process, outbound server, or inbound server each second. Transactions typically include multiple messages.</p>
</li>
</ul>
<p>An LCR can be applied in one of the following ways:</p>
<ul>
<li>
<p>An apply process or inbound server makes the change encapsulated in the LCR to a database object.</p>
</li>
<li>
<p>An apply process or inbound server passes the LCR to an apply handler.</p>
</li>
<li>
<p>If the LCR raises an error, then an apply process or inbound server sends the LCR to the error queue.</p>
</li>
<li>
<p>An outbound server passes the LCR to an XStream client application. If the LCR raises an error, then the outbound server also reports the error to the client application.</p>
</li>
</ul>
<p>Also, the Oracle Streams Performance Advisor tracks the <code>LATENCY</code> component-level statistics. <code>LATENCY</code> is defined in the following ways:</p>
<ul>
<li>
<p>For apply processes, the <code>LATENCY</code> is the amount of time between when the message was created at a source database and when the message was applied by the apply process at the destination database.</p>
</li>
<li>
<p>For outbound servers, the <code>LATENCY</code> is amount of time between when the message was created at a source database and when the message was sent to the XStream client application.</p>
</li>
<li>
<p>For inbound servers, the <code>LATENCY</code> is amount of time between when the message was created by the XStream client application and when the message was applied by the apply process.</p>
</li>
</ul>
<p>When a capture process creates an LCR, the message creation time is the time when the redo entry for the database change was recorded. When an XStream client application creates an LCR, the message creation time is the time when the LCR was constructed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink STRMS871" href="../../server.112/e17069/strms_topology.htm#STRMS871"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about component-level statistics</div>
</div>
<!-- class="sect2" -->
<a id="CFFHHDEI"></a>
<div id="XSTRM72467" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">The UTL_SPADV Package<a id="sthref308"></a><a id="sthref309"></a></h3>
<p>The <code>UTL_SPADV</code> package provides subprograms to collect and analyze statistics for the XStream components in a distributed database environment. The package uses the Oracle Streams Performance Advisor to gather statistics, and the output is formatted so that it can be imported into a spreadsheet easily and analyzed.</p>
<p>The <code>UTL_SPADV</code> package works the same way for an Oracle Streams environment with apply processes and an XStream environment with outbound servers or inbound servers. However, there are some differences in the output for the <code>SHOW_STATS</code> procedure. This section describes the differences between the output for apply processes and the output for XStream outbound servers and inbound servers.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The rest of this section assumes that you are familiar with the <code>UTL_SPADV</code> package and the <code>SHOW_STATS</code> output for apply processes. See <a class="olink STRMS876" href="../../server.112/e17069/strms_topology.htm#STRMS876"><span class="italic">Oracle Streams Concepts and Administration</span></a> and <a class="olink ARPLS883" href="../../appdev.112/e40758/u_spadv.htm#ARPLS883"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about using the <code>UTL_SPADV</code> package.</div>
<p>The following sections describe the output for the <code>SHOW_STATS</code> procedure for outbound servers and inbound servers:</p>
<ul>
<li>
<p><a href="#CFFDAJJC">Sample Output When an Outbound Server Is the Last Component in a Path</a></p>
</li>
<li>
<p><a href="#CFFIIADE">Sample Output When an Inbound Server Is the Last Component in a Path</a></p>
</li>
</ul>
<a id="CFFDAJJC"></a>
<div id="XSTRM72468" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Sample Output When an Outbound Server Is the Last Component in a Path</h4>
<p>The following is sample output for when an outbound server is the last component in a path:</p>
<pre>
OUTPUT                                                    
PATH 1 RUN_ID 2 RUN_TIME 2009-MAY-15 12:20:55 CCA Y
|&lt;C&gt; CAP$_XOUT_1 2733 2730 3392 LMR 8.3% 91.7% 0% "" LMP (1) 8.3% 91.7% 0% ""
LMB 8.3% 91.7% 0% "" CAP 8.3% 91.7% 0% "" |&lt;Q&gt; "XSTRMADMIN"."Q$_XOUT_2" 2730 0.01
4109 |&lt;A&gt; XOUT 2329 2.73 0 -1 PS+PR 8.3% 91.7% 0% "" APR 8.3% 91.7% 0% "" APC
100% 0% 0% "" APS (1) 8.3% 83.3% 8.3% "" |&lt;B&gt; "EXTERNAL"
.
.
.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This output is for illustrative purposes only. Actual performance characteristics vary depending on individual configurations and conditions.</div>
<p>In this output, the <code>A</code> component is the outbound server <code>XOUT</code>. The output for when an outbound server is the last component in a path is similar to the output for when an apply process is the last component in a path. However, the apply server (APS) is not the last component because the outbound server connects to a client application. Statistics are not collected for the client application.</p>
<p>In an XStream Out configuration, the output can indicate flow control for the network because "SQL*Net more data to client" for an apply server is considered as a flow control event. If the output indicates flow control for an apply server, then either the network or the client application is considered the bottleneck component. In the previous output, <code>EXTERNAL</code> indicates that either the network or the client application is the bottleneck.</p>
<p>Other than these differences, you can interpret the statistics in the same way that you would for a path that ends with an apply process. Use the legend and the abbreviations to determine the statistics in the output.</p>
</div>
<!-- class="sect3" -->
<a id="CFFIIADE"></a>
<div id="XSTRM72469" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Sample Output When an Inbound Server Is the Last Component in a Path</h4>
<p>The following is sample output for when an inbound server is the last component in a path:</p>
<pre>
OUTPUT                                                    
PATH 1 RUN_ID 2 RUN_TIME 2009-MAY-16 10:11:38 CCA N
|&lt;PR&gt; "clientcap"=&gt; 75% 0% 8.3% "CPU + Wait for CPU" |&lt;Q&gt; "XSTRMADMIN"."QUEUE2"  467 0.01 1 
|&lt;A&gt; XIN 476 4.71 0 APR 100% 0% 0% "" APC 100% 0% 0% "" APS (4) 366.7% 0% 33.3% "CPU + Wait for CPU" 
|&lt;B&gt; "EXTERNAL"
.
.
.
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This output is for illustrative purposes only. Actual performance characteristics vary depending on individual configurations and conditions.</div>
<p>In this output, the <code>A</code> component is the inbound server <code>XIN</code>. When an inbound server is the last component in a path, the XStream client application connects to the inbound server, and the inbound server applies the changes in the LCRs. The client application is not shown in the output.</p>
<p>The propagation receiver receives the LCRs from the client application. So, the propagation receiver is the first component shown in the output. In the previous sample output, the propagation receiver is named <code>clientcap</code>. In this case, <code>clientcap</code> is the source name given by the client application when it attaches to the inbound server.</p>
<p>If the propagation receiver is idle for a significant percentage of time, then either the network or the client application is considered a bottleneck component. In the previous output, <code>EXTERNAL</code> indicates that either the network or the client application is the bottleneck.</p>
<p>Other than these differences, you can interpret the statistics in the same way that you would for a path that ends with an apply process. Use the legend and the abbreviations to determine the statistics in the output.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1341">
<tr>
<td class="cellalignment1348">
<table class="cellalignment1346">
<tr>
<td class="cellalignment1345"><a href="xstrm_man.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1345"><a href="xstrm_trouble.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2009, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1350">
<table class="cellalignment1344">
<tr>
<td class="cellalignment1345"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1345"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1345"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1345"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1345"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1345"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
