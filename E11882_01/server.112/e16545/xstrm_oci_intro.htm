<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Introduction to the OCI Interface for XStream</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 735" />
<meta name="dcterms.created" content="2013-07-02T6:44:43Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database XStream Guide" />
<meta name="dcterms.identifier" content="E16545-09" />
<meta name="dcterms.isVersionOf" content="XSTRM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2009, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="xstrm_pt_oci.htm" title="Previous" type="text/html" />
<link rel="Next" href="xstrm_oci.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e16545.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/22</span> <!-- End Header -->
<div id="XSTRM72492" class="chapter"><a id="CEGEJIGA"></a>
<h1 class="chapter"><span class="secnum">10</span> Introduction to the OCI Interface for XStream</h1>
<p><a id="sthref438"></a><a id="sthref439"></a>The Oracle Call Interface (OCI) includes an interface for XStream. This chapter provides an introduction to the OCI interface for XStream.</p>
<p>This chapter contains these topics:</p>
<ul>
<li>
<p><a href="#CEGFHCBC">About the XStream Interface</a></p>
</li>
<li>
<p><a href="#CEGIHGEI">Handler and Descriptor Attributes</a></p>
</li>
</ul>
<p>This chapter provides an overview of the OCI interface for XStream. For detailed information about XStream concepts, see <a href="xstrm_cncpt.htm#BCEBDGFJ">Chapter 2, "XStream Concepts"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="xstrm_oci.htm#CIHEDDAB">Chapter 11, "OCI XStream Functions"</a></p>
</li>
<li>
<p><a href="xstrm_config.htm#CBDIJEFE">Chapter 4, "Configuring XStream"</a></p>
</li>
<li>
<p><a href="xstrm_man.htm#CHDFDFHB">Chapter 5, "Managing XStream"</a></p>
</li>
<li>
<p><a href="xstrm_mon.htm#CHDDBGIA">Chapter 6, "Monitoring XStream"</a></p>
</li>
<li>
<p><a href="xstrm_trouble.htm#BABJJCEG">Chapter 7, "Troubleshooting XStream"</a></p>
</li>
</ul>
</div>
<a id="CEGFHCBC"></a>
<div id="XSTRM72493" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About the XStream Interface</h2>
<p>Since Oracle Database 11g Release 2, APIs, known as XStream Out and XStream In, are available. This technology enables high performance, near real-time information-sharing infrastructure between Oracle databases and non-Oracle databases, non-RDBMS Oracle products, file systems, third party software applications, and so on. XStream is built on top of Oracle Streams infrastructure.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_oci.htm#CIHEDDAB">Chapter 11, "OCI XStream Functions"</a></div>
<div id="XSTRM72494" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref440"></a>
<h3 class="sect2">XStream Out<a id="sthref441"></a><a id="sthref442"></a></h3>
<p>XStream Out allows a remote client to attach to an outbound server and extract row changes in the form of logical change records (LCRs). For the basics of LCRs, see <a class="olink STRMS107" href="../../server.112/e17069/strms_capture.htm#STRMS107"><span class="italic">Oracle Streams Concepts and Administration</span></a>.</p>
<p>To use XStream Out, a capture process and an outbound server must be created. All data types supported by Oracle Streams, including LOB, <code>LONG</code>, and <code>XMLType</code>, are supported by XStream. The capture process and the outbound server need not be on the same database instance. After the capture process and the outbound server have started, row changes are captured and sent to the outbound server. An external client application can connect to this outbound server using OCI. After the connection is established, the client application can loop while waiting for LCRs from the outbound server. The client application can register a client-side callback to be invoked each time an LCR is received. At any time, the client application can detach from the outbound server as needed. Upon restart, the outbound server knows where in the redo stream to start streaming LCRs to the client application.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_cncpt.htm#BCEDICDE">"XStream Out"</a></div>
</div>
<!-- class="sect2" -->
<div id="XSTRM72497" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref443"></a>
<h3 class="sect2">XStream In<a id="sthref444"></a><a id="sthref445"></a></h3>
<p>To replicate non-Oracle data into Oracle databases, use XStream In. This technology allows a remote client application to attach to an inbound server and send row and DDL changes in the form of LCRs.</p>
<p>An external client application connects to the inbound server using OCI. After the connection is established, the client application acts as the capture agent for the inbound server by streaming LCRs to it. A client application can attach to only one inbound server for each database connection, and each inbound server only allows one client application to attach to it.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_cncpt.htm#BCECJHDF">"XStream In"</a></div>
</div>
<!-- class="sect2" -->
<div id="XSTRM72495" class="sect2"><a id="sthref446"></a>
<h3 class="sect2">Position Order and LCR Streams</h3>
<p>Each LCR has a position attribute. The position of an LCR identifies its placement in the stream of LCRs in a transaction.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="xstrm_cncpt.htm#BCEDDAJG">"Position Order in an LCR Stream"</a></div>
</div>
<!-- class="sect2" -->
<div id="XSTRM72552" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref447"></a>
<h3 class="sect2">XStream and Character Sets<a id="sthref448"></a><a id="sthref449"></a></h3>
<p>XStream Out implicitly converts character data in LCRs from the outbound server database character set to the client application character set. XStream In implicitly converts character data in LCRs from the client application character set to the inbound server database character set.</p>
<p>To improve performance, complete the following tasks:</p>
<ul>
<li>
<p>Analyze the LCR data flow from the source to the destination.</p>
</li>
<li>
<p>Set the client character set of the OCI client application to the one that minimizes character conversion, incurs no data loss, and takes advantage of the implicit conversion done by XStream or the destination.</p>
</li>
</ul>
<p>For XStream Out, in general, setting the client application character set to the outbound server database character set is the best practice.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGIHGEI"></a>
<div id="XSTRM72501" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Handler and Descriptor Attributes<a id="sthref450"></a></h2>
<p>This chapter describes the attributes for OCI handles and descriptors, which can be read with <code>OCIAttrGet()</code> and modified with <code>OCIAttrSet()</code>.</p>
<div id="XSTRM72502" class="sect2"><a id="sthref451"></a>
<h3 class="sect2">Conventions</h3>
<p>For each handle type, the attributes that can be read or changed are listed. Each attribute listing includes the following information:</p>
<dl>
<dt>Mode</dt>
<dd>
<p>The following modes are valid:</p>
<p><code>READ</code> - The attribute can be read using <code>OCIAttrGet()</code>.</p>
<p><code>WRITE</code> - The attribute can be modified using <code>OCIAttrSet()</code>.</p>
<p><code>READ/WRITE</code> - The attribute can be read using <code>OCIAttrGet()</code>, and it can be modified using <code>OCIAttrSet()</code>.</p>
</dd>
<dt>Description</dt>
<dd>
<p>This is a description of the purpose of the attribute.</p>
</dd>
<dt>Attribute Data Type</dt>
<dd>
<p>This is the data type of the attribute. If necessary, a distinction is made between the data type for <code>READ</code> and <code>WRITE</code> modes.</p>
</dd>
</dl>
</div>
<!-- class="sect2" -->
<a id="CEGDAECC"></a>
<div id="XSTRM72503" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Server Handle Attributes</h3>
<p>The following server handle attributes are available:</p>
<ul>
<li>
<p><a href="#CEGEFCEG">OCI_ATTR_XSTREAM_ACK_INTERVAL</a></p>
</li>
<li>
<p><a href="#CEGDICBB">OCI_ATTR_XSTREAM_IDLE_TIMEOUT</a></p>
</li>
</ul>
<a id="CEGEFCEG"></a>
<div id="XSTRM72504" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">OCI_ATTR_XSTREAM_ACK_INTERVAL<a id="sthref452"></a></h4>
<dl>
<dt>Mode</dt>
<dd>
<p><code>READ/WRITE</code></p>
</dd>
<dt>Description</dt>
<dd>
<p>For XStream Out, the ACK interval is the minimum interval in seconds that the outbound server receives the processed low position from the client application. After each ACK interval, the outbound server ends any in-progress <code>OCIXStreamOutLCRReceive()</code> or <code>OCIXStreamOutLCRCallbackReceive()</code> call so that the processed low position cached at the client application can be sent to the outbound server.</p>
<p>For XStream In, the ACK interval is the minimum interval in seconds that the inbound server sends the processed low position to the client application. After each ACK interval, any in-progress <code>OCIXStreamInLCRSend()</code> or <code>OCIXStreamInLCRCallbackSend()</code> call is terminated for the inbound server to send a new processed low position to the client application.</p>
<p>The default value for <code>OCI_ATTR_XSTREAM_ACK_INTERVAL</code> is 30 seconds. This attribute is checked only during the <code>OCIXStreamOutAttach()</code> or <code>OCIXStreamInAttach()</code> calls. Thus, it must be set before invoking these APIs; otherwise, the default value is used.</p>
</dd>
<dt>Attribute Data Type</dt>
<dd>
<p><code>ub4 *</code>/<code>ub4</code></p>
</dd>
</dl>
</div>
<!-- class="sect3" -->
<a id="CEGDICBB"></a>
<div id="XSTRM72505" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">OCI_ATTR_XSTREAM_IDLE_TIMEOUT<a id="sthref453"></a></h4>
<dl>
<dt>Mode</dt>
<dd>
<p><code>READ/WRITE</code></p>
</dd>
<dt>Description</dt>
<dd>
<p>The idle timeout is the number of seconds of idle the outbound server waits for an LCR before terminating the <code>OCIXStreamOutLCRReceive()</code> or <code>OCIXStreamOutLCRCallbackReceive()</code> call.</p>
<p>The default for <code>OCI_ATTR_XSTREAM_IDLE_TIMEOUT</code> is one second. This attribute is checked only during the <code>OCIXStreamOutAttach()</code> or <code>OCIXStreamInAttach()</code> call. Thus, it must be set before invoking these APIs; otherwise, the default value is used.</p>
</dd>
<dt>Attribute Data Type</dt>
<dd>
<p><code>ub4 *</code>/<code>ub4</code></p>
</dd>
</dl>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1341">
<tr>
<td class="cellalignment1348">
<table class="cellalignment1346">
<tr>
<td class="cellalignment1345"><a href="xstrm_pt_oci.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1345"><a href="xstrm_oci.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2009, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1350">
<table class="cellalignment1344">
<tr>
<td class="cellalignment1345"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1345"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1345"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1345"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1345"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1345"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
