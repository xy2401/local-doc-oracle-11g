<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Generating HTML Reports from SQL*Plus</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 068" />
<meta name="dcterms.created" content="2013-07-18T3:10:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="SQL*Plus&reg; User's Guide and Reference" />
<meta name="dcterms.identifier" content="E16604-03" />
<meta name="dcterms.isVersionOf" content="SQPUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="ch_six.htm" title="Previous" type="text/html" />
<link rel="Next" href="ch_eight.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e16604.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">16/82</span> <!-- End Header --><a id="CHDCECJG"></a>
<h1 class="chapter"><span class="secnum">7</span> <a id="SQPUG017"></a>Generating HTML Reports from SQL*Plus</h1>
<p>This chapter explains how to generate a HTML report containing your query results. This chapter covers the following topics:</p>
<ul>
<li>
<p><a href="#i1043351">Creating Reports using Command-line SQL*Plus</a></p>
</li>
</ul>
<a id="i1043351"></a>
<div class="sect1">
<h2 class="sect1">Creating Reports<a id="sthref845"></a><a id="sthref846"></a><a id="sthref847"></a><a id="sthref848"></a> using Command-line SQL*Plus</h2>
<p>In addition to plain text output, the SQL*Plus command-line interface enables you to generate either a complete web page, or HTML output which can be embedded in a web page. You can use SQLPLUS -MARKUP "HTML ON" or SET MARKUP HTML ON SPOOL ON to produce complete HTML pages automatically encapsulated with &lt;HTML&gt; and &lt;BODY&gt; tags.</p>
<p>By default, data retrieved with MARKUP HTML ON is output in HTML, though you can optionally direct output to the HTML &lt;PRE&gt; <a id="sthref849"></a><a id="sthref850"></a>tag so that it displays in a web browser exactly as it appears in SQL*Plus. See the SQLPLUS <a href="ch_three.htm#i1169539">MARKUP Options</a> and the <a href="ch_twelve039.htm#i2698538">SET</a> MARKUP command for more information about these commands.</p>
<p>SQLPLUS -MARKUP "HTML ON" is useful when embedding SQL*Plus in program scripts. On starting, it outputs the HTML and BODY tags before executing any commands. All subsequent output is in HTML until SQL*Plus terminates.</p>
<p>The -SILENT and -RESTRICT command-line options may be effectively used with -MARKUP to suppress the display of SQL*Plus prompt and banner information, and to restrict the use of some commands.</p>
<p>SET MARKUP HTML ON SPOOL ON generates an HTML page for each subsequently spooled file. The HTML tags in a spool file are closed when SPOOL OFF is executed or SQL*Plus exits.</p>
<p>You can use SET MARKUP HTML ON SPOOL OFF to generate HTML output suitable for embedding in an existing web page. HTML output generated this way has no &lt;HTML&gt; or &lt;BODY&gt; tags.</p>
<a id="i1043391"></a>
<div class="sect2">
<h3 class="sect2">Creating Reports<a id="sthref851"></a></h3>
<p>During a SQL*Plus session, use the SET MARKUP command interactively to write HTML to a spool file. You can view the output in a <a id="sthref852"></a><a id="sthref853"></a>web browser.</p>
<p>SET MARKUP HTML ON SPOOL ON only specifies that SQL*Plus output will be HTML encoded, it does not create or begin writing to an output file. You must use the SQL*Plus SPOOL command to start generation of a spool file. This file then has HTML tags including &lt;HTML&gt; and &lt;/HTML&gt;.</p>
<p>When creating a HTML file, it is important and convenient to specify a .html or .htm file extension which are standard file extensions for HTML files. This enables you to easily identify the type of your output files, and also enables web browsers to identify and correctly display your HTML files. If no extension is specified, the default SQL*Plus file extension is used.</p>
<p>You use <a id="sthref854"></a>SPOOL OFF or <a id="sthref855"></a>EXIT to append final HTML tags to the spool file and then close it. If you enter another SPOOL filename command, the current spool file is closed as for SPOOL OFF or EXIT, and a new HTML spool file with the specified name is created.</p>
<p>You can use the SET MARKUP command to enable or disable HTML output as required.</p>
<div class="example">
<p class="titleinexample"><a id="sthref856"></a>Example 7-1 <a id="sthref857"></a><a id="sthref858"></a><a id="sthref859"></a>Creating a Report Interactively</p>
<p>You can create HTML output in an interactive SQL*Plus session using the SET MARKUP command. You can include an embedded style sheet, or any other valid text in the HTML &lt;HEAD&gt; tag. Open a SQL*Plus session and enter the following:</p>
<pre>
SET MARKUP HTML ON SPOOL ON PREFORMAT OFF ENTMAP ON -
HEAD "&lt;TITLE&gt;Department Report&lt;/TITLE&gt; -
&lt;STYLE type='text/css'&gt; -
&lt;!-- BODY {background: #FFFFC6} --&gt; -
&lt;/STYLE&gt;" -
BODY "TEXT='#FF00Ff'" -
TABLE "WIDTH='90%' BORDER='5'"
</pre>
<p>You use the COLUMN command to control column output. The following COLUMN commands create new heading names for the SQL query output. The first command also turns off entity mapping for the DEPARTMENT_NAME column to allow HTML hyperlinks to be correctly created in this column of the output data:</p>
<pre>
COLUMN DEPARTMENT_NAME HEADING 'DEPARTMENT' ENTMAP OFF
COLUMN CITY HEADING 'CITY'
</pre>
<p>SET MARKUP HTML ON SPOOL ON enables SQL*Plus to write HTML to a spool file. The following SPOOL command triggers the writing of the &lt;HTML&gt; and &lt;BODY&gt; tags to the named file:</p>
<pre>
SPOOL report.html
</pre>
<p>After the SPOOL command, anything entered or displayed on standard output is written to the spool file, report.html.</p>
<p>Enter a SQL query:</p>
<pre>
SELECT '&lt;A HREF="http://oracle.com/'||DEPARTMENT_NAME||'.html"&gt;'||DEPARTMENT_NAME||'&lt;/A&gt;' DEPARTMENT_NAME, CITY 
FROM EMP_DETAILS_VIEW 
WHERE SALARY&gt;12000; 
</pre>
<p>Enter the SPOOL OFF command:</p>
<pre>
SPOOL OFF
</pre>
<p>The &lt;/BODY&gt; and &lt;/HTML&gt; tags are appended to the spool file, report.html, before it is closed.</p>
<p>The output from report.sql is a file, report.html, that can be loaded into a web browser. Open report.html in your web browser. It should appear something like the following:</p>
</div>
<!-- class="example" -->
<img width="545" height="280" src="img/report.gif" alt="Description of report.gif follows" /><br />
<a id="sthref860" href="img_text/report.htm">Description of the illustration report.gif</a><br />
<br />
<p>In this example, the prompts and query text have not been suppressed. Depending on how you invoke a script, you can use SET ECHO OFF or command-line -SILENT options to do this.</p>
<p>The SQL*Plus commands in this example contain several items of usage worth noting:</p>
<ul>
<li>
<p>The hyphen used to continue lines in long SQL*Plus commands.</p>
</li>
<li>
<p>The TABLE option to set table WIDTH and BORDER attributes.</p>
</li>
<li>
<p>The COLUMN command to set ENTMAP OFF for the DEPARTMENT_NAME column to enable the correct formation of HTML hyperlinks. This makes sure that any HTML special characters such as quotes and angle brackets are not replaced by their equivalent entities, &amp;quot;, &amp;amp;, &amp;lt; and &amp;gt;.</p>
</li>
<li>
<p>The use of quotes and concatenation characters in the SELECT statement to create hyperlinks by concatenating string and variable elements.</p>
</li>
</ul>
<p>View the report.html source in your web browser, or in a text editor to see that the table cells for the Department column contain fully formed hyperlinks as shown:<a id="sthref861"></a><a id="sthref862"></a><a id="sthref863"></a></p>
<pre>
&lt;html&gt;
&lt;head&gt;
&lt;TITLE&gt;Department Report&lt;/TITLE&gt;  &lt;STYLE type="text/css"&gt;  
&lt;!-- BODY {background: #FFFFC6} --&gt;  &lt;/STYLE&gt;
&lt;meta name="generator" content="SQL*Plus 10.2.0.1"&gt;
&lt;/head&gt;
&lt;body TEXT="#FF00Ff"&gt;
SQL&amp;gt; SELECT '&amp;lt;A HREF=&amp;quot;http://oracle.com/'
||DEPARTMENT_NAME||'.html&amp;quot;&amp;gt;'||DEPARTMENT_NAME
||'&amp;lt;/A&amp;gt;' DEPARTMENT_NAME, CITY
&lt;br&gt;
  2  FROM EMP_DETAILS_VIEW
&lt;br&gt;
  3* WHERE SALARY&amp;gt;12000
&lt;br&gt;
&lt;p&gt;
&lt;table WIDTH="90%" BORDER="5"&gt;
&lt;tr&gt;&lt;th&gt;DEPARTMENT&lt;/th&gt;&lt;th&gt;CITY&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;A HREF="http://oracle.com/Executive.html"&gt;Executive&lt;/A&gt;&lt;/td&gt;
&lt;td&gt;Seattle&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;A HREF="http://oracle.com/Executive.html"&gt;Executive&lt;/A&gt;&lt;/td&gt;
&lt;td&gt;Seattle&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;A HREF="http://oracle.com/Executive.html"&gt;Executive&lt;/A&gt;&lt;/td&gt;
&lt;td&gt;Seattle&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;A HREF="http://oracle.com/Sales.html"&gt;Sales&lt;/A&gt;&lt;/td&gt;
&lt;td&gt;Oxford&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;A HREF="http://oracle.com/Sales.html"&gt;Sales&lt;/A&gt;&lt;/td&gt;
&lt;td&gt;Oxford&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;A HREF="http://oracle.com/Marketing.html"&gt;Marketing&lt;/A&gt;&lt;/td&gt;
&lt;td&gt;Toronto&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;

6 rows selected.&lt;br&gt;

SQL&amp;gt; spool off
&lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<div class="example">
<p class="titleinexample"><a id="sthref864"></a>Example 7-2 Creating a Report using the SQLPLUS Command</p>
<p>Enter the following command at the operating system prompt:</p>
<pre>
SQLPLUS -S -M "HTML ON TABLE 'BORDER="2"'" HR@Ora10g @depart.sql&gt;depart.html
</pre>
<p>where depart.sql contains:</p>
<pre>
SELECT DEPARTMENT_NAME, CITY
FROM EMP_DETAILS_VIEW
WHERE SALARY&gt;12000;
EXIT
</pre>
<p>This example starts SQL*Plus with user "HR", prompts for the HR password, sets HTML ON, sets a BORDER attribute for TABLE, and runs the script depart.sql. The output from depart.sql is a web page which, in this case, has been redirected to the file depart.html using the "&gt;" operating system redirect command (it may be different on your operating system). It could be sent to a web browser if SQL*Plus was called in a web server CGI script. See <a href="#i1043544">Suppressing the Display of SQL*Plus Commands in Reports</a> for information about calling SQL*Plus from a CGI script.</p>
<p>Start your web browser and enter the appropriate URL to open depart.html:</p>
</div>
<!-- class="example" -->
<img width="253" height="223" src="img/dept.gif" alt="Description of dept.gif follows" /><br />
<a id="sthref865" href="img_text/dept.htm">Description of the illustration dept.gif</a><br />
<br />
<p>The SQLPLUS command in this example contains three layers of nested quotes. From the inside out, these are:</p>
<ul>
<li>
<p>"2" is a quoted HTML attribute value for BORDER.</p>
</li>
<li>
<p>'BORDER="2"' is the quoted text argument for the TABLE option.</p>
</li>
<li>
<p>"HTML ON TABLE 'BORDER="2"'" is the quoted argument for the -MARKUP option.</p>
</li>
</ul>
<p>The nesting of quotes may be different in some operating systems or program scripting languages.</p>
</div>
<!-- class="sect2" -->
<a id="i1043544"></a>
<div class="sect2">
<h3 class="sect2">Suppressing the Display of SQL*Plus Commands in Reports<a id="sthref866"></a><a id="sthref867"></a><a id="sthref868"></a></h3>
<p>The SQLPLUS -SILENT option is particularly useful when used in combination with -MARKUP to generate embedded SQL*Plus reports using CGI scripts or operating system scripts. It suppresses the display of SQL*Plus commands and the SQL*Plus banner. The HTML output shows only the data resulting from your SQL query.</p>
<p>You can also use SET ECHO OFF to suppress the display of each command in a script that is executed with the START command.</p>
</div>
<!-- class="sect2" -->
<div class="sect2"><a id="sthref869"></a>
<h3 class="sect2">HTML Entities<a id="sthref870"></a><a id="sthref871"></a><a id="sthref872"></a><a id="sthref873"></a></h3>
<p>Certain characters, &lt;, &gt;, " and &amp; have a predefined meaning in HTML. In the previous example, you may have noticed that the &gt; character was replaced by &amp;gt; as soon as you entered the SET MARKUP HTML ON command. To enable these characters to be displayed in your web browser, HTML provides character entities to use instead.</p>
<div class="tblformal">
<p class="titleintable"><a id="sthref874"></a><a id="sthref875"></a>Table 7-1 <span class="bolditalic">Equivalent</span> HTML Entities</p>
<table class="cellalignment1854" title="Equivalent HTML Entities" summary="Shows characters, mapped HTML entities, and the purpose of the character." dir="ltr">
<thead>
<tr class="cellalignment1844">
<th class="cellalignment1855" id="r1c1-t2">Character</th>
<th class="cellalignment1855" id="r1c2-t2">HTML Entity</th>
<th class="cellalignment1855" id="r1c3-t2">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1844">
<td class="cellalignment1851" id="r2c1-t2" headers="r1c1-t2">
<p>&lt;</p>
</td>
<td class="cellalignment1851" headers="r2c1-t2 r1c2-t2">
<p>&amp;lt;</p>
</td>
<td class="cellalignment1851" headers="r2c1-t2 r1c3-t2">
<p>Start HTML tag label</p>
</td>
</tr>
<tr class="cellalignment1844">
<td class="cellalignment1851" id="r3c1-t2" headers="r1c1-t2">
<p>&gt;</p>
</td>
<td class="cellalignment1851" headers="r3c1-t2 r1c2-t2">
<p>&amp;gt;</p>
</td>
<td class="cellalignment1851" headers="r3c1-t2 r1c3-t2">
<p>End HTML tag label</p>
</td>
</tr>
<tr class="cellalignment1844">
<td class="cellalignment1851" id="r4c1-t2" headers="r1c1-t2">
<p>"</p>
</td>
<td class="cellalignment1851" headers="r4c1-t2 r1c2-t2">
<p>&amp;quot;</p>
</td>
<td class="cellalignment1851" headers="r4c1-t2 r1c3-t2">
<p>Double quote</p>
</td>
</tr>
<tr class="cellalignment1844">
<td class="cellalignment1851" id="r5c1-t2" headers="r1c1-t2">
<p>&amp;</p>
</td>
<td class="cellalignment1851" headers="r5c1-t2 r1c2-t2">
<p>&amp;amp;</p>
</td>
<td class="cellalignment1851" headers="r5c1-t2 r1c3-t2">
<p>Ampersand</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The web browser displays the &gt; character, but the actual text in the HTML encoded file is the HTML entity, &amp;gt;. The SET MARKUP option, ENTMAP, controls the substitution of HTML entities. ENTMAP is set ON by default. It ensures that the characters &lt;, &gt;, " and &amp; are always replaced by the HTML entities representing these characters. This prevents web browsers from misinterpreting these characters when they occur in your SQL*Plus commands, or in data resulting from your query.</p>
<p>You can set ENTMAP at a global level with SET MARKUP HTML ENTMAP ON, or at a column level with COLUMN <span class="italic">column_name</span> ENTMAP ON.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1843">
<tr>
<td class="cellalignment1851">
<table class="cellalignment1848">
<tr>
<td class="cellalignment1847"><a href="ch_six.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1847"><a href="ch_eight.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1853">
<table class="cellalignment1846">
<tr>
<td class="cellalignment1847"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1847"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1847"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1847"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1847"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1847"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
