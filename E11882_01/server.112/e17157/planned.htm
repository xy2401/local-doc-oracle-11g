<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Database High Availability Solutions for Planned Downtime</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 735" />
<meta name="dcterms.created" content="2013-06-28T5:17:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database High Availability Overview" />
<meta name="dcterms.identifier" content="E17157-09" />
<meta name="dcterms.isVersionOf" content="HAOVW" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2005, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="unplanned.htm" title="Previous" type="text/html" />
<link rel="Next" href="grid.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17157.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/12</span> <!-- End Header -->
<script  >
<!-- // <![CDATA[
window.name='planned'
// ]]> -->
</script> <script  >
// <![CDATA[
function footdisplay(footnum,footnote) {
    var msg = window.open('', 'NewWindow' + footnum,
        'directories=no,height=120,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');

    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">');
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>');
    msg.document.write('Footnote ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><h1>Footnote ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/body><\/html>');
    msg.document.close();
    msg.focus();
}
// ]]>
</script> <noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript>
<div id="HAOVW144" class="chapter"><a id="CIHDCJCE"></a><a id="i1005957"></a>
<h1 class="chapter"><span class="secnum">4</span> Oracle Database High Availability Solutions for Planned Downtime</h1>
<p>Planned downtime can be just as disruptive to operations as unplanned downtime. This holds especially true for global enterprises that must support users in multiple time zones, or for those that must provide Internet access to customers 24 hours a day, 7 days a week.</p>
<p>In the past, planned downtime was necessary to perform the following activities:</p>
<ul>
<li>
<p>Periodic maintenance&mdash;such as patching or reconfiguring the system to update a database, application, operating system, middleware, or network</p>
</li>
<li>
<p>New deployments&mdash;such as to perform major upgrades or new rollouts of the hardware, database, application, operating system, middleware, or network</p>
</li>
</ul>
<p><a href="#CIHICEEA">Section 4.1</a> summarizes Oracle's high availability solutions that prevent, tolerate, and reduce downtime for all types of planned maintenance.</p>
<a id="CIHICEEA"></a>
<div id="HAOVW149" class="sect1">
<h2 class="sect1"><span class="secnum">4.1</span> Oracle High Availability Solutions and Recovery Times for Planned Downtime<a id="sthref245"></a></h2>
<p>Oracle provides high availability solutions to prevent, tolerate, and reduce downtime for all types of planned maintenance. <a href="#CJAGHJDH">Table 4-1</a> describes the various Oracle high availability solutions for planned downtime, along with the outage time that can be attained with each solution. In all cases, Oracle recommends that you extensively test all procedures before conducting planned maintenance operations. Also, see <a href="architectures.htm#CJABHJAF">Table 7-5</a> for a summary of the attainable recovery times for all types of planned downtime for each Oracle high availability architecture</p>
<div id="HAOVW11863" class="tblformalwide">
<p class="titleintable"><a id="sthref246"></a><a id="CJAGHJDH"></a>Table 4-1 Oracle High Availability Solutions for Planned Downtime</p>
<table class="cellalignment1366" title="Oracle High Availability Solutions for Planned Downtime" summary="a listing of planned outages by maintenance type, the recommended Oracle solution, their associated descriptions, attainable recovery time, and considerations" >
<thead>
<tr class="cellalignment1357">
<th class="cellalignment1367" id="r1c1-t2">Maintenance Type</th>
<th class="cellalignment1367" id="r1c2-t2">Oracle Recommended Solution</th>
<th class="cellalignment1367" id="r1c3-t2">Solution Description</th>
<th class="cellalignment1367" id="r1c4-t2">Outage Time</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r2c1-t2" headers="r1c1-t2">
<p>Operating system and hardware upgrades</p>
</td>
<td class="cellalignment1363" headers="r2c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABJDCJB">Oracle Real Application Clusters and Oracle Clusterware</a>, or <a href="unplanned.htm#BABICFCD">Oracle RAC One Node</a> (for single-instance Oracle RAC databases)</p>
</td>
<td class="cellalignment1363" headers="r2c1-t2 r1c3-t2">
<p><a href="#CJACDIJD">Section 4.1.1</a></p>
</td>
<td class="cellalignment1363" headers="r2c1-t2 r1c4-t2">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r3c1-t2" headers="r1c1-t2">
<p>Oracle interim patches</p>
</td>
<td class="cellalignment1363" headers="r3c1-t2 r1c2-t2">
<p>Oracle Real Application Clusters (Oracle RAC)</p>
</td>
<td class="cellalignment1363" headers="r3c1-t2 r1c3-t2">
<p><a href="#CJACFBGJ">Section 4.1.3</a></p>
</td>
<td class="cellalignment1363" headers="r3c1-t2 r1c4-t2">
<p>No downtime<a id="sthref247" href="#sthref247" onclick='footdisplay(1,"Patches that cannot be applied by performing a rolling upgrade can be applied with the \u003ccode\u003eMINIMIZE_DOWNTIME\u003c/code\u003e option of the OPatch utility to reduce the availability impact of the patch application.")'><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a></p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r4c1-t2" headers="r1c1-t2">
<p>Oracle Clusterware upgrades and patches</p>
</td>
<td class="cellalignment1363" headers="r4c1-t2 r1c2-t2">
<p>Oracle Clusterware or <a href="unplanned.htm#BABICFCD">Oracle RAC One Node</a> (for single-instance Oracle RAC databases)</p>
</td>
<td class="cellalignment1363" headers="r4c1-t2 r1c3-t2">
<p><a href="#CJAIBCAF">Section 4.1.4</a></p>
</td>
<td class="cellalignment1363" headers="r4c1-t2 r1c4-t2">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r5c1-t2" headers="r1c1-t2">
<p>Oracle ASM upgrades</p>
</td>
<td class="cellalignment1363" headers="r5c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABCAGAJ">Oracle Automatic Storage Management</a></p>
</td>
<td class="cellalignment1363" headers="r5c1-t2 r1c3-t2">
<p><a href="#CJACEBIF">Section 4.1.5</a></p>
</td>
<td class="cellalignment1363" headers="r5c1-t2 r1c4-t2">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r6c1-t2" headers="r1c1-t2">
<p>Storage migration<a id="sthref248" href="#sthref248" onclick='footdisplay(2,"An example is migration from traditional storage to low-cost storage.")'><sup class="tablefootnote">Foot&nbsp;2&nbsp;</sup></a></p>
</td>
<td class="cellalignment1363" headers="r6c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABCAGAJ">Oracle Automatic Storage Management</a></p>
</td>
<td class="cellalignment1363" headers="r6c1-t2 r1c3-t2">
<p><a href="#CJAFIHCI">Section 4.1.6</a></p>
</td>
<td class="cellalignment1363" headers="r6c1-t2 r1c4-t2">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r7c1-t2" headers="r1c1-t2">
<p>Migrating to Exadata Storage</p>
</td>
<td class="cellalignment1363" headers="r7c1-t2 r1c2-t2">
<p>Oracle MAA best practices discussed in the "<a href="http://www.oracle.com/technology/deploy/availability/maa/xmigration_11.2.pdf">Best Practices for Migrating to Oracle Exadata Storage Server</a>" presentation<a id="sthref249" href="#sthref249" onclick='footdisplay(3," Available on the Oracle MAA Web site at \u003ccode\u003e\u003ca target=\"planned\" href=\"http://www.oracle.com/goto/maa\/\"\u003ehttp://www.oracle.com/goto/maa\u003c/a\u003e\u003c/code\u003e./")'><sup class="tablefootnote">Foot&nbsp;3&nbsp;</sup></a></p>
</td>
<td class="cellalignment1363" headers="r7c1-t2 r1c3-t2">
<p><a href="#CIHGABFI">Section 4.1.7</a></p>
</td>
<td class="cellalignment1363" headers="r7c1-t2 r1c4-t2">
<p>Outage time depends on solution chosen</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r8c1-t2" headers="r1c1-t2">
<p>Upgrading Exadata Storage</p>
</td>
<td class="cellalignment1363" headers="r8c1-t2 r1c2-t2">
<p>The Exadata Patch Manager</p>
</td>
<td class="cellalignment1363" headers="r8c1-t2 r1c3-t2">
<p><a href="#CIHFFHDC">Section 4.1.8</a></p>
</td>
<td class="cellalignment1363" headers="r8c1-t2 r1c4-t2">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r9c1-t2" headers="r1c1-t2">
<p>Migrating a single-instance database to Oracle RAC</p>
</td>
<td class="cellalignment1363" headers="r9c1-t2 r1c2-t2">
<p>Oracle Clusterware</p>
</td>
<td class="cellalignment1363" headers="r9c1-t2 r1c3-t2">
<p><a href="#CJACDIJD">Section 4.1.1</a></p>
</td>
<td class="cellalignment1363" headers="r9c1-t2 r1c4-t2">
<p>No downtime</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r10c1-t2" headers="r1c1-t2">
<p>Migrating to Oracle ASM or migrating a single-instance database to Oracle RAC</p>
</td>
<td class="cellalignment1363" headers="r10c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABECHJC">Oracle Data Guard</a></p>
</td>
<td class="cellalignment1363" headers="r10c1-t2 r1c3-t2">
<p><a href="#CJAHDDJE">Section 4.1.2</a></p>
</td>
<td class="cellalignment1363" headers="r10c1-t2 r1c4-t2">
<p>Seconds to minutes</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r11c1-t2" headers="r1c1-t2">
<p>Patch set and database upgrades</p>
</td>
<td class="cellalignment1363" headers="r11c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABECHJC">Oracle Data Guard</a> using SQL Apply</p>
</td>
<td class="cellalignment1363" headers="r11c1-t2 r1c3-t2">
<p><a href="#CJAFDBGJ">Section 4.1.9</a></p>
</td>
<td class="cellalignment1363" headers="r11c1-t2 r1c4-t2">
<p>Seconds to minutes</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r12c1-t2" headers="r1c1-t2">
<p>Oracle interim patches, Oracle clusterware upgrades and patches, Oracle ASM upgrades, Operating System and Hardware Upgrades</p>
</td>
<td class="cellalignment1363" headers="r12c1-t2 r1c2-t2">
<p>Oracle Data Guard Standby-First Patch Apply</p>
</td>
<td class="cellalignment1363" headers="r12c1-t2 r1c3-t2">
<p>"Oracle Patch Assurance - Data Guard Standby-First Patch Apply" in My Oracle Support note at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1265700.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=1265700.1</a></code></p>
</td>
<td class="cellalignment1363" headers="r12c1-t2 r1c4-t2">
<p>Seconds to minutes</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r13c1-t2" headers="r1c1-t2">
<p>Platform migration across Windows and Linux platforms and other select platforms<a id="sthref250" href="#sthref250" onclick='footdisplay(4,"See My Oracle Support (formerly Oracle\u003cspan class=\"italic\"\u003eMetalink\u003c/span\u003e) Note 413484.1 at \u003ccode\u003e\u003ca target=\"planned\" href=\"http://support.oracle.com/\"\u003ehttp://support.oracle.com/\u003c/a\u003e\u003c/code\u003e.")'><sup class="tablefootnote">Foot&nbsp;4&nbsp;</sup></a></p>
</td>
<td class="cellalignment1363" headers="r13c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABECHJC">Oracle Data Guard</a></p>
</td>
<td class="cellalignment1363" headers="r13c1-t2 r1c3-t2">
<p><a href="#CJAFDBGJ">Section 4.1.9</a></p>
</td>
<td class="cellalignment1363" headers="r13c1-t2 r1c4-t2">
<p>Seconds to minutes</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r14c1-t2" headers="r1c1-t2">
<p>Platform migration across the same endian format platforms</p>
</td>
<td class="cellalignment1363" headers="r14c1-t2 r1c2-t2">
<p>Transportable database</p>
</td>
<td class="cellalignment1363" headers="r14c1-t2 r1c3-t2">
<p><a href="#CJAFFDAI">Section 4.1.10</a></p>
</td>
<td class="cellalignment1363" headers="r14c1-t2 r1c4-t2">
<p>Minutes to hours</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r15c1-t2" headers="r1c1-t2">
<p>Platform migration across different endian format platforms</p>
</td>
<td class="cellalignment1363" headers="r15c1-t2 r1c2-t2">
<p>Transportable tablespace</p>
</td>
<td class="cellalignment1363" headers="r15c1-t2 r1c3-t2">
<p><a href="#CJAJBDIG">Section 4.1.11</a></p>
</td>
<td class="cellalignment1363" headers="r15c1-t2 r1c4-t2">
<p>Hours</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r16c1-t2" headers="r1c1-t2">
<p>Patch set and database upgrades, platform migration, rolling upgrades, and when different character sets are required</p>
</td>
<td class="cellalignment1363" headers="r16c1-t2 r1c2-t2">
<p><a href="unplanned.htm#BABJGBCD">Oracle GoldenGate and Oracle Streams</a></p>
</td>
<td class="cellalignment1363" headers="r16c1-t2 r1c3-t2">
<p><a href="#CJAFDBGJ">Section 4.1.9</a>, <a href="#CJAFFDAI">Section 4.1.10</a>, <a href="#CJAJBDIG">Section 4.1.11</a>, and <a href="#CJAGDIDG">Section 4.5</a></p>
</td>
<td class="cellalignment1363" headers="r16c1-t2 r1c4-t2">
<p>Seconds to minutes</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r17c1-t2" headers="r1c1-t2">
<p>Application upgrades</p>
</td>
<td class="cellalignment1363" headers="r17c1-t2 r1c2-t2">
<p><a href="#CJAGDIDG">Online Application Maintenance and Upgrades</a></p>
</td>
<td class="cellalignment1363" headers="r17c1-t2 r1c3-t2">
<p><a href="#CJAGDIDG">Section 4.5</a></p>
</td>
<td class="cellalignment1363" headers="r17c1-t2 r1c4-t2">
<p>No downtime<a id="sthref251"></a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1&nbsp;</sup>Patches that cannot be applied by performing a rolling upgrade can be applied with the <code>MINIMIZE_DOWNTIME</code> option of the OPatch utility to reduce the availability impact of the patch application.</p>
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;2&nbsp;</sup>An example is migration from traditional storage to low-cost storage.</p>
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;3&nbsp;</sup> Available on the Oracle MAA Web site at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code>.</p>
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;4&nbsp;</sup>See My Oracle Support (formerly Oracle<span class="italic">Metalink</span>) Note 413484.1 at <code><a href="http://support.oracle.com/">http://support.oracle.com/</a></code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about using Oracle Data Guard with SQL Apply to upgrade an Oracle database</p>
</li>
<li>
<p><a class="olink CNCPT" href="../e40540/toc.htm"><span class="italic">Oracle Database Concepts</span></a> and the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about transportable tablespace</p>
</li>
<li>
<p>The MAA white papers about rolling upgrade best practices at</p>
<pre>
<a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a>
</pre></li>
</ul>
</div>
<a id="CJACDIJD"></a>
<div id="HAOVW151" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.1</span> <a id="sthref252"></a><a id="sthref253"></a>Operating System Upgrades and Hardware Upgrade<a id="sthref254"></a>s<a id="sthref255"></a><a id="sthref256"></a><a id="sthref257"></a><a id="sthref258"></a></h3>
<p>Using Oracle RAC is the recommended solution for avoiding downtime during system and hardware upgrades. For a single-instance Oracle RAC database, you can use <a href="unplanned.htm#BABICFCD">Oracle RAC One Node</a>.</p>
<p>If you cannot perform the upgrade using Oracle RAC or Oracle RAC One Node, then the recommended solution is to use Oracle Data Guard and physical standby databases as described in <a href="#CJAHDDJE">Section 4.1.2</a>. Alternatively, you can use cold cluster failover with Oracle Clusterware as described in <a href="#CJAIBCAF">Section 4.1.4</a>.</p>
<p>The following list provides a high-level overview of the steps when upgrading using Oracle RAC:</p>
<ol>
<li>
<p>Perform the following prerequisite checks:</p>
<ul>
<li>
<p>Ensure that the planned maintenance can be performed in a rolling fashion from an operating system perspective.</p>
</li>
<li>
<p>Ensure that the database and clusterware versions are certified with the new system and hardware changes.</p>
</li>
</ul>
</li>
<li>
<p>Stop the application service if the application service runs on more than one instance in the cluster. If the application service runs on only the instance being upgraded, then relocate the service to another node in the cluster.</p>
<p>Stopping the application service implicitly redirects connections off of the destination instance when using f<a id="sthref259"></a><a id="sthref260"></a><a id="sthref261"></a><a id="sthref262"></a>ast application notification (FAN).</p>
</li>
<li>
<p>Shut down destination instance or instances with the <code>IMMEDIATE</code> option.</p>
</li>
<li>
<p>Shut down and disable Oracle Clusterware.</p>
<p>Disabling Oracle Clusterware prevents it from starting automatically.</p>
</li>
<li>
<p>Perform maintenance.</p>
</li>
<li>
<p>Enable and start Oracle Clusterware.</p>
<p>This step implicitly starts the database instances.</p>
</li>
<li>
<p>Start the application service.</p>
<p>This step implicitly redirects connections to the destination instance when using FAN.</p>
</li>
<li>
<p>Repeat all steps on the next node.</p>
</li>
</ol>
<p>Also, see your operating system-specific Oracle Real Application Clusters installation guide.</p>
</div>
<!-- class="sect2" -->
<a id="CJAHDDJE"></a>
<div id="HAOVW154" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.2</span> System and Cluster Upgrades and Migrations Using Oracle Data Guard<a id="sthref263"></a><a id="sthref264"></a><a id="sthref265"></a></h3>
<p>Oracle Data Guard and physical standby databases are the recommended solution for performing system and cluster upgrades that you cannot upgrade using Oracle RAC rolling upgrades. Oracle Data Guard is also recommended for migrations to Oracle ASM, Oracle RAC, 64-bit systems, Windows to Linux or Linux to Windows, or the same processor <a id="sthref266"></a>architecture platforms. For example:</p>
<ul>
<li>
<p>Use Oracle Data Guard for system upgrades that cannot be upgraded using Oracle RAC rolling upgrades due to system restrictions.</p>
</li>
<li>
<p>Use Oracle Data Guard when migrating to Oracle ASM, from a noncluster environment to Oracle RAC, to a different platform with the same endian format, or to a different platform with the same processor architecture. The time required to perform the switchover is the only downtime incurred. For more information, see "Data Guard Support for Heterogeneous Primary and Physical Standbys in Same Data Guard Configuration" in My Oracle Support Note 413484.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=413484.1</a></code></p>
</li>
</ul>
<p>In general, you first upgrade the physical standby database and then perform an Oracle Data Guard switchover to the physical standby database.</p>
<div id="HAOVW11864" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref267"></a>
<h4 class="sect3"><span class="secnum">4.1.2.1</span> Upgrading the Physical Standby Database</h4>
<p>To upgrade the physical standby database and perform a switchover:</p>
<ol>
<li>
<p>Upgrade the system or change the physical standby database system to your destination environment.</p>
<p>For example, you can convert the standby database from a single-instance database to an Oracle RAC database by using Oracle ASM, without any effect on the primary database. Then, restart the standby database, ensure that it matches your destination environment, and wait for Redo Apply to finish applying all redo data to the standby database.</p>
</li>
<li>
<p>Perform an Oracle Data Guard switchover. Optimally, the switchover should take only seconds to minutes.</p>
</li>
<li>
<p>Shut down the original primary database (now the standby database).</p>
</li>
<li>
<p>Upgrade or make system changes to the original primary database.</p>
</li>
<li>
<p>Restart the upgraded database as a standby database and allow recovery to automatically synchronize the databases.</p>
</li>
<li>
<p>Optionally, perform an Oracle Data Guard switchover to return the standby database to the primary database role.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Conversion from<a id="sthref268"></a><a id="sthref269"></a> 32-bit to 64-bit is automatic if you are applying an Oracle Database patch set or doing an Oracle Database upgrade at the same time. If you are upgrading only the operating system, then you may need to perform the additional post-upgrade steps that are described in the My Oracle Support Note&nbsp;414043.1 at <code><a href="http://support.oracle.com/">http://support.oracle.com/</a></code>. Also, see the <a class="olink UPGRD" href="../e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> for more information about upgrades.</div>
</div>
<!-- class="sect3" -->
<div id="HAOVW11865" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref270"></a>
<h4 class="sect3"><span class="secnum">4.1.2.2</span> Best Practices for System and Cluster Upgrades and Migrations</h4>
<p>Consider the following best practices and guidelines for system and cluster upgrades and migrations:</p>
<ul>
<li>
<p>For fastest switchover, configure the standby database to use real-time apply and, if possible, ensure there are no archive log gaps and that the databases are close to being synchronized before beginning the switchover operation.</p>
</li>
<li>
<p>Use Oracle Data Guard and physical standby databases to perform system and cluster upgrades if Oracle RAC rolling upgrade or online patching is not possible. See <a class="olink SBYDB1200" href="../../server.112/e41134/upgrades.htm#SBYDB1200"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CJACFBGJ"></a>
<div id="HAOVW156" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.3</span> Oracle Database Patche<a id="sthref271"></a>s<a id="sthref272"></a><a id="sthref273"></a><a id="sthref274"></a></h3>
<p><a id="sthref275"></a><a id="sthref276"></a><a id="sthref277"></a><a id="sthref278"></a>Oracle patches to database software are usually applied to implement known fixes for software problems, or to apply diagnostic patches to gather information about a problem. Plan to apply patches during a scheduled maintenance outage.</p>
<p>To avoid downtime when applying Oracle database patches, perform rolling patch upgrades using Oracle RAC. You can apply approximately 90% of the new patches using Oracle RAC. Oracle provides the capability to perform rolling patch upgrades with Oracle RAC with little or no database downtime using the OPatch command-line utility. If it is not possible to use Oracle RAC, then use Oracle Data Guard and physical standby databases. See <a href="#CJAHDDJE">Section 4.1.2</a> for more information.</p>
<p>There are several types of patches including:</p>
<ul>
<li>
<p><span class="bold">Interim patch</span></p>
<p>A single patch created to provide a specific fix between the release of patch sets.</p>
</li>
<li>
<p><span class="bold">Bundle patch</span></p>
<p>A collection of patches that is issued between patch sets. A patch bundle is usually cumulative. Microsoft Windows bug fixes for the Database are generally issued in a patch bundle (as opposed to an interim patch).</p>
</li>
<li>
<p><span class="bold">Patch Set Update (PSU)</span></p>
<p>A quarterly patch that contains the most critical fixes for the applicable product (including security fixes), allowing customers to apply one patch to avoid many problems.</p>
</li>
<li>
<p><span class="bold">Critical Patch Update (CPU)</span></p>
<p>A collection of high-priority fixes (usually for security issues) once a quarter. CPUs are cumulative with respect to prior security fixes but may contain other fixes in order to address patch conflicts with non-security patches (i.e. reduce the need for merge requests).</p>
</li>
<li>
<p><span class="bold">Diagnostic patch</span></p>
<p>A patch created specifically to diagnose a problem and not to fix a bug.</p>
</li>
</ul>
<p>An Oracle RAC rolling upgrade enables all but one of the instances of the Oracle RAC installation to be available during the scheduled outage, further reducing the impact on the application downtime required for scheduled outages. The Oracle <a id="sthref279"></a>OPatch utility enables you to apply the patch successively to the different instances in an Oracle RAC installation.</p>
<p>Performing a rolling upgrade is possible only for patches that are certified for rolling upgrades.</p>
<a id="CJAJIBIJ"></a>
<div id="HAOVW159" class="sect3">
<h4 class="sect3"><span class="secnum">4.1.3.1</span> Online Patching<a id="sthref280"></a></h4>
<p>Online patches are a special type of interim patch or diagnostic patch that you can apply while the instance remains online. The only time an interim or diagnostic patch should be applied in an online manner is when:</p>
<ul>
<li>
<p>The patch README indicates that it can be applied in an online manner.</p>
</li>
<li>
<p>The patch needs to be applied urgently and database instances cannot be shutdown to apply the regular (offline) version of the patch.</p>
</li>
</ul>
<p>You can perform online patching with any Oracle database using the OPatch command-line utility.</p>
<p>Also, use the following considerations when performing online patching:</p>
<ul>
<li>
<p>Oracle provides qualified interim and diagnostic patches as combo patches, which contain both an online patch and an offline patch for the same bug fix.</p>
<p>Thus, you can apply the online patch initially to avoid unplanned downtime. However, because online patches have a memory overhead, you should roll back the online patch and apply the offline patch during scheduled downtime.</p>
</li>
<li>
<p>Applying an online patch increases memory consumption on the system because each Oracle process uses more memory from the Program Global Area (PGA) during the patch application. Consider memory requirements before you begin applying an online patch. Each online patch is unique, and the memory requirements are patch-specific. Apply the patch on your test system first so that you can assess the effect of the online patch on your production system and estimate any additional memory usage.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>"RDBMS Online Patching Aka Hot Patching" in My Oracle Support Note 761111.1 at</p>
<p><code><a href="https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=761111.1">https://support.oracle.com/CSP/main/article?cmd=show&amp;type=NOT&amp;id=761111.1</a></code></p>
</li>
<li>
<p><a class="olink OUICG" href="../../em.112/e12255/toc.htm"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a> for information about online patching and the OPatch utility</p>
</li>
<li>
<p><a class="olink UPGRD" href="../e23633/toc.htm"><span class="italic">Oracle Database Upgrade Guide</span></a> for an overview of rolling upgrades and rolling patches</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CJAIBCAF"></a>
<div id="HAOVW162" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.4</span> <a id="sthref281"></a><a id="sthref282"></a><a id="sthref283"></a>Upgrading Oracle Clusterware</h3>
<p>Performing rolling upgrades of Oracle Clusterware is the recommended solution for avoiding downtime when upgrading Oracle Clusterware. For single-instance Oracle RAC databases, consider using Oracle RAC One Node.</p>
<p>You can perform all upgrades to Oracle Clusterware in a rolling fashion.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Your operating system-specific Oracle Clusterware installation guide</p>
</li>
<li>
<p>Your operating system-specific Oracle Real Application Clusters installation guide</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CJACEBIF"></a>
<div id="HAOVW164" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.5</span> Upgrading Oracle Automatic Storage Management (Oracle <a id="sthref284"></a><a id="sthref285"></a><a id="sthref286"></a>ASM)</h3>
<p>Performing rolling upgrades is the recommended solution for upgrading Oracle ASM. You can perform all upgrades starting with Oracle Database 11<span class="italic">g</span> (and later releases) in a rolling fashion.</p>
<p>For more information, see the <a class="olink OSTMG02400" href="../../server.112/e18951/asminst.htm#OSTMG02400"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="CJAFIHCI"></a>
<div id="HAOVW166" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.6</span> <a id="sthref287"></a><a id="sthref288"></a>Storage Migration<a id="sthref289"></a></h3>
<p>Using Oracle ASM is the recommended solution for performing storage migrations.</p>
<p>Oracle ASM enables you to add all disks in one storage array and subsequently drop all disks from another array. Oracle ASM automatically rebalances and migrates data to the new storage while the database remains operational. Before removing the source storage array, ensure that the rebalancing is complete.</p>
<p>For more information, see the MAA white papers "Migration to Automatic Storage Management (ASM)" and "Best Practices for Creating a Low-Cost Storage Grid for Oracle Databases" at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code>.</p>
</div>
<!-- class="sect2" -->
<a id="CIHGABFI"></a>
<div id="HAOVW11866" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.1.7</span> Migrating Oracle Exadata Storage Server Software<a id="sthref290"></a><a id="sthref291"></a></h3>
<p>The guidelines in the MAA presentation "Best Practices for Migrating to Exadata Database Machine" define best practices for pre-migration and post migration from legacy storage to Oracle Exadata Storage Server. The best practices help you determine the most appropriate migration strategy given the application service levels and attributes. The MAA presentation is available on the MAA Web site at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</div>
<!-- class="sect2" -->
<a id="CIHFFHDC"></a>
<div id="HAOVW11867" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.1.8</span> Upgrading Oracle Exadata Storage Server Software<a id="sthref292"></a><a id="sthref293"></a></h3>
<p>See the Oracle Exadata Storage Server Software documentation to learn about the solutions and tools used to perform upgrades.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>My Oracle Support (formerly Oracle<span class="italic">Metalink</span>) Note 791275.1 at <code><a href="http://support.oracle.com/">http://support.oracle.com/</a></code> that includes:</p>
<p><span class="italic">Oracle Exadata Storage Server Software Documentation Addendum</span></p>
<p><span class="italic">Oracle Exadata Storage Server Software Planning and Deployment Guide</span></p>
<p><span class="italic">Oracle Exadata Storage Server Software Patch Application Example</span></p>
</li>
<li>
<p>The Oracle Exadata Storage Server Web site at <code><a href="http://www.oracle.com/exadata/">http://www.oracle.com/exadata</a></code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CJAFDBGJ"></a>
<div id="HAOVW169" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.9</span> Patch Set and Database Upgrades<a id="sthref294"></a></h3>
<p>Oracle Data Guard using <a id="sthref295"></a>SQL Apply is the recommended solution for performing patch set and database upgrades with minimal downtime. <a href="#CJAHGBAJ">Section 4.1.9.1</a> describes this solution. If the source database is using data types not natively supported by SQL Apply, you can use <a id="sthref296"></a>Extended Datatype Support (EDS) to accommodate several more advanced data types.</p>
<p>If the source database is using a software version not supported by SQL Apply rolling upgrade (earlier than Oracle Database release 10.1.0.3) or using EDS cannot sufficiently resolve SQL Apply data type conflicts, then consider using Database Upgrade Assistant (DBUA)<a id="sthref297" href="#sthref297" onclick='footdisplay(1,"DBUA incurs downtime. The amount of downtime is dependent on a number of factors. See \u003cspan class=\"italic\"\u003eOracle Database High Availability Best Practices\u003c/span\u003e for additional considerations when choosing DBUA as an upgrade option. See \u003cspan class=\"italic\"\u003eOracle Database Upgrade Guide\u003c/span\u003e for instructions on using DBUA to upgrade Oracle Database software.")'><sup class="tablefootnote">Foot&nbsp;1&nbsp;</sup></a>, transportable tablespace, or Oracle GoldenGate:</p>
<ul>
<li>
<p>DBUA provides a graphical user interface (GUI) utility that guides you through the upgrade process and is the simplest and recommended method of upgrading a database. However, if the time it takes DBUA to upgrade a database does not fit in the defined maintenance window, then consider using the transportable tablespace feature to perform a database upgrade in less than one hour.</p>
</li>
<li>
<p>Transportable tablespace is the solution if you cannot use SQL Apply but the maintenance window requires downtime to be less than an hour in duration, and the database being upgraded has a small number of simple schemas and data files that do not need to be transferred as part of the transport process (such as when the data files will be used in place). <a href="#CJAFIFIB">Section 4.1.9.2</a> describes the transportable tablespace solution.</p>
</li>
<li>
<p>Oracle GoldenGate provides the most flexibility when performing database upgrades and requiring additional data type support. <a href="#CJABEEAH">Section 4.1.9.4</a> describes this solution.</p>
</li>
</ul>
<p>Do not use Oracle RAC to perform rolling upgrades of patch sets. Also, see your operating system-specific Oracle Real Application Clusters installation guide.</p>
<p>See <span class="italic">Oracle Database High Availability Best Practices</span> for more information and for help choosing the database upgrade method appropriate for your configuration.</p>
<a id="CJAHGBAJ"></a>
<div id="HAOVW11871" class="sect3">
<h4 class="sect3"><span class="secnum">4.1.9.1</span> Performing Database Upgrades Using Oracle Data Guard and <a id="sthref298"></a>SQL Apply</h4>
<p>The following list describes the high-level upgrade steps:</p>
<ol>
<li>
<p>Upgrade logical standby database to the new release and evaluate the change.</p>
</li>
<li>
<p>Ensure that SQL Apply has applied all redo data to the logical standby database.</p>
</li>
<li>
<p>Disconnect applications.</p>
</li>
<li>
<p>Perform an Oracle Data Guard switchover.</p>
</li>
<li>
<p>Reconnect applications to the new primary database.</p>
</li>
<li>
<p>Shut down the original primary database (now the logical standby database).</p>
</li>
<li>
<p>Execute database software upgrade steps on the new standby database.</p>
</li>
<li>
<p>Restart the standby database and allow recovery to synchronize.</p>
</li>
<li>
<p>Optionally, perform an Oracle Data Guard switchover to return to the original database.</p>
</li>
</ol>
<p>Consider the following information when performing patch set and database upgrades.</p>
<ul>
<li>
<p>SQL Apply rolling upgrades are only supported for Oracle Database release 10.1.0.3 and later. For complete information, see the chapter about using SQL Apply to upgrade Oracle Database in <a class="olink SBYDB00830" href="../../server.112/e41134/rollup.htm#SBYDB00830"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>.</p>
</li>
<li>
<p>SQL Apply has some data type restrictions (see <a class="olink SBYDB00305" href="../../server.112/e41134/data_support.htm#SBYDB00305"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for a list of the restrictions). If there are data type restrictions, consider implementing Extended Datatype Support<a id="sthref299"></a><a id="sthref300"></a> (EDS).</p>
<p>EDS enables SQL Apply to replicate changes to tables that contain some data types not natively supported from one database to another. Beginning with Oracle Database 10<span class="italic">g</span> Release 2 (10.2.0.4) Patch Set 3, SQL Apply supports the ability for triggers to fire on the logical standby database, which provides the basis of EDS. For an overview of EDS, see the MAA white paper "Extended Datatype Support Using SQL Apply and Oracle Streams" available at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code>.</p>
<p>For examples using EDS to support data types that are not natively supported by SQL Apply, see support note 559353.1 at <code><a href="http://support.oracle.com/">http://support.oracle.com/</a></code>.</p>
</li>
<li>
<p>Beginning with Oracle Database 11<span class="italic">g</span> release 11.1, you can use a physical standby database to execute a rolling database upgrade using the <code>KEEP IDENTITY</code> clause and a transient logical standby database.</p>
</li>
<li>
<p>Oracle Data Guard is the best approach if performing an Oracle RAC rolling upgrade is not possible and there are no data type restrictions.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a></p>
</li>
<li>
<p>The following MAA white papers available at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
<p>"Database Rolling Upgrades Made Easy by Using a Data Guard Physical Standby Database"</p>
<p>"Database Rolling Upgrades Using Transient Logical Standby"</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CJAFIFIB"></a>
<div id="HAOVW172" class="sect3">
<h4 class="sect3"><span class="secnum">4.1.9.2</span> Performing Database Upgrades Using Transportable Tablespace<a id="sthref301"></a><a id="sthref302"></a><a id="sthref303"></a></h4>
<p>If you cannot use SQL Apply because of data type conflicts, and testing shows that upgrading with DBUA cannot meet uptime requirements, then consider using the transportable tablespace solution to upgrade your database.</p>
<p>To use the transportable tablespace feature to upgrade an Oracle database:</p>
<ol>
<li>
<p>Install Oracle Database software on the destination system and perform the initial steps on the source database to prepare for the transport process.</p>
</li>
<li>
<p>Prepare the source and destination databases:</p>
<ol>
<li>
<p>Gather information from the source database.</p>
</li>
<li>
<p>Create the destination database with Database Configuration Assistant (DBCA).</p>
</li>
<li>
<p>Prepare the destination database for Oracle Data Pump usage and to accept the tablespaces being transported.</p>
</li>
</ol>
</li>
<li>
<p>Transport the user tablespaces:</p>
<ol>
<li>
<p>Ready the source database for transport by disconnecting users and restricting access to the source database, making all user tablespaces <code>READ ONLY</code>, and capturing sequence starting values from the source database.</p>
</li>
<li>
<p>Transport the user tablespaces.</p>
</li>
</ol>
</li>
<li>
<p>Verify that the destination database is complete and functional, and then back up the destination database.</p>
</li>
</ol>
<p>Consider the following information when using transportable tablespace:</p>
<ul>
<li>
<p>The transportable tablespace feature is an option for performing a database upgrade in less than one hour for databases that have simple schemas and where the data files do not need to be transferred as part of the transport process (such as when the data files will be used in place). See the MAA white paper "Database Upgrade Using Transportable Tablespace" available on the MAA Web site at</p>
<p><code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
<li>
<p>Using the transportable tablespace feature reduces database upgrade time by moving all user tablespaces from a database running an earlier software release to an empty destination database running a current software release. With transportable tablespace, tablespace data files are plugged in to the database by copying the data files to the destination database, then importing the object metadata into the destination database.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABFAAJJ"></a>
<div id="HAOVW11872" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">4.1.9.3</span> Performing Database Upgrades Using Oracle GoldenGate</h4>
<p>The configuration in <a href="#BEIFFBFI">Figure 4-1</a> shows how to configure <a id="sthref304"></a><a id="sthref305"></a><a id="sthref306"></a><a id="sthref307"></a>Oracle GoldenGate and Oracle Data Guard to minimize downtime and risk for planned outages, such as for any upgrades and migrations that are not supported by an Oracle Data Guard database rolling upgrade. For example, this might include migrating to a different hardware architecture and operating system, or performing application upgrades that modify database objects. In this configuration, the physical standby databases provide disaster protection to prevent downtime or data loss before, during, and after the migration. This configuration also avoids any performance impact or operational risk by isolating the production database from any work required to perform the migration.</p>
<div id="HAOVW11873" class="figure">
<p class="titleinfigure"><a id="BEIFFBFI"></a>Figure 4-1 Oracle GoldenGate Configuration for Minimizing Planned Downtime</p>
<img width="645" height="507" src="img/haovw029.gif" alt="Description of Figure 4-1 follows" /><br />
<a id="sthref308" href="img_text/haovw029.htm">Description of "Figure 4-1 Oracle GoldenGate Configuration for Minimizing Planned Downtime"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Oracle GoldenGate replication from the standby database (in the top right of <a href="#BEIFFBFI">Figure 4-1</a>), to the new production database (bottom right), requires Oracle GoldenGate Archive Log Mode. If the requirements for Archive Log Mode cannot be met, then replicate directly from the original production database (represented by the database in the top left corner).</p>
<p>These requirements are achieved by creating a parallel environment on the new platform. Depending upon the type of migration planned, instantiating the new primary database may be as simple as restoring a backup of the existing standby database. For more complex migrations it may be necessary to use other Oracle technologies to instantiate the new primary database, such as Oracle Transportable Technologies or Oracle Data Pump. Once instantiated, any additional changes are then implemented on what will become the new production system. When all changes have been implemented, a new physical standby database is created to provide continuos data protection after cutover. Oracle GoldenGate heterogeneous replication (previously configured), is then used to synchronize the new production system with all transactions that had occurred on the old system while the new environment was being implemented. When synchronization is complete, production is ready for cutover to the new environment. There is also the option of using Oracle GoldenGate heterogeneous replication after the cutover to keep the old environment synchronized with the new production system for a period of time - to provide a fast fall back option should any unanticipated problems arise.</p>
</div>
<!-- class="sect3" -->
<a id="CJABEEAH"></a>
<div id="HAOVW1172" class="sect3">
<h4 class="sect3"><span class="secnum">4.1.9.4</span> Performing Database Upgrades Using Oracle GoldenGate</h4>
<p>Oracle Goldengate is similar in function to Oracle Data Guard SQL Apply. Like SQL Apply, Oracle GoldenGate can use Extended Datatype Support<a id="sthref309"></a> (EDS) to replicate changes to tables that contain some data types not natively supported from one database to another.</p>
<p>To perform a database upgrade using Oracle GoldenGate:</p>
<ol>
<li>
<p>Before you begin the upgrade process, see the Oracle GoldenGate documentation for information about how to perform a database upgrade on a database that has user-defined types.</p>
</li>
<li>
<p>Configure Oracle Goldengate using the <code>PRE_INSTANTIATION</code> procedure.</p>
</li>
<li>
<p>Create a duplicate database. (The ideal replica will begin as a physical standby database that is up-to-date.)</p>
</li>
<li>
<p>Activate and upgrade the database to the later version.</p>
</li>
<li>
<p>Perform additional configuration, as appropriate, using the <code>POST_INSTANTIATION</code> procedure.</p>
</li>
<li>
<p>Enable Oracle Goldengate replication.</p>
</li>
<li>
<p>During the upgrade of the replica, the source database continues ahead. After the replica is caught up, perform a switchover.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Oracle GoldenGate documentation for complete information about performing an online database upgrade</p>
</li>
<li>
<p><a class="olink BRADV010" href="../../backup.112/e10642/rcmdupdb.htm#BRADV010"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to learn about duplicating a database</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CJAFFDAI"></a>
<div id="HAOVW173" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.10</span> Platform Migration Across the Same Endian Format Platforms<a id="sthref310"></a></h3>
<p>Consider the following approaches when you perform platform migrations across the same endian format platforms:</p>
<ul>
<li>
<p>Oracle Data Guard (physical standby database) is the recommended solution for performing platform migration across Linux and Windows platforms. <a href="#CJAHDDJE">Section 4.1.2</a> describes this solution.</p>
</li>
<li>
<p>If cross-platform physical standby database is not available for the platform combination to be migrated, then use the transportable database feature. <a href="#CJACDGAA">Section 4.1.10.1</a> describes this solution.</p>
</li>
<li>
<p>If the transportable database feature cannot perform the migration quickly enough, then use Oracle GoldenGate. <a href="#CJAFCEHH">Section 4.1.10.2</a> describes this solution.</p>
</li>
</ul>
<a id="CJACDGAA"></a>
<div id="HAOVW174" class="sect3">
<h4 class="sect3"><span class="secnum">4.1.10.1</span> Platform Migration Using Transportable Database<a id="sthref311"></a><a id="sthref312"></a></h4>
<p>Use transportable database for platform migration only when cross-platform physical standby database or logical standby database is not supported for the platform combination in question<a id="sthref313" href="#sthref313" onclick='footdisplay(2,"Beginning with Oracle Database 11\u003cspan class=\"italic\"\u003eg\u003c/span\u003e, the primary and standby systems in an Oracle Data Guard configuration can have different CPU architectures, operating systems (for example, Windows and Linux), operating system binaries (32-bit and 64-bit), and Oracle Database binaries (32-bit and 64-bit). For the latest capabilities and restrictions, see My Oracle Support note 413484.1 at \u003ccode\u003e\u003ca target=\"planned\" href=\"http://support.oracle.com/\"\u003ehttp://support.oracle.com/\u003c/a\u003e\u003c/code\u003e.")'><sup class="tablefootnote">Foot&nbsp;2&nbsp;</sup></a>.</p>
<p>For example, to move from Windows x86-64 to Linux x86-64, it is best to use a cross-platform standby database instead of transportable database. There is less downtime (only the time it takes to switch over) and it is possible to run the standby database on the new platform temporarily to ensure that everything is working as planned.</p>
<p>The high-level steps to perform a platform migration using transportable database (with destination system conversion) are as follows:</p>
<ol>
<li>
<p>Place the source database in read-only mode.</p>
</li>
<li>
<p>Run the RMAN <code>CONVERT DATABASE</code> command.</p>
</li>
<li>
<p>Move files to the destination system.</p>
</li>
<li>
<p>Run the RMAN-generated script to convert data files with undo data to destination platform format.</p>
</li>
<li>
<p>Run the RMAN-generated script to complete the migration.</p>
</li>
</ol>
<p>When using the transportable database solution, the downtime required for a platform migration is determined by the time needed to:</p>
<ul>
<li>
<p>Place the source database in read-only mode</p>
</li>
<li>
<p>Convert data files that contain <code>UNDO</code> to the new platform format (data files without <code>UNDO</code> do not require conversion)</p>
</li>
<li>
<p>Transfer all data files from the source system to the destination system</p>
<p>You can significantly minimize this time by using a storage infrastructure that can make the data files available to the destination system without physically moving the files.</p>
</li>
<li>
<p>Invalidate and recompile all PL/SQL using SQL scripts <code>utlirp.sql</code> and <code>utlrp.sql</code></p>
</li>
</ul>
<p>For more information, see the "Platform Migration Using Transportable Database" white paper available at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code>.</p>
</div>
<!-- class="sect3" -->
<a id="CJAFCEHH"></a>
<div id="HAOVW175" class="sect3">
<h4 class="sect3"><span class="secnum">4.1.10.2</span> Platform Migration Using Oracle GoldenGate</h4>
<p>Oracle GoldenGate enable replication of updates between multiple databases, independent of Oracle platform or database release. Therefore, Oracle GoldenGate may provide the fastest approach for database upgrades and platform migration.</p>
<p>Oracle GoldenGate provide database support for a wide variety of datatypes, but does not provide native support for data movement of some datatypes. However, you can work around datatype restrictions by using Extended Datatype Support (EDS), you can take advantage of the flexibility of Oracle GoldenGate to accommodate several more advanced datatypes</p>
<p>A PL/SQL package, <code>EXTENDED_DATATYPE_SUPPORT</code> (EDS), is available to generate the appropriate database objects to accomplish this workaround. The <code>EXTENDED_DATATYPE_SUPPORT</code> package is available for download as an attachment to this article. The downloaded file (available from My Oracle Support Note 556742.1:1) contains a Readme file and SQL files to load in the database.</p>
<p>The EDS package generates workaround scripts to enable Oracle GoldenGate support on tables with the following data types:</p>
<ul>
<li>
<p>Object column with simple object types</p>
</li>
<li>
<p>Object column with nested object types</p>
</li>
<li>
<p>Varray</p>
</li>
<li>
<p>Spatial type <code>SDO_GEOMETRY</code></p>
</li>
<li>
<p>XMLType</p>
</li>
</ul>
<p>After installing the EDS package, you can query the <code>EDS_SUPPORTED</code> view to identify the list of tables with datatypes unsupported natively by Oracle GoldenGate that can be supported with EDS.</p>
<p>Oracle GoldenGate implementations are very flexible and can be customized, and thus may require additional effort for configuration, testing, and administration.</p>
<p>To perform a platform migration with Oracle GoldenGate:</p>
<ol>
<li>
<p>Set up the Oracle GoldenGate environment on the source database.</p>
</li>
<li>
<p>Instantiate the replica database by copying data from the source database to the new destination database.</p>
</li>
<li>
<p>Set up the Oracle GoldenGate environment on the destination database.</p>
</li>
<li>
<p>Enable Oracle GoldenGate to propagate all changes made on the source database to the destination database to completely synchronize the destination database with the source.</p>
</li>
<li>
<p>Connect users to the destination database and shut down the source database.</p>
</li>
<li>
<p>Remove the Oracle GoldenGate configuration.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The MAA white paper "Extended Datatype Support: SQL Apply and Streams" at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
<li>
<p>My Oracle Support Note 556742.1:1 at <code><a href="http://support.oracle.com">http://support.oracle.com</a></code></p>
</li>
<li>
<p><span class="italic">Oracle GoldenGate Administration Guide</span></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CJAJBDIG"></a>
<div id="HAOVW176" class="sect2">
<h3 class="sect2"><span class="secnum">4.1.11</span> Platform Migration Across Different Endian Format Platforms<a id="sthref314"></a></h3>
<p>Consider the following approaches when performing platform migrations on different endian format platforms:</p>
<ul>
<li>
<p>For significantly reduced downtime, the transportable tablespace feature is the recommended solution for performing platform migration across different endian format platforms. Migration using transportable tablespace is described after this list.</p>
<p>The transportable tablespace solution has limitations and restrictions regarding character sets, opaque types, and system tablespace objects. Unlike previous solutions, the steps are not automated.</p>
<p>Perform a platform migration using transportable tablespace if all of the following are true:</p>
<ul>
<li>
<p>The source and destination platforms have different endian formats.</p>
</li>
<li>
<p>The time required to perform a full Data Pump Export and Import does not fit in the maintenance window.</p>
</li>
</ul>
</li>
<li>
<p>For the simplest of all the approaches, consider using Oracle Data Pump. See <a class="olink SUTIL100" href="../../server.112/e22490/dp_overview.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a> for complete information about using Oracle Data Pump.</p>
</li>
<li>
<p>For planned downtime that potentially requires only seconds, consider using Oracle GoldenGate, as described in <a href="#CJAFCEHH">Section 4.1.10.2</a>.</p>
</li>
</ul>
<p>The following high-level steps describe how to migrate a database to a new platform using transportable tablespace:</p>
<ol>
<li>
<p>Create a new, empty database on the destination platform.</p>
</li>
<li>
<p>Import objects required for transport operations from the source database into the destination database.</p>
</li>
<li>
<p>Export transportable metadata for all user tablespaces from the source database.</p>
</li>
<li>
<p>Transfer data files for user tablespaces to the destination system.</p>
</li>
<li>
<p>Use RMAN to convert the data files to the endian format of the destination system.</p>
</li>
<li>
<p>Import transportable metadata for all user tablespaces into the destination database.</p>
</li>
<li>
<p>Import the remaining database objects and metadata (that were not moved by the transport operation) from the source database into the destination database.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
If the destination database is being moved to a new location (for example, to a new data center) during the migration, then create a physical standby database from the original primary database co-located with the destination database. After an Oracle Data Guard switchover, transport the tablespaces from the source to the destination without incurring the file transfer time as part of the downtime.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The MAA white paper "Platform Migration Using Transportable Tablespace" available at <code><a href="http://www.oracle.com/goto/maa/">http://www.oracle.com/goto/maa</a></code></p>
</li>
<li>
<p><a class="olink BRADV05432" href="../../backup.112/e10642/rcmxplat.htm#BRADV05432"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about data file conversion</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CJAGEGHE"></a>
<div id="HAOVW145" class="sect1">
<h2 class="sect1"><span class="secnum">4.2</span> Dynamic Resource Provisioning</h2>
<p>For system and database changes, use the dynamic resource provisioning features that are discussed in the following sections:</p>
<ul>
<li>
<p><a href="#CJAJIAJF">Dynamic Reconfiguration of the Database</a></p>
</li>
<li>
<p><a href="#CJAGABGJ">Automatic Tuning of Memory Management</a></p>
</li>
<li>
<p><a href="#CJAFFEDD">Automated Distribution of Data Files, Control Files, and Log Files</a></p>
</li>
</ul>
<a id="CJAJIAJF"></a>
<div id="HAOVW146" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.1</span> Dynamic Reconfiguration of the Database<a id="sthref315"></a><a id="sthref316"></a><a id="sthref317"></a></h3>
<p>Oracle continues to broaden support for dynamic reconfiguration of the database, enabling it to adapt to changes in hardware demands without any service interruptions. Oracle Database dynamically accommodates various changes to hardware and database configurations by providing the ability to:</p>
<ul>
<li>
<p>Add and remove processors from a symmetric multiprocessing (SMP) server</p>
</li>
<li>
<p>Add and remove nodes and instances in an Oracle RAC environment</p>
</li>
<li>
<p>Dynamically grow and shrink its shared memory allocation and automatically tune memory online using <a id="sthref318"></a>automatic shared memory management</p>
</li>
<li>
<p>Add and remove database disks online without disturbing database activities using Oracle ASM</p>
</li>
<li>
<p>Add and remove storage arrays or Exadata Cells online without disturbing database activities using Oracle ASM<a id="sthref319" href="#sthref319" onclick='footdisplay(3,"See the Exadata white paper \"Best Practices for Migrating to Oracle Exadata Storage Server\" at \u003ccode\u003e\u003ca target=\"planned\" href=\"http://www.oracle.com/technetwork/database/exadata/index.html\"\u003ehttp://www.oracle.com/technetwork/database/exadata/index.html\u003c/a\u003e\u003c/code\u003e.")'><sup class="tablefootnote">Foot&nbsp;3&nbsp;</sup></a></p>
</li>
<li>
<p>Automatically rebalance the I/O load across the database storage using Oracle ASM</p>
</li>
<li>
<p>Move data files online when adding or dropping disks using Oracle ASM, which automatically rebalances database storage whenever the storage configuration is changed</p>
</li>
<li>
<p>Change almost all initialization parameters without shutting down the instance, by using either of the following SQL*Plus statements:</p>
<ul>
<li>
<p>The <code>ALTER SESSION</code> statement changes the value of a parameter during a session.</p>
</li>
<li>
<p>The <code>ALTER SYSTEM</code> statement changes the value of a parameter in all sessions of an instance for the duration of the instance.</p>
</li>
</ul>
</li>
</ul>
<p>These capabilities provide no-cost system changes and capacity on-demand provisioning, both of which are fundamental requirements of enterprise grid computing.</p>
</div>
<!-- class="sect2" -->
<a id="CJAGABGJ"></a>
<div id="HAOVW147" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.2</span> Automatic Tuning of Memory Management</h3>
<p>Two memory management initialization parameters, <code><a id="sthref320"></a>MEMORY_TARGET</code> and <code><a id="sthref321"></a>MEMORY_MAX_TARGET</code>, enable <a id="sthref322"></a>automatic management of the System Global Area (SGA), <a id="sthref323"></a>Program Global Area (PGA), and other <a id="sthref324"></a>memory required to run Oracle Database.</p>
<p><code>MEMORY_MAX_TARGET</code> specifies the maximum value to which <code>MEMORY_TARGET</code> can grow dynamically.</p>
<div id="HAOVW11874" class="tblformal">
<p class="titleintable"><a id="sthref325"></a><a id="sthref326"></a>Table 4-2 MEMORY_MAX_TARGET and MEMORY_TARGET</p>
<table class="cellalignment1368" title="MEMORY_MAX_TARGET and MEMORY_TARGET" summary="Shows the default settings for MEMORY_MAX_TARGET and MEMORY_TARGET" dir="ltr">
<thead>
<tr class="cellalignment1357">
<th class="cellalignment1367" id="r1c1-t13">if ...</th>
<th class="cellalignment1367" id="r1c2-t13">And ...</th>
<th class="cellalignment1367" id="r1c3-t13">Then ...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r2c1-t13" headers="r1c1-t13">
<p>You omit <code>MEMORY_MAX_TARGET</code></p>
</td>
<td class="cellalignment1363" headers="r2c1-t13 r1c2-t13">
<p>You omit <code>MEMORY_TARGET</code></p>
</td>
<td class="cellalignment1363" headers="r2c1-t13 r1c3-t13">
<p>The initialization parameters are left at their default values (0) and Oracle Database does not automatically tune memory</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r3c1-t13" headers="r1c1-t13">
<p>You omit <code>MEMORY_MAX_TARGET</code></p>
</td>
<td class="cellalignment1363" headers="r3c1-t13 r1c2-t13">
<p>Include a value for <code>MEMORY_TARGET</code></p>
</td>
<td class="cellalignment1363" headers="r3c1-t13 r1c3-t13">
<p>The database automatically sets <code>MEMORY_MAX_TARGET</code> to the value of <code>MEMORY_TARGET</code></p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r4c1-t13" headers="r1c1-t13">
<p>You omit <code>MEMORY_TARGET</code></p>
</td>
<td class="cellalignment1363" headers="r4c1-t13 r1c2-t13">
<p>Include a value for <code>MEMORY_MAX_TARGET</code></p>
</td>
<td class="cellalignment1363" headers="r4c1-t13 r1c3-t13">
<p>The <code>MEMORY_TARGET</code> parameter defaults to zero</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>Oracle Database uses a noncentralized policy to free and acquire memory in each subcomponent of the SGA and the PGA. Oracle Database automatically tunes memory by prompting the operating system to transfer granules of memory from less needy to more needy components. The granularity of the memory transfer is dependent on the current free memory and the amount of memory the operating system requires to maintain a basic level of service.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Automatic memory management with the <code>MEMORY_TARGET</code> and <code>MEMORY_MAX_TARGET</code> initialization parameters is supported on Linux, Windows, Solaris, HP-UX, and AIX. See <a class="olink CNCPT" href="../e40540/toc.htm"><span class="italic">Oracle Database Concepts</span></a> and the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about all supported platforms.</div>
</div>
<!-- class="sect2" -->
<a id="CJAFFEDD"></a>
<div id="HAOVW148" class="sect2">
<h3 class="sect2"><span class="secnum">4.2.3</span> Automated Distribution of Data Files, Control Files, and Log Files</h3>
<p>Oracle ASM<a id="sthref327"></a> automatically distributes data files, control files, and log files across all available disks. Database storage is rebalanced whenever the storage configuration changes, including adding and removing disks, Exadata Cells, or storage arrays. Oracle ASM provides redundancy through the mirroring of database files, and provides optimal performance by automatically striping database files across available disks.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
For more information about Oracle ASM:
<ul>
<li>
<p><a class="olink CNCPT" href="../e40540/toc.htm"><span class="italic">Oracle Database Concepts</span></a></p>
</li>
<li>
<p><a class="olink OSTMG" href="../e18951/toc.htm"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1007178"></a>
<div id="HAOVW155" class="sect1">
<h2 class="sect1"><span class="secnum">4.3</span> Online Reorganization<a id="sthref328"></a> and Redefinition<a id="sthref329"></a></h2>
<p>One way to enhance availability and manageability is to allow user access to the database during a data reorganization operation. The Online Reorganization and Redefinition feature in Oracle Database offers administrators significant flexibility to modify the physical attributes of a table and transform both data and table structure while allowing user access to the database. This capability improves data availability, query performance, response time, and disk space usage. All of these are important in a mission-critical environment and make the application upgrade process easier, safer, and faster.</p>
<p>The Online Reorganization and Redefinition architecture provides the following benefits:</p>
<ul>
<li>
<p>Online table reorganization and redefinition:</p>
<ul>
<li>
<p>Change any physical attribute of the table online, including moving the table to a new location, partitioning the table, and converting the table from one organization (such as heap-organized) to another (such as index-organized).</p>
</li>
<li>
<p>Change many logical attributes such as column names, types, and sizes. Columns can be added, deleted, or merged. However, you cannot modify the primary key of the table.</p>
</li>
</ul>
</li>
<li>
<p>Online index operations:</p>
<ul>
<li>
<p>Create indexes online and analyze them simultaneously. You can also use online repair of the physical guess component of logical rowids (used in secondary indexes and in the mapping table for index-organized tables).</p>
</li>
<li>
<p>Reorganize an index-organized table and secondary indexes online to eliminate the reorganization maintenance window. Secondary indexes support efficient use of block hints (physical guesses). You can also perform online repair of invalid physical guesses of logical rowids stored in secondary indexes on an index-organized table.</p>
</li>
<li>
<p>Reorganize an index-organized table or table partition without rebuilding its secondary indexes, resulting in a short reorganization maintenance window.</p>
</li>
</ul>
</li>
<li>
<p>Online moves of partitioned tables</p>
</li>
<li>
<p>Online reorganization support for advanced queues, clustered tables, materialized views, and abstract data types (objects)</p>
</li>
<li>
<p>Fast <code>ADD COLUMN</code> operations with default value (does not need to update all rows to a default value)</p>
</li>
<li>
<p>Speedier application migration and testing with Invisible Indexes:</p>
<ul>
<li>
<p>Speeds up migration with explicit hints, then drops when finished</p>
</li>
<li>
<p>Prevents premature use of newly created indexes</p>
</li>
<li>
<p>Tests effects of <code>DROP INDEX</code>, making the index visible if needed, thus there is no need for an index rebuild</p>
</li>
</ul>
</li>
<li>
<p>Online index builds with no pause to perform DML operations (no exclusive DML locks are required)</p>
</li>
<li>
<p>No recompilation of dependent objects when online redefinition does not logically affect objects (for example, when columns are added to tables, or when procedures are added to packages)</p>
</li>
<li>
<p>Easier table DDL operations online (there is an option to wait for active DML operations instead of stopping)</p>
</li>
<li>
<p>Support for redefinition of tables that have materialized views or materialized view logs</p>
</li>
</ul>
<p>The ability to modify table physical attributes and transform both data and table structure has been available since the Oracle8<span class="italic">i</span> release. <a href="#BABEIHHA">Table 4-3</a> provides a comprehensive table of data reorganization capabilities.</p>
<div id="HAOVW11875" class="tblruleformalwidemax">
<p class="titleintable"><a id="sthref330"></a><a id="BABEIHHA"></a>Table 4-3 New Data Reorganization Capabilities by Release</p>
<table class="cellalignment1366" title="New Data Reorganization Capabilities by Release" summary="This table compares the different data reorganization capabilities that have been available since Oracle8i." dir="ltr">
<thead>
<tr class="cellalignment1357">
<th class="cellalignment1367" id="r1c1-t16">Action</th>
<th class="cellalignment1367" id="r1c2-t16">Oracle 9<span class="italic">i</span></th>
<th class="cellalignment1367" id="r1c3-t16">Oracle Database 10<span class="italic">g</span> Release 1</th>
<th class="cellalignment1367" id="r1c4-t16">Oracle Database 10<span class="italic">g</span> Release 2</th>
<th class="cellalignment1367" id="r1c5-t16">Oracle Database 11<span class="italic">g</span></th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r2c1-t16" headers="r1c1-t16">
<p>Online Reorganization using the package <code>DBMS_REDEFINITION</code></p>
</td>
<td class="cellalignment1363" headers="r2c1-t16 r1c2-t16"><br />
Modify table storage parameters<br />
<br />
Move the table to a different tablespace<br />
<br />
Add support for parallel queries<br />
<br />
Add or drop partitioning support<br />
<br />
Re-create the table to avoid fragmentation<br />
<br />
Change from a table to an Index-Organized Table, or vice-versa<br />
<br />
Add or drop a column<br />
<br />
Transform a column using a function</td>
<td class="cellalignment1363" headers="r2c1-t16 r1c3-t16"><br />
Clones grants, constraints, and triggers<br />
<br />
Convert a <code>LONG</code> to a <code>LOB</code><br />
<br />
Reorganize using a unique key<br />
<br />
Specify columns to order table by</td>
<td class="cellalignment1363" headers="r2c1-t16 r1c4-t16"><br />
Reorganize a single partition<br />
<br />
Advanced queue and clustered tables<br />
<br />
Table containing an ADT<br />
<br />
Retain and clone statistics<br />
<br />
Clone check and not null constraints<br />
<br />
Copies dependent objects for nested tables</td>
<td class="cellalignment1363" headers="r2c1-t16 r1c5-t16"><br />
Table with materialized view logs or materialized views<br />
<br />
No recompilation of dependent objects when redefinition does not logically affect objects</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r3c1-t16" headers="r1c1-t16">
<p>Reclaiming Unused Space</p>
</td>
<td class="cellalignment1363" headers="r3c1-t16 r1c2-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r3c1-t16 r1c3-t16">
<p>Use the <code>SHRINK SPACE</code> clause on the following statements:</p>
<br />
<code>ALTER TABLE</code><br />
<br />
<code>ALTER INDEX</code><br />
<br />
<code>ALTER MATERIALIZED VIEW</code><br />
<br />
<code>ALTER MATERIALIZED VIEW LOG</code></td>
<td class="cellalignment1363" headers="r3c1-t16 r1c4-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r3c1-t16 r1c5-t16">
<p>Not applicable</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r4c1-t16" headers="r1c1-t16">
<p>Index Create Online</p>
</td>
<td class="cellalignment1363" headers="r4c1-t16 r1c2-t16">
<p><code>CREATE INDEX emp.ename.idx ON emp(ename) ONLINE;</code></p>
<ul>
<li>
<p>Parallel operations supported</p>
</li>
<li>
<p>Partitions supported</p>
</li>
<li>
<p>All index types except cluster</p>
</li>
</ul>
</td>
<td class="cellalignment1363" headers="r4c1-t16 r1c3-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r4c1-t16 r1c4-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r4c1-t16 r1c5-t16">
<p>DML lock-free online index creation, allowing transparent creation with no dependency on workload</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r5c1-t16" headers="r1c1-t16">
<p>Index Coalesce Online</p>
</td>
<td class="cellalignment1363" headers="r5c1-t16 r1c2-t16">
<p><code>ALTER INDEX emp.ename_idx COALESCE;</code></p>
<ul>
<li>
<p>Parallel operations supported</p>
</li>
<li>
<p>Partitions supported</p>
</li>
<li>
<p>All index types</p>
</li>
</ul>
</td>
<td class="cellalignment1363" headers="r5c1-t16 r1c3-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r5c1-t16 r1c4-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r5c1-t16 r1c5-t16">
<p>Not applicable</p>
</td>
</tr>
<tr class="cellalignment1357">
<td class="cellalignment1363" id="r6c1-t16" headers="r1c1-t16">
<p>Index-Organized Table Move Online</p>
</td>
<td class="cellalignment1363" headers="r6c1-t16 r1c2-t16">
<p><code>ALTER TABLE emp MOVE ONLINE;</code></p>
<ul>
<li>
<p>Parallel operations not supported</p>
</li>
<li>
<p>Partitions supported</p>
</li>
<li>
<p>Index-Organized Table only</p>
</li>
</ul>
</td>
<td class="cellalignment1363" headers="r6c1-t16 r1c3-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r6c1-t16 r1c4-t16">
<p>Not applicable</p>
</td>
<td class="cellalignment1363" headers="r6c1-t16 r1c5-t16">
<p>Not applicable</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformalwidemax" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a></div>
</div>
<!-- class="sect1" -->
<a id="CJADEAFF"></a>
<div id="HAOVW129" class="sect1">
<h2 class="sect1"><span class="secnum">4.4</span> Transportable Technologies<a id="sthref331"></a></h2>
<p>For database migration to a new platform, use the transportable technology features. Transportable technologies provides transportable database and transportable tablespace:</p>
<ul>
<li>
<p><span class="bold">The transportable database<a id="sthref332"></a> feature</span> moves an entire database (user data and the Oracle dictionary) to a new platform with the same endian format. Transportable database permits a minimal downtime migration to a new platform by avoiding the time-consuming method of unloading all user data from the source database and loading it into the destination database.</p>
</li>
<li>
<p><span class="bold">The transportable tablespace<a id="sthref333"></a> feature</span> moves a subset of one database into another, even among platforms that differ in endian format:</p>
<ul>
<li>
<p>You can use the cross-platform capability of the transportable tablespace feature to migrate all user data in a database to a new platform with a different endian format. Using the transportable tablespace feature in this manner permits a minimal downtime migration to a new platform by avoiding the time-consuming method of unloading all user data from the source database and loading it into the destination database.</p>
</li>
<li>
<p>You can use the transportable tablespace feature to reduce downtime for database upgrades in circumstances where the database has simple schemas and when the data files do not have to be copied during the transport process (for example, when the data files are used in place.</p>
</li>
</ul>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CJAFIFIB">Section 4.1.9.2, "Performing Database Upgrades Using Transportable Tablespace"</a> and <a href="#CJACDGAA">Section 4.1.10.1, "Platform Migration Using Transportable Database"</a></p>
</li>
<li>
<p><a class="olink ADMIN01101" href="../../server.112/e25494/tspaces.htm#ADMIN01101"><span class="italic">Oracle Database Administrator's Guide</span></a> for details about how to move or copy tablespaces to another database, including details about transporting tablespaces across platforms</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CJAGDIDG"></a>
<div id="HAOVW180" class="sect1">
<h2 class="sect1"><span class="secnum">4.5</span> Online Application Maintenance and Upgrades<a id="sthref334"></a><a id="sthref335"></a><a id="sthref336"></a></h2>
<p>For application changes, use the features described in the following list that can significantly reduce (or eliminate) the application downtime required to make changes to an application's database objects:</p>
<ul>
<li>
<p><a href="#BABHAFBC">Edition-Based Redefinition</a></p>
</li>
<li>
<p><a href="#CJAHFBGH">Oracle GoldenGate for Rolling Upgrades</a></p>
</li>
<li>
<p><a href="#BABGJCGJ">DDL with the WAIT Option</a></p>
</li>
<li>
<p><a href="#BABCAIEF">ENABLE, DISABLE, and FOLLOWS Clauses for CREATE TRIGGER</a></p>
</li>
<li>
<p><a href="#BABDHEID">Enhanced ADD COLUMN Functionality</a></p>
</li>
<li>
<p><a href="#BABEADCJ">Finer-Grained Dependencies</a></p>
</li>
<li>
<p><a href="#BABEHAIF">Invisible Indexes</a></p>
</li>
<li>
<p><a href="#BABEEGID">Dependent PL/SQL Recompilation After Online Table Redefinition</a></p>
</li>
</ul>
<a id="BABHAFBC"></a>
<div id="HAOVW158" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.1</span> Edition-Based Redefinition<a id="sthref337"></a></h3>
<p>Edition-based redefinition allows you to upgrade the database component of an application while the application is in use, thereby minimizing or eliminating down time. Your changes do not affect users of the application who continue to run the unchanged application until you make the upgraded application available to all users.</p>
<p>In favorable cases, rollover is possible. The pre-upgrade and the post-upgrade editions can be used concurrently so that sessions that were started before the post-upgrade edition was published can continue to use the pre-upgrade edition until they are terminated naturally while new sessions use the post-upgrade edition. In less favorable cases, all pre-upgrade sessions must be terminated before new sessions can be allowed to use the post-upgrade edition. In such cases, the application suffers a small amount of downtime.</p>
<p>The following sections describe the <a href="#BABGADJH">Editions</a>, <a href="#BABCBHAG">Editioning Views</a>, and <a href="#BABEBBIF">Crossedition Triggers</a> features of edition-based redefinition. For more information, see the <a class="olink ADFNS020" href="../../appdev.112/e41502/adfns_editions.htm#ADFNS020"><span class="italic">Oracle Database Development Guide</span></a>.</p>
<a id="BABGADJH"></a>
<div id="HAOVW1159" class="sect3">
<h4 class="sect3"><span class="secnum">4.5.1.1</span> Editions<a id="sthref338"></a><a id="sthref339"></a></h4>
<p>Editions are nonschema objects; as such, they do not have owners. Editions are created in a single namespace, and multiple editions can coexist in the database. The edition feature allows you to copy database objects and redefine the copied objects in isolation.</p>
<p>Editions provide a privacy mechanism for installing new code and for making data changes so that the running production application does not see the changes. When all the required changes have been made in private, they are published in a single atomic operation.</p>
</div>
<!-- class="sect3" -->
<a id="BABCBHAG"></a>
<div id="HAOVW160" class="sect3">
<h4 class="sect3"><span class="secnum">4.5.1.2</span> Editioning Views<a id="sthref340"></a><a id="sthref341"></a></h4>
<p>If you change the structure of one or more tables, you must also use the editioning view feature to insulate application code from changes made to the underlying table during online application upgrade. Tables are not editionable.</p>
<p>Columns are added to the underlying table and a new editioning view is created in the post-upgrade edition to expose and to populate them. (Editions do not allow versions of the underlying table.)</p>
<p>Triggers may be created on an editioning view and its columns may be used in SQL hints. The defining <code>SELECT</code> statement for an editioning view has exactly one table in its <code>FROM</code> list and <code>NO WHERE</code> clause. The <code>SELECT</code> list is used to project a subset of the table's columns and, typically, to rename them. It therefore defines a mapping of physical columns to logical columns.</p>
</div>
<!-- class="sect3" -->
<a id="BABEBBIF"></a>
<div id="HAOVW161" class="sect3">
<h4 class="sect3"><span class="secnum">4.5.1.3</span> Crossedition Triggers<a id="sthref342"></a><a id="sthref343"></a><a id="sthref344"></a></h4>
<p>Crossedition triggers are used as part of edition-based redefinition to keep the data in the pre-upgrade and post-upgrade editions in step with each other. The pre-upgrade application remains in use concurrently while changes are applied, redefining the pre-upgrade edition to a post-upgrade edition.</p>
<p>If users must be able to change data in the tables while you are changing the table structure, you also use <a id="sthref345"></a><span class="italic">forward</span> crossedition triggers. If you make the upgraded application available to some users while others continue to use the older version of the application, you also use <a id="sthref346"></a><span class="italic">reverse</span> crossedition triggers. Crossedition triggers are not a permanent part of the application because you drop or disable them after you have made the upgraded application available to all users.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CJAHFBGH"></a>
<div id="HAOVW181" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.2</span> Oracle GoldenGate for Rolling Upgrades<a id="sthref347"></a><a id="sthref348"></a><a id="sthref349"></a></h3>
<p>Consider using Oracle GoldenGate for fast rolling upgrades. However, although Oracle GoldenGate upgrades might incur little or no database downtime, your ability to configure this solution will require some operational investment. See <a href="unplanned.htm#BABJGBCD">Section 3.7</a> and the Oracle GoldenGate documentation, as appropriate.</p>
</div>
<!-- class="sect2" -->
<a id="BABGJCGJ"></a>
<div id="HAOVW182" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.3</span> DDL with the WAIT Option<a id="sthref350"></a><a id="sthref351"></a></h3>
<p>Data definition language (DDL) commands require exclusive locks on internal structures. If DDL commands are issued, then these locks may not be available causing the statement to immediately fail even though the DDL might have succeeded less than a second later. Specifying DDL commands with the <code>WAIT</code> option (the new default) resolves this issue. You specify the wait time instance-wide (in the initialization parameter file) and modify the wait time on a session level.</p>
<p>Specifying DDL commands with the <code>WAIT</code> option provides more flexibility to define grace periods for such commands to succeed instead of raising an error right away, thus requiring additional application logic to handle such errors. For more information, see the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABCAIEF"></a>
<div id="HAOVW183" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.4</span> ENABLE, DISABLE, and FOLLOWS Clauses for CREATE TRIGGER<a id="sthref352"></a><a id="sthref353"></a><a id="sthref354"></a></h3>
<p>The states (<code>ENABLE</code> and <code>DISABLE</code>) and ordering (<code>FOLLOWS</code>) are triggers to control the firing of triggers. These additional states allow greater administrative control for triggers. You can use the <code>CREATE TRIGGER</code> statement in a disabled state to validate successful compilation before enabling. In addition, the trigger order can be controlled with the <code>FOLLOWS</code> clause. For more information, see the <a class="olink ADFNS" href="../../appdev.112/e41502/toc.htm"><span class="italic">Oracle Database Development Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABDHEID"></a>
<div id="HAOVW184" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.5</span> Enhanced ADD COLUMN Functionality<a id="sthref355"></a></h3>
<p>Default values of columns are maintained in the data dictionary for columns specified as <code>NOT NULL</code>.</p>
<p>Adding new columns with <code>DEFAULT</code> values and the <code>NOT NULL</code> constraint no longer requires the default value to be stored in all existing records. This enhancement not only enables a schema modification in less than a second and works independently of the existing data volume, but it also consumes no space. For more information, see the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABEADCJ"></a>
<div id="HAOVW185" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.6</span> Finer-Grained Dependencies<a id="sthref356"></a><a id="sthref357"></a><a id="sthref358"></a></h3>
<p>Prior to Oracle Database 11<span class="italic">g</span>, metadata recorded mutual dependencies between objects with the granularity of the whole object. (For example, PL/SQL unit P depends on PL/SQL unit Q, or view V depends on table T.) In such cases, the dependent objects were sometimes needlessly invalidated. For example, if view V depends only on columns C1, C2, and C3 in table T and a new column, C99, is added, the validity of view V is not logically affected. Nevertheless, in earlier releases, V was invalidated by the addition of column C99.</p>
<p>Beginning with Oracle Database 11<span class="italic">g</span> release 1 (11.1), dependency metadata is recorded at a finer level of granularity, so that the addition of C99 does not invalidate view V. Similarly, if procedure P depends only on elements E1 and E2 in package PKG, then if element E99 is added to PKG, procedure P is not invalidated. (In Oracle Database 10<span class="italic">g</span>, this change to PKG would invalidate procedure P.)</p>
<p>By reducing the consequential invalidation of dependent objects in response to changes in the objects they depend upon, you can increase application availability. The benefit occurs both in the development environment and when a live application is parsed or upgraded. The benefit occurs when an Oracle Database patch set is applied because changes to schema objects must be compatible. For more information, see the <a class="olink ADFNS" href="../../appdev.112/e41502/toc.htm"><span class="italic">Oracle Database Development Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABEHAIF"></a>
<div id="HAOVW186" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.7</span> Invisible Indexes<a id="sthref359"></a><a id="sthref360"></a></h3>
<p>An invisible index provides an alternative to making an index unusable or even to dropping the index. An invisible index is maintained for any DML operation but is not used by the optimizer unless you explicitly specify the index with a hint.</p>
<p>Applications often require modification even when the complete application cannot be taken offline. Invisible indexes enable you to use temporary index structures for certain operations or modules of an application without affecting the overall application. Furthermore, you can use invisible indexes to test the removal of an index without dropping it right away, thus enabling a grace period for testing in production environments. For more information, see the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABEEGID"></a>
<div id="HAOVW188" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.8</span> Dependent PL/SQL Recompilation After Online Table Redefinition<a id="sthref361"></a></h3>
<p>This feature minimizes the need to recompile dependent PL/SQL packages after an online table redefinition. If the redefinition does not logically affect the PL/SQL packages, recompilation is not needed. This optimization is turned on by default.</p>
<p>If recompilation is needed, this feature reduces the time and effort to manually recompile dependent PL/SQL package after an online table redefinition. The recompilation also includes views, synonyms, and other table-dependent objects (with the exception of triggers) that are not logically affected by the redefinition. For more information about redefining tables online, see the <a class="olink ADMIN01514" href="../../server.112/e25494/tables.htm#ADMIN01514"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" -->
<hr />
<br />
<p style="text-decoration:underline">Footnote Legend</p>
Footnote&nbsp;1:&nbsp;DBUA incurs downtime. The amount of downtime is dependent on a number of factors. See <span class="italic">Oracle Database High Availability Best Practices</span> for additional considerations when choosing DBUA as an upgrade option. See <span class="italic">Oracle Database Upgrade Guide</span> for instructions on using DBUA to upgrade Oracle Database software.<br />
Footnote&nbsp;2:&nbsp;Beginning with Oracle Database 11<span class="italic">g</span>, the primary and standby systems in an Oracle Data Guard configuration can have different CPU architectures, operating systems (for example, Windows and Linux), operating system binaries (32-bit and 64-bit), and Oracle Database binaries (32-bit and 64-bit). For the latest capabilities and restrictions, see My Oracle Support note 413484.1 at <code><a href="http://support.oracle.com/">http://support.oracle.com/</a></code>.<br />
Footnote&nbsp;3:&nbsp;See the Exadata white paper "Best Practices for Migrating to Oracle Exadata Storage Server" at <code><a href="http://www.oracle.com/technetwork/database/exadata/index.html">http://www.oracle.com/technetwork/database/exadata/index.html</a></code>.<br /></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1356">
<tr>
<td class="cellalignment1363">
<table class="cellalignment1361">
<tr>
<td class="cellalignment1360"><a href="unplanned.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1360"><a href="grid.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2005, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1365">
<table class="cellalignment1359">
<tr>
<td class="cellalignment1360"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1360"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1360"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1360"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1360"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1360"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
</body>
</html>
