<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Administering an Oracle Streams Replication Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 033" />
<meta name="dcterms.created" content="2011-07-28T22:39:5Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Data Replication and Integration Guide" />
<meta name="dcterms.identifier" content="E17516-08" />
<meta name="dcterms.isVersionOf" content="TDPII" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdpii_repcont.htm" title="Previous" type="text/html" />
<link rel="Next" href="tdpii_repextend.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17516.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/14</span> <!-- End Header --><a id="CHDHCDDJ"></a><a id="TDPII083"></a>
<h1 class="chapter"><span class="secnum">5</span> Administering an Oracle Streams Replication Environment</h1>
<p><a id="sthref294"></a>This chapter describes how to manage, monitor, and troubleshoot an Oracle Streams replication environment.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#BABEBBFA">Managing an Oracle Streams Replication Environment</a></p>
</li>
<li>
<p><a href="#BABBADAC">Monitoring an Oracle Streams Replication Environment</a></p>
</li>
<li>
<p><a href="#BABHFHDB">Troubleshooting an Oracle Streams Replication Environment</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
This document only covers some Oracle Streams administrative operations that you can perform in Oracle Enterprise Manager. See the Oracle Enterprise Manager online help for complete instructions.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABEFAFI">Chapter 4, "Replicating Data Using Oracle Streams"</a></p>
</li>
<li>
<p><a href="tdpii_repextend.htm#BEBHDEHC">Chapter 6, "Extending an Oracle Streams Replication Environment"</a></p>
</li>
<li>
<p><a class="olink STRMS" href="../e17069/toc.htm"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
<li>
<p><a class="olink STREP" href="../e10705/toc.htm"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a></p>
</li>
</ul>
</div>
<a id="BABEBBFA"></a><a id="TDPII084"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing an Oracle Streams Replication Environment<a id="sthref295"></a></h2>
<p>An Oracle Streams replication environment should not require much management. If the environment is configured properly, then it should replicate changes to database objects automatically with minimal administration required. This section contains instructions for performing administrative tasks that might be required from time to time in an Oracle Streams replication environment.</p>
<p>The following topics describe managing an Oracle Streams replication environment:</p>
<ul>
<li>
<p><a href="#CHDGHGBI">Managing Capture Processes</a></p>
</li>
<li>
<p><a href="#CHDEAIGJ">Enabling and Disabling a Propagation</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">Managing Apply Processes</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABEFAFI">Chapter 4, "Replicating Data Using Oracle Streams"</a></p>
</li>
<li>
<p><a href="#BABBADAC">"Monitoring an Oracle Streams Replication Environment"</a></p>
</li>
<li>
<p><a href="#BABHFHDB">"Troubleshooting an Oracle Streams Replication Environment"</a></p>
</li>
</ul>
</div>
<a id="CHDGHGBI"></a><a id="TDPII137"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing Capture Processes<a id="sthref296"></a><a id="sthref297"></a></h3>
<p>You can use Enterprise Manager to manage capture processes. This topic includes instructions for completing the most common management tasks for capture processes.</p>
<p>The following topics describe managing capture processes:</p>
<ul>
<li>
<p><a href="#CHDIEDDJ">Starting and Stopping a Capture Process</a></p>
</li>
<li>
<p><a href="#CHDFECDH">Setting a Capture Process Parameter</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
<li>
<p><a href="#CHDHEHGH">"Monitoring Capture Processes"</a></p>
</li>
</ul>
</div>
<a id="CHDIEDDJ"></a><a id="TDPII138"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Starting and Stopping a Capture Process<a id="sthref298"></a><a id="sthref299"></a></h4>
<p>This topic contains instructions for starting and stopping a capture process in Enterprise Manager.</p>
<p>A capture process might stop automatically if it encounters an error, such as an unsupported data type. When this happens, the error is displayed on the Capture subpage of the Manage Replication page in Enterprise Manager. In this case, you should correct the error and restart the capture process.</p>
<p>Also, it is important to remember that a capture process can capture changes that were made to database objects while the capture process was stopped. These changes are recorded in the redo log, and a capture process finds the changes that it is configured to capture in the redo log after it restarts. If you want to avoid capturing specific changes to database objects, then you should use tags to accomplish this. See <a href="tdpii_repcont.htm#BABICHGF">"About Tags for Avoiding Change Cycling"</a>.</p>
<p class="orderedlisttitle">To start or stop a capture process:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref301" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the capture process to start or stop in the list of components. If necessary, use the search tool to find the capture process, and then select it.</p>
</li>
<li>
<p>In the Action list, select <span class="bold">Enable</span> to start a disabled or aborted capture process, or select <span class="bold">Disable</span> to stop an enabled capture process.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
</li>
<li>
<p>If you are disabling the capture process, then click <span class="bold">Yes</span> on the confirmation page to finish disabling it.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <a class="olink ARPLS547" href="../../appdev.112/e40758/d_cap_a.htm#ARPLS547"><code>START_CAPTURE</code></a> procedure and <a class="olink ARPLS548" href="../../appdev.112/e40758/d_cap_a.htm#ARPLS548"><code>STOP_CAPTURE</code></a> procedure in the <a class="olink ARPLS302" href="../../appdev.112/e40758/d_cap_a.htm#ARPLS302"><code>DBMS_CAPTURE_ADM</code></a> package to start and stop a capture process.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDHEHGH">"Monitoring Capture Processes"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDFECDH"></a><a id="TDPII139"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Setting a Capture Process Parameter<a id="sthref302"></a></h4>
<p>This topic contains instructions for setting capture process parameters in Enterprise Manager. Capture process parameters control the way a capture process operates. You can set a parameter to change a specific way in which a capture process operates. For example, you can change the <code>parallelism</code> capture process parameter to control the number of processes that capture changes. Typically, you adjust capture process parallelism to achieve the best capture process performance.</p>
<p class="orderedlisttitle">To set a capture process parameter:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref304" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the capture process to modify in the list of components. If necessary, use the search tool to find the capture process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">Configurations</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the Configurations subpage.</p>
</li>
<li>
<p>Click <span class="bold">Edit</span> to open the Edit Capture Configuration page.</p>
<img width="765" height="785" src="img/tdpii_edit_capture.gif" alt="Description of tdpii_edit_capture.gif follows" /><br />
<a id="sthref305" href="img_text/tdpii_edit_capture.htm">Description of the illustration tdpii_edit_capture.gif</a><br />
<br /></li>
<li>
<p>Modify one or more capture process parameters in the Parameters section.</p>
<p>See <a class="olink ARPLS306" href="../../appdev.112/e40758/d_cap_a.htm#ARPLS306"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the parameters. If you change the <code>parallelism</code> parameter, then the capture process automatically stops and restarts when you click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span> to save your changes.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <a class="olink ARPLS306" href="../../appdev.112/e40758/d_cap_a.htm#ARPLS306"><code>DBMS_CAPTURE_ADM.SET_PARAMETER</code></a> procedure to set a capture process parameter.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDHEHGH">"Monitoring Capture Processes"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDEAIGJ"></a><a id="TDPII141"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Enabling and Disabling a Propagation<a id="sthref306"></a><a id="sthref307"></a></h3>
<p>This topic contains instructions for enabling or disabling a propagation in Enterprise Manager.</p>
<p>You might need to disable a propagation if the database to which the propagation sends messages goes down or if a network problem prevents the propagation from sending messages. In these situations, you can disable the propagation and enable it when the problem is corrected.</p>
<p>Also, a propagation is aborted automatically after it fails to send messages in 16 consecutive attempts. When this happens, the error is displayed on the Propagation subpage of the Manage Replication page in Enterprise Manager. In this case, you should correct the error and enable the propagation.</p>
<p class="orderedlisttitle">To enable or disable a propagation:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref309" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the propagation to enable or disable in the list of components. If necessary, use the search tool to find the propagation, and then select it.</p>
</li>
<li>
<p>In the Action list, select <span class="bold">Enable</span> to start a disabled or aborted propagation, or select <span class="bold">Disable</span> to stop an enabled propagation.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <code>START_PROPAGATION</code> procedure and <code>STOP_PROPAGATION</code> procedure in the <a class="olink ARPLS320" href="../../appdev.112/e40758/d_prop_a.htm#ARPLS320"><code>DBMS_PROPAGATION_ADM</code></a> package to start and stop a propagation.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABFIHAI">"About Change Propagation Between Databases"</a></p>
</li>
<li>
<p><a href="#CHDJHIIE">"Monitoring Propagations"</a></p>
</li>
<li>
<p><a class="olink ADQUE0800" href="../../server.112/e11013/aq_admin.htm#ADQUE0800"><span class="italic">Oracle Streams Advanced Queuing User's Guide</span></a> for more information about managing propagations and propagation schedules</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDIJJGJ"></a><a id="TDPII143"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing Apply Processes<a id="sthref310"></a><a id="sthref311"></a></h3>
<p>You can use Enterprise Manager to manage apply processes. This section includes instructions for completing the most common management tasks for apply processes.</p>
<p>The following topics describe managing apply processes:</p>
<ul>
<li>
<p><a href="#CHDIIAGC">Starting and Stopping an Apply Process</a></p>
</li>
<li>
<p><a href="#CHDFDFBD">Setting an Apply Process Parameter</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="#CHDBJIHG">"Monitoring Apply Processes"</a></p>
</li>
<li>
<p><a href="#CHDJBAJD">"Managing Apply Errors"</a></p>
</li>
</ul>
</div>
<a id="CHDIIAGC"></a><a id="TDPII144"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Starting and Stopping an Apply Process<a id="sthref312"></a><a id="sthref313"></a></h4>
<p>This topic contains instructions for starting and stopping an apply process in Enterprise Manager.</p>
<p>An apply process might stop automatically if it encounters an error, such as attempting to update a row that does not exist in a table. When this happens, the status of the apply process is <code>ABORTED</code> on the Apply subpage of the Manage Replication page in Enterprise Manager. In this case, you should correct the error and restart the apply process.</p>
<p class="orderedlisttitle">To start or stop an apply process:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref315" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the apply process to start or stop in the list of components. If necessary, use the search tool to find the apply process, and then select it.</p>
</li>
<li>
<p>In the Action list, select <span class="bold">Enable</span> to start a disabled or aborted apply process, or select <span class="bold">Disable</span> to stop an enabled apply process.</p>
</li>
<li>
<p>Click <span class="bold">Go</span>.</p>
</li>
<li>
<p>If you are disabling the apply process, then click <span class="bold">Yes</span> on the confirmation page to finish disabling it.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <a class="olink ARPLS509" href="../../appdev.112/e40758/d_apply.htm#ARPLS509"><code>START_APPLY</code></a> procedure and <a class="olink ARPLS539" href="../../appdev.112/e40758/d_apply.htm#ARPLS539"><code>STOP_APPLY</code></a> procedure in the <a class="olink ARPLS300" href="../../appdev.112/e40758/d_apply.htm#ARPLS300"><code>DBMS_APPLY_ADM</code></a> package to start and stop an apply process.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBJIHG">"Monitoring Apply Processes"</a></p>
</li>
<li>
<p><a href="#CHDJBAJD">"Managing Apply Errors"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDFDFBD"></a><a id="TDPII145"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Setting an Apply Process Parameter<a id="sthref316"></a></h4>
<p>This topic contains instructions for setting apply process parameters in Enterprise Manager. Apply process parameters control the way an apply process operates. You can set a parameter to change a specific way in which an apply process operates. For example, you can change the <code>parallelism</code> apply process parameter to control the number of processes that apply changes. Typically, you adjust apply process parallelism to achieve the best apply process performance.</p>
<p class="orderedlisttitle">To set an apply process parameter:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref318" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the apply process to modify in the list of components. If necessary, use the search tool to find the apply process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">Configurations</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the Configurations subpage.</p>
</li>
<li>
<p>Click <span class="bold">Edit</span> to open the Edit Apply Configuration page.</p>
<img width="1027" height="716" src="img/tdpii_edit_apply.gif" alt="Description of tdpii_edit_apply.gif follows" /><br />
<a id="sthref319" href="img_text/tdpii_edit_apply.htm">Description of the illustration tdpii_edit_apply.gif</a><br />
<br /></li>
<li>
<p>Modify one or more apply process parameters in the Parameters section.</p>
<p>See <a class="olink ARPLS314" href="../../appdev.112/e40758/d_apply.htm#ARPLS314"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the parameters. If you change the <code>parallelism</code> parameter, then the apply process automatically stops and restarts when you click <span class="bold">Apply</span>.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span> to save your changes.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <a class="olink ARPLS314" href="../../appdev.112/e40758/d_apply.htm#ARPLS314"><code>DBMS_APPLY_ADM.SET_PARAMETER</code></a> procedure to set an apply process parameter.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBJIHG">"Monitoring Apply Processes"</a></p>
</li>
<li>
<p><a href="#CHDJBAJD">"Managing Apply Errors"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABBADAC"></a><a id="TDPII085"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring an Oracle Streams Replication Environment<a id="sthref320"></a><a id="sthref321"></a></h2>
<p>This section describes using Enterprise Manager and SQL*Plus to display general information about replication components and the replication topology. It also contains instructions for monitoring capture processes, propagations, and apply processes.</p>
<p>The following topics describe monitoring an Oracle Streams replication environment:</p>
<ul>
<li>
<p><a href="#CHDGIADF">Displaying an Overview of the Replication Components at a Database</a></p>
</li>
<li>
<p><a href="#BABIDBGD">Displaying the Stream Paths</a></p>
</li>
<li>
<p><a href="#BABCGAFE">Displaying Performance Analysis Information for Oracle Streams Components</a></p>
</li>
<li>
<p><a href="#CHDBEBFA">Displaying the Topology of the Oracle Streams Environment at a Database</a></p>
</li>
<li>
<p><a href="#CHDHEHGH">Monitoring Capture Processes</a></p>
</li>
<li>
<p><a href="#CHDJHIIE">Monitoring Propagations</a></p>
</li>
<li>
<p><a href="#CHDBJIHG">Monitoring Apply Processes</a></p>
</li>
<li>
<p><a href="#CHDEHBJF">Viewing Buffered Queue Statistics</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABEBBFA">"Managing an Oracle Streams Replication Environment"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABEFAFI">Chapter 4, "Replicating Data Using Oracle Streams"</a></p>
</li>
</ul>
</div>
<a id="CHDGIADF"></a><a id="TDPII146"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying an Overview of the Replication Components at a Database</h3>
<p>The Overview subpage of the Manage Replication page in Enterprise Manager contains information about the Oracle Streams components in the current database. This information includes:</p>
<ul>
<li>
<p>General information about the Streams pool size</p>
</li>
<li>
<p>The number of capture processes, propagations, and apply processes in the local database</p>
</li>
<li>
<p>The number of capture processes, propagations, and apply processes that currently have errors</p>
</li>
<li>
<p>A summary of the Stream paths that flow through the Oracle Streams components at the local database</p>
</li>
<li>
<p>Graphs that show the latency and throughput for capture processes, propagations, and apply processes</p>
</li>
</ul>
<p>You can click a number to drill down to more information about a component or to manage a component.</p>
<p class="orderedlisttitle">To display an overview of the replication components at a database:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
</ol>
<img width="1004" height="508" src="img/tdpii_streams_main1.gif" alt="Description of tdpii_streams_main1.gif follows" /><br />
<a id="sthref323" href="img_text/tdpii_streams_main1.htm">Description of the illustration tdpii_streams_main1.gif</a><br />
<br /></div>
<!-- class="sect2" -->
<a id="BABIDBGD"></a><a id="TDPII337"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying the Stream Paths</h3>
<p>Oracle Enterprise Manager uses the Oracle Streams Performance Advisor to track the stream paths for the Oracle Streams components in a database. The Oracle Streams components include capture processes, queues, propagation senders, propagation receivers, and apply processes. The Oracle Streams Performance Advisor enables you to monitor these components are performing. The Oracle Streams Performance Advisor also tracks the links between the components, and the way information flows from capture to consumption.</p>
<p>A stream path is a flow of messages from a source to a destination. A stream path begins where a capture process, synchronous capture, or application enqueues messages into a queue. A stream path ends where an apply process dequeues the messages. The stream path might flow through multiple queues and propagations before it reaches the apply process. Therefore, a single stream path can consist of multiple source/destination component pairs before it reaches the apply process.</p>
<p class="orderedlisttitle">To display a stream paths for the Oracle Streams components in a database:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
</li>
<li>
<p>Select the <span class="bold">Path Level</span> option in View.</p>
</li>
</ol>
<img width="1124" height="643" src="img/tdpii_streams_paths.gif" alt="Description of tdpii_streams_paths.gif follows" /><br />
<a id="sthref325" href="img_text/tdpii_streams_paths.htm">Description of the illustration tdpii_streams_paths.gif</a><br />
<br />
<p><a class="olink STRMS854" href="../../server.112/e17069/strms_topology.htm#STRMS854"><span class="italic">Oracle Streams Concepts and Administration</span></a> contains detailed information about stream paths. You can click the link for a statistic for detailed information about the statistic.</p>
<p><a id="sthref326"></a><a id="sthref327"></a>Also, the path level view shows if any components are bottleneck components. A bottleneck component is the busiest component or the component with the least amount of idle time. If there are bottleneck components, then check the status of these components. If they are disabled, then you can enable them. If these components are enabled, then you can examine the components to see if they can be modified to perform better.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In Database Control, links are not available for statistics that are for components that run on a remote database.</div>
</div>
<!-- class="sect2" -->
<a id="BABCGAFE"></a><a id="TDPII338"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying Performance Analysis Information for Oracle Streams Components</h3>
<p>Oracle Enterprise Manager uses the Oracle Streams Performance Advisor to monitor the performance of the Oracle Streams components in a database.</p>
<p class="orderedlisttitle">To display performance analysis information for the Oracle Streams components in a database:&nbsp;</p>
<ol>
<li>
<p>Log in to Enterprise Manager as an administrative user, such as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page of the database you want to manage.</p>
</li>
<li>
<p>Click <span class="bold">Advisor Central</span> in the Related Links section.</p>
</li>
<li>
<p>On the Advisor Central page, click <span class="bold">Streams Performance Advisor</span>.</p>
<p>The Streams Performance Advisor page displays a summary of the performance analysis information for each component.</p>
</li>
<li>
<p>To view detailed performance analysis information, choose an option:</p>
<ul>
<li>
<p>To view detailed performance analysis information for all components, click <span class="bold">View All Details</span>.</p>
</li>
<li>
<p>To view detailed performance analysis information about a component, select the component and click <span class="bold">View Details</span>.</p>
</li>
</ul>
</li>
</ol>
<p><a class="olink STRMS170" href="../../server.112/e17069/strms_topology.htm#STRMS170"><span class="italic">Oracle Streams Concepts and Administration</span></a> contains detailed information about the component types and statistics shown on these pages.</p>
</div>
<!-- class="sect2" -->
<a id="CHDBEBFA"></a><a id="TDPII147"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Displaying the Topology of the Oracle Streams Environment at a Database<a id="sthref329"></a><a id="sthref330"></a><a id="sthref331"></a><a id="sthref332"></a></h3>
<p>An Oracle Streams topology displays a graphical representation of the local database and other databases that interact with the local database in the Oracle Streams environment. In a replication environment, the topology shows the following information about the databases displayed:</p>
<ul>
<li>
<p>The database links used by propagations from the current database to other databases in the Oracle Streams environment. Each arrow that originates at the current database shows a database link used by a propagation from the current database to another database. Replication environments use database links to send changes made to replicated objects to other databases.</p>
</li>
<li>
<p>The database links used by propagations from other databases in the Oracle Streams environment to the current database for which an apply process at the current database applies the propagated messages. Each arrow that terminates at the current database shows a database link used by a propagation from another database to the current database whose messages are applied at the current database.</p>
</li>
</ul>
<p class="orderedlisttitle">To view the Oracle Streams topology:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Topology</span> to open the Topology subpage.</p>
</li>
</ol>
<p>You can use the <span class="bold">Overview</span> window to select a particular portion of the topology to view in detail and to zoom in and zoom out. You can also select a database in the topology and view the <span class="bold">Selection Details</span> window for information about the database.</p>
<p>Click the <span class="bold">Legend</span> link for more information about the Oracle Streams topology.</p>
<p>The following graphic shows an example of the Oracle Streams topology for an Oracle Streams replication environment:</p>
<img width="885" height="641" src="img/tdpii_streams_topology.gif" alt="Description of tdpii_streams_topology.gif follows" /><br />
<a id="sthref334" href="img_text/tdpii_streams_topology.htm">Description of the illustration tdpii_streams_topology.gif</a><br />
<br />
<p>The Oracle Streams topology in the previous figure shows a hub-and-spoke replication configuration. The configuration includes the following elements:</p>
<ul>
<li>
<p>The current database is named <code>hub</code>.</p>
</li>
<li>
<p>The <code>spoke1.example.com</code> database is part of the replication environment that interacts with the current database. There is a database link from this database to the hub database and from the hub database to this database.</p>
</li>
<li>
<p>The <code>spoke2.example.com</code> database is part of the replication environment that interacts with the current database. There is a database link from this database to the hub database and from the hub database to this database.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#CIHJEIDB">"About Hub-And-Spoke Replication Environments"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDHEHGH"></a><a id="TDPII148"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Capture Processes</h3>
<p>You can use Enterprise Manager to view detailed information about capture processes. You can also view statistics for capture processes.</p>
<p>The following topics describe monitoring capture processes:</p>
<ul>
<li>
<p><a href="#CHDIFCCD">Viewing Information About a Capture Process</a></p>
</li>
<li>
<p><a href="#CHDDBHFB">Viewing Statistics for a Capture Process</a></p>
</li>
<li>
<p><a href="#BABDEJAI">Viewing Active Capture Process Transactions</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
<li>
<p><a href="#CHDGHGBI">"Managing Capture Processes"</a></p>
</li>
</ul>
</div>
<a id="CHDIFCCD"></a><a id="TDPII149"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Information About a Capture Process<a id="sthref335"></a><a id="sthref336"></a></h4>
<p>You can use Enterprise Manager to view information about a capture process. This information includes the capture process status and state and other information about the capture process.</p>
<p class="orderedlisttitle">To view detailed information about a capture process in Enterprise Manager:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref338" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br />
<p>The Steams subpage shows general information about each capture process in the database. This information includes capture process status, state, latency, and throughput.</p>
</li>
<li>
<p>Select the capture process to monitor in the list of components. If necessary, use the search tool to find the capture process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Details</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Capture Details page.</p>
</li>
</ol>
<img width="1015" height="676" src="img/tdpii_view_capture_details.gif" alt="Description of tdpii_view_capture_details.gif follows" /><br />
<a id="sthref339" href="img_text/tdpii_view_capture_details.htm">Description of the illustration tdpii_view_capture_details.gif</a><br />
<br />
<p>The View Capture Details page includes detailed information about the capture process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also query the <a class="olink REFRN20031" href="../../server.112/e40402/statviews_1025.htm#REFRN20031"><code>ALL_CAPTURE</code></a> and <a class="olink REFRN30269" href="../../server.112/e40402/dynviews_3080.htm#REFRN30269"><code>V$STREAMS_CAPTURE</code></a> data dictionary views for information about a capture process.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABHHDGG">"About Rules for Controlling the Behavior of Capture, Propagation, and Apply"</a></p>
</li>
<li>
<p><a href="#CHDGHGBI">"Managing Capture Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDDBHFB"></a><a id="TDPII150"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Statistics for a Capture Process<a id="sthref340"></a><a id="sthref341"></a><a id="sthref342"></a></h4>
<p>You can use Enterprise Manager to view statistics for a capture process. The statistics include the number of messages in the capture process's queue, the number of messages captured and enqueued by the capture process, and other statistics relating to the capture process.</p>
<p class="orderedlisttitle">To view statistics for a capture process in Enterprise Manager:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref344" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br />
<p>The Streams subpage shows general information about each capture process in the database. This information includes capture process status, state, latency, and throughput.</p>
</li>
<li>
<p>Select the capture process to monitor in the list of components. If necessary, use the search tool to find the capture process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Statistics</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Capture Statistics page.</p>
</li>
</ol>
<img width="1029" height="833" src="img/tdpii_view_capture_stats.gif" alt="Description of tdpii_view_capture_stats.gif follows" /><br />
<a id="sthref345" href="img_text/tdpii_view_capture_stats.htm">Description of the illustration tdpii_view_capture_stats.gif</a><br />
<br />
<p>The View Capture Statistics page includes the following information:</p>
<ul>
<li>
<p>The <span class="bold">Queue Statistics</span> graph shows the number of messages currently in the capture process's queue. The <span class="bold">No of Enqueued Messages</span> line in the graph shows the total number of messages currently in the buffered queue. The <span class="bold">No of Spilled Messages</span> line in the graph shows the total number of messages that have spilled from memory into the persistent queue table.</p>
</li>
<li>
<p>The <span class="bold">Message Statistics</span> graph shows the total number of changes enqueued and captured by the capture process since it last started. <span class="bold">Total Messages Enqueued</span> shows the number of changes enqueued by the capture process. <span class="bold">Total Messages Captured</span> shows the number of changes that were evaluated in detail against the capture process rules. If a change does not satisfy the capture process rules, then the change is not enqueued.</p>
</li>
<li>
<p>The <span class="bold">Capture Statistics</span> section includes the current state of the capture process, and statistics related to time and changes (messages) captured. See the documentation for the <a class="olink REFRN30269" href="../../server.112/e40402/dynviews_3080.htm#REFRN30269"><code>V$STREAMS_CAPTURE</code></a> dynamic performance view in <a class="olink REFRN30269" href="../../server.112/e40402/dynviews_3080.htm#REFRN30269"><span class="italic">Oracle Database Reference</span></a> for more information about these statistics.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
<li>
<p><a href="#CHDGHGBI">"Managing Capture Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABDEJAI"></a><a id="TDPII339"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Active Capture Process Transactions</h4>
<p>You can use Enterprise Manager to view the transactions that are currently being processed by a capture process. Enterprise Manager displays the following information:</p>
<ul>
<li>
<p>Transaction ID: The transaction ID of each transaction</p>
</li>
<li>
<p>Cumulative Messages: The cumulative number of messages in the transaction</p>
<p>In an Oracle Streams replication environment, each message is a logical change record (LCR). If the Streams process is restarted while the transaction changes are being captured, then this column shows the number of LCRs captured in the transaction since the Streams process was started.</p>
</li>
<li>
<p>First SCN: The system change number (SCN) for the first message in the transaction</p>
</li>
<li>
<p>Last SCN: The SCN for the last message in the transaction</p>
</li>
<li>
<p>Active Since: The time when the first message in the transaction was recorded</p>
<p>In an Oracle Streams replication environment, changes captured by a capture process are recorded in the database redo log.</p>
</li>
<li>
<p>Active For (Seconds): The amount of time that the transaction in the stream, which is the amount of time between the Active Since time and the current time</p>
</li>
</ul>
<p class="orderedlisttitle">To view the active capture process transactions:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref347" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br />
<p>The Capture subpage shows general information about each capture process in the database. This information includes capture process status, state, latency, and throughput.</p>
</li>
<li>
<p>Click the number link in the <span class="bold">Current Transactions Active</span> field for the capture process to open the View Capture Statistics page.</p>
<p>The Active Streams Transactions List section displays the active capture process transactions.</p>
<img width="859" height="145" src="img/tdpii_active_cap_trans.gif" alt="Description of tdpii_active_cap_trans.gif follows" /><br />
<a id="sthref348" href="img_text/tdpii_active_cap_trans.htm">Description of the illustration tdpii_active_cap_trans.gif</a><br />
<br />
<p>The <span class="bold">Session ID</span> and <span class="bold">Total Messages</span> fields do not apply to capture processes.</p>
</li>
<li>
<p>To drill-down for more information about a transaction, select the transaction and click <span class="bold">View Transaction Details</span>.</p>
</li>
<li>
<p>On the LogMiner page, click <span class="bold">Continue</span>.</p>
</li>
<li>
<p>On the LogMiner Results page, click the <span class="bold">Transaction ID link</span> in the table in the Transaction Results section.</p>
<p>The Transaction Details page displays detailed information about the changes in the transaction.</p>
<img width="834" height="235" src="img/tdpii_cap_trans_detailes.gif" alt="Description of tdpii_cap_trans_detailes.gif follows" /><br />
<a id="sthref349" href="img_text/tdpii_cap_trans_detailes.htm">Description of the illustration tdpii_cap_trans_detailes.gif</a><br />
<br /></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
<li>
<p><a href="#CHDGHGBI">"Managing Capture Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDJHIIE"></a><a id="TDPII151"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Propagations</h3>
<p>You can use Enterprise Manager to view detailed information about propagations. You can also view statistics for propagations.</p>
<p>The following topics describe monitoring propagations:</p>
<ul>
<li>
<p><a href="#CHDGEBHI">Viewing Information About a Propagation</a></p>
</li>
<li>
<p><a href="#CHDGAAJI">Viewing Statistics for a Propagation</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABFIHAI">"About Change Propagation Between Databases"</a></p>
</li>
<li>
<p><a href="#CHDEAIGJ">"Enabling and Disabling a Propagation"</a></p>
</li>
</ul>
</div>
<a id="CHDGEBHI"></a><a id="TDPII152"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Information About a Propagation<a id="sthref350"></a><a id="sthref351"></a></h4>
<p>You can use Enterprise Manager to view information about a propagation. This information includes the propagation status, whether the propagation has failed, and other information about the propagation.</p>
<p class="orderedlisttitle">To view information about a propagation in Enterprise Manager:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref353" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the propagation to monitor in the list of components. If necessary, use the search tool to find the propagation, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Details</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Propagation Details page.</p>
</li>
</ol>
<img width="1028" height="737" src="img/tdpii_view_prop_details.gif" alt="Description of tdpii_view_prop_details.gif follows" /><br />
<a id="sthref354" href="img_text/tdpii_view_prop_details.htm">Description of the illustration tdpii_view_prop_details.gif</a><br />
<br />
<p>The View Propagation Details page includes detailed information about the propagation.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also query the following data dictionary views for information about a propagation:
<ul>
<li>
<p><a class="olink REFRN20170" href="../../server.112/e40402/statviews_2014.htm#REFRN20170"><code>ALL_PROPAGATION</code></a></p>
</li>
<li>
<p><a class="olink REFRN30353" href="../../server.112/e40402/dynviews_2104.htm#REFRN30353"><code>V$PROPAGATION_SENDER</code></a></p>
</li>
<li>
<p><a class="olink REFRN30352" href="../../server.112/e40402/dynviews_2103.htm#REFRN30352"><code>V$PROPAGATION_RECEIVER</code></a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABFIHAI">"About Change Propagation Between Databases"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABHHDGG">"About Rules for Controlling the Behavior of Capture, Propagation, and Apply"</a></p>
</li>
<li>
<p><a href="#CHDEAIGJ">"Enabling and Disabling a Propagation"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDGAAJI"></a><a id="TDPII153"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Statistics for a Propagation<a id="sthref355"></a><a id="sthref356"></a><a id="sthref357"></a><a id="sthref358"></a><a id="sthref359"></a></h4>
<p>You can use Enterprise Manager to view statistics for a propagation. The statistics include the number of messages in the propagation source queue, the number of messages sent by the propagation, and other statistics relating to the propagation.</p>
<p class="orderedlisttitle">To view statistics for a propagation in Enterprise Manager:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref361" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the propagation to monitor in the list of components. If necessary, use the search tool to find the propagation, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Statistics</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Propagation Statistics page.</p>
</li>
</ol>
<p>The View Propagation Statistics page includes the following subpages:</p>
<ul>
<li>
<p>The Buffered Queue option shows propagation statistics for messages that were enqueued into the buffered queue portion of the queue used by the propagation. Use this subpage to view propagation statistics if the propagation sends changes captured by a capture process.</p>
</li>
<li>
<p>The Persistent Queue option shows propagation statistics for messages that were enqueued into the persistent queue portion of the queue used by the propagation. Use this subpage to view propagation statistics if the propagation sends changes captured by a synchronous capture.</p>
</li>
</ul>
<p>Both options contain graphs that show the number of messages in the queue and the number of messages sent by the propagation over several hours. Both options also contain other propagation statistics, such as the total number of messages and bytes propagated since the propagation was last started.</p>
<img width="1029" height="697" src="img/tdpii_prop_stats.gif" alt="Description of tdpii_prop_stats.gif follows" /><br />
<a id="sthref362" href="img_text/tdpii_prop_stats.htm">Description of the illustration tdpii_prop_stats.gif</a><br />
<br />
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also query the following dynamic performance views for buffered queue statistics and propagation statistics:
<ul>
<li>
<p><a class="olink REFRN30317" href="../../server.112/e40402/dynviews_1075.htm#REFRN30317"><code>V$BUFFERED_QUEUES</code></a></p>
</li>
<li>
<p><a class="olink REFRN30353" href="../../server.112/e40402/dynviews_2104.htm#REFRN30353"><code>V$PROPAGATION_SENDER</code></a></p>
</li>
<li>
<p><a class="olink REFRN30352" href="../../server.112/e40402/dynviews_2103.htm#REFRN30352"><code>V$PROPAGATION_RECEIVER</code></a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABFIHAI">"About Change Propagation Between Databases"</a></p>
</li>
<li>
<p><a href="#CHDEAIGJ">"Enabling and Disabling a Propagation"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDBJIHG"></a><a id="TDPII154"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Apply Processes<a id="sthref363"></a><a id="sthref364"></a></h3>
<p>You can use Enterprise Manager to view detailed information about apply processes. You can also view statistics for apply processes.</p>
<p>The following topics describe monitoring apply processes:</p>
<ul>
<li>
<p><a href="#CHDIGAED">Viewing Information About an Apply Process</a></p>
</li>
<li>
<p><a href="#CHDFCAFI">Viewing Statistics for an Apply Process</a></p>
</li>
<li>
<p><a href="#BABBIEBJ">Viewing Active and Spilled Apply Process Transactions</a></p>
</li>
<li>
<p><a href="#CHDCBHGC">Displaying the Configured Update Conflict Handlers</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">"Managing Apply Processes"</a></p>
</li>
<li>
<p><a href="#CHDJBAJD">"Managing Apply Errors"</a></p>
</li>
</ul>
</div>
<a id="CHDIGAED"></a><a id="TDPII155"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Information About an Apply Process</h4>
<p>You can use Enterprise Manager to view information about an apply process. This information includes the apply process status and state and other information about the apply process.</p>
<p class="orderedlisttitle">To view information about an apply process in Enterprise Manager:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref366" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the apply process to monitor in the list of components. If necessary, use the search tool to find the apply process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Details</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Apply Details page.</p>
</li>
</ol>
<img width="1014" height="734" src="img/tdpii_view_apply_details.gif" alt="Description of tdpii_view_apply_details.gif follows" /><br />
<a id="sthref367" href="img_text/tdpii_view_apply_details.htm">Description of the illustration tdpii_view_apply_details.gif</a><br />
<br />
<p>The View Apply Details page includes detailed information about the apply process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also query the following data dictionary views for information about an apply process:
<ul>
<li>
<p><a class="olink REFRN20005" href="../../server.112/e40402/statviews_1004.htm#REFRN20005"><code>ALL_APPLY</code></a></p>
</li>
<li>
<p><a class="olink REFRN30266" href="../../server.112/e40402/dynviews_3077.htm#REFRN30266"><code>V$STREAMS_APPLY_COORDINATOR</code></a></p>
</li>
<li>
<p><a class="olink REFRN30267" href="../../server.112/e40402/dynviews_3078.htm#REFRN30267"><code>V$STREAMS_APPLY_READER</code></a></p>
</li>
<li>
<p><a class="olink REFRN30268" href="../../server.112/e40402/dynviews_3079.htm#REFRN30268"><code>V$STREAMS_APPLY_SERVER</code></a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABHHDGG">"About Rules for Controlling the Behavior of Capture, Propagation, and Apply"</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">"Managing Apply Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDFCAFI"></a><a id="TDPII156"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Statistics for an Apply Process<a id="sthref368"></a><a id="sthref369"></a><a id="sthref370"></a></h4>
<p>You can use Enterprise Manager to view statistics for an apply process. The statistics include the number of messages in the apply process's queue, the number of messages applied by the apply process, and other statistics relating to the apply process.</p>
<p class="orderedlisttitle">To view statistics for an apply process in Enterprise Manager:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref372" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Select the apply process to monitor in the list of components. If necessary, use the search tool to find the apply process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Statistics</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Apply Statistics page.</p>
</li>
</ol>
<p>The View Apply Statistics page includes the following subpages:</p>
<ul>
<li>
<p>The Queue subpage shows the number of messages over the past several hours in both the persistent queue portion and the buffered queue portion of the apply process's queue. If the apply process applies changes captured by a synchronous capture, then analyze the persistent queue statistics. If the apply process applies changes captured by a capture process, then analyze the buffered queue statistics.</p>
</li>
<li>
<p>The Reader subpage shows statistics for the reader server. The reader server dequeues messages from the apply process's queue and assembles them into separate transactions.</p>
</li>
<li>
<p>The Coordinator subpage shows statistics for the coordinator process. The coordinator process gets transactions from the reader server and passes them to apply servers.</p>
</li>
<li>
<p>The Server subpage shows statistics for the apply servers. The apply servers apply changes to database objects or pass the changes to apply handlers. To view details about a specific apply server, select it and click <span class="bold">View Details</span>.</p>
</li>
</ul>
<img width="1017" height="756" src="img/tdpii_apply_co_stats.gif" alt="Description of tdpii_apply_co_stats.gif follows" /><br />
<a id="sthref373" href="img_text/tdpii_apply_co_stats.htm">Description of the illustration tdpii_apply_co_stats.gif</a><br />
<br />
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also query the following dynamic performance views for buffered queue statistics and apply process statistics:
<ul>
<li>
<p><a class="olink REFRN30317" href="../../server.112/e40402/dynviews_1075.htm#REFRN30317"><code>V$BUFFERED_QUEUES</code></a></p>
</li>
<li>
<p><a class="olink REFRN30266" href="../../server.112/e40402/dynviews_3077.htm#REFRN30266"><code>V$STREAMS_APPLY_COORDINATOR</code></a></p>
</li>
<li>
<p><a class="olink REFRN30267" href="../../server.112/e40402/dynviews_3078.htm#REFRN30267"><code>V$STREAMS_APPLY_READER</code></a></p>
</li>
<li>
<p><a class="olink REFRN30268" href="../../server.112/e40402/dynviews_3079.htm#REFRN30268"><code>V$STREAMS_APPLY_SERVER</code></a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">"Managing Apply Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABBIEBJ"></a><a id="TDPII340"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Active and Spilled Apply Process Transactions</h4>
<p>You can use Enterprise Manager to view the transactions that are currently being processed by an apply process. Active transactions are transactions with messages that are currently in the buffered queue for the apply process. Spilled transactions are transactions with messages that have spilled from the buffered queue to the hard disk.</p>
<p>Enterprise Manager displays the following information for active transactions:</p>
<ul>
<li>
<p>Transaction ID: The transaction ID of each transaction</p>
</li>
<li>
<p>Session ID: The session ID of the apply process's coordinator process</p>
</li>
<li>
<p>Total Messages: The total number of messages in the transaction</p>
<p>The total number of messages in the transaction is calculated only for apply processes. In an Oracle Streams replication environment, each message is a logical change record (LCR).</p>
</li>
<li>
<p>Cumulative Messages: The cumulative number of messages in the transaction</p>
<p>If the Streams process is restarted while the transaction is being received, then this column shows the number of LCRs received in the transaction since the Streams process was started.</p>
</li>
<li>
<p>First SCN: The system change number (SCN) of the first message in the transaction</p>
</li>
<li>
<p>Last SCN: The SCN of the last message in the transaction</p>
</li>
<li>
<p>Active Since: The time when the first message in the transaction was recorded</p>
<p>In an Oracle Streams replication environment, changes captured by a capture process are recorded in the database redo log.</p>
</li>
<li>
<p>Active For (Seconds): The amount of time that the transaction in the stream, which is the amount of time between the Active Since time and the current time</p>
</li>
</ul>
<p>Enterprise Manager displays the following information for spilled transactions:</p>
<ul>
<li>
<p>Transaction ID: The transaction ID of each transaction</p>
</li>
<li>
<p>Session ID: The session ID of the apply process's reader server</p>
</li>
<li>
<p>First SCN: The SCN for the first message in the transaction</p>
</li>
<li>
<p>Message Count: The number of spilled messages in the transaction</p>
<p>In an Oracle Streams replication environment, each message is a logical change record (LCR).</p>
</li>
<li>
<p>First Message Create Time: The time when the first message in the transaction was recorded</p>
<p>In an Oracle Streams replication environment, changes captured by a capture process are recorded in the database redo log.</p>
</li>
<li>
<p>Spill Create Time: The time when the first message in the transaction spilled from the buffered queue to the hard disk (spill create time)</p>
</li>
</ul>
<p class="orderedlisttitle">To view active and spilled apply process transactions:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="980" height="436" src="img/tdpii_strrms_strms.gif" alt="Description of tdpii_strrms_strms.gif follows" /><br />
<a id="sthref375" href="img_text/tdpii_strrms_strms.htm">Description of the illustration tdpii_strrms_strms.gif</a><br />
<br /></li>
<li>
<p>Perform one of the following actions:</p>
<ul>
<li>
<p>To view the active apply process transactions, click the number link in the <span class="bold">Current Transactions Active</span> field for the apply process.</p>
<p>The Active Streams Transactions List section on the View Apply Statistics page displays the active apply process transactions.</p>
<img width="839" height="96" src="img/tdpii_active_app_trans.gif" alt="Description of tdpii_active_app_trans.gif follows" /><br />
<a id="sthref376" href="img_text/tdpii_active_app_trans.htm">Description of the illustration tdpii_active_app_trans.gif</a><br />
<br /></li>
<li>
<p>To view the spilled apply process transactions, click the number link in the <span class="bold">Current Transactions Spilled</span> field for the apply process.</p>
<p>The Spilled Streams Transactions List section on the View Apply Statistics page displays the spilled apply process transactions.</p>
<img width="582" height="103" src="img/tdpii_spilled_app_trans.gif" alt="Description of tdpii_spilled_app_trans.gif follows" /><br />
<a id="sthref377" href="img_text/tdpii_spilled_app_trans.htm">Description of the illustration tdpii_spilled_app_trans.gif</a><br />
<br /></li>
</ul>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">"Managing Apply Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDCBHGC"></a><a id="TDPII159"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Displaying the Configured Update Conflict Handlers<a id="sthref378"></a><a id="sthref379"></a><a id="sthref380"></a><a id="sthref381"></a></h4>
<p>In a replication environment, update conflict handlers automatically resolve conflicts that occur when the same row is updated at two different databases at nearly the same time. You can use the <a class="olink REFRN20006" href="../../server.112/e40402/statviews_1006.htm#REFRN20006"><code>ALL_APPLY_CONFLICT_COLUMNS</code></a> data dictionary view to list the update conflict handlers.</p>
<p class="orderedlisttitle">To display the configured update conflict handlers:&nbsp;</p>
<ol>
<li>
<p>Open SQL*Plus and connect to the database as the Oracle Streams administrator.</p>
<p>See <a class="olink ADMQS0361" href="../../server.112/e10897/em_manage.htm#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN OBJECT_OWNER HEADING 'Table|Owner' FORMAT A5
COLUMN OBJECT_NAME HEADING 'Table Name' FORMAT A12
COLUMN METHOD_NAME HEADING 'Method' FORMAT A12
COLUMN RESOLUTION_COLUMN HEADING 'Resolution|Column' FORMAT A13
COLUMN COLUMN_NAME HEADING 'Column Name' FORMAT A30
 
SELECT OBJECT_OWNER, 
       OBJECT_NAME, 
       METHOD_NAME, 
       RESOLUTION_COLUMN, 
       COLUMN_NAME
  FROM ALL_APPLY_CONFLICT_COLUMNS
  ORDER BY OBJECT_OWNER, OBJECT_NAME, RESOLUTION_COLUMN;
</pre>
<p>The output will be similar to the following:</p>
<pre>
<span class="bold">Table                           Resolution</span>
<span class="bold">Owner Table Name   Method       Column        Column Name</span>
<span class="bold">----- ------------ ------------ ------------- ------------------------------</span>
<span class="bold">HR    COUNTRIES    MAXIMUM      TIME          TIME</span>
<span class="bold">HR    COUNTRIES    MAXIMUM      TIME          REGION_ID</span>
<span class="bold">HR    COUNTRIES    MAXIMUM      TIME          COUNTRY_NAME</span>
<span class="bold">HR    DEPARTMENTS  MAXIMUM      TIME          TIME</span>
<span class="bold">HR    DEPARTMENTS  MAXIMUM      TIME          MANAGER_ID</span>
<span class="bold">HR    DEPARTMENTS  MAXIMUM      TIME          LOCATION_ID</span>
<span class="bold">HR    DEPARTMENTS  MAXIMUM      TIME          DEPARTMENT_NAME</span>
</pre>
<p>The output in this example shows that latest time conflict resolution is configured for the <code>hr.countries</code> and <code>hr.departments</code> tables. When a conflict occurs for any column listed under <code>Column</code> <code>Name</code>, the change with the maximum, or latest, time in the <code>TIME</code> resolution column is used, and the other change is discarded.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABGAACC">"About Conflicts and Conflict Resolution"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#CIHIACBB">"Tutorial: Configuring Latest Time Conflict Resolution for a Table"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDEHBJF"></a><a id="TDPII161"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Buffered Queue Statistics<a id="sthref383"></a><a id="sthref384"></a><a id="sthref385"></a></h3>
<p>You can use Enterprise Manager to view statistics for a buffered queue that is used by a capture process, propagation, or apply process in your replication environment. In an Oracle Streams replication environment that uses capture processes to capture changes, each capture process enqueues changes into the buffered queue portion of its queue. The changes remain in buffered queues as they are propagated from one queue to another, and apply processes dequeue the changes from a buffered queue.</p>
<p class="orderedlisttitle">To view buffered queue statistics:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Click <span class="bold">Data Movement</span> to open the Data Movement subpage.</p>
</li>
<li>
<p>Click <span class="bold">Manage Advanced Queues</span> in the Streams section.</p>
<p>The Manage Advanced Queues page appears.</p>
</li>
<li>
<p>Select the queue to monitor. If necessary, use the search tool to find the queue, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">Queue Statistics</span> in the Actions list.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the Queue Statistics page.</p>
</li>
<li>
<p>Click <span class="bold">Buffered Queue Statistics</span> to open the Buffered Queue Statistics subpage.</p>
<img width="1018" height="476" src="img/tdpii_buf_q_stats.gif" alt="Description of tdpii_buf_q_stats.gif follows" /><br />
<a id="sthref387" href="img_text/tdpii_buf_q_stats.htm">Description of the illustration tdpii_buf_q_stats.gif</a><br />
<br /></li>
</ol>
<p>This Buffered Queue Statistics subpage includes the following information about the buffered queue portion of the selected queue:</p>
<ul>
<li>
<p>Information about the number of changes in the queue and the number of changes that have spilled from memory onto disk.</p>
</li>
<li>
<p>The number of changes enqueued by local capture processes. When the capture process is local, the Sender Queue field is empty.</p>
</li>
<li>
<p>The number of changes captured by remote capture processes at a different database and sent to the buffered queue. When a capture process is remote, the Sender Queue field contains the queue and database from which the changes were sent.</p>
</li>
<li>
<p>The number of changes dequeued by local apply processes from the buffered queue.</p>
</li>
<li>
<p>The number of changes sent by propagations from the buffered queue to a different queue.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also query the following dynamic performance views for buffered queue statistics:
<ul>
<li>
<p><a class="olink REFRN30317" href="../../server.112/e40402/dynviews_1075.htm#REFRN30317"><code>V$BUFFERED_QUEUES</code></a></p>
</li>
<li>
<p><a class="olink REFRN30316" href="../../server.112/e40402/dynviews_1074.htm#REFRN30316"><code>V$BUFFERED_PUBLISHERS</code></a></p>
</li>
<li>
<p><a class="olink REFRN30318" href="../../server.112/e40402/dynviews_1076.htm#REFRN30318"><code>V$BUFFERED_SUBSCRIBERS</code></a></p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABEHDDF">"About Oracle Streams Replication"</a></p>
</li>
<li>
<p><a href="tdpii_messaging.htm#CHDEBJHA">"Modifying Queues"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABHFHDB"></a><a id="TDPII086"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Troubleshooting an Oracle Streams Replication Environment<a id="sthref388"></a><a id="sthref389"></a></h2>
<p>This section describes the most common problems in an Oracle Streams replication environment. It also describes how to correct these problems.</p>
<p>The following topics describe troubleshooting an Oracle Streams replication environment:</p>
<ul>
<li>
<p><a href="#CHDCAIEE">Responding to Automated Alerts in Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CHDJBAJD">Managing Apply Errors</a></p>
</li>
<li>
<p><a href="#CHDIIGGG">Managing a Replication Environment When a Destination Is Unavailable</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABEFAFI">Chapter 4, "Replicating Data Using Oracle Streams"</a></p>
</li>
<li>
<p><a href="#CHDHCDDJ">Chapter 5, "Administering an Oracle Streams Replication Environment"</a></p>
</li>
<li>
<p><a class="olink STRMS015" href="../../server.112/e17069/strms_trouble.htm#STRMS015"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about troubleshooting Oracle Streams</p>
</li>
</ul>
</div>
<a id="CHDCAIEE"></a><a id="TDPII166"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Responding to Automated Alerts in Enterprise Manager<a id="sthref390"></a><a id="sthref391"></a><a id="sthref392"></a><a id="sthref393"></a><a id="sthref394"></a></h3>
<p>An <span class="bold">alert</span> is a warning about a potential problem or an indication that a critical threshold has been crossed. There are two types of alerts:</p>
<ul>
<li>
<p><span class="bold">Stateless:</span> Alerts that indicate single events that are not necessarily tied to the system state. For example, an alert that indicates that a capture aborted with a specific error is a stateless alert.</p>
</li>
<li>
<p><span class="bold">Stateful:</span> Alerts that are associated with a specific system state. Stateful alerts are usually based on a numeric value, with thresholds defined at warning and critical levels. For example, an alert on the current Oracle Streams pool memory usage percentage, with the warning level at 85% and the critical level at 95%, is a stateful alert.</p>
</li>
</ul>
<p class="orderedlisttitle">To view the alerts for a database:&nbsp;</p>
<ol>
<li>
<p>Log in to Enterprise Manager as an administrative user, such as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page of the database you want to manage.</p>
</li>
<li>
<p>View the alerts for the database in the Alerts section. An Oracle Streams summary is also available in the High Availability section. You might need to scroll down to see these sections.</p>
</li>
</ol>
<p>Oracle Streams has its own set of alerts. <a href="#CHDHFBIH">Table 5-1</a> describes the alerts related to Oracle Streams.</p>
<div class="tblhruleformalwide">
<p class="titleintable"><a id="TDPII266"></a><a id="sthref396"></a><a id="CHDHFBIH"></a>Table 5-1 Oracle Streams Alerts</p>
<table class="cellalignment1414" title="Oracle Streams Alerts" summary="This table includes each Streams alert, a description of the alert, and the appropriate response to each alert" dir="ltr">
<thead>
<tr class="cellalignment1403">
<th class="cellalignment1413" id="r1c1-t40">Alert</th>
<th class="cellalignment1413" id="r1c2-t40">Message</th>
<th class="cellalignment1413" id="r1c3-t40">Alert Type</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1403">
<td class="cellalignment1409" id="r2c1-t40" headers="r1c1-t40">
<p><a href="#CHDIHJEH">Capture Aborts Alert</a></p>
</td>
<td class="cellalignment1409" headers="r2c1-t40 r1c2-t40">
<p>STREAMS capture process <span class="italic">capture_name</span> aborted with ORA-<span class="italic">error_number</span></p>
</td>
<td class="cellalignment1409" headers="r2c1-t40 r1c3-t40">
<p>Stateless</p>
</td>
</tr>
<tr class="cellalignment1403">
<td class="cellalignment1409" id="r3c1-t40" headers="r1c1-t40">
<p><a href="#CHDECHJA">Propagation Aborts Alert</a></p>
</td>
<td class="cellalignment1409" headers="r3c1-t40 r1c2-t40">
<p>STREAMS propagation process <span class="italic">source_queue, destination_queue, database_link</span> aborted after 16 failures</p>
</td>
<td class="cellalignment1409" headers="r3c1-t40 r1c3-t40">
<p>Stateless</p>
</td>
</tr>
<tr class="cellalignment1403">
<td class="cellalignment1409" id="r4c1-t40" headers="r1c1-t40">
<p><a href="#CHDCCADC">Apply Aborts Alert</a></p>
</td>
<td class="cellalignment1409" headers="r4c1-t40 r1c2-t40">
<p>STREAMS apply process <span class="italic">apply_name</span> aborted with ORA-<span class="italic">error_number</span></p>
</td>
<td class="cellalignment1409" headers="r4c1-t40 r1c3-t40">
<p>Stateless</p>
</td>
</tr>
<tr class="cellalignment1403">
<td class="cellalignment1409" id="r5c1-t40" headers="r1c1-t40">
<p><a href="#CHDJAEJJ">Apply Error Alert</a></p>
</td>
<td class="cellalignment1409" headers="r5c1-t40 r1c2-t40">
<p>STREAMS error queue for apply process <span class="italic">apply_name</span> contains new transaction with ORA-<span class="italic">error_number</span></p>
</td>
<td class="cellalignment1409" headers="r5c1-t40 r1c3-t40">
<p>Stateless</p>
</td>
</tr>
<tr class="cellalignment1403">
<td class="cellalignment1409" id="r6c1-t40" headers="r1c1-t40">
<p><a href="#CHDDCEGE">Oracle Streams Pool Alert</a></p>
</td>
<td class="cellalignment1409" headers="r6c1-t40 r1c2-t40">
<p><span class="italic">Automatically set by alert infrastructure</span></p>
</td>
<td class="cellalignment1409" headers="r6c1-t40 r1c3-t40">
<p>Stateful</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" -->
<p>Alerts also appear when a statistic passes a metric threshold. For example, an alert appears when an Oracle Streams statistic passes a threshold for latency or throughput.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Streams alerts are informational only. They do not need to be managed. If you monitor your Oracle Streams environment regularly and address problems as they arise, then you might not need to monitor Oracle Streams alerts.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABHFHDB">"Troubleshooting an Oracle Streams Replication Environment"</a></p>
</li>
<li>
<p><a class="olink STRMS169" href="../../server.112/e17069/strms_trouble.htm#STRMS169"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
<a id="CHDIHJEH"></a><a id="TDPII167"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Capture Aborts Alert</h4>
<p>This alert indicates a critical error. The capture process stops and any replication that depends on the capture process also stops. Also, the capture process makes no further progress in scanning the redo log until it is restarted.</p>
<p class="subhead2"><a id="TDPII267"></a>Response</p>
<p>Obtain the exact error message in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDIFCCD">"Viewing Information About a Capture Process"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, query the <a class="olink REFRN20031" href="../../server.112/e40402/statviews_1025.htm#REFRN20031"><code>ALL_CAPTURE</code></a> view.</p>
</li>
</ul>
<p>Take the appropriate action for the error.</p>
<p>After taking the appropriate action, restart the capture process in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDIEDDJ">"Starting and Stopping a Capture Process"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, run the <a class="olink ARPLS547" href="../../appdev.112/e40758/d_cap_a.htm#ARPLS547"><code>DBMS_CAPTURE_ADM.START_CAPTURE</code></a> procedure.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCAIEE">"Responding to Automated Alerts in Enterprise Manager"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABBFECB">"About Change Capture with a Capture Process"</a></p>
</li>
<li>
<p><a href="#CHDGHGBI">"Managing Capture Processes"</a></p>
</li>
<li>
<p><a href="#CHDHEHGH">"Monitoring Capture Processes"</a></p>
</li>
<li>
<p><a class="olink STRMS015" href="../../server.112/e17069/strms_trouble.htm#STRMS015"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDECHJA"></a><a id="TDPII168"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Propagation Aborts Alert</h4>
<p>This alert indicates a critical error. The propagation stops, and the messages that are normally sent from one queue to another by the propagation remain in the source queue. Replication that depends on the propagation also stops. Eventually, the source queue can grow too large, and messages can spill to disk. When messages spill to disk, it degrades Oracle Streams performance.</p>
<p class="subhead2"><a id="TDPII268"></a>Response</p>
<p>Obtain the exact error message in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDGEBHI">"Viewing Information About a Propagation"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, query the <a class="olink REFRN23174" href="../../server.112/e40402/statviews_4191.htm#REFRN23174"><code>DBA_QUEUE_SCHEDULES</code></a> view.</p>
</li>
</ul>
<p>Take the appropriate action for the error.</p>
<p>After taking the appropriate action, restart the propagation in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDEAIGJ">"Enabling and Disabling a Propagation"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, run the <a class="olink ARPLS320" href="../../appdev.112/e40758/d_prop_a.htm#ARPLS320"><code>DBMS_PROPAGATION_ADM.START_PROPAGATION</code></a> procedure.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCAIEE">"Responding to Automated Alerts in Enterprise Manager"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABFIHAI">"About Change Propagation Between Databases"</a></p>
</li>
<li>
<p><a href="#CHDJHIIE">"Monitoring Propagations"</a></p>
</li>
<li>
<p><a class="olink STRMS015" href="../../server.112/e17069/strms_trouble.htm#STRMS015"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDCCADC"></a><a id="TDPII169"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Apply Aborts Alert</h4>
<p>This alert indicates a critical error. The apply process stops, and the messages that are normally dequeued by the apply process remain in the apply process's queue. Replication that depends on the apply process also stops. Eventually, the apply process's queue can grow too large, and messages can spill to disk. Other queues that send messages to the apply process's queue might also grow and spill messages to disk. When messages spill to disk, it degrades Oracle Streams performance.</p>
<p class="subhead2"><a id="TDPII269"></a>Response</p>
<p>Obtain the exact error message in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDIGAED">"Viewing Information About an Apply Process"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, query the <a class="olink REFRN20005" href="../../server.112/e40402/statviews_1004.htm#REFRN20005"><code>ALL_APPLY</code></a> view.</p>
</li>
</ul>
<p>Take the appropriate action for the error. If the error is an <code>ORA-26714</code> error, then consider setting the <code>DISABLE_ON_ERROR</code> apply process parameter to <code>N</code> to avoid aborting on future user errors. See <a href="#CHDFDFBD">"Setting an Apply Process Parameter"</a> for instructions.</p>
<p>After taking the appropriate action, restart the apply process in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDIIAGC">"Starting and Stopping an Apply Process"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, run the <a class="olink ARPLS509" href="../../appdev.112/e40758/d_apply.htm#ARPLS509"><code>DBMS_APPLY_ADM.START_APPLY</code></a> procedure.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCAIEE">"Responding to Automated Alerts in Enterprise Manager"</a></p>
</li>
<li>
<p><a class="olink STRMS112" href="../../server.112/e17069/strms_mapply.htm#STRMS112"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDJAEJJ"></a><a id="TDPII170"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Apply Error Alert</h4>
<p>This alert indicates that the apply process encountered an error when it was applying a transaction. The apply process moves all of the messages in the transaction to the error queue. Other transactions that depend on the error transaction might also result in apply errors, and the error queue might grow quickly. Therefore, an administrator should resolve the apply errors as soon as possible.</p>
<p class="subhead2"><a id="TDPII270"></a>Response</p>
<p>Manage the apply errors in the error queue in one of the following ways:</p>
<ul>
<li>
<p>In Enterprise Manager, see <a href="#CHDJBAJD">"Managing Apply Errors"</a> for instructions.</p>
</li>
<li>
<p>In SQL*Plus, query the <a class="olink REFRN20008" href="../../server.112/e40402/statviews_1009.htm#REFRN20008"><code>ALL_APPLY_ERROR</code></a> view to view the errors, resolve the errors, and either execute or delete the errors using procedures in the <a class="olink ARPLS300" href="../../appdev.112/e40758/d_apply.htm#ARPLS300"><code>DBMS_APPLY_ADM</code></a> package.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCAIEE">"Responding to Automated Alerts in Enterprise Manager"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">"Managing Apply Processes"</a></p>
</li>
<li>
<p><a href="#CHDBJIHG">"Monitoring Apply Processes"</a></p>
</li>
<li>
<p><a class="olink STRMS015" href="../../server.112/e17069/strms_trouble.htm#STRMS015"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDDCEGE"></a><a id="TDPII171"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Oracle Streams Pool Alert</h4>
<p>A metric is a unit of measurement used to report the health of the system. This alert is generated when the memory usage of the Oracle Streams pool has exceeded the percentage specified by the <code>STREAMS_POOL_USED_PCT</code> metric.</p>
<p>This alert can be raised only if the database is not using Automatic Memory Management or Automatic Shared Memory Management. Specifically, this alert can only be raised if the following initialization parameters are set to <code>0</code> (zero) or are unset:</p>
<ul>
<li>
<p><a class="olink REFRN10285" href="../../server.112/e40402/initparams143.htm#REFRN10285"><code>MEMORY_TARGET</code></a></p>
</li>
<li>
<p><a class="olink REFRN10256" href="../../server.112/e40402/initparams236.htm#REFRN10256"><code>SGA_TARGET</code></a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle recommends using either Automatic Memory Management or Automatic Shared Memory Management.</div>
<p class="subhead2"><a id="TDPII271"></a>Response</p>
<p>This metric threshold can be set automatically by the alert infrastructure, or you can set it using Enterprise Manager. If the currently running workload is typical, then consider increasing the size of the Oracle Streams pool. Some of the links under the Related Topics heading on the Database Home page enable you to manage metrics. See <a class="olink ADMQS1014" href="../../server.112/e10897/montune.htm#ADMQS1014"><span class="italic">Oracle Database 2 Day DBA</span></a> for information about viewing and setting metric thresholds.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCAIEE">"Responding to Automated Alerts in Enterprise Manager"</a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABDHIIH">"Preparing for Oracle Streams Replication"</a></p>
</li>
<li>
<p><a class="olink STREP202" href="../../server.112/e10705/prep_rep.htm#STREP202"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDJBAJD"></a><a id="TDPII157"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing Apply Errors<a id="sthref397"></a><a id="sthref398"></a><a id="sthref399"></a><a id="sthref400"></a></h3>
<p>Apply errors can occur for a variety of reasons. When a change in a transaction causes an apply error, the apply process moves the change and all of the other changes in the same transaction to the error queue. When apply errors occur, you must identify the cause of the error and correct it. You can retry a specific error transaction or you can retry all error transactions for an apply process.</p>
<p>The following topics describe managing apply errors:</p>
<ul>
<li>
<p><a href="#CHDEBFIJ">Correcting Apply Errors in Database Objects</a></p>
</li>
<li>
<p><a href="#CHDBEFAF">Retrying or Deleting Apply Error Transactions</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_repcont.htm#BABBAJFE">"About Change Apply"</a></p>
</li>
<li>
<p><a href="#CHDIJJGJ">"Managing Apply Processes"</a></p>
</li>
<li>
<p><a href="#CHDBJIHG">"Monitoring Apply Processes"</a></p>
</li>
<li>
<p><a class="olink STRMS112" href="../../server.112/e17069/strms_mapply.htm#STRMS112"><span class="italic">Oracle Streams Concepts and Administration</span></a></p>
</li>
</ul>
</div>
<a id="CHDEBFIJ"></a><a id="TDPII175"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Correcting Apply Errors in Database Objects<a id="sthref401"></a></h4>
<p>You might need to make data manipulation language (DML) or data definition language (DDL) changes to database objects to correct the conditions that caused one or more apply errors before you retry error transactions. If you must make changes to a database object, but you do not want to replicate these changes, then set a session tag in the session that makes the changes.</p>
<p class="orderedlisttitle">For example, to update the hr.employees table to correct an apply error:&nbsp;</p>
<ol>
<li>
<p>Open SQL*Plus and connect as a user who can update the <code>hr.employees</code> table.</p>
<p>See <a class="olink ADMQS0361" href="../../server.112/e10897/em_manage.htm#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.</p>
</li>
<li>
<p><a id="sthref403"></a><a id="sthref404"></a>Set a session tag:</p>
<pre>
BEGIN
   DBMS_STREAMS.SET_TAG(
      tag  =&gt;  HEXTORAW('1D'));
END;
/
</pre>
<p>Ensure that you set the tag to a value that prevents changes from being captured by capture processes and synchronous captures.</p>
</li>
<li>
<p>Update the <code>hr.employees</code> table to correct the error.</p>
</li>
<li>
<p>Exit the SQL*Plus session.</p>
</li>
</ol>
<p>After you correct the problem that caused one or more error transactions, you can retry the error transactions or delete them. See <a href="#CHDBEFAF">"Retrying or Deleting Apply Error Transactions"</a> for instructions.</p>
<p>For information about specific apply errors and how to correct them, see <a class="olink STRMS209" href="../../server.112/e17069/strms_trapply.htm#STRMS209"><span class="italic">Oracle Streams Concepts and Administration</span></a>.</p>
</div>
<!-- class="sect3" -->
<a id="CHDBEFAF"></a><a id="TDPII176"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Retrying or Deleting Apply Error Transactions<a id="sthref405"></a></h4>
<p><a href="#CHDEBFIJ">"Correcting Apply Errors in Database Objects"</a> describes correcting the problem that caused one or more error transactions. After you correct the problem, you can retry the error transactions or delete them:</p>
<ul>
<li>
<p>Retry the transactions if the changes in the transaction should be made to the destination table. Retry them only if you have not already modified the data in the table to make these changes.</p>
</li>
<li>
<p>Delete the transactions if you made all of the changes in the transactions to the destination table, or if the changes should not be made to the table.</p>
</li>
</ul>
<p class="orderedlisttitle">To retry or delete apply error transactions:&nbsp;</p>
<ol>
<li>
<p>In Oracle Enterprise Manager, log in to the database as the Oracle Streams administrator.</p>
</li>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under High Availability, click the number link in <span class="bold">Streams Components</span>.</p>
<p>The Manage Replication page appears, showing the Overview subpage.</p>
</li>
<li>
<p>Click <span class="bold">Streams</span> to open the Streams subpage.</p>
<img width="1021" height="438" src="img/tdpii_strms_ap_error.gif" alt="Description of tdpii_strms_ap_error.gif follows" /><br />
<a id="sthref407" href="img_text/tdpii_strms_ap_error.htm">Description of the illustration tdpii_strms_ap_error.gif</a><br />
<br />
<p>When an apply process has one or more errors, the Status icon changes to include a warning symbol. Also, an apply error might cause an apply process to abort. When an apply process aborts, the status of the apply process is <code>ABORTED</code>.</p>
</li>
<li>
<p>Select the apply process with error transactions in the list of components. If necessary, use the search tool to find the apply process, and then select it.</p>
</li>
<li>
<p>Select <span class="bold">View Errors</span> in Action.</p>
</li>
<li>
<p>Click <span class="bold">Go</span> to open the View Apply Details page.</p>
<p>The errors appear in the Errors section, under Transaction Errors.</p>
<img width="953" height="206" src="img/tdpii_apply_errors.gif" alt="Description of tdpii_apply_errors.gif follows" /><br />
<a id="sthref408" href="img_text/tdpii_apply_errors.htm">Description of the illustration tdpii_apply_errors.gif</a><br />
<br />
<p>You can view detailed information about an error by clicking the icon in the View Error LCRs field for the error transaction. The detailed information appears on the View Error LCRs page and includes each change in the transaction.</p>
<img width="1023" height="192" src="img/tdpii_view_error_lcrs.gif" alt="Description of tdpii_view_error_lcrs.gif follows" /><br />
<a id="sthref409" href="img_text/tdpii_view_error_lcrs.htm">Description of the illustration tdpii_view_error_lcrs.gif</a><br />
<br />
<p>To drill down further, select a row change and click <span class="bold">Compare Values</span>. The Compare Values page appears and compares the row change with the data in the table to which the change should be applied.</p>
<img width="1029" height="239" src="img/tdpii_compare_error_values.gif" alt="Description of tdpii_compare_error_values.gif follows" /><br />
<a id="sthref410" href="img_text/tdpii_compare_error_values.htm">Description of the illustration tdpii_compare_error_values.gif</a><br />
<br /></li>
<li>
<p>If you drilled down to more information about an error, then go back to the Apply Errors page by clicking the <span class="bold">View Apply Details</span> link and expanding <span class="bold">Transaction Errors</span>.</p>
</li>
<li>
<p>On the Apply Errors page, complete one of the following actions:</p>
<ul>
<li>
<p>To retry all error transactions, click <span class="bold">Retry all Errors</span>.</p>
</li>
<li>
<p>To delete all error transactions, click <span class="bold">Delete All</span>.</p>
</li>
<li>
<p>To retry a specific error transaction, select the error transaction and click <span class="bold">Retry Error</span>.</p>
</li>
<li>
<p>To delete a specific error transaction, select the error transaction and click <span class="bold">Delete</span>.</p>
</li>
</ul>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the following procedures in the <a class="olink ARPLS300" href="../../appdev.112/e40758/d_apply.htm#ARPLS300"><code>DBMS_APPLY_ADM</code></a> package to delete or reexecute error transactions:
<ul>
<li>
<p><a class="olink ARPLS510" href="../../appdev.112/e40758/d_apply.htm#ARPLS510"><code>DELETE_ALL_ERRORS</code></a></p>
</li>
<li>
<p><a class="olink ARPLS534" href="../../appdev.112/e40758/d_apply.htm#ARPLS534"><code>DELETE_ERROR</code></a></p>
</li>
<li>
<p><a class="olink ARPLS536" href="../../appdev.112/e40758/d_apply.htm#ARPLS536"><code>EXECUTE_ALL_ERRORS</code></a></p>
</li>
<li>
<p><a class="olink ARPLS326" href="../../appdev.112/e40758/d_apply.htm#ARPLS326"><code>EXECUTE_ERROR</code></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDIIGGG"></a><a id="TDPII158"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing a Replication Environment When a Destination Is Unavailable<a id="sthref411"></a><a id="sthref412"></a><a id="sthref413"></a><a id="sthref414"></a></h3>
<p>Sometimes, a destination queue in an Oracle Streams replication environment stops accepting propagated changes. The destination queue might stop accepting changes if, for example, the database that contains the queue goes down, there is a problem with the destination queue, the computer system running the database that contains the queue goes down, or for some other reason.</p>
<p>When a destination is unavailable in a replication environment that uses capture processes, captured changes that cannot be sent to a destination queue remain in the source queue. The source queue size increases and, eventually, the changes spill out of the buffered queue memory onto disk. When this happens, the performance of the Oracle Streams replication environment suffers.</p>
<p>To determine whether a large number of captured changes are spilling to disk, follow the instructions in <a href="#CHDDBHFB">"Viewing Statistics for a Capture Process"</a>. The <span class="bold">Queue Statistics</span> graph shows the current number of changes spilling to disk in the capture process's queue.</p>
<p>If your replication environment uses capture processes to capture changes, then you can set two capture process parameters to manage an unavailable destination automatically. The <code>split_threshold</code> and <code>merge_theshold</code> capture process parameters control whether Oracle Streams performs split and merge operations automatically. When these parameters are set to specify automatic split and merge, Oracle Scheduler jobs monitor the streams flowing from the capture process. When an Oracle Scheduler job identifies a problem with a stream, the job submits a new Oracle Scheduler job to split the problem stream off from the other streams flowing from the capture process. Other Oracle Scheduler jobs continue to monitor the stream, and, when the problem is corrected, an Oracle Scheduler job merges the stream back with the other streams.</p>
<p>When the <code>split_threshold</code> capture process parameter is set to <code>INFINITE</code>, automatic splitting is disabled. When the <code>split_threshold</code> parameter is not set to <code>INFINITE</code>, automatic splitting is enabled. Automatic splitting only occurs when communication with an apply process has been lost for the number of seconds specified in the <code>split_threshold</code> parameter. For example, communication with an apply process is lost when an apply process becomes disabled or a destination database goes down.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Automatic splitting does not occur when one stream is processing changes slower than other streams. In this situation, it is usually best to reconfigure the environment so that the slower stream uses a different capture process than the other streams.</div>
<p class="orderedlisttitle">To manage the unavailable destination:&nbsp;</p>
<ol>
<li>
<p>Ensure that the following parameters are set properly for the capture process to enable automatic split and merge:</p>
<ul>
<li>
<p><code>split_threshold</code>: Ensure that this parameter is not set to infinite. The default setting for this parameter is <code>1800</code>.</p>
</li>
<li>
<p><code>merge_threshold</code>: Ensure that this parameter is not set to a negative value. The default setting for this parameter is <code>60</code>.</p>
</li>
</ul>
<p>See <a href="#CHDFECDH">"Setting a Capture Process Parameter"</a>.</p>
</li>
<li>
<p>Monitor the <a class="olink REFRN23744" href="../../server.112/e40402/statviews_5015.htm#REFRN23744"><code>DBA_STREAMS_SPLIT_MERGE</code></a> view periodically to check whether an automatic split and merge operation is in process.</p>
<p>When an automatic split occurs, certain components, such as the capture process, queue, and propagation, are cloned, and each is given a system-generated name. The <code>DBA_STREAMS_SPLIT_MERGE</code> view contains the name of each cloned component, and other information about the split and merge operation.</p>
</li>
<li>
<p>If a split and merge operation is in process, then correct the problem with the destination. The problem is corrected when the apply process at the destination database can accept changes from the cloned capture process.</p>
</li>
<li>
<p>If the cloned capture process is disabled, then start the cloned capture process. See <a href="#CHDIEDDJ">"Starting and Stopping a Capture Process"</a></p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink STREP144" href="../../server.112/e10705/man_gen_rep.htm#STREP144"><span class="italic">Oracle Streams Replication Administrator's Guide</span></a> for detailed instructions about using split and merge</p>
</li>
<li>
<p><a class="olink ARPLS305" href="../../appdev.112/e40758/d_streams_adm.htm#ARPLS305"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a></p>
</li>
<li>
<p><a href="tdpii_repcont.htm#BABEFAFI">Chapter 4, "Replicating Data Using Oracle Streams"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1402">
<tr>
<td class="cellalignment1409">
<table class="cellalignment1407">
<tr>
<td class="cellalignment1406"><a href="tdpii_repcont.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1406"><a href="tdpii_repextend.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1411">
<table class="cellalignment1405">
<tr>
<td class="cellalignment1406"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1406"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1406"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1406"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1406"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1406"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
