<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Accessing and Modifying Information in Multiple Databases</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 033" />
<meta name="dcterms.created" content="2011-07-28T22:38:14Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Data Replication and Integration Guide" />
<meta name="dcterms.identifier" content="E17516-08" />
<meta name="dcterms.isVersionOf" content="TDPII" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdpii_common_ii.htm" title="Previous" type="text/html" />
<link rel="Next" href="tdpii_repcont.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e17516.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/14</span> <!-- End Header --><a id="BABEFFBB"></a><a id="TDPII013"></a>
<h1 class="chapter"><span class="secnum">3</span> Accessing and Modifying Information in Multiple Databases</h1>
<p>This chapter describes how to access and modify information in multiple Oracle and non-Oracle databases.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#BABIFEFB">About Accessing and Modifying Information in Multiple Databases</a></p>
</li>
<li>
<p><a href="#BABJDEED">Preparing to Access and Modify Information in Multiple Oracle Databases</a></p>
</li>
<li>
<p><a href="#BABFJGFG">Tutorial: Querying Multiple Oracle Databases</a></p>
</li>
<li>
<p><a href="#BABCCCGB">Tutorial: Modifying Data in Multiple Oracle Databases</a></p>
</li>
<li>
<p><a href="#BABFCFJJ">Tutorial: Running a Stored Procedure in a Remote Oracle Database</a></p>
</li>
<li>
<p><a href="#BABHABED">Working with Data in Non-Oracle Databases</a></p>
</li>
</ul>
<a id="BABIFEFB"></a><a id="TDPII014"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Accessing and Modifying Information in Multiple Databases<a id="sthref47"></a><a id="sthref48"></a></h2>
<p>While connected to an Oracle database, you can access and modify information in other Oracle databases and in non-Oracle databases. When information in two or more databases appears to be in a single database, it is called <span class="bold">federation</span>. Federation leaves information in its original location, where it is maintained and updated. Multiple data sources appear to be integrated into a single virtual database so that different kinds of databases are presented in one consolidated view. A federated configuration can make all of your databases look like one virtual database to applications and end users, thereby reducing some complexity in the distributed system.</p>
<p>The following topics contain more information about accessing and modifying information in multiple databases:</p>
<ul>
<li>
<p><a href="#CIHFHIBF">About Distributed SQL</a></p>
</li>
<li>
<p><a href="#CIHJFJFE">About Synonyms and Location Transparency</a></p>
</li>
<li>
<p><a href="#BABEBFGD">About Accessing and Modifying Information in Non-Oracle Databases</a></p>
</li>
<li>
<p><a href="#CIHBHIIH">About Stored Procedures</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_intro2ii.htm#CFHHAIGB">"When to Access and Modify Information in Multiple Databases"</a></p>
</li>
</ul>
</div>
<a id="CIHFHIBF"></a><a id="TDPII015"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Distributed SQL<a id="sthref49"></a><a id="sthref50"></a><a id="sthref51"></a><a id="sthref52"></a><a id="sthref53"></a></h3>
<p><span class="bold">Distributed SQL</span> enables applications and users to query or modify information in multiple databases with a single SQL statement. Because distributed SQL masks the physical location of your data, you can change the location of your data without changing your application. Distributed SQL includes the following: <span class="bold">distributed queries</span> (which access data) and <span class="bold">distributed transactions</span> (which modify data). In distributed transactions, the <span class="bold">two-phase commit mechanism</span> guarantees the integrity of your data by ensuring that all statements in a transaction either commit or roll back as a unit at each database involved in the distributed transaction.</p>
<p>When an application or user tries to commit a distributed transaction, the database to which the application or user is connected is called the <span class="bold">global coordinator</span>. The global coordinator completes the two-phase commit by initiating the following phases:</p>
<ul>
<li>
<p><span class="bold">Prepare Phase:</span> The global coordinator asks the other databases involved in the distributed transaction to confirm that they can either commit or roll back the transaction, even if there is a failure. If any database cannot complete the prepare phase, then the transaction is rolled back.</p>
</li>
<li>
<p><span class="bold">Commit Phase:</span> If all of the other databases inform the global coordinator that they are prepared, then the global coordinator commits the transaction and asks all of the other databases to commit the transaction.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN031" href="../../server.112/e25494/ds_txns.htm#ADMIN031"><span class="italic">Oracle Database Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHJFJFE"></a><a id="TDPII123"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Synonyms and Location Transparency<a id="sthref54"></a><a id="sthref55"></a><a id="sthref56"></a><a id="sthref57"></a></h3>
<p>A <span class="bold">synonym</span> is a database object that acts as an alias for another database object. You can create both public and private synonyms. Every database user can access a public synonym. A private synonym is in the schema of a specific user, and only users who are granted access to the private synonym can use it.</p>
<p>In a distributed environment, synonyms can provide location transparency for database objects. A synonym hides the location of a database object from applications and users. If the database object must be moved or renamed, then you can redefine the synonym, and applications and users can continue to use the synonym without any modifications.</p>
<p>For example, suppose an application must access the <code>hr.employees</code> table at a remote database with the global name <code>ii2.example.com</code>. A database link exists for the remote database, and the name of the database link is <code>ii2.example.com</code>. In this case, you can create a synonym named <code>employees</code> in the <code>hr</code> schema that points to the table <code>hr.employees@ii2.example.com</code>. After the synonym is in place, the application at the local database can use <code>hr.employees</code> to access the remote table.</p>
</div>
<!-- class="sect2" -->
<a id="BABEBFGD"></a><a id="TDPII016"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Accessing and Modifying Information in Non-Oracle Databases<a id="sthref58"></a><a id="sthref59"></a><a id="sthref60"></a></h3>
<p>You can use distributed SQL to federate data not only in an Oracle database, but in non-Oracle databases as well. Oracle Database Gateway enables Oracle databases to access and modify data in several non-Oracle databases, including Sybase, DB2, Informix, Microsoft SQL Server, Ingres, and Teradata databases. This access is completely transparent to the end user. That is, you can issue the same SQL statements regardless of whether you are accessing data in an Oracle database or a non-Oracle database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The capabilities of a specific Oracle Database Gateway are limited by the capabilities of the non-Oracle database being accessed. For information about the limitations of a specific Oracle Database Gateway, see the Oracle documentation for that specific gateway.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABHABED">"Working with Data in Non-Oracle Databases"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIHBHIIH"></a><a id="TDPII017"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Stored Procedures<a id="sthref61"></a><a id="sthref62"></a><a id="sthref63"></a><a id="sthref64"></a><a id="sthref65"></a></h3>
<p>To reduce network traffic when performing complex operations in a federated environment, you can use stored procedures. A <span class="bold">procedure</span> or <span class="bold">function</span> is a schema object that is run to solve a specific problem or perform a set of related tasks. Procedures and functions are identical except that functions always return a single value to the caller, while procedures do not. Generally, you use a procedure to perform an action, and you use a function to compute a value. In this guide, the general term <span class="bold">stored procedure</span> includes both procedures and functions.</p>
<p>Oracle databases support stored procedures that are written in PL/SQL or Java, but this guide discusses only PL/SQL stored procedures. PL/SQL stored procedures consist of a set of SQL statements and other PL/SQL constructs that are grouped and stored in the database. Stored procedures let you combine the ease and flexibility of SQL with the procedural functionality of a structured programming language.</p>
<p>As with SQL statements, to run a stored procedure, you do not need to be aware of its physical location. Similarly, by using the appropriate Oracle Database Gateway, you can even call a stored procedure that is in a non-Oracle database. In this case, the gateway maps the PL/SQL calls to the non-Oracle database stored procedures.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABFCFJJ">"Tutorial: Running a Stored Procedure in a Remote Oracle Database"</a></p>
</li>
<li>
<p><a class="olink LNPLS" href="../../appdev.112/e25519/toc.htm"><span class="italic">Oracle Database PL/SQL Language Reference</span></a> for information about PL/SQL stored procedures</p>
</li>
<li>
<p><a class="olink JJDEV" href="../../java.112/e10588/toc.htm"><span class="italic">Oracle Database Java Developer's Guide</span></a> for information about Java stored procedures</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABJDEED"></a><a id="TDPII018"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Preparing to Access and Modify Information in Multiple Oracle Databases<a id="sthref66"></a></h2>
<p>This topic describes actions that are required to prepare your databases to access and modify information at other databases.</p>
<p class="orderedlisttitle">To prepare to access and modify information in multiple databases:&nbsp;</p>
<ol>
<li>
<p>Set the <code>GLOBAL_NAMES</code> initialization parameter to <code>TRUE</code> at each Oracle database in the distributed environment. See <a href="tdpii_common_ii.htm#BGBEEDCD">"Setting the GLOBAL_NAMES Initialization Parameter to TRUE"</a> for instructions.</p>
</li>
<li>
<p>Configure network connectivity so that the databases can communicate with each other. See <a class="olink ADMQS004" href="../../server.112/e10897/network.htm#ADMQS004"><span class="italic">Oracle Database 2 Day DBA</span></a> for information about configuring network connectivity between databases.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABFJGFG"></a><a id="TDPII020"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Tutorial: Querying Multiple Oracle Databases<a id="sthref68"></a><a id="sthref69"></a><a id="sthref70"></a></h2>
<p>A <span class="bold">distributed query</span> accesses information in two or more databases. In a synonym or in a <code>SELECT</code> statement, you can identify a remote table, view, or materialized view by appending <code>@</code><code><span class="codeinlineitalic">dblink</span></code> to the end of its name. The <code><span class="codeinlineitalic">dblink</span></code> is a database link to the database that contains the remote database object.</p>
<p>Meet the following conditions before running the distributed query in this topic:</p>
<ul>
<li>
<p>Satisfy the prerequisites described in <a href="#BABJDEED">"Preparing to Access and Modify Information in Multiple Oracle Databases"</a>.</p>
</li>
<li>
<p>Create a database link from the local database to any remote database that contains a database object involved in the query. In the example in this topic, the <code>SYSTEM</code> user at the <code>ii1.example.com</code> database uses a database link that connects to the <code>SYSTEM</code> user at the <code>ii2.example.com</code> database. See <a href="tdpii_common_ii.htm#BGBGIACD">"Tutorial: Creating a Database Link"</a> for information about creating such a database link.</p>
</li>
<li>
<p>Ensure that the <code>hr</code> sample schema is installed on the local database, and the <code>oe</code> sample schema is installed on the remote database. These sample schemas are installed by default with Oracle Database.</p>
</li>
</ul>
<p>This topic uses <code>ii1.example.com</code> and <code>ii2.example.com</code> as sample databases. You can substitute any two databases in your environment that meet these conditions.</p>
<p>For this example, assume the following:</p>
<ul>
<li>
<p>A company keeps its human resources information in the <code>hr</code> schema at the <code>ii1.example.com</code> database and its order entry information in the <code>ii2.example.com</code> database.</p>
</li>
<li>
<p>The <code>employee_id</code> in the <code>hr.employees</code> table corresponds with the <code>sales_rep_id</code> in the <code>oe.orders</code> table.</p>
</li>
<li>
<p>A manager has a question about an order and wants to contact the sales representative for the order.</p>
</li>
</ul>
<p>In this case, the contact information for the sales representative is in the <code>hr.employees</code> table in the <code>ii1.example.com</code> database, and the order information is in the <code>oe.orders</code> table in the <code>ii2.example.com</code> database.</p>
<p class="orderedlisttitle">To run a distributed query that combines the information at the ii1.example.com and ii2.example.com databases to show the contact information for the sales representative:&nbsp;</p>
<ol>
<li>
<p><a id="CIHCJDGB"></a><a id="sthref72"></a>Create a synonym for the remote database object. In this example, create a synonym called <code>ord</code> in the <code>hr</code> schema that points to the <code>oe.orders</code> table at the <code>ii2.example.com</code> database:</p>
<ol>
<li>
<p>Log in to Enterprise Manager as <code>SYSTEM</code> user.</p>
</li>
<li>
<p>Go to the Database Home page for the <code>ii1.example.com</code> database instance.</p>
</li>
<li>
<p>Click <span class="bold">Schema</span> to open the Schema subpage.</p>
</li>
<li>
<p>Click <span class="bold">Synonyms</span> in the Database Objects section.</p>
</li>
<li>
<p>On the Synonyms page, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>On the Create Synonym page, enter <code>ord</code> in the Name field in the General section.</p>
</li>
<li>
<p>With <code>Schema</code> selected for the Type, enter <code>hr</code> in the Schema field or click the flashlight icon to select the <code>hr</code> schema.</p>
</li>
<li>
<p>In the Database section, select <span class="bold">Remote</span>.</p>
</li>
<li>
<p>Click the flashlight icon for the Service Name field to select the <code>ii2.example.com</code> database link for the <code>SYSTEM</code> user.</p>
</li>
<li>
<p>In the As Alias For section, enter <code>oe.orders</code>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to create the synonym.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the <a class="olink SQLRF01401" href="../../server.112/e41084/statements_7001.htm#SQLRF01401"><code>CREATE</code> <code>SYNONYM</code></a> SQL statement to create a synonym.</div>
</li>
<li>
<p>On a command line, open SQL*Plus and connect to the <code>ii1.example.com</code> database as the <code>SYSTEM</code> user.</p>
<p>See <a class="olink ADMQS0361" href="../../server.112/e10897/em_manage.htm#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.</p>
</li>
<li>
<p>Run the following query:</p>
<pre>
COLUMN FIRST_NAME HEADING 'First Name' FORMAT A20
COLUMN LAST_NAME HEADING 'Last Name' FORMAT A20
COLUMN PHONE_NUMBER HEADING 'Phone Number' FORMAT A20

SELECT e.first_name, e.last_name, e.phone_number
  FROM hr.employees e, hr.ord o
  WHERE o.order_id    = 2456 AND
        e.employee_id = o.sales_rep_id;
</pre>
<p>The output will be similar to the following:</p>
<pre>
<span class="bold">First Name           Last Name            Phone Number</span>
<span class="bold">-------------------- -------------------- --------------------</span>
<span class="bold">Danielle             Greene               011.44.1346.229268</span>
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_intro2ii.htm#CFHHAIGB">"When to Access and Modify Information in Multiple Databases"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABCCCGB"></a><a id="TDPII022"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Tutorial: Modifying Data in Multiple Oracle Databases<a id="sthref73"></a><a id="sthref74"></a><a id="sthref75"></a></h2>
<p>A <span class="bold">distributed transaction</span> includes one or more statements that, individually or as a group, modify data or the structure of database objects in two or more databases. In a synonym or in a statement that modifies data in a remote database, you can identify a database object by appending <code>@</code><code><span class="codeinlineitalic">dblink</span></code> to the end of its name. The <code><span class="codeinlineitalic">dblink</span></code> is a database link to the database that contains the remote database object.</p>
<p>Statements that modify data in tables are called data manipulation language (DML) statements. Statements that modify the structure of database objects are called data definition language (DDL) statements. Both DML and DDL statements can be part of a distributed transaction.</p>
<p>Meet the following conditions before running the distributed transaction in this topic:</p>
<ul>
<li>
<p>Satisfy the prerequisites described in <a href="#BABJDEED">"Preparing to Access and Modify Information in Multiple Oracle Databases"</a>.</p>
</li>
<li>
<p>Create a database link from the local database to any remote database that contains a database object involved in the transaction. In the example in this topic, the <code>SYSTEM</code> user at the <code>ii1.example.com</code> database uses a database link that connects to the <code>SYSTEM</code> user at the <code>ii2.example.com</code> database. See <a href="tdpii_common_ii.htm#BGBGIACD">"Tutorial: Creating a Database Link"</a> for information about creating such a database link.</p>
</li>
<li>
<p>Ensure that the <code>hr</code> sample schema is installed on the local database, and the <code>oe</code> sample schema is installed on the remote database. These sample schemas are installed by default with Oracle Database.</p>
</li>
</ul>
<p>This topic uses <code>ii1.example.com</code> and <code>ii2.example.com</code> as sample databases. You can substitute any two databases in your environment that meet these conditions.</p>
<p>For this example, assume the following:</p>
<ul>
<li>
<p>A company keeps its human resources information in the <code>hr</code> schema at the <code>ii1.example.com</code> database and its order entry information in the <code>ii2.example.com</code> database.</p>
</li>
<li>
<p>The <code>employee_id</code> in the <code>hr.employees</code> table corresponds with the <code>sales_rep_id</code> in the <code>oe.orders</code> table.</p>
</li>
<li>
<p>A sales representative has been promoted to the job of sales manager. The <code>employee_id</code> of this sales representative in the <code>hr.employees</code> table is <code>154</code>. The <code>job_id</code> and <code>manager_id</code> data for this employee must change in the <code>hr.employees</code> table.</p>
</li>
<li>
<p>The current orders for the promoted sales representative must be transferred to a different sales representative. The <code>employee_id</code> of the sales representative who is now responsible for the orders is <code>148</code> in the <code>hr.employees</code> table. All of the orders in the <code>oe.orders</code> table currently assigned to <code>sales_rep_id</code> <code>154</code> must be changed to <code>sales_rep_id</code> <code>148</code>.</p>
</li>
</ul>
<p>The company wants these changes to be committed in a single distributed transaction.</p>
<p class="orderedlisttitle">To run a distributed transaction that changes data at both the ii1.example.com and ii2.example.com databases:&nbsp;</p>
<ol>
<li>
<p>Create a synonym for the remote database object. In this example, create a synonym called <code>ord</code> in the <code>hr</code> schema that points to the <code>oe.orders</code> table at the <code>ii2.example.com</code> database. Step <a href="#CIHCJDGB">1</a> in <a href="#BABFJGFG">"Tutorial: Querying Multiple Oracle Databases"</a> contains instructions for creating this synonym.</p>
</li>
<li>
<p>On a command line, open SQL*Plus and connect to the <code>ii1.example.com</code> database as the <code>SYSTEM</code> user.</p>
<p>See <a class="olink ADMQS0361" href="../../server.112/e10897/em_manage.htm#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.</p>
</li>
<li>
<p>Update the data at each database and commit your changes:</p>
<pre>
UPDATE hr.employees SET
  job_id = 'SA_MAN', manager_id = 100
  WHERE employee_id = 154;
 
UPDATE hr.ord
  SET   sales_rep_id = 148
  WHERE sales_rep_id = 154;

COMMIT;
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_intro2ii.htm#CFHHAIGB">"When to Access and Modify Information in Multiple Databases"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABFCFJJ"></a><a id="TDPII024"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Tutorial: Running a Stored Procedure in a Remote Oracle Database<a id="sthref77"></a><a id="sthref78"></a><a id="sthref79"></a></h2>
<p>A <span class="bold">remote procedure call (RPC)</span> runs a procedure or function at a remote database. An RPC performs any work defined in the remote procedure. To run a remote procedure or function, you can identify the remote procedure or function by appending <code>@</code><code><span class="codeinlineitalic">dblink</span></code> to the end of its name. The <code><span class="codeinlineitalic">dblink</span></code> is a database link to the database that contains the remote procedure or function. You can also create a synonym that points to the remote procedure or function.</p>
<p>Meet the following conditions before performing the sample RPC in this topic:</p>
<ul>
<li>
<p>Satisfy the prerequisites described in <a href="#BABJDEED">"Preparing to Access and Modify Information in Multiple Oracle Databases"</a>.</p>
</li>
<li>
<p>Create a database link from the local database to any remote database that contains a procedure or function that is being called. In the example in this topic, the <code>SYSTEM</code> user at the <code>ii1.example.com</code> database uses a database link that connects to the <code>SYSTEM</code> user at the <code>ii2.example.com</code> database. See <a href="tdpii_common_ii.htm#BGBGIACD">"Tutorial: Creating a Database Link"</a> for information about creating such a database link.</p>
</li>
<li>
<p>Ensure that the <code>hr</code> sample schema is installed on the remote database. The <code>hr</code> sample schema is installed by default with Oracle Database.</p>
</li>
</ul>
<p>This topic uses <code>ii1.example.com</code> and <code>ii2.example.com</code> as sample databases. You can substitute any two databases in your environment that meet these conditions.</p>
<p>For this example, assume the following:</p>
<ul>
<li>
<p>A company keeps its human resources information in the <code>hr</code> schema at the <code>ii2.example.com</code> database.</p>
</li>
<li>
<p>The <code>hr</code> schema does not exist at the local <code>ii1.example.com</code> database.</p>
</li>
<li>
<p>When an employee leaves the company, a procedure called <code>add_job_history</code> in the <code>hr</code> schema inserts a row into the <code>hr.job_history</code> table. The row contains information about the history of the employee with the company.</p>
</li>
<li>
<p>The employee with an <code>employee_id</code> of <code>127</code> is leaving the company.</p>
</li>
<li>
<p>You want to connect to the <code>ii1.example.com</code> database and run the <code>add_job_history</code> procedure at the <code>ii2.example.com</code> database to record the job history for employee <code>127</code>.</p>
</li>
</ul>
<p class="orderedlisttitle">To run an RPC to record the job history of the employee:&nbsp;</p>
<ol>
<li>
<p>On a command line, open SQL*Plus and connect to the <code>ii1.example.com</code> database as the <code>SYSTEM</code> user.</p>
<p>See <a class="olink ADMQS0361" href="../../server.112/e10897/em_manage.htm#ADMQS0361"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about starting SQL*Plus.</p>
</li>
<li>
<p>Run the <code>add_job_history</code> procedure at the <code>ii2.example.com</code> database to record the job history of the employee:</p>
<pre>
exec hr.add_job_history@ii2.example.com(127,'14-JAN-99','26-JUN-06','ST_CLERK',50);
</pre></li>
<li>
<p>Commit the changes:</p>
<pre>
COMMIT;
</pre>
<p>This step is not necessary if the remote procedure commits.</p>
</li>
<li>
<p>Optionally, query the <code>hr.job_history</code> table at the <code>ii2.example.com</code> database to see the inserted row:</p>
<pre>
SELECT * FROM hr.job_history@ii2.example.com ORDER BY employee_id;
</pre>
<p>The output will be similar to the following:</p>
<pre>
<span class="bold">EMPLOYEE_ID START_DAT END_DATE  JOB_ID     DEPARTMENT_ID</span>
<span class="bold">----------- --------- --------- ---------- -------------</span>
<span class="bold">        101 21-SEP-89 27-OCT-93 AC_ACCOUNT           110</span>
<span class="bold">        101 28-OCT-93 15-MAR-97 AC_MGR               110</span>
<span class="bold">        102 13-JAN-93 24-JUL-98 IT_PROG               60</span>
<span class="bold">        114 24-MAR-98 31-DEC-99 ST_CLERK              50</span>
<span class="bold">        122 01-JAN-99 31-DEC-99 ST_CLERK              50</span>
<span class="bold">        127 14-JAN-99 26-JUN-06 ST_CLERK              50</span>
<span class="bold">        176 24-MAR-98 31-DEC-98 SA_REP                80</span>
<span class="bold">        176 01-JAN-99 31-DEC-99 SA_MAN                80</span>
<span class="bold">        200 17-SEP-87 17-JUN-93 AD_ASST               90</span>
<span class="bold">        200 01-JUL-94 31-DEC-98 AC_ACCOUNT            90</span>
<span class="bold">        201 17-FEB-96 19-DEC-99 MK_REP                20</span>
</pre>
<p>Notice that the job history of the employee with an <code>employee_id</code> of <code>127</code> is recorded in the table.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_intro2ii.htm#CFHHAIGB">"When to Access and Modify Information in Multiple Databases"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="BABHABED"></a><a id="TDPII021"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Working with Data in Non-Oracle Databases<a id="sthref81"></a><a id="sthref82"></a><a id="sthref83"></a></h2>
<p>Oracle Database Gateway enables Oracle databases to access and modify data in several non-Oracle databases, including Sybase, DB2, Informix, Microsoft SQL Server, Ingres, and Teradata databases. For the best performance and usability, you should follow established best practices for working with non-Oracle databases.</p>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#CIHEIAHD">Configuring Oracle Databases to Work with Non-Oracle Databases</a></p>
</li>
<li>
<p><a href="#CIHIFAJC">Best Practices for Working with Non-Oracle Databases</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="tdpii_intro2ii.htm#CFHHAIGB">"When to Access and Modify Information in Multiple Databases"</a></p>
</li>
<li>
<p><a href="#BABEBFGD">"About Accessing and Modifying Information in Non-Oracle Databases"</a></p>
</li>
</ul>
</div>
<a id="CIHEIAHD"></a><a id="TDPII182"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Configuring Oracle Databases to Work with Non-Oracle Databases<a id="sthref84"></a><a id="sthref85"></a></h3>
<p>Before you can query data, modify data, or run a stored procedure in a non-Oracle database, you must complete several tasks.</p>
<p class="orderedlisttitle">To begin to work with data in non-Oracle databases:&nbsp;</p>
<ol>
<li>
<p><a id="CIHBAGJH"></a>Install and configure Oracle Database Gateway software for each non-Oracle database. Oracle Database Gateway software can be installed on the computer system running an Oracle database, on the computer system running a non-Oracle database, or on a third computer system. For information about installing and configuring a specific Oracle Database Gateway, see the Oracle documentation for that specific gateway.</p>
</li>
<li>
<p><a id="CIHBFBBC"></a>Configure Oracle Net Services so that the Oracle database can communicate with the listener for Oracle Database Gateway that was configured in Step&nbsp;<a href="#CIHBAGJH">1</a>. See <a class="olink NETAG0133" href="../../network.112/e41945/advcfg.htm#NETAG0133"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for instructions.</p>
<p>After communication is established with Oracle Database Gateway, the Oracle database can communicate with the non-Oracle database. An Oracle database can use Heterogeneous Services to communicate with Oracle Database Gateway. See <a class="olink HETER" href="../../server.112/e11050/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a> for information about configuration options for Heterogeneous Services.</p>
</li>
<li>
<p>Create a database link to the non-Oracle database. The database link must be created with an explicit <code>CONNECT</code> <code>TO</code> clause. After you complete Step <a href="#CIHBAGJH">1</a> and <a href="#CIHBFBBC">2</a>, you can create the database link in the same way that you would to connect to an Oracle database. See <a href="tdpii_common_ii.htm#BGBGIACD">"Tutorial: Creating a Database Link"</a> for instructions.</p>
</li>
</ol>
<p>After completing these steps, you can access data and procedures in the non-Oracle database transparently. To work with the non-Oracle database, follow the instructions in these topics and specify database objects in the non-Oracle database:</p>
<ul>
<li>
<p><a href="#BABFJGFG">"Tutorial: Querying Multiple Oracle Databases"</a></p>
</li>
<li>
<p><a href="#BABCCCGB">"Tutorial: Modifying Data in Multiple Oracle Databases"</a></p>
</li>
<li>
<p><a href="#BABFCFJJ">"Tutorial: Running a Stored Procedure in a Remote Oracle Database"</a></p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHIFAJC"></a><a id="TDPII183"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Best Practices for Working with Non-Oracle Databases<a id="sthref87"></a><a id="sthref88"></a><a id="sthref89"></a><a id="sthref90"></a></h3>
<p>Oracle Database Gateway performance is affected by several factors, including network speed, available memory, amount of data being transferred from one database to the other, and the number of concurrent sessions. Some of these factors can be adjusted for better performance.</p>
<p>You can achieve better performance by following these best practices:</p>
<ul>
<li>
<p><a href="#CIHGFCDH">Reduce Post Processing</a></p>
</li>
<li>
<p><a href="#CIHIHAII">Tune the Non-Oracle Database</a></p>
</li>
<li>
<p><a href="#CIHIGJAD">Set the Relevant Initialization Parameters</a></p>
</li>
<li>
<p><a href="#CIHFIHEI">Check the Location of the Oracle Database Gateway Installation</a></p>
</li>
<li>
<p><a href="#CIHBAJGH">Ensure Adequate Memory</a></p>
</li>
<li>
<p><a href="#CIHBACEC">Consider Case Differences</a></p>
</li>
</ul>
<p class="subhead2"><a id="CIHGFCDH"></a><a id="TDPII212"></a>Reduce Post Processing<a id="sthref91"></a><a id="sthref92"></a></p>
<p>Performance can be affected negatively if there is a large amount of post processing. Ensure that as much of each SQL statement as possible is processed on the non-Oracle database to achieve better performance. If parts of the <code>WHERE</code> clause are missing from the SQL that is sent to the non-Oracle database or if joins are split, then the query will be post processed.</p>
<p>Follow these best practices to reduce post processing:</p>
<ul>
<li>
<p>Avoid SQL functions in the <code>WHERE</code> clause, if possible. SQL functions in <code>WHERE</code> clauses affect the performance of the gateway. If you are using Oracle functions that do not have an equivalent in the non-Oracle database, then the gateway compensates for it. The data is retrieved from the non-Oracle database and the function is applied on the Oracle database.</p>
</li>
<li>
<p>Use hints to improve the query plan. Look at the gateway trace file or explain plan to determine the SQL being sent to the non-Oracle database. For example, if the SQL statement includes joins of tables on the non-Oracle database, and they are being post processed, then you can use hints to cause the joins to be performed on the non-Oracle database.</p>
</li>
</ul>
<p class="subhead2"><a id="CIHIHAII"></a><a id="TDPII213"></a>Tune the Non-Oracle Database<a id="sthref93"></a><a id="sthref94"></a></p>
<p>Performance can be affected negatively if the optimizer does not have enough information to generate an optimal plan. The Oracle optimizer uses table and index statistics of the non-Oracle database to determine the most optimal path to access the data in the non-Oracle database. If this information is missing or inaccurate, then the access path is not optimal. Defining indexes on the non-Oracle database improves the performance of the gateway. See <a class="olink TDPPT160" href="../../server.112/e10822/tdppt_sqltune.htm#TDPPT160"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a> for more information about the Oracle optimizer.</p>
<p class="subhead2"><a id="CIHIGJAD"></a><a id="TDPII214"></a>Set the Relevant Initialization Parameters<a id="sthref95"></a><a id="sthref96"></a><a id="sthref97"></a><a id="sthref98"></a></p>
<p>Customizing the following initialization parameters can improve performance:</p>
<ul>
<li>
<p><code>HS_RPC_FETCH_SIZE</code></p>
</li>
<li>
<p><code>HS_FDS_FETCH_ROWS</code></p>
</li>
<li>
<p><code>HS_LANGUAGE</code></p>
</li>
</ul>
<p>For example if you are sure that the data you are accessing in the non-Oracle database is in the same character set as the one used by the Oracle database, then set the <code>HS_LANGUAGE</code> initialization parameter to the character set of the Oracle database.</p>
<p class="subhead2"><a id="CIHFIHEI"></a><a id="TDPII215"></a>Check the Location of the Oracle Database Gateway Installation</p>
<p>The location of the Oracle Database Gateway installation might affect performance. For example, if CPU is a constraint, then do not install the Oracle Database Gateway on the same computer systems where Oracle databases run.</p>
<p class="subhead2"><a id="CIHBAJGH"></a><a id="TDPII216"></a>Ensure Adequate Memory<a id="sthref99"></a></p>
<p>Ensure that there is enough memory on the computer system where the Oracle Database Gateway is running. There are several factors that affect memory requirements. These include the SQL statement being processed, the number of concurrent sessions, the number of open cursors, and the number of columns in the table being accessed.</p>
<p class="subhead2"><a id="CIHBACEC"></a><a id="TDPII217"></a>Consider Case Differences<a id="sthref100"></a><a id="sthref101"></a><a id="sthref102"></a></p>
<p>When you are working with non-Oracle databases, remember that an Oracle database defaults characters to uppercase unless you surround identifiers with double quotation marks. For example, to refer to the Sybase table named <code>emp</code>, enter the name with double quotation marks, as in the following example:</p>
<pre>
SELECT * FROM "emp"@SYBS;
</pre>
<p>However, to refer to the Sybase table called <code>emp</code> owned by user <code>Smith</code> from an Oracle application, enter the following:</p>
<pre>
SELECT * FROM "Smith"."emp"@SYBS;
</pre>
<p>If the Sybase table named <code>emp</code> is owned by <code>SMITH</code>, a table owner name in uppercase letters, then you can enter the owner name without double quotation marks, as in the following examples:</p>
<pre>
SQL&gt; SELECT * FROM SMITH."emp"@SYBS;
 
SQL&gt; SELECT * FROM smith."emp"@SYBS;

SQL&gt; SELECT * FROM SmItH."emp"@SYBS;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The Oracle documentation for your specific Oracle Database Gateway</p>
</li>
<li>
<p><a class="olink HETER" href="../../server.112/e11050/toc.htm"><span class="italic">Oracle Database Heterogeneous Connectivity User's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1402">
<tr>
<td class="cellalignment1409">
<table class="cellalignment1407">
<tr>
<td class="cellalignment1406"><a href="tdpii_common_ii.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1406"><a href="tdpii_repcont.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2011,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1411">
<table class="cellalignment1405">
<tr>
<td class="cellalignment1406"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1406"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1406"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1406"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1406"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1406"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
