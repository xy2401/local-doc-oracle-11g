<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>About ASMCMD</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 047" />
<meta name="dcterms.created" content="2012-02-03T20:20:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide" />
<meta name="dcterms.identifier" content="E18951-03" />
<meta name="dcterms.isVersionOf" content="OSTMG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="ostmg_gloss.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="asm_util.htm" title="Previous" type="text/html" />
<link rel="Next" href="asm_util002.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e18951.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">19/40</span> <!-- End Header --><a id="BAGCJCAE"></a><a id="OSTMG01610"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h1 class="sect1">About ASMCMD</h1>
<p><a id="sthref821"></a>ASMCMD is a command-line utility that you can use to manage Oracle ASM instances, disk groups, file access control for disk groups, files and directories within disk groups, templates for disk groups, and volumes.</p>
<p>You can run the ASMCMD utility in either interactive or noninteractive mode.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#BABCCEJC">Types of ASMCMD Commands</a></p>
</li>
<li>
<p><a href="#BCFEDEDC">About Oracle ASM Files, Filenames, Directories, and Aliases</a></p>
</li>
<li>
<p><a href="#BABJHJJB">Preparing to Run ASMCMD</a></p>
</li>
<li>
<p><a href="#CIHFCIED">Running ASMCMD in Interactive Mode</a></p>
</li>
<li>
<p><a href="#CIHDAEIB">Running ASMCMD in Noninteractive Mode</a></p>
</li>
<li>
<p><a href="#CIHGDGBE">Getting Help</a></p>
</li>
</ul>
<a id="BABCCEJC"></a><a id="OSTMG01640"></a>
<div class="sect2">
<h2 class="sect2">Types of ASMCMD Commands</h2>
<p>The types of ASMCMD commands are listed in <a href="#CIHCFEGF">Table 12-1</a>.</p>
<div class="tblformalwide">
<p class="titleintable"><a id="OSTMG94351"></a><a id="sthref822"></a><a id="CIHCFEGF"></a>Table 12-1 Types of ASMCMD commands</p>
<table class="cellalignment1546" title="Types of ASMCMD commands" summary="This table lists all the ASMCMD commands by category." dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t2">Category</th>
<th class="cellalignment1547" id="r1c2-t2">Commands</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t2" headers="r1c1-t2">
<p><a href="asm_util002.htm#CIHIBJCF">ASMCMD Instance Management Commands</a></p>
</td>
<td class="cellalignment1543" headers="r2c1-t2 r1c2-t2">
<p><a href="asm_util002.htm#CIHBJCFJ">dsget</a>, <a href="asm_util002.htm#CIHFFHHG">dsset</a>, <a href="asm_util002.htm#BABDAGIH">lsct</a>, <a href="asm_util002.htm#CIHBBICE">lsop</a>, <a href="asm_util002.htm#CIHJBAHB">lspwusr</a>, <a href="asm_util002.htm#CIHFJDDA">orapwusr</a>, <a href="asm_util002.htm#CIHBGAAD">shutdown</a>, <a href="asm_util002.htm#CIHHAHCI">spbackup</a>, <a href="asm_util002.htm#CIHEHGID">spcopy</a>, <a href="asm_util002.htm#CIHDCFDD">spget</a>, <a href="asm_util002.htm#CIHDDJAF">spmove</a>, <a href="asm_util002.htm#CIHCAJBC">spset</a>, <a href="asm_util002.htm#CIHGBIAB">startup</a></p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t2" headers="r1c1-t2">
<p><a href="asm_util003.htm#CIHGHEID">ASMCMD File Management Commands</a></p>
</td>
<td class="cellalignment1543" headers="r3c1-t2 r1c2-t2">
<p><a href="asm_util003.htm#BABFHHBB">cd</a>, <a href="asm_util003.htm#CHDJEIEA">cp</a>, <a href="asm_util003.htm#BABIDEII">du</a>, <a href="asm_util003.htm#BABECFIF">find</a>, <a href="asm_util003.htm#BABEEEDG">ls</a>, <a href="asm_util003.htm#CIHCHEGG">lsof</a>, <a href="asm_util003.htm#BABHBEDG">mkalias</a>, <a href="asm_util003.htm#BABJBCGF">pwd</a>, <a href="asm_util003.htm#BABDIIJH">rm</a>, <a href="asm_util003.htm#BABCIJEB">rmalias</a></p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t2" headers="r1c1-t2">
<p><a href="asm_util004.htm#CIHBEJFG">ASMCMD Disk Group Management Commands</a></p>
</td>
<td class="cellalignment1543" headers="r4c1-t2 r1c2-t2">
<p><a href="asm_util004.htm#CIHHACDC">chdg</a>, <a href="asm_util004.htm#CIHJICIF">chkdg</a>, <a href="asm_util004.htm#CIHDIHEF">dropdg</a>, <a href="asm_util004.htm#CIHFIHBA">iostat</a>, <a href="asm_util004.htm#CIHGBCHG">lsattr</a>, <a href="asm_util004.htm#BABHHCBH">lsdg</a>, <a href="asm_util004.htm#CIHDCADB">lsdsk</a>, <a href="asm_util004.htm#CIHHAAFB">lsod</a>, <a href="asm_util004.htm#BJEGIGDD">md_backup</a>, <a href="asm_util004.htm#BJEGCGEJ">md_restore</a>, <a href="asm_util004.htm#CIHGEBEI">mkdg</a>, <a href="asm_util004.htm#CIHFBEHH">mount</a>, <a href="asm_util004.htm#CIHIDCJG">offline</a>, <a href="asm_util004.htm#CIHEACHD">online</a>, <a href="asm_util004.htm#CIHIJGHI">rebal</a>, <a href="asm_util004.htm#CIHBAFAG">remap</a>, <a href="asm_util004.htm#CIHHBIJH">setattr</a>, <a href="asm_util004.htm#CIHJCGGH">umount</a></p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t2" headers="r1c1-t2">
<p><a href="asm_util005.htm#CIHEBIDB">ASMCMD Template Management Commands</a></p>
</td>
<td class="cellalignment1543" headers="r5c1-t2 r1c2-t2">
<p><a href="asm_util005.htm#CIHHCIAF">chtmpl</a>, <a href="asm_util005.htm#CIHGFHBD">lstmpl</a>, <a href="asm_util005.htm#CIHDEGGA">mktmpl</a>, <a href="asm_util005.htm#CIHBBHEF">rmtmpl</a></p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t2" headers="r1c1-t2">
<p><a href="asm_util006.htm#CIHDGDJA">ASMCMD File Access Control Commands</a></p>
</td>
<td class="cellalignment1543" headers="r6c1-t2 r1c2-t2">
<p><a href="asm_util006.htm#CIHEGDCJ">chgrp</a>, <a href="asm_util006.htm#CIHGCACA">chmod</a>, <a href="asm_util006.htm#CIHDBBEE">chown</a>, <a href="asm_util006.htm#CIHIJFBE">groups</a>, <a href="asm_util006.htm#CIHJAHHG">grpmod</a>, <a href="asm_util006.htm#CIHIGIJC">lsgrp</a>, <a href="asm_util006.htm#CIHCFDAB">lsusr</a>, <a href="asm_util006.htm#CIHJGHCH">mkgrp</a>, <a href="asm_util006.htm#CIHDFBIG">mkusr</a>, <a href="asm_util006.htm#CIHCJBHD">passwd</a>, <a href="asm_util006.htm#CIHCCFAJ">rmgrp</a>, <a href="asm_util006.htm#CIHIHBCI">rmusr</a></p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t2" headers="r1c1-t2">
<p><a href="asm_util007.htm#CIHDACEH">ASMCMD Volume Management Commands</a></p>
</td>
<td class="cellalignment1543" headers="r7c1-t2 r1c2-t2">
<p><a href="asm_util007.htm#CIHJJIAG">volcreate</a>, <a href="asm_util007.htm#CIHDHHJB">voldelete</a>, <a href="asm_util007.htm#CIHFCEII">voldisable</a>, <a href="asm_util007.htm#CIHECJFA">volenable</a>, <a href="asm_util007.htm#CIHIEJCH">volinfo</a>, <a href="asm_util007.htm#CIHGDFCI">volresize</a>, <a href="asm_util007.htm#CIHHCDIJ">volset</a>, <a href="asm_util007.htm#CIHCJFHB">volstat</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" --></div>
<!-- class="sect2" -->
<a id="BCFEDEDC"></a><a id="OSTMG01620"></a>
<div class="sect2">
<h2 class="sect2">About Oracle ASM Files, Filenames, Directories, and Aliases</h2>
<p>ASMCMD works with Oracle ASM files, directories, and aliases. Before using ASMCMD, you should understand how these common computing concepts apply to the Oracle ASM environment.</p>
<p>This section contains the following topics about some key definitions:</p>
<ul>
<li>
<p><a href="#CIHFBAAC">System-Generated Filename or Fully Qualified Filename</a></p>
</li>
<li>
<p><a href="#CIHIJDJA">Directory</a></p>
</li>
<li>
<p><a href="#CIHGBJBB">Alias</a></p>
</li>
<li>
<p><a href="#CIHCFABE">Absolute Path and Relative Path</a></p>
</li>
<li>
<p><a href="#CIHBFGCF">Wildcard Characters</a></p>
</li>
</ul>
<a id="CIHFBAAC"></a><a id="OSTMG94352"></a>
<div class="sect3">
<h3 class="sect3">System-Generated Filename or Fully Qualified Filename</h3>
<p><a id="sthref823"></a>Every file created in Oracle ASM gets a system-generated filename, otherwise known as a fully qualified filename. This is similar to a complete path name in a local file system.</p>
<p>Oracle ASM generates filenames according to the following scheme:</p>
<pre>
<span class="italic">+diskGroupName/databaseName/fileType/fileTypeTag.fileNumber.incarnation</span>
</pre>
<p>An example of a fully qualified filename is the following:</p>
<p><code>+data/orcl/CONTROLFILE/Current.256.541956473</code></p>
<p>In the previous fully qualified filename, <code>data</code> is the disk group name, <code>orcl</code> is the database name, <code>CONTROLFILE</code> is the file type, and so on.</p>
<p>Only the slash (/) is supported by ASMCMD. Filenames are not case sensitive, but are case retentive. If you type a path name as lowercase, ASMCMD retains the lowercase.</p>
<p>For more information about Oracle ASM filenames, refer to <a href="asmfiles.htm#i1010333">"Fully Qualified File Name Form"</a>.</p>
</div>
<!-- class="sect3" -->
<a id="CIHIJDJA"></a><a id="OSTMG94353"></a>
<div class="sect3">
<h3 class="sect3">Directory</h3>
<p><a id="sthref824"></a>As in other file systems, an Oracle ASM directory is a container for files, and an Oracle ASM directory can be part of a tree structure of other directories. The fully qualified filename represents a hierarchy of directories in which the plus sign (+) represents the root directory. In each disk group, Oracle ASM automatically creates a directory hierarchy that corresponds to the structure of the fully qualified filenames in the disk group. The directories in this hierarchy are known as system-generated directories.</p>
<p>ASMCMD enables you to move up and down in this directory hierarchy with the <code>cd</code> (change directory) command. The ASMCMD <code>ls</code> (list directory) command lists the contents of the current directory, while the <code>pwd</code> command prints the name of the current directory.</p>
<p>When you start ASMCMD, the current directory is set to root (+). For an Oracle ASM instance with two disk groups, for example, <code>data</code> and <code>fra</code>, entering an <code>ls</code> command with the root directory as the current directory produces the following output:</p>
<br />
<code>ASMCMD&gt; ls</code><br />
<code>data/</code><br />
<code>fra/</code><br />
<p>The following example demonstrates navigating the Oracle ASM directory tree (refer to the fully qualified filename shown previously):</p>
<br />
<code>ASMCMD&gt; cd +data/orcl/CONTROLFILE</code><br />
<code>ASMCMD&gt; ls</code><br />
<code>Current.256.541956473</code><br />
<code>Current.257.541956475</code><br />
<p>You can create your own directories as subdirectories of the system-generated directories using the ASMCMD <code>mkdir</code> command. The directories that you create can have subdirectories, and you can navigate the hierarchy of both system-generated directories and user-created directories with the <code>cd</code> command.</p>
<p>The following example creates the directory <code>mydir</code> under <code>orcl</code> in the disk group <code>data</code>:</p>
<p><code>ASMCMD&gt; mkdir +data/orcl/mydir</code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The directory <code>orcl</code> is a system-generated directory. The contents of <code>data</code> represent the contents of disk group <code>data</code>.</div>
<p>If you start ASMCMD with the <code>-p</code> flag, then ASMCMD shows the current directory as part of its prompt. See <a href="#CIHIAJHB">"Including the Current Directory in the ASMCMD Prompt"</a>.</p>
<br />
<code>ASMCMD [+] &gt; cd data/orcl</code><br />
<code>ASMCMD [+data/orcl] &gt;</code><br />
<p>ASMCMD retains the case of the directory that you entered.</p>
</div>
<!-- class="sect3" -->
<a id="CIHGBJBB"></a><a id="OSTMG94354"></a>
<div class="sect3">
<h3 class="sect3">Alias</h3>
<p><a id="sthref825"></a>Aliases are filenames that are references or pointers to system-generated filenames. However, aliases are user-friendly names. Aliases are similar to symbolic links in UNIX or Linux computers. You can create aliases to simplify Oracle ASM filename administration. You can create aliases with the <code>mkalias</code> ASMCMD command or a SQL <code>ALTER</code> <code>DISKGROUP</code> command.</p>
<p>An alias has at a minimum the disk group name as part of its complete path. You can create aliases at the disk group level or in any system-generated or user-created subdirectory. The following are examples of aliases:</p>
<br />
<code>+data/ctl1.f</code><br />
<code>+data/orcl/ctl1.f</code><br />
<code>+data/mydir/ctl1.f</code><br />
<p>If you run the ASMCMD <code>ls</code> (list directory) with the <code>-l</code> flag, each alias is listed with the system-generated file to which the alias refers.</p>
<p><code>ctl1.f =&gt; +data/orcl/CONTROLFILE/Current.256.541956473</code></p>
<p>For more information about aliases, refer to <a href="asmfiles.htm#i1021359">"Alias Oracle ASM Filename Forms"</a>.</p>
</div>
<!-- class="sect3" -->
<a id="CIHCFABE"></a><a id="OSTMG94355"></a>
<div class="sect3">
<h3 class="sect3">Absolute Path and Relative Path</h3>
<p><a id="sthref826"></a>When you run an ASMCMD command that accepts a filename or directory name as an argument, you can use the name as either an absolute path or a relative path.</p>
<p>An absolute path refers to the full path of a file or directory. An absolute path begins with a plus sign (+) followed by a disk group name, followed by subsequent directories in the directory tree. The absolute path includes directories until the file or directory of interest is reached. A complete system-generated filename, otherwise known as the fully qualified filename, is an example of an absolute path to a file.</p>
<p>Using an absolute path enables the command to access the file or directory regardless of where the current directory is set. The following <code>rm</code> command uses an absolute path for the filename:</p>
<p><code>ASMCMD [+] &gt; rm</code> <code>+data/orcl/datafile/users.259.555341963</code></p>
<p>The following <code>cd</code> command uses an absolute path to the directory.</p>
<p><code>ASMCMD [+data/mydir] &gt; cd +data/orcl/CONTROLFILE</code></p>
<p>A relative path includes only the part of the filename or directory name that is not part of the current directory. That is, the path to the file or directory is relative to the current directory.</p>
<p>In the following example, the <code>rm</code> command operates on the file <code>undotbs1.272.557429239</code>, which in this case is a relative path. ASMCMD appends the current directory to the command argument to obtain the absolute path to the file. In this example this is <code>+data/orcl/DATAFILE/undotbs1.272.557429239</code>.</p>
<br />
<code>ASMCMD [+] &gt; cd +data</code><br />
<code>ASMCMD [+data] &gt; cd orcl/DATAFILE</code><br />
<code>ASMCMD [+data/orcl/DATAFILE] &gt; ls</code><br />
<code>EXAMPLE.269.555342243</code><br />
<code>SYSAUX.257.555341961</code><br />
<code>SYSTEM.256.555341961</code><br />
<code>UNDOTBS1.258.555341963</code><br />
<code>UNDOTBS1.272.557429239</code><br />
<code>USERS.259.555341963</code><br />
<code>ASMCMD [+data/orcl/DATAFILE] &gt;</code> <code>rm undotbs1.272.557429239</code><br />
<p>Paths to directories can also be relative. You can go up or down the hierarchy of the current directory tree branch by providing a directory argument to the <code>cd</code> command whose path is relative to the current directory.</p>
<p>In addition, you can use the pseudo-directories "<code>.</code>" and "<code>..</code>" rather than a directory name. The "<code>.</code>" pseudo-directory is the current directory. The "<code>..</code>" pseudo-directory is the parent directory of the current directory.</p>
<p>The following example demonstrates how to use relative directory paths and pseudo-directories:</p>
<br />
<code>ASMCMD [+data/orcl] &gt; cd DATAFILE</code><br />
<code>ASMCMD [+data/orcl/DATAFILE] &gt;cd ..</code><br />
<code>ASMCMD [+data/orcl] &gt;</code></div>
<!-- class="sect3" -->
<a id="CIHBFGCF"></a><a id="OSTMG94356"></a>
<div class="sect3">
<h3 class="sect3">Wildcard Characters</h3>
<p><a id="sthref827"></a>The wildcard characters <code>*</code> and <code>%</code> match zero or more characters anywhere within an absolute or relative path, which saves typing of the full directory or file name. The two wildcard characters behave identically. There are various ASMCMD commands that accept wildcards. These include <code>cd</code>, <code>du</code>, <code>find</code>, <code>ls</code>, <code>lsattr</code>, <code>lsdg</code>, <code>lsdsk</code>, <code>lsgrp</code>, <code>lsusr</code>, and <code>rm</code>.</p>
<p>If a wildcard pattern matches only one directory when using wildcard characters with <code>cd</code>, then <code>cd</code> changes the directory to that destination. If the wildcard pattern matches multiple directories, then ASMCMD does not change the directory but instead returns an error.</p>
<p><a href="#CIHJGAHI">Example 12-1</a> illustrates the use of wildcards.</p>
<div class="example">
<p class="titleinexample"><a id="CIHJGAHI"></a><a id="OSTMG94357"></a>Example 12-1 Using wildcards with ASMCMD commands</p>
<pre>
ASMCMD [+] &gt; cd +data/orcl/*FILE
ASMCMD-08005: +data/orcl/*FILE: ambiguous

ASMCMD [+] &gt; cd +data/orcl/C*
ASMCMD [+data/orcl/CONTROLFILE] &gt;

ASMCMD [+] &gt; ls +fra/orcl/A%
2009_07_13/
2009_07_14/

ASMCMD [+] &gt;  ls +fra/orcl/ARCHIVELOG/2009%

+fra/orcl/ARCHIVELOG/2009_07_13/:
thread_1_seq_3.260.692103543
thread_1_seq_4.261.692108897
thread_1_seq_5.262.692125993
thread_1_seq_6.263.692140729
thread_1_seq_7.264.692143333
 
+fra/orcl/ARCHIVELOG/2009_07_14/:
thread_1_seq_8.271.692158265
thread_1_seq_9.272.692174597

ASMCMD [+] &gt; ls data/orcl/*

+data/orcl/CONTROLFILE/:
Current.260.692103157

+data/orcl/DATAFILE/:
EXAMPLE.265.692103187
SYSAUX.257.692103045
SYSTEM.256.692103045
UNDOTBS1.258.692103045
USERS.259.692103045

+data/orcl/ONLINELOG/:
group_1.261.692103161
group_2.262.692103165
group_3.263.692103169

+data/orcl/PARAMETERFILE/:
spfile.266.692103315

+data/orcl/TEMPFILE/:
TEMP.264.692103181
spfileorcl.ora
</pre></div>
<!-- class="example" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BABJHJJB"></a><a id="OSTMG01630"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2">Preparing to Run ASMCMD</h2>
<p><a id="sthref828"></a><a id="sthref829"></a>You can run the ASMCMD utility in either interactive or noninteractive mode.</p>
<p>Before running ASMCMD, review the items in the following list.</p>
<ul>
<li>
<p>Log in to the host which contains the Oracle ASM instance that you plan to administer.</p>
<p>You must log in as a user that has SYSASM or SYSDBA privileges through operating system authentication. The SYSASM privilege is the required connection to administer the Oracle ASM instance. See <a href="asminst.htm#CHDEJBAI">"Authentication for Accessing Oracle ASM Instances"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to the <a class="olink ADMIN11010" href="../../server.112/e25494/dba.htm#ADMIN11010"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about operating system authentication</div>
</li>
<li>
<p><a id="sthref830"></a><a id="sthref831"></a>To connect to the Oracle ASM instance, run ASMCMD that is located in the <code>bin</code> subdirectory of the Oracle Grid Infrastructure home (Oracle ASM home).</p>
<p>Connect as SYSASM, the default connection, to administer an Oracle ASM instance.</p>
<p>Ensure that the <code>ORACLE_HOME</code> and <code>ORACLE_SID</code> environment variables to refer to the Oracle ASM instance. Depending on your operating system, you might have to set other environment variables to properly connect to the Oracle ASM instance.</p>
<p>Ensure that the <code>bin</code> subdirectory of your Oracle Grid Infrastructure home is in your <code>PATH</code> environment variable.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Refer to the <a class="olink ADMIN00102" href="../../server.112/e25494/dba.htm#ADMIN00102"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about setting environment variables</div>
<p>The default value of the Oracle ASM SID for a single-instance database is <code>+ASM</code>. In Oracle Real Application Clusters environments, the default value of the Oracle ASM SID on any node is <code>+ASM</code><code><span class="codeinlineitalic">node#</span></code>.</p>
</li>
<li>
<p>To use most of the ASMCMD commands, ensure that the Oracle ASM instance is started and the Oracle ASM disk groups are mounted.</p>
<p>If the Oracle ASM instance is not running, ASMCMD runs only those commands that do not require an Oracle ASM instance. The commands include <code>startup</code>, <code>shutdown</code>, <code>lsdsk</code>, <code>help</code>, and <code>exit</code>. If you attempt to run other ASMCMD commands, an error message displays.</p>
</li>
<li>
<p><a id="sthref832"></a><a id="sthref833"></a>You can connect to the database instance as SYSDBA by running ASMCMD that is located in the <code>bin</code> directory of the Oracle Database home.</p>
<p>Ensure that the <code>ORACLE_HOME</code> and <code>ORACLE_SID</code> environment variables to refer to the database instance. Depending on your operating system, you might have to set other environment variables to properly connect to the database instance.</p>
<p>You must include the <code>--privilege</code> option to connect as SYSDBA. See <a href="#CIHEIBJG">"Specifying the Type of Connection"</a>.</p>
<p>With this connection, there is a limited set of operations that can be run. For more information, see <a href="asminst.htm#CHDFJFEB">"The SYSDBA Privilege for Managing Oracle ASM Components"</a>.</p>
<p>When administering disk groups, Oracle recommends that you run ASMCMD from the database home of the database instance that is the owner of the files in the disk group.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHFCIED"></a><a id="OSTMG94358"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2">Running ASMCMD in Interactive Mode</h2>
<p><a id="sthref834"></a>The interactive mode of the ASMCMD utility provides a shell-like environment where you are prompted to enter ASMCMD commands. The syntax for starting ASMCMD in interactive mode is:</p>
<br />
<code>asmcmd</code> [<code>-V</code>]<br />
<code>asmcmd</code> [<code>-v</code> {<code>errors</code>|<code>warnings</code>|<code>normal</code>|<code>info</code>|<code>debug</code>}]<br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> [ <code>--privilege</code> <code><span class="codeinlineitalic">connection_type</span></code> ] [<code>-p</code>]<br />
<p><a href="#CIHFFCDB">Table 12-2</a> summarizes the ASMCMD options.</p>
<div class="tblformal">
<p class="titleintable"><a id="OSTMG94359"></a><a id="sthref835"></a><a id="CIHFFCDB"></a>Table 12-2 ASMCMD interactive options</p>
<table class="cellalignment1548" title="ASMCMD interactive options" summary="This table lists the options for the ASMCMD command." dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t6">Option</th>
<th class="cellalignment1547" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t6" headers="r1c1-t6">
<p>-<code>V</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t6 r1c2-t6">
<p>Displays the version of ASMCMD and then exits.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t6" headers="r1c1-t6">
<p><code>-v</code> <code><span class="codeinlineitalic">display_level</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t6 r1c2-t6">
<p>Displays additional information with some commands to help users diagnose problems and writes to a message file when logging is required. <code>normal</code> is the default if the display level is not specified.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t6" headers="r1c1-t6">
<p><code>--privilege</code> <code><span class="codeinlineitalic">connection_type</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t6 r1c2-t6">
<p>Specifies the privilege to connect as when accessing an Oracle ASM or database instance. Can be either <code>SYSASM</code> or <code>SYSDBA</code>. The default is <code>SYSASM</code> and is used when administering the Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t6" headers="r1c1-t6">
<p><code>-p</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t6 r1c2-t6">
<p>Displays the current directory in the prompt.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>ASMCMD can be started with multiple options. For example:</p>
<br />
<code>asmcmd</code> <code>-p</code> <code>-v</code> <code>info</code><br />
<p>For the majority of the examples in this chapter, ASMCMD was started with the <code>-p</code> option.</p>
<a id="OSTMG94360"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref836"></a>
<h3 class="sect3">Running ASMCMD without Any Options</h3>
<p><a id="sthref837"></a>To run ASMCMD in interactive mode without any options:</p>
<ol>
<li>
<p>Enter the following at the operating system command prompt:</p>
<p><code>asmcmd</code></p>
<p>Oracle displays an ASMCMD command prompt as follows:</p>
<p><code>ASMCMD&gt;</code></p>
</li>
<li>
<p>Enter an ASMCMD command and press <code>Enter</code>. The command runs and displays its output, if any, and then ASMCMD prompts for the next command.</p>
</li>
<li>
<p>Continue entering ASMCMD commands until you have completed the tasks.</p>
</li>
<li>
<p><a id="sthref838"></a><a id="sthref839"></a>Enter the <code>exit</code> or <code>quit</code> command to exit ASMCMD.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CIHEIBJG"></a><a id="OSTMG94361"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h3 class="sect3">Specifying the Type of Connection</h3>
<p><a id="sthref840"></a><a id="sthref841"></a><a id="sthref842"></a>You can specify the <code>--privilege</code> option to choose the type of connection, either <code>SYSASM</code> or <code>SYSDBA</code>. The default value is <code>SYSASM</code> and is used when administering an Oracle ASM instance. Connect as <code>SYSDBA</code> when connecting to the database instance.</p>
<p>For example:</p>
<p><code>$ asmcmd --privilege sysasm</code></p>
</div>
<!-- class="sect3" -->
<a id="OSTMG94362"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref843"></a>
<h3 class="sect3">Specifying the Verbose Mode</h3>
<p><a id="sthref844"></a>You can specify the <code>-v</code> option with the <code>asmcmd</code> command to display additional information with some commands to help users diagnose problems as shown in the following example:</p>
<br />
<code>$ asmcmd -v</code> <code>debug</code><br />
<p>When there is a message that must be logged during <code>asmcmd</code> operations, the message is written to the <code>alert.log</code> file or the <code>trace.trc</code> file.</p>
<p>The <code>alert.log</code> file is created or updated when <code>asmcmd</code> is started with the <code>-v</code> <code>errors</code>, <code>-v</code> <code>warning</code>, or <code>-v</code> <code>normal</code> display level. The <code>trace.trc</code> file is created or updated when <code>asmcmd</code> is started with the <code>-v</code> <code>info</code> or <code>-v</code> <code>debug</code> display level.</p>
<p>By default, the <code>alert.log</code> is file created in the <code>$ORACLE_HOME/log/diag/asmcmd/user_</code><code><span class="codeinlineitalic">username</span></code><code>/</code><code><span class="codeinlineitalic">hostname</span></code><code>/alert/</code> directory. By default, the <code>trace.trc</code> file is created in the <code>$ORACLE_HOME/log/diag/asmcmd/user_</code><code><span class="codeinlineitalic">username</span></code><code>/</code><code><span class="codeinlineitalic">hostname</span></code><code>/trace/</code> directory.</p>
<p>Under certain circumstances, <code>$ORACLE_BASE</code> and <code>$ORACLE_HOME</code> can be set to override the default locations of the <code>alert.log</code> and <code>trace.trc</code> files.</p>
</div>
<!-- class="sect3" -->
<a id="CIHIAJHB"></a><a id="OSTMG94363"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h3 class="sect3">Including the Current Directory in the ASMCMD Prompt</h3>
<p><a id="sthref845"></a>You can specify the <code>-p</code> option with the <code>asmcmd</code> command to include the current directory in the ASMCMD prompt as shown in the following example:</p>
<a id="BAGJIGIF"></a><br />
<code>$ asmcmd -p</code><br />
<code>ASMCMD [+] &gt; cd data</code><br />
<code>ASMCMD [+data] &gt;</code></div>
<!-- class="sect3" -->
<a id="OSTMG94364"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref846"></a>
<h3 class="sect3">Displaying the ASMCMD Version Number</h3>
<p><a id="sthref847"></a>You can specify the <code>-V</code> option when starting <code>asmcmd</code> to display the <code>asmcmd</code> version number. After displaying the version number, <code>asmcmd</code> immediately exits.</p>
<p>For example:</p>
<br />
<code>$ asmcmd -V</code><br />
<code>asmcmd version 11.2.0.3.0</code><br />
<code>$</code></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHDAEIB"></a><a id="OSTMG94365"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2">Running ASMCMD in Noninteractive Mode</h2>
<p><a id="sthref848"></a>In noninteractive mode, you run a single ASMCMD command by including the command and command options on the command line when invoking ASMCMD. ASMCMD runs the command, generates output if any, and then exits. The noninteractive mode is especially useful for running scripts.</p>
<p>To run ASMCMD in noninteractive mode where <code><span class="codeinlineitalic">command</span></code> is any valid ASMCMD command and <code><span class="codeinlineitalic">options</span></code> is a list of command options, at the command prompt enter the following:</p>
<p><code>asmcmd</code> <code><span class="codeinlineitalic">command</span></code> <code><span class="codeinlineitalic">options</span></code></p>
<p>In noninteractive mode, ASMCMD returns the codes listed in <a href="#BJEBGJDC">Table 12-3</a>.</p>
<div class="tblformal">
<p class="titleintable"><a id="OSTMG94366"></a><a id="sthref849"></a><a id="BJEBGJDC"></a>Table 12-3 ASMCMD return codes</p>
<table class="cellalignment1548" title="ASMCMD return codes" summary="ASMCMD return codes" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t7">Type</th>
<th class="cellalignment1547" id="r1c2-t7">Return Code</th>
<th class="cellalignment1547" id="r1c3-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t7" headers="r1c1-t7">
<p>General</p>
</td>
<td class="cellalignment1543" headers="r2c1-t7 r1c2-t7">
<p>0</p>
</td>
<td class="cellalignment1543" headers="r2c1-t7 r1c3-t7">
<p>No issues for the command.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t7" headers="r1c1-t7">
<p>General</p>
</td>
<td class="cellalignment1543" headers="r3c1-t7 r1c2-t7">
<p>1</p>
</td>
<td class="cellalignment1543" headers="r3c1-t7 r1c3-t7">
<p>Internal error.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t7" headers="r1c1-t7">
<p>General</p>
</td>
<td class="cellalignment1543" headers="r4c1-t7 r1c2-t7">
<p>255 or -1</p>
</td>
<td class="cellalignment1543" headers="r4c1-t7 r1c3-t7">
<p>External user error as returned by a command.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t7" headers="r1c1-t7">
<p><code>lsdsk</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t7 r1c2-t7">
<p>0</p>
</td>
<td class="cellalignment1543" headers="r5c1-t7 r1c3-t7">
<p>Results include member disks only.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t7" headers="r1c1-t7">
<p><code>lsdsk</code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t7 r1c2-t7">
<p>1</p>
</td>
<td class="cellalignment1543" headers="r6c1-t7 r1c3-t7">
<p>Results include candidate disks only.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t7" headers="r1c1-t7">
<p><code>lsdsk</code></p>
</td>
<td class="cellalignment1543" headers="r7c1-t7 r1c2-t7">
<p>2</p>
</td>
<td class="cellalignment1543" headers="r7c1-t7 r1c3-t7">
<p>Results include both member and candidate disks.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p><a href="#CIHICGCD">Example 12-2</a> shows how to run ASMCMD in the noninteractive mode. The first example runs the <code>ls</code> command to list the disk groups for the Oracle ASM instance. The second example redirects the output of the <code>lsod</code> command to the <code>my_lsod_test</code> file. The third example runs <code>lsdsk</code> using a pattern with a wildcard character to list specific disks in the <code>data</code> disk group.</p>
<div class="example">
<p class="titleinexample"><a id="CIHICGCD"></a><a id="OSTMG94367"></a>Example 12-2 Running ASMCMD commands in noninteractive mode</p>
<pre>
$ asmcmd ls -l
State    Type    Rebal  Name
MOUNTED  NORMAL  N      DATA/
MOUNTED  NORMAL  N      FRA/

$ asmcmd lsod --suppressheader -G data &gt; my_lsod_test

$ asmcmd lsdsk -G data '/devices/diska*'
Path
/devices/diska1
/devices/diska2
/devices/diska3
</pre></div>
<!-- class="example" -->
<p><a href="#BJECDDBC">Example 12-3</a> raises an error with an incorrect disk group name and the return code equal (255) is displayed.</p>
<div class="example">
<p class="titleinexample"><a id="BJECDDBC"></a><a id="OSTMG94368"></a>Example 12-3 Displaying a return code when running ASMCMD in noninteractive mode</p>
<pre>
$ asmcmd ls -l dat
ASMCMD-08001: diskgroup 'dat' does not exist or is not mounted

$ echo $?
255
</pre></div>
<!-- class="example" -->
<p><a href="#BJEBCGBI">Example 12-4</a> shows an example of ASMCMD commands run in noninteractive mode inside a script.</p>
<div class="example">
<p class="titleinexample"><a id="BJEBCGBI"></a><a id="OSTMG94369"></a>Example 12-4 Running ASMCMD commands in a script</p>
<pre>
#!/bin/sh
for ((i = 1; i &lt;=3; i++))
 do
   asmcmd lsdsk -G data '/devices/diska'$i
done

$ ./asmcmd_test_script
Path
/devices/diska1
Path
/devices/diska2
Path
/devices/diska3
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHGDGBE"></a><a id="OSTMG94370"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2">Getting Help</h2>
<p><a id="sthref850"></a><a id="sthref851"></a>Type <code>help</code> at the ASMCMD prompt or as a command in noninteractive mode to view general information about ASMCMD and a list of available ASMCMD commands.</p>
<p>You can type <code>help</code> <code><span class="codeinlineitalic">command</span></code> to display help text for a specific command, including usage information about how to run the command with its options.</p>
<p>The following is an example of the use of the <code>help</code> command.</p>
<div class="example">
<p class="titleinexample"><a id="BJEIDJEF"></a><a id="OSTMG94371"></a>Example 12-5 Displaying ASMCMD help text</p>
<pre>
ASMCMD [+] &gt; help startup
        startup [--nomount] [--restrict] [--pfile &lt;pfile.ora&gt;]
 
        Start the ASM instance.
 
        [--nomount]           specifies the nomount option.
        [--restrict]          start the instance in restricted mode.
        [--pfile &lt;pfile.ora&gt;] specifies the location of the pfile.
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1536">
<tr>
<td class="cellalignment1543">
<table class="cellalignment1541">
<tr>
<td class="cellalignment1540"><a href="asm_util.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1540"><a href="asm_util002.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1545">
<table class="cellalignment1539">
<tr>
<td class="cellalignment1540"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1540"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1540"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1540"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1540"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1540"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
