<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>ASMCMD Disk Group Management Commands</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 047" />
<meta name="dcterms.created" content="2012-02-03T20:20:21Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide" />
<meta name="dcterms.identifier" content="E18951-03" />
<meta name="dcterms.isVersionOf" content="OSTMG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="ostmg_gloss.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="asm_util003.htm" title="Previous" type="text/html" />
<link rel="Next" href="asm_util005.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e18951.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/40</span> <!-- End Header --><a id="CIHBEJFG"></a><a id="OSTMG01644"></a>
<div class="sect1">
<h1 class="sect1">ASMCMD Disk Group Management Commands</h1>
<p><a id="sthref958"></a><a id="sthref959"></a>This section describes the ASMCMD disk group management commands.</p>
<p><a href="#CIHJAIHB">Table 12-27</a> provides a summary of the disk group management commands.</p>
<div class="tblformalwide">
<p class="titleintable"><a id="OSTMG94515"></a><a id="sthref960"></a><a id="CIHJAIHB"></a>Table 12-27 Summary of ASMCMD Disk group management commands</p>
<table class="cellalignment1546" title="Summary of ASMCMD Disk group management commands" summary="ASMCMD Command Summary" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t34">Command</th>
<th class="cellalignment1547" id="r1c2-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t34" headers="r1c1-t34">
<p><a href="#CIHHACDC">chdg</a></p>
</td>
<td class="cellalignment1543" headers="r2c1-t34 r1c2-t34">
<p>Changes a disk group (add, drop, or rebalance).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t34" headers="r1c1-t34">
<p><a href="#CIHJICIF">chkdg</a></p>
</td>
<td class="cellalignment1543" headers="r3c1-t34 r1c2-t34">
<p>Checks or repairs a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t34" headers="r1c1-t34">
<p><a href="#CIHDIHEF">dropdg</a></p>
</td>
<td class="cellalignment1543" headers="r4c1-t34 r1c2-t34">
<p>Drops a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t34" headers="r1c1-t34">
<p><a href="#CIHFIHBA">iostat</a></p>
</td>
<td class="cellalignment1543" headers="r5c1-t34 r1c2-t34">
<p>Displays I/O statistics for disks.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t34" headers="r1c1-t34">
<p><a href="#CIHGBCHG">lsattr</a></p>
</td>
<td class="cellalignment1543" headers="r6c1-t34 r1c2-t34">
<p>Lists the attributes of a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t34" headers="r1c1-t34">
<p><a href="#BABHHCBH">lsdg</a></p>
</td>
<td class="cellalignment1543" headers="r7c1-t34 r1c2-t34">
<p>Lists disk groups and their information.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r8c1-t34" headers="r1c1-t34">
<p><a href="#CIHDCADB">lsdsk</a></p>
</td>
<td class="cellalignment1543" headers="r8c1-t34 r1c2-t34">
<p>Lists disks Oracle ASM disks.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r9c1-t34" headers="r1c1-t34">
<p><a href="#CIHHAAFB">lsod</a></p>
</td>
<td class="cellalignment1543" headers="r9c1-t34 r1c2-t34">
<p>Lists open devices.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r10c1-t34" headers="r1c1-t34">
<p><a href="#BJEGIGDD">md_backup</a></p>
</td>
<td class="cellalignment1543" headers="r10c1-t34 r1c2-t34">
<p>Creates a backup of the metadata of mounted disk groups.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r11c1-t34" headers="r1c1-t34">
<p><a href="#BJEGCGEJ">md_restore</a></p>
</td>
<td class="cellalignment1543" headers="r11c1-t34 r1c2-t34">
<p>Restores disk groups from a backup of the metadata.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r12c1-t34" headers="r1c1-t34">
<p><a href="#CIHGEBEI">mkdg</a></p>
</td>
<td class="cellalignment1543" headers="r12c1-t34 r1c2-t34">
<p>Creates a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r13c1-t34" headers="r1c1-t34">
<p><a href="#CIHFBEHH">mount</a></p>
</td>
<td class="cellalignment1543" headers="r13c1-t34 r1c2-t34">
<p>Mounts a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r14c1-t34" headers="r1c1-t34">
<p><a href="#CIHIDCJG">offline</a></p>
</td>
<td class="cellalignment1543" headers="r14c1-t34 r1c2-t34">
<p>Offlines a disk or a failure group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r15c1-t34" headers="r1c1-t34">
<p><a href="#CIHEACHD">online</a></p>
</td>
<td class="cellalignment1543" headers="r15c1-t34 r1c2-t34">
<p>Onlines a disk or a failure group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r16c1-t34" headers="r1c1-t34">
<p><a href="#CIHIJGHI">rebal</a></p>
</td>
<td class="cellalignment1543" headers="r16c1-t34 r1c2-t34">
<p>Rebalances a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r17c1-t34" headers="r1c1-t34">
<p><a href="#CIHBAFAG">remap</a></p>
</td>
<td class="cellalignment1543" headers="r17c1-t34 r1c2-t34">
<p>Relocates data in a range of physical blocks on a disk.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r18c1-t34" headers="r1c1-t34">
<p><a href="#CIHHBIJH">setattr</a></p>
</td>
<td class="cellalignment1543" headers="r18c1-t34 r1c2-t34">
<p>Sets attributes in a disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r19c1-t34" headers="r1c1-t34">
<p><a href="#CIHJCGGH">umount</a></p>
</td>
<td class="cellalignment1543" headers="r19c1-t34 r1c2-t34">
<p>Dismounts a disk group.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<a id="CIHHACDC"></a><a id="OSTMG94516"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref961"></a><a id="sthref962"></a>chdg</h2>
<p class="subhead2"><a id="OSTMG94517"></a>Purpose</p>
<p>Changes a disk group (adds disks, drops disks, resizes disks, or rebalances a disk group) based on an XML configuration file.</p>
<p class="subhead2"><a id="OSTMG94518"></a>Syntax and Description</p>
<br />
<code>chdg</code> { <code><span class="codeinlineitalic">config_file</span></code><code>.xml</code> | <code>'</code><code><span class="codeinlineitalic">contents_of_xml_file</span></code><code>'</code> }<br />
<p><a href="#CIHJJDGJ">Table 12-28</a> lists the syntax options for the <code>chdg</code> command.</p>
<div class="tblformal">
<p class="titleintable"><a id="OSTMG94519"></a><a id="sthref963"></a><a id="CIHJJDGJ"></a>Table 12-28 Options for the chdg command</p>
<table class="cellalignment1548" title="Options for the chdg command " summary="chdg ASMCMD options" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t35">Option</th>
<th class="cellalignment1547" id="r1c2-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t35" headers="r1c1-t35">
<p><code><span class="codeinlineitalic">config_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t35 r1c2-t35">
<p>Name of the XML file that contains the changes for the disk group. <code>chdg</code> searches for the XML file in the directory where ASMCMD was started unless a path is specified.</p>
<p>For examples of the valid tags and XML configuration file, see <a href="#CIHICGDH">Example 12-30</a> and <a href="#CIHJBJDA">Example 12-31</a>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t35" headers="r1c1-t35">
<p><code><span class="codeinlineitalic">contents_of_xml_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t35 r1c2-t35">
<p>The XML script enclosed in single quotations.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p><code>chdg</code> modifies a disk group based on an XML configuration file. The modification includes adding or deleting disks from an existing disk group, and the setting rebalance power level. The power level can be set to the same values as the <code>ASM_POWER_LIMIT</code> initialization parameter. For information about the initialization parameter, see <a href="asminst.htm#BHCDHJFA">"ASM_POWER_LIMIT"</a>.</p>
<p>When adding disks to a disk group, the diskstring must be specified in a format similar to the <code>ASM_DISKSTRING</code> initialization parameter. For information about the initialization parameter, see <a href="asminst.htm#BHCEHJGA">"ASM_DISKSTRING"</a>.</p>
<p>The failure groups are optional parameters. The default causes every disk to belong to a its own failure group. For information about failure groups, see<a href="asmdiskgrps.htm#CHDDBHCH">"Oracle ASM Failure Groups"</a>.</p>
<p>Dropping disks from a disk group can be performed through this operation. An individual disk can be referenced by its Oracle ASM disk name. A set of disks that belong to a failure group can be specified by the failure group name. For information about dropping disks, see<a href="asmdiskgrps.htm#CHDFJADJ">"Dropping Disks from Disk Groups"</a>.</p>
<p>You can resize a disk inside a disk group with <code>chdg</code>. The resize operation fails if there is not enough space for storing data after the resize. For information about resizing disks, see<a href="asmdiskgrps.htm#CHDCJFAF">"Resizing Disks in Disk Groups"</a>.</p>
<p><a href="#CIHICGDH">Example 12-30</a> shows the basic structure and the valid tags with their respective attributes for the <code>chdg</code> XML configuration file.</p>
<div class="example">
<p class="titleinexample"><a id="CIHICGDH"></a><a id="OSTMG94520"></a>Example 12-30 Tags for the chdg XML configuration template</p>
<pre>
&lt;chdg&gt; update disk clause (add/delete disks/failure groups)
      name         disk group to change
      power        power to perform rebalance
 
&lt;add&gt;  items to add are placed here
&lt;/add&gt;

&lt;drop&gt; items to drop are placed here
&lt;/drop&gt;

&lt;fg&gt;  failure group
      name         failure group name
&lt;/fg&gt;

&lt;dsk&gt; disk
      name         disk name
      string       disk path
      size         size of the disk to add
      force        true specifies to use the force option
&lt;/dsk&gt;

&lt;/chdg&gt;
</pre></div>
<!-- class="example" -->
<p>For information about creating a disk group with ASMCMD <code>mkdg</code>, see <a href="#CIHGEBEI">"mkdg"</a>. For information about altering disk groups, see <a href="asmdiskgrps.htm#i1019476">"Altering Disk Groups"</a>.</p>
<p class="subhead2"><a id="OSTMG94521"></a>Example</p>
<p>The following is an example of an XML configuration file for <code>chdg</code>. This XML file alters the disk group named <code>data</code>. The failure group <code>fg1</code> is dropped and the disk <code>data_0001</code> is also dropped. The <code>/dev/disk5</code> disk is added to failure group <code>fg2</code>. The rebalance power level is set to <code>3</code>.</p>
<div class="example">
<p class="titleinexample"><a id="CIHJBJDA"></a><a id="OSTMG94522"></a>Example 12-31 chdg sample XML configuration file</p>
<pre>
&lt;chdg name="data" power="3"&gt;
  &lt;drop&gt;
    &lt;fg name="fg1"&gt;&lt;/fg&gt;
    &lt;dsk name="data_0001"/&gt;
  &lt;/drop&gt;
  &lt;add&gt;
    &lt;fg name="fg2"&gt;
      &lt;dsk string="/dev/disk5"/&gt;
    &lt;/fg&gt;
  &lt;/add&gt;
&lt;/chdg&gt;
</pre></div>
<!-- class="example" -->
<p>The following are examples of the <code>chdg</code> command with the configuration file or configuration information on the command line.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94523"></a><a id="sthref964"></a>Example 12-32 Using the ASMCMD chdg command</p>
<pre>
ASMCMD [+] &gt; chdg data_config.xml

ASMCMD [+] &gt; chdg '&lt;chdg name="data" power="3"&gt;
        &lt;drop&gt;&lt;fg name="fg1"&gt;&lt;/fg&gt;&lt;dsk name="data_0001"/&gt;&lt;/drop&gt;
        &lt;add&gt;&lt;fg name="fg2"&gt;&lt;dsk string="/dev/disk5"/&gt;&lt;/fg&gt;&lt;/add&gt;&lt;/chdg&gt;'
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHJICIF"></a><a id="OSTMG94524"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref965"></a><a id="sthref966"></a>chkdg</h2>
<p class="subhead2"><a id="OSTMG94525"></a>Purpose</p>
<p>Checks or repairs the metadata of a disk group.</p>
<p class="subhead2"><a id="OSTMG94526"></a>Syntax and Description</p>
<br />
<code>chkdg</code> [<code>--repair</code>] <code><span class="codeinlineitalic">diskgroup</span></code><br />
<p><a href="#CIHCFEIC">Table 12-29</a> lists the syntax options for the <code>chkdg</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94527"></a><a id="sthref967"></a><a id="CIHCFEIC"></a>Table 12-29 Options for the chkdg command</p>
<table class="cellalignment1546" title="Options for the chkdg command " summary="chkdg ASMCMD options" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t36">Option</th>
<th class="cellalignment1547" id="r1c2-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t36" headers="r1c1-t36">
<p><code>--repair</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t36 r1c2-t36">
<p>Repairs the disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t36" headers="r1c1-t36">
<p><code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t36 r1c2-t36">
<p>Name of disk group to check or repair.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>chkdg</code> checks the metadata of a disk group for errors and optionally repairs the errors.</p>
<p class="subhead2"><a id="OSTMG94528"></a>Example</p>
<p>The following is an example of the <code>chkdg</code> command used to check and repair the <code>data</code> disk group.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94529"></a><a id="sthref968"></a>Example 12-33 Using the ASMCMD chkdg command</p>
<pre>
ASMCMD [+] &gt; chkdg --repair data
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHDIHEF"></a><a id="OSTMG94530"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref969"></a><a id="sthref970"></a>dropdg</h2>
<p class="subhead2"><a id="OSTMG94531"></a>Purpose</p>
<p>Drops a disk group.</p>
<p class="subhead2"><a id="OSTMG94532"></a>Syntax and Description</p>
<br />
<code>dropdg</code> [<code>-r</code> <code>-f</code>] [<code>-r</code>] <code><span class="codeinlineitalic">diskgroup</span></code><br />
<p><a href="#CIHFGJFH">Table 12-30</a> lists the syntax options for the <code>dropdg</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94533"></a><a id="sthref971"></a><a id="CIHFGJFH"></a>Table 12-30 Options for the dropdg command</p>
<table class="cellalignment1546" title="Options for the dropdg command " summary="dgdrop ASMCMD options" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t37">Option</th>
<th class="cellalignment1547" id="r1c2-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t37" headers="r1c1-t37">
<p><code>-f</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t37 r1c2-t37">
<p>Force the operation. Only applicable if the disk group cannot be mounted.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t37" headers="r1c1-t37">
<p><code>-r</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t37 r1c2-t37">
<p>Recursive, include contents.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t37" headers="r1c1-t37">
<p><code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t37 r1c2-t37">
<p>Name of disk group to drop.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>dropdg</code> drops an existing disk group. The disk group should not be mounted on multiple nodes.</p>
<p class="subhead2"><a id="OSTMG94534"></a>Example</p>
<p>These are examples of the use of <code>dropdg</code>. The first example forces the drop of the disk group <code>data</code>, including any data in the disk group. The second example drops the disk group <code>fra</code>, including any data in the disk group.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94535"></a><a id="sthref972"></a>Example 12-34 Using the ASMCMD dropdg command</p>
<pre>
ASMCMD [+] &gt; dropdg -r -f data

ASMCMD [+] &gt; dropdg -r fra
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHFIHBA"></a><a id="OSTMG94536"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref973"></a><a id="sthref974"></a>iostat</h2>
<p class="subhead2"><a id="OSTMG94537"></a>Purpose</p>
<p>Displays I/O statistics for Oracle ASM disks in mounted disk groups.</p>
<p class="subhead2"><a id="OSTMG94538"></a>Syntax and Description</p>
<br />
<code>iostat</code> [<code>--suppressheader</code>] [<code>-et</code>] [<code>--io</code>] [<code>--region</code>]<br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> [<code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code>] [<code><span class="codeinlineitalic">interval</span></code>]<br />
<p><code>iostat</code> lists disk group statistics using the <code>V$ASM_DISK_IOSTAT</code> view.</p>
<p><a href="#CIHIAJFB">Table 12-31</a> lists the syntax options for the <code>iostat</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94539"></a><a id="sthref975"></a><a id="CIHIAJFB"></a>Table 12-31 Options for the iostat command</p>
<table class="cellalignment1546" title="Options for the iostat command" summary="This table lists the options for the iostat command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t38">Option</th>
<th class="cellalignment1547" id="r1c2-t38">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t38" headers="r1c1-t38">
<p><code>-e</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t38 r1c2-t38">
<p>Displays error statistics (Read_Err, Write_Err).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t38" headers="r1c1-t38">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t38 r1c2-t38">
<p>Displays statistics for the disk group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t38" headers="r1c1-t38">
<p><code>--suppressheader</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t38 r1c2-t38">
<p>Suppresses column headings.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t38" headers="r1c1-t38">
<p><code>--io</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t38 r1c2-t38">
<p>Displays information in number of I/Os, instead of bytes.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t38" headers="r1c1-t38">
<p><code>-t</code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t38 r1c2-t38">
<p>Displays time statistics (Read_Time, Write_Time).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t38" headers="r1c1-t38">
<p><code>--region</code></p>
</td>
<td class="cellalignment1543" headers="r7c1-t38 r1c2-t38">
<p>Displays information for cold and hot disk regions (Cold_Reads, Cold_Writes, Hot_Reads, Hot_Writes).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r8c1-t38" headers="r1c1-t38">
<p><code><span class="codeinlineitalic">interval</span></code></p>
</td>
<td class="cellalignment1543" headers="r8c1-t38 r1c2-t38">
<p>Refreshes the statistics display based on the interval value (seconds). Use Ctrl-C to stop the interval display.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><a href="#CIHIFAFE">Table 12-32</a> shows the statistics for a disk group. To view the complete set of statistics for a disk group, use the <code>V$ASM_DISK_IOSTAT</code> view.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94540"></a><a id="sthref976"></a><a id="CIHIFAFE"></a>Table 12-32 Attribute descriptions for iostat command output</p>
<table class="cellalignment1546" title="Attribute descriptions for iostat command output" summary="Describes each field in the output of the lsdg command" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t39">Attribute Name</th>
<th class="cellalignment1547" id="r1c2-t39">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t39" headers="r1c1-t39">
<p>Group_Name</p>
</td>
<td class="cellalignment1543" headers="r2c1-t39 r1c2-t39">
<p>Name of the disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t39" headers="r1c1-t39">
<p>Dsk_Name</p>
</td>
<td class="cellalignment1543" headers="r3c1-t39 r1c2-t39">
<p>Name of the disk.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t39" headers="r1c1-t39">
<p>Reads</p>
</td>
<td class="cellalignment1543" headers="r4c1-t39 r1c2-t39">
<p>Number of bytes read from the disk. If the <code>--io</code> option is entered, then the value is displayed as number of I/Os.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t39" headers="r1c1-t39">
<p>Writes</p>
</td>
<td class="cellalignment1543" headers="r5c1-t39 r1c2-t39">
<p>Number of bytes written to the disk. If the <code>--io</code> option is entered, then the value is displayed as number of I/Os.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t39" headers="r1c1-t39">
<p>Cold_Reads</p>
</td>
<td class="cellalignment1543" headers="r6c1-t39 r1c2-t39">
<p>Number of bytes read from the cold disk region. If the <code>--io</code> option is entered, then the value is displayed as number of I/Os.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t39" headers="r1c1-t39">
<p>Cold_Writes</p>
</td>
<td class="cellalignment1543" headers="r7c1-t39 r1c2-t39">
<p>Number of bytes written from the cold disk region. If the <code>--io</code> option is entered, then the value is displayed as number of I/Os.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r8c1-t39" headers="r1c1-t39">
<p>Hot_Reads</p>
</td>
<td class="cellalignment1543" headers="r8c1-t39 r1c2-t39">
<p>Number of bytes read from the hot disk region. If the <code>--io</code> option is entered, then the value is displayed as number of I/Os.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r9c1-t39" headers="r1c1-t39">
<p>Hot_Writes</p>
</td>
<td class="cellalignment1543" headers="r9c1-t39 r1c2-t39">
<p>Number of bytes written to the hot disk region. If the <code>--io</code> option is entered, then the value is displayed as number of I/Os.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r10c1-t39" headers="r1c1-t39">
<p>Read_Err</p>
</td>
<td class="cellalignment1543" headers="r10c1-t39 r1c2-t39">
<p>Number of failed I/O read requests for the disk.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r11c1-t39" headers="r1c1-t39">
<p>Write_Err</p>
</td>
<td class="cellalignment1543" headers="r11c1-t39 r1c2-t39">
<p>Number of failed I/O write requests for the disk.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r12c1-t39" headers="r1c1-t39">
<p>Read_Time</p>
</td>
<td class="cellalignment1543" headers="r12c1-t39 r1c2-t39">
<p>I/O time (in hundredths of a second) for read requests for the disk if the <code>TIMED_STATISTICS</code> initialization parameter is set to <code>TRUE</code> (0 if set to <code>FALSE</code>).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r13c1-t39" headers="r1c1-t39">
<p>Write_Time</p>
</td>
<td class="cellalignment1543" headers="r13c1-t39 r1c2-t39">
<p>I/O time (in hundredths of a second) for write requests for the disk if the <code>TIMED_STATISTICS</code> initialization parameter is set to <code>TRUE</code> (0 if set to <code>FALSE</code>).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>If a refresh interval is not specified, the number displayed represents the total number of bytes or I/Os. If a refresh interval is specified, then the value displayed (bytes or I/Os) is the difference between the previous and current values, not the total value.</p>
<p class="subhead2"><a id="OSTMG94541"></a>Example</p>
<p>The following are examples of the <code>iostat</code> command. The first example displays disk I/O statistics for the <code>data</code> disk group in total number of bytes. The second example displays disk I/O statistics for the <code>data</code> disk group in total number of I/O operations.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94542"></a><a id="sthref977"></a>Example 12-35 Using the ASMCMD iostat command</p>
<pre>
ASMCMD [+] &gt; iostat -G data
Group_Name  Dsk_Name   Reads       Writes     
DATA        DATA_0000  180488192   473707520  
DATA        DATA_0001  1089585152  469538816  
DATA        DATA_0002  191648256   489570304  
DATA        DATA_0003  175724032   424845824  
DATA        DATA_0004  183421952   781429248  
DATA        DATA_0005  1102540800  855269888  
DATA        DATA_0006  171290624   447662592  
DATA        DATA_0007  172281856   361337344  
DATA        DATA_0008  173225472   390840320  
DATA        DATA_0009  288497152   838680576  
DATA        DATA_0010  196657152   375764480  
DATA        DATA_0011  436420096   356003840  

ASMCMD [+] &gt; iostat --io -G data
Group_Name  Dsk_Name   Reads  Writes  
DATA        DATA_0000  2801   34918   
DATA        DATA_0001  58301  35700   
DATA        DATA_0002  3320   36345   
DATA        DATA_0003  2816   10629   
DATA        DATA_0004  2883   34850   
DATA        DATA_0005  59306  38097   
DATA        DATA_0006  2151   10129   
DATA        DATA_0007  2686   10376   
DATA        DATA_0008  2105   8955    
DATA        DATA_0009  9121   36713   
DATA        DATA_0010  3557   8596    
DATA        DATA_0011  17458  9269    
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHGBCHG"></a><a id="OSTMG94543"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref978"></a><a id="sthref979"></a>lsattr</h2>
<p class="subhead2"><a id="OSTMG94544"></a>Purpose</p>
<p>Lists the attributes of a disk group.</p>
<p class="subhead2"><a id="OSTMG94545"></a>Syntax and Description</p>
<br />
<code>lsattr</code> [<code>--suppressheader</code>][<code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code> ] [<code>-lm</code>] [<code><span class="codeinlineitalic">pattern</span></code>]<br />
<p><a href="#CIHIDGJH">Table 12-33</a> lists the syntax options for the <code>lsattr</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94546"></a><a id="sthref980"></a><a id="CIHIDGJH"></a>Table 12-33 Options for the lsattr command</p>
<table class="cellalignment1546" title="Options for the lsattr command" summary="This table lists the options for the lsattr command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t40">Option</th>
<th class="cellalignment1547" id="r1c2-t40">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t40" headers="r1c1-t40">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t40 r1c2-t40">
<p>Disk group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t40" headers="r1c1-t40">
<p><code>--suppressheader</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t40 r1c2-t40">
<p>Suppresses column headings.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t40" headers="r1c1-t40">
<p><code>-l</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t40 r1c2-t40">
<p>Display names with values.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t40" headers="r1c1-t40">
<p><code>-m</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t40 r1c2-t40">
<p>Displays additional information, such as the RO and Sys columns.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t40" headers="r1c1-t40">
<p><code><span class="codeinlineitalic">pattern</span></code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t40 r1c2-t40">
<p>Display the attributes that contain pattern expression.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>Information about disk group attributes is retrieved from the <code>V$ASM_ATTRIBUTE</code> view. For information about disk group attributes, see <a href="asmdiskgrps.htm#CHDIABGJ">"Disk Group Attributes"</a>.</p>
<p>The RO (read-only) column identifies those attributes that can only be set when a disk group is created. The Sys column identifies those attributes that are system-created.</p>
<p>To display information about the disk group template attributes, see <a href="asm_util005.htm#CIHGFHBD">"lstmpl"</a>.</p>
<p>To set disk group attributes, see <a href="#CIHHBIJH">"setattr"</a>.</p>
<p class="subhead2"><a id="OSTMG94547"></a>Example</p>
<p>The following are examples of the <code>lsattr</code> command. The first displays information about all attributes for the <code>data</code> disk group. The second example displays only those attributes with names containing the string <code>compat</code> for the <code>fra</code> disk group. Note the use of both the <code>%</code> and <code>*</code> wildcard characters on Linux.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94548"></a><a id="sthref981"></a>Example 12-36 Using the ASMCMD lsattr command</p>
<pre>
ASMCMD [+] &gt; lsattr -G data -l
Name                     Value       
access_control.enabled   FALSE       
access_control.umask     066         
au_size                  1048576     
cell.smart_scan_capable  FALSE       
compatible.advm          11.2.0.0.0  
compatible.asm           11.2.0.0.0  
compatible.rdbms         11.2.0.0.0  
disk_repair_time         3.6h        
sector_size              512

ASMCMD [+] &gt; lsattr -G fra -l %compat*
Name              Value       
compatible.asm    11.2.0.0.0  
compatible.rdbms  10.1.0.0.0  
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABHHCBH"></a><a id="OSTMG94549"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref982"></a><a id="sthref983"></a>lsdg</h2>
<p class="subhead2"><a id="OSTMG94550"></a>Purpose</p>
<p>Lists mounted disk groups and their information. <code>lsdg</code> queries <code>V$ASM_DISKGROUP_STAT</code> by default. If the <code>--discovery</code> flag is specified, the <code>V$ASM_DISKGROUP</code> is queried instead. The output also includes notification of any current rebalance operation for a disk group. If a disk group is specified, then <code>lsdg</code> returns only information about that disk group.</p>
<p class="subhead2"><a id="OSTMG94551"></a>Syntax and Description</p>
<p><code>lsdg</code> [<code>--suppressheader</code>] [<code>-g</code>] [<code>--discovery</code>] [<code><span class="codeinlineitalic">pattern</span></code><code>]</code></p>
<p><a href="#CIHJDFJC">Table 12-34</a> lists the options for the <code>lsdg</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94552"></a><a id="sthref984"></a><a id="CIHJDFJC"></a>Table 12-34 Options for the lsdg command</p>
<table class="cellalignment1546" title="Options for the lsdg command" summary="This table lists the flags for the lsdsk command, along with a description for each" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t41">Option</th>
<th class="cellalignment1547" id="r1c2-t41">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t41" headers="r1c1-t41">
<p>(none)</p>
</td>
<td class="cellalignment1543" headers="r2c1-t41 r1c2-t41">
<p>Displays the disk group attributes listed in <a href="#BABJBAEG">Table 12-35</a>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t41" headers="r1c1-t41">
<p><code>--discovery</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t41 r1c2-t41">
<p>Selects from <code>V$ASM_DISKGROUP</code>, or from <code>GV$ASM_DISKGROUP</code> if the -g flag is also specified. This option is always enabled if the Oracle ASM instance is version 10.1 or earlier. This flag is disregarded if <code>lsdg</code> is running in non-connected mode.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t41" headers="r1c1-t41">
<p><code>-g</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t41 r1c2-t41">
<p>Selects from <code>GV$ASM_DISKGROUP_STAT</code>, or from <code>GV$ASM_DISKGROUP</code> if the <code>--discovery</code> flag is also specified. <code>GV$ASM_DISKGROUP.INST_ID</code> is included in the output. The <code>REBAL</code> column of the <code>GV$ASM_OPERATION</code> view is also included in the output.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t41" headers="r1c1-t41">
<p><code>--suppressheader</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t41 r1c2-t41">
<p>Suppresses column headings.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t41" headers="r1c1-t41">
<p><code><span class="codeinlineitalic">pattern</span></code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t41 r1c2-t41">
<p>Returns only information about the specified disk group or disk groups that match the supplied pattern. See <a href="asm_util001.htm#CIHBFGCF">"Wildcard Characters"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><a href="#BABJBAEG">Table 12-35</a> shows the attributes for each disk group. To view the complete set of attributes for a disk group, use the <code>V$ASM_DISKGROUP_STAT</code> or <code>V$ASM_DISKGROUP</code> view.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN30171" href="../../server.112/e40402/dynviews_1027.htm#REFRN30171"><span class="italic">Oracle Database Reference</span></a> for descriptions of disk group information displayed in the <code>V$ASM_DISKGROUP</code> view</div>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94553"></a><a id="sthref985"></a><a id="BABJBAEG"></a>Table 12-35 Attribute descriptions for lsdg command output</p>
<table class="cellalignment1546" title="Attribute descriptions for lsdg command output" summary="Describes each field in the output of the lsdg command" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t43">Attribute Name</th>
<th class="cellalignment1547" id="r1c2-t43">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t43" headers="r1c1-t43">
<p>State</p>
</td>
<td class="cellalignment1543" headers="r2c1-t43 r1c2-t43">
<p>State of the disk group. Values include <code>BROKEN</code>, <code>CONNECTED</code>, <code>DISMOUNTED</code>, <code>MOUNTED</code>, <code>QUIESCING</code>, and <code>UNKNOWN</code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t43" headers="r1c1-t43">
<p>Type</p>
</td>
<td class="cellalignment1543" headers="r3c1-t43 r1c2-t43">
<p>Disk group redundancy (<code>NORMAL</code>, <code>HIGH</code>, <code>EXTERNAL</code>).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t43" headers="r1c1-t43">
<p>Rebal</p>
</td>
<td class="cellalignment1543" headers="r4c1-t43 r1c2-t43">
<p><code>Y</code> if a rebalance operation is in progress.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t43" headers="r1c1-t43">
<p>Sector</p>
</td>
<td class="cellalignment1543" headers="r5c1-t43 r1c2-t43">
<p>Sector size in bytes.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t43" headers="r1c1-t43">
<p>Block</p>
</td>
<td class="cellalignment1543" headers="r6c1-t43 r1c2-t43">
<p>Block size in bytes.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t43" headers="r1c1-t43">
<p>AU</p>
</td>
<td class="cellalignment1543" headers="r7c1-t43 r1c2-t43">
<p>Allocation unit size in bytes.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r8c1-t43" headers="r1c1-t43">
<p>Total_MB</p>
</td>
<td class="cellalignment1543" headers="r8c1-t43 r1c2-t43">
<p>Size of the disk group in megabytes.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r9c1-t43" headers="r1c1-t43">
<p>Free_MB</p>
</td>
<td class="cellalignment1543" headers="r9c1-t43 r1c2-t43">
<p>Free space in the disk group in megabytes, without regard to redundancy. From the <code>V$ASM_DISKGROUP</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r10c1-t43" headers="r1c1-t43">
<p>Req_mir_free_MB</p>
</td>
<td class="cellalignment1543" headers="r10c1-t43 r1c2-t43">
<p>Amount of space that must be available in the disk group to restore full redundancy after the most severe failure that can be tolerated by the disk group. This is the <code>REQUIRED_MIRROR_FREE_MB</code> column from the <code>V$ASM_DISKGROUP</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r11c1-t43" headers="r1c1-t43">
<p>Usable_file_MB</p>
</td>
<td class="cellalignment1543" headers="r11c1-t43 r1c2-t43">
<p>Amount of free space, adjusted for mirroring, that is available for new files. From the <code>V$ASM_DISKGROUP</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r12c1-t43" headers="r1c1-t43">
<p>Offline_disks</p>
</td>
<td class="cellalignment1543" headers="r12c1-t43 r1c2-t43">
<p>Number of offline disks in the disk group. Offline disks are eventually dropped.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r13c1-t43" headers="r1c1-t43">
<p>Voting_files</p>
</td>
<td class="cellalignment1543" headers="r13c1-t43 r1c2-t43">
<p>Specifies whether the disk group contains voting files (<code>Y</code> or <code>N</code>).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r14c1-t43" headers="r1c1-t43">
<p>Name</p>
</td>
<td class="cellalignment1543" headers="r14c1-t43 r1c2-t43">
<p>Disk group name.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p class="subhead2"><a id="OSTMG94554"></a>Example</p>
<p>The following example lists the attributes of the <code>data</code> disk group.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94555"></a><a id="sthref986"></a>Example 12-37 Using the ASMCMD lsdg command</p>
<pre>
ASMCMD [+] &gt; lsdg data
State    Type    Rebal  Sector  Block       AU  Total_MB  Free_MB  Req_mir_free_MB  Usable_file_MB
MOUNTED  NORMAL  N         512   4096  4194304     12288     8835             1117            3859

(continued)
Offline_disks  Voting_files  Name
            0             N  DATA
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHDCADB"></a><a id="OSTMG94556"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref987"></a><a id="sthref988"></a>lsdsk</h2>
<p class="subhead2"><a id="OSTMG94557"></a>Purpose</p>
<p>Lists Oracle ASM disks.</p>
<p class="subhead2"><a id="OSTMG94558"></a>Syntax and Description</p>
<br />
<code>lsdsk</code> [<code>--suppressheader</code>] [<code>-kptgMI</code>] [<code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code> ]<br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> [ <code>--member</code>|<code>--candidate</code>]<br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> [<code>--discovery</code>][<code>--statistics</code>]<code>[</code><code><span class="codeinlineitalic">pattern</span></code><code>]</code><br />
<p><a href="#CIHFDGJD">Table 12-36</a> lists the options for the <code>lsdsk</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94559"></a><a id="sthref989"></a><a id="CIHFDGJD"></a>Table 12-36 Options for the lsdsk command</p>
<table class="cellalignment1546" title="Options for the lsdsk command" summary="This table lists the flags for the lsdsk command, along with a description for each" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t44">Option</th>
<th class="cellalignment1547" id="r1c2-t44">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t44" headers="r1c1-t44">
<p>(none)</p>
</td>
<td class="cellalignment1543" headers="r2c1-t44 r1c2-t44">
<p>Displays the <code>PATH</code> column of the <code>V$ASM_DISK_STAT</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t44" headers="r1c1-t44">
<p><code>-k</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t44 r1c2-t44">
<p>Displays the <code>TOTAL_MB</code>, <code>FREE_MB</code>, <code>OS_MB</code>,<code>NAME</code>, <code>FAILGROUP</code>, <code>LIBRARY</code>, <code>LABEL</code>, <code>UDID</code>, <code>PRODUCT</code>, <code>REDUNDANCY</code>, and <code>PATH</code> columns of the <code>V$ASM_DISK</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t44" headers="r1c1-t44">
<p><code>--statistics</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t44 r1c2-t44">
<p>Displays the <code>READS</code>, <code>WRITES</code>, <code>READ_ERRS</code>, <code>WRITE_ERRS</code>, <code>READ_TIME</code>, <code>WRITE_TIME</code>, <code>BYTES_READ</code>, <code>BYTES_WRITTEN</code>, and the <code>PATH</code> columns of the <code>V$ASM_DISK</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t44" headers="r1c1-t44">
<p><code>-p</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t44 r1c2-t44">
<p>Displays the <code>GROUP_NUMBER</code>, <code>DISK_NUMBER</code>, <code>INCARNATION</code>, <code>MOUNT_STATUS</code>, <code>HEADER_STATUS</code>, <code>MODE_STATUS</code>, <code>STATE</code>, and the <code>PATH</code> columns of the <code>V$ASM_DISK</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t44" headers="r1c1-t44">
<p><code>-t</code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t44 r1c2-t44">
<p>Displays the <code>CREATE_DATE</code>, <code>MOUNT_DATE</code>, <code>REPAIR_TIMER</code>, and the <code>PATH</code> columns of the <code>V$ASM_DISK</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t44" headers="r1c1-t44">
<p><code>-g</code></p>
</td>
<td class="cellalignment1543" headers="r7c1-t44 r1c2-t44">
<p>Selects from <code>GV$ASM_DISK_STAT</code>, or from <code>GV$ASM_DISK</code> if the <code>--discovery</code> flag is also specified. <code>GV$ASM_DISK.INST_ID</code> is included in the output.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r8c1-t44" headers="r1c1-t44">
<p><code>--discovery</code></p>
</td>
<td class="cellalignment1543" headers="r8c1-t44 r1c2-t44">
<p>Selects from <code>V$ASM_DISK</code>, or from <code>GV$ASM_DISK</code> if the -g flag is also specified. This option is always enabled if the Oracle ASM instance is version 10.1 or earlier. This flag is disregarded if <code>lsdsk</code> is running in non-connected mode.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r9c1-t44" headers="r1c1-t44">
<p><code>--suppressheader</code></p>
</td>
<td class="cellalignment1543" headers="r9c1-t44 r1c2-t44">
<p>Suppresses column headings.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r10c1-t44" headers="r1c1-t44">
<p><code>-I</code></p>
</td>
<td class="cellalignment1543" headers="r10c1-t44 r1c2-t44">
<p>Scans disk headers for information rather than extracting the information from an Oracle ASM instance. This option forces non-connected mode.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r11c1-t44" headers="r1c1-t44">
<p><code>-G</code></p>
</td>
<td class="cellalignment1543" headers="r11c1-t44 r1c2-t44">
<p>Restricts results to only those disks that belong to the group specified by <code><span class="codeinlineitalic">diskgroup</span></code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r12c1-t44" headers="r1c1-t44">
<p><code>-M</code></p>
</td>
<td class="cellalignment1543" headers="r12c1-t44 r1c2-t44">
<p>Displays the disks that are visible to some but not all active instances. These are disks that, if included in a disk group, cause the mount of that disk group to fail on the instances where the disks are not visible.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r13c1-t44" headers="r1c1-t44">
<p><code>--candidate</code></p>
</td>
<td class="cellalignment1543" headers="r13c1-t44 r1c2-t44">
<p>Restricts results to only disks having membership status equal to <code>CANDIDATE</code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r14c1-t44" headers="r1c1-t44">
<p><code>--member</code></p>
</td>
<td class="cellalignment1543" headers="r14c1-t44 r1c2-t44">
<p>Restricts results to only disks having membership status equal to <code>MEMBER</code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r15c1-t44" headers="r1c1-t44">
<p><code><span class="codeinlineitalic">pattern</span></code></p>
</td>
<td class="cellalignment1543" headers="r15c1-t44 r1c2-t44">
<p>Returns only information about the specified disks that match the supplied pattern.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>The <code>lsdsk</code> command can run in connected or non-connected mode. The connected mode is always attempted first. The <code>-I</code> option forces non-connected mode.</p>
<ul>
<li>
<p>In connected mode, <code>lsdsk</code> uses the <code>V$ASM_DISK_STAT</code> and <code>V$ASM_DISK</code> dynamic views to retrieve disk information. The <code>V$ASM_DISK_STAT</code> view is used by default.</p>
</li>
<li>
<p>In non-connected mode, <code>lsdsk</code> scans disk headers to retrieve disk information. Some information is not available in this mode and some options are not valid combinations with this mode.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The non-connected mode is not supported on Windows.</div>
<p><code><span class="codeinlineitalic">pattern</span></code> restricts the output to only disks that match the pattern specified. Wild-card characters and slashes (<code>/</code> or <code>\</code>) can be part of the pattern. <code><span class="codeinlineitalic">pattern</span></code> should be specified as the last option for the command. For information about wildcards, see <a href="asm_util001.htm#CIHBFGCF">"Wildcard Characters"</a>.</p>
<p>The <code>-k</code>, <code>-p</code>, <code>-t</code>, and <code>--statistics</code> options modify how much information is displayed for each disk. If any combination of the options are specified, then the output shows the union of the attributes associated with each flag.</p>
<p class="subhead2"><a id="OSTMG94560"></a>Example</p>
<p>The following are examples of the <code>lsdsk</code> command. The first and second examples list information about disks in the <code>data</code> disk group. The third example lists information about candidate disks.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94561"></a><a id="sthref990"></a>Example 12-38 Using the ASMCMD lsdsk command</p>
<pre>
ASMCMD [+] &gt; lsdsk -t -G data
Create_Date  Mount_Date  Repair_Timer  Path
13-JUL-09    13-JUL-09   0             /devices/diska1
13-JUL-09    13-JUL-09   0             /devices/diska2
13-JUL-09    13-JUL-09   0             /devices/diska3
13-JUL-09    13-JUL-09   0             /devices/diskb1
13-JUL-09    13-JUL-09   0             /devices/diskb2
13-JUL-09    13-JUL-09   0             /devices/diskb3
13-JUL-09    13-JUL-09   0             /devices/diskc1
13-JUL-09    13-JUL-09   0             /devices/diskc2
...

ASMCMD [+] &gt; lsdsk -p -G data /devices/diska*
Group_Num  Disk_Num      Incarn  Mount_Stat  Header_Stat  Mode_Stat  State   Path
        1         0  2105454210  CACHED      MEMBER       ONLINE     NORMAL  /devices/diska1
        1         1  2105454199  CACHED      MEMBER       ONLINE     NORMAL  /devices/diska2
        1         2  2105454205  CACHED      MEMBER       ONLINE     NORMAL  /devices/diska3

ASMCMD [+] &gt; lsdsk --candidate -p
Group_Num  Disk_Num      Incarn  Mount_Stat  Header_Stat  Mode_Stat  State   Path
        0         5  2105454171  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diske1
        0        25  2105454191  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diske2
        0        18  2105454184  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diske3
        0        31  2105454197  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diskk1
        0        21  2105454187  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diskk2
        0        26  2105454192  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diskk3
        0        14  2105454180  CLOSED      CANDIDATE    ONLINE     NORMAL  /devices/diskl1
...
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHHAAFB"></a><a id="OSTMG94562"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><a id="sthref991"></a><a id="sthref992"></a>lsod</h2>
<p class="subhead2"><a id="OSTMG94563"></a>Purpose</p>
<p>Lists the open Oracle ASM disks.</p>
<p class="subhead2"><a id="OSTMG94564"></a>Syntax and Description</p>
<br />
<code>lsod</code> [<code>--suppressheader</code>] [<code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code>] [<code>--process</code> <code><span class="codeinlineitalic">process</span></code>] [<code><span class="codeinlineitalic">pattern</span></code>]<br />
<p><a href="#CIHBBDHG">Table 12-37</a> lists the syntax options for the <code>lsod</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94565"></a><a id="sthref993"></a><a id="CIHBBDHG"></a>Table 12-37 Options for the lsod command</p>
<table class="cellalignment1546" title="Options for the lsod command" summary="This table lists the options for the lsod command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t46">Option</th>
<th class="cellalignment1547" id="r1c2-t46">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t46" headers="r1c1-t46">
<p><code>--suppressheader</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t46 r1c2-t46">
<p>Suppresses column header information from the output.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t46" headers="r1c1-t46">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t46 r1c2-t46">
<p>Specifies the disk group that contains the open disks.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t46" headers="r1c1-t46">
<p><code>--process</code> <code><span class="codeinlineitalic">process</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t46 r1c2-t46">
<p>Specifies a pattern to filter the list of processes.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t46" headers="r1c1-t46">
<p><code><span class="codeinlineitalic">pattern</span></code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t46 r1c2-t46">
<p>Specifies a pattern to filter the list of disks.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>The rebalance operation (<code>RBAL</code>) opens a disk both globally and locally so the same disk may be listed twice in the output for the <code>RBAL</code> process.</p>
<p class="subhead2"><a id="OSTMG94566"></a>Example</p>
<p>The following are examples of the <code>lsod</code> command. The first example lists the open devices associated with the <code>data</code> disk group and the <code>LGWR</code> process. The second example lists the open devices associated with the <code>LGWR</code> process for disks that match the <code>diska</code> pattern.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94567"></a><a id="sthref994"></a>Example 12-39 Using the ASMCMD lsod command</p>
<pre>
ASMCMD [+] &gt; lsod -G data --process *LGWR*
Instance Process                  OSPID Path
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diska1 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diska2 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diska3 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diskb1 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diskb2 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diskb3 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diskd1 

ASMCMD [+] &gt; lsod --process *LGWR* *diska*
Instance Process                  OSPID Path
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diska1 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diska2 
1        oracle@dadvmn0652 (LGWR) 26593 /devices/diska3 
</pre></div>
<!-- class="example" -->
<p>For another example of the <code>lsod</code> command, see <a href="asm_util001.htm#CIHICGCD">Example 12-2</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BJEGIGDD"></a><a id="OSTMG94578"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref995"></a><a id="sthref996"></a>md_backup</h2>
<p class="subhead2"><a id="OSTMG94579"></a>Purpose</p>
<p>The <code>md_backup</code> command creates a backup file containing metadata for one or more disk groups.</p>
<p class="subhead2"><a id="OSTMG94580"></a>Syntax and Description</p>
<br />
<code>md_backup</code> <code><span class="codeinlineitalic">backup_file</span></code><br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-G</code> <code>'</code><code><span class="codeinlineitalic">diskgroup</span></code> [<code>,</code><code><span class="codeinlineitalic">diskgroup</span></code><code>,...]'</code>]<br />
<p><a href="#BJEJHJCA">Table 12-38</a> describes the options for the <code>md_backup</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94581"></a><a id="sthref997"></a><a id="BJEJHJCA"></a>Table 12-38 Options for the md_backup command</p>
<table class="cellalignment1546" title="Options for the md_backup command" summary="Command options for mdrestore." dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t47">Option</th>
<th class="cellalignment1547" id="r1c2-t47">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t47" headers="r1c1-t47">
<p><code><span class="codeinlineitalic">backup_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t47 r1c2-t47">
<p>Specifies the backup file in which you want to store the metadata.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t47" headers="r1c1-t47">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t47 r1c2-t47">
<p>Specifies the disk group name of the disk group that must be backed up</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>By default all the mounted disk groups are included in the backup file, which is saved in the current working directory if a path is not specified with the file name.</p>
<p>Oracle Automatic Storage Management Cluster File System (Oracle ACFS) volume and file system information is not backed up.</p>
<p class="subhead2"><a id="OSTMG94582"></a>Example</p>
<p>The first example shows the use of the backup command when run without the disk group option. This example backs up all the mounted disk groups and creates the backup image in the <code>/scratch/backup/alldgs20100422</code> file. The second example creates a backup of the <code>data</code> disk group. The metadata backup that this example creates is saved in the <code>/scratch/backup/data20100422</code> file.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94583"></a><a id="sthref998"></a>Example 12-40 Using the ASMCMD md_backup command</p>
<pre>
ASMCMD [+] &gt; md_backup /scratch/backup/alldgs20100422
Disk group metadata to be backed up: DATA
Disk group metadata to be backed up: FRA
Current alias directory path: ORCL/ONLINELOG
Current alias directory path: ORCL/PARAMETERFILE
Current alias directory path: ORCL
Current alias directory path: ASM
Current alias directory path: ORCL/DATAFILE
Current alias directory path: ORCL/CONTROLFILE
Current alias directory path: ASM/ASMPARAMETERFILE
Current alias directory path: ORCL/TEMPFILE
Current alias directory path: ORCL/ARCHIVELOG/2010_04_20
Current alias directory path: ORCL
Current alias directory path: ORCL/BACKUPSET/2010_04_21
Current alias directory path: ORCL/ARCHIVELOG/2010_04_19
Current alias directory path: ORCL/BACKUPSET/2010_04_22
Current alias directory path: ORCL/ONLINELOG
Current alias directory path: ORCL/BACKUPSET/2010_04_20
Current alias directory path: ORCL/ARCHIVELOG
Current alias directory path: ORCL/BACKUPSET
Current alias directory path: ORCL/ARCHIVELOG/2010_04_22
Current alias directory path: ORCL/DATAFILE
Current alias directory path: ORCL/CONTROLFILE
Current alias directory path: ORCL/ARCHIVELOG/2010_04_21

ASMCMD [+] &gt; md_backup /scratch/backup/data20100422 -G data
Disk group metadata to be backed up: DATA
Current alias directory path: ORCL/ONLINELOG
Current alias directory path: ASM
Current alias directory path: ORCL/CONTROLFILE
Current alias directory path: ASM/ASMPARAMETERFILE
Current alias directory path: ORCL/PARAMETERFILE
Current alias directory path: ORCL
Current alias directory path: ORCL/DATAFILE
Current alias directory path: ORCL/TEMPFILE
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BJEGCGEJ"></a><a id="OSTMG94584"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref999"></a><a id="sthref1000"></a>md_restore</h2>
<p class="subhead2"><a id="OSTMG94585"></a>Purpose</p>
<p>The <code>md_restore</code> command restores disk groups from a metadata backup file.</p>
<p class="subhead2"><a id="OSTMG94586"></a>Syntax and Description</p>
<br />
<code>md_restore</code> <code><span class="codeinlineitalic">backup_file</span></code> <code>[--silent]</code><br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</code><code>--full</code><code>|</code><code>--nodg</code><code>|</code><code>--newdg</code> <code>-o</code> <code>'</code><code><span class="codeinlineitalic">old_diskgroup</span></code><code>:</code><code><span class="codeinlineitalic">new_diskgroup</span></code> [<code>,</code>...]']<br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>[</code><code>-S</code> <code><span class="codeinlineitalic">sql_script_file</span></code><code>]</code> [<code>-G</code> <code>'</code><code><span class="codeinlineitalic">diskgroup</span></code> [<code>,</code><code><span class="codeinlineitalic">diskgroup</span></code>...]<code>'</code>]<br />
<p><a href="#BJEGGGDG">Table 12-39</a> describes the options for the <code>md_restore</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94587"></a><a id="sthref1001"></a><a id="BJEGGGDG"></a>Table 12-39 Options for the md_restore command</p>
<table class="cellalignment1546" title="Options for the md_restore command" summary="Command options for mdrestore." dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t48">Option</th>
<th class="cellalignment1547" id="r1c2-t48">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t48" headers="r1c1-t48">
<p><code><span class="codeinlineitalic">backup_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t48 r1c2-t48">
<p>Reads the metadata information from <code><span class="codeinlineitalic">backup_file</span></code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t48" headers="r1c1-t48">
<p><code>--silent</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t48 r1c2-t48">
<p>Ignore errors. Typically, if <code>md_restore</code> encounters an error, it stops. Specifying this flag ignores any errors.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t48" headers="r1c1-t48">
<p><code>--full</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t48 r1c2-t48">
<p>Specifies to create a disk group and restore metadata.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t48" headers="r1c1-t48">
<p><code>--nodg</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t48 r1c2-t48">
<p>Specifies to restore metadata only.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t48" headers="r1c1-t48">
<p><code>--newdg</code> <code>-o</code> <code><span class="codeinlineitalic">old_diskgroup</span></code><code>:</code><code><span class="codeinlineitalic">new_diskgroup</span></code>]</p>
</td>
<td class="cellalignment1543" headers="r6c1-t48 r1c2-t48">
<p>Specifies to create a disk group with a different name when restoring metadata. The <code>-o</code> option is required with <code>--newdg</code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r7c1-t48" headers="r1c1-t48">
<p><code>-S</code> <code><span class="codeinlineitalic">sql_script_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r7c1-t48 r1c2-t48">
<p>Write SQL commands to the specified SQL script file instead of executing the commands.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r8c1-t48" headers="r1c1-t48">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r8c1-t48 r1c2-t48">
<p>Select the disk groups to be restored. If no disk groups are defined, then all disk groups are restored.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p class="subhead2"><a id="OSTMG94588"></a>Example</p>
<p>The first example restores the disk group <code>data</code> from the backup script and creates a copy. The second example takes an existing disk group <code>data</code> and restores its metadata. The third example restores disk group <code>data</code> completely but the new disk group that is created is named <code>data2</code>. The fourth example restores from the backup file after applying the overrides defined in the <code>override.sql</code> script file.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94589"></a><a id="sthref1002"></a>Example 12-41 Using the ASMCMD md_restore command</p>
<pre>
ASMCMD [+] &gt; md_restore &ndash;-full &ndash;G data &ndash;-silent /scratch/backup/alldgs20100422

ASMCMD [+] &gt; md_restore &ndash;-nodg &ndash;G data &ndash;-silent /scratch/backup/alldgs20100422

ASMCMD [+] &gt; md_restore &ndash;-newdg -o 'data:data2' --silent /scratch/backup/data20100422

ASMCMD [+] &gt; md_restore -S override.sql --silent /scratch/backup/data20100422
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHGEBEI"></a><a id="OSTMG94590"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1003"></a><a id="sthref1004"></a>mkdg</h2>
<p class="subhead2"><a id="OSTMG94591"></a>Purpose</p>
<p>Creates a disk group based on an XML configuration file.</p>
<p class="subhead2"><a id="OSTMG94592"></a>Syntax and Description</p>
<br />
<code>mkdg</code> { <code><span class="codeinlineitalic">config_file</span></code><code>.xml</code> | <code>'</code><code><span class="codeinlineitalic">contents_of_xml_file</span></code><code>'</code> }<br />
<p><a href="#CIHBEEEI">Table 12-40</a> lists the syntax options for the <code>mkdg</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94593"></a><a id="sthref1005"></a><a id="CIHBEEEI"></a>Table 12-40 Options for the mkdg command</p>
<table class="cellalignment1546" title="Options for the mkdg command " summary="mkdg ASMCMD options" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t49">Option</th>
<th class="cellalignment1547" id="r1c2-t49">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t49" headers="r1c1-t49">
<p><code><span class="codeinlineitalic">config_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t49 r1c2-t49">
<p>Name of the XML file that contains the configuration for the new disk group. <code>mkdg</code> searches for the XML file in the directory where ASMCMD was started unless a path is specified.</p>
<p>For examples of the valid tags and XML configuration file, see <a href="#CIHBBAII">Example 12-42</a> and <a href="#CIHCDIII">Example 12-43</a>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t49" headers="r1c1-t49">
<p><code><span class="codeinlineitalic">contents_of_xml_file</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t49 r1c2-t49">
<p>The XML script enclosed in single quotations.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>mkdg</code> creates a new disk group with an XML configuration file that specifies the name of the disk group, redundancy, attributes, and paths of the disks that form the disk group. Redundancy is an optional parameter; the default is normal redundancy. For some types of redundancy, disks are required to be gathered into failure groups. In the case that failure groups are not specified for a disk group, each disk in the disk group belongs to its own failure group.</p>
<p>Note that <code>mkdg</code> only mounts a disk group on the local node.</p>
<p>It is possible to set some disk group attribute values during disk group creation. Some attributes, such as <code>AU_SIZE</code> and <code>SECTOR_SIZE</code>, can be set only during disk group creation. For more information about disk groups attributes, refer to <a href="asmdiskgrps.htm#CHDIABGJ">"Disk Group Attributes"</a>.</p>
<p>The default disk group compatibility settings are <code>10.1</code> for Oracle ASM compatibility, <code>10.1</code> for database compatibility, and no value for Oracle ADVM compatibility. For information about disk group compatibility attributes, see <a href="asmdiskgrps.htm#CHDDIGBJ">"Disk Group Compatibility"</a>.</p>
<p><a href="#CIHBBAII">Example 12-42</a> shows the basic structure and the valid tags with their respective attributes for the <code>mkdg</code> XML configuration file.</p>
<div class="example">
<p class="titleinexample"><a id="CIHBBAII"></a><a id="OSTMG94594"></a>Example 12-42 Tags for mkdg XML configuration file</p>
<pre>
&lt;dg&gt;  disk group
      name         disk group name
      redundancy   normal, external, high
 
&lt;fg&gt;  failure group
      name         failure group name
&lt;/fg&gt;

&lt;dsk&gt; disk
      name         disk name
      string       disk path
      size         size of the disk to add
      force        true specifies to use the force option
&lt;/dsk&gt;

&lt;a&gt;   attribute
      name         attribute name
      value        attribute value
&lt;/a&gt;

&lt;/dg&gt;
</pre></div>
<!-- class="example" -->
<p>For information about altering a disk group with ASMCMD <code>chdg</code>, see <a href="#CIHHACDC">"chdg"</a>. For information about creating a disk group, see <a href="asmdiskgrps.htm#i1007979">"Creating Disk Groups"</a>.</p>
<p class="subhead2"><a id="OSTMG94595"></a>Example</p>
<p>The following is an example of an XML configuration file for <code>mkdg</code>. The configuration file creates a disk group named <code>data</code> with <code>normal</code> redundancy. Two failure groups, <code>fg1</code> and <code>fg2</code>, are created, each with two disks identified by associated disk strings. The disk group compatibility attributes are all set to <code>11.2</code>.</p>
<div class="example">
<p class="titleinexample"><a id="CIHCDIII"></a><a id="OSTMG94596"></a>Example 12-43 mkdg sample XML configuration file</p>
<pre>
&lt;dg name="data" redundancy="normal"&gt;
  &lt;fg name="fg1"&gt;
    &lt;dsk string="/dev/disk1"/&gt;
    &lt;dsk string="/dev/disk2"/&gt;
  &lt;/fg&gt;
  &lt;fg name="fg2"&gt;
    &lt;dsk string="/dev/disk3"/&gt;
    &lt;dsk string="/dev/disk4"/&gt;
  &lt;/fg&gt;
  &lt;a name="compatible.asm" value="11.2"/&gt;
  &lt;a name="compatible.rdbms" value="11.2"/&gt;
  &lt;a name="compatible.advm" value="11.2"/&gt;
&lt;/dg&gt;
</pre></div>
<!-- class="example" -->
<p>The following are examples of the <code>mkdg</code> command. The first example runs <code>mkdg</code> with an XML configuration file in the directory where ASMCMD was started. The second example runs <code>mkdg</code> using information on the command line.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94597"></a><a id="sthref1006"></a>Example 12-44 Using the ASMCMD mkdg command</p>
<pre>
ASMCMD [+] &gt; mkdg data_config.xml

ASMCMD [+] &gt; mkdg '&lt;dg name="data"&gt;&lt;dsk string="/dev/disk*"/&gt;&lt;/dg&gt;'
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHFBEHH"></a><a id="OSTMG94598"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1007"></a><a id="sthref1008"></a>mount</h2>
<p class="subhead2"><a id="OSTMG94599"></a>Purpose</p>
<p>Mounts a disk group.</p>
<p class="subhead2"><a id="OSTMG94600"></a>Syntax and Description</p>
<br />
<code>mount</code> [<code>--restrict</code>] { [<code>-a</code>] | [<code>-f</code>] <code><span class="codeinlineitalic">diskgroup</span></code>[ <code><span class="codeinlineitalic">diskgroup</span></code> ...] }<br />
<p><a href="#CIHHBIAG">Table 12-41</a> lists the syntax options for the <code>mount</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94601"></a><a id="sthref1009"></a><a id="CIHHBIAG"></a>Table 12-41 Options for the mount command</p>
<table class="cellalignment1546" title="Options for the mount command " summary="mount ASMCMD options" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t50">Option</th>
<th class="cellalignment1547" id="r1c2-t50">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t50" headers="r1c1-t50">
<p><code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t50 r1c2-t50">
<p>Name of the disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t50" headers="r1c1-t50">
<p><code>-a</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t50 r1c2-t50">
<p>Mounts all disk groups.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t50" headers="r1c1-t50">
<p><code>--restrict</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t50 r1c2-t50">
<p>Mounts in restricted mode.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t50" headers="r1c1-t50">
<p><code>-f</code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t50 r1c2-t50">
<p>Forces the mount operation.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>This operation mounts one or more disk groups. A disk group can be mounted with or without force or restricted options. For more information about mounting disk groups, see <a href="asmdiskgrps.htm#i1019481">"Mounting and Dismounting Disk Groups"</a>.</p>
<p class="subhead2"><a id="OSTMG94602"></a>Example</p>
<p>The following are examples of the <code>mount</code> command showing the use of the force, restrict, and all options.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94603"></a><a id="sthref1010"></a>Example 12-45 Using the ASMCMD mount command</p>
<pre>
ASMCMD [+] &gt; mount -f data

ASMCMD [+] &gt; mount --restrict data

ASMCMD [+] &gt; mount -a
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHIDCJG"></a><a id="OSTMG94604"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1011"></a><a id="sthref1012"></a>offline</h2>
<p class="subhead2"><a id="OSTMG94605"></a>Purpose</p>
<p>Offline disks or failure groups that belong to a disk group.</p>
<p class="subhead2"><a id="OSTMG94606"></a>Syntax and Description</p>
<br />
<code>offline</code> <code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code><br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> { <code>-F</code> <code><span class="codeinlineitalic">failgroup</span></code> |<code>-D</code> <code><span class="codeinlineitalic">disk</span></code>}<br />
<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> [<code>-t</code> {<code><span class="codeinlineitalic">minutes</span></code> | <code><span class="codeinlineitalic">hours</span></code>}]<br />
<p><a href="#CIHJACIJ">Table 12-42</a> lists the syntax options for the <code>offline</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94607"></a><a id="sthref1013"></a><a id="CIHJACIJ"></a>Table 12-42 Options for the offline command</p>
<table class="cellalignment1546" title="Options for the offline command" summary="This table lists the options for the offline command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t51">Option</th>
<th class="cellalignment1547" id="r1c2-t51">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t51" headers="r1c1-t51">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t51 r1c2-t51">
<p>Disk group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t51" headers="r1c1-t51">
<p><code>-F</code> <code><span class="codeinlineitalic">failgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t51 r1c2-t51">
<p>Failure group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t51" headers="r1c1-t51">
<p><code>-D</code> <code><span class="codeinlineitalic">disk</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t51 r1c2-t51">
<p>Specifies a single disk name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t51" headers="r1c1-t51">
<p><code>-t</code> <code><span class="codeinlineitalic">minutes</span></code> | <code><span class="codeinlineitalic">hours</span></code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t51 r1c2-t51">
<p>Specifies the time before the specified disk is dropped as <code><span class="codeinlineitalic">n</span></code><code>m</code> or <code><span class="codeinlineitalic">n</span></code><code>h</code>, where <code>m</code> specifies minutes and <code>h</code> specifies hours. For example, <code>120m</code> or <code>2h</code>.The default unit is hours.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>When a failure group is specified, this implies all the disks that belong to it should be offlined.</p>
<p class="subhead2"><a id="OSTMG94608"></a>Example</p>
<p>The following are examples of the <code>offline</code> command. The first example offlines the <code>failgroup1</code> failure group of the <code>data</code> disk group. The second example offlines the <code>data_0001</code> disk of the <code>data</code> disk group with a time of <code>1.5</code> hours before the disk is dropped.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94609"></a><a id="sthref1014"></a>Example 12-46 Using the ASMCMD offline command</p>
<pre>
ASMCMD [+] &gt; offline -G data -F failgroup1

ASMCMD [+] &gt; offline -G data -D data_0001 -t 1.5h
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHEACHD"></a><a id="OSTMG94610"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1015"></a><a id="sthref1016"></a>online</h2>
<p class="subhead2"><a id="OSTMG94611"></a>Purpose</p>
<p>Online all disks, a single disk, or a failure group that belongs to a disk group.</p>
<p class="subhead2"><a id="OSTMG94612"></a>Syntax and Description</p>
<br />
<code>online</code> <code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code> { <code>-a</code> | <code>-F</code> <code><span class="codeinlineitalic">failgroup</span></code> |<code>-D</code> <code><span class="codeinlineitalic">disk</span></code>} [<code>-w</code>]<br />
<p><a href="#CIHHGHGG">Table 12-43</a> lists the syntax options for the <code>online</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94613"></a><a id="sthref1017"></a><a id="CIHHGHGG"></a>Table 12-43 Options for the online command</p>
<table class="cellalignment1546" title="Options for the online command" summary="This table lists the options for the offline command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t52">Option</th>
<th class="cellalignment1547" id="r1c2-t52">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t52" headers="r1c1-t52">
<p><code>-a</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t52 r1c2-t52">
<p>Online all offline disks in the disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t52" headers="r1c1-t52">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t52 r1c2-t52">
<p>Disk group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t52" headers="r1c1-t52">
<p><code>-F</code> <code><span class="codeinlineitalic">failgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t52 r1c2-t52">
<p>Failure group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t52" headers="r1c1-t52">
<p><code>-D</code> <code><span class="codeinlineitalic">disk</span></code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t52 r1c2-t52">
<p>Disk name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t52" headers="r1c1-t52">
<p><code>-w</code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t52 r1c2-t52">
<p>Wait option. Causes ASMCMD to wait for the disk group to be rebalanced before returning control to the user. The default is not waiting.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>When a failure group is specified, this implies all the disks that belong to it should be onlined.</p>
<p class="subhead2"><a id="OSTMG94614"></a>Example</p>
<p>The following are examples of the <code>online</code> command. The first example onlines all disks in the <code>failgroup1</code> failure group of the <code>data</code> disk group with the <code>wait</code> option enabled. The second example onlines the <code>data_0001</code> disk in the <code>data</code> disk group.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94615"></a><a id="sthref1018"></a>Example 12-47 Using the ASMCMD online command</p>
<pre>
ASMCMD [+] &gt; online -G data -F failgroup1 -w 

ASMCMD [+] &gt; online -G data -D data_0001
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHIJGHI"></a><a id="OSTMG94616"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1019"></a><a id="sthref1020"></a>rebal</h2>
<p class="subhead2"><a id="OSTMG94617"></a>Purpose</p>
<p>Rebalances a disk group.</p>
<p class="subhead2"><a id="OSTMG94618"></a>Syntax and Description</p>
<br />
<code>rebal</code> [<code>--power</code> <code><span class="codeinlineitalic">power</span></code>] [<code>-w</code>] <code><span class="codeinlineitalic">diskgroup</span></code><br />
<p><a href="#CIHIBJBJ">Table 12-44</a> lists the syntax options for the <code>rebal</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94619"></a><a id="sthref1021"></a><a id="CIHIBJBJ"></a>Table 12-44 Options for the rebal command</p>
<table class="cellalignment1546" title="Options for the rebal command" summary="This table lists the options for the rebal command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t53">Option</th>
<th class="cellalignment1547" id="r1c2-t53">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t53" headers="r1c1-t53">
<p><code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t53 r1c2-t53">
<p>Disk group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t53" headers="r1c1-t53">
<p><code>--power</code> <code><span class="codeinlineitalic">power</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t53 r1c2-t53">
<p>Power setting.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t53" headers="r1c1-t53">
<p><code>-w</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t53 r1c2-t53">
<p>Wait option. Causes ASMCMD to wait for the disk group to be rebalanced before returning control to the user. The default is not waiting.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>The power level can be set to the same values as the <code>ASM_POWER_LIMIT</code> initialization parameter. A value of <code>0</code> disables rebalancing. If the rebalance power is not specified, the value defaults to the setting of the <code>ASM_POWER_LIMIT</code> initialization parameter. For information about the power level, see <a href="asminst.htm#BHCDHJFA">"ASM_POWER_LIMIT"</a> and <a href="asmdiskgrps.htm#i1027260">"Tuning Rebalance Operations"</a>.</p>
<p>You can determine if a rebalance operation is occurring with the ASMCMD <code>lsop</code> command. See <a href="asm_util002.htm#CIHBBICE">"lsop"</a>. For more information about rebalancing a disk group, see <a href="asmdiskgrps.htm#BABCCEAB">"Manually Rebalancing Disk Groups"</a>.</p>
<p class="subhead2"><a id="OSTMG94620"></a>Example</p>
<p>The following is an example of the <code>rebal</code> command that rebalances the <code>fra</code> disk group with a power level set to <code>4</code>.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94621"></a><a id="sthref1022"></a>Example 12-48 Using the ASMCMD rebal command</p>
<pre>
ASMCMD [+] &gt; rebal --power 4 fra

ASMCMD [+] &gt; lsop
Group_Name  Dsk_Num  State  Power
FRA         REBAL    RUN    4
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHBAFAG"></a><a id="OSTMG94622"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1023"></a><a id="sthref1024"></a>remap</h2>
<p class="subhead2"><a id="OSTMG94623"></a>Purpose</p>
<p>Marks a range of blocks as unusable on the disk and relocates any data allocated in that range.</p>
<p class="subhead2"><a id="OSTMG94624"></a>Syntax and Description</p>
<p><code>remap</code> <code><span class="codeinlineitalic">diskgroup</span></code> <code><span class="codeinlineitalic">disk</span></code> <code><span class="codeinlineitalic">block_range</span></code></p>
<p><a href="#CIHFACCI">Table 12-45</a> lists the syntax options for the <code>remap</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94625"></a><a id="sthref1025"></a><a id="CIHFACCI"></a>Table 12-45 Options for the remap command</p>
<table class="cellalignment1546" title="Options for the remap command" summary="This table lists the options for the remap command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t54">Option</th>
<th class="cellalignment1547" id="r1c2-t54">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t54" headers="r1c1-t54">
<p><code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t54 r1c2-t54">
<p>Disk group name in which a disk must have data relocated.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t54" headers="r1c1-t54">
<p><code><span class="codeinlineitalic">disk</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t54 r1c2-t54">
<p>Name of the disk that must have data relocated. The name must match the <code>NAME</code> column in the <code>V$ASM_DISK</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t54" headers="r1c1-t54">
<p><code><span class="codeinlineitalic">block_range</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t54 r1c2-t54">
<p>Range of physical blocks to relocate in the format <code><span class="codeinlineitalic">start_range_number</span></code><code>-</code><code><span class="codeinlineitalic">end_range_number</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>The <code>remap</code> command only relocates blocks. It does not correct or repair blocks that contain corrupted contents. The command uses a physical block size based on the <code>SECTOR_SIZE</code> disk group attribute.</p>
<p class="subhead2"><a id="OSTMG94626"></a>Examples</p>
<p>The first example remaps blocks <code>5000</code> through <code>5999</code> for disk <code>DATA_0001</code> in disk group <code>DATA</code>. The second example remaps blocks <code>6230</code> through <code>6339</code> for disk <code>FRA_0002</code> in disk group <code>FRA</code></p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94627"></a><a id="sthref1026"></a>Example 12-49 Using the ASMCMD remap command</p>
<pre>
ASMCMD [+] &gt; remap DATA DATA_0001 5000-5999

ASMCMD [+] &gt; remap FRA FRA_0002 6230-6339
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHHBIJH"></a><a id="OSTMG94628"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1027"></a><a id="sthref1028"></a>setattr</h2>
<p class="subhead2"><a id="OSTMG94629"></a>Purpose</p>
<p>Sets the attributes for an Oracle ASM disk group.</p>
<p class="subhead2"><a id="OSTMG94630"></a>Syntax and Description</p>
<br />
<code>setattr</code> <code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code> <code><span class="codeinlineitalic">attribute_name</span></code> <code><span class="codeinlineitalic">attribute_value</span></code><br />
<p><a href="#CIHJDIDC">Table 12-46</a> lists the syntax options for the <code>setattr</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94631"></a><a id="sthref1029"></a><a id="CIHJDIDC"></a>Table 12-46 Options for the setattr command</p>
<table class="cellalignment1546" title="Options for the setattr command" summary="This table lists the options for the setattr command, along with a description" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t55">Option</th>
<th class="cellalignment1547" id="r1c2-t55">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t55" headers="r1c1-t55">
<p><code>-G</code> <code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t55 r1c2-t55">
<p>Disk group name.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t55" headers="r1c1-t55">
<p><code><span class="codeinlineitalic">attribute_name</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t55 r1c2-t55">
<p>Name of the attribute.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t55" headers="r1c1-t55">
<p><code><span class="codeinlineitalic">attribute_value</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t55 r1c2-t55">
<p>Value of the attribute.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p>The <code>COMPATIBLE.ASM</code> attribute must be advanced before advancing other disk group compatibility attributes and its value must be greater than or equal to the value of other disk group compatibility attributes.</p>
<p>For information about disk group attributes, see <a href="asmdiskgrps.htm#CHDIABGJ">"Disk Group Attributes"</a>.</p>
<p class="subhead2"><a id="OSTMG94632"></a>Example</p>
<p>The following are examples of the <code>setattr</code> command. The first example sets the disk group attribute <code>COMPATIBLE.ASM</code> to <code>11.2</code> for the <code>data</code> disk group. The second example sets the disk group attribute <code>COMPATIBLE.RDBMS</code> to <code>11.2</code> for the <code>data</code> disk group.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94633"></a><a id="sthref1030"></a>Example 12-50 Using the ASMCMD setattr command</p>
<pre>
ASMCMD [+] &gt; setattr -G data compatible.asm 11.2.0.0.0

ASMCMD [+] &gt; setattr -G data compatible.rdbms 11.2.0.0.0
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="CIHJCGGH"></a><a id="OSTMG94634"></a>
<div class="sect2">
<h2 class="sect2"><a id="sthref1031"></a><a id="sthref1032"></a>umount</h2>
<p class="subhead2"><a id="OSTMG94635"></a>Purpose</p>
<p>Dismounts a disk group.</p>
<p class="subhead2"><a id="OSTMG94636"></a>Syntax and Description</p>
<br />
<code>umount</code> { <code>-a</code> | [<code>-f</code>] <code><span class="codeinlineitalic">diskgroup</span></code> }<br />
<p><a href="#CIHHHFJJ">Table 12-47</a> lists the syntax options for the <code>umount</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94637"></a><a id="sthref1033"></a><a id="CIHHHFJJ"></a>Table 12-47 Options for the umount command</p>
<table class="cellalignment1546" title="Options for the umount command " summary="umount ASMCMD options" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t56">Option</th>
<th class="cellalignment1547" id="r1c2-t56">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t56" headers="r1c1-t56">
<p><code><span class="codeinlineitalic">diskgroup</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t56 r1c2-t56">
<p>Name of the disk group.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t56" headers="r1c1-t56">
<p><code>-a</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t56 r1c2-t56">
<p>Dismounts all mounted disk groups. These disk groups are listed in the output of the <code>V$ASM_DISKGROUP</code> view.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t56" headers="r1c1-t56">
<p><code>-f</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t56 r1c2-t56">
<p>Forces the dismount operation.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p class="subhead2"><a id="OSTMG94638"></a>Example</p>
<p>The following are examples of the <code>umount</code> command. The first example dismounts all disk groups mounted on the Oracle ASM instance. The second example forces the dismount of the <code>data</code> disk group.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94639"></a><a id="sthref1034"></a>Example 12-51 Using the ASMCMD umount command</p>
<pre>
ASMCMD [+] &gt; umount -a

ASMCMD [+] &gt; umount -f data
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1536">
<tr>
<td class="cellalignment1543">
<table class="cellalignment1541">
<tr>
<td class="cellalignment1540"><a href="asm_util003.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1540"><a href="asm_util005.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1545">
<table class="cellalignment1539">
<tr>
<td class="cellalignment1540"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1540"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1540"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1540"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1540"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1540"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
