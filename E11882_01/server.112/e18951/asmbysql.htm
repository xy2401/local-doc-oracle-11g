<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Creating Database Files in Oracle ASM Using SQL*Plus</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 047" />
<meta name="dcterms.created" content="2012-02-03T20:20:23Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide" />
<meta name="dcterms.identifier" content="E18951-03" />
<meta name="dcterms.isVersionOf" content="OSTMG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="ostmg_gloss.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="asmfs_util010.htm" title="Previous" type="text/html" />
<link rel="Next" href="asmfs_extra.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e18951.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">37/40</span> <!-- End Header --><a id="CIHGHFJB"></a><a id="OSTMG1390"></a>
<h1 class="appendix"><span class="secnum">A</span> Creating Database Files in Oracle ASM Using SQL*Plus</h1>
<p>This appendix describes how to deploy Oracle Automatic Storage Management (Oracle ASM) using SQL*Plus under the following topics:</p>
<ul>
<li>
<p><a href="#i1026111">Creating a Database that Uses Oracle ASM</a></p>
</li>
<li>
<p><a href="#i1025250">Creating Tablespaces in Oracle ASM</a></p>
</li>
<li>
<p><a href="#i1025965">Creating Redo Logs in Oracle ASM</a></p>
</li>
<li>
<p><a href="#i1025603">Creating Control Files in Oracle ASM</a></p>
</li>
<li>
<p><a href="#i1025971">Creating Archive Log Files in Oracle ASM</a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN003" href="../../server.112/e25494/omf.htm#ADMIN003"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about using Oracle Managed Files (OMF)</div>
</li>
</ul>
<a id="i1026111"></a><a id="OSTMG13940"></a>
<div class="sect1">
<h2 class="sect1">Creating a Database that Uses Oracle ASM</h2>
<p><a id="sthref1514"></a><a id="sthref1515"></a>The recommended method of creating your database is to use Database Configuration Assistant (DBCA). However, if you create your database manually using the <code>CREATE DATABASE</code> statement, then Oracle ASM enables you to create a database and all of its underlying files with a minimum of input.</p>
<p>The following section describes an example of using the <code>CREATE DATABASE</code> statement, where database files are created and managed automatically by Oracle ASM.</p>
<a id="OSTMG95281"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1516"></a>
<h3 class="sect2">Creating a Database that Uses Oracle ASM: Example</h3>
<p><a id="sthref1517"></a>This example creates a database with the following Oracle ASM files:</p>
<ul>
<li>
<p>A <code>SYSTEM</code> tablespace data file in disk group <code>data</code>.</p>
</li>
<li>
<p>A <code>SYSAUX</code> tablespace data file in disk group <code>data</code>. The tablespace is locally managed with automatic segment-space management.</p>
</li>
<li>
<p>A multiplexed online redo log with two online log groups, one member of each in <code>data</code> and <code>fra</code> (fast recovery area).</p>
</li>
<li>
<p>If automatic undo management mode is enabled, then an undo tablespace data file in directory <code>data</code>.</p>
</li>
<li>
<p>If you do not specify a value for the <code>CONTROL_FILES</code> initialization parameter, then two control files, one in <code>data</code> and another in <code>fra</code> (fast recovery area). The control file in <code>data</code> is the primary control file.</p>
</li>
</ul>
<p>The following initialization parameter settings are included in the initialization parameter file:</p>
<pre>
DB_CREATE_FILE_DEST = +data
DB_RECOVERY_FILE_DEST = +fra
DB_RECOVERY_FILE_DEST_SIZE = 10G
</pre>
<p>The following statement is run at the SQL prompt:</p>
<pre>
CREATE DATABASE orcl;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1025250"></a><a id="OSTMG13950"></a>
<div class="sect1">
<h2 class="sect1">Creating Tablespaces in Oracle ASM</h2>
<p><a id="sthref1518"></a><a id="sthref1519"></a>When Oracle ASM creates a data file for a permanent tablespace (or a temporary file for a temporary tablespace), the data file is set to auto-extensible with an unlimited maximum size and 100 MB default size. You can use the <code>AUTOEXTEND</code> clause to override this default extensibility and the <code>SIZE</code> clause to override the default size.</p>
<p>Oracle ASM applies attributes to the data file, as specified in the system default template for a data file as shown in the table in <a href="asmfiles.htm#i1019485">"Managing Disk Group Templates"</a>. You can also create and specify your own template.</p>
<p>Files in a tablespace might be in both Oracle ASM files and non-Oracle ASM files due to the tablespace history. RMAN commands enable non-Oracle ASM files to be relocated to an Oracle ASM disk group and enable Oracle ASM files to be relocated as non-Oracle ASM files.</p>
<p>For example, if there is a disk group named <code>data</code>, then you can create a tablespace <code>tblspace</code> in that disk group with the following SQL statement:</p>
<pre>
CREATE TABLESPACE tblspace DATAFILE +data;
</pre>
<p>The following example illustrates the usage of Oracle ASM with defaults. This example enables Oracle ASM to create and manage the tablespace data file for you, using Oracle supplied defaults that are adequate for most situations.</p>
<p>Assume the following initialization parameter setting:</p>
<pre>
DB_CREATE_FILE_DEST = +data
</pre>
<p>The following statement creates the tablespace and its data file:</p>
<pre>
CREATE TABLESPACE tblspace;
</pre></div>
<!-- class="sect1" -->
<a id="i1025965"></a><a id="OSTMG13960"></a>
<div class="sect1">
<h2 class="sect1">Creating Redo Logs in Oracle ASM</h2>
<p><a id="sthref1520"></a><a id="sthref1521"></a>Online redo logs can be created in multiple disk groups, either implicitly in an initialization parameter file or explicitly in an <code>ALTER DATABASE...ADD LOGFILE</code> statement. Each online log should have one log member in multiple disk groups. The filenames for log file members are automatically generated. All partially created redo log files, created because of a system error, are automatically deleted.</p>
<p>For example, if there are disk groups named <code>data1</code> and <code>data2</code>, you can create a log file with a member in each disk group with the following SQL statement:</p>
<pre>
ALTER DATABASE ADD LOGFILE (+data1,+data2);
</pre>
<p>The following example creates a log file with a member in each of the disk groups <code>data1</code> and <code>data2</code>. The following parameter settings are included in the initialization parameter file:</p>
<pre>
DB_CREATE_ONLINE_LOG_DEST_1 = +data1
DB_CREATE_ONLINE_LOG_DEST_2 = +data2
</pre>
<p>The following statement is run at the SQL prompt:</p>
<pre>
ALTER DATABASE ADD LOGFILE;
</pre></div>
<!-- class="sect1" -->
<a id="i1025603"></a><a id="OSTMG13970"></a>
<div class="sect1">
<h2 class="sect1">Creating Control Files in Oracle ASM</h2>
<p><a id="sthref1522"></a><a id="sthref1523"></a>Control files can be explicitly created in multiple disk groups. The filenames for control files are automatically generated.</p>
<p>If you must specify a control file by name, then you can use alias filenames to reference Oracle ASM files and use easy to understand names. Using aliases in the specification of a control file during its creation enables you to later refer to the control file with a user-specified name. An alias can also be specified as a control file name in the <code>CONTROL_FILES</code> initialization parameter.</p>
<p>When creating a control file, data files and log files that are stored in Oracle ASM disk groups should be given to the <code>CREATE</code> <code>CONTROLFILE</code> command using the file reference form of their Oracle ASM filenames. However, the use of the <code>RESETLOGS</code> option requires the use of a file creation form for the specification of the log files.</p>
<a id="OSTMG95282"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1524"></a>
<h3 class="sect2">Creating Control Files in Oracle ASM: Example 1</h3>
<p><a id="sthref1525"></a>The following <code>CREATE</code> <code>CONTROLFILE</code> statement is generated by an <code>ALTER</code> <code>DATABASE</code> <code>BACKUP</code> <code>CONTROLFILE</code> <code>TO</code> <code>TRACE</code> command for a database with data files and log files created on disk groups <code>data</code> and <code>fra</code>:</p>
<pre>
CREATE CONTROLFILE REUSE DATABASE "ORCL" NORESETLOGS  ARCHIVELOG
    MAXLOGFILES 16
    MAXLOGMEMBERS 3
    MAXDATAFILES 100
    MAXINSTANCES 8
    MAXLOGHISTORY 292
LOGFILE
  GROUP 1 (
    '+DATA/orcl/onlinelog/group_1.261.685366203',
    '+FRA/orcl/onlinelog/group_1.257.685366205'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 2 (
    '+DATA/orcl/onlinelog/group_2.262.685366207',
    '+FRA/orcl/onlinelog/group_2.258.685366211'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 3 (
    '+DATA/orcl/onlinelog/group_3.263.685366213',
    '+FRA/orcl/onlinelog/group_3.259.685366215'
  ) SIZE 50M BLOCKSIZE 512
-- STANDBY LOGFILE
DATAFILE
  '+DATA/orcl/datafile/system.256.685366089',
  '+DATA/orcl/datafile/sysaux.257.685366089',
  '+DATA/orcl/datafile/undotbs1.258.685366091',
  '+DATA/orcl/datafile/users.259.685366091'
CHARACTER SET WE8MSWIN1252
;
</pre></div>
<!-- class="sect2" -->
<a id="OSTMG95283"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1526"></a>
<h3 class="sect2">Creating Control Files in Oracle ASM: Example 2</h3>
<p><a id="sthref1527"></a>This example is a <code>CREATE</code> <code>CONTROLFILE</code> statement for a database with data files, but uses a <code>RESETLOGS</code> clause, and thus uses the creation form for log files:</p>
<pre>
CREATE CONTROLFILE REUSE DATABASE "ORCL" RESETLOGS  ARCHIVELOG
    MAXLOGFILES 16
    MAXLOGMEMBERS 3
    MAXDATAFILES 100
    MAXINSTANCES 8
    MAXLOGHISTORY 292
LOGFILE
  GROUP 1 (
    '+DATA/orcl/onlinelog/group_1.261.685366203',
    '+FRA/orcl/onlinelog/group_1.257.685366205'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 2 (
    '+DATA/orcl/onlinelog/group_2.262.685366207',
    '+FRA/orcl/onlinelog/group_2.258.685366211'
  ) SIZE 50M BLOCKSIZE 512,
  GROUP 3 (
    '+DATA/orcl/onlinelog/group_3.263.685366213',
    '+FRA/orcl/onlinelog/group_3.259.685366215'
  ) SIZE 50M BLOCKSIZE 512
-- STANDBY LOGFILE
DATAFILE
  '+DATA/orcl/datafile/system.256.685366089',
  '+DATA/orcl/datafile/sysaux.257.685366089',
  '+DATA/orcl/datafile/undotbs1.258.685366091',
  '+DATA/orcl/datafile/users.259.685366091'
CHARACTER SET WE8MSWIN1252
;
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1025971"></a><a id="OSTMG13980"></a>
<div class="sect1">
<h2 class="sect1">Creating Archive Log Files in Oracle ASM</h2>
<p><a id="sthref1528"></a><a id="sthref1529"></a>Disk groups can be specified as archive log destinations in the <code>LOG_ARCHIVE_DEST</code> and <code>LOG_ARCHIVE_DEST_n</code> initialization parameters. When destinations are specified in this manner, the archive log filenames are unique, even if archived twice.</p>
<p>If <code>LOG_ARCHIVE_DEST</code> is set to a disk group name, <code>LOG_ARCHIVE_FORMAT</code> is ignored. Unique filenames for archived logs are automatically created by the Oracle database. If <code>LOG_ARCHIVE_DEST</code> is set to a directory in a disk group, <code>LOG_ARCHIVE_FORMAT</code> has its normal semantics.</p>
<p>The following sample archive log names might be generated with <code>DB_RECOVERY_FILE_DEST</code> set to <code>+data</code>. <code>ORCL</code> is the value of the <code>DB_UNIQUE_NAME</code> parameter:</p>
<pre>
+DATA/ORCL/ARCHIVELOG/2009_09_23/thread_1_seq_38.614.541956473
+DATA/ORCL/ARCHIVELOG/2009_09_23/thread_4_seq_35.609.541956477
+DATA/ORCL/ARCHIVELOG/2009_09_23/thread_2_seq_34.603.541956487
+DATA/ORCL/ARCHIVELOG/2009_09_25/thread_3_seq_100.621.541956497
+DATA/ORCL/ARCHIVELOG/2009_09_25/thread_1_seq_38.614.541956511
</pre></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1536">
<tr>
<td class="cellalignment1543">
<table class="cellalignment1541">
<tr>
<td class="cellalignment1540"><a href="asmfs_util010.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1540"><a href="asmfs_extra.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1545">
<table class="cellalignment1539">
<tr>
<td class="cellalignment1540"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1540"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1540"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1540"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1540"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1540"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
