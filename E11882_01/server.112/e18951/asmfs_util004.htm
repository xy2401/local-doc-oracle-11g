<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle ACFS Command-line Tools for the AIX Environment</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 047" />
<meta name="dcterms.created" content="2012-02-03T20:20:22Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Automatic Storage Management Administrator's Guide" />
<meta name="dcterms.identifier" content="E18951-03" />
<meta name="dcterms.isVersionOf" content="OSTMG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="ostmg_gloss.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="asmfs_util003.htm" title="Previous" type="text/html" />
<link rel="Next" href="asmfs_util005.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e18951.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">30/40</span> <!-- End Header --><a id="BABJGGGD"></a><a id="OSTMG94849"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h1 class="sect1">Oracle ACFS Command-line Tools for the AIX Environment</h1>
<p>During the installation of Oracle ACFS and Oracle ADVM with Oracle Grid Infrastructure on AIX, several system security classes (authorizations) are created for Oracle ACFS and Oracle ADVM operations. These authorizations enable the following operations:</p>
<ul>
<li>
<p>Configuration of Oracle ACFS and Oracle ADVM devices</p>
</li>
<li>
<p>Removal of Oracle ACFS and Oracle ADVM devices</p>
</li>
<li>
<p>Definition of Oracle ACFS and Oracle ADVM devices</p>
</li>
</ul>
<p>These authorizations are collected in a role (<code>oracle_devmgmt</code>) which is assigned by default to the Oracle Grid Infrastructure user and Oracle ASM administrator. You can run the <code>lsrole</code> or <code>rolelist</code> command after installation to see this new role. These commands can be run at any time to ensure that the user has the proper authorization to manage Oracle ACFS and Oracle ADVM.</p>
<p>For example, run the following as the Oracle ASM administrator:</p>
<pre>
$ rolelist -e
 oracle_devmgmt
</pre>
<p>After the initial installation on an AIX operating system, the shell from which the root script was run will not inherit the new role. If the role is not present for the user, then the <code>swrole</code> command must be run before performing Oracle ACFS or Oracle ADVM operations.</p>
<p>For example, run the following as the Oracle ASM administrator:</p>
<pre>
$ swrole oracle_devmgmt
</pre>
<p>Alternatively, you can open a new shell to perform Oracle ACFS or Oracle ADVM operations.</p>
<p>During the removal of Oracle Grid Infrastructure, the <code>oracle_devmgmt</code> role and its associated authorizations are deleted from the system.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Oracle Grid Infrastructure on AIX, refer to <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Grid Infrastructure Installation Guide for AIX Based Systems</span></a> for more information about installing</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
If a disk group is dismounted with the force option on AIX, any Oracle ADVM volumes device files that were on that disk group remain on the system. These files are removed when the disk group is remounted.</div>
<p><a href="#BABIDFEB">Table 13-11</a> contains a summary of the Oracle ACFS commands for the AIX operating system. The commands in <a href="#BABIDFEB">Table 13-11</a> have been extended with additional options to support Oracle ACFS on AIX.</p>
<div class="tblformalwide">
<p class="titleintable"><a id="OSTMG94850"></a><a id="sthref1247"></a><a id="BABIDFEB"></a>Table 13-11 Summary of Oracle ACFS commands for AIX</p>
<table class="cellalignment1546" title="Summary of Oracle ACFS commands for AIX" summary="AIX Command Summary" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t28">Command</th>
<th class="cellalignment1547" id="r1c2-t28">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t28" headers="r1c1-t28">
<p><a href="#BABEJHFA">fsck</a></p>
</td>
<td class="cellalignment1543" headers="r2c1-t28 r1c2-t28">
<p>Checks and repairs an Oracle ACFS file system on AIX.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t28" headers="r1c1-t28">
<p><a href="#BABHBJDG">mkfs</a></p>
</td>
<td class="cellalignment1543" headers="r3c1-t28 r1c2-t28">
<p>Creates an Oracle ACFS file system on AIX.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t28" headers="r1c1-t28">
<p><a href="#BABIJIIG">mount</a></p>
</td>
<td class="cellalignment1543" headers="r4c1-t28 r1c2-t28">
<p>Mounts an Oracle ACFS file system on AIX.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t28" headers="r1c1-t28">
<p><a href="#BABGAJJC">umount/umountall</a></p>
</td>
<td class="cellalignment1543" headers="r5c1-t28 r1c2-t28">
<p>Dismounts an Oracle ACFS file system on AIX.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<a id="BABEJHFA"></a><a id="OSTMG94851"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><a id="sthref1248"></a>fsck</h2>
<p class="subhead2"><a id="OSTMG94852"></a>Purpose</p>
<p>Checks and repairs an Oracle ACFS file system on the AIX operating system.</p>
<p class="subhead2"><a id="OSTMG94853"></a>Syntax and Description</p>
<br />
<code>fsck</code> <code>-V</code> <code>acfs</code> [<code>-n</code>|<code>-y</code>] [<code>-o</code> <code><span class="codeinlineitalic">options</span></code>] <code><span class="codeinlineitalic">volume_device</span></code><br />
<p><a href="#BABBIJJD">Table 13-12</a> contains the options available with the AIX <code>fsck</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94854"></a><a id="sthref1249"></a><a id="BABBIJJD"></a>Table 13-12 Options for the AIX fsck command</p>
<table class="cellalignment1546" title="Options for the AIX fsck command" summary="This table lists the options for the AIX fsck command, along with a description for each option" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t29">Option</th>
<th class="cellalignment1547" id="r1c2-t29">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t29" headers="r1c1-t29">
<p><code>-V</code> <code>acfs</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t29 r1c2-t29">
<p>Specifies an Oracle ADVM volume on AIX. <code>acfs</code> designates the Oracle ACFS type.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t29" headers="r1c1-t29">
<p><code>-n</code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t29 r1c2-t29">
<p>Answers no to any prompts.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t29" headers="r1c1-t29">
<p><code>-y</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t29 r1c2-t29">
<p>Answers yes to any prompts.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t29" headers="r1c1-t29">
<p><code>-o</code> <code><span class="codeinlineitalic">options</span></code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t29 r1c2-t29">
<p>Specifies that options follow (a, f, v). Options are preceded with the <code>-o</code> flag and entered as a comma-delimited string. For example: <code>-o</code> <code>a,v</code></p>
<ul>
<li>
<p><code>a</code></p>
<p>Specifies to automatically fix the file system.</p>
</li>
<li>
<p><code>f</code></p>
<p>Forces the file system into mountable state without completing a file system check or fix.</p>
</li>
<li>
<p><code>v</code></p>
<p>Specifies verbose mode. The progress is displayed as the operation occurs.</p>
</li>
<li>
<p><code>vv</code></p>
<p>Specifies very verbose mode. The progress is displayed as the operation occurs.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t29" headers="r1c1-t29">
<p><code><span class="codeinlineitalic">volume_device</span></code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t29 r1c2-t29">
<p>Specifies the primary Oracle ADVM volume device.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>fsck</code> checks and repairs an existing Oracle ACFS. This command can only be run on a dismounted file system. <code>root</code> privileges are required to run <code>fsck</code>. The Oracle ACFS driver must be loaded for <code>fsck</code> to work.</p>
<p>By default, <code>fsck</code> only checks for and reports any errors. The <code>-a</code> flag must be specified to instruct <code>fsck</code> to fix errors in the file system.</p>
<p>In a few cases, <code>fsck</code> prompts for questions before proceeding to check a file system. These cases include:</p>
<ul>
<li>
<p>If <code>fsck</code> detects that another <code>fsck</code> is in progress on the file system</p>
</li>
<li>
<p>If <code>fsck</code> detects that the Oracle ACFS driver is not loaded</p>
</li>
<li>
<p>If the file system does not appear to be Oracle ACFS</p>
</li>
</ul>
<p>In checking mode, <code>fsck</code> also prompts if there are transaction logs that have not been processed completely due to an incomplete shutdown. To run in a non-interactive mode, include either the <code>-y</code> or <code>-n</code> options to answer yes or no to any questions.</p>
<p><code>fsck</code> creates working files before it checks a file system. These working files are created in <code>/usr/tmp</code> if space is available. <code>/tmp</code> is used if <code>/usr/tmp</code> does not exist. If insufficient space is available in the <code>tmp</code> directory, <code>fsck</code> attempts to write to the current working directory. The files that <code>fsck</code> creates are roughly the size of the file system being checked divided by 32K. At most two such files are allocated. For example, a 2 GB file system being checked causes <code>fsck</code> to generate one or two 64K working files in the <code>/usr/tmp</code> directory. These files are deleted after <code>fsck</code> has finished.</p>
<p>In the event that <code>fsck</code> finds a file or directory in the file system for which it cannot determine its name or intended location (possibly due to a corruption in its parent directory), it places this object in the <code>/lost+found</code> directory when <code>fsck</code> is run in fix mode. For security reasons only the <code>root</code> user on Linux can read files in <code>/lost+found</code>. If the administrator can later determine the original name and location of the file based on its contents, the file can be moved or copied into its intended location.</p>
<p>The file names in the <code>/lost+found</code> directory are in the following formats:</p>
<pre>
parent.<span class="italic">id</span>.file.<span class="italic">id</span>.<span class="italic">time-in-sec-since-1970</span>
parent.<span class="italic">id</span>.dir.<span class="italic">id</span>.<span class="italic">time-in-sec-since-1970</span>
</pre>
<p>The <code><span class="codeinlineitalic">id</span></code> fields are the internal Oracle ACFS numeric identifiers for each file and directory in the file system.</p>
<p>You can use <code>acfsutil</code> <code>info</code> <code>id</code> <code><span class="codeinlineitalic">id</span></code> <code><span class="codeinlineitalic">mount_point</span></code> to attempt to determine the directory associated with <code>parent.</code><code><span class="codeinlineitalic">id</span></code>. This directory is assumed to be where the deleted object originated. For information about <code>acfsutil</code> <code>info</code>, see <a href="asmfs_util010.htm#CACIDJAA">"acfsutil info file"</a>.</p>
<p>If the parent directory is not known, the parent <code>id</code> field is set to <code>UNKNOWN</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
It is not possible to see the contents of the <code>/lost+found</code> directory from a snapshot.</div>
<p class="subhead2"><a id="OSTMG94855"></a>Examples</p>
<p>The following example shows how to check and repair an Oracle ACFS file system.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94856"></a><a id="sthref1250"></a>Example 13-9 Using the fsck command</p>
<pre>
# /usr/sbin/fsck -V acfs -y -o a,v /dev/asm/volume1-123
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABHBJDG"></a><a id="OSTMG94857"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><a id="sthref1251"></a>mkfs</h2>
<p class="subhead2"><a id="OSTMG94858"></a>Purpose</p>
<p>Creates an Oracle ACFS file system on the AIX operating system.</p>
<p class="subhead2"><a id="OSTMG94859"></a>Syntax and Description</p>
<br />
<code>mkfs</code> <code>-V</code> <code>acfs</code> <code>-o</code> <code>h</code> <code>/dev/null</code><br />
<code>mkfs</code> <code>-V</code> <code>acfs</code> [<code>-v</code> <code><span class="codeinlineitalic">name</span></code> ] [<code>-s</code> <code><span class="codeinlineitalic">size</span></code>][<code>-o</code> <code><span class="codeinlineitalic">options</span></code>] <code><span class="codeinlineitalic">volume_device</span></code><br />
<p><code>mkfs</code> <code>-V</code> <code>acfs</code> <code>-o</code> <code>h</code> <code>/dev/null</code> displays usage text and exits.</p>
<p><a href="#BABGIHBA">Table 13-13</a> contains the options available with the AIX <code>mkfs</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94860"></a><a id="sthref1252"></a><a id="BABGIHBA"></a>Table 13-13 Options for the AIX mkfs command</p>
<table class="cellalignment1546" title="Options for the AIX mkfs command" summary="This table lists the options for the AIX mkfs command, along with a description for each option" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t31">Option</th>
<th class="cellalignment1547" id="r1c2-t31">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t31" headers="r1c1-t31">
<p><code>-V</code> <code>acfs</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t31 r1c2-t31">
<p>Specifies the type of file system on AIX. <code>acfs</code> designates the Oracle ACFS type.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t31" headers="r1c1-t31">
<p><code>-v</code> <code><span class="codeinlineitalic">name</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t31 r1c2-t31">
<p>Specifies the name for the file system. A name can be a maximum of 64 characters. <code>acfsutil</code> <code>info</code> <code>fs</code> returns the name if one was specified.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t31" headers="r1c1-t31">
<p><code>-s</code> <code><span class="codeinlineitalic">size</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t31 r1c2-t31">
<p>Specifies the size of the file system in 512-byte units or in units of <code>K</code>|<code>M</code>|<code>G</code>|<code>T</code>|<code>P</code>. Units specified are in <code>K</code> (kilobytes), <code>M</code> (megabytes), <code>G</code> (gigabytes), <code>T</code> (terabytes), or <code>P</code> (petabytes).</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t31" headers="r1c1-t31">
<p><code>-o</code> <code><span class="codeinlineitalic">options</span></code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t31 r1c2-t31">
<p>Specifies that options follow (b, f, h, v). Options are preceded with the <code>-o</code> flag and entered as a comma-delimited string. For example: <code>-o</code> <code>f,v</code></p>
<ul>
<li>
<p><code>b=</code><code><span class="codeinlineitalic">blocksize</span></code></p>
<p>Specifies the block size of the new file system. The default block size is 4K and this is the only size supported.</p>
</li>
<li>
<p><code>f</code></p>
<p>Specifies the force option. This action creates the file system even if there is an existing Oracle ACFS on the volume device, although only if the file system is dismounted. This option overwrites structures on the original file system. Use this option with caution.</p>
</li>
<li>
<p><code>h</code></p>
<p>Displays the usage text and exits.</p>
</li>
<li>
<p><code>v</code></p>
<p>Specifies verbose mode. The progress is displayed as the operation occurs.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r6c1-t31" headers="r1c1-t31">
<p><code><span class="codeinlineitalic">volume_device</span></code></p>
</td>
<td class="cellalignment1543" headers="r6c1-t31 r1c2-t31">
<p>Specifies an Oracle ADVM device file that is to be formatted.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>mkfs</code> is used to create the on disk structure needed for Oracle ACFS file system to be mounted. The <code>mkfs</code> command is the traditional UNIX command used to build a file system. After <code>mkfs</code> runs successfully, the <code>USAGE</code> column in the <code>V$ASM_VOLUME</code> view displays <code>ACFS</code>. <code>root</code> privilege is not required. The ownership of the volume device file dictates who can run this command. The minimum file system size is 200 MB. The Oracle ACFS driver must be loaded for <code>mkfs</code> to work.</p>
<p class="subhead2"><a id="OSTMG94861"></a>Examples</p>
<p>Before creating an Oracle ACFS file system, first determine which Oracle ADVM volume devices are available. You can use the ASMCMD <code>volinfo</code> command to display information about the volumes and volume devices.</p>
<pre>
ASMCMD [+] &gt; volinfo -a
...
         Volume Name: VOLUME1
         Volume Device: /dev/asm/volume1-123
         State: ENABLED
... 
</pre>
<p>See <a href="asm_util007.htm#CIHIEJCH">"volinfo"</a>.</p>
<p>Next create an Oracle ACFS file system on the volume device file.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94862"></a><a id="sthref1253"></a>Example 13-10 Using the mkfs command</p>
<pre>
$ /usr/sbin/mkfs -V acfs /dev/asm/volume1-123
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABIJIIG"></a><a id="OSTMG94863"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><a id="sthref1254"></a>mount</h2>
<p class="subhead2"><a id="OSTMG94864"></a>Purpose</p>
<p>Mounts an Oracle ACFS file system on the AIX operating system.</p>
<p class="subhead2"><a id="OSTMG94865"></a>Syntax and Description</p>
<br />
<code>mount</code> <code>-V</code> <code>acfs</code> <code>-o</code> <code>h</code> <code>/dev/null</code> <code>/xxx</code><br />
<code>mount</code> <code>-v</code> <code>acfs</code> [<code>-o</code> <code><span class="codeinlineitalic">options</span></code>] <code><span class="codeinlineitalic">volume_device</span></code> <code><span class="codeinlineitalic">mount_point</span></code><br />
<p><code>mount</code> <code>-V</code> <code>acfs</code> <code>-o</code> <code>h</code> <code>/dev/null</code> <code>/xxx</code> displays usage text and exits.</p>
<p><a href="#BABGGCEJ">Table 13-14</a> contains the options available with the <code>mount</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94866"></a><a id="sthref1255"></a><a id="BABGGCEJ"></a>Table 13-14 Options for the AIX mount command</p>
<table class="cellalignment1546" title="Options for the AIX mount command" summary="This table lists the options for the AIX mount command, along with a description for each option" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t32">Option</th>
<th class="cellalignment1547" id="r1c2-t32">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t32" headers="r1c1-t32">
<p><code>-v</code> <code>acfs</code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t32 r1c2-t32">
<p>Specifies the type of file system on AIX. <code>acfs</code> designates the Oracle ACFS type.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t32" headers="r1c1-t32">
<p><code>-o</code> <code><span class="codeinlineitalic">options</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t32 r1c2-t32">
<p>Specifies that options follow. Options are preceded with the <code>-o</code> flag followed by a comma-delimited string of options. For example: <code>-o</code> <code>all,ro,v</code></p>
<p>The following options are available:</p>
<ul>
<li>
<p><code>all</code></p>
<p>Reads the Oracle ACFS mount registry created with the <code>acfsutil</code> <code>registry</code> command and mounts the file systems in it. A <code>mount</code> <code>-V</code> <code>acfs</code> <code>-o</code> <code>all</code> command is automatically run at Oracle ACFS startup.</p>
<p>The <code>-o</code> <code>all</code> option requires two placeholders to satisfy the command arguments: a dummy argument for the volume device and directory.</p>
<p>When the <code>-o</code> <code>all</code> option is specified, other <code>-o</code> options are ignored. To specify mount options for a registry entry, include those options with the <code>acfsutil</code> <code>registry</code> command when you add the entry to the registry.</p>
</li>
<li>
<p><code>h</code></p>
<p>Displays the usage help text and exits.</p>
</li>
<li>
<p><code>nosuid</code></p>
<p>Specifies that the execution of <code>setuid</code> and <code>setgid</code> programs by way of this mount is not allowed.</p>
</li>
<li>
<p><code>nodev</code></p>
<p>Specifies that you cannot open devices from this mount.</p>
</li>
<li>
<p><code>norootsuid</code></p>
<p>Fails the execution of binaries by non-root users whose permissions allow set user Id execution, and are owned by root. An attempt to run these executables as a non-root user fails with a permission denied error.</p>
</li>
<li>
<p><code>rootsuid</code></p>
<p>Allows the execution of binaries by non-root users of set user Id files owned by root. This is the default action.</p>
</li>
<li>
<p><code>ro</code></p>
<p>Mounts the file system in read-only mode.</p>
</li>
<li>
<p><code>rw</code></p>
<p>Mounts the file system in read-write mode.</p>
</li>
<li>
<p><code>v</code></p>
<p>Specifies verbose mode. The progress is displayed as the operation occurs.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t32" headers="r1c1-t32">
<p><code><span class="codeinlineitalic">volume_device</span></code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t32 r1c2-t32">
<p>Specifies an Oracle ADVM volume device file that has been formatted by <code>mkfs</code>. <code><span class="codeinlineitalic">device</span></code> is required but can be a dummy value.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r5c1-t32" headers="r1c1-t32">
<p><code><span class="codeinlineitalic">mount_point</span></code></p>
</td>
<td class="cellalignment1543" headers="r5c1-t32 r1c2-t32">
<p>Specifies the directory where the file system is mounted. This directory must exist before you run the <code>mount</code> command.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>mount</code> attaches a file system to the Oracle ACFS hierarchy at the mount point that is the name of a directory. The mount happens on the node where the mount command was issued. The mount command returns an error if the file system is not in a dismounted state on this node.</p>
<p>It is not always possible to return the cause of a mount failure to the <code>mount</code> command. When this happens Oracle ACFS writes the cause of the failure to the system console and associated system log file.</p>
<p>After <code>mount</code> runs successfully, the <code>MOUNTPATH</code> field in the <code>V$ASM_VOLUME</code> view displays the directory name on which the file system is now mounted.</p>
<p>An Oracle ACFS file system should only be mounted on one mount point. The same mount point name should be used on all cluster members.</p>
<p><code>root</code> privilege is required to run <code>mount</code>.</p>
<p class="subhead2"><a id="OSTMG94867"></a>Examples</p>
<p>The first example shows how to mount <code>volume1-123</code> on the mount point <code>/u01/app/acfsmounts/myacfs</code>. The second example shows how to mount all the registered Oracle ACFS file systems. The dummy names (<code>none</code>) have been entered as placeholders for the device and directory as these arguments are required, but not used, when the <code>all</code> option is specified.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94868"></a><a id="sthref1256"></a>Example 13-11 Using the mount command</p>
<pre>
# /usr/sbin/mount -v acfs /dev/asm/volume1-123 /u01/app/acfsmounts/myacfs

# /usr/sbin/mount -v acfs -o all none none
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BABGAJJC"></a><a id="OSTMG94869"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h2 class="sect2"><a id="sthref1257"></a><a id="sthref1258"></a>umount/umountall</h2>
<p class="subhead2"><a id="OSTMG94870"></a>Purpose</p>
<p>Dismounts an Oracle ACFS file system on the AIX operating system.</p>
<p class="subhead2"><a id="OSTMG94871"></a>Syntax and Description</p>
<br />
<code>umount</code> [<code><span class="codeinlineitalic">mount_point</span></code> | <code><span class="codeinlineitalic">volume_device</span></code>]<br />
<code>umountall</code> <code>-F</code> <code>acfs</code><br />
<p><code>unmountall</code> <code>-F</code> <code>acfs</code> dismounts all Oracle ACFS file systems.</p>
<p><a href="#BABDFHHE">Table 13-15</a> contains the options available with the <code>umount</code> command.</p>
<div class="tblhruleformal">
<p class="titleintable"><a id="OSTMG94872"></a><a id="sthref1259"></a><a id="BABDFHHE"></a>Table 13-15 Options for the AIX umount command</p>
<table class="cellalignment1546" title="Options for the AIX umount command" summary="This table lists the options for the AIX umount command, along with a description for each option" dir="ltr">
<thead>
<tr class="cellalignment1537">
<th class="cellalignment1547" id="r1c1-t33">Option</th>
<th class="cellalignment1547" id="r1c2-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r2c1-t33" headers="r1c1-t33">
<p><code><span class="codeinlineitalic">mount_point</span></code></p>
</td>
<td class="cellalignment1543" headers="r2c1-t33 r1c2-t33">
<p>Specifies the directory where the file system is mounted. Valid only with <code>umount</code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r3c1-t33" headers="r1c1-t33">
<p><code><span class="codeinlineitalic">volume_device</span></code></p>
</td>
<td class="cellalignment1543" headers="r3c1-t33 r1c2-t33">
<p>Specifies the Oracle ADVM volume device name associated with the file system. Valid only with <code>umount</code>.</p>
</td>
</tr>
<tr class="cellalignment1537">
<td class="cellalignment1543" id="r4c1-t33" headers="r1c1-t33">
<p><code>-F</code> <code>acfs</code></p>
</td>
<td class="cellalignment1543" headers="r4c1-t33 r1c2-t33">
<p>Specifies the type of file system on AIX. <code>acfs</code> designates the Oracle ACFS type. Valid only with <code>umountall</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformal" -->
<p><code>umount</code> and <code>umountall</code> detach an Oracle ACFS from the file system hierarchy on the current node. If a file system is busy, <code>umount</code> and <code>umountall</code> fail.</p>
<p><code>root</code> privileges are required to run the <code>umount</code> and <code>umountall</code> commands.</p>
<p class="subhead2"><a id="OSTMG94873"></a>Examples</p>
<p>The following examples show how to dismount an Oracle ACFS file system. The first example specifies the mount point of the file system to dismount. The second example specifies the volume device associated with the file system to dismount. The third example dismounts all Oracle ACFS file systems.</p>
<div class="example">
<p class="titleinexample"><a id="OSTMG94874"></a><a id="sthref1260"></a>Example 13-12 Using the umount command</p>
<pre>
# /usr/sbin/umount /dev/asm/volume1-123

# /usr/sbin/umount /u01/app/acfsmounts/myacfs

# /usr/sbin/umountall -F acfs
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1536">
<tr>
<td class="cellalignment1543">
<table class="cellalignment1541">
<tr>
<td class="cellalignment1540"><a href="asmfs_util003.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1540"><a href="asmfs_util005.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1545">
<table class="cellalignment1539">
<tr>
<td class="cellalignment1540"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1540"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1540"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1540"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1540"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1540"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
