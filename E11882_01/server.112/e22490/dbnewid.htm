<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>DBNEWID Utility</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093" />
<meta name="dcterms.created" content="2018-03-26T15:55:16Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Utilities" />
<meta name="dcterms.identifier" content="E22490-08" />
<meta name="dcterms.isVersionOf" content="SUTIL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2018,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="dbverify.htm" title="Previous" type="text/html" />
<link rel="Next" href="logminer.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e22490.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">29/36</span> <!-- End Header -->
<div id="SUTIL014" class="chapter"><a id="g1010179"></a> <a id="i1005317"></a>
<h1 class="chapter"><span class="secnum">18</span> DBNEWID Utility</h1>
<p>DBNEWID<a id="sthref1508"></a> is a database utility that can change the internal database identifier (DBID) and the database name (DBNAME) for an operational database.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#i1004599">What Is the DBNEWID Utility?</a></p>
</li>
<li>
<p><a href="#i1005380">Ramifications of Changing the DBID and DBNAME</a></p>
</li>
<li>
<p><a href="#i1004664">Changing the DBID and DBNAME of a Database</a></p>
</li>
<li>
<p><a href="#i1004965">DBNEWID Syntax</a></p>
</li>
</ul>
<a id="i1004599"></a>
<div id="SUTIL1540" class="sect1">
<h2 class="sect1">What Is the DBNEWID Utility?</h2>
<p>Before the introduction of the DBNEWID utility, you could manually create a copy of a database and give it a new database name (DBNAME) by re-creating the control file. However, you could not give the database a new identifier (DBID). The DBID is an internal, unique identifier for a database. Because Recovery Manager (RMAN) distinguishes databases by DBID, you could not register a seed database and a manually copied database together in the same RMAN repository. The DBNEWID utility solves this problem by allowing you to change any of the following:</p>
<ul>
<li>
<p>Only the DBID of a database</p>
</li>
<li>
<p>Only the DBNAME of a database</p>
</li>
<li>
<p>Both the DBNAME and DBID of a database</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i1005380"></a>
<div id="SUTIL1541" class="sect1">
<h2 class="sect1">Ramifications of Changing the DBID and DBNAME</h2>
<p>Changing the DBID of a database is a serious procedure. When the DBID of a database is changed, all previous backups and archived logs of the database become unusable. This is similar to creating a database except that the data is already in the data files. After you change the DBID, backups and archive logs that were created before the change can no longer be used because they still have the original DBID, which does not match the current DBID. You must open the database with the <code dir="ltr">RESETLOGS</code> option, which re-creates the online redo logs and resets their sequence to 1 (see <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide)</span></a>. Consequently, you should make a backup of the whole database immediately after changing the DBID.</p>
<p>Changing the DBNAME without changing the DBID does not require you to open with the <code dir="ltr">RESETLOGS</code> option, so database backups and archived logs are not invalidated. However, changing the DBNAME does have consequences. You must change the <code dir="ltr">DB_NAME</code> initialization parameter after a database name change to reflect the new name. Also, you may have to re-create the Oracle password file. If you restore an old backup of the control file (before the name change), then you should use the initialization parameter file and password file from before the database name change.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not change the DBID or DBNAME of a database if you are using a capture process to capture changes to the database. See <a class="olink STRMS002" href="../../server.112/e17069/strms_capture.htm#STRMS002"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about capture processes.</div>
<a id="i1006150"></a>
<div id="SUTIL1542" class="sect2">
<h3 class="sect2">Considerations for Global Database Names</h3>
<p>If you are dealing with a database in a distributed database system, then each database should have a unique global database name<a id="sthref1509"></a>. <span class="italic">The DBNEWID utility does not change global database names.</span> This can only be done with the SQL <code dir="ltr">ALTER</code> <code dir="ltr">DATABASE</code> statement, for which the syntax is as follows:</p>
<pre dir="ltr">
ALTER DATABASE RENAME GLOBAL_NAME TO <span class="italic">newname</span>.<span class="italic">domain</span>;
</pre>
<p>The global database name is made up of a database name and a domain, which are determined by the <code dir="ltr">DB_NAME</code> and <code dir="ltr">DB_DOMAIN</code> initialization parameters when the database is first created.</p>
<p>The following example changes the database name to <code dir="ltr">sales</code> in the domain <code dir="ltr">us</code>.<code dir="ltr">example</code>.<code dir="ltr">com</code>:</p>
<pre dir="ltr">
ALTER DATABASE RENAME GLOBAL_NAME TO sales.us.example.com
</pre>
<p>You would do this after you finished using DBNEWID to change the database name.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about global database names</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1004664"></a>
<div id="SUTIL1543" class="sect1">
<h2 class="sect1">Changing the DBID and DBNAME of a Database</h2>
<p>This section contains these topics:</p>
<ul>
<li>
<p><a href="#i1004683">Changing the DBID and Database Name</a></p>
</li>
<li>
<p><a href="#CHDHADDH">Changing Only the Database ID</a></p>
</li>
<li>
<p><a href="#i1004734">Changing Only the Database Name</a></p>
</li>
<li>
<p><a href="#i1004775">Troubleshooting DBNEWID</a></p>
</li>
</ul>
<a id="i1004683"></a>
<div id="SUTIL1544" class="sect2">
<h3 class="sect2">Changing the DBID and Database Name</h3>
<p>The following steps describe how to change<a id="sthref1510"></a> the DBID<a id="sthref1511"></a><a id="sthref1512"></a> of a database<a id="sthref1513"></a><a id="sthref1514"></a><a id="sthref1515"></a>. Optionally, you can change the database name as well.</p>
<ol>
<li>
<p>Ensure that you have a recoverable whole database backup.</p>
</li>
<li>
<p>Ensure that the target database is mounted but not open, and that it was shut down consistently before mounting. For example:</p>
<pre dir="ltr">
SHUTDOWN IMMEDIATE
STARTUP MOUNT
</pre></li>
<li>
<p>Invoke the DBNEWID utility on the command line, specifying a valid user (<code dir="ltr">TARGET</code>) that has the <code dir="ltr">SYSDBA</code> privilege (you will be prompted for a password):</p>
<pre dir="ltr">
% nid TARGET=SYS
</pre>
<p>To change the database name in addition to the DBID, also specify the <code dir="ltr">DBNAME</code> parameter on the command line (you will be prompted for a password). The following example changes the database name to <code dir="ltr">test_db</code>:</p>
<pre dir="ltr">
% nid TARGET=SYS DBNAME=test_db
</pre>
<p>The DBNEWID utility performs validations in the headers of the data files and control files before attempting I/O to the files. If validation is successful, then DBNEWID prompts you to confirm the operation (unless you specify a log file, in which case it does not prompt), changes the DBID (and the DBNAME, if specified, as in this example) for each data file, including offline normal and read-only data files, shuts down the database, and then exits. The following is an example of what the output for this would look like:</p>
<pre dir="ltr">
.
.
.
Connected to database PROD (DBID=86997811)
.
.
.
Control Files in database:
    /oracle/TEST_DB/data/cf1.dbf
    /oracle/TEST_DB/data/cf2.dbf

The following datafiles are offline clean:
    /oracle/TEST_DB/data/tbs_61.dbf (23)
    /oracle/TEST_DB/data/tbs_62.dbf (24)
    /oracle/TEST_DB/data/temp3.dbf (3)
These files must be writable by this utility.

The following datafiles are read-only:
    /oracle/TEST_DB/data/tbs_51.dbf (15)
    /oracle/TEST_DB/data/tbs_52.dbf (16)
    /oracle/TEST_DB/data/tbs_53.dbf (22)
These files must be writable by this utility.

Changing database ID from 86997811 to 1250654267
Changing database name from PROD to TEST_DB
    Control File /oracle/TEST_DB/data/cf1.dbf - modified
    Control File /oracle/TEST_DB/data/cf2.dbf - modified
    Datafile /oracle/TEST_DB/data/tbs_01.dbf - dbid changed, wrote new name
    Datafile /oracle/TEST_DB/data/tbs_ax1.dbf - dbid changed, wrote new name
    Datafile /oracle/TEST_DB/data/tbs_02.dbf - dbid changed, wrote new name
    Datafile /oracle/TEST_DB/data/tbs_11.dbf - dbid changed, wrote new name
    Datafile /oracle/TEST_DB/data/tbs_12.dbf - dbid changed, wrote new name
    Datafile /oracle/TEST_DB/data/temp1.dbf - dbid changed, wrote new name
    Control File /oracle/TEST_DB/data/cf1.dbf - dbid changed, wrote new name
    Control File /oracle/TEST_DB/data/cf2.dbf - dbid changed, wrote new name
    Instance shut down

Database name changed to TEST_DB.
Modify parameter file and generate a new password file before restarting.
Database ID for database TEST_DB changed to 1250654267.
All previous backups and archived redo logs for this database are unusable.
Database has been shutdown, open database with RESETLOGS option.
Successfully changed database name and ID.
DBNEWID - Completed successfully.
</pre>
<p>If validation is not successful, then DBNEWID terminates and leaves the target database intact, as shown in the following sample output. You can open the database, fix the error, and then either resume the DBNEWID operation or continue using the database without changing its DBID.</p>
<pre dir="ltr">
.
.
.
Connected to database PROD (DBID=86997811)
.
.
.  
Control Files in database:
    /oracle/TEST_DB/data/cf1.dbf
    /oracle/TEST_DB/data/cf2.dbf
 
The following datafiles are offline clean:
    /oracle/TEST_DB/data/tbs_61.dbf (23)
    /oracle/TEST_DB/data/tbs_62.dbf (24)
    /oracle/TEST_DB/data/temp3.dbf (3)
These files must be writable by this utility.
 
The following datafiles are read-only:
    /oracle/TEST_DB/data/tbs_51.dbf (15)
    /oracle/TEST_DB/data/tbs_52.dbf (16)
    /oracle/TEST_DB/data/tbs_53.dbf (22)
These files must be writable by this utility.
 
The following datafiles are offline immediate:
    /oracle/TEST_DB/data/tbs_71.dbf (25)
    /oracle/TEST_DB/data/tbs_72.dbf (26)
 
NID-00122: Database should have no offline immediate datafiles
  
Change of database name failed during validation - database is intact.
DBNEWID - Completed with validation errors.
</pre></li>
<li>
<p>Mount the database. For example:</p>
<pre dir="ltr">
STARTUP MOUNT
</pre></li>
<li>
<p>Open the database in <code dir="ltr">RESETLOGS</code> mode and resume normal use. For example:</p>
<pre dir="ltr">
ALTER DATABASE OPEN RESETLOGS;
</pre>
<p>Make a new database backup. Because you reset the online redo logs, the old backups and archived logs are no longer usable in the current incarnation of the database.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDHADDH"></a>
<div id="SUTIL1545" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Changing Only the Database ID</h3>
<p>To change the database ID without changing the database name, follow the steps in <a href="#i1004683">"Changing the DBID and Database Name"</a>, but in Step 3 do not specify the optional database name (DBNAME). The following is an example of the type of output that is generated when only the database ID is changed.</p>
<pre dir="ltr">
.
.
.
Connected to database PROD (DBID=86997811)
.
.
.  
Control Files in database:
    /oracle/TEST_DB/data/cf1.dbf
    /oracle/TEST_DB/data/cf2.dbf
 
The following datafiles are offline clean:
    /oracle/TEST_DB/data/tbs_61.dbf (23)
    /oracle/TEST_DB/data/tbs_62.dbf (24)
    /oracle/TEST_DB/data/temp3.dbf (3)
These files must be writable by this utility.
 
The following datafiles are read-only:
    /oracle/TEST_DB/data/tbs_51.dbf (15)
    /oracle/TEST_DB/data/tbs_52.dbf (16)
    /oracle/TEST_DB/data/tbs_53.dbf (22)
These files must be writable by this utility.
 
Changing database ID from 86997811 to 4004383693
    Control File /oracle/TEST_DB/data/cf1.dbf - modified
    Control File /oracle/TEST_DB/data/cf2.dbf - modified
    Datafile /oracle/TEST_DB/data/tbs_01.dbf - dbid changed
    Datafile /oracle/TEST_DB/data/tbs_ax1.dbf - dbid changed
    Datafile /oracle/TEST_DB/data/tbs_02.dbf - dbid changed
    Datafile /oracle/TEST_DB/data/tbs_11.dbf - dbid changed
    Datafile /oracle/TEST_DB/data/tbs_12.dbf - dbid changed
    Datafile /oracle/TEST_DB/data/temp1.dbf - dbid changed
    Control File /oracle/TEST_DB/data/cf1.dbf - dbid changed
    Control File /oracle/TEST_DB/data/cf2.dbf - dbid changed
    Instance shut down
 
Database ID for database TEST_DB changed to 4004383693.
All previous backups and archived redo logs for this database are unusable.
Database has been shutdown, open database with RESETLOGS option.
Succesfully changed database ID.
DBNEWID - Completed succesfully.
</pre></div>
<!-- class="sect2" -->
<a id="i1004734"></a>
<div id="SUTIL1546" class="sect2">
<h3 class="sect2">Changing Only the Database Name</h3>
<p>The following steps describe how to change the database name<a id="sthref1516"></a><a id="sthref1517"></a><a id="sthref1518"></a><a id="sthref1519"></a><a id="sthref1520"></a> without changing the DBID.</p>
<ol>
<li>
<p>Ensure that you have a recoverable whole database backup.</p>
</li>
<li>
<p>Ensure that the target database is mounted but not open, and that it was shut down consistently before mounting. For example:</p>
<pre dir="ltr">
SHUTDOWN IMMEDIATE
STARTUP MOUNT
</pre></li>
<li>
<p>Invoke the utility on the command line, specifying a valid user with the <code dir="ltr">SYSDBA</code> privilege (you will be prompted for a password). You must specify both the <code dir="ltr">DBNAME</code> and <code dir="ltr">SETNAME</code> parameters. This example changes the name to <code dir="ltr">test_db</code>:</p>
<pre dir="ltr">
% nid TARGET=SYS DBNAME=test_db SETNAME=YES
</pre>
<p>DBNEWID performs validations in the headers of the control files (not the data files) before attempting I/O to the files. If validation is successful, then DBNEWID prompts for confirmation, changes the database name in the control files, shuts down the database and exits. The following is an example of what the output for this would look like:</p>
<pre dir="ltr">
.
.
.
Control Files in database:
    /oracle/TEST_DB/data/cf1.dbf
    /oracle/TEST_DB/data/cf2.dbf

The following datafiles are offline clean:
    /oracle/TEST_DB/data/tbs_61.dbf (23)
    /oracle/TEST_DB/data/tbs_62.dbf (24)
    /oracle/TEST_DB/data/temp3.dbf (3)
These files must be writable by this utility.

The following datafiles are read-only:
    /oracle/TEST_DB/data/tbs_51.dbf (15)
    /oracle/TEST_DB/data/tbs_52.dbf (16)
    /oracle/TEST_DB/data/tbs_53.dbf (22)
These files must be writable by this utility.

Changing database name from PROD to TEST_DB
    Control File /oracle/TEST_DB/data/cf1.dbf - modified
    Control File /oracle/TEST_DB/data/cf2.dbf - modified
    Datafile /oracle/TEST_DB/data/tbs_01.dbf - wrote new name
    Datafile /oracle/TEST_DB/data/tbs_ax1.dbf - wrote new name
    Datafile /oracle/TEST_DB/data/tbs_02.dbf - wrote new name
    Datafile /oracle/TEST_DB/data/tbs_11.dbf - wrote new name
    Datafile /oracle/TEST_DB/data/tbs_12.dbf - wrote new name
    Datafile /oracle/TEST_DB/data/temp1.dbf - wrote new name
    Control File /oracle/TEST_DB/data/cf1.dbf - wrote new name
    Control File /oracle/TEST_DB/data/cf2.dbf - wrote new name
    Instance shut down

Database name changed to TEST_DB.
Modify parameter file and generate a new password file before restarting.
Successfully changed database name.
DBNEWID - Completed successfully.
</pre>
<p>If validation is not successful, then DBNEWID terminates and leaves the target database intact. You can open the database, fix the error, and then either resume the DBNEWID operation or continue using the database without changing the database name. (For an example of what the output looks like for an unsuccessful validation, see Step 3 in <a href="#i1004683">"Changing the DBID and Database Name"</a>.)</p>
</li>
<li>
<p>Set the <code dir="ltr">DB_NAME</code> initialization parameter in the initialization parameter file (PFILE) to the new database name.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The DBNEWID utility does not change the server parameter file (<code dir="ltr">SPFILE</code>). Therefore, if you use <code dir="ltr">SPFILE</code> to start your Oracle database, then you must re-create the initialization parameter file from the server parameter file, remove the server parameter file, change the <code dir="ltr">DB_NAME</code> in the initialization parameter file, and then re-create the server parameter file.</div>
</li>
<li>
<p>Create a new password file.</p>
</li>
<li>
<p>Start up the database and resume normal use. For example:</p>
<pre dir="ltr">
STARTUP
</pre>
<p>Because you have changed only the database name, and not the database ID, it is not necessary to use the <code dir="ltr">RESETLOGS</code> option when you open the database. This means that all previous backups are still usable.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="i1004775"></a>
<div id="SUTIL1547" class="sect2">
<h3 class="sect2">Troubleshooting<a id="sthref1521"></a> DBNEWID</h3>
<p>If the DBNEWID utility succeeds in its validation stage but detects an error while performing the requested change, then the utility stops and leaves the database in the middle of the change. In this case, you cannot open the database until the DBNEWID operation is either completed or reverted. DBNEWID displays messages indicating the status of the operation.</p>
<p>Before continuing or reverting, fix the underlying cause of the error. Sometimes the only solution is to restore the whole database from a recent backup and perform recovery to the point in time before DBNEWID was started. This underscores the importance of having a recent backup available before running DBNEWID.</p>
<p>If you choose to continue with the change, then re-execute your original command. The DBNEWID utility resumes and attempts to continue the change until all data files and control files have the new value or values. At this point, the database is shut down. You should mount it before opening it with the <code dir="ltr">RESETLOGS</code> option.</p>
<p>If you choose to revert a DBNEWID operation, and if the reversion succeeds, then DBNEWID reverts all performed changes and leaves the database in a mounted state.</p>
<p>If DBNEWID is run against a release 10.1 or later Oracle database, then a summary of the operation is written to the alert file. For example, for a change of database name and database ID, you might see something similar to the following:</p>
<pre dir="ltr">
*** DBNEWID utility started ***
DBID will be changed from 86997811 to new DBID of 1250452230 for
database PROD
DBNAME will be changed from PROD to new DBNAME of TEST_DB
Starting datafile conversion
Setting recovery target incarnation to 1
Datafile conversion complete
Database name changed to TEST_DB.
Modify parameter file and generate a new password file before restarting.
Database ID for database TEST_DB changed to 1250452230.
All previous backups and archived redo logs for this database are unusable.
Database has been shutdown, open with RESETLOGS option.
Successfully changed database name and ID.
*** DBNEWID utility finished successfully ***
</pre>
<p>For a change of just the database name, the alert file might show something similar to the following:</p>
<pre dir="ltr">
*** DBNEWID utility started ***
DBNAME will be changed from PROD to new DBNAME of TEST_DB
Starting datafile conversion
Datafile conversion complete
Database name changed to TEST_DB.
Modify parameter file and generate a new password file before restarting.
Successfully changed database name.
*** DBNEWID utility finished successfully ***
 
In case of failure during DBNEWID the alert will also log the failure:
*** DBNEWID utility started ***
DBID will be changed from 86997811 to new DBID of 86966847 for database
AV3
Change of database ID failed.
Must finish change or REVERT changes before attempting any database
operation.
*** DBNEWID utility finished with errors ***
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1004965"></a>
<div id="SUTIL1548" class="sect1">
<h2 class="sect1">DBNEWID Syntax<a id="sthref1522"></a></h2>
<p>The following diagrams show the syntax for the DBNEWID utility.</p>
<img width="676" height="346" src="img/nid.gif" alt="Description of nid.gif follows" /><br />
<a id="sthref1523" href="img_text/nid.htm">Description of the illustration ''nid.gif''</a><br />
<br />
<div id="SUTIL1549" class="sect2"><a id="sthref1524"></a>
<h3 class="sect2">Parameters</h3>
<p><a href="#g1008264">Table 18-1</a> describes the parameters in the DBNEWID syntax.</p>
<div id="SUTIL3612" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref1525"></a><a id="g1008264"></a>Table 18-1 Parameters for the DBNEWID Utility</p>
<table class="cellalignment1399" title="Parameters for the DBNEWID Utility" summary="Descriptions of parameters for the DBNEWID utility" dir="ltr">
<thead>
<tr class="cellalignment1388">
<th class="cellalignment1395" id="r1c1-t5">Parameter</th>
<th class="cellalignment1395" id="r1c2-t5">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r2c1-t5" headers="r1c1-t5">
<p><code dir="ltr">TARGET</code></p>
</td>
<td class="cellalignment1396" headers="r2c1-t5 r1c2-t5">
<p>Specifies the username and password used to connect to the database. The user must have the <code dir="ltr">SYSDBA</code> privilege. If you are using operating system authentication, then you can connect with the slash (<code dir="ltr">/</code>). If the <code dir="ltr">$ORACLE_HOME</code> and <code dir="ltr">$ORACLE_SID</code> variables are not set correctly in the environment, then you can specify a secure (IPC or BEQ) service to connect to the target database. A target database must be specified in all invocations of the DBNEWID utility.</p>
</td>
</tr>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r3c1-t5" headers="r1c1-t5">
<p><code dir="ltr">REVERT</code></p>
</td>
<td class="cellalignment1396" headers="r3c1-t5 r1c2-t5">
<p>Specify <code dir="ltr">YES</code> to indicate that a failed change of DBID should be reverted (default is <code dir="ltr">NO</code>). The utility signals an error if no change DBID operation is in progress on the target database. A successfully completed change of DBID cannot be reverted. <code dir="ltr">REVERT=YES</code> is valid only when a DBID change failed.</p>
</td>
</tr>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r4c1-t5" headers="r1c1-t5">
<p><code dir="ltr">DBNAME=</code><code dir="ltr"><span class="codeinlineitalic">new_db_name</span></code></p>
</td>
<td class="cellalignment1396" headers="r4c1-t5 r1c2-t5">
<p>Changes the database name of the database. You can change the DBID and the DBNAME of a database at the same time. To change only the DBNAME, also specify the <code dir="ltr">SETNAME</code> parameter.</p>
</td>
</tr>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r5c1-t5" headers="r1c1-t5">
<p><code dir="ltr">SETNAME</code></p>
</td>
<td class="cellalignment1396" headers="r5c1-t5 r1c2-t5">
<p>Specify <code dir="ltr">YES</code> to indicate that DBNEWID should change the database name of the database but should not change the DBID (default is <code dir="ltr">NO</code>). When you specify <code dir="ltr">SETNAME=YES</code>, the utility writes only to the target database control files.</p>
</td>
</tr>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r6c1-t5" headers="r1c1-t5">
<p><code dir="ltr">LOGFILE=</code><code dir="ltr"><span class="codeinlineitalic">logfile</span></code></p>
</td>
<td class="cellalignment1396" headers="r6c1-t5 r1c2-t5">
<p>Specifies that DBNEWID should write its messages to the specified file. By default the utility overwrites the previous log. If you specify a log file, then DBNEWID does not prompt for confirmation.</p>
</td>
</tr>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r7c1-t5" headers="r1c1-t5">
<p><code dir="ltr">APPEND</code></p>
</td>
<td class="cellalignment1396" headers="r7c1-t5 r1c2-t5">
<p>Specify <code dir="ltr">YES</code> to append log output to the existing log file (default is <code dir="ltr">NO</code>).</p>
</td>
</tr>
<tr class="cellalignment1388">
<td class="cellalignment1396" id="r8c1-t5" headers="r1c1-t5">
<p><code dir="ltr">HELP</code></p>
</td>
<td class="cellalignment1396" headers="r8c1-t5 r1c2-t5">
<p>Specify <code dir="ltr">YES</code> to print a list of the DBNEWID syntax options (default is <code dir="ltr">NO</code>).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" --></div>
<!-- class="sect2" -->
<div id="SUTIL1550" class="sect2"><a id="sthref1526"></a>
<h3 class="sect2">Restrictions<a id="sthref1527"></a> and Usage Notes</h3>
<p>The DBNEWID utility has the following restrictions:</p>
<ul>
<li>
<p>To change the DBID of a database, the database must be mounted and must have been shut down consistently before mounting. In the case of an Oracle Real Application Clusters database, the database must be mounted in <code dir="ltr">NOPARALLEL</code> mode.</p>
</li>
<li>
<p>You must open the database with the <code dir="ltr">RESETLOGS</code> option after changing the DBID. However, you do not have to open with the <code dir="ltr">RESETLOGS</code> option after changing only the database name.</p>
</li>
<li>
<p>No other process should be running against the database when DBNEWID is executing. If another session shuts down and starts the database, then DBNEWID terminates unsuccessfully.</p>
</li>
<li>
<p>All online data files should be consistent without needing recovery.</p>
</li>
<li>
<p>Normal offline data files should be accessible and writable. If this is not the case, then you must drop these files before invoking the DBNEWID utility.</p>
</li>
<li>
<p>All read-only tablespaces must be accessible and made writable at the operating system level before invoking DBNEWID. If these tablespaces cannot be made writable (for example, they are on a CD-ROM), then you must unplug the tablespaces using the transportable tablespace feature and then plug them back in the database before invoking the DBNEWID utility (see the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>).</p>
</li>
<li>
<p>The DBNEWID utility does not change global database names. See <a href="#i1006150">"Considerations for Global Database Names"</a>.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="SUTIL1551" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1528"></a>
<h3 class="sect2">Additional Restrictions for Releases Earlier Than Oracle Database 10<span class="italic">g</span></h3>
<p>The following additional restrictions apply if the DBNEWID utility is run against an Oracle Database release earlier than 10.1:</p>
<ul>
<li>
<p>The <code dir="ltr">nid</code> executable file should be owned and run by the Oracle owner because it needs direct access to the data files and control files. If another user runs the utility, then set the user ID to the owner of the data files and control files.</p>
</li>
<li>
<p>The DBNEWID utility must access the data files of the database directly through a local connection. Although DBNEWID can accept a net service name, it cannot change the DBID of a nonlocal database.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1387">
<tr>
<td class="cellalignment1396">
<table class="cellalignment1392">
<tr>
<td class="cellalignment1391"><a href="dbverify.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1391"><a href="logminer.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2018,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1398">
<table class="cellalignment1390">
<tr>
<td class="cellalignment1391"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1391"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1391"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1391"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1391"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1391"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
