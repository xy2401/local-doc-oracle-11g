<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>External Tables Concepts</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1093" />
<meta name="dcterms.created" content="2018-03-26T15:55:5Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Utilities" />
<meta name="dcterms.identifier" content="E22490-08" />
<meta name="dcterms.isVersionOf" content="SUTIL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2018,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="part_et.htm" title="Previous" type="text/html" />
<link rel="Next" href="et_params.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e22490.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">23/36</span> <!-- End Header -->
<div id="SUTIL011" class="chapter"><a id="g1017623"></a> <a id="i1009391"></a>
<h1 class="chapter"><span class="secnum">13</span> External Tables Concepts</h1>
<p>The external tables feature is a complement to existing SQL*Loader functionality. It enables you to access data in external sources<a id="sthref1264"></a> as if it were in a table in the database.</p>
<p>Note that SQL*Loader may be the better choice in data loading situations that require additional indexing of the staging table. See <a href="ldr_concepts.htm#CHDGDGFC">"Behavior Differences Between SQL*Loader and External Tables"</a> for more information about how load behavior differs between SQL*Loader and external tables.</p>
<p>This chapter discusses the following topics:</p>
<ul>
<li>
<p><a href="#i1009127">How Are External Tables Created?</a></p>
</li>
<li>
<p><a href="#i1009367">Datatype Conversion During External Table Use</a></p>
</li>
<li>
<p><a href="#i1009380">External Table Restrictions</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN01507" href="../../server.112/e25494/tables.htm#ADMIN01507"><span class="italic">Oracle Database Administrator's Guide</span></a> for additional information about creating and managing external tables</div>
<a id="i1009127"></a>
<div id="SUTIL1357" class="sect1">
<h2 class="sect1">How Are External Tables Created?</h2>
<p>External tables are created using the SQL <code dir="ltr">CREATE</code> <code dir="ltr">TABLE...ORGANIZATION EXTERNAL</code> statement. When you create an external table, you specify the following attributes:</p>
<ul>
<li>
<p><code dir="ltr">TYPE</code> - specifies the type of external table. The two available types are the <code dir="ltr">ORACLE_LOADER</code> type and the <code dir="ltr">ORACLE_DATAPUMP</code> type. Each type of external table is supported by its own access driver.</p>
<ul>
<li>
<p>The <code dir="ltr">ORACLE_LOADER</code> access driver is the default. It loads data from external tables to internal tables. The data must come from text data files. (The <code dir="ltr">ORACLE_LOADER</code> access driver cannot perform unloads; that is, it cannot move data from an internal table to an external table.)</p>
</li>
<li>
<p>The <code dir="ltr">ORACLE_DATAPUMP</code> access driver can perform both loads and unloads. The data must come from binary dump files. Loads to internal tables from external tables are done by fetching from the binary dump files. Unloads from internal tables to external tables are done by populating the binary dump files of the external table. The <code dir="ltr">ORACLE_DATAPUMP</code> access driver can write dump files only as part of creating an external table with the SQL <code dir="ltr">CREATE TABLE AS SELECT</code> statement. Once the dump file is created, it can be read any number of times, but it cannot be modified (that is, no DML operations can be performed).</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">DEFAULT</code> <code dir="ltr">DIRECTORY</code> - specifies the default directory to use for all input and output files that do not explicitly name a directory object. The location is specified with a directory object, not a directory path. You must create the directory object before you create the external table; otherwise, an error is generated. See <a href="#i1009094">"Location of Data Files and Output Files"</a> for more information.</p>
</li>
<li>
<p><code dir="ltr">ACCESS</code> <code dir="ltr">PARAMETERS</code> - describe the external data source and implements the type of external table that was specified. Each type of external table has its own access driver that provides access parameters unique to that type of external table. Access parameters are optional. See <a href="#i1009331">"Access Parameters"</a>.</p>
</li>
<li>
<p><code dir="ltr">LOCATION</code> - specifies the data files for the external table. The files are named in the form <code dir="ltr"><span class="codeinlineitalic">directory:file</span></code>. The <code dir="ltr"><span class="codeinlineitalic">directory</span></code> portion is optional. If it is missing, then the default directory is used as the directory for the file.</p>
</li>
</ul>
<p>The following example shows the use of each of these attributes (it assumes that the default directory <code dir="ltr">def_dir1</code> already exists):</p>
<pre dir="ltr">
SQL&gt; CREATE TABLE emp_load
  2    (employee_number      CHAR(5),
  3     employee_dob         CHAR(20),
  4     employee_last_name   CHAR(20),
  5     employee_first_name  CHAR(15),
  6     employee_middle_name CHAR(15),
  7     employee_hire_date   DATE)
  8  ORGANIZATION EXTERNAL
  9    (<span class="bold">TYPE</span> ORACLE_LOADER
 10     <span class="bold">DEFAULT DIRECTORY</span> def_dir1
 11     <span class="bold">ACCESS PARAMETERS</span>
 12       (RECORDS DELIMITED BY NEWLINE
 13        FIELDS (employee_number      CHAR(2),
 14                employee_dob         CHAR(20),
 15                employee_last_name   CHAR(18),
 16                employee_first_name  CHAR(11),
 17                employee_middle_name CHAR(11),
 18                employee_hire_date   CHAR(10) date_format DATE mask "mm/dd/yyyy"
 19               )
 20       )
 21     <span class="bold">LOCATION</span> ('info.dat')
 22    );
 
Table created.
</pre>
<p>The information you provide through the access driver ensures that data from the data source is processed so that it matches the definition of the external table. The fields listed after <code dir="ltr">CREATE</code> <code dir="ltr">TABLE</code> <code dir="ltr">emp_load</code> are actually defining the metadata for the data in the <code dir="ltr">info</code>.<code dir="ltr">dat</code> source file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="et_params.htm#CIHCHGCE">"Example: Creating and Loading an External Table Using ORACLE_LOADER"</a></div>
<a id="i1009094"></a>
<div id="SUTIL1359" class="sect2">
<h3 class="sect2">Location of Data Files and Output Files</h3>
<p>The access driver runs inside the database server. This is different from SQL*Loader, which is a client program that sends the data to be loaded over to the server. This difference has the following implications:</p>
<ul>
<li>
<p>The server must have access to any files to be loaded by the access driver.</p>
</li>
<li>
<p>The server must create and write the output files created by the access driver: the log file, bad file, discard file, and also any dump files created by the <code dir="ltr">ORACLE_DATAPUMP</code> access driver.</p>
</li>
</ul>
<p>The access driver requires that a directory object be used to specify the location from which to read and write files. A directory object maps a name to a directory name on the file system. For example, the following statement creates a directory object named <code dir="ltr">ext_tab_dir</code> that is mapped to a directory located at <code dir="ltr">/usr/apps/datafiles.</code></p>
<pre dir="ltr">
CREATE DIRECTORY ext_tab_dir AS '/usr/apps/datafiles';
</pre>
<p>Directory objects can be created by DBAs or by any user with the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">DIRECTORY</code> privilege.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To use external tables in an Oracle Real Applications Cluster (Oracle RAC) configuration, you must ensure that the directory object path is on a cluster-wide file system.</div>
<p>After a directory is created, the user creating the directory object needs to grant <code dir="ltr">READ</code> and <code dir="ltr">WRITE</code> privileges on the directory to other users. These privileges must be explicitly granted, rather than assigned through the use of roles. For example, to allow the server to read files on behalf of user <code dir="ltr">scott</code> in the directory named by <code dir="ltr">ext_tab_dir</code>, the user who created the directory object must execute the following command:</p>
<pre dir="ltr">
GRANT READ ON DIRECTORY ext_tab_dir TO scott;
</pre>
<p>The <code dir="ltr">SYS</code> user is the only user that can own directory objects, but the <code dir="ltr">SYS</code> user can grant other users the privilege to create directory objects. Note that <code dir="ltr">READ</code> or <code dir="ltr">WRITE</code> permission to a directory object means only that the Oracle database will read or write that file on your behalf. You are not given direct access to those files outside of the Oracle database unless you have the appropriate operating system privileges. Similarly, the Oracle database requires permission from the operating system to read and write files in the directories.</p>
</div>
<!-- class="sect2" -->
<a id="i1009331"></a>
<div id="SUTIL1358" class="sect2">
<h3 class="sect2">Access Parameters</h3>
<p>When you create an external table of a particular type, you can specify access parameters to modify the default behavior of the access driver. Each access driver has its own syntax for access parameters. Oracle provides two access drivers for use with external tables: <code dir="ltr">ORACLE_LOADER</code> and <code dir="ltr">ORACLE_DATAPUMP</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
These access parameters are collectively referred<a id="sthref1265"></a><a id="sthref1266"></a><a id="sthref1267"></a> to as the <code dir="ltr">opaque_format_spec</code> in the SQL <code dir="ltr">CREATE TABLE...ORGANIZATION EXTERNAL</code> statement.</div>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a href="et_params.htm#g1031955">Chapter 14, "The ORACLE_LOADER Access Driver"</a></p>
</li>
<li>
<p><a href="et_dp_driver.htm#g1017944">Chapter 15, "The ORACLE_DATAPUMP Access Driver"</a></p>
</li>
<li>
<p><a class="olink SQLRF01402" href="../../server.112/e41084/statements_7002.htm#SQLRF01402"><span class="italic">Oracle Database SQL Language Reference</span></a> for information about specifying <code dir="ltr">opaque_format_spec</code> when using the SQL <code dir="ltr">CREATE TABLE</code> statement</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1009367"></a>
<div id="SUTIL1365" class="sect1">
<h2 class="sect1">Datatype Conversion During External Table Use</h2>
<p>When data is moved into or out of an external table, it is possible that the same column will have a different datatype in each of the following three places:</p>
<ul>
<li>
<p>The database: This is the source when data is unloaded <span class="italic">into</span> an external table and it is the destination when data is loaded <span class="italic">from</span> an external table.</p>
</li>
<li>
<p>The external table: When data is unloaded into an external table, the data from the database is converted, if necessary, to match the datatype of the column in the external table. Also, you can apply SQL operators to the source data to change its datatype before the data gets moved to the external table. Similarly, when loading from the external table into a database, the data from the external table is automatically converted to match the datatype of the column in the database. Again, you can perform other conversions by using SQL operators in the SQL statement that is selecting from the external table. For better performance, the datatypes in the external table should match those in the database.</p>
</li>
<li>
<p>The data file: When you unload data into an external table, the datatypes for fields in the data file exactly match the datatypes of fields in the external table. However, when you load data from the external table, the datatypes in the data file may not match the datatypes in the external table. In this case, the data from the data file is converted to match the datatypes of the external table. If there is an error converting a column, then the record containing that column is not loaded. For better performance, the datatypes in the data file should match the datatypes in the external table.</p>
</li>
</ul>
<p>Any conversion errors that occur between the data file and the external table cause the row with the error to be ignored. Any errors between the external table and the column in the database (including conversion errors and constraint violations) cause the entire operation to terminate unsuccessfully.</p>
<p>When data is unloaded into an external table, data conversion occurs if the datatype of a column in the source table does not match the datatype of the column in the external table. If a conversion error occurs, then the data file may not contain all the rows that were processed up to that point and the data file will not be readable. To avoid problems with conversion errors causing the operation to fail, the datatype of the column in the external table should match the datatype of the column in the database. This is not always possible, because external tables do not support all datatypes. In these cases, the unsupported datatypes in the source table must be converted into a datatype that the external table can support. For example, if a source table named <code dir="ltr">LONG_TAB</code> has a <code dir="ltr">LONG</code> column, then the corresponding column in the external table being created, <code dir="ltr">LONG_TAB_XT</code>, must be a <code dir="ltr">CLOB</code> and the <code dir="ltr">SELECT</code> subquery that is used to populate the external table must use the <code dir="ltr">TO_LOB</code> operator to load the column:</p>
<pre dir="ltr">
CREATE TABLE LONG_TAB_XT (LONG_COL CLOB) ORGANIZATION EXTERNAL...SELECT TO_LOB(LONG_COL) FROM LONG_TAB;
</pre></div>
<!-- class="sect1" -->
<a id="i1009380"></a>
<div id="SUTIL1371" class="sect1">
<h2 class="sect1">External Table Restrictions<a id="sthref1268"></a></h2>
<p>This section lists what the external tables feature does <span class="italic">not</span> do and also describes some processing restrictions.</p>
<ul>
<li>
<p>Exporting and importing of external tables with encrypted columns is not supported.</p>
</li>
<li>
<p>An external table does not describe any data that is stored in the database.</p>
</li>
<li>
<p>An external table does not describe how data is stored in the external source. This is the function of the access parameters.</p>
</li>
<li>
<p>Column processing: By default, the external tables feature fetches all columns defined for an external table. This guarantees a consistent result set for all queries. However, for performance reasons you can decide to process only the referenced columns of an external table, thus minimizing the amount of data conversion and data handling required to execute a query. In this case, a row that is rejected because a column in the row causes a datatype conversion error will not get rejected in a different query if the query does not reference that column. You can change this column-processing behavior with the <code dir="ltr">ALTER TABLE</code> command.</p>
</li>
<li>
<p>An external table cannot load data into a <code dir="ltr">LONG</code> column.</p>
</li>
<li>
<p>SQL string<a id="sthref1269"></a>s cannot be specified in access parameters for the <code dir="ltr">ORACLE_LOADER</code> access driver. As a workaround, you can use the <code dir="ltr">DECODE</code> clause in the <code dir="ltr">SELECT</code> clause of the statement that is reading the external table. Alternatively, you can create a view of the external table that uses the <code dir="ltr">DECODE</code> clause and select from that view rather than the external table.</p>
</li>
<li>
<p>When<a id="sthref1270"></a><a id="sthref1271"></a> identifiers (for example, column or table names) are specified in the external table access parameters, certain values are considered to be reserved words by the access parameter parser. If a reserved word is used as an identifier, then it must be enclosed in double quotation marks.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="et_params.htm#CIHDEGDD">"Restrictions When Using the ORACLE_LOADER Access Driver"</a></p>
</li>
<li>
<p><a href="et_dp_driver.htm#CHDIJHHF">"Restrictions When Using the ORACLE_DATAPUMP Access Driver"</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1387">
<tr>
<td class="cellalignment1396">
<table class="cellalignment1392">
<tr>
<td class="cellalignment1391"><a href="part_et.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1391"><a href="et_params.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2018,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1398">
<table class="cellalignment1390">
<tr>
<td class="cellalignment1391"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1391"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1391"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1391"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1391"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1391"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
