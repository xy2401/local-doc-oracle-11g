<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Getting Started with Oracle Database Vault</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1088" />
<meta name="dcterms.created" content="2016-11-14T16:25:10Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Vault Administrator's Guide" />
<meta name="dcterms.identifier" content="E23090-13" />
<meta name="dcterms.isVersionOf" content="DVADM" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2006, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="dv_impact.htm" title="Previous" type="text/html" />
<link rel="Next" href="cfrealms.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23090.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/31</span> <!-- End Header -->
<div id="DVADM002" class="chapter"><a id="BABGDFFF"></a>
<h1 class="chapter"><span class="secnum">3</span> Getting Started with Oracle Database Vault</h1>
<p>This chapter contains:</p>
<ul>
<li>
<p><a href="#CIHJHBDE">Registering (Enabling) Oracle Database Vault</a></p>
</li>
<li>
<p><a href="#BABJHBBF">Starting Oracle Database Vault</a></p>
</li>
<li>
<p><a href="#BABEABCH">Quick Start Tutorial: Securing a Schema from DBA Access</a></p>
</li>
</ul>
<a id="CIHJHBDE"></a>
<div id="DVADM30031" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Registering (Enabling) Oracle Database Vault</h2>
<p>After <a id="sthref58"></a><a id="sthref59"></a>you install Oracle Database, you must register (that is, enable) Oracle Database Vault. Oracle Database includes Database Vault by default, but you must register it before you can use it. As part of the registration process, you create the Database Vault administrative accounts. The registration process also creates the Database Vault <code dir="ltr">DVSYS</code> and <code dir="ltr">DVF</code> schemas. This procedure applies to both single-instance and Oracle RAC installations. To check if Database Vault has already been enabled, see <a href="dvdisabl.htm#BJEGEFDA">"Checking if Oracle Database Vault Is Enabled or Disabled"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot enable Oracle Database Vault by using scripts that have been generated by <a id="sthref60"></a>Database Configuration Assistant (DBCA).</div>
<ol>
<li>
<p>Ensure that the computer on which you want to register Oracle Database Vault has the Oracle Enterprise Manager Database Console available.</p>
<p>You can check the status of the Database Console by running the <code dir="ltr">emctl status dbconsole</code> command. For example:</p>
<pre dir="ltr">
./emctl status dbconsole
</pre></li>
<li>
<p>Stop the database, Database Control console process, and listener.</p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Connect as user <code dir="ltr">SYS</code> with the <code dir="ltr">SYSOPER</code> privilege and shut down the database. Then from the command line, stop the Database Console process and listener.</p>
<p>For example:</p>
<pre dir="ltr">
CONNECT sys as sysoper
Enter password: <span class="italic">password</span>

SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; EXIT

$ emctl stop dbconsole
$ lsnrctl stop [<span class="italic">listener_name</span>]
</pre>
<p>For Oracle RAC installations, shut down each database instance as follows:</p>
<pre dir="ltr">
$ srvctl stop database -d <span class="italic">db_name</span>
</pre></li>
<li>
<p><span class="bold">Windows:</span> Stop the database, Database Control console process, and listener from the Services tool in the Control Panel. The names of Oracle Database services begin with <code dir="ltr">Oracle</code>.</p>
</li>
</ul>
</li>
<li>
<p>Enable Oracle Database Vault as follows:</p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Run the following commands. The <code dir="ltr">make</code> command enables both Oracle Database Vault (<code dir="ltr">dv_on</code>) and Oracle Label Security (<code dir="ltr">lbac_on</code>). You must enable Oracle Label Security before you can use Database Vault.</p>
<pre dir="ltr">
$ cd $ORACLE_HOME/rdbms/lib
$ make -f ins_rdbms.mk dv_on lbac_on ioracle
</pre>
<p>If you want to use the RDS protocol for Oracle Exadata storage, then use the following commands to enable Database Vault and Label Security.</p>
<pre dir="ltr">
$ cd $ORACLE_HOME/rdbms/lib
$ make &ndash;f ins_rdbms.mk dv_on lbac_on ipc_rds ioracle
</pre></li>
<li>
<p><span class="bold">Windows:</span> In the <code dir="ltr"><span class="codeinlineitalic">ORACLE_BASE\ORACLE_HOME</span></code><code dir="ltr">\bin</code> directory, rename the <code dir="ltr">oradvll.dll.dbl</code> file to <code dir="ltr">oradvll.dll</code>. Ensure that the name of the Oracle Label Security executable is <code dir="ltr">oralbacll.dll</code> (and not oralbacll.dll.dbl or some other backup name). You must enable Oracle Label Security before you can use Database Vault.</p>
</li>
</ul>
</li>
<li>
<p>Restart the database and listener. (Do not restart the Database Control console process yet.)</p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Log in to SQL*Plus as user <code dir="ltr">SYS</code> with the <code dir="ltr">SYSOPER</code> privilege and restart the database. Then from the command line, restart the listener.</p>
<p>For example:</p>
<pre dir="ltr">
sqlplus sys as sysoper
Enter password: <span class="italic">password</span>

SQL&gt; STARTUP
SQL&gt; EXIT

$ lsnrctl start [<span class="italic">listener_name</span>]
</pre>
<p>For Oracle RAC installations, restart each database instance as follows:</p>
<pre dir="ltr">
$ srvctl start database -d <span class="italic">db_name</span>
</pre></li>
<li>
<p><span class="bold">Windows:</span> Restart the database and listener from the Services tool in the Control Panel. The names of Oracle Database services begin with <code dir="ltr">Oracle</code>.</p>
</li>
</ul>
</li>
<li>
<p>Start Database Configuration Assistant.</p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Enter the following command at a terminal window:</p>
<pre dir="ltr">
dbca
</pre>
<p>By default, <code dir="ltr">dbca</code> is in the <code dir="ltr">$ORACLE_HOME/bin</code> directory.</p>
</li>
<li>
<p><span class="bold">Windows:</span> From the <span class="bold">Start</span> menu, click <span class="bold">All Programs</span>. Then, click <span class="bold">Oracle -</span> <span class="bolditalic">ORACLE_HOME</span>, <span class="bold">Configuration and Migration Tools</span>, and then <span class="bold">Database Configuration Assistant</span>.</p>
<p>Alternatively, you can start Database Configuration Assistant at a command prompt:</p>
<pre dir="ltr">
dbca
</pre>
<p>As with UNIX, typically, <code dir="ltr">dbca</code> is in the <code dir="ltr"><span class="codeinlineitalic">ORACLE_BASE</span></code><code dir="ltr">\</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_HOME</span></code><code dir="ltr">\bin</code> directory.</p>
</li>
</ul>
</li>
<li>
<p>In the Welcome page, click <span class="bold">Next</span>.</p>
<p>The Operations page appears.</p>
</li>
<li>
<p>Select <span class="bold">Configure Database Options</span>, and then click <span class="bold">Next</span>.</p>
<p>The Database page appears.</p>
</li>
<li>
<p>From the list, select the database where you installed Oracle Database and then click <span class="bold">Next</span>.</p>
<p>The Database Content page appears.</p>
</li>
<li>
<p>Perform one of the following actions:</p>
<ul>
<li>
<p><span class="bold">If Oracle Label Security is already enabled:</span> Select the <span class="bold">Oracle Database Vault</span> option, and then click <span class="bold">Next</span>.</p>
</li>
<li>
<p><span class="bold">If Oracle Label Security is not enabled:</span> Select the <span class="bold">Oracle Label Security</span> option so that the <span class="bold">Oracle Database Vault</span> option becomes available for selection. Select the <span class="bold">Oracle Database Vault</span> option as well, and then click <span class="bold">Next</span>.</p>
</li>
</ul>
<p>The Oracle Database Vault Credentials page appears.</p>
</li>
<li>
<p>Specify the name and password for the Database Vault Owner account (for example, <code dir="ltr">DBVOWNER</code>) and the Database Vault Account Manager (for example, <code dir="ltr">DBVACCTMGR</code>).</p>
<p>Do not enter the names <code dir="ltr">DV_OWNER</code>, <code dir="ltr">DV_ACCTMGR</code>, or the names of any other Database Vault roles for these user accounts. These names are reserved words. <a href="db_objects.htm#BABHBCCH">"Oracle Database Vault Roles"</a> describes the Database Vault roles.</p>
<p>Enter any password that is secure, according to the password guidelines described in <a class="olink DBSEG33223" href="../../network.112/e36292/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a>. Oracle Database Vault has additional password requirements, which are displayed if you try to create an incorrect password.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Connection Mode page appears.</p>
</li>
<li>
<p>Select either <span class="bold">Dedicated Server Mode</span> or <span class="bold">Shared Server Mode</span> (depending on the selection you made when you created this database), click <span class="bold">Finish</span>, and then click <span class="bold">OK</span> in the confirmation prompts.</p>
<p>Database Configuration Assistant registers Oracle Database Vault, and then restarts the database instance.</p>
</li>
<li>
<p>Exit Database Configuration Assistant.</p>
</li>
<li id="CHDIGJJA">
<p>Restart the Database Control console process.</p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Run the following command:</p>
<pre dir="ltr">
$ emctl start dbconsole
</pre></li>
<li>
<p><span class="bold">Windows:</span> Restart the Database Control console process (for example, <code dir="ltr">OracleDBConsoleorcl</code> if the name of the database is <code dir="ltr">orcl</code>) from the Services tool in the Control Panel.</p>
</li>
</ul>
</li>
</ol>
<p>After you have registered Oracle Database Vault with an Oracle database, you can start Oracle Database Vault Administrator. See <a href="#BABJHBBF">"Starting Oracle Database Vault"</a> for more information.</p>
</div>
<!-- class="sect1" -->
<a id="BABJHBBF"></a>
<div id="DVADM30001" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Starting Oracle Database Vault</h2>
<p>This <a id="sthref61"></a><a id="sthref62"></a>section describes how to start Oracle Database Vault Administrator. This section contains:</p>
<ul>
<li>
<p><a href="#CIHIIJBD">Accessing the Oracle Database Vault Pages and DVA from Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CIHEEADF">Starting Oracle Database Vault Administrator</a></p>
</li>
</ul>
<a id="CIHIIJBD"></a>
<div id="DVADM70130" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Accessing the Oracle Database Vault Pages and DVA from Oracle Enterprise Manager</h3>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#CIHFBBCH">Accessing Oracle Database Vault Pages from Database Control</a></p>
</li>
<li>
<p><a href="#CIHHHABA">Accessing Oracle Database Vault Pages from Grid Control</a></p>
</li>
<li>
<p><a href="#CHDBAAFG">Accessing Database Vault Administrator from Database Control</a></p>
</li>
</ul>
<a id="CIHFBBCH"></a>
<div id="DVADM70131" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Accessing Oracle Database Vault Pages from Database Control</h4>
<p>From <a id="sthref63"></a>Database Control, you can use the Oracle Database Vault pages to monitor a Database Vault-enabled database and view Database Vault reports.</p>
<p>However, you cannot create policies or perform other Database Vault Administrator-related actions from Database Control. If you want to perform these tasks, use Database Vault Administrator, described under <a href="#CIHEEADF">"Starting Oracle Database Vault Administrator"</a>. If you want to propagate Database Vault policies to other Database Vault-enabled databases, see <a href="#CIHHHABA">"Accessing Oracle Database Vault Pages from Grid Control"</a>.</p>
<p>To access the Oracle Database Vault pages from Database Control:</p>
<ol>
<li>
<p>If necessary, register Oracle Database Vault.</p>
<p>If you have just installed Oracle Database Vault, you must register it with the database. See <a href="#CIHJHBDE">"Registering (Enabling) Oracle Database Vault"</a> for more information.</p>
</li>
<li>
<p>Start Database Control.</p>
<p>For example:</p>
<pre dir="ltr">
https://myserver.example.com:1158/em
</pre>
<p>See <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information on logging in to Oracle Enterprise Manager.</p>
</li>
<li>
<p>Log in to Database Control with the following information:</p>
<ul>
<li>
<p><span class="bold">Username:</span> Enter the name of a user who has been granted the appropriate Oracle Database Vault role:</p>
<ul>
<li>
<p>Creating and propagating Database Vault policies: <code dir="ltr">DV_OWNER</code> or <code dir="ltr">DV_ADMIN</code></p>
</li>
<li>
<p>Viewing Database Vault alerts and reports: <code dir="ltr">DV_OWNER</code>, <code dir="ltr">DV_ADMIN</code>, or <code dir="ltr">DV_SECANALYST</code></p>
</li>
<li>
<p>Creating and managing user accounts and roles: <code dir="ltr">DV_ACCTMGR</code></p>
</li>
</ul>
<p>The Oracle Database Vault roles do not need any additional privileges (such as <code dir="ltr">SELECT ANY DICTIONARY</code>) to use Database Control.</p>
<p>See <a href="db_objects.htm#BABFGEGC">"About Oracle Database Vault Roles"</a> for more information about these roles.</p>
</li>
<li>
<p><span class="bold">Password:</span> Enter your password.</p>
</li>
<li>
<p><span class="bold">Connect As:</span> Select <span class="bold">Normal</span> from the list.</p>
</li>
<li>
<p><span class="bold">Save as Preferred Credential check box:</span> Select this check box if you want these credentials to be automatically filled in for you the next time that this page appears</p>
</li>
</ul>
</li>
<li>
<p>In the Home page, click <span class="bold">Server</span> to display the Server subpage.</p>
</li>
<li>
<p>Under Security, select <span class="bold">Database Vault</span>.</p>
<p>The Oracle Database Vault home page appears.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CIHHHABA"></a>
<div id="DVADM70132" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Accessing Oracle Database Vault Pages from Grid Control</h4>
<p>From<a id="sthref64"></a> Grid <a id="sthref65"></a>Control, you can use the Oracle Database Vault pages to propagate Database Vault policies to other Database Vault-protected databases, administer and monitor Database Vault-protected databases from a centralized console, automate alerts, and view Database Vault reports.</p>
<p>However, you cannot create policies or perform other Database Vault Administrator-related actions from Grid Control. If you want to perform these tasks, use Database Vault Administrator, described under <a href="#CIHEEADF">"Starting Oracle Database Vault Administrator"</a>.</p>
<p>To access the Oracle Database Vault pages from Grid Control:</p>
<ol>
<li>
<p>Ensure that you have configured the Grid Control target databases that you plan to use with Database Vault.</p>
<p>See the Oracle Enterprise Manager online help and <a class="olink OEMCG" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OEMCG"><span class="italic">Oracle Enterprise Manager Advanced Configuration</span></a> for more information about configuring target databases.</p>
</li>
<li>
<p>If necessary, register Oracle Database Vault.</p>
<p>If you have just installed Oracle Database Vault, you must register it with the database. See <a href="#CIHJHBDE">"Registering (Enabling) Oracle Database Vault"</a> for more information.</p>
</li>
<li>
<p>Start Grid Control.</p>
<p>For example:</p>
<pre dir="ltr">
https://myserver.example.com:1158/em
</pre>
<p>See <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information on logging in to Oracle Enterprise Manager.</p>
</li>
<li>
<p>Log in to Oracle Enterprise Manager as user <code dir="ltr">SYSMAN</code> and connect as <code dir="ltr">Normal</code>.</p>
</li>
<li>
<p>In the Oracle Enterprise Manager Database Home page (Database Home page), select the <span class="bold">Targets</span> subpage.</p>
</li>
<li>
<p>Select the <span class="bold">Databases</span> subpage.</p>
</li>
<li>
<p>In the Databases page, select the link for the Oracle Database Vault-protected database to which you want to connect.</p>
<p>The home page for the database instance appears.</p>
</li>
<li>
<p>In the Home page, click <span class="bold">Server</span> to display the Server subpage.</p>
</li>
<li>
<p>Under Security, select <span class="bold">Database Vault</span>.</p>
<p>The Database Login page appears.</p>
</li>
<li>
<p>Enter the following information:</p>
<ul>
<li>
<p><span class="bold">Username:</span> Enter the name of a user who has been granted the appropriate Oracle Database Vault role:</p>
<ul>
<li>
<p>Creating and propagating Database Vault policies: <code dir="ltr">DV_OWNER</code> or <code dir="ltr">DV_ADMIN</code></p>
</li>
<li>
<p>Viewing Database Vault alerts and reports: <code dir="ltr">DV_OWNER</code>, <code dir="ltr">DV_ADMIN</code>, or <code dir="ltr">DV_SECANALYST</code></p>
</li>
<li>
<p>Creating and managing user accounts and roles: <code dir="ltr">DV_ACCTMGR</code></p>
</li>
</ul>
<p>The Oracle Database Vault roles do not need any additional privileges (such as <code dir="ltr">SELECT ANY DICTIONARY</code>) to use Grid Control.</p>
<p>See <a href="db_objects.htm#BABFGEGC">"About Oracle Database Vault Roles"</a> for more information.</p>
</li>
<li>
<p><span class="bold">Password:</span> Enter your password.</p>
</li>
<li>
<p><span class="bold">Connect As:</span> Select <span class="bold">Normal</span> from the list.</p>
</li>
<li>
<p><span class="bold">Save as Preferred Credential check box:</span> Select this check box if you want these credentials to be automatically filled in for you the next time that this page appears</p>
</li>
</ul>
</li>
<li>
<p>Click the <span class="bold">Login</span> button.</p>
<p>The Database Vault home page appears.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dba.htm#CHDIBHIC">"Using Oracle Database Vault with Oracle Enterprise Manager"</a></div>
</div>
<!-- class="sect3" -->
<a id="CHDBAAFG"></a>
<div id="DVADM71156" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Accessing Database Vault Administrator from Database Control</h4>
<p>You can access Database Vault Administrator from Oracle Enterprise Manager Database Control.</p>
<ul>
<li>
<p><a href="#CHDGAEII">Step 1: Grant the DV_OWNER User the Appropriate Privileges</a></p>
</li>
<li>
<p><a href="#CHDJDJEF">Step 2: As the DV_OWNER User, Access Database Vault Administrator from Database Control</a></p>
</li>
</ul>
<p class="subhead2"><a id="CHDGAEII"></a><a id="DVADM71157"></a>Step 1: Grant the DV_OWNER User the Appropriate Privileges</p>
<ol>
<li>
<p>Start Database <a id="sthref66"></a>Control.<a id="sthref67"></a></p>
<p>For example:</p>
<pre dir="ltr">
https://myserver.example.com:1158/em
</pre>
<p>See <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information on logging in to Oracle Enterprise Manager.</p>
</li>
<li>
<p>Log into Database Control as the <code dir="ltr">SYSMAN</code> user or <code dir="ltr">SYSTEM</code>.</p>
<p>The Database home page appears.</p>
</li>
<li>
<p>In the top-right corner of the window, click the <span class="bold">Setup</span> button.</p>
</li>
<li>
<p>Select the <span class="bold">Administrators</span> link.</p>
</li>
<li>
<p>In the Administrators window, click the <span class="bold">Create</span> button.</p>
</li>
<li>
<p>In the Create Administrator window, do the following:</p>
<ul>
<li>
<p><span class="bold">User Name:</span> Enter the name of a user who has been granted the <code dir="ltr">DV_OWNER</code> role. You can query the <code dir="ltr">USER_ROLE_PRIVS</code> data dictionary view to find the roles that have been granted to users.</p>
</li>
<li>
<p><span class="bold">E-mail Address:</span> Optionally, enter this user's email address (but it is not required).</p>
</li>
<li>
<p><span class="bold">Administrator Privilege:</span> Select <span class="bold">View on All Targets</span>.</p>
</li>
<li>
<p><span class="bold">Grant SELECT_CATALOG_ROLE:</span> Uncheck this check box.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Review</span>.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="CHDJDJEF"></a><a id="DVADM71158"></a>Step 2: As the DV_OWNER User, Access Database Vault Administrator from Database Control</p>
<ol>
<li>
<p>If <a id="sthref68"></a>necessary, register Oracle Database Vault.<a id="sthref69"></a></p>
<p>If you have just installed Oracle Database Vault, you must register it with the database. See <a href="#CIHJHBDE">"Registering (Enabling) Oracle Database Vault"</a> for more information.</p>
</li>
<li>
<p>Log into Database Control as the <code dir="ltr">DV_OWNER</code> user who you configured in <a href="#CHDGAEII">"Step 1: Grant the DV_OWNER User the Appropriate Privileges"</a>.</p>
<p>The following message appears:</p>
<pre dir="ltr">
You have been logged in to a Database with Database Vault installed on it. As Database Vault enforces separation of duty you may not be able to use all the areas in EM. Please click the link below which will forward you to the area which you have access to. 
</pre></li>
<li>
<p>Click the <span class="bold">Database Vault</span> link.</p>
<p>The Database Vault home page appears.</p>
</li>
<li>
<p>Click the <span class="bold">Administration</span> tab.</p>
</li>
<li>
<p>Select an administrative option (such as <span class="bold">Realms</span>).</p>
</li>
<li>
<p>When prompted, enter the URL to Database Vault Administrator, using the following syntax:</p>
<pre dir="ltr">
https://<span class="italic">host_name</span>:<span class="italic">port</span>/dva
</pre>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">host_name</span></code>: The server and domain where you installed Oracle Database Vault</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">port</span></code>: The Oracle Enterprise Manager Console HTTPS port number</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">
https://myserver:1158/dva
</pre>
<p><a id="sthref70"></a><a id="sthref71"></a>If you are unsure of the port number, then open the <code dir="ltr">$ORACLE_HOME</code><code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">host_sid</span></code><code dir="ltr">/sysman/config/emd.properties</code> file and search for <code dir="ltr">REPOSITORY_URL</code>. In most cases, the host name and port number are the same as Oracle Enterprise Database Control.</p>
</li>
<li>
<p>Click <span class="bold">Save</span>.</p>
<p>The next time that you select any of the Database Vault policy options, Database Vault Administrator will start.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHEEADF"></a>
<div id="DVADM70133" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting Oracle Database Vault Administrator</h3>
<p>If <a id="sthref72"></a><a id="sthref73"></a>you are not using Oracle Enterprise Manager Database Control or Grid Control, or if you want to connect to Oracle Database Vault from a different computer, follow these steps to start Oracle Database Vault Administrator.</p>
<ol>
<li>
<p>If necessary, register Oracle Database Vault.</p>
<p>If you have just installed Oracle Database Vault, you must register it with the database. See <a href="#CIHJHBDE">"Registering (Enabling) Oracle Database Vault"</a> for more information.</p>
</li>
<li>
<p>From a browser, enter the following URL:</p>
<pre dir="ltr">
https://<span class="italic">host_name</span>:<span class="italic">port</span>/dva
</pre>
<p>In this specification:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">host_name</span></code>: The server where you installed Oracle Database Vault</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">port</span></code>: The Oracle Enterprise Manager Console HTTPS port number</p>
</li>
</ul>
<p>For example:</p>
<pre dir="ltr">
https://myserver:1158/dva
</pre>
<p><a id="sthref74"></a><a id="sthref75"></a>If you are unsure of the port number, then open the <code dir="ltr">$ORACLE_HOME</code><code dir="ltr">/</code><code dir="ltr"><span class="codeinlineitalic">host_sid</span></code><code dir="ltr">/sysman/config/emd.properties</code> file and search for <code dir="ltr">REPOSITORY_URL</code>. In most cases, the host name and port number are the same as Oracle Enterprise Database Control.</p>
<p><a id="sthref76"></a>If you cannot start Oracle Database Vault Administrator, check that the Oracle database console process is running. <code dir="ltr"><a id="sthref77"></a></code></p>
<ul>
<li>
<p><span class="bold">UNIX:</span> Go to the <code dir="ltr">$ORACLE_HOME/bin</code> directory and run the following command:</p>
<pre dir="ltr">
./emctl status dbconsole
</pre>
<p><a id="sthref78"></a>If you must start the <code dir="ltr"><a id="sthref79"></a>dbconsole</code> process, then run the following command:</p>
<pre dir="ltr">
./emctl start dbconsole
</pre></li>
<li>
<p><span class="bold">Windows:</span> In the Administrative Services, select the Services utility, and then right-click the <span class="bold">OracleDBConsole</span><span class="bolditalic">sid</span> service. If necessary, select <span class="bold">Start</span> from the menu to start the database console.</p>
</li>
</ul>
<p><a id="sthref80"></a><a id="sthref81"></a>Log files for the database are in the following directory:</p>
<pre dir="ltr">
$ORACLE_HOME/sysman/log
</pre></li>
<li>
<p>Log in by using the <a id="sthref82"></a><a id="sthref83"></a>Oracle Database Vault Owner account that you created during installation.</p>
<p>To log in, you must enter the full connect string. <a id="sthref84"></a>This enables you to manage multiple Oracle Database instances with Oracle Database Vault.</p>
<p>By default, you cannot log in to Oracle Database Vault Administrator by using the <code dir="ltr">SYS</code>, <code dir="ltr">SYSTEM</code>, or other administrative accounts. You can log in if you have the <code dir="ltr">DV_ADMIN</code> or <code dir="ltr">DV_OWNER</code> roles.</p>
<p>Enter the following values:</p>
<ul>
<li>
<p><span class="bold">User Name:</span> Enter the name of a user who has been granted the appropriate Oracle Database Vault role:</p>
<ul>
<li>
<p>Creating and managing Database Vault policies: <code dir="ltr">DV_OWNER</code> or <code dir="ltr">DV_ADMIN</code></p>
</li>
<li>
<p>Viewing Database Vault reports: <code dir="ltr">DV_OWNER</code>, <code dir="ltr">DV_ADMIN</code>, or <code dir="ltr">DV_SECANALYST</code></p>
</li>
<li>
<p>Creating and managing user accounts and roles: <code dir="ltr">DV_ACCTMGR</code></p>
</li>
</ul>
<p>See <a href="db_objects.htm#BABFGEGC">"About Oracle Database Vault Roles"</a> for more information.</p>
</li>
<li>
<p><span class="bold">Password:</span> Enter your password.</p>
</li>
<li>
<p><span class="bold">Host:</span> Enter the host name of the computer of the Oracle Database Vault installation you want. Use the following format:</p>
<pre dir="ltr">
<span class="italic">server</span>.<span class="italic">domain</span>
</pre>
<p>For example:</p>
<pre dir="ltr">
myserver-pc.us.example.com
</pre></li>
<li>
<p><span class="bold">Port:</span> Enter the port number for Oracle Database. The default port number is 1521. If you are unsure of the port number, check the <code dir="ltr">tnsnames.ora</code> file.</p>
<p>For example:</p>
<pre dir="ltr">
1521
</pre></li>
<li>
<p><span class="bold">SID/Service:</span> Select either <span class="bold">SID</span> or <span class="bold">Service</span>. You can find these values in the <code dir="ltr">tnsnames.ora</code> file. By default, this file is located in <code dir="ltr">$ORACLE_HOME/network/admin</code>.</p>
<ul>
<li>
<p><span class="bold">SID:</span> Enter the name of the Oracle Database instance. For example:</p>
<pre dir="ltr">
orcl
</pre></li>
<li>
<p><span class="bold">Service:</span> Enter the service name of the database instance, in the following format:</p>
<pre dir="ltr">
<span class="italic">service_name</span>.<span class="italic">domain</span>
</pre>
<p>For example:</p>
<pre dir="ltr">
orcl.us.example.com
</pre></li>
</ul>
</li>
</ul>
</li>
</ol>
<p><a href="#CIHJEHIE">Figure 3-1</a> shows the Oracle Database Vault Administrator home page, which appears after you log in.</p>
<div id="DVADM70134" class="figure">
<p class="titleinfigure"><a id="CIHJEHIE"></a>Figure 3-1 Oracle Database Vault Administrator Home Page</p>
<img width="580" height="482" src="img/home_page.gif" alt="Description of Figure 3-1 follows" /><br />
<a id="sthref85" href="img_text/home_page.htm">Description of ''Figure 3-1 Oracle Database Vault Administrator Home Page''</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABEABCH"></a>
<div id="DVADM70135" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Quick Start Tutorial: Securing a Schema from DBA Access</h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#CHDFAGBH">About This Tutorial</a></p>
</li>
<li>
<p><a href="#CIHICDCC">Step 1: Adding the SYSTEM User to the Data Dictionary Realm</a></p>
</li>
<li>
<p><a href="#CIHDBDEB">Step 2: Log On as SYSTEM to Access the HR Schema</a></p>
</li>
<li>
<p><a href="#CIHFHABC">Step 3: Create a Realm</a></p>
</li>
<li>
<p><a href="#CIHJADDJ">Step 4: Secure the EMPLOYEES Table in the HR Schema</a></p>
</li>
<li>
<p><a href="#CIHGDIJJ">Step 5: Create an Authorization for the Realm</a></p>
</li>
<li>
<p><a href="#BABJDAEG">Step 6: Test the Realm</a></p>
</li>
<li>
<p><a href="#CIHGHAED">Step 7: Run a Report</a></p>
</li>
<li>
<p><a href="#CIHFGIJE">Step 8: Remove the Components for This Tutorial</a></p>
</li>
</ul>
<a id="CHDFAGBH"></a>
<div id="DVADM71114" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About This Tutorial</h3>
<p>In <a id="sthref86"></a><a id="sthref87"></a>this tutorial, you create a simple security configuration for the <code dir="ltr">HR</code> sample database schema. In the <code dir="ltr">HR</code> schema, the <code dir="ltr">EMPLOYEES</code> table has information such as salaries that should be hidden from most employees in the company, including those with administrative access. To accomplish this, you add the <code dir="ltr">HR</code> schema to the secured objects of the protection zone, which in Oracle Database Vault is called a <span class="italic">realm</span>, inside the database. Then you grant limited authorizations to this realm. Afterward, you test the realm to make sure it has been properly secured. And finally, to see how Oracle Database Vault provides an audit trail on suspicious activities like the one you will try when you test the realm, you will run a report.</p>
<p>Before you can use this tutorial, ensure that the <code dir="ltr">HR</code> sample schema is installed. See <a class="olink COMSC" href="../e10831/toc.htm"><span class="italic">Oracle Database Sample Schemas</span></a> for information on installing the sample schemas.</p>
</div>
<!-- class="sect2" -->
<a id="CIHICDCC"></a>
<div id="DVADM70136" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 1: Adding the SYSTEM User to the Data Dictionary Realm</h3>
<p><a id="sthref88"></a><a id="sthref89"></a><a id="sthref90"></a>In this tutorial, the <code dir="ltr">SYSTEM</code> user grants the <code dir="ltr">ANY</code> privilege to a new user account, <code dir="ltr">SEBASTIAN</code>. To do this, you must include <code dir="ltr">SYSTEM</code> in the Oracle Data Dictionary realm.</p>
<p>To include <code dir="ltr">SYSTEM</code> in the Oracle Data Dictionary realm:</p>
<ol>
<li>
<p>Log in to Oracle Database Vault Administrator as a user who has been granted the <code dir="ltr">DV_OWNER</code> or <code dir="ltr">DV_ADMIN</code> role.</p>
<p><a href="#BABJHBBF">"Starting Oracle Database Vault"</a> explains how to log in.</p>
</li>
<li>
<p>In the Administration page, under Database Vault Feature Administration, click <span class="bold">Realms</span>.</p>
</li>
<li>
<p>In the Realms page, select <span class="bold">Oracle Data Dictionary</span> from the list and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>In the Edit Realm: Oracle Data Dictionary page, under Realm Authorizations, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Realm Authorization Page, from the Grantee list, select <span class="bold">SYSTEM [USER]</span>.</p>
</li>
<li>
<p>For Authorization Type, select <span class="bold">Owner</span>.</p>
</li>
<li>
<p>Leave Authorization Rule Set at <span class="bold">&lt;Non Selected&gt;</span>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>In the Edit Realm: Oracle Data Dictionary page, <code dir="ltr">SYSTEM</code> should be listed as an owner under the Realm Authorizations.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to return to the Realms page.</p>
</li>
<li>
<p>To return to the Administration page, click the <span class="bold">Database Instance</span> <span class="bolditalic">instance_name</span> link over Realms.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHDBDEB"></a>
<div id="DVADM70137" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 2: Log On as SYSTEM to Access the HR Schema</h3>
<p>Log in to SQL*Plus as user <code dir="ltr">SYSTEM</code> and access the <code dir="ltr">HR</code> schema.</p>
<pre dir="ltr">
sqlplus system
Enter password: <span class="italic">password</span>

SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt; 10;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">
FIRST_NAME           LAST_NAME                     SALARY
-------------------- ------------------------- ----------
Donald               OConnell                        2600
Douglas              Grant                           2600
Jennifer             Whalen                          4400
Michael              Hartstein                      13000
Pat                  Fay                             6000
Susan                Mavris                          6500
Hermann              Baer                           10000
Shelley              Higgins                        12000
William              Gietz                           8300
 
9 rows selected.
</pre>
<p>If the <code dir="ltr">HR</code> schema is locked and expired, log in to SQL*Plus as the <code dir="ltr">DV_ACCTMGR</code> user and unlock and unexpire the account. For example:</p>
<pre dir="ltr">
sqlplus amalcolm_dvacctmgr
Enter password: <span class="italic">password</span>

ALTER USER HR ACCOUNT UNLOCK IDENTIFIED BY <span class="italic">password</span>
</pre>
<p>Replace <code dir="ltr"><span class="codeinlineitalic">password</span></code> with a password that is secure. See <a class="olink DBSEG33223" href="../../network.112/e36292/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for the minimum requirements for creating passwords.</p>
<p>As you can see, <code dir="ltr">SYSTEM</code> has access to the salary information in the <code dir="ltr">EMPLOYEES</code> table of the <code dir="ltr">HR</code> schema. This is because <code dir="ltr">SYSTEM</code> is automatically granted the <code dir="ltr">DBA</code> role, which includes the <code dir="ltr">SELECT ANY TABLE</code> system privilege.</p>
</div>
<!-- class="sect2" -->
<a id="CIHFHABC"></a>
<div id="DVADM70138" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 3: Create a Realm</h3>
<p>Realms can protect one or more schemas, individual schema objects, and database roles. Once you create a realm, you can create security restrictions that apply to the schemas and their schema objects within the realm. Your first step is to create a realm for the <code dir="ltr">HR</code> schema.</p>
<ol>
<li>
<p>In the Realms page of Oracle Database Vault Administrator, click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Realm page, under General, enter <code dir="ltr">HR Realm</code> after <span class="bold">Name</span>.</p>
</li>
<li>
<p>After Status, ensure that <span class="bold">Enabled</span> is selected so that the realm can be used.</p>
</li>
<li>
<p>Under Audit Options, ensure that <span class="bold">Audit On Failure</span> is selected so that you can create an audit trial later on.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Realms Summary page appears, with HR Realm in the list of realms.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHJADDJ"></a>
<div id="DVADM70139" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 4: Secure the EMPLOYEES Table in the HR Schema</h3>
<p>At this stage, you are ready to add the <code dir="ltr">EMPLOYEES</code> table in the <code dir="ltr">HR</code> schema to the secured objects of the HR realm.</p>
<ol>
<li>
<p>In the Realms page, select <span class="bold">HR Realm</span> from the list and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>In the Edit Realm: HR Realm page, scroll to Realm Secured Objects and then click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Realm Secured Object page, enter the following settings:</p>
<ul>
<li>
<p><span class="bold">Object Owner:</span> Select <span class="bold">HR</span> from the list.</p>
</li>
<li>
<p><span class="bold">Object Type:</span> Select <span class="bold">TABLE</span> from the list</p>
</li>
<li>
<p><span class="bold">Object Name:</span> Enter <code dir="ltr">EMPLOYEES</code>.</p>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
<li>
<p>In the Edit Realm: HR Realm page, click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHGDIJJ"></a>
<div id="DVADM70140" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 5: Create an Authorization for the Realm</h3>
<p>At this stage, there are no database accounts or roles authorized to access or otherwise manipulate the database objects the realm will protect. So, the next step is to authorize database accounts or database roles so that they can have access to the schemas within the realm. You will create the <code dir="ltr">SEBASTIAN</code> user account. After you authorize him for the realm, <code dir="ltr">SEBASTIAN</code> can view and modify the <code dir="ltr">EMPLOYEES</code> table.</p>
<ol>
<li>
<p>In SQL*Plus, connect as the Database Vault Account Manager, who has the <code dir="ltr">DV_ACCTMGR</code> role, and create user <code dir="ltr">SEBASTIAN</code>.</p>
<p>For example:</p>
<pre dir="ltr">
CONNECT amalcolm_dvacctmgr
Enter password: <span class="italic">password</span>

CREATE USER SEBASTIAN IDENTIFIED BY <span class="italic">password</span>;
</pre>
<p>Replace <code dir="ltr"><span class="codeinlineitalic">password</span></code> with a password that is secure. See <a class="olink DBSEG33223" href="../../network.112/e36292/authentication.htm#DBSEG33223"><span class="italic">Oracle Database Security Guide</span></a> for the minimum requirements for creating passwords.</p>
</li>
<li>
<p>Connect as <code dir="ltr">SYSTEM</code> privilege, and then grant <code dir="ltr">SEBASTIAN</code> the following additional privileges.</p>
<pre dir="ltr">
CONNECT SYSTEM
Enter password: <span class="italic">password</span>

GRANT CREATE SESSION, SELECT ANY TABLE TO SEBASTIAN;
</pre></li>
</ol>
<p>Do not exit SQL*Plus; you will need it for <a href="#BABJDAEG">Step 6: Test the Realm</a>, when you test the realm.</p>
<p>At this stage, even though <code dir="ltr">SEBASTIAN</code> has the <code dir="ltr">SELECT ANY TABLE</code> privilege, he cannot select from the <code dir="ltr">HR.EMPLOYEES</code> table because it is protected by a realm.</p>
<p>Next, authorize user <code dir="ltr">SEBASTIAN</code> to have access to the HR Realm as follows:</p>
<ol>
<li>
<p>In the Realms page of Database Vault Administrator, select the <span class="bold">HR Realm</span> in the list of realms, and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>In the Edit Realm: HR Realm page, scroll down to Realm Authorizations and then click <span class="bold">Create</span>.</p>
</li>
<li>
<p>In the Create Realm Authorization page, under Grantee, select <span class="bold">SEBASTIAN[USER]</span> from the list.</p>
<p>If <code dir="ltr">SEBASTIAN</code> does not appear in the list, select the <span class="bold">Refresh</span> button in your browser.</p>
<p><code dir="ltr">SEBASTIAN</code> is the only user who has access to the <code dir="ltr">EMPLOYEES</code> table in the <code dir="ltr">HR</code> schema.</p>
</li>
<li>
<p>Under Authorization Type, select <span class="bold">Participant</span>.</p>
<p>The Participant authorization allows the user <code dir="ltr">SEBASTIAN</code> in the HR realm to manage access, manipulate, and create objects protected by the HR realm. In this case, the <code dir="ltr">HR</code> user and <code dir="ltr">SEBASTIAN</code> are the only users allowed to view the <code dir="ltr">EMPLOYEES</code> table.</p>
</li>
<li>
<p>Under Authorization Rule Set, select <span class="bold">&lt;Not Assigned&gt;</span>, because rule sets are not needed to govern this realm.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABJDAEG"></a>
<div id="DVADM70141" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 6: Test the Realm</h3>
<p>To test the realm, try accessing the <code dir="ltr">EMPLOYEES</code> table as a user other than <code dir="ltr">HR</code>. The <code dir="ltr">SYSTEM</code> account normally has access to all objects in the <code dir="ltr">HR</code> schema, but now that you have safeguarded the <code dir="ltr">EMPLOYEES</code> table with Oracle Database Vault, this is no longer the case.</p>
<p>In SQL*Plus, connect as <code dir="ltr">SYSTEM</code>, and then try accessing the salary information in the <code dir="ltr">EMPLOYEES</code> table again:</p>
<pre dir="ltr">
sqlplus system
Enter password: <span class="italic">password</span>

SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt;10;
</pre>
<p>The following output should appear:</p>
<pre dir="ltr">
Error at line 1:
ORA-01031: insufficient privileges
</pre>
<p><code dir="ltr">SYSTEM</code> no longer has access to the salary information in the <code dir="ltr">EMPLOYEES</code> table. However, user <code dir="ltr">SEBASTIAN</code> does have access to this information. Try the following:</p>
<pre dir="ltr">
CONNECT SEBASTIAN
Enter password: <span class="italic">password</span>

SELECT FIRST_NAME, LAST_NAME, SALARY FROM HR.EMPLOYEES WHERE ROWNUM &lt;10;
</pre>
<p>Output similar to the following appears:</p>
<pre dir="ltr">
FIRST_NAME           LAST_NAME                     SALARY
-------------------- ------------------------- ----------
Donald               OConnell                        2600
Douglas              Grant                           2600
Jennifer             Whalen                          4400
Michael              Hartstein                      13000
Pat                  Fay                             6000
Susan                Mavris                          6500
Hermann              Baer                           10000
Shelley              Higgins                        12000
William              Gietz                           8300
 
9 rows selected.
</pre></div>
<!-- class="sect2" -->
<a id="CIHGHAED"></a>
<div id="DVADM70142" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 7: Run a Report</h3>
<p>Because you enabled auditing on failure for the HR Realm, you can generate a report to find any security violations such as the one you attempted in <a href="#BABJDAEG">Step 6: Test the Realm</a>.</p>
<ol>
<li>
<p>In the Oracle Database Vault Administrator home page, click <span class="bold">Database Vault Reports</span>.</p>
<p>Before you can run the report, you must log in using an account that has the <code dir="ltr">DV_OWNER</code>, <code dir="ltr">DV_ADMIN</code>, or <code dir="ltr">DV_SECANALYST</code> role. Note that user <code dir="ltr">SEBASTIAN</code> cannot run the report, even if it affects his own realm. <a href="db_objects.htm#BABHBCCH">"Oracle Database Vault Roles"</a> describes these roles in detail. Currently, you should be logged in as the Database Vault Owner (<code dir="ltr">DV_OWNER</code>) account.</p>
</li>
<li>
<p>In the Database Vault Reports page, scroll down to Database Vault Auditing Reports and select <span class="bold">Realm Audit</span>.</p>
</li>
<li>
<p>Click <span class="bold">Run Report</span>.</p>
</li>
</ol>
<p>Oracle Database Vault generates a report listing the type of violation (in this case, the <code dir="ltr">SELECT</code> statement entered in the previous section), when and where it occurred, the login account who tried the violation, and what the violation was.</p>
</div>
<!-- class="sect2" -->
<a id="CIHFGIJE"></a>
<div id="DVADM70143" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Step 8: Remove the Components for This Tutorial</h3>
<ol>
<li>
<p>Remove the <code dir="ltr">SYSTEM</code> account from the Data Dictionary Realm.</p>
<ol>
<li>
<p>Ensure that you are logged on to Oracle Database Vault Administrator using a database account that has been granted the <code dir="ltr">DV_OWNER</code> role.</p>
</li>
<li>
<p>From the Administration page, select <span class="bold">Realms</span>.</p>
</li>
<li>
<p>From the list of realms, select Oracle Data Dictionary, and then click <span class="bold">Edit</span>.</p>
</li>
<li>
<p>Under Realm Authorizations, select <code dir="ltr">SYSTEM</code>.</p>
</li>
<li>
<p>Click <span class="bold">Remove</span>, and in the Confirmation window, click <span class="bold">Yes</span>.</p>
</li>
</ol>
</li>
<li>
<p>Delete the HR Realm.</p>
<ol>
<li>
<p>In the Realms page, select <code dir="ltr">HR Realm</code> from the list of realms.</p>
</li>
<li>
<p>Click <span class="bold">Remove</span>, and in the Confirmation window, click <span class="bold">Yes</span>.</p>
</li>
</ol>
</li>
<li>
<p>Drop user <code dir="ltr">SEBASTIAN</code>.</p>
<p>In SQL*Plus, log on as the Oracle Database Vault account manager (for example, <code dir="ltr">amalcolm_dvacctmgr</code>), and then drop <code dir="ltr">SEBASTIAN</code> as follows:</p>
<pre dir="ltr">
sqlplus amalcolm_dvacctmgr
Enter password: <span class="italic">password</span>

DROP USER SEBASTIAN;
</pre></li>
<li>
<p>If necessary, lock and expire the <code dir="ltr">HR</code> account.</p>
<pre dir="ltr">
ALTER USER HR ACCOUNT LOCK PASSWORD EXPIRE;
</pre></li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1638">
<tr>
<td class="cellalignment1646">
<table class="cellalignment1643">
<tr>
<td class="cellalignment1642"><a href="dv_impact.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1642"><a href="cfrealms.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2006, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1650">
<table class="cellalignment1641">
<tr>
<td class="cellalignment1642"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1642"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1642"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1642"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1642"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1642"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
