<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Downgrading Oracle Database to an Earlier Release</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-06-16T13:33:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Upgrade Guide" />
<meta name="dcterms.identifier" content="E23633-11" />
<meta name="dcterms.isVersionOf" content="UPGRD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="app.htm" title="Previous" type="text/html" />
<link rel="Next" href="expimp.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23633.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/13</span> <!-- End Header -->
<div id="UPGRD007" class="chapter"><a id="CACGBHDB"></a><a id="i1010243"></a>
<h1 class="chapter"><span class="secnum">6</span> Downgrading Oracle Database to an Earlier Release</h1>
<p>Oracle Database can only be downgraded to the release from which you upgraded. For example, if you upgrade from Oracle Database 10<span class="italic">g</span> Release 1 (10.1.0.5) to Oracle Database 11<span class="italic">g</span> Release 2 (11.2), then you cannot subsequently downgrade to Oracle Database 10<span class="italic">g</span> Release 2 (10.2); you can only downgrade to Oracle Database 10<span class="italic">g</span> Release 1 (10.1.0.5).</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i1010267">Supported Releases for Downgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#i1010279">Check for Incompatibilities Between Oracle Database Releases</a></p>
</li>
<li>
<p><a href="#CACJGFEA">Remove Unsupported Parameters from Server Parameter File (SPFILE)</a></p>
</li>
<li>
<p><a href="#i1010298">Perform a Full Backup of Oracle Database Before Downgrading</a></p>
</li>
<li>
<p><a href="#i1010311">Downgrading Oracle Database to an Earlier Release</a></p>
</li>
<li>
<p><a href="#BABJAGHA">Post-Downgrade Tasks for Oracle Database</a></p>
</li>
<li>
<p><a href="#CACGFHDC">Troubleshooting the Downgrade of Oracle Database</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system for discussions of downgrading that are operating system-specific</div>
<a id="i1010267"></a>
<div id="UPGRD00710" class="sect1">
<h2 class="sect1">Supported Releases for Downgrading Oracle Database</h2>
<p>You can downgrade both major releases and patchset releases<a id="sthref321"></a><a id="sthref322"></a>, based on the original release from which the database was upgraded. Major release downgrades are supported back to Oracle Database 11<span class="italic">g</span> Release 1 (11.1.0.6), Oracle Database 10<span class="italic">g</span> Release 2 (10.2.0.2), and Oracle Database 10<span class="italic">g</span> Release 1 (10.1.0.5). Patchset downgrades are supported back to all prior 11.2 patch releases.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot downgrade a database that was upgraded from Oracle Database Express Edition.</div>
<p>If you have Oracle Database Vault installed with your Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database, then you can downgrade to release 11.1.0.6 and release 11.1.0.7 only.</p>
<p>If you have Messaging Gateway or Workspace Manager in your database, then be aware that neither of them are part of Oracle Database patchsets earlier than release 10.2.0.4. Therefore, you must separately apply all relevant patches to the release 10.2.0.3 or release 10.1.0.5 Oracle home before downgrading.</p>
<p>Downgrade is not supported for Oracle Enterprise Manager. However, if you save your Oracle Enterprise Manager Database Control files and data before upgrading your database, then you can restore the old version of Database Control after downgrading the database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must use Oracle Data Pump full database export with the <code>INCLUDE=DBLINK</code> parameter to export all database links into a dump file suitable for import into the downgraded database. This dump file can then be used to replace the database links after the downgrade.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="upgrade.htm#BABFHIBC">"Saving Database Control Files and Data with the emdwgrd Utility"</a></p>
</li>
<li>
<p><a href="#CACGEEDC">"Restoring Oracle Enterprise Manager after Downgrading Oracle Database"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="i1010279"></a>
<div id="UPGRD12554" class="sect1">
<h2 class="sect1">Check for Incompatibilities Between Oracle Database Releases<a id="sthref323"></a><a id="sthref324"></a><a id="sthref325"></a></h2>
<p>Check the compatibility level of your release of Oracle Database to see if the database might have incompatibilities that prevent you from downgrading. If the compatibility level of your Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database is <code>11.2.0</code> or higher, then you cannot downgrade.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="intro.htm#BHCCDCAA">"Checking the Compatibility Level of Oracle Database"</a></div>
<p>If you are downgrading to Oracle Database 11<span class="italic">g</span> Release 1 (11.1), then the <code>COMPATIBLE</code> initialization parameter must be set to <code>11.0.0</code> or lower.</p>
<p>If you are downgrading to Oracle Database 10<span class="italic">g</span> Release 2 (10.2), then the <code>COMPATIBLE</code> initialization parameter must be set to <code>10.2.0</code> or lower.</p>
<p>If you are downgrading to Oracle Database 10<span class="italic">g</span> Release 1 (10.1), then the <code>COMPATIBLE</code> initialization parameter must be set to <code>10.1.0</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="intro.htm#i883686">"Considerations for Downgrading Oracle Database and Compatibility"</a> and <a href="changes.htm#BABHACIE">Appendix A, "Behavior Changes After Upgrading Oracle Database"</a></div>
</div>
<!-- class="sect1" -->
<a id="CACJGFEA"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Remove Unsupported Parameters from Server Parameter File (SPFILE)</h2>
<p>If the database uses an SPFILE, new parameters may have been added during installation or upgrade that are not supported in the earlier release to which you want to downgrade. After the downgrade, the new parameters may prevent the database from starting. Therefore, you must remove the parameters from the SPFILE that are not supported by the earlier release. You can change SPFILE settings by using the <code>SET</code> clause of the <code>ALTER SYSTEM</code> statement as described in <a class="olink RACAD815" href="../../rac.112/e41960/admin.htm#RACAD815"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a>.</p>
<p>To find information about new parameters for the current release from which you are downgrading, see the <a class="olink NEWFT" href="../e41360/toc.htm"><span class="italic">Oracle Database New Features Guide</span></a> for that release.</p>
</div>
<!-- class="sect1" -->
<a id="i1010298"></a>
<div id="UPGRD12555" class="sect1">
<h2 class="sect1">Perform a Full Backup of Oracle Database Before Downgrading<a id="sthref326"></a><a id="sthref327"></a></h2>
<p>Perform a full backup of your Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database before you downgrade. Follow the procedures given in <a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information</div>
</div>
<!-- class="sect1" -->
<a id="i1010311"></a>
<div id="UPGRD12556" class="sect1">
<h2 class="sect1">Downgrading Oracle Database to an Earlier Release<a id="sthref328"></a><a id="sthref329"></a></h2>
<p>You can downgrade your Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database to a major release or a relevant patchset upgrade.</p>
<p class="orderedlisttitle">To downgrade the database to an earlier release&nbsp;</p>
<ol>
<li>
<p>If you have enabled Oracle Database Vault on your database, then you must:</p>
<ul>
<li>
<p>Grant the Database Vault <code>DV_PATCH_ADMIN</code> role for the <code>SYS</code> account.</p>
</li>
<li>
<p>Disable Database Vault before downgrading the database.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DVADM012" href="../../server.112/e23090/dvdisabl.htm#DVADM012"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for instructions about disabling Oracle Database Vault</div>
</li>
<li>
<p>If you previously had upgraded the database and then used the <code>DBMS_DST</code> PL/SQL package to update the database time zone version, then you must apply the patch for the same time zone file version into the earlier release's Oracle home before downgrading.</p>
<p>As an example scenario, assume that a release 10.2.0.4 database on Linux x64 using DSTv4 had been upgraded to release 11.2.0.2, and <code>DBMS_DST</code> was then run to update this database to DSTv14. Then, before downgrading from release 11.2.0.3 to 10.2.0.4, you need to apply on the release 10.2.0.4 side the DSTv14 patch for 10.2.0.4 for Linux x64. This ensures that your <code>TIMESTAMP</code> <code>WITH</code> <code>TIME</code> <code>ZONE</code> data is not logically corrupted during retrieval.</p>
<p>To find which time zone file version your database is using, run:</p>
<pre>
SELECT value$ FROM sys.props$ WHERE NAME = 'DST_PRIMARY_TT_VERSION';
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NLSPG261" href="../../server.112/e10729/ch4datetime.htm#NLSPG261"><span class="italic">Oracle Database Globalization Support Guide</span></a> for information on applying time zone files</div>
</li>
<li>
<p>If you had set the <code>ORA_TZFILE</code> environment variable to the full path name of the <code>timezone.dat</code> file when you upgraded to Oracle Database 11<span class="italic">g</span> Release 2 (11.2), then you must unset it if you subsequently downgrade your database.</p>
<p><a id="sthref331"></a><a id="sthref332"></a>Two time zone files are included in the Oracle home directory:</p>
<ul>
<li>
<p>The default time zone file at</p>
<pre>
$ORACLE_HOME/oracore/zoneinfo/timezonelrg.dat
</pre></li>
<li>
<p>A smaller time zone file at</p>
<pre>
$ORACLE_HOME/oracore/zoneinfo/timezone.dat
</pre></li>
</ul>
<p>If you do not unset the <code>ORA_TZFILE</code> variable, then connecting to the database using the smaller time zone file might produce the following errors:</p>
<pre>
SP2-1503: Unable to initialize Oracle call interface
SP2-0152: ORACLE may not be functioning properly
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NLSPG004" href="../../server.112/e10729/ch4datetime.htm#NLSPG004"><span class="italic">Oracle Database Globalization Support Guide</span></a> for more information about date and time data types and time zone support</div>
</li>
<li id="CHDIDGEF">
<p>If you have Oracle Application Express on your database, then you must copy the <code>apxrelod.sql</code> file<a id="sthref333"></a><a id="sthref334"></a> from the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) <code>ORACLE_HOME/apex/</code> directory to a directory outside of the Oracle home, such as the temporary directory on your system.</p>
<p>Make a note of the new location of this file.</p>
</li>
<li>
<p>If you have created objects based on fixed objects, then drop these objects to avoid possible <code>ORA-00600</code> errors. You can re-create these objects after the downgrade.</p>
</li>
<li>
<p>Log in to the system as the owner of the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home directory.</p>
</li>
<li>
<p>This step is required only if Enterprise Manager Database Control is already configured for the database.</p>
<p>Stop Database Control, as follows:</p>
<ol>
<li>
<p>Set the <code>ORACLE_UNQNAME</code> environment variable to the database unique name.</p>
</li>
<li>
<p>Run the following command:</p>
<pre>
<span class="italic">ORACLE_HOME</span>/bin/emctl stop dbconsole
</pre></li>
</ol>
<p>If the database being downgraded is an Oracle RAC database, then perform this step on all instances.</p>
</li>
<li>
<p>If you are downgrading an Oracle RAC database to 10<span class="italic">g</span> Release 1 (10.1), then you must remove extra voting disks before shutting down the Oracle Clusterware stack.</p>
<ol>
<li>
<p>To see the number of voting disks used and to list voting disk paths, run the following command:</p>
<pre>
<span class="italic">Oracle_Clusterware_Home</span>/bin/crsctl query css votedisk
</pre></li>
<li>
<p>Remove each additional voting disk you find in the previous step by running the following command, where <code><span class="codeinlineitalic">path</span></code> is the voting disk path listed in the <code>File</code> <code>Name</code> column displayed in the previous step:</p>
<pre>
<span class="italic">Oracle_Clusterware_Home</span>/bin/crsctl delete css votedisk <span class="italic">path</span>
</pre>
<p>For example:</p>
<pre>
<span class="italic">Oracle_Clusterware_Home</span>/bin/crsctl delete css votedisk /share/cluster2/vote_cluster2.dbf
</pre>
<p>Do not delete the last voting disk.</p>
</li>
</ol>
</li>
<li>
<p>At a system prompt, change to the <span class="italic">ORACLE_HOME</span><code>/rdbms/admin</code> directory.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are downgrading a cluster database, then shut down the instance completely and change the <code>CLUSTER_DATABASE</code> initialization parameter to <code>FALSE</code>. After the downgrade, you must set this parameter back to <code>TRUE</code>.</div>
</li>
<li>
<p>Using SQL*Plus, connect to the database instance as a user with <code>SYSDBA</code> privileges.</p>
</li>
<li>
<p>Start up the instance in <code>DOWNGRADE</code> mode:</p>
<pre>
SQL&gt; STARTUP DOWNGRADE
</pre>
<p>You might be required to use the <code>PFILE</code> option to specify the location of your initialization parameter file.</p>
</li>
<li>
<p>If you have Enterprise Manager configured in your database, then drop the Enterprise Manager user:</p>
<pre>
DROP USER sysman CASCADE;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
After this step, MGMT* synonyms may be invalid. Follow the guidelines in <a href="#CACGEEDC">"Restoring Oracle Enterprise Manager after Downgrading Oracle Database"</a> to validate the synonyms.</div>
</li>
<li id="i1010335">
<p>Set the system to spool results to a log file so you can track the changes and issues:</p>
<pre>
SQL&gt; SPOOL downgrade.log
</pre></li>
<li>
<p><a id="sthref335"></a><a id="sthref336"></a>Run <code><a id="sthref337"></a>catdwgrd.sql</code>:</p>
<pre>
SQL&gt; @catdwgrd.sql
</pre>
<p>The following are notes about running the script:</p>
<ul>
<li>
<p>You must use the version of the script included with Oracle Database 11<span class="italic">g</span> Release 2 (11.2).</p>
</li>
<li>
<p>You must run the script in the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) environment.</p>
</li>
<li>
<p>The script downgrades all Oracle Database components in the database to the major release or Oracle Database 11<span class="italic">g</span> patch release from which you originally upgraded.</p>
</li>
</ul>
<p><a id="sthref338"></a><a id="sthref339"></a>If you encounter any problems when you run the script, or any of the scripts in the remaining steps, then correct the causes of the problems and rerun the script. You can rerun any of the scripts described in this chapter as many times as necessary.</p>
<p>If the downgrade for a component fails, then an <code>ORA-39709</code> error is displayed and the SQL*Plus session terminates without downgrading the Oracle Database data dictionary. All components must be successfully downgraded before the Oracle Database data dictionary is downgraded. You must identify and fix the problem before rerunning the <code>catdwgrd.sql</code> script.</p>
</li>
<li>
<p>Turn off the spooling of script results to the log file:</p>
<pre>
SQL&gt; SPOOL OFF
</pre>
<p>Then, check the spool file and verify that there were no errors generated during the downgrade. You named the spool file in Step&nbsp;<a href="#i1010335">13</a> and the suggested name was <code>downgrade.log</code>. Correct any problems you find in this file and rerun the downgrade script if necessary.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you want to save the results of the first time you ran the downgrade script, then before you rerun it be sure to rename <code>downgrade.log</code> to something else.</div>
</li>
<li>
<p>Shut down the instance:</p>
<pre>
SQL&gt; SHUTDOWN IMMEDIATE
</pre></li>
<li>
<p>Exit SQL*Plus.</p>
</li>
<li>
<p>If your operating system is Linux or UNIX, then change the following environment variables to point to the directories of the release to which you are downgrading:</p>
<ul>
<li>
<p><code>ORACLE_HOME</code></p>
</li>
<li>
<p><code>PATH</code></p>
</li>
</ul>
<p>You should also check that your <code>oratab</code> file and any client scripts that set the value of <code>ORACLE_HOME</code> point to the downgraded Oracle home.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system for information about setting other important environment variables on your operating system</div>
</li>
<li>
<p>If your operating system is Windows, then complete the following steps:</p>
<ol>
<li>
<p>Stop all Oracle services, including the <code>OracleService</code><code><span class="codeinlineitalic">SID</span></code> Oracle service of the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database, where <code><span class="codeinlineitalic">SID</span></code> is the instance name.</p>
<p>For example, if your <span class="italic">SID</span> is ORCL, then enter the following at a command prompt:</p>
<pre>
C:\&gt; NET STOP OracleServiceORCL
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></div>
</li>
<li>
<p>Delete the Oracle service at a command prompt by issuing the <code>ORADIM</code> command. For example, if your <span class="italic">SID</span> is ORCL, then enter the following command:</p>
<pre>
C:\&gt; ORADIM -DELETE -SID ORCL
</pre></li>
<li>
<p><a id="sthref340"></a><a id="sthref341"></a>Create the Oracle service of the database that you are downgrading at a command prompt using the <code>ORADIM</code> command.</p>
<pre>
C:\&gt; ORADIM -NEW -SID <span class="italic">SID</span> -INTPWD <span class="italic">PASSWORD</span> -MAXUSERS <span class="italic">USERS</span>
     -STARTMODE AUTO -PFILE <span class="italic">ORACLE_HOME</span>\DATABASE\INIT<span class="italic">SID</span>.ORA
</pre>
<p>This syntax includes the following variables:</p>
<div class="inftblinformal">
<table class="cellalignment1663" title="ORADIM Syntax" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t17">Variable</th>
<th class="cellalignment1664" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t17" headers="r1c1-t17"><code><span class="codeinlineitalic">SID</span></code></td>
<td class="cellalignment1660" headers="r2c1-t17 r1c2-t17">Same SID name as the SID of the database being downgraded.</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t17" headers="r1c1-t17"><code><span class="codeinlineitalic">PASSWORD</span></code></td>
<td class="cellalignment1660" headers="r3c1-t17 r1c2-t17">Password for the database instance. This is the password for the user connected with <code>SYSDBA</code> privileges. The -<code>INTPWD</code> option is not required. If you do not specify it, then operating system authentication is used, and no password is required.</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t17" headers="r1c1-t17"><code><span class="codeinlineitalic">USERS</span></code></td>
<td class="cellalignment1660" headers="r4c1-t17 r1c2-t17">Maximum number of users who can be granted <code>SYSDBA</code> and <code>SYSOPER</code> privileges.</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r5c1-t17" headers="r1c1-t17"><code><span class="codeinlineitalic">ORACLE_HOME</span></code></td>
<td class="cellalignment1660" headers="r5c1-t17 r1c2-t17">Oracle home directory of the database to which you are downgrading. Ensure that you specify the full path name with the <code>-PFILE</code> option, including drive letter of the Oracle home directory.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>For example, if you are downgrading to Oracle Database 10<span class="italic">g</span> Release 2 (10.2), if your <span class="italic">SID</span> is <code>ORCL</code>, your <span class="italic">PASSWORD</span> is <code>TWxy5791</code>, the maximum number of <span class="italic">USERS</span> is 10, and the <span class="italic">ORACLE_HOME</span> directory is C:\ORANT, then enter the following command:</p>
<pre>
C:\&gt; ORADIM -NEW -SID ORCL -INTPWD TWxy5791 -MAXUSERS 10
     -STARTMODE AUTO -PFILE C:\ORANT\DATABASE\INITORCL.ORA
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You are not required to change any Windows Registry settings when downgrading a database. The <code>ORADIM</code> utility makes all necessary changes automatically.</div>
</li>
</ol>
</li>
<li>
<p>Restore the configuration files (for example, parameter files, password files, and so on) of the release to which you are downgrading.</p>
<p>If this is an Oracle RAC database, execute the following command to return the database to single instance mode:</p>
<pre>
set CLUSTER_DATABASE=FALSE
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are downgrading a cluster database, then perform this step on all nodes in which this cluster database has instances configured. Set the <code>CLUSTER_DATABASE</code> initialization parameter to <code>FALSE</code>. After the downgrade, you must set this initialization parameter back to <code>TRUE</code>.</div>
</li>
<li>
<p>At a system prompt, change to the <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/rdbms/admin</code> directory of the previous release.</p>
</li>
<li id="i1010463">
<p>Start SQL*Plus.</p>
</li>
<li>
<p>Connect to the database instance as a user with <code>SYSDBA</code> privileges.</p>
</li>
<li>
<p>Start up the instance:</p>
<pre>
SQL&gt; <a id="sthref342"></a><a id="sthref343"></a>STARTUP UPGRADE
</pre></li>
<li id="i1010469">
<p>Set the system to spool results to a log file to track changes and issues:</p>
<pre>
SQL&gt; SPOOL reload.log
</pre></li>
<li>
<p>Run <code>catrelod.sql</code>:</p>
<pre>
<a id="sthref344"></a><a id="sthref345"></a>SQL&gt; @catrelod.sql
</pre>
<p>The <code>catrelod.sql</code> script reloads the appropriate version of all of the database components in the downgraded database.</p>
</li>
<li>
<p>If you are downgrading to Oracle Database 11<span class="italic">g</span> Release 1 (11.1.0.6), run the <a id="sthref346"></a><code>xsrelod.sql</code> script:</p>
<pre>
<a id="sthref347"></a><a id="sthref348"></a>SQL&gt; @xsrelod.sql
</pre>
<p>Running the <code>xsrelod.sql</code> script avoids the following error:</p>
<pre>
<a id="sthref349"></a>PLS-00306: wrong number or types of arguments in call
to 'INVALIDATE_DSD_CACHE' DBMS_XS_DATA_SECURITY_EVENTS
PL/SQL: Statement ignored
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The PLS-00306 error is not an issue for Oracle Database release 11.2.0.7 or later.</div>
</li>
<li>
<p>If you are downgrading to Oracle Database 10g Release 1 (10.1.0.5) and you have XDB in your database, then run the <code>dbmsxdbt.sql</code> script:</p>
<pre>
@dbmsxdbt.sql
</pre>
<p>Running the <code>dbmsxdbt.sql</code> script avoids the following errors when reloading <code>XDB.DBMS_XDBT</code> package:</p>
<pre>
PLS-00201: identifier 'CTXSYS.CTX_OUTPUT' must be declaredPLS-00201: identifier 'CTX_DDL' must be declared
</pre></li>
<li>
<p>If you are downgrading to Oracle Database 11<span class="italic">g</span> Release 1 or earlier, and you have Oracle Application Express in your database, then change to the directory to which you had copied the <code>apxrelod.sql</code> script (in step <a href="#CHDIDGEF">4</a>). Manually reload Oracle Application Express by running the <code>apxrelod.sql</code> script:</p>
<pre>
SQL&gt; @apxrelod.sql
</pre>
<p>Running the <code>apxrelod.sql</code> script avoids package <code>APEX_030200.WWV_FLOW_HELP</code> being <code>INVALID</code> due to the following error:</p>
<pre>
PLS-00201: identifier 'CTX_DDL' must be declared
</pre></li>
<li>
<p>Turn off the spooling of script results to the log file:</p>
<pre>
SQL&gt; SPOOL OFF
</pre>
<p>Then, check the spool file and verify that the packages and procedures compiled successfully. You named the spool file in Step&nbsp;<a href="#i1010469">25</a>; the suggested name was <code>reload.log</code>. Correct any problems you find in this file and rerun the appropriate script if necessary.</p>
</li>
<li>
<p>Shut down and restart the instance for normal operation:</p>
<pre>
SQL&gt; SHUTDOWN IMMEDIATE
SQL&gt; STARTUP
</pre>
<p>You might be required to use the <code>PFILE</code> option to specify the location of your initialization parameter file.</p>
</li>
<li>
<p>Perform this step if the database is configured for Oracle Label Security and you are downgrading to Oracle Database 10<span class="italic">g</span> Release 1 (10.1).</p>
<ol>
<li>
<p>Copy the <code>olstrig.sql</code> script from the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home to the Oracle home of the version to which the database is to be downgraded.</p>
</li>
<li>
<p>Run <code>olstrig.sql</code> to re-create DML triggers on tables with Oracle Label Security policies.</p>
<pre>
SQL&gt; @olstrig.sql
</pre></li>
</ol>
<p>See the <a class="olink OLSAG" href="../../network.112/e10745/toc.htm"><span class="italic">Oracle Label Security Administrator's Guide</span></a> for more information.</p>
</li>
<li>
<p>Run the <code>utlrp.sql</code> script:</p>
<pre>
SQL&gt; @utlrp.sql
</pre>
<p>The <code>utlrp.sql</code> script recompiles all existing PL/SQL modules that were previously in an <code>INVALID</code> state, such as packages, procedures, types, and so on.</p>
</li>
<li>
<p>Exit SQL*Plus.</p>
</li>
<li>
<p>If you are downgrading a cluster database, then you must run the following command to downgrade the Oracle Clusterware database configuration:</p>
<pre>
$ srvctl downgrade database -d <span class="italic">db-unique-name</span> -o <span class="italic">old_ORACLE_HOME</span> -<span class="italic">t to_relnum</span>
</pre>
<p>[where <code><span class="codeinlineitalic">db-unique-name</span></code> is the database name (not the instance name), <code><span class="codeinlineitalic">old_ORACLE_HOME</span></code> is the location of the old Oracle home in which the downgraded database will be running. In this example, <code><span class="codeinlineitalic">to_relnum</span></code> is the database release number to which the database is being downgraded. (For example: 11.2.0.1.0.)]</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
By default, any named user may create a server pool. To restrict the operating system users that have this privilege, Oracle strongly recommends that you add specific users to the CRS Administrators list.
<p><span class="bold">See Also:</span> <a class="olink CWADD91105" href="../../rac.112/e41959/admin.htm#CWADD91105"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about adding users to the CRS Administrators list</p>
</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
Execute this command from the current Oracle home, not from the Oracle home to which the database is being downgraded.</div>
</li>
</ol>
<p>Your database is now downgraded.</p>
</div>
<!-- class="sect1" -->
<a id="BABJAGHA"></a>
<div id="UPGRD12557" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Post-Downgrade Tasks for Oracle Database</h2>
<p>Tasks might be required after downgrading Oracle Database. This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CACDEAFD">Re-creating the Network Listener When Downgrading to Oracle Database Releases 10.2 or 11.1</a></p>
</li>
<li>
<p><a href="#CACGEEDC">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</a></p>
<ul>
<li>
<p><a href="#BABCHAIH">Single-Instance Oracle Database Without Oracle ASM</a></p>
</li>
<li>
<p><a href="#BABCJIBE">Oracle RAC Database Without Oracle ASM</a></p>
</li>
<li>
<p><a href="#BABHEGGH">Single-Instance Oracle ASM Instance</a></p>
</li>
<li>
<p><a href="#BABIAHIH">Oracle ASM on Oracle RAC Instance</a></p>
</li>
<li>
<p><a href="#BABEDEBA">Single-Instance Oracle Database With Oracle ASM</a></p>
</li>
<li>
<p><a href="#BABJADBF">Oracle RAC Database and Oracle ASM Instance</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#BABJCEJE">Re-enabling Oracle Database Vault after Downgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#BABCIJFC">Restoration of the Configuration for Oracle Clusterware after Downgrading</a></p>
</li>
<li>
<p><a href="#CACHGDGG">Downgrading and Database Links from Earlier Releases</a></p>
</li>
</ul>
<a id="CACDEAFD"></a>
<div id="UPGRD52749" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Re-creating the Network Listener When Downgrading to Oracle Database Releases 10.2 or 11.1</h3>
<p>If you are downgrading the new database to Oracle Database 10<span class="italic">g</span> or Oracle Database 11<span class="italic">g</span> Release 1, then you must recreate the listener after performing the downgrade steps. Run Oracle Net Manager to delete the old listener and create a new listener.</p>
<ul>
<li>
<p>To start Oracle Net Manager from the Oracle Enterprise Manager console, select Service Management from the Tools menu, and then select Oracle Net Manager.</p>
</li>
<li>
<p>On Microsoft Windows, select <span class="bold">Programs</span> from the Start menu, and then select <span class="bold">Oracle -</span> <span class="bolditalic">HOME_NAME</span>. Next, select <span class="bold">Configuration and Migration Tools</span>, and then <span class="bold">Net Manager</span>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></div>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CACGEEDC"></a>
<div id="UPGRD12558" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Restoring Oracle Enterprise Manager after Downgrading Oracle Database</h3>
<p>This task is required only if you are downgrading in some form and Oracle Enterprise Manager is configured on the host. To restore Oracle Enterprise Manager to its previous state, you must have saved your Oracle Enterprise Manager files and data before upgrading.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="upgrade.htm#BABFHIBC">"Saving Database Control Files and Data with the emdwgrd Utility"</a></div>
<p>If this is an Oracle RAC database using Oracle Clusterware, the database must be registered with the <code>srvctl</code> before running the <code>emca -restore</code> command. This needs to be executed from the <code><span class="codeinlineitalic">ORACLE_HOME</span></code>/bin of the version to which the database is being downgraded.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWADD" href="../../rac.112/e41959/toc.htm"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for information about <code>srvctl</code></div>
<p>Run the <code>emca</code> <code>-restore</code> command with the appropriate options to restore Oracle Enterprise Manager Database Control or Grid Control to the old Oracle home. The options that you specify depend on whether the database being downgraded is an Oracle RAC database or an Oracle ASM database, as follows:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Use the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) version of <code>emca</code> for this procedure. See <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for complete information about <code>emca</code>.</div>
<p class="subhead2"><a id="BABCHAIH"></a><a id="UPGRD52665"></a>Single-Instance Oracle Database Without Oracle ASM</p>
<pre>
111Home/bin/emca -restore db
</pre>
<p>You are prompted to enter the following information:</p>
<ul>
<li>
<p>Oracle home for the database to be restored</p>
</li>
<li>
<p>Database SID</p>
</li>
<li>
<p>Listener port number</p>
</li>
</ul>
<p class="subhead2"><a id="BABCJIBE"></a><a id="UPGRD52666"></a>Oracle RAC Database Without Oracle ASM</p>
<pre>
111Home/bin/emca -restore db -cluster
</pre>
<p>You are prompted to enter the following information:</p>
<ul>
<li>
<p>Oracle home for the database to be restored</p>
</li>
<li>
<p>Database unique name</p>
</li>
<li>
<p>Listener port number</p>
</li>
</ul>
<p class="subhead2"><a id="BABHEGGH"></a><a id="UPGRD52667"></a>Single-Instance Oracle ASM Instance</p>
<pre>
111Home/bin/emca -restore asm
</pre>
<p>You are prompted to enter the following information:</p>
<ul>
<li>
<p>Oracle home for the database to be restored</p>
</li>
<li>
<p>Oracle ASM port</p>
</li>
<li>
<p>Oracle ASM SID</p>
</li>
</ul>
<p class="subhead2"><a id="BABIAHIH"></a><a id="UPGRD52668"></a>Oracle ASM on Oracle RAC Instance</p>
<pre>
111Home/bin/emca -restore asm -cluster
</pre>
<p>You are prompted to enter the following information:</p>
<ul>
<li>
<p>Oracle home for the database to be restored</p>
</li>
<li>
<p>Oracle ASM port</p>
</li>
</ul>
<p class="subhead2"><a id="BABEDEBA"></a><a id="UPGRD52669"></a>Single-Instance Oracle Database With Oracle ASM</p>
<pre>
111Home/bin/emca -restore db_asm
</pre>
<p>You are prompted to enter the following information:</p>
<ul>
<li>
<p>Oracle home for the database to be restored</p>
</li>
<li>
<p>Database SID</p>
</li>
<li>
<p>Listener port number</p>
</li>
<li>
<p>Oracle ASM port</p>
</li>
<li>
<p>Oracle ASM home</p>
</li>
<li>
<p>Oracle ASM SID [+ASM]</p>
</li>
</ul>
<p class="subhead2"><a id="BABJADBF"></a><a id="UPGRD52670"></a>Oracle RAC Database and Oracle ASM Instance</p>
<pre>
111Home/bin/emca -restore db_asm -cluster
</pre>
<p>You are prompted to enter the following information:</p>
<ul>
<li>
<p>Oracle home for the database to be restored</p>
</li>
<li>
<p>Database unique name</p>
</li>
<li>
<p>Listener port number</p>
</li>
<li>
<p>Oracle ASM port</p>
</li>
<li>
<p>Oracle ASM Oracle home</p>
</li>
<li>
<p>Oracle ASM SID [+ASM]</p>
</li>
</ul>
<p>The output of <code>emca</code> varies according to the options that you specify and the values that you enter at the prompts.</p>
<p>For an inplace patchset upgrade, the original home backup you saved before applying the patchset must be restored. This step must be repeated on all the nodes in Oracle RAC environments. Running the <code>emca</code> <code>-restore</code> command is not required for an inplace patchset upgrade.</p>
<p>After completing the <code>emca</code> <code>-restore</code> procedure you are ready to restore the Oracle Enterprise Manager Database files and data with the <code>emdwgrd</code> utility. You must run the emdwgrd utility from the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) home. But <code>ORACLE_HOME</code> and other environment variables must be set to point to the Oracle home from which the upgrade originally took place.</p>
<p>The following procedure is for Linux and UNIX. To run it on Windows, simply substitute <code>emdwgrd.bat</code> for <code>emdwgrd</code>.</p>
<p>Follow these steps to restore your database control files and data:</p>
<ol>
<li>
<p>Set <code>ORACLE_HOME</code> to the Oracle home from which the database upgrade originally took place.</p>
<p>For an inplace patchset upgrade, restore the backup of the original home (with one-off patch of Bug 7131048 if upgrading from 11.1.0.6), and set <code>ORACLE_HOME</code> to the current Oracle home.</p>
</li>
<li>
<p>Set <code>ORACLE_SID</code> to the SID of the database that was upgraded and then downgraded.</p>
</li>
<li>
<p>Set <code>PATH</code>, <code>LD_LIBRARY_PATH</code> and <code>SHLIB_PATH</code> to point to the Oracle home from which the database upgrade originally took place.</p>
</li>
<li>
<p>Go to the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) home:</p>
<pre>
cd <span class="italic">ORACLE_HOME</span>/bin
</pre></li>
<li>
<p>Execute one of the following:</p>
<ol>
<li>
<p>For a single-instance database, run the following command, where <code><span class="codeinlineitalic">SID</span></code> is the SID of the database that was upgraded and then downgraded and <code><span class="codeinlineitalic">save_directory</span></code> is the path to the storage location you chose when saving your database control files and data:</p>
<pre>
emdwgrd -restore -sid <span class="italic">SID</span> -path save_sirectory -tempTablespace TEMP
</pre></li>
<li>
<p>For an Oracle RAC database, remote copy is required across the cluster nodes. Define an environment variable to indicate which remote copy is configured. For example:</p>
<pre>
setenv EM_REMCP /usr/bin/scp
</pre>
<p>Then, execute the following <code>restore</code> command:</p>
<pre>
emdwgrd -restore -tempTablespace TEMP -cluster -sid <span class="italic">SID10g</span> -path <span class="italic">save_directory</span>
</pre>
<p>If 10<span class="italic">g</span> Oracle home is on a shared device, add <code>-shared</code> to the previous command line.</p>
</li>
</ol>
</li>
<li>
<p>Enter the SYS and SYSMAN passwords when prompted by <code>emdwgrd</code>.</p>
</li>
<li>
<p>On a single-instance database, the <code>emdwgrd</code> utility produces output similar to the following:</p>
<pre>
Sat Apr 28 09:27:09 2007 - Verify EM DB Control files ... pass
Sat Apr 28 09:27:09 2007 - Validating DB Connection to DB102 ... pass
Sat Apr 28 09:27:19 2007 - Validating TEMP tablespace in DB102 ... pass
Sat Apr 28 09:27:20 2007 - creating directory ... created
Sat Apr 28 09:27:20 2007 - Stopping DB Control ... stopped
Sat Apr 28 09:27:21 2007 - dropping sysman schema ... dropped
Sat Apr 28 09:27:22 2007 - recreating sysman user ... recreated
Sat Apr 28 09:27:23 2007 - Restoring DB Control files ... restored
Sat Apr 28 09:27:23 2007 - Importing sysman schema ... imported
Sat Apr 28 09:30:42 2007 - recompiling invalid objects ... recompiled
Sat Apr 28 09:30:54 2007 - Starting DB Control ... started
Sat Apr 28 09:32:37 2007 - DB Control was restored successfully.
</pre>
<p>When <code>emdwgrd</code> finishes, Oracle Enterprise Manager Database Control has been downgraded to the old Oracle home.</p>
<p>On an Oracle RAC database, the <code>emdwgrd</code> utility produces output similar to the following:</p>
<pre>
$ /scratch/oracle/product/11.1.0/db_1/bin/emdwgrd -srcOracleHome $ORACLE_HOME -sid DB102 -path /scratch/rpattabh/ravi/tmp/dbcdir5 -restore &ndash;cluster -tempTablespace TEMP
 
Enter sys password for database DB102?
*****
 
Enter sysman password for database DB102?
*****
 
Sat Apr 28 09:27:09 2007 - Verify EM DB Control files ... pass
Sat Apr 28 09:27:09 2007 - Validating DB Connection to DB102 ... pass
Sat Apr 28 09:27:19 2007 - Validating TEMP tablespace in DB102 ... pass
Sat Apr 28 09:27:20 2007 - creating directory ... created
Sat Apr 28 09:27:20 2007 - Stopping DB Control on all Nodes 
stbdq04, r101b1, /oradbnas/sangeeta/10.1.0/db, stop, 0
stbdq05, r101b2, /oradbnas/sangeeta/10.1.0/db, stop, 1
 
Please Execute '/tmp/racdwgrd_dbctl.sh' on Node1, Node2. 
 
Press yes to continue when the operations are successful. 
Continue (yes/no) ?
y
 
... stopped
Sat Apr 28 09:27:21 2007 - dropping sysman schema ... dropped
Sat Apr 28 09:27:22 2007 - recreating sysman user ... recreated
Sat Apr 28 09:27:23 2007 - Restoring DB Control files 
Executing Restore directories to node Node1
Executing Restore directories to node Node2
 
... restored
Sat Apr 28 09:27:23 2007 - Importing sysman schema ... imported
Sat Apr 28 09:30:42 2007 - recompiling invalid objects ... recompiled
Sat Apr 28 09:32:37 2007 - DB Control was restored successfully.
Sat Apr 28 09:33:54 2007 - Starting DB Control On All nodes 
 
Please Execute '/tmp/racdwgrd_dbctl.sh' on Node1, Node2. 
 
Press yes to continue when the operations are successful. 
Continue (yes/no) ?
y
 
... started
Sat Apr 28 09:38:57 2007 - Dump directory was dropped successfully.
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="BABJCEJE"></a>
<div id="UPGRD12559" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Re-enabling Oracle Database Vault after Downgrading Oracle Database</h3>
<p>If you use Oracle Database Vault, then you were instructed to disable it before downgrading your database. To use Oracle Database Vault after downgrading, you must re-enable it.</p>
<p><span class="bold">To enable Oracle Database Vault after downgrading:</span></p>
<ol>
<li>
<p>Connect to SQL*Plus as a user who has been granted the <code>DV_OWNER</code> role.</p>
</li>
<li>
<p>Issue the following statements:</p>
<pre>
ALTER TRIGGER DVSYS.DV_BEFORE_DDL_TRG ENABLE;
ALTER TRIGGER DVSYS.DV_AFTER_DDL_TRG ENABLE;
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DVADM012" href="../../server.112/e23090/dvdisabl.htm#DVADM012"><span class="italic">Oracle Database Vault Administrator's Guide</span></a></div>
</div>
<!-- class="sect2" -->
<a id="BABCIJFC"></a>
<div id="UPGRD52664" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Restoration of the Configuration for Oracle Clusterware after Downgrading</h3>
<p>You can restore the Oracle Clusterware configuration to the state it was in before the Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) upgrade. To do this, you must restore the release from which you were upgrading. Any configuration changes you have performed during or after the 11<span class="italic">g</span> release 2 (11.2) upgrade process are removed and cannot be recovered.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWLIN" href="../../install.112/e41961/toc.htm"><span class="italic">Oracle Grid Infrastructure Installation Guide for Linux</span></a></p>
</li>
<li>
<p><a class="olink CWWIN" href="../../install.112/e48194/toc.htm"><span class="italic">Oracle Grid Infrastructure Installation Guide for Microsoft Windows (32-Bit), Microsoft Windows (64-Bit) on Intel Itanium, Microsoft Windows x64</span></a></p>
</li>
<li>
<p><a class="olink CWADD" href="../../rac.112/e41959/toc.htm"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a></p>
</li>
<li>
<p><a class="olink OSTMG" href="../e18951/toc.htm"><span class="italic">Oracle Database Storage Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACHGDGG"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Downgrading and Database Links from Earlier Releases</h3>
<p>Before <a id="sthref350"></a>downgrading, you must use Oracle Data Pump full database export with the <code>INCLUDE=DBLINK</code> parameter to export all database links into a dump file suitable for import into the downgraded database. This dump file can then be used to replace the database links after the downgrade.</p>
<p>Ensure that you know the password for any newly-created database links (that is, database links that you may have created while running the new release from which you are downgrading. Knowing the database link password is necessary because you will need to reset the database link password after downgrading to the earlier release. This is only required for newly-created dblinks, those that you created after you upgraded to the new release.</p>
<p>Unless the database link password is reset, an internal error will be displayed when anyone attempts to make use of the database link. The internal error that is reported in the Oracle trace file when the Oracle server fails to retrieve the password of the database link is as follows: "<a id="sthref351"></a>ORA-00600: [kzdlk_zt2 err], [18446744073709551601]". Alternatively, you may just recreate the dblinks after you complete the downgrade.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can work with Oracle Support if you want to create new database links that are immune to the ORA-00600 issue while running the new Oracle Database release 11.2 upgrade.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACGFHDC"></a>
<div id="UPGRD52750" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Troubleshooting the Downgrade of Oracle Database</h2>
<p>Oracle provides troubleshooting information for issues that may occur when downgrading Oracle Database. For the latest information on this release, also refer to <a class="olink READM" href="../../readmes.112/e41331/toc.htm"><span class="italic">Oracle Database Readme</span></a>.</p>
<p class="subhead2"><a id="sthref352"></a>Downgrading release 11.2 of Oracle Grid Infrastructure fails</p>
<p>If downgrading release 11.2 of Oracle Grid Infrastructure fails, then refer to the support note "How to Proceed from Failed Upgrade to Grid Infrastructure" on Linux/Unix [ID 969254.1]" on <code><a href="https://support.oracle.com">https://support.oracle.com</a></code>. Oracle recommends that you read the entire note before taking action.</p>
<p class="subhead2"><a id="sthref353"></a>Error raised from the 11.2.0.1 xsrelod.sql script</p>
<p>When downgrading Oracle Database from release 11.2.0.2 or 11.2.0.3 to release 11.2.0.1, an error may be raised from the <code>xsrelod.sql</code> script, which is included with release 11.2.0.1. This problem only occurs after downgrading to release 11.2.0.1 and then attempting to enable XML DB indexes. The error "ORA-01418: specified index does not exist" may be raised and can safely be ignored.</p>
<p class="subhead2"><a id="sthref354"></a>Error raised from the Oracle Multimedia imrelod.sql script</p>
<p>When downgrading Oracle Database to release 11.2.0.2, an error may be raised from the <code>imrelod.sql</code> script which is included with release 11.2.0.2. The error "ORA-20000: Oracle ORDIM component in registry is status: DOWNGRADED. Oracle ORDIM must be installed and valid prior to Oracle Multimedia upgrade, downgrade, or patch." can safely be ignored.</p>
<p class="subhead2"><a id="sthref355"></a>Downgrading Oracle Database causes invalid object CTX_FILTER_CACHE_STATISTICS</p>
<p>After downgrading Oracle Database, the following invalid Text object may be seen:</p>
<pre>
CTX_FILTER_CACHE_STATISTICS (synonym)
CTX_FILTER_CACHE_STATISTICS (view)
</pre>
<p>To fix this problem, in the current release of Oracle Database, after running the <code>catdwgrd.sql</code> script and before running the <code>catrelod.sql</code> script, issue the following two commands:</p>
<pre>
SQL&gt; drop public synonym ctx_filter_cache_statistics;
SQL&gt; drop view ctx_filter_cache_statistics;
</pre></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1653">
<tr>
<td class="cellalignment1660">
<table class="cellalignment1658">
<tr>
<td class="cellalignment1657"><a href="app.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1657"><a href="expimp.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1662">
<table class="cellalignment1656">
<tr>
<td class="cellalignment1657"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1657"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1657"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1657"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1657"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1657"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
