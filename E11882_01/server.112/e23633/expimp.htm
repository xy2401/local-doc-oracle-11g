<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Moving Data Using Oracle Data Pump</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-06-16T13:33:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Upgrade Guide" />
<meta name="dcterms.identifier" content="E23633-11" />
<meta name="dcterms.isVersionOf" content="UPGRD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="downgrade.htm" title="Previous" type="text/html" />
<link rel="Next" href="changes.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23633.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/13</span> <!-- End Header -->
<div id="UPGRD008" class="chapter"><a id="BABJHBEJ"></a><a id="i262220"></a>
<h1 class="chapter"><span class="secnum">7</span> Moving Data Using Oracle Data Pump</h1>
<p><a id="sthref356"></a><a id="sthref357"></a><a id="sthref358"></a>When upgrading Oracle Database, you can use the Export and Import utilities in Oracle Data Pump to move data from one database to another.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#BABGEAGC">About Data Pump Export and Import for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#i262247">Export and Import Requirements for Oracle Database Upgrades</a></p>
</li>
<li>
<p><a href="#i262317">Upgrading the Database Using Data Pump Export/Import</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink SUTIL" href="../e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a> for detailed information about Data Pump and the Export and Import utilities</div>
<a id="BABGEAGC"></a>
<div id="UPGRD12560" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About Data Pump Export and Import <a id="sthref359"></a><a id="sthref360"></a><a id="sthref361"></a><a id="sthref362"></a><a id="sthref363"></a><a id="sthref364"></a><a id="sthref365"></a>for Upgrading Oracle Database</h2>
<p>The Data Pump Export (expdp) and Import (impdp) utilities have a similar look and feel to the original Export (EXP) and Import (IMP) utilities, but they are completely separate. The Data Pump Export and Import utilities, first released in Oracle Database 10<span class="italic">g</span> Release 1 (10.1), are high performance replacements for the original Export and Import utilities. When upgrading your database, you must use the <a id="sthref366"></a><a id="sthref367"></a>Data Pump Export and Import utilities because these utilities provide greatly enhanced performance compared to the original Export and Import utilities. Additionally, the IMP and EXP utilities are no longer supported.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="preup.htm#BABFHFIJ">"Oracle Data Pump Export and Import and Oracle Database Upgrade"</a> for information on when to use this upgrade method</p>
</li>
<li>
<p><a class="olink SUTIL400" href="../../server.112/e22490/dp_perf.htm#SUTIL400"><span class="italic">Oracle Database Utilities</span></a> for a detailed list of Data Pump features that contribute to increased performance, as well as to enhanced ease-of-use</p>
</li>
<li>
<p><a href="#BABIFFHB">"When to Use the Original EXP and IMP Utilities"</a></p>
</li>
</ul>
</div>
<p>Data Pump Export and Import offer the following advantages:</p>
<ul>
<li>
<p>Provides greater data and metadata filtering capability than was provided by the original Export utility. Data Pump supports filtering the metadata that is exported and imported based upon objects and object types, using <code>INCLUDE</code> and <code>EXCLUDE</code> parameters.</p>
</li>
<li>
<p>Supports different modes for unloading/loading portions of the database including: full database mode, schema mode, table mode, tablespace mode, and transportable tablespace mode. (See the "Data Pump Export Modes" and "Data Pump Import Modes" sections in <a class="olink SUTIL" href="../e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a>)</p>
</li>
<li>
<p>Enables you to specify how partitioned tables should be handled during import operations, using the <code>PARTITION_OPTIONS</code> parameter.</p>
</li>
<li>
<p>Provides support for the full range of data types.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL100" href="../../server.112/e22490/dp_overview.htm#SUTIL100"><span class="italic">Oracle Database Utilities</span></a> for an overview of Data Pump Export and Import</div>
<a id="BABIFFHB"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">When to Use the Original EXP and IMP Utilities</h3>
<p>The original Export/Import utilities are required for the following types of database upgrades and downgrades:</p>
<ul>
<li>
<p>If you are upgrading from a release earlier than Oracle Database 10<span class="italic">g</span> Release 1 (10.1), then you must use the original Export/Import utilities to move the data. Likewise, if you are downgrading your database to a release earlier than Oracle Database 10<span class="italic">g</span> Release 1 (10.1), then you must use the original Export/Import utilities.</p>
</li>
<li>
<p>If you must downgrade to a release earlier than Oracle Database 10<span class="italic">g</span> Release 1 (10.1), then the original Export utility continues to provide support to ensure backward compatibility.</p>
</li>
<li>
<p>If you are moving tables of XMLType or tables containing XMLType columns (schema and non-schema-based) from Oracle Database 11<span class="italic">g</span> Release 1 (11.1) to Oracle Database 10<span class="italic">g</span> Release 2 (10.2).</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL001" href="../../server.112/e22490/original_import.htm#SUTIL001"><span class="italic">Oracle Database Utilities</span></a> for information on moving a database from one platform to another</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i262247"></a>
<div id="UPGRD12561" class="sect1">
<h2 class="sect1">Export and Import Requirements for Oracle Database Upgrades<a id="sthref368"></a><a id="sthref369"></a><a id="sthref370"></a><a id="sthref371"></a></h2>
<p>Dump files generated by the Data Pump Export utility are not compatible with dump files generated by the original Export utility. Therefore, files generated by the original Export (EXP) utility cannot be imported with the Data Pump Import (impdp) utility, and vice versa.</p>
<div id="UPGRD12562" class="sect2"><a id="sthref372"></a>
<h3 class="sect2">About Export Dump Files and Upgrading</h3>
<p>Dump files created by one of the Export utilities can be imported into all future releases of Oracle Database. For example, an Oracle8 original Export dump file can be imported by the Oracle8<span class="italic">i</span>, Oracle9<span class="italic">i</span>, Oracle Database 10<span class="italic">g</span>, and Oracle Database 11<span class="italic">g</span> original Import utility.</p>
<p><a href="#CHDDCIHD">Table 7-1</a> shows which releases to use when exporting data from releases earlier than Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and then importing that data into Oracle Database 11<span class="italic">g</span> Release 2 (11.2).</p>
<div id="UPGRD52672" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref373"></a><a id="CHDDCIHD"></a>Table 7-1 Exporting Data From Releases Earlier Than 11.2 and Importing Into Release 11.2</p>
<table class="cellalignment1663" title="Exporting Data From Releases Earlier Than 11.2 and Importing Into Release 11.2" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t6">Export From</th>
<th class="cellalignment1664" id="r1c2-t6">Import To</th>
<th class="cellalignment1664" id="r1c3-t6">Export Version to Use</th>
<th class="cellalignment1664" id="r1c4-t6">Import Version to Use</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t6" headers="r1c1-t6">
<p>Release 11.1</p>
</td>
<td class="cellalignment1660" headers="r2c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r2c1-t6 r1c3-t6">
<p>Data Pump Export Release 11.1</p>
</td>
<td class="cellalignment1660" headers="r2c1-t6 r1c4-t6">
<p>Data Pump Import Release 11.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t6" headers="r1c1-t6">
<p>Release 10.2</p>
</td>
<td class="cellalignment1660" headers="r3c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r3c1-t6 r1c3-t6">
<p>Data Pump Export Release 10.2</p>
</td>
<td class="cellalignment1660" headers="r3c1-t6 r1c4-t6">
<p>Data Pump Import Release 11.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t6" headers="r1c1-t6">
<p>Release 10.1</p>
</td>
<td class="cellalignment1660" headers="r4c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r4c1-t6 r1c3-t6">
<p>Data Pump Export Release 10.1</p>
</td>
<td class="cellalignment1660" headers="r4c1-t6 r1c4-t6">
<p>Data Pump Import Release 11.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r5c1-t6" headers="r1c1-t6">
<p>Release 9.2</p>
</td>
<td class="cellalignment1660" headers="r5c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r5c1-t6 r1c3-t6">
<p>Original Export Release 9.2</p>
</td>
<td class="cellalignment1660" headers="r5c1-t6 r1c4-t6">
<p>Original Import Release 11.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r6c1-t6" headers="r1c1-t6">
<p>Release 8.1.7</p>
</td>
<td class="cellalignment1660" headers="r6c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r6c1-t6 r1c3-t6">
<p>Original Export Release 8.1.7</p>
</td>
<td class="cellalignment1660" headers="r6c1-t6 r1c4-t6">
<p>Original Import Release 11.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r7c1-t6" headers="r1c1-t6">
<p>Release 8.0.6</p>
</td>
<td class="cellalignment1660" headers="r7c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r7c1-t6 r1c3-t6">
<p>Original Export Release 8.0.6</p>
</td>
<td class="cellalignment1660" headers="r7c1-t6 r1c4-t6">
<p>Original Import Release 11.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r8c1-t6" headers="r1c1-t6">
<p>Release 7.3.4</p>
</td>
<td class="cellalignment1660" headers="r8c1-t6 r1c2-t6">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r8c1-t6 r1c3-t6">
<p>Original Export Release 7.3.4</p>
</td>
<td class="cellalignment1660" headers="r8c1-t6 r1c4-t6">
<p>Original Import Release 11.2</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" --></div>
<!-- class="sect2" -->
<div id="UPGRD12563" class="sect2"><a id="sthref374"></a>
<h3 class="sect2">Export and Import Requirements for Downgrades</h3>
<p>The Oracle Database release to which you downgrade can be one release older, at the most. For example, if the current database is Oracle Database 11<span class="italic">g</span> Release 1 (11.1), then Oracle Database 10<span class="italic">g</span> Release 2 (10.2) is the only release supported for the downgrade.</p>
<p>To obtain a downward compatible dump file:</p>
<ul>
<li>
<p>With Data Pump Export, use the <span class="italic">current</span> version's Data Pump Export utility, but set the <code>VERSION</code> parameter to the target older version.</p>
<p>Data Pump Import cannot read dump file sets created by a database version that is newer than the current database version, unless those dump file sets were created with the <code>VERSION</code> parameter set to the version of the target database. Therefore, the best way to perform a downgrade is to use Data Pump Export with the <code>VERSION</code> parameter set to the version of the target database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL110" href="../../server.112/e22490/dp_overview.htm#SUTIL110"><span class="italic">Oracle Database Utilities</span></a> for more information about using the <code>VERSION</code> parameter</div>
</li>
<li>
<p>With original Export, run an older version of Export (exp) to produce a dump file that is compatible with the database version to which you want to downgrade. Then, run the target's original Import utility.</p>
<p><a id="sthref375"></a><a id="sthref376"></a>Original Export dump files are <span class="italic">not</span> downward compatible with the Import utilities of previous Oracle Database releases. That is, exported data <span class="italic">cannot</span> be imported by the Import utilities of previous Oracle Database releases. For example, an Oracle9<span class="italic">i</span> Export dump file cannot be imported by an Oracle8<span class="italic">i</span> Import utility, and an Oracle Database 10<span class="italic">g</span> export dump file cannot be imported by an Oracle9<span class="italic">i</span> Import utility. The following tables provide specific examples.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL103" href="../../server.112/e22490/original_import.htm#SUTIL103"><span class="italic">Oracle Database Utilities</span></a> for more information about using different releases and versions of Export</div>
</li>
</ul>
<p><a href="#BABCAHCE">Table 7-2</a> shows which releases to use when exporting data from Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and then importing that data into earlier releases. Major release downgrades are supported to 11.1, 10.2, and 10.1.</p>
<div id="UPGRD52673" class="tblhruleformalwide">
<p class="titleintable"><a id="sthref377"></a><a id="BABCAHCE"></a>Table 7-2 Exporting Data From Release 11.1 and Importing Into Earlier Releases</p>
<table class="cellalignment1663" title="Exporting Data From Release 11.1 and Importing Into Earlier Releases" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t9">Export From</th>
<th class="cellalignment1664" id="r1c2-t9">Import To</th>
<th class="cellalignment1664" id="r1c3-t9">Export Version to Use</th>
<th class="cellalignment1664" id="r1c4-t9">Import Version to Use</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t9" headers="r1c1-t9">
<p>Release 11.2</p>
</td>
<td class="cellalignment1660" headers="r2c1-t9 r1c2-t9">
<p>Release 11.1</p>
</td>
<td class="cellalignment1660" headers="r2c1-t9 r1c3-t9">
<p>Data Pump Export Release 11.2 with <code>VERSION</code><code>=11.1</code></p>
</td>
<td class="cellalignment1660" headers="r2c1-t9 r1c4-t9">
<p>Data Pump Import Release 11.1</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t9" headers="r1c1-t9">
<p>Release 11.1</p>
</td>
<td class="cellalignment1660" headers="r3c1-t9 r1c2-t9">
<p>Release 10.2</p>
</td>
<td class="cellalignment1660" headers="r3c1-t9 r1c3-t9">
<p>Data Pump Export Release 11.1 with <code>VERSION</code><code>=10.2</code></p>
</td>
<td class="cellalignment1660" headers="r3c1-t9 r1c4-t9">
<p>Data Pump Import Release 10.2</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t9" headers="r1c1-t9">
<p>Release 10.2</p>
</td>
<td class="cellalignment1660" headers="r4c1-t9 r1c2-t9">
<p>Release 10.1</p>
</td>
<td class="cellalignment1660" headers="r4c1-t9 r1c3-t9">
<p>Data Pump Export Release 10.2 with <code>VERSION</code><code>=10.1</code></p>
</td>
<td class="cellalignment1660" headers="r4c1-t9 r1c4-t9">
<p>Data Pump Import Release 10.1</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblhruleformalwide" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
When using the original Export utility, if the source database is newer than the target database, then you must run the <code>catexp.sql</code> script supplied with the previous (older) release for the export to be successful. Once the export is done, then run the <code>catexp.sql</code> script from the newer release to restore the export views. Perform the steps as follows:
<ol>
<li>
<p>Run the older <code>CATEXP.SQL</code> script on the database to be exported.</p>
</li>
<li>
<p>Use the older Export utility to create the dump file.</p>
</li>
<li>
<p>Use the older Import utility to import to the target database.</p>
</li>
<li>
<p>Run the newer <code>CATEXP.SQL</code> script on the exported database.</p>
</li>
</ol>
</div>
</div>
<!-- class="sect2" -->
<div id="UPGRD12564" class="sect2"><a id="sthref378"></a>
<h3 class="sect2">Export/Import Usage on Data Incompatible with a Previous Release<a id="sthref379"></a><a id="sthref380"></a></h3>
<p>When you export data to a previous release, data that is incompatible with the previous release either is not exported at all or is exported with the loss of some features.</p>
<p>In general, if you must export data to a previous release, then first remove as many incompatibilities with the previous release as possible before you export the data.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i262317"></a>
<div id="UPGRD12565" class="sect1">
<h2 class="sect1">Upgrading the Database Using Data Pump Export/Import<a id="sthref381"></a><a id="sthref382"></a></h2>
<p>To upgrade a database using the Data Pump Export/Import utilities, complete the following steps:</p>
<a id="i262325"></a>
<ol>
<li>
<p>Export data from the current database using the Export utility shipped with the current database. See the current <span class="italic">Oracle Database Utilities</span> documentation for information about using the Export utility on the current database.</p>
<p>To ensure a consistent export, make sure the current database is not available for updates during and after the export. If the current database is available to users for updates after the export, then, before making the current database available, put procedures in place to copy the changes made in the current database to the new database after the import is complete.</p>
</li>
<li>
<p>Install the new Oracle Database software. Installation is operating-system specific. Installation steps for Oracle Database are provided in <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system.</p>
</li>
<li>
<p>If the new database has the same name as the current database, then shut down the current database before creating the new database.</p>
</li>
<li>
<p>Create the new database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN002" href="../../server.112/e25494/create.htm#ADMIN002"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating a database</div>
</li>
<li>
<p>Start SQL*Plus in the new Oracle Database environment.</p>
</li>
<li>
<p>Connect to the database instance as a user with <code>SYSDBA</code> privileges.</p>
</li>
<li id="i262369">
<p>Start an Oracle Database instance using <code>STARTUP</code>.</p>
</li>
<li>
<p>Optionally, you can change the storage parameters from the source database.</p>
<p>You can pre-create tablespaces, users, and tables in the new database to improve space usage by changing storage parameters. When you pre-create tables using SQL*Plus, either run the database in the original database compatibility mode or make allowances for the specific data definition conversions that occur during import. When items have been pre-created, specify one of the following options:</p>
<ul>
<li>
<p><code>TABLE_EXISTS_ACTION=APPEND</code> for Data Pump Import</p>
</li>
<li>
<p><code>IGNORE=Y</code> for original Import</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the new database is created on the same computer as the source database, and you do not want to overwrite the source database data files, then you must pre-create the tablespaces and specify one of the following options when you import:
<ul>
<li>
<p><code>REUSE_DATAFILES=N</code> for Data Pump Import</p>
<p>Optionally, consider using the <code>REMAP_DATAFILE, REMAP_TABLESPACE</code> and <code>REMAP_TABLE</code> options so that references to the old names in the dump file set are remapped to new, non-colliding names.</p>
</li>
<li>
<p><code>DESTROY=N</code> for original Import.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Use the Import utility of the new database to import the objects exported from the current database. Include one of the following parameters to save the informational and error messages from the import session to a file:</p>
<ul>
<li>
<p>The <code>LOGFILE</code> parameter for Data Pump Import</p>
</li>
<li>
<p>The <code>LOG</code> parameter for original Import</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL" href="../e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a> for a complete description of the Data Pump Import utility.</div>
</li>
<li>
<p>After the import, check the import log file for information about which imports of which objects completed successfully and, if there were failures, which failed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL" href="../e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a> and the Oracle Database <code>README.doc</code> file for error handling information.</div>
</li>
<li>
<p>Use further Import scenarios (see <a class="olink SUTIL" href="../e22490/toc.htm"><span class="italic">Oracle Database Utilities</span></a>) or SQL scripts that create the database's objects to clean up incomplete imports (or possibly to start an entirely new import).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If a Data Pump Export or Import job encounters a fatal error, then the job can be restarted after the condition inducing the failure is corrected. The job then continues automatically from the point of failure.</div>
</li>
<li>
<p>If changes are made to the current database after the export, then make sure those changes are propagated to the new database before making it available to users. See Step 1 for more information.</p>
</li>
<li>
<p>Complete the procedures described in <a href="afterup.htm#BABEEEFF">Chapter 4, "Post-Upgrade Tasks for Oracle Database"</a>.</p>
</li>
</ol>
<div id="UPGRD52674" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref383"></a>
<h3 class="sect2">Importing a Full Database Using a Network Link</h3>
<p>As an alternative to the procedure in <a href="#i262317">"Upgrading the Database Using Data Pump Export/Import"</a>, you can use the Data Pump Import utility with a database link to perform a full database import from a source database to a destination database without intermediate dump files.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In order to avoid interoperability errors, ensure that the appropriate patchset has been applied to the database being upgraded. See My Oracle Support at <code><a href="https://support.oracle.com">https://support.oracle.com</a></code> to obtain the latest patchsets.
<p>You may also refer to support note ID 4511371.8, which discusses ORA-6544 and ORA-4052 errors.</p>
</div>
<p>Follow these steps to use a network link with impdp:</p>
<ol>
<li>
<p>Ensure that the exporting user at the source database has the <code>EXP_FULL_DATABASE</code> role.</p>
<p>This user must be specified when you create the database link.</p>
</li>
<li>
<p>Ensure that the importing user at the destination database has the <code>IMP_FULL_DATABASE</code> role.</p>
</li>
<li>
<p>Create and test a database link between the source and destination databases.</p>
</li>
<li>
<p>Run the following command, where <code><span class="codeinlineitalic">import_user</span></code> is the username for the importing user, and <code><span class="codeinlineitalic">db_link</span></code> is the name of the database link owned by the exporting user:</p>
<pre>
IMPDP <span class="italic">import_user</span>/<span class="italic">password</span> NETWORK_LINK=db_link FULL=Y;
</pre></li>
<li>
<p>A log file for the import operation is written to the DATA_PUMP_DIR directory. You can discover the location of this directory by running the following command:</p>
<pre>
SQL&gt; select * from dba_directories where DIRECTORY_NAME like 'DATA_PUMP_DIR';
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
XML objects are not exported from the source database.</div>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
The import operation re-creates users on the new destination server, and the creation date for <code>dba_users</code> shows the actual import date. The expiration date is updated to be <code>creation_date</code> + <code>password_life_time</code>. The parameters for dba_users on the new server are different than the dba_users parameters on the source server.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1653">
<tr>
<td class="cellalignment1660">
<table class="cellalignment1658">
<tr>
<td class="cellalignment1657"><a href="downgrade.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1657"><a href="changes.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1662">
<table class="cellalignment1656">
<tr>
<td class="cellalignment1657"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1657"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1657"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1657"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1657"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1657"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
