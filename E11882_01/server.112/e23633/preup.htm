<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Preparing to Upgrade Oracle Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-06-16T13:33:35Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Upgrade Guide" />
<meta name="dcterms.identifier" content="E23633-11" />
<meta name="dcterms.isVersionOf" content="UPGRD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="intro.htm" title="Previous" type="text/html" />
<link rel="Next" href="upgrade.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23633.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">5/13</span> <!-- End Header -->
<div id="UPGRD002" class="chapter"><a id="CEGIJFGC"></a><a id="i1007718"></a>
<h1 class="chapter"><span class="secnum">2</span> Preparing to Upgrade Oracle Database</h1>
<p>The process of upgrading Oracle Database includes understanding system considerations and requirements and troubleshooting various issues before actually performing the upgrade steps. Before you upgrade Oracle Database, you must become familiar with the new features and behavior changes. In preparation for upgrading you install the new Oracle software. The new Oracle software for this release provides the latest Pre-Upgrade Information Tool to help you understand requirements and complete pre-upgrade tasks.</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i1007753">The Main Steps for Preparing to Upgrade Oracle Database</a></p>
</li>
<li>
<p><a href="#i1008153">Testing the Upgrade Process for Oracle Database</a></p>
</li>
<li>
<p><a href="#i1008175">Testing the Upgraded Test Oracle Database</a></p>
</li>
</ul>
<a id="i1007753"></a>
<div id="UPGRD12356" class="sect1">
<h2 class="sect1">The Main Steps for Preparing to Upgrade Oracle Database<a id="sthref55"></a></h2>
<p>In preparation for upgrading Oracle Database, you review the new features, determine the best upgrade path and method. Oracle recommends that you test the upgrade process and prepare a backup strategy.</p>
<p>Complete the following tasks to prepare to upgrade:</p>
<ul>
<li>
<p><a href="#i1007781">Become Familiar with New Oracle Database Features for Upgrading</a></p>
</li>
<li>
<p><a href="#i1007814">Determine the Upgrade Path for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#i694345">Choose an Upgrade Method for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#i1008013">Choose a Location for the New Oracle Home for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#i1008049">Develop a Testing Plan to Upgrade Oracle Database</a></p>
</li>
<li>
<p><a href="#i694504">Prepare a Backup Strategy for Upgrading Oracle Database</a></p>
</li>
</ul>
<a id="i1007781"></a>
<div id="UPGRD12357" class="sect2">
<h3 class="sect2">Become Familiar with New Oracle Database Features for Upgrading</h3>
<p>Before you plan the upgrade process, become familiar with the features of the new Oracle Database 11<span class="italic">g</span> release. <a class="olink NEWFT" href="../e41360/toc.htm"><span class="italic">Oracle Database New Features Guide</span></a> is a good starting point for learning the differences between Oracle Database releases. Also, check specific guides in the Oracle Database 11<span class="italic">g</span> documentation library to find information about new features for a certain component. For example, see <a class="olink RACAD" href="../../rac.112/e41960/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for changes in Oracle Real Application Clusters.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>Oracle Database training classes are an excellent way to learn how to take full advantage of the features and functions available with Oracle Database. More information can be found at <code><a href="http://education.oracle.com/">http://education.oracle.com/</a></code></p>
</li>
<li>
<p>My Oracle Support provides detailed notes on how to obtain the latest patches, plus tools for lifecycle management and automated patching. For information about getting started with My Oracle Support, go to <code><a href="http://www.oracle.com/us/support/software/premier/my-oracle-support-068523.html">http://www.oracle.com/us/support/software/premier/my-oracle-support-068523.html</a></code></p>
</li>
</ul>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support Note ID 854428.1, "Patch Set Updates for Oracle Products" at <code><a href="https://support.oracle.com">https://support.oracle.com</a></code></div>
</div>
<!-- class="sect2" -->
<a id="i1007814"></a>
<div id="UPGRD12358" class="sect2">
<h3 class="sect2">Determine the Upgrade Path for Upgrading Oracle Database</h3>
<p>The path that you must take to upgrade to the new Oracle Database 11<span class="italic">g</span> release depends on the release number of your current database. It might not be possible to directly upgrade from your current release of Oracle Database to the latest release. Depending on your current release, you might be required to upgrade through one or more intermediate releases to upgrade to the new Oracle Database 11<span class="italic">g</span> release.</p>
<p>For example, if the current database is running release 9<span class="italic">i</span>, then follow these steps:</p>
<ol>
<li>
<p>Upgrade release 9.0.1.4 to release 10.2.0.4 using the instructions in <span class="italic">Oracle Database Upgrade Guide</span> Release 2 (10.2).</p>
</li>
<li>
<p>Upgrade release 10.2.0.4 to the new Oracle Database 11<span class="italic">g</span> release using the instructions in this guide.</p>
</li>
</ol>
<p><a href="#CEGEIBHC">Table 2-1</a> contains the required <a id="sthref56"></a><a id="sthref57"></a><a id="sthref58"></a><a id="sthref59"></a>upgrade path for each release of Oracle Database. Use the upgrade path and the specified documentation to upgrade your database.</p>
<div id="UPGRD52618" class="tblruleformalwide">
<p class="titleintable"><a id="sthref60"></a><a id="CEGEIBHC"></a>Table 2-1 Supported Upgrade Paths for Upgrading Oracle Database</p>
<table class="cellalignment1663" title="Supported Upgrade Paths for Upgrading Oracle Database" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t4">Current Release</th>
<th class="cellalignment1664" id="r1c2-t4">Upgrade Path</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t4" headers="r1c1-t4">
<p>9.0.1.3 (or earlier)</p>
</td>
<td class="cellalignment1660" headers="r2c1-t4 r1c2-t4">
<p>Direct upgrade is <span class="italic">not</span> supported. Upgrade to an intermediate Oracle Database release before you can upgrade to the new Oracle Database 11<span class="italic">g</span> release, as follows:</p>
<ul>
<li>
<p>9.0.1.3 (or earlier) -&gt; 9.0.1.4 -&gt; 10.2.0.4 -&gt; 11.2</p>
</li>
</ul>
<p>When upgrading to an intermediate Oracle Database release, follow the instructions in the intermediate release's documentation. Then, upgrade the intermediate release database to the new Oracle Database 11<span class="italic">g</span> release using the instructions in <a href="upgrade.htm#BABJADGA">Chapter 3, "Upgrading to the New Release of Oracle Database"</a>.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t4" headers="r1c1-t4">
<p>9.2.0.8</p>
<p>10.1.0.5</p>
<p>10.2.0.2</p>
<p>11.1.0.6</p>
</td>
<td class="cellalignment1660" headers="r3c1-t4 r1c2-t4">
<p>Direct upgrade to the new Oracle Database 11<span class="italic">g</span> release is supported from 9.2.0.8 or higher, 10.1.0.5 or higher, 10.2.0.2 or higher, and 11.1.0.6 or higher. Note that Oracle Clusterware release 10.2.0.<span class="italic">n</span> must be at release 10.2.0.3 (or higher), before you attempt to upgrade it to Oracle Clusterware 11<span class="italic">g</span>. See <a href="upgrade.htm#BABCEGBC">"About Upgrading an Oracle Real Application Clusters (Oracle RAC) Database"</a>.</p>
<p>For release 9.2.0.3, you must first upgrade to an intermediate Oracle Database release, as follows:</p>
<p>9.2.0.3 (or earlier) -&gt; 9.2.0.8 -&gt; 11.2</p>
<p>To upgrade to the new Oracle Database 11<span class="italic">g</span> release, follow the instructions in <a href="upgrade.htm#BABJADGA">Chapter 3, "Upgrading to the New Release of Oracle Database"</a>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformalwide" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="downgrade.htm#i1010267">"Supported Releases for Downgrading Oracle Database"</a> for information related to downgrading your database</div>
</div>
<!-- class="sect2" -->
<a id="i694345"></a>
<div id="UPGRD12359" class="sect2">
<h3 class="sect2">Choose an Upgrade Method<a id="sthref61"></a> for Upgrading Oracle Database</h3>
<p>The upgrade methods you can use to upgrade your database to the new Oracle Database 11<span class="italic">g</span> release are:</p>
<ul>
<li>
<p><a href="#BABFEBAI">Database Upgrade Assistant (DBUA)</a></p>
</li>
<li>
<p><a href="#BABCEIFB">Manual Upgrade</a></p>
</li>
<li>
<p><a href="#BABFHFIJ">Oracle Data Pump Export and Import and Oracle Database Upgrade</a></p>
</li>
</ul>
<a id="BABFEBAI"></a>
<div id="UPGRD12360" class="sect3">
<h4 class="sect3">Database Upgrade Assistant<a id="sthref62"></a><a id="sthref63"></a> (DBUA)</h4>
<p>Database Upgrade Assistant (DBUA) interactively steps you through the upgrade process and configures the database for the new Oracle Database 11<span class="italic">g</span> release. DBUA automates the upgrade process by performing all of the tasks normally performed manually. DBUA makes appropriate recommendations for configuration options such as tablespaces and redo logs. You can then act on these recommendations.</p>
<p>DBUA provides support for Oracle Real Application Clusters (Oracle RAC). In an Oracle RAC environment, DBUA upgrades all the database and configuration files on all nodes in the cluster.</p>
</div>
<!-- class="sect3" -->
<a id="BABCEIFB"></a>
<div id="UPGRD12363" class="sect3">
<h4 class="sect3">Manual Upgrade<a id="sthref64"></a><a id="sthref65"></a></h4>
<p>A manual upgrade consists of running SQL scripts and utilities from a command line to upgrade a database to the new Oracle Database 11<span class="italic">g</span> release.</p>
<p>While a manual upgrade gives you finer control over the upgrade process, it is more susceptible to error if any of the upgrade or pre-upgrade steps are either not followed or are performed out of order.</p>
<div id="UPGRD12364" class="sect4"><a id="sthref66"></a>
<h5 class="sect4">Before the Upgrade</h5>
<p>The following list provides a high-level summary of the manual upgrade steps:</p>
<ul>
<li>
<p>Analyze the database using the Pre-Upgrade Information Tool. The Pre-Upgrade Information Tool is a SQL script that is supplied with the new Oracle Database 11<span class="italic">g</span> release, and DBUA uses this script as part of its upgrade process. Run the script on the database you are upgrading.</p>
<p>The Pre-Upgrade Information Tool displays warnings about possible upgrade issues with the database. It also displays information about required initialization parameters for the new Oracle Database 11<span class="italic">g</span> release.</p>
</li>
<li>
<p>Prepare the new Oracle home.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1008013">"Choose a Location for the New Oracle Home for Upgrading Oracle Database"</a> for more information</div>
</li>
<li>
<p>Perform a backup of the database.</p>
</li>
</ul>
<p>Depending on the release of the database being upgraded, you might be required to perform additional pre-upgrade steps:</p>
<ul>
<li>
<p>Adjust the parameter file for the upgrade.</p>
</li>
<li>
<p>Remove obsolete initialization parameters.</p>
</li>
<li>
<p>Adjust initialization parameters that might cause upgrade problems.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> and <a class="olink RACAD" href="../../rac.112/e41960/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a></div>
</li>
<li>
<p>Set the <code>COMPATIBLE</code> parameter if not already explicitly set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="afterup.htm#CHDFIFFC">"Setting the COMPATIBLE Initialization Parameter"</a> for information about setting the <code>COMPATIBLE</code> initialization parameter</div>
</li>
</ul>
</div>
<!-- class="sect4" -->
<div id="UPGRD12365" class="sect4"><a id="sthref67"></a>
<h5 class="sect4">After the Upgrade</h5>
<p>Review the upgrade spool log file and use the Post-Upgrade Status Tool. The Post-Upgrade Status Tool is a SQL script that ships with the new Oracle Database 11<span class="italic">g</span> release. You run the Post-Upgrade Status Tool in the environment of the new release. The Post-Upgrade Status Tool can be run any time after upgrading the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="upgrade.htm#i1011600">"Upgrading Oracle Database Manually"</a></div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="BABFHFIJ"></a>
<div id="UPGRD12366" class="sect3">
<h4 class="sect3">Oracle Data Pump Export and Import<a id="sthref68"></a><a id="sthref69"></a><a id="sthref70"></a> and Oracle Database Upgrade</h4>
<p>Unlike DBUA or a manual upgrade, the Oracle Data Pump Export and Import utilities physically copy data from your current database to a new database. When upgrading from Oracle Database 10<span class="italic">g</span> Release 1 (10.1) or higher, <a id="sthref71"></a><a id="sthref72"></a>Data Pump Export and Import are recommended for higher performance and to ensure support for new datatypes.</p>
<p>The Export utility of the current database copies specified parts of the database into an export dump file. Then, the Import utility of the new Oracle Database 11<span class="italic">g</span> release loads the exported data into a new database. However, the new Oracle Database 11<span class="italic">g</span> database must currently exist before it can be loaded from the export dump file.</p>
<p>When importing data from an earlier release, the Import utility of the new Oracle Database 11<span class="italic">g</span> release makes appropriate changes to data definitions as it reads export dump files from earlier releases.</p>
<p>The following sections highlight aspects of Export/Import that might help you to decide whether to use Export/Import to upgrade your database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
<ul>
<li>
<p>If your database is earlier than Oracle Database release 10.1, then you can use the original Export and Import utilities to perform a full or partial export from your database, followed by a full or partial import into a new Oracle Database 11<span class="italic">g</span> database. Export/Import can copy a subset of the data in a database, leaving the original database unchanged.</p>
</li>
<li>
<p>The original Export utility is no longer being updated to support new datatypes.</p>
</li>
</ul>
</div>
<div id="UPGRD12367" class="sect4"><a id="sthref73"></a>
<h5 class="sect4">Export/Import Effects on Upgraded Databases<a id="sthref74"></a></h5>
<p>The Export/Import upgrade method does not change the current database, which enables the database to remain available throughout the upgrade process. However, if a consistent snapshot of the database is required (for data integrity or other purposes), then the database must run in restricted mode or must otherwise be protected from changes during the export procedure. Because the current database can remain available, you can, for example, keep an existing production database running while the new Oracle Database 11<span class="italic">g</span> database is being built at the same time by Export/Import. During the upgrade, to maintain complete database consistency, changes to the data in the database cannot be permitted without the same changes to the data in the new Oracle Database 11<span class="italic">g</span> database.</p>
<p>Most importantly, the Export/Import operation results in a completely new database. Although the current database ultimately contains a copy of the specified data, the upgraded database might perform differently from the original database. For example, although Export/Import creates an identical copy of the database, other factors, such as disk placement of data and unset tuning parameters, might cause unexpected performance problems.</p>
</div>
<!-- class="sect4" -->
<div id="UPGRD12368" class="sect4"><a id="sthref75"></a>
<h5 class="sect4">Export/Import Benefits<a id="sthref76"></a></h5>
<p>Upgrading using Data Pump Export/Import:</p>
<ul>
<li>
<p>Defragments the data. You can compress the imported data to improve performance.</p>
</li>
<li>
<p>Restructures the database. You can create new tablespaces or modify existing tables, tablespaces, or partitions to be populated by imported data.</p>
</li>
<li>
<p>Facilitates side-by-side testing of the old and new versions of Oracle Database because an entirely new database is created.</p>
</li>
<li>
<p>Enables the copying of specified database objects or users. Importing only the objects, users, and other items you need is useful for establishing a test environment for the new software on only a subset of the production data. Data Pump Export / Import provides flexible data subsetting capabilities.</p>
</li>
<li>
<p>Serves as a backup archive - you can use a full database export as an archive of the current database.</p>
</li>
<li>
<p>Enables the upgraded database to be established on an operating system or hardware platform that is different from that which is supporting the database being upgraded.Network-based Data Pump Import allows the new Oracle database to be directly loaded across the network from the old database being upgraded. Thus, no intervening dump files are required.</p>
</li>
</ul>
</div>
<!-- class="sect4" -->
<div id="UPGRD12369" class="sect4"><a id="sthref77"></a>
<h5 class="sect4">Time Requirements for Export/Import<a id="sthref78"></a></h5>
<p>Upgrading an entire database by using Export/Import can take a long time, especially compared to using DBUA or performing a manual upgrade. Therefore, you might be required to schedule the upgrade during non-peak hours or make provisions for propagating to the new database any changes that are made to the current database during the upgrade.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="expimp.htm#BABJHBEJ">Chapter 7, "Moving Data Using Oracle Data Pump"</a></div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1008013"></a>
<div id="UPGRD12370" class="sect2">
<h3 class="sect2">Choose a Location for the New Oracle Home for Upgrading Oracle Database</h3>
<p>You must choose a location for Oracle home on the new Oracle Database 11<span class="italic">g</span> release that is separate from the Oracle home of your current release. You cannot install the new software into the same location for Oracle home as your current release, unless you are installing an Oracle Database 11<span class="italic">g</span> patchset release. For a patchset release, you can use the same Oracle Database 11<span class="italic">g</span> Oracle home.</p>
<p>Using separate installation directories enables you to keep your existing software installed along with the new software. This method enables you to test the upgrade process on a test database before replacing your production environment entirely.</p>
</div>
<!-- class="sect2" -->
<a id="i1008049"></a>
<div id="UPGRD12371" class="sect2">
<h3 class="sect2">Develop a Testing Plan to Upgrade Oracle Database<a id="sthref79"></a><a id="sthref80"></a></h3>
<p>You need a series of carefully designed tests to validate all stages of the upgrade process. Executed rigorously and completed successfully, these tests ensure that the process of upgrading the production database is well understood, predictable, and successful. Perform as much testing as possible before upgrading the production database. Do not underestimate the importance of a complete and repeatable testing process.</p>
<p>The types of tests to perform are the same whether you use Real Application Testing features like Database Replay or SQL Performance Analyzer, or perform testing manually.</p>
<p>Your test plan must include these types of tests:</p>
<ul>
<li>
<p><a href="#CEGFHIGH">Oracle Database Upgrade Testing</a></p>
</li>
<li>
<p><a href="#CEGBHHBG">Minimal Testing for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGCIBHJ">Functional Testing for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGDGJBH">High Availability Testing for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGGBFGD">Integration Testing for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGCEDII">Performance Testing for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#CEGFFDCC">Volume and Load Stress Testing for Upgrading Oracle Database</a></p>
</li>
</ul>
<a id="CEGFHIGH"></a>
<div id="UPGRD12372" class="sect3">
<h4 class="sect3">Oracle Database Upgrade Testing</h4>
<p>Upgrade testing entails planning and testing the upgrade path from your current software to the new Oracle Database 11<span class="italic">g</span> release, whether you use DBUA, perform a manual upgrade, or use Export/Import or other data-copying methods. Regardless of the upgrade method you choose, you must establish, test, and validate an upgrade plan.</p>
</div>
<!-- class="sect3" -->
<a id="CEGBHHBG"></a>
<div id="UPGRD12373" class="sect3">
<h4 class="sect3">Minimal Testing<a id="sthref81"></a> for Upgrading Oracle Database</h4>
<p>Minimal testing entails moving all or part of an application from the current database to the new database and running the application without enabling any new database features. Minimal testing might not reveal problems that would appear in an actual production environment. However, minimal testing immediately reveals any application startup or invocation problems.</p>
</div>
<!-- class="sect3" -->
<a id="CEGCIBHJ"></a>
<div id="UPGRD12374" class="sect3">
<h4 class="sect3">Functional Testing<a id="sthref82"></a> for Upgrading Oracle Database</h4>
<p>Functional testing is a set of tests in which new and existing features and functions of the system are tested after the upgrade. Functional testing includes all database, networking, and application components. The objective of functional testing is to verify that each component of the system functions as it did before upgrading and to verify that new functions are working properly.</p>
</div>
<!-- class="sect3" -->
<a id="CEGDGJBH"></a>
<div id="UPGRD00242" class="sect3">
<h4 class="sect3">High Availability Testing for Upgrading Oracle Database<a id="sthref83"></a></h4>
<p>High availability testing entails:</p>
<ul>
<li>
<p>Ensuring that Recovery Time Objective (RTO) and Recovery Point Objective (RPO) business requirements are still met by the upgraded system. For example, in an Oracle RAC environment, injecting node or instance failures during stress testing help evaluate if the Oracle RAC recovery capability has changed.</p>
</li>
<li>
<p>Testing your fallback plans and procedures.</p>
</li>
<li>
<p>Checking the database performance and stability, and resolving performance problems.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
The <a class="olink HAOVW002" href="../../server.112/e17157/hadesign.htm#HAOVW002"><span class="italic">Oracle Database High Availability Overview</span></a> and "The Upgrade Companion" Web site available in Note 785351.1 on <a id="sthref84"></a><a id="sthref85"></a>My Oracle Support at <code><a href="http://support.oracle.com/">http://support.oracle.com/</a></code>.</div>
</div>
<!-- class="sect3" -->
<a id="CEGGBFGD"></a>
<div id="UPGRD12375" class="sect3">
<h4 class="sect3">Integration Testing for Upgrading Oracle Database<a id="sthref86"></a></h4>
<p>Integration testing examines the interactions among components of the system. Consider the following factors when you plan your integration testing:</p>
<ul>
<li>
<p>Pro*C/C++ applications running against a new Oracle Database 11<span class="italic">g</span> instance should be tested to ensure that there are no problems with the new software.</p>
</li>
<li>
<p>Graphical user interfaces should be tested with other components.</p>
</li>
<li>
<p>Subtle changes in the new Oracle Database 11<span class="italic">g</span> release, such as data types, data in the data dictionary (additional rows in the data dictionary, object type changes, and so on) can have an effect all the way up to the front-end application, even if the application is not directly connected to a new Oracle Database 11<span class="italic">g</span> instance.</p>
</li>
<li>
<p>If the connection between two components involves Oracle Net or Oracle Net Services, then those connections should also be tested and stress tested.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CEGCEDII"></a>
<div id="UPGRD12376" class="sect3">
<h4 class="sect3">Performance Testing<a id="sthref87"></a> for Upgrading Oracle Database</h4>
<p>Performance testing of the new database compares the performance of various SQL statements in the new database with the performance of those same statements in the current database. Before upgrading, you should understand the performance profile of the application under the current database. Specifically, you should understand the calls the application makes to the database server.</p>
<p>This section describes the following types of performance testing:</p>
<ul>
<li>
<p><a href="#CEGDFGCE">Database Replay</a></p>
</li>
<li>
<p><a href="#CEGHAHDF">SQL Performance Analyzer</a></p>
</li>
<li>
<p><a href="#BABHAFAH">SQL Plan Management</a></p>
</li>
</ul>
<a id="CEGDFGCE"></a>
<div id="UPGRD12378" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Database Replay<a id="sthref88"></a><a id="sthref89"></a><a id="sthref90"></a><a id="sthref91"></a></h5>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 1 (11.1), you can use the new Database Replay feature to perform real-world testing of a database upgrade on your site's production workload before actually upgrading the production database. This feature captures the actual database workload on the production system and replays it on the test system. It also provides analysis and reporting to highlight potential problems&mdash;for example, errors encountered, divergence in performance, and so forth. In addition, all the regular Enterprise Manager performance monitoring and reporting tools such as Automatic Database Diagnostic Monitor, Automatic Workload Repository (AWR), and Activity Session History are available to address any problems.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can change the stored procedure logic in the database but the stored PL/SQL procedures that implement the application logic <span class="italic">must</span> maintain the same interfaces as before the upgrade. If an upgrade affects the stored procedures of an application, then the workload might not be replayable. By using the Database Replay tool in this way, you have good diagnostics to see if the new application logic in the server is performing as expected after the upgrade.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RATUG104" href="../../server.112/e41481/dbr_intro.htm#RATUG104"><span class="italic">Oracle Database Real Application Testing User's Guide</span></a> for complete information about how to capture and replay workloads</div>
</div>
<!-- class="sect4" -->
<a id="CEGHAHDF"></a>
<div id="UPGRD12379" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">SQL Performance Analyzer</h5>
<p>Starting <a id="sthref92"></a>with Oracle Database 11<span class="italic">g</span> Release 1 (11.1), you can use the SQL Performance Analyzer to forecast the impact of system changes on a SQL workload. SQL Performance Analyzer enables evaluating the impact of a change such as database upgrade by identifying the SQL statements impacted by the upgrade and measuring their performance divergence. The analysis enables you to assess the overall effect of the upgrade on SQL performance and makes it possible to avoid any negative outcome before users can be impacted.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RATUG166" href="../../server.112/e41481/spa_intro.htm#RATUG166"><span class="italic">Oracle Database Real Application Testing User's Guide</span></a> for complete information and examples using the SQL Performance Analyzer to perform what-if analysis on potential database changes</div>
</div>
<!-- class="sect4" -->
<a id="BABHAFAH"></a>
<div id="UPGRD00232" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">SQL Plan Management</h5>
<p>SQL plan <a id="sthref93"></a>management prevents performance regressions resulting from sudden changes to the execution plan of a SQL statement by providing components for capturing, selecting, and evolving SQL plan information. SQL plan management is a preventative mechanism that records and evaluates the execution plans of SQL statements over time, and builds SQL plan baselines composed of a set of existing plans known to be efficient. The SQL plan baselines are then used to preserve performance of corresponding SQL statements, regardless of changes occurring in the system.</p>
<p>A database upgrade that installs a new optimizer version usually results in plan changes for a small percentage of SQL statements, with most of the plan changes resulting in either no performance change or improvement. However, certain plan changes may cause performance regressions.</p>
<p><a id="sthref94"></a>SQL plan management prevents performance regressions resulting from sudden changes to the execution plan of a SQL statement by providing components for capturing, selecting, and evolving SQL plan information. If you are performing a database upgrade that installs a new optimizer version, then it can result in plan changes for a small percentage of SQL statements, with most of the plan changes resulting in either no performance change or improvement. However, certain plan changes may cause performance regressions.</p>
<p>With SQL plan management, the optimizer automatically manages execution plans and ensures that only known or verified plans are used. When a new plan is found for a SQL statement, the plan is not used until it has been verified by the database to have comparable or better performance than the current plan. Therefore, if you seed SQL plan management with your current (pre-Oracle Database 11<span class="italic">g</span>) execution plan, which is to become the SQL plan baseline for each statement, then the optimizer uses these plans after the upgrade. If the Oracle Database 11<span class="italic">g</span> optimizer determines that a different plan is necessary, then the new plan is queued for verification and is not used until it has been confirmed to have comparable or better performance than the current plan.</p>
<p>There are two ways to seed or populate a <a id="sthref95"></a>SQL Management Base (SMB) with execution plans:</p>
<ul>
<li>
<p>Automatic capture of execution plans (available starting with Oracle Database 11<span class="italic">g</span>)</p>
</li>
<li>
<p>Bulk load execution plans or preexisting SQL plan baselines</p>
</li>
</ul>
<p>Bulk loading of execution plans or SQL plan baselines is especially useful when upgrading a database from a previous release to Oracle Database 11<span class="italic">g</span>. SQL plans that are bulk loaded are automatically accepted and added to existing or new plan histories as SQL plan baselines.</p>
<p>To bulk load the SQL Management Base as part of an upgrade:</p>
<ul>
<li>
<p>Populate the execution plans for a given <a id="sthref96"></a>SQL Tuning Set (STS), as described in <a href="#CEGFDEEI">"Bulk Loading a SQL Management Base with a SQL Tuning Set (STS)"</a>.</p>
<p>Or</p>
</li>
<li>
<p>Unpack existing SQL plan baselines from a staging table, as described in <a href="#CEGHCJEG">"Unpacking Existing Oracle Database SQL Plan Baselines from a Staging Table"</a>.</p>
</li>
</ul>
<p class="subhead2"><a id="CEGFDEEI"></a><a id="UPGRD52619"></a>Bulk Loading a SQL Management Base with a SQL Tuning Set (STS)</p>
<p class="orderedlisttitle">To bulk load the SQL Management Base with an execution plan from an STS&nbsp;</p>
<ol>
<li>
<p>In Oracle Database 10<span class="italic">g</span> Release 2 (10.2), create an STS that includes the execution plan for each of the SQL statements.</p>
</li>
<li>
<p>Load the STS into a staging table and export the staging table into a dump file.</p>
</li>
<li>
<p>Import the staging table from a dump file into Oracle Database 11<span class="italic">g</span> and unload the STS.</p>
</li>
<li>
<p>Use Oracle Enterprise Manager or <code>DBMS_SPM.LOAD_PLANS_FROM_SQLSET</code> to load the execution plans into the SQL Management Base.</p>
</li>
</ol>
<p class="subhead2"><a id="CEGHCJEG"></a><a id="UPGRD52620"></a>Unpacking Existing Oracle Database SQL Plan Baselines from a Staging Table</p>
<p>Perform the steps in this procedure to test and tune all of your critical SQL queries on an Oracle Database 11<span class="italic">g</span> test environment and then move those exact SQL execution plans to your Oracle Database 11<span class="italic">g</span> production environment.</p>
<p class="orderedlisttitle">To test and tune your critical SQL queries on an Oracle Database 11g test environment&nbsp;</p>
<ol>
<li>
<p>On the Oracle Database 11<span class="italic">g</span> test system, after completing all testing and tuning, use the <code>DBMS_SPM.LOAD_PLAN_FROM_CURSOR_CACHE</code> procedure or Enterprise Manager to load all of the execution plans in the cursor cache into the SQL Management Base.</p>
</li>
<li>
<p>Create a staging table using the <code>DBMS_SPM.CREATE_STGTAB_BASELINE</code> procedure.</p>
</li>
<li>
<p>Pack the SQL plan baselines you created in step 1 into the staging table using the <code>DBMS_SPM.PACK_STGTAB_BASELINE</code> function.</p>
</li>
<li>
<p>Export the staging table into a flat file using the Export command or Data Pump.</p>
</li>
<li>
<p>Transfer this flat file to the target system.</p>
</li>
<li>
<p>Import the staging table from the flat file using the Import command or Data Pump.</p>
</li>
<li>
<p>Unpack the SQL plan baselines from the staging table into the SQL Management Base on the target system using the <code>DBMS_SPM.UNPACK_STGTAB_BASELINE</code> function.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink PFGRF007" href="../../server.112/e41573/optplanmgmt.htm#PFGRF007"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information about using SQL Plan Management</div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CEGFFDCC"></a>
<div id="UPGRD12380" class="sect3">
<h4 class="sect3">Volume and Load Stress Testing<a id="sthref99"></a> for Upgrading Oracle Database</h4>
<p>Volume and load stress testing tests the entire upgraded database under high volume and loads. Volume describes the amount of data being manipulated. Load describes the level of concurrent demand on the system. The objective of volume and load testing is to emulate how a production system might behave under various volumes and loads.</p>
<p>Volume and load stress testing is crucial, but is commonly overlooked. Oracle has found that customers often do not conduct any kind of volume or load stress testing. Instead, customers often rely on benchmarks that do not characterize business applications. Benchmarks of the application should be conducted to uncover problems relating to functions, performance, and integration, but they cannot replace volume and load stress testing.</p>
<p>Load testing <a id="sthref100"></a>involves running an application load against the new release of the database to ensure that the application does not encounter problems such as new errors or performance issues under load conditions likely to be encountered in production. Many times, problems manifest under certain load conditions and are normally not seen in functional testing. The Database Replay feature is ideal for such load testing as it enables capturing the system workload from a production environment and replay it in identical fashion on the test system.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i694504"></a>
<div id="UPGRD12382" class="sect2">
<h3 class="sect2">Prepare a Backup Strategy for Upgrading Oracle Database<a id="sthref101"></a><a id="sthref102"></a></h3>
<p>The ultimate success of your upgrade depends heavily on the design and execution of an appropriate backup strategy.</p>
<p>To develop a backup strategy, consider the following questions:</p>
<ul>
<li>
<p>How long can the production database remain inoperable before business consequences become intolerable?</p>
</li>
<li>
<p>What backup strategy is necessary to meet your availability requirements?</p>
</li>
<li>
<p>Are backups archived in a safe, offsite location?</p>
</li>
<li>
<p>How quickly can backups be restored (including backups in offsite storage)?</p>
</li>
<li>
<p>Have recovery procedures been tested successfully?</p>
</li>
</ul>
<p>Your backup strategy should answer all of these questions and include procedures for successfully backing up and recovering your database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information on database backups</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1008153"></a>
<div id="UPGRD12383" class="sect1">
<h2 class="sect1">Testing the Upgrade Process for Oracle Database<a id="sthref103"></a></h2>
<p>Create a test environment that does not interfere with the current production database.</p>
<p>Your test environment depends on the upgrade method you have chosen:</p>
<ul>
<li>
<p>If you plan to use DBUA or perform a manual upgrade, then create a test version (typically a subset) of the current production database to test the upgrade.</p>
</li>
<li>
<p>If you plan to use Export/Import, then export and import small test pieces of the current production database.</p>
</li>
</ul>
<p>Practice upgrading the database using the test environment. The best upgrade test, if possible for you to create, is performed on an exact copy of the database to be upgraded, rather than on a downsized copy or test data. If for some reason an exact copy is impractical, then carefully chose a representative subset of your data to move over to your test environment and test the upgrade on that data.</p>
<p>Ensure that you upgrade any OCI and precompiler applications that you plan to use with your new Oracle database. Then, you can test these applications on a sample database before upgrading your current production database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="app.htm#i1006617">"Upgrading Precompiler and OCI Applications"</a> for more information</div>
</div>
<!-- class="sect1" -->
<a id="i1008175"></a>
<div id="UPGRD12384" class="sect1">
<h2 class="sect1">Testing the Upgraded Test Oracle Database<a id="sthref104"></a></h2>
<p>Perform the planned tests on the current database and on the test database that you upgraded to the new Oracle Database 11<span class="italic">g</span> release. Compare the results, noting anomalies. Repeat the test upgrade as many times as necessary.</p>
<p><a id="sthref105"></a>Test the newly upgraded test database with existing applications to verify that they operate properly with a new Oracle database. You also might test enhanced functions by adding available Oracle Database features. However, first ensure that the applications operate in the same manner as they did in the current database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="app.htm#BABHJHEH">Chapter 5, "Upgrading Applications After Upgrading Oracle Database"</a> for more information on using applications with Oracle Database</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1653">
<tr>
<td class="cellalignment1660">
<table class="cellalignment1658">
<tr>
<td class="cellalignment1657"><a href="intro.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1657"><a href="upgrade.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1662">
<table class="cellalignment1656">
<tr>
<td class="cellalignment1657"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1657"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1657"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1657"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1657"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1657"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
