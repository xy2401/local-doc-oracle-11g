<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Upgrading to the New Release of Oracle Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1023" />
<meta name="dcterms.created" content="2014-06-16T13:33:35Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Upgrade Guide" />
<meta name="dcterms.identifier" content="E23633-11" />
<meta name="dcterms.isVersionOf" content="UPGRD" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="preup.htm" title="Previous" type="text/html" />
<link rel="Next" href="afterup.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23633.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">6/13</span> <!-- End Header -->
<div id="UPGRD003" class="chapter"><a id="BABJADGA"></a><a id="i1011372"></a>
<h1 class="chapter"><span class="secnum">3</span> Upgrading to the New Release of Oracle Database</h1>
<p>Upgrading to a new release of Oracle Database is a basic part of database maintenance and administration. Oracle provides the Database Upgrade Assistant and specialized scripts and tools to assist with the upgrade process and to automate many steps. This chapter discusses important information and requirements and guides you through the process of upgrading a database to Oracle Database 11<span class="italic">g</span> Release 2 (11.2).</p>
<p>This chapter contains the following topics:</p>
<ul>
<li>
<p><a href="#i1011628">System Considerations and Requirements for Upgrading Oracle Database</a></p>
</li>
<li>
<p><a href="#i1011398">Installing the New Oracle Database Software for the Upgrade</a></p>
</li>
<li>
<p><a href="#CACDIAEB">About the Latest Patch Set Updates and Any Required Patches</a></p>
</li>
<li>
<p><a href="#CACHIDJD">Using the Pre-Upgrade Information Tool</a></p>
</li>
<li>
<p><a href="#CACHCBEJ">Configuring the Listener When Upgrading from Oracle9<span class="italic">i</span></a></p>
</li>
<li>
<p><a href="#i1011482">Upgrading with Database Upgrade Assistant on Linux, UNIX, and Windows</a></p>
</li>
<li>
<p><a href="#CHDHIIHD">Optionally Performing an In-Place Upgrade (Into the Same Oracle Home)</a></p>
</li>
<li>
<p><a href="#i1011600">Upgrading Oracle Database Manually</a></p>
</li>
<li>
<p><a href="#i1012368">Troubleshooting the Upgrade of Oracle Database</a></p>
</li>
<li>
<p><a href="#BABCGHFJ">Rerunning the Upgrade for Oracle Database</a></p>
</li>
<li>
<p><a href="#i1012399">Cancelling the Upgrade for Oracle Database</a></p>
</li>
<li>
<p><a href="#BABGEDJI">About Upgrading an Oracle ASM Instance</a></p>
</li>
</ul>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<p class="warnsp">If you retain the old Oracle software, then never start the upgraded database with the old Oracle software. Only start the database with the executables in the new Oracle Database installation.</p>
</div>
<a id="i1011628"></a>
<div id="UPGRD12385" class="sect1">
<h2 class="sect1">System Considerations and Requirements for Upgrading Oracle Database</h2>
<p>When you upgrade to a new release of Oracle Database, typically there are new or changed system requirements. The following topics describe the various checks and considerations to perform before starting an upgrade of Oracle Database:</p>
<ul>
<li>
<p><a href="#CHDHBADC">Relocating Existing Data Files to the New Oracle Database Environment</a></p>
</li>
<li>
<p><a href="#CIAEDAJI">About Upgrading PL/SQL Packages That Are Not Installed by Default</a></p>
</li>
<li>
<p><a href="#BABEBHEI">About Upgrading Oracle ASM Installed with Oracle Grid Infrastructure</a></p>
</li>
<li>
<p><a href="#CACGCGIC">Considerations for Upgrading Oracle Clusterware and Oracle ASM Instances</a></p>
</li>
<li>
<p><a href="#CACHCEGB">About Upgrading with Read-Only and Offline Tablespaces</a></p>
</li>
<li>
<p><a href="#CACHBEAC">About Upgrading Using Standby Databases</a></p>
</li>
<li>
<p><a href="#CACFEHHE">About Upgrading Your Operating System</a></p>
</li>
<li>
<p><a href="#CACJIFIJ">Migrating Data to a Different Operating System</a></p>
</li>
<li>
<p><a href="#CIAFJJFC">About Upgrading Databases That Use Oracle Streams Downstream Capture</a></p>
</li>
<li>
<p><a href="#BABDBGBD">About Upgrading Databases That Use Oracle Database Vault</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Important:</p>
To upgrade to this release, you must install the Oracle Grid Infrastructure and Oracle Database software into a new Oracle home instead of applying a patch set to the existing Oracle home. This is referred to as an <span class="italic">out-of-place</span> upgrade and is different from patch set releases for earlier releases of Oracle Database, where the patch set was always installed <span class="italic">in place</span>.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Grid Infrastructure does not support in-place upgrade. Only out-of-place upgrade into a new grid intrastructure home is supported.</div>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for information about upgrade considerations for Oracle Net Services</p>
</li>
<li>
<p>Your operating system-specific Oracle documentation for additional information about preparing to upgrade</p>
</li>
<li>
<p><a href="intro.htm#i1008722">"About Rolling Upgrades for Oracle Database"</a> for information about rolling upgrades</p>
</li>
</ul>
</div>
<a id="CHDHBADC"></a>
<div id="UPGRD52712" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Relocating Existing Data Files to the New Oracle Database Environment</h3>
<p>Before you remove the old Oracle environment, you must relocate any data files in that environment to the new Oracle Database environment.</p>
<p class="itemizedlisttitle">To relocate data files to the new Oracle Database environment&nbsp;</p>
<ul>
<li>
<p>Use Database Upgrade Assistant (DBUA) and select the <span class="bold">Move Database Files</span> option during the upgrade.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<p><a href="#i1011482">"Upgrading with Database Upgrade Assistant on Linux, UNIX, and Windows"</a> for more information</p>
<p><a class="olink ADMIN11073" href="../../server.112/e25494/create.htm#ADMIN11073"><span class="italic">Oracle Database Administrator's Guide</span></a>, if you perform a manual upgrade, for information about relocating data files</p>
</div>
</div>
<!-- class="sect2" -->
<a id="CIAEDAJI"></a>
<div id="UPGRD52699" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Upgrading PL/SQL Packages That Are Not Installed by Default</h3>
<p>Packages that were previously installed on the database for which you are preparing to upgrade to the current release may not be upgraded automatically. You may need to separately check if the package is available in the current release and reinstall that package to ensure you have the latest version.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABJHIHH">"Managing and Updating Access Control Lists and Network Utility Packages"</a></div>
</div>
<!-- class="sect2" -->
<a id="BABEBHEI"></a>
<div id="UPGRD13090" class="sect2">
<h3 class="sect2">About Upgrading Oracle ASM Installed with Oracle Grid Infrastructure<a id="sthref107"></a></h3>
<p>Oracle ASM is upgraded as part of the Oracle Grid Infrastructure upgrade. You cannot upgrade Oracle ASM before you upgrade Oracle Grid Infrastucture.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BABGEDJI">"About Upgrading an Oracle ASM Instance"</a></p>
</li>
<li>
<p><a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACGCGIC"></a>
<div id="UPGRD12386" class="sect2">
<h3 class="sect2">Considerations for Upgrading Oracle Clusterware and Oracle ASM Instances<a id="sthref108"></a><a id="sthref109"></a><a id="sthref110"></a><a id="sthref111"></a><a id="sthref112"></a><a id="sthref113"></a></h3>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.1), Oracle Clusterware and Oracle Real Application Clusters (Oracle RAC) must be installed into a separate, new home from the existing installation. This reduces the downtime required to upgrade a node in the cluster and facilitates the provisioning of clusters within an enterprise. The reduction in planned outage time required for cluster upgrades helps in meeting availability service levels and also makes it easier to provide a standard installation across the enterprise.</p>
<p>The following considerations pertain to upgrading Oracle Clusterware and Oracle ASM instances:</p>
<ul>
<li>
<p>For releases earlier than Oracle Database 11<span class="italic">g</span>, either all Oracle software installations were owned by the Oracle user, typically <code>oracle</code>, or Oracle Database software was owned by the user <code>oracle</code>, and Oracle Clusterware software was owned by a separate user, typically <code>crsuser</code>.</p>
</li>
<li>
<p>Starting with Oracle Database 11<span class="italic">g</span>, the user account that is designated as <span class="italic">owner</span> of the release 10<span class="italic">g</span> Cluster Ready Services (CRS) software must perform the Oracle Clusterware 11<span class="italic">g</span> upgrade. The user account that is performing this upgrade must also be the user that owns the ASM home of the earlier release (that is, previous to release 11.2). If the pre-11.2 ASM home has a different owner, then the <span class="italic">owner</span> account must be changed before performing the upgrade.</p>
</li>
<li>
<p>As of Oracle Database 11<span class="italic">g</span> release 2 (11.2), the Oracle Clusterware software must be upgraded to a new home location in the Oracle Grid Infrastructure home. Additionally, Oracle ASM and Oracle Clusterware (and <a id="sthref114"></a>Oracle Restart for single-instance databases) must run in the same <a id="sthref115"></a>Oracle Grid Infrastructure home. When upgrading Oracle Clusterware to release 11.2, OUI automatically calls Oracle ASM Cluster Assistant (ASMCA) to perform the upgrade into the Oracle Grid Infrastructure home.</p>
</li>
<li>
<p>To upgrade to Oracle Database release 11.2.0.3, you must install the Oracle Grid Infrastructure and Oracle Database software into a new Oracle home instead of into the existing Oracle home.</p>
</li>
<li>
<p>For a single-instance configuration, Oracle ASM and Oracle Restart run from the Oracle Grid Infrastructure home, and the cluster synchronization services daemon (CSS) runs from this same home. Thus, Oracle ASM and CSS are upgraded to Oracle Database 11<span class="italic">g</span> Release 2 (11.2) at the same time.</p>
</li>
<li>
<p>For Oracle Database release 11.1 and earlier releases, if your configuration does not include Oracle ASM, then you must shut down the CSS daemon and delete the CSS service from the system by running the <code>localconfig</code> command with the <code>delete</code> option. For example:</p>
<pre>
<span class="italic">ORACLE_HOME</span>/bin/localconfig delete
</pre></li>
<li>
<p>You must ensure that the database compatibility attribute for Oracle ASM disk groups matches the compatibility parameter that is set in <code>init.ora</code>.</p>
</li>
</ul>
<div id="UPGRD52713" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref116"></a>
<h4 class="sect3">Determining If Oracle ASM is Included in the Current Database Configuration</h4>
<p>If you do not know whether or not your configuration includes Oracle ASM, then issue the following SQL statement on the database instance:</p>
<pre>
select count(*) from v$asm_client where status = 'CONNECTED';
</pre>
<p>If this statement returns one or more rows, then the database is actively using an Oracle ASM disk group.</p>
</div>
<!-- class="sect3" -->
<a id="BABCEGBC"></a>
<div id="UPGRD12387" class="sect3">
<h4 class="sect3">About Upgrading an Oracle Real Application Clusters (Oracle RAC) Database</h4>
<p>You can use Database Upgrade Assistant (DBUA) to upgrade an existing Oracle RAC database to the current release of Oracle Database. DBUA guides you through the upgrade process and configures your database for the new release. DBUA automates the upgrade process and makes appropriate recommendations for configuration options such as tablespaces and online redo log files.</p>
<p>If you are manually upgrading an Oracle RAC database, then most of the actions are to be performed on only one node of the system. Actions that must be performed on more than one node are indicated in the relevant steps.</p>
</div>
<!-- class="sect3" -->
<div id="UPGRD52621" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref117"></a>
<h4 class="sect3">About Requirements for Time Synchronization on Oracle RAC</h4>
<p>Oracle Clusterware 11<span class="italic">g</span> release 2 (11.2) requires time synchronization across all nodes within a cluster when Oracle RAC is deployed.</p>
<p>You can use one of the following options for time synchronizaion:</p>
<ul>
<li>
<p>Your operating system-configured network time protocol (NTP)</p>
</li>
<li>
<p>Oracle Cluster Time Synchronization Service</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for your operating system for information on configuring NTP and Oracle Cluster Time Synchronization Service</div>
</div>
<!-- class="sect3" -->
<div id="UPGRD52622" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref118"></a>
<h4 class="sect3">Considerations for Upgrading Oracle RAC and Databases That Use Oracle ASM</h4>
<p>If you are upgrading Oracle RAC and your databases use Oracle ASM for data file storage, then you need to consider additional restrictions and requirements.</p>
<ul>
<li>
<p>A subset of nodes cannot be selected when upgrading from an earlier release to 11.2.0.3.</p>
<p>Before the new database release 11.2.0.3 software can be installed on the system, the root script for upgrading Oracle Grid Infrastructure invokes ASMCA to upgrade Oracle ASM to release 11.2.0.3.</p>
</li>
<li>
<p>Where Oracle Clusterware software has been upgraded to release 11.2.0.1, but where Oracle ASM is running an earlier release, then DBUA displays an error indicating that the Oracle ASM cluster has not been upgraded. In this case, the root script invokes Oracle ASM Cluster Assistant (ASMCA) to upgrade Oracle ASM to release 11.2.0.1 before installing any Oracle Database release 11.2.0.3 software on the system.</p>
</li>
<li>
<p>When upgrading from release 11.2.0.1 to 11.2.0.3, DBUA needs the Oracle Clusterware stack to be up. If DBUA finds that the Oracle Clusterware stack is down on the local node, then it displays an error message indicating the commands that need to be run to start up the stack on the local node.</p>
</li>
<li>
<p>DBUA does not permit a single-instance database (SIDB) release 11.2.0.3 to be installed on 11.2.0.1 clusters.</p>
</li>
<li>
<p>If DBUA detects Oracle Restart, then it presents a page asking you whether to register the database with Oracle Restart. If you choose to register with Oracle Restart, then DBUA displays a message prompting you to first upgrade Oracle Grid infrastructure to release 11.2.0.3.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Restart was previously referred to as Oracle Single-Instance High Availability (SIHA).</div>
</div>
<!-- class="sect3" -->
<a id="BABEJBFD"></a>
<div id="UPGRD12388" class="sect3">
<h4 class="sect3">About Upgrading System Authentication for Oracle ASM Instances</h4>
<p>Starting with Oracle Database 11<span class="italic">g</span> Release 1 (11.1), you should use the <code>SYSASM</code><a id="sthref119"></a><a id="sthref120"></a><a id="sthref121"></a> privilege to separate database management and storage management responsibilities. Also, you have the option to create separate operating system credentials for Oracle ASM and each database. This separation allows for an even greater division of database management and storage management responsibilities. For instance, if there are <span class="italic">n</span> databases using Oracle ASM on a given node, then you can configure <span class="italic">n</span> + 1 sets of operating system credentials groups whose members have <code>SYS</code> privileges: one <code>OSDBA</code> group for each database with <code>SYSDBA</code> privileges, and one <code>OSASM</code> group for the Oracle ASM instance with <code>SYSASM</code> privileges.</p>
</div>
<!-- class="sect3" -->
<div id="UPGRD52714" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref122"></a>
<h4 class="sect3">Considerations for Upgrading an Oracle ASM Instance</h4>
<p>Before upgrading an Oracle ASM instance to the new Oracle Database 11<span class="italic">g</span> release, you must add a user and password combination to the password file that is local to a node's Oracle ASM instance using the SQL*Plus <code>CREATE USER</code> statement:</p>
<pre>
CREATE USER <span class="variable">user_name</span> IDENTIFIED BY <span class="variable">password</span>;
</pre>
<ul>
<li>
<p>It is only necessary to add a user and password combination to the password file when upgrading the Oracle ASM instance. It is not necessary when upgrading a database to the new Oracle Database 11<span class="italic">g</span> release without upgrading Oracle ASM.</p>
</li>
<li>
<p>If the default Oracle Database 11<span class="italic">g</span> security settings are in place, then passwords must be at least eight characters, and passwords such as <code>welcome</code> and <code>oracle</code> are not allowed.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OSTMG02600" href="../../server.112/e18951/asminst.htm#OSTMG02600"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for more information about authentication for accessing Oracle ASM instances</p>
</li>
<li>
<p><a class="olink SQLRF" href="../e41084/toc.htm"><span class="italic">Oracle Database SQL Language Reference</span></a> for complete syntax about <code>CREATE USER</code></p>
</li>
<li>
<p><a class="olink DBSEG50053" href="../../network.112/e36292/app_devs.htm#DBSEG50053"><span class="italic">Oracle Database Security Guide</span></a> for password management guidelines and other security recommendations</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CACHCEGB"></a>
<div id="UPGRD12389" class="sect2">
<h3 class="sect2">About Upgrading with Read-Only and Offline Tablespaces</h3>
<p>Oracle Database 11<span class="italic">g</span> Release 1 (11.1) and later releases can read file headers created in previous releases, so you are not required to do anything to them during the upgrade. The only exception to this is if you want to transport tablespaces created previously than Oracle Database 11<span class="italic">g</span> Release 1 (11.1) to another platform. In this case, the file headers must be made read/write at some point before the transport. However, there are no special actions required on them during the upgrade.</p>
<p>The file headers of offline data files are updated later when they are brought online, and the file headers of read-only tablespaces are updated if and when they are made read/write sometime after the upgrade. You are never required to make read-only tablespaces read/write in any other circumstance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about read-only tablespaces and transporting tablespaces between databases</div>
</div>
<!-- class="sect2" -->
<a id="CACHBEAC"></a>
<div id="UPGRD12390" class="sect2">
<h3 class="sect2">About Upgrading Using Standby Databases</h3>
<p>To upgrade the Oracle Database software when standby databases are present in an Oracle Data Guard configuration, see <a class="olink SBYDB1200" href="../../server.112/e41134/upgrades.htm#SBYDB1200"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>. To upgrade or downgrade Oracle Database and Oracle Enterprise Manager software in an Oracle Data Guard broker configuration, see <a class="olink DGBKR1200" href="../../server.112/e40771/upgrade_appx.htm#DGBKR1200"><span class="italic">Oracle Data Guard Broker</span></a>.</p>
<p>During a <a id="sthref123"></a>rolling upgrade, you can run different releases of Oracle Database software on the primary and standby databases while you upgrade them, one at a time, incurring minimal downtime on the primary database by using either of the following methods:</p>
<ul>
<li>
<p>SQL Apply and logical standby databases</p>
<p>Starting with Oracle Database 10<span class="italic">g</span> Release 1 (10.1.0.3), you can use Oracle Data Guard<a id="sthref124"></a><a id="sthref125"></a> SQL Apply on a logical standby database to perform a rolling upgrade to the new Oracle Database 11<span class="italic">g</span> release. For example, you can upgrade the Oracle Database software from patch set release 10.1.0.<span class="italic">n</span> to the next database 10.1.0.(<span class="italic">n</span>+1) patch set release, or upgrade Oracle Database 10<span class="italic">g</span> Release 1 (10.1) to Oracle Database 11<span class="italic">g</span> Release 2 (11.2).</p>
</li>
<li>
<p>Use of physical standby database for rolling upgrades</p>
<p>A physical standby database <a id="sthref126"></a><a id="sthref127"></a>can now take advantage of the rolling upgrade feature provided by a logical standby. Through the use of the new <code>KEEP IDENTITY</code> clause option to the SQL <code>ALTER DATABASE RECOVER TO LOGICAL STANDBY</code> statement, a physical standby database can be temporarily converted into a logical standby database for the rolling upgrade, and then reverted back to the original configuration of a primary database and a physical standby database when the upgrade is done.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink HABPT" href="../e10803/toc.htm"><span class="italic">Oracle Database High Availability Best Practices</span></a></p>
</li>
<li>
<p>The following Oracle Maximum Availability Architecture (MAA) white papers at <code><a href="http://www.oracle.com/technetwork/database/features/availability/maa-090890.html">http://www.oracle.com/technetwork/database/features/availability/maa-090890.html</a></code>:</p>
<p>"Rolling Database Upgrades for Physical Standby Databases Using Transient Logical Standby 11<span class="italic">g</span>"</p>
<p>"Rolling Database Upgrades using Data Guard SQL Apply"</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACFEHHE"></a>
<div id="UPGRD12391" class="sect2">
<h3 class="sect2">About Upgrading Your Operating System</h3>
<p>When you upgrade to a new release of Oracle software, the operating system requirements may have changed. If required, upgrade the operating system before upgrading Oracle Database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The <a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your platform to obtain a list of supported operating systems</p>
</li>
<li>
<p>Your operating system-specific documentation for information about how to perform an operating system upgrade</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CACJIFIJ"></a>
<div id="UPGRD12392" class="sect2">
<h3 class="sect2">Migrating Data to a Different Operating System<a id="sthref128"></a><a id="sthref129"></a></h3>
<p>When using DBUA or when performing a manual upgrade, you <span class="italic">cannot</span> migrate data in a database on one operating system to a database on another operating system. For example, you cannot migrate data in an Oracle9<span class="italic">i</span> database on Solaris to an Oracle 11<span class="italic">g</span> database on Windows using DBUA.</p>
<p class="orderedlisttitle">To migrate Oracle Database software to a different operating system&nbsp;</p>
<ol>
<li>
<p>Upgrade to the new Oracle Database 11<span class="italic">g</span> release on your current operating system platform following the instructions in this guide.</p>
</li>
<li>
<p>Test the upgraded database on your current operating system platform.</p>
</li>
<li>
<p>Use Oracle Data Guard and physical standby databases to migrate between operating systems.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Note 413484.1 on <a id="sthref131"></a><a id="sthref132"></a>My Oracle Support (formerly Oracle<span class="italic">MetaLink</span>) at <code><a href="https://support.oracle.com/">https://support.oracle.com/</a></code> for more information on Oracle Data Guard support for heterogeneous primary and standby systems in the same Oracle Data Guard configuration</div>
</li>
<li>
<p>If cross-platform physical standby database is not available for the platform combination to be migrated, then you can use the Oracle Database 11<span class="italic">g</span> cross-platform transportable tablespace feature or the Oracle Data Pump Export and Import utilities to migrate the upgraded database to the different operating system.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Transportable tablespaces do not support migrating <code>SYSTEM</code> or <code>SYSAUX</code> tablespaces. All non-segment user data, such as roles, triggers, views, and procedures, must be moved to the new operating system with scripts or export/import.</div>
</li>
<li>
<p>If the two operating systems are in the same endianness group, then you can use the Oracle Database 11<span class="italic">g</span> cross-platform transportable database feature to migrate the entire database.</p>
</li>
<li>
<p>You can also use Oracle Streams to migrate data between operating systems. Oracle Streams has data type limitations and restrictions, such as for advanced queues and object types, and it requires additional administrative overhead.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information on transportable tablespaces</p>
</li>
<li>
<p><a class="olink HAOVW" href="../e17157/toc.htm"><span class="italic">Oracle Database High Availability Overview</span></a> for more information on migrations using Data Guard or transportable databases</p>
</li>
<li>
<p><a class="olink STRMS" href="../e17069/toc.htm"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information on migrations using Oracle Streams</p>
</li>
<li>
<p><a href="expimp.htm#BABJHBEJ">Chapter 7, "Moving Data Using Oracle Data Pump"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CIAFJJFC"></a>
<div id="UPGRD52623" class="sect2">
<h3 class="sect2">About Upgrading Databases That Use Oracle Streams Downstream Capture</h3>
<p>In an Oracle Streams replication environment, <a id="sthref133"></a><a id="sthref134"></a>downstream captures means that a capture process runs on a database other than the source database. When you upgrade the databases in such an environment, upgrade the database with the downstream capture process before you upgrade the source database. Upgrading the databases in this order ensures that the downstream capture database can continue to function after the source database is upgraded.</p>
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a class="olink STRMS129" href="../../server.112/e17069/strms_capture.htm#STRMS129"><span class="italic">Oracle Streams Concepts and Administration</span></a> for more information about downstream capture</div>
</div>
<!-- class="sect2" -->
<a id="BABDBGBD"></a>
<div id="UPGRD12401" class="sect2">
<h3 class="sect2">About Upgrading Databases That Use Oracle Database Vault</h3>
<p>When upgrading from Oracle Database release 10.2 or 11.1, if you have enabled Oracle Database Vault in your current Oracle home, then you must disable Oracle Database Vault in the target Oracle home where the new release 11.2 software is installed. You must do this before upgrading the database. Enable Oracle Database Vault again once the upgrade is complete.</p>
<p>When running Database Upgrade Assistant (DBUA), if a warning appears like <code>Database Vault option is enabled in Oracle Home:</code> <code>C:\oracle\cdctest\product\11.2.0\dbhome_1. This option needs to be disabled prior to upgrade.</code>, then you must disable Oracle Database Vault in the target Oracle home where the new release 11.2 software is installed too.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DVADM012" href="../../server.112/e23090/dvdisabl.htm#DVADM012"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for instructions about disabling Oracle Database Vault</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1011398"></a>
<div id="UPGRD12393" class="sect1">
<h2 class="sect1">Installing the New Oracle Database Software for the Upgrade<a id="sthref135"></a></h2>
<p>You must install the software for the new Oracle Database release before you can perform the upgrade of Oracle Database. The installation procedure for the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) installs the Oracle software into a new Oracle home. This is referred to as an <span class="italic">out-of-place</span> upgrade and is different from patch set releases for earlier releases of Oracle Database, where the patch set was always installed <span class="italic">in place</span>. Oracle strongly recommends that you follow the steps in this procedure to ensure minimal downtime for the upgrade process and integrity of the new binaries and software libraries.</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
It is not possible to upgrade a database using DBUA when the source and target Oracle homes are owned by different users. Attempting to do so returns error PRKH-1014. Either ensure that the source and target databases have the same owner, or perform the manual steps described in <a href="#i1011600">"Upgrading Oracle Database Manually"</a>.</div>
<p class="orderedlisttitle">To install the new Oracle Database software for this release&nbsp;</p>
<ol>
<li>
<p>If you are upgrading an Oracle RAC database, then you must perform the following steps in the order shown:</p>
<ol>
<li>
<p>Upgrade Oracle Clusterware first as described in <a href="#CACGCGIC">"Considerations for Upgrading Oracle Clusterware and Oracle ASM Instances"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When upgrading a non-Oracle RAC database, you must run Oracle Net Configuration Assistant (NETCA) before running DBUA. See <a href="#CACHCBEJ">"Configuring the Listener When Upgrading from Oracle9<span class="italic">i</span>"</a>. When upgrading an Oracle RAC database, as part of the Oracle Clusterware upgrade, OUI automatically runs NETCA to upgrade the network listener. Therefore, you do not need to manually run NETCA.</div>
</li>
<li>
<p>Mount the Oracle Grid Infrastructure installation media.</p>
</li>
<li>
<p>Perform operating system prerequisite checks on each of the nodes that you intend to upgrade, to ensure that they meet the system prerequisites for Oracle Grid Infrastructure (Oracle Clusterware and Oracle ASM).</p>
</li>
<li>
<p>If necessary, perform patch upgrades of the earlier release of Oracle Clusterware or Oracle Cluster Ready Services software to the most recent patch version.</p>
</li>
<li>
<p>Ensure that you are logged in as the user that you want to own the Oracle Grid Infrastructure installation, and run the Oracle Grid Infrastructure installation. Provide information as prompted by the installer.</p>
</li>
<li>
<p>When prompted, open a separate terminal session, log in as <code>root</code>, and run <code>root.sh</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a></p>
</li>
<li>
<p><a class="olink RIGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=RIGEN"><span class="italic">Oracle Real Application Clusters Installation Guide</span></a></p>
</li>
</ul>
</div>
</li>
</ol>
</li>
<li>
<p>After upgrading Oracle Clusterware, follow the instructions in your Oracle operating system-specific documentation to prepare for installation of Oracle Database software and start the Oracle Universal Installer.</p>
<ul>
<li>
<p>Oracle recommends that you run the Pre-Upgrade Information Tool before you upgrade using DBUA, so that you can preview the types of items DBUA checks. (See <a href="#CACHIDJD">"Using the Pre-Upgrade Information Tool"</a>.) You can then run DBUA independently after the installation is complete.</p>
</li>
<li>
<p>If you use Oracle Label Security, Oracle Database Vault, or both, then select <span class="bold">Enterprise</span> <span class="bold">Edition</span> on the Select Database Edition page, click <span class="bold">Select</span> <span class="bold">Options</span>, and enable one or both components from the components list. See <a class="olink OLSAG" href="../../network.112/e10745/toc.htm"><span class="italic">Oracle Label Security Administrator's Guide</span></a> and <a class="olink DVADM" href="../e23090/toc.htm"><span class="italic">Oracle Database Vault Administrator's Guide</span></a> for more information.</p>
</li>
</ul>
<p>When installation of Oracle Database software has completed successfully, click <span class="bold">Exit</span> to close Oracle Universal Installer.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CACHCBEJ">"Configuring the Listener When Upgrading from Oracle9<span class="italic">i</span>"</a></p>
</li>
<li>
<p><a href="#i1011482">"Upgrading with Database Upgrade Assistant on Linux, UNIX, and Windows"</a></p>
</li>
<li>
<p><a href="#CHDIHBCI">"Performing an In-Place Upgrade for Single-Instance Oracle Database"</a></p>
</li>
<li>
<p><a href="#CHDBJJGJ">"Performing an In-Place Upgrade for an Oracle RAC Database"</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CACDIAEB"></a>
<div id="UPGRD12394" class="sect1">
<h2 class="sect1">About the Latest Patch Set Updates and Any Required Patches</h2>
<p>The software for Oracle Database 11<span class="italic">g</span> Release 2 (11.2) contains a full release that includes all the latest patches and updates for Oracle Database. It is not necessary to check for patch set updates before proceeding with the upgrade process for this release. However, Oracle recommends that you periodically check for patches and patch set updates as a part of database administration.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OUICG" href="../../em.112/e12255/toc.htm"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a></p>
</li>
<li>
<p>"Oracle Database Upgrade Path Reference List" (Note ID 730365.1) on My Oracle Support at <code><a href="https://support.oracle.com">https://support.oracle.com</a></code>, which contains an upgrade reference list for most available Oracle Database releases, including download information, patch numbers, and links to other notes</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CACHIDJD"></a>
<div id="UPGRD12395" class="sect1">
<h2 class="sect1">Using the Pre-Upgrade Information Tool</h2>
<p>After you have installed the software for Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and any required patches, Oracle recommends that you analyze your database before upgrading it to the new release. This is done by running the Pre-Upgrade Information Tool from the environment of the database you are to upgrade. The Pre-Upgrade Information Tool is a SQL script included with Oracle Database 11<span class="italic">g</span> Release 2 (11.2) software. This is a required step if you are upgrading manually; otherwise, the <code>catupgrd.sql</code> script terminates with errors. Running the Pre-Upgrade Information Tool is also recommended if you are upgrading with DBUA, so that you can preview the items that DBUA checks.</p>
<p>These topics contain additional information about the Pre-Upgrade Information Tool:</p>
<ul>
<li>
<p><a href="#CHDJGEDB">About the Output of the Pre-Upgrade Information Tool</a></p>
</li>
<li>
<p><a href="#BABDBDCD">Pre-Upgrade Information Tool Miscellaneous Warnings</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
Note 884522.1 "How to Download and Run Oracle's Database Pre-Upgrade Utility" available from My Oracle Support at <code><a href="https://support.oracle.com">https://support.oracle.com</a></code>, which contains the latest version of the Pre-Upgrade Information Tool. Oracle strongly recommends that you use the latest version of this script available in Note 884522.1.</div>
<p class="orderedlisttitle">To run the Pre-Upgrade Information Tool&nbsp;</p>
<ol>
<li>
<p>Log in to the system as the owner of the environment of the database being upgraded.</p>
<div class="infobox-note">
<p class="notep1">Important:</p>
<span class="bold">The Pre-Upgrade Information Tool must be copied to and must be run from the environment of the database being upgraded.</span></div>
</li>
<li>
<p>Start SQL*Plus.</p>
</li>
<li>
<p>Connect to the database instance as a user with <code>SYSDBA</code> privileges.</p>
</li>
<li id="BABBBFDH">
<p>Set the system to spool results to a log file for later analysis:</p>
<pre>
SQL&gt; SPOOL <span class="italic">upgrade_info</span>.log
</pre></li>
<li>
<p><a id="sthref138"></a><a id="sthref139"></a>Run the Pre-Upgrade Information Tool:</p>
<pre>
SQL&gt; @$11g_ORACLE_HOME/rdbms/admin/utlu112i.sql
</pre></li>
<li>
<p>Turn off the spooling of script results to the log file:</p>
<pre>
SQL&gt; SPOOL OFF
</pre>
<p>Check the output of the Pre-Upgrade Information Tool in <code>upgrade_info.log</code>.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle <span class="italic">inter</span>Media became Oracle Multimedia in Oracle Database 11<span class="italic">g</span> Release 1 (11.1).</div>
<p class="subhead1"><a id="CHDJGEDB"></a><a id="UPGRD52624"></a>About the Output of the Pre-Upgrade Information Tool</p>
<p>The Pre-Upgrade Information Tool displays warnings about possible upgrade issues with the database. The output in <a href="#CHDJEGIF">Example 3-1</a> shows the report that is generated from running the Pre-Upgrade Information Tool after installing the software for Oracle Database 11<span class="italic">g</span> Release 2 (11.2). In addition to the warnings that the tool displays, you must address any errors described in the output of the Pre-Upgrade Information Tool before performing the upgrade.</p>
<p>For invalid objects or invalid components, Oracle recommends running the the <code>utlrp.sql</code> before starting the upgrade as a means to minimize the number of invalid objects and components marked with <code>WARNING</code>.</p>
<p>The following topics contain sample output of the Pre-Upgrade Information Tool and provide descriptions of each section of the output.</p>
<ul>
<li>
<p><a href="#CHDEEJFB">Database Section Contents</a></p>
</li>
<li>
<p><a href="#CHDEEAJJ">Tablespaces Section Contents</a></p>
</li>
<li>
<p><a href="#CHDFGBDA">Rollback Segments Section Contents</a></p>
</li>
<li>
<p><a href="#CHDJHCIG">Flashback Section Contents</a></p>
</li>
<li>
<p><a href="#CHDFBDCE">Update Parameters Section Contents</a></p>
</li>
<li>
<p><a href="#CHDHCGIC">Renamed Parameters Section Contents</a></p>
</li>
<li>
<p><a href="#CHDJJIAC">Obsolete/Deprecated Parameters Section Contents</a></p>
</li>
<li>
<p><a href="#CHDHHHJF">Components Section Contents</a></p>
</li>
<li>
<p><a href="#CHDGFFHG">Miscellaneous Warnings Section Contents</a></p>
</li>
<li>
<p><a href="#CHDCDJIF">Recommendations Section Contents</a></p>
</li>
</ul>
<div class="infoboxnotewarn">
<p class="notep1">Important:</p>
<p class="warnsp">If you see a warning about the presence of the release 10<span class="italic">g</span> <code>DMSYS</code> schema in the database, then you must drop the <code>DMSYS</code> schema before proceeding with the upgrade. See <a class="olink DMADM232" href="../../datamine.112/e16807/upgrade_odm.htm#DMADM232"><span class="italic">Oracle Data Mining Administrator's Guide</span></a> for procedures.</p>
</div>
<div id="UPGRD52715" class="example">
<p class="titleinexample"><a id="CHDJEGIF"></a>Example 3-1 Pre-Upgrade Information Tool Sample Output</p>
<pre>
Oracle Database 11.2 Pre-Upgrade Information Tool 07-12-2011 12:51:34
Script Version: 11.2.0.3.0 Build: 001
.
**********************************************************************
Database:
**********************************************************************
--&gt; name:          O112
--&gt; version:       11.2.0.1.0
--&gt; compatible:    11.2.0.0.0
--&gt; blocksize:     8192
--&gt; platform:      Linux x86 64-bit
--&gt; timezone file: V11
.
**********************************************************************
Tablespaces: [make adjustments in the current environment]
**********************************************************************
--&gt; SYSTEM tablespace is adequate for the upgrade.
.... minimum required size: 701 MB
--&gt; SYSAUX tablespace is adequate for the upgrade.
.... minimum required size: 453 MB
--&gt; UNDOTBS1 tablespace is adequate for the upgrade.
.... minimum required size: 400 MB
--&gt; TEMP tablespace is adequate for the upgrade.
.... minimum required size: 60 MB
--&gt; EXAMPLE tablespace is adequate for the upgrade.
.... minimum required size: 78 MB
.
**********************************************************************
Flashback: OFF
**********************************************************************
**********************************************************************
Update Parameters: [Update Oracle Database 11.2 init.ora or spfile]
Note: Pre-upgrade tool was run on a lower version 64-bit database.
**********************************************************************
--&gt; If Target Oracle is 32-Bit, refer here for Update Parameters:
-- No update parameter changes are required.
.
 
--&gt; If Target Oracle is 64-Bit, refer here for Update Parameters:
-- No update parameter changes are required.
.
**********************************************************************
Renamed Parameters: [Update Oracle Database 11.2 init.ora or spfile]
**********************************************************************
-- No renamed parameters found. No changes are required.
.
**********************************************************************
Obsolete/Deprecated Parameters: [Update Oracle Database 11.2 init.ora or spfile]
**********************************************************************
-- No obsolete parameters found. No changes are required
.
 
**********************************************************************
Components: [The following database components will be upgraded or installed]
**********************************************************************
--&gt; Oracle Catalog Views         [upgrade]  VALID
--&gt; Oracle Packages and Types    [upgrade]  VALID
--&gt; JServer JAVA Virtual Machine [upgrade]  VALID
--&gt; Oracle XDK for Java          [upgrade]  VALID
--&gt; Oracle Workspace Manager     [upgrade]  VALID
--&gt; OLAP Analytic Workspace      [upgrade]  VALID
--&gt; OLAP Catalog                 [upgrade]  VALID
--&gt; Oracle Label Security        [upgrade]  VALID
--&gt; Oracle Database Vault        [upgrade]  VALID
... To successfully upgrade Oracle Database Vault, choose
... 'Select Options' in Oracle installer and then select
... Oracle Label Security.
--&gt; EM Repository                [upgrade]  VALID
--&gt; Oracle Text                  [upgrade]  VALID
--&gt; Oracle XML Database          [upgrade]  VALID
--&gt; Oracle Java Packages         [upgrade]  VALID
--&gt; Oracle interMedia            [upgrade]  VALID
--&gt; Spatial                      [upgrade]  VALID
--&gt; Expression Filter            [upgrade]  VALID
--&gt; Rule Manager                 [upgrade]  VALID
--&gt; Oracle Application Express   [upgrade]  VALID
... APEX will only be upgraded if the version of APEX in
... the target Oracle home is higher than the current one.
--&gt; Oracle OLAP API              [upgrade]  VALID
.
**********************************************************************
Miscellaneous Warnings
**********************************************************************
WARNING: --&gt; Database is using a timezone file older than version 14.
.... After the release migration, it is recommended that DBMS_DST package
.... be used to upgrade the 11.2.0.1.0 database timezone version
.... to the latest version which comes with the new release.
WARNING: --&gt; Database contains schemas with objects dependent on DBMS_LDAP package.
.... Refer to the 11g Upgrade Guide for instructions to configure Network ACLs.
.... USER APEX_030200 has dependent objects.
.
**********************************************************************
Recommendations
**********************************************************************
Oracle recommends gathering dictionary statistics prior to
upgrading the database.
To gather dictionary statistics execute the following command
while connected as SYSDBA:
 
    EXECUTE dbms_stats.gather_dictionary_stats;
 
**********************************************************************
Oracle recommends reviewing any defined events prior to upgrading.
 
To view existing non-default events execute the following commands
while connected AS SYSDBA:
  Events:
    SELECT (translate(value,chr(13)||chr(10),' ')) FROM sys.v$parameter2
      WHERE  UPPER(name) ='EVENT' AND  isdefault='FALSE'
 
  Trace Events:
    SELECT (translate(value,chr(13)||chr(10),' ')) from sys.v$parameter2
      WHERE UPPER(name) = '_TRACE_EVENTS' AND isdefault='FALSE'
 
Changes will need to be made in the init.ora or spfile.
 
**********************************************************************
</pre></div>
<!-- class="example" -->
<p class="subhead2"><a id="CHDEEJFB"></a><a id="UPGRD52625"></a>Database Section Contents</p>
<p>The Database section displays global database information about the current database, such as the database name, release number (version), compatibility level, blocksize, OS platform, and time zone file. A warning is displayed if you must adjust the <code>COMPATIBLE</code> initialization parameter before the database is upgraded.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="afterup.htm#CHDFIFFC">"Setting the COMPATIBLE Initialization Parameter"</a> for information about setting the <code>COMPATIBLE</code> initialization parameter</div>
<p class="subhead2"><a id="CHDEEAJJ"></a><a id="UPGRD52627"></a>Tablespaces Section Contents</p>
<p>The Tablespaces section displays a list of tablespaces in the current database. For each tablespace, the tablespace name and minimum required size is displayed. In addition, a message displays next to each tablespace confirming that the tablespace is adequate for the upgrade. If the minimum required size is not met, then you must make adjustments, which the tool recommends.</p>
<p>In a manual upgrade using SQL scripts and utilities, space must be added to tablespaces that do not have enough free space in the current database. These tablespace adjustments must be made before the database is upgraded. Some of these tasks are performed automatically by DBUA.</p>
<p class="subhead2"><a id="CHDFGBDA"></a><a id="UPGRD52716"></a>Rollback Segments Section Contents</p>
<p>The Rollback Segments section shows the status for rollback segments in the <code>SYSTEM</code> tablespace and displays a warning about any adjustments that need to be made before performing the upgrade. This section only appears if there are rollback segments.</p>
<p class="subhead2"><a id="CHDJHCIG"></a><a id="UPGRD52717"></a>Flashback Section Contents</p>
<p>The Flashback section shows whether flashback is ON or OFF, and displays warnings about pool size and cache size that must be increased. The status of <code>undo_management</code> is also displayed with any adjustment that must be made. You can execute an <code>ALTER</code> <code>SYSTEM</code> <code>SET</code> command to change the pool sizes and database cache size.</p>
<p>For example execute the following command to to set the <code>java_pool_size</code> to the recommended size as follows:</p>
<pre>
SQL&gt; ALTER SYSTEM SET java_pool_size='<span class="italic">nnn</span>M' SCOPE=spfile;
</pre>
<p>The same can be done for changing the other settings.</p>
<p class="subhead2"><a id="CHDFBDCE"></a><a id="UPGRD52628"></a>Update Parameters Section Contents</p>
<p>The Update Parameters section displays a list of initialization parameters in the parameter file (<code>init.ora</code> or <code>spfile</code>) of the current database that must be adjusted before the database is upgraded. The adjustments must be made to the parameter file after it is copied to the new Oracle Database 11<span class="italic">g</span> release.</p>
<p>If you are using Oracle ASM disk groups, then you must ensure that the database compatibility attribute for the disk groups matches the compatibility parameter that is set in <code>init.ora</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="changes.htm#BABHACIE">Appendix A, "Behavior Changes After Upgrading Oracle Database"</a> for more information about changes to initialization parameters in this Oracle Database 11<span class="italic">g</span> release</div>
<p class="subhead2"><a id="CHDHCGIC"></a><a id="UPGRD52629"></a>Renamed Parameters Section Contents</p>
<p>The Renamed Parameters section displays a list of initialization parameters in the parameter file of the current database that are renamed in the new Oracle Database 11<span class="italic">g</span> release. New default values are also given.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="changes.htm#BABHACIE">Appendix A, "Behavior Changes After Upgrading Oracle Database"</a> for initialization parameters that are renamed in the new Oracle Database 11<span class="italic">g</span> release</div>
<p class="subhead2"><a id="CHDJJIAC"></a><a id="UPGRD52630"></a>Obsolete/Deprecated Parameters Section Contents</p>
<p>The Obsolete/Deprecated Parameters section displays a list of initialization parameters in the parameter file of the current database that are obsolete or deprecated in the new Oracle Database 11<span class="italic">g</span> release. Obsolete initialization parameters must be removed from the parameter file before the database is upgraded.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="changes.htm#BABHACIE">Appendix A, "Behavior Changes After Upgrading Oracle Database"</a> for a list of initialization parameters that are obsolete or deprecated in the new Oracle Database 11<span class="italic">g</span> release</div>
<p class="subhead2"><a id="CHDHHHJF"></a><a id="UPGRD52631"></a>Components Section Contents</p>
<p>The Components section displays a list of database components in the database to be upgraded or installed when the current database is upgraded to the new Oracle Database 11<span class="italic">g</span> release. Software components are pre-built code libraries that provide specific database funtionality like Oracle Text, Oracle Java packages, and Oracle RAC.</p>
<p class="subhead2"><a id="CHDGFFHG"></a><a id="UPGRD52632"></a>Miscellaneous Warnings Section Contents</p>
<p>The Miscellaneous Warnings section provides warnings about specific situations that require attention before or after the upgrade. For example, if the database is using a time zone file that is a version older than what is required for the upgrade, then a warning displays with the required action.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABDBDCD">"Pre-Upgrade Information Tool Miscellaneous Warnings"</a></div>
<p class="subhead2"><a id="CHDCDJIF"></a><a id="UPGRD52633"></a>Recommendations Section Contents</p>
<p>The Recommendations section provides Oracle recommendations, including the recommended SQL statements and commands, that should be performed before upgrading to the new Oracle Database 11<span class="italic">g</span> release.</p>
<a id="BABDBDCD"></a>
<div id="UPGRD12396" class="sect2">
<h3 class="sect2">Pre-Upgrade Information Tool Miscellaneous Warnings</h3>
<p>Before upgrading to the new Oracle Database 11<span class="italic">g</span> release, Oracle recommends analysis of the information and warnings displayed by the Pre-Upgrade Information Tool. The following topics describe warnings and the appropriate actions to take.</p>
<ul>
<li>
<p><a href="#BABIHAIA">Updating the CONNECT Role from Earlier Releases</a></p>
</li>
<li>
<p><a href="#BABJHIHH">Managing and Updating Access Control Lists and Network Utility Packages</a></p>
</li>
<li>
<p><a href="#BABCBGFB">About Downgrading and Database Links from Earlier Releases</a></p>
</li>
<li>
<p><a href="#CIAFHIBG">About Warnings for TIMESTAMP WITH TIME ZONE Data Type</a></p>
</li>
<li>
<p><a href="#CHDHAFGC">Decreasing Downtime for Gathering Optimizer Statistics (Optional)</a></p>
</li>
<li>
<p><a href="#BABHIDJD">Identifying Invalid Objects</a></p>
</li>
<li>
<p><a href="#BABFHIBC">Saving Database Control Files and Data with the emdwgrd Utility</a></p>
</li>
<li>
<p><a href="#BABIGEEH">Verifying That Materialized View Refreshes Have Completed</a></p>
</li>
<li>
<p><a href="#BABJCGFB">Ensuring That No Files Need Media Recovery</a></p>
</li>
<li>
<p><a href="#BABCCAEH">Ensuring That No Files Are in Backup Mode</a></p>
</li>
<li>
<p><a href="#BABHICIH">Resolving Outstanding Distributed Transactions</a></p>
</li>
<li>
<p><a href="#BABIHAAF">Synchronizing a Standby Database with the Primary Database</a></p>
</li>
<li>
<p><a href="#BABJIJHH">Purging the Database Recycle Bin</a></p>
</li>
</ul>
<a id="BABIHAIA"></a>
<div id="UPGRD12397" class="sect3">
<h4 class="sect3">Updating the CONNECT Role from Earlier Releases</h4>
<p>After upgrading to the new Oracle Database 11<span class="italic">g</span> release from Oracle9<span class="italic">i</span> Release 2 (9.2) or Oracle Database 10<span class="italic">g</span> Release 1 (10.1), the <code>CONNECT</code> role has only the <code>CREATE SESSION</code> privilege. The other privileges granted to the <code>CONNECT</code> role in earlier releases are revoked during the upgrade.</p>
<p class="orderedlisttitle">To identify which users and roles in your database are granted the CONNECT role&nbsp;</p>
<ol>
<li>
<p>Perform the following query:</p>
<pre>
SELECT grantee FROM dba_role_privs
     WHERE granted_role = 'CONNECT' and
                     grantee NOT IN (
                                'SYS', 'OUTLN', 'SYSTEM', 'CTXSYS', 'DBSNMP', 
                                'LOGSTDBY_ADMINISTRATOR', 'ORDSYS',
                                'ORDPLUGINS',  'OEM_MONITOR', 'WKSYS', 'WKPROXY', 
                                'WK_TEST', 'WKUSER', 'MDSYS', 'LBACSYS', 'DMSYS',
                                'WMSYS', 'EXFSYS', 'SYSMAN', 'MDDATA',
                                 'SI_INFORMTN_SCHEMA', 'XDB', 'ODM');

</pre></li>
<li>
<p>If users or roles require privileges other than <code>CREATE</code> <code>SESSION</code>, then grant the specific required privileges before upgrading.</p>
<p>The upgrade scripts provided by Oracle adjust the privileges for the Oracle-supplied users.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABJHIHH"></a>
<div id="UPGRD52634" class="sect3">
<h4 class="sect3">Managing and Updating Access Control Lists and Network Utility Packages<a id="sthref141"></a><a id="sthref142"></a><a id="sthref143"></a></h4>
<p>The new Oracle Database 11<span class="italic">g</span> release includes fine-grained access control to the <code>UTL_TCP</code>, <code>UTL_SMTP</code>, <code>UTL_MAIL</code>, <code>UTL_HTTP</code>, and <code>UTL_INADDR</code> packages using Oracle XML DB. If you have applications that use one of these packages, then you must install Oracle XML DB if it is not currently installed.</p>
<p class="orderedlisttitle">To update ACLs and Network Utility packages&nbsp;</p>
<ol>
<li>
<p>Install Oracle XML DB if it is not currently installed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADXDB" href="../../appdev.112/e23094/toc.htm"><span class="italic">Oracle XML DB Developer's Guide</span></a></div>
</li>
<li>
<p>New behavior for the <code>DBMS_LDAP</code> PL/SQL package and the <code>HttpUriType</code> type requires the creation or update of access control lists (ACLs) after performing the upgrade to the new Oracle Database release 11.2.</p>
<p>For example, if your application depends on the <code>DBMS_LDAP</code> package, then the error "ORA-24247: network access denied by access control list (ACL)" may occur. The logged-in user must have the <code>connect</code> privilege for the host and port specified by <code>DBMS_LDAP.init</code>.</p>
</li>
<li>
<p>If Oracle XML DB is installed on the database to be upgraded, and therefore one or all of the <code>UTL_TCP</code>, <code>UTL_SMTP</code>, <code>UTL_MAIL</code>, <code>UTL_HTTP</code>, and <code>UTL_INADDR</code> packages are installed, then you may need to re-install these packages after performing the upgrade to ensure that you have the latest version of these packages for the new release.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink DBSEG40012" href="../../network.112/e36292/authorization.htm#DBSEG40012">"Managing Fine-Grained Access in PL/SQL Packages and Types"</a> in <a class="olink DBSEG" href="../../network.112/e36292/toc.htm"><span class="italic">Oracle Database Security Guide</span></a> and <a href="#CHDDBEIE">"Assessing Dependencies and Adding ACLs for Network Utility Packages"</a></div>
</div>
<!-- class="sect3" -->
<a id="CHDDBEIE"></a>
<div id="UPGRD52718" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Assessing Dependencies and Adding ACLs for Network Utility Packages</h4>
<p>After upgrading to the new Oracle Database 11<span class="italic">g</span> release, you may need to assess the dependencies of network utility packages and provide access by adding the appropriate access control lists (ACLs).</p>
<p class="orderedlisttitle">To check the status of access and add ACLs for network utility packages&nbsp;</p>
<ol>
<li>
<p>Run the pre-upgrade information tool as described in <a href="#CACHIDJD">"Using the Pre-Upgrade Information Tool"</a>.</p>
</li>
<li>
<p>Check the output from the pre-upgrade information tool (<code><span class="codeinlineitalic">upgrade_info</span></code><code>.log</code>) for messages such as the following:</p>
<pre>
WARNING: --&gt; Database contains schemas with objects dependent on network packages.
.... Refer to the 11g Upgrade Guide for instructions to configure Network ACLs.
.... USER WKSYS has dependent objects.
.... USER SYSMAN has dependent objects.
.... USER FLOWS_010600 has dependent objects.
.
</pre></li>
<li>
<p>Query the <code>DBA_DEPENDENCIES</code> view to obtain more information about the dependencies. For example:</p>
<pre>
SELECT * FROM DBA_DEPENDENCIES
WHERE referenced_name IN ('UTL_TCP','UTL_SMTP','UTL_MAIL','UTL_HTTP','UTL_INADDR','DBMS_LDAP')
  AND owner NOT IN ('SYS','PUBLIC','ORDPLUGINS');
</pre></li>
<li>
<p>Prepare post-upgrade scripts now to make the scripts available for use in the test environment. This ensures the new access controls are part of your upgrade testing.</p>
<p>To configure network access control lists (ACLs) in the database so that these packages can work as they did in prior releases, see the example script provided in <a href="afterup.htm#CEGDGAHJ">"Configuring Fine-Grained Access to External Network Services After Upgrading Oracle Database"</a>. This script shows how to use the <code>DBMS_NETWORK_ACL_ADMIN</code> package to create, assign, and add privileges to the access control list.</p>
</li>
<li>
<p>After the upgrade, you must grant the specific required privileges. Access is based on the usage in the original database.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABCBGFB"></a>
<div id="UPGRD12398" class="sect3">
<h4 class="sect3">About Downgrading and Database Links from Earlier Releases</h4>
<p>This information is important only if you need to downgrade to your original database release after performing the upgrade. During the upgrade to the new Oracle Database 11<span class="italic">g</span> release from Oracle9<span class="italic">i</span> Release 2 (9.2) or Oracle Database 10<span class="italic">g</span> Release 1 (10.1), any passwords in database links are encrypted.</p>
<ul>
<li>
<p>To downgrade to the original release, all of the database links with encrypted passwords must be dropped before the downgrade. Consequently, the database links are nonexistent in the downgraded database.</p>
</li>
<li>
<p>Use Oracle Data Pump full database export with <code>INCLUDE=DBLINK</code> to export all database links into a dump file suitable for import into the downgraded database. This dump file can then be used to replace the database links after the downgrade.</p>
</li>
<li>
<p>Ensure that you know the password for any newly-created database links (that is, database links that you may have created while running the new release. Knowing the database link password is necessary because you will need to reset the database link password after downgrading to an earlier release.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CIAFHIBG"></a>
<div id="UPGRD12399" class="sect3">
<h4 class="sect3"><a id="sthref146"></a>About Warnings for TIMESTAMP WITH TIME ZONE Data Type</h4>
<p>The time zone files that are supplied with Oracle Database 11<span class="italic">g</span> Release 2 (11.2) have been updated to reflect changes in transition rules for some time-zone regions. The changes might affect existing data of the <code>TIMESTAMP WITH TIME ZONE</code> data type.</p>
<p>The time zone behavior for Oracle Database 11<span class="italic">g</span> Release 2 (11.2) has changed significantly from earlier releases. You must make sure to obtain the latest time zone files before you upgrade the database. If the time zone file version of the database being upgraded is not the most recent version of the time zone file available for the new 11.2 release, then the Pre-Upgrade Information Tool displays a warning and describes how to proceed. <a href="#CIAHIJEG">Table 3-1</a> describes the warnings and summarizes how to resolve a mismatch in time zone file versions.</p>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<p class="warnsp">The <code>TIMESTAMP WITH TIME ZONE</code> data stored in the database can become corrupted during the upgrade if there is a time zone file version mismatch.</p>
</div>
<div id="UPGRD52635" class="tblruleformal">
<p class="titleintable"><a id="sthref147"></a><a id="CIAHIJEG"></a>Table 3-1 Choices for Fixing the Time Zone File Version</p>
<table class="cellalignment1663" title="Choices for Fixing the Time Zone File Version" summary="This table describes how how to handle warnings if the time zone file version on the database being upgraded is older or newer than the the version provided with the Oracle Database release you just installed." dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t37">IF the time zone version on the database being upgraded is...</th>
<th class="cellalignment1664" id="r1c2-t37">THEN fix the time zone files...</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t37" headers="r1c1-t37">
<p>Earlier than the most current version included in the new database release and the Pre-Upgrade Information Tool displays "Database is using a time zone file older than version <span class="italic">n</span>."</p>
</td>
<td class="cellalignment1660" headers="r2c1-t37 r1c2-t37">
<p><span class="italic">After</span> completing the database upgrade.</p>
<p>Use the <code>DBMS_DST</code> PL/SQL package and follow the instructions in "Steps to Upgrade Time Zone File and Timestamp with Time Zone Data" in <a class="olink NLSPG261" href="../../server.112/e10729/ch4datetime.htm#NLSPG261"><span class="italic">Oracle Database Globalization Support Guide</span></a>.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t37" headers="r1c1-t37">
<p>Later than the version included in the new database release and the Pre-Upgrade Information Tool displays "Database is using a time zone file greater than version <span class="italic">n</span>."</p>
</td>
<td class="cellalignment1660" headers="r3c1-t37 r1c2-t37">
<p><span class="italic">Before</span> beginning the database upgrade.</p>
<p>You must patch (<code>RDBMS DST</code> patch) the new Oracle home with the same version of the time zone file as the one currently used in the database being upgraded. Otherwise the upgrade will fail.</p>
<p>You must patch the Oracle home with the appropriate patch for the time zone file version in use. Apply the patch for each database to be upgraded. Otherwise, the upgrade script terminates without upgrading the database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The support note "Updated DST Transitions and New Time Zones in Oracle Time Zone File Patches" (ID 412160.1) from My Oracle Support at <code><a href="https://support.oracle.com">https://support.oracle.com</a></code></p>
</li>
<li>
<p><a class="olink NLSPG" href="../e10729/toc.htm"><span class="italic">Oracle Database Globalization Support Guide</span></a> for detailed descriptions of time zone upgrade</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDHAFGC"></a>
<div id="UPGRD12400" class="sect3">
<h4 class="sect3">Decreasing Downtime for Gathering Optimizer Statistics (Optional)</h4>
<p>When upgrading to the new Oracle Database 11<span class="italic">g</span> release, optimizer statistics are collected for dictionary tables that lack statistics. This statistics collection process can be time consuming for databases with a large number of dictionary tables, but statistics gathering only occurs for those tables that lack statistics or are significantly changed during the upgrade.</p>
<p class="itemizedlisttitle">To decrease the amount of downtime incurred when collecting statistics&nbsp;</p>
<ul>
<li>
<p>Collect statistics before performing the actual database upgrade. Oracle recommends that you use the <code>DBMS_STATS.GATHER_DICTIONARY_STATS</code> procedure to gather these statistics. For example, you can enter the following SQL statement:</p>
<pre>
EXEC DBMS_STATS.GATHER_DICTIONARY_STATS;
</pre></li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are using Oracle9<span class="italic">i</span> Release 2 (9.2), then you should use the <code>DBMS_STATS.GATHER_SCHEMA_STATS</code> procedure to gather statistics. To do this, you can run the scripts provided in <a href="statistics.htm#BEIDEAGD">Appendix B</a> in this guide.</div>
<p class="subhead2"><a id="UPGRD52719"></a>System Components and Schemas Used for Optimizer Statistics</p>
<p><a href="#BABHHHED">Table 3-2</a> lists the system components and schemas that are checked for statistics collection during the upgrade.</p>
<div id="UPGRD52636" class="tblformal">
<p class="titleintable"><a id="sthref149"></a><a id="BABHHHED"></a>Table 3-2 Statistics Collection for System Components and Schemas</p>
<table class="cellalignment1667" title="Statistics Collection for System Components and Schemas " summary="Table of schemas and components that exist in the current database" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t40">Component Name</th>
<th class="cellalignment1664" id="r1c2-t40">Schema</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t40" headers="r1c1-t40">
<p>JServer JAVA Virtual Machine</p>
</td>
<td class="cellalignment1660" headers="r2c1-t40 r1c2-t40">
<p><code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t40" headers="r1c1-t40">
<p>OLAP Analytic Workspace</p>
</td>
<td class="cellalignment1660" headers="r3c1-t40 r1c2-t40">
<p><code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t40" headers="r1c1-t40">
<p>Oracle Database Catalog Views</p>
</td>
<td class="cellalignment1660" headers="r4c1-t40 r1c2-t40">
<p><code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r5c1-t40" headers="r1c1-t40">
<p>Oracle Database JAVA Packages</p>
</td>
<td class="cellalignment1660" headers="r5c1-t40 r1c2-t40">
<p><code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r6c1-t40" headers="r1c1-t40">
<p>Oracle Database Packages and Types</p>
</td>
<td class="cellalignment1660" headers="r6c1-t40 r1c2-t40">
<p><code>SYS</code>, <code>DBSNMP</code>, <code>OUTLN</code>, <code>SYSTEM</code>, <code>DIP</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r7c1-t40" headers="r1c1-t40">
<p>Oracle Database Vault</p>
</td>
<td class="cellalignment1660" headers="r7c1-t40 r1c2-t40">
<p><code>DVSYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r8c1-t40" headers="r1c1-t40">
<p>Oracle Enterprise Manager</p>
</td>
<td class="cellalignment1660" headers="r8c1-t40 r1c2-t40">
<p><code>SYSMAN</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r9c1-t40" headers="r1c1-t40">
<p>Oracle Expression Filter</p>
</td>
<td class="cellalignment1660" headers="r9c1-t40 r1c2-t40">
<p><code>EXFSYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r10c1-t40" headers="r1c1-t40">
<p>Oracle Multimedia</p>
</td>
<td class="cellalignment1660" headers="r10c1-t40 r1c2-t40">
<p><code>ORDSYS, ORDPLUGINS, SI_INFORMTN_SCHEMA</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r11c1-t40" headers="r1c1-t40">
<p>Oracle Label Security</p>
</td>
<td class="cellalignment1660" headers="r11c1-t40 r1c2-t40">
<p><code>LBACSYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r12c1-t40" headers="r1c1-t40">
<p>Oracle OLAP API</p>
</td>
<td class="cellalignment1660" headers="r12c1-t40 r1c2-t40">
<p><code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r13c1-t40" headers="r1c1-t40">
<p>Oracle Spatial</p>
</td>
<td class="cellalignment1660" headers="r13c1-t40 r1c2-t40">
<p><code>MDSYS, MDDATA</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r14c1-t40" headers="r1c1-t40">
<p>Oracle Text</p>
</td>
<td class="cellalignment1660" headers="r14c1-t40 r1c2-t40">
<p><code>CTXSYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r15c1-t40" headers="r1c1-t40">
<p>Oracle Workspace Manager</p>
</td>
<td class="cellalignment1660" headers="r15c1-t40 r1c2-t40">
<p><code>WMSYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r16c1-t40" headers="r1c1-t40">
<p>Oracle XDK</p>
</td>
<td class="cellalignment1660" headers="r16c1-t40 r1c2-t40">
<p><code>SYS</code></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r17c1-t40" headers="r1c1-t40">
<p>Oracle XML Database</p>
</td>
<td class="cellalignment1660" headers="r17c1-t40 r1c2-t40">
<p><code>XDB</code></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect3" -->
<a id="BABHIDJD"></a>
<div id="UPGRD52637" class="sect3">
<h4 class="sect3">Identifying Invalid Objects</h4>
<p>Any invalid <code>SYS</code>/<code>SYSTEM</code> objects found before upgrading the database are stored in the table named <code>registry$sys_inv_objs</code>. Any invalid non-<code>SYS</code>/<code>SYSTEM</code> objects found before upgrading the database are stored in <code>registry$nonsys_inv_objs</code>.</p>
<p class="itemizedlisttitle">To identify any new invalid objects due to the upgrade&nbsp;</p>
<ul>
<li>
<p>After the upgrade, run <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/rdbms/admin/utluiobj.sql</code></p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABFHIBC"></a>
<div id="UPGRD12402" class="sect3">
<h4 class="sect3">Saving Database Control Files and Data with the emdwgrd Utility</h4>
<p>If you plan to downgrade Oracle Enterprise Manager Database Control after upgrading to the new Oracle Database 11<span class="italic">g</span> release, then you must save your database control files and data <span class="italic">before</span> upgrading your database. Oracle provides the <code>emdwgrd</code> utility to use before upgrading your database to keep a copy of your database control files and data.</p>
<p>The <code>emdwgrd</code> utility resides in the <code>ORACLE_HOME/bin</code> directory in the new Oracle Database 11<span class="italic">g</span> release. The <code>emdwgrd</code> utility consists of <code>emdwgrd</code> and <code>emdwgrd.pl</code> for Linux and UNIX, and <code>emdwgrd.bat</code> and <code>emdwgrd.pl</code> for Windows. Before running the utility, you must install the software for the new Oracle Database 11<span class="italic">g</span> release, and then invoke the script from the new Oracle home. The <code>emdwgrd</code> utility, however, requires that you set <code>ORACLE_HOME</code> to the old Oracle home.</p>
<p class="orderedlisttitle">To save your database control files and data using emdwgrd&nbsp;</p>
<ol>
<li>
<p>Install the software for the new Oracle Database 11<span class="italic">g</span> release. (This step is not required for an in-place patch set upgrade.)</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1011398">"Installing the New Oracle Database Software for the Upgrade"</a></div>
</li>
<li>
<p>Set <code>ORACLE_HOME</code> to your old Oracle home. (This step is not required for an in-place patch set upgrade.)</p>
</li>
<li>
<p>Set <code>ORACLE_SID</code> to the SID of the database being upgraded.</p>
</li>
<li>
<p>Set <code>PATH</code>, <code>LD_LIBRARY_PATH</code>, and <code>SHLIB_PATH</code> to point to the Oracle home from which the database is being upgraded.</p>
</li>
<li>
<p>Go to the Oracle home of the new Oracle Database 11<span class="italic">g</span> release.</p>
</li>
<li>
<p>Execute one of the following commands:</p>
<ul>
<li>
<p>For a single-instance database, run the following command, where <code><span class="codeinlineitalic">old_SID</span></code> is the SID of the database being upgraded and <code><span class="codeinlineitalic">save_directory</span></code> is the path to the storage place you have chosen for your database control files and data:</p>
<pre>
emdwgrd -save -sid <span class="italic">old_SID</span> -path <span class="italic">save_directory</span>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The script is in <code>emdwgrd.sh</code> on Linux and UNIX platforms. On Windows, the script is in <code>emdwgrd.bat</code>.</div>
</li>
<li>
<p>If the database is an Oracle RAC database, remote copy is required across the cluster nodes. Define an environment variable to indicate which remote copy is configured. For example:</p>
<pre>
setenv EM_REMCP /usr/bin/scp
</pre>
<p>Then, execute the following <code>save</code> command:</p>
<pre>
emdwgrd -save -cluster -sid <span class="italic">old_SID</span> -path <span class="italic">save_directory</span>
</pre>
<p>If the release 10<span class="italic">g</span> Oracle home is on a shared device, add <code>-shared</code> to the previous command line.</p>
</li>
</ul>
</li>
<li>
<p>Enter the <code>SYS</code> password for the database to be upgraded.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
The DBUA backup and restore process also allows you to revert to your previous Oracle Enterprise Manager Database Control environment after upgrading your database. However, all user data that is accumulated between the time of upgrade and restore operations is lost. Saving your database control files and data enables you to downgrade both your database and database control. All user data is retained even though all database control data that is accumulated between the time of upgrade and downgrade is lost.</div>
</div>
<!-- class="sect3" -->
<a id="BABIGEEH"></a>
<div id="UPGRD52638" class="sect3">
<h4 class="sect3">Verifying That Materialized View Refreshes Have Completed</h4>
<p>You must wait until all materialized views have completed refreshing before upgrading. You can query the system to determine if there are any materialized view refreshes still in progress.</p>
<p class="subhead2"><a id="UPGRD52721"></a>To determine if there are any materialized view refreshes still in progress</p>
<ul>
<li>
<p>Run the following query</p>
<pre>
SQL&gt; SELECT * FROM sys.obj$ o, sys.user$ u, sys.sum$ s
WHERE o.type# = 42 AND bitand(s.mflags, 8) = 8;
</pre></li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABJCGFB"></a>
<div id="UPGRD52639" class="sect3">
<h4 class="sect3">Ensuring That No Files Need Media Recovery</h4>
<p>Before upgrading the database, you must ensure that there are no files requiring media recovery. You can query the system to get a list of files and then recover them as appropriate.</p>
<p class="subhead2"><a id="UPGRD52722"></a>To get a list of files that require media recovery</p>
<ul>
<li>
<p>Issue the following statement:</p>
<pre>
SQL&gt; SELECT * FROM v$recover_file;
</pre></li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a></p>
</li>
<li>
<p><a class="olink RCMRF140" href="../../backup.112/e10643/rcmsynta2001.htm#RCMRF140">"Performing Block Media Recovery"</a> in <a class="olink RCMRF" href="../../backup.112/e10643/toc.htm"><span class="italic">Oracle Database Backup and Recovery Reference</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="BABCCAEH"></a>
<div id="UPGRD52640" class="sect3">
<h4 class="sect3">Ensuring That No Files Are in Backup Mode</h4>
<p>Files must not be in backup mode when performing the upgrade; therefore, you must wait until backups are completed. You can query the system to see a list of any files in backup mode and then take appropriate action by either waiting for the backup to complete, or by aborting any backups that are not needed.</p>
<p class="subhead2"><a id="UPGRD52723"></a>To get a list of files in backup mode</p>
<ul>
<li>
<p>Issue the following statement:</p>
<pre>
SQL&gt; SELECT * FROM v$backup WHERE status != 'NOT ACTIVE';
</pre></li>
</ul>
</div>
<!-- class="sect3" -->
<a id="BABHICIH"></a>
<div id="UPGRD52641" class="sect3">
<h4 class="sect3">Resolving Outstanding Distributed Transactions</h4>
<p>You must resolve outstanding distributed transactions before performing the upgrade. You can do this by first querying to see any pending transactions, and then committing the transactions. You must wait until all pending distributed transactions have been committed.</p>
<p><span class="bold">To resolve outstanding distributed transactions</span></p>
<ol>
<li>
<p>Issue the following statement:</p>
<pre>
SQL&gt; SELECT * FROM dba_2pc_pending;
</pre></li>
<li>
<p>If the query in the previous step returns any rows, then issue the following statements:</p>
<pre>
SQL&gt; SELECT local_tran_id FROM dba_2pc_pending;
SQL&gt; EXECUTE dbms_transaction.purge_lost_db_entry('');
SQL&gt; COMMIT;
</pre></li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABIHAAF"></a>
<div id="UPGRD52642" class="sect3">
<h4 class="sect3">Synchronizing a Standby Database with the Primary Database</h4>
<p>If a standby database exists, then you must synchronize it with the primary database.</p>
<p class="orderedlisttitle">To check if a standby database exists and to synchronize it&nbsp;</p>
<ol>
<li>
<p>Issue the following query:</p>
<pre>
SQL&gt; SELECT SUBSTR(value,INSTR(value,'=',INSTR(UPPER(value),'SERVICE'))+1)
FROM v$parameter
WHERE name LIKE 'log_archive_dest%' AND UPPER(value) LIKE 'SERVICE%';
</pre></li>
<li>
<p>If the query in the previous step returns a row, then synchronize the standby database with the primary database.</p>
<ul>
<li>
<p>Make sure all the logs are transported to the standby server after a final log switch in the primary.</p>
</li>
<li>
<p>Start the recovery of the standby database with the <code>NODELAY</code> option.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BABJIJHH"></a>
<div id="UPGRD52643" class="sect3">
<h4 class="sect3">Purging the Database Recycle Bin</h4>
<p>The database recycle bin must be empty before you begin the upgrade process. You use the <code>PURGE</code> statement to remove items and their associated objects from the recycle bin and release their storage space.</p>
<p class="subhead2"><a id="UPGRD52726"></a>To empty the database recycle bin</p>
<ul>
<li>
<p>Issue the following command:</p>
<pre>
SQL&gt; PURGE dba_recyclebin
</pre></li>
</ul>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<p class="warnsp">The database recycle bin must be empty during the upgrade process to avoid possible <code>ORA-00600</code> errors and to minimize the upgrade time.</p>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CACHCBEJ"></a>
<div id="UPGRD12403" class="sect1">
<h2 class="sect1"><a id="sthref153"></a><a id="sthref154"></a><a id="sthref155"></a><a id="sthref156"></a>Configuring the Listener When Upgrading from Oracle9<span class="italic">i</span></h2>
<p>If you are upgrading from Oracle9<span class="italic">i</span> and a listener was not configured in the Oracle9<span class="italic">i</span> repository, then you must run Oracle Net Configuration Assistant to configure the listening protocol address and service information for the new Oracle Database 11<span class="italic">g</span> database, including a <code>listener.ora</code> file, <span class="italic">before</span> running DBUA. A new version of the listener is required for an Oracle Database 11<span class="italic">g</span> database. Previous versions of the listener are not supported for use with an Oracle Database 11<span class="italic">g</span> database. However, it is possible to use the new version of the listener with previous versions of Oracle Database.</p>
<p>If you are upgrading an Oracle RAC database, then you have the following options:</p>
<ul>
<li>
<p>Upgrade the Oracle RAC database with DBUA, which automatically migrates the listener from your old Oracle home to the new Oracle Grid Infrastructure 11<span class="italic">g</span> Release 2 home.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Beginning with Oracle Database 11<span class="italic">g</span> Release 2, you must administer the listener by using the <code>lsnrctl</code> command in the Oracle Grid infrastructure home. Do not attempt to use the <code>lsnrctl</code> commands from Oracle home locations for previous releases.</div>
</li>
<li>
<p>If you are upgrading from Oracle9<span class="italic">i</span> or upgrading manually without using DBUA, then run Oracle Net Configuration Assistant before upgrading the Oracle RAC database.</p>
<p>This is a two-step option. You must first run Oracle Net Configuration Assistant from the old Oracle home to remove the old listener. Then you must run Oracle Net Configuration Assistant again from the Oracle home of the new Oracle Database 11<span class="italic">g</span> release to create a new listener.</p>
<p>You must remove the old listener before creating a new one. If you attempt to create a new listener from the new Oracle home first, and use the same name and port as the old listener, then Oracle Net Configuration Assistant returns an error.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG218" href="../../network.112/e41945/admintools.htm#NETAG218"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for complete information about using Oracle Net Configuration Assistant</div>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="i1011482"></a>
<div id="UPGRD105" class="sect1">
<h2 class="sect1">Upgrading with Database Upgrade Assistant on Linux, UNIX, and Windows<a id="sthref157"></a><a id="sthref158"></a></h2>
<p>DBUA provides a graphical user interface (GUI) to guide you through the upgrade of a database, or you can invoke it in silent mode, which does not present a user interface. The following topics guide you through the process of upgrading a database using Database Upgrade Assistant (DBUA).</p>
<ul>
<li>
<p><a href="#CHDDCBHG">Considerations for Using DBUA</a></p>
</li>
<li>
<p><a href="#CHDDFBBD">About the DBUA Graphical User Interface</a></p>
</li>
<li>
<p><a href="#i1011982">Using DBUA to Upgrade the Database on Linux, UNIX, and Windows Systems</a></p>
</li>
<li>
<p><a href="#i1011981">Using DBUA in Silent Mode to Upgrade Oracle Database</a></p>
</li>
</ul>
<a id="CHDDCBHG"></a>
<div id="UPGRD52727" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Considerations for Using DBUA</h3>
<ul>
<li>
<p><span class="bold">Important:</span> If you terminate the upgrade, but do not restore the database, then you cannot restart DBUA. Instead, you must continue with a manual (command line) upgrade as described in <a href="#CACGGHJC">"Manually Upgrading Oracle Database"</a>.</p>
</li>
<li>
<p>DBUA can be used to upgrade from earlier Oracle Database 11<span class="italic">g</span> patch releases as well as from earlier major Oracle Database releases on both Oracle RAC databases and Oracle Database single-instance databases. The procedure to upgrade patch releases is no different from the normal upgrade procedure.</p>
</li>
<li>
<p>You must run the Oracle Net Configuration Assistant before running DBUA. See <a href="#CACHCBEJ">"Configuring the Listener When Upgrading from Oracle9<span class="italic">i</span>"</a>.</p>
<p>If you are upgrading an existing Oracle Enterprise Manager Database Control or if you are configuring a new Oracle Enterprise Manager Database Control for the new Oracle Database 11<span class="italic">g</span> release, then the listener must be running before upgrading Oracle Enterprise Manager. If DBUA detects that an Oracle Enterprise Manager upgrade or configuration is requested, and DBUA does not see a listener running, then it prompts you and starts the default listener in either of these cases.</p>
</li>
<li>
<p>If you upgrade a cluster database using DBUA, then you must make sure the <code>CLUSTER_DATABASE</code> initialization parameter is set to <code>TRUE</code>.</p>
</li>
<li>
<p>If the database instance is not running, then DBUA tries to start the instance with the default initialization parameter file. If that fails, then DBUA prompts you to provide the name of the correct initialization parameter file or to start the instance. If the instance is up and running, then DBUA connects to it.</p>
</li>
<li>
<p>If you terminate the upgrade, but do not restore the database, then you cannot restart DBUA until you start up the existing database in <code>UPGRADE</code> mode using the new Oracle Database 11<span class="italic">g</span> server. You cannot go back to the original server unless you restore your database.</p>
<p>For Oracle RAC, you cannot re-run DBUA once you terminate the upgrade. If you need to re-run the upgrade, then you must run DBUA from the restored backup of the database you are upgrading.</p>
</li>
<li>
<p>If you restore your database manually (not using DBUA), then remove the <code>Welcome_</code><code><span class="codeinlineitalic">SID</span></code><code>.txt</code> file, which is located in the <span class="italic">ORACLE_HOME</span>/cfgtoollogs/dbua/logs/ directory, before starting DBUA. The presence of this file indicates to DBUA that this is a re-run operation.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDDFBBD"></a>
<div id="UPGRD52728" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About the DBUA<a id="sthref159"></a> Graphical User Interface</h3>
<p>If you installed Oracle Database 11<span class="italic">g</span> Release 2 (11.2) and specified that you are upgrading an existing database, then DBUA starts automatically. However, if you did not specify that you are upgrading an existing database, then you can start DBUA independently after installation is complete.</p>
<p>While the upgrade is in process, DBUA shows the upgrade progress for each component. DBUA writes detailed trace and log files and produces a complete HTML report for later reference. To enhance security, DBUA automatically locks new user accounts in the upgraded database. DBUA then proceeds to create new configuration files (parameter and listener files) in the new Oracle home.</p>
<p>DBUA does not begin the upgrade until all of the pre-upgrade steps are completed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CACHIDJD">"Using the Pre-Upgrade Information Tool"</a></div>
<p>These topics provide additional information about DBUA:</p>
<ul>
<li>
<p><a href="#CHDDCGHA">Checks Performed by Oracle DBUA</a></p>
</li>
<li>
<p><a href="#CHDHIJFG">Upgrade Scripts Invoked by Oracle DBUA</a></p>
</li>
</ul>
<a id="CHDDCGHA"></a>
<div id="UPGRD52729" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Checks Performed by Oracle DBUA</h4>
<p>DBUA performs the following checks before the upgrade:</p>
<ul>
<li>
<p>Invalid user accounts or roles</p>
</li>
<li>
<p>Invalid data types or invalid objects</p>
</li>
<li>
<p>Desupported character sets</p>
</li>
<li>
<p>Adequate resources, including rollback segments, tablespaces, and free disk space</p>
</li>
<li>
<p>Missing SQL scripts needed for the upgrade</p>
</li>
<li>
<p>Listener running (if Oracle Enterprise Manager Database Control upgrade or configuration is requested)</p>
</li>
<li>
<p>Oracle Database software linked with Database Vault option</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If Database Vault is enabled, then DBUA returns an error asking you to disable Database Vault before upgrading. See <a href="#BABDBGBD">"About Upgrading Databases That Use Oracle Database Vault"</a>.</div>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDHIJFG"></a>
<div id="UPGRD52730" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Upgrade Scripts Invoked by Oracle DBUA</h4>
<p>During the upgrade, DBUA automatically modifies or creates new required tablespaces and invokes the appropriate upgrade scripts, as follows:</p>
<ul>
<li>
<p>If the datafiles are auto extensible and have enough disk space to grow, then DBUA continues with the upgrade.</p>
</li>
<li>
<p>If the datafiles are not autoextensible, then DBUA prompts you and makes the files auto extensible.</p>
</li>
<li>
<p>If the tablespaces are auto extensible and the MAXSIZE initialization parameter needs adjustment, then DBUA prompts for the same and adjusts the MAXSIZE parameter.</p>
</li>
<li>
<p>If there is not enough disk space to grow, then DBUA prompts you to create space (by adding more datafiles). DBUA does not add new datafiles because DBUA cannot determine where to create the files.</p>
</li>
</ul>
<p>Optionally, DBUA backs up all necessary files.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011982"></a>
<div id="UPGRD12404" class="sect2">
<h3 class="sect2">Using DBUA<a id="sthref160"></a> to Upgrade the Database on Linux, UNIX, and Windows Systems</h3>
<p>Complete the following steps to upgrade a database using the DBUA graphical user interface. These steps are performed from within the new Oracle home where the latest database software has been installed as described in <a href="#i1011398">"Installing the New Oracle Database Software for the Upgrade"</a> .</p>
<div class="infoboxnotewarn">
<p class="notep1">Important:</p>
<p class="warnsp">If you terminate the upgrade, but do not restore the database, then you cannot restart DBUA. Instead, you must continue with a manual (command line) upgrade as described in <a href="#CACGGHJC">"Manually Upgrading Oracle Database"</a>.</p>
</div>
<p class="subhead2"><a id="UPGRD52731"></a>To upgrade a database using DBUA on Linux, UNIX, and Windows</p>
<ol>
<li>
<p>Start DBUA from the Oracle home where the new database software has been installed:</p>
<ul>
<li>
<p>On Linux or UNIX platforms, enter the following command at a system prompt in the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) home:</p>
<pre>
dbua
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>dbua</code> executable is usually located in the <span class="italic">ORACLE_HOME</span>/bin directory.</div>
</li>
<li>
<p>On Windows operating systems, select <span class="bold">Start</span> &gt; <span class="bold">Programs</span> &gt; <span class="bold">Oracle -</span> <span class="bolditalic">HOME_NAME</span> &gt; <span class="bold">Configuration and Migration Tools</span> &gt; <span class="bold">Database Upgrade Assistant</span>.</p>
</li>
</ul>
<p>The DBUA Welcome screen displays.</p>
<img width="568" height="403" src="img/dbua01.jpg" alt="Description of dbua01.jpg follows" /><br />
<a id="sthref161" href="img_text/dbua01.htm">Description of the illustration dbua01.jpg</a><br />
<br /></li>
<li>
<p>If you need help at any screen or want to consult more documentation about DBUA, then click <span class="bold">Help</span> to open the online help.</p>
<p>Click <span class="bold">Next</span>.</p>
<p>The Select Database page appears, listing the databases available for upgrade.</p>
<img width="574" height="401" src="img/dbua02.jpg" alt="Description of dbua02.jpg follows" /><br />
<a id="sthref162" href="img_text/dbua02.htm">Description of the illustration dbua02.jpg</a><br />
<br /></li>
<li>
<p>Select the database you want to upgrade to Oracle Database 11<span class="italic">g</span> Release 2 (11.2).</p>
<p>You can select only one database at a time. If you do not see the database that you want, then make sure an entry with the database name exists in the <code>oratab</code> file in the etc directory.</p>
<p>If you are running DBUA from a user account that does not have <code>SYSDBA</code> privileges, then you must enter the user name and password credentials to enable <code>SYSDBA</code> privileges for the selected database.</p>
<p>Click <span class="bold">Next</span>.</p>
<p>DBUA analyzes the database, performing pre-upgrade checks and displaying warnings as necessary. Examples of DBUA database checks include:</p>
<ul>
<li>
<p>Redo log files whose size is less than 4 MB. If such files are found, then DBUA gives the option to drop/create new redo log files.</p>
</li>
<li>
<p>Obsolete or deprecated initialization parameters.</p>
</li>
</ul>
<p>When DBUA finishes its checks, the Upgrade Options screen displays.</p>
<img width="573" height="405" src="img/dbua03.jpg" alt="Description of dbua03.jpg follows" /><br />
<a id="sthref163" href="img_text/dbua03.htm">Description of the illustration dbua03.jpg</a><br />
<br /></li>
<li>
<p>The Upgrade Options screens enables you to set the following options:</p>
<p><span class="bold">Recompile invalid objects at the end of upgrade</span></p>
<p>Select <span class="bold">Recompile invalid objects at the end of upgrade</span> if you want DBUA to recompile all invalid PL/SQL modules after the upgrade is complete.</p>
<p>When you upgrade a database to Oracle Database 11<span class="italic">g</span> Release 2 (11.2), many of the PL/SQL modules in your database become invalid. As a result, all existing PL/SQL modules in an <code>INVALID</code> state must be recompiled, such as packages, procedures, types, and so on.</p>
<p>By default, Oracle Database recompiles invalid PL/SQL modules as they are used. The time it takes to recompile the module can result in poor performance when you begin to use your newly upgraded database.</p>
<p>To eliminate these performance issues, select <span class="bold">Recompile invalid objects at the end of upgrade</span>. When you select this option, DBUA recompiles all the invalid PL/SQL modules immediately after the upgrade is performed. This ensures that you do not experience any performance issues later, as you begin using your newly upgraded database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Selecting <span class="bold">Recompile invalid objects at the end of upgrade</span> is equivalent to running the <code>utlrp.sql</code> script, located in the <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/rdbms/admin</code> directory, which is used to recompile stored PL/SQL and Java code.</div>
<p>The task of recompiling all the invalid PL/SQL modules in your database can take a significant amount of time and increase the time it takes to complete your database upgrade. If you have multiple CPUs, then you can reduce the time it takes to perform this task by taking advantage of parallel processing on your available CPUs. If you have multiple CPUs available, then DBUA automatically adds an additional section to the Recompile Invalid Objects screen and automatically determines the number of CPUs you have available.</p>
<p><span class="bold">Degree of Parallelism</span></p>
<p>DBUA also provides a recommended degree of parallelism, which determines how many parallel processes are used to recompile your invalid PL/SQL modules. Specifically, DBUA sets the degree of parallelism to one less than the number of CPUs you have available. For example, if you have three CPUs available for processing, then DBUA selects 2 from the Degree of Parallelism menu. You can adjust this default value by selecting a new value from the Degree of Parallelism menu.</p>
<p><span class="bold">Backup Database</span></p>
<p>Select <span class="bold">Backup database</span> if you want DBUA to back up your database for you.</p>
<div class="infoboxnotewarn">
<p class="notep1">Important:</p>
<p class="warnsp">Oracle strongly recommends that you back up your database before starting the upgrade. If errors occur during the upgrade, then you might be required to restore the database from the backup.</p>
</div>
<p>If you use DBUA to back up your database, then it makes a copy of all your database files in the directory you specify in the Backup Directory field. DBUA performs this cold backup automatically after it shuts down the database and before it begins performing the upgrade procedure. The cold backup does not compress your database files, and the backup directory must be a valid file system path. You cannot specify a raw device for the cold backup files.</p>
<p>In addition, DBUA creates a batch file in the specified directory. You can use this batch file to restore the database files:</p>
<ul>
<li>
<p>On Windows operating systems, the file is called <code>db_name_restore.bat</code>.</p>
</li>
<li>
<p>On Linux or UNIX platforms, the file is called <code>db_name_restore.sh</code>.</p>
</li>
</ul>
<p>If you choose not to use DBUA for your backup, then Oracle assumes you have backed up your database using your own backup procedures.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
DBUA does not back up Oracle ASM databases. You must manually back them up on your own.</div>
<p>Click <span class="bold">Next</span>.</p>
<p>If you are upgrading a single-instance database or Oracle Express Edition (XE), then the Move Database Files screen appears. If you are upgrading an Oracle Real Application Clusters database, then the Move Database Files screen does not display.</p>
<img width="569" height="403" src="img/dbua04.jpg" alt="Description of dbua04.jpg follows" /><br />
<a id="sthref164" href="img_text/dbua04.htm">Description of the illustration dbua04.jpg</a><br />
<br /></li>
<li id="BABFFFJJ">
<p>Select one of the following options:</p>
<ul>
<li>
<p><span class="bold">Do Not Move Database Files as Part of Upgrade</span></p>
</li>
<li>
<p><span class="bold">Move Database Files during Upgrade</span></p>
</li>
</ul>
<p>If you choose to move database files, then you must also make one of the following selections:</p>
<ul>
<li>
<p><span class="bold">File System</span></p>
<p>Your database files are moved to the host file system.</p>
</li>
<li>
<p><span class="bold">Oracle Automatic Storage Management (Oracle ASM)</span></p>
<p>Your database files are moved to Oracle ASM storage, which must currently exist on your system. If you do not have an Oracle ASM instance, then you can create one using Automatic Storage Management Configuration Assistant (ASMCA) from the Oracle Grid Infrastructure home and then restart DBUA.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for information about installing and configuring Oracle ASM</p>
</li>
<li>
<p>"Managing Oracle ASM Instances With ASM Configuration Assistant" in <a class="olink OSTMG51000" href="../../server.112/e18951/asmca.htm#OSTMG51000"><span class="italic">Oracle Database Storage Administrator's Guide</span></a></p>
</li>
</ul>
</div>
<p>Click <span class="bold">Next</span>.</p>
<p>The Recovery and Diagnostic Locations screen displays, where you can designate a flash recovery area for your database.</p>
<img width="570" height="407" src="img/dbua05.jpg" alt="Description of dbua05.jpg follows" /><br />
<a id="sthref165" href="img_text/dbua05.htm">Description of the illustration dbua05.jpg</a><br />
<br /></li>
</ul>
<p>Flash recovery area is an Oracle managed disk location used for storing backup and recovery related files. Oracle strongly recommends configuring a flash recovery area, because it significantly enhances speed, reliability, and manageability of the database recovery process. The location of the flash recovery area is also used by Enterprise Manager if you enable local management and daily backups on the Management Options screen.</p>
<p>If you selected the <span class="bold">Move Database Files during Upgrade</span> option in step <a href="#BABFFFJJ">5</a>, or if an Oracle Express Edition database is being upgraded to Oracle Enterprise Edition, then you must configure a flash recovery area. If a flash recovery area is currently configured, then the current settings are retained but the screen displays to allow you to override these values.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>Accept the default flash recovery area location</p>
</li>
<li>
<p>Enter the full path to a different location in the <span class="bold">Flash Recovery Area</span> field</p>
</li>
<li>
<p>Click <span class="bold">Browse</span> and select a different flash recovery area location</p>
</li>
</ul>
<p>Do one of the following:</p>
<ul>
<li>
<p>Accept the default size for the flash recovery area</p>
</li>
<li>
<p>Enter a different value in the <span class="bold">Flash Recovery Area Size</span> field</p>
</li>
<li>
<p>Click the up or down arrows to adjust the flash recovery area size</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMQS" href="../e10897/toc.htm"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about configuring the flash recovery area</div>
<p>Click <span class="bold">Next</span>.</p>
<p>If no other database is currently being monitored with Enterprise Manager, then the Management Options screen displays.</p>
<img width="571" height="409" src="img/dbua06.jpg" alt="Description of dbua06.jpg follows" /><br />
<a id="sthref166" href="img_text/dbua06.htm">Description of the illustration dbua06.jpg</a><br />
<br />
<p>At the Management Options screen, you have the option of setting up your database so it can be managed with Enterprise Manager. Enterprise Manager provides Web-based management tools for managing individual database instances, as well as central management tools for managing your entire Oracle environment, including multiple databases, hosts, application servers, and other components of your network.</p>
<p>Before you can register the database with Oracle Enterprise Manager Grid Control, an Oracle Enterprise Manager Agent must be configured on the host computer.</p>
</li>
<li>
<p>To set up your database to be managed with Enterprise Manager, select <span class="bold">Configure the Database with Enterprise Manager</span> and then select one of the following options:</p>
<ul>
<li>
<p><span class="bold">Register with Grid Control for centralized management</span></p>
<p>If you select this option, then you must also select an Oracle Management Service from the <span class="bold">Management Service</span> drop-down list. When you run DBUA, it checks to see if the Oracle Management Agent has been installed on the host computer. If no Oracle Management Agent is found, then the Grid Control option is not available.</p>
<p>When you finish installing the Oracle Database software, the database is automatically available as a managed target within Oracle Enterprise Manager Grid Control.</p>
</li>
<li>
<p><span class="bold">Configure Oracle Enterprise Manager Database Control for local management</span></p>
<p>If you are not centrally managing your Oracle environment, then you can still use Enterprise Manager to manage your database. When you install Oracle Database, you automatically install Oracle Enterprise Manager Database Control, which provides Web-based features for monitoring and administering the single-instance or cluster database you are installing.</p>
<p>Do the following steps if you want the <code>SYSMAN</code> user (the default Super Administrator and owner of the Management Repository schema) to receive E-mail notification when a metric for a specified condition reaches a critical or warning threshold:</p>
<ul>
<li>
<p>Select <span class="bold">Enable Alert Notifications</span></p>
</li>
<li>
<p>Enter the name of the e-mail server you want to use for notifications in the <span class="bold">Outgoing Mail (SMTP) Server</span> field</p>
</li>
<li>
<p>Enter the e-mail address of the <code>SYSMAN</code> user in the <span class="bold">Recipient Email Address</span> field</p>
</li>
</ul>
<p>For example, Enterprise Manager can send an e-mail when a target goes down or when there are database space usage problems. E-mail notifications are enabled immediately upon installation.</p>
<p>Do the following steps to use the Oracle suggested backup strategy to back up your entire database with a minimum amount of configuration:</p>
<ul>
<li>
<p>Select <span class="bold">Enable Daily Disk Backup to Recovery Area</span></p>
</li>
<li>
<p>Enter a start time in the <span class="bold">Backup Start Time</span> field</p>
</li>
<li>
<p>Enter host credentials in the <span class="bold">OS Username</span> and <span class="bold">Password</span> fields</p>
</li>
</ul>
<p>If you select the Enable Daily Disk Backup to Recovery Area option, then Enterprise Manager is configured to back up your database immediately after you finish upgrading Oracle Database. Enterprise Manager backs up the database to the flash recovery area. Later, you can use Enterprise Manager to customize your backup strategy further.</p>
<p>On Windows the user whose credentials you enter for the backup must be granted the <code>Logon</code> <code>as</code> <code>a</code> <code>batch</code> <code>job</code> privilege in the Local Security Policies of Windows. If the chosen user does not have this privilege, then the backup job fails.</p>
</li>
</ul>
<p>Click <span class="bold">Next</span>.</p>
<p>The Database Credentials screen displays.</p>
<img width="567" height="401" src="img/dbua07.jpg" alt="Description of dbua07.jpg follows" /><br />
<a id="sthref167" href="img_text/dbua07.htm">Description of the illustration dbua07.jpg</a><br />
<br /></li>
<li>
<p>Select one of the following options:</p>
<ul>
<li>
<p><span class="bold">Use Different Passwords</span></p>
<p>If you choose to use different passwords, then you must enter a password in the <span class="bold">Password</span> and <span class="bold">Confirm Password</span> columns for each account in the table.</p>
</li>
<li>
<p><span class="bold">Use the Same Password for All Accounts</span></p>
<p>If you choose to use the same password, then you must enter that password in the <span class="bold">Password</span> and <span class="bold">Confirm Password</span> fields.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the default Oracle Database 11<span class="italic">g</span> Release 2 (11.2) security settings are in place, then new passwords must be at least eight characters, and passwords such as <code>welcome</code> and <code>oracle</code> are not allowed. See <a class="olink DBSEG10005" href="../../network.112/e36292/guidelines.htm#DBSEG10005"><span class="italic">Oracle Database Security Guide</span></a> for more information.</div>
</li>
</ul>
<p>Click <span class="bold">Next</span>.</p>
<p>The Summary screen appears.</p>
<img width="567" height="403" src="img/dbua08.jpg" alt="Description of dbua08.jpg follows" /><br />
<a id="sthref168" href="img_text/dbua08.htm">Description of the illustration dbua08.jpg</a><br />
<br /></li>
<li>
<p>The Summary screen shows the following information about the upgrade before it starts:</p>
<ul>
<li>
<p>Name, version, and Oracle home of the old and new databases</p>
</li>
<li>
<p>Database backup location, available space, and space required</p>
</li>
<li>
<p>Warnings ignored</p>
</li>
<li>
<p>Database components to be upgraded</p>
</li>
<li>
<p>Initialization parameters changes</p>
</li>
<li>
<p>Database files location</p>
</li>
<li>
<p>Listener registration</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="afterup.htm#CHDFIFFC">"Setting the COMPATIBLE Initialization Parameter"</a> for information about setting the <code>COMPATIBLE</code> initialization parameter after the upgrade</div>
<p>Check all of the specifications. Then do one of the following:</p>
<ul>
<li>
<p>Click <span class="bold">Back</span> if anything is incorrect until you reach the screen where you can correct it.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span> if everything is correct.</p>
</li>
</ul>
<p>The Progress screen displays and DBUA begins the upgrade.</p>
</li>
<li>
<p>After the upgrade has completed, the following message is displayed on the Progress screen:</p>
<pre>
Upgrade is complete. Click "OK" to see the results of the upgrade.
</pre></li>
<li>
<p>The Upgrade Results screen displays a description of the original and upgraded databases and changes made to the initialization parameters. The screen also shows the directory where various log files are stored after the upgrade. You can examine these log files to obtain more details about the upgrade process.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
An HTML version of the Upgrade Results is also saved in the log files directory.</div>
<ol>
<li>
<p>Click <span class="bold">Configure Database Passwords</span> to display the Password Management dialog box.</p>
<p>The Password Management dialog box enables you to change the default password for a user after you upgrade the database. For security reasons, all users are locked except for the following users:</p>
<ul>
<li>
<p><code>SYS</code></p>
</li>
<li>
<p><code>SYSTEM</code></p>
</li>
</ul>
<p>If you have enabled Local Management with Enterprise Manager, then the <code>SYSMAN</code> and <code>DBSNMP</code> accounts are also unlocked. These accounts provide Enterprise Manager with access to the database so it can gather monitoring data and so you can perform administration tasks with Enterprise Manager.</p>
<p>If you have enabled Central Management with Enterprise Manager, then the <code>DBSNMP</code> account is unlocked, as well as the <code>SYS</code> and <code>SYSTEM</code> user accounts.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To prevent unauthorized use of the database, Oracle recommends that you change all user passwords immediately after you upgrade your database.
<p>If the default Oracle Database 11<span class="italic">g</span> Release 2 (11.2) security settings are in place, then passwords must be at least eight characters, and passwords such as <code>welcome</code> and <code>oracle</code> are not allowed. See <a class="olink DBSEG" href="../../network.112/e36292/toc.htm"><span class="italic">Oracle Database Security Guide</span></a> for more information.</p>
</div>
</li>
<li>
<p>Click <span class="bold">Restore Database</span> if you are not satisfied with the upgrade results.</p>
<p>Depending on the method you used to back up your database, the Restore operation performs one of two tasks:</p>
<ul>
<li>
<p>If you used DBUA to back up your database, then clicking Restore restores the original database and the original database settings from the backup.</p>
</li>
<li>
<p>If you used your own backup procedure to back up the database, then clicking Restore restores only the original database settings. To restore the database itself, you must restore the backup you created with your own backup utilities.</p>
</li>
</ul>
</li>
</ol>
<p>If you are satisfied with the upgrade results, then click <span class="bold">Exit</span> to quit DBUA and use your newly upgraded database.</p>
<ol>
<li>
<p>DBUA modifies the <code>SID_DESC</code> entry for the upgraded database in the Oracle Database <code>listener.ora</code> file in one of the following ways:</p>
<p><span class="bold">A simple case:</span> Suppose the old <code>listener.ora</code> has the following SID_DESC entry:</p>
<pre>
...
   (SID_DESC =
      (SID_NAME = ORCL)
   )
...
</pre>
<p>If the database name is SAL, the domain name is COM, and the Oracle home is <code>/oracle/product/9.2</code>, then the assistant adds the following entry:</p>
<pre>
...
   (SID_DESC =
       (GLOBAL_DBNAME = sal.com)
          (ORACLE_HOME = /oracle/product/9.2)
          (SID_NAME = SAL)
    )
...
</pre>
<p><span class="bold">A more complicated case:</span> Suppose the old <code>listener.ora</code> has the following SID_DESC entry:</p>
<pre>
...
   (SID_DESC =
       (GLOBAL_DBNAME = <span class="italic">an_entry</span>)
       (SID_NAME = ORCL)
    )
...
</pre>
<p>If <span class="italic">an_entry</span> does not match the <code>GLOBAL_DBNAME</code> of the migrated database, and if the database name is SAL, the domain name is COM, and the Oracle home is <code>/oracle/product/9.2</code>, then the assistant adds the following entry:</p>
<pre>
...
   (SID_DESC =
       (GLOBAL_DBNAME = sal.com)
          (ORACLE_HOME = /oracle/product/9.2)
          (SID_NAME = SAL)
    )
...
</pre>
<p>This entry is the same as the entry in the simple case, but DBUA also adds the entry <span class="italic">an_entry</span> to the <code>SERVICE_NAMES</code> parameter in the initialization parameter file. Therefore, DBUA changes the <code>SERVICE_NAMES</code> parameter to the following:</p>
<pre>
SERVICE_NAMES = sal.com, <span class="italic">an_entry</span>
</pre></li>
<li>
<p>DBUA removes the entry of the upgraded database from the old <code>listener.ora</code> file.</p>
</li>
<li>
<p>DBUA reloads the <code>listener.ora</code> file in both the old and new Oracle Database environments.</p>
</li>
</ol>
</li>
<li>
<p>&gt;&gt;The following steps were deleted, either because the screens no longer appear or because they have been replaced with rewritten steps covering the same screens, as per IOUG presentation by Ravi Pattabhi 3/26/07. CBF 3/30/07</p>
<p>Specify the attributes for the <code>SYSAUX</code> tablespace, which is added automatically to all new Oracle Database 11<span class="italic">g</span> Release 1 (11.1) databases you create.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN00203" href="../../server.112/e25494/create.htm#ADMIN00203"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the <code>SYSAUX</code> tablespace</div>
<p>Many of the attributes of the <code>SYSAUX</code> tablespace are set automatically and cannot be modified. For example, the <code>SYSAUX</code> tablespace is set to use Automatic Segment-Space Management. However, you can specify the location of the data file, the default size of the <code>SYSAUX</code> tablespace, and its autoextend attributes.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you specify an existing datafile for the <code>SYSAUX</code> tablespace, then you must select Reuse Existing File Name. Otherwise, DBUA alerts you to the fact that the file currently exists.</div>
<p>Click <span class="bold">Next</span>.</p>
<p>The Recompiling Invalid Objects screen appears.</p>
</li>
<li>
<p>Secure your database with passwords for the Enterprise Manager accounts. You can set a single password, which is applied to each of the listed Enterprise Manager user accounts, or enhance the security of the accounts by providing unique passwords for each user.</p>
<p>Click <span class="bold">Next</span>.</p>
<p>The Recovery Configuration screen appears.</p>
</li>
<li>
<p>Specify a flash recovery area and enable archiving. When you are managing your database, it is important to configure the database so you can recover your data in the event of a system failure.</p>
<p>The Flash Recovery Area can be used to recover data that would otherwise be lost during a system failure. This location is also used by Enterprise Manager if you enabled local management and daily backups on the Management Options screen.</p>
<p>Click <span class="bold">Next</span>.</p>
<p>The Network Configuration screen appears.</p>
</li>
<li>
<p>At the Upgrade Operations page, do one of the following:</p>
<ul>
<li>
<p>Select the option to upgrade only the Oracle ASM instance</p>
</li>
<li>
<p>Select the option to upgrade the database</p>
<p>If you choose to upgrade the database, and the database is using Oracle ASM, then DBUA asks if you want to upgrade the Oracle ASM instance along with the database. Oracle recommends that you upgrade the database and Oracle ASM in separate DBUA sessions, in separate Oracle homes.</p>
</li>
</ul>
<p>Click <span class="bold">Next</span>.</p>
<p>The Selecting a Database Instance screen appears.</p>
</li>
<li>
<p>At the <span class="bold">Changes in Default Behavior</span> screen, DBUA displays some changes in the behavior of Oracle Database 11<span class="italic">g</span> Release 1 (11.1) from that of previous releases. In some cases the default values of some initialization parameters have changed. In other cases some new behavior/requirement has been introduced that might affect current scripts or applications.</p>
</li>
<li>
<p>Complete the procedures described in <a href="afterup.htm#BABEEEFF">Chapter 4, "Post-Upgrade Tasks for Oracle Database"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDHIIHD"></a>
<div id="UPGRD52700" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Optionally Performing an In-Place Upgrade (Into the Same Oracle Home)</h2>
<p>Oracle recommends when upgrading to Oracle Database 11<span class="italic">g</span> R2 (11.2) that you perform an out-of-place mode upgrade, which installs the new software into a new Oracle home. This means that you provide a different Oracle home location for the new upgrade. However, there may be cases where you need to perform an in-place upgrade, which maintains the same Oracle home. This section provides the information on how to keep the existing Oracle home.</p>
<p>The considerations and options for performing in-place upgrades are provided in these topics:</p>
<ul>
<li>
<p><a href="#CHDFJHEE">Known Issue When Starting an In-Place Upgrade</a></p>
</li>
<li>
<p><a href="#CHDIHBCI">Performing an In-Place Upgrade for Single-Instance Oracle Database</a></p>
</li>
<li>
<p><a href="#CHDBJJGJ">Performing an In-Place Upgrade for an Oracle RAC Database</a></p>
</li>
<li>
<p><a href="#CHDFBGBD">In-Place Upgrade on Windows</a></p>
</li>
</ul>
<p class="subhead2"><a id="CHDFJHEE"></a><a id="UPGRD52732"></a>Known Issue When Starting an In-Place Upgrade</p>
<p>When performing an in-place upgrade, which uses the same Oracle home location, an error messages appears stating that the installer detects Oracle Database software in the location that you specified.</p>
<p><span class="bold">Message:</span> The installer has detected that the software location you have specified contains Oracle Database software release 11.2.0.1. Oracle recommends that when upgrading, you perform an out-of-place installation of the software into a new Oracle home and then upgrade the database using the new software binaries.</p>
<p><span class="bold">Cause:</span> The installer has detected that the software location you have specified contains Oracle Database software release 11.2.0.1.</p>
<p><span class="bold">Action:</span> Either perform an in-place upgrade as described in this section, or perform an out-of-place upgrade, into a new Oracle home, as described in <a href="#i1011398">"Installing the New Oracle Database Software for the Upgrade"</a>.</p>
<p class="subhead2"><a id="CHDIHBCI"></a><a id="UPGRD52733"></a>Performing an In-Place Upgrade for Single-Instance Oracle Database</p>
<p>If you must perform an in-place upgrade, then the procedure is to back up the current installation, move it to a different location, and then install the new software in the old location, as described in the following procedure.</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">Oracle strongly recommends that you do not upgrade Oracle Database to release 11.2.0.2 or 11.2.0.3 using the existing Oracle home. This procedure is provided only if for some reason you have no alternative but to use the existing Oracle home.</p>
</div>
<p><span class="bold">To perform an in-place upgrade for a single-instance database</span></p>
<ol>
<li>
<p>Obtain the Oracle Database release 11.2 software from My Oracle Support at <code><a href="https://support.oracle.com/">https://support.oracle.com/</a></code>.</p>
</li>
<li>
<p>Back up the configuration data by backing up the following directories:</p>
<ul>
<li>
<p><code>ORACLE_HOME/dbs</code></p>
</li>
<li>
<p><code>ORACLE_HOME/network/admin</code></p>
</li>
<li>
<p><code>ORACLE_HOME/owb/bin/admin</code></p>
</li>
<li>
<p><code>ORACLE_HOME/</code><code><span class="codeinlineitalic">hostname_dbname</span></code></p>
</li>
<li>
<p><code>ORACLE_HOME/oc4j/j2ee/OC4J_DBConsole_</code><code><span class="codeinlineitalic">hostname_dbname</span></code></p>
</li>
</ul>
</li>
<li>
<p>Depending on which release you are upgrading from, in the software location for the release 11.2.0.1 or 11.2.0.2 software, <span class="italic">detach</span> the <code>ORACLE_HOME</code> with the following command:</p>
<pre>
ORACLE_HOME/oui/bin/runInstaller -detachHome ORACLE_HOME=<span class="italic">11.2.x.x.x software location</span>
</pre></li>
<li>
<p>Rename or move this <code>ORACLE_HOME</code> software directory to a temporary name:</p>
<pre>
mv ORACLE_HOME ORACLE_HOME.backup
</pre></li>
<li>
<p>Start OUI and select release 11.2.0.3. <span class="bold">Software Only</span>.</p>
</li>
<li>
<p>For <span class="bold">Location</span>, select the same location as used for release 11.2.0.1 or 11.2.0.2 (depending on which release you are upgrading from).</p>
</li>
<li>
<p>After the installation completes, restore the configuration data for the old Oracle home. Restore the backed up configuration data files (from the backups you made of <code>/dbs</code> and <code>network/admin</code>), and also restore the following directories: <code>/</code><code><span class="codeinlineitalic">hostname_dbname</span></code>, <code>/owb/bin/admin</code>, and <code>/oc4j/j2ee/OC4J_DBConsole_</code><code><span class="codeinlineitalic">hostname_dbname</span></code>. Specify the actual name for <code><span class="codeinlineitalic">hostname_dbname</span></code> where <span class="italic">hostname</span> is the actual hostname and <span class="italic">dbname</span> is the actual database name.</p>
</li>
<li>
<p>Run DBUA from <code>ORACLE_HOME/bin directory</code> and select the 11.2.0.1.0 or 11.2.0.2.0 database instance to perform the upgrade to 11.2.0.3.0.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system</p>
</li>
<li>
<p><a class="olink LADBI" href="../../install.112/e47689/toc.htm"><span class="italic">Oracle Database Installation Guide for Linux</span></a></p>
</li>
<li>
<p><a class="olink OUICG" href="../../em.112/e12255/toc.htm"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a></p>
</li>
</ul>
</div>
<p class="subhead2"><a id="CHDBJJGJ"></a><a id="UPGRD52734"></a>Performing an In-Place Upgrade for an Oracle RAC Database</p>
<p>Performing an in-place upgrade of an Oracle RAC database is similar to the procedure described in <a href="#CHDIHBCI">"Performing an In-Place Upgrade for Single-Instance Oracle Database"</a>. You must back up the current Oracle home and installation, move it to a different location, and then install the new software in the old location, as described in the following steps.</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">Oracle strongly recommends that you do not upgrade Oracle Database to release 11.2.0.2 or later using the existing Oracle home. This procedure is provided only if for some reason you have no alternative but to use the existing Oracle home.</p>
</div>
<p><span class="bold">To perform an in-place upgrade for Oracle RAC Database instances</span></p>
<ol>
<li>
<p>Back up the configuration data by backing up the following directories on all cluster nodes:</p>
<ul>
<li>
<p><code>ORACLE_HOME/dbs</code></p>
</li>
<li>
<p><code>ORACLE_HOME/network/admin</code></p>
</li>
<li>
<p><code>ORACLE_HOME/owb/bin/admin</code></p>
</li>
<li>
<p><code>ORACLE_HOME/</code><code><span class="codeinlineitalic">hostname_dbname</span></code></p>
</li>
<li>
<p><code>ORACLE_HOME/oc4j/j2ee/OC4J_DBConsole_</code><code><span class="codeinlineitalic">hostname_dbname</span></code></p>
</li>
</ul>
</li>
<li>
<p>Run the following command on each of the nodes to detach the old Oracle RAC <code>ORACLE_HOME</code>. For example:</p>
<pre>
ORACLE_HOME/oui/bin/runInstaller -detachHome ORACLE_HOME=<span class="italic">11.2 software location</span>
</pre></li>
<li>
<p>Rename this Oracle RAC <code>ORACLE_HOME</code> directory on all the nodes to a temporary name.</p>
</li>
<li>
<p>Install Oracle Database <span class="bold">Software Only</span> on all nodes.</p>
</li>
<li>
<p>On all nodes, restore into the 11.2.0.4 <code>ORACLE_HOME</code> software location the backed up configuration data files (from the backups you made of <code>/dbs</code> and <code>network/admin</code>), and also restore the following directories: <code>/</code><code><span class="codeinlineitalic">hostname_dbname</span></code>, <code>/owb/bin/admin</code>, and <code>/oc4j/j2ee/OC4J_DBConsole_</code><code><span class="codeinlineitalic">hostname_dbname</span></code>. Specify the actual name for <code><span class="codeinlineitalic">hostname_dbname</span></code>.</p>
</li>
<li>
<p>Run DBUA from the 11.2.0.4 <code>ORACLE_HOME/bin</code> directory on the local node and select the Oracle RAC database instance to upgrade it to release 11.2.0.4.0.</p>
</li>
</ol>
<a id="CHDFBGBD"></a>
<div id="UPGRD52735" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">In-Place Upgrade on Windows</h3>
<p>Oracle recommends that you perform the out-of-place upgrade into a new Oracle home. This procedure is provided only if for some reason you must use the old Oracle home.</p>
<p>The following topics discuss how to perform an upgrade into an existing Oracle home on Windows platforms:</p>
<ul>
<li>
<p><a href="#CHDHCGHF">Considerations for In-Place Upgrade of Oracle Database on Windows Platforms</a></p>
</li>
<li>
<p><a href="#CHDBAIHI">Performing an In-Place Upgrade of Oracle Database on Windows</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Important:</p>
<ul>
<li>
<p>Oracle recommends that you perform the out-of-place upgrade into a new Oracle home, which is described in <a href="#i1011482">"Upgrading with Database Upgrade Assistant on Linux, UNIX, and Windows"</a></p>
</li>
<li>
<p>The installer on Windows is <code>setup.exe</code> instead of <code>runInstaller</code></p>
</li>
</ul>
</div>
<a id="CHDHCGHF"></a>
<div id="UPGRD52736" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Considerations for In-Place Upgrade of Oracle Database on Windows Platforms</h4>
<p>On Windows, you must shut down all services that invoke or lock Oracle files. To do this, set the services to <span class="bold">disable</span> in Windows service manager. A reboot may be required after you disable some services in order to free their associated locked objects. On Windows platforms, <code>ORADIM</code> manages Windows Services (operating system processes). DBCA manages Oracle database instances and database services.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NTQRF" href="../../win.112/e10845/toc.htm"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a></div>
</div>
<!-- class="sect3" -->
<a id="CHDBAIHI"></a>
<div id="UPGRD52737" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Performing an In-Place Upgrade of Oracle Database on Windows</h4>
<p>This procedure is provided only if you have no alternative but to use the old Oracle home when upgrading to the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) release. This is not the perferred method for upgrading Oracle Database to release 11.2. If you must perform an in-place upgrade, then you must perform the steps listed in this section. The procedure describes how to backup the current installation, move the current installation to a new location, and then install the new software into the old location.</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">Oracle strongly recommends that you do not upgrade Oracle Database to release 11.2.0.2 or later using the existing Oracle home. This procedure is provided only if for some reason you have no alternative but to use the existing Oracle home.</p>
</div>
<p><span class="bold">To perform an in-place upgrade on Windows</span></p>
<ol>
<li>
<p>Back up the configuration data by backing up the following directories on the single node or all cluster nodes:</p>
<ul>
<li>
<p><code>ORACLE_HOME/dbs</code></p>
</li>
<li>
<p><code>ORACLE_HOME/database</code></p>
</li>
<li>
<p><code>ORACLE_HOME/network/admin</code></p>
</li>
<li>
<p><code>ORACLE_HOME/owb/bin/admin</code></p>
</li>
<li>
<p><code>ORACLE_HOME/</code><code><span class="codeinlineitalic">hostname_dbname</span></code></p>
</li>
<li>
<p><code>ORACLE_HOME/oc4j/j2ee/OC4J_DBConsole_</code><code><span class="codeinlineitalic">hostname_dbname</span></code></p>
</li>
</ul>
</li>
<li>
<p>Skip this step if you are upgrading a single instance database. If you are upgrading an Oracle RAC database, then installation of the software for Oracle Database 11<span class="italic">g</span> Release 2 (11.2) requires that you upgrade Oracle Clusterware first. See <a href="#CACGCGIC">"Considerations for Upgrading Oracle Clusterware and Oracle ASM Instances"</a></p>
</li>
<li>
<p>Shut down the instances running on <code>ORACLE_HOME</code>:</p>
<pre>
SQL&gt; SHUTDOWN IMMEDIATE
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
On an Oracle RAC Database, you must shut down the database instances on all nodes, and stop all interfering services on all nodes in the cluster.</div>
</li>
<li>
<p>On all instances, use <code>NET STOP</code> to stop the Oracle services that may interfere with this Oracle home. For example:</p>
<pre>
C:\&gt; NET STOP <span class="codeinlineitalic">OracleService</span><span class="codeinlineitalic">ORACLE_SID</span>
</pre>
<pre>
</pre>
<p>where <code><span class="codeinlineitalic">OracleService</span></code> is the name of the service, and <code><span class="codeinlineitalic">ORACLE_SID</span></code> is the SID of the database instance.</p>
<p>Oracle services that may need to be stopped include:</p>
<ul>
<li>
<p>the TNSListener</p>
</li>
<li>
<p>HTTP server</p>
</li>
<li>
<p>Oracle Management Server</p>
</li>
<li>
<p>OLAP Agent</p>
</li>
<li>
<p>Intelligent Agent</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support at <code><a href="https://support.oracle.com">https://support.oracle.com</a></code>:
<ul>
<li>
<p>Note ID 1291682.1, "In-Place Upgrade to 11.2.0.2 on Windows Platform" for information on 11.2.0.2 and 11.2.0.3</p>
</li>
<li>
<p>Note ID 294350.1, "Write Errors, or Files In Use, or NoServicesForProcessException During Patch Installation" for information on files that are locked by interfering processes</p>
</li>
<li>
<p><a class="olink NTQRF05011" href="../../win.112/e10845/create.htm#NTQRF05011"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for information on using ORADIM to administer a database instance</p>
</li>
</ul>
</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
The list of services to stop is not inclusive. There may be Windows-specific and vendor-specific services running that need to be stopped.</div>
</li>
<li>
<p>Run the following command on each of the nodes to detach this Oracle RAC <code>ORACLE_HOME</code>:</p>
<pre>
ORACLE_HOME/oui/bin/setup -detachHome ORACLE_HOME=<span class="italic">this software location</span>
</pre></li>
<li>
<p>Rename this Oracle RAC <code>ORACLE_HOME</code> directory on all the nodes to a temporary name.</p>
</li>
<li>
<p>Install release 11.2.0.3 <span class="bold">Software Only</span> on all nodes.</p>
</li>
<li>
<p>If needed, use ORADIM to create a new instance:</p>
<pre>
C:\oracle\bin\oradim &ndash;NEW -SID <span class="italic">ORACLE_SID</span>
</pre>
<pre>
</pre>
<p>where <code><span class="codeinlineitalic">ORACLE_SID</span></code> is the SID of the database instance. This will enable the instance to be listed with DBUA for upgrading.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NTQRF148" href="../../win.112/e10845/create.htm#NTQRF148"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for information on creating an instance with ORADIM</div>
</li>
<li>
<p>On all nodes, restore into this <code>ORACLE_HOME</code> software location the backed up configuration data files (from the backups you made of <code>/dbs</code>, <code>/database</code>, and <code>network/admin</code>), and also restore the following directories: <code>/</code><code><span class="codeinlineitalic">hostname_dbname</span></code>, <code>/owb/bin/admin</code>, and <code>/oc4j/j2ee/OC4J_DBConsole_</code><code><span class="codeinlineitalic">hostname_dbname</span></code>. Specify the actual name for <code><span class="codeinlineitalic">hostname_dbname</span></code>.</p>
</li>
<li>
<p>Run DBUA from this <code>ORACLE_HOME/bin</code> directory on the local node. If you are upgrading an Oracle RAC database, then select the 11.2.0.1.0 or 11.2.0.2.0 Oracle RAC database instance to upgrade to release 11.2.0.3.0.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NTQRF050" href="../../win.112/e10845/create.htm#NTQRF050"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for information on postinstallation tasks for the database</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011981"></a>
<div id="UPGRD12405" class="sect2">
<h3 class="sect2">Using DBUA in Silent Mode<a id="sthref169"></a><a id="sthref170"></a> to Upgrade Oracle Database</h3>
<p>When invoked with the <code>-silent</code> command line option, DBUA operates in silent mode. In silent mode, DBUA does not present a user interface. It also writes any messages (including information, errors, and warnings) to a log file in <span class="italic">ORACLE_HOME</span><code>/cfgtoollogs/dbua/SID/upgrade</code><span class="italic">n</span>, where <span class="italic">n</span> is the number of upgrades that DBUA has performed as of this upgrade.</p>
<p class="itemizedlisttitle">To upgrade a database with DBUA in silent mode&nbsp;</p>
<ul>
<li>
<p>Issue the following command</p>
<pre>
dbua -silent -sid ORCL &amp;
</pre>
<p>where the database is named <code>ORCL</code> in this example.</p>
</li>
</ul>
<a id="CHDGGDHA"></a>
<div id="UPGRD52738" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Oracle DBUA Command Line Options for Silent Mode</h4>
<p>Database Upgrade Assistant (DBUA) supports command line options when run in silent mode. <a href="#I1030040">Table 3-3</a> describes the various options and the corresponding parameters that are supported by DBUA.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the default Oracle Database 11<span class="italic">g</span> Release 2 (11.2) security settings are in place, then passwords must be at least eight characters, and passwords such as <code>welcome</code> and <code>oracle</code> are not allowed. See <a class="olink DBSEG10005" href="../../network.112/e36292/guidelines.htm#DBSEG10005"><span class="italic">Oracle Database Security Guide</span></a> for more information.</div>
<div id="UPGRD52645" class="tblformal">
<p class="titleintable"><a id="sthref172"></a><a id="I1030040"></a>Table 3-3 DBUA Command Line Options</p>
<table class="cellalignment1667" title="DBUA Command Line Options" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t75">Option</th>
<th class="cellalignment1664" id="r1c2-t75">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t75" headers="r1c1-t75">
<p><code>-silent</code></p>
</td>
<td class="cellalignment1660" headers="r2c1-t75 r1c2-t75">
<p>Specifies that DBUA should operate in silent mode.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t75" headers="r1c1-t75">
<p><code>-sid</code> <code><span class="codeinlineitalic">SID</span></code></p>
</td>
<td class="cellalignment1660" headers="r3c1-t75 r1c2-t75">
<p>Specifies the system identifier (SID) of the database to upgrade</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t75" headers="r1c1-t75">
<p><code>-oracleHome</code> <code><span class="codeinlineitalic">home_name</span></code></p>
</td>
<td class="cellalignment1660" headers="r4c1-t75 r1c2-t75">
<p>Specifies the Oracle Database home directory of the database to upgrade</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r5c1-t75" headers="r1c1-t75">
<p><code>-oracleBase</code> <code><span class="codeinlineitalic">base_name</span></code></p>
</td>
<td class="cellalignment1660" headers="r5c1-t75 r1c2-t75">
<p>Specifies the Oracle Database base directory of the database to upgrade</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r6c1-t75" headers="r1c1-t75">
<p><code>-diagnosticDest</code> <code><span class="codeinlineitalic">diagnostic_destination</span></code></p>
</td>
<td class="cellalignment1660" headers="r6c1-t75 r1c2-t75">
<p>Specifies the default location to store Oracle trace and diagnostic files. It replaces the initialization parameter settings for background dump destination and user dump destination from earlier releases.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r7c1-t75" headers="r1c1-t75">
<p><code>-sysDBAUserName</code> <code><span class="codeinlineitalic">SYSDBA_user</span></code></p>
</td>
<td class="cellalignment1660" headers="r7c1-t75 r1c2-t75">
<p>Specifies a user with <code>SYSDBA</code> privileges.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r8c1-t75" headers="r1c1-t75">
<p><code>-sysDBAPassword</code> <code><span class="codeinlineitalic">SYSDBA_pwd</span></code></p>
</td>
<td class="cellalignment1660" headers="r8c1-t75 r1c2-t75">
<p>Specifies the password for <span class="italic">SYSDBA_user</span>.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r9c1-t75" headers="r1c1-t75">
<p><code>-autoextendFiles</code></p>
</td>
<td class="cellalignment1660" headers="r9c1-t75 r1c2-t75">
<p>Autoextends database files during the upgrade. Data files revert to their original autoextend settings after the upgrade.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r10c1-t75" headers="r1c1-t75">
<p><code>-newGlobalDbName</code> <code><span class="codeinlineitalic">db_name</span></code></p>
</td>
<td class="cellalignment1660" headers="r10c1-t75 r1c2-t75">
<p>Specifies a new global database name. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r11c1-t75" headers="r1c1-t75">
<p><code>-newSid</code> <code><span class="codeinlineitalic">new_SID</span></code></p>
</td>
<td class="cellalignment1660" headers="r11c1-t75 r1c2-t75">
<p>Specifies a new system identifier (SID) of the database to upgrade. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r12c1-t75" headers="r1c1-t75">
<p><code>-upgradeTimezone</code></p>
</td>
<td class="cellalignment1660" headers="r12c1-t75 r1c2-t75">
<p>Upgrades the timezone file version for the database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r13c1-t75" headers="r1c1-t75">
<p><code>-generateMapFile</code></p>
</td>
<td class="cellalignment1660" headers="r13c1-t75 r1c2-t75">
<p>Applies only if you are moving data files or upgrading an Oracle XE database. If you specify this option, then DBUA only generates a database map file in the log location and then exits.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r14c1-t75" headers="r1c1-t75">
<p><code>-useASM</code></p>
</td>
<td class="cellalignment1660" headers="r14c1-t75 r1c2-t75">
<p>Applies only if you are moving data files or upgrading an Oracle XE database. If the database to upgrade has an Oracle ASM instance, then this option tells DBUA to use it for the upgrade.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r15c1-t75" headers="r1c1-t75">
<p><code>-commonFileLocation</code> <code><span class="codeinlineitalic">common_files</span></code></p>
</td>
<td class="cellalignment1660" headers="r15c1-t75 r1c2-t75">
<p>Specifies a common location to store database files. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r16c1-t75" headers="r1c1-t75">
<p><code>-omfLocation</code> <code><span class="codeinlineitalic">omf_area</span></code></p>
</td>
<td class="cellalignment1660" headers="r16c1-t75 r1c2-t75">
<p>Specifies a database area for Oracle Managed Files. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r17c1-t75" headers="r1c1-t75">
<p><code>-databaseMapFile</code> <code><span class="codeinlineitalic">map_file_name</span></code></p>
</td>
<td class="cellalignment1660" headers="r17c1-t75 r1c2-t75">
<p>Specifies the full name of the map file to map database files. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r18c1-t75" headers="r1c1-t75">
<p><code>-newRecoveryArea</code> <code><span class="codeinlineitalic">recover_area</span></code></p>
</td>
<td class="cellalignment1660" headers="r18c1-t75 r1c2-t75">
<p>Specifies the recovery area for a database that is moved during upgrade. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r19c1-t75" headers="r1c1-t75">
<p><code>-newRecoveryAreaSize</code> <code><span class="codeinlineitalic">recover_size</span></code></p>
</td>
<td class="cellalignment1660" headers="r19c1-t75 r1c2-t75">
<p>Specifies the recovery area size (MB) for a database that is moved during upgrade. This option applies only if you are moving data files or upgrading an Oracle XE database.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r20c1-t75" headers="r1c1-t75">
<p><code>-apexAdminPassword</code> <code><span class="codeinlineitalic">apex_pwd</span></code></p>
</td>
<td class="cellalignment1660" headers="r20c1-t75 r1c2-t75">
<p>Specifies the password for the Application Express Administrator.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r21c1-t75" headers="r1c1-t75">
<p><code>-disableUpgradeScriptLogging</code></p>
</td>
<td class="cellalignment1660" headers="r21c1-t75 r1c2-t75">
<p>Disables the detailed log generation for running SQL scripts during the upgrade process. This is enabled by default. To enable log generation, do not specify this option.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r22c1-t75" headers="r1c1-t75">
<p><code>-backupLocation</code> <code><span class="codeinlineitalic">directory</span></code></p>
</td>
<td class="cellalignment1660" headers="r22c1-t75 r1c2-t75">
<p>Specifies a directory to back up your database before the upgrade starts</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r23c1-t75" headers="r1c1-t75">
<p><code>-sysauxTablespace</code></p>
</td>
<td class="cellalignment1660" headers="r23c1-t75 r1c2-t75">
<p>Creates a new <code>SYSAUX</code> tablespace</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r24c1-t75" headers="r1c1-t75">
<p><code>-datafileName</code> <code><span class="codeinlineitalic">name</span></code></p>
</td>
<td class="cellalignment1660" headers="r24c1-t75 r1c2-t75">
<p>Specifies the complete path of the data file for creating the new <code>SYSAUX</code> tablespace</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r25c1-t75" headers="r1c1-t75">
<p><code>-datafileSize</code> <code><span class="codeinlineitalic">size</span></code></p>
</td>
<td class="cellalignment1660" headers="r25c1-t75 r1c2-t75">
<p>Specifies the size of the data file for creating the new <code>SYSAUX</code> tablespace {500M, 10G}</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r26c1-t75" headers="r1c1-t75">
<p><code>-datafileSizeNext</code> <code><span class="codeinlineitalic">size</span></code></p>
</td>
<td class="cellalignment1660" headers="r26c1-t75 r1c2-t75">
<p>Specifies the next extent for the data file</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r27c1-t75" headers="r1c1-t75">
<p><code>-datafileSizeMax</code> <code><span class="codeinlineitalic">size</span></code></p>
</td>
<td class="cellalignment1660" headers="r27c1-t75 r1c2-t75">
<p>Specifies the maximum size of the data file</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r28c1-t75" headers="r1c1-t75">
<p><code>-postUpgradeScripts</code> <code><span class="codeinlineitalic">script</span></code> <code>[,</code> <code><span class="codeinlineitalic">script</span></code> <code>] ...</code></p>
</td>
<td class="cellalignment1660" headers="r28c1-t75 r1c2-t75">
<p>Specifies a comma-delimited list of SQL scripts. Specify complete path names. The scripts are executed at the end of the upgrade.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r29c1-t75" headers="r1c1-t75">
<p><code>-initParam</code> <code><span class="codeinlineitalic">parameter</span></code><code>=</code><code><span class="codeinlineitalic">value</span></code> <code>[,</code> <code><span class="codeinlineitalic">parameter</span></code><code>=</code><code><span class="codeinlineitalic">value</span></code> <code>] ...</code></p>
</td>
<td class="cellalignment1660" headers="r29c1-t75 r1c2-t75">
<p>Specifies a comma-delimited list of initialization parameter values of the form <span class="italic">name</span>=<span class="italic">value</span></p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r30c1-t75" headers="r1c1-t75">
<p><code>-disableArchiveLogMode</code></p>
</td>
<td class="cellalignment1660" headers="r30c1-t75 r1c2-t75">
<p>Turns off archiving and flashback logging for the duration of the upgrade.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r31c1-t75" headers="r1c1-t75">
<p><code>-recompile_invalid_objects true|false</code></p>
</td>
<td class="cellalignment1660" headers="r31c1-t75 r1c2-t75">
<p>When you specify <code>TRUE</code> for this option, DBUA recompiles all invalid PL/SQL modules immediately after the upgrade is performed.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r32c1-t75" headers="r1c1-t75">
<p><code>-degree_of_parallelism</code> <code><span class="codeinlineitalic">cpu_number</span></code></p>
</td>
<td class="cellalignment1660" headers="r32c1-t75 r1c2-t75">
<p>Specifies the number of CPUs to be used for parallel recompilation.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r33c1-t75" headers="r1c1-t75"><br />
<code>-emConfiguration</code><br />
<code>{CENTRAL|LOCAL|ALL|NOBACKUP|</code><br />
<code>NOEMAIL|NONE}</code></td>
<td class="cellalignment1660" headers="r33c1-t75 r1c2-t75">
<p>Specifies Oracle Enterprise Manager management options:</p>
<ul>
<li>
<p><code>CENTRAL</code> - Database is centrally managed by Oracle Enterprise Manager.</p>
</li>
<li>
<p><code>LOCAL</code> - Database is locally managed by Oracle Enterprise Manager.</p>
</li>
<li>
<p><code>ALL</code> - This option configures Oracle Enterprise Manager Database Control, enables daily backups, and enables e-mail notifications</p>
</li>
<li>
<p><code>NOBACKUP</code> - Automatic daily backups of the database are not enabled.</p>
</li>
<li>
<p><code>NOEMAIL</code> - E-mail notifications are not enabled.</p>
</li>
<li>
<p><code>NONE</code> - Database is not managed by Enterprise Manager.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r34c1-t75" headers="r1c1-t75">
<p><code>-dbsnmpPassword</code> <code><span class="codeinlineitalic">password</span></code></p>
</td>
<td class="cellalignment1660" headers="r34c1-t75 r1c2-t75">
<p>Specifies the <code>DBSNMP</code> user password. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r35c1-t75" headers="r1c1-t75">
<p><code>-sysmanPassword</code> <code><span class="codeinlineitalic">password</span></code></p>
</td>
<td class="cellalignment1660" headers="r35c1-t75 r1c2-t75">
<p>Specifies the <code>SYSMAN</code> user password. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r36c1-t75" headers="r1c1-t75">
<p><code>-asmPassword</code> <code><span class="codeinlineitalic">password</span></code></p>
</td>
<td class="cellalignment1660" headers="r36c1-t75 r1c2-t75">
<p>Specifies the <code>SYS</code> password for the Oracle ASM instance. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r37c1-t75" headers="r1c1-t75">
<p><code>-hostUserName</code> <code><span class="codeinlineitalic">hostname</span></code></p>
</td>
<td class="cellalignment1660" headers="r37c1-t75 r1c2-t75">
<p>Specifies the host user name for the Oracle Enterprise Manager backup job. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r38c1-t75" headers="r1c1-t75">
<p><code>-hostUserPassword</code> <code><span class="codeinlineitalic">password</span></code></p>
</td>
<td class="cellalignment1660" headers="r38c1-t75 r1c2-t75">
<p>Specifies the host user password for the Oracle Enterprise Manager backup job. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r39c1-t75" headers="r1c1-t75">
<p><code>-backupSchedule</code> <code><span class="codeinlineitalic">hh</span></code><code>:</code><code><span class="codeinlineitalic">mm</span></code></p>
</td>
<td class="cellalignment1660" headers="r39c1-t75 r1c2-t75">
<p>Specifies the daily backup schedule in the form <span class="italic">hh</span>:<span class="italic">mm</span> (hours and minutes). This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r40c1-t75" headers="r1c1-t75">
<p><code>-smtpServer</code> <code><span class="codeinlineitalic">server_name</span></code></p>
</td>
<td class="cellalignment1660" headers="r40c1-t75 r1c2-t75">
<p>Specifies the outgoing mail (SMTP) server for E-mail notifications. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r41c1-t75" headers="r1c1-t75">
<p><code>-emailAddress</code> <code><span class="codeinlineitalic">address</span></code></p>
</td>
<td class="cellalignment1660" headers="r41c1-t75 r1c2-t75">
<p>Specifies the E-mail address for E-mail notifications. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r42c1-t75" headers="r1c1-t75">
<p><code>-centralAgent</code> <code><span class="codeinlineitalic">location</span></code></p>
</td>
<td class="cellalignment1660" headers="r42c1-t75 r1c2-t75">
<p>Specifies the Oracle Enterprise Manager central agent location. This option applies only if you are configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r43c1-t75" headers="r1c1-t75">
<p><code>-recoveryAreaDestination</code> <code><span class="codeinlineitalic">directory</span></code></p>
</td>
<td class="cellalignment1660" headers="r43c1-t75 r1c2-t75">
<p>Specifies the destination directory for all recovery files. This option applies only if you are moving data files, upgrading an Oracle XE database, or configuring Oracle Enterprise Manager.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r44c1-t75" headers="r1c1-t75">
<p><code>[-localRacSid</code> <code><span class="codeinlineitalic">SID</span></code></p>
</td>
<td class="cellalignment1660" headers="r44c1-t75 r1c2-t75">
<p>Specifies the local SID of the cluster database if the cluster database is not registered in the Oracle Cluster Registry</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r45c1-t75" headers="r1c1-t75">
<p><code>-h | -help</code></p>
</td>
<td class="cellalignment1660" headers="r45c1-t75 r1c2-t75">
<p>Displays help for DBUA</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect3" -->
<a id="CHDEHBDG"></a>
<div id="UPGRD52739" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">DBUA Command Line Syntax for Silent Mode</h4>
<p>You can specify all valid options from the command line using the following syntax:</p>
<pre>
dbua [ -silent ] [ -sid <span class="italic">SID</span> ] [-oracleHome <span class="italic">home_name</span>] [-oracleBase <span class="italic">base_name</span>]
[-diagnosticDest <span class="italic">diagnostic_destination</span>]
[-sysDBAUserName <span class="italic">SYSDBA_user</span>] [-sysDBAPassword <span class="italic">SYSDBA_pwd</span>]
[-upgradeASM] [-autoextendFiles] [-newGlobalDbName <span class="italic">db_name</span>] [-newSid <span class="italic">new_SID</span>]
[-generateMapFile] [-useASM] [-commonFileLocation <span class="italic">common_files</span>]
[-omfLocation <span class="italic">omf_area</span>] [-databaseMapFile <span class="italic">map_file_name</span>]
[-newRecoveryArea <span class="italic">recover_area</span>] [-newRecoveryAreaSize <span class="italic">recover_size</span>]
[-apexAdminPassword <span class="italic">apex_pwd</span>] [-disableUpgradeScriptLogging ] 
[-backupLocation <span class="italic">directory</span>]
[-sysauxTablespace -datafileName <span class="italic">name</span> -datafileSize <span class="italic">size</span> 
  -datafileSizeNext <span class="italic">size</span> -datafileSizeMax <span class="italic">size</span>]
[-postUpgradeScripts <span class="italic">script</span> [, <span class="italic">script</span> ] ... ]
[-initParam <span class="italic">parameter</span>=<span class="italic">value</span> [, <span class="italic">parameter</span>=<span class="italic">value</span> ] ... ]
[-disableArchiveLogMode] [-recompile_invalid_objects true | false]
[-degree_of_parallelism <span class="italic">cpu_number</span>]
[-emConfiguration {CENTRAL|LOCAL|ALL|NOBACKUP|NOEMAIL|NONE}
  -dbsnmpPassword <span class="italic">password</span> -sysmanPassword <span class="italic">password</span> -asmPassword <span class="italic">password</span> 
  -hostUserName <span class="italic">hostname</span> -hostUserPassword <span class="italic">password</span> -backupSchedule <span class="italic">hh</span>:<span class="italic">mm</span>
  [-smtpServer <span class="italic">server_name</span> -emailAddress <span class="italic">address</span>]
  [-centralAgent <span class="italic">location</span>] [-localRacSid <span class="italic">SID</span>]]
[-recoveryAreaDestination <span class="italic">directory</span>] [-h|-help]
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1011600"></a>
<div id="UPGRD00350" class="sect1">
<h2 class="sect1">Upgrading Oracle Database Manually<a id="sthref173"></a></h2>
<p>There may be cases where you need to upgrade Oracle Database manually instead of using DBUA. After installing the new Oracle Database software as described in <a href="#i1011398">"Installing the New Oracle Database Software for the Upgrade"</a>, backing up your database, and preparing the new Oracle home, you are ready to proceed with a manual upgrade. The procedure for manually upgrading your database assumes that you have previously run the Pre-Upgrade Information Tool as described in <a href="#CACHIDJD">"Using the Pre-Upgrade Information Tool"</a>.</p>
<p>The following topics guide you through the process of performing a manual upgrade.</p>
<ul>
<li>
<p><a href="#i1011949">Backing Up Oracle Database for a Manual Upgrade</a></p>
</li>
<li>
<p><a href="#i1011979">Preparing the New Oracle Home for a Manual Upgrade</a></p>
</li>
<li>
<p><a href="#CACGGHJC">Manually Upgrading Oracle Database</a></p>
</li>
</ul>
<a id="i1011949"></a>
<div id="UPGRD12406" class="sect2">
<h3 class="sect2">Backing Up Oracle Database<a id="sthref174"></a> for a Manual Upgrade</h3>
<p>After running the Pre-Upgrade Information Tool and cleanly shutting down the instance, Oracle recommends that you back up the database as described in this section. If you encounter problems with the upgrade and wish to abandon the upgrade completely, then you must restore the database from this backup. Therefore, Oracle recommends that you back up your database now as a precaution.</p>
<p class="subhead2"><a id="UPGRD52740"></a>To perform a full backup of the database to be upgraded</p>
<ol>
<li>
<p>Sign on to RMAN:</p>
<pre>
rman "target / nocatalog"
</pre></li>
<li>
<p>Issue the following RMAN commands:</p>
<pre>
RUN
{
    ALLOCATE CHANNEL <span class="italic">chan_name</span> TYPE DISK;
    BACKUP DATABASE FORMAT '<span class="italic">some_backup_directory</span>%U' TAG before_upgrade;
    BACKUP CURRENT CONTROLFILE FORMAT '<span class="italic">controlfile location and name</span>';
}
</pre></li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a></div>
</div>
<!-- class="sect2" -->
<a id="i1011979"></a>
<div id="UPGRD12407" class="sect2">
<h3 class="sect2">Preparing the New Oracle Home for a Manual Upgrade</h3>
<p>After backing up the database to be upgraded, prepare the new Oracle home in a new location. Do this for any release of Oracle Database for which you are upgrading, whether the database is release 11.2 or earlier. Starting with Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.3), you install the Oracle Grid Infrastructure and Oracle Database software into a new Oracle home instead of applying a patch set to the existing Oracle home.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1011949">"Backing Up Oracle Database for a Manual Upgrade"</a></div>
<p class="orderedlisttitle">To prepare the new Oracle home&nbsp;</p>
<ol>
<li id="i1012042">
<p>Copy configuration files from the Oracle home of the database being upgraded to the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home:</p>
<ol>
<li>
<p>If your parameter file resides within the old environment's Oracle home, then copy it to the new Oracle home. By default, Oracle looks for the parameter file in the <code>ORACLE_HOME</code><code>/dbs</code> directory on Linux or UNIX platforms and in the <code>ORACLE_HOME</code><code>\database</code> directory on Windows operating systems. The parameter file can reside anywhere you wish, but it should not reside in the old environment's Oracle home after you upgrade to Oracle Database 11<span class="italic">g</span> Release 2 (11.2).</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
It might be necessary to create a text initialization parameter file (<code>PFILE</code>) from the server parameter file (<code>SPFILE</code>) so that you can edit the initialization parameters.</div>
</li>
<li>
<p>If your parameter file resides within an Oracle ASM instance, then back up the parameter file using the following command:</p>
<pre>
CREATE pfile FROM spfile;
</pre>
<p>If you must downgrade the database and your <code>SPFILE</code> resided within Oracle ASM, then the parameter file must be restored before the downgrade.</p>
</li>
<li id="i1012051">
<p>If your parameter file is a text-based initialization parameter file with either an <code>IFILE</code> (include file) or a <code>SPFILE</code> (server parameter file) entry, and the file specified in the <code>IFILE</code> or <code>SPFILE</code> entry resides within the old environment's Oracle home, then copy the file specified by the <code>IFILE</code> or <code>SPFILE</code> entry to the new Oracle home. The file specified in the <code>IFILE</code> or <code>SPFILE</code> entry contains additional initialization parameters.</p>
</li>
<li>
<p>If you have a password file that resides within the old environment's Oracle home, then move or copy the password file to the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home.</p>
<p>The name and location of the password file are operating system-specific. On Linux or UNIX platforms, the default password file is <code>orapw</code><code><span class="codeinlineitalic">sid</span></code>, located in the <code>ORACLE_HOME/dbs</code> directory. On Windows operating systems, the default password file is <code>pwd</code><code><span class="codeinlineitalic">sid</span></code><code>.ora</code>, located in the <code>ORACLE_HOME\database</code> directory. In both cases, <code><span class="codeinlineitalic">sid</span></code> is your Oracle instance ID.</p>
</li>
<li>
<p>If you are upgrading a cluster database and your <code>init</code><code><span class="codeinlineitalic">db_name</span></code><code>.ora</code> file resides within the old environment's Oracle home, then move or copy the <code>init</code><code><span class="codeinlineitalic">db_name</span></code><code>.ora</code> file to the new Oracle home.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading a cluster database, then perform this step on all nodes in which this cluster database has instances configured.</div>
</li>
<li>
<p>If you are upgrading an Oracle Enterprise Edition database, you must copy the Enterprise Manager Database Console directory from the old Oracle Home into the new Oracle Home. Note that DBUA automatically copies and upgrades the Enterprise Manager Database Console directory.</p>
</li>
<li>
<p>Adjust your parameter file in Oracle Database 11<span class="italic">g</span> Release 2 (11.2) by completing the following steps:<a id="sthref176"></a><a id="sthref177"></a></p>
<ol>
<li id="i1012069">
<p>Remove obsolete initialization parameters and adjust deprecated initialization parameters. Certain parameters are obsolete in Oracle Database 11<span class="italic">g</span> Release 2 (11.2), while other parameters have become deprecated. Remove all obsolete parameters from any parameter file that starts an Oracle Database 11<span class="italic">g</span> Release 2 (11.2) instance. Obsolete parameters might cause errors in Oracle Database 11<span class="italic">g</span> Release 2 (11.2). Also, alter any parameter whose syntax has changed in the new release.</p>
<p>The Pre-Upgrade Information Tool displays any deprecated parameters and obsolete parameters it finds in the <span class="bold">Deprecated Parameters</span> and <span class="bold">Obsolete Parameters</span> sections, respectively.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="changes.htm#BABHACIE">Appendix A, "Behavior Changes After Upgrading Oracle Database"</a> for a list of initialization parameters that have been deprecated or have become obsolete, and for information on initialization parameters that have changed in ways that raise compatibility issues between different releases of Oracle Database software</div>
</li>
<li>
<p>Make sure the <code>COMPATIBLE</code> initialization parameter is properly set for Oracle Database 11<span class="italic">g</span> Release 2 (11.2). The Pre-Upgrade Information Tool displays a warning in the Database section if <code>COMPATIBLE</code> is not properly set.</p>
</li>
<li>
<p>Adjust the values of the initialization parameters to at least the minimum values indicated by the Pre-Upgrade Information Tool.</p>
</li>
<li id="i1012132">
<p>Make sure all path names in the parameter file are fully specified. You should not have relative path names in the parameter file.</p>
</li>
<li>
<p>If the parameter file contains an <code>IFILE</code> entry, then change the <code>IFILE</code> entry in the parameter file to point to the new location of the include file that you specified in Step&nbsp;<a href="#i1012042">1</a>.&nbsp;<a href="#i1012051">c</a>. Then, edit the file specified in the <code>IFILE</code> entry in the same way that you edited the parameter file in Step&nbsp;<a href="#i1012069">a</a> through Step&nbsp;<a href="#i1012132">d</a>.</p>
</li>
<li>
<p>If you are upgrading a cluster database, then modify the <code>init</code><code><span class="codeinlineitalic">db_name</span></code><code>.ora</code> file in the same way that you modified the parameter file.</p>
</li>
</ol>
<p>Make sure you save all of the files you modified after making these adjustments.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading a cluster database, then perform this step on all nodes in which this cluster database has instances configured.</div>
</li>
<li id="i1012183">
<p>If you are upgrading a cluster database, then set the <code>CLUSTER_DATABASE</code> initialization parameter to <code>false</code>. After the upgrade, you must set this initialization parameter back to <code>TRUE</code>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CACGGHJC"></a>
<div id="UPGRD12408" class="sect2">
<h3 class="sect2">Manually Upgrading Oracle Database</h3>
<p>After installing the new Oracle Database software as described in <a href="#i1011398">"Installing the New Oracle Database Software for the Upgrade"</a> and preparing the new Oracle home as described in <a href="#i1011979">"Preparing the New Oracle Home for a Manual Upgrade"</a>, you are ready to proceed with the manual upgrade.</p>
<p class="orderedlisttitle">To manually upgrade the database&nbsp;</p>
<ol>
<li>
<p>Shut down the instance:</p>
<pre>
SQL&gt; SHUTDOWN IMMEDIATE
</pre></li>
<li>
<p>If your operating system is Windows, then complete the following steps:</p>
<ol>
<li>
<p>Stop the <code>OracleService</code><code><span class="codeinlineitalic">SID</span></code> Oracle service of the database you are upgrading, where <code><span class="codeinlineitalic">SID</span></code> is the instance name. For example, if your <code><span class="codeinlineitalic">SID</span></code> is <code>ORCL</code>, then enter the following at a command prompt:</p>
<pre>
C:\&gt; NET STOP OracleServiceORCL
</pre></li>
<li>
<p><a id="sthref179"></a><a id="sthref180"></a>Delete the Oracle service at a command prompt using <code>ORADIM</code>.</p>
<p>If your <code><span class="codeinlineitalic">SID</span></code> is <code>ORCL</code>, then enter the following command:</p>
<pre>
C:\&gt; ORADIM -DELETE -SID ORCL
</pre></li>
<li>
<p>Create the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) service at a command prompt using the <code>ORADIM</code> command of the new Oracle Database release:</p>
<pre>
C:\&gt; ORADIM -NEW -SID <span class="italic">SID</span> -SYSPWD <span class="italic">PASSWORD</span> -MAXUSERS <span class="italic">USERS</span>
     -STARTMODE AUTO -PFILE <span class="italic">ORACLE_HOME</span>\DATABASE\INIT<span class="italic">SID</span>.ORA
</pre>
<p>This syntax includes the following variables:</p>
<div class="inftblinformal">
<table class="cellalignment1663" title="ORADIM Syntax" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t82">Variable</th>
<th class="cellalignment1664" id="r1c2-t82">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t82" headers="r1c1-t82"><code><span class="codeinlineitalic">SID</span></code></td>
<td class="cellalignment1660" headers="r2c1-t82 r1c2-t82">The same SID name as the SID of the database you are upgrading.</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t82" headers="r1c1-t82"><code><span class="codeinlineitalic">PASSWORD</span></code></td>
<td class="cellalignment1660" headers="r3c1-t82 r1c2-t82">The password for the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database instance. This is the password for the user connected with <code>SYSDBA</code> privileges. The <code>-SYSPWD</code> option is not required. If you do not specify it, then operating system authentication is used, and no password is required.
<p>If the default Oracle Database 11<span class="italic">g</span> Release 2 (11.2) security settings are in place, then passwords must be at least eight characters, and passwords such as <code>welcome</code> and <code>oracle</code> are not allowed. See <a class="olink DBSEG10005" href="../../network.112/e36292/guidelines.htm#DBSEG10005"><span class="italic">Oracle Database Security Guide</span></a> for more information.</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t82" headers="r1c1-t82"><code><span class="codeinlineitalic">USERS</span></code></td>
<td class="cellalignment1660" headers="r4c1-t82 r1c2-t82">The maximum number of users who can be granted <code>SYSDBA</code> and <code>SYSOPER</code> privileges.</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r5c1-t82" headers="r1c1-t82"><code><span class="codeinlineitalic">ORACLE_HOME</span></code></td>
<td class="cellalignment1660" headers="r5c1-t82 r1c2-t82">The Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home directory. Ensure that you specify the full path name with the <code>-PFILE</code> option, including the drive letter of the Oracle home directory.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>For example, if your <code>SID</code> is <code>ORCL</code>, your <code>password</code> (<code>SYSPWD</code>) is <code>TWxy5791</code>, the maximum number of users (<code>MAXUSERS</code>) is 10, and the <code>ORACLE_HOME</code> directory is <code>C:\ORACLE\PRODUCT\11.2.0\DB</code>, then enter the following command:</p>
<pre>
C:\&gt; ORADIM -NEW -SID ORCL -SYSPWD TWxy5791 -MAXUSERS 10
-STARTMODE AUTO -PFILE C:\ORACLE\PRODUCT\11.2.0\DB\DATABASE\INITORCL.ORA
</pre>
<p><code>ORADIM</code> writes a log file to the <code>ORACLE_HOME\database</code> directory.</p>
</li>
</ol>
</li>
<li>
<p><a id="sthref181"></a>If your operating system is Linux or UNIX, then perform the following checks:</p>
<ol>
<li>
<p>Your <code>ORACLE_SID</code> is set correctly</p>
</li>
<li>
<p>The <code>oratab</code> file points to your Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home</p>
</li>
<li>
<p>The following environment variables point to the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) directories:</p>
<ul>
<li>
<p><code>ORACLE_HOME</code></p>
</li>
<li>
<p><code>PATH</code></p>
</li>
</ul>
</li>
<li>
<p>Any scripts that clients use to set the <code>ORACLE_HOME</code> value must point to the new Oracle home.</p>
</li>
</ol>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are upgrading a cluster database, then perform these checks on all nodes on which this cluster database has instances configured.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink GINST" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=GINST"><span class="italic">Oracle Database Installation Guide</span></a> for your operating system-specific Oracle Database procedures for information about setting other important environment variables on your operating system</div>
</li>
<li>
<p>If there is a different user and group for Grid Infrastructure and Oracle Database, then run the <code>setasmgidwrap</code> script, which is located in the <code>GRID_HOME/bin</code> directory, against the new <code>ORACLE_HOME/bin/oracle</code> directory with the <code>-o</code> option as shown in the following example:</p>
<pre>
$<span class="italic">GRID_HOME</span>/bin/setasmgidwrap o=ORACLE_HOME/bin/oracle
</pre></li>
<li>
<p>Log in to the system as the owner of the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Oracle home directory.</p>
</li>
<li>
<p>At a system prompt, change to the <code>ORACLE_HOME/rdbms/admin</code> directory.</p>
</li>
<li>
<p>Start SQL*Plus.</p>
</li>
<li>
<p>Connect to the database instance as a user with <code>SYSDBA</code> privileges.</p>
</li>
<li id="i1012182">
<p>Start the instance by issuing the following command:</p>
<pre>
SQL&gt; STARTUP UPGRADE
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code>UPGRADE</code> keyword enables you to open a database based on an earlier Oracle Database release. It also restricts logons to <code>AS SYSDBA</code> sessions, disables system triggers, and performs additional operations that prepare the environment for the upgrade.</div>
<p>You might be required to use the <code>PFILE</code> option to specify the location of your initialization parameter file.</p>
<p>Once the database is started in upgrade mode, only queries on fixed views execute without errors until after the <code>catupgrd.sql</code> script is run. Before running <code>catupgrd.sql</code>, queries on any other view or the use of PL/SQL returns an error.</p>
<p>The following are common errors that might occur when attempting to start the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database. Some of these errors are written to the alert log and not to your session. If you receive any of these errors, then issue the <code>SHUTDOWN ABORT</code> command to shut down the database and correct the problem.</p>
<ul>
<li>
<p><code>ORA-00401: the value for parameter compatible is not supported by this release</code></p>
<p>The <code>COMPATIBLE</code> initialization parameter is set to a value less than <code>10.0.0</code>.</p>
</li>
<li>
<p><code>ORA-39701: database must be mounted EXCLUSIVE for UPGRADE or DOWNGRADE</code></p>
<p>The <code>CLUSTER_DATABASE</code> initialization parameter is set to <code>TRUE</code> instead of <code>FALSE</code>.</p>
</li>
<li>
<p><code>ORA-39700: database must be opened with UPGRADE option</code></p>
<p>The <code>STARTUP</code> command was issued without the <code>UPGRADE</code> keyword.</p>
</li>
<li>
<p><code>ORA-00336: log file size xxxx blocks is less than minimum 8192 blocks</code></p>
<p>A redo log file size is less than 4 MB:</p>
</li>
</ul>
<p>If errors appear listing obsolete initialization parameters, then make a note of the obsolete initialization parameters and continue with the upgrade. Remove the obsolete initialization parameters the next time you shut down the database.</p>
</li>
<li>
<p>Perform this step only if you are upgrading from Oracle9<span class="italic">i</span> Release 2 (9.2). Otherwise, skip to the next step.</p>
<p>Create a <code>SYSAUX</code> tablespace. In the new Oracle Database 11<span class="italic">g</span> release, the <code>SYSAUX</code> tablespace is used to consolidate data from a number of tablespaces that were separate in previous releases.</p>
<p>The <code>SYSAUX</code> tablespace must be created with the following mandatory attributes:</p>
<ul>
<li>
<p><code>ONLINE</code></p>
</li>
<li>
<p><code>PERMANENT</code></p>
</li>
<li>
<p><code>READ WRITE</code></p>
</li>
<li>
<p><code>EXTENT MANAGEMENT LOCAL</code></p>
</li>
<li>
<p><code>SEGMENT SPACE MANAGEMENT AUTO</code></p>
</li>
</ul>
<p><a href="#i1030100">Table 3-4</a> can be used to determine an optimal size for the <code>SYSAUX</code> tablespace. Also, the Pre-Upgrade Information Tool provides an estimate of the minimum required size for the <code>SYSAUX</code> tablespace under the SYSAUX Tablespace section.</p>
<div id="UPGRD52646" class="tblformalkey">
<p class="titleintable"><a id="sthref182"></a><a id="i1030100"></a>Table 3-4 Guidelines for Sizing the SYSAUX Tablespace</p>
<table class="cellalignment1663" title="Guidelines for Sizing the SYSAUX Tablespace" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment1654">
<th class="cellalignment1664" id="r1c1-t86">Factor</th>
<th class="cellalignment1664" id="r1c2-t86">Small</th>
<th class="cellalignment1664" id="r1c3-t86">Medium</th>
<th class="cellalignment1664" id="r1c4-t86">Large</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r2c1-t86" headers="r1c1-t86">
<p>Number of CPUs</p>
</td>
<td class="cellalignment1660" headers="r2c1-t86 r1c2-t86">
<p>2</p>
</td>
<td class="cellalignment1660" headers="r2c1-t86 r1c3-t86">
<p>8</p>
</td>
<td class="cellalignment1660" headers="r2c1-t86 r1c4-t86">
<p>32</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r3c1-t86" headers="r1c1-t86">
<p>Number of concurrently active sessions</p>
</td>
<td class="cellalignment1660" headers="r3c1-t86 r1c2-t86">
<p>5</p>
</td>
<td class="cellalignment1660" headers="r3c1-t86 r1c3-t86">
<p>20</p>
</td>
<td class="cellalignment1660" headers="r3c1-t86 r1c4-t86">
<p>100</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r4c1-t86" headers="r1c1-t86">
<p>Number of user objects (tables and indexes)</p>
</td>
<td class="cellalignment1660" headers="r4c1-t86 r1c2-t86">
<p>500</p>
</td>
<td class="cellalignment1660" headers="r4c1-t86 r1c3-t86">
<p>5,000</p>
</td>
<td class="cellalignment1660" headers="r4c1-t86 r1c4-t86">
<p>50,000</p>
</td>
</tr>
<tr class="cellalignment1654">
<td class="cellalignment1660" id="r5c1-t86" headers="r1c1-t86">
<p>Estimated SYSAUX size at steady state with default configuration</p>
</td>
<td class="cellalignment1660" headers="r5c1-t86 r1c2-t86">
<p>500 MB</p>
</td>
<td class="cellalignment1660" headers="r5c1-t86 r1c3-t86">
<p>2 GB</p>
</td>
<td class="cellalignment1660" headers="r5c1-t86 r1c4-t86">
<p>5 GB</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalkey" -->
<p>The following SQL statement would create a 500 MB <code>SYSAUX</code> tablespace for the database:</p>
<pre>
SQL&gt; CREATE TABLESPACE sysaux DATAFILE 'sysaux01.dbf'
         SIZE 500M REUSE
         EXTENT MANAGEMENT LOCAL
         SEGMENT SPACE MANAGEMENT AUTO
         ONLINE;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN00203" href="../../server.112/e25494/create.htm#ADMIN00203"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the <code>SYSAUX</code> tablespace</div>
</li>
<li id="i1012225">
<p>Set the system to spool results to a log file for later verification of success:</p>
<pre>
SQL&gt; SPOOL upgrade.log
</pre></li>
<li>
<p><a id="sthref183"></a><a id="sthref184"></a>Run the <code>catupgrd.sql</code> script:</p>
<pre>
<a id="sthref185"></a><a id="sthref186"></a>SQL&gt; @catupgrd.sql
</pre>
<p>The <code>catupgrd.sql</code> script determines which upgrade scripts must be run, runs them, and then shuts down the database. You must run the script in the Oracle Database 11<span class="italic">g</span> Release 2 (11.2) environment.</p>
<p>The upgrade script creates and alters certain data dictionary tables. It also upgrades or installs the following database components in the new Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database:</p>
<ul>
<li>
<p>Oracle Database Catalog Views</p>
</li>
<li>
<p>Oracle Database Packages and Types</p>
</li>
<li>
<p>JServer JAVA Virtual Machine</p>
</li>
<li>
<p>Oracle Database Java Packages</p>
</li>
<li>
<p>Oracle XDK</p>
</li>
<li>
<p>Oracle Real Application Clusters</p>
</li>
<li>
<p>Oracle Workspace Manager</p>
</li>
<li>
<p>Oracle Multimedia</p>
</li>
<li>
<p>Oracle XML Database</p>
</li>
<li>
<p>OLAP Analytic Workspace</p>
</li>
<li>
<p>Oracle OLAP API</p>
</li>
<li>
<p>OLAP Catalog</p>
</li>
<li>
<p>Oracle Text</p>
</li>
<li>
<p>Spatial</p>
</li>
<li>
<p>Oracle Data Mining</p>
</li>
<li>
<p>Oracle Label Security</p>
</li>
<li>
<p>Messaging Gateway</p>
</li>
<li>
<p>Oracle Expression Filter</p>
</li>
<li>
<p>Oracle Rules Manager</p>
</li>
<li>
<p>Oracle Enterprise Manager Repository</p>
</li>
<li>
<p>Oracle Database Vault</p>
</li>
<li>
<p>Oracle Application Express</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you did not run the Pre-Upgrade Information Tool, the <code>catupgrd.sql</code> script terminates with one of the following errors<a id="sthref187"></a><a id="sthref188"></a><a id="sthref189"></a>:
<pre>
ORA-00942: table or view does not exist
<a id="sthref190"></a><a id="sthref191"></a>ORA-00904: "TZ_VERSION": invalid identifier
<a id="sthref192"></a><a id="sthref193"></a>ORA-01722: invalid number 
</pre>
<p>If you receive any of these errors, issue the <code>SHUTDOWN ABORT</code> statement, revert to the original Oracle home directory, and run the Pre-Upgrade Information Tool (<code>utlu112i.sql</code>) as described in <a href="#CACHIDJD">"Using the Pre-Upgrade Information Tool"</a>.</p>
</div>
</li>
<li>
<p>Restart the instance to reinitialize the system parameters for normal operation.</p>
<pre>
SQL&gt; STARTUP
</pre>
<p>This restart, following the database shutdown performed as part of the <code>catupgrd.sql</code> script, flushes all caches, clears buffers, and performs other housekeeping activities. These measures are an important final step to ensure the integrity and consistency of the newly upgraded Oracle Database software.</p>
</li>
<li>
<p>If you encountered a message listing obsolete initialization parameters when you started the database in Step&nbsp;<a href="#i1012182">9</a>, then remove the obsolete initialization parameters from the parameter file before restarting. If necessary, convert the <code>SPFILE</code> to a <code>PFILE</code> so you can edit the file to delete parameters. See the chapter about managing initialization parameters using a server parameter file in <a class="olink ADMIN00202" href="../../server.112/e25494/create.htm#ADMIN00202"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
</li>
<li>
<p>Run <code><a id="sthref194"></a><a id="sthref195"></a><a id="sthref196"></a><a id="sthref197"></a>utlu112s.sql</code>, the Post-Upgrade Status Tool, which provides a summary of the upgrade at the end of the spool log. You can run <code><a id="sthref198"></a><a id="sthref199"></a><a id="sthref200"></a><a id="sthref201"></a>utlu112s.sql</code> any time after completing the upgrade. See <a href="#CHDFGJCH">"About the Post-Upgrade Status Tool"</a> for more information.</p>
<p>Run <code><a id="sthref202"></a><a id="sthref203"></a><a id="sthref204"></a><a id="sthref205"></a>utlu112s.sql</code> to display the results of the upgrade as follows:<a id="sthref206"></a><a id="sthref207"></a></p>
<pre>
SQL&gt; @utlu112s.sql
</pre>
<p>If the Post-Upgrade Status Tool returns errors or shows components that are not <code>VALID</code> or not the most recent release, then see <a href="#i1012368">"Troubleshooting the Upgrade of Oracle Database"</a> for more information.</p>
</li>
<li>
<p>Run <code>catuppst.sql</code> to perform upgrade actions that do not require the database to be in <code>UPGRADE</code> mode:</p>
<pre>
SQL&gt; @catuppst.sql
</pre>
<p>This may generate the following informational messages:</p>
<pre>
Generating apply and rollback scripts...
Check the following file for errors:
Apply script: .*
Rollback script: .*
Executing script file...
Updating registry...
Check the following log file for errors: 

Generating apply and rollback scripts...
Check the following file for errors:
.../cfgtoollogs/catbundle/catbundle_PSU_*.log
Apply script:
.../rdbms/admin/catbundle_PSU_*_APPLY.sql
Rollback script:
.../rdbms/admin/catbundle_PSU_*_ROLLBACK.sql
Executing script file... 

Updating registry...
Check the following log file for errors:
.../cfgtoollogs/catbundle/catbundle_PSU_*.log 
</pre></li>
<li id="BABBDJGJ">
<p>Run <code>utlrp.sql</code> to recompile any remaining stored PL/SQL and Java code.</p>
<pre>
SQL&gt; @utlrp.sql
</pre>
<p>Verify that all expected packages and classes are valid:</p>
<pre>
SQL&gt; SELECT count(*) FROM dba_invalid_objects;
SQL&gt; SELECT distinct object_name FROM dba_invalid_objects;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the pre-upgrade information tool detected <code>INVALID</code> objects and populated the <code>registry$sys_inv_objs</code> and <code>registry$nonsys_inv_objs</code> tables, then execute <code><span class="codeinlineitalic">ORACLE_HOME</span></code><code>/rdbms/admin/utluiobj.sql</code> to display only those objects which are newly invalid because of the upgrade process. The <code>utluiobj.sql</code> script only displays objects that are now <code>INVALID</code> but which were <code>VALID</code> before the upgrade.</div>
</li>
<li>
<p>Exit SQL*Plus.</p>
</li>
<li>
<p>If you are upgrading a cluster database from releases 10.2, 11.1, or 11.2, then upgrade the database configuration in Oracle Clusterware using the following command:</p>
<pre>
$ srvctl upgrade database -d <span class="italic">db-unique-name</span> -o <span class="italic">oraclehome</span>
</pre>
<p>where <code><span class="codeinlineitalic">db-unique-name</span></code> is the database name assigned to it (not the instance name), and <code><span class="codeinlineitalic">oraclehome</span></code> is the Oracle home location in which the database is being upgraded.</p>
</li>
</ol>
<p>Your database is now upgraded to the new Oracle Database 11<span class="italic">g</span> release. You are ready to complete the procedures described in <a href="afterup.htm#BABEEEFF">Chapter 4, "Post-Upgrade Tasks for Oracle Database"</a>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Warehouse Builder components are not upgraded as part of the <code>catupgrd.sql</code> script and, therefore, its version will not be updated during the upgrade process.</div>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<p class="warnsp">If you retain the old Oracle software, then never start the upgraded database with the old software. Only start the database with the executables in the new Oracle Database installation. Also, before you remove the old Oracle environment, make sure you relocate any data files in that environment to the new Oracle Database environment. See the <a class="olink ADMIN012" href="../../server.112/e25494/dfiles.htm#ADMIN012"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about relocating data files.</p>
</div>
<a id="CHDFGJCH"></a>
<div id="UPGRD52741" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About the Post-Upgrade Status Tool</h4>
<p>The Post-Upgrade Status Tool, which is the <code><a id="sthref208"></a><a id="sthref209"></a><a id="sthref210"></a><a id="sthref211"></a>utlu112s.sql</code> script, displays the status of the database components in the upgraded database and the time required to complete each component upgrade. Any errors that occur during the upgrade are listed with each component and must be addressed. The <code><a id="sthref212"></a><a id="sthref213"></a><a id="sthref214"></a><a id="sthref215"></a>utlu112s.sql</code> script can be run any time after you run <code>catupgrd.sql</code>, but <span class="italic">not</span> after running <code>utlrp.sql</code>.</p>
<p>The Post-Upgrade Status Tool displays a report similar to the following output:</p>
<pre>
Oracle Database 11.2 Post-Upgrade Status Tool           07-12-2011 12:36:25     
.                                                                               
Component                               Current      Version     Elapsed Time   
Name                                    Status       Number      HH:MM:SS       
.                                                                               
Oracle Server                                                                   
.                                         VALID      11.2.0.3.0  00:04:47       
JServer JAVA Virtual Machine                                                    
.                                         VALID      11.2.0.3.0  00:01:05       
Oracle Workspace Manager                                                        
.                                         VALID      11.2.0.3.0  00:00:18       
OLAP Analytic Workspace                                                         
.                                         VALID      11.2.0.3.0  00:00:07       
OLAP Catalog                                                                    
.                                         VALID      11.2.0.3.0  00:00:21       
Oracle OLAP API                                                                 
.                                         VALID      11.2.0.3.0  00:00:12       
Oracle Label Security                                                           
.                                         VALID      11.2.0.3.0  00:00:02       
Oracle Enterprise Manager                                                       
.                                         VALID      11.2.0.3.0  00:00:50       
Oracle XDK                                                                      
.                                         VALID      11.2.0.3.0  00:00:19       
Oracle Text                                                                     
.                                         VALID      11.2.0.3.0  00:00:11       
Oracle XML Database                                                             
.                                         VALID      11.2.0.3.0  00:01:04       
Oracle Database Java Packages                                                   
.                                         VALID      11.2.0.3.0  00:00:07       
Oracle Multimedia                                                               
.                                         VALID      11.2.0.3.0  00:01:25       
Spatial                                                                         
.                                         VALID      11.2.0.3.0  00:00:50       
Oracle Expression Filter                                                        
.                                         VALID      11.2.0.3.0  00:00:04       
Oracle Rules Manager                                                            
.                                         VALID      11.2.0.3.0  00:00:02       
Oracle Application Express                                                      
.                                         VALID     3.2.1.00.10                 
Oracle Database Vault                                                           
.                                         VALID      11.2.0.3.0  00:00:02       
Gathering Statistics                                                            
.                                                                00:00:36       
Total Upgrade Time: 00:12:30                                                    
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1012368"></a>
<div id="UPGRD12409" class="sect1">
<h2 class="sect1">Troubleshooting the Upgrade<a id="sthref216"></a><a id="sthref217"></a> of Oracle Database</h2>
<p>Oracle provides troubleshooting tips and workarounds for problems and errors that may occur during the upgrade process for Oracle Database. Also, be sure to check <a class="olink READM" href="../../readmes.112/e41331/toc.htm"><span class="italic">Oracle Database Readme</span></a>.</p>
<p>This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGJHEA">Pre-Upgrade Oracle Home Removal on Oracle RAC</a></p>
</li>
<li>
<p><a href="#BABGJJJE">Resource Limits and Oracle Database Upgrade</a></p>
</li>
<li>
<p><a href="#CHDBFHGF">COMPATIBLE Parameter Not Set</a></p>
</li>
<li>
<p><a href="#CHDDCJDB">Edition Session Startup Error</a></p>
</li>
<li>
<p><a href="#CIACJFDD">Manual Workaround for ORA-01408</a></p>
</li>
<li>
<p><a href="#CIAIJGDI">Running the DBMS_DST Package After Upgrade Can Result in ORA-01822</a></p>
</li>
<li>
<p><a href="#CHDBAHFA">DBUA May Mark Invalid Components with an X Before Entire Upgrade is Done</a></p>
</li>
<li>
<p><a href="#BABHDDFE">Understanding Component Status</a></p>
</li>
<li>
<p><a href="#BABCGHFJ">Rerunning the Upgrade for Oracle Database</a></p>
</li>
<li>
<p><a href="#i1012399">Cancelling the Upgrade for Oracle Database</a></p>
</li>
</ul>
<a id="CHDGJHEA"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Pre-Upgrade Oracle Home Removal on Oracle RAC</h3>
<p>You may need to keep the old Oracle Home for a while after a successful upgrade. However, after you have tested the newly upgraded Oracle database, you will need to remove the old Oracle Home.</p>
<p>As the clusterware user on all nodes, enter the following SQL*Plus commands.</p>
<ul>
<li>
<p>Detach <span class="italic">OLD_HOME</span> (where <span class="italic">OLD_HOME</span> is your pre-upgrade Oracle Home:</p>
<pre>
$<span class="italic">OLD_HOME</span>/oui/bin/runInstaller -detachHome -silent -local
</pre></li>
<li>
<p>Confirm <span class="italic">OLD_HOME</span> is removed from central inventory:</p>
<pre>
$OLD_HOME/OPatch/opatch lsinventory -all
</pre></li>
</ul>
<ul>
<li>
<p>Remove files in <span class="italic">OLD_HOME</span> manually:</p>
<pre>
/bin/rm -rf $OLD_HOME
</pre></li>
</ul>
</div>
<!-- class="sect2" -->
<a id="BABGJJJE"></a>
<div id="UPGRD12410" class="sect2">
<h3 class="sect2">Resource Limits and Oracle Database Upgrade</h3>
<p>If you run out of resources, such as disk space or memory, during the upgrade of Oracle Database, then increase the resource allocation. After increasing the resource allocation, you should perform a <code>SHUTDOWN ABORT</code> and restart the instance (in <code>UPGRADE</code> mode) before rerunning the <code>catupgrd.sql</code> script or restarting DBUA.</p>
<p>The resources that generally require increases for a new Oracle Database release are as follows:</p>
<ul>
<li>
<p><code>SYSTEM</code> and <code>SYSAUX</code> tablespaces</p>
<p>Typically you receive one of the following messages during the upgrade if your <code>SYSTEM</code> tablespace size is insufficient:</p>
<pre>
ORA-01650: unable to extend rollback segment <span class="italic">string</span> by <span class="italic">string</span> in tablespace <span class="italic">string</span>
ORA-01651: unable to extend save undo segment by <span class="italic">string</span> for tablespace <span class="italic">string</span>
ORA-01652: unable to extend temp segment by <span class="italic">string</span> in tablespace <span class="italic">string</span>
ORA-01653: unable to extend table <span class="italic">string</span>.<span class="italic">string</span> by <span class="italic">string</span> in tablespace <span class="italic">string</span>
ORA-01654: unable to extend index <span class="italic">string</span>.<span class="italic">string</span> by <span class="italic">string</span> in tablespace <span class="italic">string</span>
ORA-01655: unable to extend cluster <span class="italic">string</span>.<span class="italic">string</span> by <span class="italic">string</span> in tablespace <span class="italic">string</span>
</pre>
<p>To avoid these errors, set <code>AUTOEXTEND ON MAXSIZE UNLIMITED</code> for the <code>SYSTEM</code> and <code>SYSAUX</code> tablespaces.</p>
</li>
<li>
<p>Shared memory</p>
<p>You might require larger shared memory pool sizes in some cases. The error message indicates which shared memory initialization parameter must be increased.</p>
<pre>
ORA-04031: unable to allocate <span class="italic">string</span> bytes of shared memory ("<span class="italic">string</span>","<span class="italic">string</span>","<span class="italic">string</span>","<span class="italic">string</span>")
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information about shared memory initialization parameters.</div>
</li>
<li>
<p>Rollback segments/undo tablespace</p>
<p>If you are using rollback segments, then you must have a single large (100 MB) <code>PUBLIC</code> rollback segment online while the upgrade scripts are being run. Smaller public rollback segments should be taken offline during the upgrade. Typically you get the following error if your rollback segment size is insufficient:</p>
<pre>
ORA-01562: failed to extend rollback segment number <span class="italic">string</span>
</pre>
<p>If you are using an undo tablespace, then be sure it is at least 400 MB.</p>
</li>
<li>
<p>Flash Recovery Area</p>
<p>If you are using a <a id="sthref218"></a>Flash Recovery Area and it fills up during the upgrade, then the following error appears in the alert log, followed by suggestions for recovering from the problem:</p>
<pre>
ORA-19815: WARNING: db_recovery_file_dest_size of <span class="italic">string</span> bytes is 98.99%
used, and has <span class="italic">string</span> remaining bytes available.
</pre>
<p>Identify the root cause of the problem and take appropriate actions to proceed with the upgrade. To avoid issues during the upgrade, increase the amount of space available in your Flash Recovery Area before starting the upgrade.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDBFHGF"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">COMPATIBLE Parameter Not Set</h3>
<p>If you see error ORA-00723, "Initialization parameter <code>COMPATIBLE</code> must be explicitly set," when attempting to open a database in the new Oracle home in upgrade mode, then check that <code>COMPATIBLE</code> is set in the pfile or spfile.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="afterup.htm#CHDFIFFC">"Setting the COMPATIBLE Initialization Parameter"</a> for information about setting the <code>COMPATIBLE</code> initialization parameter</div>
</div>
<!-- class="sect2" -->
<a id="CHDDCJDB"></a>
<div id="UPGRD52742" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Edition Session Startup Error</h3>
<p>If an upgrade script or command running in SQL*Plus set the <code>EDITION</code> parameter, then Oracle Database cannot start properly afterwards and error <code>SP2-1540</code>: "Oracle Database cannot startup in an Edition session" is thrown. To avoid this problem, after running <code>catugrd.sql</code> or any SQL*Plus session where this parameter is changed, exit the SQL*Plus session and restart the instance in a different session.</p>
</div>
<!-- class="sect2" -->
<a id="CIACJFDD"></a>
<div id="UPGRD52647" class="sect2">
<h3 class="sect2">Manual Workaround for <a id="sthref219"></a>ORA-01408</h3>
<p>The ORA-01408 error is a known problem with Oracle Application databases. The workaround addresses the following scenario:</p>
<pre>
SQL&gt; Create Index system.repcat$_audit_column_f2_idx ON
2  system.repcat$_audit_column(base_sname,base_oname,base_conflict_type_id,
3  base_reference_name)
4  /
system.repcat$_audit_column(base_sname,base_oname,base_conflict_type_id,
                          *ERROR at line 2:
ORA-01408: such column list already indexed
</pre>
<p>The workaround is to drop the <code>REPCAT$_AUDIT_COLUMN_IDX1</code> index and rerun the upgrade as described in <a href="#BABCGHFJ">"Rerunning the Upgrade for Oracle Database"</a>.</p>
</div>
<!-- class="sect2" -->
<a id="CIAIJGDI"></a>
<div id="UPGRD52648" class="sect2">
<h3 class="sect2">Running the <a id="sthref220"></a>DBMS_DST Package After Upgrade Can Result in <a id="sthref221"></a><a id="sthref222"></a>ORA-01822</h3>
<p>Running the <code>DBMS_DST</code> package after upgrading to Oracle Database 11<span class="italic">g</span> Release 2 (11.2) can result in the <code>ORA-01882: time zone region not found</code> error.</p>
<p>This error is returned if the user sets the time zone file version incorrectly, which results in the region IDs of several time zone regions being stored incorrectly in the database. For example:</p>
<pre>
ERROR at line 1:
@  ORA-01882: time zone region not found
@  ORA-06512: at "SYS.DBMS_DST", line 113
@  ORA-06512: at "SYS.DBMS_DST", line 1101
@  ORA-06512: at line 1
</pre>
<p>To fix this problem, update the time zone version as described in <a href="#CIAFHIBG">"About Warnings for TIMESTAMP WITH TIME ZONE Data Type"</a> and rerun the upgrade as described in <a href="#BABCGHFJ">"Rerunning the Upgrade for Oracle Database"</a>.</p>
</div>
<!-- class="sect2" -->
<a id="BABHDDFE"></a>
<div id="UPGRD12411" class="sect2">
<h3 class="sect2">Understanding Component Status</h3>
<p>The Post-Upgrade Status Tool should report <code>VALID</code> status for all components at the end of the upgrade. The following list shows and briefly describes other status values that you might see:</p>
<ul>
<li>
<p><code>NO SCRIPT</code></p>
<p>The component upgrade script was not found in <span class="italic">ORACLE_HOME</span>. Check the install logs, install the component software, and then rerun <code>catupgrd.sql</code>.</p>
</li>
<li>
<p><code>OPTION OFF</code></p>
<p>The server option required for the component was not installed or was not linked with the server. Check the <code>V$OPTION</code> view as well as the install logs. Install the component or relink the server with the required option, and then rerun <code>catupgrd.sql</code>.</p>
</li>
<li>
<p><code>REMOVED</code></p>
<p>The component was not upgraded because it was removed from the database.</p>
</li>
<li>
<p><code>INVALID</code></p>
<p>Some objects for the component were invalid at the completion of the upgrade. If there were no errors during the component upgrade, then running <code>utlrp.sql</code> might change the status to <code>VALID</code> without rerunning the entire upgrade. Check the <code>DBA_REGISTRY</code> view after running <code>utlrp.sql</code>.</p>
</li>
<li>
<p><code>UPGRADING</code></p>
<p>The component upgrade did not complete. Resolve the problem and rerun <code>catupgrd.sql</code>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFGJCH">"About the Post-Upgrade Status Tool"</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDBAHFA"></a>
<div id="UPGRD52743" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">DBUA May Mark Invalid Components with an X Before Entire Upgrade is Done</h3>
<p>DBUA may mark invalid components with an <code>X</code> on the Upgrade Progress window as the upgrade is progressing. An invalid component could be re-validated after a recompile is performed. Please check the final component status on the Upgrade Result page in DBUA after <code>utlrp.sql</code> recompiles have been run.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BABHDDFE">"Understanding Component Status"</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCGHFJ"></a>
<div id="UPGRD12412" class="sect1">
<h2 class="sect1">Rerunning the Upgrade for Oracle Database</h2>
<p>You can rerun the upgrade with the <code>catupgrd.sql</code> script as described in the following steps.</p>
<p class="orderedlisttitle">To rerun the upgrade&nbsp;</p>
<ol>
<li>
<p>Shut down the database as follows:</p>
<pre>
SQL&gt; SHUTDOWN IMMEDIATE
</pre></li>
<li>
<p>Restart the database in <code>UPGRADE</code> mode:</p>
<pre>
SQL&gt; STARTUP UPGRADE
</pre></li>
<li>
<p>Set the system to spool results to a log file for later verification of success:</p>
<pre>
SQL&gt; SPOOL upgrade.log
</pre></li>
<li>
<p>Rerun <code>catupgrd.sql</code>:</p>
<pre>
SQL&gt; @catupgrd.sql
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can rerun the <code>catupgrd.sql</code> script as many times as necessary. The first time you run the script, there should be no error messages returned. If you rerun the script, then the <code>ORA-00001</code> message is displayed. You can safely ignore this message.</div>
</li>
<li>
<p>Rerun <code>utlu112s.sql</code>:</p>
<pre>
SQL&gt; @utlu112s.sql
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="i1012399"></a>
<div id="UPGRD12413" class="sect1">
<h2 class="sect1">Cancelling the Upgrade<a id="sthref224"></a> for Oracle Database</h2>
<p>If you completed the steps in <a href="#i1011949">"Backing Up Oracle Database for a Manual Upgrade"</a> to back up your database, then the easiest way to cancel the upgrade is to restore that backup as described in the following procedure.</p>
<p class="orderedlisttitle">To cancel the upgrade by restoring the previous backup&nbsp;</p>
<ol>
<li>
<p>Log in to the system as the owner of the Oracle home directory of the previous release.</p>
</li>
<li>
<p>Sign on to RMAN:</p>
<pre>
rman "target / nocatalog"
</pre></li>
<li>
<p>Issue the following RMAN commands:</p>
<pre>
STARTUP NOMOUNT
RUN
{
    RESTORE CONTROLFILE FROM '<span class="italic">save_controlfile_location</span>';
    ALTER DATABASE MOUNT;
    RESTORE DATABASE FROM TAG before_upgrade
    ALTER DATABASE OPEN RESETLOGS;
}
</pre></li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BABGEDJI"></a>
<div id="UPGRD12414" class="sect1">
<h2 class="sect1">About Upgrading an Oracle ASM Instance<a id="sthref226"></a></h2>
<p>The recommended practice for upgrading Oracle ASM is to upgrade an Oracle ASM instance with the Oracle Universal Installer (OUI) executable file that is located in the Oracle Grid Infrastructure home directory. OUI automatically defaults to upgrade mode when it detects an Oracle ASM instance at an earlier release level.</p>
<p>Oracle ASM Configuration Assistant enables you to upgrade an existing Oracle ASM instance to the current software level and upgrade an older Oracle ASM instance to the latest <a id="sthref227"></a>Oracle Grid Infrastructure home.</p>
<p>You can upgrade an Oracle ASM instance to an Oracle Restart 11<span class="italic">g</span> release 2 (11.2) configuration. The recommended practice is to upgrade an Oracle ASM instance with Oracle Universal Installer (OUI).</p>
<p>You can also perform a <a id="sthref228"></a>rolling upgrade to clustered Oracle ASM instances in environments running Oracle Database 11<span class="italic">g</span> or later.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OSTMG50000" href="../../server.112/e18951/asmca.htm#OSTMG50000"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for more information about upgrading and Oracle ASM instance with OUI</p>
</li>
<li>
<p><a class="olink OSTMG50000" href="../../server.112/e18951/asmca.htm#OSTMG50000"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for more information about upgrading an Oracle ASM instance with Oracle ASM Configuration Assistant</p>
</li>
<li>
<p><a class="olink OSTMG13650" href="../../server.112/e18951/asminst.htm#OSTMG13650"><span class="italic">Oracle Database Storage Administrator's Guide</span></a> for more information about upgrading an Oracle ASM instance in an Oracle Restart configuration with OUI</p>
</li>
<li>
<p><a class="olink CWGEN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CWGEN"><span class="italic">Oracle Grid Infrastructure Installation Guide</span></a> for step-by-step instructions about performing a rolling upgrade of Oracle ASM</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1653">
<tr>
<td class="cellalignment1660">
<table class="cellalignment1658">
<tr>
<td class="cellalignment1657"><a href="preup.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1657"><a href="afterup.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1662">
<table class="cellalignment1656">
<tr>
<td class="cellalignment1657"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1657"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1657"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1657"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1657"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1657"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
