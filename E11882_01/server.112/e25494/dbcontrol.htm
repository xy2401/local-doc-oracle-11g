<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Managing Oracle Enterprise Manager Database Control</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1055" />
<meta name="dcterms.created" content="2015-05-05T8:27:34Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Administrator's Guide" />
<meta name="dcterms.identifier" content="E25494-07" />
<meta name="dcterms.isVersionOf" content="ADMIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="diag.htm" title="Previous" type="text/html" />
<link rel="Next" href="part2.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25494.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">17/49</span> <!-- End Header -->
<div id="ADMIN13401" class="chapter"><a id="CHDBJJAH"></a>
<h1 class="chapter"><span class="secnum">10</span> Managing Oracle Enterprise Manager Database Control</h1>
<p>In this chapter:</p>
<ul>
<li>
<p><a href="#CIHBIDBJ">Database Control Overview</a></p>
</li>
<li>
<p><a href="#BEJJBJAA">Configuring Database Control During and After Installation</a></p>
</li>
<li>
<p><a href="#CIHFCEFF">Administering Database Control</a></p>
</li>
<li>
<p><a href="#CIHDDHBF">Managing Database Control in an Oracle RAC Environment</a></p>
</li>
<li>
<p><a href="#BEJGJBDI">Deleting and Creating Database Control Objects</a></p>
</li>
<li>
<p><a href="#CHDEBFBD">EMCA Troubleshooting Tips</a></p>
</li>
</ul>
<a id="CIHBIDBJ"></a>
<div id="ADMIN13402" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Database Control Overview</h2>
<p>This chapter describes the functionality and administration of Oracle Enterprise Manager Database Control (Database Control), the Web-based interface and primary tool for managing an Oracle database. Using Database Control, you can perform administrative tasks such as creating schema objects (tables, views, indexes, and so on), managing user security, managing database memory and storage, backing up and recovering your database, and importing and exporting data. You can also view performance and status information about your database.</p>
<p>After you have installed the Oracle Database software, created or upgraded a database, and configured the network, you can use Database Control to manage your database. Database Control also provides an interface for both performance advisors and Oracle utilities such as SQL*Loader and Recovery Manager (RMAN).</p>
<p>Oracle also offers separately licensed Oracle Enterprise Manager management packs, management plug-ins, and other products that you can purchase to enhance the capabilities of Oracle Enterprise Manager in specific environments.</p>
<div id="ADMIN13403" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1186"></a>
<h3 class="sect2">Understanding the Enterprise Manager Directories</h3>
<p>When you install Oracle Database, you also install Database Control by default. As a result, the Oracle Database installation procedure installs a set of Enterprise Manager directories and files into the <code dir="ltr">$ORACLE_HOME</code> directory.</p>
<p>In particular, the <code dir="ltr">emctl</code> commands required to control Database Control are installed into the <code dir="ltr">$ORACLE_HOME/bin</code> directory.</p>
<p>The Management Agent and Management Service support files are installed in two locations in an installation of Oracle Database:</p>
<ul>
<li>
<p>Files that are common and shared among all instances of the database are stored in the following directory:</p>
<ul>
<li>
<p><code dir="ltr">$ORACLE_HOME/sysman</code></p>
<p>For example, the administration files, which define the supported target types and the scripts used to perform Management Agent configuration tasks are stored in the <code dir="ltr">$ORACLE_HOME</code><code dir="ltr">/sysman/admin</code> directory</p>
</li>
</ul>
</li>
<li>
<p>Files that are unique to each instance of the database are stored in the following directory:</p>
<ul>
<li>
<p><code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code><code dir="ltr">/</code> (for a single-instance database)</p>
</li>
<li>
<p><code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">nodename_dbuniquename</span></code>/ (for an Oracle Real Applications Cluster (Oracle RAC) database)</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In Oracle Database 10<span class="italic">g</span>, files that are unique to each instance of the database are stored in following directory of the Oracle Database 10<span class="italic">g</span> home:
<ul>
<li>
<p><code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">hostname_sid</span></code><code dir="ltr">/</code> (for a single-instance database)</p>
</li>
<li>
<p><code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">nodename_sid</span></code><code dir="ltr">/</code> (for an Oracle RAC database)</p>
</li>
</ul>
</div>
</li>
</ul>
</li>
</ul>
<p>Throughout the rest of this chapter, <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code><code dir="ltr">/</code> and <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">nodename_dbuniquename</span></code> may be used interchangeably. (For release 10<span class="italic">g</span> of the database, the directories are <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">hostname_sid</span></code><code dir="ltr">/</code> and <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">nodename_sid</span></code><code dir="ltr">/</code>.) Both paths refer to the same concept: the Enterprise Manager directory for the specific database instance. The difference is that <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code><code dir="ltr">/</code> is used for single-instance databases, while <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">nodename_dbuniquename</span></code><span class="italic">/</span> is used for cluster (Oracle RAC) databases. In cluster databases, nodename refers to the public name of the node, as specified during Cluster Ready Services (CRS) configuration for cluster environments.</p>
<p>For example, if the database host name is <code dir="ltr">mgmt1.example.com</code> and the system identifier for the database name is <code dir="ltr">db11</code>, the log files for the Management Agent and Management Service for that instance are installed in the following directory:</p>
<p><code dir="ltr">$ORACLE_HOME/mgmt1.example.com_db11/sysman/log/</code></p>
<p>If a <code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code> directory does not exist in the Oracle home directory, then Database Control was never configured for the database instance. Note that in Oracle Database Release 10<span class="italic">g</span>, the directory is <code dir="ltr"><span class="codeinlineitalic">hostname_sid</span></code>.</p>
<p>In addition, the files required to deploy the Database Control as a J2EE application are installed into the <code dir="ltr">$ORACLE_HOME/oc4j/j2ee/</code> directory structure. Database Control is a J2EE application that is deployed using the standalone version of Oracle Application Server Containers for J2EE (OC4J). The <code dir="ltr">OC4J_DBConsole</code> directory contains the template files that are used to create database-specific deployment directories for each Database Control instance deployed in the Oracle home.</p>
<p>The installation and configuration files are stored in the <code dir="ltr">$ORACLE_HOME</code> directory in the following sub-directories:</p>
<ul>
<li>
<p><code dir="ltr">cfgtoollogs/dbua</code></p>
</li>
<li>
<p><code dir="ltr">cfgtoollogs/rconfig</code></p>
</li>
<li>
<p><code dir="ltr">cfgtoollogs/dbca</code></p>
</li>
<li>
<p><code dir="ltr">cfgtoollogs/emca</code></p>
</li>
</ul>
<p><a href="#CIHBCAGB">Figure 10-1</a> summarizes the location of the important Enterprise Manager directories in a typical Oracle home directory for Oracle Database 11<span class="italic">g</span> Release 2 or later. Note that references to <code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code> are for single-instance databases; cluster databases have paths of the form <code dir="ltr"><span class="codeinlineitalic">nodename_dbuniquename</span></code>.</p>
<div id="ADMIN13404" class="figure">
<p class="titleinfigure"><a id="CIHBCAGB"></a>Figure 10-1 Directory Structure in the Management Service Home for Release 11g or Later</p>
<img width="650" height="150" src="img/admin085.gif" alt="Description of Figure 10-1 follows" /><br />
<a id="sthref1187" href="img_text/admin085.htm">Description of "Figure 10-1 Directory Structure in the Management Service Home for Release 11g or Later"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Similarly, <a href="#CHDHADHD">Figure 10-2</a> displays the directory structure of Enterprise Manager directories in the Oracle home directory for Oracle Database Release 10<span class="italic">g</span>.</p>
<div id="ADMIN13405" class="figure">
<p class="titleinfigure"><a id="CHDHADHD"></a>Figure 10-2 Directory Structure in the Management Home for Release 10g</p>
<img width="585" height="150" src="img/admin086.gif" alt="Description of Figure 10-2 follows" /><br />
<a id="sthref1188" href="img_text/admin086.htm">Description of "Figure 10-2 Directory Structure in the Management Home for Release 10g"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BEJJBJAA"></a>
<div id="ADMIN13406" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Database Control During and After Installation</h2>
<p>The following sections describe how Database Control is configured during installation, and how you can configure Database Control after installation.</p>
<div id="ADMIN13407" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1189"></a>
<h3 class="sect2">Overview of Configuration Options</h3>
<p>The following are the products, tools, and utilities you, as a database administrator, can use to configure the Database Control environment:</p>
<ul>
<li>
<p>Oracle Universal Installer</p>
<p>Oracle Universal Installer (OUI) is a utility that installs your Oracle software and options. It can automatically start Oracle Database Configuration Assistant to install a database.</p>
</li>
<li>
<p>DBCA</p>
<p>Oracle Database Configuration Assistant (DBCA) is a utility that creates a database from templates that are supplied by Oracle. It also enables you to create your own database by copying a preconfigured seed database, thus saving the time and effort needed to generate and customize a new database.</p>
</li>
<li>
<p>Database Upgrade Assistant</p>
<p>The Database Upgrade Assistant is a tool that guides you through the upgrade of your existing database to a new Oracle Database release.</p>
</li>
<li>
<p>Net Configuration Assistant</p>
<p>Net Configuration Assistant (NETCA) is a utility that enables you to configure listeners and naming methods, which are critical components of the Oracle Database network.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="ADMIN13408" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1190"></a>
<h3 class="sect2">Configuring Database Control During Installation</h3>
<p>If you create a database while installing Oracle Database, you have the option of configuring your database so it can be managed by Oracle Enterprise Manager Grid Control Console or by Database Control Console.</p>
<p>To select Grid Control Console as your management option, the Oracle Management Service must be installed on a network host. In addition, the Oracle Management Agent must be installed on the host where you are installing the database. Otherwise, the Grid Control Console option is unavailable and you must instead choose to manage your database with Database Control.</p>
<p>For most of the Oracle installation types, you must choose either Database Control or Grid Control as your management option when you create a database during the installation.</p>
<p>However, if you create a database using one of the following methods, you can choose not to configure Database Control:</p>
<ul>
<li>
<p>Choosing the Advanced database configuration option during an Enterprise or Standard Edition installation</p>
</li>
<li>
<p>Running DBCA after the installation</p>
</li>
</ul>
<p>Note that if you do not configure Database Control during installation of an Oracle Database 11<span class="italic">g</span> instance, a <code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code> directory will not be created in the resulting Oracle home directory. When installing a release 10<span class="italic">g</span> database, a hostname_sid directory will not be created in the resulting Oracle home directory.</p>
</div>
<!-- class="sect2" -->
<div id="ADMIN13409" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1191"></a>
<h3 class="sect2">Configuring Database Control with DBCA</h3>
<p>The primary method for configuring an existing Oracle database so it can be managed with Database Control is to use DBCA. You can use DBCA to create a new database or to reconfigure an existing database.</p>
<div class="infobox-note">
<p class="notep1">See Also:</p>
"Installing Oracle Software and Building the Database" in the <span class="italic">Oracle Database 2 Day DBA</span> book for more information about using DBCA to create a new database instance, and <span class="italic">Oracle Database 2 Day + Real Application Clusters Guide</span> for Oracle RAC examples using DBCA.</div>
<p>To use DBCA to reconfigure your database so it can be managed with Database Control:</p>
<ol>
<li>
<p>Log in to the database host as a member of the administrative group that is authorized to install Oracle software and create and run the database.</p>
</li>
<li>
<p>Start DBCA, change directory to the <code dir="ltr">$ORACLE_HOME</code><code dir="ltr">/bin</code> directory, then enter the following command:</p>
<pre dir="ltr">
$ ./dbca

</pre>
<p>The DBCA Welcome page appears.</p>
</li>
<li>
<p>Advance to the Operations page and select <span class="bold">Configure Database Options</span>.</p>
</li>
<li>
<p>Advance to the Database page and select the database that you want to configure.</p>
</li>
<li>
<p>Advance to the Management Options page and select the following options:</p>
<ul>
<li>
<p><span class="bold">Configure the Database with Enterprise Manager</span></p>
</li>
<li>
<p><span class="bold">Use Database Control for Database Management</span></p>
</li>
</ul>
</li>
<li>
<p>Select any desired options for enabling e-mail notifications and enabling daily backups.</p>
<p>For more information about Enterprise Manager notifications and daily backups, click <span class="bold">Help</span> on the Management Options page.</p>
</li>
<li>
<p>Advance until the Finish button is available.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span> to reconfigure the database to use Database Control.</p>
<p>After DBCA reconfigures the database, a new subdirectory appears in the Oracle home. In release 11<span class="italic">g</span> of the database and later, this directory is named using the following format and contains Database Control configuration and state files specific to the database you just configured:</p>
<p><code dir="ltr"><span class="codeinlineitalic">hostname_dbuniquename</span></code></p>
<p>Note that for cluster databases, the directories are named:</p>
<p><code dir="ltr"><span class="codeinlineitalic">nodename_dbuniquename</span></code>.</p>
<p>In Oracle Database 10<span class="italic">g</span>, the new subdirectory is named:</p>
<p><code dir="ltr"><span class="codeinlineitalic">hostname_sid</span></code></p>
<p>Likewise in Oracle Database 10<span class="italic">g</span>, for cluster databases the directories are named:</p>
<p><code dir="ltr"><span class="codeinlineitalic">nodename_sid</span></code></p>
<p>For example:</p>
<pre dir="ltr">
mycluster1.example.com_myNewDB
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<div id="ADMIN13410" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1192"></a>
<h3 class="sect2">Configuring Database Control Using EMCA</h3>
<p>When you use DBCA to configure Oracle 11g Release 2 (11.2), DBCA provides a graphical user interface to help you select Database Control options and to configure other aspects of your database.</p>
<p>However, to use the operating system command line to configure Database Control, you can use the Enterprise Manager Configuration Assistant (EMCA).</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you configure Database Control using EMCA, the database may become unavailable and users may not be able to connect to the database or perform operations on the database.</div>
<p>To configure Database Control with EMCA:</p>
<ol>
<li>
<p>Set the <code dir="ltr">ORACLE_HOME</code> environment variable to specify the Oracle home for the database that you want to manage.</p>
</li>
<li>
<p>Change directory to the <code dir="ltr">$ORACLE_HOME</code><code dir="ltr">/bin</code> directory.</p>
</li>
<li>
<p>Start EMCA by entering the following command with any of the optional command-line arguments shown in <a href="#CIHHAIDJ">Table 10-1, "EMCA Command-Line Operations"</a>:</p>
<pre dir="ltr">
$ ./emca

</pre>
<p>Depending on the arguments that you include on the EMCA command line, EMCA prompts you for the information required to configure Database Control.</p>
<p>For example, enter the following command to configure Database Control so that it will perform automatic daily backups of your database:</p>
<pre dir="ltr">
$ ./emca -config dbcontrol db -backup

</pre></li>
</ol>
<p>EMCA commands are in the following form:</p>
<p><code dir="ltr">emca [operation] [mode] [flags] [parameters]</code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
To configure Database Control for single-instance database using Oracle Automatica Storage Management (ASM), no extra parameters need to be passed along with the EMCA command. Run the following command to configure the Database Control which will automatically detect the Oracle ASM instance:
<pre dir="ltr">
$ emca -config dbcontrol db -repos create
</pre></div>
<p><a href="#CIHHAIDJ">Table 10-1</a> describes the valid execution operations and modes and lists the optional parameters in brackets. <a href="#CIHGBIGF">Table 10-2</a> discusses the flags and their behavior and <a href="#CIHCIAGE">Table 10-3</a> defines the optional parameters in detail. EMCA parameters are in the form <code dir="ltr">[</code><code dir="ltr"><span class="codeinlineitalic">-parameterName parameterValue</span></code><code dir="ltr">].</code> Multiple parameters can be used in combination at the command line.</p>
<div id="ADMIN13411" class="tblformal">
<p class="titleintable"><a id="sthref1193"></a><a id="CIHHAIDJ"></a>Table 10-1 <a id="sthref1194"></a>EMCA Command-Line Operations</p>
<table class="cellalignment1338" title="EMCA Command-Line Operations" summary="This table explains EMCA command-line operations." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t6">Command</th>
<th class="cellalignment1334" id="r1c2-t6">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -h | --h | -help | --help</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t6 r1c2-t6">
<p>Use this option to display help messages for the EMCA utility. The options described in <a href="#CIHHAIDJ">Table 10-1</a>, <a href="#CIHGBIGF">Table 10-2</a>, and <a href="#CIHCIAGE">Table 10-3</a>, and the valid parameters you may include are listed.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca &ndash;version</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t6 r1c2-t6">
<p>Prints the version information associated with EMCA.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -config dbcontrol db [-repos (create | recreate)] [-cluster] [-silent] [-backup] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t6 r1c2-t6">
<p>Configures Database Control for a database. Options include creating (or re-creating) the Database Control repository, configuring automatic backups, and performing these operations on a cluster database.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -config centralAgent (db | asm) [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t6 r1c2-t6">
<p>Configures central agent management for a database or an Oracle ASM instance. Options include performing this operation on a cluster environment. This operation will configure the database so that it can be centrally managed by the Oracle Enterprise Manager Grid Control Console. To use this option, you must have previously installed the Oracle Management Service component of Enterprise Manager on a network host. In addition, the Oracle Management Agent must be installed on the host on which you are running the database.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -config all db [-repos (create | recreate)] [-cluster] [-silent] [-backup] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r6c1-t6 r1c2-t6">
<p>Configures both Database Control and central agent management for a database. The possible configuration options are similar to those described above.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -deconfig dbcontrol db [-repos drop] [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r7c1-t6 r1c2-t6">
<p>Deconfigures Database Control for a database. Options include dropping the Database Control repository and performing these operations on a cluster database. For example, you might use this command to remove the Database Control configuration from a database you are planning to delete. In such a scenario, remove the Database Control configuration before physically deleting the database. This operation does not remove the actual database or its data files.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -deconfig centralAgent (db | asm) [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r8c1-t6 r1c2-t6">
<p>Deconfigures central agent management for a database or an Oracle ASM instance. Options include performing this operation on a cluster environment. For example, you might use this command to remove the central agent management configuration from a database you are planning to delete. In such a scenario, remove the central agent management configuration before physically deleting the database. This operation does not remove the actual database or its data files.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r9c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -deconfig all db [-repos drop] [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r9c1-t6 r1c2-t6">
<p>Deconfigures both Database Control and central agent management for a database. The possible deconfiguration options are similar to those described above.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r10c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -addNode (db | asm) [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r10c1-t6 r1c2-t6">
<p>Configures Enterprise Manager for a new cluster instance of a database or ASM storage. For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>. This option applies only to Release 11<span class="italic">g</span>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r11c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -deleteNode (db | asm) [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r11c1-t6 r1c2-t6">
<p>Deconfigures Enterprise Manager for a node being deleted. For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>. This option applies only to Oracle Database Release 11<span class="italic">g</span>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r12c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -addInst (db | asm) [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r12c1-t6 r1c2-t6">
<p>Configures Enterprise Manager for a newly added cluster instance of an administrator-managed database or Oracle ASM storage. This parameter takes a SID for the instance being added. For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r13c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -deleteInst (db | asm) [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r13c1-t6 r1c2-t6">
<p>Deconfigures Enterprise Manager for a newly deleted cluster instance of an administrator-managed database or Oracle ASM storage. This parameter takes a SID for the instance being deleted. This is discussed further below, in <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r14c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -reconfig ports [-cluster] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r14c1-t6 r1c2-t6">
<p>Explicitly reassigns Database Control ports. Options include performing this operation on a cluster environment. For more information, see <a href="#BEJJIBJB">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r15c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -reconfig dbcontrol -cluster [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r15c1-t6 r1c2-t6">
<p>Reconfigures Database Control deployment for a cluster database. Note that this command must be used with the <code dir="ltr">-cluster</code> option. For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r16c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -displayConfig dbcontrol -cluster [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r16c1-t6 r1c2-t6">
<p>Displays information about the current deployment configuration of Database Control in a cluster environment. Note that this command must be used with the <code dir="ltr">-cluster</code> option. For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r17c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -upgrade (db | asm | db_asm) [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r17c1-t6 r1c2-t6">
<p>Upgrades the configuration of an earlier release of Enterprise Manager to the current release. This operation can be performed for Oracle Database, Oracle ASM, or Oracle Database and Oracle ASM instances together simultaneously. This does not upgrade the actual database or Oracle ASM instances, nor does it upgrade the Enterprise Manager software. Instead, it upgrades the configuration files for the specified instance so that they are compatible with the current version of the Enterprise Manager software. EMCA will attempt to upgrade all instances of the specified database or Oracle ASM target, or both, on the host, across all Oracle homes (because it is likely that certain target properties, such as the listener port or Oracle home, have changed).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r18c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -restore (db | asm | db_asm) [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r18c1-t6 r1c2-t6">
<p>Restores the current version of Enterprise Manager configuration to an earlier version. This is the inverse of the <code dir="ltr">-upgrade</code> option (and will reverse any changes that result from this operation).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r19c1-t6" headers="r1c1-t6">
<p><code dir="ltr">emca -migrate -from dbcontrol -to centralAgent [-repos drop] [-cluster] [-silent] [parameters]</code></p>
</td>
<td class="cellalignment1335" headers="r19c1-t6 r1c2-t6">
<p>Migrates the Enterprise Manager configuration from Database Control to Central Agent.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ADMIN13412" class="tblformal">
<p class="titleintable"><a id="sthref1195"></a><a id="CIHGBIGF"></a>Table 10-2 EMCA Command-Line Flags</p>
<table class="cellalignment1338" title="EMCA Command-Line Flags" summary="This table explains EMCA command-line flags." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t7">Flag</th>
<th class="cellalignment1334" id="r1c2-t7">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t7" headers="r1c1-t7">
<p><code dir="ltr">db</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t7 r1c2-t7">
<p>Performs the operation for a database (including cluster databases). Use this option for databases that use Oracle ASM to store the data files. If a database is using Oracle ASM, all the configuration operations and modes described above (except for <code dir="ltr">-upgrade</code> and <code dir="ltr">-restore</code>) will detect this automatically and apply the changes to both the database and Oracle ASM instances.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t7" headers="r1c1-t7">
<p><code dir="ltr">asm</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t7 r1c2-t7">
<p>Performs the operation for an Oracle ASM-only instance (including cluster Oracle ASM instances).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t7" headers="r1c1-t7">
<p><code dir="ltr">db_asm</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t7 r1c2-t7">
<p>This flag can only be used in <code dir="ltr">-upgrade</code> and <code dir="ltr">-restore</code> mode. Performs the upgrade or restore operation for an Oracle Database and an Oracle ASM instance together. Database and Oracle ASM instances may be upgraded or restored separately (that is, upgrading an Oracle ASM instance does not require upgrading the database instances it services). Therefore, the Enterprise Manager configuration can be upgraded or restored separately for a database and its respective Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t7" headers="r1c1-t7">
<p><code dir="ltr">-repos create</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t7 r1c2-t7">
<p>Creates a new Database Control management repository.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t7" headers="r1c1-t7">
<p><code dir="ltr">-repos drop</code></p>
</td>
<td class="cellalignment1335" headers="r6c1-t7 r1c2-t7">
<p>Drops the current Database Control management repository.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t7" headers="r1c1-t7">
<p><code dir="ltr">-repos recreate</code></p>
</td>
<td class="cellalignment1335" headers="r7c1-t7 r1c2-t7">
<p>Drops the current Database Control management repository and then re-creates a new one.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t7" headers="r1c1-t7">
<p><code dir="ltr">-cluster</code></p>
</td>
<td class="cellalignment1335" headers="r8c1-t7 r1c2-t7">
<p>Performs the operation for a cluster database or Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r9c1-t7" headers="r1c1-t7">
<p><code dir="ltr">-silent</code></p>
</td>
<td class="cellalignment1335" headers="r9c1-t7 r1c2-t7">
<p>Performs the operation without prompting for additional information. If this mode is specified, all the required parameters must be entered at the command line or specified in an input file using the <code dir="ltr">&ndash;respFile</code> argument. You can view a list of the available parameters by entering <code dir="ltr">emca -help</code> at the command line.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r10c1-t7" headers="r1c1-t7">
<p><code dir="ltr">-backup</code></p>
</td>
<td class="cellalignment1335" headers="r10c1-t7 r1c2-t7">
<p>Configures automatic backup for a database. EMCA will prompt for daily automatic backup options. The default Enterprise Manager settings will be used to backup the database files.</p>
<p><span class="bold">Note:</span> If you use this option, EMCA will use the value of the <code dir="ltr">db_recovery_file_dest</code> initialization parameter to identify the flashback recovery area for the automated backups. If that parameter is not set, EMCA will generate an error. You can modify these settings later using the Maintenance page in Database Control. For more information, see the Database Control online help.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ADMIN13413" class="tblformal">
<p class="titleintable"><a id="sthref1196"></a><a id="CIHCIAGE"></a>Table 10-3 EMCA Command-Line Parameters</p>
<table class="cellalignment1338" title="EMCA Command-Line Parameters" summary="This table explains EMCA command-line parameters." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t8">Parameter</th>
<th class="cellalignment1334" id="r1c2-t8">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-respFile</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t8 r1c2-t8">
<p>Specifies the path of an input file listing parameters for EMCA to use while performing its configuration operation. For more information, see <a href="#BEJFAFAA">"Using an Input File for EMCA Parameters"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-SID</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t8 r1c2-t8">
<p>Database system identifier.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-PORT</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t8 r1c2-t8">
<p>Port number for the listener servicing the database.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ORACLE_HOME</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t8 r1c2-t8">
<p>Database Oracle home, as an absolute path.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ORACLE_HOSTNAME</code></p>
</td>
<td class="cellalignment1335" headers="r6c1-t8 r1c2-t8">
<p>Local database hostname.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-LISTENER_OH</code></p>
</td>
<td class="cellalignment1335" headers="r7c1-t8 r1c2-t8">
<p>Oracle home from which the listener is running. If the listener is running from an Oracle home other than the one on which the database is running, the parameter <code dir="ltr">LISTENER_OH</code> must be specified.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-HOST_USER</code></p>
</td>
<td class="cellalignment1335" headers="r8c1-t8 r1c2-t8">
<p>Host system user name (for automatic backup).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r9c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-HOST_USER_PWD</code></p>
</td>
<td class="cellalignment1335" headers="r9c1-t8 r1c2-t8">
<p>Host system user password (for automatic backup).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r10c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-BACKUP_SCHEDULE</code></p>
</td>
<td class="cellalignment1335" headers="r10c1-t8 r1c2-t8">
<p>Schedule in the form of "HH:MM" for daily automatic backups.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r11c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-EMAIL_ADDRESS</code></p>
</td>
<td class="cellalignment1335" headers="r11c1-t8 r1c2-t8">
<p>E-mail address for notifications.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r12c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-MAIL_SERVER_NAME</code></p>
</td>
<td class="cellalignment1335" headers="r12c1-t8 r1c2-t8">
<p>Outgoing Mail (SMTP) server for notifications.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r13c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ASM_OH</code></p>
</td>
<td class="cellalignment1335" headers="r13c1-t8 r1c2-t8">
<p>Oracle ASM Oracle home.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r14c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ASM_SID</code></p>
</td>
<td class="cellalignment1335" headers="r14c1-t8 r1c2-t8">
<p>System identifier for Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r15c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ASM_PORT</code></p>
</td>
<td class="cellalignment1335" headers="r15c1-t8 r1c2-t8">
<p>Port number for the listener servicing the Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r16c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ASM_USER_ROLE</code></p>
</td>
<td class="cellalignment1335" headers="r16c1-t8 r1c2-t8">
<p>User role for connecting to the Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r17c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ASM_USER_NAME</code></p>
</td>
<td class="cellalignment1335" headers="r17c1-t8 r1c2-t8">
<p>User name for connecting to the Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r18c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-ASM_USER_PWD</code></p>
</td>
<td class="cellalignment1335" headers="r18c1-t8 r1c2-t8">
<p>Password for connecting to the Oracle ASM instance.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r19c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-DBSNMP_PWD</code></p>
</td>
<td class="cellalignment1335" headers="r19c1-t8 r1c2-t8">
<p>Password for the DBSNMP user.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r20c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-SYSMAN_PWD</code></p>
</td>
<td class="cellalignment1335" headers="r20c1-t8 r1c2-t8">
<p>Password for the SYSMAN user.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r21c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-SYS_PWD</code></p>
</td>
<td class="cellalignment1335" headers="r21c1-t8 r1c2-t8">
<p>Password for the SYS user.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r22c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-SRC_OH</code></p>
</td>
<td class="cellalignment1335" headers="r22c1-t8 r1c2-t8">
<p>Oracle home of the database with Enterprise Manager configuration to be upgraded or restored.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r23c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-DBCONTROL_HTTP_PORT</code></p>
</td>
<td class="cellalignment1335" headers="r23c1-t8 r1c2-t8">
<p>Use this parameter to specify the port you use to display the Database Control Console in your Web browser. For more information, see <a href="#BEJJIBJB">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r24c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-AGENT_PORT</code></p>
</td>
<td class="cellalignment1335" headers="r24c1-t8 r1c2-t8">
<p>Use this parameter to specify the Management Agent port for Database Control. For more information, see <a href="#BEJJIBJB">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r25c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-RMI_PORT</code></p>
</td>
<td class="cellalignment1335" headers="r25c1-t8 r1c2-t8">
<p>Use this parameter to specify the RMI port for Database Control. For more information, see <a href="#BEJJIBJB">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r26c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-JMS_PORT</code></p>
</td>
<td class="cellalignment1335" headers="r26c1-t8 r1c2-t8">
<p>Use this parameter to specify the JMS port for Database Control. For more information, see <a href="#BEJJIBJB">"Specifying the Ports Used by Database Control"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r27c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-CLUSTER_NAME</code></p>
</td>
<td class="cellalignment1335" headers="r27c1-t8 r1c2-t8">
<p>Cluster name (for cluster databases).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r28c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-DB_UNIQUE_NAME</code></p>
</td>
<td class="cellalignment1335" headers="r28c1-t8 r1c2-t8">
<p>Database unique name (for cluster databases).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r29c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-SERVICE_NAME</code></p>
</td>
<td class="cellalignment1335" headers="r29c1-t8 r1c2-t8">
<p>Database service name (for cluster databases).</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r30c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-EM_NODE</code></p>
</td>
<td class="cellalignment1335" headers="r30c1-t8 r1c2-t8">
<p>Node from which Database Control console is to be run (for cluster databases). For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r31c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-EM_NODE_LIST</code></p>
</td>
<td class="cellalignment1335" headers="r31c1-t8 r1c2-t8">
<p>Comma-delimited list of NODEs for agent-only configurations, uploading data to -EM_NODE. For more information, see <a href="#CIHCHHJJ">"Using EMCA With Oracle RAC"</a>.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r32c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-EM_SWLIB_STAGE_LOC</code></p>
</td>
<td class="cellalignment1335" headers="r32c1-t8 r1c2-t8">
<p>Software library location.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r33c1-t8" headers="r1c1-t8">
<p><code dir="ltr">-PORTS_FILE</code></p>
</td>
<td class="cellalignment1335" headers="r33c1-t8 r1c2-t8">
<p>Path to a static file specifying the ports to use. The default value is: <code dir="ltr">${ORACLE_HOME}/install/staticports.ini</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="BEJFAFAA"></a>
<div id="ADMIN13414" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using an Input File for EMCA Parameters</h3>
<p>Instead of answering a series of prompts when you run EMCA, you can use the <code dir="ltr">-respFile</code> argument to specify an input file. The input file you create must be in a format similar to the following example:</p>
<pre dir="ltr">
PORT=1521
SID=DB
DBSNMP_PWD=xpE234D
SYSMAN_PWD=KDOdk432
</pre>
<p>After you create an EMCA input file, you can use it on the command line as follows:</p>
<pre dir="ltr">
$ ./emca -config dbcontrol db -respFile <span class="italic">input_file_path</span>
</pre>
<p>For example, to configure the Database Control to perform daily backups and create the Database Control Management Repository, create an input file similar to the one shown in <a href="#BEJFHEHE">Example 10-1</a> and enter the following command at the operating system prompt:</p>
<pre dir="ltr">
$ ./emca -config dbcontrol db -repos create -backup -respFile <span class="italic">input_file_path</span>
</pre>
<div id="ADMIN13415" class="example">
<p class="titleinexample"><a id="BEJFHEHE"></a>Example 10-1 <a id="sthref1197"></a>Sample EMCA Input File</p>
<pre dir="ltr">
PORT=1521
SID=DB
DBSNMP_PWD=dow3l224
SYSMAN_PWD=squN3243
HOST_USER=johnson
HOST_USER_PWD=diTf32of
SYS_PWD=qlKj4352
BACKUP_SCHEDULE=06:30
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<a id="BEJJIBJB"></a>
<div id="ADMIN13416" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Specifying the Ports Used by Database Control</h3>
<p>When you initially install Oracle Database or configure Database Control with EMCA, Database Control uses a set of default system ports. For example, by default, you access Database Control using port 1158, as shown in the following example:</p>
<pre dir="ltr">
http://<span class="italic">host</span>.<span class="italic">domain</span>:1158/em
</pre>
<p>This is the default port assigned to Database Control by the Internet Assigned Numbers Authority (IANA). Likewise, the default Database Control Agent port, as assigned by the IANA, is 3938.</p>
<p>To use ports other than the default ports, use the following EMCA command-line arguments when you initially configure the Database Control with EMCA. Alternatively, you can explicitly assign ports after configuring Database Control using the following command:</p>
<pre dir="ltr">
$ emca -reconfig ports [-cluster]
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can also use the following EMCA command-line arguments to configure Database Control after you have installed and configured Oracle Database.</div>
<p>The following list summarizes the EMCA command-line arguments that control the standard Database Control port assignments:</p>
<ul>
<li>
<p><code dir="ltr">-DBCONTROL_HTTP_PORT</code> <code dir="ltr"><span class="codeinlineitalic">port_number</span></code></p>
<p>This port is used in the Database Control Console URL. For example, if you set this port to 5570, you can then use the following URL to display the Database Control Console:</p>
<pre dir="ltr">
http://<span class="italic">host</span>.<span class="italic">domain</span>:5570/em
</pre></li>
<li>
<p><code dir="ltr">-RMI_PORT</code> <code dir="ltr"><span class="codeinlineitalic">port_number</span></code></p>
<p>This port is used by the <a id="sthref1198"></a>Remote Method Invocation (RMI) system, which is part of the J2EE software required by Database Control. The default port can be changed if you want to configure a specific port for Database Control. When a port other than the default port (1521) is used, use the <code dir="ltr">-RMI_PORT</code> or <code dir="ltr">-JMS_PORT</code> options along with the <code dir="ltr">emca reconfig</code> command.</p>
</li>
<li>
<p><code dir="ltr">-JMS_PORT</code> <code dir="ltr"><span class="codeinlineitalic">port_number</span></code></p>
<p>This port is used by the OC4J <a id="sthref1199"></a>Java Message Service (JMS), which is part of the J2EE software required by Database Control. The default port can be changed if the user wants to configure a specific port for Database Control. When a port other than the default port (1521) is used, use the <code dir="ltr">-RMI_PORT</code> or <code dir="ltr">-JMS_PORT</code> options along with the <code dir="ltr">emca reconfig</code> command.</p>
</li>
<li>
<p><code dir="ltr">-AGENT_PORT</code> <code dir="ltr"><span class="codeinlineitalic">port_number</span></code></p>
<p>This port is used by the Database Control Management Agent, which is monitoring and administering the database for the Database Control.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CIHCHHJJ"></a>
<div id="ADMIN13417" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using EMCA With Oracle RAC</h3>
<p>Each EMCA command can be used in Oracle RAC environments, and certain commands are only applicable in cluster setups. To perform cluster commands using EMCA, use the cluster flag that is available in almost every EMCA operational mode.</p>
<p>When you use EMCA to configure Database Control for Oracle RAC, you configure the Database Control for each instance in the cluster. However, by default the Database Control Console will only start on the local node. On every other node of the cluster, only the Enterprise Manager agent will start. This is because the Database Control Console opens several connections to the database. If an instance of the console is running on every host in the cluster, then you may easily exceed the maximum number of permitted open connections on a 32-node or 64-node environment.</p>
<p>To remedy this situation, the Database Control is started only on the local node. On every other node, the commands <code dir="ltr">emctl start dbconsole</code> and <code dir="ltr">emctl stop dbconsole</code> only start and stop the agent. Each of the remote agents will upload their respective data to the console running on the local node, from which you can monitor and manage all the targets in the cluster. The following subdirectory is created on each instance of the Oracle RAC database where <code dir="ltr"><span class="codeinlineitalic">nodename</span></code> is the name of a node in the cluster, and <code dir="ltr"><span class="codeinlineitalic">dbuniquename</span></code> is the database instance name of the database for release 11<span class="italic">g</span> and later:</p>
<pre dir="ltr">
$ORACLE_HOME/<span class="italic">nodename_dbuniquename</span>
</pre>
<p>For Oracle Database release 10<span class="italic">g</span>, <code dir="ltr"><span class="codeinlineitalic">nodename</span></code> is the name of the node in the cluster and <code dir="ltr"><span class="codeinlineitalic">sid</span></code> is the database instance name:</p>
<pre dir="ltr">
$ORACLE_HOME/<span class="italic">nodename_sid</span>
</pre>
<p>However, note that if you upgrade an existing Oracle RAC database configured with Database Control to the current release, then the existing Database Control configuration is retained. The existing Database Control has a Database Control running on each cluster node. The console will still be started on each individual node.</p>
<p>To modify the existing configuration in a release 11<span class="italic">g</span> and later database, use the following command where <code dir="ltr"><span class="codeinlineitalic">nodename</span></code> is the public name of the node and <code dir="ltr"><span class="codeinlineitalic">node_list</span></code> is a comma-delimited list of nodes where the database is configured:</p>
<pre dir="ltr">
$ emca -reconfig dbcontrol &ndash;cluster &ndash;EM_NODE <span class="italic">nodename</span> -EM_NODE_LIST <span class="italic">node_list</span>
</pre>
<p>To modify the existing configuration in a release 10<span class="italic">g</span> database, use the following command where <code dir="ltr">nodename</code> is the public name of the node and <code dir="ltr"><span class="codeinlineitalic">SID_list</span></code> is a comma-delimited list of database system identifiers:</p>
<pre dir="ltr">
$ emca -reconfig dbcontrol &ndash;cluster &ndash;EM_NODE <span class="italic">nodename</span> -EM_SID_LIST <span class="italic">SID_list</span>
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
SCAN listener configuration is mandatory when configuring Database Control in an Oracle RAC environment.</div>
<p>This command reconfigures the current Database Control setup and performs the following actions in sequence:</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Unless otherwise specified, all command options in the following actions represent release 11<span class="italic">g</span> and later databases. Release 10<span class="italic">g</span> database differences are called out in the sequence.</div>
<ol>
<li>
<p>Starts a Database Control Console on <code dir="ltr"><span class="codeinlineitalic">nodename</span></code>, if one has not been started yet.</p>
</li>
<li>
<p>Redirects the agents monitoring the database instances in <code dir="ltr"><span class="codeinlineitalic">node_list</span></code> (<code dir="ltr"><span class="codeinlineitalic">SID_list</span></code> in release 10<span class="italic">g</span> of the database) so that they upload their data to the console running on <code dir="ltr"><span class="codeinlineitalic">nodename</span></code>. Also, agents monitoring database instances on <code dir="ltr"><span class="codeinlineitalic">nodename</span></code> will also upload their data to the local console. Note that if you do not enter the command options <code dir="ltr">-EM_NODE</code> or <code dir="ltr">-EM_NODE_LIST</code> (<code dir="ltr">-EM_SID_LIST</code> for release 10<span class="italic">g</span> of the database) at the command line, you will be prompted to enter them.</p>
</li>
</ol>
<p><code dir="ltr">-EM_NODE</code> defaults to the local node if it is not specified when prompted. If not specified, <code dir="ltr">-EM_NODE_LIST</code> (<code dir="ltr">-EM_SID_LIST</code> for release 10<span class="italic">g</span> of the database) defaults to all nodes where the database is configured.</p>
<p>You can use this command to start the console on multiple nodes. For instance, on an 8-node cluster with nodes <code dir="ltr">node1</code>, <code dir="ltr">node2</code>, <code dir="ltr">node3</code>, <code dir="ltr">node4</code>, <code dir="ltr">node5</code>, <code dir="ltr">node6</code>, <code dir="ltr">node7</code>, and <code dir="ltr">node8</code>, you can run the following commands in succession:</p>
<pre dir="ltr">
$ emca -reconfig dbcontrol &ndash;cluster &ndash;EM_NODE node1 -EM_NODE_LIST node2,node3,node4
$ emca -reconfig dbcontrol &ndash;cluster &ndash;EM_NODE node5 -EM_NODE_LIST node6,node7,node8
</pre>
<p>For release 10<span class="italic">g</span> databases, run the following commands in succession:</p>
<pre dir="ltr">
$ emca -reconfig dbcontrol &ndash;cluster &ndash;EM_NODE node1 -EM_SID_LIST sid2,sid3,sid4
$ emca -reconfig dbcontrol &ndash;cluster &ndash;EM_NODE node5 -EM_SID_LIST sid6,sid7,sid8
</pre>
<p>In this scenario, there are two Database Control consoles running, one on node1 and the other on node5. From either of these consoles, you can manage and monitor all targets in the cluster.</p>
<p>For information about the current cluster configuration, run the following command:</p>
<pre dir="ltr">
$ emca -displayConfig dbcontrol &ndash;cluster
</pre>
<p>The preceding command prompts for the database unique name for the cluster database. This will print the current configuration onto the screen, indicating the nodes that have consoles running on them and the consoles where each agent is uploading.</p>
<p>To configure Enterprise Manager for a newly added node of a cluster, enter the following command:</p>
<pre dir="ltr">
$ emca -addNode db
</pre>
<p>To configure Enterprise Manager for a new cluster instance of an administrator-managed database or Oracle ASM storage, enter the following command:</p>
<pre dir="ltr">
$ emca -addInst db
</pre>
<p>For Oracle Database release 11<span class="italic">g</span>, on cluster policy managed databases another common operation is the addition and deletion of cluster nodes. After you add a new node, you can run EMCA to configure Database Control or central agent management for that node using the command <code dir="ltr">emca -addNode db</code>. Running EMCA only configures Enterprise Manager so that you can manage the instance in a way consistent with the rest of the cluster database instances.</p>
<p>For Oracle Database releases 10<span class="italic">g</span> and 11, on cluster databases you can create and delete database instances. After you create a new instance, you can run EMCA to configure Database Control or central agent management for that instance using the command <code dir="ltr">emca -addInst db</code>. Running EMCA does not create the actual database instance; it only configures Enterprise Manager so that you can manage the instance in a way consistent with the rest of the cluster database instances.</p>
<p>On release 11<span class="italic">g</span> and later, when configuring Enterprise Manager for a new node, run the EMCA command only after you have added the node. Also, run the command from a node in the cluster that already has Enterprise Manager configured for it, because the Enterprise Manager configuration settings on the existing node are propagated to the new node when you run the command. Because the <code dir="ltr">-addNode</code> option can be used only in an Oracle RAC environment, you do not need to use the <code dir="ltr">-cluster</code> option on the command line.</p>
<p>After running the command <code dir="ltr">emca -addNode db</code>, enter the node name and database unique name for the node and database. For example:</p>
<pre dir="ltr">
Node name: node2
Database Unique Name: EM102
</pre>
<p>Similarly in releases 10<span class="italic">g</span> and 11<span class="italic">g</span> of the database, when configuring Enterprise Manager for a new instance, run the EMCA command only after you have created the instance. Also, run the command from a node in the cluster that already has Enterprise Manager configured for its associated database instance, as these configuration settings will be propagated to the new instance. Do not run this command from the node on which the new instance was created. Note that this option can be used only in an Oracle RAC environment so you do not need to use the <code dir="ltr">-cluster</code> option on the command line. After running the command <code dir="ltr">emca -addInst db</code>, enter the following information for the node and database:</p>
<pre dir="ltr">
Node name: node2
Database Unique Name: EM102
Database SID: EM1022

</pre>
<p>For release 11<span class="italic">g</span> and later, to deconfigure Enterprise Manager for a specific node you are deleting from the cluster, log in to a different node from the one you plan to delete, then use the command <code dir="ltr">emca -deleteNode db</code>. Running this command removes the Enterprise Manager configuration so that you will no longer be able to manage the instance with Enterprise Manager on that node. Ensure that you run the EMCA command before you delete the actual cluster node. Because this option can be used only in an Oracle RAC environment, you do not need to use the <code dir="ltr">-cluster</code> option on the command line.</p>
<p>For Oracle Database release 10<span class="italic">g</span>, to deconfigure Enterprise Manager for a specific database instance (typically before the database instance is deleted), use the inverse command, <code dir="ltr">emca -deleteInst db</code>. Running EMCA does not delete the database instance; it only removes the Enterprise Manager configuration so that you will no longer be able to manage the instance with Enterprise Manager.</p>
<p>Ensure that you run the EMCA command before you delete the actual cluster database instance. Also, ensure that you run the command from a different node and not from the node on which the database instance will be deleted. Note that this option can be used only in an Oracle RAC environment, so you do not need to use the <code dir="ltr">-cluster</code> option on the command line.</p>
<p>For more information, see <a href="#CIHHAIDJ">Table 10-1</a> which describes EMCA command line operations.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you use the command <code dir="ltr">emca -cluster</code> to configure Database Control for Oracle RAC, then check the <code dir="ltr">TNS_ADMIN</code> environment variable on all cluster nodes. If you have a different TNS_ADMIN set for each node, then the listener for the target cannot be configured correctly. In this case, set the value of TNS_ADMIN the same on all cluster nodes before running the <code dir="ltr">emca -cluster</code> command.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHFCEFF"></a>
<div id="ADMIN13418" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Administering Database Control</h2>
<p>This section provides a brief description of the activities that you can perform while administering your database using Database Control. The following sections describe some of the tasks available for managing an Oracle database:</p>
<ul>
<li>
<p><a href="#CIHFDHID">Starting and Stopping the Database Control Process</a></p>
</li>
<li>
<p><a href="#CIHCGJCE">Accessing the Database Home Page</a></p>
</li>
<li>
<p><a href="#CIHEBJGI">Creating Database Control Administrative Users</a></p>
</li>
<li>
<p><a href="#CIHHGJAH">Granting Access to Database Control for Non-Administrative Users</a></p>
</li>
<li>
<p><a href="#CIHFEEAG">Setting Database Control Preferences</a></p>
</li>
</ul>
<a id="CIHFDHID"></a>
<div id="ADMIN13419" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Starting and Stopping the Database Control Process</h3>
<p>To access Database Control from a browser, the Database Control console process <code dir="ltr">dbconsole</code> must be running on the database host computer. The <code dir="ltr">dbconsole</code> process is automatically started after installation. However, if the system must be restarted, you can start the process manually at the command line or start it as a service in Windows. You can also run commands to stop the process or view its status. If the process is stopped, then it must be manually restarted before you use Database Control.To start or stop the database or to view the status of the <code dir="ltr">dbconsole</code> process from the command line:</p>
<ol>
<li>
<p>Configure the operating system environment variables, as described in the "Configuring the Operating System Environment Variables" chapter in the <span class="italic">Oracle Database 2 Day DBA</span> guide.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>To start the process, run the following command:</p>
<pre dir="ltr">
$ ./emctl start dbconsole

</pre></li>
<li>
<p>To stop the process, run the following command:</p>
<pre dir="ltr">
$ ./emctl stop dbconsole

</pre></li>
<li>
<p>To view the status of the process, run the following command:</p>
<pre dir="ltr">
$ ./emctl status dbconsole
</pre></li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you are prompted to set the <code dir="ltr">ORACLE_UNQNAME</code> environment variable, then set this variable and run the emctl command again. Set the variable to the database unique name (the value of the <code dir="ltr">DB_UNIQUE_NAME</code> database parameter). A typical value for <code dir="ltr">DB_UNIQUE_NAME</code> is <code dir="ltr">orcl</code>.</div>
<p>To start or stop Database Control as a service on Microsoft Windows:</p>
<ol>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>On Windows XP and Windows Server 2003, click <span class="bold">Start</span>, then select <span class="bold">Control Panel</span>.</p>
</li>
<li>
<p>On Windows 2000 Server, click <span class="bold">Start</span>, select <span class="bold">Settings</span>, then select <span class="bold">Control Panel</span>.</p>
</li>
</ul>
<p>The Control Panel window opens.</p>
</li>
<li>
<p>Double-click the <span class="bold">Administrative Tools</span> icon, and then double-click the <span class="bold">Services</span> icon.</p>
<p>The Services window opens.</p>
<p>Oracle Database services begin with <code dir="ltr">Oracle</code>. The service is listed as <code dir="ltr">OracleDBConsole</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code>, where <code dir="ltr"><span class="codeinlineitalic">sid</span></code> is the system identifier (SID) for your database instance. The status of the process is listed in the Status column.</p>
</li>
<li>
<p>Double-click the <span class="bold">OracleDBConsole</span><code dir="ltr"><span class="codeinlineboldital">sid</span></code> service (for Release 10<span class="italic">g</span>). Double-click the <span class="bold">OracleDBConsole</span><code dir="ltr"><span class="codeinlineboldital">dbuniquename</span></code> service (for Release 11<span class="italic">g</span>).</p>
<p>The Service Properties window opens.</p>
</li>
<li>
<p>In the Startup Type list, ensure that either <span class="bold">Manual</span> or <span class="bold">Automatic</span> is selected.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>To start the service, click <span class="bold">Start</span> then click <span class="bold">OK</span></p>
</li>
<li>
<p>To stop the service, click <span class="bold">Stop</span> then click <span class="bold">OK</span>.</p>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHCGJCE"></a>
<div id="ADMIN13420" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Accessing the Database Home Page</h3>
<p>The Database Home page is the main database management page in Database Control.</p>
<p>To access the Database Home page:</p>
<ol>
<li>
<p>Ensure that the <code dir="ltr">dbconsole</code> process is running on the database host computer.</p>
<p>See the <a href="#CIHFDHID">"Starting and Stopping the Database Control Process"</a> section.</p>
</li>
<li>
<p>In your Web browser, enter the following URL:</p>
<pre dir="ltr">
https://<span class="italic">hostname</span>:<span class="italic">portnumber</span>/em
</pre>
<p>For example, if you installed the database on a host computer named <code dir="ltr">comp42.example.com</code>, and the installer indicated that your Enterprise Manager Console HTTP port number is <code dir="ltr">1158</code>, then enter the following URL:</p>
<pre dir="ltr">
https://comp42.example.com:1158/em

</pre>
<p>If you have recently installed Oracle Database, you can determine the port number for Database Control on Linux and UNIX systems by viewing the <code dir="ltr">$ORACLE_HOME</code><code dir="ltr">/install/portlist.ini</code> file. Otherwise, you can determine the port number for Database Control by searching for <code dir="ltr">REPOSITORY_URL</code> in the <code dir="ltr">ORACLE_$HOME/</code><code dir="ltr"><span class="codeinlineitalic">Oracle_sid</span></code><code dir="ltr">/sysman/config/emd.properties</code> file, where <code dir="ltr"><span class="codeinlineitalic">Oracle_sid</span></code> is the system identifier (SID) for your database instance.</p>
<p>You must do the following to start the database:</p>
<ol>
<li>
<p>Click <span class="bold">Startup/Shutdown</span>, enter the host login user name and password, then enter the database login user name and password.</p>
<p>For the database user name and password, enter <span class="bold">SYS</span> and the password that you specified during installation.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to start the database instance, then in the Confirmation page, click <span class="bold">Yes</span> to start the database in open mode.</p>
</li>
</ol>
</li>
<li>
<p>Log in to the database with a user account that is authorized to access Database Control.</p>
<p>This user initially could be <code dir="ltr">SYS</code> or <code dir="ltr">SYSTEM</code>, with the password that you specified during database installation.</p>
<p>While the <code dir="ltr">SYSTEM</code> account can be used to perform day-to-day administrative tasks, Oracle strongly recommends creating named user accounts for administering the Oracle database to enable monitoring of database activity. To back up, recover, or upgrade the database, you must log in as a <code dir="ltr">SYSDBA</code> user.</p>
<p>Database Control displays the Database Home page.</p>
</li>
</ol>
<p>The subpage links across the top of the page enable you to access performance, availability, and other administration pages to manage your database. The features provided by these pages are discussed in other sections of this documentation.</p>
<p>The various sections of the Database Home page provide information about the environment and status of the database. For example, the Alerts and Diagnostic Summary sections warn you of errors and performance problems that are impacting the operation of your database. You can click the provided links to see more detail about the problem areas, and, in some cases, to obtain recommendations for resolving the problems. These topics are discussed in the <span class="italic">2 Day DBA</span> guide, in the "Monitoring and Tuning the Database" chapter.</p>
</div>
<!-- class="sect2" -->
<a id="CIHEBJGI"></a>
<div id="ADMIN13421" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating Database Control Administrative Users</h3>
<p>When you log in to Database Control using the <code dir="ltr">SYS</code>, <code dir="ltr">SYSTEM</code>, or <code dir="ltr">SYSMAN</code> user accounts, you are logging in as the Database Control super user. These are the only accounts that are automatically granted the roles and privileges required to administer Database Control itself. Examples of Database Control administration tasks include the following:</p>
<ul>
<li>
<p>Creating other Database Control administrators.</p>
</li>
<li>
<p>Configuring e-mail and other notification methods.</p>
</li>
<li>
<p>Setting alert thresholds for database metrics, such as tablespace space usage percentage exceeded or SQL response time exceeded.</p>
</li>
<li>
<p>Selecting database policies to apply, so that Database Control can show alerts if a policy is violated. (An example policy is "A nonsystem user cannot use the SYSTEM or SYSAUX tablespace as its default tablespace.")</p>
</li>
<li>
<p>Defining blackouts, which are time periods in which database monitoring is suspended so that maintenance operations do not skew monitoring data or generate needless alerts.</p>
</li>
</ul>
<p>You can create Database Control administrative users who have enough privileges to administer Database Control itself, but lack the high-level database administration privileges of the <code dir="ltr">SYS</code> and <code dir="ltr">SYSTEM</code> users. This practice enables you to assign the minimum privileges required for other Database Control administrators to do their jobs, which is a best practice for database security. You can also create a Database Control administrative account for yourself, thus avoiding logging in as <code dir="ltr">SYS</code> or <code dir="ltr">SYSTEM</code> until you must perform database administration tasks.</p>
<p>Using the following procedure, you can assign Database Control administrative privileges to an existing database user or create a new Database Control administrative user. When you create a new Database Control administrative user, a user account is created for that user for the database. You must then decide which system privileges, object privileges, or roles to grant the user, if any, to perform database administration tasks.</p>
<p>To create a Database Control administrative user:</p>
<ol>
<li>
<p>On any Database Control page, at the top of the page, click <span class="bold">Setup</span>.</p>
<p>The Enterprise Manager Configuration page appears, showing the Overview of Setup page.</p>
</li>
<li>
<p>In the left navigation bar, click <span class="bold">Administrators</span>.</p>
<p>The Administrators page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create Administrator: Properties page appears.</p>
</li>
<li>
<p>In the <span class="bold">Name</span> field, enter the name of an existing database user, or click the flashlight icon next to the field and select an existing database user.</p>
</li>
<li>
<p>Enter one or more e-mail addresses for this administrator only if you plan to set up e-mail notifications for the database.</p>
</li>
<li>
<p>Click <span class="bold">Review</span> to view a page that summarizes the information that you entered.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span> to configure the database user as a Database Control administrative user.</p>
<p>The Administrators page appears, showing the new administrator in the list.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CIHHGJAH"></a>
<div id="ADMIN13422" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Granting Access to Database Control for Non-Administrative Users</h3>
<p>As a database administrator, you can log in to Database Control with the <code dir="ltr">SYS</code> or <code dir="ltr">SYSTEM</code> user account to perform administrative and other tasks. Non-administrative users may also want to log in to Database Control. For example, application developers may want to take advantage of the Database Control interface to create or modify tables, indexes, views, and so on. You must grant access to Database Control to these users before they can log in.For non administrative users to have access to Database Control, they must be granted the <code dir="ltr">SELECT_CATALOG_ROLE</code> role.</p>
</div>
<!-- class="sect2" -->
<a id="CIHFEEAG"></a>
<div id="ADMIN13423" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting Database Control Preferences</h3>
<p>This section discusses setting user preferences for Database Control.</p>
<div id="ADMIN13424" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1200"></a>
<h4 class="sect3">About Database Control Preferences</h4>
<p>Database Control enables you to set user preferences in the following areas:</p>
<ul>
<li>
<p>Notification</p>
<p>These settings enable Database Control to e-mail you alerts. Alerts are notifications that the database is in an undesirable state and needs your attention. By default, the Database Home page lists all alerts. However, setup is required for e-mail notification. For more information about alerts and setting up notifications, see the "Setting Up Direct Alert Notification" section in the "Monitoring and Tuning the Database" chapter of the <span class="italic">Oracle Database 2 Day DBA</span> book.</p>
</li>
<li>
<p>Blackout Administration</p>
<p>During blackouts, Database Control does not collect database monitoring data or send alerts. Blackouts enable you to perform scheduled maintenance on the database without receiving needless alerts and without skewing the monitoring data.</p>
<p>For example, you can stop data collections during a database backup or a hardware upgrade. If you continue monitoring during these periods, then the collected data shows trends and other monitoring information that is not the result of typical day-to-day operations. To get a more accurate, long-term picture of database performance, you can use blackouts to exclude these special-case situations from data analysis. See the "Defining Blackout Periods" section in the "Getting Started with Database Administration" chapter of the <span class="italic">Oracle Database 2 Day DBA</span> book for more information.</p>
</li>
<li>
<p>Preferred Credentials</p>
<p>Database Control can automatically execute many routine administrative tasks, such as backups. You can use a job scheduling system that is built into Database Control for these routine tasks. To keep your environment secure, setting up tasks for automatic execution in Enterprise Manager requires you to provide login information for the host computer and database. To avoid entering this information every time you create or run a job or task, Database Control enables you to save this information as preferred credentials. Preferred credentials are stored in the database in encrypted mode to protect them from unauthorized use. See the <a href="#CIHCECHJ">Setting Preferred Credentials</a> section for more information.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="ADMIN13425" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1201"></a>
<h4 class="sect3">Defining Blackout Periods</h4>
<p>You can define one or more one-time or repeating blackout periods where Database Control does not collect database monitoring data or send alerts.</p>
<p>To define a blackout period:</p>
<ol>
<li>
<p>On any Database Control page, at the top of the page, click <span class="bold">Setup</span>.</p>
<p>The Enterprise Manager Configuration page appears, showing the Overview of Setup page.</p>
</li>
<li>
<p>In the left-hand pane, click <span class="bold">Blackouts</span>.</p>
<p>The Blackouts page appears.</p>
</li>
<li>
<p>Click <span class="bold">Create</span> to start the Create Blackout wizard.</p>
<p>The Create Blackout: Properties page appears.</p>
</li>
<li>
<p>If desired, replace the default blackout name with one of your choosing.</p>
</li>
<li>
<p>If desired, in the <span class="bold">Comments</span> field, enter text that describes the purpose of the blackout.</p>
</li>
<li>
<p>In the <span class="bold">Reason</span> list, select the blackout reason that is most appropriate.</p>
</li>
<li>
<p>In the Available Targets section, in the <span class="bold">Type</span> list, select <span class="bold">Database Instance</span>.</p>
<p>The fully qualified name for your database instance appears in the <span class="bold">Available Targets</span> list.</p>
</li>
<li>
<p>In the <span class="bold">Available Targets</span> list, select your instance then click the <span class="bold">Move</span> icon. You can also double-click the instance name.</p>
<p>The instance name is moved from the <span class="bold">Available Targets</span> list to the <span class="bold">Selected Targets</span> list.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Create Blackout Schedule page appears.</p>
</li>
<li>
<p>On the Create Blackout Schedule page, do the following:</p>
<ol>
<li>
<p>In the Start section, schedule the blackout either immediately or for a later date and time.</p>
</li>
<li>
<p>In the Duration section, indicate the duration of the blackout.</p>
</li>
<li>
<p>To repeat the blackout periodically, in the Repeating section, select a repeat frequency from the <span class="bold">Repeat</span> list. Otherwise, use the default value of <span class="bold">Do Not Repeat</span>.</p>
</li>
</ol>
</li>
<li>
<p>Click <span class="bold">Next</span>.</p>
<p>The Review page appears.</p>
<p>Review what you have entered. You can click <span class="bold">Back</span> to change a setting.</p>
</li>
<li>
<p>Click <span class="bold">Finish</span>.</p>
<p>The Confirmation heading appears on the Blackouts page, and the new blackout period is shown in the list.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CIHCECHJ"></a>
<div id="ADMIN13426" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Setting Preferred Credentials</h4>
<p>When you set preferred credentials, Database Control automatically fills in host computer and database login credentials for you at times when it usually prompts for these credentials. Database Control also fills in these credentials when it is about to run a job that requires credentials.</p>
<p>To set preferred credentials for the database:</p>
<ol>
<li>
<p>From any Database Control page, at the top of the page, click <span class="bold">Preferences</span>.</p>
<p>The Preferences page appears.</p>
</li>
<li>
<p>Click <span class="bold">Preferred Credentials</span> in the left-hand pane.</p>
<p>The Preferred Credentials page appears, showing a table of targets.</p>
</li>
<li>
<p>In the table row for the Database Instance, click the icon under <span class="bold">Set Credentials</span>.</p>
<p>The Database Preferred Credentials page appears.</p>
</li>
<li>
<p>Enter the following credentials:</p>
<ul>
<li>
<p>Database credentials for Username/Password and SYSDBA Username/SYSDBA Password</p>
</li>
<li>
<p>Host credentials for Host Username/Host Password</p>
</li>
</ul>
<p>For example, you might typically connect as the user <code dir="ltr">SYSTEM</code>, use the <code dir="ltr">SYS</code> account for <code dir="ltr">SYSDBA</code> access, and use <code dir="ltr">oracle</code> for the host user name.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The host user may require certain host privileges to run background jobs such as database backups. For example, on UNIX and Linux, the host user must belong to the OSDBA group (typically <code dir="ltr">dba</code>). On Windows, the host user must be a member of the Administrators group and must be granted the Log on as Batch Job log in right. See your platform documentation for more information.</div>
</li>
<li>
<p>Click <span class="bold">Test</span> to test your credentials.</p>
<p>A confirmation message is displayed if your credentials can be verified.</p>
</li>
<li>
<p>Click <span class="bold">Apply</span> to apply the changes.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIHDDHBF"></a>
<div id="ADMIN13427" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Managing Database Control in an Oracle RAC Environment</h2>
<p>When you create an Oracle RAC database and choose Database Control for your database management, Database Control is installed and configured automatically.</p>
<p>In this section:</p>
<ul>
<li>
<p><a href="#CHDBIFID">Verifying that Database Control is Running in an Oracle RAC Environment</a></p>
</li>
<li>
<p><a href="#CHDGAECG">Backing Up the emkey.ora File</a></p>
</li>
</ul>
<a id="CHDBIFID"></a>
<div id="ADMIN13428" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Verifying that Database Control is Running in an Oracle RAC Environment</h3>
<p>To verify that Database Control has been started in your new Oracle RAC environment:</p>
<ol>
<li>
<p>Ensure that the <code dir="ltr">ORACLE_UNQNAME</code> environment variable is set to the unique name of the database to which you want to connect, for example <code dir="ltr">orcl</code>. Also make sure the <code dir="ltr">ORACLE_HOME</code> environment variable is set to the location of the installed Oracle Database software, for example:</p>
<pre dir="ltr">
$ export ORACLE_UNQNAME=orcl
$ echo $ORACLE_HOME
/u01/app/oracle/product/11.2.0/dbhome_1
 
$ echo $ORACLE_UNQNAME
orcl

</pre></li>
<li>
<p>Go to the <code dir="ltr">$ORACLE_HOME/bin</code> directory.</p>
</li>
<li>
<p>Run the following command as the <code dir="ltr">oracle</code> user:</p>
<pre dir="ltr">
./emctl status dbconsole

</pre>
<p>The Enterprise Manager Control (EMCTL) utility displays the current status of the Database Control console on the current node, for example:</p>
<pre dir="ltr">
Oracle Enterprise Manager 11g Database Control Release 11.2.0.1.0
Copyright (c) 1996, 2009 Oracle Corporation.  All rights reserved.
https://racnode1.example.com:1158/em/console/aboutApplication
Oracle Enterprise Manager 11g is running.
------------------------------------------------------------------
Logs are generated in directory /u01/app/oracle/product/11.2.0/dbhome_1/racnode1_orcl/sysman/log

</pre></li>
<li>
<p>If the EMCTL utility reports that Database Control is not started, use the following command to start it:</p>
<pre dir="ltr">
$ ./emctl start dbconsole

</pre>
<p>Following a typical installation, Database Control serves console pages from the node where the database was created. The console also monitors agents on all nodes of the cluster. However, you can configure Enterprise Manager to have multiple Database Control consoles within a cluster using EMCA.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDGAECG"></a>
<div id="ADMIN13429" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Backing Up the emkey.ora File</h3>
<p>During the installation, the Database Control management repository is placed in secure mode. All Enterprise Manager data is encrypted using the encryption key stored in the file <code dir="ltr">emkey.ora</code>. If this file is damaged or lost, and cannot be restored from a backup, you will no longer be able to use the existing Enterprise Manager repository.</p>
<p>The <code dir="ltr">emkey.ora</code> file is located in the <code dir="ltr">$ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">node_name</span></code>_<code dir="ltr"><span class="codeinlineitalic">Database_name</span></code><code dir="ltr">/sysman/config</code> directory. For example, on the <code dir="ltr">racnode2</code> server, the encryption key file for the <code dir="ltr">orcl.example.com</code> database is located at <code dir="ltr">/u01/app/oracle/product/11.2.0/dbhome_1/racnode2_orcl/sysman/config/emkey.ora</code>.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BEJGJBDI"></a>
<div id="ADMIN13430" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Deleting and Creating Database Control Objects</h2>
<p>This section discusses the process of deleting and creating Database Control objects, and how to re-create configuration files and a repository in Database Control.</p>
<div id="ADMIN13431" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1202"></a>
<h3 class="sect2">Deleting Database Control Objects</h3>
<p>This section describes the steps required to delete database control objects. There are six possible options to use when deleting Database Control objects:</p>
<ul>
<li>
<p><a href="#BEJJDACI">Option 1: Deleting Database Control Configuration Files Using EMCA Scripts</a></p>
</li>
<li>
<p><a href="#BEJHFEGI">Option 2: Deleting Database Control Configuration Files and Repository Objects Using An EMCA Script</a></p>
</li>
<li>
<p><a href="#BEJCAHGF">Option 3: Deleting A Database Control Repository Using EMCA Scripts</a></p>
</li>
<li>
<p><a href="#BEJJDHGB">Option 4: Deleting Database Control Configuration Files Manually</a></p>
</li>
<li>
<p><a href="#BEJIGFEF">Option 5: Deleting the Database Control Repository Using RepManager</a></p>
</li>
</ul>
<a id="BEJJDACI"></a>
<div id="ADMIN13432" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 1: Deleting Database Control Configuration Files Using EMCA Scripts</h4>
<p>To delete Database Control configuration files using EMCA scripts, run one of the following commands:</p>
<p>For a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -deconfig dbcontrol db

</pre>
<p>For an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -deconfig dbcontrol db &ndash;cluster

</pre>
<p>The <code dir="ltr">-deconfig</code> option removes the Enterprise Manager jobs from Scheduling before Database Control is deconfigured. Otherwise the repository, which is not dropped, could be corrupted or inconsistent if Enterprise Manager jobs were scheduled at the time Database Control is dropped. It could also cause errors during the Database Control deletion.</p>
</div>
<!-- class="sect3" -->
<a id="BEJHFEGI"></a>
<div id="ADMIN13433" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 2: Deleting Database Control Configuration Files and Repository Objects Using An EMCA Script</h4>
<p>You can delete Database Control configuration files and repository objects using an EMCA script. Both configuration files and repository objects can be deleted using a single command.</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -deconfig dbcontrol db -repos drop

</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -deconfig dbcontrol db -repos drop &ndash;cluster
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This command places the database in Quiesce Mode.</div>
</div>
<!-- class="sect3" -->
<a id="BEJCAHGF"></a>
<div id="ADMIN13434" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 3: Deleting A Database Control Repository Using EMCA Scripts</h4>
<p>You can delete a Database Control repository using EMCA scripts by using the commands listed below.</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca &ndash;repos drop
</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -repos drop -cluster
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This command places the database in Quiesce Mode.</div>
</div>
<!-- class="sect3" -->
<a id="BEJJDHGB"></a>
<div id="ADMIN13435" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 4: Deleting Database Control Configuration Files Manually</h4>
<p>In addition to using EMCA scripts to delete Database Control objects, you can delete objects manually, as follows:</p>
<p>Remove the following directories from your file system:</p>
<p><code dir="ltr">$ $ORACLE_HOME/</code><code dir="ltr"><span class="codeinlineitalic">hostname</span></code><code dir="ltr"><span class="codeinlineitalic">_sid</span></code></p>
<p><code dir="ltr">$ $ORACLE_HOME</code><code dir="ltr">/oc4j/j2ee/OC4J_DBConsole_</code><code dir="ltr"><span class="codeinlineitalic">hostname</span></code>_<code dir="ltr"><span class="codeinlineitalic">sid</span></code></p>
<p>On Windows, you also need to delete the Database Control service, as follows:</p>
<ol>
<li>
<p>Run <code dir="ltr">regedit</code>.</p>
</li>
<li>
<p>Navigate to <code dir="ltr">HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services</code>.</p>
</li>
<li>
<p>Locate the <code dir="ltr">OracleDBConsolesid</code> entry and delete it.</p>
</li>
</ol>
<p>Alternatively, on Windows XP and Windows Server 2003 you can run the following from the command line, where <code dir="ltr"><span class="codeinlineitalic">service_name</span></code> is the Database Control service name (typically <code dir="ltr">OracleDBConsole</code><code dir="ltr"><span class="codeinlineitalic">sid</span></code>):</p>
<pre dir="ltr">
sc delete <span class="italic">service_name</span>
</pre>
<p>Also available from Microsoft is The <code dir="ltr">delsrv.exe</code> executable is also available as a free download from Microsoft.</p>
</div>
<!-- class="sect3" -->
<a id="BEJIGFEF"></a>
<div id="ADMIN13436" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 5: Deleting the Database Control Repository Using RepManager</h4>
<p>You can delete the Database Control repository using RepManager. This option is not as complete as the other options. You may find that dropping the repository using the command line options is a better solution. Also note that RepManager cannot be used to create a Database Control Repository.</p>
<p>Run the following command:</p>
<pre dir="ltr">
$ $ORACLE_HOME/sysman/admin/emdrep/bin/RepManager <span class="italic">hostname</span> <span class="italic">listener_port</span> <span class="italic">sid</span> -action drop
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This command places the database in Quiesce Mode.</div>
<p>For more information about Quiesce Mode, see My Oracle Support Note 375946.1, "Running EMCA Results in Database Quiesce" and "No New Connections or Operations Can Be Performed During the DB Control Repository Creation".</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="ADMIN13437" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1203"></a>
<h3 class="sect2">Creating Database Control Objects</h3>
<p>This section discusses the three options that you can use to create Database Control objects.</p>
<ul>
<li>
<p><a href="#BEJIJCBB">Option 1: Creating the DB Control Configuration Files</a></p>
</li>
<li>
<p><a href="#BEJGGCAG">Option 2: Creating the Database Control Repository Objects and Configuration Files</a></p>
</li>
<li>
<p><a href="#BEJBIBJF">Option 3: Creating the Database Control Repository Objects and Configuration Files For a Cloned Database Home</a></p>
</li>
</ul>
<a id="BEJIJCBB"></a>
<div id="ADMIN13438" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 1: Creating the DB Control Configuration Files</h4>
<p>The first option that you can use to create Database Control objects is to create the Database Control configuration files. Use the following commands to create the files without going through the repository creation process.</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db

</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -cluster
</pre></div>
<!-- class="sect3" -->
<a id="BEJGGCAG"></a>
<div id="ADMIN13439" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 2: Creating the Database Control Repository Objects and Configuration Files</h4>
<p>The second option you can use to create Database Control objects is to create the Database Control repository objects and configuration files.</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos create

</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos create &ndash;cluster
</pre></div>
<!-- class="sect3" -->
<a id="BEJBIBJF"></a>
<div id="ADMIN13440" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 3: Creating the Database Control Repository Objects and Configuration Files For a Cloned Database Home</h4>
<p>The third option you can use to create Database Control objects is to create the Database Control repository objects and configuration files for a cloned database home, as follows:</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos recreate

</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos recreate -cluster
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="ADMIN13441" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1204"></a>
<h3 class="sect2">Re-Creating Or Reconfiguring Database Control</h3>
<p>This section discusses the two options you can use to re-create or reconfigure Database Control.</p>
<ul>
<li>
<p><a href="#BEJGBBCC">Option 1: Re-Creating the Database Control Configuration Files Only (Leaving Repository Intact)</a></p>
</li>
<li>
<p><a href="#BEJCHEIB">Option 2: Re-Creating the Database Control Configuration Files and Repository</a></p>
</li>
</ul>
<a id="BEJGBBCC"></a>
<div id="ADMIN13442" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 1: Re-Creating the Database Control Configuration Files Only (Leaving Repository Intact)</h4>
<p>The first option you can use to re-create Database Control is to re-create only the Database Control configuration files, as follows:</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db

</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -cluster
</pre></div>
<!-- class="sect3" -->
<a id="BEJCHEIB"></a>
<div id="ADMIN13443" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Option 2: Re-Creating the Database Control Configuration Files and Repository</h4>
<p>The second option you can use to re-create Database Control is to re-create the Database Control configuration files and the repository.</p>
<p>Run the following command for a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos recreate

</pre>
<p>Run the following command for an Oracle RAC database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos recreate -cluster
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
This command places the database in Quiesce Mode.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDEBFBD"></a>
<div id="ADMIN13444" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">EMCA Troubleshooting Tips</h2>
<p>The following sections describe troubleshooting tips to consider when using EMCA to configure Database Control.</p>
<ul>
<li>
<p><a href="#CHDGHFGJ">Using EMCA After Changing the Database Listener Port</a></p>
</li>
<li>
<p><a href="#CHDDEIFA">Upgrading 11<span class="italic">g</span> Release 2 Grid Control Agents</a></p>
</li>
<li>
<p><a href="#CHDIACJG">Using EMCA When the Database Host Name or IP Address Changes</a></p>
</li>
<li>
<p><a href="#CHDIAAFI">Using EMCA When the TNS Configuration Is Changed</a></p>
</li>
<li>
<p><a href="#CHDCHAIJ">Using EMCA for Desktop Class Installations</a></p>
</li>
<li>
<p><a href="#CHDFFDCD">Handling EMCA Error Messages</a></p>
</li>
</ul>
<a id="CHDGHFGJ"></a>
<div id="ADMIN13445" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using EMCA After Changing the Database Listener Port</h3>
<p>If you change the listener port of the database after you have configured Database Control, the database status will appear as <code dir="ltr">down</code>. To reconfigure Database Control so it uses the new listener port, run the EMCA command using the <code dir="ltr">-config dbcontrol db [-cluster]</code> command-line arguments.</p>
</div>
<!-- class="sect2" -->
<a id="CHDDEIFA"></a>
<div id="ADMIN13446" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Upgrading 11<span class="italic">g</span> Release 2 Grid Control Agents</h3>
<p>When upgrading an Oracle Database 11<span class="italic">g</span> Release 2 database or an Oracle ASM instance that was configured for Oracle Enterprise Manager (either Database Control or a Grid Control central agent) to an Oracle Database 11<span class="italic">g</span> Release 2 (11.2) database, all Enterprise Manager targets on the relevant hosts referring to the upgraded instances are updated automatically. This occurs because the upgrade involves altering the instance Oracle home, port, or other target-associated properties. However, some of these targets on the hosts are not updated successfully during the upgrade if they are managed by an Oracle Database 11<span class="italic">g</span> Release 2 (11.2) Grid Control Agent.</p>
<p>To update these targets, in the Home page for the upgraded database (or Oracle ASM) target, click <span class="bold">Monitoring Configuration</span>. On the Monitoring Configuration page, you can update properties such as Oracle home, listener port, and so on to the correct values.</p>
</div>
<!-- class="sect2" -->
<a id="CHDIACJG"></a>
<div id="ADMIN13447" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using EMCA When the Database Host Name or IP Address Changes</h3>
<p>When the database host name (including the domain name) or the IP address changes, deconfigure and then reconfigure Database Control with the <code dir="ltr">-repos recreate</code> flag for the <code dir="ltr">emca</code> command. For example, to re-create Database Control with a new host name, complete the following steps:</p>
<ol>
<li>
<p>Set <code dir="ltr">ORACLE_HOSTNAME=</code><code dir="ltr"><span class="codeinlineitalic">old_hostname</span></code> in the environment.</p>
</li>
<li>
<p>De-configure the old <code dir="ltr">dbconsole</code> by running the following command:</p>
<p>For a single-instance database:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -deconfig dbcontrol db
</pre>
<p>For Oracle RAC:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -deconfig dbcontrol db -cluster
</pre></li>
<li>
<p>Un-set <code dir="ltr">ORACLE_HOSTNAME</code> in the environment.</p>
</li>
<li>
<p>Configure a new <code dir="ltr">dbconsole</code> by running one of the following commands:</p>
<p>For a single-instance database, enter:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos recreate
</pre>
<p>For Oracle RAC, enter:</p>
<pre dir="ltr">
$ $ORACLE_HOME/bin/emca -config dbcontrol db -repos recreate -cluster
</pre></li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDIAAFI"></a>
<div id="ADMIN13448" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using EMCA When the TNS Configuration Is Changed</h3>
<p>When the TNS configuration is changed, set the environment variable, then run the following command:</p>
<p><code dir="ltr">$ emca -config dbcontrol db</code></p>
</div>
<!-- class="sect2" -->
<a id="CHDCHAIJ"></a>
<div id="ADMIN13449" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using EMCA for Desktop Class Installations</h3>
<p>For Desktop class installation where hostname is <code dir="ltr">localhost</code>, set<br />
<code dir="ltr">ORACLE_HOSTNAME=localhost</code> in the environment before you perform any EMCA or <code dir="ltr">emctl</code> operations.</p>
</div>
<!-- class="sect2" -->
<a id="CHDFFDCD"></a>
<div id="ADMIN13450" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Handling EMCA Error Messages</h3>
<p>The following are some EMCA error messages and instructions for handling them.</p>
<a id="CHDGCDDH"></a>
<div id="ADMIN13451" class="sect3">
<h4 class="sect3">Failed To Allocate Port(s) In the Specified Range(s)</h4>
<p>Check the following:</p>
<ul>
<li>
<p>Free the ports if they are in use or use EMCA to provide free ports in command line options.</p>
</li>
<li>
<p>Open up the required ports in the firewall and re-run the <code dir="ltr">emca -config dbcontrol db [-cluster]</code> command by specifying free ports in the command line.</p>
</li>
<li>
<p>Check the <code dir="ltr">/etc/hosts</code> file. It should contain an entry for the physical host. Enter the following command to determine the physical host name:</p>
<p><code dir="ltr">$ CMD&gt;hostname</code></p>
<p>Set the environment variable:</p>
<p><code dir="ltr">$ set ORACLE_HOSTNAME=</code><code dir="ltr"><span class="codeinlineitalic">output of above command</span></code></p>
<p>Try to run the following command:</p>
<p><code dir="ltr">$ $ORACLE_HOME</code><code dir="ltr">/bin/emca -config dbcontrol db</code></p>
<p>By completing these steps you are fixing the environment variable and then running the <code dir="ltr">&ndash;config dbcontrol db</code> command again to re-attempt to allocate the ports.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDJGGCI"></a>
<div id="ADMIN13452" class="sect3">
<h4 class="sect3">Listener Is Not Up or Database Service Is Not Registered With It</h4>
<p>Check the following:</p>
<ul>
<li>
<p>If the listener is not up on the specified port, then start it and rerun the EMCA script.</p>
</li>
<li>
<p>Check whether the database service is registered with the listener. If not, then register it and rerun the EMCA script.</p>
</li>
<li>
<p>If the listener is configured with a different host name than the physical host name, configure Database Control as follows:</p>
<p><code dir="ltr">$ set ORACLE_HOSTNAME</code><code dir="ltr">=</code><code dir="ltr"><span class="codeinlineitalic">listener host</span></code></p>
<p><code dir="ltr">$ $ORACLE_HOME/bin/emca -config dbcontrol db</code></p>
<p>If the listener port changes, then reconfigure Database Control by providing the new listener port:</p>
<p><code dir="ltr">$ $ORACLE_HOME/bin/emca -config dbcontrol db</code></p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1326">
<tr>
<td class="cellalignment1335">
<table class="cellalignment1331">
<tr>
<td class="cellalignment1330"><a href="diag.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1330"><a href="part2.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1337">
<table class="cellalignment1329">
<tr>
<td class="cellalignment1330"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1330"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1330"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1330"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1330"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1330"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
