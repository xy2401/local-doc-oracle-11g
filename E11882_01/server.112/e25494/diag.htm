<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Managing Diagnostic Data</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1055" />
<meta name="dcterms.created" content="2015-05-05T8:27:34Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Administrator's Guide" />
<meta name="dcterms.identifier" content="E25494-07" />
<meta name="dcterms.isVersionOf" content="ADMIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="monitoring.htm" title="Previous" type="text/html" />
<link rel="Next" href="dbcontrol.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25494.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">16/49</span> <!-- End Header -->
<div id="ADMIN11007" class="chapter"><a id="adminChapterDiagnosability"></a>
<h1 class="chapter"><span class="secnum">9</span> Managing Diagnostic Data</h1>
<p>Beginning with Release 11<span class="italic">g</span>, Oracle Database includes an advanced fault diagnosability infrastructure for collecting and managing diagnostic data. <span class="bold">Diagnostic data</span> includes the trace files, dumps, and core files that are also present in previous releases, plus new types of diagnostic data that enable customers and Oracle Support to identify, investigate, track, and resolve problems quickly and effectively.</p>
<p>In this chapter:</p>
<ul>
<li>
<p><a href="#CHDIAADE">About the Oracle Database Fault Diagnosability Infrastructure</a></p>
</li>
<li>
<p><a href="#CHDJDBCH">Investigating, Reporting, and Resolving a Problem</a></p>
</li>
<li>
<p><a href="#CHDBCHID">Viewing Problems with the Enterprise Manager Support Workbench</a></p>
</li>
<li>
<p><a href="#CHDFECDJ">Creating a User-Reported Problem</a></p>
</li>
<li>
<p><a href="#CHDGCEIH">Viewing the Alert Log</a></p>
</li>
<li>
<p><a href="#CHDIHIBA">Finding Trace Files</a></p>
</li>
<li>
<p><a href="#CHDFCCAE">Running Health Checks with Health Monitor</a></p>
</li>
<li>
<p><a href="#CHDBIGAA">Repairing SQL Failures with the SQL Repair Advisor</a></p>
</li>
<li>
<p><a href="#CHDBHCFF">Repairing Data Corruptions with the Data Recovery Advisor</a></p>
</li>
<li>
<p><a href="#CHDCACEJ">Creating, Editing, and Uploading Custom Incident Packages</a></p>
</li>
</ul>
<a id="CHDIAADE"></a>
<div id="ADMIN11257" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">About the Oracle Database Fault Diagnosability Infrastructure</h2>
<p>This section contains background information on the Oracle Database fault diagnosability infrastructure. It contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGAJBC">Fault Diagnosability Infrastructure Overview</a></p>
</li>
<li>
<p><a href="#CHDIABIF">About Incidents and Problems</a></p>
</li>
<li>
<p><a href="#CHDHFIFB">Fault Diagnosability Infrastructure Components</a></p>
</li>
<li>
<p><a href="#CHDIABAA">Structure, Contents, and Location of the Automatic Diagnostic Repository</a></p>
</li>
</ul>
<a id="CHDGAJBC"></a>
<div id="ADMIN11258" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Fault Diagnosability Infrastructure Overview</h3>
<p><a id="sthref1063"></a><a id="sthref1064"></a><a id="sthref1065"></a><a id="sthref1066"></a>The fault diagnosability infrastructure aids in preventing, detecting, diagnosing, and resolving problems. The problems that are targeted in particular are critical errors such as those caused by code bugs, metadata corruption, and customer data corruption.</p>
<p>When a critical error occurs, it is assigned an incident number, and diagnostic data for the error (such as trace files) are immediately captured and tagged with this number. The data is then stored in the Automatic Diagnostic Repository (ADR)&mdash;a file-based repository outside the database&mdash;where it can later be retrieved by incident number and analyzed.</p>
<p>The goals of the fault diagnosability infrastructure are the following:</p>
<ul>
<li>
<p>First-failure diagnosis</p>
</li>
<li>
<p>Problem prevention</p>
</li>
<li>
<p>Limiting damage and interruptions after a problem is detected</p>
</li>
<li>
<p>Reducing problem diagnostic time</p>
</li>
<li>
<p>Reducing problem resolution time</p>
</li>
<li>
<p>Simplifying customer interaction with Oracle Support</p>
</li>
</ul>
<p>The keys to achieving these goals are the following technologies:</p>
<ul>
<li>
<p><span class="bold">Automatic capture of diagnostic data upon first failure</span>&mdash;For critical errors, the ability to capture error information at first-failure greatly increases the chance of a quick problem resolution and reduced downtime. An always-on memory-based tracing system proactively collects diagnostic data from many database components, and can help isolate root causes of problems. Such proactive diagnostic data is similar to the data collected by airplane "black box" flight recorders. When a problem is detected, alerts are generated and the fault diagnosability infrastructure is activated to capture and store diagnostic data. The data is stored in a repository that is outside the database (and therefore available when the database is down), and is easily accessible with command line utilities and Enterprise Manager.</p>
</li>
<li>
<p><span class="bold">Standardized trace formats</span>&mdash;Standardizing trace formats across all database components enables DBAs and Oracle Support personnel to use a single set of tools for problem analysis. Problems are more easily diagnosed, and downtime is reduced.</p>
</li>
<li>
<p><span class="bold">Health checks</span>&mdash;<a id="sthref1067"></a>Upon detecting a critical error, the fault diagnosability infrastructure can run one or more health checks to perform deeper analysis of a critical error. Health check results are then added to the other diagnostic data collected for the error. Individual health checks look for data block corruptions, undo and redo corruption, data dictionary corruption, and more. As a DBA, you can manually invoke these health checks, either on a regular basis or as required.</p>
</li>
<li>
<p><span class="bold">Incident packaging service (IPS) and incident packages</span>&mdash;<a id="sthref1068"></a><a id="sthref1069"></a><a id="sthref1070"></a>The IPS enables you to automatically and easily gather the diagnostic data&mdash;traces, dumps, health check reports, and more&mdash;pertaining to a critical error and package the data into a zip file for transmission to Oracle Support. Because all diagnostic data relating to a critical error are tagged with that error's incident number, you do not have to search through trace files and other files to determine the files that are required for analysis; the incident packaging service identifies the required files automatically and adds them to the zip file. Before creating the zip file, the IPS first collects diagnostic data into an intermediate logical structure called an incident package (package). Packages are stored in the Automatic Diagnostic Repository. If you choose to, you can access this intermediate logical structure, view and modify its contents, add or remove additional diagnostic data at any time, and when you are ready, create the zip file from the package. After these steps are completed, the zip file is ready to be uploaded to Oracle Support.</p>
</li>
<li>
<p><span class="bold">Data Recovery Advisor</span>&mdash;<a id="sthref1071"></a><a id="sthref1072"></a>The Data Recovery Advisor integrates with database health checks and RMAN to display data corruption problems, assess the extent of each problem (critical, high priority, low priority), describe the impact of a problem, recommend repair options, conduct a feasibility check of the customer-chosen option, and automate the repair process.</p>
</li>
<li>
<p><span class="bold">SQL Test Case Builder</span>&mdash;<a id="sthref1073"></a><a id="sthref1074"></a>For many SQL-related problems, obtaining a reproducible test case is an important factor in problem resolution speed. The SQL Test Case Builder automates the sometimes difficult and time-consuming process of gathering as much information as possible about the problem and the environment in which it occurred. After quickly gathering this information, you can upload it to Oracle Support to enable support personnel to easily and accurately reproduce the problem.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink PFGRF16001" href="../../server.112/e41573/sql_overview.htm#PFGRF16001"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for more information on SQL Test Case Builder</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDIABIF"></a>
<div id="ADMIN11259" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Incidents and Problems</h3>
<p><a id="sthref1075"></a><a id="sthref1076"></a>To facilitate diagnosis and resolution of critical errors, the fault diagnosability infrastructure introduces two concepts for Oracle Database: problems and incidents.</p>
<p>A <span class="bold">problem</span> is a critical error in a database instance, Oracle Automatic Storage Management (Oracle ASM) instance, or other Oracle product or component. Critical errors manifest as internal errors, such as <code dir="ltr">ORA-00600</code>, or other severe errors, such as <code dir="ltr">ORA-07445</code> (operating system exception) or <code dir="ltr">ORA-04031</code> (out of memory in the shared pool). Problems are tracked in the ADR. Each problem has a <span class="italic">problem key</span>, which is a text string that describes the problem. It includes an error code (such as <code dir="ltr">ORA</code> <code dir="ltr">600</code>) and in some cases, one or more error parameters.</p>
<p>An <span class="bold">incident</span> is a single occurrence of a problem. When a problem (critical error) occurs multiple times, an incident is created for each occurrence. Incidents are timestamped and tracked in the Automatic Diagnostic Repository (ADR). Each incident is identified by a numeric incident ID, which is unique within the ADR. When an incident occurs, the database:</p>
<ul>
<li>
<p>Makes an entry in the alert log.</p>
</li>
<li>
<p>Sends an <span class="italic">incident alert</span> to Oracle Enterprise Manager (Enterprise Manager).</p>
</li>
<li>
<p>Gathers first-failure diagnostic data about the incident in the form of dump files (incident dumps).</p>
</li>
<li>
<p>Tags the incident dumps with the incident ID.</p>
</li>
<li>
<p>Stores the incident dumps in an ADR subdirectory created for that incident.</p>
</li>
</ul>
<p>Diagnosis and resolution of a critical error usually starts with an incident alert. Incident alerts are displayed on the Enterprise Manager Database Home page or Oracle Automatic Storage Management Home page. The Database Home page also displays in its Related Alerts section any critical alerts in the Oracle ASM instance or other Oracle products or components. After viewing an alert, you can then view the problem and its associated incidents with Enterprise Manager or with the ADRCI command-line utility.</p>
<p>The following sections provide more information about incidents and problems:</p>
<ul>
<li>
<p><a href="#BHCFBIAE">Incident Flood Control</a></p>
</li>
<li>
<p><a href="#BHCECEJA">Related Problems Across the Topology</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a></p>
</li>
<li>
<p><a href="#CHDJDBCH">"Investigating, Reporting, and Resolving a Problem"</a></p>
</li>
<li>
<p><a href="#CHDBGJAI">"ADRCI Command-Line Utility"</a></p>
</li>
</ul>
</div>
<a id="BHCFBIAE"></a>
<div id="ADMIN13157" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Incident Flood Control</h4>
<p><a id="sthref1077"></a><a id="sthref1078"></a>It is conceivable that a problem could generate dozens or perhaps hundreds of incidents in a short period of time. This would generate too much diagnostic data, which would consume too much space in the ADR and could possibly slow down your efforts to diagnose and resolve the problem. For these reasons, the fault diagnosability infrastructure applies <span class="italic">flood control</span> to incident generation after certain thresholds are reached. A <span class="bold">flood-controlled incident</span> is an incident that generates an alert log entry, is recorded in the ADR, but does not generate incident dumps. Flood-controlled incidents provide a way of informing you that a critical error is ongoing, without overloading the system with diagnostic data. You can choose to view or hide flood-controlled incidents when viewing incidents with Enterprise Manager or the ADRCI command-line utility.</p>
<p>Threshold levels for incident flood control are predetermined and cannot be changed. They are defined as follows:</p>
<ul>
<li>
<p>After five incidents occur for the same problem key in one hour, subsequent incidents for this problem key are flood-controlled. Normal (non-flood-controlled) recording of incidents for that problem key begins again in the next hour.</p>
</li>
<li>
<p>After 25 incidents occur for the same problem key in one day, subsequent incidents for this problem key are flood-controlled. Normal recording of incidents for that problem key begins again on the next day.</p>
</li>
</ul>
<p>In addition, after 50 incidents for the same problem key occur in one hour, or 250 incidents for the same problem key occur in one day, subsequent incidents for this problem key are not recorded at all in the ADR. In these cases, the database writes a message to the alert log indicating that no further incidents will be recorded. As long as incidents continue to be generated for this problem key, this message is added to the alert log every ten minutes until the hour or the day expires. Upon expiration of the hour or day, normal recording of incidents for that problem key begins again.</p>
</div>
<!-- class="sect3" -->
<a id="BHCECEJA"></a>
<div id="ADMIN13158" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Related Problems Across the Topology</h4>
<p>For any problem identified in a database instance, the diagnosability framework can identify related problems across the topology of your Oracle Database installation. In a single instance environment, a related problem could be identified in the local Oracle ASM instance. In an Oracle RAC environment, a related problem could be identified in any database instance or Oracle ASM instance on any other node. When investigating problems, you are able to view and gather information on any related problems.</p>
<p>A problem is related to the original problem if it occurs within a designated time period or shares the same execution context identifier. <a id="sthref1079"></a><a id="sthref1080"></a>An <span class="bold">execution context identifier (ECID)</span> is a globally unique identifier used to tag and track a single call through the Oracle software stack, for example, a call to Oracle Fusion Middleware that then calls into Oracle Database to retrieve data. The ECID is typically generated in the middle tier and is passed to the database as an Oracle Call Interface (OCI) attribute. When a single call has failures on multiple tiers of the Oracle software stack, problems that are generated are tagged with the same ECID so that they can be correlated. You can then determine the tier on which the originating problem occurred.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDHFIFB"></a>
<div id="ADMIN11260" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Fault Diagnosability Infrastructure Components</h3>
<p>The following are the key components of the fault diagnosability infrastructure:</p>
<ul>
<li>
<p><a href="#CHDDHEBD">Automatic Diagnostic Repository (ADR)</a></p>
</li>
<li>
<p><a href="#CHDHEGBH">Alert Log</a></p>
</li>
<li>
<p><a href="#CHDFEBHD">Trace Files, Dumps, and Core Files</a></p>
</li>
<li>
<p><a href="#CHDFFFEC">Other ADR Contents</a></p>
</li>
<li>
<p><a href="#CHDCHHHB">Enterprise Manager Support Workbench</a></p>
</li>
<li>
<p><a href="#CHDBGJAI">ADRCI Command-Line Utility</a></p>
</li>
</ul>
<a id="CHDDHEBD"></a>
<div id="ADMIN11261" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Automatic Diagnostic Repository (ADR)</h4>
<p><a id="sthref1081"></a>The ADR is a file-based repository for database diagnostic data such as traces, dumps, the alert log, health monitor reports, and more. It has a unified directory structure across multiple instances and multiple products. Beginning with Release 11<span class="italic">g</span>, the database, Oracle Automatic Storage Management (Oracle ASM), the listener, and other Oracle products or components store all diagnostic data in the ADR. Each instance of each product stores diagnostic data underneath its own home directory within the ADR. For example, in an Oracle Real Application Clusters environment with shared storage and Oracle ASM, each database instance and each Oracle ASM instance has an ADR home directory. ADR's unified directory structure, consistent diagnostic data formats across products and instances, and a unified set of tools enable customers and Oracle Support to correlate and analyze diagnostic data across multiple instances.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Beginning with Release 11<span class="italic">g</span> of Oracle Database, because all diagnostic data, including the alert log, are stored in the ADR, the initialization parameters <a id="sthref1082"></a><a id="sthref1083"></a><code dir="ltr">BACKGROUND_DUMP_DEST</code> and <code dir="ltr">USER_DUMP_DEST</code> are deprecated. They are replaced by the initialization parameter <code dir="ltr">DIAGNOSTIC_DEST</code>, which identifies the location of the ADR.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIABAA">"Structure, Contents, and Location of the Automatic Diagnostic Repository"</a> for more information on the <code dir="ltr">DIAGNOSTIC_DEST</code> parameter and on ADR homes.</div>
</div>
<!-- class="sect3" -->
<a id="CHDHEGBH"></a>
<div id="ADMIN11262" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Alert Log</h4>
<p><a id="sthref1084"></a>The alert log is an XML file that is a chronological log of database messages and errors. It is stored in the ADR and includes messages about the following:</p>
<ul>
<li>
<p>Critical errors (incidents)</p>
</li>
<li>
<p>Administrative operations, such as starting up or shutting down the database, recovering the database, creating or dropping a tablespace, and others.</p>
</li>
<li>
<p>Errors during automatic refresh of a materialized view</p>
</li>
<li>
<p>Other database events</p>
</li>
</ul>
<p>You can view the alert log in text format (with the XML tags stripped) with Enterprise Manager and with the ADRCI utility. There is also a text-formatted version of the alert log stored in the ADR for backward compatibility. However, Oracle recommends that any parsing of the alert log contents be done with the XML-formatted version, because the text format is unstructured and may change from release to release.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDBGJAI">"ADRCI Command-Line Utility"</a></p>
</li>
<li>
<p><a href="#CHDGCEIH">"Viewing the Alert Log"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CHDFEBHD"></a>
<div id="ADMIN11263" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Trace Files, <a id="sthref1085"></a><a id="sthref1086"></a><a id="sthref1087"></a><a id="sthref1088"></a><a id="sthref1089"></a>Dumps, and Core Files</h4>
<p>Trace files, dumps, and core files contain diagnostic data that are used to investigate problems. They are stored in the ADR.</p>
<div id="ADMIN12320" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1090"></a>
<h5 class="sect4">Trace Files</h5>
<p>Each server and background process can write to an associated trace file. Trace files are updated periodically over the life of the process and can contain information on the process environment, status, activities, and errors. In addition, when a process detects a critical error, it writes information about the error to its trace file. The SQL trace facility also creates trace files, which provide performance information on individual SQL statements. You can enable SQL tracing for a session or an instance.</p>
<p>Trace file names are platform-dependent. Typically, database background process trace file names contain the Oracle SID, the background process name, and the operating system process number, while server process trace file names contain the Oracle SID, the string "ora", and the operating system process number. The file extension is <code dir="ltr">.trc</code>. An example of a server process trace file name is orcl_ora_344.trc. Trace files are sometimes accompanied by corresponding trace map (<code dir="ltr">.trm</code>) files, which contain structural information about trace files and are used for searching and navigation.</p>
<p>Oracle Database includes tools that help you analyze trace files. For more information on application tracing, SQL tracing, and tracing tools, see <a class="olink PFGRF010" href="../../server.112/e41573/sqltrace.htm#PFGRF010"><span class="italic">Oracle Database Performance Tuning Guide</span></a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIHIBA">"Finding Trace Files"</a></div>
</div>
<!-- class="sect4" -->
<div id="ADMIN12321" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1091"></a>
<h5 class="sect4">Dumps</h5>
<p>A dump is a specific type of trace file. A dump is typically a one-time output of diagnostic data in response to an event (such as an incident), whereas a trace tends to be continuous output of diagnostic data. When an incident occurs, the database writes one or more dumps to the incident directory created for the incident. Incident dumps also contain the incident number in the file name.</p>
</div>
<!-- class="sect4" -->
<div id="ADMIN12322" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1092"></a>
<h5 class="sect4">Core Files</h5>
<p>A core file contains a memory dump, in an all-binary, port-specific format. Core file names include the string "core" and the operating system process ID. Core files are useful to Oracle Support engineers only. Core files are not found on all platforms.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CHDFFFEC"></a>
<div id="ADMIN11264" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Other ADR Contents</h4>
<p>In addition to files mentioned in the previous sections, the ADR contains health monitor reports, data repair records, SQL test cases, incident packages, and more. These components are described later in the chapter.</p>
</div>
<!-- class="sect3" -->
<a id="CHDCHHHB"></a>
<div id="ADMIN11265" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Enterprise Manager Support Workbench</h4>
<p><a id="sthref1093"></a>The Enterprise Manager Support Workbench (Support Workbench) is a facility that enables you to investigate, report, and in some cases, repair problems (critical errors), all with an easy-to-use graphical interface. The Support Workbench provides a self-service means for you to gather first-failure diagnostic data, obtain a support request number, and upload diagnostic data to Oracle Support with a minimum of effort and in a very short time, thereby reducing time-to-resolution for problems. The Support Workbench also recommends and provides easy access to Oracle advisors that help you repair SQL-related problems, data corruption problems, and more.</p>
</div>
<!-- class="sect3" -->
<a id="CHDBGJAI"></a>
<div id="ADMIN11266" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">ADRCI Command-Line Utility</h4>
<p><a id="sthref1094"></a>The ADR Command Interpreter (ADRCI) is a utility that enables you to investigate problems, view health check reports, and package first-failure diagnostic data, all within a command-line environment. You can then upload the package to Oracle Support. ADRCI also enables you to view the names of the trace files in the ADR, and to view the alert log with XML tags stripped, with and without content filtering.</p>
<p>For more information on ADRCI, see <a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDIABAA"></a>
<div id="ADMIN11008" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Structure, Contents, and Location of the Automatic Diagnostic Repository</h3>
<p><a id="sthref1095"></a><a id="sthref1096"></a><a id="sthref1097"></a>The Automatic Diagnostic Repository (ADR) is a directory structure that is stored outside of the database. It is therefore available for problem diagnosis when the database is down.</p>
<p><a id="sthref1098"></a>The ADR root directory is known as <span class="bold">ADR base</span>. Its location is set by the <code dir="ltr">DIAGNOSTIC_DEST</code> initialization parameter. If this parameter is omitted or left null, the database sets <code dir="ltr">DIAGNOSTIC_DEST</code> upon startup as follows:</p>
<ul>
<li>
<p>If environment variable <code dir="ltr">ORACLE_BASE</code> is set, <code dir="ltr">DIAGNOSTIC_DEST</code> is set to the directory designated by <code dir="ltr">ORACLE_BASE</code>.</p>
</li>
<li>
<p>If environment variable <code dir="ltr">ORACLE_BASE</code> is not set, <code dir="ltr">DIAGNOSTIC_DEST</code> is set to <span class="italic">ORACLE_HOME</span>/log.</p>
</li>
</ul>
<p>Within ADR base, there can be multiple ADR homes, where each ADR home is the root directory for all diagnostic data&mdash;traces, dumps, the alert log, and so on&mdash;for a particular instance of a particular Oracle product or component. For example, in an Oracle Real Application Clusters environment with Oracle ASM, each database instance, Oracle ASM instance, and listener has an ADR home.</p>
<p>ADR homes reside in ADR base subdirectories that are named according to the product or component type. <a href="#BHCDHHGB">Figure 9-1</a> illustrates these top-level subdirectories.</p>
<div id="ADMIN13159" class="figure">
<p class="titleinfigure"><a id="BHCDHHGB"></a>Figure 9-1 Product/Component Type Subdirectories in the ADR</p>
<img width="404" height="174" src="img/admin082.gif" alt="Description of Figure 9-1 follows" /><br />
<a id="sthref1099" href="img_text/admin082.htm">Description of "Figure 9-1 Product/Component Type Subdirectories in the ADR"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Additional subdirectories might be created in the ADR depending on your configuration. Some products automatically purge expired diagnostic data from ADR. For other products, you can use the ADRCI utility <code dir="ltr">PURGE</code> command at regular intervals to purge expired diagnostic data.</div>
<p>The location of each ADR home is given by the following path, which starts at the ADR base directory:</p>
<pre dir="ltr">
diag/<span class="italic">product_type</span>/<span class="italic">product_id</span>/<span class="italic">instance_id</span>
</pre>
<p>As an example, <a href="#CHDBHGDB">Table 9-1</a> lists the values of the various path components for an Oracle Database instance.</p>
<div id="ADMIN13022" class="tblformal">
<p class="titleintable"><a id="sthref1100"></a><a id="CHDBHGDB"></a>Table 9-1 ADR Home Path Components for Oracle Database</p>
<table class="cellalignment1338" title="ADR Home Path Components for Oracle Database" summary="This table contains 2 columns and 3 rows. The first column lists a component of the path to an ADR home, and the 2nd column lists that component&rsquo;s value for the Oracle Database product." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t9">Path Component</th>
<th class="cellalignment1334" id="r1c2-t9">Value for Oracle Database</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t9" headers="r1c1-t9">
<p>product_type</p>
</td>
<td class="cellalignment1335" headers="r2c1-t9 r1c2-t9">
<p>rdbms</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t9" headers="r1c1-t9">
<p>product_id</p>
</td>
<td class="cellalignment1335" headers="r3c1-t9 r1c2-t9">
<p><code dir="ltr"><span class="codeinlineitalic">DB_UNIQUE_NAME</span></code></p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t9" headers="r1c1-t9">
<p>instance_id</p>
</td>
<td class="cellalignment1335" headers="r4c1-t9 r1c2-t9">
<p><span class="italic">SID</span></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>For example, for a database with a SID and database unique name both equal to <code dir="ltr">orclbi</code>, the ADR home would be in the following location:</p>
<pre dir="ltr">
<span class="italic">ADR_base</span>/diag/rdbms/orclbi/orclbi/
</pre>
<p>Similarly, the ADR home path for the Oracle ASM instance in a single-instance environment would be:</p>
<pre dir="ltr">
<span class="italic">ADR_base</span>/diag/asm/+asm/+asm/
</pre>
<p class="subhead2"><a id="ADMIN12566"></a>ADR Home Subdirectories</p>
<p>Within each ADR home directory are subdirectories that contain the diagnostic data. <a href="#CHDJCCGC">Table 9-2</a> lists some of these subdirectories and their contents.</p>
<div id="ADMIN13023" class="tblformal">
<p class="titleintable"><a id="sthref1101"></a><a id="CHDJCCGC"></a>Table 9-2 ADR Home Subdirectories</p>
<table class="cellalignment1338" title="ADR Home Subdirectories" summary="This table contains 2 columns and 4 rows. The first column lists the name of a subdirectory within ADR home, and the second column describes the subdirectory contents." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t10">Subdirectory Name</th>
<th class="cellalignment1334" id="r1c2-t10">Contents</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t10" headers="r1c1-t10">
<p>alert</p>
</td>
<td class="cellalignment1335" headers="r2c1-t10 r1c2-t10">
<p>The XML-formatted alert log</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t10" headers="r1c1-t10">
<p>cdump</p>
</td>
<td class="cellalignment1335" headers="r3c1-t10 r1c2-t10">
<p>Core files</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t10" headers="r1c1-t10">
<p>incident</p>
</td>
<td class="cellalignment1335" headers="r4c1-t10 r1c2-t10">
<p>Multiple subdirectories, where each subdirectory is named for a particular incident, and where each contains dumps pertaining only to that incident</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t10" headers="r1c1-t10">
<p>trace</p>
</td>
<td class="cellalignment1335" headers="r5c1-t10 r1c2-t10">
<p>Background and server process trace files, SQL trace files, and the text-formatted alert log</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t10" headers="r1c1-t10">
<p>(others)</p>
</td>
<td class="cellalignment1335" headers="r6c1-t10 r1c2-t10">
<p>Other subdirectories of ADR home, which store incident packages, health monitor reports, and other information</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p><a href="#CHDHDIDD">Figure 9-2</a> illustrates the complete directory hierarchy of the ADR for a database instance.</p>
<div id="ADMIN13024" class="figure">
<p class="titleinfigure"><a id="CHDHDIDD"></a>Figure 9-2 ADR Directory Structure for a Database Instance</p>
<img width="404" height="332" src="img/admin077.gif" alt="Description of Figure 9-2 follows" /><br />
<a id="sthref1102" href="img_text/admin077.htm">Description of "Figure 9-2 ADR Directory Structure for a Database Instance"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="subhead2"><a id="ADMIN12567"></a><a id="sthref1103"></a>ADR in an Oracle Real Application Clusters Environment</p>
<p>In an Oracle Real Application Clusters (Oracle RAC) environment, each node can have ADR base on its own local storage, or ADR base can be set to a location on shared storage. You can use ADRCI to view aggregated diagnostic data from all instances on a single report.</p>
<p class="subhead2"><a id="ADMIN13276"></a><a id="sthref1104"></a>ADR in Oracle Client</p>
<p>Each installation of Oracle Client includes an ADR for diagnostic data associated with critical failures in any of the Oracle Client components. The ADRCI utility is installed with Oracle Client so that you can examine diagnostic data and package it to enable it for upload to Oracle Support.</p>
<p class="subhead2"><a id="CHDJBHBJ"></a><a id="ADMIN12568"></a>Viewing ADR Locations with the V$DIAG_INFO View</p>
<p><a id="sthref1105"></a>The <code dir="ltr">V$DIAG_INFO</code> view lists all important ADR locations for the current Oracle Database instance.</p>
<pre dir="ltr">
SELECT * FROM V$DIAG_INFO;

INST_ID NAME                  VALUE
------- --------------------- -------------------------------------------------------------
      1 Diag Enabled          TRUE
      1 ADR Base              /u01/oracle
      1 ADR Home              /u01/oracle/diag/rdbms/orclbi/orclbi
      1 Diag Trace            /u01/oracle/diag/rdbms/orclbi/orclbi/trace
      1 Diag Alert            /u01/oracle/diag/rdbms/orclbi/orclbi/alert
      1 Diag Incident         /u01/oracle/diag/rdbms/orclbi/orclbi/incident
      1 Diag Cdump            /u01/oracle/diag/rdbms/orclbi/orclbi/cdump
      1 Health Monitor        /u01/oracle/diag/rdbms/orclbi/orclbi/hm
      1 Default Trace File    /u01/oracle/diag/rdbms/orclbi/orclbi/trace/orcl_ora_22769.trc
      1 Active Problem Count  8
      1 Active Incident Count 20
</pre>
<p>The following table describes some of the information displayed by this view.</p>
<div id="ADMIN13025" class="tblformal">
<p class="titleintable"><a id="sthref1106"></a><a id="sthref1107"></a>Table 9-3 Data in the V$DIAG_INFO View</p>
<table class="cellalignment1338" title="Data in the V$DIAG_INFO View" summary="This table has 2 columns: Name and Description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t11">Name</th>
<th class="cellalignment1334" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t11" headers="r1c1-t11">
<p>ADR Base</p>
</td>
<td class="cellalignment1335" headers="r2c1-t11 r1c2-t11">
<p>Path of ADR base</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t11" headers="r1c1-t11">
<p>ADR Home</p>
</td>
<td class="cellalignment1335" headers="r3c1-t11 r1c2-t11">
<p>Path of ADR home for the current database instance</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t11" headers="r1c1-t11">
<p>Diag Trace</p>
</td>
<td class="cellalignment1335" headers="r4c1-t11 r1c2-t11">
<p>Location of background process trace files, server process trace files, SQL trace files, and the text-formatted version of the alert log</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t11" headers="r1c1-t11">
<p>Diag Alert</p>
</td>
<td class="cellalignment1335" headers="r5c1-t11 r1c2-t11">
<p>Location of the XML-formatted version of the alert log</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t11" headers="r1c1-t11">
<p>Default Trace File</p>
</td>
<td class="cellalignment1335" headers="r6c1-t11 r1c2-t11">
<p>Path to the trace file for the current session</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p class="subhead2"><a id="ADMIN13483"></a>Viewing Critical Errors with the V$DIAG_CRITICAL_ERROR View</p>
<p><a id="sthref1108"></a>The <code dir="ltr">V$DIAG_CRITICAL_ERROR</code> view lists all of the non-internal errors designated as critical errors for the current Oracle Database release. The view does not list internal errors because internal errors are always designated as critical errors.</p>
<p>The following example shows the output for the <code dir="ltr">V$DIAG_CRITICAL_ERROR</code> view in Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.2):</p>
<pre dir="ltr">
SELECT * FROM V$DIAG_CRITICAL_ERROR;

FACILITY   ERROR
---------- ----------------------------------------------------------------
ORA        7445
ORA        4030
ORA        4031
ORA        29740
ORA        255
ORA        355
ORA        356
ORA        239
ORA        240
ORA        494
ORA        3137
ORA        227
ORA        353
ORA        1578
ORA        32701
ORA        32703
ORA        29770
ORA        29771
ORA        445
ORA        25319
OCI        3106
OCI        3113
OCI        3135
</pre>
<p>The following table describes the information displayed by this view.</p>
<div id="ADMIN13484" class="tblformal">
<p class="titleintable"><a id="sthref1109"></a><a id="sthref1110"></a>Table 9-4 Data in the V$DIAG_CRITICAL_ERROR View</p>
<table class="cellalignment1338" title="Data in the V$DIAG_CRITICAL_ERROR View" summary="This table has 2 columns: Column and Description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t12">Column</th>
<th class="cellalignment1334" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">FACILITY</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t12 r1c2-t12">
<p>The facility that can report the error, such as Oracle Database (ORA) or Oracle Call Interface (OCI)</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">ERROR</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t12 r1c2-t12">
<p>The error number</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIABIF">"About Incidents and Problems"</a> for more information about internal errors</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDJDBCH"></a>
<div id="ADMIN12290" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Investigating, Reporting, and Resolving a Problem</h2>
<p>This section describes how to use the Enterprise Manager Support Workbench (Support Workbench) to investigate and report a problem (critical error), and in some cases, resolve the problem. The section begins with a "roadmap" that summarizes the typical set of tasks that you must perform.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The tasks described in this section are all Enterprise Manager&ndash;based. You can also accomplish all of these tasks (or their equivalents) with the <code dir="ltr">ADRCI</code> command-line utility, with PL/SQL packages such as <code dir="ltr">DBMS_HM</code> and <code dir="ltr">DBMS_SQLDIAG</code>, and with other software tools. See <a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a> for more information on the <code dir="ltr">ADRCI</code> utility, and see <a class="olink ARPLS" href="../../appdev.112/e40758/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information on PL/SQL packages.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIAADE">"About the Oracle Database Fault Diagnosability Infrastructure"</a> for more information on problems and their diagnostic data</div>
<div id="ADMIN12291" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1111"></a>
<h3 class="sect2">Roadmap&mdash;Investigating, Reporting, and Resolving a Problem</h3>
<p>You can begin investigating a problem by starting from the Support Workbench home page in Enterprise Manager. However, the more typical workflow begins with a critical error alert on the Database Home page. This section provides an overview of that workflow.</p>
<p><a href="#CHDDIIEG">Figure 9-3</a> illustrates the tasks that you complete to investigate, report, and in some cases, resolve a problem.</p>
<div id="ADMIN13026" class="figure">
<p class="titleinfigure"><a id="CHDDIIEG"></a>Figure 9-3 Workflow for Investigating, Reporting, and Resolving a Problem</p>
<img width="422" height="429" src="img/admin079.gif" alt="Description of Figure 9-3 follows" /><br />
<a id="sthref1112" href="img_text/admin079.htm">Description of "Figure 9-3 Workflow for Investigating, Reporting, and Resolving a Problem"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The following are task descriptions. Subsequent sections provide details for each task.</p>
<ul>
<li>
<p><a href="#CHDBFADF"><span class="xreftitlebold">Task 1: View Critical Error Alerts in Enterprise Manager</span></a></p>
<p>Start by accessing the Database Home page in Enterprise Manager, and reviewing critical error alerts. Select an alert for which to view details, and then go to the Problem Details page.</p>
</li>
<li>
<p><a href="#CHDJBEHD"><span class="xreftitlebold">Task 2: View Problem Details</span></a></p>
<p>Examine the problem details and view a list of all incidents that were recorded for the problem. Display findings from any health checks that were automatically run.</p>
</li>
<li>
<p><a href="#CHDCFGBB"><span class="xreftitlebold">Task 3: (Optional) Gather Additional Diagnostic Information</span></a></p>
<p>Optionally run additional health checks or other diagnostics. For SQL-related errors, optionally invoke the SQL Test Case Builder, which gathers all required data related to a SQL problem and packages the information in a way that enables the problem to be reproduced at Oracle Support.</p>
</li>
<li>
<p><a href="#CHDDCGCA"><span class="xreftitlebold">Task 4: (Optional) Create a Service Request</span></a></p>
<p>Optionally create a service request with My Oracle Support and record the service request number with the problem information. If you skip this step, you can create a service request later, or the Support Workbench can create one for you.</p>
</li>
<li>
<p><a href="#CHDCAECH"><span class="xreftitlebold">Task 5: Package and Upload Diagnostic Data to Oracle Support</span></a></p>
<p>Invoke a guided workflow (a <span class="italic">wizard</span>) that automatically packages the gathered diagnostic data for a problem and uploads the data to Oracle Support.</p>
</li>
<li>
<p><a href="#CHDFGDGB"><span class="xreftitlebold">Task 6: Track the Service Request and Implement Any Repairs</span></a></p>
<p>Optionally maintain an activity log for the service request in the Support Workbench. Run Oracle advisors to help repair SQL failures or corrupted data.</p>
</li>
<li>
<p><a href="#CHDHJHCD"><span class="xreftitlebold">Task 7: Close Incidents</span></a></p>
<p>Set status for one, some, or all incidents for the problem to Closed.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a></div>
</div>
<!-- class="sect2" -->
<a id="CHDBFADF"></a>
<div id="ADMIN12292" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 1: View Critical Error Alerts in Enterprise Manager</h3>
<p>You begin the process of investigating problems (critical errors) by reviewing critical error alerts on the Database Home page or Oracle Automatic Storage Management Home page.</p>
<p class="subhead2"><a id="ADMIN12569"></a>To view critical error alerts:</p>
<ol>
<li>
<p>Access the Database Home page in Enterprise Manager.</p>
<p>For Oracle Enterprise Manager Database Control, see <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for instructions. For Oracle Enterprise Manager Grid Control, go to the desired database target.</p>
</li>
<li>
<p>Do one of the following to view critical error alerts. (Critical error alerts are indicated by a red &times; in the Severity column, and the text "Incident" in the Category column.)</p>
<ul>
<li>
<p>View the alerts in the Alerts section.</p>
<p>You may have to click the hide/show icon next to the Alerts heading to display the alerts.</p>
</li>
<li>
<p>View the alerts in the Related Alerts section.</p>
<p>The Target Name indicates the Oracle product or component that experienced the critical error. See <a href="#BHCECEJA">"Related Problems Across the Topology"</a> for more information.</p>
</li>
<li>
<p>View critical alerts for the Oracle ASM instance by completing these steps:</p>
<ol>
<li>
<p>In the General section, click the link next to the label <span class="bold">ASM</span>.</p>
</li>
<li>
<p>On the Oracle Automatic Storage Management Home page, scroll down to view the Alerts section.</p>
</li>
</ol>
</li>
</ul>
<div id="ADMIN13027" class="figure">
<p class="titleinfigure"><a id="sthref1113"></a>Figure 9-4 Alerts Section of the Database Home Page</p>
<img width="1014" height="158" src="img/diag_db_home_critical_alert.gif" alt="Description of Figure 9-4 follows" /><br />
<a id="sthref1114" href="img_text/diag_db_home_critical_alert.htm">Description of "Figure 9-4 Alerts Section of the Database Home Page"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>In the Message column, click the message of the critical error alert that you want investigate.</p>
<p>The Incident page or Data Failure page appears. This page includes:</p>
<ul>
<li>
<p>Problem information, including the number of incidents for the problem</p>
</li>
<li>
<p>A Performance and Critical Error graphical timeline for the 24-hour period in which the critical error occurred (database instance only).</p>
</li>
<li>
<p>Alert details, including severity, timestamp, and message</p>
</li>
<li>
<p>Controls that enable you to clear the alert or record a comment about it.</p>
</li>
</ul>
</li>
<li>
<p>Review the Performance and Critical Error graphical timeline if present, and note any time correlation between performance issues and the critical error. Optionally clear the alert or leave a comment about it.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDJBEHD"></a>
<div id="ADMIN12293" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 2: View Problem Details</h3>
<p>You continue your investigation by viewing the Problem Details page.</p>
<p class="subhead2"><a id="ADMIN12570"></a>To view problem details:</p>
<ol>
<li>
<p>On the Incident page or Data Failure page, click <span class="bold">View Problem Details</span>.</p>
<p>The Problem Details page appears, showing the Incidents subpage.</p>
</li>
<li>
<p>(Optional) Do one or both of the following:</p>
<ul>
<li>
<p>In the Investigate and Resolve section, on the Self Service tab, under Diagnose, click <span class="bold">Related Problems Across Topology</span>.</p>
<p>A page appears showing any related problems in the local Oracle Automatic Storage Management (Oracle ASM) instance, or in the database or Oracle ASM instances on other nodes in an Oracle Real Application Clusters environment. This step is recommended if any critical alerts appear in the Related Alerts section on the Enterprise Manager Database Home page.</p>
<p>See <a href="#BHCECEJA">"Related Problems Across the Topology"</a> for more information.</p>
</li>
<li>
<p>View incident details by completing these steps:</p>
<ol>
<li>
<p>In the Incidents subpage, select an incident, and then click <span class="bold">View</span>.</p>
</li>
<li>
<p>(Optional) On the Incident Details page, click <span class="bold">Checker Findings</span> to view the Checker Findings subpage.</p>
<p>This page displays findings from any health checks that were automatically run when the critical error was detected.</p>
<p>See <a href="#CHDFCCAE">"Running Health Checks with Health Monitor"</a> for more information.</p>
</li>
</ol>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDCFGBB"></a>
<div id="ADMIN12294" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 3: (Optional) Gather Additional Diagnostic Information</h3>
<p>You can perform the following activities to gather additional diagnostic information for a problem. This additional information is then automatically included in the diagnostic data that is uploaded to Oracle Support. If you are unsure about performing these activities, then check with your Oracle Support representative.</p>
<ul>
<li>
<p>Manually invoke additional health checks</p>
<p>See <a href="#CHDFCCAE">"Running Health Checks with Health Monitor"</a></p>
</li>
<li>
<p>Invoke the SQL Test Case Builder</p>
<p>See <a class="olink PFGRF16001" href="../../server.112/e41573/sql_overview.htm#PFGRF16001"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for instructions.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CHDDCGCA"></a>
<div id="ADMIN12295" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 4: (Optional) Create a Service Request</h3>
<p>At this point, you can create an Oracle Support service request and record the service request number with the problem information. If you choose to skip this task, the Support Workbench will automatically create a draft service request for you in Task 5.</p>
<p class="subhead2"><a id="ADMIN12571"></a>To create a service request:</p>
<ol>
<li>
<p>On the Problem Details page, in the Investigate and Resolve section, click <span class="bold">Go to My Oracle Support and Research</span>.</p>
<p>The My Oracle Support Sign In and Registration page appears in a new browser window.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions for returning to the Problem Details page if you are not already there.</div>
</li>
<li>
<p>Log in to My Oracle Support and create a service request in the usual manner.</p>
<p>(Optional) Remember the service request number (SR#) for the next step.</p>
</li>
<li>
<p>(Optional) Return to the Problem Details page, and then do the following:</p>
<ol>
<li>
<p>In the Summary section, click the <span class="bold">Edit</span> button that is adjacent to the SR# label.</p>
</li>
<li>
<p>Enter the SR#, and then click <span class="bold">OK</span>.</p>
</li>
</ol>
<p>The SR# is recorded in the Problem Details page. This is for your reference only.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDCAECH"></a>
<div id="ADMIN12296" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 5: Package and Upload Diagnostic Data to Oracle Support</h3>
<p>For this task, you use the quick packaging process of the Support Workbench to package and upload the diagnostic information for the problem to Oracle Support. Quick packaging has a minimum of steps, organized in a guided workflow (a wizard). The wizard assists you with creating an incident package (package) for a single problem, creating a zip file from the package, and uploading the file. With quick packaging, you are not able to edit or otherwise customize the diagnostic information that is uploaded. However, quick packaging is the more direct, straightforward method to package and upload diagnostic data.</p>
<p>To edit or remove sensitive data from the diagnostic information, enclose additional user files (such as application configuration files or scripts), or perform other customizations before uploading, you must use the custom packaging process, which is a more manual process and has more steps. See <a href="#CHDCACEJ">"Creating, Editing, and Uploading Custom Incident Packages"</a> for instructions. If you choose to follow those instructions instead of the instructions here in Task 5, do so now and then continue with <a href="#CHDFGDGB">Task 6: Track the Service Request and Implement Any Repairs</a> when you are finished.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Support Workbench uses Oracle Configuration Manager to upload the diagnostic data. If Oracle Configuration Manager is not installed or properly configured, the upload may fail. In this case, a message is displayed with a request that you upload the file to Oracle Support manually. You can upload manually with My Oracle Support.
<p>For more information about Oracle Configuration Manager, see <a class="olink CCRIA" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CCRIA"><span class="italic">Oracle Configuration Manager Installation and Administration Guide</span></a>.</p>
</div>
<p class="subhead2"><a id="ADMIN12572"></a>To package and upload diagnostic data to Oracle Support:</p>
<ol>
<li>
<p>On the Problem Details page, in the Investigate and Resolve section, click <span class="bold">Quick Package</span>.</p>
<p>The Create New Package page of the Quick Packaging wizard appears.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions for returning to the Problem Details page if you are not already there.</div>
<img width="880" height="404" src="img/quick_package_wizard_page1.gif" alt="Description of quick_package_wizard_page1.gif follows" /><br />
<a id="sthref1115" href="img_text/quick_package_wizard_page1.htm">Description of the illustration quick_package_wizard_page1.gif</a><br />
<br /></li>
<li>
<p>Optionally enter a package name and description.</p>
</li>
<li>
<p>Fill in the remaining fields on the page. If you already created a service request for this problem, select <span class="bold">No</span> next to Create new Service Request (SR).</p>
<p>If you select Yes, the Quick Packaging wizard creates a draft service request on your behalf. You must later log in to My Oracle Support and fill in the details of the service request.</p>
</li>
<li>
<p>Click <span class="bold">Next</span>, and then proceed with the remaining pages of the Quick Packaging wizard.</p>
<p>When the Quick Packaging wizard is complete, the package that it creates remains available in the Support Workbench. You can then modify it with custom packaging operations (such as adding new incidents) and reupload at a later time. See <a href="#CHDDFCHC">"Viewing and Modifying Incident Packages"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDFGDGB"></a>
<div id="ADMIN12297" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 6: Track the Service Request and Implement Any Repairs</h3>
<p>After uploading diagnostic information to Oracle Support, you might perform various activities to track the service request, to collect additional diagnostic information, and to implement repairs. Among these activities are the following:</p>
<ul>
<li>
<p>Adding an Oracle bug number to the problem information.</p>
<p>To do so, on the Problem Details page, click the <span class="bold">Edit</span> button that is adjacent to the Bug# label. This is for your reference only.</p>
</li>
<li>
<p><a id="sthref1116"></a><a id="sthref1117"></a><a id="sthref1118"></a>Adding comments to the problem activity log.</p>
<p>You may want to do this to share problem status or history information with other DBAs in your organization. For example you could record the results of your conversations with Oracle Support. To add comments, complete the following steps:</p>
<ol>
<li>
<p>Access the Problem Details page for the problem, as described in <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a>.</p>
</li>
<li>
<p>Click <span class="bold">Activity Log</span> to display the Activity Log subpage.</p>
</li>
<li>
<p>In the Comment field, enter a comment, and then click <span class="bold">Add Comment</span>.</p>
<p>Your comment is recorded in the activity log.</p>
</li>
</ol>
</li>
<li>
<p>As new incidents occur, adding them to the package and reuploading.</p>
<p>For this activity, you must use the custom packaging method described in <a href="#CHDCACEJ">"Creating, Editing, and Uploading Custom Incident Packages"</a>.</p>
</li>
<li>
<p>Running health checks.</p>
<p>See <a href="#CHDFCCAE">"Running Health Checks with Health Monitor"</a>.</p>
</li>
<li>
<p>Running a suggested Oracle advisor to implement repairs.</p>
<p>Access the suggested advisor in one of the following ways:</p>
<ul>
<li>
<p><span class="bold">Problem Details page</span>&mdash;In the Self-Service tab of the Investigate and Resolve section</p>
</li>
<li>
<p><span class="bold">Support Workbench home page</span>&mdash;on the Checker Findings subpage</p>
</li>
<li>
<p><span class="bold">Incident Details page</span>&mdash;on the Checker Findings subpage</p>
</li>
</ul>
<p><a href="#CHDJJCIJ">Table 9-5</a> lists the advisors that help repair critical errors.</p>
<div id="ADMIN13028" class="tblformalwide">
<p class="titleintable"><a id="sthref1119"></a><a id="CHDJJCIJ"></a>Table 9-5 Oracle Advisors that Help Repair Critical Errors</p>
<table class="cellalignment1333" title="Oracle Advisors that Help Repair Critical Errors" summary="This table contains two columns: Advisor Name and Purpose. It has two rows: one for the Data Recovery Advisor and one for the SQL Repair Advisor" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t20">Advisor</th>
<th class="cellalignment1334" id="r1c2-t20">Critical Errors Addressed</th>
<th class="cellalignment1334" id="r1c3-t20">See</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t20" headers="r1c1-t20">
<p>Data Recovery Advisor</p>
</td>
<td class="cellalignment1335" headers="r2c1-t20 r1c2-t20">
<p>Corrupted blocks, corrupted or missing files, and other data failures</p>
</td>
<td class="cellalignment1335" headers="r2c1-t20 r1c3-t20">
<p><a href="#CHDBHCFF">"Repairing Data Corruptions with the Data Recovery Advisor"</a></p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t20" headers="r1c1-t20">
<p>SQL Repair Advisor</p>
</td>
<td class="cellalignment1335" headers="r3c1-t20 r1c2-t20">
<p>SQL statement failures</p>
</td>
<td class="cellalignment1335" headers="r3c1-t20 r1c3-t20">
<p><a href="#CHDBIGAA">"Repairing SQL Failures with the SQL Repair Advisor"</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" --></li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions for viewing the Checker Findings subpage of the Incident Details page</div>
</div>
<!-- class="sect2" -->
<a id="CHDHJHCD"></a>
<div id="ADMIN12298" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Task 7: Close Incidents</h3>
<p>When a particular incident is no longer of interest, you can close it. By default, closed incidents are not displayed on the Problem Details page.</p>
<p>All incidents, whether closed or not, are purged after 30 days. You can disable purging for an incident on the Incident Details page.</p>
<p class="subhead2"><a id="ADMIN12573"></a>To close incidents:</p>
<ol>
<li>
<p>Access the Support Workbench home page.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions.</p>
</li>
<li>
<p>Select the desired problem, and then click <span class="bold">View</span>.</p>
<p>The Problem Details page appears.</p>
</li>
<li>
<p>Select the incidents to close and then click <span class="bold">Close</span>.</p>
<p>A confirmation page appears.</p>
</li>
<li>
<p>Enter an optional comment and click <span class="bold">OK</span>.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBCHID"></a>
<div id="ADMIN12299" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Viewing Problems with the Enterprise Manager Support Workbench</h2>
<p><a id="sthref1120"></a>You use the Enterprise Manager Support Workbench home page (<a href="#CHDIEFFF">Figure 9-5</a>) to view all problems or only those within a specified time period.</p>
<div id="ADMIN13029" class="figure">
<p class="titleinfigure"><a id="CHDIEFFF"></a>Figure 9-5 Enterprise Manager Support Workbench Home Page</p>
<img width="888" height="593" src="img/support_workbench_home.gif" alt="Description of Figure 9-5 follows" /><br />
<a id="sthref1121" href="img_text/support_workbench_home.htm">Description of "Figure 9-5 Enterprise Manager Support Workbench Home Page"</a><br />
<br /></div>
<!-- class="figure" -->
<p class="subhead2"><a id="ADMIN12574"></a>To access the Support Workbench home page (database or Oracle ASM):</p>
<ol>
<li>
<p>Access the Database Home page in Enterprise Manager.</p>
<p>See <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for the instructions for Oracle Enterprise Manager Database Control. For Oracle Enterprise Manager Grid Control, go to the desired database target.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>In the Diagnostic Summary section, click the numeric link next to the label <span class="bold">Active Incidents</span>.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Software and Support</span>, and then under Support, click <span class="bold">Support Workbench</span>.</p>
</li>
</ul>
<p>The Support Workbench home page for the database instance appears, showing the Problems subpage. By default the problems from the last 24 hours are displayed.</p>
</li>
<li>
<p><a id="sthref1122"></a>To view the Support Workbench home page for the Oracle ASM instance, click the link <span class="bold">Support Workbench (+ASM_</span><span class="bolditalic">hostname</span><span class="bold">)</span> in the Related Links section.</p>
</li>
</ol>
<p class="subhead2"><a id="ADMIN13160"></a>To view problems and incidents:</p>
<ol>
<li>
<p>On the Support Workbench home page, select the desired time period from the View list. To view all problems, select <span class="bold">All</span>.</p>
</li>
<li>
<p>(Optional) If the Performance and Critical Error section is hidden, click the <span class="bold">Show/Hide</span> icon adjacent to the section heading to show the section.</p>
<p>This section enables you to view any correlation between performance changes and incident occurrences.</p>
</li>
<li>
<p>(Optional) Under the Details column, click <span class="bold">Show</span> to display a list of all incidents for a problem, and then click an incident ID to display the Incident Details page.</p>
</li>
</ol>
<p class="subhead2"><a id="ADMIN12575"></a>To view details for a particular problem:</p>
<ol>
<li>
<p>On the Support Workbench home page, select the problem, and then click <span class="bold">View</span>.</p>
<p>The Problem Details page appears, showing the Incidents subpage. The incidents subpage shows all incidents that are open and that generated dumps&mdash;that is, that were not flood-controlled.</p>
</li>
<li>
<p>(Optional) To view both open and closed incidents, select <span class="bold">All Incidents</span> in the Status list. To view both normal and <a id="sthref1123"></a><a id="sthref1124"></a>flood-controlled incidents, select <span class="bold">All Incidents</span> in the Data Dumped list.</p>
</li>
<li>
<p>(Optional) To view details for an incident, select the incident, and then click <span class="bold">View</span>.</p>
<p>The Incident Details page appears.</p>
</li>
<li>
<p>(Optional) On the Incident Details page, to view checker findings for the incident, click <span class="bold">Checker Findings</span>.</p>
</li>
<li>
<p>(Optional) On the Incident Details page, to view the user actions that are available to you for the incident, click <span class="bold">Additional Diagnostics</span>. Each user action provides a way for you to gather additional diagnostics for the incident or its problem.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BHCFBIAE">"Incident Flood Control"</a></div>
</div>
<!-- class="sect1" -->
<a id="CHDFECDJ"></a>
<div id="ADMIN12323" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Creating a User-Reported Problem</h2>
<p>System-generated problems&mdash;critical errors generated internally to the database&mdash;are automatically added to the Automatic Diagnostic Repository (ADR) and tracked in the Support Workbench. From the Support Workbench, you can gather additional diagnostic data on these problems, upload diagnostic data to Oracle Support, and in some cases, resolve the problems, all with the easy-to-use workflow that is explained in <a href="#CHDJDBCH">"Investigating, Reporting, and Resolving a Problem"</a>.</p>
<p>There may be a situation in which you want to manually add a problem that you noticed to the ADR so that you can put that problem through that same workflow. An example of such a situation might be a global database performance problem that was not diagnosed by Automatic Diagnostic Database Monitor (ADDM). The Support Workbench includes a mechanism for you to create and work with such a user-reported problem.</p>
<p class="subhead2"><a id="ADMIN12576"></a>To create a user-reported problem:</p>
<ol>
<li>
<p>Access the Support Workbench home page.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions.</p>
</li>
<li>
<p>Under Related Links, click <span class="bold">Create User-Reported Problem</span>.</p>
<p>The Create User-Reported Problem page appears.</p>
<img width="921" height="275" src="img/create_user_reported_prob.gif" alt="Description of create_user_reported_prob.gif follows" /><br />
<a id="sthref1125" href="img_text/create_user_reported_prob.htm">Description of the illustration create_user_reported_prob.gif</a><br />
<br /></li>
<li>
<p>If your problem matches one of the listed issue types, select the issue type, and then click <span class="bold">Run Recommended Advisor</span> to attempt to solve the problem with an Oracle advisor.</p>
</li>
<li>
<p>If the recommended advisor did not solve the problem, or if you did not run an advisor, do one of the following:</p>
<ul>
<li>
<p>If your problem matches one of the listed issue types, select the issue type, and then click <span class="bold">Continue with Creation of Problem</span>.</p>
</li>
<li>
<p>If your problem does not match one of the listed issue types, select the issue type <span class="bold">None of the Above</span>, enter a description, and then click <span class="bold">Continue with Creation of Problem</span>.</p>
</li>
</ul>
<p>The Problem Details page appears.</p>
</li>
<li>
<p>Follow the instructions on the Problem Details page.</p>
<p>See <a href="#CHDJDBCH">"Investigating, Reporting, and Resolving a Problem"</a> for more information.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIAADE">"About the Oracle Database Fault Diagnosability Infrastructure"</a> for more information on problems and the ADR</div>
</div>
<!-- class="sect1" -->
<a id="CHDGCEIH"></a>
<div id="ADMIN11267" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Viewing the Alert Log<a id="sthref1126"></a></h2>
<p>You can view the alert log with a text editor, with Enterprise Manager, or with the ADRCI utility.</p>
<p class="subhead2"><a id="ADMIN12577"></a>To view the alert log with Enterprise Manager:</p>
<ol>
<li>
<p>Access the Database Home page in Enterprise Manager.</p>
<p>For Oracle Enterprise Manager Database Control, see <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for instructions. For Oracle Enterprise Manager Grid Control, go to the desired database target.</p>
</li>
<li>
<p>Under Related Links, click <span class="bold">Alert Log Contents</span>.</p>
<p>The View Alert Log Contents page appears.</p>
</li>
<li>
<p>Select the number of entries to view, and then click <span class="bold">Go</span>.</p>
</li>
</ol>
<p class="subhead2"><a id="ADMIN12578"></a>To view the alert log with a text editor:</p>
<ol>
<li>
<p>Connect to the database with SQL*Plus or another query tool, such as SQL Developer.</p>
</li>
<li>
<p>Query the <code dir="ltr">V$DIAG_INFO</code> view as shown in <a href="#CHDJBHBJ">"Viewing ADR Locations with the V$DIAG_INFO View"</a>.</p>
</li>
<li>
<p>To view the text-only alert log, without the XML tags, complete these steps:</p>
<ol>
<li>
<p>In the <code dir="ltr">V$DIAG_INFO</code> query results, note the path that corresponds to the <code dir="ltr">Diag</code> <code dir="ltr">Trace</code> entry, and change directory to that path.</p>
</li>
<li>
<p>Open file alert_<span class="italic">SID</span>.log with a text editor.</p>
</li>
</ol>
</li>
<li>
<p>To view the XML-formatted alert log, complete these steps:</p>
<ol>
<li>
<p>In the <code dir="ltr">V$DIAG_INFO</code> query results, note the path that corresponds to the <code dir="ltr">Diag</code> <code dir="ltr">Alert</code> entry, and change directory to that path.</p>
</li>
<li>
<p>Open the file log.xml with a text editor.</p>
</li>
</ol>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a> for information about using the ADRCI utility to view a text version of the alert log (with XML tags stripped) and to run queries against the alert log</div>
</div>
<!-- class="sect1" -->
<a id="CHDIHIBA"></a>
<div id="ADMIN12484" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Finding Tr<a id="sthref1127"></a>ace Files</h2>
<p>Trace files are stored in the Automatic Diagnostic Repository (ADR), in the <code dir="ltr">trace</code> directory under each ADR home. To help you locate individual trace files within this directory, you can use data dictionary views. For example, you can find the path to your current session's trace file or to the trace file for each Oracle Database process.</p>
<p class="subhead2"><a id="ADMIN12579"></a>To find the trace file for your current session:</p>
<ul>
<li>
<p>Submit the following query:</p>
<pre dir="ltr">
SELECT VALUE FROM V$DIAG_INFO WHERE NAME = 'Default Trace File';
</pre>
<p>The full path to the trace file is returned.</p>
</li>
</ul>
<p class="subhead2"><a id="ADMIN12580"></a>To find all trace files for the current instance:</p>
<ul>
<li>
<p>Submit the following query:</p>
<pre dir="ltr">
SELECT VALUE FROM V$DIAG_INFO WHERE NAME = 'Diag Trace';
</pre>
<p>The path to the ADR trace directory for the current instance is returned.</p>
</li>
</ul>
<p class="subhead2"><a id="ADMIN12581"></a>To determine the trace file for each Oracle Database process:</p>
<ul>
<li>
<p>Submit the following query:</p>
<pre dir="ltr">
SELECT PID, PROGRAM, TRACEFILE FROM V$PROCESS;
</pre></li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDIABAA">"Structure, Contents, and Location of the Automatic Diagnostic Repository"</a></p>
</li>
<li>
<p>The ADRCI <code dir="ltr">SHOW</code> <code dir="ltr">TRACEFILE</code> command in <a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CHDFCCAE"></a>
<div id="ADMIN11269" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Running Health<a id="sthref1128"></a> Checks with Health Monitor</h2>
<p>This section describes the Health Monitor and includes instructions on how to use it. The following topics are covered:</p>
<ul>
<li>
<p><a href="#CHDBIIGD">About Health Monitor</a></p>
</li>
<li>
<p><a href="#CHDGBDAC">Running Health Checks Manually</a></p>
</li>
<li>
<p><a href="#CHDJJBBJ">Viewing Checker Reports</a></p>
</li>
<li>
<p><a href="#CHDDCFEC">Health Monitor Views</a></p>
</li>
<li>
<p><a href="#CHDCBDGE">Health Check Parameters Reference</a></p>
</li>
</ul>
<a id="CHDBIIGD"></a>
<div id="ADMIN11270" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Health Monitor</h3>
<p>Beginning with Release 11<span class="italic">g</span>, Oracle Database includes a framework called Health Monitor for running diagnostic checks on the database.</p>
<div id="ADMIN11271" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1129"></a>
<h4 class="sect3">About Health Monitor Checks</h4>
<p><a id="sthref1130"></a>Health Monitor checks (also known as checkers, health checks, or checks) examine various layers and components of the database. Health checks detect file corruptions, physical and logical block corruptions, undo and redo corruptions, data dictionary corruptions, and more. The health checks generate reports of their findings and, in many cases, recommendations for resolving problems. Health checks can be run in two ways:</p>
<ul>
<li>
<p><span class="bold">Reactive</span>&mdash;The fault diagnosability infrastructure can run health checks automatically in response to a critical error.</p>
</li>
<li>
<p><span class="bold">Manual</span>&mdash;As a DBA, you can manually run health checks using either the <code dir="ltr">DBMS_HM</code> PL/SQL package or the Enterprise Manager interface. You can run checkers on a regular basis if desired, or Oracle Support may ask you to run a checker while working with you on a service request.</p>
</li>
</ul>
<p>Health Monitor checks store findings, recommendations, and other information in the Automatic Diagnostic Repository (ADR).</p>
<p>Health checks can run in two modes:</p>
<ul>
<li>
<p><span class="bold">DB-online</span> mode means the check can be run while the database is open (that is, in <code dir="ltr">OPEN</code> mode or <code dir="ltr">MOUNT</code> mode).</p>
</li>
<li>
<p><span class="bold">DB-offline</span> mode means the check can be run when the instance is available but the database itself is closed (that is, in <code dir="ltr">NOMOUNT</code> mode).</p>
</li>
</ul>
<p>All the health checks can be run in DB-online mode. Only the Redo Integrity Check and the DB Structure Integrity Check can be used in DB-offline mode.</p>
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a href="#CHDDHEBD">"Automatic Diagnostic Repository (ADR)"</a></div>
</div>
<!-- class="sect3" -->
<a id="CHDDGBJC"></a>
<div id="ADMIN11272" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Types of Health Checks</h4>
<p>Health monitor runs the following checks:</p>
<ul>
<li>
<p><span class="bold">DB Structure Integrity Check</span>&mdash;This check verifies the integrity of database files and reports failures if these files are inaccessible, corrupt or inconsistent. If the database is in mount or open mode, this check examines the log files and data files listed in the control file. If the database is in <code dir="ltr">NOMOUNT</code> mode, only the control file is checked.</p>
</li>
<li>
<p><span class="bold">Data Block Integrity Check</span>&mdash;This check detects disk image block corruptions such as checksum failures, head/tail mismatch, and logical inconsistencies within the block. Most corruptions can be repaired using Block Media Recovery. Corrupted block information is also captured in the <code dir="ltr">V$DATABASE_BLOCK_CORRUPTION</code> view. This check does not detect inter-block or inter-segment corruption.</p>
</li>
<li>
<p><span class="bold">Redo Integrity Check</span>&mdash;This check scans the contents of the redo log for accessibility and corruption, as well as the archive logs, if available. The Redo Integrity Check reports failures such as archive log or redo corruption.</p>
</li>
<li>
<p><span class="bold">Undo Segment Integrity Check</span>&mdash;This check finds logical undo corruptions. After locating an undo corruption, this check uses PMON and SMON to try to recover the corrupted transaction. If this recovery fails, then Health Monitor stores information about the corruption in <code dir="ltr">V$CORRUPT_XID_LIST</code>. Most undo corruptions can be resolved by forcing a commit.</p>
</li>
<li>
<p><span class="bold">Transaction Integrity Check</span>&mdash;This check is identical to the Undo Segment Integrity Check except that it checks only one specific transaction.</p>
</li>
<li>
<p><span class="bold">Dictionary Integrity Check</span>&mdash;This check examines the integrity of core dictionary objects, such as <code dir="ltr">tab$</code> and <code dir="ltr">col$</code>. It performs the following operations:</p>
<ul>
<li>
<p>Verifies the contents of dictionary entries for each dictionary object.</p>
</li>
<li>
<p>Performs a cross-row level check, which verifies that logical constraints on rows in the dictionary are enforced.</p>
</li>
<li>
<p>Performs an object relationship check, which verifies that parent-child relationships between dictionary objects are enforced.</p>
</li>
</ul>
<p>The Dictionary Integrity Check operates on the following dictionary objects:</p>
<p><code dir="ltr">tab$</code>, <code dir="ltr">clu$</code>, <code dir="ltr">fet$</code>, <code dir="ltr">uet$</code>, <code dir="ltr">seg$</code>, <code dir="ltr">undo$</code>, <code dir="ltr">ts$</code>, <code dir="ltr">file$</code>, <code dir="ltr">obj$</code>, <code dir="ltr">ind$</code>, <code dir="ltr">icol$</code>, <code dir="ltr">col$</code>, <code dir="ltr">user$</code>, <code dir="ltr">con$</code>, <code dir="ltr">cdef$</code>, <code dir="ltr">ccol$</code>, <code dir="ltr">bootstrap$</code>, <code dir="ltr">objauth$</code>, <code dir="ltr">ugroup$</code>, <code dir="ltr">tsq$</code>, <code dir="ltr">syn$</code>, <code dir="ltr">view$</code>, <code dir="ltr">typed_view$</code>, <code dir="ltr">superobj$</code>, <code dir="ltr">seq$</code>, <code dir="ltr">lob$</code>, <code dir="ltr">coltype$</code>, <code dir="ltr">subcoltype$</code>, <code dir="ltr">ntab$</code>, <code dir="ltr">refcon$</code>, <code dir="ltr">opqtype$</code>, <code dir="ltr">dependency$</code>, <code dir="ltr">access$</code>, <code dir="ltr">viewcon$</code>, <code dir="ltr">icoldep$</code>, <code dir="ltr">dual$</code>, <code dir="ltr">sysauth$</code>, <code dir="ltr">objpriv$</code>, <code dir="ltr">defrole$</code>, and <code dir="ltr">ecol$</code>.</p>
</li>
</ul>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDGBDAC"></a>
<div id="ADMIN11273" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Running Health Checks Manually</h3>
<p><a id="sthref1131"></a>Health Monitor provides two ways to run health checks manually:</p>
<ul>
<li>
<p>By using the <code dir="ltr">DBMS_HM</code> PL/SQL package</p>
</li>
<li>
<p>By using the Enterprise Manager interface, found on the Checkers subpage of the Advisor Central page</p>
</li>
</ul>
<div id="ADMIN11274" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1132"></a>
<h4 class="sect3">Running Health Checks Using the DBMS_HM PL/SQL Package</h4>
<p>The <code dir="ltr">DBMS_HM</code> procedure for running a health check is called <code dir="ltr">RUN_CHECK</code>. To call <code dir="ltr">RUN_CHECK</code>, supply the name of the check and a name for the run, as follows:</p>
<pre dir="ltr">
BEGIN
  DBMS_HM.RUN_CHECK('Dictionary Integrity Check', 'my_run');
END;
/
</pre>
<p>To obtain a list of health check names, run the following query:</p>
<pre dir="ltr">
SELECT name FROM v$hm_check WHERE internal_check='N';

NAME
----------------------------------------------------------------
DB Structure Integrity Check
Data Block Integrity Check
Redo Integrity Check
Transaction Integrity Check
Undo Segment Integrity Check
Dictionary Integrity Check
</pre>
<p>Most health checks accept input parameters. You can view parameter names and descriptions with the <code dir="ltr">V$HM_CHECK_PARAM</code> view. Some parameters are mandatory while others are optional. If optional parameters are omitted, defaults are used. The following query displays parameter information for all health checks:</p>
<pre dir="ltr">
SELECT c.name check_name, p.name parameter_name, p.type,
p.default_value, p.description
FROM v$hm_check_param p, v$hm_check c
WHERE p.check_id = c.id and c.internal_check = 'N'
ORDER BY c.name;
</pre>
<p>Input parameters are passed in the <code dir="ltr">input_params</code> argument as name/value pairs separated by semicolons (;). The following example illustrates how to pass the transaction ID as a parameter to the Transaction Integrity Check:</p>
<pre dir="ltr">
BEGIN
  DBMS_HM.RUN_CHECK (
   check_name   =&gt; 'Transaction Integrity Check',
   run_name     =&gt; 'my_run',
   input_params =&gt; 'TXN_ID=7.33.2');
END;
/
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCBDGE">"Health Check Parameters Reference"</a></p>
</li>
<li>
<p><a class="olink ARPLS144" href="../../appdev.112/e40758/d_hm.htm#ARPLS144"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more examples of using <code dir="ltr">DBMS_HM</code>.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADMIN11275" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1133"></a>
<h4 class="sect3">Running Health Checks Using Enterprise Manager</h4>
<p>Enterprise Manager provides an interface for running Health Monitor checkers.</p>
<p class="subhead2"><a id="ADMIN12582"></a>To run a Health Monitor Checker using Enterprise Manager:</p>
<ol>
<li>
<p>On the Database Home page, in the Related Links section, click <span class="bold">Advisor Central</span>.</p>
</li>
<li>
<p>Click <span class="bold">Checkers</span> to view the Checkers subpage.</p>
</li>
<li>
<p>In the Checkers section, click the checker you want to run.</p>
</li>
<li>
<p>Enter values for input parameters or, for optional parameters, leave them blank to accept the defaults.</p>
</li>
<li>
<p>Click <span class="bold">Run</span>, confirm your parameters, and click <span class="bold">Run</span> again.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDJJBBJ"></a>
<div id="ADMIN11276" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing Checker Reports</h3>
<p><a id="sthref1134"></a><a id="sthref1135"></a>After a checker has run, you can view a report of its execution. The report contains findings, recommendations, and other information. You can view reports using Enterprise Manager, the ADRCI utility, or the <code dir="ltr">DBMS_HM</code> PL/SQL package. The following table indicates the report formats available with each viewing method.</p>
<div class="inftblinformal">
<table class="cellalignment1333" title="Checker Report Display Methods and Formats" summary="This table contains 2 columns and 3 rows. The columns are Report Display Method and Report Format. The three rows incidate that Enterprise Manager displays the report in HTML format, the PL/SQL package displays in text format, and ADRCI displays in XML format." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t28">Report Viewing Method</th>
<th class="cellalignment1334" id="r1c2-t28">Report Formats Available</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t28" headers="r1c1-t28">Enterprise Manager</td>
<td class="cellalignment1335" headers="r2c1-t28 r1c2-t28">HTML</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t28" headers="r1c1-t28"><code dir="ltr">DBMS_HM</code> PL/SQL package</td>
<td class="cellalignment1335" headers="r3c1-t28 r1c2-t28">HTML, XML, and text</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t28" headers="r1c1-t28">ADRCI utility</td>
<td class="cellalignment1335" headers="r4c1-t28 r1c2-t28">XML</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>Results of checker runs (findings, recommendations, and other information) are stored in the ADR, but reports are not generated immediately. When you request a report with the <code dir="ltr">DBMS_HM</code> PL/SQL package or with Enterprise Manager, if the report does not yet exist, it is first generated from the checker run data in the ADR, stored as a report file in XML format in the HM subdirectory of the ADR home for the current instance, and then displayed. If the report file already exists, it is just displayed. When using the ADRCI utility, you must first run a command to generate the report file if it does not exist, and then run another command to display its contents.</p>
<p>The preferred method to view checker reports is with Enterprise Manager. The following sections provide instructions for all methods:</p>
<ul>
<li>
<p><a href="#CHDJBEGB">Viewing Reports Using Enterprise Manager</a></p>
</li>
<li>
<p><a href="#CHDJDBCI">Viewing Reports Using DBMS_HM</a></p>
</li>
<li>
<p><a href="#CHDEIIBG">Viewing Reports Using the ADRCI Utility</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a href="#CHDDHEBD">"Automatic Diagnostic Repository (ADR)"</a></div>
<a id="CHDJBEGB"></a>
<div id="ADMIN12300" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Reports Using Enterprise Manager</h4>
<p>You can also view Health Monitor reports and findings for a given checker run using Enterprise Manager.</p>
<p class="subhead2"><a id="ADMIN12583"></a>To view run findings using Enterprise Manager</p>
<ol>
<li>
<p>Access the Database Home page.</p>
<p>For Oracle Enterprise Manager Database Control, see <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for instructions. For Oracle Enterprise Manager Grid Control, go to the desired database target.</p>
</li>
<li>
<p>In the Related Links section, click <span class="bold">Advisor Central</span>.</p>
</li>
<li>
<p>Click <span class="bold">Checkers</span> to view the Checkers subpage.</p>
</li>
<li>
<p>Click the run name for the checker run that you want to view.</p>
<p>The Run Detail page appears, showing the findings for that checker run.</p>
</li>
<li>
<p>Click <span class="bold">Runs</span> to display the Runs subpage.</p>
<p>Enterprise Manager displays more information about the checker run.</p>
</li>
<li>
<p>Click <span class="bold">View Report</span> to view the report for the checker run.</p>
<p>The report is displayed in a new browser window.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDJDBCI"></a>
<div id="ADMIN11278" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Reports Using DBMS_HM</h4>
<p>You can view Health Monitor checker reports with the <code dir="ltr">DBMS_HM</code> package function <code dir="ltr">GET_RUN_REPORT</code>. This function enables you to request HTML, XML, or text formatting. The default format is text, as shown in the following SQL*Plus example:</p>
<pre dir="ltr">
SET LONG 100000
SET LONGCHUNKSIZE 1000
SET PAGESIZE 1000
SET LINESIZE 512
SELECT DBMS_HM.GET_RUN_REPORT('HM_RUN_1061') FROM DUAL;

DBMS_HM.GET_RUN_REPORT('HM_RUN_1061')
-----------------------------------------------------------------------
 
 Run Name                     : HM_RUN_1061
 Run Id                       : 1061
 Check Name                   : Data Block Integrity Check
 Mode                         : REACTIVE
 Status                       : COMPLETED
 Start Time                   : 2007-05-12 22:11:02.032292 -07:00
 End Time                     : 2007-05-12 22:11:20.835135 -07:00
 Error Encountered            : 0
 Source Incident Id           : 7418
 Number of Incidents Created  : 0
 
Input Paramters for the Run
 BLC_DF_NUM=1
 BLC_BL_NUM=64349
 
Run Findings And Recommendations
 Finding
 Finding Name  : Media Block Corruption
 Finding ID    : 1065
 Type          : FAILURE
 Status        : OPEN
 Priority      : HIGH
 Message       : Block 64349 in datafile 1:
               '/u01/app/oracle/dbs/t_db1.f' is media corrupt
 Message       : Object BMRTEST1 owned by SYS might be unavailable
 Finding
 Finding Name  : Media Block Corruption
 Finding ID    : 1071
 Type          : FAILURE
 Status        : OPEN
 Priority      : HIGH
 Message       : Block 64351 in datafile 1:
               '/u01/app/oracle/dbs/t_db1.f' is media corrupt
 Message       : Object BMRTEST2 owned by SYS might be unavailable
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS144" href="../../appdev.112/e40758/d_hm.htm#ARPLS144"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for details on the <code dir="ltr">DBMS_HM</code> package.</div>
</div>
<!-- class="sect3" -->
<a id="CHDEIIBG"></a>
<div id="ADMIN11277" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Reports Using the ADRCI Utility</h4>
<p>You can create and view Health Monitor checker reports using the ADRCI utility.</p>
<p class="subhead2"><a id="ADMIN12584"></a><a id="sthref1136"></a>To create and view a checker report using ADRCI:</p>
<ol>
<li>
<p>Ensure that operating system environment variables (such as <code dir="ltr">ORACLE_HOME</code>) are set properly, and then enter the following command at the operating system command prompt:</p>
<pre dir="ltr">
ADRCI
</pre>
<p>The utility starts and displays the following prompt:</p>
<pre dir="ltr">
adrci&gt;&gt;
</pre>
<p>Optionally, you can change the current ADR home. Use the <code dir="ltr">SHOW HOMES</code> command to list all ADR homes, and the <code dir="ltr">SET HOMEPATH</code> command to change the current ADR home. See <a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a> for more information.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">
show hm_run
</pre>
<p>This command lists all the checker runs (stored in <code dir="ltr">V$HM_RUN</code>) registered in the ADR repository.</p>
</li>
<li>
<p>Locate the checker run for which you want to create a report and note the checker run name. The <code dir="ltr">REPORT_FILE</code> field contains a filename if a report already exists for this checker run. Otherwise, generate the report with the following command:</p>
<pre dir="ltr">
create report hm_run <span class="italic">run_name</span>
</pre></li>
<li>
<p>To view the report, enter the following command:</p>
<pre dir="ltr">
show report hm_run <span class="italic">run_name</span>
</pre></li>
</ol>
<div class="infobox-note">
<p class="notep1">See Also:</p>
<a href="#CHDDHEBD">"Automatic Diagnostic Repository (ADR)"</a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDDCFEC"></a>
<div id="ADMIN12485" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Health Monitor Views</h3>
<p>Instead of requesting a checker report, you can view the results of a specific checker run by directly querying the ADR data from which reports are created. This data is available through the views <code dir="ltr">V$HM_RUN</code>, <code dir="ltr">V$HM_FINDING</code>, and <code dir="ltr">V$HM_RECOMMENDATION</code>.</p>
<p>The following example queries the <code dir="ltr">V$HM_RUN</code> view to determine a history of checker runs:</p>
<pre dir="ltr">
SELECT run_id, name, check_name, run_mode, src_incident FROM v$hm_run;

    RUN_ID NAME         CHECK_NAME                         RUN_MODE SRC_INCIDENT
---------- ------------ ---------------------------------- -------- ------------
         1 HM_RUN_1     DB Structure Integrity Check       REACTIVE            0
       101 HM_RUN_101   Transaction Integrity Check        REACTIVE         6073
       121 TXNCHK       Transaction Integrity Check        MANUAL              0
       181 HMR_tab$     Dictionary Integrity Check         MANUAL              0
          .
          .
          .
       981 Proct_ts$    Dictionary Integrity Check         MANUAL              0
      1041 HM_RUN_1041  DB Structure Integrity Check       REACTIVE            0
      1061 HM_RUN_1061  Data Block Integrity Check         REACTIVE         7418
</pre>
<p>The next example queries the <code dir="ltr">V$HM_FINDING</code> view to obtain finding details for the reactive data block check with <code dir="ltr">RUN_ID</code> 1061:</p>
<pre dir="ltr">
SELECT type, description FROM v$hm_finding WHERE run_id = 1061;

TYPE          DESCRIPTION
------------- -----------------------------------------
FAILURE       Block 64349 in datafile 1: '/u01/app/orac
              le/dbs/t_db1.f' is media corrupt
 
FAILURE       Block 64351 in datafile 1: '/u01/app/orac
              le/dbs/t_db1.f' is media corrupt
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDDGBJC">"Types of Health Checks"</a></p>
</li>
<li>
<p><a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for more information on the <code dir="ltr">V$HM_*</code> views</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDCBDGE"></a>
<div id="ADMIN12486" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Health Check Parameters Reference</h3>
<p>The following tables describe the parameters for those health checks that require them. Parameters with a default value of <code dir="ltr">(none)</code> are mandatory.</p>
<div id="ADMIN13030" class="tblformal">
<p class="titleintable"><a id="sthref1137"></a><a id="sthref1138"></a>Table 9-6 Parameters for Data Block Integrity Check</p>
<table class="cellalignment1338" title="Parameters for Data Block Integrity Check" summary="This table contains 4 columns: parameter name, type, default value, description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t33">Parameter Name</th>
<th class="cellalignment1334" id="r1c2-t33">Type</th>
<th class="cellalignment1334" id="r1c3-t33">Default Value</th>
<th class="cellalignment1334" id="r1c4-t33">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t33" headers="r1c1-t33">
<p><code dir="ltr">BLC_DF_NUM</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t33 r1c2-t33">
<p>Number</p>
</td>
<td class="cellalignment1335" headers="r2c1-t33 r1c3-t33">
<p>(none)</p>
</td>
<td class="cellalignment1335" headers="r2c1-t33 r1c4-t33">
<p>Block data file number</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t33" headers="r1c1-t33">
<p><code dir="ltr">BLC_BL_NUM</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t33 r1c2-t33">
<p>Number</p>
</td>
<td class="cellalignment1335" headers="r3c1-t33 r1c3-t33">
<p>(none)</p>
</td>
<td class="cellalignment1335" headers="r3c1-t33 r1c4-t33">
<p>Data block number</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ADMIN13031" class="tblformal">
<p class="titleintable"><a id="sthref1139"></a><a id="sthref1140"></a>Table 9-7 Parameters for Redo Integrity Check</p>
<table class="cellalignment1338" title="Parameters for Redo Integrity Check" summary="This table contains 4 columns: parameter name, type, default value, description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t34">Parameter Name</th>
<th class="cellalignment1334" id="r1c2-t34">Type</th>
<th class="cellalignment1334" id="r1c3-t34">Default Value</th>
<th class="cellalignment1334" id="r1c4-t34">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t34" headers="r1c1-t34">
<p><code dir="ltr">SCN_TEXT</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t34 r1c2-t34">
<p>Text</p>
</td>
<td class="cellalignment1335" headers="r2c1-t34 r1c3-t34">
<p>0</p>
</td>
<td class="cellalignment1335" headers="r2c1-t34 r1c4-t34">
<p>SCN of the latest good redo (if known)</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ADMIN13032" class="tblformal">
<p class="titleintable"><a id="sthref1141"></a><a id="sthref1142"></a>Table 9-8 Parameters for Undo Segment Integrity Check</p>
<table class="cellalignment1338" title="Parameters for Undo Segment Integrity Check" summary="This table contains 4 columns: parameter name, type, default value, description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t35">Parameter Name</th>
<th class="cellalignment1334" id="r1c2-t35">Type</th>
<th class="cellalignment1334" id="r1c3-t35">Default Value</th>
<th class="cellalignment1334" id="r1c4-t35">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t35" headers="r1c1-t35">
<p><code dir="ltr">USN_NUMBER</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t35 r1c2-t35">
<p>Text</p>
</td>
<td class="cellalignment1335" headers="r2c1-t35 r1c3-t35">
<p>(none)</p>
</td>
<td class="cellalignment1335" headers="r2c1-t35 r1c4-t35">
<p>Undo segment number</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ADMIN13033" class="tblformal">
<p class="titleintable"><a id="sthref1143"></a><a id="sthref1144"></a>Table 9-9 Parameters for Transaction Integrity Check</p>
<table class="cellalignment1338" title="Parameters for Transaction Integrity Check" summary="This table contains 4 columns: parameter name, type, default value, description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t36">Parameter Name</th>
<th class="cellalignment1334" id="r1c2-t36">Type</th>
<th class="cellalignment1334" id="r1c3-t36">Default Value</th>
<th class="cellalignment1334" id="r1c4-t36">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t36" headers="r1c1-t36">
<p><code dir="ltr">TXN_ID</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t36 r1c2-t36">
<p>Text</p>
</td>
<td class="cellalignment1335" headers="r2c1-t36 r1c3-t36">
<p>(none)</p>
</td>
<td class="cellalignment1335" headers="r2c1-t36 r1c4-t36">
<p>Transaction ID</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div id="ADMIN13034" class="tblformal">
<p class="titleintable"><a id="sthref1145"></a><a id="sthref1146"></a>Table 9-10 Parameters for Dictionary Integrity Check</p>
<table class="cellalignment1338" title="Parameters for Dictionary Integrity Check" summary="This table contains 4 columns: parameter name, type, default value, description." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t37">Parameter Name</th>
<th class="cellalignment1334" id="r1c2-t37">Type</th>
<th class="cellalignment1334" id="r1c3-t37">Default Value</th>
<th class="cellalignment1334" id="r1c4-t37">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t37" headers="r1c1-t37">
<p><code dir="ltr">CHECK_MASK</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t37 r1c2-t37">
<p>Text</p>
</td>
<td class="cellalignment1335" headers="r2c1-t37 r1c3-t37">
<p><code dir="ltr">ALL</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t37 r1c4-t37">
<p>Possible values are:</p>
<ul>
<li>
<p><code dir="ltr">COLUMN_CHECKS</code>&mdash;Run column checks only. Verify column-level constraints in the core tables.</p>
</li>
<li>
<p><code dir="ltr">ROW_CHECKS</code>&mdash;Run row checks only. Verify row-level constraints in the core tables.</p>
</li>
<li>
<p><code dir="ltr">REFERENTIAL_CHECKS</code>&mdash;Run referential checks only. Verify referential constraints in the core tables.</p>
</li>
<li>
<p><code dir="ltr">ALL</code>&mdash;Run all checks.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t37" headers="r1c1-t37">
<p><code dir="ltr">TABLE_NAME</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t37 r1c2-t37">
<p>Text</p>
</td>
<td class="cellalignment1335" headers="r3c1-t37 r1c3-t37">
<p><code dir="ltr">ALL_CORE_TABLES</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t37 r1c4-t37">
<p>Name of a single core table to check. If omitted, all core tables are checked.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBIGAA"></a>
<div id="ADMIN12301" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Repairing SQL <a id="sthref1147"></a><a id="sthref1148"></a>Failures with the SQL Repair Advisor</h2>
<p>In the rare case that a SQL statement fails with a critical error, you can run the SQL Repair Advisor to try to repair the failed statement.</p>
<p>This section covers the following topics:</p>
<ul>
<li>
<p><a href="#CHDICBEG">About the SQL Repair Advisor</a></p>
</li>
<li>
<p><a href="#CHDIFADC">Running the SQL Repair Advisor</a></p>
</li>
<li>
<p><a href="#CHDFFHGA">Viewing, Disabling, or Removing a SQL Patch</a></p>
</li>
</ul>
<a id="CHDICBEG"></a>
<div id="ADMIN12324" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About <a id="sthref1149"></a>the SQL Repair Advisor</h3>
<p>You run the SQL Repair Advisor after a SQL statement fails with a critical error. The advisor analyzes the statement and in many cases recommends a patch to repair the statement. If you implement the recommendation, the applied SQL patch circumvents the failure by causing the query optimizer to choose an alternate execution plan for future executions.</p>
</div>
<!-- class="sect2" -->
<a id="CHDIFADC"></a>
<div id="ADMIN12325" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Running <a id="sthref1150"></a><a id="sthref1151"></a>the SQL Repair Advisor</h3>
<p>You run the SQL Repair Advisor from the Problem Details page of the Support Workbench. The instructions in this section assume that you were already notified of a critical error caused by your SQL statement and that you followed the workflow described in <a href="#CHDJDBCH">"Investigating, Reporting, and Resolving a Problem"</a>.</p>
<p class="subhead2"><a id="ADMIN12585"></a>To run the SQL Repair Advisor:</p>
<ol>
<li>
<p>Access the Problem Details page for the problem that pertains to the failed SQL statement.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions.</p>
</li>
<li>
<p>In the Investigate and Resolve section, under the Self Service tab, under the Resolve heading, click <span class="bold">SQL Repair Advisor</span>.</p>
<img width="775" height="454" src="img/advisor_access1.gif" alt="Description of advisor_access1.gif follows" /><br />
<a id="sthref1152" href="img_text/advisor_access1.htm">Description of the illustration advisor_access1.gif</a><br />
<br /></li>
<li>
<p>On the SQL Repair Advisor page, complete these steps:</p>
<ol>
<li>
<p>Modify the preset task name if desired, optionally enter a task description, modify or clear the optional time limit for the advisor task, and adjust settings to schedule the advisor to run either immediately or at a future date and time.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
</li>
</ol>
<p>A "Processing" page appears. After a short delay, the SQL Repair Results page appears.</p>
<img width="813" height="189" src="img/sql_repair_advisor_results.gif" alt="Description of sql_repair_advisor_results.gif follows" /><br />
<a id="sthref1153" href="img_text/sql_repair_advisor_results.htm">Description of the illustration sql_repair_advisor_results.gif</a><br />
<br />
<p>A check mark in the SQL Patch column indicates that a recommendation is present. The absence of a check mark in this column means that the SQL Repair Advisor was unable to devise a patch for the SQL statement.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If the SQL Repair Results page fails to appear, then complete these steps to display it:
<ol>
<li>
<p>Go to the Database Home page.</p>
</li>
<li>
<p>Under Related Links, click <span class="bold">Advisor Central</span>.</p>
</li>
<li>
<p>On the Advisor Central page, in the Results list, locate the most recent entry for the SQL Repair Advisor.</p>
</li>
<li>
<p>Select the entry and click <span class="bold">View Result</span>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If a recommendation is present (there is a check mark in the SQL Patch column), click <span class="bold">View</span> to view the recommendation.</p>
<p>The Repair Recommendations page appears, showing the recommended patch for the statement.</p>
</li>
<li>
<p>Click <span class="bold">Implement</span>.</p>
<p>The SQL Repair Results page returns, showing a confirmation message.</p>
</li>
<li>
<p>(Optional) Click <span class="bold">Verify using SQL Worksheet</span> to run the statement in the SQL worksheet and verify that the patch successfully repaired the statement.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CHDFFHGA"></a>
<div id="ADMIN12326" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing, Disabling, or Removing <a id="sthref1154"></a><a id="sthref1155"></a><a id="sthref1156"></a><a id="sthref1157"></a><a id="sthref1158"></a><a id="sthref1159"></a>a SQL Patch</h3>
<p>After you apply a SQL patch with the SQL Repair Advisor, you may want to view it to confirm its presence, disable it, or remove it. One reason to remove a patch is if you install a later release of Oracle Database that fixes the bug that caused the failure in the patched SQL statement.</p>
<p class="subhead2"><a id="ADMIN12586"></a>To view, disable, or remove a SQL patch:</p>
<ol>
<li>
<p>Access the Database Home page in Enterprise Manager.</p>
<p>For Oracle Enterprise Manager Database Control, see <a class="olink ADMQS033" href="../../server.112/e10897/em_manage.htm#ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for instructions. For Oracle Enterprise Manager Grid Control, go to the desired database target.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">Server</span> to display the Server page.</p>
</li>
<li>
<p>In the Query Optimizer section, click <span class="bold">SQL Plan Control</span>.</p>
<p>The SQL Plan Control page appears. See the online help for information about this page.</p>
</li>
<li>
<p>At the top of the page, click <span class="bold">SQL Patch</span> to display the SQL Patch subpage.</p>
<p>The SQL Patch subpage displays all SQL patches in the database.</p>
</li>
<li>
<p>Locate the desired patch by examining the associated SQL text.</p>
<p>Click the SQL text to view the complete text of the statement.</p>
</li>
<li>
<p>To disable the patch, select it, and then click <span class="bold">Disable</span>.</p>
<p>A confirmation message appears, and the patch status changes to <code dir="ltr">DISABLED</code>. You can later reenable the patch by selecting it and clicking <span class="bold">Enable</span>.</p>
</li>
<li>
<p>To remove the patch, select it, and then click <span class="bold">Drop</span>.</p>
<p>A confirmation message appears.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDICBEG">"About the SQL Repair Advisor"</a></div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDBHCFF"></a>
<div id="ADMIN12487" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Repairing Data Corruptions with the Data Recovery Advisor</h2>
<p><a id="sthref1160"></a>You use the Data Recovery Advisor to repair data block corruptions, undo corruptions, data dictionary corruptions, and more. The Data Recovery Advisor integrates with the Enterprise Manager Support Workbench (Support Workbench), with the Health Monitor, and with the RMAN utility to display data corruption problems, assess the extent of each problem (critical, high priority, low priority), describe the impact of a problem, recommend repair options, conduct a feasibility check of the customer-chosen option, and automate the repair process.</p>
<p>This section describes the various ways to access the advisor from the Support Workbench. The Data Recovery Advisor is automatically recommended by and accessible from the Support Workbench when you are viewing:</p>
<ul>
<li>
<p>Problem details for a problem that is related to a data corruption or other data failure.</p>
</li>
<li>
<p>Health checker findings that are related to a data corruption or other data failure.</p>
</li>
</ul>
<p>The Data Recovery Advisor is also available from the Advisor Central page. A link to this page can be found in the Related Links section of the Database Home page and of the Performance page.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Data Recovery Advisor is available only when you are connected as <code dir="ltr">SYSDBA</code>.</div>
<p>You access the Data Recovery Advisor from the Support Workbench in the following ways:</p>
<ul>
<li>
<p>From the Problem Details page</p>
<img width="884" height="491" src="img/dra_access_1.gif" alt="Description of dra_access_1.gif follows" /><br />
<a id="sthref1161" href="img_text/dra_access_1.htm">Description of the illustration dra_access_1.gif</a><br />
<br />
<p>Click the <span class="bold">Data Recovery Advisor</span> link in the Investigate and Resolve section.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions on how to access this page.</p>
</li>
<li>
<p>From the Checker Findings subpage of the Support Workbench home page</p>
<img width="939" height="421" src="img/dra_access_2.gif" alt="Description of dra_access_2.gif follows" /><br />
<a id="sthref1162" href="img_text/dra_access_2.htm">Description of the illustration dra_access_2.gif</a><br />
<br />
<p>Select one or more data corruption findings and then click <span class="bold">Launch Recovery Advisor</span>.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions on how to access the Support Workbench home page.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMQS098" href="../../server.112/e10897/backrest.htm#ADMQS098"><span class="italic">Oracle Database 2 Day DBA</span></a> and <a class="olink BRADV246" href="../../backup.112/e10642/rcmrepai.htm#BRADV246"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about the Data Recovery Advisor</div>
</div>
<!-- class="sect1" -->
<a id="CHDCACEJ"></a>
<div id="ADMIN12302" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Creating, Editing, and U<a id="sthref1163"></a>ploading Custom Incident Packages</h2>
<p>Using the Enterprise Manager Support Workbench (Support Workbench), you can create, edit, and upload custom incident packages. With custom incident packages, you have fine control over the diagnostic data that you send to Oracle Support.</p>
<p>In this section:</p>
<ul>
<li>
<p><a href="#CHDHADDF">About Incident Packages</a></p>
</li>
<li>
<p><a href="#CHDCGBAH">Packaging and Uploading Problems with Custom Packaging</a></p>
</li>
<li>
<p><a href="#CHDDFCHC">Viewing and Modifying Incident Packages</a></p>
</li>
<li>
<p><a href="#BHCHJDIA">Creating, Editing, and Uploading Correlated Packages</a></p>
</li>
<li>
<p><a href="#BHCDIAJH">Deleting Correlated Packages</a></p>
</li>
<li>
<p><a href="#CHDDHICA">Setting Incident Packaging Preferences</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDIAADE">"About the Oracle Database Fault Diagnosability Infrastructure"</a></div>
<a id="CHDHADDF"></a>
<div id="ADMIN12303" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Incident Packages</h3>
<p>For the customized approach to uploading diagnostic data to Oracle Support, you first collect the data into an intermediate logical structure called an incident package (package). A <span class="bold">package</span> is a collection of metadata that is stored in the Automatic Diagnostic Repository (ADR) and that points to diagnostic data files and other files both in and out of the ADR. When you create a package, you select one or more problems to add to the package. The Support Workbench then automatically adds to the package the problem information, incident information, and diagnostic data (such as trace files and dumps) associated with the selected problems. Because a problem can have many incidents (many occurrences of the same problem), by default only the first three and last three incidents for each problem are added to the package, excluding any incidents that are over 90 days old. You can change these default numbers on the Incident Packaging Configuration page of the Support Workbench.</p>
<p>After the package is created, you can add any type of external file to the package, remove selected files from the package, or edit selected files in the package to remove sensitive data. As you add and remove package contents, only the package metadata is modified.</p>
<p>When you are ready to upload the diagnostic data to Oracle Support, you first create a zip file that contains all the files referenced by the package metadata. You then upload the zip file through Oracle Configuration Manager.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you do not have Oracle Configuration Manager installed and properly configured, you must upload the zip file manually through My Oracle Support.
<p>For more information about Oracle Configuration Manager, see <a class="olink CCRIA" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CCRIA"><span class="italic">Oracle Configuration Manager Installation and Administration Guide</span></a>.</p>
</div>
<p>More information about packages is presented in the following sections:</p>
<ul>
<li>
<p><a href="#CHDEDHHF">About Correlated Diagnostic Data in Incident Packages</a></p>
</li>
<li>
<p><a href="#CHDFBEAE">About Quick Packaging and Custom Packaging</a></p>
</li>
<li>
<p><a href="#BHCIIIJI">About Correlated Packages</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDCGBAH">"Packaging and Uploading Problems with Custom Packaging"</a></p>
</li>
<li>
<p><a href="#CHDDFCHC">"Viewing and Modifying Incident Packages"</a></p>
</li>
</ul>
</div>
<a id="CHDEDHHF"></a>
<div id="ADMIN12304" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About Correlated Diagnostic Data in Incident Packages</h4>
<p>To diagnose problem, it is sometimes necessary to examine not only diagnostic data that is directly related to the problem, but also diagnostic data that is <span class="italic">correlated</span> with the directly related data. Diagnostic data can be correlated by time, by process ID, or by other criteria. For example, when examining an incident, it may be helpful to also examine an incident that occurred five minutes after the original incident. Similarly, while it is clear that the diagnostic data for an incident should include the trace file for the Oracle Database process that was running when the incident occurred, it might be helpful to also include trace files for other processes that are related to the original process.</p>
<p>Thus, when problems and their associated incidents are added to a package, any correlated incidents are added at the same time, with their associated trace files.</p>
<p>During the process of creating the physical file for a package, the Support Workbench calls upon the Incident Packaging Service to finalize the package. <span class="bold"><a id="sthref1164"></a>Finalizing</span> means adding to the package any additional trace files that are correlated by time to incidents in the package, and adding other diagnostic information such as the alert log, health checker reports, SQL test cases, configuration information, and so on. Therefore, the number of files in the zip file may be greater than the number of files that the Support Workbench had previously displayed as the package contents.</p>
<p>The Incident Packaging Service follows a set of rules to determine the trace files in the ADR that are correlated to existing package data. You can modify some of those rules in the Incident Packaging Configuration page in Enterprise Manager.</p>
<p>Because both initial package data and added correlated data may contain sensitive information, it is important to have an opportunity to remove or edit files that contain this information before uploading to Oracle Support. For this reason, the Support Workbench enables you to run a command that finalizes the package as a separate operation. After manually finalizing a package, you can examine the package contents, remove or edit files, and then generate and upload a zip file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Finalizing a package does not mean closing it to further modifications. You can continue to add diagnostic data to a finalized package. You can also finalize the same package multiple times. Each time that you finalize, any new correlated data is added.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDDHICA">"Setting Incident Packaging Preferences"</a></div>
</div>
<!-- class="sect3" -->
<a id="CHDFBEAE"></a>
<div id="ADMIN12305" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About Quick Packaging and Custom Packaging</h4>
<p>The Enterprise Manager Support Workbench provides two methods for creating and uploading an incident package: the quick packaging method and the custom packaging method.</p>
<p><span class="bold">Quick Packaging</span>&mdash;This is the more automated method with a minimum of steps, organized in a guided workflow (a wizard). You select a single problem, provide a package name and description, and then schedule upload of the package contents, either immediately or at a specified date and time. The Support Workbench automatically places diagnostic data related to the problem into the package, finalizes the package, creates the zip file, and then uploads the file. With this method, you do not have the opportunity to add, edit, or remove package files or add other diagnostic data such as SQL test cases. However, it is the simplest and quickest way to get first-failure diagnostic data to Oracle Support. Quick packaging is the method used in the workflow described in <a href="#CHDJDBCH">"Investigating, Reporting, and Resolving a Problem"</a>.</p>
<p>Note that when quick packaging is complete, the package that was created by the wizard remains. You can then modify the package with custom packaging operations at a later time and manually reupload.</p>
<p><span class="bold">Custom Packaging</span>&mdash;This is the more manual method, with more steps. It is intended for expert Support Workbench users who want more control over the packaging process. With custom packaging, you can create a new package with one or more problems, or you can add one or more problems to an existing package. You can then perform a variety of operations on the new or updated package, including:</p>
<ul>
<li>
<p>Adding or removing problems or incidents</p>
</li>
<li>
<p>Adding, editing, or removing trace files in the package</p>
</li>
<li>
<p>Adding or removing external files of any type</p>
</li>
<li>
<p>Adding other diagnostic data such as SQL test cases</p>
</li>
<li>
<p>Manually finalizing the package and then viewing package contents to determine if you must edit or remove sensitive data or remove files to reduce package size.</p>
</li>
</ul>
<p>You might conduct these operations over several days, before deciding that you have enough diagnostic information to send to Oracle Support.</p>
<p>With custom packaging, you create the zip file and request upload to Oracle Support as two separate steps. Each of these steps can be performed immediately or scheduled for a future date and time.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDCAECH">"Task 5: Package and Upload Diagnostic Data to Oracle Support"</a> for instructions for the Quick Packaging method</div>
</div>
<!-- class="sect3" -->
<a id="BHCIIIJI"></a>
<div id="ADMIN13161" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About Correlated Packages</h4>
<p><a id="sthref1165"></a>Correlated packages provide a means of packaging and uploading diagnostic data for related problems. A database instance problem can have related problems in other database instances or in Oracle Automatic Storage Management instances, as described in <a href="#BHCECEJA">"Related Problems Across the Topology"</a>. After you create and upload a package for one or more database instance problems (the "main package"), you can create and upload one or more correlated packages, each with one or more related problems. You can accomplish this only with the custom packaging workflow in Enterprise Manager Support Workbench.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#BHCHJDIA">"Creating, Editing, and Uploading Correlated Packages"</a></div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CHDCGBAH"></a>
<div id="ADMIN12306" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Packaging and Uploa<a id="sthref1166"></a><a id="sthref1167"></a>ding Problems with Custom Packaging</h3>
<p>You use Enterprise Manager Support Workbench (Support Workbench) to create and upload custom incident packages (packages). Before uploading, you can manually add, edit, and remove diagnostic data files from the package.</p>
<p class="subhead2"><a id="ADMIN12587"></a>To package and upload problems with custom packaging:</p>
<ol>
<li>
<p>Access the Support Workbench home page.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions.</p>
</li>
<li>
<p>(Optional) For each problem that you want to include in the package, indicate the service request number (SR#) associated with the problem, if any. To do so, complete the following steps for each problem:</p>
<ol>
<li>
<p>In the Problems subpage at the bottom of the Support Workbench home page, select the problem, and then click <span class="bold">View</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you do not see the desired problem in the list of problems, or if there are too many problems to scroll through, select a time period from the View list and click <span class="bold">Go</span>. You can then select the desired problem and click <span class="bold">View</span>.</div>
<p>The Problem Details page appears.</p>
</li>
<li>
<p>Next to the SR# label, click <span class="bold">Edit</span>, enter a service request number, and then click <span class="bold">OK</span>.</p>
<p>The service request number is displayed on the Problem Details page.</p>
</li>
<li>
<p>Return to the Support Workbench home page by clicking <span class="bold">Support Workbench</span> in the locator links at the top of the page.</p>
<img width="380" height="61" src="img/problem_details_breadcrumb.gif" alt="Description of problem_details_breadcrumb.gif follows" /><br />
<a id="sthref1168" href="img_text/problem_details_breadcrumb.htm">Description of the illustration problem_details_breadcrumb.gif</a><br />
<br /></li>
</ol>
</li>
<li>
<p>On the Support Workbench home page, select the problems that you want to package, and then click <span class="bold">Package</span>.</p>
<p>The Select Packaging Mode page appears.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The packaging process may automatically select additional correlated problems to add to the package. An example of a correlated problem is one that occurs within a few minutes of the selected problem. See <a href="#CHDEDHHF">"About Correlated Diagnostic Data in Incident Packages"</a> for more information.</div>
</li>
<li>
<p>Select the <span class="bold">Custom packaging</span> option, and then click <span class="bold">Continue</span>.</p>
<p>The Select Package page appears.</p>
<div id="ADMIN13035" class="figure">
<p class="titleinfigure"><a id="sthref1169"></a>Figure 9-6 Select Package Page</p>
<img width="855" height="357" src="img/package_create_select.gif" alt="Description of Figure 9-6 follows" /><br />
<a id="sthref1170" href="img_text/package_create_select.htm">Description of "Figure 9-6 Select Package Page"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>To create a new package, select the <span class="bold">Create new package</span> option, enter a package name and description, and then click <span class="bold">OK</span>.</p>
</li>
<li>
<p>To add the selected problems to an existing package, select the <span class="bold">Select from existing packages</span> option, select the package to update, and then click <span class="bold">OK</span>.</p>
</li>
</ul>
<p>The Customize Package page appears. It displays the problems and incidents that are contained in the package, plus a selection of packaging tasks to choose from. You run these tasks against the new package or the updated existing package.</p>
<div id="ADMIN13036" class="figure">
<p class="titleinfigure"><a id="CHDEGHHB"></a>Figure 9-7 Customize Package Page</p>
<img width="997" height="608" src="img/package_details.gif" alt="Description of Figure 9-7 follows" /><br />
<a id="sthref1171" href="img_text/package_details.htm">Description of "Figure 9-7 Customize Package Page"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>(Optional) In the Packaging Tasks section, click links to perform one or more packaging tasks. Or, use other controls on the Customize Package page and its subpages to manipulate the package. Return to the Customize Package page when you are finished.</p>
<p>See <a href="#CHDDFCHC">"Viewing and Modifying Incident Packages"</a> for instructions for some of the most common packaging tasks.</p>
</li>
<li>
<p>In the Packaging Tasks section of the Customize Package page, under the heading Send to Oracle Support, click <span class="bold">Finish Contents Preparation</span> to finalize the package.</p>
<p>A list (or partial list) of files included in the package is displayed. (This may take a while.) The list includes files that were determined to contain correlated diagnostic information and added by the finalization process.</p>
<p>See <a href="#CHDEDHHF">"About Correlated Diagnostic Data in Incident Packages"</a> for a definition of package finalization.</p>
</li>
<li>
<p>Click the <span class="bold">Files</span> link to view all the files in the package. Examine the list to see if there are any files that might contain sensitive data that you do not want to expose. If you find such files, exclude (remove) or edit them.</p>
<p>See <a href="#CHDEBHEE">"Editing Incident Package Files (Copying Out and In)"</a> and <a href="#CHDEJJFC">"Removing Incident Package Files"</a> for instructions for editing and removing files.</p>
<p>To view the contents of a file, click the eyeglasses icon in the rightmost column in the table of files. Enter host credentials, if prompted.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Trace files are generally for Oracle internal use only.</div>
</li>
<li>
<p>Click <span class="bold">Generate Upload File</span>.</p>
<p>The Generate Upload File page appears.</p>
</li>
<li>
<p>Select the <span class="bold">Full</span> or <span class="bold">Incremental</span> option to generate a full package zip file or an incremental package zip file.</p>
<p>For a full package zip file, all the contents of the package (original contents and all correlated data) are always added to the zip file.</p>
<p>For an incremental package zip file, only the diagnostic information that is new or modified since the last time that you created a zip file for the same package is added to the zip file. For example, if trace information was appended to a trace file since that file was last included in the generated physical file for a package, the trace file is added to the incremental package zip file. Conversely, if no changes were made to a trace file since it was last uploaded for a package, that trace file is not included in the incremental package zip file.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Incremental option is dimmed (unavailable) if an upload file was never created for the package.</div>
</li>
<li>
<p>Schedule file creation either immediately or at a future date and time (select <span class="bold">Immediately</span> or <span class="bold">Later</span>), and then click <span class="bold">Submit</span>.</p>
<p>File creation can use significant system resources, so it may be advisable to schedule it for a period of low system usage.</p>
<p>A Processing page appears, and creation of the zip file proceeds. A confirmation page appears when processing is complete.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The package is automatically finalized when the zip file is created.</div>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Customize Package page returns.</p>
</li>
<li>
<p>Click <span class="bold">Send to Oracle</span>.</p>
<p>The View/Send Upload Files page appears.</p>
</li>
<li>
<p>(Optional) Click the <span class="bold">Send Correlated Packages</span> link to create correlated packages and send them to Oracle.</p>
<p>See <a href="#BHCHJDIA">"Creating, Editing, and Uploading Correlated Packages"</a>. When you are finished working with correlated packages, return to the View/Send Upload Files page by clicking the <span class="bold">Package Details</span> link at the top of the page, clicking <span class="bold">Customize Package</span>, and then clicking <span class="bold">Send to Oracle</span> again.</p>
</li>
<li>
<p>Select the zip files to upload, and then click <span class="bold">Send to Oracle</span>.</p>
<p>The Send to Oracle page appears. The selected zip files are listed in a table.</p>
</li>
<li>
<p>Fill in the requested My Oracle Support information. Next to Create new Service Request (SR), select <span class="bold">Yes</span> or <span class="bold">No</span>. If you select Yes, a draft service request is created for you. You must later log in to My Oracle Support and fill in the service request details. If you select No, enter an existing service request number.</p>
</li>
<li>
<p>Schedule the upload to take place immediately or at a future date and time, and then click <span class="bold">Submit</span>.</p>
<p>A Processing page appears. If the upload is completed successfully, a confirmation page appears. If the upload could not complete, an error page appears. The error page may include a message that requests that you upload the zip file to Oracle manually. If so, contact your Oracle Support representative for instructions.</p>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The View/Send Upload Files page returns. Under the Time Sent column, check the status of the files that you attempted to upload.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The Support Workbench uses Oracle Configuration Manager to upload the physical files. If Oracle Configuration Manager is not installed or properly configured, the upload may fail. In this case, a message is displayed with a path to the package zip file and a request that you upload the file to Oracle Support manually. You can upload manually with My Oracle Support.
<p>For more information about Oracle Configuration Manager, see <a class="olink CCRIA" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=CCRIA"><span class="italic">Oracle Configuration Manager Installation and Administration Guide</span></a>.</p>
</div>
</li>
<li>
<p>(Optional) Create and upload correlated packages.</p>
<p>See <a href="#BHCHJDIA">"Creating, Editing, and Uploading Correlated Packages"</a> for instructions.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDIABIF">"About Incidents and Problems"</a></p>
</li>
<li>
<p><a href="#CHDHADDF">"About Incident Packages"</a></p>
</li>
<li>
<p><a href="#CHDFBEAE">"About Quick Packaging and Custom Packaging"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDDFCHC"></a>
<div id="ADMIN12307" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing and Modi<a id="sthref1172"></a><a id="sthref1173"></a>fying Incident Packages</h3>
<p>After creating an incident package with the custom packaging method, you can view or modify the contents of the package before uploading the package to Oracle Support. In addition, after using the quick packaging method to package and upload diagnostic data, you can view or modify the contents of the package that the Support Workbench created, and then reupload the package. To modify a package, you choose from among a selection of <span class="italic">packaging tasks</span>, most of which are available from the Customize Package page. (See <a href="#CHDEGHHB">Figure 9-7</a>.)</p>
<p>This section provides instructions for some of the most common packaging tasks. It includes the following topics:</p>
<ul>
<li>
<p><a href="#CHDEBHEE">Editing Incident Package Files (Copying Out and In)</a></p>
</li>
<li>
<p><a href="#CHDBDAJG">Adding an External File to an Incident Package</a></p>
</li>
<li>
<p><a href="#CHDEJJFC">Removing Incident Package Files</a></p>
</li>
<li>
<p><a href="#CHDEECCC">Viewing and Updating the Incident Package Activity Log</a></p>
</li>
</ul>
<p>Also included are the following topics, which explains how to view package details and how to access the Customize Package page for a particular package:</p>
<ul>
<li>
<p><a href="#CHDBGEJF">Viewing Package Details</a></p>
</li>
<li>
<p><a href="#CHDEEEFE">Accessing the Customize Package Page</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDHADDF">"About Incident Packages"</a></p>
</li>
<li>
<p><a href="#CHDCGBAH">"Packaging and Uploading Problems with Custom Packaging"</a></p>
</li>
</ul>
</div>
<a id="CHDBGEJF"></a>
<div id="ADMIN12488" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing Pac<a id="sthref1174"></a><a id="sthref1175"></a>kage Details</h4>
<p>The Package Details page contains information about the incidents, trace files, and other files in a package, and enables you to view and add to the package activity log.</p>
<p class="subhead2"><a id="ADMIN12588"></a>To view package details:</p>
<ol>
<li>
<p>Access the Support Workbench home page.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions.</p>
</li>
<li>
<p>Click the <span class="bold">Packages</span> link to view the Packages subpage.</p>
<p>A list of packages that are currently in the Automatic Diagnostic Repository (ADR) is displayed.</p>
</li>
<li>
<p>(Optional) To reduce the number of packages displayed, enter text into the <span class="bold">Search</span> field above the list, and then click <span class="bold">Go</span>.</p>
<p>All packages that contain the search text anywhere in the package name are displayed. To view the full list of packages, click the <span class="bold">Packages</span> link again.</p>
</li>
<li>
<p>Under the Package Name column, click the link for the desired package.</p>
<p>The Package Details page appears.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDEEEFE"></a>
<div id="ADMIN12489" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Accessing the Cust<a id="sthref1176"></a><a id="sthref1177"></a><a id="sthref1178"></a>omize Package Page</h4>
<p>The Customize Package page is used to perform various packaging tasks, such as adding and removing problems; adding, removing, and scrubbing (editing) package files; and generating and uploading the package zip file.</p>
<p class="subhead2"><a id="ADMIN12589"></a>To access the Customize Package page:</p>
<ol>
<li>
<p>Access the Package Details page for the desired package, as described in <a href="#CHDBGEJF">"Viewing Package Details"</a>.</p>
</li>
<li>
<p>Click <span class="bold">Customize Package</span>.</p>
<p>The Customize Package page appears. See <a href="#CHDEGHHB">Figure 9-7</a>.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDEBHEE"></a>
<div id="ADMIN12309" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Editing Incident Package Files (Copying Out and In)</h4>
<p>The Support Workbench enables you to edit one or more files in an incident package. You may want to do this to delete or overwrite sensitive data in the files. To edit package files, you must first copy the files out of the package into a designated directory, edit the files with a text editor or other utility, and then copy the files back into the package, overwriting the original package files.</p>
<p>The following procedure assumes that the package is already created and contains diagnostic data.</p>
<p class="subhead2"><a id="ADMIN12590"></a>To edit incident package files:</p>
<ol>
<li>
<p>Access the Customize Package page for the desired incident package.</p>
<p>See <a href="#CHDEEEFE">"Accessing the Customize Package Page"</a> for instructions.</p>
</li>
<li>
<p>In the Packaging Tasks section, under the Scrub User Data heading, click <span class="bold">Copy out Files to Edit contents</span>.</p>
<p>The Copy Out Files page appears. It displays the name of the host to which you can copy files.</p>
<div id="ADMIN13037" class="figure">
<p class="titleinfigure"><a id="sthref1179"></a>Figure 9-8 Copy Out Files Page</p>
<img width="1025" height="520" src="img/copy_out_files.gif" alt="Description of Figure 9-8 follows" /><br />
<a id="sthref1180" href="img_text/copy_out_files.htm">Description of "Figure 9-8 Copy Out Files Page"</a><br />
<br /></div>
<!-- class="figure" --></li>
<li>
<p>Do one of the following to specify a destination directory for the files:</p>
<ul>
<li>
<p>Enter a directory path in the <span class="bold">Destination Folder</span> field.</p>
</li>
<li>
<p>Click the flashlight icon next to the <span class="bold">Destination Folder</span> field, and then complete the following steps:</p>
<ol>
<li>
<p>If prompted for host credentials, enter credentials for the host to which you want to copy out the files, and then click <span class="bold">OK</span>. (Select <span class="bold">Save as Preferred Credential</span> to avoid the prompt for credentials next time.)</p>
</li>
<li>
<p>In the Browse and Select File or Directory window, click directory links to move down the directory hierarchy, and click directory names next to the <span class="bold">Path</span> label to move up the directory hierarchy, until you see the desired destination directory.</p>
<img width="621" height="411" src="img/package_browse_and_select.gif" alt="Description of package_browse_and_select.gif follows" /><br />
<a id="sthref1181" href="img_text/package_browse_and_select.htm">Description of the illustration package_browse_and_select.gif</a><br />
<br />
<p>To reduce the number of directories displayed in the list, enter search text in the <span class="bold">Search</span> field and click <span class="bold">Go</span>. All directories that have the search text anywhere in the directory name are displayed.</p>
</li>
<li>
<p>Select the desired destination directory, and then click <span class="bold">Select</span>.</p>
<p>The Browse and Select File or Directory window closes, and the path to the selected directory appears in the Destination Folder field of the Copy Out Files page.</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Under Files to Copy Out, select the desired files, and then click <span class="bold">OK</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you do not see the desired files, they may be on another page. Click the <span class="bold">Next</span> link to view the next page. Continue clicking <span class="bold">Next</span>, or select from the list of file numbers (to the left of the Next link) until you see the desired files. You can then select the files and click <span class="bold">OK</span>.</div>
<p>The Customize Package page returns, displaying a confirmation message that lists the files that were copied out.</p>
</li>
<li>
<p>Using a text editor or other utility, edit the files.</p>
</li>
<li>
<p>On the Customize Package page, in the Packaging Tasks section, under the Scrub User Data heading, click <span class="bold">Copy in Files to Replace Contents</span>.</p>
<p>The Copy In Files page appears. It displays the files that you copied out.</p>
</li>
<li>
<p>Select the files to copy in, and then click <span class="bold">OK</span>.</p>
<p>The files are copied into the package, overwriting the existing files. The Customize Package page returns, displaying a confirmation message that lists the files that were copied in.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDBDAJG"></a>
<div id="ADMIN12310" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Adding an External File to an Incident Package</h4>
<p>You can add any type of external file to an incident package.</p>
<p class="subhead2"><a id="ADMIN12591"></a>To add an external file to an incident package:</p>
<ol>
<li>
<p>Access the Customize Package page for the desired incident package.</p>
<p>See <a href="#CHDEEEFE">"Accessing the Customize Package Page"</a> for instructions.</p>
</li>
<li>
<p>Click the <span class="bold">Files</span> link to view the Files subpage.</p>
<div id="ADMIN13038" class="figure">
<p class="titleinfigure"><a id="CHDFGIAA"></a>Figure 9-9 Files Subpage of Customize Package Page</p>
<img width="822" height="314" src="img/package_details_dumps.gif" alt="Description of Figure 9-9 follows" /><br />
<a id="sthref1182" href="img_text/package_details_dumps.htm">Description of "Figure 9-9 Files Subpage of Customize Package Page"</a><br />
<br /></div>
<!-- class="figure" -->
<p>From this page, you can add and remove files to and from the package.</p>
</li>
<li>
<p>Click <span class="bold">Add external files</span>.</p>
<p>The Add External File page appears. It displays the host name from which you may select a file.</p>
</li>
<li>
<p>Do one of the following to specify a file to add:</p>
<ul>
<li>
<p>Enter the full path to the file in the <span class="bold">File Name</span> field.</p>
</li>
<li>
<p>Click the flashlight icon next to the <span class="bold">File Name</span> field, and then complete the following steps:</p>
<ol>
<li>
<p>If prompted for host credentials, enter credentials for the host on which the external file resides, and then click <span class="bold">OK</span>. (Select <span class="bold">Save as Preferred Credential</span> to avoid the prompt for credentials next time.)</p>
</li>
<li>
<p>In the Browse and Select File or Directory window, click directory links to move down the directory hierarchy, and click directory names next to the <span class="bold">Path</span> label to move up the directory hierarchy, until you see the desired file.</p>
<img width="621" height="411" src="img/package_browse_and_select.gif" alt="Description of package_browse_and_select.gif follows" /><br />
<a id="sthref1183" href="img_text/package_browse_and_select.htm">Description of the illustration package_browse_and_select.gif</a><br />
<br />
<p>To reduce the number of files or directories displayed in the list, enter search text in the <span class="bold">Search</span> field and click <span class="bold">Go</span>. All files or directories that have the search text anywhere in the file name or directory name are displayed.</p>
</li>
<li>
<p>In the Select column, click to select the desired file, and then click <span class="bold">Select</span>.</p>
<p>The Browse and Select window closes, and the path to the selected file appears in the File Name field of the Add External File page.</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">OK</span>.</p>
<p>The Customize Package page returns, displaying the Files subpage. The selected file is now shown in the list of files.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDEJJFC"></a>
<div id="ADMIN12311" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Removing Incident Package Files</h4>
<p>You can remove one or more files of any type from the incident package.</p>
<p class="subhead2"><a id="ADMIN12592"></a>To remove incident package files:</p>
<ol>
<li>
<p>Access the Customize Package page for the desired incident package.</p>
<p>See <a href="#CHDEEEFE">"Accessing the Customize Package Page"</a> for instructions.</p>
</li>
<li>
<p>Click the <span class="bold">Files</span> link to view the Files subpage.</p>
<p>A list of files in the package is displayed.</p>
<p>If you have not yet generated a physical file for this package, all package files are displayed in the list. If you have already generated a physical file, a View list appears above the files list. It enables you to choose between viewing only incremental package contents or the full package contents. The default selection is incremental package contents. This default selection displays only those package files that were created or modified since the last time that a physical file was generated for the package. Select <span class="bold">Full package contents</span> from the View list to view all package files.</p>
</li>
<li>
<p>Select the files to remove, and then click <span class="bold">Exclude</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you do not see the desired files, they may be on another page. Click the <span class="bold">Next</span> link to view the next page. Continue clicking <span class="bold">Next</span>, or select from the list of file numbers (to the left of the Next link) until you see the desired files. You can then select the files and click <span class="bold">Remove</span>.</div>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="CHDEECCC"></a>
<div id="ADMIN12312" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Viewing and Updating the Incident Package Activity Log</h4>
<p>The Support Workbench maintains an activity log for each incident package. Most activities that you perform on a package, such as adding or removing files or creating a package zip file, are recorded in the log. You can also add your own notes to the log. This is especially useful if multiple database administrators are working with packages.</p>
<p class="subhead2"><a id="ADMIN12593"></a>To view and update the incident package activity log:</p>
<ol>
<li>
<p>Access the Package Details page for the desired incident package.</p>
<p>See <a href="#CHDEEEFE">"Accessing the Customize Package Page"</a> for instructions.</p>
</li>
<li>
<p>Click the <span class="bold">Activity Log</span> link to view the Activity Log subpage.</p>
<p>The activity log is displayed.</p>
</li>
<li>
<p>To add your own note to the activity log, enter text into the <span class="bold">Note</span> field, and then click <span class="bold">Add Note</span>.</p>
<p>Your note is timestamped and appended to the list.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BHCHJDIA"></a>
<div id="ADMIN13162" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Creating, Editing, and Uploading Correlated Packages</h3>
<p><a id="sthref1184"></a>After you upload a package to Oracle Support, you can create and upload one or more correlated packages. This is recommended if critical alerts appeared in the Related Alerts section of the Database Home page. The correlated packages are associated with the original package, also known as the <span class="bold">main package</span>. The main package contains problems that occurred in a database instance. Correlated packages contain problems that occurred on other instances (Oracle ASM instances or other database instances) and that are related problems for the problems in the main package. There can be only one correlated package for each related instance.</p>
<p class="subhead2"><a id="ADMIN13163"></a>To create, edit, and upload a correlated package:</p>
<ol>
<li>
<p>View the Package Details page for the main package.</p>
<p>See <a href="#CHDBGEJF">"Viewing Package Details"</a> for instructions.</p>
</li>
<li>
<p>On the Package Details page, click <span class="bold">Customize Package</span>.</p>
</li>
<li>
<p>On the Customize Package page, in the Packaging Tasks section, under Additional Diagnostic Data, click <span class="bold">Create/Update Correlated Packages</span>.</p>
<p>See <a href="#CHDEGHHB">Figure 9-7</a>.</p>
</li>
<li>
<p>On the Correlated Packages page, under Correlated Packages, select one or more instances that have incidents and click <span class="bold">Create</span>.</p>
<p>A confirmation message appears, and the package IDs of the newly created correlated packages appear in the ID column.</p>
</li>
<li>
<p>Select the instance on which you created the correlated package, and click <span class="bold">Finish Contents Preparation</span>.</p>
<p>A confirmation message appears.</p>
</li>
<li>
<p>(Optional) View and edit a correlated package by completing these steps:</p>
<ol>
<li>
<p>Click the package ID to view the package.</p>
<p>If prompted for credentials, enter them and click <span class="bold">Login</span>.</p>
</li>
<li>
<p>On the Package Details page, click <span class="bold">Files</span> to view the files in the package.</p>
</li>
<li>
<p>Click <span class="bold">Customize Package</span> and perform any desired customization tasks, as described in <a href="#CHDDFCHC">"Viewing and Modifying Incident Packages"</a>.</p>
</li>
</ol>
</li>
<li>
<p>For each correlated package to upload, click <span class="bold">Generate Upload File</span>.</p>
</li>
<li>
<p>For each correlated package to send to Oracle, select the package and click <span class="bold">Send to Oracle</span>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If <span class="bold">Send to Oracle</span> is unavailable (dimmed), there were no correlated incidents for the instance.</div>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BHCIIIJI">"About Correlated Packages"</a></p>
</li>
<li>
<p><a href="#BHCECEJA">"Related Problems Across the Topology"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BHCDIAJH"></a>
<div id="ADMIN13164" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Deleting Correlated Packages</h3>
<p><a id="sthref1185"></a>You delete a correlated package with the Enterprise Manager Support Workbench for the target for which you created the package. For example, if you created a correlated package for an Oracle ASM instance target, access the Support Workbench for that Oracle ASM instance.</p>
<p class="subhead2"><a id="ADMIN13165"></a>To delete a correlated package:</p>
<ol>
<li>
<p>Access the Support Workbench for the target on which you created the correlated package.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
See the Related Links section at the bottom of any Support Workbench page. Or, see <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a></div>
</li>
<li>
<p>Click <span class="bold">Packages</span> to view the Packages subpage.</p>
</li>
<li>
<p>Locate the correlated package in the list. Verify that it is a correlated package by viewing the package description.</p>
</li>
<li>
<p>Select the package and click <span class="bold">Delete</span>.</p>
</li>
<li>
<p>On the confirmation page, click <span class="bold">Yes</span>.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#BHCIIIJI">"About Correlated Packages"</a></p>
</li>
<li>
<p><a href="#BHCECEJA">"Related Problems Across the Topology"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDDHICA"></a>
<div id="ADMIN12313" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting Incident Packaging Preferences</h3>
<p>This section provides instructions for setting incident packaging preferences. Examples of incident packaging preferences include the number of days to retain incident information, and the number of leading and trailing incidents to include in a package for each problem. (By default, if a problem has many incidents, only the first three and last three incidents are packaged.) You can change these and other incident packaging preferences with Enterprise Manager or with the ADRCI utility.</p>
<p class="subhead2"><a id="ADMIN12594"></a>To set incident packaging preferences with Enterprise Manager:</p>
<ol>
<li>
<p>Access the Support Workbench home page.</p>
<p>See <a href="#CHDBCHID">"Viewing Problems with the Enterprise Manager Support Workbench"</a> for instructions.</p>
</li>
<li>
<p>In the Related Links section at the bottom of the page, click <span class="bold">Incident Packaging Configuration</span>.</p>
<p>The View Incident Packaging Configuration page appears. Click <span class="bold">Help</span> to view descriptions of the settings on this page.</p>
</li>
<li>
<p>Click <span class="bold">Edit</span>.</p>
<p>The Edit Incident Packaging Configuration page appears.</p>
</li>
<li>
<p>Edit settings, and then click <span class="bold">OK</span> to apply changes.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CHDHADDF">"About Incident Packages"</a></p>
</li>
<li>
<p><a href="#CHDIABIF">"About Incidents and Problems"</a></p>
</li>
<li>
<p><a href="#CHDCAECH">"Task 5: Package and Upload Diagnostic Data to Oracle Support"</a></p>
</li>
<li>
<p><a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a> for information on ADRCI</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1326">
<tr>
<td class="cellalignment1335">
<table class="cellalignment1331">
<tr>
<td class="cellalignment1330"><a href="monitoring.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1330"><a href="dbcontrol.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1337">
<table class="cellalignment1329">
<tr>
<td class="cellalignment1330"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1330"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1330"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1330"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1330"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1330"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
