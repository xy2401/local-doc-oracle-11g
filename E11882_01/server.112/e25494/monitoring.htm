<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Monitoring Database Operations</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1055" />
<meta name="dcterms.created" content="2015-05-05T8:27:34Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Administrator's Guide" />
<meta name="dcterms.identifier" content="E25494-07" />
<meta name="dcterms.isVersionOf" content="ADMIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="secure.htm" title="Previous" type="text/html" />
<link rel="Next" href="diag.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25494.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">15/49</span> <!-- End Header -->
<div id="ADMIN005" class="chapter"><a id="adminChapterMonitoringOps"></a>
<h1 class="chapter"><span class="secnum">8</span> Monitoring Database Operations</h1>
<p>It is important that you monitor the operation of your database on a regular basis. Doing so not only informs you of errors that have not yet come to your attention but also gives you a better understanding of the normal operation of your database. Being familiar with normal behavior in turn helps you recognize when something is wrong.</p>
<p>In this chapter:</p>
<ul>
<li>
<p><a href="#CEGJJJHE">Monitoring Errors and Alerts</a></p>
</li>
<li>
<p><a href="#i1010615">Monitoring Performance</a></p>
</li>
</ul>
<a id="CEGJJJHE"></a>
<div id="ADMIN11242" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring Errors and Alerts</h2>
<p>The following sections explain how to monitor database errors and alerts. It contains the following topics:</p>
<ul>
<li>
<p><a href="#i1011629">Monitoring Errors with Trace Files and the Alert Log</a></p>
</li>
<li>
<p><a href="#CIHCAGAJ">Monitoring Database Operations with Server-Generated Alerts</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
The easiest and best way to monitor the database for errors and alerts is with the Database Home page in Enterprise Manager. This section provides alternate methods for monitoring, using data dictionary views, PL/SQL packages, and other command-line facilities.</div>
<a id="i1011629"></a>
<div id="ADMIN11243" class="sect2">
<h3 class="sect2">Monitoring Errors with Trace Files and the Alert Log</h3>
<p><a id="sthref1027"></a><a id="sthref1028"></a><a id="sthref1029"></a><a id="sthref1030"></a><a id="sthref1031"></a>Each server and background process can write to an associated <span class="bold">trace file</span>. <a id="sthref1032"></a>When an internal error is detected by a process, it dumps information about the error to its trace file. Some of the information written to a trace file is intended for the database administrator, and other information is for Oracle Support Services. Trace file information is also used to tune applications and instances.<a id="sthref1033"></a><a id="sthref1034"></a></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Critical errors also create incidents and incident dumps in the Automatic Diagnostic Repository. See <a href="diag.htm#adminChapterDiagnosability">Chapter 9, "Managing Diagnostic Data"</a> for more information.</div>
<p><a id="sthref1035"></a><a id="sthref1036"></a>The <span class="bold">alert log</span> is a chronological log of messages and errors, and includes the following items:</p>
<ul>
<li>
<p>All internal errors (<code dir="ltr">ORA-00600</code>), block corruption errors (<code dir="ltr">ORA-01578</code>), and deadlock errors (<code dir="ltr">ORA-00060</code>) that occur</p>
</li>
<li>
<p>Administrative operations, such as <code dir="ltr">CREATE</code>, <code dir="ltr">ALTER</code>, and <code dir="ltr">DROP</code> statements and <code dir="ltr">STARTUP</code>, <code dir="ltr">SHUTDOWN</code>, and <code dir="ltr">ARCHIVELOG</code> statements</p>
</li>
<li>
<p>Messages and errors relating to the functions of shared server and dispatcher processes</p>
</li>
<li>
<p>Errors occurring during the automatic refresh of a materialized view</p>
</li>
<li>
<p>The values of all initialization parameters that had nondefault values at the time the database and instance start</p>
</li>
</ul>
<p>Oracle Database uses the alert log to record these operations as an alternative to displaying the information on an operator's console (although some systems also display information on the console). If an operation is successful, a "completed" message is written in the alert log, along with a timestamp.</p>
<p>The alert log is maintained as both an XML-formatted file and a text-formatted file. You can view either format of the alert log with any text editor or you can use the ADRCI utility to view the XML-formatted version of the file with the XML tags stripped.</p>
<p>Check the alert log and trace files of an instance periodically to learn whether the background processes have encountered errors. For example, when the log writer process (LGWR) cannot write to a member of a log group, an error message indicating the nature of the problem is written to the LGWR trace file and the alert log. Such an error message means that a media or I/O problem has occurred and should be corrected immediately.</p>
<p>Oracle Database also writes values of initialization parameters to the alert log, in addition to other important statistics.</p>
<p><a id="sthref1037"></a><a id="sthref1038"></a>The alert log and all trace files for background and server processes are written to the Automatic Diagnostic Repository, the location of which is specified by the <code dir="ltr">DIAGNOSTIC_DEST</code> initialization parameter. The names of trace files are operating system specific, but each file usually includes the name of the process writing the file (such as LGWR and RECO).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="diag.htm#adminChapterDiagnosability">Chapter 9, "Managing Diagnostic Data"</a> for information on the Automatic Diagnostic Repository.</p>
</li>
<li>
<p><a href="diag.htm#CHDHEGBH">"Alert Log"</a> for additional information about the alert log.</p>
</li>
<li>
<p><a href="diag.htm#CHDGCEIH">"Viewing the Alert Log"</a></p>
</li>
<li>
<p><a class="olink SUTIL700" href="../../server.112/e22490/adrci.htm#SUTIL700"><span class="italic">Oracle Database Utilities</span></a> for information on the ADRCI utility.</p>
</li>
<li>
<p>Your operating system specific Oracle documentation for information about the names of trace files</p>
</li>
</ul>
</div>
<div id="ADMIN11244" class="sect3"><a id="sthref1039"></a>
<h4 class="sect3">Controlling the Size of Trace Files</h4>
<p><a id="sthref1040"></a><a id="sthref1041"></a><a id="sthref1042"></a><a id="sthref1043"></a>You can control the maximum size of all trace files (excluding the alert log) using the initialization parameter <code dir="ltr">MAX_DUMP_FILE_SIZE</code>, which limits the file to the specified number of operating system blocks. To control the size of an alert log, you must manually delete the file when you no longer need it. Otherwise the database continues to append to the file.</p>
<p>You can safely delete the alert log while the instance is running, although you should consider making an archived copy of it first. This archived copy could prove valuable if you should have a future problem that requires investigating the history of an instance.</p>
</div>
<!-- class="sect3" -->
<div id="ADMIN11245" class="sect3"><a id="sthref1044"></a>
<h4 class="sect3">Controlling When Oracle Database Writes to Trace Files</h4>
<p><a id="sthref1045"></a><a id="sthref1046"></a>Background processes always write to a trace file when appropriate. In the case of the ARC<span class="italic">n</span> background process, it is possible, through an initialization parameter, to control the amount and type of trace information that is produced. This behavior is described in <a href="archredo.htm#i1006885">"Controlling Trace Output Generated by the Archivelog Process"</a>. Other background processes do not have this flexibility.</p>
<p>Trace files are written on behalf of server processes whenever critical errors occur. Additionally, setting the initialization parameter <code dir="ltr">SQL_TRACE = TRUE</code> causes the SQL trace facility to generate performance statistics for the processing of all SQL statements for an instance and write them to the Automatic Diagnostic Repository.</p>
<p>Optionally, you can request that trace files be generated for server processes. Regardless of the current value of the <code dir="ltr">SQL_TRACE</code> initialization parameter, each session can enable or disable trace logging on behalf of the associated server process by using the SQL statement <code dir="ltr">ALTER SESSION SET SQL_TRACE<a id="sthref1047"></a><a id="sthref1048"></a></code>. This example enables the SQL trace facility for a specific session:</p>
<pre dir="ltr">
ALTER SESSION SET SQL_TRACE TRUE;
</pre>
<p>Use the <code dir="ltr">DBMS_SESSION</code> or the <code dir="ltr">DBMS_MONITOR</code> packages to control SQL tracing for a session.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
The SQL trace facility for server processes can cause significant system overhead resulting in severe performance impact, so you should enable this feature only when collecting statistics.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="diag.htm#adminChapterDiagnosability">Chapter 9, "Managing Diagnostic Data"</a> for more information on how the database handles critical errors, otherwise known as "incidents."</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="i1011700"></a>
<div id="ADMIN11246" class="sect3">
<h4 class="sect3">Reading the Trace File for Shared Server Sessions<a id="sthref1049"></a></h4>
<p>If shared server is enabled, each session using a dispatcher is routed to a shared server process, and trace information is written to the server trace file only if the session has enabled tracing (or if an error is encountered). Therefore, to track tracing for a specific session that connects using a dispatcher, you might have to explore several shared server trace files. To help you, Oracle provides a command line utility program, <code dir="ltr">trcsess</code>, which consolidates all trace information pertaining to a user session in one place and orders the information by time.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink PFGRF010" href="../../server.112/e41573/sqltrace.htm#PFGRF010"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for information about using the SQL trace facility and using <code dir="ltr">TKPROF</code> and <code dir="ltr">trcsess</code> to interpret the generated trace files</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHCAGAJ"></a>
<div id="ADMIN11247" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Database Operations with Server-Generated Alerts</h3>
<p><a id="sthref1050"></a><a id="sthref1051"></a><a id="sthref1052"></a><a id="sthref1053"></a>A server-generated alert is a notification from the Oracle Database server of an impending problem. The notification may contain suggestions for correcting the problem. Notifications are also provided when the problem condition has been cleared.</p>
<p>Alerts are automatically generated when a problem occurs or when data does not match expected values for metrics, such as the following:</p>
<ul>
<li>
<p>Physical Reads Per Second</p>
</li>
<li>
<p>User Commits Per Second</p>
</li>
<li>
<p>SQL Service Response Time</p>
</li>
</ul>
<p>Server-generated alerts can be based on threshold levels or can issue simply because an event has occurred. Threshold-based alerts can be triggered at both threshold warning and critical levels. The value of these levels can be customer-defined or internal values, and some alerts have default threshold levels which you can change if appropriate. For example, by default a server-generated alert is generated for tablespace space usage when the percentage of space usage exceeds either the 85% warning or 97% critical threshold level. Examples of alerts not based on threshold levels are:</p>
<ul>
<li>
<p><code dir="ltr">Snapshot Too Old</code></p>
</li>
<li>
<p><code dir="ltr">Resumable Session Suspended</code></p>
</li>
<li>
<p><code dir="ltr">Recovery Area Space Usage</code></p>
</li>
</ul>
<p>An alert message is sent to the predefined persistent queue <code dir="ltr">ALERT_QUE</code> owned by the user <code dir="ltr">SYS</code>. Oracle Enterprise Manager reads this queue and provides notifications about outstanding server alerts, and sometimes suggests actions for correcting the problem. The alerts are displayed on the Enterprise Manager Database Home page and can be configured to send email or pager notifications to selected administrators. If an alert cannot be written to the alert queue, a message about the alert is written to the Oracle Database alert log.</p>
<p>Background processes periodically flush the data to the Automatic Workload Repository to capture a history of metric values. The alert history table and <code dir="ltr">ALERT_QUE</code> are purged automatically by the system at regular intervals.</p>
<div id="ADMIN11248" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1054"></a>
<h4 class="sect3">Setting and Retrieving Thresholds for Server-Generated Alerts</h4>
<p>You can view and change threshold settings for the server alert metrics using the <code dir="ltr">SET_THRESHOLD</code> and <code dir="ltr">GET_THRESHOLD</code> procedures of the <code dir="ltr">DBMS_SERVER_ALERT</code> PL/SQL package. Examples of using these procedures are provided in the following sections:</p>
<ul>
<li>
<p><a href="#CEGDHDEH">Setting Threshold Levels</a></p>
</li>
<li>
<p><a href="#CEGHDCGG">Retrieving Threshold Information</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
<a id="sthref1055"></a>The most convenient way to set and retrieve threshold values is to use the graphical interface of Enterprise Manager. See <a class="olink ADMQS1014" href="../../server.112/e10897/montune.htm#ADMQS1014"><span class="italic">Oracle Database 2 Day DBA</span></a> for instructions.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS016" href="../../appdev.112/e40758/d_server_alert.htm#ARPLS016"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code dir="ltr">DBMS_SERVER_ALERT</code> package</div>
<a id="CEGDHDEH"></a>
<div id="ADMIN11249" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Setting Threshold Levels</h5>
<p>The following example shows how to set thresholds with the <code dir="ltr">SET_THRESHOLD</code> procedure for CPU time for each user call for an instance:</p>
<pre dir="ltr">
DBMS_SERVER_ALERT.SET_THRESHOLD(
 DBMS_SERVER_ALERT.CPU_TIME_PER_CALL, DBMS_SERVER_ALERT.OPERATOR_GE, '8000', 
 DBMS_SERVER_ALERT.OPERATOR_GE, '10000', 1, 2, 'inst1',
 DBMS_SERVER_ALERT.OBJECT_TYPE_SERVICE, 'main.regress.rdbms.dev.us.example.com');
</pre>
<p>In this example, a warning alert is issued when CPU time exceeds 8000 microseconds for each user call and a critical alert is issued when CPU time exceeds 10,000 microseconds for each user call. The arguments include:</p>
<ul>
<li>
<p><code dir="ltr">CPU_TIME_PER_CALL</code> specifies the metric identifier. For a list of support metrics, see <a class="olink ARPLS016" href="../../appdev.112/e40758/d_server_alert.htm#ARPLS016"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a>.</p>
</li>
<li>
<p>The observation period is set to 1 minute. This period specifies the number of minutes that the condition must deviate from the threshold value before the alert is issued.</p>
</li>
<li>
<p>The number of consecutive occurrences is set to 2. This number specifies how many times the metric value must violate the threshold values before the alert is generated.</p>
</li>
<li>
<p>The name of the instance is set to <code dir="ltr">inst1</code>.</p>
</li>
<li>
<p>The constant <code dir="ltr">DBMS_ALERT.OBJECT_TYPE_SERVICE</code> specifies the object type on which the threshold is set. In this example, the service name is <code dir="ltr">main.regress.rdbms.dev.us.example.com</code>.</p>
</li>
</ul>
</div>
<!-- class="sect4" -->
<a id="CEGHDCGG"></a>
<div id="ADMIN11250" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Retrieving Threshold Information</h5>
<p>To retrieve threshold values, use the <code dir="ltr">GET_THRESHOLD</code> procedure. For example:</p>
<pre dir="ltr">
DECLARE
 warning_operator         BINARY_INTEGER;
 warning_value            VARCHAR2(60);
 critical_operator        BINARY_INTEGER; 
 critical_value           VARCHAR2(60);
 observation_period       BINARY_INTEGER;
 consecutive_occurrences  BINARY_INTEGER;
BEGIN
 DBMS_SERVER_ALERT.GET_THRESHOLD(
 DBMS_SERVER_ALERT.CPU_TIME_PER_CALL, warning_operator, warning_value,
    critical_operator, critical_value, observation_period, 
    consecutive_occurrences, 'inst1',
 DBMS_SERVER_ALERT.OBJECT_TYPE_SERVICE, 'main.regress.rdbms.dev.us.example.com');
 DBMS_OUTPUT.PUT_LINE('Warning operator:       ' || warning_operator);
 DBMS_OUTPUT.PUT_LINE('Warning value:          ' || warning_value);
 DBMS_OUTPUT.PUT_LINE('Critical operator:      ' || critical_operator);
 DBMS_OUTPUT.PUT_LINE('Critical value:         ' || critical_value);     
 DBMS_OUTPUT.PUT_LINE('Observation_period:     ' || observation_period);
 DBMS_OUTPUT.PUT_LINE('Consecutive occurrences:' || consecutive_occurrences);
END;
/
 
</pre>
<p>You can also check specific threshold settings with the <code dir="ltr">DBA_THRESHOLDS</code> view. For example:</p>
<pre dir="ltr">
SELECT metrics_name, warning_value, critical_value, consecutive_occurrences 
   FROM DBA_THRESHOLDS 
   WHERE metrics_name LIKE '%CPU Time%';
</pre></div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<div id="ADMIN11251" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1056"></a>
<h4 class="sect3">Viewing Server-Generated Alerts</h4>
<p>The easiest way to view server-generated alerts is by accessing the Database Home page of Enterprise Manager. The following discussion presents other methods of viewing these alerts.</p>
<p>If you use your own tool rather than Enterprise Manager to display alerts, you must subscribe to the <code dir="ltr">ALERT_QUE</code>, read the <code dir="ltr">ALERT_QUE</code>, and display an alert notification after setting the threshold levels for an alert. To create an agent and subscribe the agent to the <code dir="ltr">ALERT_QUE</code>, use the <code dir="ltr">CREATE_AQ_AGENT</code> and <code dir="ltr">ADD_SUBSCRIBER</code> procedures of the <code dir="ltr">DBMS_AQADM</code> package.</p>
<p>Next you must associate a database user with the subscribing agent, because only a user associated with the subscribing agent can access queued messages in the secure <code dir="ltr">ALERT_QUE</code>. You must also assign the enqueue privilege to the user. Use the <code dir="ltr">ENABLE_DB_ACCESS</code> and <code dir="ltr">GRANT_QUEUE_PRIVILEGE</code> procedures of the <code dir="ltr">DBMS_AQADM</code> package.</p>
<p>Optionally, you can register with the <code dir="ltr">DBMS_AQ.REGISTER</code> procedure to receive an asynchronous notification when an alert is enqueued to <code dir="ltr">ALERT_QUE</code>. The notification can be in the form of email, HTTP post, or PL/SQL procedure.</p>
<p>To read an alert message, you can use the <code dir="ltr">DBMS_AQ.DEQUEUE</code> procedure or <code dir="ltr">OCIAQDeq</code> call. After the message has been dequeued, use the <code dir="ltr">DBMS_SERVER_ALERT.EXPAND_MESSAGE</code> procedure to expand the text of the message.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS" href="../../appdev.112/e40758/toc.htm"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for information about the <code dir="ltr">DBMS_AQ</code>, and <code dir="ltr">DBMS_AQADM</code> packages</div>
</div>
<!-- class="sect3" -->
<a id="manprocViewingAlertData23"></a>
<div id="ADMIN11252" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Server-Generated Alerts Data Dictionary Views</h4>
<p>The following data dictionary views provide information about server-generated alerts.</p>
<div class="inftblinformal">
<table class="cellalignment1333" title="Server-generated alerts data dictionary views" summary="The table lists the data dictionary views that pertain to server-generated alerts." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t11">View</th>
<th class="cellalignment1334" id="r1c2-t11">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t11" headers="r1c1-t11"><code dir="ltr">DBA_THRESHOLDS</code></td>
<td class="cellalignment1335" headers="r2c1-t11 r1c2-t11">Lists the threshold settings defined for the instance</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t11" headers="r1c1-t11"><code dir="ltr">DBA_OUTSTANDING_ALERTS</code></td>
<td class="cellalignment1335" headers="r3c1-t11 r1c2-t11">Describes the outstanding alerts in the database</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t11" headers="r1c1-t11"><code dir="ltr">DBA_ALERT_HISTORY</code></td>
<td class="cellalignment1335" headers="r4c1-t11 r1c2-t11">Lists a history of alerts that have been cleared</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t11" headers="r1c1-t11"><code dir="ltr">V$ALERT_TYPES</code></td>
<td class="cellalignment1335" headers="r5c1-t11 r1c2-t11">Provides information such as group and type for each alert</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t11" headers="r1c1-t11"><code dir="ltr">V$METRICNAME</code></td>
<td class="cellalignment1335" headers="r6c1-t11 r1c2-t11">Contains the names, identifiers, and other information about the system metrics</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t11" headers="r1c1-t11"><code dir="ltr">V$METRIC</code></td>
<td class="cellalignment1335" headers="r7c1-t11 r1c2-t11">Contains system-level metric values</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t11" headers="r1c1-t11"><code dir="ltr">V$METRIC_HISTORY</code></td>
<td class="cellalignment1335" headers="r8c1-t11 r1c2-t11">Contains a history of system-level metric values</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for information on static data dictionary views and dynamic performance views</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1010615"></a>
<div id="ADMIN11253" class="sect1">
<h2 class="sect1">Monitoring Performance<a id="sthref1057"></a><a id="sthref1058"></a></h2>
<p>Monitoring database performance is covered in detail in <a class="olink PFGRF" href="../e41573/toc.htm"><span class="italic">Oracle Database Performance Tuning Guide</span></a>. Here are some additional topics with details that are not covered in that guide:</p>
<ul>
<li>
<p><a href="#CEGIBJGH">Monitoring Locks</a></p>
</li>
<li>
<p><a href="#CEGJHEBD">Monitoring Wait Events</a></p>
</li>
<li>
<p><a href="#CEGBGAIB">Performance Monitoring Data Dictionary Views</a></p>
</li>
</ul>
<a id="CEGIBJGH"></a>
<div id="ADMIN11254" class="sect2">
<h3 class="sect2">Monitoring Locks<a id="sthref1059"></a><a id="sthref1060"></a></h3>
<p>Locks are mechanisms that prevent destructive interaction between transactions accessing the same resource. The resources can be either user objects, such as tables and rows, or system objects not visible to users, such as shared data structures in memory and data dictionary rows. Oracle Database automatically obtains and manages necessary locks when executing SQL statements, so you need not be concerned with such details. However, the database also lets you lock data manually.</p>
<p>A deadlock can occur when two or more users are waiting for data locked by each other. Deadlocks prevent some transactions from continuing to work. Oracle Database automatically detects deadlock situations and resolves them by rolling back one of the statements involved in the deadlock, thereby releasing one set of the conflicting row locks.</p>
<p>Oracle Database is designed to avoid deadlocks, and they are not common. Most often they occur when transactions explicitly override the default locking of the database. Deadlocks can affect the performance of your database, so Oracle provides some scripts and views that enable you to monitor locks.</p>
<p><a id="sthref1061"></a>The <code dir="ltr">utllockt.sql</code> script displays, in a tree fashion, the sessions in the system that are waiting for locks and the locks that they are waiting for. The location of this script file is operating system dependent.</p>
<p>A second script, <a id="sthref1062"></a><code dir="ltr">catblock.sql</code>, creates the lock views that <code dir="ltr">utllockt.sql</code> needs, so you must run it before running <code dir="ltr">utllockt.sql</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#CEGBGAIB">"Performance Monitoring Data Dictionary Views"</a></p>
</li>
<li>
<p><a class="olink CNCPT1339" href="../../server.112/e40540/consist.htm#CNCPT1339"><span class="italic">Oracle Database Concepts</span></a> contains more information about locks.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CEGJHEBD"></a>
<div id="ADMIN11255" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring Wait Events</h3>
<p>Wait events are statistics that are incremented by a server process to indicate that it had to wait for an event to complete before being able to continue processing. A session could wait for a variety of reasons, including waiting for more input, waiting for the operating system to complete a service such as a disk write, or it could wait for a lock or latch.</p>
<p>When a session is waiting for resources, it is not doing any useful work. A large number of waits is a source of concern. Wait event data reveals various symptoms of problems that might be affecting performance, such as latch contention, buffer contention, and I/O contention.</p>
<p>Oracle provides several views that display wait event statistics. A discussion of these views and their role in instance tuning is contained in <a class="olink PFGRF02410" href="../../server.112/e41573/instance_tune.htm#PFGRF02410"><span class="italic">Oracle Database Performance Tuning Guide</span></a>.</p>
</div>
<!-- class="sect2" -->
<a id="CEGBGAIB"></a>
<div id="ADMIN11256" class="sect2">
<h3 class="sect2">Performance Monitoring Data Dictionary Views</h3>
<p>This section lists some of the data dictionary views that you can use to monitor an Oracle Database instance. These views are general in their scope. Other views, more specific to a process, are discussed in the section of this book where the process is described.</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Views for Monitoring an Instance" summary="The first column lists views that can be used to monitor database activity. The second column describes each view." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t14">View</th>
<th class="cellalignment1334" id="r1c2-t14">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t14" headers="r1c1-t14"><code dir="ltr">V$LOCK</code></td>
<td class="cellalignment1335" headers="r2c1-t14 r1c2-t14">Lists the locks currently held by Oracle Database and outstanding requests for a lock or latch</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t14" headers="r1c1-t14"><code dir="ltr">DBA_BLOCKERS</code></td>
<td class="cellalignment1335" headers="r3c1-t14 r1c2-t14">Displays a session if it is holding a lock on an object for which another session is waiting</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t14" headers="r1c1-t14"><code dir="ltr">DBA_WAITERS</code></td>
<td class="cellalignment1335" headers="r4c1-t14 r1c2-t14">Displays a session if it is waiting for a locked object</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t14" headers="r1c1-t14"><code dir="ltr">DBA_DDL_LOCKS</code></td>
<td class="cellalignment1335" headers="r5c1-t14 r1c2-t14">Lists all DDL locks held in the database and all outstanding requests for a DDL lock</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t14" headers="r1c1-t14"><code dir="ltr">DBA_DML_LOCKS</code></td>
<td class="cellalignment1335" headers="r6c1-t14 r1c2-t14">Lists all DML locks held in the database and all outstanding requests for a DML lock</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t14" headers="r1c1-t14"><code dir="ltr">DBA_LOCK</code></td>
<td class="cellalignment1335" headers="r7c1-t14 r1c2-t14">Lists all locks or latches held in the database and all outstanding requests for a lock or latch</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t14" headers="r1c1-t14"><code dir="ltr">DBA_LOCK_INTERNAL</code></td>
<td class="cellalignment1335" headers="r8c1-t14 r1c2-t14">Displays a row for each lock or latch that is being held, and one row for each outstanding request for a lock or latch</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r9c1-t14" headers="r1c1-t14"><code dir="ltr">V$LOCKED_OBJECT</code></td>
<td class="cellalignment1335" headers="r9c1-t14 r1c2-t14">Lists all locks acquired by every transaction on the system</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r10c1-t14" headers="r1c1-t14"><code dir="ltr">V$SESSION_WAIT</code></td>
<td class="cellalignment1335" headers="r10c1-t14 r1c2-t14">Lists the resources or events for which active sessions are waiting</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r11c1-t14" headers="r1c1-t14"><code dir="ltr">V$SYSSTAT</code></td>
<td class="cellalignment1335" headers="r11c1-t14 r1c2-t14">Contains session statistics</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r12c1-t14" headers="r1c1-t14"><code dir="ltr">V$RESOURCE_LIMIT</code></td>
<td class="cellalignment1335" headers="r12c1-t14 r1c2-t14">Provides information about current and maximum global resource utilization for some system resources</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r13c1-t14" headers="r1c1-t14"><code dir="ltr">V$SQLAREA</code></td>
<td class="cellalignment1335" headers="r13c1-t14 r1c2-t14">Contains statistics about shared SQL area and contains one row for each SQL string. Also provides statistics about SQL statements that are in memory, parsed, and ready for execution</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r14c1-t14" headers="r1c1-t14"><code dir="ltr">V$LATCH</code></td>
<td class="cellalignment1335" headers="r14c1-t14 r1c2-t14">Contains statistics for nonparent latches and summary statistics for parent latches</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for detailed descriptions of these views</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1326">
<tr>
<td class="cellalignment1335">
<table class="cellalignment1331">
<tr>
<td class="cellalignment1330"><a href="secure.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1330"><a href="diag.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1337">
<table class="cellalignment1329">
<tr>
<td class="cellalignment1330"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1330"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1330"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1330"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1330"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1330"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
