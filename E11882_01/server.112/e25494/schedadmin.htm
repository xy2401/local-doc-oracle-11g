<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Administering Oracle Scheduler</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1055" />
<meta name="dcterms.created" content="2015-05-05T8:27:38Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Administrator's Guide" />
<meta name="dcterms.identifier" content="E25494-07" />
<meta name="dcterms.isVersionOf" content="ADMIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="scheduse.htm" title="Previous" type="text/html" />
<link rel="Next" href="part7.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25494.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">40/49</span> <!-- End Header -->
<div id="ADMIN035" class="chapter"><a id="g1024009"></a> <a id="i1007589"></a>
<h1 class="chapter"><span class="secnum">30</span> Administering Oracle Scheduler</h1>
<p><a id="sthref3184"></a><a id="sthref3185"></a>In this chapter:</p>
<ul>
<li>
<p><a href="#i1006224">Configuring Oracle Scheduler</a></p>
</li>
<li>
<p><a href="#i1006334">Monitoring and Managing the Scheduler</a></p>
</li>
<li>
<p><a href="#i1007297">Import/Export and the Scheduler</a></p>
</li>
<li>
<p><a href="#BAJEIACF">Troubleshooting the Scheduler</a></p>
</li>
<li>
<p><a href="#i1006617">Examples of Using the Scheduler</a></p>
</li>
<li>
<p><a href="#BAJJHCFB">Scheduler Reference</a></p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
This chapter describes how to use the <code dir="ltr">DBMS_SCHEDULER</code> package to administer Oracle Scheduler. You can accomplish many of the same tasks using Oracle Enterprise Manager.
<p>See <a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for <code dir="ltr">DBMS_SCHEDULER</code> information and the Oracle Enterprise Manager online help for information on Oracle Scheduler pages.</p>
</div>
<a id="i1006224"></a>
<div id="ADMIN12035" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Configuring Oracle Sched<a id="sthref3186"></a><a id="sthref3187"></a>uler</h2>
<p>This section contains:</p>
<ul>
<li>
<p><a href="#CHDDBEJA">Setting Oracle Scheduler Privileges</a></p>
</li>
<li>
<p><a href="#CHDCCDFD">Setting Scheduler Preferences</a></p>
</li>
<li>
<p><a href="#BAJHIDDC">Using the Oracle Scheduler Agent to Run Remote Jobs</a></p>
</li>
</ul>
<a id="CHDDBEJA"></a>
<div id="ADMIN13305" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting Oracle Scheduler Privileges</h3>
<p>You must have the <code dir="ltr">SCHEDULER_ADMIN</code> role to perform all Oracle Scheduler administration tasks. Typically, database administrators already have this role with the <code dir="ltr">ADMIN</code> option as part of the <code dir="ltr">DBA</code> role. For example, users <code dir="ltr">SYS</code> and <code dir="ltr">SYSTEM</code> are granted the <code dir="ltr">DBA</code> role. You can grant this role to another administrator by issuing the following statement:</p>
<pre dir="ltr">
GRANT SCHEDULER_ADMIN TO username;
</pre>
<p>Because the <code dir="ltr">SCHEDULER_ADMIN</code> role is a powerful role allowing a grantee to execute code as any user, you should consider granting individual Scheduler system privileges instead. Object and system privileges are granted using regular SQL grant syntax. An example is if the database administrator issues the following statement:</p>
<pre dir="ltr">
GRANT CREATE JOB TO scott;
</pre>
<p>After this statement is executed, <code dir="ltr">scott</code> can create jobs, schedules, programs, file watchers, and credentials in his schema. Another example is if the database administrator issues the following statement:</p>
<pre dir="ltr">
GRANT MANAGE SCHEDULER TO adam;
</pre>
<p>After this statement is executed, <code dir="ltr">adam</code> can create, alter, or drop windows, job classes, or window groups. He will also be able to set and retrieve Scheduler attributes and purge Scheduler logs.</p>
<p class="subhead2"><a id="BAJBEDFI"></a><a id="ADMIN12696"></a>Setting Chain Privileges<a id="sthref3188"></a><a id="sthref3189"></a></p>
<p>Scheduler chains use underlying Oracle Streams Rules Engine objects along with their associated privileges. To create a chain in their own schema, users must have the <code dir="ltr">CREATE</code> <code dir="ltr">JOB</code> privilege in addition to the Rules Engine privileges required to create rules, rule sets, and evaluation contexts in their own schema. These can be granted by issuing the following statement:</p>
<pre dir="ltr">
GRANT CREATE RULE, CREATE RULE SET, CREATE EVALUATION CONTEXT TO <span class="italic">user</span>;
</pre>
<p>To create a chain in a different schema, users must have the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">JOB</code> privilege in addition to the privileges required to create rules, rule sets, and evaluation contexts in schemas other than their own. These can be granted by issuing the following statement:</p>
<pre dir="ltr">
GRANT CREATE ANY RULE, CREATE ANY RULE SET, 
   CREATE ANY EVALUATION CONTEXT TO <span class="italic">user</span>;
</pre>
<p>Altering or dropping chains in schemas other than the users's schema require corresponding system Rules Engine privileges for rules, rule sets, and evaluation contexts.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="scheduse.htm#CHDCFBHG">"Chain Tasks and Their Procedures"</a> for more information regarding chain privileges.</div>
</div>
<!-- class="sect2" -->
<a id="CHDCCDFD"></a>
<div id="ADMIN13306" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Setting Scheduler Preferences</h3>
<p>There are several systemwide Scheduler preferences that you can set. You set these preferences by setting Scheduler attributes with the <code dir="ltr">SET_SCHEDULER_ATTRIBUTE</code> procedure. Setting these attributes requires the <code dir="ltr">MANAGE</code> <code dir="ltr">SCHEDULER</code> privilege. The attributes are:</p>
<ul>
<li>
<p><code dir="ltr">default_timezone</code></p>
<p>It is very important that you set this attribute. Repeating jobs and windows that use the calendaring syntax need to know which time zone to use for their repeat intervals. See <a href="scheduse.htm#i1023132">"Using the Scheduler Calendaring Syntax"</a>. They normally retrieve the time zone from <code dir="ltr">start_date</code>, but if no <code dir="ltr">start_date</code> is provided (which is not uncommon), they retrieve the time zone from the <code dir="ltr">default_timezone</code> Scheduler attribute.</p>
<p>The Scheduler derives the value of <code dir="ltr">default_timezone</code> from the operating system environment. If the Scheduler can find no compatible value from the operating system, it sets <code dir="ltr">default_timezone</code> to <code dir="ltr">NULL</code>.</p>
<p>It is crucial that you verify that <code dir="ltr">default_timezone</code> is set properly, and if not, that you set it. To verify it, run this query:</p>
<pre dir="ltr">
SELECT DBMS_SCHEDULER.STIME FROM DUAL;
 
STIME
---------------------------------------------------------------------------
14-OCT-04 02.56.03.206273000 PM US/PACIFIC
</pre>
<p>To ensure that daylight savings adjustments are followed, it is recommended that you set <code dir="ltr">default_timezone</code> to a region name instead of an absolute time zone offset like '-8:00'. For example, if your database resides in Miami, Florida, USA, issue the following statement:</p>
<pre dir="ltr">
DBMS_SCHEDULER.SET_SCHEDULER_ATTRIBUTE('default_timezone','US/Eastern');
</pre>
<p>Similarly, if your database resides in Paris, you would set this attribute to <code dir="ltr">'Europe/Warsaw'</code>. To see a list of valid region names, run this query:</p>
<pre dir="ltr">
SELECT DISTINCT TZNAME FROM V$TIMEZONE_NAMES;
</pre>
<p>If you do not properly set <code dir="ltr">default_timezone</code>, the default time zone for repeating jobs and windows will be the absolute offset retrieved from <code dir="ltr">SYSTIMESTAMP</code> (the time zone of the operating system environment of the database), which means that repeating jobs and windows that do not have their <code dir="ltr">start_date</code> set will not follow daylight savings adjustments.</p>
</li>
<li>
<p><code dir="ltr">email_server</code></p>
<p>This attribute specifies an SMTP server address that the Scheduler uses to send e-mail notifications for job state events. It takes the following format:</p>
<pre dir="ltr">
<span class="italic">host</span>[:<span class="italic">port</span>]
</pre>
<p>where:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">host</span></code> is the host name or IP address of the SMTP server.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">port</span></code> is the TCP port on which the SMTP server listens. If not specified, the default port of 25 is used.</p>
</li>
</ul>
<p>If this attribute is not specified, set to <code dir="ltr">NULL</code>, or set to an invalid SMTP server address, the Scheduler cannot send job state e-mail notifications.</p>
</li>
<li>
<p><code dir="ltr">email_sender</code></p>
<p>This attribute specifies the default e-mail address of the sender for job state e-mail notifications. It must be a valid e-mail address. If this attribute is not set or set to <code dir="ltr">NULL</code>, then job state e-mail notifications that do not specify a sender address do not have a FROM address in the e-mail header.</p>
</li>
<li>
<p><code dir="ltr">email_server_credential</code></p>
<p>This attribute specifies the schema and name of an existing credential object. The default is <code dir="ltr">NULL</code>.</p>
<p>When an e-mail notification goes out, the Scheduler determines if the <code dir="ltr">email_server_credential</code> points to a valid credential object that <code dir="ltr">SYS</code> has execute object privileges on. If the SMTP server specified in the <code dir="ltr">email_server</code> attribute requires authentication, then the Scheduler uses the user name and password stored in the specified credential object to authenticate with the e-mail server.</p>
<p>If the <code dir="ltr">email_server_credential</code> is specified, then the <code dir="ltr">email_server</code> attribute must specify an SMTP server that requires authentication.</p>
<p>If the <code dir="ltr">email_server_credential</code> is not specified, then the Scheduler supports sending notification e-mails through an SMTP server for which authentication is not configured.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This functionality is available with Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.2).</div>
</li>
<li>
<p><code dir="ltr">email_server_encryption</code></p>
<p>This attribute indicates whether encryption is enabled for this SMTP server connection, and if so, at what point encryption starts, and with which protocol.</p>
<p>Values for <code dir="ltr">email_server_encryption</code> are:</p>
<p><code dir="ltr">NONE</code>: The default, indicates no encryption.</p>
<p><code dir="ltr">SSL_TLS:</code> Indicates that either <code dir="ltr">SSL</code> or <code dir="ltr">TLS</code> are used, from the beginning of the connection. The two sides determine which protocol is most secure. This is the most common setting for this parameter.</p>
<p><code dir="ltr">STARTTLS</code>: Indicates that the connection starts in an unencrypted state, but then the command <code dir="ltr">STARTTLS</code> directs the e-mail server to start encryption using <code dir="ltr">TLS</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This functionality is available with Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.2).</div>
</li>
<li>
<p><code dir="ltr">event_expiry_time</code></p>
<p>This attribute enables you to set the time in seconds before a job state event generated by the Scheduler expires (is automatically purged from the Scheduler event queue). If <code dir="ltr">NULL</code>, job state events expire after 24 hours.</p>
</li>
<li>
<p><code dir="ltr">log_history</code></p>
<p>This attribute controls the number of days that log entries for both the job log and the window log are retained. It helps prevent logs from growing indiscriminately. The range of valid values is 0 through 1000000. If set to 0, no history is kept. Default value is 30. You can override this value at the job class level by setting a value for the <code dir="ltr">log_history</code> attribute of the job class.</p>
</li>
</ul>
<p>See <a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for the syntax for the <code dir="ltr">SET_SCHEDULER_ATTRIBUTE</code> procedure.</p>
</div>
<!-- class="sect2" -->
<a id="BAJHIDDC"></a>
<div id="ADMIN13499" class="sect2">
<h3 class="sect2">Using the Oracle Scheduler Agent to Run Remote Jobs<a id="sthref3190"></a><a id="sthref3191"></a><a id="sthref3192"></a><a id="sthref3193"></a></h3>
<p>Using the Oracle Scheduler agent, the Scheduler can schedule and run two types of remote jobs:</p>
<ul>
<li>
<p>Remote database jobs: Remote database jobs must be run through an Oracle Scheduler agent. Oracle recommends that an agent be installed on the same host as the remote database.</p>
<p>If you intend to run remote database jobs, the Scheduler agent must be release 11.2 or later.</p>
</li>
<li>
<p>Remote external jobs: Remote external jobs run on the same host that the Scheduler agent is installed on.</p>
<p>If you intend to run only remote external jobs, release 11.1 of the Scheduler agent is sufficient.</p>
</li>
</ul>
<p>You must install Scheduler agents on all hosts that remote external jobs will run on. You should install Scheduler agents on all hosts running remote databases that remote database jobs will be run on.</p>
<p>Each database that runs remote jobs requires an initial setup to enable secure communications between databases and remote Scheduler agents, as described in <a href="#BAJDDEBG">"Setting up Databases for Remote Jobs"</a>.</p>
<p>Enabling remote jobs involves the following steps:</p>
<ol>
<li>
<p><a href="#BAJDFIAB">Enabling and Disabling Databases for Remote Jobs</a></p>
</li>
<li>
<p><a href="#BAJDFHBE">Installing and Configuring the Scheduler Agent on a Remote Host</a></p>
</li>
<li>
<p><a href="#BAJIDIEI">Performing Tasks with the Scheduler Agent</a></p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="schedover.htm#CHDCCDDF">"About Remote External Jobs"</a></p>
</li>
<li>
<p><a href="schedover.htm#CHDGAHHD">"Database Jobs"</a> for more information on remote database jobs</p>
</li>
</ul>
</div>
<a id="BAJDFIAB"></a>
<div id="ADMIN13500" class="sect3">
<h4 class="sect3">Enabling and Disabling Databases for Remote Jobs</h4>
<p>This section covers these topics:</p>
<ul>
<li>
<p><a href="#BAJDDEBG">Setting up Databases for Remote Jobs</a></p>
</li>
<li>
<p><a href="#BAJHEEAJ">Disabling Remote Jobs</a></p>
</li>
</ul>
<a id="BAJDDEBG"></a>
<div id="ADMIN13501" class="sect4">
<h5 class="sect4">Setting up Databases for Remote Jobs</h5>
<p>Before a database can run jobs using a remote Scheduler agent, the database must be properly configured, and the agent must be registered with the database. This section describes the configuration, including the required agent registration password in the database. You will later register the database, as shown in <a href="#BAJFEIGJ">"Registering Scheduler Agents with Databases"</a>.</p>
<p>You can limit the number of Scheduler agents that can register, and you can set the password to expire after a specified duration.</p>
<p>Complete the following steps once for each database that creates and runs remote jobs.</p>
<p><span class="bold">To set up a database to create and run remote jobs:</span></p>
<ol>
<li>
<p>Ensure that shared server is enabled.</p>
<p>See <a href="manproc.htm#i1007216">"Enabling Shared Server"</a>.</p>
</li>
<li>
<p>Using SQL*Plus, connect to the database as the <code dir="ltr">SYS</code> user.</p>
</li>
<li>
<p>Enter the following command to verify that the XML DB option is installed:</p>
<pre dir="ltr">
SQL&gt; DESC RESOURCE_VIEW
</pre>
<p>If XML DB is not installed, this command returns an "object does not exist" error.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If XML DB is not installed, you must install it before continuing.</div>
</li>
<li>
<p>Enable HTTP connections to the database as follows:</p>
<ol>
<li>
<p>Determine whether or not the Oracle XML DBM HTTP Server is enabled:</p>
<p>Issue the following command:</p>
<pre dir="ltr">
SQL&gt; SELECT DBMS_XDB.GETHTTPPORT() FROM DUAL;
</pre>
<p>If this statement returns <code dir="ltr">0</code>, Oracle XML DBM HTTP Server is disabled.</p>
</li>
<li>
<p>Enable Oracle XML DB HTTP Server on a nonzero port by logging in as <code dir="ltr">SYS</code> and issuing the following commands:</p>
<pre dir="ltr">
SQL&gt; EXEC DBMS_XDB.SETHTTPPORT (<span class="italic">port</span>);
SQL&gt; COMMIT;
</pre>
<p>where <code dir="ltr"><span class="codeinlineitalic">port</span></code> is the TCP port number on which you want the database to listen for HTTP connections.</p>
<p><code dir="ltr"><span class="codeinlineitalic">port</span></code> must be an integer between 1 and 65536, and for UNIX and Linux must be greater than 1023. Choose a port number that is not already in use.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This enables HTTP connections on all instances of an Oracle Real Application Clusters database.</div>
</li>
</ol>
</li>
<li>
<p>Run the script <code dir="ltr">prvtrsch.plb</code> with following command:</p>
<pre dir="ltr">
SQL&gt; @?/rdbms/admin/prvtrsch.plb
</pre></li>
<li>
<p>Set a registration password for the Scheduler agents using the <code dir="ltr">SET_AGENT_REGISTRATION_PASS</code> procedure.</p>
<p>The following example sets the agent registration password to <code dir="ltr">mypassword</code>.</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.SET_AGENT_REGISTRATION_PASS('mypassword');
END;
/
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must have the <code dir="ltr">MANAGE SCHEDULER</code> privilege to set an agent registration password. See <a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information on the <code dir="ltr">SET_AGENT_REGISTRATION_PASS</code> procedure.</div>
<p>You will do the actual registration further on, in <a href="#BAJFEIGJ">"Registering Scheduler Agents with Databases"</a>.</p>
</li>
</ol>
</div>
<!-- class="sect4" -->
<a id="BAJHEEAJ"></a>
<div id="ADMIN13502" class="sect4">
<h5 class="sect4">Disabling Remote Jobs</h5>
<p>You can disable remote jobs on a database by dropping the <code dir="ltr">REMOTE_SCHEDULER_AGENT</code> user.</p>
<p><span class="bold">To disable remote jobs:</span></p>
<ul>
<li>
<p>Submit the following SQL statement:</p>
<pre dir="ltr">
DROP USER REMOTE_SCHEDULER_AGENT CASCADE;
</pre></li>
</ul>
<p>Registration of new scheduler agents and execution of remote jobs is disabled until you run <code dir="ltr">prvtrsch.plb</code> again.</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="BAJDFHBE"></a>
<div id="ADMIN13503" class="sect3">
<h4 class="sect3">Installing and Configuring the Scheduler Agent on a Remote Host<a id="sthref3194"></a><a id="sthref3195"></a><a id="sthref3196"></a><a id="sthref3197"></a><a id="sthref3198"></a></h4>
<p>Before you can run remote jobs on a particular host, you must install and configure the Scheduler agent, described in this section, and then register and start the Scheduler agent on the host, described in <a href="#BAJIDIEI">"Performing Tasks with the Scheduler Agent"</a>. The Scheduler agent must also be installed in its own Oracle home.</p>
<p><span class="bold">To install and configure the Scheduler agent on a remote host:</span></p>
<ol>
<li>
<p>Download or retrieve the Scheduler agent software, which is available on the Oracle Database Client media included in the Database Media Pack, and online at:</p>
<p><code dir="ltr"><a href="http://www.oracle.com/technology/software/products/database/">http://www.oracle.com/technology/software/products/database</a></code></p>
</li>
<li>
<p>Ensure that you have first properly set up any database on which you want to register the agent.</p>
<p>See <a href="#BAJDFIAB">"Enabling and Disabling Databases for Remote Jobs"</a> for instructions.</p>
</li>
<li>
<p>Log in to the host you want to install the Scheduler agent on. This host runs remote jobs.</p>
<ul>
<li>
<p>For Windows, log in as an administrator.</p>
</li>
<li>
<p>For UNIX and Linux, log in as the user that you want the Scheduler agent to run as. This user requires no special privileges.</p>
</li>
</ul>
</li>
<li>
<p>Run the Oracle Universal Installer (OUI) from the installation media for Oracle Database Client.</p>
<ul>
<li>
<p>For Windows, run <code dir="ltr">setup.exe</code>.</p>
</li>
<li>
<p>For UNIX and Linux, use the following command:</p>
<pre dir="ltr">
/<span class="italic">directory_path</span>/runInstaller
</pre></li>
</ul>
<p>where <code dir="ltr"><span class="codeinlineitalic">directory_path</span></code> is the path to the Oracle Database Client installation media.</p>
</li>
<li>
<p>On the Select Installation Type page, select <span class="bold">Custom</span>, and then click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Select Product Languages page, select the desired languages, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Specify Install Location page, enter the path for a new Oracle home for the agent, and then click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Available Product Components page, select <span class="bold">Oracle Scheduler Agent</span>, and click <span class="bold">Next</span>.</p>
</li>
<li>
<p>On the Oracle Database Scheduler Agent page:</p>
<ol>
<li>
<p>In the Scheduler Agent Hostname field, enter the host name of the computer that the Scheduler agent is installed on.</p>
</li>
<li>
<p>In the Scheduler Agent Port Number field, enter the TCP port number that the Scheduler agent is to listen on for connections, or accept the default, and then click <span class="bold">Next</span>.</p>
<p>Choose an integer between 1 and 65535. On UNIX and Linux, the number must be greater than 1023. Ensure that the port number is not already in use.</p>
<p>OUI performs a series of prerequisite checks. If any of the prerequisite checks fail, resolve the problems, and then click <span class="bold">Next</span>.</p>
</li>
</ol>
</li>
<li>
<p>On the Summary page, click <span class="bold">Finish</span>.</p>
</li>
<li>
<p>(UNIX and Linux only) When OUI prompts you to run the script <code dir="ltr">root.sh</code>, enter the following command as the <code dir="ltr">root</code> user:</p>
<pre dir="ltr">
<span class="italic">script_path</span>/root.sh
</pre>
<p>The script is located in the directory that you chose for agent installation.</p>
<p>When the script completes, click <span class="bold">OK</span> in the Execute Configuration Scripts dialog box.</p>
</li>
<li>
<p>Click <span class="bold">Close</span> to exit OUI when installation is complete.</p>
</li>
<li>
<p>Use a text editor to review the agent configuration parameter file <code dir="ltr">schagent.conf</code>, which is located in the Scheduler agent home directory, and verify the port number in the <code dir="ltr">PORT=</code> directive.</p>
</li>
<li>
<p>Ensure that any firewall software on the remote host or any other firewall that protects that host has an exception to accommodate the Scheduler agent.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BAJIDIEI"></a>
<div id="ADMIN13504" class="sect3">
<h4 class="sect3">Performing Tasks with the Scheduler Agent<a id="sthref3199"></a></h4>
<p>The Scheduler agent is a standalone program that enables you to schedule and run external and database jobs on remote hosts. You start and stop the Scheduler agent using the <code dir="ltr">schagent</code> utility on UNIX and Linux, and the <code dir="ltr">OracleSchedulerExecutionAgent</code> service on Windows.</p>
<p>This section covers these topics:</p>
<ul>
<li>
<p><a href="#BAJHAHFG">About the schagent utility</a></p>
</li>
<li>
<p><a href="#BAJFCFBC">Using the Scheduler Agent on Windows</a></p>
</li>
<li>
<p><a href="#BAJGFEEA">Starting the Scheduler Agent</a></p>
</li>
<li>
<p><a href="#BAJGBEHH">Stopping the Scheduler Agent</a></p>
</li>
<li>
<p><a href="#BAJFEIGJ">Registering Scheduler Agents with Databases</a></p>
</li>
</ul>
<a id="BAJHAHFG"></a>
<div id="ADMIN13505" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">About the schagent utility<a id="sthref3200"></a></h5>
<p>The executable utility <code dir="ltr">schagent</code> performs certain tasks for the agent on Windows, UNIX and Linux, as indicated by the options in <a href="#BAJEHFDH">Table 30-1</a>.</p>
<p>Use <code dir="ltr">schagent</code> with the appropriate syntax and options as follows:</p>
<p>For example:</p>
<p>UNIX and Linux: <span class="italic">AGENT_HOME</span><code dir="ltr">/bin/schagent -status</code></p>
<p>Windows: <span class="italic">AGENT_HOME</span><code dir="ltr">/bin/schagent.exe -status</code></p>
<div id="ADMIN13506" class="tblformal">
<p class="titleintable"><a id="sthref3201"></a><a id="BAJEHFDH"></a>Table 30-1 schagent options</p>
<table class="cellalignment1338" title="schagent options" summary="rows are options; first column is name, second column descripton" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t10">Option</th>
<th class="cellalignment1334" id="r1c2-t10">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t10" headers="r1c1-t10">
<p><code dir="ltr">-start</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t10 r1c2-t10">
<p>Starts the Scheduler Agent.</p>
<p><span class="italic">UNIX and Linux only</span></p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t10" headers="r1c1-t10">
<p><code dir="ltr">-stop</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t10 r1c2-t10">
<p>Prompts the Scheduler agent to stop all the currently running jobs and then stop execution gracefully.</p>
<p><span class="italic">UNIX and Linux only</span></p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t10" headers="r1c1-t10">
<p><code dir="ltr">-abort</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t10 r1c2-t10">
<p>Stops the Scheduler agent forcefully, that is, without stopping jobs first. From Oracle Database 11<span class="italic">g</span> Release 2.</p>
<p><span class="italic">UNIX and Linux only</span></p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t10" headers="r1c1-t10">
<p><code dir="ltr">-status</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t10 r1c2-t10">
<p>Returns this information about the Scheduler Agent running locally: version, uptime, total number of jobs run since the agent started, number of jobs currently running, and their descriptions.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t10" headers="r1c1-t10">
<p><code dir="ltr">-registerdatabase</code></p>
</td>
<td class="cellalignment1335" headers="r6c1-t10 r1c2-t10">
<p>Register the Scheduler agent with the base database or additional databases that are to run remote jobs on the agent's host computer.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t10" headers="r1c1-t10">
<p><code dir="ltr">-unregisterdatabase</code></p>
</td>
<td class="cellalignment1335" headers="r7c1-t10 r1c2-t10">
<p>Unregister an agent from a database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect4" -->
<a id="BAJFCFBC"></a>
<div id="ADMIN13507" class="sect4">
<h5 class="sect4">Using the Scheduler Agent on Windows<a id="sthref3202"></a><a id="sthref3203"></a><a id="sthref3204"></a><a id="sthref3205"></a></h5>
<p>The Windows Scheduler agent service is automatically created and started during installation. The name of the service ends with <code dir="ltr">OracleSchedulerExecutionAgent</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Do not confuse this service with the <code dir="ltr">OracleJobScheduler</code> service, which runs on a Windows computer on which an Oracle database is installed, and manages the running of local external jobs without credentials.</div>
</div>
<!-- class="sect4" -->
<a id="BAJGFEEA"></a>
<div id="ADMIN13508" class="sect4">
<h5 class="sect4">Starting the Scheduler Agent</h5>
<p>Start the Scheduler agent with the following command:</p>
<p><span class="bold">To start the Scheduler agent:</span></p>
<ul>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>On UNIX and Linux, run the following command:</p>
<pre dir="ltr">
<span class="italic">AGENT_HOME</span>/bin/schagent -start
</pre></li>
<li>
<p>On Windows, start the service whose name ends with <code dir="ltr">OracleSchedulerExecutionAgent</code>.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect4" -->
<a id="BAJGBEHH"></a>
<div id="ADMIN13509" class="sect4">
<h5 class="sect4">Stopping the Scheduler Agent</h5>
<p>Stopping the Scheduler agent prevents the host on which it resides from running remote jobs.</p>
<p><span class="bold">To stop the Scheduler agent:</span></p>
<ul>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>On UNIX and Linux, run the <code dir="ltr">schagent</code> utility with either the <code dir="ltr">-stop</code> or <code dir="ltr">-abort</code> option as described in <a href="#BAJEHFDH">Table 30-1</a>:</p>
<pre dir="ltr">
<span class="italic">AGENT_HOME</span>/bin/schagent -stop
</pre></li>
<li>
<p>On Windows, stop the service whose name ends with <code dir="ltr">OracleSchedulerExecutionAgent</code>. This is equivalent to the <code dir="ltr">-abort</code> option.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect4" -->
<a id="BAJFEIGJ"></a>
<div id="ADMIN13510" class="sect4">
<h5 class="sect4">Registering Scheduler Agents with Databases<a id="sthref3206"></a></h5>
<p>As soon as you have finished configuring the Scheduler Agent, you can register the Agent on one or more databases that are to run remote jobs. You can also log in later on and register the agent with additional databases.</p>
<ol>
<li>
<p>If you have already logged out, then log in to the host that is running the Scheduler agent, as follows:</p>
<ul>
<li>
<p>For Windows, log in as an administrator.</p>
</li>
<li>
<p>For UNIX and Linux, log in as the user with which you installed the Scheduler agent.</p>
</li>
</ul>
</li>
<li>
<p>Use the following command for each database that you want to register the Scheduler agent on:</p>
<ul>
<li>
<p>On UNIX and Linux, run this command:</p>
<pre dir="ltr">
<span class="italic">AGENT_HOME</span>/bin/schagent -registerdatabase <span class="italic">db_host</span> <span class="italic">db_http_port</span>
</pre></li>
<li>
<p>On Windows, run this command:</p>
<pre dir="ltr">
<span class="italic">AGENT_HOME</span>/bin/schagent.exe -registerdatabase <span class="italic">db_host</span> <span class="italic">db_http_port</span>
</pre></li>
</ul>
<p>where:</p>
<ul>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">db_host</span></code> is the host name or IP address of the host on which the database resides. In an Oracle Real Application Clusters environment, you can specify any node.</p>
</li>
<li>
<p><code dir="ltr"><span class="codeinlineitalic">db_http_port</span></code> is the port number that the database listens on for HTTP connections. You set this parameter previously in <a href="#BAJDFIAB">"Enabling and Disabling Databases for Remote Jobs"</a>. You can check the port number by submitting the following SQL statement to the database:</p>
<pre dir="ltr">
SELECT DBMS_XDB.GETHTTPPORT() FROM DUAL;
</pre>
<p>A port number of 0 means that HTTP connections are disabled.</p>
</li>
</ul>
<p>The agent prompts you to enter the agent registration password that you set in <a href="#BAJDFIAB">"Enabling and Disabling Databases for Remote Jobs"</a>.</p>
</li>
<li>
<p>Repeat the previous steps for any additional databases to run remote jobs on the agent's host.</p>
</li>
</ol>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006334"></a>
<div id="ADMIN12036" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Monitoring and Mana<a id="sthref3207"></a>ging the Scheduler</h2>
<p>The following sections discuss how to monitor and manage the Scheduler:</p>
<ul>
<li>
<p><a href="#i1006475">Viewing the Currently Active Window and Resource Plan</a></p>
</li>
<li>
<p><a href="#i1006487">Finding Information About Currently Running Jobs</a></p>
</li>
<li>
<p><a href="#i1007245">Monitoring and Managing Window and Job Logs</a></p>
</li>
<li>
<p><a href="#i1011757">Managing Scheduler Security</a></p>
</li>
</ul>
<a id="i1006475"></a>
<div id="ADMIN12037" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Viewing the Currently Active Window and Resource Plan</h3>
<p>You can view the currently active window and the plan associated with it by issuing the following statement:</p>
<pre dir="ltr">
SELECT WINDOW_NAME, RESOURCE_PLAN FROM DBA_SCHEDULER_WINDOWS
WHERE ACTIVE='TRUE';

WINDOW_NAME                    RESOURCE_PLAN
------------------------------ --------------------------
MY_WINDOW10                    MY_RESOURCEPLAN1
</pre>
<p>If there is no window active, you can view the active resource plan by issuing the following statement:</p>
<pre dir="ltr">
SELECT * FROM V$RSRC_PLAN;
</pre></div>
<!-- class="sect2" -->
<a id="i1006487"></a>
<div id="ADMIN12038" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Finding Information About Curren<a id="sthref3208"></a>tly Running Jobs</h3>
<p>You can check a job's state by issuing the following statement:</p>
<pre dir="ltr">
SELECT JOB_NAME, STATE FROM DBA_SCHEDULER_JOBS
WHERE JOB_NAME = 'MY_EMP_JOB1';

JOB_NAME                       STATE
------------------------------ ---------
MY_EMP_JOB1                    DISABLED
</pre>
<p>In this case, you could enable the job using the <code dir="ltr">ENABLE</code> procedure. <a href="#g1017472">Table 30-2</a> shows the valid values for job state.</p>
<div id="ADMIN13110" class="tblformal">
<p class="titleintable"><a id="sthref3209"></a><a id="g1017472"></a>Table 30-2 Job States</p>
<table class="cellalignment1338" title="Job States" summary="Column 1 contains possible vallues for job state, column 2 explains the meaning of the state." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t12">Job State</th>
<th class="cellalignment1334" id="r1c2-t12">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t12" headers="r1c1-t12">
<p><code dir="ltr">disabled</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t12 r1c2-t12">
<p>The job is disabled.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t12" headers="r1c1-t12">
<p><code dir="ltr">scheduled</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t12 r1c2-t12">
<p>The job is scheduled to be executed.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t12" headers="r1c1-t12">
<p><code dir="ltr">running</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t12 r1c2-t12">
<p>The job is currently running.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t12" headers="r1c1-t12">
<p><code dir="ltr">completed</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t12 r1c2-t12">
<p>The job has completed, and is not scheduled to run again.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t12" headers="r1c1-t12">
<p><code dir="ltr">stopped</code></p>
</td>
<td class="cellalignment1335" headers="r6c1-t12 r1c2-t12">
<p>The job was scheduled to run once and was stopped while it was running.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t12" headers="r1c1-t12">
<p><code dir="ltr">broken</code></p>
</td>
<td class="cellalignment1335" headers="r7c1-t12 r1c2-t12">
<p>The job is broken.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t12" headers="r1c1-t12">
<p><code dir="ltr">failed</code></p>
</td>
<td class="cellalignment1335" headers="r8c1-t12 r1c2-t12">
<p>The job was scheduled to run once and failed.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r9c1-t12" headers="r1c1-t12">
<p><code dir="ltr">retry</code> <code dir="ltr">scheduled</code></p>
</td>
<td class="cellalignment1335" headers="r9c1-t12 r1c2-t12">
<p>The job has failed at least once and a retry has been scheduled to be executed.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r10c1-t12" headers="r1c1-t12">
<p><code dir="ltr">succeeded</code></p>
</td>
<td class="cellalignment1335" headers="r10c1-t12 r1c2-t12">
<p>The job was scheduled to run once and completed successfully.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r11c1-t12" headers="r1c1-t12">
<p><code dir="ltr">chain_stalled</code></p>
</td>
<td class="cellalignment1335" headers="r11c1-t12 r1c2-t12">
<p>The job is of type chain and has no steps running, no steps scheduled to run, and no event steps waiting on an event, and the chain <code dir="ltr">evaluation_interval</code> is set to <code dir="ltr">NULL</code>. No progress will be made in the chain unless there is manual intervention.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>You can check the progress of currently running jobs by issuing the following statement:</p>
<pre dir="ltr">
SELECT * FROM ALL_SCHEDULER_RUNNING_JOBS;
</pre>
<p>Note that, for the column <code dir="ltr">CPU_USED</code> to show valid data, the initialization parameter <code dir="ltr">RESOURCE_LIMIT</code> must be set to <code dir="ltr">true</code>.</p>
<p>You can check the status of all jobs at <a id="sthref3210"></a><a id="sthref3211"></a>all remote and local destinations by issuing the following statement:</p>
<pre dir="ltr">
SELECT * FROM DBA_SCHEDULER_JOB_DESTS;
</pre>
<p>You can find out information about a job that is part of a running chain by issuing the following statement:</p>
<pre dir="ltr">
SELECT * FROM ALL_SCHEDULER_RUNNING_CHAINS WHERE JOB_NAME='MY_JOB1';
</pre>
<p>You can check whether the job coordinator is running by searching for a process of the form <code dir="ltr">cjqNNN</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details regarding the <code dir="ltr">*_SCHEDULER_RUNNING_JOBS</code> and <code dir="ltr">DBA_SCHEDULER_JOBS</code> views</p>
</li>
<li>
<p><a href="schedover.htm#CHDCIEII">"Multiple-Destination Jobs"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1007245"></a>
<div id="ADMIN12039" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring and Managing Window and Job Logs<a id="sthref3212"></a><a id="sthref3213"></a></h3>
<p>The Scheduler supports two kinds of logs: the job log and the window log.</p>
<div id="ADMIN12520" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref3214"></a>
<h4 class="sect3">Job Log</h4>
<p>You can view information about job runs, job state changes, and job failures in the job log. The job log is implemented as the following two data dictionary views:</p>
<ul>
<li>
<p><code dir="ltr">*_SCHEDULER_JOB_LOG</code></p>
</li>
<li>
<p><code dir="ltr">*_SCHEDULER_JOB_RUN_DETAILS</code></p>
</li>
</ul>
<p>You can control the amount of logging that the Scheduler performs on jobs at both the job class and individual job level. Normally, you control logging at the class level, as this offers you more control over logging for the jobs in the class.</p>
<p>See <a href="scheduse.htm#CHDGIDFD">"Viewing the Job Log"</a> for definitions of the various logging levels and for information about logging level precedence between jobs and their job class. By default, the logging level of job classes is <code dir="ltr">LOGGING_RUNS</code>, which causes all job runs to be logged.</p>
<p>You can set the <code dir="ltr">logging_level</code> attribute when you create the job class, or you can use the <code dir="ltr">SET_ATTRIBUTE</code> procedure to change the logging level at a later time. The following example sets the logging level of jobs in the <code dir="ltr">myclass1</code> job class to <code dir="ltr">LOGGING_FAILED_RUNS</code>, which means that only failed runs are logged. Note that all job classes are in the <code dir="ltr">SYS</code> schema.</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.SET_ATTRIBUTE (
   'sys.myclass1', 'logging_level', DBMS_SCHEDULER.LOGGING_FAILED_RUNS);
END;
/
</pre>
<p>You must be granted the <code dir="ltr">MANAGE</code> <code dir="ltr">SCHEDULER</code> privilege to set the logging level of a job class.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="scheduse.htm#CHDGIDFD">"Viewing the Job Log"</a> for more detailed information about the job log and for examples of queries against the job log views</p>
</li>
<li>
<p><a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details on the job log views.</p>
</li>
<li>
<p><a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code dir="ltr">CREATE_JOB_CLASS</code> and <code dir="ltr">SET_ATTRIBUTE</code> procedures</p>
</li>
<li>
<p><a href="#CHDCCDFD">"Setting Scheduler Preferences"</a> for information about setting retention for log entries</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="i1016070"></a>
<div id="ADMIN12043" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Window Log</h4>
<p>The Scheduler makes an entry in the window log each time that:</p>
<ul>
<li>
<p>You create or drop a window</p>
</li>
<li>
<p>A window opens</p>
</li>
<li>
<p>A window closes</p>
</li>
<li>
<p>Windows overlap</p>
</li>
<li>
<p>You enable or disable a window</p>
</li>
</ul>
<p>There are no logging levels for window activity logging.</p>
<p>To see the contents of the window log, query the <code dir="ltr">DBA_SCHEDULER_WINDOW_LOG</code> view. The following statement shows sample output from this view:</p>
<pre dir="ltr">
SELECT log_id, to_char(log_date, 'DD-MON-YY HH24:MI:SS') timestamp,
   window_name, operation FROM DBA_SCHEDULER_WINDOW_LOG;

    LOG_ID TIMESTAMP            WINDOW_NAME       OPERATION
---------- -------------------- ----------------- --------
         4 10/01/2004 15:29:23  WEEKEND_WINDOW    CREATE
         5 10/01/2004 15:33:01  WEEKEND_WINDOW    UPDATE
        22 10/06/2004 22:02:48  WEEKNIGHT_WINDOW  OPEN
        25 10/07/2004 06:59:37  WEEKNIGHT_WINDOW  CLOSE
        26 10/07/2004 22:01:37  WEEKNIGHT_WINDOW  OPEN
        29 10/08/2004 06:59:51  WEEKNIGHT_WINDOW  CLOSE
</pre>
<p>The <code dir="ltr">DBA_SCHEDULER_WINDOWS_DETAILS</code> view provides information about every window that was active and is now closed (completed). The following statement shows sample output from that view:</p>
<pre dir="ltr">
SELECT LOG_ID, WINDOW_NAME, ACTUAL_START_DATE, ACTUAL_DURATION
  FROM DBA_SCHEDULER_WINDOW_DETAILS;

    LOG_ID WINDOW_NAME      ACTUAL_START_DATE                    ACTUAL_DURATION
---------- ---------------- ------------------------------------ ---------------
        25 WEEKNIGHT_WINDOW 06-OCT-04 10:02.48.832438 PM PST8PDT +000 01:02:32
        29 WEEKNIGHT_WINDOW 07-OCT-04 10.01.37.025704 PM PST8PDT +000 03:02:00
</pre>
<p>Notice that log IDs correspond in both of these views, and that in this case the rows in the <code dir="ltr">DBA_SCHEDULER_WINDOWS_DETAILS</code> view correspond to the <code dir="ltr">CLOSE</code> operations in the <code dir="ltr">DBA_SCHEDULER_WINDOW_LOG</code> view.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details on the window log views.</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="ADMIN12044" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref3215"></a>
<h4 class="sect3">Purging Logs</h4>
<p>To prevent job and window logs from growing indiscriminately, use the <code dir="ltr">SET_SCHEDULER_ATTRIBUTE</code> procedure to specify how much history (in days) to keep. Once per day, the Scheduler automatically purges all log entries that are older than the specified history period from both the job log and the window log. The default history period is 30 days. For example, to change the history period to 90 days, issue the following statement:</p>
<pre dir="ltr">
DBMS_SCHEDULER.SET_SCHEDULER_ATTRIBUTE('log_history','90');
</pre>
<p>Some job classes are more important than others. Because of this, you can override this global history setting by using a class-specific setting. For example, suppose that there are three job classes (<code dir="ltr">class1</code>, <code dir="ltr">class2</code>, and <code dir="ltr">class3</code>), and that you want to keep 10 days of history for the window log, <code dir="ltr">class1</code>, and <code dir="ltr">class3</code>, but 30 days for <code dir="ltr">class2</code>. To achieve this, issue the following statements:</p>
<pre dir="ltr">
DBMS_SCHEDULER.SET_SCHEDULER_ATTRIBUTE('log_history','10');
DBMS_SCHEDULER.SET_ATTRIBUTE('class2','log_history','30');
</pre>
<p>You can also set the class-specific history when creating the job class.</p>
<p>Note that log entries pertaining to steps of a chain run are not purged until the entries for the main chain job are purged.</p>
<p class="subhead2"><a id="ADMIN12703"></a>Purging Logs Manually</p>
<p>The <code dir="ltr">PURGE_LOG</code> procedure enables you to manually purge logs. As an example, the following statement purges all entries from both the job and window logs:</p>
<pre dir="ltr">
DBMS_SCHEDULER.PURGE_LOG();
</pre>
<p>Another example is the following, which purges all entries from the jog log that are older than three days. The window log is not affected by this statement.</p>
<pre dir="ltr">
DBMS_SCHEDULER.PURGE_LOG(log_history =&gt; 3, which_log =&gt; 'JOB_LOG');
</pre>
<p>The following statement purges all window log entries older than 10 days and all job log entries older than 10 days that relate to <code dir="ltr">job1</code> and to the jobs in <code dir="ltr">class2</code>:</p>
<pre dir="ltr">
DBMS_SCHEDULER.PURGE_LOG(log_history =&gt; 10, job_name =&gt; 'job1, sys.class2');
</pre></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1011757"></a>
<div id="ADMIN12047" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Managing Sched<a id="sthref3216"></a><a id="sthref3217"></a>uler Security</h3>
<p>You should grant the <code dir="ltr">CREATE</code> <code dir="ltr">JOB</code> system privilege to regular users who need to be able to use the Scheduler to schedule and run jobs. You should grant <code dir="ltr">MANAGE</code> <code dir="ltr">SCHEDULER</code> to any database administrator who must be able to manage system resources. Granting any other Scheduler system privilege or role should not be done without great caution. In particular, the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">JOB</code> system privilege and the <code dir="ltr">SCHEDULER_ADMIN</code> role, which includes it, are very powerful because they allow execution of code as any user. They should only be granted to very powerful roles or users.</p>
<p>A particularly important issue from a security point of view is handling external jobs. Only users that need to run jobs outside of the database should be allowed to do so. You must grant the <code dir="ltr">CREATE EXTERNAL JOB</code> system privilege to those users. Security for the Scheduler has no other special requirements. See <a class="olink DBSEG" href="../../network.112/e36292/toc.htm"><span class="italic">Oracle Database Security Guide</span></a> for details regarding security.</p>
<div class="infoboxnotealso">
<p class="notep1">Note:</p>
When upgrading from Oracle Database 10g Release 1 to Oracle Database 10<span class="italic">g</span> Release 2 or later, <code dir="ltr">CREATE EXTERNAL JOB</code> is automatically granted to all users and roles that have the <code dir="ltr">CREATE JOB</code> privilege. Oracle recommends that you revoke this privilege from users that do not need it.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1007297"></a>
<div id="ADMIN12052" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Import/Export and the Sch<a id="sthref3218"></a>eduler</h2>
<p>You must use the Data Pump utilities (<code dir="ltr">impdp</code> and <code dir="ltr">expdp</code>) to export Scheduler objects. You cannot use the earlier import/export utilities (<code dir="ltr">IMP</code> and <code dir="ltr">EXP</code>) with the Scheduler. Also, Scheduler objects cannot be exported while the database is in read-only mode.</p>
<p>An export generates the DDL that was used to create the Scheduler objects. All attributes are exported. When an import is done, all the database objects are re-created in the new database. All schedules are stored with their time zones, which are maintained in the new database. For example, schedule "Monday at 1 PM PST in a database in San Francisco" would be the same if it was exported and imported to a database in Germany.</p>
<p>Although Scheduler credentials are exported, for security reasons, the passwords in these credentials are not exported. After you import Scheduler credentials, you must reset the passwords using the <code dir="ltr">SET_ATTRIBUTE</code> procedure of the <code dir="ltr">DBMS_SCHEDULER</code> package.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SUTIL2877" href="../../server.112/e22490/part_dp.htm#SUTIL2877"><span class="italic">Oracle Database Utilities</span></a> for details on Data Pump</div>
</div>
<!-- class="sect1" -->
<a id="BAJEIACF"></a>
<div id="ADMIN12053" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Troubleshooting the Scheduler<a id="sthref3219"></a></h2>
<p>This section contains the following troubleshooting topics:</p>
<ul>
<li>
<p><a href="#i1006531">A Job Does Not Run</a></p>
</li>
<li>
<p><a href="#BAJCDBBI">A Program Becomes Disabled</a></p>
</li>
<li>
<p><a href="#BAJHABAG">A Window Fails to Take Effect</a></p>
</li>
</ul>
<a id="i1006531"></a>
<div id="ADMIN12054" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">A Job Does Not Run<a id="sthref3220"></a></h3>
<p>A job may fail to run for several reasons. To begin troubleshooting a job that you suspect did not run, check the job state by issuing the following statement:</p>
<pre dir="ltr">
SELECT JOB_NAME, STATE FROM DBA_SCHEDULER_JOBS;
</pre>
<p>Typical output will resemble the following:</p>
<pre dir="ltr">
JOB_NAME                       STATE
------------------------------ ---------
MY_EMP_JOB                     DISABLED
MY_EMP_JOB1                    FAILED
MY_NEW_JOB1                    DISABLED
MY_NEW_JOB2                    BROKEN
MY_NEW_JOB3                    COMPLETED
</pre>
<div id="ADMIN13338" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref3221"></a>
<h4 class="sect3">About Job States</h4>
<p>There a four states that a job could be in if it does not run:</p>
<ul>
<li>
<p><a href="#i1011867">Failed Jobs</a></p>
</li>
<li>
<p><a href="#i1011871">Broken Jobs</a></p>
</li>
<li>
<p><a href="#i1011876">Disabled Jobs</a></p>
</li>
<li>
<p><a href="#i1013597">Completed Jobs</a></p>
</li>
</ul>
<a id="i1011867"></a>
<div id="ADMIN12055" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Failed Jobs</h5>
<p>If a job has the status of <code dir="ltr">FAILED</code> in the job table, it was scheduled to run once but the execution has failed. If the job was specified as restartable, all retries have failed.</p>
<p>If a job fails in the middle of execution, only the last transaction of that job is rolled back. If your job executes multiple transactions, then you must be careful about setting <code dir="ltr">restartable</code> to <code dir="ltr">TRUE</code>. You can query failed jobs by querying the <code dir="ltr">*_SCHEDULER_JOB_RUN_DETAILS</code> views.</p>
</div>
<!-- class="sect4" -->
<a id="i1011871"></a>
<div id="ADMIN12056" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Broken Jobs</h5>
<p>A broken job is one that has exceeded a certain number of failures. This number is set in <code dir="ltr">max_failures</code>, and can be altered. In the case of a broken job, the entire job is broken, and it will not be run until it has been fixed. For debugging and testing, you can use the <code dir="ltr">RUN_JOB</code> procedure.</p>
<p>You can query broken jobs by querying the <code dir="ltr">*_SCHEDULER_JOBS</code> and <code dir="ltr">*_SCHEDULER_JOB_LOG</code> views.</p>
</div>
<!-- class="sect4" -->
<a id="i1011876"></a>
<div id="ADMIN12057" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Disabled Jobs</h5>
<p>A job can become disabled for the following reasons:</p>
<ul>
<li>
<p>The job was manually disabled</p>
</li>
<li>
<p>The job class it belongs to was dropped</p>
</li>
<li>
<p>The program, chain, or schedule that it points to was dropped</p>
</li>
<li>
<p>A window or window group is its schedule and the window or window group is dropped</p>
</li>
</ul>
</div>
<!-- class="sect4" -->
<a id="i1013597"></a>
<div id="ADMIN12058" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4">Completed Jobs</h5>
<p>A job will be completed if <code dir="ltr">end_date</code> or <code dir="ltr">max_runs</code> is reached. (If a job recently completed successfully but is scheduled to run again, the job state is <code dir="ltr">SCHEDULED</code>.)</p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<div id="ADMIN13339" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref3222"></a>
<h4 class="sect3">Viewing the Job Log</h4>
<p>An important troubleshooting tool is the job log. For details and instructions, see <a href="scheduse.htm#CHDGIDFD">"Viewing the Job Log"</a>.</p>
</div>
<!-- class="sect3" -->
<a id="CHDEDGEF"></a>
<div id="ADMIN13340" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Troubleshooting Remote Jobs<a id="sthref3223"></a></h4>
<p>Remote jobs must successfully communicate with a Scheduler agent on the remote host. If a remote job does not run, check the <code dir="ltr">DBA_SCHEDULER_JOBS</code> view and the job log first. Then perform the following tasks:</p>
<ol>
<li>
<p>Check that the remote system is reachable over the network with tools such as <code dir="ltr">nslookup</code> and <code dir="ltr">ping</code>.</p>
</li>
<li>
<p>Check the status of the Scheduler agent on the remote host by calling the <code dir="ltr">GET_AGENT_VERSION</code> package procedure.</p>
<pre dir="ltr">
DECLARE 
  versionnum VARCHAR2(30);
BEGIN
  versionnum := DBMS_SCHEDULER.GET_AGENT_VERSION('remote_host.example.com');
  DBMS_OUTPUT.PUT_LINE(versionnum);
END;
/
</pre>
<p>If an error is generated, the agent may not be installed or may not be registered with your local database. See <a href="#BAJDFIAB">"Enabling and Disabling Databases for Remote Jobs"</a> for instructions for installing, registering, and starting the Scheduler agent.</p>
</li>
</ol>
</div>
<!-- class="sect3" -->
<a id="BAJDICCB"></a>
<div id="ADMIN12059" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">About Job Rec<a id="sthref3224"></a><a id="sthref3225"></a>overy After a Failure</h4>
<p>The Scheduler attempts to recover jobs that are interrupted when:</p>
<ul>
<li>
<p>The database abnormally shuts down</p>
</li>
<li>
<p>A job slave process is killed or otherwise fails</p>
</li>
<li>
<p>For an external job, the external job process that starts the executable or script is killed or otherwise fails. (The external job process is <code dir="ltr">extjob</code> on UNIX. On Windows, it is the external job service.)</p>
</li>
<li>
<p>For an external job, the process that runs the end-user executable or script is killed or otherwise fails.</p>
</li>
</ul>
<p>Job recovery proceeds as follows:</p>
<ul>
<li>
<p>The Scheduler adds an entry to the job log for the instance of the job that was running when the failure occurred. In the log entry, the <code dir="ltr">OPERATION</code> is '<code dir="ltr">RUN</code>', the <code dir="ltr">STATUS</code> is '<code dir="ltr">STOPPED</code>', and <code dir="ltr">ADDITIONAL_INFO</code> contains one of the following:</p>
<ul>
<li>
<p><code dir="ltr">REASON="Job slave process was terminated"</code></p>
</li>
<li>
<p><code dir="ltr">REASON="ORA-01014: ORACLE shutdown in progress"</code></p>
</li>
</ul>
</li>
<li>
<p>If <code dir="ltr">restartable</code> is set to <code dir="ltr">TRUE</code> for the job, the job is restarted.</p>
</li>
<li>
<p>If <code dir="ltr">restartable</code> is set to <code dir="ltr">FALSE</code> for the job:</p>
<ul>
<li>
<p>If the job is a run-once job and <code dir="ltr">auto_drop</code> is set to <code dir="ltr">TRUE</code>, the job run is done and the job is dropped.</p>
</li>
<li>
<p>If the job is a run-once job and <code dir="ltr">auto_drop</code> is set to <code dir="ltr">FALSE</code>, the job is disabled and the job <code dir="ltr">state</code> is set to '<code dir="ltr">STOPPED</code>'.</p>
</li>
<li>
<p>If the job is a repeating job, the Scheduler schedules the next job run and the job <code dir="ltr">state</code> is set to '<code dir="ltr">SCHEDULED</code>'.</p>
</li>
</ul>
</li>
</ul>
<p>When a job is restarted as a result of this recovery process, the new run is entered into the job log with the operation '<code dir="ltr">RECOVERY_RUN</code>'.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BAJCDBBI"></a>
<div id="ADMIN12060" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">A Program Becomes Disabled</h3>
<p>A program can become disabled if a program argument is dropped or <code dir="ltr">number_of_arguments</code> is changed so that all arguments are no longer defined.</p>
<p>See <a href="scheduse.htm#i1022811">"Creating and Managing Programs to Define Jobs"</a> for more information regarding programs.</p>
</div>
<!-- class="sect2" -->
<a id="BAJHABAG"></a>
<div id="ADMIN12061" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">A Window Fails to Take Effect</h3>
<p>A window can fail to take effect for the following reasons:</p>
<ul>
<li>
<p>A window becomes disabled when it is at the end of its schedule</p>
</li>
<li>
<p>A window that points to a schedule that no longer exists is disabled</p>
</li>
</ul>
<p>See <a href="scheduse.htm#i1010604">"Managing Job Scheduling and Job Priorities with Windows"</a> for more information regarding windows.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006617"></a>
<div id="ADMIN12062" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Examples of Using the Schedu<a id="sthref3226"></a>ler</h2>
<p>This section discusses the following topics:</p>
<ul>
<li>
<p><a href="#i1009128">Examples of Creating Job Classes</a></p>
</li>
<li>
<p><a href="#i1014139">Examples of Setting Attributes</a></p>
</li>
<li>
<p><a href="#BAJHFHCD">Examples of Creating Chains</a></p>
</li>
<li>
<p><a href="#BAJJAGHI">Examples of Creating Jobs and Schedules Based on Events</a></p>
</li>
<li>
<p><a href="#BAJBJCCF">Example of Creating a Job In an Oracle Data Guard Environment</a></p>
</li>
</ul>
<a id="i1009128"></a>
<div id="ADMIN12064" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Examples of Creating Job Classes</h3>
<p>This section contains several examples of creating job classes. To create a job class, you use the <code dir="ltr">CREATE_JOB_CLASS</code> procedure.</p>
<div id="ADMIN13113" class="example">
<p class="titleinexample"><a id="sthref3227"></a>Example 30-1 Creating a Job Class</p>
<p>The following statement creates a job class:</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.CREATE_JOB_CLASS (
   job_class_name              =&gt;  'my_class1',
   service                     =&gt;  'my_service1', 
   comments                    =&gt;  'This is my first job class');
END;
/
</pre>
<p>This creates <code dir="ltr">my_class1</code> in <code dir="ltr">SYS</code>. It uses a service called <code dir="ltr">my_service1</code>. To verify that the job class was created, issue the following statement:</p>
<pre dir="ltr">
SELECT JOB_CLASS_NAME FROM DBA_SCHEDULER_JOB_CLASSES
WHERE JOB_CLASS_NAME = 'MY_CLASS1';

JOB_CLASS_NAME
------------------------------
MY_CLASS1
</pre></div>
<!-- class="example" -->
<div id="ADMIN13114" class="example">
<p class="titleinexample"><a id="sthref3228"></a>Example 30-2 Creating a Job Class</p>
<p>The following statement creates a job class:</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.CREATE_JOB_CLASS (
   job_class_name             =&gt;  'finance_jobs', 
   resource_consumer_group    =&gt;  'finance_group',
   service                    =&gt;  'accounting',
   comments                   =&gt;  'All finance jobs');
END;
/
</pre>
<p>This creates <code dir="ltr">finance_jobs</code> in <code dir="ltr">SYS</code>. It assigns a resource consumer group called <code dir="ltr">finance_group</code>, and designates service affinity for the <code dir="ltr">accounting</code> service. Note that if the <code dir="ltr">accounting</code> service is mapped to a resource consumer group other than <code dir="ltr">finance_group</code>, jobs in this class run under the <code dir="ltr">finance_group</code> consumer group, because the <code dir="ltr">resource_consumer_group</code> attribute takes precedence.</p>
</div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code dir="ltr">CREATE_JOB_CLASS</code> procedure and <a href="scheduse.htm#i1010485">"Creating Job Classes"</a> for further information</div>
</div>
<!-- class="sect2" -->
<a id="i1014139"></a>
<div id="ADMIN12068" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Examples of Setting Attributes</h3>
<p>This section contains several examples of setting attributes. To set attributes, you use <code dir="ltr">SET_ATTRIBUTE</code> and <code dir="ltr">SET_SCHEDULER_ATTRIBUTE</code> procedures.</p>
<div id="ADMIN13120" class="example">
<p class="titleinexample"><a id="sthref3229"></a>Example 30-3 Setting the Repeat Interval Attribute</p>
<p>The following example resets the frequency <code dir="ltr">my_emp_job1</code> will run to daily:</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.SET_ATTRIBUTE (
   name           =&gt;   'my_emp_job1',
   attribute      =&gt;   'repeat_interval',
   value          =&gt;   'FREQ=DAILY');
END;
/
</pre>
<p>To verify the change, issue the following statement:</p>
<pre dir="ltr">
SELECT JOB_NAME, REPEAT_INTERVAL FROM DBA_SCHEDULER_JOBS
WHERE JOB_NAME =  'MY_EMP_JOB1';

JOB_NAME             REPEAT_INTERVAL
----------------     ---------------
MY_EMP_JOB1          FREQ=DAILY
</pre></div>
<!-- class="example" -->
<div id="ADMIN13125" class="example">
<p class="titleinexample"><a id="sthref3230"></a>Example 30-4 Setting Multiple Job Attributes for a Set of Jobs</p>
<p>The following example sets four different attributes for each of five jobs:</p>
<pre dir="ltr">
DECLARE
 newattr sys.jobattr;
 newattrarr sys.jobattr_array;
 j number;
BEGIN
 -- Create new JOBATTR array
 newattrarr := sys.jobattr_array();

 -- Allocate enough space in the array
 newattrarr.extend(20);
 j := 1;
 FOR i IN 1..5 LOOP
   -- Create and initialize a JOBATTR object type
   newattr := sys.jobattr(job_name =&gt; 'TESTJOB' || to_char(i),
                          attr_name =&gt; 'MAX_FAILURES',
                          attr_value =&gt; 5);
   -- Add it to the array.
   newattrarr(j) := newattr;
   j := j + 1;
   newattr := sys.jobattr(job_name =&gt; 'TESTJOB' || to_char(i),
                          attr_name =&gt; 'COMMENTS',
                          attr_value =&gt; 'Test job');
   newattrarr(j) := newattr;
   j := j + 1;
   newattr := sys.jobattr(job_name =&gt; 'TESTJOB' || to_char(i),
                          attr_name =&gt; 'END_DATE',
                          attr_value =&gt; systimestamp + interval '24' hour);
   newattrarr(j) := newattr;
   j := j + 1;
   newattr := sys.jobattr(job_name =&gt; 'TESTJOB' || to_char(i),
                          attr_name =&gt; 'SCHEDULE_LIMIT',
                          attr_value =&gt; interval '1' hour);
   newattrarr(j) := newattr;
   j := j + 1;
 END LOOP;

 -- Call SET_JOB_ATTRIBUTES to set all 20 set attributes in one transaction
 DBMS_SCHEDULER.SET_JOB_ATTRIBUTES(newattrarr, 'TRANSACTIONAL');
END;
/
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code dir="ltr">SET_SCHEDULER_ATTRIBUTE</code> procedure and <a href="#CHDCCDFD">"Setting Scheduler Preferences"</a></div>
</div>
<!-- class="sect2" -->
<a id="BAJHFHCD"></a>
<div id="ADMIN12069" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Examples of Creating Chains</h3>
<p>This section contains examples of creating chains. To create chains, you use the <code dir="ltr">CREATE_CHAIN</code> procedure. After creating a chain, you add steps to the chain with the <code dir="ltr">DEFINE_CHAIN_STEP</code> or <code dir="ltr">DEFINE_CHAIN_EVENT_STEP</code> procedures and define the rules with the <code dir="ltr">DEFINE_CHAIN_RULE</code> procedure.</p>
<div id="ADMIN13126" class="example">
<p class="titleinexample"><a id="sthref3231"></a>Example 30-5 Creating a Chain</p>
<p>The following example creates a chain where <code dir="ltr">my_program1</code> runs before <code dir="ltr">my_program2</code> and <code dir="ltr">my_program3</code>. <code dir="ltr">my_program2</code> and <code dir="ltr">my_program3</code> run in parallel after <code dir="ltr">my_program1</code> has completed.</p>
<p>The user for this example must have the <code dir="ltr">CREATE</code> <code dir="ltr">EVALUATION</code> <code dir="ltr">CONTEXT</code>, <code dir="ltr">CREATE</code> <code dir="ltr">RULE</code>, and <code dir="ltr">CREATE</code> <code dir="ltr">RULE</code> <code dir="ltr">SET</code> privileges. See <a href="#BAJBEDFI">"Setting Chain Privileges"</a> for more information.</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.CREATE_CHAIN (
   chain_name            =&gt;  'my_chain1',
   rule_set_name         =&gt;  NULL,
   evaluation_interval   =&gt;  NULL,
   comments              =&gt;  NULL);
END;
/
 
--- define three steps for this chain. Referenced programs must be enabled.
BEGIN
 DBMS_SCHEDULER.DEFINE_CHAIN_STEP('my_chain1', 'stepA', 'my_program1');
 DBMS_SCHEDULER.DEFINE_CHAIN_STEP('my_chain1', 'stepB', 'my_program2');
 DBMS_SCHEDULER.DEFINE_CHAIN_STEP('my_chain1', 'stepC', 'my_program3');
END;
/

--- define corresponding rules for the chain.
BEGIN
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE('my_chain1', 'TRUE', 'START stepA');
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE (
   'my_chain1', 'stepA COMPLETED', 'Start stepB, stepC');
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE (
   'my_chain1', 'stepB COMPLETED AND stepC COMPLETED', 'END');
END;
/

--- enable the chain
BEGIN
 DBMS_SCHEDULER.ENABLE('my_chain1');
END;
/

--- create a chain job to start the chain daily at 1:00 p.m.
BEGIN
 DBMS_SCHEDULER.CREATE_JOB (
   job_name        =&gt; 'chain_job_1',
   job_type        =&gt; 'CHAIN',
   job_action      =&gt; 'my_chain1',
   repeat_interval =&gt; 'freq=daily;byhour=13;byminute=0;bysecond=0',
   enabled         =&gt; TRUE);
END;
/
</pre></div>
<!-- class="example" -->
<div id="ADMIN13127" class="example">
<p class="titleinexample"><a id="sthref3232"></a>Example 30-6 Creating a Chain</p>
<p>The following example creates a chain where first <code dir="ltr">my_program1</code> runs. If it succeeds, <code dir="ltr">my_program2</code> runs; otherwise, <code dir="ltr">my_program3</code> runs.</p>
<pre dir="ltr">
BEGIN
 DBMS_SCHEDULER.CREATE_CHAIN (
   chain_name            =&gt; 'my_chain2',
   rule_set_name         =&gt; NULL,
   evaluation_interval   =&gt; NULL,
   comments              =&gt; NULL);
END;
/
 
--- define three steps for this chain.
BEGIN
 DBMS_SCHEDULER.DEFINE_CHAIN_STEP('my_chain2', 'step1', 'my_program1');
 DBMS_SCHEDULER.DEFINE_CHAIN_STEP('my_chain2', 'step2', 'my_program2');
 DBMS_SCHEDULER.DEFINE_CHAIN_STEP('my_chain2', 'step3', 'my_program3');
END;
/
 
--- define corresponding rules for the chain.
BEGIN
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE ('my_chain2', 'TRUE', 'START step1');
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE (
   'my_chain2', 'step1 SUCCEEDED', 'Start step2');
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE (
   'my_chain2', 'step1 COMPLETED AND step1 NOT SUCCEEDED', 'Start step3');
 DBMS_SCHEDULER.DEFINE_CHAIN_RULE (
   'my_chain2', 'step2 COMPLETED OR step3 COMPLETED', 'END');
END;
/
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code dir="ltr">CREATE_CHAIN</code>, <code dir="ltr">DEFINE_CHAIN_STEP</code>, and <code dir="ltr">DEFINE_CHAIN_RULE</code> procedures and <a href="#CHDCCDFD">"Setting Scheduler Preferences"</a></div>
</div>
<!-- class="sect2" -->
<a id="BAJJAGHI"></a>
<div id="ADMIN12070" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Examples of Creating Jobs and Schedules Based on Events</h3>
<p>This section contains examples of creating event-based jobs and event schedules. To create event-based jobs, you use the <code dir="ltr">CREATE_JOB</code> procedure. To create event-based schedules, you use the <code dir="ltr">CREATE_EVENT_SCHEDULE</code> procedure.</p>
<p>These examples assume the existence of an application that, when it detects the arrival of a file on a system, enqueues an event onto the queue <code dir="ltr">my_events_q</code>.</p>
<div id="ADMIN13128" class="example">
<p class="titleinexample"><a id="sthref3233"></a>Example 30-7 Creating an Event-Based Schedule</p>
<p>The following example illustrates creating a schedule that can be used to start a job whenever the Scheduler receives an event indicating that a file arrived on the system before 9AM:</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.CREATE_EVENT_SCHEDULE (
   schedule_name     =&gt;  'scott.file_arrival',
   start_date        =&gt;  systimestamp,
   event_condition   =&gt;  'tab.user_data.object_owner = ''SCOTT'' 
      and tab.user_data.event_name = ''FILE_ARRIVAL'' 
      and extract hour from tab.user_data.event_timestamp &lt; 9',
   queue_spec        =&gt;  'my_events_q');
END;
/
</pre></div>
<!-- class="example" -->
<div id="ADMIN13129" class="example">
<p class="titleinexample"><a id="sthref3234"></a>Example 30-8 Creating an Event-Based Job</p>
<p>The following example creates a job that starts when the Scheduler receives an event indicating that a file arrived on the system:</p>
<pre dir="ltr">
BEGIN
  DBMS_SCHEDULER.CREATE_JOB (
   job_name            =&gt;  my_job,
   program_name        =&gt;  my_program,
   start_date          =&gt;  '15-JUL-04 1.00.00AM US/Pacific',
   event_condition     =&gt;  'tab.user_data.event_name = ''LOW_INVENTORY''',
   queue_spec          =&gt;  'my_events_q'
   enabled             =&gt;  TRUE,
   comments            =&gt;  'my event-based job');
END;
/
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS72235" href="../../appdev.112/e40758/d_sched.htm#ARPLS72235"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code dir="ltr">CREATE_JOB</code> and <code dir="ltr">CREATE_EVENT_SCHEDULE</code> procedures</div>
</div>
<!-- class="sect2" -->
<a id="BAJBJCCF"></a>
<div id="ADMIN12506" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Example of Crea<a id="sthref3235"></a><a id="sthref3236"></a>ting a Job In an Oracle Data Guard Environment</h3>
<p>In an Oracle Data Guard environment, the Scheduler includes additional support for two database roles: primary and logical standby. You can configure a job to run only when the database is in the primary role or only when the database is in the logical standby role. To do so, you set the <code dir="ltr">database_role</code> attribute. This example explains how to enable a job to run in both database roles. The method used is to create two copies of the job and assign a different <code dir="ltr">database_role</code> attribute to each.</p>
<p>By default, a job runs when the database is in the role that it was in when the job was created. You can run the same job in both roles using the following steps:</p>
<ol>
<li>
<p>Copy the job</p>
</li>
<li>
<p>Enable the new job</p>
</li>
<li>
<p>Change the <code dir="ltr">database_role</code> attribute of the new job to the required role</p>
</li>
</ol>
<p>The example starts by creating a job called <code dir="ltr">primary_job</code> on the primary database. It then makes a copy of this job and sets its <code dir="ltr">database_role</code> attribute to '<code dir="ltr">LOGICAL</code> <code dir="ltr">STANDBY</code>'. If the primary database then becomes a logical standby, the job continues to run according to its schedule.</p>
<p>When you copy a job, the new job is disabled, so you must enable the new job.</p>
<pre dir="ltr">
BEGIN DBMS_SCHEDULER.CREATE_JOB (
     job_name       =&gt; 'primary_job',
     program_name   =&gt; 'my_prog',
     schedule_name  =&gt; 'my_sched');

 DBMS_SCHEDULER.COPY_JOB('primary_job','standby_job');
 DBMS_SCHEDULER.ENABLE(name=&gt;'standby_job', commit_semantics=&gt;'ABSORB_ERRORS');
 DBMS_SCHEDULER.SET_ATTRIBUTE('standby_job','database_role','LOGICAL STANDBY');
END;
/
</pre>
<p>After you execute this example, the data in the <code dir="ltr">DBA_SCHEDULER_JOB_ROLES</code> view is as follows:</p>
<pre dir="ltr">
SELECT JOB_NAME, DATABASE_ROLE FROM DBA_SCHEDULER_JOB_ROLES
   WHERE JOB_NAME IN ('PRIMARY_JOB','STANDBY_JOB');

JOB_NAME               DATABASE_ROLE
--------               ----------------
PRIMARY_JOB            PRIMARY
STABDBY_JOB            LOGICAL STANDBY
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For a physical standby database, any changes made to Scheduler objects or any database changes made by Scheduler jobs on the primary database are applied to the physical standby like any other database changes.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BAJJHCFB"></a>
<div id="ADMIN12071" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Scheduler Reference</h2>
<p>This section contains reference information for Oracle Scheduler. It contains the following topics:</p>
<ul>
<li>
<p><a href="#i1011204">Scheduler Privileges</a></p>
</li>
<li>
<p><a href="#i1006377">Scheduler Data Dictionary Views</a></p>
</li>
</ul>
<a id="i1011204"></a>
<div id="ADMIN12072" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Scheduler Privileges<a id="sthref3237"></a><a id="sthref3238"></a></h3>
<p><a href="#BAJJEEFJ">Table 30-3, "Scheduler System Privileges"</a> and <a href="#CHDJGACI">Table 30-4, "Scheduler Object Privileges"</a> describe the various Scheduler privileges.</p>
<div id="ADMIN13130" class="tblformalwide">
<p class="titleintable"><a id="sthref3239"></a><a id="BAJJEEFJ"></a>Table 30-3 Scheduler System Privileges</p>
<table class="cellalignment1333" title="Scheduler System Privileges" summary="Column 1 lists privileges that are important when using the Scheduler, column 2 displays the operations that are authorized by each privilege." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t23">Privilege Name</th>
<th class="cellalignment1334" id="r1c2-t23">Operations Authorized</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t23" headers="r1c1-t23">
<p><code dir="ltr">CREATE</code> <code dir="ltr">JOB</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t23 r1c2-t23">
<p>This privilege enables you to create jobs, chains, schedules, programs, file watchers, credentials, destinations, and groups in your own schema. You can always alter and drop these objects in your own schema, even if you do not have the <code dir="ltr">CREATE</code> <code dir="ltr">JOB</code> privilege. In this case, the object would have been created in your schema by another user with the <code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">JOB</code> privilege.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t23" headers="r1c1-t23">
<p><code dir="ltr">CREATE</code> <code dir="ltr">ANY</code> <code dir="ltr">JOB</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t23 r1c2-t23">
<p>This privilege enables you to create, alter, and drop jobs, chains, schedules, programs, file watchers, credentials, destinations, and groups in any schema except <code dir="ltr">SYS</code>. This privilege is extremely powerful and should be used with care because it allows the grantee to execute any PL/SQL code as any other database user.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t23" headers="r1c1-t23">
<p><code dir="ltr">CREATE</code> <code dir="ltr">EXTERNAL</code> <code dir="ltr">JOB</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t23 r1c2-t23">
<p>This privilege is required to create jobs that run outside of the database. Owners of jobs of type '<code dir="ltr">EXECUTABLE</code>' or jobs that point to programs of type '<code dir="ltr">EXECUTABLE</code>' require this privilege. To run a job of type '<code dir="ltr">EXECUTABLE</code>', you must have this privilege and the <code dir="ltr">CREATE</code> <code dir="ltr">JOB</code> privilege. This privilege is also required to retrieve files from a remote host and to save files to one or more remote hosts.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t23" headers="r1c1-t23">
<p><code dir="ltr">EXECUTE</code> <code dir="ltr">ANY</code> <code dir="ltr">PROGRAM</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t23 r1c2-t23">
<p>This privilege enables your jobs to use programs or chains from any schema.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t23" headers="r1c1-t23">
<p><code dir="ltr">EXECUTE</code> <code dir="ltr">ANY</code> <code dir="ltr">CLASS</code></p>
</td>
<td class="cellalignment1335" headers="r6c1-t23 r1c2-t23">
<p>This privilege enables your jobs to run under any job class.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t23" headers="r1c1-t23">
<p><code dir="ltr">MANAGE</code> <code dir="ltr">SCHEDULER</code></p>
</td>
<td class="cellalignment1335" headers="r7c1-t23 r1c2-t23">
<p>This is the most important privilege for administering the Scheduler. It enables you to create, alter, and drop job classes, windows, and window groups, and to stop jobs with the <code dir="ltr">force</code> option. It also enables you to set and retrieve Scheduler attributes, purge Scheduler logs, and set the agent password for a database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div id="ADMIN13308" class="tblformalwide">
<p class="titleintable"><a id="sthref3240"></a><a id="CHDJGACI"></a>Table 30-4 Scheduler Object Privileges</p>
<table class="cellalignment1333" title="Scheduler Object Privileges" summary="olumn 1 lists privileges that are important when using the Scheduler, column 2 displays the operations that are authorized by each privilege." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t24">Privilege Name</th>
<th class="cellalignment1334" id="r1c2-t24">Operations Authorized</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t24" headers="r1c1-t24">
<p><code dir="ltr">SELECT</code></p>
</td>
<td class="cellalignment1335" headers="r2c1-t24 r1c2-t24">
<p>You can grant object privileges on a group to other users by granting <code dir="ltr">SELECT</code> on the group.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t24" headers="r1c1-t24">
<p><code dir="ltr">EXECUTE</code></p>
</td>
<td class="cellalignment1335" headers="r3c1-t24 r1c2-t24">
<p>You can grant this privilege only on programs, chains, file watchers, credentials, and job classes. The <code dir="ltr">EXECUTE</code> privilege enables you to reference the object in a job. It also enables you to view the object if the object is was not created in your schema.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t24" headers="r1c1-t24">
<p><code dir="ltr">ALTER</code></p>
</td>
<td class="cellalignment1335" headers="r4c1-t24 r1c2-t24">
<p>This privilege enables you to alter or drop the object it is granted on. Altering includes such operations as enabling, disabling, defining or dropping program arguments, setting or resetting job argument values and running a job. Certain restricted attributes of jobs of job type <code dir="ltr">EXECUTABLE</code> cannot be altered using the <code dir="ltr">ALTER</code> object privilege. These include <code dir="ltr">job_type</code>, <code dir="ltr">job_action</code>, <code dir="ltr">number_of_arguments</code>, <code dir="ltr">event_spec</code>, and setting PL/SQL date functions as schedules.</p>
<p>For programs, jobs, chains, file watchers, and credentials, this privilege also enables schemas that do not own these objects to view them. This privilege can be granted on jobs, chains, programs, schedules, file watchers, and credentials. For other types of Scheduler objects, you must grant the <code dir="ltr">MANAGE</code> <code dir="ltr">SCHEDULER</code> system privilege.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t24" headers="r1c1-t24">
<p><code dir="ltr">ALL</code></p>
</td>
<td class="cellalignment1335" headers="r5c1-t24 r1c2-t24">
<p>This privilege authorizes operations allowed by all other object privileges possible for a given object. It can be granted on jobs, programs, chains, schedules, file watchers, credentials, and job classes.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
No object privileges are required to use a destination object created by another user.</div>
<p>The <code dir="ltr">SCHEDULER_ADMIN</code> role is created with all of the system privileges shown in <a href="#BAJJEEFJ">Table 30-3</a> (with the <code dir="ltr">ADMIN</code> option). The <code dir="ltr">SCHEDULER_ADMIN</code> role is granted to <code dir="ltr">DBA</code> (with the <code dir="ltr">ADMIN</code> option).</p>
<p>The <code dir="ltr">DBMS_SCHEDULER</code> package ignores privileges granted on scheduler objects, such as jobs or chains, through roles. Object privileges must be granted directly to the user.</p>
<p>The following object privileges are granted to <code dir="ltr">PUBLIC</code>: <code dir="ltr">SELECT</code> <code dir="ltr">ALL_SCHEDULER_*</code> views, <code dir="ltr">SELECT</code> <code dir="ltr">USER_SCHEDULER_*</code> views, <code dir="ltr">SELECT</code> <code dir="ltr">SYS.SCHEDULER$_JOBSUFFIX_S</code> (for generating a job name), and <code dir="ltr">EXECUTE</code> <code dir="ltr">SYS.DEFAULT_JOB_CLASS</code>.</p>
</div>
<!-- class="sect2" -->
<a id="i1006377"></a>
<div id="ADMIN12073" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Scheduler Data Dictionary Views<a id="sthref3241"></a><a id="sthref3242"></a><a id="sthref3243"></a></h3>
<p>You can check Scheduler information by using many views. An example is the following, which shows information for completed instances of <code dir="ltr">my_job1</code>:</p>
<pre dir="ltr">
SELECT JOB_NAME, STATUS, ERROR#
FROM DBA_SCHEDULER_JOB_RUN_DETAILS WHERE JOB_NAME = 'MY_JOB1';

JOB_NAME     STATUS           ERROR#
--------     --------------   ------
MY_JOB1      FAILURE           20000
</pre>
<p><a href="#g1017380">Table 30-5</a> contains views associated with the Scheduler. The <code dir="ltr">*_SCHEDULER_JOBS</code>, <code dir="ltr">*_SCHEDULER_SCHEDULES</code>, <code dir="ltr">*_SCHEDULER_PROGRAMS</code>, <code dir="ltr">*_SCHEDULER_RUNNING_JOBS</code>, <code dir="ltr">*_SCHEDULER_JOB_LOG</code>, <code dir="ltr">*_SCHEDULER_JOB_RUN_DETAILS</code> views are particularly useful for managing jobs. See <a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details regarding Scheduler views.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In the following table, the asterisk at the beginning of a view name can be replaced with <code dir="ltr">DBA</code>, <code dir="ltr">ALL</code>, or <code dir="ltr">USER</code>.</div>
<div id="ADMIN13131" class="tblformal">
<p class="titleintable"><a id="sthref3244"></a><a id="g1017380"></a>Table 30-5 Scheduler Views</p>
<table class="cellalignment1338" title="Scheduler Views" summary="Column 1 lists the views associated with the Scheduler, column 2 contains a description of each view." dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t27">View</th>
<th class="cellalignment1334" id="r1c2-t27">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_CHAIN_RULES
</pre></td>
<td class="cellalignment1335" headers="r2c1-t27 r1c2-t27">
<p>These views show all rules for all chains.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r3c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_CHAIN_STEPS
</pre></td>
<td class="cellalignment1335" headers="r3c1-t27 r1c2-t27">
<p>These views show all steps for all chains.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r4c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_CHAINS
</pre></td>
<td class="cellalignment1335" headers="r4c1-t27 r1c2-t27">
<p>These views show all chains.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r5c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_CREDENTIALS
</pre></td>
<td class="cellalignment1335" headers="r5c1-t27 r1c2-t27">
<p>These views show all credentials.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r6c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_DB_DESTS
</pre></td>
<td class="cellalignment1335" headers="r6c1-t27 r1c2-t27">
<p>These views show all database destinations.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r7c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_DESTS
</pre></td>
<td class="cellalignment1335" headers="r7c1-t27 r1c2-t27">
<p>These views show all destinations, both database and external.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r8c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_EXTERNAL_DESTS
</pre></td>
<td class="cellalignment1335" headers="r8c1-t27 r1c2-t27">
<p>These views show all external destinations.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r9c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_FILE_WATCHERS
</pre></td>
<td class="cellalignment1335" headers="r9c1-t27 r1c2-t27">
<p>These views show all file watchers.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r10c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_GLOBAL_ATTRIBUTE
</pre></td>
<td class="cellalignment1335" headers="r10c1-t27 r1c2-t27">
<p>These views show the current values of Scheduler attributes.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r11c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_GROUP_MEMBERS
</pre></td>
<td class="cellalignment1335" headers="r11c1-t27 r1c2-t27">
<p>These views show all group members in all groups.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r12c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_GROUPS
</pre></td>
<td class="cellalignment1335" headers="r12c1-t27 r1c2-t27">
<p>These views show all groups.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r13c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOB_ARGS
</pre></td>
<td class="cellalignment1335" headers="r13c1-t27 r1c2-t27">
<p>These views show all set argument values for all jobs.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r14c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOB_CLASSES
</pre></td>
<td class="cellalignment1335" headers="r14c1-t27 r1c2-t27">
<p>These views show all job classes.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r15c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOB_DESTS
</pre></td>
<td class="cellalignment1335" headers="r15c1-t27 r1c2-t27">
<p>These views show the state of both local jobs and jobs at remote destinations, including child jobs of multiple-destination jobs. You obtain job destination IDs (<code dir="ltr">job_dest_id</code>) from these views.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r16c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOB_LOG
</pre></td>
<td class="cellalignment1335" headers="r16c1-t27 r1c2-t27">
<p>These views show job runs and state changes, depending on the logging level set.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r17c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOB_ROLES
</pre></td>
<td class="cellalignment1335" headers="r17c1-t27 r1c2-t27">
<p>These views show all jobs by Oracle Data Guard database role.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r18c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOB_RUN_DETAILS
</pre></td>
<td class="cellalignment1335" headers="r18c1-t27 r1c2-t27">
<p>These views show all completed (failed or successful) job runs.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r19c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_JOBS
</pre></td>
<td class="cellalignment1335" headers="r19c1-t27 r1c2-t27">
<p>These views show all jobs, enabled as well as disabled.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r20c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_NOTIFICATIONS
</pre></td>
<td class="cellalignment1335" headers="r20c1-t27 r1c2-t27">
<p>These views show all job state e-mail notifications.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r21c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_PROGRAM_ARGS
</pre></td>
<td class="cellalignment1335" headers="r21c1-t27 r1c2-t27">
<p>These views show all arguments defined for all programs as well as the default values if they exist.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r22c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_PROGRAMS
</pre></td>
<td class="cellalignment1335" headers="r22c1-t27 r1c2-t27">
<p>These views show all programs.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r23c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_RUNNING_CHAINS
</pre></td>
<td class="cellalignment1335" headers="r23c1-t27 r1c2-t27">
<p>These views show all chains that are running.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r24c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_RUNNING_JOBS
</pre></td>
<td class="cellalignment1335" headers="r24c1-t27 r1c2-t27">
<p>These views show state information on all jobs that are currently being run.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r25c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_SCHEDULES
</pre></td>
<td class="cellalignment1335" headers="r25c1-t27 r1c2-t27">
<p>These views show all schedules.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r26c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_WINDOW_DETAILS
</pre></td>
<td class="cellalignment1335" headers="r26c1-t27 r1c2-t27">
<p>These views show all completed window runs.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r27c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_WINDOW_GROUPS
</pre></td>
<td class="cellalignment1335" headers="r27c1-t27 r1c2-t27">
<p>These views show all window groups.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r28c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_WINDOW_LOG
</pre></td>
<td class="cellalignment1335" headers="r28c1-t27 r1c2-t27">
<p>These views show all state changes made to windows.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r29c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_WINDOWS
</pre></td>
<td class="cellalignment1335" headers="r29c1-t27 r1c2-t27">
<p>These views show all windows.</p>
</td>
</tr>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r30c1-t27" headers="r1c1-t27">
<pre dir="ltr">
*_SCHEDULER_WINGROUP_MEMBERS
</pre></td>
<td class="cellalignment1335" headers="r30c1-t27 r1c2-t27">
<p>These views show the members of all window groups, one row for each group member.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1326">
<tr>
<td class="cellalignment1335">
<table class="cellalignment1331">
<tr>
<td class="cellalignment1330"><a href="scheduse.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1330"><a href="part7.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1337">
<table class="cellalignment1329">
<tr>
<td class="cellalignment1330"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1330"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1330"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1330"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1330"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1330"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
