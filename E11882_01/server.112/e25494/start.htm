<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Starting Up and Shutting Down</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1055" />
<meta name="dcterms.created" content="2015-05-05T8:27:33Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Administrator's Guide" />
<meta name="dcterms.identifier" content="E25494-07" />
<meta name="dcterms.isVersionOf" content="ADMIN" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="create.htm" title="Previous" type="text/html" />
<link rel="Next" href="restart.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25494.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">10/49</span> <!-- End Header -->
<div id="ADMIN004" class="chapter"><a id="g1011160"></a> <a id="i1006091"></a>
<h1 class="chapter"><span class="secnum">3</span> Starting Up and Shutting Down</h1>
<p>In this chapter:</p>
<ul>
<li>
<p><a href="#i1006133">Starting Up a Database</a></p>
</li>
<li>
<p><a href="#i1006443">Altering Database Availability</a></p>
</li>
<li>
<p><a href="#i1006543">Shutting Down a Database</a></p>
</li>
<li>
<p><a href="#i1006629">Quiescing a Database</a></p>
</li>
<li>
<p><a href="#i1006690">Suspending and Resuming a Database</a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD801" href="../../rac.112/e41960/admin.htm#RACAD801"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for additional information specific to an Oracle Real Application Clusters environment</div>
</li>
</ul>
<a id="i1006133"></a>
<div id="ADMIN10063" class="sect1">
<h2 class="sect1">Star<a id="sthref344"></a><a id="sthref345"></a>ting Up a Database</h2>
<p>When you start up a database, you create an instance of that database and you determine the state of the database. Normally, you start up an instance by mounting and opening the database. Doing so makes the database available for any valid user to connect to and perform typical data access operations. Other options exist, and these are also discussed in this section.</p>
<p>This section contains the following topics relating to starting up an instance of a database:</p>
<ul>
<li>
<p><a href="#i1006154">About Database Startup Options</a></p>
</li>
<li>
<p><a href="#i1006219">About Initialization Parameter Files and Startup</a></p>
</li>
<li>
<p><a href="#CIHFEABB">About Automatic Startup of Database Services</a></p>
</li>
<li>
<p><a href="#i1006197">Preparing to Start Up an Instance</a></p>
</li>
<li>
<p><a href="#i1006285">Starting Up an Instance</a></p>
</li>
</ul>
<a id="i1006154"></a>
<div id="ADMIN11136" class="sect2">
<h3 class="sect2">About Database Startup Options</h3>
<p>When Oracle Restart is not in use, you can start up a database instance with SQL*Plus, Recovery Manager, or Enterprise Manager. If your database is being managed by Oracle Restart, the recommended way to start the database is with SRVCTL.</p>
<p>See <a href="restart.htm#BABGIGDB">Chapter 4, "Configuring Automatic Restart of an Oracle Database"</a> for information about Oracle Restart.</p>
<div id="ADMIN11137" class="sect3"><a id="sthref346"></a>
<h4 class="sect3">Starting Up a Database Using SQL*Plus<a id="sthref347"></a><a id="sthref348"></a><a id="sthref349"></a><a id="sthref350"></a></h4>
<p><a id="sthref351"></a>You can start a SQL*Plus session, connect to Oracle Database with administrator privileges, and then issue the <code dir="ltr">STARTUP</code> command. Using SQL*Plus in this way is the only method described in detail in this book.</p>
</div>
<!-- class="sect3" -->
<div id="ADMIN11138" class="sect3"><a id="sthref352"></a>
<h4 class="sect3">Starting Up a Database Using Recovery Manager<a id="sthref353"></a><a id="sthref354"></a><a id="sthref355"></a><a id="sthref356"></a></h4>
<p>You can also use Recovery Manager (RMAN) to execute <code dir="ltr">STARTUP</code> and <code dir="ltr">SHUTDOWN</code> commands. You may prefer to do this if your are within the RMAN environment and do not want to invoke SQL*Plus.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RCMRF158" href="../../backup.112/e10643/rcmsynta2019.htm#RCMRF158"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the RMAN <code dir="ltr">STARTUP</code> command</div>
</div>
<!-- class="sect3" -->
<a id="i1006175"></a>
<div id="ADMIN11139" class="sect3">
<h4 class="sect3">Starting Up a Database Using Oracle Enterprise Manager<a id="sthref357"></a><a id="sthref358"></a><a id="sthref359"></a></h4>
<p>You can use <a id="sthref360"></a>Oracle Enterprise Manager to administer your database, including starting it up and shutting it down. Enterprise Manager combines a GUI console, agents, common services, and tools to provide an integrated and comprehensive systems management platform for managing Oracle products. Enterprise Manager Database Control, which is the portion of Enterprise Manager that is dedicated to administering an Oracle database, enables you to perform the functions discussed in this book using a GUI interface, rather than command line operations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink OEMCN" href="http://www.oracle.com/pls/topic/lookup?ctx=db112&amp;id=OEMCN"><span class="italic">Oracle Enterprise Manager Concepts</span></a></p>
</li>
<li>
<p><a class="olink ADMQS052" href="../../server.112/e10897/instance.htm#ADMQS052"><span class="italic">Oracle Database 2 Day DBA</span></a></p>
</li>
</ul>
</div>
<p>The remainder of this section describes using SQL*Plus to start up a database instance.</p>
</div>
<!-- class="sect3" -->
<div id="ADMIN12824" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref361"></a>
<h4 class="sect3">Starting Up a Database Using SRVCTL</h4>
<p>When Oracle Restart is installed and configured for your database, Oracle recommends that you use SRVCTL to start the database. This ensures that:</p>
<ul>
<li>
<p>Any components on which the database depends (such as Oracle Automatic Storage Management and the Oracle Net listener) are automatically started first, and in the proper order.</p>
</li>
<li>
<p>The database is started according to the settings in its Oracle Restart configuration. An example of such a setting is the server parameter file location.</p>
</li>
<li>
<p>Environment variables stored in the Oracle Restart configuration for the database are set before starting the instance.</p>
</li>
</ul>
<p>See <a href="restart.htm#srvstartdb1">"srvctl start database"</a> and <a href="restart.htm#BABIIECH">"Starting and Stopping Components Managed by Oracle Restart"</a> for details.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="ADMIN12825" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref362"></a>
<h3 class="sect2">Specifying Initialization Parameters at Startup</h3>
<p>To start an instance, the database must read instance configuration parameters (the initialization parameters) from either a server parameter file (<code dir="ltr">SPFILE</code>) or a text initialization parameter file (PFILE).</p>
<p>The database looks for these files in a default location. You can specify nondefault locations for these files, and the method for doing so depends on whether you start the database with SQL*Plus (when Oracle Restart is not in use) or with SRVCTL (when the database is being managed with Oracle Restart).</p>
<p>The following sections provide details:</p>
<ul>
<li>
<p><a href="#i1006219">About Initialization Parameter Files and Startup</a></p>
</li>
<li>
<p><a href="#CIHDFJGC">Starting Up with SQL*Plus with a Nondefault Server Parameter File</a></p>
</li>
<li>
<p><a href="#CIHJBABH">Starting Up with SRVCTL with a Nondefault Server Parameter File</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="create.htm#g1034097">Chapter 2, "Creating and Configuring an Oracle Database"</a>, for more information about initialization parameters, initialization parameter files, and server parameter files</div>
<a id="i1006219"></a>
<div id="ADMIN12826" class="sect3">
<h4 class="sect3">About Initialization Parameter Files and Startup<a id="sthref363"></a><a id="sthref364"></a><a id="sthref365"></a></h4>
<p>When you start the database instance, it attempts to read the initialization parameters from an <code dir="ltr">SPFILE</code> in a platform-specific default location. If it finds no <code dir="ltr">SPFILE</code>, it searches for a text initialization parameter file.</p>
<p><a href="create.htm#CIAJEBBI">Table 2-3</a> lists PFILE and SPFILE default names and locations.</p>
<p>In the platform-specific default location, Oracle Database locates your initialization parameter file by examining file names in the following order:</p>
<ol>
<li>
<p><code dir="ltr">spfile</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_SID</span></code>.<code dir="ltr">ora</code></p>
</li>
<li>
<p><code dir="ltr">spfile.ora</code></p>
</li>
<li>
<p><code dir="ltr">init</code><code dir="ltr"><span class="codeinlineitalic">ORACLE_SID</span></code>.<code dir="ltr">ora</code></p>
</li>
</ol>
<p>The first two files are <code dir="ltr">SPFILE</code>s and the third is a text initialization parameter file. If DBCA created the SPFILE in an Oracle Automatic Storage Management disk group, the database searches for the SPFILE in the disk group.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">spfile.ora</code> file is included in this search path because in an Oracle Real Application Clusters environment one server parameter file is used to store the initialization parameter settings for all instances. There is no instance-specific location for storing a server parameter file.
<p>For more information about the server parameter file for an Oracle Real Application Clusters environment, see <a class="olink RACAD020" href="../../rac.112/e41960/admin.htm#RACAD020"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a>.</p>
</div>
<p>If you (or the Database Configuration Assistant) created a server parameter file, but you want to override it with a text initialization parameter file, you can do so with SQL*Plus, specifying the <code dir="ltr">PFILE</code> clause of the <code dir="ltr">STARTUP</code> command to identify the initialization parameter file:</p>
<pre dir="ltr">
STARTUP PFILE = /u01/oracle/dbs/init.ora
</pre>
<p><a id="ADMIN12827"></a><span class="subhead3">Nondefault Server Parameter Files&nbsp;</span>A nondefault server parameter file (<code dir="ltr">SPFILE</code>) is an <code dir="ltr">SPFILE</code> that is in a location other than the default location. It is not usually necessary to start an instance with a nondefault <code dir="ltr">SPFILE</code>. However, should such a need arise, both SRVCTL (with Oracle Restart) and SQL*Plus provide ways to do so. These are described later in this section.</p>
<p><a id="ADMIN12548"></a><span class="subhead3">Initialization Files and Oracle Automatic Storage Management&nbsp;</span>A database that uses Oracle Automatic Storage Management (Oracle ASM) usually has a nondefault <code dir="ltr">SPFILE</code>. If you use the Database Configuration Assistant (DBCA) to configure a database to use Oracle ASM, DBCA creates an <code dir="ltr">SPFILE</code> for the database instance in an Oracle ASM disk group, and then causes a text initialization parameter file (PFILE) to be created in the default location in the local file system to point to the <code dir="ltr">SPFILE</code>, as explained in the next section.</p>
</div>
<!-- class="sect3" -->
<a id="CIHDFJGC"></a>
<div id="ADMIN12828" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Starting Up with SQL*Plus with a Nondefault Server Parameter File</h4>
<p>With SQL*Plus you can use the <code dir="ltr">PFILE</code> clause to start an instance with a nondefault server parameter file.</p>
<p><span class="bold">To start up with SQL*Plus with a nondefault server parameter file:</span></p>
<ol>
<li>
<p>Create a one-line text initialization parameter file that contains only the <code dir="ltr">SPFILE</code> parameter. The value of the parameter is the nondefault server parameter file location.</p>
<p>For example, create a text initialization parameter file <code dir="ltr">/u01/oracle/dbs/spf_init.ora</code> that contains only the following parameter:</p>
<pre dir="ltr">
SPFILE = /u01/oracle/dbs/test_spfile.ora
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use the <code dir="ltr">IFILE</code> initialization parameter within a text initialization parameter file to point to a server parameter file. In this context, you must use the <code dir="ltr">SPFILE</code> initialization parameter.</div>
</li>
<li>
<p>Start up the instance pointing to this initialization parameter file.</p>
<pre dir="ltr">
STARTUP PFILE = /u01/oracle/dbs/spf_init.ora
</pre></li>
</ol>
<p>The <code dir="ltr">SPFILE</code> must reside on the database host computer. Therefore, the preceding method also provides a means for a client system to start a database that uses an <code dir="ltr">SPFILE</code>. It also eliminates the need for a client system to maintain a client-side initialization parameter file. When the client system reads the initialization parameter file containing the <code dir="ltr"><a id="sthref366"></a><a id="sthref367"></a>SPFILE</code> parameter, it passes the value to the server where the specified <code dir="ltr">SPFILE</code> is read.</p>
</div>
<!-- class="sect3" -->
<a id="CIHJBABH"></a>
<div id="ADMIN12829" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Starting Up with SRVCTL with a Nondefault Server Parameter File</h4>
<p>If your database is being managed by Oracle Restart, you can specify the location of a nondefault SPFILE by setting or modifying the SPFILE location option in the Oracle Restart configuration for the database.</p>
<p><span class="bold">To start up with SRVCTL with a nondefault server parameter file:</span></p>
<ol>
<li>
<p>Prepare to run SRVCTL as described in <a href="restart.htm#BABHCCIA">"Preparing to Run SRVCTL"</a>.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">
srvctl modify database -d <span class="italic">db_unique_name</span> -p <span class="italic">spfile_path</span>
</pre>
<p>where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> must match the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter setting for the database.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span> [<span class="italic">options</span>]
</pre></li>
</ol>
<p>See <a href="restart.htm#i1001971">"SRVCTL Command Reference for Oracle Restart"</a> for more information.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CIHFEABB"></a>
<div id="ADMIN12830" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">About Automatic Startup of Database Services</h3>
<p><a id="sthref368"></a><a id="sthref369"></a><a id="sthref370"></a>When your database is managed by Oracle Restart, you can configure startup options for each individual database service (service). If you set the management policy for a service to <code dir="ltr">AUTOMATIC</code> (the default), the service starts automatically when you start the database with SRVCTL. If you set the management policy to <code dir="ltr">MANUAL</code>, the service does not automatically start, and you must manually start it with SRVCTL. A <code dir="ltr">MANUAL</code> setting does not prevent Oracle Restart from monitoring the service when it is running and restarting it if a failure occurs.</p>
<p><a id="sthref371"></a>In an Oracle Data Guard (Data Guard) environment in which databases are managed by Oracle Restart, you can additionally control automatic startup of services by assigning Data Guard roles to the services in their Oracle Restart configurations. A service automatically starts upon manual database startup only if the management policy of the service is <code dir="ltr">AUTOMATIC</code> and if one of its assigned roles matches the current role of the database.</p>
<p>See <a href="restart.htm#i1008562">"srvctl add service"</a> and <a href="restart.htm#i1009746">"srvctl modify service"</a> for the syntax for setting the management policy of and Data Guard roles for a service.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
When using Oracle Restart, Oracle strongly recommends that you use SRVCTL to create database services.</div>
</div>
<!-- class="sect2" -->
<a id="i1006197"></a>
<div id="ADMIN11141" class="sect2">
<h3 class="sect2">Preparing to Start Up an Instance</h3>
<div class="infobox-note">
<p class="notep1">Note:</p>
The following instructions are for installations where Oracle Restart is not in use. If your database is being managed by Oracle Restart, follow the instructions in <a href="restart.htm#BABIIECH">"Starting and Stopping Components Managed by Oracle Restart"</a>.</div>
<p>You must perform some preliminary steps before attempting to start an instance of your <a id="sthref372"></a>database<a id="sthref373"></a> using SQL*Plus.</p>
<ol>
<li>
<p>Ensure that any Oracle components on which the database depends are started.</p>
<p>For example, if the database stores data in Oracle Automatic Storage Management (Oracle ASM) disk groups, ensure that the Oracle ASM instance is running and the required disk groups are mounted. Also, it is preferable to start the Oracle Net listener before starting the database.</p>
</li>
<li>
<p>If you intend to use operating system authentication, log in to the database host computer as a member of the OSDBA group.</p>
<p>See <a href="dba.htm#i1006677">"Using Operating System Authentication"</a> for more information.</p>
</li>
<li>
<p>Ensure that environment variables are set so that you connect to the desired Oracle instance. For details, see <a href="dba.htm#BABFDIJE">"Submitting Commands and SQL to the Database"</a>.</p>
</li>
<li>
<p>Start SQL*Plus without connecting to the database:</p>
<pre dir="ltr">
SQLPLUS /NOLOG
</pre></li>
<li>
<p>Connect to Oracle Database as <code dir="ltr">SYSDBA</code>:</p>
<pre dir="ltr">
CONNECT <span class="italic">username</span> AS SYSDBA

&mdash;or&mdash;

CONNECT / AS SYSDBA
</pre></li>
</ol>
<p>Now you are connected to the database and ready to start up an instance of your database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQPUG" href="../../server.112/e16604/toc.htm"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for descriptions and syntax for the <code dir="ltr">CONNECT</code>, <code dir="ltr">STARTUP</code>, and <code dir="ltr">SHUTDOWN</code> commands.</div>
</div>
<!-- class="sect2" -->
<a id="i1006285"></a>
<div id="ADMIN11142" class="sect2">
<h3 class="sect2">Starting Up an Instance</h3>
<p>When Oracle Restart is not in use, you use the SQL*Plus <code dir="ltr">STARTUP</code><a id="sthref374"></a> command to start up an Oracle Database instance. If your database is being managed by Oracle Restart, Oracle recommends that you use the <a href="restart.htm#srvstartdb1">srvctl start database</a> command.</p>
<p>In either case, you can start an instance in various modes:</p>
<ul>
<li>
<p><code dir="ltr">NOMOUNT</code>&mdash;Start the instance without mounting a database. This does not allow access to the database and usually would be done only for database creation or the re-creation of control files.</p>
</li>
<li>
<p><code dir="ltr">MOUNT</code>&mdash;Start the instance and mount the database, but leave it closed. This state allows for certain DBA activities, but does not allow general access to the database.</p>
</li>
<li>
<p><code dir="ltr">OPEN</code>&mdash;Start the instance, and mount and open the database. This can be done in unrestricted mode, allowing access to all users, or in restricted mode, allowing access for database administrators only.</p>
</li>
<li>
<p><code dir="ltr">FORCE</code>&mdash;Force the instance to start after a startup or shutdown problem.</p>
</li>
<li>
<p><code dir="ltr">OPEN</code> <code dir="ltr">RECOVER</code>&mdash;Start the instance and have complete media recovery begin immediately.</p>
</li>
</ul>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot start a database instance if you are connected to the database through a shared server process.</div>
<p>The following scenarios describe and illustrate the various states in which you can start up an instance. Some restrictions apply when combining clauses of the <code dir="ltr">STARTUP</code> command or combining startup options for the <a href="restart.htm#srvstartdb1">srvctl start database</a> command.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
It is possible to encounter problems starting up an instance if control files, database files, or redo log files are not available. <a id="sthref375"></a><a id="sthref376"></a><a id="sthref377"></a>If one or more of the files specified by the <code dir="ltr">CONTROL_FILES</code> initialization parameter does not exist or cannot be opened when you attempt to mount a database, Oracle Database returns a warning message and does not mount the database.<a id="sthref378"></a><a id="sthref379"></a><a id="sthref380"></a><a id="sthref381"></a> If one or more of the data files or redo log files is not available or cannot be opened when attempting to open a database, the database returns a warning message and does not open the database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SQPUG127" href="../../server.112/e16604/ch_twelve044.htm#SQPUG127"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for details on the <code dir="ltr">STARTUP</code> command syntax</p>
</li>
<li>
<p><a href="restart.htm#BABIIECH">"Starting and Stopping Components Managed by Oracle Restart"</a> for instructions for starting a database that is managed by Oracle Restart.</p>
</li>
</ul>
</div>
<div id="ADMIN11143" class="sect3"><a id="sthref382"></a>
<h4 class="sect3">Starting an Instance, and Mounting and Opening a Database</h4>
<p><a id="sthref383"></a><a id="sthref384"></a>Normal database operation means that an instance is started and the database is mounted and open. This mode allows any valid user to connect to the database and perform data access operations.</p>
<p>The following command starts an instance, reads the initialization parameters from the default location, and then mounts and opens the database.</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Startup commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t14">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t14">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t14" headers="r1c1-t14">
<pre dir="ltr">
STARTUP
</pre></td>
<td class="cellalignment1335" headers="r2c1-t14 r1c2-t14">
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span>
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>where <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code> matches the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter.</p>
</div>
<!-- class="sect3" -->
<div id="ADMIN11144" class="sect3"><a id="sthref385"></a>
<h4 class="sect3">Starting an Instance Without Mounting a Database</h4>
<p><a id="sthref386"></a>You can start an instance without mounting a database. Typically, you do so only during database creation. Use one of the following commands:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Startup commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t15">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t15">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t15" headers="r1c1-t15">
<pre dir="ltr">
STARTUP NOMOUNT
</pre></td>
<td class="cellalignment1335" headers="r2c1-t15 r1c2-t15">
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span> -o nomount
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect3" -->
<a id="i1006317"></a>
<div id="ADMIN11145" class="sect3">
<h4 class="sect3">Starting an Instance and Mounting a Database</h4>
<p><a id="sthref387"></a><a id="sthref388"></a><a id="sthref389"></a>You can start an instance and mount a database without opening it, allowing you to perform specific maintenance operations. For example, the database must be mounted but not open during the following tasks:</p>
<ul>
<li>
<p>Enabling and disabling redo log archiving options. For more information, see <a href="archredo.htm#g1015189">Chapter 13, "Managing Archived Redo Logs"</a>.</p>
</li>
<li>
<p>Performing full database recovery. For more information, see <a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a></p>
</li>
</ul>
<p>The following command starts an instance and mounts the database, but leaves the database closed:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Startup commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t16">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t16">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t16" headers="r1c1-t16">
<pre dir="ltr">
STARTUP MOUNT
</pre></td>
<td class="cellalignment1335" headers="r2c1-t16 r1c2-t16">
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span> -o mount
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" --></div>
<!-- class="sect3" -->
<a id="i1006368"></a>
<div id="ADMIN11146" class="sect3">
<h4 class="sect3">Restricting Access to an Instance at Startup</h4>
<p><a id="sthref390"></a><a id="sthref391"></a>You can start an instance, and optionally mount and open a database, in restricted mode so that the instance is available only to administrative personnel (not general database users). Use this mode of instance startup when you must accomplish one of the following tasks:</p>
<ul>
<li>
<p>Perform an export or import of data</p>
</li>
<li>
<p>Perform a data load (with SQL*Loader)</p>
</li>
<li>
<p>Temporarily prevent typical users from using data</p>
</li>
<li>
<p>Perform certain migration or upgrade operations</p>
</li>
</ul>
<p><a id="sthref392"></a><a id="sthref393"></a><a id="sthref394"></a><a id="sthref395"></a>Typically, all users with the <code dir="ltr">CREATE SESSION</code> system privilege can connect to an open database. Opening a database in restricted mode allows database access only to users with both the <code dir="ltr">CREATE SESSION</code> and <code dir="ltr">RESTRICTED SESSION</code> system privilege. Only database administrators should have the <code dir="ltr">RESTRICTED SESSION</code> system privilege. Further, when the instance is in restricted mode, a database administrator cannot access the instance remotely through an Oracle Net listener, but can only access the instance locally from the system that the instance is running on.</p>
<p>The following command starts an instance (and mounts and opens the database) in restricted mode:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Startup commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t17">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t17">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t17" headers="r1c1-t17">
<pre dir="ltr">
STARTUP RESTRICT
</pre></td>
<td class="cellalignment1335" headers="r2c1-t17 r1c2-t17">
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span> -o restrict
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>You can use the restrict mode in combination with the mount, nomount, and open modes.</p>
<p>Later, use the <code dir="ltr">ALTER SYSTEM</code> statement to disable the <code dir="ltr">RESTRICTED SESSION</code> feature:</p>
<pre dir="ltr">
ALTER SYSTEM DISABLE RESTRICTED SESSION;
</pre>
<p>If you open the database in nonrestricted mode and later find that you must restrict access, you can use the <code dir="ltr">ALTER SYSTEM</code> statement to do so, as described in <a href="#i1006526">"Restricting Access to an Open Database"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF53082" href="../../server.112/e41084/statements_2014.htm#SQLRF53082"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information on the <code dir="ltr">ALTER SYSTEM</code> statement</div>
</div>
<!-- class="sect3" -->
<div id="ADMIN11147" class="sect3"><a id="sthref396"></a>
<h4 class="sect3">Forcing an Instance to Start</h4>
<p><a id="sthref397"></a><a id="sthref398"></a><a id="sthref399"></a><a id="sthref400"></a>In unusual circumstances, you might experience problems when attempting to start a database instance. You should not force a database to start unless you are faced with the following:</p>
<ul>
<li>
<p>You cannot shut down the current instance with the <code dir="ltr">SHUTDOWN NORMAL</code>, <code dir="ltr">SHUTDOWN IMMEDIATE</code>, or <code dir="ltr">SHUTDOWN TRANSACTIONAL</code> commands.</p>
</li>
<li>
<p>You experience problems when starting an instance.</p>
</li>
</ul>
<p>If one of these situations arises, you can usually solve the problem by starting a new instance (and optionally mounting and opening the database) using one of these commands:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Startup commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t19">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t19">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t19" headers="r1c1-t19">
<pre dir="ltr">
STARTUP FORCE
</pre></td>
<td class="cellalignment1335" headers="r2c1-t19 r1c2-t19">
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span> -o force
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>If an instance is running, the force mode shuts it down with mode <code dir="ltr">ABORT</code> before restarting it. In this case, the alert log shows the message "<code dir="ltr">Shutting down instance (abort)</code>" followed by "<code dir="ltr">Starting ORACLE instance (normal)</code>."</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1006611">"Shutting Down with the Abort Mode"</a> to understand the side effects of aborting the current instance</div>
</div>
<!-- class="sect3" -->
<div id="ADMIN11148" class="sect3"><a id="sthref401"></a>
<h4 class="sect3">Starting an Instance, Mounting a Database, and Starting Complete Media Recovery</h4>
<p><a id="sthref402"></a><a id="sthref403"></a><a id="sthref404"></a>If you know that media recovery is required, you can start an instance, mount a database to the instance, and have the recovery process automatically start by using one of these commands:<a id="sthref405"></a><a id="sthref406"></a></p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Startup commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t21">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t21">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t21" headers="r1c1-t21">
<pre dir="ltr">
STARTUP OPEN RECOVER
</pre></td>
<td class="cellalignment1335" headers="r2c1-t21 r1c2-t21">
<pre dir="ltr">
srvctl start database -d <span class="italic">db_unique_name</span> -o "open,recover"
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>If you attempt to perform recovery when no recovery is required, Oracle Database issues an error message.</p>
</div>
<!-- class="sect3" -->
<div id="ADMIN11149" class="sect3"><a id="sthref407"></a>
<h4 class="sect3">Automatic Database Startup at Operating System Start</h4>
<p><a id="sthref408"></a>Many sites use procedures to enable automatic startup of one or more Oracle Database instances and databases immediately following a system start. The procedures for performing this task are specific to each operating system. For information about automatic startup, see your operating system specific Oracle documentation.</p>
<p>Beginning with Oracle Database 11<span class="italic">g</span> Release 2, the preferred (and platform-independent) method of configuring automatic startup of a database is Oracle Restart. See <a href="restart.htm#BABGIGDB">Chapter 4, "Configuring Automatic Restart of an Oracle Database"</a> for details.</p>
</div>
<!-- class="sect3" -->
<div id="ADMIN11150" class="sect3"><a id="sthref409"></a>
<h4 class="sect3">Starting Remote Instances</h4>
<p><a id="sthref410"></a><a id="sthref411"></a>If your local Oracle Database server is part of a distributed database, you might want to start a remote instance and database. Procedures for starting and stopping remote instances vary widely depending on communication protocol and operating system.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006443"></a>
<div id="ADMIN11151" class="sect1">
<h2 class="sect1">Altering Database Availability</h2>
<p><a id="sthref412"></a>You can alter the availability of a database. You may want to do this in order to restrict access for maintenance reasons or to make the database read only. The following sections explain how to alter the availability of a database:</p>
<ul>
<li>
<p><a href="#i1006463">Mounting a Database to an Instance</a></p>
</li>
<li>
<p><a href="#i1006482">Opening a Closed Database</a></p>
</li>
<li>
<p><a href="#i1006490">Opening a Database in Read-Only Mode</a></p>
</li>
<li>
<p><a href="#i1006526">Restricting Access to an Open Database</a></p>
</li>
</ul>
<a id="i1006463"></a>
<div id="ADMIN11152" class="sect2">
<h3 class="sect2">Mounting a Database to an Instance<a id="sthref413"></a></h3>
<p><a id="sthref414"></a>When you perform specific administrative operations, the database must be started and mounted to an instance, but closed. You can achieve this scenario by starting the instance and mounting the database.</p>
<p><a id="sthref415"></a>To mount a database to a previously started, but not opened instance, use the SQL statement <code dir="ltr">ALTER DATABASE</code> with the <code dir="ltr">MOUNT</code> clause as follows:</p>
<pre dir="ltr">
ALTER DATABASE MOUNT;
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1006317">"Starting an Instance and Mounting a Database"</a> for a list of operations that require the database to be mounted and closed (and procedures to start an instance and mount a database in one step)</div>
</div>
<!-- class="sect2" -->
<a id="i1006482"></a>
<div id="ADMIN11153" class="sect2">
<h3 class="sect2">Opening a Closed Database</h3>
<p><a id="sthref416"></a>You can make a mounted but closed database available for general use by opening the database. To open a mounted database, use <a id="sthref417"></a>the <code dir="ltr">ALTER DATABASE</code> SQL statement with the <code dir="ltr">OPEN</code> clause:</p>
<pre dir="ltr">
ALTER DATABASE OPEN;
</pre>
<p>After executing this statement, any valid Oracle Database user with the <code dir="ltr">CREATE SESSION</code> system privilege can connect to the database.</p>
</div>
<!-- class="sect2" -->
<a id="i1006490"></a>
<div id="ADMIN11154" class="sect2">
<h3 class="sect2">Opening a Database in Read-Only Mode</h3>
<p><a id="sthref418"></a><a id="sthref419"></a>Opening a database in read-only mode enables you to query an open database while eliminating any potential for online data content changes. While opening a database in read-only mode guarantees that data file and redo log files are not written to, it does not restrict database recovery or operations that change the state of the database without generating redo. For example, you can take data files offline or bring them online since these operations do not affect data content.</p>
<p>If a query against a database in read-only mode uses temporary tablespace, for example to do disk sorts, then the issuer of the query must have a locally managed tablespace assigned as the default temporary tablespace. Otherwise, the query will fail. This is explained in <a href="tspaces.htm#i1009563">"Creating a Locally Managed Temporary Tablespace"</a>.</p>
<p>The following statement opens a database in read-only mode<a id="sthref420"></a>:</p>
<pre dir="ltr">
ALTER DATABASE OPEN READ ONLY;
</pre>
<p>You can also open a database in read/write mode as follows:</p>
<pre dir="ltr">
ALTER DATABASE OPEN READ WRITE;
</pre>
<p>However, read/write is the default mode.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use the <code dir="ltr">RESETLOGS</code> clause with a <code dir="ltr">READ ONLY</code> clause.</div>
<p class="subhead2"><a id="ADMIN13176"></a><a id="sthref421"></a>Limitations of a Read-only Database</p>
<ul>
<li>
<p>An application must not write database objects while executing against a read-only database. For example, an application writes database objects when it inserts, deletes, updates, or merges rows in a database table, including a global temporary table. An application writes database objects when it manipulates a database sequence. An application writes database objects when it locks rows, when it runs <code dir="ltr">EXPLAIN PLAN</code>, or when it executes DDL. Many of the functions and procedures in Oracle-supplied PL/SQL packages, such as <code dir="ltr">DBMS_SCHEDULER</code>, write database objects. If your application calls any of these functions and procedures, or if it performs any of the preceding operations, your application writes database objects and hence is not read-only.</p>
</li>
<li>
<p>When executing on a read-only database, you must commit or roll back any in-progress transaction that involves one database link before you use another database link. This is true even if you execute a generic <code dir="ltr">SELECT</code> statement on the first database link and the <span class="italic">transaction</span> is currently read-only.</p>
</li>
<li>
<p>You cannot compile or recompile PL/SQL stored procedures on a read-only database. To minimize PL/SQL invalidation because of remote procedure calls, use <code dir="ltr">REMOTE_DEPENDENCIES_MODE=SIGNATURE</code> in any session that does remote procedure calls on a read-only database.</p>
</li>
<li>
<p>You cannot invoke a remote procedure (even a read-only remote procedure) from a read-only database if the remote procedure has never been called on the database. This limitation applies to remote procedure calls in anonymous PL/SQL blocks and in SQL statements. You can either put the remote procedure call in a stored procedure, or you can invoke the remote procedure in the database prior to it becoming read only.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SQLRF008" href="../../server.112/e41084/statements_1.htm#SQLRF008"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the <code dir="ltr">ALTER DATABASE</code> statement</div>
</div>
<!-- class="sect2" -->
<a id="i1006526"></a>
<div id="ADMIN11155" class="sect2">
<h3 class="sect2">Restricting Access to an Open Database<a id="sthref422"></a></h3>
<p><a id="sthref423"></a>To place an already running instance in restricted mode, use the SQL statement <code dir="ltr">ALTER SYSTEM</code> with the <code dir="ltr">ENABLE RESTRICTED SESSION</code> clause. After this statement successfully completes, only users with the <code dir="ltr">RESTRICTED</code> <code dir="ltr">SESSION</code> privilege can initiate new connections. Users connecting as <code dir="ltr">SYSDBA</code> or connecting with the <code dir="ltr">DBA</code> role have this privilege.</p>
<p>When you place a running instance in restricted mode, no user sessions are terminated or otherwise affected. Therefore, after placing an instance in restricted mode, consider killing (terminating) all current user sessions before performing administrative tasks.</p>
<p>To lift an instance from restricted mode, use <code dir="ltr">ALTER SYSTEM</code> with the <code dir="ltr">DISABLE RESTRICTED SESSION</code> clause.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="manproc.htm#i1006851">"Terminating Sessions"</a> for directions for killing user sessions</p>
</li>
<li>
<p><a href="#i1006368">"Restricting Access to an Instance at Startup"</a> to learn some reasons for placing an instance in restricted mode</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006543"></a>
<div id="ADMIN11156" class="sect1">
<h2 class="sect1">Shutting Down a Database<a id="sthref424"></a></h2>
<p>When Oracle Restart is not in use, you can shut down a database instance with SQL*Plus by connecting as <code dir="ltr">SYSOPER</code> or <code dir="ltr">SYSDBA</code> and issuing the <code dir="ltr">SHUTDOWN</code> command. If your database is being managed by Oracle Restart, the recommended way to shut down the database is with the <a href="restart.htm#i1009484">srvctl stop database</a> command.</p>
<p>Control is not returned to the session that initiates a database shutdown until shutdown is complete. <a id="sthref425"></a>Users who attempt connections while a shutdown is in progress receive a message like the following:</p>
<pre dir="ltr">
ORA-01090: shutdown in progress - connection is not permitted
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot shut down a database if you are connected to the database through a shared server process.</div>
<p><a id="sthref426"></a>There are several modes for shutting down a database: normal, immediate, transactional, and abort. Some shutdown modes wait for certain events to occur (such as transactions completing or users disconnecting) before actually bringing down the database. There is a one-hour timeout period for these events.</p>
<p>Details are provided in the following sections:</p>
<ul>
<li>
<p><a href="#i1006572">Shutting Down with the Normal Mode</a></p>
</li>
<li>
<p><a href="#i1006582">Shutting Down with the Immediate Mode</a></p>
</li>
<li>
<p><a href="#i1006598">Shutting Down with the Transactional Mode</a></p>
</li>
<li>
<p><a href="#i1006611">Shutting Down with the Abort Mode</a></p>
</li>
</ul>
<ul>
<li>
<p><a href="#CIHDAGBD">Shutdown Timeout</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="restart.htm#BABGIGDB">Chapter 4, "Configuring Automatic Restart of an Oracle Database"</a> for information about Oracle Restart.</div>
<a id="i1006572"></a>
<div id="ADMIN11157" class="sect2">
<h3 class="sect2">Shutting Down with the Normal Mode</h3>
<p>To shut down a database in normal situations, use <a id="sthref427"></a><a id="sthref428"></a>one of these commands:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Shutdown commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t28">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t28">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t28" headers="r1c1-t28">
<pre dir="ltr">
SHUTDOWN [NORMAL]
</pre></td>
<td class="cellalignment1335" headers="r2c1-t28 r1c2-t28">
<pre dir="ltr">
srvctl stop database -d <span class="italic">db_unique_name</span> -o normal
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>The <code dir="ltr">NORMAL</code> clause of the SQL*Plus <code dir="ltr">SHUTDOWN</code> command is optional because this is the default shutdown method. For SRVCTL, if the -o option is omitted, the shutdown operation proceeds according to the stop options stored in the Oracle Restart configuration for the database. The default <a id="sthref429"></a><a id="sthref430"></a>stop option is <code dir="ltr">immediate</code>.</p>
<p>Normal database shutdown proceeds with the following conditions:</p>
<ul>
<li>
<p>No new connections are allowed after the statement is issued.</p>
</li>
<li>
<p>Before the database is shut down, the database waits for all currently connected users to disconnect from the database.</p>
</li>
</ul>
<p>The next startup of the database will not require any instance recovery procedures.</p>
</div>
<!-- class="sect2" -->
<a id="i1006582"></a>
<div id="ADMIN11158" class="sect2">
<h3 class="sect2">Shutting Down with the Immediate Mode</h3>
<p><a id="sthref431"></a>Use immediate database shutdown only in the following situations:</p>
<ul>
<li>
<p>To initiate an automated and unattended backup</p>
</li>
<li>
<p>When a power shutdown is going to occur soon</p>
</li>
<li>
<p>When the database or one of its applications is functioning irregularly and you cannot contact users to ask them to log off or they are unable to log off</p>
</li>
</ul>
<p><a id="sthref432"></a>To shut down a database immediately, use one of the following commands:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Shutdown commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t29">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t29">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t29" headers="r1c1-t29">
<pre dir="ltr">
SHUTDOWN IMMEDIATE
</pre></td>
<td class="cellalignment1335" headers="r2c1-t29 r1c2-t29">
<pre dir="ltr">
srvctl stop database -d <span class="italic">db_unique_name</span> -o immediate
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>Immediate database shutdown proceeds with the following conditions:</p>
<ul>
<li>
<p>No new connections are allowed, nor are new transactions allowed to be started, after the statement is issued.</p>
</li>
<li>
<p>Any uncommitted transactions are rolled back. (If long uncommitted transactions exist, this method of shutdown might not complete quickly, despite its name.)</p>
</li>
<li>
<p>Oracle Database does not wait for users currently connected to the database to disconnect. The database implicitly rolls back active transactions and disconnects all connected users.</p>
</li>
</ul>
<p>The next startup of the database will not require any instance recovery procedures.</p>
</div>
<!-- class="sect2" -->
<a id="i1006598"></a>
<div id="ADMIN11159" class="sect2">
<h3 class="sect2">Shutting Down with the Transactional Mode</h3>
<p><a id="sthref433"></a>When you want to perform a planned shutdown of an instance while allowing active transactions to complete first, use one of the following commands:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Shutdown commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t30">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t30">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t30" headers="r1c1-t30">
<pre dir="ltr">
SHUTDOWN TRANSACTIONAL
</pre></td>
<td class="cellalignment1335" headers="r2c1-t30 r1c2-t30">
<pre dir="ltr">
srvctl stop database -d <span class="italic">db_unique_name</span> -o transactional
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>Transactional database shutdown proceeds with the following conditions:</p>
<ul>
<li>
<p>No new connections are allowed, nor are new transactions allowed to be started, after the statement is issued.</p>
</li>
<li>
<p>After all transactions have completed, any client still connected to the instance is disconnected.</p>
</li>
<li>
<p>At this point, the instance shuts down just as it would when a <code dir="ltr">SHUTDOWN IMMEDIATE</code> statement is submitted.</p>
</li>
</ul>
<p>The next startup of the database will not require any instance recovery procedures.</p>
<p>A transactional shutdown prevents clients from losing work, and at the same time, does not require all users to log off.</p>
</div>
<!-- class="sect2" -->
<a id="i1006611"></a>
<div id="ADMIN11160" class="sect2">
<h3 class="sect2">Shutting Down with the Abort Mode</h3>
<p><a id="sthref434"></a>You can shut down a database instantaneously by aborting the database instance. If possible, perform this type of shutdown <span class="italic">only</span> in the following situations:</p>
<p>The database or one of its applications is functioning irregularly <span class="italic">and</span> none of the other types of shutdown works.</p>
<ul>
<li>
<p>You must shut down the database instantaneously (for example, if you know a power shutdown is going to occur in one minute).</p>
</li>
<li>
<p>You experience problems when starting a database instance.</p>
</li>
</ul>
<p>When you must do a database shutdown by aborting transactions and user connections, use one of the following commands:</p>
<div class="inftblruleinformal">
<table class="cellalignment1333" title="Shutdown commands" summary="This table shows equivalent startup commands for SQL*Plus and SRVCTL" dir="ltr">
<thead>
<tr class="cellalignment1327">
<th class="cellalignment1334" id="r1c1-t31">SQL*Plus</th>
<th class="cellalignment1334" id="r1c2-t31">SRVCTL (When Oracle Restart Is In Use)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1327">
<td class="cellalignment1335" id="r2c1-t31" headers="r1c1-t31">
<pre dir="ltr">
SHUTDOWN ABORT
</pre></td>
<td class="cellalignment1335" headers="r2c1-t31 r1c2-t31">
<pre dir="ltr">
srvctl stop database -d <span class="italic">db_unique_name</span> -o abort
</pre></td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblruleinformal" -->
<p>An aborted database shutdown proceeds with the following conditions:</p>
<ul>
<li>
<p>No new connections are allowed, nor are new transactions allowed to be started, after the statement is issued.</p>
</li>
<li>
<p>Current client SQL statements being processed by Oracle Database are immediately terminated.</p>
</li>
<li>
<p>Uncommitted transactions are not rolled back.</p>
</li>
<li>
<p>Oracle Database does not wait for users currently connected to the database to disconnect. The database implicitly disconnects all connected users.</p>
</li>
</ul>
<p>The next startup of the database <span class="italic">will</span> require automatic instance recovery procedures.</p>
</div>
<!-- class="sect2" -->
<a id="CIHDAGBD"></a>
<div id="ADMIN11161" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Shutdown Timeout</h3>
<p><a id="sthref435"></a>Shutdown modes that wait for users to disconnect or for transactions to complete have a limit on the amount of time that they wait. If all events blocking the shutdown do not occur within one hour, the shutdown operation aborts with the following message: <a id="sthref436"></a><code dir="ltr">ORA-01013: user requested cancel of current operation</code>. This message is also displayed if you interrupt the shutdown process, for example by pressing <code dir="ltr">CTRL-C</code>. Oracle recommends that you do not attempt to interrupt an instance shutdown. Instead, allow the shutdown process to complete, and then restart the instance.</p>
<p>After <code dir="ltr">ORA-01013</code> occurs, you must consider the instance to be in an unpredictable state. You must therefore continue the shutdown process by resubmitting a <code dir="ltr">SHUTDOWN</code> command. If subsequent <code dir="ltr">SHUTDOWN</code> commands continue to fail, you must submit a <code dir="ltr">SHUTDOWN</code> <code dir="ltr">ABORT</code> command to bring down the instance. You can then restart the instance.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006629"></a>
<div id="ADMIN10263" class="sect1">
<h2 class="sect1">Quiescing a D<a id="sthref437"></a><a id="sthref438"></a>atabase</h2>
<p>Occasionally you might want to put a database in a state that allows only DBA transactions, queries, fetches, or PL/SQL statements. Such a state is referred to as a <span class="bold">quiesced state</span>, in the sense that no ongoing non-DBA transactions, queries, fetches, or PL/SQL statements are running in the system.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
In this discussion of quiesce database, a DBA is defined as user <code dir="ltr">SYS</code> or <code dir="ltr">SYSTEM</code>. Other users, including those with the <code dir="ltr">DBA</code> role, are not allowed to issue the <code dir="ltr">ALTER SYSTEM QUIESCE DATABASE</code> statement or proceed after the database is quiesced.</div>
<p>The quiesced state lets administrators perform actions that cannot safely be done otherwise. These actions include:</p>
<ul>
<li>
<p>Actions that fail if concurrent user transactions access the same object--for example, changing the schema of a database table or adding a column to an existing table where a no-wait lock is required.</p>
</li>
<li>
<p>Actions whose undesirable intermediate effect can be seen by concurrent user transactions--for example, a multistep procedure for reorganizing a table when the table is first exported, then dropped, and finally imported. A concurrent user who attempts to access the table after it was dropped, but before import, would not have an accurate view of the situation.</p>
</li>
</ul>
<p>Without the ability to quiesce the database, you would need to shut down the database and reopen it in restricted mode. This is a serious restriction, especially for systems requiring 24 x 7 availability. Quiescing a database is much a smaller restriction, because it eliminates the disruption to users and the downtime associated with shutting down and restarting the database.</p>
<p><a id="sthref439"></a>When the database is in the quiesced state, it is through the facilities of the Database Resource Manager that non-DBA sessions are prevented from becoming active. Therefore, while this statement is in effect, any attempt to change the current resource plan will be queued until after the system is unquiesced. See <a href="dbrm.htm#g1021210">Chapter 27, "Managing Resources with Oracle Database Resource Manager"</a> for more information about the Database Resource Manager.</p>
<div id="ADMIN11162" class="sect2"><a id="sthref440"></a>
<h3 class="sect2">Placing a Database into a Quiesced State</h3>
<p>To place a database into a quiesced state, issue the following SQL statement<a id="sthref441"></a>:</p>
<pre dir="ltr">
ALTER SYSTEM QUIESCE RESTRICTED;
</pre>
<p>Non-DBA active sessions will continue until they become inactive. An active session is one that is currently inside of a transaction, a query, a fetch, or a PL/SQL statement; or a session that is currently holding any shared resources (for example, enqueues). No inactive sessions are allowed to become active. For example, If a user issues a SQL query in an attempt to force an inactive session to become active, the query will appear to be hung. When the database is later unquiesced, the session is resumed, and the blocked action is processed.</p>
<p>Once all non-DBA sessions become inactive, the <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement completes, and the database is in a quiesced state. In an Oracle Real Application Clusters environment, this statement affects all instances, not just the one that issues the statement.</p>
<p>The <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement may wait a long time for active sessions to become inactive. You can determine the sessions that are blocking the quiesce operation by querying the <code dir="ltr">V$BLOC<a id="sthref442"></a>KING_QUIESCE</code> view. This view returns only a single column: <code dir="ltr">SID</code> (Session ID). You can join it with <code dir="ltr">V$SESSION</code> to get more information about the session, as shown in the following example:</p>
<pre dir="ltr">
select bl.sid, user, osuser, type, program
from v$blocking_quiesce bl, v$session se
where bl.sid = se.sid;
</pre>
<p>See <a class="olink REFRN" href="../e40402/toc.htm"><span class="italic">Oracle Database Reference</span></a> for details on these view.</p>
<p>If you interrupt the request to quiesce the database, or if your session terminates abnormally before all active sessions are quiesced, then Oracle Database automatically reverses any partial effects of the statement.</p>
<p>For queries that are carried out by successive multiple Oracle Call Interface (OCI) fetches, the <code dir="ltr">ALTER SYSTEM QUIESCE RESTRICTED</code> statement does not wait for all fetches to finish. It only waits for the current fetch to finish.</p>
<p>For both dedicated and shared server connections, all non-DBA logins after this statement is issued are queued by the Database Resource Manager, and are not allowed to proceed. To the user, it appears as if the login is hung. The login will resume when the database is unquiesced.</p>
<p>The database remains in the quiesced state even if the session that issued the statement exits. A DBA must log in to the database to issue the statement that specifically unquiesces the database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot perform a cold backup when the database is in the quiesced state, because Oracle Database background processes may still perform updates for internal purposes even while the database is quiesced. In addition, the file headers of online data files continue to appear to be accessible. They do not look the same as if a clean shutdown had been performed. However, you can still take online backups while the database is in a quiesced state.</div>
</div>
<!-- class="sect2" -->
<div id="ADMIN11163" class="sect2"><a id="sthref443"></a>
<h3 class="sect2">Restoring the System to Normal Operation</h3>
<p>The following statement restores the database to normal operation<a id="sthref444"></a>:</p>
<pre dir="ltr">
ALTER SYSTEM UNQUIESCE;
</pre>
<p>All non-DBA activity is allowed to proceed. In an Oracle Real Application Clusters environment, this statement is not required to be issued from the same session, or even the same instance, as that which quiesced the database. If the session issuing the <code dir="ltr">ALTER SYSTEM UNQUIESCE</code> statement terminates abnormally, then the Oracle Database server ensures that the unquiesce operation completes.</p>
</div>
<!-- class="sect2" -->
<div id="ADMIN11164" class="sect2"><a id="sthref445"></a>
<h3 class="sect2">Viewing the Quiesce State of an Instance</h3>
<p>You can query the <code dir="ltr">ACTIVE_STATE</code> column of the <code dir="ltr"><a id="sthref446"></a>V$INSTANCE</code> view to see the current state of an instance. The column values has one of these values:</p>
<ul>
<li>
<p><code dir="ltr">NORMAL</code>: Normal unquiesced state.</p>
</li>
<li>
<p><code dir="ltr">QUIESCING</code>: Being quiesced, but some non-DBA sessions are still active.</p>
</li>
<li>
<p><code dir="ltr">QUIESCED</code>: Quiesced; no non-DBA sessions are active or allowed.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1006690"></a>
<div id="ADMIN11165" class="sect1">
<h2 class="sect1">Suspending and Resuming a Database<a id="sthref447"></a><a id="sthref448"></a><a id="sthref449"></a><a id="sthref450"></a></h2>
<p>The <code dir="ltr">ALTER SYSTEM SUSPEND</code> statement halts all input and output (I/O) to data files (file header and file data) and control files. The suspended state lets you back up a database without I/O interference. When the database is suspended all preexisting I/O operations are allowed to complete and any new database accesses are placed in a queued state.</p>
<p>The suspend command is not specific to an instance. In an Oracle Real Application Clusters environment, when you issue the suspend command on one system, internal locking mechanisms propagate the halt request across instances, thereby quiescing all active instances in a given cluster. However, if a new instance is started while another instance is being suspended, then the new instance is not suspended.</p>
<p>Use the <code dir="ltr">ALTER SYSTEM RESUME</code> statement to resume normal database operations. The <code dir="ltr">SUSPEND</code> and <code dir="ltr">RESUME</code> commands can be issued from different instances. For example, if instances 1, 2, and 3 are running, and you issue an <code dir="ltr">ALTER SYSTEM SUSPEND</code> statement from instance 1, then you can issue a <code dir="ltr">RESUME</code> statement from instance 1, 2, or 3 with the same effect.</p>
<p>The suspend/resume feature is useful in systems that allow you to mirror a disk or file and then split the mirror, providing an alternative backup and restore solution. If you use a system that cannot split a mirrored disk from an existing database while writes are occurring, then you can use the suspend/resume feature to facilitate the split.</p>
<p>The suspend/resume feature is not a suitable substitute for normal shutdown operations, because copies of a suspended database can contain uncommitted updates.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Do not use the <code dir="ltr">ALTER SYSTEM SUSPEND</code> statement as a substitute for placing a tablespace in hot backup mode. Precede any database suspend operation by an <code dir="ltr">ALTER TABLESPACE BEGIN BACKUP</code> statement.</div>
<p>The following statements illustrate <code dir="ltr">ALTER SYSTEM SUSPEND/RESUME</code> usage. The <code dir="ltr">V$INSTANCE</code> view is queried to confirm database status.</p>
<pre dir="ltr">
SQL&gt; ALTER SYSTEM SUSPEND;
System altered
SQL&gt; SELECT DATABASE_STATUS FROM V$INSTANCE;
DATABASE_STATUS
---------
SUSPENDED

SQL&gt; ALTER SYSTEM RESUME;
System altered
SQL&gt; SELECT DATABASE_STATUS FROM V$INSTANCE;
DATABASE_STATUS
---------
ACTIVE
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink BRADV204" href="../../backup.112/e10642/osbackup.htm#BRADV204"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for details about backing up a database using the database suspend/resume feature</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1326">
<tr>
<td class="cellalignment1335">
<table class="cellalignment1331">
<tr>
<td class="cellalignment1330"><a href="create.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1330"><a href="restart.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1337">
<table class="cellalignment1329">
<tr>
<td class="cellalignment1330"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1330"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1330"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1330"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1330"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1330"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
