<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Transportation in Data Warehouses</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 070" />
<meta name="dcterms.created" content="2013-07-04T23:23:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Data Warehousing Guide" />
<meta name="dcterms.identifier" content="E25554-02" />
<meta name="dcterms.isVersionOf" content="DWHSG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2001, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="extract.htm" title="Previous" type="text/html" />
<link rel="Next" href="transform.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25554.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/35</span> <!-- End Header --><a id="g1007787"></a><a id="DWHSG013"></a><a id="i1006359"></a>
<h1 class="chapter"><span class="secnum">14</span> Transportation in Data Warehouses</h1>
<p>The following topics provide information about transporting data into a data warehouse:</p>
<ul>
<li>
<p><a href="#i1006191">Overview of Transportation in Data Warehouses</a></p>
</li>
<li>
<p><a href="#BABBEDHE">Introduction to Transportation Mechanisms in Data Warehouses</a></p>
</li>
</ul>
<a id="i1006191"></a><a id="DWHSG8297"></a>
<div class="sect1">
<h2 class="sect1">Overview of Transportation in Data Warehouses</h2>
<p><a id="sthref366"></a>Transportation is the operation of moving data from one system to another system. In a data warehouse environment, the most common requirements for transportation are in moving data from:</p>
<ul>
<li>
<p>A source system to a staging database or a data warehouse database</p>
</li>
<li>
<p>A staging database to a data warehouse</p>
</li>
<li>
<p>A data warehouse to a data mart</p>
</li>
</ul>
<p>Transportation is often one of the simpler portions of the ETL process, and can be integrated with other portions of the process. For example, as shown in <a href="extract.htm#g1008480">Chapter 13, "Extraction in Data Warehouses"</a>, distributed query technology provides a mechanism for both extracting and transporting data.</p>
</div>
<!-- class="sect1" -->
<a id="BABBEDHE"></a><a id="DWHSG8298"></a>
<div class="sect1">
<h2 class="sect1">Introduction to Transportation Mechanisms in Data Warehouses</h2>
<p>You have three basic choices for transporting data in warehouses:</p>
<ul>
<li>
<p><a href="#i1006217">Transportation Using Flat Files</a></p>
</li>
<li>
<p><a href="#i1006226">Transportation Through Distributed Operations</a></p>
</li>
<li>
<p><a href="#BABHJGEE">Transportation Using Transportable Tablespaces</a></p>
</li>
</ul>
<a id="i1006217"></a><a id="DWHSG8299"></a>
<div class="sect2">
<h3 class="sect2">Transportation Using Flat Files</h3>
<p><a id="sthref367"></a>The most common me<a id="sthref368"></a>thod for transporting data is by the transfer of flat files, using mechanisms such as FTP or other remote file system access protocols. Data is unloaded or exported from the source system into flat files using techniques discussed in <a href="extract.htm#g1008480">Chapter 13, "Extraction in Data Warehouses"</a>, and is then transported to the target platform using FTP or similar mechanisms.</p>
<p>Because source systems and data warehouses often use different operating systems and database systems, using flat files is often the simplest way to exchange data between heterogeneous systems with minimal transformations. However, even when transporting data between homogeneous systems, flat files are often the most efficient and most easy-to-manage mechanism for data transfer.</p>
</div>
<!-- class="sect2" -->
<a id="i1006226"></a><a id="DWHSG8300"></a>
<div class="sect2">
<h3 class="sect2">Transportation Through Distributed Operations</h3>
<p><a id="sthref369"></a>Distributed queries, either with or without gateways, can be an effective mechanism for extracting data. These mechanisms also transport the data directly to the target systems, thus providing both extraction and transformation in a single step. Depending on the tolerable impact on time and system resources, these mechanisms can be well suited for both extraction and transformation.</p>
<p>As opposed to flat file transportation, the success or failure of the transportation is recognized immediately with the result of the distributed query or transaction. See <a href="extract.htm#g1008480">Chapter 13, "Extraction in Data Warehouses"</a> for further information.</p>
</div>
<!-- class="sect2" -->
<a id="BABHJGEE"></a><a id="DWHSG8301"></a>
<div class="sect2">
<h3 class="sect2">Transportation Using Transportable Tablespaces</h3>
<p><a id="sthref370"></a><a id="sthref371"></a>Oracle transportable tablespaces are the fastest way for moving large volumes of data between two Oracle databases. Previous to the introduction of transportable tablespaces, the most scalable data transportation mechanisms relied on moving flat files containing raw data. These mechanisms required that data be unloaded or exported into files from the source database, Then, after transportation, these files were loaded or imported into the target database. Transportable tablespaces entirely bypass the unload and reload steps.</p>
<p>Using transportable tablespaces, Oracle data files (containing table data, indexes, and almost every other Oracle database object) can be directly transported from one database to another. Furthermore, like import and export, transportable tablespaces provide a mechanism for transporting metadata in addition to transporting data.</p>
<p>Transportable tablespaces have some limitations: source and target systems must be running Oracle8<span class="italic">i</span> (or higher), must use compatible character sets, and, before Oracle Database 10<span class="italic">g</span>, must run on the same operating system. For details on how to transport tablespace between operating systems, see <a class="olink ADMIN11394" href="../../server.112/e25494/tspaces.htm#ADMIN11394"><span class="italic">Oracle Database Administrator's Guide</span></a>.</p>
<p>The most common applications of transportable tablespaces in data warehouses are in moving data from a staging database to a data warehouse, or in moving data from a data warehouse to a data mart.</p>
<a id="DWHSG8302"></a>
<div class="sect3"><a id="sthref372"></a>
<h4 class="sect3">Transportable Tablespaces Example</h4>
<p>Suppose that you have a data warehouse containing sales data, and several data marts that are refreshed monthly. Also suppose that you are going to move one month of sales data from the data warehouse to the data mart.</p>
<dl>
<dd><a id="sthref373"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Place the Data to be Transported into its own Tablespace</dt>
<dd>
<p>The current month's data must be placed into a separate tablespace in order to be transported. In this example, you have a tablespace <code>ts_temp_sales</code>, which holds a copy of the current month's data. Using the <code>CREATE</code> <code>TABLE</code> ... <code>AS</code> <code>SELECT</code> statement, the current month's data can be efficiently copied to this tablespace:</p>
<pre>
CREATE TABLE temp_jan_sales NOLOGGING TABLESPACE ts_temp_sales
AS SELECT * FROM sales 
WHERE time_id BETWEEN '31-DEC-1999' AND '01-FEB-2000';
</pre>
<p>Following this operation, the tablespace <code>ts_temp_sales</code> is set to read-only:</p>
<pre>
ALTER TABLESPACE ts_temp_sales READ ONLY;
</pre>
<p>A tablespace cannot be transported unless there are no active transactions modifying the tablespace. Setting the tablespace to read-only enforces this.</p>
<p>The tablespace <code>ts_temp_sales</code> may be a tablespace that has been especially created to temporarily store data for use by the transportable tablespace features. Following <a href="#CIHHAHDF">"Copy the Datafiles and Export File to the Target System"</a>, this tablespace can be set to read/write, and, if desired, the table <code>temp_jan_sales</code> can be dropped, or the tablespace can be re-used for other transportations or for other purposes.</p>
<p>In a given transportable tablespace operation, all of the objects in a given tablespace are transported. Although only one table is being transported in this example, the tablespace <code>ts_temp_sales</code> could contain multiple tables. For example, perhaps the data mart is refreshed not only with the new month's worth of sales transactions, but also with a new copy of the customer table. Both of these tables could be transported in the same tablespace. Moreover, this tablespace could also contain other database objects such as indexes, which would also be transported.</p>
<p>Additionally, in a given transportable-tablespace operation, multiple tablespaces can be transported at the same time. This makes it easier to move very large volumes of data between databases. Note, however, that the transportable tablespace feature can only transport a set of tablespaces which contain a complete set of database objects without dependencies on other tablespaces. For example, an index cannot be transported without its table, nor can a partition be transported without the rest of the table. You can use the <code>DBMS_TTS</code> package to check that a tablespace is transportable.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a class="olink ARPLS063" href="../../appdev.112/e40758/d_tts.htm#ARPLS063"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for detailed information about the <code>DBMS_TTS</code> package</div>
<p>In this step, we have copied the January sales data into a separate tablespace; however, in some cases, it may be possible to leverage the transportable tablespace feature without even moving data to a separate tablespace. If the sales table has been partitioned by month in the data warehouse and if each partition is in its own tablespace, then it may be possible to directly transport the tablespace containing the January data. Suppose the January partition, <code>sales_jan2000</code>, is located in the tablespace <code>ts_sales_jan2000</code>. Then the tablespace <code>ts_sales_jan2000</code> could potentially be transported, rather than creating a temporary copy of the January sales data in the <code>ts_temp_sales</code>.</p>
<p>However, the same conditions must be satisfied in order to transport the tablespace <code>ts_sales_jan2000</code> as are required for the specially created tablespace. First, this tablespace must be set to <code>READ</code> <code>ONLY</code>. Second, because a single partition of a partitioned table cannot be transported without the remainder of the partitioned table also being transported, it is necessary to exchange the January partition into a separate table (using the <code>ALTER</code> <code>TABLE</code> statement) to transport the January data. The <code>EXCHANGE</code> operation is very quick, but the January data will no longer be a part of the underlying <code>sales</code> table, and thus may be unavailable to users until this data is exchanged back into the <code>sales</code> table after the export of the metadata. The January data can be exchanged back into the <code>sales</code> table after you complete step 3.</p>
</dd>
<dd><a id="sthref374"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Export the Metadata</dt>
<dd>
<p>The Export utility is used to export the metadata describing the objects contained in the transported tablespace. For our example scenario, the Export command could be:</p>
<pre>
EXP TRANSPORT_TABLESPACE=y TABLESPACES=ts_temp_sales FILE=jan_sales.dmp
</pre>
<p>This operation generates an export file, <code>jan_sales.dmp</code>. The export file is small, because it contains only metadata. In this case, the export file contains information describing the table <code>temp_jan_sales</code>, such as the column names, column data type, and all other information that the target Oracle database needs in order to access the objects in <code>ts_temp_sales</code>.</p>
</dd>
<dd><a id="CIHHAHDF"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Copy the Datafiles and Export File to the Target System</dt>
<dd>
<p>Copy the data files that make up <code>ts_temp_sales</code>, as well as the export file <code>jan_sales.dmp</code> to the data mart platform, using any transportation mechanism for flat files. Once the datafiles have been copied, the tablespace <code>ts_temp_sales</code> can be set to <code>READ</code> <code>WRITE</code> mode if desired.</p>
</dd>
<dd><a id="sthref375"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;Import the Metadata</dt>
<dd>
<p>Once the files have been copied to the data mart, the metadata should be imported into the data mart:</p>
<pre>
IMP TRANSPORT_TABLESPACE=y DATAFILES='/db/tempjan.f' 
    TABLESPACES=ts_temp_sales FILE=jan_sales.dmp
</pre>
<p>At this point, the tablespace <code>ts_temp_sales</code> and the table <code>temp_sales_jan</code> are accessible in the data mart. You can incorporate this new data into the data mart's tables.</p>
<p>You can insert the data from the <code>temp_sales_jan</code> table into the data mart's sales table in one of two ways:</p>
<pre>
INSERT /*+ APPEND */ INTO sales SELECT * FROM temp_sales_jan;
</pre>
<p>Following this operation, you can delete the <code>temp_sales_jan</code> table (and even the entire <code>ts_temp_sales</code> tablespace).</p>
<p>Alternatively, if the data mart's sales table is partitioned by month, then the new transported tablespace and the <code>temp_sales_jan</code> table can become a permanent part of the data mart. The <code>temp_sales_jan</code> table can become a partition of the data mart's sales table:</p>
<pre>
ALTER TABLE sales ADD PARTITION sales_00jan VALUES
  LESS THAN (TO_DATE('01-feb-2000','dd-mon-yyyy'));
ALTER TABLE sales EXCHANGE PARTITION sales_00jan 
  WITH TABLE temp_sales_jan INCLUDING INDEXES WITH VALIDATION;
</pre></dd>
</dl>
</div>
<!-- class="sect3" -->
<a id="DWHSG8303"></a>
<div class="sect3"><a id="sthref376"></a>
<h4 class="sect3">Other Uses of Transportable Tablespaces</h4>
<p>The previous example illustra<a id="sthref377"></a><a id="sthref378"></a>tes a typical scenario for transporting data in a data warehouse. However, transportable tablespaces can be used for many other purposes. In a data warehousing environment, transportable tablespaces should be viewed as a utility (much like Import/Export or SQL*Loader), whose purpose is to move large volumes of data between Oracle databases. When used in conjunction with parallel data movement operations such as the <code>CREATE</code> <code>TABLE</code> ... <code>AS</code> <code>SELECT</code> and <code>INSERT</code> ... <code>AS</code> <code>SELECT</code> statements, transportable tablespaces provide an important mechanism for quickly transporting data for many purposes.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1371">
<tr>
<td class="cellalignment1378">
<table class="cellalignment1376">
<tr>
<td class="cellalignment1375"><a href="extract.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1375"><a href="transform.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2001, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1380">
<table class="cellalignment1374">
<tr>
<td class="cellalignment1375"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1375"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1375"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1375"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1375"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1375"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
