<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Optimizing Data Warehouse Operations</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.1 Build 005" />
<meta name="dcterms.created" content="2012-02-07T20:3:12Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database 2 Day + Data Warehousing Guide" />
<meta name="dcterms.identifier" content="E25555-03" />
<meta name="dcterms.isVersionOf" content="TDPDW" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdpdw_refresh.htm" title="Previous" type="text/html" />
<link rel="Next" href="tdpdw_perform.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e25555.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">16/20</span> <!-- End Header --><a id="CACJDGBH"></a><a id="TDPDW011"></a>
<h1 class="chapter"><span class="secnum">9</span> Optimizing Data Warehouse Operations</h1>
<p>This chapter describes how to optimize your data warehouse's performance and contains the following topics:</p>
<ul>
<li>
<p><a href="#CACHDCHH">Avoiding System Overload</a></p>
</li>
<li>
<p><a href="#CFHGJGGH">Optimizing the Use of Indexes and Materialized Views</a></p>
</li>
<li>
<p><a href="#CFHEECGJ">Optimizing Storage Requirements</a></p>
</li>
</ul>
<a id="CACHDCHH"></a><a id="TDPDW00271"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Avoiding System Overload</h2>
<p>This section describes how to identify and avoid system overload. In general, you should use the automatic diagnostic feature Automatic Database Diagnostic Monitor (ADDM) to identify performance problems with the database, as described in <a class="olink TDPPT" href="../e10822/toc.htm"><span class="italic">Oracle Database 2 Day + Performance Tuning Guide</span></a>. This section describes additional methods for avoiding performance problems in your system and includes the following topics:</p>
<ul>
<li>
<p><a href="#BJEHCEBI">Monitoring System Performance</a></p>
</li>
<li>
<p><a href="#BJEGAAFD">Using Database Resource Manager</a></p>
</li>
</ul>
<a id="BJEHCEBI"></a><a id="TDPDW0091"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Monitoring System Performance</h3>
<p>This section provides information about how to avoid system overload by regularly monitoring important metrics. You can monitor these metrics through the use of the Database Performance page in Oracle Enterprise Manager. This section contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDHAHEH">Monitoring Parallel Execution Performance</a></p>
</li>
<li>
<p><a href="#CHDBIBEH">Monitoring I/O</a></p>
</li>
</ul>
<a id="CHDHAHEH"></a><a id="TDPDW00911"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Monitoring Parallel Execution Performance</h4>
<p>This section descri<a id="sthref225"></a><a id="sthref226"></a>bes how to monitor parallel execution performance. Suppose that you see many parallel statements are being downgraded. This may indicate a performance problem. Statements that run with a degree of parallelism lower than expected can take much longer, and users may experience different execution times depending on whether or not statements were downgraded. Possible causes for downgraded parallel statements include the following:</p>
<ul>
<li>
<p>The initial degree of parallelism is higher than it should be and should be lowered.</p>
</li>
<li>
<p>There are not enough parallel servers available, which may indicate the system is overloaded.</p>
</li>
</ul>
<p class="subhead2"><a id="sthref227"></a>To monitor parallel execution performance:</p>
<ol>
<li>
<p>On the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page is displayed.</p>
</li>
<li>
<p>Scroll down the page. Under the list of links, click <span class="bold">PQ</span>.</p>
<p>The PQ page is displayed. Parallel query performance characteristics are shown for:</p>
<ul>
<li>
<p>Parallel sessions</p>
</li>
<li>
<p>Parallel slaves</p>
</li>
<li>
<p>DML and DDL parallelization</p>
</li>
<li>
<p>Serialization and statement downgrades</p>
</li>
</ul>
</li>
</ol>
<div class="figure">
<p class="titleinfigure"><a id="sthref228"></a>Figure 9-1 Monitoring Parallel Execution</p>
<img width="957" height="431" src="img/pq6.gif" alt="Description of Figure 9-1 follows" title="Description of Figure 9-1 follows" /><br />
<a id="sthref229" href="img_text/pq6.htm">Description of "Figure 9-1 Monitoring Parallel Execution"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" -->
<a id="CHDBIBEH"></a><a id="TDPDW00912"></a>
<div class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Monitoring I/O</h4>
<p>This section descri<a id="sthref230"></a><a id="sthref231"></a>bes how to monitor I/O performance. If the throughput on your system is significantly lower than what you expect based on the system configuration (see <a href="tdpdw_system.htm#CHDBFDGI">Chapter 2, "Setting Up Your Data Warehouse System"</a>) and your users complain about performance issues, then there could be a performance problem. In a well-configured system that runs a typical data warehouse workload, you expect a large portion of large I/Os and a relatively low latency (lower than 30 ms) for a single block I/O.</p>
<p class="subhead2"><a id="sthref232"></a>To monitor I/O performance:</p>
<ol>
<li>
<p>On the Database Home page, click <span class="bold">Performance</span>.</p>
<p>The Performance page is displayed.</p>
</li>
<li>
<p>Scroll down the page. Under the list of links, click <span class="bold">I/O</span>.</p>
<p>The I/O page is displayed, displaying I/O Megabytes per Second by Function and I/O Requests per Second by Function.</p>
</li>
<li>
<p>For details regarding read and write operations, select <span class="bold">IO Type</span>.</p>
<p>I/O details are shown for the following:</p>
<ul>
<li>
<p>Large Writes</p>
</li>
<li>
<p>Large Reads</p>
</li>
<li>
<p>Small Writes</p>
</li>
<li>
<p>Small Reads</p>
</li>
</ul>
</li>
</ol>
<div class="figure">
<p class="titleinfigure"><a id="sthref233"></a>Figure 9-2 Monitoring I/O</p>
<img width="902" height="564" src="img/pq5.gif" alt="Description of Figure 9-2 follows" title="Description of Figure 9-2 follows" /><br />
<a id="sthref234" href="img_text/pq5.htm">Description of "Figure 9-2 Monitoring I/O"</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="BJEGAAFD"></a><a id="TDPDW0092"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Using Database Resource Manager</h3>
<p>The Database <a id="sthref235"></a>Resource Manager provides the ability to prioritize work within the Oracle system. Users with higher priority jobs get resources in order to minimize response time for online work, for example, while users with lower priority jobs, such as batch jobs or reports, might encounter slower response times. This priority assignment enables more granular control over resources and provides features such as automatic consumer group switching, maximum active sessions control, query execution time estimations and undo pool quotas for consumer groups.</p>
<p>You can specify the maximum number of concurrently active sessions for each consumer group. When this limit is reached, the Database Resource Manager queues all subsequent requests and runs them only after existing active sessions complete.</p>
<p>The Database Resource Manager is part of Oracle Database and can distinguish different processes inside the database. As a result, the Database Resource Manager can assign priorities to individual operations running inside the database.</p>
<p>With the Database Resource Manager, you can do the following:</p>
<ul>
<li>
<p>Guarantee certain users a minimum amount of processing resources regardless of the load on the system and the number of users.</p>
</li>
<li>
<p>Distribute available processing resources by allocating percentages of CPU time to different users and applications. In a data warehouse, a higher percentage may be given to relational online analytical processing (ROLAP) applications than to batch jobs.</p>
</li>
<li>
<p>Enable automatic switching of users from one group to another based on administrator-defined criteria. If a member of a particular group of users creates a session that runs for longer than a specified amount of time, that session can be automatically switched to another group of users with different resource requirements.</p>
</li>
<li>
<p>Configure an instance to use a particular method of allocating resources. You can dynamically change the method, for example, from a daytime setup to a nighttime setup, without having to shut down and restart the instance.</p>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CFHGJGGH"></a><a id="TDPDW0101"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Optimizing the Use of Indexes and Materialized Views</h2>
<p>You can improve <a id="sthref236"></a><a id="sthref237"></a><a id="sthref238"></a>the performance of your data warehouse using indexes and materialized views. A key benefit of the SQL Access Advisor is its capability to use the current workload as the basis for the recommendations.</p>
<a id="BABHAJJD"></a><a id="TDPDW01011"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2">Example: Optimizing Indexes and Materialized Views Using the SQL Access Advisor</h3>
<p>For this example, assume you have a workload running on the system that may benefit from certain indexes or materialized views.</p>
<p class="subhead2"><a id="sthref239"></a>To optimize an index and materialized view:</p>
<ol>
<li>
<p>From the Advisor Central page, click <span class="bold">SQL</span> <span class="bold">Advisors</span>.</p>
<p>The Advisors page is displayed.</p>
</li>
<li>
<p>From the Advisors page, click <span class="bold">SQL</span> <span class="bold">Access</span> <span class="bold">Advisor</span>.</p>
<p>The SQL Access Advisor page is displayed.</p>
</li>
<li>
<p>Select <span class="bold">Use</span> <span class="bold">Default</span> <span class="bold">Options</span> and click <span class="bold">Continue</span>.</p>
<p>The Workload Source page is displayed.</p>
</li>
<li>
<p>Select <span class="bold">Use an Existing SQL Tuning Set</span> as your workload source. Go to a SQL Tuning Set and click <span class="bold">Select</span>. Then, click <span class="bold">Next</span>.</p>
<p>The Recommendation Options page is displayed.</p>
</li>
<li>
<p>Select <span class="bold">Indexes</span>, <span class="bold">Materialized</span> <span class="bold">Views</span>, and <span class="bold">Comprehensive</span> <span class="bold">Mode</span>. Click <span class="bold">Next</span>.</p>
<p>The Schedule page is displayed.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
<p>The Recommendations page is displayed.</p>
</li>
<li>
<p>Enter a name in the <span class="bold">Name</span> field and select <span class="bold">Immediately</span> for its start time. Then, click <span class="bold">Next</span>.</p>
<p>The Review page is displayed.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
<p>The Confirmation page is displayed.</p>
</li>
<li>
<p>Select your task name and click <span class="bold">View</span> <span class="bold">Result</span>.</p>
<p>You can view additional information under Recommendations, SQL Statements, or Details.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CFHEECGJ"></a><a id="TDPDW0102"></a>
<div class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Optimizing Storage Requirements</h2>
<p>You can <a id="sthref240"></a>reduce your storage requirements by compressing data, which is achieved by eliminating duplicate values in a database block. Database objects that can be compressed include tables and materialized views. For partitioned tables, you can compress some or all partitions. Compression attributes can be declared for a tablespace, a table, or a partition of a table. If declared at the tablespace level, then all tables created in that tablespace are compressed by default. You can alter the compression attribute for a table (or a partition or tablespace), and the change applies only to new data going into that table. As a result, a single table or partition may contain some compressed blocks and some regular blocks. This guarantees that data size will not increase as a result of compression. In cases where compression could increase the size of a block, it is not applied to that block.</p>
<a id="TDPDW01021"></a>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref241"></a>
<h3 class="sect2">Using Data Compression to Improve Storage</h3>
<p>You can compr<a id="sthref242"></a>ess several partitions or a complete partitioned heap-organized table. You do this either by defining a complete partitioned table as being compressed, or by defining it on a per-partition level. Partitions without a specific declaration inherit the attribute from the table definition or, if nothing is specified on the table level, from the tablespace definition.</p>
<p>The decision about whether or not a partition should be compressed is based on the same rules as a nonpartitioned table. Because of the ability of range and composite partitioning to separate data logically into distinct partitions, a partitioned table is an ideal candidate for compressing parts of the data (partitions) that are mainly read-only. It is, for example, beneficial in all rolling window operations as a kind of intermediate stage before aging out old data. With data compression, you can keep more old data online, minimizing the burden of additional storage use.</p>
<p>You can also change any existing uncompressed table partition later, add new compressed and uncompressed partitions, or change the compression attribute as part of any partition maintenance operation that requires data movement, such as <a id="sthref243"></a><code>MERGE</code> <code>PARTITION</code>, <a id="sthref244"></a><code>SPLIT</code> <code>PARTITION</code>, or <a id="sthref245"></a><code>MOVE</code> <code>PARTITION</code>. The partitions can contain data, or they can be empty.</p>
<p>The access and maintenance of a partially or fully compressed partitioned table are the same as for a fully uncompressed partitioned table. All rules that apply to fully uncompressed partitioned tables are also valid for partially or fully compressed partitioned tables.</p>
<p class="subhead2"><a id="sthref246"></a>To use data compression:</p>
<p>The following example creates a <a id="sthref247"></a>range-partitioned table with one compressed partition <code>costs_old</code>. The compression attribute for the table and all other partitions is inherited from the tablespace level.</p>
<pre>
CREATE TABLE costs_demo (
   prod_id     NUMBER(6),    time_id     DATE, 
   unit_cost   NUMBER(10,2), unit_price  NUMBER(10,2))
PARTITION BY RANGE (time_id)
   (PARTITION costs_old 
       VALUES LESS THAN (TO_DATE('01-JAN-2003', 'DD-MON-YYYY')) COMPRESS,
    PARTITION costs_q1_2003 
       VALUES LESS THAN (TO_DATE('01-APR-2003', 'DD-MON-YYYY')),
    PARTITION costs_q2_2003
       VALUES LESS THAN (TO_DATE('01-JUN-2003', 'DD-MON-YYYY')),
    PARTITION costs_recent VALUES LESS THAN (MAXVALUE));
</pre></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1433">
<tr>
<td class="cellalignment1440">
<table class="cellalignment1438">
<tr>
<td class="cellalignment1437"><a href="tdpdw_refresh.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1437"><a href="tdpdw_perform.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2012,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1442">
<table class="cellalignment1436">
<tr>
<td class="cellalignment1437"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1437"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1437"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1437"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1437"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1437"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
