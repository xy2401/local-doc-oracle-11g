<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Using the Oracle Database Under openUTM</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1058" />
<meta name="dcterms.created" content="2015-07-23T1:11:27Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database User's Guide" />
<meta name="dcterms.identifier" content="E27507-03" />
<meta name="dcterms.isVersionOf" content="DFSUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="progint.htm" title="Previous" type="text/html" />
<link rel="Next" href="nls.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e27507.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/13</span> <!-- End Header -->
<div id="DFSUG190" class="chapter"><a id="BABBEJCJ"></a>
<h1 class="chapter"><span class="secnum">6</span> Using the Oracle Database Under openUTM</h1>
<p>This chapter describes the specific points that you should consider when using Oracle Database 11<span class="italic">g</span> Release 2 (11.2) for BS2000/OSD under open<a id="sthref115"></a>UTM (Universal Transaction Monitor). The following topics are discussed in this chapter:</p>
<ul>
<li>
<p><a href="#BABBIAED">SQL Operations</a></p>
</li>
<li>
<p><a href="#BABFCHJC">UTM Operations</a></p>
</li>
</ul>
<a id="BABBIAED"></a>
<div id="DFSUG191" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">6.1</span> SQL Operations</h2>
<p>UTM application program units must use embedded SQL. Calls to the Oracle Call Interface (OCI) are not allowed.</p>
<div id="DFSUG192" class="sect2"><a id="sthref116"></a>
<h3 class="sect2"><span class="secnum">6.1.1</span> CONNECT</h3>
<p>A connection is implicitly established when the UTM task is started. This connection uses the data specified in the open string. Further, explicit <code dir="ltr">CONNECT</code> operations issued by the program units are not allowed.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG193" class="sect2"><a id="sthref117"></a>
<h3 class="sect2"><span class="secnum">6.1.2</span> COMMIT</h3>
<p>An explicit <code dir="ltr">COMMIT</code> statement is not allowed in UTM program units. The openUTM will automatically issue one on a <code dir="ltr">PEND RE</code>, <code dir="ltr">FI</code>, <code dir="ltr">SP</code>, or <code dir="ltr">FC</code> operation.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG194" class="sect2"><a id="sthref118"></a>
<h3 class="sect2"><span class="secnum">6.1.3</span> ROLLBACK</h3>
<p>An explicit <code dir="ltr">ROLLBACK</code> statement is not allowed in UTM program units. The openUTM will automatically issue a <code dir="ltr">ROLLBACK</code> statement on encountering a <code dir="ltr">PEND ER</code>, <code dir="ltr">RS</code>, <code dir="ltr">FR,</code> or <code dir="ltr">RSET</code> operation.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG195" class="sect2"><a id="sthref119"></a>
<h3 class="sect2"><span class="secnum">6.1.4</span> SAVEPOINT</h3>
<p>The <code dir="ltr">SAVEPOINT</code> statement is not allowed in UTM program units.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG196" class="sect2"><a id="sthref120"></a>
<h3 class="sect2"><span class="secnum">6.1.5</span> Cursor Operations</h3>
<p>A cursor is valid only until a <code dir="ltr">PEND</code> is executed. Because of a possible task change during a <code dir="ltr">PEND KP</code>, <code dir="ltr">PA</code>, or <code dir="ltr">PR</code>, you cannot perform operations on a previously filled cursor such as <code dir="ltr">OPEN</code> or <code dir="ltr">FETCH</code> after a <code dir="ltr">PEND KP</code>, <code dir="ltr">PA,</code> or <code dir="ltr">PR</code>.</p>
<p>However, you can open and fetch a new cursor after <code dir="ltr">PEND KP</code>. The alternative to using <code dir="ltr">PEND KP</code> is to use the PGWT-call (See the openUTM manual, <a href="http://manuals.ts.fujitsu.com/file/10503/utm_prg.pdf"><span class="italic">Programming Applications with KDCS for COBOL, C and C++</span></a>), which will wait until input comes from the terminal, to assign the same TACCLASS to subsequent programs after a <code dir="ltr">PEND PA</code> or <code dir="ltr">PR</code>.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG197" class="sect2"><a id="sthref121"></a>
<h3 class="sect2"><span class="secnum">6.1.6</span> Dynamic SQL</h3>
<p>You may use dynamic SQL as described in <a class="olink ZZPRE" href="../../appdev.112/e10830/toc.htm"><span class="italic">Oracle Database Programmer's Guide to the Oracle Precompilers</span></a>.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG198" class="sect2"><a id="sthref122"></a>
<h3 class="sect2"><span class="secnum">6.1.7</span> PL/SQL</h3>
<p><code dir="ltr">COMMIT</code>, <code dir="ltr">ROLLBACK</code>, <code dir="ltr">CONNECT</code>, and <code dir="ltr">SAVEPOINT</code> statements are not allowed in PL/SQL programs running under UTM.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG199" class="sect2"><a id="sthref123"></a>
<h3 class="sect2"><span class="secnum">6.1.8</span> Autocommit</h3>
<p>Autocommit operations should be avoided because they violate the synchronization between Oracle Database and UTM transactions. Take precautions when using the DDL operations, as these often contain implicit autocommits.</p>
<p>For example, DDL statements such as CREATE TABLE, DROP TABLE, and CREATE INDEX are not allowed in a global transaction because they force pending work to be committed.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABFCHJC"></a>
<div id="DFSUG200" class="sect1">
<h2 class="sect1"><span class="secnum">6.2</span> UTM Operations</h2>
<p>This section describes the Oracle Database-specific points that you should consider when using UTM operations. It describes the effect of the PEND (Program Unit End) and RSET (Reset) operations of openUTM. These operations represent the common synchronization point between openUTM and the Oracle Database.</p>
<p>When you issue a <code dir="ltr">PEND</code> call, UTM calls the Oracle Database internally for synchronization. When the <code dir="ltr">PEND</code> takes place:</p>
<ul>
<li>
<p>The user dialog/transaction is detached from the executing task.</p>
</li>
<li>
<p>Any resource that is still attached to the user is released.</p>
</li>
</ul>
<div id="DFSUG201" class="sect2"><a id="sthref124"></a>
<h3 class="sect2"><span class="secnum">6.2.1</span> RSET and PEND RS</h3>
<p>Resetting a UTM transaction implies rolling back the Oracle Database transaction.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG202" class="sect2"><a id="sthref125"></a>
<h3 class="sect2"><span class="secnum">6.2.2</span> PEND ER and PEND FR</h3>
<p>When using these calls to terminate a UTM transaction, the Oracle Database transaction is also rolled back.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG203" class="sect2"><a id="sthref126"></a>
<h3 class="sect2"><span class="secnum">6.2.3</span> PEND KP, PEND PR, and PEND PA</h3>
<p>These operations only end a UTM dialog step without affecting the corresponding Oracle Database transaction.</p>
</div>
<!-- class="sect2" -->
<div id="DFSUG204" class="sect2"><a id="sthref127"></a>
<h3 class="sect2"><span class="secnum">6.2.4</span> PEND RE, PEND FI, PEND SP, and PEND FC</h3>
<p>These <code dir="ltr">PEND</code> calls cause an implicit <code dir="ltr">COMMIT</code> to be executed. All cursors that are not explicitly closed, are closed.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1724">
<tr>
<td class="cellalignment1731">
<table class="cellalignment1729">
<tr>
<td class="cellalignment1728"><a href="progint.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1728"><a href="nls.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2007, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1733">
<table class="cellalignment1727">
<tr>
<td class="cellalignment1728"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1728"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1728"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1728"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1728"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1728"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
