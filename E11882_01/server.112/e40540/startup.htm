<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Database Instance</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1056" />
<meta name="dcterms.created" content="2015-05-25T13:34:4Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Concepts" />
<meta name="dcterms.identifier" content="E40540-04" />
<meta name="dcterms.isVersionOf" content="CNCPT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1993, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="part_inarch.htm" title="Previous" type="text/html" />
<link rel="Next" href="memory.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40540.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">21/30</span> <!-- End Header -->
<div id="CNCPT005" class="chapter"><a id="g12154"></a>
<h1 class="chapter"><span class="secnum">13</span> Oracle Database Instance</h1>
<p>This chapter explains the nature of an Oracle database instance, the parameter and diagnostic files associated with an instance, and what occurs during instance creation and the opening and closing of a database.</p>
<p>This chapter contains the following sections:</p>
<ul>
<li>
<p><a href="#CHDFGJIH">Introduction to the Oracle Database Instance</a></p>
</li>
<li>
<p><a href="#BABDBBAJ">Overview of Instance Startup and Shutdown</a></p>
</li>
<li>
<p><a href="#BABGDACG">Overview of Checkpoints</a></p>
</li>
<li>
<p><a href="#CEGCHJGF">Overview of Instance Recovery</a></p>
</li>
<li>
<p><a href="#i9633">Overview of Parameter Files</a></p>
</li>
<li>
<p><a href="#BGBCDDCD">Overview of Diagnostic Files</a></p>
</li>
</ul>
<a id="CHDFGJIH"></a>
<div id="CNCPT601" class="sect1">
<h2 class="sect1">Introduction to the Oracle Database Instance</h2>
<p>A database <a href="glossary.htm#CBAFGFCJ"><span class="xrefglossterm">instance</span></a> is a set of memory structures that manage database files. A <a href="glossary.htm#CHDHBJHG"><span class="xrefglossterm">database</span></a> is a set of physical files on disk created by the <code dir="ltr">CREATE DATABASE</code> statement. The instance manages its associated data and serves the users of the database.</p>
<p><a id="sthref1588"></a><a id="sthref1589"></a><a id="sthref1590"></a><a id="sthref1591"></a>Every running Oracle database is associated with at least one Oracle database instance. Because an instance exists in memory and a database exists on disk, an instance can exist without a database and a database can exist without an instance.</p>
<div id="CNCPT89031" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1592"></a>
<h3 class="sect2">Database Instance Structure</h3>
<p>When an instance is started, Oracle Database allocates a memory area called the <a href="glossary.htm#CBAICBIA"><span class="xrefglossterm">system global area (SGA)</span></a> and starts one or more <a href="glossary.htm#CHDBJJGB"><span class="xrefglossterm">background processes</span></a>. The SGA serves various purposes, including the following:</p>
<ul>
<li>
<p>Maintaining internal data structures that are accessed by many processes and threads concurrently</p>
</li>
<li>
<p>Caching data blocks read from disk</p>
</li>
<li>
<p>Buffering redo data before writing it to the online redo log files</p>
</li>
<li>
<p>Storing SQL <a href="glossary.htm#CHDGBADJ"><span class="xrefglossterm">execution plans</span></a></p>
</li>
</ul>
<p>The SGA is shared by the <a href="glossary.htm#CHDIDIFJ"><span class="xrefglossterm">Oracle processes</span></a>, which include <a href="glossary.htm#CHDGDHBB"><span class="xrefglossterm">server processes</span></a> and background processes, running on a single computer. The way in which Oracle processes are associated with the SGA varies according to operating system.</p>
<p>A database instance includes background processes. Server processes, and the process memory allocated in these processes, also exist in the instance. The instance continues to function when server processes terminate.</p>
<p><a href="#i1332">Figure 13-1</a> shows the main components of an Oracle database instance.</p>
<div id="CNCPT89032" class="figure">
<p class="titleinfigure"><a id="i1332"></a>Figure 13-1 Database Instance</p>
<img width="486" height="488" src="img/cncpt325.gif" alt="Description of Figure 13-1 follows" /><br />
<a id="sthref1593" href="img_text/cncpt325.htm">Description of "Figure 13-1 Database Instance"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="memory.htm#i10093">"Overview of the System Global Area"</a></p>
</li>
<li>
<p><a href="process.htm#BABIDJJA">"Overview of Background Processes"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<div id="CNCPT89033" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1594"></a>
<h3 class="sect2">Database Instance Configurations</h3>
<p>You can run Oracle Database in either of the following mutually exclusive configurations:</p>
<ul>
<li>
<p>Single-instance configuration</p>
<p>A one-to-one relationship exists between the database and an instance.</p>
</li>
<li>
<p>Oracle Real Application Clusters (Oracle RAC) configuration</p>
<p>A one-to-many relationship exists between the database and instances.</p>
</li>
</ul>
<p><a href="#BABIEDFC">Figure 13-2</a> shows possible database instance configurations.</p>
<div id="CNCPT89034" class="figure">
<p class="titleinfigure"><a id="BABIEDFC"></a>Figure 13-2 Database Instance Configurations</p>
<img width="641" height="333" src="img/cncpt296.gif" alt="Description of Figure 13-2 follows" /><br />
<a id="sthref1595" href="img_text/cncpt296.htm">Description of "Figure 13-2 Database Instance Configurations"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Whether in a single-instance or Oracle RAC configuration, a database instance is associated with only one database at a time. You can start a database instance and <span class="bold">mount</span> (associate the instance with) one database, but not mount two databases simultaneously with the same instance.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
This chapter discusses a single-instance database configuration unless otherwise noted.</div>
<p>Multiple instances can run concurrently on the same computer, each accessing its own database. For example, a computer can host two distinct databases: <code dir="ltr">prod1</code> and <code dir="ltr">prod2</code>. One database instance manages <code dir="ltr">prod1</code>, while a separate instance manages <code dir="ltr">prod2</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD900" href="../../rac.112/e41960/admin.htm#RACAD900"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information specific to Oracle RAC</div>
<div id="CNCPT89035" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1596"></a>
<h4 class="sect3">Duration of an Instance</h4>
<p>An instance begins when it is created with the <code dir="ltr">STARTUP</code> command and ends when it is terminated. During this period, an instance can associate itself with one and only one database. Furthermore, the instance can mount a database only once, close it only once, and open it only once. After a database has been closed or shut down, you must start a <span class="italic">different</span> instance to mount and open this database.</p>
<p><a href="#BABGBGJA">Table 13-1</a> illustrates a database instance attempting to reopen a database that it previously closed.</p>
<div id="CNCPT89036" class="tblruleformal">
<p class="titleintable"><a id="sthref1597"></a><a id="BABGBGJA"></a>Table 13-1 Duration of an Instance</p>
<table class="cellalignment1460" title="Duration of an Instance" summary="Duration of an instance" dir="ltr">
<thead>
<tr class="cellalignment1449">
<th class="cellalignment1459" id="r1c1-t5">Statement</th>
<th class="cellalignment1459" id="r1c2-t5">Explanation</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r2c1-t5" headers="r1c1-t5">
<pre dir="ltr">
SQL&gt; STARTUP
ORACLE instance started.
 
Total System Global Area  468729856 bytes
Fixed Size                  1333556 bytes
Variable Size             440403660 bytes
Database Buffers           16777216 bytes
Redo Buffers               10215424 bytes
Database mounted.
Database opened.
</pre></td>
<td class="cellalignment1455" headers="r2c1-t5 r1c2-t5">
<p>The <code dir="ltr">STARTUP</code> command creates an instance, which mounts and opens the database.</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r3c1-t5" headers="r1c1-t5">
<pre dir="ltr">
SQL&gt; SELECT 
TO_CHAR(STARTUP_TIME,'MON-DD-RR HH24:MI:SS')
AS "Inst Start Time" FROM V$INSTANCE;
 
Inst Start Time
------------------
JUN-18-11 <span class="bold">13:14:48</span>
</pre></td>
<td class="cellalignment1455" headers="r3c1-t5 r1c2-t5">
<p>This query shows the time that the current instance was started.</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r4c1-t5" headers="r1c1-t5">
<pre dir="ltr">
SQL&gt; SHUTDOWN IMMEDIATE
</pre></td>
<td class="cellalignment1455" headers="r4c1-t5 r1c2-t5">
<p>The instance closes the database and shuts down, ending the life of this instance.</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r5c1-t5" headers="r1c1-t5">
<pre dir="ltr">
SQL&gt; STARTUP
Oracle instance started.
. . .
</pre></td>
<td class="cellalignment1455" headers="r5c1-t5 r1c2-t5">
<p>The <code dir="ltr">STARTUP</code> command creates a new instance and mounts and open the database.</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r6c1-t5" headers="r1c1-t5">
<pre dir="ltr">
SQL&gt; SELECT 
TO_CHAR(STARTUP_TIME,'MON-DD-RR HH24:MI:SS')
AS "Inst Start Time" FROM V$INSTANCE;
 
Inst Start Time
------------------
JUN-18-11 <span class="bold">13:16:40</span>
</pre></td>
<td class="cellalignment1455" headers="r6c1-t5 r1c2-t5">
<p>This query shows the time that the current instance was started. The different start time shows that this instance is different from the one that shut down the database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" --></div>
<!-- class="sect3" -->
<div id="CNCPT89037" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1598"></a>
<h4 class="sect3">Oracle System Identifier (SID)</h4>
<p>The <span class="bold">system identifier (SID)</span> is a unique name for an Oracle database instance on a specific host. On UNIX and Linux, Oracle Database uses the SID and <a href="glossary.htm#CHDDDBFG"><span class="xrefglossterm">Oracle home</span></a> values to create a key to shared memory. Also, the SID is used by default to locate the parameter file, which is used to locate relevant files such as the database control files.</p>
<p>On most platforms, the <code dir="ltr">ORACLE_SID</code> environment variable sets the SID, whereas the <code dir="ltr">ORACLE_HOME</code> variable sets the Oracle home. When connecting to an instance, clients can specify the SID in an Oracle Net connection or use a net service name. Oracle Database converts a service name into an <code dir="ltr">ORACLE_HOME</code> and <code dir="ltr">ORACLE_SID</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="dist_pro.htm#CHDFFGCG">"Service Names"</a></p>
</li>
<li>
<p><a class="olink ADMIN11074" href="../../server.112/e25494/create.htm#ADMIN11074"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to specify an Oracle SID</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABDBBAJ"></a>
<div id="CNCPT955" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Overview of Instance Startup and Shutdown</h2>
<p>A database instance provides user access to a database. This section explains the possible states of the instance and the database.</p>
<a id="i1197"></a>
<div id="CNCPT602" class="sect2">
<h3 class="sect2">Overview of Instance and Database Startup</h3>
<p>In a typical use case, you manually start an instance and then mount and open the database, making it available for users. You can use the SQL*Plus <code dir="ltr">STARTUP</code> command, Oracle Enterprise Manager (Enterprise Manager), or the SRVCTL utility to perform these steps. <a href="#BABICCFJ">Figure 13-3</a> shows how a database progresses from a shutdown state to an open state.</p>
<div id="CNCPT89038" class="figure">
<p class="titleinfigure"><a id="BABICCFJ"></a>Figure 13-3 Instance and Database Startup Sequence</p>
<img width="434" height="272" src="img/cncpt212.gif" alt="Description of Figure 13-3 follows" /><br />
<a id="sthref1599" href="img_text/cncpt212.htm">Description of "Figure 13-3 Instance and Database Startup Sequence"</a><br />
<br /></div>
<!-- class="figure" -->
<p>A database goes through the following phases when it proceeds from a shutdown state to an open database state:</p>
<ol>
<li>
<p>Instance started without mounting database</p>
<p>The instance is started, but is not yet associated with a database.</p>
<p><a href="#CEGJEJDD">"How an Instance Is Started"</a> explains this stage.</p>
</li>
<li>
<p>Database mounted</p>
<p>The instance is started and is associated with a database by reading its <a href="glossary.htm#CHDDFGEC"><span class="xrefglossterm">control file</span></a> (see <a href="physical.htm#i10135">"Overview of Control Files"</a>). The database is closed to users.</p>
<p><a href="#CEGICFED">"How a Database Is Mounted"</a> explains this stage.</p>
</li>
<li>
<p>Database open</p>
<p>The instance is started and is associated with an open database. The data contained in the <a href="glossary.htm#CHDHJCCC"><span class="xrefglossterm">data files</span></a> is accessible to authorized users.</p>
<p><a href="#CEGFHBAG">"How a Database Is Opened"</a> explains this stage.</p>
</li>
</ol>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="cncptdba.htm#CHDHBAAI">"Oracle Enterprise Manager"</a></p>
</li>
<li>
<p><a class="olink ADMQS0514" href="../../server.112/e10897/instance.htm#ADMQS0514"><span class="italic">Oracle Database 2 Day DBA</span></a> and <a class="olink ADMIN10063" href="../../server.112/e25494/start.htm#ADMIN10063"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to start an instance</p>
</li>
<li>
<p><a class="olink ADMIN5032" href="../../server.112/e25494/restart.htm#ADMIN5032"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to use SRVCTL</p>
</li>
</ul>
</div>
<a id="i1049"></a>
<div id="CNCPT1289" class="sect3">
<h4 class="sect3">Connection with Administrator Privileges</h4>
<p><a id="sthref1600"></a><a id="sthref1601"></a><a id="sthref1602"></a><a id="sthref1603"></a>Database startup and shutdown are powerful administrative options that are restricted to users who connect to Oracle Database with <a id="sthref1604"></a>administrator privileges. <a id="sthref1605"></a>Normal users do not have control over the current status of an Oracle database.</p>
<p>Depending on the operating system, one of the following conditions establishes administrator privileges for a user:</p>
<ul>
<li>
<p><a id="sthref1606"></a>The operating system privileges of the user enable him or her to connect using administrator privileges.</p>
</li>
<li>
<p><a id="sthref1607"></a><a id="sthref1608"></a><a id="sthref1609"></a><a id="sthref1610"></a>The user is granted the <code dir="ltr">SYSDBA</code> or <code dir="ltr">SYSOPER</code> system privileges and the database uses password files to authenticate database administrators over the network.</p>
</li>
</ul>
<p><code dir="ltr">SYSDBA</code> and <code dir="ltr">SYSOPER</code> are special <span class="bold">system privileges</span> that enable access to a database instance even when the database is not open. Control of these privileges is outside of the database itself.When you connect with the <code dir="ltr">SYSDBA</code> system privilege, you are in the schema owned by <code dir="ltr">SYS</code>. When you connect as <code dir="ltr">SYSOPER</code>, you are in the public schema. <code dir="ltr">SYSOPER</code> privileges are a subset of <code dir="ltr">SYSDBA</code> privileges.</p>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<ul>
<li>
<p><a href="tablecls.htm#CBBJFFCH">"SYS and SYSTEM Schemas"</a></p>
</li>
<li>
<p><a href="cmntopc.htm#i2332">"Overview of Database Security"</a> to learn about password files and authentication for database administrators</p>
</li>
<li>
<p><a class="olink ADMIN11048" href="../../server.112/e25494/dba.htm#ADMIN11048"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn about <code dir="ltr">SYSDBA</code> and <code dir="ltr">SYSOPER</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CEGJEJDD"></a>
<div id="CNCPT1293" class="sect3">
<h4 class="sect3">How an Instance Is Started</h4>
<p><a id="sthref1611"></a><a id="sthref1612"></a><a id="sthref1613"></a><a id="sthref1614"></a><a id="sthref1615"></a><a id="sthref1616"></a>When Oracle Database starts an instance, it performs the following basic steps:</p>
<ol>
<li>
<p>Searches for a <a href="glossary.htm#CBADAFDF"><span class="xrefglossterm">server parameter file</span></a> in a platform-specific default location and, if not found, for a text <a href="glossary.htm#CHDFBBFA"><span class="xrefglossterm">initialization parameter file</span></a> (specifying <code dir="ltr">STARTUP</code> with the <code dir="ltr">SPFILE</code> or <code dir="ltr">PFILE</code> parameters overrides the default behavior)</p>
</li>
<li>
<p>Reads the parameter file to determine the values of initialization parameters</p>
</li>
<li>
<p>Allocates the SGA based on the initialization parameter settings</p>
</li>
<li>
<p>Starts the Oracle background processes</p>
</li>
<li>
<p>Opens the <a href="glossary.htm#CHDJEHBI"><span class="xrefglossterm">alert log</span></a> and trace files and writes all explicit parameter settings to the <a href="glossary.htm#CHDJEHBI"><span class="xrefglossterm">alert log</span></a> in valid parameter syntax</p>
</li>
</ol>
<p>At this stage, no database is associated with the instance. Scenarios that require a <code dir="ltr">NOMOUNT</code> state include database creation and certain backup and recovery operations.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN00202" href="../../server.112/e25494/create.htm#ADMIN00202"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to manage initialization parameters using a server parameter file</div>
</div>
<!-- class="sect3" -->
<a id="CEGICFED"></a>
<div id="CNCPT1296" class="sect3">
<h4 class="sect3">How a Database Is Mounted</h4>
<p><a id="sthref1617"></a><a id="sthref1618"></a><a id="sthref1619"></a>The instance <span class="bold">mounts</span> a database to associate the database with this instance. To mount the database, the instance obtains the names of the database control files specified in the <code dir="ltr">CONTROL_FILES</code> initialization parameter and opens the files. Oracle Database reads the control files to find the names of the data files and the online redo log files that it will attempt to access when opening the database.</p>
<p>In a <a href="glossary.htm#CBAJBEAC"><span class="xrefglossterm">mounted database</span></a>, the database is closed and accessible only to database administrators. Administrators can keep the database closed while completing specific maintenance operations. However, the database is not available for normal operations.</p>
<p>If Oracle Database allows multiple instances to mount the same database concurrently, then the <code dir="ltr">CLUSTER_DATABASE</code> initialization parameter setting can make the database available to multiple instances. Database behavior depends on the setting:</p>
<ul>
<li>
<p>If <code dir="ltr">CLUSTER_DATABASE</code> is <code dir="ltr">false</code> (default) for the first instance that mounts a database, then only this instance can mount the database.</p>
</li>
<li>
<p>If <code dir="ltr">CLUSTER_DATABASE</code> is <code dir="ltr">true</code> for the first instance, then other instances can mount the database if their <code dir="ltr">CLUSTER_DATABASE</code> parameter settings are set to <code dir="ltr">true</code>. The number of instances that can mount the database is subject to a predetermined maximum specified when creating the database.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11152" href="../../server.112/e25494/start.htm#ADMIN11152"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to mount a database</p>
</li>
<li>
<p><a class="olink RACAD" href="../../rac.112/e41960/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about the use of multiple instances with a single database</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CEGFHBAG"></a>
<div id="CNCPT1300" class="sect3">
<h4 class="sect3">How a Database Is Opened</h4>
<p><a id="sthref1620"></a>Opening a mounted database makes it available for normal database operations. Any valid user can connect to an open database and access its information. Usually, a database administrator opens the database to make it available for general use.</p>
<p>When you open the database, Oracle Database performs the following actions:</p>
<ul>
<li>
<p>Opens the online data files in tablespaces other than undo tablespaces</p>
<p>If a tablespace was offline when the database was previously shut down (see <a href="logical.htm#i2481">"Online and Offline Tablespaces"</a>), then the tablespace and its corresponding data files will be offline when the database reopens.</p>
</li>
<li>
<p>Acquires an undo tablespace</p>
<p>If multiple undo tablespaces exists, then the <code dir="ltr">UNDO_TABLESPACE</code> initialization parameter designates the undo tablespace to use. If this parameter is not set, then the first available undo tablespace is chosen.</p>
</li>
<li>
<p>Opens the online redo log files</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="cncptdba.htm#CHDDEAAG">"Data Repair"</a></div>
<a id="i5610"></a>
<div id="CNCPT1306" class="sect4">
<h5 class="sect4">Read-Only Mode</h5>
<p><a id="sthref1621"></a>By default, the database opens in <span class="bold">read/write mode</span>. In this mode, users can make changes to the data, generating redo in the online redo log. Alternatively, you can open in <span class="bold">read-only mode</span> to prevent data modification by user transactions.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
By default, a physical <a href="glossary.htm#CHDCBIBF"><span class="xrefglossterm">standby database</span></a> opens in read-only mode. See <a class="olink SBYDB00706" href="../../server.112/e41134/manage_ps.htm#SBYDB00706"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>.</div>
<p>Read-only mode restricts database access to read-only transactions, which cannot write to data files or to online redo log files. However, the database can perform recovery or operations that change the database state without generating redo. For example, in read-only mode:</p>
<ul>
<li>
<p>Data files can be taken offline and online. However, you cannot take permanent tablespaces offline.</p>
</li>
<li>
<p>Offline data files and tablespaces can be recovered.</p>
</li>
<li>
<p>The control file remains available for updates about the state of the database.</p>
</li>
<li>
<p>Temporary tablespaces created with the <code dir="ltr">CREATE TEMPORARY TABLESPACE</code> statement are read/write.</p>
</li>
<li>
<p>Writes to operating system <a id="sthref1622"></a>audit trails, trace files, and alert logs can continue.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11154" href="../../server.112/e25494/start.htm#ADMIN11154"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to open a database in read-only mode</div>
</div>
<!-- class="sect4" -->
<div id="CNCPT89039" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1623"></a>
<h5 class="sect4">Database File Checks</h5>
<p>If any of the data files or redo log files are not present when the instance attempts to open the database, or if the files are present but fail consistency tests, then the database returns an error. Media recovery may be required.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="cncptdba.htm#CHDFHDCG">"Backup and Recovery"</a></div>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="i1199"></a>
<div id="CNCPT603" class="sect2">
<h3 class="sect2">Overview of Database and Instance Shutdown</h3>
<p>In a typical use case, you manually shut down the database, making it unavailable for users while you perform maintenance or other administrative tasks. You can use the SQL*Plus <code dir="ltr">SHUTDOWN</code> command or Enterprise Manager to perform these steps. <a href="#BABHIDBH">Figure 13-4</a> shows the progression from an open state to a consistent shutdown.</p>
<div id="CNCPT89040" class="figure">
<p class="titleinfigure"><a id="BABHIDBH"></a>Figure 13-4 Instance and Database Shutdown Sequence</p>
<img width="435" height="273" src="img/cncpt281.gif" alt="Description of Figure 13-4 follows" /><br />
<a id="sthref1624" href="img_text/cncpt281.htm">Description of "Figure 13-4 Instance and Database Shutdown Sequence"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Oracle Database automatically performs the following steps whenever an open database is shut down <a id="sthref1625"></a><a id="sthref1626"></a><a id="sthref1627"></a><a id="sthref1628"></a>consistently:</p>
<ol>
<li>
<p>Database closed</p>
<p>The database is mounted, but online data files and redo log files are closed.</p>
<p><a href="#CEGBCHCE">"How a Database Is Closed"</a> explains this stage.</p>
</li>
<li>
<p>Database unmounted</p>
<p>The instance is started, but is no longer associated with the control file of the database.</p>
<p><a href="#CEGFEBII">"How a Database Is Unmounted"</a> explains this stage.</p>
</li>
<li>
<p>Database instance shut down</p>
<p>The database instance is no longer started.</p>
<p><a href="#CEGGDIDB">"How an Instance Is Shut Down"</a> explains this stage.</p>
</li>
</ol>
<p>Oracle Database does not go through all of the preceding steps in an instance failure or <code dir="ltr">SHUTDOWN ABORT</code>, which immediately terminates the instance.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMQS052" href="../../server.112/e10897/instance.htm#ADMQS052"><span class="italic">Oracle Database 2 Day DBA</span></a> and <a class="olink ADMIN11156" href="../../server.112/e25494/start.htm#ADMIN11156"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to shut down a database</div>
<a id="BABEEGJE"></a>
<div id="CNCPT89041" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">Shutdown Modes</h4>
<p><a id="sthref1629"></a>A database administrator with <code dir="ltr">SYSDBA</code> or <code dir="ltr">SYSOPER</code> privileges can shut down the database using the SQL*Plus <code dir="ltr">SHUTDOWN</code> command or Enterprise Manager. The <code dir="ltr">SHUTDOWN</code> command has options that determine shutdown behavior. <a href="#BABBIGAA">Table 13-2</a> summarizes the behavior of the different shutdown modes.</p>
<div id="CNCPT89042" class="tblruleformal">
<p class="titleintable"><a id="sthref1630"></a><a id="BABBIGAA"></a>Table 13-2 Shutdown Modes</p>
<table class="cellalignment1460" title="Shutdown Modes" summary="Shutdown modes" dir="ltr">
<thead>
<tr class="cellalignment1449">
<th class="cellalignment1459" id="r1c1-t16">Database Behavior</th>
<th class="cellalignment1459" id="r1c2-t16">ABORT</th>
<th class="cellalignment1459" id="r1c3-t16">IMMEDIATE</th>
<th class="cellalignment1459" id="r1c4-t16">TRANSACTIONAL</th>
<th class="cellalignment1459" id="r1c5-t16">NORMAL</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r2c1-t16" headers="r1c1-t16">
<p>Permits new user connections</p>
</td>
<td class="cellalignment1455" headers="r2c1-t16 r1c2-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r2c1-t16 r1c3-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r2c1-t16 r1c4-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r2c1-t16 r1c5-t16">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r3c1-t16" headers="r1c1-t16">
<p>Waits until current sessions end</p>
</td>
<td class="cellalignment1455" headers="r3c1-t16 r1c2-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r3c1-t16 r1c3-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r3c1-t16 r1c4-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r3c1-t16 r1c5-t16">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r4c1-t16" headers="r1c1-t16">
<p>Waits until current transactions end</p>
</td>
<td class="cellalignment1455" headers="r4c1-t16 r1c2-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r4c1-t16 r1c3-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r4c1-t16 r1c4-t16">
<p>Yes</p>
</td>
<td class="cellalignment1455" headers="r4c1-t16 r1c5-t16">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r5c1-t16" headers="r1c1-t16">
<p>Performs a <a href="glossary.htm#CHDDBJEH"><span class="xrefglossterm">checkpoint</span></a> and closes open files</p>
</td>
<td class="cellalignment1455" headers="r5c1-t16 r1c2-t16">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r5c1-t16 r1c3-t16">
<p>Yes</p>
</td>
<td class="cellalignment1455" headers="r5c1-t16 r1c4-t16">
<p>Yes</p>
</td>
<td class="cellalignment1455" headers="r5c1-t16 r1c5-t16">
<p>Yes</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p>The possible <code dir="ltr">SHUTDOWN</code> statements are:</p>
<ul>
<li>
<p><code dir="ltr">SHUTDOWN ABORT</code></p>
<p>This mode is intended for emergency situations, such as when no other form of shutdown is successful. This mode of shutdown is the fastest. However, a subsequent open of this database may take substantially longer because instance recovery must be performed to make the data files consistent.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Because <code dir="ltr">SHUTDOWN</code> <code dir="ltr">ABORT</code> does not <a id="sthref1631"></a>checkpoint the open data files, instance recovery is necessary before the database can reopen. The other shutdown modes do not require instance recovery before the database can reopen.</div>
</li>
<li>
<p><code dir="ltr">SHUTDOWN IMMEDIATE</code></p>
<p>This mode is typically the fastest next to <code dir="ltr">SHUTDOWN</code> <code dir="ltr">ABORT</code>. Oracle Database terminates any executing SQL statements and disconnects users. Active transactions are terminated and uncommitted changes are rolled back.</p>
</li>
<li>
<p><code dir="ltr">SHUTDOWN TRANSACTIONAL</code></p>
<p>This mode prevents users from starting new transactions, but waits for all current transactions to complete before shutting down. This mode can take a significant amount of time depending on the nature of the current transactions.</p>
</li>
<li>
<p><code dir="ltr">SHUTDOWN NORMAL</code></p>
<p>This is the default mode of shutdown. The database waits for all connected users to disconnect before shutting down.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMQS05145" href="../../server.112/e10897/instance.htm#ADMQS05145"><span class="italic">Oracle Database 2 Day DBA</span></a> and <a class="olink ADMIN11156" href="../../server.112/e25494/start.htm#ADMIN11156"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn about the different shutdown modes</p>
</li>
<li>
<p><a class="olink SQPUG124" href="../../server.112/e16604/ch_twelve041.htm#SQPUG124"><span class="italic">SQL*Plus User's Guide and Reference</span></a> to learn about the <code dir="ltr">SHUTDOWN</code> command</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<a id="CEGBCHCE"></a>
<div id="CNCPT1307" class="sect3">
<h4 class="sect3">How a Database Is Closed</h4>
<p><a id="sthref1632"></a>The database close operation is implicit in a database shutdown. The nature of the operation depends on whether the database shutdown is normal or abnormal.</p>
<div id="CNCPT1391" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1633"></a>
<h5 class="sect4">How a Database Is Closed During Normal Shutdown</h5>
<p>When a database is closed as part of a <code dir="ltr">SHUTDOWN</code> with any option other than <code dir="ltr">ABORT</code>, Oracle Database writes data in the SGA to the data files and online redo log files. Next, the database closes online data files and online redo log files. Any offline data files of offline tablespaces have been closed already. When the database reopens, any tablespace that was offline remains offline.</p>
<p>At this stage, the database is closed and inaccessible for normal operations. The control files remain open after a database is closed.</p>
</div>
<!-- class="sect4" -->
<div id="CNCPT1392" class="sect4"><!-- infolevel="all" infotype="General" --><a id="sthref1634"></a>
<h5 class="sect4">How a Database Is Closed During Abnormal Shutdown</h5>
<p>If a <code dir="ltr">SHUTDOWN ABORT</code> or abnormal termination occurs, then the instance of an open database closes and shuts down the database instantaneously. Oracle Database does not write data in the buffers of the SGA to the data files and redo log files. The subsequent reopening of the database requires instance recovery, which Oracle Database performs automatically.<a id="sthref1635"></a><a id="sthref1636"></a><a id="sthref1637"></a><a id="sthref1638"></a></p>
</div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CEGFEBII"></a>
<div id="CNCPT1309" class="sect3">
<h4 class="sect3">How a Database Is Unmounted</h4>
<p>After the database is closed, Oracle Database unmounts the database to disassociate it from the instance. After a database is unmounted, Oracle Database closes the control files of the database. At this point, the instance remains in memory.</p>
</div>
<!-- class="sect3" -->
<a id="CEGGDIDB"></a>
<div id="CNCPT1310" class="sect3">
<h4 class="sect3">How an Instance Is Shut Down</h4>
<p><a id="sthref1639"></a><a id="sthref1640"></a>The final step in database shutdown is shutting down the instance. When the database instance is shut down, the SGA is removed from memory and the background processes are terminated.</p>
<p><a id="sthref1641"></a><a id="sthref1642"></a><a id="sthref1643"></a><a id="sthref1644"></a>In unusual circumstances, shutdown of an instance may not occur cleanly. Memory structures may not be removed from memory or one of the background processes may not be terminated. When remnants of a previous instance exist, a subsequent instance startup may fail. In such situations, you can force the new instance to start by removing the remnants of the previous instance and then starting a new instance, or by issuing a <code dir="ltr">SHUTDOWN</code> <code dir="ltr">ABORT</code> statement in SQL*Plus or using Enterprise Manager.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11156" href="../../server.112/e25494/start.htm#ADMIN11156"><span class="italic">Oracle Database Administrator's Guide</span></a> for more detailed information about database shutdown</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABGDACG"></a>
<div id="CNCPT89043" class="sect1">
<h2 class="sect1">Overview of Checkpoints</h2>
<p>A <a id="sthref1645"></a><a href="glossary.htm#CHDDBJEH"><span class="xrefglossterm">checkpoint</span></a> is a crucial mechanism in consistent database shutdowns, instance recovery, and Oracle Database operation generally. The term <span class="bold">checkpoint</span> has the following related meanings:</p>
<ul>
<li>
<p>A data structure that indicates the <span class="bold">checkpoint position</span>, which is the <a href="glossary.htm#CHDBFAEG"><span class="xrefglossterm">SCN</span></a> in the redo stream where instance recovery must begin</p>
<p>The checkpoint position is determined by the oldest dirty buffer in the database buffer cache. The checkpoint position acts as a pointer to the redo stream and is stored in the control file and in each data file header.</p>
</li>
<li>
<p>The writing of modified database buffers in the <a href="glossary.htm#BGBHGEDC"><span class="xrefglossterm">database buffer cache</span></a> to disk</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="transact.htm#CHDIAFFH">"System Change Numbers (SCNs)"</a></div>
<div id="CNCPT89044" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1646"></a>
<h3 class="sect2">Purpose of Checkpoints</h3>
<p>Oracle Database uses checkpoints to achieve the following goals:</p>
<ul>
<li>
<p>Reduce the time required for recovery in case of an instance or media failure</p>
</li>
<li>
<p>Ensure that dirty buffers in the buffer cache are written to disk regularly</p>
</li>
<li>
<p>Ensure that all committed data is written to disk during a consistent shutdown</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="CNCPT89045" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1647"></a>
<h3 class="sect2">When Oracle Database Initiates Checkpoints</h3>
<p>The <span class="bold">checkpoint process (CKPT)</span> is responsible for writing checkpoints to the data file headers and control file. Checkpoints occur in a variety of situations. For example, Oracle Database uses the following types of checkpoints:</p>
<ul>
<li>
<p><a id="sthref1648"></a>Thread checkpoints</p>
<p>The database writes to disk all buffers modified by redo in a specific thread before a certain target. The set of thread checkpoints on all instances in a database is a <span class="bold">database checkpoint</span>. Thread checkpoints occur in the following situations:</p>
<ul>
<li>
<p>Consistent database shutdown</p>
</li>
<li>
<p><code dir="ltr">ALTER SYSTEM CHECKPOINT</code> statement</p>
</li>
<li>
<p>Online redo log switch</p>
</li>
<li>
<p><code dir="ltr">ALTER DATABASE BEGIN BACKUP</code> statement</p>
</li>
</ul>
</li>
<li>
<p>Tablespace and data file checkpoints</p>
<p>The database writes to disk all buffers modified by redo before a specific target. A tablespace checkpoint is a set of data file checkpoints, one for each data file in the tablespace. These checkpoints occur in a variety of situations, including making a tablespace read-only or taking it offline normal, shrinking a data file, or executing <code dir="ltr">ALTER TABLESPACE BEGIN BACKUP</code>.</p>
</li>
<li>
<p><a id="sthref1649"></a>Incremental checkpoints</p>
<p>An incremental checkpoint is a type of thread checkpoint partly intended to avoid writing large numbers of blocks at online redo log switches. DBW<span class="italic">n</span> checks at least every three seconds to determine whether it has work to do. When DBW<span class="italic">n</span> writes dirty buffers, it advances the checkpoint position, causing CKPT to write the checkpoint position to the control file, but not to the data file headers.</p>
</li>
</ul>
<p>Other types of checkpoints include instance and media recovery checkpoints and checkpoints when schema objects are dropped or truncated.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="process.htm#BABHFGFF">"Checkpoint Process (CKPT)"</a></p>
</li>
<li>
<p><a class="olink RACAD039" href="../../rac.112/e41960/admin.htm#RACAD039"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about global checkpoints in Oracle RAC</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGCHJGF"></a>
<div id="CNCPT1301" class="sect1">
<h2 class="sect1">Overview of Instance Recovery</h2>
<p><span class="bold">Instance recovery</span> is the process of applying records in the <a href="glossary.htm#CBAIJCIB"><span class="xrefglossterm">online redo log</span></a> to data files to reconstruct changes made after the most recent <a href="glossary.htm#CHDDBJEH"><span class="xrefglossterm">checkpoint</span></a>. Instance recovery occurs automatically when an administrator attempts to open a database that was previously shut down inconsistently.</p>
<div id="CNCPT89046" class="sect2"><a id="sthref1650"></a>
<h3 class="sect2">Purpose of Instance Recovery</h3>
<p>Instance recovery ensures that the database is in a consistent state after an instance failure. The files of a database can be left in an inconsistent state because of how Oracle Database manages database changes.</p>
<p>A <a href="glossary.htm#CBAEJAED"><span class="xrefglossterm">redo thread</span></a> is a record of all of the changes generated by an instance. A single-instance database has one thread of redo, whereas an Oracle RAC database has multiple redo threads, one for each database instance.</p>
<p>When a <a href="glossary.htm#CHDBEFGD"><span class="xrefglossterm">transaction</span></a> is committed, <a href="glossary.htm#CHDJEJEE"><span class="xrefglossterm">log writer (LGWR)</span></a> writes both the remaining redo entries in memory and the transaction SCN to the <a href="glossary.htm#CBAIJCIB"><span class="xrefglossterm">online redo log</span></a>. However, the <a href="glossary.htm#CBAJDCEI"><span class="xrefglossterm">database writer (DBW)</span></a> process writes modified data blocks to the data files whenever it is most efficient. For this reason, uncommitted changes may temporarily exist in the data files while committed changes do not yet exist in the data files.</p>
<p>If an instance of an open database fails, either because of a <code dir="ltr">SHUTDOWN ABORT</code> statement or abnormal termination, then the following situations can result:<a id="sthref1651"></a><a id="sthref1652"></a></p>
<ul>
<li>
<p><a id="sthref1653"></a><a id="sthref1654"></a>Data blocks committed by a transaction are not written to the data files and appear only in the <a href="glossary.htm#CBAIJCIB"><span class="xrefglossterm">online redo log</span></a>. These changes must be reapplied to the database.</p>
</li>
<li>
<p>The data files contains changes that had not been committed when the instance failed. These changes must be rolled back to ensure transactional consistency.</p>
</li>
</ul>
<p>Instance recovery uses only online redo log files and current online data files to synchronize the data files and ensure that they are consistent.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="process.htm#BABHDJGD">"Database Writer Process (DBW<span class="bolditalic">n</span>)"</a> and <a href="memory.htm#i10221">"Database Buffer Cache"</a></p>
</li>
<li>
<p><a href="consist.htm#i5700">"Introduction to Data Concurrency and Consistency"</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<div id="CNCPT89047" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1655"></a>
<h3 class="sect2">When Oracle Database Performs Instance Recovery</h3>
<p>Whether instance recovery is required depends on the state of the redo threads. A redo thread is marked open in the control file when a database instance opens in read/write mode, and is marked closed when the instance is shut down consistently. If redo threads are marked open in the control file, but no live instances hold the thread enqueues corresponding to these threads, then the database requires instance recovery.</p>
<p>Oracle Database performs instance recovery automatically in the following situations:</p>
<ul>
<li>
<p>The database opens for the first time after the failure of a single-instance database or all instances of an Oracle RAC database. This form of instance recovery is also called <span class="bold">crash recovery</span>. Oracle Database recovers the online redo threads of the terminated instances together.</p>
</li>
<li>
<p>Some but not all instances of an Oracle RAC database fail. Instance recovery is performed automatically by a surviving instance in the configuration.</p>
</li>
</ul>
<p>The SMON background process performs instance recovery, applying online redo automatically. No user intervention is required.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="process.htm#BABJAIBD">"System Monitor Process (SMON)"</a></p>
</li>
<li>
<p><a class="olink RACAD063" href="../../rac.112/e41960/backup.htm#RACAD063"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> to learn about instance recovery in an Oracle RAC database</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABHBGDG"></a>
<div id="CNCPT89048" class="sect2">
<h3 class="sect2">Importance of Checkpoints for Instance Recovery</h3>
<p>Instance recovery uses checkpoints to determine which changes must be applied to the data files. The checkpoint position guarantees that every committed change with an SCN <span class="italic">lower than</span> the checkpoint SCN is saved to the data files.</p>
<p><a href="#BABFHDCH">Figure 13-5</a> depicts the redo thread in the online redo log.</p>
<div id="CNCPT89049" class="figure">
<p class="titleinfigure"><a id="BABFHDCH"></a>Figure 13-5 Checkpoint Position in Online Redo Log</p>
<img width="501" height="258" src="img/cncpt282.gif" alt="Description of Figure 13-5 follows" /><br />
<a id="sthref1656" href="img_text/cncpt282.htm">Description of "Figure 13-5 Checkpoint Position in Online Redo Log"</a><br />
<br /></div>
<!-- class="figure" -->
<p>During instance recovery, the database must apply the changes that occur between the checkpoint position and the end of the redo thread. As shown in <a href="#BABFHDCH">Figure 13-5</a>, some changes may already have been written to the data files. However, only changes with SCNs lower than the checkpoint position are <span class="italic">guaranteed</span> to be on disk.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink PFGRF13014" href="../../server.112/e41573/instance_tune.htm#PFGRF13014"><span class="italic">Oracle Database Performance Tuning Guide</span></a> to learn how to limit instance recovery time</div>
</div>
<!-- class="sect2" -->
<a id="i1017071"></a>
<div id="CNCPT89050" class="sect2">
<h3 class="sect2">Instance Recovery Phases</h3>
<p>The first phase of instance recovery is called <a href="glossary.htm#CBABFIHC"><span class="xrefglossterm">cache recovery</span></a> or <span class="bold">rolling forward</span>, and involves reapplying all of the changes recorded in the online redo log to the data files. Because rollback data is recorded in the online redo log, rolling forward also regenerates the corresponding undo segments.</p>
<p>Rolling forward proceeds through as many online redo log files as necessary to bring the database forward in time. After rolling forward, the data blocks contain all committed changes recorded in the online redo log files. These files could also contain uncommitted changes that were either saved to the data files before the failure, or were recorded in the online redo log and introduced during cache recovery.</p>
<p><a id="sthref1657"></a><a id="sthref1658"></a>After the roll forward, any changes that were not committed must be undone. Oracle Database uses the <a id="sthref1659"></a>checkpoint position, which guarantees that every committed change with an SCN lower than the checkpoint SCN is saved on disk. Oracle Database applies undo blocks to roll back uncommitted changes in data blocks that were written before the failure or introduced during cache recovery. This phase is called <span class="bold">rolling back</span> or <a href="glossary.htm#CBAHJEBI"><span class="xrefglossterm">transaction recovery</span></a>.</p>
<p><a href="#BABBBFFG">Figure 13-6</a> illustrates rolling forward and rolling back, the two steps necessary to recover from database instance failure.</p>
<div id="CNCPT89051" class="figure">
<p class="titleinfigure"><a id="BABBBFFG"></a>Figure 13-6 Basic Instance Recovery Steps: Rolling Forward and Rolling Back</p>
<img width="657" height="390" src="img/cncpt196.gif" alt="Description of Figure 13-6 follows" /><br />
<a id="sthref1660" href="img_text/cncpt196.htm">Description of "Figure 13-6 Basic Instance Recovery Steps: Rolling Forward and Rolling Back"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Oracle Database can roll back multiple transactions simultaneously as needed.<a id="sthref1661"></a><a id="sthref1662"></a> All transactions that were active at the time of failure are marked as terminated. <a id="sthref1663"></a>Instead of waiting for the SMON process to roll back terminated transactions, new transactions can roll back individual blocks themselves to obtain the required data.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="logical.htm#CHDGJJEJ">"Undo Segments"</a> to learn more about undo data</p>
</li>
<li>
<p><a class="olink PFGRF13010" href="../../server.112/e41573/instance_tune.htm#PFGRF13010"><span class="italic">Oracle Database Performance Tuning Guide</span></a> for a discussion of instance recovery mechanics and tuning</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i9633"></a>
<div id="CNCPT1290" class="sect1">
<h2 class="sect1">Overview of Parameter Files</h2>
<p><a id="sthref1664"></a><a id="sthref1665"></a><a id="sthref1666"></a><a id="sthref1667"></a><a id="sthref1668"></a>To start a database instance, Oracle Database must read either a <span class="bold">server parameter file</span>, which is recommended, or a <span class="bold">text initialization parameter file</span>, which is a legacy implementation. These files contain a list of configuration parameters.</p>
<p>To create a database manually, you must start an instance with a parameter file and then issue a <code dir="ltr">CREATE DATABASE</code> command. Thus, the instance and parameter file can exist even when the database itself does not exist.</p>
<div id="CNCPT89052" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1669"></a>
<h3 class="sect2">Initialization Parameters</h3>
<p><span class="bold">Initialization parameters</span> are configuration parameters that affect the basic operation of an instance. The instance reads initialization parameters from a file at startup.</p>
<p><a id="sthref1670"></a>Oracle Database provides many <span class="bold">initialization parameters</span> to optimize its operation in diverse environments. Only a few of these parameters must be explicitly set because the default values are adequate in most cases.</p>
<div id="CNCPT89053" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1671"></a>
<h4 class="sect3">Functional Groups of Initialization Parameters</h4>
<p>Most initialization parameters belong to one of the following functional groups:</p>
<ul>
<li>
<p>Parameters that name entities such as files or directories</p>
</li>
<li>
<p>Parameters that set limits for a process, database resource, or the database itself</p>
</li>
<li>
<p><a id="sthref1672"></a>Parameters that affect capacity, such as the size of the SGA (these parameters are called <span class="bold">variable parameters</span>)</p>
</li>
</ul>
<p>Variable parameters are of particular interest to database administrators because they can use these parameters to improve database performance.</p>
</div>
<!-- class="sect3" -->
<div id="CNCPT89054" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1673"></a>
<h4 class="sect3">Basic and Advanced Initialization Parameters</h4>
<p>Initialization parameters are divided into two groups: basic and advanced. In most cases, you must set and tune only the approximately 30 basic parameters to obtain reasonable performance. The basic parameters set characteristics such as the database name, locations of the control files, database block size, and undo tablespace.</p>
<p>In rare situations, modification to the advanced parameters may be required for optimal performance. The advanced parameters enable expert DBAs to adapt the behavior of the Oracle Database to meet unique requirements.</p>
<p>Oracle Database provides values in the starter initialization parameter file provided with your database software, or as created for you by the Database Configuration Assistant (see <a href="cncptdba.htm#CHDIJHGG">"Tools for Database Installation and Configuration"</a>). You can edit these Oracle-supplied initialization parameters and add others, depending on your configuration and how you plan to tune the database. For relevant initialization parameters not included in the parameter file, Oracle Database supplies defaults.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMQS053" href="../../server.112/e10897/instance.htm#ADMQS053"><span class="italic">Oracle Database 2 Day DBA</span></a> and <a class="olink ADMIN12541" href="../../server.112/e25494/create.htm#ADMIN12541"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to specify initialization parameters</p>
</li>
<li>
<p><a class="olink REFRN001" href="../../server.112/e40402/initparams_part.htm#REFRN001"><span class="italic">Oracle Database Reference</span></a> for an explanation of the types of initialization parameters</p>
</li>
<li>
<p><a class="olink REFRN30176" href="../../server.112/e40402/dynviews_2087.htm#REFRN30176"><span class="italic">Oracle Database Reference</span></a> for a description of <code dir="ltr">V$PARAMETER</code> and <a class="olink SQPUG123" href="../../server.112/e16604/ch_twelve040.htm#SQPUG123"><span class="italic">SQL*Plus User's Guide and Reference</span></a> for <code dir="ltr">SHOW PARAMETER</code> syntax</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="CNCPT89055" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1674"></a>
<h3 class="sect2">Server Parameter Files</h3>
<p>A <span class="bold">server parameter file</span> is a repository for initialization parameters that is managed by Oracle Database. A server parameter file has the following key characteristics:</p>
<ul>
<li>
<p>Only one server parameter file exists for a database. This file must reside on the database host.</p>
</li>
<li>
<p>The server parameter file is written to and read by only by Oracle Database, not by client applications.</p>
</li>
<li>
<p>The server parameter file is binary and cannot be modified by a text editor.</p>
</li>
<li>
<p>Initialization parameters stored in the server parameter file are persistent. Any changes made to the parameters while a database instance is running can persist across instance shutdown and startup.</p>
</li>
</ul>
<p>A server parameter file eliminates the need to maintain multiple text initialization parameter files for client applications. A server parameter file is initially built from a text initialization parameter file using the <code dir="ltr">CREATE SPFILE</code> statement. It can also be created directly by the Database Configuration Assistant.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11115" href="../../server.112/e25494/create.htm#ADMIN11115"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn more about server parameter files</p>
</li>
<li>
<p><a class="olink SQLRF01315" href="../../server.112/e41084/statements_6016.htm#SQLRF01315"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn about <code dir="ltr">CREATE SPFILE</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<div id="CNCPT89056" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1675"></a>
<h3 class="sect2">Text Initialization Parameter Files</h3>
<p>A <span class="bold">text initialization parameter file</span> is a text file that contains a list of initialization parameters. This type of parameter file, which is a legacy implementation of the parameter file, has the following key characteristics:</p>
<ul>
<li>
<p>When starting up or shutting down a database, the text initialization parameter file must reside on the same host as the client application that connects to the database.</p>
</li>
<li>
<p>A text initialization parameter file is text-based, not binary.</p>
</li>
<li>
<p>Oracle Database can read but not write to the text initialization parameter file. To change the parameter values you must manually alter the file with a text editor.</p>
</li>
<li>
<p>Changes to initialization parameter values by <code dir="ltr">ALTER</code> <code dir="ltr">SYSTEM</code> are only in effect for the current instance. You must manually update the text initialization parameter file and restart the instance for the changes to be known.</p>
</li>
</ul>
<p>The text initialization parameter file contains a series of <code dir="ltr">key=value</code> pairs, one per line. For example, a portion of an initialization parameter file could look as follows:</p>
<pre dir="ltr">
db_name=sample
control_files=/disk1/oradata/sample_cf.dbf
db_block_size=8192
open_cursors=52
undo_management=auto
shared_pool_size=280M
pga_aggregate_target=29M
.
.
.
</pre>
<p>To illustrate the manageability problems that text parameter files can create, assume that you use computers <code dir="ltr">clienta</code> and <code dir="ltr">clientb</code> and must be able to start the database with SQL*Plus on either computer. In this case, two separate text initialization parameter files must exist, one on each computer, as shown in <a href="#BABEEAJB">Figure 13-7</a>. A server parameter file solves the problem of the proliferation of parameter files.</p>
<div id="CNCPT89057" class="figure">
<p class="titleinfigure"><a id="BABEEAJB"></a>Figure 13-7 Multiple Initialization Parameter Files</p>
<img width="404" height="285" src="img/cncpt247.gif" alt="Description of Figure 13-7 follows" /><br />
<a id="sthref1676" href="img_text/cncpt247.htm">Description of "Figure 13-7 Multiple Initialization Parameter Files"</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11099" href="../../server.112/e25494/create.htm#ADMIN11099"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn more about text initialization parameter files</p>
</li>
<li>
<p><a class="olink SQLRF01308" href="../../server.112/e41084/statements_6008.htm#SQLRF01308"><span class="italic">Oracle Database SQL Language Reference</span></a> to learn about <code dir="ltr">CREATE PFILE</code></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="BABIAGJB"></a>
<div id="CNCPT1292" class="sect2">
<h3 class="sect2">Modification of Initialization Parameter Values</h3>
<p>You can adjust initialization parameters to modify the behavior of a database. The classification of parameters as <span class="bold">static</span> or <span class="bold">dynamic</span> determines how they can be modified. <a href="#BABCHDHI">Table 13-3</a> summarizes the differences.</p>
<div id="CNCPT89058" class="tblruleformal">
<p class="titleintable"><a id="sthref1677"></a><a id="BABCHDHI"></a>Table 13-3 Static and Dynamic Initialization Parameters</p>
<table class="cellalignment1460" title="Static and Dynamic Initialization Parameters" summary="Static and dynamic initialization parameters" dir="ltr">
<thead>
<tr class="cellalignment1449">
<th class="cellalignment1459" id="r1c1-t29">Characteristic</th>
<th class="cellalignment1459" id="r1c2-t29">Static</th>
<th class="cellalignment1459" id="r1c3-t29">Dynamic</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r2c1-t29" headers="r1c1-t29">
<p>Requires modification of the parameter file (text or server)</p>
</td>
<td class="cellalignment1455" headers="r2c1-t29 r1c2-t29">
<p>Yes</p>
</td>
<td class="cellalignment1455" headers="r2c1-t29 r1c3-t29">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r3c1-t29" headers="r1c1-t29">
<p>Requires database instance restart before setting takes affect</p>
</td>
<td class="cellalignment1455" headers="r3c1-t29 r1c2-t29">
<p>Yes</p>
</td>
<td class="cellalignment1455" headers="r3c1-t29 r1c3-t29">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r4c1-t29" headers="r1c1-t29">
<p>Described as "Modifiable" in <a class="olink REFRN00102" href="../../server.112/e40402/initparams004.htm#REFRN00102"><span class="italic">Oracle Database Reference</span></a> initialization parameter entry</p>
</td>
<td class="cellalignment1455" headers="r4c1-t29 r1c2-t29">
<p>No</p>
</td>
<td class="cellalignment1455" headers="r4c1-t29 r1c3-t29">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1449">
<td class="cellalignment1455" id="r5c1-t29" headers="r1c1-t29">
<p>Modifiable only for the database or instance</p>
</td>
<td class="cellalignment1455" headers="r5c1-t29 r1c2-t29">
<p>Yes</p>
</td>
<td class="cellalignment1455" headers="r5c1-t29 r1c3-t29">
<p>No</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p>Static parameters include <code dir="ltr">DB_BLOCK_SIZE</code>, <code dir="ltr">DB_NAME</code>, and <code dir="ltr">COMPATIBLE</code>. Dynamic parameters are grouped into <span class="bold">session-level parameters</span>, which affect only the current user session, and <span class="bold">system-level parameters</span>, which affect the database and all sessions. For example, <code dir="ltr">MEMORY_TARGET</code> is a system-level parameter, while <code dir="ltr">NLS_DATE_FORMAT</code> is a session-level parameter (see <a href="cncptdev.htm#CHDIEABI">"Locale-Specific Settings"</a>).</p>
<p>The <span class="bold">scope</span> of a parameter change depends on when the change takes effect. When an instance has been started with a server parameter file, you can use the <code dir="ltr">ALTER SYSTEM</code> <code dir="ltr">SET</code> statement to change values for system-level parameters as follows:</p>
<ul>
<li>
<p><code dir="ltr">SCOPE=MEMORY</code></p>
<p>Changes apply to the database instance only. The change will not persist if the database is shut down and restarted.</p>
</li>
<li>
<p><code dir="ltr">SCOPE=SPFILE</code></p>
<p>Changes are written to the server parameter file but do not affect the current instance. Thus, the changes do not take effect until the instance is restarted.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You must specify <code dir="ltr">SPFILE</code> when changing the value of a parameter described as not modifiable in <a class="olink REFRN00102" href="../../server.112/e40402/initparams004.htm#REFRN00102"><span class="italic">Oracle Database Reference</span></a>.</div>
</li>
<li>
<p><code dir="ltr">SCOPE=BOTH</code></p>
<p>Changes are written both to memory and to the server parameter file. This is the default scope when the database is using a server parameter file.</p>
</li>
</ul>
<p>The database prints the new value and the old value of an initialization parameter to the alert log. As a preventative measure, the database validates changes of basic parameter to prevent illegal values from being written to the server parameter file.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11119" href="../../server.112/e25494/create.htm#ADMIN11119"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to change initialization parameter settings</p>
</li>
<li>
<p><a class="olink REFRN001" href="../../server.112/e40402/initparams_part.htm#REFRN001"><span class="italic">Oracle Database Reference</span></a> for descriptions of all initialization parameters</p>
</li>
<li>
<p><a class="olink SQLRF00902" href="../../server.112/e41084/statements_2014.htm#SQLRF00902"><span class="italic">Oracle Database SQL Language Reference</span></a> for <code dir="ltr">ALTER SYSTEM</code> syntax and semantics</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BGBCDDCD"></a>
<div id="CNCPT1912" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Overview of Diagnostic Files</h2>
<p>Oracle Database includes a <span class="bold">fault diagnosability infrastructure</span> for preventing, detecting, diagnosing, and resolving database problems. Problems include critical errors such as code bugs, metadata corruption, and customer data corruption.</p>
<p>The goals of the advanced fault diagnosability infrastructure are the following:</p>
<ul>
<li>
<p>Detecting problems proactively</p>
</li>
<li>
<p>Limiting damage and interruptions after a problem is detected</p>
</li>
<li>
<p>Reducing problem diagnostic and resolution time</p>
</li>
<li>
<p>Simplifying customer interaction with Oracle Support</p>
</li>
</ul>
<a id="BABBGCFC"></a>
<div id="CNCPT1913" class="sect2">
<h3 class="sect2">Automatic Diagnostic Repository</h3>
<p><span class="bold">Automatic Diagnostic Repository (ADR)</span> is a file-based repository that stores database diagnostic data such as trace files, the alert log, and Health Monitor reports. Key characteristics of ADR include:</p>
<ul>
<li>
<p>Unified directory structure</p>
</li>
<li>
<p>Consistent diagnostic data formats</p>
</li>
<li>
<p>Unified tool set</p>
</li>
</ul>
<p>The preceding characteristics enable customers and Oracle Support to correlate and analyze diagnostic data across multiple Oracle instances, components, and products.</p>
<p>ADR is located <span class="italic">outside</span> the database, which enables Oracle Database to access and manage ADR when the physical database is unavailable. An instance can create ADR before a database has been created.</p>
<div id="CNCPT89059" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1678"></a>
<h4 class="sect3">Problems and Incidents</h4>
<p>ADR proactively tracks <span class="bold">problems</span>, which are critical errors in the database. Critical errors manifest as internal errors, such as <code dir="ltr">ORA-600</code>, or other severe errors. Each problem has a <span class="bold">problem key</span>, which is a text string that describes the problem.</p>
<p>When a problem occurs multiple times, ADR creates a time-stamped <span class="bold">incident</span> for each occurrence. An incident is uniquely identified by a numeric <span class="bold">incident ID</span>. When an incident occurs, ADR sends an <span class="bold">incident alert</span> to Enterprise Manager. Diagnosis and resolution of a critical error usually starts with an incident alert.</p>
<p>Because a problem could generate many incidents in a short time, ADR applies flood control to incident generation after certain thresholds are reached. A <span class="bold">flood-controlled incident</span> generates an alert log entry, but does not generate incident dumps. In this way, ADR informs you that a critical error is ongoing without overloading the system with diagnostic data.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN11257" href="../../server.112/e25494/diag.htm#ADMIN11257"><span class="italic">Oracle Database Administrator's Guide</span></a> for detailed information about the fault diagnosability infrastructure</div>
</div>
<!-- class="sect3" -->
<a id="BABFFAAE"></a>
<div id="CNCPT89060" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3">ADR Structure</h4>
<p>The <span class="bold">ADR base</span> is the ADR root directory. The ADR base can contain multiple ADR homes, where each <span class="bold">ADR home</span> is the root directory for all diagnostic data&mdash;traces, dumps, the alert log, and so on&mdash;for an instance of an Oracle product or component. For example, in an Oracle RAC environment with shared storage and ASM, each database instance and each ASM instance has its own ADR home.</p>
<p><a href="#BABBCEEE">Figure 13-8</a> illustrates the ADR directory hierarchy for a database instance. Other ADR homes for other Oracle products or components, such as ASM or Oracle Net Services, can exist within this hierarchy, under the same ADR base.</p>
<div id="CNCPT89061" class="figure">
<p class="titleinfigure"><a id="BABBCEEE"></a>Figure 13-8 ADR Directory Structure for an Oracle Database Instance</p>
<img width="404" height="332" src="img/admin077.gif" alt="Description of Figure 13-8 follows" /><br />
<a id="sthref1679" href="img_text/admin077.htm">Description of "Figure 13-8 ADR Directory Structure for an Oracle Database Instance"</a><br />
<br /></div>
<!-- class="figure" -->
<p>As the following Linux example shows, when you start an instance with a unique SID and database name <span class="italic">before</span> creating a database, Oracle Database creates ADR by default as a directory structure in the host file system. The SID and database name form part of the path name for files in the ADR Home.</p>
<div id="CNCPT89062" class="example">
<p class="titleinexample"><a id="BABGCIDC"></a>Example 13-1 Creation of ADR</p>
<pre dir="ltr">
% setenv ORACLE_SID osi
% echo "DB_NAME=dbn" &gt; init.ora
% sqlplus / as sysdba
.
.
. 
Connected to an idle instance.
 
SQL&gt; STARTUP NOMOUNT PFILE="./init.ora"
ORACLE instance started.
 
Total System Global Area  146472960 bytes
Fixed Size                  1317424 bytes
Variable Size              92276176 bytes
Database Buffers           50331648 bytes
Redo Buffers                2547712 bytes
 
SQL&gt; SELECT NAME, VALUE FROM V$DIAG_INFO;
 
NAME                  VALUE
--------------------- --------------------------------------------------
Diag Enabled          TRUE 
ADR Base              /u01/oracle/log
ADR Home              /u01/oracle/log/diag/rdbms/dbn/osi
Diag Trace            /u01/oracle/log/diag/rdbms/dbn/osi/trace
Diag Alert            /u01/oracle/log/diag/rdbms/dbn/osi/alert
Diag Incident         /u01/oracle/log/diag/rdbms/dbn/osi/incident
Diag Cdump            /u01/oracle/log/diag/rdbms/dbn/osi/cdump
Health Monitor        /u01/oracle/log/diag/rdbms/dbn/osi/hm
Default Trace File    /u01/oracle/log/diag/rdbms/dbn/osi/trace/osi_ora_10533.trc 
Active Problem Count  0
Active Incident Count 0
</pre></div>
<!-- class="example" -->
<p>The following sections describe the contents of ADR.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="CNCPT89063" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref1680"></a>
<h3 class="sect2">Alert Log</h3>
<p><a id="sthref1681"></a>Each database has an <span class="bold">alert log</span>, which is an XML file containing a chronological log of database messages and errors. The alert log contents include the following:</p>
<ul>
<li>
<p>All internal errors (<code dir="ltr">ORA-600</code>), block corruption errors (<code dir="ltr">ORA-1578</code>), and <a href="glossary.htm#CHDIHIAG"><span class="xrefglossterm">deadlock</span></a> errors (<code dir="ltr">ORA-60</code>)</p>
</li>
<li>
<p><a id="sthref1682"></a><a id="sthref1683"></a>Administrative operations such as <a href="glossary.htm#CHDFBCII"><span class="xrefglossterm">DDL</span></a> statements and the SQL*Plus commands <code dir="ltr">STARTUP</code>, <code dir="ltr">SHUTDOWN</code>, <code dir="ltr">ARCHIVE LOG</code>, and <code dir="ltr">RECOVER</code></p>
</li>
<li>
<p>Several messages and errors relating to the functions of shared server and dispatcher processes</p>
</li>
<li>
<p>Errors during the automatic refresh of a materialized view</p>
</li>
</ul>
<p>Oracle Database uses the alert log as an alternative to displaying information in the Enterprise Manager GUI. If an administrative operation is successful, then Oracle Database writes a message to the alert log as "completed" along with a time stamp.</p>
<p>Oracle Database creates an alert log in the <code dir="ltr">alert</code> subdirectory shown in <a href="#BABBCEEE">Figure 13-8</a> when you first start a database instance, even if no database has been created yet. The following example shows a portion of a text-only alert log:</p>
<pre dir="ltr">
Fri Jun 19 17:05:34 2011
Starting ORACLE instance (normal)
LICENSE_MAX_SESSION = 0
LICENSE_SESSIONS_WARNING = 0
Shared memory segment for instance monitoring created
Picked latch-free SCN scheme 2
Autotune of undo retention is turned on.
IMODE=BR
ILAT =12
LICENSE_MAX_USERS = 0
SYS auditing is disabled
Starting up ORACLE RDBMS Version: 11.2.0.0.0.
Using parameter settings in client-side pfile 
.
.
.
System parameters with nondefault values:
  db_name                  = "my_test"
Fri Jun 19 17:05:37 2011
PMON started with pid=2, OS id=10329
Fri Jun 19 17:05:37 2011
VKTM started with pid=3, OS id=10331 at elevated priority
VKTM running at (20)ms precision
Fri Jun 19 17:05:37 2011
DIAG started with pid=4, OS id=10335
</pre>
<p>As shown in <a href="#BABGCIDC">Example 13-1</a>, query <code dir="ltr">V$DIAG_INFO</code> to locate the alert log.</p>
</div>
<!-- class="sect2" -->
<a id="i21745"></a>
<div id="CNCPT1260" class="sect2">
<h3 class="sect2">Trace Files</h3>
<p>A <span class="bold">trace file</span> is an administrative file that contain diagnostic data used to investigate problems. Also, trace files can provide guidance for tuning applications or an instance, as explained in <a href="cncptdba.htm#CHDEECCE">"Performance Diagnostics and Tuning"</a>.</p>
<div id="CNCPT89064" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1684"></a>
<h4 class="sect3">Types of Trace Files</h4>
<p>Each server and background process can periodically write to an associated trace file. The files information on the process environment, status, activities, and errors.</p>
<p>The SQL trace facility also creates trace files, which provide performance information on individual SQL statements. To enable tracing for a client identifier, service, module, action, session, instance, or database, you must execute the appropriate procedures in the <code dir="ltr">DBMS_MONITOR</code> package or use Oracle Enterprise Manager.</p>
<p>A <span class="bold">dump</span> is a special type of trace file. Whereas a trace tends to be continuous output of diagnostic data, a dump is typically a one-time output of diagnostic data in response to an event (such as an incident). When an incident occurs, the database writes one or more dumps to the incident directory created for the incident. Incident dumps also contain the incident number in the file name.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="sqllangu.htm#i18515">"Session Control Statements"</a></p>
</li>
<li>
<p><a class="olink ADMIN11263" href="../../server.112/e25494/diag.htm#ADMIN11263"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn about trace files, dumps, and core files</p>
</li>
<li>
<p><a class="olink PFGRF010" href="../../server.112/e41573/sqltrace.htm#PFGRF010"><span class="italic">Oracle Database Performance Tuning Guide</span></a> to learn about application tracing</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" -->
<div id="CNCPT89065" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref1685"></a>
<h4 class="sect3">Locations of Trace Files</h4>
<p>ADR stores trace files in the <code dir="ltr">trace</code> subdirectory, as shown in <a href="#BABBCEEE">Figure 13-8</a>. Trace file names are platform-dependent and use the extension <code dir="ltr">.trc</code>.</p>
<p>Typically, database background process trace file names contain the Oracle SID, the background process name, and the operating system process number. An example of a trace file for the <code dir="ltr">RECO</code> process is <code dir="ltr">mytest_reco_10355.trc</code>.</p>
<p>Server process trace file names contain the Oracle SID, the string <code dir="ltr">ora</code>, and the operating system process number. An example of a server process trace file name is <code dir="ltr">mytest_ora_10304.trc</code>.</p>
<p>Sometimes trace files have corresponding trace map (<code dir="ltr">.trm</code>) files. These files contain structural information about trace files and are used for searching and navigation.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ADMIN12484" href="../../server.112/e25494/diag.htm#ADMIN12484"><span class="italic">Oracle Database Administrator's Guide</span></a> to learn how to find trace files</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1448">
<tr>
<td class="cellalignment1455">
<table class="cellalignment1453">
<tr>
<td class="cellalignment1452"><a href="part_inarch.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1452"><a href="memory.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1993, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1457">
<table class="cellalignment1451">
<tr>
<td class="cellalignment1452"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1452"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1452"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1452"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1452"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1452"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
