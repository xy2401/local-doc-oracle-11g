<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Data Guard Broker Concepts</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="dcterms.created" content="2015-11-24T12:57:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Guard Broker" />
<meta name="dcterms.identifier" content="E40771-07" />
<meta name="dcterms.isVersionOf" content="DGBKR" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="whatsnew.htm" title="Previous" type="text/html" />
<link rel="Next" href="install.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40771.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">8/20</span> <!-- End Header -->
<div id="DGBKR001" class="chapter"><a id="i1012797"></a>
<h1 class="chapter"><span class="secnum">1</span> Oracle Data Guard Broker Concepts</h1>
<p>This chapter describes the Oracle Data Guard broker, its architecture and components, and how it automates the creation, control, and monitoring of a Data Guard configuration. The following topics are discussed:</p>
<ul>
<li>
<p><a href="#i1019612">Overview of Oracle Data Guard and the Broker</a></p>
</li>
<li>
<p><a href="#i1013106">Benefits of Data Guard Broker</a></p>
</li>
<li>
<p><a href="#i1016462">Data Guard Broker Management Model</a></p>
</li>
<li>
<p><a href="#i1012572">Data Guard Broker Components</a></p>
</li>
<li>
<p><a href="#i1021694">Data Guard Broker User Interfaces</a></p>
</li>
<li>
<p><a href="#i1005854">Data Guard Monitor</a></p>
</li>
</ul>
<p>See <a class="olink SBYDB00100" href="../../server.112/e41134/standby.htm#SBYDB00100"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for the definition of a Data Guard configuration and for complete information about Oracle Data Guard concepts and terminology.</p>
<a id="i1019612"></a>
<div id="DGBKR005" class="sect1">
<h2 class="sect1"><span class="secnum">1.1</span> Overview of Oracle Data Guard and the Broker</h2>
<p>Oracle Data Guard ensures high availability, data protection, and disaster recovery for enterprise data. Data Guard provides a comprehensive set of services that create, maintain, manage, and monitor one or more standby databases to enable production Oracle databases to survive disasters and data corruptions. Data Guard maintains these standby databases as transactionally consistent copies of the primary database. If the primary database becomes unavailable because of a planned or an unplanned outage, Data Guard can switch any standby database to the production role, thus minimizing the downtime associated with the outage. Data Guard can be used with traditional backup, recovery, and cluster techniques, as well as the Flashback Database feature to provide a high level of data protection and data availability.</p>
<div id="DGBKR010" class="sect2"><a id="sthref11"></a>
<h3 class="sect2"><span class="secnum">1.1.1</span> Data Guard Configurations and Broker Configurations</h3>
<p>A <span class="italic">Data Guard configuration</span> consists of one primary database and up to thirty standby databases. The databases in a Data Guard configuration are connected by Oracle Net and may be dispersed geographically. There are no restrictions on where the databases are located as long as they can communicate with each other. For example, you can have a standby database on the same system as the primary database, along with two standby databases on another system.</p>
<p>The Data Guard broker logically groups these primary and standby databases into a <span class="italic"><a id="sthref12"></a>broker configuration</span> that allows the broker to manage and monitor them together as an integrated unit. You can manage a broker configuration using either the Oracle Enterprise Manager graphical user interface or the Data Guard command-line interface.</p>
</div>
<!-- class="sect2" -->
<a id="i1005616"></a>
<div id="DGBKR015" class="sect2">
<h3 class="sect2"><span class="secnum">1.1.2</span> Oracle Data Guard Broker</h3>
<p>The Oracle Data Guard <a id="sthref13"></a>broker is a <a id="sthref14"></a>distributed management framework that automates and centralizes the creation, maintenance, and monitoring of Data Guard configurations. The following list describes some of the operations the broker automates and simplifies:</p>
<ul>
<li>
<p>Creating Data Guard configurations that incorporate a primary database, a new or existing (physical, logical, or snapshot) standby database, redo transport services, and log apply services, where any of the databases could be Oracle Real Application Clusters (Oracle RAC) databases.</p>
</li>
<li>
<p>Adding additional new or existing (physical, snapshot, logical, Oracle RAC or non-Oracle RAC) standby databases to an existing Data Guard configuration, for a total of one primary database, and from 1 to 30 standby databases in the same configuration.</p>
</li>
<li>
<p>Managing an entire Data Guard configuration, including all databases, redo transport services, and log apply services, through a client connection to any database in the configuration.</p>
</li>
<li>
<p>Managing the protection mode for the broker configuration.</p>
</li>
<li>
<p>Invoking switchover or failover with a single command to initiate and control complex role changes across all databases in the configuration.</p>
</li>
<li>
<p>Configuring failover to occur automatically upon loss of the primary database, increasing availability without manual intervention.</p>
</li>
<li>
<p>Monitoring the status of the entire configuration, capturing diagnostic information, reporting statistics such as the Redo Apply rate and the redo generation rate, and detecting problems quickly with centralized monitoring, testing, and performance tools.</p>
</li>
</ul>
<p>You can perform all management operations <a id="sthref15"></a>locally or <a id="sthref16"></a>remotely through the broker's easy-to-use interfaces: <a id="sthref17"></a>the Data Guard management pages in Oracle Enterprise Manager, which is the broker's graphical user interface (GUI), and the <a id="sthref18"></a>Data Guard command-line interface called DGMGRL.</p>
<p>These interfaces simplify the configuration and management of a Data Guard configuration. <a href="#i1005678">Table 1-1</a> provides a comparison of configuration management using the broker's interfaces and using SQL*Plus.</p>
<div id="DGBKR3505" class="tblformalwide">
<p class="titleintable"><a id="sthref19"></a><a id="i1005678"></a>Table 1-1 Configuration Management With and Without the Broker</p>
<table class="cellalignment1489" title="Configuration Management With and Without the Broker" summary="a comparison of configuration management with and without the Data Guard broker" dir="ltr">
<thead>
<tr class="cellalignment1478">
<th class="cellalignment1490" id="r1c1-t2"><br /></th>
<th class="cellalignment1490" id="r1c2-t2">With the Broker</th>
<th class="cellalignment1490" id="r1c3-t2">Without the Broker</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r2c1-t2" headers="r1c1-t2">
<p><span class="bold">General</span></p>
</td>
<td class="cellalignment1484" headers="r2c1-t2 r1c2-t2">
<p>Provides primary and standby database management as one unified configuration.</p>
</td>
<td class="cellalignment1484" headers="r2c1-t2 r1c3-t2">
<p>You must manage the primary and standby databases separately.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r3c1-t2" headers="r1c1-t2">
<p><span class="bold">Standby Database Creation</span></p>
</td>
<td class="cellalignment1484" headers="r3c1-t2 r1c2-t2">
<p>Provides the<a id="sthref20"></a> Enterprise Manager wizards that automate and simplify the steps required to create a configuration with an Oracle database on each site, including creating the standby control file, online redo log files, datafiles, and server parameter files.</p>
</td>
<td class="cellalignment1484" headers="r3c1-t2 r1c3-t2">
<p>You must manually (using RMAN or other tools):</p>
<ul>
<li>
<p>Copy the database files to the standby database system.</p>
</li>
<li>
<p>Create a control file on the standby database system.</p>
</li>
<li>
<p>Create server parameter or initialization parameter files on the standby database system.</p>
</li>
<li>
<p>Copy the primary database password file to the standby database system.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r4c1-t2" headers="r1c1-t2">
<p><span class="bold">Configuration and Management</span></p>
</td>
<td class="cellalignment1484" headers="r4c1-t2 r1c2-t2">
<p>Enables you to configure and manage multiple databases from a single location and automatically unifies all of the databases in the broker configuration.</p>
</td>
<td class="cellalignment1484" headers="r4c1-t2 r1c3-t2">
<p>You must manually:</p>
<ul>
<li>
<p>Set up redo transport services and log apply services on each database in the configuration.</p>
</li>
<li>
<p>Manage the primary database and standby databases individually.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r5c1-t2" headers="r1c1-t2">
<p><span class="bold">Control</span></p>
</td>
<td class="cellalignment1484" headers="r5c1-t2 r1c2-t2">
<ul>
<li>
<p>Automatically sets up redo transport services and log apply services. Simplifies management of these services, especially in an Oracle RAC environment.</p>
</li>
<li>
<p>Simplifies switchovers, failovers, reinstatements, and conversions to and from a snapshot standby database, allowing you to invoke them through a single command.</p>
</li>
<li>
<p>Automates failover by allowing the broker to determine if failover is necessary and to initiate failover to a specified target standby database, with no need for DBA intervention and with either no loss of data or with a configurable amount of data loss.</p>
</li>
<li>
<p>Integrates role changes with Oracle Clusterware.</p>
</li>
<li>
<p>Manageable and monitorable through Enterprise Manager Grid Control</p>
</li>
</ul>
</td>
<td class="cellalignment1484" headers="r5c1-t2 r1c3-t2">
<p>You must manually:</p>
<ul>
<li>
<p>Use multiple SQL statements to manage the database.</p>
</li>
<li>
<p>Coordinate sequences of multiple commands across multiple database sites to execute switchover and failover operations.</p>
</li>
<li>
<p>Coordinate sequences of multiple commands to manage services and instances during role transitions.</p>
</li>
</ul>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r6c1-t2" headers="r1c1-t2">
<p><span class="bold">Monitoring</span></p>
</td>
<td class="cellalignment1484" headers="r6c1-t2 r1c2-t2">
<ul>
<li>
<p>Provides continuous monitoring of the configuration health, database health, and other runtime parameters.</p>
</li>
<li>
<p>Provides a unified updated status and detailed reports.</p>
</li>
<li>
<p>Provides integration with <a id="sthref21"></a><a id="sthref22"></a>Oracle Enterprise Manager events.</p>
</li>
</ul>
</td>
<td class="cellalignment1484" headers="r6c1-t2 r1c3-t2">
<p>You must manually:</p>
<ul>
<li>
<p>Monitor the status and runtime parameters using fixed views on each database&mdash;there is no unified view of status for all of the databases in the configuration.</p>
</li>
<li>
<p>Provide a custom method for monitoring Oracle Enterprise Manager events.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1013106"></a>
<div id="DGBKR020" class="sect1">
<h2 class="sect1"><span class="secnum">1.2</span> B<a id="sthref23"></a><a id="sthref24"></a>enefits of Data Guard Broker</h2>
<p>The broker's interfaces improve usability and centralize management and monitoring of the Data Guard configuration. Available as a feature of the Enterprise Edition and Personal Edition of the Oracle database, the broker is also integrated with the Oracle database and Oracle Enterprise Manager. These broker attributes result in the following benefits:</p>
<p><a id="DGBKR3506"></a><span class="subhead3"><a id="sthref25"></a>Disaster protection: &nbsp;</span>By automating many of the manual tasks required to configure and monitor a Data Guard configuration, the broker enhances the high availability, data protection, and disaster protection capabilities that are inherent in Oracle Data Guard. Access is possible through a client to any system in the Data Guard configuration, eliminating any single point of failure. If the primary database fails, the broker automates the process for any one of the standby databases to replace the primary database and take over production processing. The database availability that Data Guard provides makes it easier to protect your data.</p>
<p><a id="DGBKR3507"></a><span class="subhead3"><a id="sthref26"></a><a id="sthref27"></a><a id="sthref28"></a><a id="sthref29"></a><a id="sthref30"></a><a id="sthref31"></a>Higher availability and scalability with Oracle Real Application Clusters (Oracle RAC) Databases:&nbsp;</span>While Oracle Data Guard broker enhances disaster protection by maintaining transactionally consistent copies of the primary database, Data Guard, configured with Oracle high availability solutions such as Oracle Real Application Clusters (Oracle RAC) databases, further enhances the availability and scalability of any given copy of that database. The <span class="italic">intrasite</span> high availability of an Oracle RAC database complements the <span class="italic">intersite</span> protection that is provided by Data Guard broker.</p>
<p>Consider that you have a cluster system hosting a primary Oracle RAC database comprised of multiple instances sharing access to that database. Further consider that an unplanned failure has occurred. From a Data Guard broker perspective, the primary database remains available as long as at least one instance of the clustered database continues to be available for transporting redo data to the standby databases. <a id="sthref32"></a><a id="sthref33"></a><a id="sthref34"></a>Oracle <a id="sthref35"></a><a id="sthref36"></a><a id="sthref37"></a>Clusterware manages the availability of instances of an Oracle RAC database. It works to rapidly recover failed instances to keep the primary database available. If Oracle Clusterware is unable to recover a failed instance, the broker continues to run automatically with one less instance. If the last instance of the primary database fails, the broker provides a way to fail over to a specified standby database. If the last instance of the primary database fails, and fast-start failover is enabled, the broker can continue to provide high availability by automatically failing over to a pre-determined standby database.</p>
<p>The broker is integrated with Oracle Clusterware so that database role changes occur smoothly and seamlessly. This is especially apparent in the case of a planned role switchover (for example, when a physical standby database is directed to take over the primary role while the former primary database assumes the role of standby). The broker and Oracle Clusterware work together to temporarily suspend service availability on the primary database, accomplish the actual role change for both databases during which Oracle Clusterware works with the broker to properly restart the instances as necessary on the old primary database, and then start services defined on the new primary database. The broker manages the underlying Data Guard configuration and its database roles while Oracle Clusterware manages service availability that depends upon those roles. Applications that rely on Oracle Clusterware for managing service availability will see only a temporary suspension of service as the role change occurs in the Data Guard configuration.</p>
<p>Note that while Oracle Clusterware helps to maintain the availability of the individual instances of an Oracle RAC database, the broker coordinates actions that maintain one or more physical or logical copies of the database across multiple geographically dispersed locations to provide disaster protection. Together, the broker and Oracle Clusterware provide a strong foundation for Oracle's high-availability architecture.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD" href="../../rac.112/e41960/toc.htm"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about Oracle Clusterware</div>
<p><a id="DGBKR3508"></a><span class="subhead3">Automated creation of a Data Guard configuration:&nbsp;</span>The broker helps you to logically define and create a <a id="sthref38"></a>Data Guard configuration consisting of a primary database and (physical or logical, snapshot, Oracle RAC or non-Oracle RAC) standby databases. The broker automatically communicates between the databases in a Data Guard configuration using O<a id="sthref39"></a><a id="sthref40"></a>r<a id="sthref41"></a>acle Net Services. The databases can be local or remote, connected by a LAN or geographically dispersed over a WAN.</p>
<p>Oracle Enterprise Manager provides a wizard that automates the complex tasks involved in creating a broker configuration, including:</p>
<ul>
<li>
<p>Adding an existing standby database, or a new standby database created from existing backups taken through Enterprise Manager</p>
</li>
<li>
<p>Configuring the standby control file, server parameter file, and datafiles</p>
</li>
<li>
<p>Initializing communication with the standby databases</p>
</li>
<li>
<p>Creating standby redo log files</p>
</li>
<li>
<p>Enabling Flashback Database if you plan to use fast-start failover</p>
</li>
</ul>
<p>Although DGMGRL cannot automatically create a new standby database, you can use DGMGRL commands to configure and monitor an existing standby database, including those created using Enterprise Manager.</p>
<p><a id="DGBKR3509"></a><span class="subhead3">Easy configuration of additional standby databases:&nbsp;</span>After you create a Data Guard configuration consisting of a primary and a standby database, you can add up to 29 new or existing, physical, snapshot, or logical standby databases to each Data Guard configuration. Oracle Enterprise Manager provides an Add Standby Database wizard to guide you through the process of adding more databases.</p>
<p><a id="DGBKR3510"></a><span class="subhead3">Simplified, centralized, and extended <a id="sthref42"></a>management:&nbsp;</span>You can issue commands to manage many aspects of the broker configuration. These include:</p>
<ul>
<li>
<p>Simplify the management of all components of the configuration, including the primary and standby databases, redo transport services, and log apply services.</p>
</li>
<li>
<p>Coordinate database state transitions and update database properties dynamically with the broker recording the changes in a broker configuration file that includes profiles of all the databases in the configuration. The broker propagates the changes to all databases in the configuration and their server parameter files.</p>
</li>
<li>
<p>Simplify the control of the configuration <a id="sthref43"></a>protection modes (to <a id="sthref44"></a>maximize protection, to <a id="sthref45"></a>maximize availability, or to <a id="sthref46"></a>maximize performance).</p>
</li>
<li>
<p>Invoke the Enterprise Manager <a id="sthref47"></a>verify operation to ensure that redo transport services and <a id="sthref48"></a>log apply services are configured and functioning properly.</p>
</li>
</ul>
<p><a id="DGBKR3511"></a><span class="subhead3">Simplified <a id="sthref49"></a>switchover and <a id="sthref50"></a>failover operations:&nbsp;</span>The broker simplifies switchovers and failovers by allowing you to invoke them using a single key click in Oracle Enterprise Manager or a single command at the DGMGRL command-line interface (referred to in this documentation as <a id="sthref51"></a><span class="italic">manual</span> failover). For <span class="italic">lights-out administration</span>, you can enable fast-start failover to allow the broker to determine if a failover is necessary and to initiate the failover to a pre-specified target standby database automatically, with no need for DBA intervention. Fast-start failover can be configured to occur with no data loss or with a configurable amount of data loss.</p>
<p>Fast-start failover allows you to increase availability with less need for manual intervention, thereby reducing management costs. Manual failover gives you control over exactly when a failover occurs and to which target standby database. Regardless of the method you choose, the broker coordinates the role transition on all databases in the configuration. Once failover is complete, the broker publishes a Fast Application Notification (FAN) event to notify applications that the new primary is available.</p>
<p>Note that you can use the <code dir="ltr">DBMS_DG</code> PL/SQL package to enable an application to initiate a fast-start failover when it encounters specific conditions. See <a href="dbresource.htm#CHDFAGGJ">Section 4.7.3</a> for more information.</p>
<p>Only one command is required to initiate complex role changes for switchover or failover operations across all databases in the configuration. The broker automates switchover and failover to a specified standby database in the broker configuration. Enterprise Manager enables you to select a new primary database from a set of viable standby databases (enabled and running, with normal status). The DGMGRL <code dir="ltr">SWITCHOVER</code> and <code dir="ltr">FAILOVER</code> commands only require you to specify the target standby database before automatically initiating and completing the many steps in switchover or failover operations across the multiple databases in the configuration.</p>
<p><a id="DGBKR3512"></a><span class="subhead3">Built-in monitoring and alert and control mechanisms:&nbsp;</span>The broker provides built-in validation that monitors the <span class="italic">health</span> of all of the databases in the configuration. While connected to any database in the configuration, you can capture diagnostic information and detect obvious and subtle problems quickly with centralized monitoring, testing, and performance tools. Both Enterprise Manager and DGMGRL retrieve a complete configuration view of the progress of redo transport services on the primary database and the progress of Redo Apply or SQL Apply on the standby database.</p>
<p>The ability to <a id="sthref52"></a>monitor local and remote <a id="sthref53"></a>databases and <a id="sthref54"></a>respond to events is significantly enhanced by the broker's <a id="sthref55"></a>health check mechanism and tight integration with the <a id="sthref56"></a>Oracle Enterprise Manager <a id="sthref57"></a>event management system.</p>
<p><a id="DGBKR3513"></a><span class="subhead3">Transparent to <a id="sthref58"></a>application:&nbsp;</span>Use of the broker is possible for any database because the broker works transparently with applications; no application code changes are required to accommodate a configuration that you manage with the broker.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for a complete description of the discrete steps that comprise the creation of standby databases and the other monitoring and control operations that have been automated or simplified by the broker</div>
</div>
<!-- class="sect1" -->
<a id="i1016462"></a>
<div id="DGBKR025" class="sect1">
<h2 class="sect1"><span class="secnum">1.3</span> Data Guard Broker <a id="sthref59"></a><a id="sthref60"></a>Management Model</h2>
<p>The broker simplifies the management of a Data Guard environment by performing operations on the following logical <a id="sthref61"></a>objects:</p>
<ul>
<li>
<p><a id="sthref62"></a>Configuration of databases</p>
</li>
<li>
<p><a id="sthref63"></a>A single database</p>
</li>
</ul>
<p>The broker supports one or more Data Guard <a id="sthref64"></a>configurations, each of which includes a profile for the primary database and each standby database. A <a id="sthref65"></a>supported broker configuration consists of:</p>
<ul>
<li>
<p>A <span class="bold"><a id="sthref66"></a>configuration</span> object, which is a named collection of database profiles. A database <span class="bold">profile</span> is a description of a database object including its current state, current status, and properties. The configuration object profiles one primary database and its standby databases that can include a mix of physical, snapshot, and logical standby databases. The databases of a given configuration are typically distributed across multiple host systems.</p>
</li>
<li>
<p><a id="sthref67"></a><span class="bold"><a id="sthref68"></a>Da<a id="sthref69"></a>tabase</span> objects, corresponding to primary or standby databases. The broker uses a database object's profile to manage and control the state of a single database on a given system. The database object may be comprised of one or more instance objects if this is an Oracle RAC database.</p>
</li>
<li>
<p><span class="bold"><a id="sthref70"></a>Instance</span> <a id="sthref71"></a>objects. The broker treats a database as a collection of one or more named instances. The broker automatically discovers the instances and associates them with their database.</p>
</li>
</ul>
<p><a href="#i1012702">Figure 1-1</a> shows the <a id="sthref72"></a><a id="sthref73"></a><a id="sthref74"></a>relationship of these objects.</p>
<div id="DGBKR3514" class="figure">
<p class="titleinfigure"><a id="i1012702"></a>Figure 1-1 Relationship of Objects Managed by the Data Guard Broker</p>
<img width="561" height="305" src="img/dgbkr006.gif" alt="Description of Figure 1-1 follows" /><br />
<a id="sthref75" href="img_text/dgbkr006.htm">Description of ''Figure 1-1 Relationship of Objects Managed by the Data Guard Broker''</a><br />
<br /></div>
<!-- class="figure" -->
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
<a href="configure.htm#g1036260">Chapter 3</a>, <a href="dbresource.htm#g1044508">Chapter 4</a>, and <a href="sofo.htm#i1005572">Chapter 5</a> for more information about managing configuration and database objects</div>
</div>
<!-- class="sect1" -->
<a id="i1012572"></a>
<div id="DGBKR030" class="sect1">
<h2 class="sect1"><span class="secnum">1.4</span> Data Guard Broker Components</h2>
<p>The Oracle Data Guard broker consists of the following <a id="sthref76"></a><a id="sthref77"></a><a id="sthref78"></a>components:</p>
<ul>
<li>
<p><a href="#i1005777">Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#i1005821">Data Guard Command-Line Interface (DGMGRL)</a></p>
</li>
<li>
<p><a href="#i1005854">Data Guard Monitor</a></p>
</li>
</ul>
<p>O<a id="sthref79"></a>racle Enterprise Manager and the Data Guard command-line interface (DGMGRL) are the broker client interfaces that help you define and manage a configuration consisting of a collection of primary and standby databases. DGMGRL also includes commands to create an <span class="glossaryterm">observer</span>, a process that facilitates fast-start failover. <a href="#i1021694">Section 1.5</a> describes these interfaces in more detail.</p>
<p>The Data Guard monitor is the broker server-side component that is integrated with the Oracle database. Data Guard monitor is composed of several processes, including the DMON process, and broker configuration files that allow you to control the databases of that configuration, modify their behavior at runtime, monitor the overall health of the configuration, and provide notification of other operational characteristics. <a href="#i1005854">Section 1.6</a> describes the Data Guard monitor in more detail.</p>
<p><a href="#i1021687">Figure 1-2</a> shows these components of the broker.</p>
<div id="DGBKR3515" class="figure">
<p class="titleinfigure"><a id="i1021687"></a>Figure 1-2 Oracle Data Guard Broker</p>
<img width="510" height="113" src="img/dgbkr008.gif" alt="Description of Figure 1-2 follows" /><br />
<a id="sthref80" href="img_text/dgbkr008.htm">Description of ''Figure 1-2 Oracle Data Guard Broker''</a><br />
<br /></div>
<!-- class="figure" --></div>
<!-- class="sect1" -->
<a id="i1021694"></a>
<div id="DGBKR035" class="sect1">
<h2 class="sect1"><span class="secnum">1.5</span> Data Guard <a id="sthref81"></a>Broker User Interfaces</h2>
<p>You can use either of the broker's <a id="sthref82"></a>user interfaces to create a broker configuration and to control and monitor the configuration. The following sections describe the broker's user interfaces:</p>
<ul>
<li>
<p><a href="#i1005777">Oracle Enterprise Manager</a></p>
</li>
<li>
<p><a href="#i1005821">Data Guard Command-Line Interface (DGMGRL)</a></p>
</li>
</ul>
<a id="i1005777"></a>
<div id="DGBKR040" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.1</span> <a id="sthref83"></a>Oracle Enterprise Manager</h3>
<p>Oracle E<a id="sthref84"></a><a id="sthref85"></a>nterprise Manager works with the Data Guard monitor to automate and simplify the <a id="sthref86"></a><a id="sthref87"></a>management of a Data Guard configuration.</p>
<p>With Enterprise Manager, the complex operations of <a id="sthref88"></a>creating and managing standby databases are simplified through Data Guard management pages and <a id="sthref89"></a><a id="sthref90"></a>wizards, including:</p>
<ul>
<li>
<p>An <a id="sthref91"></a><a id="sthref92"></a><a id="sthref93"></a>Add Standby Database wizard that helps you to create a broker configuration, if one does not already exist, having a primary database and a local or remote standby database. The wizard can create a physical, snapshot, or logical standby <a id="sthref94"></a>database or import an existing physical, snapshot, or logical (Oracle RAC or non-Oracle RAC) standby database. If the wizard creates a physical, snapshot, or logical standby database, the wizard also automates the creation of the standby control file, server parameter file, online and standby redo log files, and the standby datafiles.</p>
</li>
<li>
<p>A <a id="sthref95"></a>switchover operation that helps you switch roles between the primary database and a standby database.</p>
</li>
<li>
<p>A <a id="sthref96"></a>failover operation that changes one of the <a id="sthref97"></a>standby databases to the role of a primary database.</p>
</li>
<li>
<p><a id="sthref98"></a><a id="sthref99"></a>Performance tools and graphs that help you monitor and tune redo transport services and log apply services.</p>
</li>
<li>
<p><a id="sthref100"></a><a id="sthref101"></a><a id="sthref102"></a>Property pages that allow you to set database properties on any database and, if applicable, the settings are immediately propagated to all other databases and server parameter files in the configuration.</p>
</li>
<li>
<p><a id="sthref103"></a><a id="sthref104"></a>Event reporting through e-mail.</p>
</li>
</ul>
<p>In addition, it makes all <a id="sthref105"></a><a id="sthref106"></a><a id="sthref107"></a>Oracle Net Services configuration changes necessary to support <a id="sthref108"></a>redo transport services and l<a id="sthref109"></a>og apply services.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support note 787461.1 at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code> for information about which versions of Enterprise Manager Grid Control are required to manage the full set of Data Guard features in various Oracle Database releases</div>
</div>
<!-- class="sect2" -->
<a id="i1005821"></a>
<div id="DGBKR045" class="sect2">
<h3 class="sect2"><span class="secnum">1.5.2</span> Data Guard Command-Line Interface (DGMGRL)</h3>
<p>The Data Guard <a id="sthref110"></a>command-line interface (DGMGRL) enables you to control and monitor a Data Guard <a id="sthref111"></a>configuration from the DGMGRL prompt or within scripts. You can perform most of the activities required to manage and <a id="sthref112"></a>monitor the databases in the configuration using DGMGRL commands.</p>
<p><a id="sthref113"></a>DGMGRL also includes commands to create an observer process that continuously monitors the primary and target standby databases and evaluates whether failover is necessary, and then initiates a fast-start failover when conditions warrant.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dgmgrl.htm#g1019606">Chapter 7</a> for complete reference information for the Data Guard command-line interface. <a href="dgmgrl.htm#i77055">Table 7-1</a> provides a summary of DGMGRL commands.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1005854"></a>
<div id="DGBKR050" class="sect1">
<h2 class="sect1"><span class="secnum">1.6</span> <a id="sthref114"></a>Data Guard Monitor</h2>
<p>The configuration, control, and monitoring functions of the broker are implemented by <a id="sthref115"></a>server-side software and configuration files that are maintained for each database that the broker manages. The software is called the Data Guard monitor.</p>
<p>The following sections describe how the Data Guard monitor interacts with the Oracle database and with remote Data Guard monitors to manage the broker configuration.</p>
<a id="i1005861"></a>
<div id="DGBKR055" class="sect2">
<h3 class="sect2"><span class="secnum">1.6.1</span> Data Guard Monitor (<a id="sthref116"></a>DMON) Process</h3>
<p>The <a id="sthref117"></a>Data Guard monitor process (DMON) is an Oracle <a id="sthref118"></a>background process that runs for every database instance that is managed by the broker. When you start the Data Guard broker, a DMON process is created.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="configure.htm#i1005744">Section 3.3</a> for information on starting the broker</div>
<p>Whether you use Oracle Enterprise Manager or DGMGRL to manage a database, the DMON process is the server-side component that interacts with the local database and the DMON processes of the other databases to perform the requested function. The DMON process is also responsible for monitoring the <a id="sthref119"></a><a id="sthref120"></a><a id="sthref121"></a>health of the broker configuration and for ensuring that every database has a consistent description <a id="sthref122"></a><a id="sthref123"></a>of the configuration.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink CNCPT" href="../e40540/toc.htm"><span class="italic">Oracle Database Concepts</span></a> for more information about the memory structures and processes that are used with an Oracle database</div>
<p><a href="#i1005892">Figure 1-3</a> shows the broker's <a id="sthref124"></a><a id="sthref125"></a><a id="sthref126"></a>DMON process as one of several background processes that constitute an instance of the Oracle database. Each database instance shown in the figure has its own DMON process.</p>
<div id="DGBKR3517" class="figure">
<p class="titleinfigure"><a id="i1005892"></a>Figure 1-3 Databases With Broker (DMON) Processes</p>
<img width="584" height="653" src="img/dgbkr003.gif" alt="Description of Figure 1-3 follows" /><br />
<a id="sthref127" href="img_text/dgbkr003.htm">Description of ''Figure 1-3 Databases With Broker (DMON) Processes''</a><br />
<br /></div>
<!-- class="figure" -->
<p>The zigzag arrow in the center of <a href="#i1005892">Figure 1-3</a> represents the <a id="sthref128"></a><a id="sthref129"></a><a id="sthref130"></a>two-way Oracle Net Services communication channel that exists between the DMON processes of two databases in the same broker configuration.</p>
<p>This <a id="sthref131"></a>two-way communication channel is used to pass <a id="sthref132"></a><a id="sthref133"></a>requests between databases and to monitor the <a id="sthref134"></a>health of all of the databases in the broker configuration.</p>
</div>
<!-- class="sect2" -->
<a id="i1013995"></a>
<div id="DGBKR060" class="sect2">
<h3 class="sect2"><span class="secnum">1.6.2</span> Configuration Management<a id="sthref135"></a></h3>
<p>The broker's <a id="sthref136"></a>DMON process persistently maintains profiles about all database objects in the broker configuration in a <a id="sthref137"></a><a id="sthref138"></a><a id="sthref139"></a>binary <span class="bold">configuration file.</span> A copy of this file is maintained by the DMON process for each of the databases that belong to the broker configuration. If it is an Oracle RAC database, each database's copy of the file is shared by all instances of the database.</p>
<p>This configuration file contains profiles that describe the states and properties of the databases in the configuration. For example, the file records the databases that are part of the configuration, the roles and properties of each of the databases, and the state of each database in the configuration.</p>
<p>The configuration data is managed transparently by the DMON process to ensure that the configuration information is kept consistent across all of the databases. The <a id="sthref140"></a>broker uses the data in the configuration file to configure and start the databases, control each database's behavior, and provide information to DGMGRL and Oracle Enterprise Manager.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#i1018825">Section 4.3</a> for more information</div>
<p>Whenever you add databases to a broker configuration, or make a change to an existing database's properties, each DMON process records the new information in its copy of the configuration file.</p>
</div>
<!-- class="sect2" -->
<a id="i1007577"></a>
<div id="DGBKR065" class="sect2">
<h3 class="sect2"><span class="secnum">1.6.3</span> <a id="sthref141"></a>Database <a id="sthref142"></a>Property Management</h3>
<p>Associated with each database<a id="sthref143"></a> are various properties that the DMON process uses to control the database's behavior. The properties are recorded in the configuration file as a part of the database's object profile that is stored there. Many database properties are used to control database initialization parameters related to the Data Guard environment.</p>
<p>To ensure that the broker can update the values of parameters in both the database itself and in the configuration file, you must use a <a id="sthref144"></a><a id="sthref145"></a>server parameter file to control static and dynamic initialization parameters. The use of a server parameter file gives the broker a mechanism that allows it to reconcile property values selected by the database administrator (DBA) when using the broker with any related initialization parameter values recorded in the server parameter file.</p>
<p>When you set values for database properties in the broker configuration, the broker records the change in the configuration file and propagates the change to all of the databases in the Data Guard configuration.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The broker supports both the default and nondefault <a id="sthref146"></a><a id="sthref147"></a>server parameter file filenames. If you use a nondefault server parameter filename, the initialization parameter file must include the complete filename and location of the server parameter file. If this is an Oracle RAC database, there must be one nondefault server parameter file for all instances.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#i1006133">Section 4.3.2</a> for more information</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1477">
<tr>
<td class="cellalignment1484">
<table class="cellalignment1482">
<tr>
<td class="cellalignment1481"><a href="whatsnew.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1481"><a href="install.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1486">
<table class="cellalignment1480">
<tr>
<td class="cellalignment1481"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1481"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1481"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1481"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1481"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1481"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
