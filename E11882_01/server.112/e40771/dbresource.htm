<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Managing Databases</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="dcterms.created" content="2015-11-24T12:57:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Guard Broker" />
<meta name="dcterms.identifier" content="E40771-07" />
<meta name="dcterms.isVersionOf" content="DGBKR" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="configure.htm" title="Previous" type="text/html" />
<link rel="Next" href="sofo.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40771.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/20</span> <!-- End Header -->
<div id="DGBKR135" class="chapter"><a id="g1044508"></a> <a id="i1008539"></a>
<h1 class="chapter"><span class="secnum">4</span> Managing Databases</h1>
<p>This chapter describes managing the states and properties that pertain to the database. It contains the following topics:<a id="sthref251"></a></p>
<ul>
<li>
<p><a href="#i1014810">Database Objects</a></p>
</li>
<li>
<p><a href="#i1014912">Database States</a></p>
</li>
<li>
<p><a href="#i1018825">Database Properties</a></p>
</li>
<li>
<p><a href="#i1025959">Managing Redo Transport Services</a></p>
</li>
<li>
<p><a href="#i1024829">Managing Log Apply Services</a></p>
</li>
<li>
<p><a href="#i1026456">Managing Data Protection Modes</a></p>
</li>
<li>
<p><a href="#CIADAFDH">Managing Fast-Start Failover</a></p>
</li>
<li>
<p><a href="#CHDCIEAJ">Managing Database Conversions</a></p>
</li>
<li>
<p><a href="#i1024834">Database Status</a></p>
</li>
</ul>
<a id="i1014810"></a>
<div id="DGBKR140" class="sect1">
<h2 class="sect1"><span class="secnum">4.1</span> Database Objects</h2>
<p>The broker manages database objects.<a id="sthref252"></a> A database object corresponds to a primary or standby database. The broker uses each object's profile to manage and monitor the state of a single database.</p>
<p>The broker distinguishes between physical, snapshot, and logical standby databases. These databases are configured with profiles having states and properties that are appropriate for their standby types.</p>
</div>
<!-- class="sect1" -->
<a id="i1014912"></a>
<div id="DGBKR145" class="sect1">
<h2 class="sect1"><span class="secnum">4.2</span> D<a id="sthref253"></a><a id="sthref254"></a><a id="sthref255"></a><a id="sthref256"></a>atabase States</h2>
<p>When a configuration is enabled, its databases can be in one of several states that direct the behavior of Data Guard, for example transmitting redo data or applying redo data. <a href="#g1037265">Table 4-1</a> describes the various database states.</p>
<p>Snapshot standby databases are not listed in this table because they do not have states; they only receive redo data.</p>
<div id="DGBKR3530" class="tblruleformal">
<p class="titleintable"><a id="sthref257"></a><a id="g1037265"></a>Table 4-1 Database States and Descriptions</p>
<table class="cellalignment1489" title="Database States and Descriptions" summary="a table describing all of the primary and standby database states" dir="ltr">
<thead>
<tr class="cellalignment1478">
<th class="cellalignment1490" id="r1c1-t2">Database Role</th>
<th class="cellalignment1490" id="r1c2-t2">State Name</th>
<th class="cellalignment1490" id="r1c3-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r2c1-t2" headers="r1c1-t2">
<p>Primary</p>
</td>
<td class="cellalignment1484" headers="r2c1-t2 r1c2-t2">
<p><code dir="ltr"><a id="sthref258"></a>TRANSPORT-ON</code></p>
</td>
<td class="cellalignment1484" headers="r2c1-t2 r1c3-t2">
<p>Redo transport services are set up to transmit redo data to the standby databases when the primary database is open for read/write access.</p>
<p>If this is an Oracle RAC database, all instances open in read/write mode will have redo transport services running.</p>
<p>This is the default state for a primary database when it is enabled for the first time.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r3c1-t2" headers="r1c1-t2">
<p>Primary</p>
</td>
<td class="cellalignment1484" headers="r3c1-t2 r1c2-t2">
<p><code dir="ltr"><a id="sthref259"></a>TRANSPORT-OFF</code></p>
</td>
<td class="cellalignment1484" headers="r3c1-t2 r1c3-t2">
<p>Redo transport services are stopped on the primary database.</p>
<p>If this is an Oracle RAC database, redo transport services are not running on any instances.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r4c1-t2" headers="r1c1-t2">
<p>Physical standby</p>
</td>
<td class="cellalignment1484" headers="r4c1-t2 r1c2-t2">
<p><code dir="ltr"><a id="sthref260"></a>APPLY-ON</code></p>
</td>
<td class="cellalignment1484" headers="r4c1-t2 r1c3-t2">
<p>Redo Apply is started on a physical standby database.</p>
<p>If the standby database is an Oracle RAC database, the broker starts Redo Apply on exactly one standby instance, called the apply instance. If this instance fails, the broker automatically chooses another instance that is either mounted or open read-only. This new instance then becomes the apply instance.</p>
<p>This is the default state for a physical standby database when it is enabled for the first time.</p>
<p>If a license for the Oracle Active Data Guard option has been purchased, a physical standby database can be open while Redo Apply is active. This capability is known as real-time query. See <a class="olink SBYDB00706" href="../../server.112/e41134/manage_ps.htm#SBYDB00706"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more details.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r5c1-t2" headers="r1c1-t2">
<p>Physical standby</p>
</td>
<td class="cellalignment1484" headers="r5c1-t2 r1c2-t2">
<p><code dir="ltr"><a id="sthref261"></a>APPLY-OFF</code></p>
</td>
<td class="cellalignment1484" headers="r5c1-t2 r1c3-t2">
<p>Redo Apply is stopped.</p>
<p>If this is an Oracle RAC database, there is no instance running Apply Services until you change the database state to <code dir="ltr">APPLY-ON</code>.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r6c1-t2" headers="r1c1-t2">
<p>Logical standby</p>
</td>
<td class="cellalignment1484" headers="r6c1-t2 r1c2-t2">
<p><code dir="ltr"><a id="sthref262"></a>APPLY-ON</code></p>
</td>
<td class="cellalignment1484" headers="r6c1-t2 r1c3-t2">
<p>SQL Apply is started on the logical standby database when it is opened and the logical standby database guard is on.</p>
<p>If this is an Oracle RAC database, SQL Apply is running on one instance, the apply instance. If this instance fails, the broker automatically chooses another open instance. This new instance becomes the apply instance.</p>
<p>This is the default state for a logical standby database when it is enabled for the first time.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r7c1-t2" headers="r1c1-t2">
<p>Logical standby</p>
</td>
<td class="cellalignment1484" headers="r7c1-t2 r1c2-t2">
<p><code dir="ltr"><a id="sthref263"></a>APPLY-OFF</code></p>
</td>
<td class="cellalignment1484" headers="r7c1-t2 r1c3-t2">
<p>SQL Apply is stopped. The logical standby database guard is on.</p>
<p>If this is an Oracle RAC database, there is no instance running SQL Apply until you change the state to <code dir="ltr">APPLY-ON</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div id="DGBKR150" class="sect2"><a id="sthref264"></a>
<h3 class="sect2"><span class="secnum">4.2.1</span> <a id="sthref265"></a><a id="sthref266"></a>Database <a id="sthref267"></a><a id="sthref268"></a>State Transitions</h3>
<p>You can use the DGMGRL <code dir="ltr">EDIT DATABASE</code> command to explicitly change the state of a database. For example, the <code dir="ltr">EDIT DATABASE</code> command in the following example changes the state of the <code dir="ltr">North_Sales</code> database to <code dir="ltr">TRANSPORT-OFF</code>.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'North_Sales' SET STATE='TRANSPORT-OFF';
Succeeded.
</pre>
<div class="infoboxnotealso">
<p class="notep1"><span class="bold">See Also</span>:</p>
<a href="dgmgrl.htm#g1019606">Chapter 7</a> for complete information about the <code dir="ltr">EDIT DATABASE</code> command.</div>
<p>The following sections describe in more detail the possible state transitions for primary and standby databases.</p>
<p class="subhead1"><a id="DGBKR3531"></a><a id="sthref269"></a><a id="sthref270"></a>Primary database state transitions</p>
<p>When transitioning the primary database to the <code dir="ltr">TRANSPORT-ON</code> state, the broker sets up redo transport services to all broker-managed standby databases using the redo transport-related properties of the standby databases (see <a href="#i1025959">Section 4.4</a> for the list of all redo transport-related properties). Redo transport services setup is done by setting the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> and <code dir="ltr">LOG_ARCHIVE_DEST_STATE_</code><span class="variable">n</span> initialization parameters on the primary database, and the <code dir="ltr">LOG_ARCHIVE_CONFIG</code> initialization parameter on all databases (primary or standby). If necessary, the broker also sets up the data protection mode of the database to match the protection mode recorded in the broker configuration file. Finally, if the database is open, the broker switches a log for each thread to initiate redo transport services.</p>
<p>When transitioning the primary database to the <code dir="ltr">TRANSPORT-OFF</code> state, the broker turns off redo transport services to all broker-managed standby databases by resetting the <code dir="ltr">LOG_ARCHIVE_DEST_STATE_</code><span class="variable">n</span> initialization parameter. Transmission of redo data to all broker-managed standby databases is stopped. Log files continue to be archived at the primary database.</p>
<p>If the primary database is an Oracle RAC database, the broker configures redo transport services on all primary instances with the exact same settings.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i1025959">Section 4.4</a> for more details on managing redo transport services</div>
<p class="subhead1"><a id="DGBKR3532"></a>Physical <a id="sthref271"></a><a id="sthref272"></a>standby database state transitions</p>
<p>When transitioning a physical standby database to the APPLY-ON state, the broker starts Redo Apply with options specified by the Redo Apply-related properties (see <a href="#i1024829">Section 4.5</a> for the property list). If the standby database is an Oracle RAC database, the broker starts Redo Apply on one standby instance, called the apply instance.</p>
<p>If a license for the Oracle Active Data Guard option has been purchased, a physical standby database can be open while Redo Apply is active. This capability is known as real-time query. See <a class="olink SBYDB00706" href="../../server.112/e41134/manage_ps.htm#SBYDB00706"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more details.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The apply instance must be open before starting Redo Apply if any other instance is open.</div>
<p>When transitioning to the APPLY-OFF state, the broker stops Redo Apply.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
If you perform online database relocation with Oracle RAC One Node on a physical standby, then the new instance is started in the same mode as the currently running instance. Therefore, if the database is mounted on the original instance, then the database will be mounted on the new instance. Likewise, if the database is open on the original instance, then the database will be open on the new instance. This may result in the new instance starting in a mode that does not match the start option recorded with Oracle Clusterware for the database.</div>
<p class="subhead1"><a id="DGBKR3533"></a>Snapshot standby database state transitions</p>
<p>A snapshot standby database does not have states. It only receives redo data.</p>
<p class="subhead1"><a id="DGBKR3534"></a>Logical <a id="sthref273"></a><a id="sthref274"></a>standby database state transitions</p>
<p>When transitioning a logical standby database to the <code dir="ltr">APPLY-ON</code> state, the broker will wait until the database is open, and then enable the database guard to prevent modifications to tables in the logical standby database, and start SQL Apply with options specified by the log apply-related properties. If the logical standby database is an Oracle RAC database, the broker starts SQL Apply on one standby instance, the apply instance.</p>
<p>When transitioning to the <code dir="ltr">APPLY-OFF</code> state, the broker stops SQL Apply.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="#i1024829">Section 4.5</a> for information about managing SQL Apply</p>
</li>
<li>
<p><a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for information about the database guard</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1018825"></a>
<div id="DGBKR155" class="sect1">
<h2 class="sect1"><span class="secnum">4.3</span> D<a id="sthref275"></a>atabase Properties</h2>
<p>There are two types of database properties: monitorable and configurable. Both monitorable and configurable properties can be further divided into properties having database-wide scope or instance-specific scope.</p>
<ul>
<li>
<p><a id="sthref276"></a>M<a id="sthref277"></a>onitorable property values can be viewed only when the associated database object is enabled.</p>
<p>Monitorable properties allow you to view run-time information related to database objects, but you cannot change the values of these properties.</p>
</li>
<li>
<p><a id="sthref278"></a><a id="sthref279"></a><a id="sthref280"></a><a id="sthref281"></a>Configurable property values can be viewed and dynamically updated.</p>
<p>Configurable properties affect the operation or configuration of the broker. You can change the value of these properties using DGMGRL or Enterprise Manager. You can edit properties if the configuration and its databases are enabled or disabled. However, if the database is disabled, the new property value will not take effect until you enable the configuration or database, as appropriate.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbpropref.htm#g1012962">Chapter 8</a> for a detailed list of all database properties</div>
</li>
</ul>
<p>To see these properties, you can use the DGMGRL <code dir="ltr">SHOW</code> command or Edit Properties page in Enterprise Manager. <a href="#CHDEBGGH">Example 4-1</a> uses the <code dir="ltr"><a id="sthref282"></a><a id="sthref283"></a>SHOW DATABASE VERBOSE</code> command to display information about the <code dir="ltr">North_Sales</code> database.</p>
<div id="DGBKR3535" class="example">
<p class="titleinexample"><a id="CHDEBGGH"></a>Example 4-1 Using the SHOW DATABASE VERBOSE Command to Display Properties</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE VERBOSE 'North_Sales';
 
Database - North_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-ON
  Instance(s):
    north_sales1
 
  Properties:
    DGConnectIdentifier             = 'North_Sales.example.com'
    ObserverConnectIdentifier       = ''
    LogXptMode                      = 'sync'
    DelayMins                       = '0'
    Binding                         = 'optional'
    MaxFailure                      = '0'
    MaxConnections                  = '1'
    ReopenSecs                      = '300'
    NetTimeout                      = '30'
    RedoCompression                 = 'DISABLE'
    LogShipping                     = 'ON'
    PreferredApplyInstance          = ''
    ApplyInstanceTimeout            = '0'
    ApplyParallel                   = 'AUTO'
    StandbyFileManagement           = 'AUTO'
    ArchiveLagTarget                = '0'
    LogArchiveMaxProcesses          = '5'
    LogArchiveMinSucceedDest        = '1'
    DbFileNameConvert               = 'dbs/bt, dbs/t'
    LogFileNameConvert              = 'dbs/bt, dbs/t'
    FastStartFailoverTarget         = 'South_Sales'
    InconsistentProperties          = '(monitor)'
    InconsistentLogXptProps         = '(monitor)'
    SendQEntries                    = '(monitor)'
    LogXptStatus                    = '(monitor)'
    RecvQEntries                    = '(monitor)'
    SidName                         = 'north_sales1'
    StaticConnectIdentifier         =
 '(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=North_Sales.example.com)
(PORT=2840))(CONNECT_DATA=(SERVICE_NAME=North_Sales_DGMGRL.example.com)
(INSTANCE_NAME=north_sales1)(SERVER=DEDICATED)))'
    StandbyArchiveLocation          = 'USE_DB_RECOVERY_FILE_DEST'
    AlternateLocation               = ''
    LogArchiveTrace                 = '255'
    LogArchiveFormat                = 'db1r_%d_%t_%s_%R.arc'
    LatestLog                       = '(monitor)'
    TopWaitEvents                   = '(monitor)'
 
Database Status:
SUCCESS
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dgmgrl.htm#g1019606">Chapter 7</a> for complete information about the DGMGRL command-line interface</div>
<a id="i1018943"></a>
<div id="DGBKR160" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.1</span> M<a id="sthref284"></a><a id="sthref285"></a>onitorable (Read-Only) Properties</h3>
<p>Monitorable database properties allow you to <a id="sthref286"></a>view information related to the database, but you cannot change the values of these properties. These properties can be very helpful when you are trying to diagnose problems in the broker configuration. For example, you can view the <code dir="ltr">InconsistentLogXptProps</code> monitorable database property to determine where there is a discrepancy in redo transport services properties between the broker configuration file and the actual value currently used by the database.</p>
<p>You can list all monitorable database properties using the DGMGRL <code dir="ltr">SHOW DATABASE VERBOSE</code> command. Use the <code dir="ltr">SHOW DATABASE</code> command to obtain more details about a particular property. For example, the following shows the <code dir="ltr">InconsistentLogXptProps</code> property:</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'North_Sales' 'InconsistentLogXptProps';

INCONSISTENT LOG TRANSPORT PROPERTIES

 INSTANCE_NAME     STANDBY_NAME  PROPERTY_NAME  MEMORY_VALUE  BROKER_VALUE 
  south_sales1      South_Sales     ReopenSecs           600           300
</pre>
<p>Enterprise Manager displays the information obtained from these properties on the Edit Properties page.</p>
</div>
<!-- class="sect2" -->
<a id="i1006133"></a>
<div id="DGBKR165" class="sect2">
<h3 class="sect2"><span class="secnum">4.3.2</span> <a id="sthref287"></a><a id="sthref288"></a><a id="sthref289"></a><a id="sthref290"></a><a id="sthref291"></a>Co<a id="sthref292"></a>nfigurable (Changeable) Database Properties</h3>
<p>Configurable database properties affect the operation or configuration of the database. When you use DGMGRL or Enterprise Manager to create a primary database object and import existing standby databases into a new broker configuration, the property values are initially imported from the database settings.</p>
<p>You can update many property values when the database is either disabled or enabled. When a new database is added into the configuration, the broker connects to the database and imports initial values for the database properties from the current database settings. For example:</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'North_Sales' 'ArchiveLagTarget';
  ArchiveLagTarget = '0'

DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'ArchiveLagTarget'=1200;
  Property "ArchiveLagTarget" updated

DGMGRL&gt; SHOW DATABASE 'North_Sales' 'ArchiveLagTarget';
  ArchiveLagTarget = '1200'
</pre>
<p>When the configuration is enabled, the broker keeps the database property values in the broker configuration file consistent with the values being used in the database. For those that are related to initialization parameter properties, the broker maintains the consistency among the value in the broker configuration file, the current database value, and the initialization parameter value in the server parameter file, as follows:</p>
<ul>
<li>
<p>F<a id="sthref293"></a>or dynamic parameters, the broker keeps the value of the database parameter consistent in the system global area (SGA) for the instance, in the broker configuration file, and in the server parameter file.</p>
</li>
<li>
<p>F<a id="sthref294"></a>or static parameters and properties, the database parameter value in the system global area (SGA) for the instances may temporarily differ from what is in the broker configuration file and in the server parameter file. Typically, the database value becomes the same as the server parameter file value and the broker configuration file value the next time the database instance is stopped and restarted.</p>
</li>
</ul>
<p>Even when the configuration is disabled, you can update database property values through the broker. The broker retains the property settings (without validating the values) and updates the database initialization parameters in the server parameter file and the settings in memory the next time you enable the broker configuration.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Even though you can change a property value when the configuration is disabled, the change does not take effect on the database unless the configuration is enabled. Also note that some property values can only be changed in the disabled state.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1025959"></a>
<div id="DGBKR170" class="sect1">
<h2 class="sect1"><span class="secnum">4.4</span> Managing Redo Transport Services</h2>
<p>To manage redo transport services, you specify the following set of <a id="sthref295"></a><a id="sthref296"></a>configurable database properties on each standby database:</p>
<ul>
<li>
<p><code dir="ltr">DGConnectIdentifier</code></p>
</li>
<li>
<p><code dir="ltr">AlternateLocation</code></p>
</li>
<li>
<p><code dir="ltr">Binding</code></p>
</li>
<li>
<p><code dir="ltr">LogShipping</code></p>
</li>
<li>
<p><code dir="ltr">LogXptMode</code></p>
</li>
<li>
<p><code dir="ltr">MaxConnections</code></p>
</li>
<li>
<p><code dir="ltr">MaxFailure</code></p>
</li>
<li>
<p><code dir="ltr">NetTimeout</code></p>
</li>
<li>
<p><code dir="ltr">RedoCompression</code></p>
</li>
<li>
<p><code dir="ltr">ReopenSecs</code></p>
</li>
<li>
<p><code dir="ltr">StandbyArchiveLocation</code></p>
</li>
</ul>
<p>You can use these properties to specify how the broker configures redo transport services for the standby database. The actual redo transport setup, such as setting the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter, is carried out by the broker on the primary database (except for the <code dir="ltr">StandbyArchiveLocation</code> property). If changing the property requires that you change the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter attributes, the broker forces a log switch on each thread so that the new setting is adopted immediately by the primary database.</p>
<p>You should also preset these properties on the primary database in preparation for it to be switched over to a standby database.</p>
<div id="DGBKR3396" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref297"></a>
<h3 class="sect2"><span class="secnum">4.4.1</span> Setting Up For Redo Transport</h3>
<p>Redo data is transported to a standby database using Oracle Net. An Oracle Net service name is specified with the <code dir="ltr">SERVICE</code> attribute of the <code dir="ltr">LOG_ARCHIVE_DEST_n</code> initialization parameter and is used to transmit redo data to the standby database. The Oracle Net service name is translated into a connect descriptor that contains the information necessary for connecting to the standby database.</p>
<p>The <code dir="ltr">SERVICE</code> attribute can be set or changed by using the <code dir="ltr">DGConnectIdentifier</code> database property. The <code dir="ltr">DGConnectIdentifier</code> property is set when a database is first added to the configuration. Its initial value is the connect identifier that is specified in the optional <code dir="ltr">CONNECT IDENTIFIER IS</code> clause of the <code dir="ltr">ADD DATABASE</code> command. If that optional clause is not specified, the initial value of the <code dir="ltr">DGConnectIdentifier</code> property is extracted from the <code dir="ltr">SERVICE</code> attribute of the <code dir="ltr">LOG_ARCHIVE_DEST_n</code> initialization parameter whose <code dir="ltr">DB_UNIQUE_NAME</code> attribute matches the <code dir="ltr">DB_UNIQUE_NAME</code> of the database specified in the <code dir="ltr">ADD DATABASE</code> command.</p>
<p>The <code dir="ltr">DGConnectIdentifier</code> property value is also used to set up the <code dir="ltr">FAL_SERVER</code> initialization parameter. If the <code dir="ltr">DGConnectIdentifier</code> property for any database is changed, the <code dir="ltr">SERVICE</code> attribute of the corresponding <code dir="ltr">LOG_ARCHIVE_DEST_n</code> initialization parameter will also be changed. In addition, the <code dir="ltr">FAL_SERVER</code> initialization parameter will also be updated on every enabled standby database in the configuration.</p>
</div>
<!-- class="sect2" -->
<a id="i1029719"></a>
<div id="DGBKR175" class="sect2">
<h3 class="sect2"><span class="secnum">4.4.2</span> Managing Redo Transport Services for Data Protection Modes</h3>
<p><a href="#i1026456">Section 4.6</a> describes how the broker handles data protection modes. As a part of the overall configuration protection mode, you must ensure that redo transport services are also properly set up for the data protection mode that you choose.</p>
<p>You use the <code dir="ltr">LogXptMode</code> database property to set the <code dir="ltr">SYNC</code> or <code dir="ltr">ASYNC</code> mode for redo transport services. See <a href="#g1046794">Table 4-2</a> for additional information about protection modes and redo transport services.</p>
<p>The values for the <code dir="ltr">LogXptMode</code> property are described in the following list:</p>
<p class="subhead2"><a id="DGBKR3536"></a><a id="sthref298"></a><a id="sthref299"></a>SYNC</p>
<p>Configures redo transport services for this standby database using the <code dir="ltr">SYNC</code> and <code dir="ltr">AFFIRM</code> attributes of the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter. This mode, along with standby redo log files, is required for configurations operating in either maximum protection mode or maximum availability mode. This redo transport service enables the highest grade of data protection to the primary database, but also can incur a higher performance impact.</p>
<p class="subhead2"><a id="DGBKR3537"></a><a id="sthref300"></a><a id="sthref301"></a>ASYNC</p>
<p>Configures redo transport services for this standby database using the <code dir="ltr">ASYNC</code> and <code dir="ltr">NOAFFIRM</code> attributes of the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter. This mode, along with standby redo log files, enables a moderate grade of protection to the primary database, and lower performance impact.</p>
</div>
<!-- class="sect2" -->
<div id="DGBKR180" class="sect2"><a id="sthref302"></a>
<h3 class="sect2"><span class="secnum">4.4.3</span> Turning Redo Transport Services On and Off</h3>
<p><a id="sthref303"></a>Turn redo transport services on and off by setting the state of the primary database. Setting the primary database state to <code dir="ltr">TRANSPORT-ON</code> starts redo transport services to the standby databases, and setting the primary database state to <code dir="ltr">TRANSPORT-OFF</code> stops redo transport services to all the standby database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle does not recommend turning off redo transport services to all standby databases. This increases the risk of data loss if the primary database fails.</div>
<p>Turn redo transport services on and off to an individual standby database using the <code dir="ltr">LogShipping</code> database property on the standby database. The <code dir="ltr">LogShipping</code> property accepts values <code dir="ltr">ON</code> and <code dir="ltr">OFF</code>. If you set the <code dir="ltr">LogShipping</code> property to <code dir="ltr">OFF</code> for a standby database, redo transport services to this standby database are turned off, while redo transport services to other databases are not affected. You can set <code dir="ltr">LogShipping</code> to <code dir="ltr">ON</code> to turn back on redo transport services to the standby database.</p>
<p>The relationship between setting the primary database state and setting the <code dir="ltr">LogShipping</code> property is as follows:</p>
<ul>
<li>
<p>If the primary database state is set to <code dir="ltr">TRANSPORT-OFF</code>, redo transport services to all the standby databases are stopped regardless of the <code dir="ltr">LogShipping</code> property values of the individual standby databases.</p>
</li>
<li>
<p>If the primary database state is set to <code dir="ltr">TRANSPORT-ON</code>, redo transport services to each standby database are determined by the <code dir="ltr">LogShipping</code> property of that database.</p>
</li>
</ul>
<p><a href="#i1029225">Example 4-2</a> and <a href="#i1029241">Example 4-3</a> show how to turn off <a id="sthref304"></a>redo transport services in two different scenarios.</p>
<div id="DGBKR3538" class="example">
<p class="titleinexample"><a id="i1029225"></a>Example 4-2 Turn Off Redo Transport Services to All Standby Databases</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'North_Sales' SET STATE='TRANSPORT-OFF';
DGMGRL&gt; SHOW DATABASE 'North_Sales';
 
Database - North_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-OFF
  Instance(s):
    north_sales1
 
Database Status:
SUCCESS
</pre></div>
<!-- class="example" -->
<div id="DGBKR3539" class="example">
<p class="titleinexample"><a id="i1029241"></a>Example 4-3 Turn Off Redo Transport Services to a Specific Standby Database</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogShipping'='OFF';
Property "LogShipping" updated

DGMGRL&gt; SHOW DATABASE 'South_Sales' 'LogShipping';
  LogShipping = 'OFF'
</pre></div>
<!-- class="example" --></div>
<!-- class="sect2" -->
<div id="DGBKR185" class="sect2"><a id="sthref305"></a>
<h3 class="sect2"><span class="secnum">4.4.4</span> Specifying Locations for Archived Redo Log Files</h3>
<p>You can set up locations on the <a id="sthref306"></a>standby database to store the archived redo log files to be used by log apply services on the standby database. This is done by setting the <a id="sthref307"></a><a id="sthref308"></a><a id="sthref309"></a><code dir="ltr">StandbyArchiveLocation</code> and <a id="sthref310"></a><a id="sthref311"></a><code dir="ltr">AlternateLocation</code> database properties on the standby database.</p>
<p><code dir="ltr">StandbyArchiveLocation</code> specifies a standby location where the archived redo log files will be stored. The broker only manages the location to store archived redo log files received from the primary database. For archived redo log files generated locally when the database is either the primary database or a logical standby database, you need to set up local destinations directly through the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter. The broker allows the value of <code dir="ltr">StandbyArchiveLocation</code> to be the same as the location you set up for locally generated logs, in which case the broker sets up the <code dir="ltr">VALID_FOR</code> attribute of the destination appropriately so that it can be used for both the archived redo log files received from the primary database and archived redo log files generated locally.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
On a logical standby database, Oracle recommends that the <code dir="ltr">LOCATION</code> attribute of the <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameter for the local destination be different from the value of either the <code dir="ltr">StandbyArchiveLocation</code> or <code dir="ltr">AlternateLocation</code> property unless you are using a database recovery area.</div>
<p>You can also set up an alternate location to store archived redo log files on the standby using the <code dir="ltr">AlternateLocation</code> property on the standby database. This is useful for avoiding disk capacity problems or disk errors when archiving the online redo log files on the standby database. <code dir="ltr">AlternateLocation</code> specifies a standby location where the archived redo log files will be stored if the location specified by the <code dir="ltr">StandbyArchiveLocation</code> fails. The broker sets up the alternate location properly using the <code dir="ltr">ALTERNATE</code> attribute of the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can use the database recovery area to store archived redo log files on the standby. In such a case, the value of the <code dir="ltr">StandbyArchiveLocation</code> or <code dir="ltr">AlternateLocation</code> properties can be set to <code dir="ltr">USE_DB_RECOVERY_FILE_DEST</code>.</div>
</div>
<!-- class="sect2" -->
<div id="DGBKR195" class="sect2"><a id="sthref312"></a>
<h3 class="sect2"><span class="secnum">4.4.5</span> Other Redo Transport Settings</h3>
<p>You can use the <code dir="ltr">Binding</code>, <code dir="ltr">MaxFailure</code>, <code dir="ltr">MaxConnections</code>, <code dir="ltr">NetTimeout</code>, <code dir="ltr">RedoCompression</code>, and <code dir="ltr">ReopenSecs</code> database properties to tune the performance of <a id="sthref313"></a><a id="sthref314"></a><a id="sthref315"></a>redo transport services and to set up redo transport services failure policies. These properties correspond to attributes on the <code dir="ltr"><a id="sthref316"></a><a id="sthref317"></a>LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter.</p>
<p>When creating a new standby database, the broker sets these properties with default values. When importing an existing standby database, the broker imports existing settings corresponding to these properties if it finds a match between the service string of a current destination and the connect identifier that was specified when the database was added to the configuration. If that fails, it finds a match between the <code dir="ltr">db_unique_name</code> of a current destination and the name that was specified when the database was added to the configuration.</p>
<p>For most cases, the default values or the imported values should be sufficient for normal operations. If for some reason you need to change these property values, you can use DGMGRL commands to set up these properties. Enterprise Manager does not provide an interface for modifying these properties.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbpropref.htm#g1012962">Chapter 8</a> for complete information about these database properties</div>
</div>
<!-- class="sect2" -->
<div id="DGBKR205" class="sect2"><a id="sthref318"></a>
<h3 class="sect2"><span class="secnum">4.4.6</span> Redo Transport Services in an Oracle RAC Database Environment</h3>
<p>If the primary database is an Oracle RAC database, the broker ensures that redo transport services are set up identically on each of the primary database instances. Each instance has the same remote destinations, and for each remote destination, all instances are set up the same in terms of redo transport service, performance related settings, and so on. If an instance has different settings, the broker raises a health check warning on that particular instance</p>
<p>Settings relative to redo transport services are saved in the broker configuration file as properties. When you update a redo transport-related property on a standby database, the corresponding change is also made automatically by the broker to the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter on all of the primary database instances. If a new instance comes up on the primary database, the broker sets up redo transport services for the new instance using the redo transport-related properties of all the standby databases currently being managed by the broker. After the new instance is opened for activity, all archived redo log files generated on this instance will begin to transmit to the standby databases.</p>
<div class="infoboxnotealso">
<p class="notep1">See also:</p>
<a class="olink SBYDB01100" href="../../server.112/e41134/log_arch_dest_param.htm#SBYDB01100"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for additional information about the <code dir="ltr">LOG_ARCHIVE_DEST_</code><span class="variable">n</span> initialization parameter</div>
</div>
<!-- class="sect2" -->
<div id="DGBKR3635" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref319"></a>
<h3 class="sect2"><span class="secnum">4.4.7</span> Transport Lag</h3>
<p>Transport lag is a measure of the degree to which the transport of redo to the standby database lags behind the generation of redo on the primary database.</p>
<p>If there are one or more redo gaps on the standby database, the transport lag is calculated as if no redo has been received after the beginning of the earliest redo gap.</p>
<p>Both Enterprise Manager and the DGMGRL client display the redo transport lag for each managed standby database. Enterprise Manager displays the transport lag on the Data Guard home page. The DGMGRL client displays the transport lag in the <code dir="ltr">SHOW DATABASE</code> output for a standby database. There is no transport lag displayed for a primary database. For example:</p>
<pre dir="ltr">
DGMGRL&gt; show database 'South_Sales';
Database - South_Sales
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  <span class="bold">Transport Lag:   0 seconds</span>
  Apply Lag:       0 seconds
  Real Time Query: OFF
  Instance(s):
  south_sales1
 
Database Status:
SUCCESS
</pre>
<p>The transport lag can help you identify any problems that may exist with the redo transport services.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1024829"></a>
<div id="DGBKR210" class="sect1">
<h2 class="sect1"><span class="secnum">4.5</span> Managing Log Apply Services</h2>
<p>You can manage <a id="sthref320"></a><a id="sthref321"></a>Redo Apply and SQL Apply on physical and logical standby databases through the following log apply-related database properties:</p>
<ul>
<li>
<p>Properties common to Redo Apply and SQL Apply</p>
<ul>
<li>
<p><code dir="ltr">ApplyInstanceTimeout</code></p>
</li>
<li>
<p><code dir="ltr">DelayMins</code></p>
</li>
<li>
<p><code dir="ltr">PreferredApplyInstance</code></p>
</li>
</ul>
</li>
<li>
<p>Properties specific to Redo Apply</p>
<ul>
<li>
<p><code dir="ltr">ApplyParallel</code></p>
</li>
</ul>
</li>
<li>
<p>Properties specific to SQL Apply</p>
<ul>
<li>
<p><code dir="ltr">LsbyASkipTxnCfgPr</code></p>
</li>
<li>
<p><code dir="ltr">LsbyDSkipTxnCfgPr</code></p>
</li>
<li>
<p><code dir="ltr">LsbyASkipCfgPr</code></p>
</li>
<li>
<p><code dir="ltr">LsbyDSkipCfgPr</code></p>
</li>
<li>
<p><code dir="ltr">LsbyASkipErrorCfgPr</code></p>
</li>
<li>
<p><code dir="ltr">LsbyDSkipErrorCfgPr</code></p>
</li>
<li>
<p><code dir="ltr">LsbyMaxEventsRecorded</code></p>
</li>
<li>
<p><code dir="ltr">LsbyPreserveCommitOrder</code></p>
</li>
<li>
<p><code dir="ltr">LsbyRecordSkipErrors</code></p>
</li>
<li>
<p><code dir="ltr">LsbyRecordSkipDdl</code></p>
</li>
<li>
<p><code dir="ltr">LsbyRecordAppliedDdl</code></p>
</li>
<li>
<p><code dir="ltr">LsbyMaxSga</code></p>
</li>
<li>
<p><code dir="ltr">LsbyMaxServers</code></p>
</li>
</ul>
<p>There are some properties related to SQL Apply that, if changed, may require a restart of SQL Apply if the current database state is <code dir="ltr">APPLY-ON</code>. See the information in <a href="dbpropref.htm#g1012962">Chapter 8</a> about properties related to SQL Apply, to determine which ones require SQL Apply to be restarted.</p>
<p>If the current database state is <code dir="ltr">APPLY-OFF</code>, the property changes will take effect the next time the database state is changed to <code dir="ltr">APPLY-ON</code>.</p>
</li>
</ul>
<div id="DGBKR220" class="sect2"><a id="sthref322"></a>
<h3 class="sect2"><span class="secnum">4.5.1</span> Managing Delayed Apply</h3>
<p>You can set up <a id="sthref323"></a><a id="sthref324"></a>Apply Services so that the application of redo to the standby database is delayed. This allows the standby database to lag behind the primary database, and if a user error (for example, dropping a table) occurs during this window of time, the standby database will still contain the correct data that can be transmitted back to the primary database to repair the data.</p>
<p>By default, no delay is configured and the redo data is applied on a standby database as soon as possible. If the standby database has standby redo logs configured, the broker will enable real-time apply. When Redo Apply and SQL Apply apply redo in real time, the redo data is recovered directly from the standby redo log files as they are being filled. This means that the standby database does not have to wait for the log files to be archived before applying redo data from the archived redo log files. This minimizes the transactional lag between the primary and the standby.</p>
<p>Use the <a id="sthref325"></a><a id="sthref326"></a><code dir="ltr">DelayMins</code> database property to specify the number of minutes that log apply services must wait before applying redo data to the standby database. Note that only log apply services on the standby database are delayed. Redo transport services on the primary database are not delayed, thus the primary database data is still well protected by the standby database.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Because the broker automatically enables real-time apply on standby databases, Oracle recommends that you configure all databases to use Flashback Database.</div>
</div>
<!-- class="sect2" -->
<a id="i1029542"></a>
<div id="DGBKR225" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.2</span> Managing Parallel Apply with Redo Apply</h3>
<p>For Redo Apply, you can configure whether multiple <a id="sthref327"></a><a id="sthref328"></a><a id="sthref329"></a><a id="sthref330"></a><a id="sthref331"></a>parallel processes are used to apply redo data received from the primary database by using the <a id="sthref332"></a><a id="sthref333"></a><code dir="ltr">ApplyParallel</code> database property. Parallelism is enabled by default, which means Redo Apply automatically chooses the optimal number of parallel processes based on the number of CPUs in the system. (This is equivalent to setting the <code dir="ltr">ApplyParallel</code> property to <code dir="ltr">AUTO</code>.) You can disable parallelism by setting the <code dir="ltr">ApplyParallel</code> property to <code dir="ltr">NO</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The <code dir="ltr">ApplyParallel</code> database property is not displayed on the Edit Properties page of Enterprise Manager.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
The <code dir="ltr">ApplyParallel</code> property in <a href="dbpropref.htm#i84996">Section 8.3.4, "ApplyParallel"</a></div>
</div>
<!-- class="sect2" -->
<div id="DGBKR230" class="sect2"><a id="sthref334"></a>
<h3 class="sect2"><span class="secnum">4.5.3</span> Allocating Resources to SQL Apply</h3>
<p>You can control how much <a id="sthref335"></a><a id="sthref336"></a>SGA memory is available for <a id="sthref337"></a><a id="sthref338"></a>SQL Apply. This can be set using the <a id="sthref339"></a><a id="sthref340"></a><code dir="ltr">LsbyMaxSga</code> database property.</p>
<p>To control the number of parallel query servers used by SQL Apply, you can use the <code dir="ltr">LsbyMaxServers</code> database property.</p>
<p>You can control the trade off between SQL Apply performance and the commit order of transactions. The <code dir="ltr">LsbyPreserveCommitOrder</code> database property controls whether transactions are committed on the logical standby database in the exact same order in which they were committed on the primary database. Preserving commit order may affect performance.<a id="sthref341"></a><a id="sthref342"></a><a id="sthref343"></a><a id="sthref344"></a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbpropref.htm#i100374">Section 8.3.25, "LsbyMaxSga"</a> and <a href="dbpropref.htm#i88375">Section 8.3.26, "LsbyMaxServers"</a></div>
</div>
<!-- class="sect2" -->
<div id="DGBKR235" class="sect2"><a id="sthref345"></a>
<h3 class="sect2"><span class="secnum">4.5.4</span> Managing SQL Apply Filtering</h3>
<p>One of the benefits of a logical standby database is to allow control of what to apply and what not to apply. This is done by setting up <a id="sthref346"></a><a id="sthref347"></a>SQL Apply filters. The granularity of the filtering ranges from a specific transaction to database objects to a particular class of SQL statement on a particular schema.</p>
<p>To add a SQL Apply filter in Data Guard broker, use the <code dir="ltr">LsbyASkip*</code> database properties (for example, <code dir="ltr">LsbyASkipTxnCfgPr</code> or <code dir="ltr">LsbyASkipCfgPr</code>). To delete a previously added SQL Apply filter, use the <code dir="ltr">LsbyDSkip*</code> database properties (for example, <code dir="ltr">LsbyDSkipTxnCfgPr</code> or <code dir="ltr">LsbyDSkipCfgPr</code>).</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbpropref.htm#g1012962">Chapter 8</a> for information on these properties</div>
</div>
<!-- class="sect2" -->
<div id="DGBKR240" class="sect2"><a id="sthref348"></a>
<h3 class="sect2"><span class="secnum">4.5.5</span> Managing SQL Apply Error Handling</h3>
<p>You can fine-tune <a id="sthref349"></a><a id="sthref350"></a>SQL Apply to handle apply <a id="sthref351"></a><a id="sthref352"></a>errors on a specified set of SQL statements on particular schemas. When such SQL Apply errors are encountered, Data Guard can either skip the error to continue SQL Apply or call a specified stored procedure at the time when the error is encountered.</p>
<p>To add this error handling capability, use the <a id="sthref353"></a><a id="sthref354"></a><code dir="ltr">LsbyASkipErrorCfgPr</code> database property. To delete a previously added error handling specification, use the <a id="sthref355"></a><a id="sthref356"></a><code dir="ltr">LsbyDSkipErrorCfgPr</code> database property.</p>
<p>Changing these properties results in restarting SQL Apply if the current database state is <code dir="ltr">APPLY-ON</code>. If the current database state is <code dir="ltr">APPLY-OFF</code>, the property changes take effect the next time the database state is changed to <code dir="ltr">APPLY-ON</code>.</p>
</div>
<!-- class="sect2" -->
<div id="DGBKR245" class="sect2"><a id="sthref357"></a>
<h3 class="sect2"><span class="secnum">4.5.6</span> Managing the DBA_LOGSTDBY_EVENTS Table</h3>
<p>The <a id="sthref358"></a><a id="sthref359"></a><a id="sthref360"></a><a id="sthref361"></a><a id="sthref362"></a><code dir="ltr">DBA_LOGSTDBY_EVENTS</code> table records important events that affect SQL Apply. Because every logical standby database might have a different interest in the set of events to be recorded in this table, Data Guard provides a means to control the event recording. From the Data Guard broker, you can use the <code dir="ltr">LsbyRecord*</code> database properties (for example, <code dir="ltr">LsbyRecordSkipDdl</code> or <code dir="ltr">LsbyRecordSkipErrors</code>) to control recording of a particular set of events. The value of these properties are either <code dir="ltr">TRUE</code> or <code dir="ltr">FALSE</code>, indicating the turning on or off of the event recording.</p>
</div>
<!-- class="sect2" -->
<a id="i1029540"></a>
<div id="DGBKR250" class="sect2">
<h3 class="sect2"><span class="secnum">4.5.7</span> Apply Services in an Oracle RAC Database Environment</h3>
<p>If a standby database is <a id="sthref363"></a><a id="sthref364"></a>an Oracle RAC database, only one instance of the Oracle RAC database can have log apply services running at any time. This instance is called the <a id="sthref365"></a><a id="sthref366"></a><span class="bold">apply instance</span>. If the apply instance fails, the broker automatically moves log apply services to a different instance; this is called <a id="sthref367"></a><a id="sthref368"></a><span class="bold">apply instance failover</span>.</p>
<div id="DGBKR255" class="sect3"><a id="sthref369"></a>
<h4 class="sect3"><span class="secnum">4.5.7.1</span> Selecting the Apply Instance</h4>
<div class="infobox-note">
<p class="notep1">Note:</p>
The information in this section is not applicable to snapshot standby databases.</div>
<p>If you have no <a id="sthref370"></a><a id="sthref371"></a><a id="sthref372"></a><a id="sthref373"></a>preference which instance is to be the apply instance in an Oracle RAC standby database, the broker randomly picks an apply instance. If you want to select a particular instance as the apply instance, there are two methods to do this.</p>
<ul>
<li>
<p>The first method is to pick an apply instance before there is an apply instance running in the Oracle RAC standby database. To do so, set the value of the <a id="sthref374"></a><a id="sthref375"></a><a id="sthref376"></a><code dir="ltr">PreferredApplyInstance</code> database property to the name of the instance (see the <code dir="ltr">SidName</code> property) you prefer to be the apply instance. The broker starts log apply services on the instance specified by the <code dir="ltr">PreferredApplyInstance</code> property when no apply instance is yet selected in the Oracle RAC standby database. This could be the case before you enable the standby database for the first time, or if the apply instance just failed and the broker is about to do an apply instance failover, or if the Oracle RAC database is currently the primary and you want to specify its apply instance in preparation for a switchover. Once the apply instance is selected and, as long as the apply instance is still running, the broker disregards the value of the <code dir="ltr">PreferredApplyInstance</code> property even if you change it.</p>
</li>
<li>
<p>The second method is to change the apply instance when the apply instance is already selected and is running. To change the apply instance, issue the DGMGRL <a id="sthref377"></a><a id="sthref378"></a><code dir="ltr">SET STATE</code> command to set the standby database state to <code dir="ltr">APPLY-ON</code>, with a specific apply instance argument. The <code dir="ltr">SET STATE</code> command will update the <code dir="ltr">PreferredApplyInstance</code> property to the new apply instance value, and then move log apply services to the new instance. For example, use DGMGRL <code dir="ltr">SHOW</code> command to show the available instances for the standby database, then issue the <code dir="ltr">EDIT DATABASE</code> command to move log apply services to the new instance:</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'South_Sales'
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds
  Apply Lag:       0 seconds
  Real Time Query: OFF
  Instance(s):
    south_sales1 (apply instance)
    south_sales2
 
Database Status:
SUCCESS
</pre>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET STATE='APPLY-ON' WITH APPLY INSTANCE='south_sales2';
Succeeded.

DGMGRL&gt; SHOW DATABASE 'South_Sales' 'PreferredApplyInstance';
  PreferredApplyInstance = 'south_sales2'
</pre>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'South_Sales'
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds
  Apply Lag:       0 seconds
  Real Time Query: OFF
  Instance(s):
    south_sales1
    south_sales2 (apply instance)
 
Database Status:
SUCCESS
</pre></li>
</ul>
<p>Ensure that the new apply instance is running when the command is issued. Otherwise, the apply instance remains the same.</p>
<p>Once the apply instance is selected, the broker keeps apply instance information in the broker configuration file so that even if the standby database is shut down and restarted, the broker still selects the same instance to start log apply services. The apply instance remains unchanged until changed by the user or it fails for any reason and the broker decides to do an apply instance failover.</p>
</div>
<!-- class="sect3" -->
<div id="DGBKR260" class="sect3"><a id="sthref379"></a>
<h4 class="sect3"><span class="secnum">4.5.7.2</span> Apply Instance Failover</h4>
<p>To tolerate a failure of the apply instance, the broker leverages the availability of the Oracle RAC standby database by automatically failing over log apply services to a different standby instance. The apply instance failover capability provided by the broker enhances data protection.</p>
<p>To set up apply instance failover, set the <code dir="ltr">ApplyInstanceTimeout</code> database property to specify the time period that the broker will wait after detecting an apply instance failure and before initiating an apply instance failover. To select an appropriate timeout value, you need to consider:</p>
<ul>
<li>
<p>If there is another mechanism in the cluster that will try to recover the failed apply instance.</p>
</li>
<li>
<p>How long your business can tolerate not applying redo data on the standby database.</p>
</li>
<li>
<p>The overhead associated with moving the log apply services to a different instance. The overhead may include retransmitting, from the primary database, all log files accumulated on the failed apply instance that have not been applied if those log files are not saved in a shared file system that can be accessed from other standby instances.</p>
</li>
</ul>
<p>The broker default value of the <a id="sthref380"></a><a id="sthref381"></a><code dir="ltr">ApplyInstanceTimeout</code> property is 0 seconds, indicating that apply instance failover should occur immediately upon detection of the failure of the current apply instance.</p>
<p>After the broker initiates an apply instance failover, the broker selects a new apply instance according to the following rule: if the <code dir="ltr">PreferredApplyInstance</code> property indicates an instance that is currently running, select it as the new apply instance; otherwise pick a random instance that is currently running to be the new apply instance.</p>
<p>In addition, if the physical standby database was operating in real-time query mode when the apply instance failed, then after Oracle recovery cleanup is completed, the broker opens any instances that had been automatically closed. If the failed apply instance was the only instance open, then the instance chosen as the new apply instance is opened before starting apply services so that real-time query is once again in effect.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink SBYDB00707" href="../../server.112/e41134/manage_ps.htm#SBYDB00707"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about real-time query mode</p>
</li>
<li>
<p>The My Oracle Support note 1357597.1 at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code> for additional information about apply instance failures in an Active Data Guard Oracle RAC standby</p>
</li>
</ul>
</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<div id="DGBKR3636" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref382"></a>
<h3 class="sect2"><span class="secnum">4.5.8</span> Apply Lag</h3>
<p>Apply lag is a measure of the degree to which the data in a standby database lags behind the data in the primary database, due to delays in propagating and applying redo to the standby database.</p>
<p>Both Enterprise Manager and the DGMGRL client display the apply lag for each managed standby database. Enterprise Manager displays the apply lag on the Data Guard home page. The DGMGRL client displays the apply lag in the <code dir="ltr">SHOW DATABASE</code> output for a standby database. There is no apply lag displayed for a primary database. For example:</p>
<pre dir="ltr">
DGMGRL&gt; show database 'South_Sales';
Database - South_Sales
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds
 <span class="bold"> Apply Lag:       0 seconds</span>
  Real Time Query: OFF
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS
</pre>
<p>The apply lag can help you identify any problems that may exist with both the redo transport services and the log apply services.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i1026456"></a>
<div id="DGBKR265" class="sect1">
<h2 class="sect1"><span class="secnum">4.6</span> Managing Data P<a id="sthref383"></a>rotection Modes</h2>
<p>The broker can simplify the process of setting up your configuration for any of the different grades of <a id="sthref384"></a>data protection: maximum protection, maximum availability, or maximum performance.</p>
<p>This section contains the following topics to help you configure the proper protection for your configuration:</p>
<ul>
<li>
<p><a href="#i1026470">Section 4.6.1, "Setting the Protection Mode for Your Configuration"</a></p>
</li>
<li>
<p><a href="#i1026543">Section 4.6.2, "How the Protection Modes Influence Broker Operations"</a></p>
</li>
</ul>
<a id="i1026470"></a>
<div id="DGBKR270" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.1</span> Setting the Protection Mode for Your Configuration</h3>
<p>To set t<a id="sthref385"></a><a id="sthref386"></a>he protection mode, perform the following steps:</p>
<dl>
<dd><a id="DGBKR3650"></a><a id="sthref387"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Determine which data protection mode you want to use.</dt>
<dd>
<p>Each data protection mode provides a different balance of data protection, data availability, and database performance. To select the data protection mode that meets the needs of your business, carefully consider your data protection requirements and the performance expectations of your users.</p>
</dd>
</dl>
<div class="infobox-note">
<p class="notep1">Note:</p>
The maximum protection and maximum availability modes cannot be used if the only standby database in a configuration is a snapshot standby.</div>
<p><a id="DGBKR280"></a><span class="subhead3"><a id="sthref388"></a>Maximum Availability&nbsp;</span>This protection mode provides the highest level of data protection that is possible without compromising the availability of a primary database. Transactions do not commit until all redo data needed to recover those transactions has been written to the online redo log and to the standby redo log on at least one synchronized standby database. If the primary database cannot write its redo stream to at least one synchronized standby database, it operates as if it were in maximum performance mode to preserve primary database availability until it is again able to write its redo stream to a synchronized standby database.</p>
<p>This mode ensures that no data loss will occur if the primary database fails, but only if a second fault does not prevent a complete set of redo data from being sent from the primary database to at least one standby database.</p>
<p>You can enable fast-start failover if the protection mode is maximum availability.</p>
<p><a id="DGBKR285"></a><span class="subhead3"><a id="sthref389"></a>Maximum Performance&nbsp;</span>This protection mode provides the highest level of data protection that is possible without affecting the performance of a primary database. This is accomplished by allowing transactions to commit as soon as all redo data generated by those transactions has been written to the online log. Redo data is also written to one or more standby databases, but this is done asynchronously with respect to transaction commitment, so primary database performance is unaffected by delays in writing redo data to the standby database(s).</p>
<p>This protection mode offers slightly less data protection than maximum availability mode and has minimal impact on primary database performance.</p>
<p>This is the default protection mode.</p>
<p>You can enable fast-start failover if the protection mode is maximum performance.</p>
<p><a id="DGBKR275"></a><span class="subhead3"><a id="sthref390"></a>Maximum Protection&nbsp;</span>This protection mode ensures that no data loss will occur if the primary database fails. To provide this level of protection, the redo data needed to recover a transaction must be written to both the online redo log and to the standby redo log on at least one synchronized standby database before the transaction commits. To ensure that data loss cannot occur, the primary database will shut down, rather than continue processing transactions, if it cannot write its redo stream to at least one synchronized standby database.</p>
<p>Transactions on the primary are considered protected as soon as Data Guard has written the redo data to persistent storage in a standby redo log file. Once that is done, acknowledgment is quickly made back to the primary database so that it can proceed to the next transaction. This minimizes the impact of synchronous transport on primary database throughput and response time. To fully benefit from complete Data Guard validation at the standby database, be sure to operate in real-time apply mode so that redo changes are applied to the standby database as fast as they are received. Data Guard signals any corruptions that are detected so that immediate corrective action can be taken.</p>
<p>Because this data protection mode prioritizes data protection over primary database availability, Oracle recommends that a minimum of two standby databases be used to protect a primary database that runs in maximum protection mode to prevent a single standby database failure from causing the primary database to shut down. If only one standby database is supporting maximum protection mode, Data Guard broker will disallow the shutdown of the apply instance. This prevents the primary database from shutting down.</p>
<p>You cannot enable fast-start failover if the protection mode is maximum protection.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="sofo.htm#i1027843">Section 5.5</a> for information on fast-start failover</p>
</li>
<li>
<p><a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for complete information about data protection modes</p>
</li>
</ul>
</div>
<dl>
<dd><a id="DGBKR3651"></a><a id="sthref391"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Set up <a id="sthref392"></a><a id="sthref393"></a><a id="sthref394"></a><a id="sthref395"></a><a id="sthref396"></a>standby redo log files.</dt>
<dd>
<p>You must add standby redo log files on all standby databases, regardless of the protection mode you are using. Also, Oracle requires that you add standby redo log files on the primary database in preparation for a future switchover or failover. Standby redo log files are required on the primary database if you want to enable fast-start failover.</p>
<p>Enterprise Manager automatically prompts you to select one or more standby databases in the configuration and sets up standby redo log (SRL) files on them and on the primary database in preparation for a future role change.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
If you are using the <a id="sthref397"></a><a id="sthref398"></a>DGMGRL command-line interface, follow the instructions in <a class="olink SBYDB00426" href="../../server.112/e41134/create_ps.htm#SBYDB00426"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> to configure standby redo log files.</div>
</dd>
<dd><a id="DGBKR3652"></a><a id="sthref399"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Set the LogXptMode configurable database property, if necessary.</dt>
<dd>
<p>If the data protection mode requires that you change the redo transport service used by any of the standby databases, change the setting of the <code dir="ltr">LogXptMode</code> database property appropriately on each standby database. See <a href="#i1025959">Section 4.4</a> for more information about setting the redo transport service. <a href="#g1046794">Table 4-2</a> shows the protection modes and the corresponding redo transport service.</p>
<p>Enterprise Manager automatically specifies the correct redo transport service on the primary database in preparation for a future switchover.</p>
<div id="DGBKR3540" class="tblformal">
<p class="titleintable"><a id="sthref400"></a><a id="g1046794"></a>Table 4-2 Data Guard Protection Modes and Requirements</p>
<table class="cellalignment1491" title="Data Guard Protection Modes and Requirements" summary="a table showing the protection mode and the corresponding log transport mode and SQL statement" dir="ltr">
<thead>
<tr class="cellalignment1478">
<th class="cellalignment1490" id="r1c1-t26">Protection Mode</th>
<th class="cellalignment1490" id="r1c2-t26">Redo Transport</th>
<th class="cellalignment1490" id="r1c3-t26">Standby Redo Log Files Needed?</th>
<th class="cellalignment1490" id="r1c4-t26">Usable with Fast-Start Failover?</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r2c1-t26" headers="r1c1-t26">
<p><code dir="ltr">MAXPROTECTION</code></p>
</td>
<td class="cellalignment1484" headers="r2c1-t26 r1c2-t26">
<p><code dir="ltr">SYNC</code></p>
</td>
<td class="cellalignment1484" headers="r2c1-t26 r1c3-t26">
<p>Yes</p>
</td>
<td class="cellalignment1484" headers="r2c1-t26 r1c4-t26">
<p>No</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r3c1-t26" headers="r1c1-t26">
<p><code dir="ltr">MAXAVAILABILITY</code></p>
</td>
<td class="cellalignment1484" headers="r3c1-t26 r1c2-t26">
<p><code dir="ltr">SYNC</code></p>
</td>
<td class="cellalignment1484" headers="r3c1-t26 r1c3-t26">
<p>Yes</p>
</td>
<td class="cellalignment1484" headers="r3c1-t26 r1c4-t26">
<p>Yes</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r4c1-t26" headers="r1c1-t26">
<p><code dir="ltr">MAXPERFORMANCE</code></p>
</td>
<td class="cellalignment1484" headers="r4c1-t26 r1c2-t26">
<p><code dir="ltr">ASYNC</code></p>
</td>
<td class="cellalignment1484" headers="r4c1-t26 r1c3-t26">
<p>Yes</p>
</td>
<td class="cellalignment1484" headers="r4c1-t26 r1c4-t26">
<p>Yes</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></dd>
<dd><a id="DGBKR3653"></a><a id="sthref401"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;Set the protection mode.</dt>
<dd>
<p>Set the protection mode using DGMGRL commands or Enterprise Manager.</p>
<p><span class="bold">With DGMGRL:</span></p>
<ol>
<li>
<p>Use the <code dir="ltr">EDIT DATABASE (property)</code> command and specify the standby database whose redo transport service should be changed to correspond to the protection mode you plan to set. For example, if you plan to set the overall Data Guard configuration to operate in maximum availability mode, you must use the <code dir="ltr">EDIT DATABASE</code> command to set the <code dir="ltr">SYNC</code> mode for redo transport services. For example:</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogXptMode'='SYNC';
</pre>
<p>Do this also for the primary database or another standby database in the configuration to ensure that it can support the chosen protection mode after a switchover.</p>
</li>
<li>
<p>Use the <code dir="ltr">EDIT CONFIGURATION SET PROTECTION MODE AS</code> <code dir="ltr"><span class="codeinlineitalic">protection-mode</span></code> command to set the overall configuration protection mode. For example:</p>
<pre dir="ltr">
DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MAXAVAILABILITY;
</pre></li>
</ol>
<p>See <a href="cli.htm#i1010978">Section 6.5</a> for a DGMGRL scenario showing how to set the protection mode.</p>
<p><span class="bold">With Enterprise Manager:</span></p>
<ol>
<li>
<p>On the Data Guard overview page, click the link to the right of the Protection Mode label.</p>
</li>
<li>
<p>Select Maximum Protection, Maximum Availability, or Maximum Performance and click Continue.</p>
</li>
<li>
<p>If prompted, log in to the database with <code dir="ltr">SYSDBA</code> privileges and click Login.</p>
</li>
<li>
<p>Select one or more standby databases to support the protection mode that you selected. If standby redo log files are needed, verify the names of the log files. Click OK.</p>
</li>
<li>
<p>On the Confirmation page, click Yes.</p>
</li>
</ol>
<p>After upgrading the protection mode from maximum performance mode to maximum protection mode using either DGMGRL or Enterprise Manager, the primary database will be restarted automatically if you are upgrading to maximum protection mode. The primary database need not be restarted following a downgrade of the protection mode.</p>
<p>No restart is required when upgrading the protection mode from maximum performance to maximum availability or from maximum availability to maximum protection.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
You can avoid a restart of the primary database when upgrading from maximum performance mode to maximum protection mode by first upgrading to maximum availability. Once in maximum availability mode, then upgrade to maximum protection.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
Online database relocation with Oracle RAC One Node cannot be performed on the only physical standby database that supports maximum protection mode.
<p>If online database relocation must be performed, then you must first downgrade the protection mode to maximum availability. After the online database relocation of the physical standby database is performed, you can upgrade the protection mode back to maximum protection. A restart of the primary database is not required.</p>
</div>
</dd>
</dl>
</div>
<!-- class="sect2" -->
<a id="i1026543"></a>
<div id="DGBKR290" class="sect2">
<h3 class="sect2"><span class="secnum">4.6.2</span> How the Protection Modes Influence Broker Operations</h3>
<p>This section describes how<a id="sthref402"></a> operations such as switchover, failover, disabling, or enabling the Data Guard configuration can have an effect on the configuration's protection mode and redo transport services. This section contains the following sections:</p>
<ul>
<li>
<p><a href="#i1026570">Upgrading or Downgrading the Current Protection Mode</a></p>
</li>
<li>
<p><a href="#i1026578">Switchover Operations</a></p>
</li>
<li>
<p><a href="#i1026582">Failover Operations</a></p>
</li>
<li>
<p><a href="#i1026585">Disable and Enable Operations</a></p>
</li>
<li>
<p><a href="#i1026593">Requirements For Removing a Database from the Configuration</a></p>
</li>
<li>
<p><a href="#i1026598">Requirements On Other Operations</a></p>
</li>
</ul>
<a id="i1026570"></a>
<div id="DGBKR295" class="sect3">
<h4 class="sect3"><span class="secnum">4.6.2.1</span> Upgrading or Downgrading the Current Protection Mode</h4>
<p>No restart is necessary when you upgrade the current Data Guard protection mode to maximum availability or when you downgrade the current Data Guard protection mode. Follow these recommendations when upgrading or downgrading the Data Guard protection mode:</p>
<ul>
<li>
<p>When up<a id="sthref403"></a><a id="sthref404"></a>grading the protection mode, upgrade the redo transport service before you upgrade the overall protection mode. At the time when you change the protection mode or reset the redo transport service of a standby database, the broker verifies that there is at least one standby database in the configuration that can support the desired grade of protection. If not, then the broker does not change the protection mode and returns an error.</p>
</li>
<li>
<p>When <a id="sthref405"></a>downgrading the protection mode, <a id="sthref406"></a><a id="sthref407"></a>downgrade the protection mode first and then change the redo transport service (if necessary). The broker will disallow a change of the redo transport service if doing so invalidates the current overall protection mode.</p>
</li>
</ul>
<p>If you upgrade the protection mode from the maximum performance mode, the broker ensures that there is at least one standby database whose <code dir="ltr">LogXptMode</code> database property is set to <code dir="ltr">SYNC</code>. Additionally, for upgrades to maximum protection mode, the broker ensures there are no gaps in the redo data on the standby database. If there are no standby databases in the configuration that meet these requirements, the request to upgrade the protection mode is rejected with an error.</p>
<p>The protection mode cannot be changed if fast-start failover is enabled.</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">The primary database will be shut down and restarted if you upgrade the protection mode from maximum performance to maximum protection. You can avoid this by first upgrading to maximum availability. Once in maximum availability mode, then upgrade to maximum protection.</p>
</div>
</div>
<!-- class="sect3" -->
<a id="i1026578"></a>
<div id="DGBKR300" class="sect3">
<h4 class="sect3"><span class="secnum">4.6.2.2</span> Switchover Operations</h4>
<p>A switchover <a id="sthref408"></a>does not change the overall Data Guard protection mode. The protection mode remains the same as it was before the switchover.</p>
<p>This requires that there be a standby database that is properly configured to support the current protection mode once the switchover completes. This can be either another standby database in the configuration or the current primary database that will become a standby database after the switchover completes.</p>
<p>Before you perform a switchover, if necessary, you can add standby redo log files and set the redo transport service on the current primary database, or on another standby database in the configuration, to the <code dir="ltr">SYNC</code> or <code dir="ltr">ASYNC</code> mode that is required to support the Data Guard protection mode. Then, when the switchover begins:</p>
<ul>
<li>
<p>The broker verifies the presence of standby redo log files and the redo transport service setting on each standby database and on the current primary database.</p>
</li>
<li>
<p>The broker verifies there are no gaps in the redo data present on the target standby database.</p>
</li>
</ul>
<p>If the verification is successful, the switchover continues; otherwise, the switchover fails, and the database roles and the broker configuration files remain unchanged.</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">The broker will shut down and restart the primary database if the target of the switchover is a physical standby database.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sofo.htm#BCGFBHJI">Section 5.3</a> for more information about switchovers</div>
</div>
<!-- class="sect3" -->
<a id="i1026582"></a>
<div id="DGBKR305" class="sect3">
<h4 class="sect3"><span class="secnum">4.6.2.3</span> Failover Operations</h4>
<p>After you perform a manual <a id="sthref409"></a><a id="sthref410"></a><a id="sthref411"></a>failover, the Data Guard protection mode is downgraded to maximum performance mode if the protection mode was at maximum protection. You can upgrade the protection mode later, if necessary. If the protection mode was at maximum availability or maximum performance, it remains unchanged. The redo transport services of the standby databases remain unchanged.</p>
<p>If fast-start failover occurs, the broker preserves the protection mode that was in effect just prior to the fast-start failover.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sofo.htm#BCGBFFIH">Section 5.4</a> and <a href="sofo.htm#i1027843">Section 5.5</a> for more information about manual failover and fast-start failover, respectively</div>
</div>
<!-- class="sect3" -->
<a id="i1026585"></a>
<div id="DGBKR310" class="sect3">
<h4 class="sect3"><span class="secnum">4.6.2.4</span> Disable and Enable Operations</h4>
<p>When you <a id="sthref412"></a>disable broker management of a standby database, the broker checks to see if the overall protection mode can still be satisfied by any of the remaining standby databases. If not, the broker rejects the disable operation. Otherwise, the broker allows the disable operation to proceed as long as fast-start failover is not enabled. If it is enabled, the broker allows the disable operation to proceed only if the standby database is not the target standby database for fast-start failovers.</p>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<p class="warnsp">If you disable broker management of a standby database in the broker configuration, that standby database cannot be used by the broker as a failover target in the event of loss of the primary database.</p>
</div>
<p>After a standby database is successfully disabled, you can change the redo transport service for that database and the broker will record the change in the broker configuration file. The change will not affect the overall protection mode because it is guaranteed that at least one of the enabled standby databases already satisfies the overall protection mode requirement.</p>
<p>As long as fast-start failover is not enabled, you can disable the entire configuration regardless of the protection mode. You cannot disable the configuration if fast-start failover is enabled. See <a href="sofo.htm#BCGEFICG">Section 5.5.2.2, "Restrictions When Fast-Start Failover is Enabled"</a> for more information.</p>
<p>If the entire configuration is disabled, you can change any broker settings, including the redo transport services of the standby databases and the protection mode of the configuration. The broker saves the changes in the broker configuration file, but the changes will not be made to the database itself.</p>
<p>When <a id="sthref413"></a>enabling broker management of the entire configuration, the broker first checks to see if the protection mode will be satisfied by the redo transport services of the standby databases that will be enabled. If not, the enable operation fails and the configuration remains disabled. Otherwise, the enable operation successfully enables the configuration, and the broker enables the database using the settings saved in the broker configuration file.</p>
</div>
<!-- class="sect3" -->
<a id="i1026593"></a>
<div id="DGBKR315" class="sect3">
<h4 class="sect3"><span class="secnum">4.6.2.5</span> Requirements For Removing a Database from the Configuration</h4>
<p>When <a id="sthref414"></a><a id="sthref415"></a>removing<a id="sthref416"></a> a standby database from the broker configuration, the broker checks to see if the protection mode will still be satisfied. The operation fails if:</p>
<ul>
<li>
<p>Removing the database compromises the protection mode</p>
</li>
<li>
<p>Fast-start failover is enabled and you try to remove the standby database that is the target of the fast-start failover</p>
</li>
</ul>
<p>You can remove the configuration at any time, unless fast-start failover is enabled.</p>
</div>
<!-- class="sect3" -->
<a id="i1026598"></a>
<div id="DGBKR320" class="sect3">
<h4 class="sect3"><span class="secnum">4.6.2.6</span> Requirements On Other Operations</h4>
<p>Some operations that take place in a broker configuration, especially operations related to redo transport services, can affect the overall protection mode. These operations include:</p>
<ul>
<li>
<p>Stopping redo transport services on the primary database</p>
</li>
<li>
<p>Stopping redo transport services to individual standby databases</p>
</li>
<li>
<p>Downgrading the <code dir="ltr">LogXptMode</code> database property from <code dir="ltr">SYNC</code> to <code dir="ltr">ASYNC</code> on the only standby database that supports a configuration operating in maximum availability mode or maximum protection mode</p>
</li>
</ul>
<p>Before any of these operations can proceed, the broker checks to see if the protection mode will be supported by the redo transport service settings on the standby databases after the operation completes. If not, the broker fails the operation and returns an error.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CIADAFDH"></a>
<div id="DGBKR00677" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.7</span> Managing Fast-Start Failover</h2>
<p>For <span class="italic">lights out administration</span>, you can enable <span class="bold">fast-start failover</span> to allow the broker to determine if a failover is necessary and to initiate a failover to a pre-specified target standby database, with either no data loss or a configurable amount of data loss. In addition, you can specify under which conditions or errors you want a failover to be initiated. Oracle also provides the <code dir="ltr">DBMS_DG</code> PL/SQL package to allow an application to request a fast-start failover.</p>
<p>The following configuration properties are used to control the behavior of fast-start failover:</p>
<ul>
<li>
<p><code dir="ltr">FastStartFailoverThreshold</code></p>
</li>
<li>
<p><code dir="ltr">FastStartFailoverPmyShutdown</code></p>
</li>
<li>
<p><code dir="ltr">FastStartFailoverLagLimit</code></p>
</li>
<li>
<p><code dir="ltr">FastStartFailoverAutoReinstate</code></p>
</li>
<li>
<p><code dir="ltr">FastStartFailoverTarget</code></p>
</li>
</ul>
<p>You can also use Oracle Enterprise Manager or the DGMGRL <code dir="ltr">ENABLE FAST_START FAILOVER CONDITION</code> and <code dir="ltr">DISABLE FAST_START FAILOVER CONDITION</code> commands to specify conditions for which a fast-start failover should occur.</p>
<div id="DGBKR3397" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref417"></a>
<h3 class="sect2"><span class="secnum">4.7.1</span> Configure Properties to Tune Fast-Start Failover</h3>
<p>The configurable properties for fast-start failover include:</p>
<ul>
<li>
<p><code dir="ltr">FastStartFailoverThreshold</code></p>
<p>Set the <code dir="ltr">FastStartFailoverThreshold</code> configuration property to specify the number of seconds you want the observer and target standby database to wait (after detecting the primary database is unavailable) before initiating a failover. See <a href="sofo.htm#CHDDFFEC">Section 5.5.2, "Enabling Fast-Start Failover"</a> for more information and an example.</p>
</li>
<li>
<p><code dir="ltr">FastStartFailoverPmyShutdown</code></p>
<p>The <code dir="ltr">FastStartFailoverPmyShutdown</code> configuration property controls whether the primary database will shut down if redo generation has been stalled (<code dir="ltr">FS_FAILOVER_STATUS</code> column of <code dir="ltr">V$DATABASE</code> contains a value of <code dir="ltr">STALLED</code>) and the primary database has lost connectivity with the observer and target standby database for longer than the number of seconds specified by the <code dir="ltr">FastStartFailoverThreshold</code> configuration property. The default value for FastStartFailoverPmyShutdown is <code dir="ltr">TRUE</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The primary database is always shut down if a user configurable fast-start failover condition is detected or if an application initiated a fast-start failover by calling the <code dir="ltr">DBMS_DG.INITIATE_FS_FAILOVER</code> function.</div>
</li>
<li>
<p><code dir="ltr">FastStartFailoverLagLimit</code></p>
<p>The fast-start failover feature can be configured on databases operating in maximum performance mode. Destinations that receive redo in <code dir="ltr">ASYNC</code> mode will be acceptable fast-start failover target standby databases, and these destinations can lag the primary in terms of redo received and applied. A configurable time-based limit can be specified through the <code dir="ltr">FastStartFailoverLagLimit</code> configuration property. If the standby database's applied redo point is within this many seconds of the primary's redo generation point, a fast-start failover will be allowed. If its applied point lags beyond this limit, a fast-start failover is not allowed. The <code dir="ltr">FastStartFailoverLagLimit</code> configuration property is not used if fast-start failover is enabled when the configuration is operating in maximum availability mode.An <code dir="ltr">ASYNC</code> destination is only a valid fast-start failover target in a configuration operating in maximum performance mode. If you want to change protection mode or change the destination to sync, you must first disable fast-start failover. Likewise, changing the protection mode from <code dir="ltr">MAXAVAILABILITY</code> to <code dir="ltr">MAXPERFORMANCE</code> will require first disabling fast-start failover and changing the <code dir="ltr">LogXptMode</code> property of the primary and target standby to <code dir="ltr">ASYNC</code>.Reinstatement of an old primary will be possible after a fast-start failover to an <code dir="ltr">ASYNC</code> target standby. If the observer rediscovers the old primary, it will automatically reinstate the old primary and any redo generated within the specified lag will be lost.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbpropref.htm#g1012962">Chapter 8, "Data Guard Broker Properties"</a> for more information</div>
</li>
<li>
<p><code dir="ltr">FastStartFailoverAutoReinstate</code></p>
<p>The <code dir="ltr">FastStartFailoverAutoReinstate</code> configuration property controls whether the former primary database is automatically reinstated if a fast-start failover occurred because the primary database crashed or was stalled for longer than <code dir="ltr">FastStartFailoverThreshold</code> seconds. The default value for <code dir="ltr">FastStartFailoverAutoReinstate</code> is <code dir="ltr">TRUE</code>.</p>
<p>If you want to perform diagnostic or repair work after failover has completed, you can avoid an automatic reinstatement by setting the <code dir="ltr">FastStartFailoverAutoReinstate</code> configuration property to <code dir="ltr">FALSE</code>.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The former primary database is never automatically reinstated if a fast-start failover occurred because a user configurable fast-start failover condition was detected or because an application initiated a fast-start failover by calling the <code dir="ltr">DBMS_DG.INITIATE_FS_FAILOVER</code> function.</div>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="DGBKR3398" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref418"></a>
<h3 class="sect2"><span class="secnum">4.7.2</span> Configure Conditions for Fast-start Failover</h3>
<p>By default, a fast-start failover is done when neither the observer nor the standby can reach the primary after the configured time threshold (<code dir="ltr">FastStartFailoverThreshold</code>) has passed. There are also other conditions under which you might want a fast-start failover to occur.</p>
<p>The configurable conditions fall into two classes: those detected through the database health-check mechanism and those detected through errors raised by the Oracle server (such as ORA errors). When a specified condition occurs, the observer will initiate a fast-start failover without waiting for <code dir="ltr">FastStartFailoverThreshold</code> to expire, assuming the standby is in a valid state to accept a failover.</p>
<p>Each condition may be enabled or disabled individually. The Data Guard configuration persists all user specified configurable fast-start failover conditions in the broker configuration file.</p>
<p>The observer will detect when the primary database has signaled any of the enabled health-check conditions and will immediately initiate a fast-start failover, assuming the standby is in a valid fast-start failover state (observed and either synchronized or within lag limits) to accept a failover.</p>
<p>For specified Oracle ORA-Error conditions, the primary database will notify the observer if the error is signaled and the observer will immediately initiate a fast-start failover, assuming the standby is in a valid fast-start failover state (observed and either synchronized or within lag limits) to accept a failover.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The primary database will shut down and the observer will not attempt to automatically reinstate the former primary database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>Oracle Enterprise Manager online help</p>
</li>
<li>
<p><a href="dgmgrl.htm#BJEEIACG">ENABLE FAST_START FAILOVER CONDITION</a></p>
</li>
<li>
<p><a href="dgmgrl.htm#BJEDHGCI">DISABLE FAST_START FAILOVER CONDITION</a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="CHDFAGGJ"></a>
<div id="DGBKR3399" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">4.7.3</span> Application Initiated Fast-Start Failover</h3>
<p>You can use the <code dir="ltr">DBMS_DG</code> PL/SQL package to allow an application to direct a fast-start failover when it encounters specific conditions. See <a href="sofo.htm#CEGDDGJH">"Directing a Fast-Start Failover From an Application"</a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ARPLS920" href="../../appdev.112/e40758/d_dg.htm#ARPLS920"><span class="italic">Oracle Database PL/SQL Packages and Types Reference</span></a> for more information about the <code dir="ltr">DBMS_DG</code> package</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CHDCIEAJ"></a>
<div id="DGBKR3400" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">4.8</span> Managing Database Conversions</h2>
<p>You can use the DGMGRL <code dir="ltr">CONVERT DATABASE</code> command to convert a physical standby database to a snapshot standby database. A snapshot standby database is a fully updatable standby database.</p>
<p>Like a physical or logical standby database, a snapshot standby database receives and archives redo data from a primary database. However, unlike a physical or logical standby database, a snapshot standby database does not apply the redo data that it receives. The redo data received by a snapshot standby database is not applied until the snapshot standby is converted back into a physical standby database, after first discarding any local updates made to the snapshot standby database.</p>
<p>To convert a physical standby database to a snapshot standby database you must have Flashback Database enabled. The following example shows how to convert a physical standby database to a snapshot standby database:</p>
<pre dir="ltr">
DGMGRL&gt; CONVERT DATABASE 'South_Sales' TO SNAPSHOT STANDBY;
</pre>
<p>When you are ready to convert the snapshot back into a physical standby, use the DGMGRL <code dir="ltr">CONVERT DATABASE</code> command as follows:</p>
<pre dir="ltr">
DGMGRL&gt; CONVERT DATABASE 'South_Sales' TO PHYSICAL STANDBY;
</pre></div>
<!-- class="sect1" -->
<a id="i1024834"></a>
<div id="DGBKR325" class="sect1">
<h2 class="sect1"><span class="secnum">4.9</span> Database Status</h2>
<p>Database <a id="sthref419"></a><a id="sthref420"></a><a id="sthref421"></a>status reveals the health of the database. In general, the broker checks the health of a database by verifying if the actual database state and settings match with those described in the broker configuration file. This is done by checking if any component of the Data Guard configuration is functioning incorrectly (for example, if redo transport services have an error), and by checking if other required database settings are correctly set (for example, if the server parameter files are available and if the <code dir="ltr">ARCHIVELOG</code> mode is turned on). The following is a detailed list of what is being checked by the broker on a primary database and a standby database.</p>
<p>On a <a id="sthref422"></a><a id="sthref423"></a><a id="sthref424"></a>primary database, the health check determines whether the following conditions are met:</p>
<ul>
<li>
<p>Database is in the state specified by the user, as recorded in the broker configuration file</p>
</li>
<li>
<p>Database is in the correct data protection mode</p>
</li>
<li>
<p>Database is using a server parameter file</p>
</li>
<li>
<p>Database is in the <code dir="ltr">ARCHIVELOG</code> mode</p>
</li>
<li>
<p>Database guard is turned off</p>
</li>
<li>
<p>Supplemental logging is turned on when there is a logical standby database in the configuration</p>
</li>
<li>
<p>Redo transport services do not have any errors</p>
</li>
<li>
<p>Database settings match those specified by the broker configurable properties</p>
</li>
<li>
<p>Redo transport settings match those specified by the redo transport-related properties of the standby databases</p>
</li>
<li>
<p>Current data protection level is consistent with configured data protection mode</p>
</li>
<li>
<p>Primary database is able to resolve all gaps for all standby databases</p>
</li>
</ul>
<p>On a <a id="sthref425"></a><a id="sthref426"></a><a id="sthref427"></a>standby database, the health check determines whether the following conditions are met:</p>
<ul>
<li>
<p>Database is in the state specified by the user, as recorded in the broker configuration file</p>
</li>
<li>
<p>Database is using a server parameter file</p>
</li>
<li>
<p>Database settings match those specified by the broker configurable properties</p>
</li>
<li>
<p>Database guard is turned on when the database is a logical standby database</p>
</li>
<li>
<p>Primary and target standby databases are synchronized or within lag limits if fast-start failover is enabled</p>
</li>
</ul>
<p>The following monitorable database properties can be used to query the database status:</p>
<ul>
<li>
<p><code dir="ltr">LogXptStatus</code></p>
</li>
<li>
<p><code dir="ltr">InconsistentProperties</code></p>
</li>
<li>
<p><code dir="ltr">InconsistentLogXptProps</code></p>
<div class="infobox-note">
<p class="notep1">Note:</p>
These properties are directly accessed through the DGMGRL command-line interface. Enterprise Manager rearranges the values of these properties for presentation in the GUI.</div>
</li>
</ul>
<p>You can use the <code dir="ltr">SHOW DATABASE &lt;db_unique_name&gt;</code> command to get a brief description of the database (name, role, and so on), database status, and information about any health check problems. For example, the output of the following <code dir="ltr">SHOW DATABASE</code> command shows two problems: some redo transport services errors and an inconsistent redo transport-related property</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'North_Sales';
 
Database - North_Sales
  Role: PRIMARY
  Intended State: TRANSPORT-OFF
  Instance(s):
    north_sales1
      Error: ORA-16737: the redo transport service for standby
        database "South_Sales" has an error
 
    north_sales2
      Error: ORA-16737: the redo transport service for standby
        database "South_Sales" has an error
      Warning: ORA-16715: redo transport-related property
        ReopenSecs of standby "South_Sales" is inconsistent
Database Status:
ERROR
</pre>
<p>To further check the details about the database status, you can use the <code dir="ltr">LogXptStatus</code>, <code dir="ltr">InconsistentProperties</code>, and <code dir="ltr">InconsistentLogXptProps</code> monitorable database properties. <code dir="ltr">LogXptStatus</code> lists all log transport errors detected on all instances of the primary database. <code dir="ltr">InconsistentProperties</code> lists all properties that have inconsistent values between the broker configuration file and the database settings. <code dir="ltr">InconsistentLogXptProps</code> lists all redo transport-related properties of standby databases that have inconsistent values between the broker configuration file and the redo transport settings.</p>
<p>Issue the following <code dir="ltr">SHOW DATABASE</code> commands to obtain further details about the problems.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'North_Sales' 'LogXptStatus';
LOG TRANSPORT STATUS
PRIMARY_INSTANCE_NAME  STANDBY_DATABASE_NAME  STATUS 
         north_sales1            South_Sales  ORA-12541: TNS:no listener
         north_sales2            South_Sales  ORA-12541: TNS:no listener
 
DGMGRL&gt; SHOW DATABASE 'North_Sales' 'InconsistentLogXptProps';
INCONSISTENT LOG TRANSPORT PROPERTIES
 INSTANCE_NAME  STANDBY_NAME  PROPERTY_NAME  MEMORY_VALUE  BROKER_VALUE 
  north_sales2   South_Sales     ReopenSecs           600           300
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbpropref.htm#g1012962">Chapter 8</a> for detailed information about database properties</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1477">
<tr>
<td class="cellalignment1484">
<table class="cellalignment1482">
<tr>
<td class="cellalignment1481"><a href="configure.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1481"><a href="sofo.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1486">
<table class="cellalignment1480">
<tr>
<td class="cellalignment1481"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1481"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1481"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1481"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1481"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1481"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
