<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Data Guard Command-Line Interface Reference</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="dcterms.created" content="2015-11-24T12:57:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Guard Broker" />
<meta name="dcterms.identifier" content="E40771-07" />
<meta name="dcterms.isVersionOf" content="DGBKR" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="cli.htm" title="Previous" type="text/html" />
<link rel="Next" href="dbpropref.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40771.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/20</span> <!-- End Header -->
<div id="DGBKR585" class="chapter"><a id="g1019606"></a> <a id="i80635"></a>
<h1 class="chapter"><span class="secnum">7</span> Data Guard Command-Line Interface Reference</h1>
<p>The Data Guard command-line interface (DGMGRL) enables you to manage a Data Guard broker configuration and its databases directly from the command line, or from batch programs or scrip<a id="sthref761"></a>ts. You can use the Data Guard command-line interface as an alternative to Oracle Enterprise Manager for managing a Data Guard configuration.</p>
<p>This chapter contains the following sections, which provide reference information for the Data Guard command-line interface:</p>
<ul>
<li>
<p><a href="#BABHECFB">Starting the Data Guard Command-Line Interface</a></p>
</li>
<li>
<p><a href="#BABCHHGJ">Exiting the Data Guard Command-Line Interface</a></p>
</li>
</ul>
<a id="BABHECFB"></a>
<div id="DGBKR590" class="sect1">
<h2 class="sect1"><span class="secnum">7.1</span> Starting the Data Guard Command-Line Interface</h2>
<p>To run DGMGRL, you must have <code dir="ltr">SYSDBA</code> privileges.</p>
<p>Start the comman<a id="sthref762"></a><a id="sthref763"></a>d-line interface by entering <code dir="ltr">dgmgrl</code> at the command-line prompt on a system where Oracle is installed:</p>
<pre dir="ltr">
% dgmgrl
</pre>
<p>The DGMGRL command prompt is displayed:</p>
<pre dir="ltr">
DGMGRL&gt;
</pre>
<a id="i112260"></a>
<div id="DGBKR595" class="sect2">
<h3 class="sect2"><span class="secnum">7.1.1</span> DGMGRL Optional Parameters</h3>
<p>You can supply optional parameters on the command line to indicate how you want the Data Guard command-line interface to display output such as command p<a id="sthref764"></a><a id="sthref765"></a>rompts, ba<a id="sthref766"></a><a id="sthref767"></a>nners, and messages.</p>
<p>Additionally, a <a id="sthref768"></a><a id="sthref769"></a>single command mode is available. In this mode, DGMGRL executes one command and exits upon the completion of the command. The exit code is the result of the command. If the exit code is 0, the command completed successfully. Otherwise, there was an error.</p>
<p>The command line of DGMGRL appears as follows:</p>
<p><code dir="ltr">% dgmgrl [&lt;options&gt;] [&lt;logon&gt; [&lt;command&gt;] ]</code></p>
<p>Specify any of the following keywords when you invoke the DGMGRL command-line interface:</p>
<ul>
<li>
<p><code dir="ltr">&lt;options&gt;</code> can be one of the following choices:</p>
<ul>
<li>
<p><code dir="ltr">-echo</code></p>
<p>Displays command input and output to the default display device. If you do not use this parameter, only the output from the command is displayed.</p>
</li>
<li>
<p><code dir="ltr">-logfile</code> <span class="variable">&lt;file-spec&gt;</span> "&lt;<span class="italic">dgmgrl-command</span>&gt;"</p>
<p>Specifies a file into which you can capture the actions of the DGMGRL command-line interface. This is particularly useful when DGMGRL is being invoked to serve as the fast-start failover <span class="italic">observer</span>. See the <a href="#BABJECGA">"START OBSERVER"</a> command for more information.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>The <a href="#BABJECGA">"START OBSERVER"</a> command</p>
</li>
<li>
<p><a href="troubleshooting.htm#BABHDHCH">Section 9.5.3, "Capturing Observer Actions in the Observer Log File"</a></p>
</li>
</ul>
</div>
</li>
<li>
<ul>
<li>
<p><code dir="ltr">-silent</code></p>
<p>Suppresses the display of the DGMGRL (<code dir="ltr">DGMGRL&gt;</code>) command prompt on your default display device. This option is useful if you are directing the command output to a file or to another display tool.</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">&lt;logon&gt;</code> is:</p>
<ul>
<li>
<p><code dir="ltr">username [@connect-identifier]</code></p>
<p>To connect to the database, enter a <code dir="ltr">username</code> and optionally, a <code dir="ltr">connect-identifier</code>. You will then be prompted for a password. The <code dir="ltr">connect-identifier</code> is a fully specified connect descriptor or a name to be resolved by an Oracle naming method (for example, TNS).</p>
<div class="infoboxnotewarn">
<p class="notep1">WARNING:</p>
<p class="warnsp">Including a password on the command line when invoking DGMGRL is a security risk. This risk can be avoided either by omitting the password when invoking DGMGRL and entering it when prompted, or by using an external authentication method.</p>
</div>
</li>
<li>
<p>You can connect as '/' when using operating-system authentication (remote database restarts will not work), Secure Sockets Layer (SSL) protocol, or database credentials stored in a wallet.</p>
</li>
</ul>
</li>
<li>
<p><code dir="ltr">&lt;command&gt;</code> is a single command.</p>
<p>For example:</p>
<p><code dir="ltr">% dgmgrl sys/ "show database 'North_Sales'"</code></p>
<p><code dir="ltr">Password</code>: <span class="italic">password</span></p>
</li>
</ul>
<p>The following subsections specify the command format that you enter at the <code dir="ltr">DGMGRL&gt;</code> command prompt.</p>
</div>
<!-- class="sect2" -->
<div id="DGBKR600" class="sect2"><a id="sthref770"></a>
<h3 class="sect2"><span class="secnum">7.1.2</span> DGMGRL Command Format and Parameters</h3>
<p>The DGMGRL commands allow you to create and maintain one broker configuration at a time. A broker configuration can consist of a primary database and up to 30 standby databases.</p>
<p>After you invoke the command-line interface, you can enter any of the DGMGRL commands listed in <a href="#i77055">Table 7-1</a>. Each command and its associated parameters are described in detail in later sections of this chapter.</p>
<div id="DGBKR3609" class="tblformal">
<p class="titleintable"><a id="sthref771"></a><a id="i77055"></a>Table 7-1 Summary of <a id="sthref772"></a>DGMGRL Commands</p>
<table class="cellalignment1491" title="Summary of DGMGRL Commands" summary="summary of DGMGRL CLI commands" dir="ltr">
<thead>
<tr class="cellalignment1478">
<th class="cellalignment1490" id="r1c1-t4">Command</th>
<th class="cellalignment1490" id="r1c2-t4">Effect</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r2c1-t4" headers="r1c1-t4">
<p><a href="#BABGIFID">ADD DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r2c1-t4 r1c2-t4">
<p>Adds a new standby database profile to the existing broker configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r3c1-t4" headers="r1c1-t4">
<p><a href="#i77586">CONNECT</a></p>
</td>
<td class="cellalignment1484" headers="r3c1-t4 r1c2-t4">
<p>Connects to the specified database using the specified username.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r4c1-t4" headers="r1c1-t4">
<p><a href="#BJEHCAIB">CONVERT DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r4c1-t4 r1c2-t4">
<p>Converts the specified database to either a snapshot standby database or a physical standby database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r5c1-t4" headers="r1c1-t4">
<p><a href="#i77634">CREATE CONFIGURATION</a></p>
</td>
<td class="cellalignment1484" headers="r5c1-t4 r1c2-t4">
<p>Creates a broker configuration and adds a primary database profile to the configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r6c1-t4" headers="r1c1-t4">
<p><a href="#i77901">DISABLE CONFIGURATION</a></p>
</td>
<td class="cellalignment1484" headers="r6c1-t4 r1c2-t4">
<p>Disables broker management of a configuration so that the configuration and all of its databases are no longer managed by the broker.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r7c1-t4" headers="r1c1-t4">
<p><a href="#i101821">DISABLE DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r7c1-t4 r1c2-t4">
<p>Disables broker management of the named standby database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r8c1-t4" headers="r1c1-t4">
<p><a href="#BABGIAAB">DISABLE FAST_START FAILOVER</a></p>
</td>
<td class="cellalignment1484" headers="r8c1-t4 r1c2-t4">
<p>Disables fast-start failover.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r9c1-t4" headers="r1c1-t4">
<p><a href="#BJEDHGCI">DISABLE FAST_START FAILOVER CONDITION</a></p>
</td>
<td class="cellalignment1484" headers="r9c1-t4 r1c2-t4">
<p>Allows a user to remove conditions for which a fast-start failover should be performed.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r10c1-t4" headers="r1c1-t4">
<p><a href="#BABFDJJH">EDIT CONFIGURATION (Property)</a></p>
</td>
<td class="cellalignment1484" headers="r10c1-t4 r1c2-t4">
<p>Changes the value of a property for the broker configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r11c1-t4" headers="r1c1-t4">
<p><a href="#i101829">EDIT CONFIGURATION (Protection Mode)</a></p>
</td>
<td class="cellalignment1484" headers="r11c1-t4 r1c2-t4">
<p>Changes the current protection mode setting for the broker configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r12c1-t4" headers="r1c1-t4">
<p><a href="#i101862">EDIT DATABASE (Property)</a></p>
</td>
<td class="cellalignment1484" headers="r12c1-t4 r1c2-t4">
<p>Changes the value of a property for the named database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r13c1-t4" headers="r1c1-t4">
<p><a href="#i101866">EDIT DATABASE (Rename)</a></p>
</td>
<td class="cellalignment1484" headers="r13c1-t4 r1c2-t4">
<p>Changes the name used by the broker to refer to the specified database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r14c1-t4" headers="r1c1-t4">
<p><a href="#i101874">EDIT DATABASE (State)</a></p>
</td>
<td class="cellalignment1484" headers="r14c1-t4 r1c2-t4">
<p>Changes the state of the specified database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r15c1-t4" headers="r1c1-t4">
<p><a href="#i101890">EDIT INSTANCE (AUTO PFILE)</a></p>
</td>
<td class="cellalignment1484" headers="r15c1-t4 r1c2-t4">
<p>Sets the name of the initialization parameter file for the specified instance.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r16c1-t4" headers="r1c1-t4">
<p><a href="#i101894">EDIT INSTANCE (Property)</a></p>
</td>
<td class="cellalignment1484" headers="r16c1-t4 r1c2-t4">
<p>Changes the value of a property for the specified instance.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r17c1-t4" headers="r1c1-t4">
<p><a href="#i96838">ENABLE CONFIGURATION</a></p>
</td>
<td class="cellalignment1484" headers="r17c1-t4 r1c2-t4">
<p>Enables broker management of the broker configuration and all of its databases.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r18c1-t4" headers="r1c1-t4">
<p><a href="#i101902">ENABLE DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r18c1-t4 r1c2-t4">
<p>Enables broker management of the specified database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r19c1-t4" headers="r1c1-t4">
<p><a href="#BABDFHEE">ENABLE FAST_START FAILOVER</a></p>
</td>
<td class="cellalignment1484" headers="r19c1-t4 r1c2-t4">
<p>Enables the broker to automatically failover from the primary database to a target standby database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r20c1-t4" headers="r1c1-t4">
<p><a href="#BJEEIACG">ENABLE FAST_START FAILOVER CONDITION</a></p>
</td>
<td class="cellalignment1484" headers="r20c1-t4 r1c2-t4">
<p>Allows a user to add conditions for which a fast-start failover should be performed.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r21c1-t4" headers="r1c1-t4">
<p><a href="#i78208">EXIT</a></p>
</td>
<td class="cellalignment1484" headers="r21c1-t4 r1c2-t4">
<p>Exits the Data Guard command-line interface.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r22c1-t4" headers="r1c1-t4">
<p><a href="#i92589">FAILOVER</a></p>
</td>
<td class="cellalignment1484" headers="r22c1-t4 r1c2-t4">
<p>Performs a database failover operation in which the standby database, to which DGMGRL is currently connected, fails over to the role of primary database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r23c1-t4" headers="r1c1-t4">
<p><a href="#i78276">HELP</a></p>
</td>
<td class="cellalignment1484" headers="r23c1-t4 r1c2-t4">
<p>Displays online help for the Data Guard command-line interface.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r24c1-t4" headers="r1c1-t4">
<p><a href="#i78321">QUIT</a></p>
</td>
<td class="cellalignment1484" headers="r24c1-t4 r1c2-t4">
<p>Quits the Data Guard command-line interface.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r25c1-t4" headers="r1c1-t4">
<p><a href="#BABDACIF">REINSTATE DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r25c1-t4 r1c2-t4">
<p>Reinstates the database after a failover.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r26c1-t4" headers="r1c1-t4">
<p><a href="#i78344">REMOVE CONFIGURATION</a></p>
</td>
<td class="cellalignment1484" headers="r26c1-t4 r1c2-t4">
<p>Removes the broker configuration including all of its database profiles from the broker configuration file.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r27c1-t4" headers="r1c1-t4">
<p><a href="#i101921">REMOVE DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r27c1-t4 r1c2-t4">
<p>Removes the specified standby database profile from the broker configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r28c1-t4" headers="r1c1-t4">
<p><a href="#i101925">REMOVE INSTANCE</a></p>
</td>
<td class="cellalignment1484" headers="r28c1-t4 r1c2-t4">
<p>Removes knowledge of an instance from an existing database profile in the broker configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r29c1-t4" headers="r1c1-t4">
<p><a href="#i89795">SHOW CONFIGURATION</a></p>
</td>
<td class="cellalignment1484" headers="r29c1-t4 r1c2-t4">
<p>Displays information about the broker configuration.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r30c1-t4" headers="r1c1-t4">
<p><a href="#i101937">SHOW DATABASE</a></p>
</td>
<td class="cellalignment1484" headers="r30c1-t4 r1c2-t4">
<p>Displays information about the specified database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r31c1-t4" headers="r1c1-t4">
<p><a href="#BJEDCCFH">SHOW FAST_START FAILOVER</a></p>
</td>
<td class="cellalignment1484" headers="r31c1-t4 r1c2-t4">
<p>Displays all fast-start failover related information.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r32c1-t4" headers="r1c1-t4">
<p><a href="#i101941">SHOW INSTANCE</a></p>
</td>
<td class="cellalignment1484" headers="r32c1-t4 r1c2-t4">
<p>Displays information about the specified instance.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r33c1-t4" headers="r1c1-t4">
<p><a href="#i79232">SHUTDOWN</a></p>
</td>
<td class="cellalignment1484" headers="r33c1-t4 r1c2-t4">
<p>Shuts down a currently running Oracle database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r34c1-t4" headers="r1c1-t4">
<p><a href="#BABJECGA">START OBSERVER</a></p>
</td>
<td class="cellalignment1484" headers="r34c1-t4 r1c2-t4">
<p>Starts the observer.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r35c1-t4" headers="r1c1-t4">
<p><a href="#i79261">STARTUP</a></p>
</td>
<td class="cellalignment1484" headers="r35c1-t4 r1c2-t4">
<p>Starts an Oracle instance with the same options as SQL*Plus, including mounting and opening a database.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r36c1-t4" headers="r1c1-t4">
<p><a href="#BABIAHGE">STOP OBSERVER</a></p>
</td>
<td class="cellalignment1484" headers="r36c1-t4 r1c2-t4">
<p>Stops the observer.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r37c1-t4" headers="r1c1-t4">
<p><a href="#i86423">SWITCHOVER</a></p>
</td>
<td class="cellalignment1484" headers="r37c1-t4 r1c2-t4">
<p>Performs a switchover operation in which the current primary database becomes a standby database, and the specified standby database becomes the primary database.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="sect2" -->
<a id="i91611"></a>
<div id="DGBKR605" class="sect2">
<h3 class="sect2"><span class="secnum">7.1.3</span> DGMGRL Command Usage Notes</h3>
<p>To use DGMGRL, the following must be true:</p>
<ul>
<li>
<p>The <a id="sthref773"></a><a id="sthref774"></a><code dir="ltr">DG_BROKER_START</code> dynamic initialization parameter is set to <code dir="ltr">TRUE</code>.</p>
</li>
<li>
<p>To enable broker operations that require restarting instances without manual intervention, Oracle Net Services must be configured on each of the hosts that contain the primary and standby database instances. Specifically, the listener.ora file must contain static configuration information about the instance. The <code dir="ltr">GLOBAL_DBNAME</code> attribute must be set to <code dir="ltr"><span class="codeinlineitalic">db_unique_name</span></code><code dir="ltr">_DGMGRL.</code><code dir="ltr"><span class="codeinlineitalic">db_domain</span></code>. See <a href="install.htm#BABECEJC">Section 2.2</a> for additional information.</p>
</li>
<li>
<p>The Connect Identifier used while creating the configuration or adding a database, must be resolvable from any of the hosts in the configuration.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="cli.htm#g1025435">Chapter 6</a> for more information about preparing and starting Oracle Data Guard broker. See the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about setting up the network files and listener on the standby database.</div>
</li>
<li>
<p>You must have <a id="sthref775"></a>SYSDBA privileges to use the Data Guard command-line interface.<a id="sthref776"></a> Do not include <code dir="ltr">AS SYSDBA</code> on the <code dir="ltr">CONNECT</code> command because SYSDBA is the default setting for this command.</p>
</li>
<li>
<p>If you specify more than one option on the command, you can specify the options in any order.</p>
</li>
<li>
<p>A semicolon is required at the end of each DGMGRL command.</p>
</li>
<li>
<p>Characters specified in a <a id="sthref777"></a><a id="sthref778"></a>DGMGRL command string value are interpreted as lowercase characters, unless enclosed in double (") or single (') quotation marks. For example, database and DatAbaSe are equivalent, but "database" and "DatAbaSe" are not.</p>
</li>
<li>
<p>You can use the backslash (\) to escape a single quotation mark ('), a double quotation mark ("), and the backslash character (\) itself if these characters appear in a character string.</p>
</li>
<li>
<p>Some operations on a broker configuration may require that one or more databases be shut down and restarted. In most cases, DGMGRL will automatically shut down and restart a given database for you if the following are true:</p>
<ul>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> is the SID (this applies to Enterprise Manager as well as DGMGRL).</p>
</li>
<li>
<p>The broker must be able to connect to the database using the same credentials given in the last <code dir="ltr">CONNECT</code> command, even if the last <code dir="ltr">CONNECT</code> command was used to connect to another database.</p>
</li>
</ul>
</li>
</ul>
<p class="subhead2"><a id="DGBKR3610"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3710"></a><a id="sthref779"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>This example demonstrates how to connect to the DGMGRL command-line interface on a local system.</p>
<pre dir="ltr">
% dgmgrl
.
.
.
Welcome to DGMGRL, type "help" for information.

DGMGRL&gt; CONNECT sys;
Password: <span class="italic">password</span>
Connected.
</pre></dd>
<dd><a id="DGBKR3711"></a><a id="sthref780"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>This example demonstrates how to connect to the Data Guard (DGMGRL) command-line interface on a remote system.</p>
<pre dir="ltr">
DGMGRL&gt; CONNECT sys@remote-stby;
Password: <span class="italic">password</span>
Connected.
</pre></dd>
</dl>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="BABCHHGJ"></a>
<div id="DGBKR610" class="sect1">
<h2 class="sect1"><span class="secnum">7.2</span> Exiting the Data Guard Command-Line Interface</h2>
<p><a id="sthref781"></a>When you are done working with the command-line interface and want to return to the operating system, enter the <code dir="ltr">EXIT</code> or <code dir="ltr">QUIT</code> command at the DGMGRL command prompt. For example:</p>
<pre dir="ltr">
DGMGRL&gt; EXIT;
</pre></div>
<!-- class="sect1" -->
<div class="refentry"><a id="BABGIFID"></a>
<div id="DGBKR615" class="refsect1">
<h2 class="refsect1">ADD DATABASE</h2>
<p>Creates a new standby database profile and adds it to the existing broker configuration. The <code dir="ltr">AS CONNECT IDENTIFIER</code> clause is optional. If you do not specify this clause, the broker will search the <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameters on the primary database for an entry that corresponds to the database being added.</p>
<p>The <code dir="ltr">MAINTAINED AS</code> clause allows you the option of specifying the standby database type. Otherwise, the broker automatically determines whether the standby database type is a physical, logical, or snapshot standby database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref782"></a>Format</p>
<p class="synopsis">ADD DATABASE <span class="italic">database-name</span></p>
<p class="synopsis">[AS CONNECT IDENTIFIER IS <span class="syntaxinlineitalic">connect-identifier</span>]</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref783"></a>Command Parameters</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name that will be used by the broker to refer to this standby database. It must match (case-insensitive) the value of the corresponding database <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter.</p>
</dd>
<dt>connect-identifier</dt>
<dd>
<p>A fully specified connect descriptor or a name to be resolved by an Oracle Net Services naming method (for example, TNS). The value you specify is also used as the initial value of the <code dir="ltr">DGConnectIdentifier</code> database property. If you do not specify this option, the broker will search the primary database <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> parameters for a corresponding entry to the standby database and use its <code dir="ltr">SERVICE</code> value for the connect-identifier.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref784"></a>Usage Notes</p>
<ul>
<li>
<p>To issue this command, you must connect to the primary database or to an enabled standby database that is already in the configuration.</p>
</li>
<li>
<p>The broker uses the specified <code dir="ltr">connect-identifier</code> to communicate with the specified database from other databases. Therefore, you must ensure that the <code dir="ltr">connect-identifier</code> can be used to address the specified database from all databases in your configuration. For example, if TNS is used as the naming method, you must ensure that the tnsnames.ora file on every database and instance that is part of the configuration contains an entry for the <code dir="ltr">connect-identifier</code>. The connect identifier must resolve to the same connect descriptor. If the database that is being added is an Oracle RAC database, the <code dir="ltr">connect-identifier</code> provided here must reach all instances of the Oracle RAC, preferably with <code dir="ltr">FAILOVER</code> attributes set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></div>
</li>
<li>
<p>If the connection cannot be made, the broker does not add the new database to the configuration.</p>
</li>
<li>
<p>The <code dir="ltr">MAINTAINED AS</code> clause is deprecated in this release. The broker will determine standby database type automatically.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref785"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3712"></a><a id="sthref786"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to add a database named <code dir="ltr">South_Sales</code>.</p>
<pre dir="ltr">
DGMGRL&gt; ADD DATABASE South_Sales AS CONNECT IDENTIFIER IS South_Sales.example.com;
Database "South_Sales" added
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i77586"></a>
<div id="DGBKR620" class="refsect1">
<h2 class="refsect1">CONNECT</h2>
<p>Connects <a id="sthref787"></a><a id="sthref788"></a>a given username to the specified database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref789"></a>Format</p>
<p class="synopsis">CONNECT <span class="syntaxinlineitalic">username</span> [@<span class="syntaxinlineitalic">connect-identifier</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref790"></a>Command Parameters</p>
<dl>
<dt>username</dt>
<dd>
<p>Represents the username with which you want to connect to the database. You will be prompted for a password after you enter a username and optionally, a connect-identifier.</p>
</dd>
<dt>connect-identifier</dt>
<dd>
<p>This parameter is optional. It is an Oracle Net Services connect identifier for the database to which you want to connect. The exact syntax depends upon the Oracle Net Services communications protocol your Oracle installation uses.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref791"></a>Usage Notes</p>
<ul>
<li>
<p>The username and password must be valid for the database to which you are trying to connect. The username you specify must have the SYSDBA privilege. You do not have to include <code dir="ltr">AS SYSDBA</code> on the <code dir="ltr">CONNECT</code> command because SYSDBA is the default setting for this command.</p>
</li>
<li>
<p>If the <code dir="ltr">CONNECT</code> command returns an error, check to see that you specified a valid <code dir="ltr">connect-identifier</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref792"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3713"></a><a id="sthref793"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>This example connects to the default database on the local system.</p>
<pre dir="ltr">
DGMGRL&gt; CONNECT sys;
Password: <span class="italic">password</span>
Connected.
</pre></dd>
<dd><a id="DGBKR3714"></a><a id="sthref794"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>This example connects to a remote database whose <code dir="ltr">connect-identifier</code> is <code dir="ltr">North_Sales.example.com</code>.</p>
<pre dir="ltr">
DGMGRL&gt; CONNECT sys@North_Sales.example.com;
Password: <span class="italic">password</span>
Connected.
</pre></dd>
<dd><a id="DGBKR3715"></a><a id="sthref795"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>This example connects to a database using <code dir="ltr">CONNECT '/'</code> so that connection credentials are not visible on the command line:</p>
<pre dir="ltr">
DGMGRL&gt; CONNECT /@North_Sales.example.com;
</pre>
<p>You must set up <a id="sthref796"></a><a id="sthref797"></a>Oracle Wallet or SSL to use <code dir="ltr">CONNECT '/'</code>. By setting up Oracle Wallet or SSL, you can write a script to securely start and run the observer as a background job without specifying database credentials in the script.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG" href="../../network.112/e40393/toc.htm"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for more information about Oracle Wallet and SSL</div>
</dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BJEHCAIB"></a>
<div id="DGBKR621" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">CONVERT DATABASE</h2>
<p>Converts a physical standby database to a snapshot standby database, or reverts the snapshot standby database back to a physical standby database.</p>
<p>A snapshot standby database is a fully updatable standby database. Like a physical or logical standby database, a snapshot standby database receives and archives redo data from a primary database. Unlike a physical or logical standby database, a snapshot standby database does not apply the redo data that it receives. The redo data received by a snapshot standby database is not applied until the snapshot standby is converted back into a physical standby database, after first discarding any local updates made to the snapshot standby database.</p>
<p>A snapshot standby database is best used in scenarios that require a temporary, updatable snapshot of a physical standby database. Note that because redo data received by a snapshot standby database is not applied until it is converted back into a physical standby, the time needed to perform a role transition is directly proportional to the amount of redo data that needs to be applied.</p>
<p>See <a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for additional information about snapshot standby databases.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref798"></a>Format</p>
<p class="synopsis">CONVERT DATABASE <span class="syntaxinlineitalic">db_unique_name</span> TO {SNAPSHOT | PHYSICAL} STANDBY;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref799"></a>Usage Notes</p>
<ul>
<li>
<p>A physical standby database cannot be converted to a snapshot standby database if it is the target of a fast-start failover. The <code dir="ltr">ORA-16668: operation cannot be performed on the fast-start failover target standby database</code> error will be returned.</p>
</li>
<li>
<p>Use the DGMGRL <a href="#BABGIFID">ADD DATABASE</a> command to import an existing snapshot standby database into a Data Guard broker configuration.</p>
</li>
<li>
<p>A snapshot standby database cannot be the target of a switchover or a fast-start failover.</p>
</li>
<li>
<p>A snapshot standby database can be the target of a manual failover if fast-start failover is disabled.</p>
</li>
<li>
<p>You can use the <code dir="ltr">SHOW CONFIGURATION</code> or <code dir="ltr">SHOW DATABASE</code> command to verify the conversion result. For example:</p>
<pre dir="ltr">
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Databases:
    North_Sales  - Primary database
    South_Sales  - Snapshot standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre></li>
<li>
<p>After a snapshot standby database is converted back to a physical standby database, it will be in the default state for a physical standby database, <code dir="ltr">APPLY-ON</code>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref800"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3716"></a><a id="sthref801"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Issue the following to convert a physical standby database to a snapshot standby database:</p>
<pre dir="ltr">
DGMGRL&gt; CONVERT DATABASE 'South_Sales' to SNAPSHOT STANDBY;
Converting database "South_Sales" to a Snapshot Standby database, please wait...
Database "South_Sales" converted successfully
</pre></dd>
<dd><a id="DGBKR3717"></a><a id="sthref802"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Issue the following to convert the snapshot standby database back to a physical standby database:</p>
<pre dir="ltr">
DGMGRL&gt; CONVERT DATABASE 'South_Sales' to PHYSICAL STANDBY;
Converting database "South_Sales" to a Physical Standby database, please wait...
Operation requires shutdown of instance "south_sales1" on database "South_Sales"
Shutting down instance "south_sales1"...
Database closed.
Database dismounted.
ORACLE instance shut down.
Operation requires startup of instance "south_sales1" on database "South_Sales"
Starting instance "south_sales1"...
ORACLE instance started.
Database mounted.
Continuing to convert database "South_Sales" ...
Operation requires shutdown of instance "south_sales1" on database "South_Sales"
Shutting down instance "south_sales1"...
ORA-01109: database not open
 
Database dismounted.
ORACLE instance shut down.
Operation requires startup of instance "south_sales1" on database "South_Sales"
Starting instance "south_sales1"...
ORACLE instance started.
Database mounted.
Database "South_Sales" converted successfully
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i77634"></a>
<div id="DGBKR625" class="refsect1">
<h2 class="refsect1">CREATE CONFIGURATION</h2>
<p>Crea<a id="sthref803"></a><a id="sthref804"></a><a id="sthref805"></a><a id="sthref806"></a>tes a new broker configuration and adds a primary database profile to the configuration.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref807"></a>Format</p>
<p class="synopsis">CREATE CONFIGURATION <span class="syntaxinlineitalic">configuration-name</span> AS</p>
<p class="synopsis">PRIMARY DATABASE IS <span class="syntaxinlineitalic">database-name</span></p>
<p class="synopsis">CONNECT IDENTIFIER IS <span class="syntaxinlineitalic">connect-identifier;</span></p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref808"></a>Command Parameters</p>
<dl>
<dt>configuration-name</dt>
<dd>
<p>A user-friendly name for the configuration you are creating. Valid names contain any alphanumeric characters. If spaces are included in the name, the name must be enclosed in double or single quotation marks. The name must consist of 30 or fewer bytes.</p>
</dd>
<dt>database-name</dt>
<dd>
<p>The name that will be used by the broker to refer to the primary database. It must match (case-insensitive) the value of the primary database <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter.</p>
</dd>
<dt>connect-identifier</dt>
<dd>
<p>A fully specified connect descriptor or a name to be resolved by an Oracle Net Services naming method (for example, TNS). The value you specify is also used as the initial value of the <code dir="ltr">DGConnectIdentifier</code> database property. If you do not specify this option, the broker will search the primary database <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> parameters for a corresponding entry to the standby database and use its <code dir="ltr">SERVICE</code> value for the connect-identifier.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref809"></a>Usage Notes</p>
<ul>
<li>
<p>A broker configuration is a named collection of one or more databases that you want to manage as a group. You must specify a value for each of the command parameters. There are no default values.</p>
</li>
<li>
<p>You must connect to the primary database to issue this command.</p>
</li>
<li>
<p>The broker uses the specified <code dir="ltr">connect-identifier</code> to communicate with the specified database from other databases. Therefore, you must ensure that the <code dir="ltr">connect-identifier</code> can be used to address the specified database from all databases in your configuration. For example, if TNS is used as the naming method, you must ensure that the tnsnames.ora file on every database and instance that is part of the configuration contains an entry for the <code dir="ltr">connect-identifier</code>. The connect identifier must resolve to the same connect descriptor. If the database that is being added is an Oracle RAC database, the <code dir="ltr">connect-identifier</code> provided here must reach all instances of the Oracle RAC, preferably with <code dir="ltr">FAILOVER</code> attributes set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></div>
</li>
<li>
<p>To add standby databases after you create the broker configuration, use the <a href="#BABGIFID">ADD DATABASE</a> command.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref810"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3718"></a><a id="sthref811"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example creates a new broker configuration named <code dir="ltr">DRSolution</code> with a primary database named <code dir="ltr">North_Sales</code>.</p>
<pre dir="ltr">
DGMGRL&gt; CREATE CONFIGURATION 'DRSolution' AS
&gt; PRIMARY DATABASE IS 'North_Sales'
&gt; CONNECT IDENTIFIER IS North_Sales.example.com;
Configuration "DRSolution" created with primary database "North_Sales"
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i77901"></a>
<div id="DGBKR630" class="refsect1">
<h2 class="refsect1">DISABLE CONFIGURATION</h2>
<p>Disa<a id="sthref812"></a><a id="sthref813"></a><a id="sthref814"></a><a id="sthref815"></a><a id="sthref816"></a>bles broker management of a configuration so that the configuration and all of its databases are no longer managed by the broker.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref817"></a>Format</p>
<p class="synopsis">DISABLE CONFIGURATION;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref818"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref819"></a>Usage Notes</p>
<ul>
<li>
<p>A disabled configuration and all of its constituent databases are no longer managed by the broker.</p>
</li>
<li>
<p>The only way to disable broker management of the primary database is to use the <code dir="ltr">DISABLE CONFIGURATION</code> command.</p>
</li>
<li>
<p>This command does not remove the broker configuration from the configuration file. See the <a href="#i78344">REMOVE CONFIGURATION</a> command for more information about removing the configuration.</p>
</li>
<li>
<p>You can edit database properties and modify the configuration's protection mode while the configuration is disabled. However, any changes made to properties or to the protection mode will not take effect until the configuration is enabled.</p>
</li>
<li>
<p>This command cannot be executed if fast-start failover is enabled.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref820"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3719"></a><a id="sthref821"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example disables management of the broker configuration and all of its databases.</p>
<pre dir="ltr">
DGMGRL&gt; DISABLE CONFIGURATION;
Disabled.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101821"></a>
<div id="DGBKR635" class="refsect1">
<h2 class="refsect1">DISABLE DATABASE</h2>
<p>Disables <a id="sthref822"></a><a id="sthref823"></a><a id="sthref824"></a>broker management of the named standby database. This means that broker directed state changes will be disallowed for this database, and the broker will not monitor the database for health status or for monitorable database properties.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref825"></a>Format</p>
<p class="synopsis">DISABLE DATABASE <span class="syntaxinlineitalic">database-name</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref826"></a>Command Parameter</p>
<dl>
<dt>database-name</dt>
<dd>
<p>Name of the standby database to be disabled.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref827"></a>Usage Notes</p>
<ul>
<li>
<p>You cannot specify the name of a primary database.</p>
</li>
<li>
<p>Use the <code dir="ltr">DISABLE CONFIGURATION</code> command to disable the primary and all standby databases.</p>
</li>
<li>
<p>If the sole standby database is disabled, you have no failover option. This standby database is not viable for failover until it is reenabled.</p>
</li>
<li>
<p>This command cannot be used to disable the fast-start failover target database when fast-start failover is enabled.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref828"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3720"></a><a id="sthref829"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to disable a database named <code dir="ltr">South_Sales</code>.</p>
<pre dir="ltr">
DGMGRL&gt; DISABLE DATABASE 'South_Sales';
Disabled.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABGIAAB"></a>
<div id="DGBKR637" class="refsect1">
<h2 class="refsect1">DISABLE FAST_START FAILOVER</h2>
<p>Disables fast-start failover and prevent<a id="sthref830"></a><a id="sthref831"></a><a id="sthref832"></a>s the observer from initiating a failover to the target standby database. See <a href="sofo.htm#BCGJEGAF">Section 5.5.5, "Disabling Fast-Start Failover"</a> for additional information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref833"></a>Format</p>
<p class="synopsis">DISABLE FAST_START FAILOVER [ FORCE ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref834"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref835"></a>Usage Notes</p>
<ul>
<li>
<p>If the primary and target standby database have a network connection, use <code dir="ltr">DISABLE FAST_START FAILOVER</code> <span class="italic">without</span> the <code dir="ltr">FORCE</code> option to disable fast-start failover on all databases in the broker configuration. If errors occur during the disable operation, the broker returns an error message and stops the disable operation. You may need to reissue the <code dir="ltr">DISABLE FAST_START FAILOVER</code> command with the <code dir="ltr">FORCE</code> option to override the error conditions and disable fast-start failover on the database to which you are connected. See <a href="sofo.htm#BCGJEGAF">Section 5.5.5, "Disabling Fast-Start Failover"</a> for more information.</p>
</li>
<li>
<p>Use <code dir="ltr">DISABLE FAST_START FAILOVER</code> <span class="italic">with</span> the <code dir="ltr">F<a id="sthref836"></a>ORCE</code> option when the network between the primary and target standby databases is disconnected or when the database upon which the command is received does not have a connection with the primary database. The <code dir="ltr">FORCE</code> option disables fast-start failover on the database to which you are connected, even when errors occur.</p>
</li>
<li>
<p>Disabling fast-start failover with the <code dir="ltr">FORCE</code> option on a primary database that is disconnected from the observer and the target standby database does not prevent the observer from initiating a fast-start failover to the target standby database.</p>
</li>
<li>
<p>You can disable fast-start failover while connected to any database in the broker configuration so long as connectivity exists between that database and the primary.</p>
</li>
<li>
<p>If disabled by force at the target standby database and the connection subsequently resumes with the primary database, fast-start failover is disabled on all databases in the configuration.</p>
</li>
<li>
<p>Disabling fast-start failover with the <code dir="ltr">FORCE</code> option while connected to the primary will disable fast-start failover on the target standby database if there is network connectivity between both databases.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref837"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3721"></a><a id="sthref838"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to disable fast-start failover.</p>
<pre dir="ltr">
DGMGRL&gt; DISABLE FAST_START FAILOVER;
Disabled.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BJEDHGCI"></a>
<div id="DGBKR3433" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">DISABLE FAST_START FAILOVER CONDITION<a id="sthref839"></a><a id="sthref840"></a><a id="sthref841"></a></h2>
<p>Allows a user to remove conditions for which a fast-start failover should be performed.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref842"></a>Format</p>
<p class="synopsis">DISABLE FAST_START FAILOVER CONDITION <span class="italic">value</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref843"></a>Command Parameters</p>
<dl>
<dt>value</dt>
<dd>
<p>Possible values are those described in the <code dir="ltr">SHOW FAST_START FAILOVER</code> command as Health Conditions or Oracle error numbers.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref844"></a>Usage Notes</p>
<p>An error will be raised if the condition is not recognized or if it has not been set.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref845"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3722"></a><a id="sthref846"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<pre dir="ltr">
DISABLE FAST_START FAILOVER CONDITION "Corrupted Controlfile";
</pre>
<p>This specifies that the detection of a corrupted controlfile does not automatically initiate an immediate fast-start failover.</p>
</dd>
<dd><a id="DGBKR3723"></a><a id="sthref847"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<pre dir="ltr">
DISABLE FAST_START FAILOVER CONDITION 27102;
</pre>
<p>This specifies that the <code dir="ltr">ORA-27102</code> error does not automatically initiate an immediate fast-start failover.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABFDJJH"></a>
<div id="DGBKR638" class="refsect1">
<h2 class="refsect1">E<a id="sthref848"></a>DIT CONFIGURATION (Property)</h2>
<p>Changes the value of a p<a id="sthref849"></a><a id="sthref850"></a>roperty for the broker configuration.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref851"></a>Format</p>
<p class="synopsis">EDIT CONFIGURATION SET PROPERTY <span class="syntaxinlineitalic">property-name</span> <span class="syntaxinlineitalic">= value</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref852"></a>Command Parameter</p>
<dl>
<dt>property-name</dt>
<dd>
<p>The name of a configuration property.</p>
</dd>
<dt>value</dt>
<dd>
<p>The new value for the property.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#g1044508">Chapter 4</a> and <a href="dbpropref.htm#g1012962">Chapter 8</a> for information about configuration properties</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref853"></a>Usage Notes</p>
<ul>
<li>
<p>Issue this command while connected to the primary database or to any standby database in the broker configuration having connectivity to the primary database.</p>
</li>
<li>
<p>Use the <code dir="ltr">SHOW CONFIGURATION</code> command to display the current property information for the configuration.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref854"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3724"></a><a id="sthref855"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to set the <code dir="ltr">FastStartFailoverThreshold</code> configuration property to 90 seconds.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT CONFIGURATION SET PROPERTY FastStartFailoverThreshold=90;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101829"></a>
<div id="DGBKR640" class="refsect1">
<h2 class="refsect1">E<a id="sthref856"></a>DIT CONFIGURATION (Protection Mode)</h2>
<p>Edits the <a id="sthref857"></a>current protection mode setting for the<a id="sthref858"></a> <a id="sthref859"></a>broker configuration.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref860"></a>Format</p>
<p class="synopsis">EDIT CONFIGURATION SET PROTECTION MODE AS <span class="syntaxinlineitalic">protection-mode</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref861"></a>Command Parameter</p>
<dl>
<dt>protection-mode</dt>
<dd>
<p>The <a id="sthref862"></a>data protection mode in which you want the configuration to run when the configuration is enabled. The possible protection modes are:</p>
<br />
<code dir="ltr">MAXPROTECTION</code><br />
<code dir="ltr">MAXAVAILABILITY</code><br />
<code dir="ltr">MAXPERFORMANCE</code></dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref863"></a>Usage Notes</p>
<ul>
<li>
<p>Before you use the <code dir="ltr">EDIT CONFIGURATION</code> command to set the protection mode to either the <code dir="ltr">MAXPROTECTION</code> or <code dir="ltr">MAXAVAILABILITY</code> mode, ensure that at least one standby database has its <code dir="ltr">LogXptMode</code> database property set to <code dir="ltr">SYNC</code>.</p>
</li>
<li>
<p>The following table shows the configuration protection modes and the minimum corresponding settings for redo transport services:</p>
<div class="inftblinformal">
<table class="cellalignment1489" title="Configuration Protection Modes" summary="the configuration protection modes and minimum corresponding settings for log transport services" dir="ltr">
<thead>
<tr class="cellalignment1478">
<th class="cellalignment1490" id="r1c1-t10">Protection Mode</th>
<th class="cellalignment1490" id="r1c2-t10">Redo Transport</th>
<th class="cellalignment1490" id="r1c3-t10">Standby Redo Log Files Needed?</th>
<th class="cellalignment1490" id="r1c4-t10">Usable with Fast-Start Failover?</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r2c1-t10" headers="r1c1-t10"><code dir="ltr">MAXPROTECTION</code></td>
<td class="cellalignment1484" headers="r2c1-t10 r1c2-t10"><code dir="ltr">SYNC</code></td>
<td class="cellalignment1484" headers="r2c1-t10 r1c3-t10">Yes</td>
<td class="cellalignment1484" headers="r2c1-t10 r1c4-t10">No</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r3c1-t10" headers="r1c1-t10"><code dir="ltr">MAXAVAILABILITY</code></td>
<td class="cellalignment1484" headers="r3c1-t10 r1c2-t10"><code dir="ltr">SYNC</code></td>
<td class="cellalignment1484" headers="r3c1-t10 r1c3-t10">Yes</td>
<td class="cellalignment1484" headers="r3c1-t10 r1c4-t10">Yes</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r4c1-t10" headers="r1c1-t10"><code dir="ltr">MAXPERFORMANCE</code></td>
<td class="cellalignment1484" headers="r4c1-t10 r1c2-t10"><code dir="ltr">ASYNC</code></td>
<td class="cellalignment1484" headers="r4c1-t10 r1c3-t10">Yes</td>
<td class="cellalignment1484" headers="r4c1-t10 r1c4-t10">Yes</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>The default protection mode for the configuration is <code dir="ltr">MAXPERFORMANCE</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#g1044508">Chapter 4</a> for more information about the protection modes and redo transport services</div>
</li>
<li>
<p><code dir="ltr">MAXAVAILABILITY</code> or <code dir="ltr">MAXPERFORMANCE</code> is required in order to enable fast-start failover.</p>
</li>
<li>
<p>This command cannot be executed if fast-start failover is enabled.</p>
</li>
<li>
<p>After you change the protection mode, the broker will automatically restart the primary database, if necessary.</p>
</li>
<li>
<p>Use the <code dir="ltr">SHOW CONFIGURATION</code> command to display the current protection mode for the configuration.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - DRSolution
 
  <span class="bold">Protection Mode: MaxPerformance</span>
  Databases:
    North_Sales  - Primary database
    South_Sales     - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration Status:
SUCCESS
</pre></li>
</ul>
<p>If broker management of the configuration is disabled when you enter the <code dir="ltr">EDIT CONFIGURATION</code> command, the protection mode of the configuration does not take effect until the next time you enable the configuration with the <a href="#i96838">ENABLE CONFIGURATION</a> command.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref864"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3725"></a><a id="sthref865"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to upgrade the broker configuration to the <code dir="ltr">MAXAVAILABILITY</code> protection mode.</p>
<p>Verify that standby redo log files are configured on the standby database and that the redo transport service is set to <code dir="ltr">SYNC</code>, for example:</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 'LogXptMode'='SYNC';
Property "LogXptMode" updated
 
DGMGRL&gt; EDIT CONFIGURATION SET PROTECTION MODE AS MAXAVAILABILITY;
Succeeded.

</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101862"></a>
<div id="DGBKR645" class="refsect1">
<h2 class="refsect1">EDIT DATABASE (Property)</h2>
<p>Changes the <a id="sthref866"></a><a id="sthref867"></a><a id="sthref868"></a>value of a property for the named database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref869"></a>Format</p>
<p class="synopsis">EDIT DATABASE <span class="syntaxinlineitalic">database-name</span></p>
<p class="synopsis">SET PROPERTY <span class="syntaxinlineitalic">property-name</span> <span class="syntaxinlineitalic">= value</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref870"></a>Command Parameters</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the database for which you want to change a property value.</p>
</dd>
<dt>property-name</dt>
<dd>
<p>The name of an existing database-specific property. If this is an Oracle RAC database, this property change affects all instances of the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#g1044508">Chapter 4</a> and <a href="dbpropref.htm#g1012962">Chapter 8</a> for information about properties.</div>
</dd>
<dt>value</dt>
<dd>
<p>The new value for the property.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
This command can be used to change the value of an instance-specific property if and only if just one instance is known by the broker for the named database. An attempt to use this command to change an instance-specific property when the broker knows of multiple instances of the database will be rejected. It is recommended to only use <code dir="ltr">EDIT INSTANCE (property)</code> to change the value of an instance-specific property.</div>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref871"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3726"></a><a id="sthref872"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Edit a configurable database-specific property at the database level.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY 'ArchiveLagTarget'=1200;
Property "ArchiveLagTarget" updated
</pre></dd>
<dd><a id="DGBKR3727"></a><a id="sthref873"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Edit a configurable instance-specific property of a non-Oracle RAC database.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET PROPERTY 
&gt; 'StandbyArchiveLocation'='/archfs/arch/';
Property "StandbyArchiveLocation" updated
</pre></dd>
<dd><a id="DGBKR3728"></a><a id="sthref874"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Edit a configurable instance-specific property of an Oracle RAC database. This will not succeed because it is not clear to which instance the property change should be applied.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'North_Sales' SET PROPERTY
&gt; 'StandbyArchiveLocation'='/archfs/arch/';
Error: ORA-16587: ambiguous object specified to Data Guard broker

Failed.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101866"></a>
<div id="DGBKR650" class="refsect1">
<h2 class="refsect1">EDIT DATABASE (Rename)</h2>
<p>Changes <a id="sthref875"></a><a id="sthref876"></a><a id="sthref877"></a>the name used by the broker to refer to the specified database, as recorded in that database's profile in the broker configuration.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref878"></a>Format</p>
<p class="synopsis">EDIT DATABASE <span class="syntaxinlineitalic">database-name</span></p>
<p class="synopsis">RENAME TO <span class="syntaxinlineitalic">new-database-name</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref879"></a>Command Parameters</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the database that you want to change.</p>
</dd>
<dt>new-database-name</dt>
<dd>
<p>The name of the new database.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref880"></a>Usage Notes</p>
<ul>
<li>
<p>Use this command to track changes to the <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter for this database.</p>
<div class="infoboxnotewarn">
<p class="notep1">Caution:</p>
<span class="bold">The</span> <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> <span class="bold">must always match the value for that database's</span> <code dir="ltr">DB_UNIQUE_NAME</code> <span class="bold">initialization parameter</span>.</div>
</li>
<li>
<p>This command can only be done when broker management of the database that you are renaming is disabled.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref881"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3729"></a><a id="sthref882"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to edit and rename a database.</p>
<pre dir="ltr">
DGMGRL&gt; DISABLE DATABASE 'South_Sales_typo';
Disabled.

DGMGRL&gt; EDIT DATABASE 'South_Sales_typo' RENAME TO 'South_Sales';
Succeeded.

DGMGRL&gt; ENABLE DATABASE 'South_Sales';
Enabled.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101874"></a>
<div id="DGBKR655" class="refsect1"><a id="CIHECCFJ"></a>
<h2 class="refsect1">EDIT DATABASE (State)</h2>
<p>Changes <a id="sthref883"></a><a id="sthref884"></a><a id="sthref885"></a>the state of the specified database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref886"></a>Format</p>
<p class="synopsis">EDIT DATABASE <span class="syntaxinlineitalic">database-name</span></p>
<p class="synopsis">SET STATE = <span class="syntaxinlineitalic">state</span></p>
<p class="synopsis">[WITH APPLY INSTANCE = <span class="syntaxinlineitalic">instance-name</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref887"></a>Command Parameters</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the database for which you want to change the state.</p>
</dd>
<dt>state</dt>
<dd>
<p>The state in which you want the database to be running. The possible states are:</p>
<br />
<code dir="ltr">TRANSPORT-ON</code> (primary database only)<br />
<code dir="ltr">TRANSPORT-OFF</code> (primary database only)<br />
<code dir="ltr">APPLY-ON</code> (physical or logical standby database only)<br />
<code dir="ltr">APPLY-OFF</code> (physical or logical standby database only)</dd>
<dt>instance-name</dt>
<dd>
<p>The name of the instance you want to become the apply instance if this is an Oracle RAC standby database.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref888"></a>Usage Notes</p>
<ul>
<li>
<p>If the target state is <code dir="ltr">APPLY-ON</code> and this database is currently a physical or logical standby database, the optional <code dir="ltr">WITH APPLY INSTANCE</code> clause specifies which instance will become the apply instance.</p>
</li>
<li>
<p>If the target state is not <code dir="ltr">APPLY-ON</code> or if the database is currently in the primary role, the <code dir="ltr">WITH APPLY INSTANCE</code> clause is ignored even if it is specified.</p>
</li>
<li>
<p>You cannot change the state of a snapshot standby database.</p>
</li>
<li>
<p>All instances of an Oracle RAC database are affected by this database state change.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref889"></a>Command Example</p>
<p>The following examples show how to change the state of a database.</p>
<dl>
<dd><a id="DGBKR3730"></a><a id="sthref890"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<pre dir="ltr">
DGMGRL&gt; EDIT DATABASE 'South_Sales' SET STATE='APPLY-ON';
Succeeded.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101890"></a>
<div id="DGBKR660" class="refsect1">
<h2 class="refsect1">EDIT INSTANCE (AUTO PFILE)</h2>
<p>Sets the <a id="sthref891"></a><a id="sthref892"></a><a id="sthref893"></a>name of the initialization parameter file for the specified instance.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref894"></a>Format</p>
<p class="synopsis">EDIT INSTANCE <span class="syntaxinlineitalic">instance-name</span></p>
<p class="synopsis">[ON DATABASE <span class="syntaxinlineitalic">database-name</span>]</p>
<p class="synopsis">SET AUTO PFILE [= { <span class="syntaxinlineitalic">initialization-file</span> | OFF } ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref895"></a>Command Parameters</p>
<dl>
<dt>instance-name</dt>
<dd>
<p>The name of the instance (SID) for which you want to specify its initialization parameter file.</p>
</dd>
<dt>database-name</dt>
<dd>
<p>The name of the database to which the <code dir="ltr">instance-name</code> is associated.</p>
</dd>
<dt>initialization-file</dt>
<dd>
<p>Executes the startup operation for the instance when a subsequent broker operation requires the instance to be started automatically. If <code dir="ltr">SET AUTO PFILE</code> is set to <code dir="ltr">OFF</code>, automatic restart of that instance is disabled. When a subsequent operation needs to start that instance, you must start it manually. If you do not specify <code dir="ltr">SET AUTO PFILE</code> for the instance, the automatic startup operation looks for the initialization parameter file at the default location.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref896"></a>Usage Notes</p>
<ul>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> can be unique across the configuration. If <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> is not unique, you must specify both the <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> and the <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> to fully identify the instance.</p>
</li>
<li>
<p><code dir="ltr">SET AUTO PFILE</code> is valid only for the duration of the current DGMGRL session. You must specify <code dir="ltr">SET AUTO PFILE</code> again if you quit and reenter DGMGRL.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref897"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3731"></a><a id="sthref898"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to change the parameter file used to start an instance of a database.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT INSTANCE 'south_sales1' ON DATABASE 'South_Sales' 
&gt; SET AUTO PFILE='initsales1.ora';
Instance 'south_sales1' updated
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101894"></a>
<div id="DGBKR665" class="refsect1">
<h2 class="refsect1">EDIT INSTANCE (Property)</h2>
<p>Changes <a id="sthref899"></a><a id="sthref900"></a><a id="sthref901"></a>the value of an instance-specific property for the specified instance(s).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref902"></a>Format</p>
<p class="synopsis">EDIT INSTANCE { {<span class="syntaxinlineitalic">instance-name</span> [ON DATABASE <span class="syntaxinlineitalic">database-name</span>] } | {* ON DATABASE <span class="syntaxinlineitalic">database-name</span>} }</p>
<p class="synopsis">SET PROPERTY <span class="syntaxinlineitalic">property-name</span> = <span class="syntaxinlineitalic">value</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref903"></a>Command Parameters</p>
<dl>
<dt>instance-name</dt>
<dd>
<p>The name of the instance (SID) for which you want to change an instance-specific property's value. If an asterisk is specified for instance-name, the <code dir="ltr">ON DATABASE</code> clause must also be specified and this change will be applied to the specified property for each instance associated with that database. See <a href="dbpropref.htm#g1012962">Chapter 8</a> for the instance-specific properties that can be changed using the <code dir="ltr">EDIT INSTANCE * ON DATABASE</code> <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> command.</p>
</dd>
<dt>database-name</dt>
<dd>
<p>The name of the database with which the <code dir="ltr">instance-name</code> is associated. This must be specified if an asterisk is specified for <code dir="ltr">instance-name</code>, or if <code dir="ltr">instance-name</code> is not unique across the configuration</p>
</dd>
<dt>property-name</dt>
<dd>
<p>The name of the instance-specific property for which you want to set a new value.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#g1044508">Chapter 4</a> and <a href="dbpropref.htm#g1012962">Chapter 8</a> for information about properties.</div>
</dd>
<dt>value</dt>
<dd>
<p>The new value for the property.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref904"></a>Usage Notes</p>
<ul>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> can be unique across the configuration. If <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> is not unique, you must specify both the <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> and the <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> to fully identify the instance.</p>
</li>
<li>
<p>This command cannot be used to change a database-specific property.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref905"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3732"></a><a id="sthref906"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Edit an instance-specific property.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT INSTANCE 'north_sales1' ON DATABASE 'North_Sales' 
&gt; SET PROPERTY 'StandbyArchiveLocation'='/archfs/arch/';
Property "StandbyArchiveLocation" updated.
</pre></dd>
<dd><a id="DGBKR3733"></a><a id="sthref907"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Edit a database-specific property. This will not be allowed.</p>
<pre dir="ltr">
DGMGRL&gt; EDIT INSTANCE 'north_sales1' ON DATABASE 'North_Sales' 
&gt; SET PROPERTY 'LogXptMode'='SYNC';
Error: ORA-16586: cannot change database property with EDIT INSTANCE command

Failed.
</pre></dd>
<dd><a id="DGBKR3734"></a><a id="sthref908"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Change the value of an instance-specific property for all instances of an Oracle RAC database:</p>
<pre dir="ltr">
DGMGRL&gt; EDIT INSTANCE * ON DATABASE 'North_Sales' LogArchiveTrace=4095;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i96838"></a>
<div id="DGBKR670" class="refsect1">
<h2 class="refsect1">ENABLE CONFIGURATION</h2>
<p>Ena<a id="sthref909"></a><a id="sthref910"></a>ble<a id="sthref911"></a><a id="sthref912"></a>s the broker to actively manage the broker configuration including all of its databases.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref913"></a>Format</p>
<p class="synopsis">ENABLE CONFIGURATION;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref914"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref915"></a>Usage Notes</p>
<ul>
<li>
<p>Use this command to enable broker management of the primary database and all standby databases, if these standby database are not explicitly disabled by the user.</p>
</li>
<li>
<p>You must connect to the primary database to issue this command.</p>
</li>
<li>
<p>By default, broker management of the configuration's databases is enabled in the <code dir="ltr">TRANSPORT-ON</code> state with redo transport services turned on at the primary database and <code dir="ltr">APPLY-ON</code> with log apply services started at the standby databases. You can change the state of a database using the <a href="#i101874">EDIT DATABASE (State)</a> command, but not when the database or the entire configuration is disabled.</p>
</li>
<li>
<p>Use the <a href="#i89795">SHOW CONFIGURATION</a> command to display information about the configuration.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref916"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3735"></a><a id="sthref917"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example enables management of a broker configuration.</p>
<pre dir="ltr">
DGMGRL&gt; ENABLE CONFIGURATION;
Enabled.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101902"></a>
<div id="DGBKR675" class="refsect1">
<h2 class="refsect1">ENABLE DATABASE</h2>
<p>Enables <a id="sthref918"></a><a id="sthref919"></a>broker management of the specified standby database.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
Do not issue the <code dir="ltr">ENABLE DATABASE</code> command on a standby database that needs to be reinstated. See <a href="sofo.htm#CHDEHEEF">Section 5.4.3</a> for more details.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref920"></a>Format</p>
<p class="synopsis">ENABLE DATABASE <span class="syntaxinlineitalic">database-name</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref921"></a>Command Parameter</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the standby database for which you want to enable broker management.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref922"></a>Usage Notes</p>
<ul>
<li>
<p>You must connect to the primary database or to an already enabled standby database to issue this command.</p>
</li>
<li>
<p>A standby database may have been disabled by the broker as a consequence of a prior failover or switchover operation. See <a href="sofo.htm#CHDEHEEF">Section 5.4.3</a> to understand how the database can be reinstated or re-created.</p>
</li>
<li>
<p>By default, broker management of the physical or logical standby database is enabled in the <code dir="ltr">APPLY-ON</code> state with log apply services enabled. You can change the state of the standby database using the <a href="#CIHECCFJ">EDIT DATABASE (State)</a> command, but only when the database is enabled.</p>
</li>
<li>
<p>Use the <a href="#i101937">SHOW DATABASE</a> command to display information about the database.</p>
</li>
<li>
<p>For an Oracle RAC database, only one instance is required to be started and mounted for this command to succeed.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref923"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3736"></a><a id="sthref924"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to enable a database named <code dir="ltr">South_Sales</code>.</p>
<pre dir="ltr">
DGMGRL&gt; ENABLE DATABASE 'South_Sales';
Enabled.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABDFHEE"></a>
<div id="DGBKR677" class="refsect1">
<h2 class="refsect1">ENABLE FAST_START FAILOVER</h2>
<p>Ena<a id="sthref925"></a><a id="sthref926"></a>ble<a id="sthref927"></a><a id="sthref928"></a>s the broker to fail over to a specifically-chosen standby database in the event of loss of the primary database, without requiring you to perform any manual steps to invoke the failover. See <a href="sofo.htm#CHDDFFEC">Section 5.5.2, "Enabling Fast-Start Failover"</a> for complete information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref929"></a>Format</p>
<p class="synopsis">ENABLE FAST_START FAILOVER;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref930"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref931"></a>Usage Notes</p>
<ul>
<li>
<p>The prerequisites described in <a href="sofo.htm#BCGFFFBG">Section 5.5.1</a> must be met before you issue this command to enable fast-start failover.</p>
</li>
<li>
<p>Issuing the <code dir="ltr">ENABLE FAST_START FAILOVER</code> command does not trigger a failover, it only allows the observer that is monitoring the configuration to initiate a fast-start failover if conditions warrant a failover.</p>
</li>
<li>
<p>You can enable fast-start failover while connected to any database in the broker configuration.</p>
</li>
<li>
<p>If you do not start the observer after you have enabled fast-start failover, the <code dir="ltr">ORA-16819</code> warning is displayed for the primary and target standby databases. For example:</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'South_Sales';
Database - South_Sales
 
  Role:            PRIMARY
  Intended State:  TRANSPORT-ON
  Instance(s):
    south_sales1
 
  Database Warning(s):
    ORA-16819: fast-start failover observer not started
 
Database Status:
WARNING
</pre></li>
<li>
<p>To enable fast-start failover for a broker configuration with multiple standby databases, the <code dir="ltr">FastStartFailoverTarget</code> configuration property on the primary database must be set to point to the desired target standby database. Both the primary database and the target standby database must have:</p>
<ul>
<li>
<p>Standby redo logs configured</p>
</li>
<li>
<p>Either the <code dir="ltr">LogXptMode</code> database property set to <code dir="ltr">SYNC</code> and protection mode set to <code dir="ltr">MAXAVAILABILITY</code>, or the <code dir="ltr">LogXptMode</code> property set to <code dir="ltr">ASYNC</code> and the protection mode set to <code dir="ltr">MAXPERFORMANCE</code></p>
</li>
<li>
<p>Flashback Database enabled on both the primary and standby databases</p>
</li>
</ul>
<p>Step <a href="sofo.htm#BCGCHJJG">2</a> in <a href="sofo.htm#CHDDFFEC">Section 5.5.2</a> and <a href="dbpropref.htm#BABECDBC">Section 8.3.10</a> provide more information about the <code dir="ltr">FastStartFailoverTarget</code> configuration property.</p>
</li>
<li>
<p>Once you have enabled fast-start failover, you must comply with the restrictions described in <a href="sofo.htm#BCGEFICG">Section 5.5.2.2, "Restrictions When Fast-Start Failover is Enabled"</a>.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref932"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3737"></a><a id="sthref933"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example enables fast-start failover.</p>
<pre dir="ltr">
DGMGRL&gt; ENABLE FAST_START FAILOVER;
Enabled.
</pre></dd>
<dd><a id="DGBKR3738"></a><a id="sthref934"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows that fast-start failover was successfully enabled when the configuration is operating in maximum performance mode.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW FAST_START FAILOVER;
 
Fast-Start Failover: ENABLED
 Threshold:           30 seconds
 Target:              South_Sales
 Observer:            (none)
 Lag Limit:           30 seconds
 Shutdown Primary:    TRUE
 Auto-reinstate:      TRUE
 
Configurable Failover Conditions
 Health Conditions:
   Corrupted Controlfile          YES
   Corrupted Dictionary           YES
   Inaccessible Logfile            NO
   Stuck Archiver                  NO
   Datafile Offline               YES
 
 Oracle Error Conditions:
   (none)
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BJEEIACG"></a>
<div id="DGBKR3434" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">ENABLE FAST_START FAILOVER CONDITION<a id="sthref935"></a><a id="sthref936"></a><a id="sthref937"></a></h2>
<p>Specifies additional conditions for which a fast-start failover should be performed.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref938"></a>Format</p>
<p class="synopsis">ENABLE FAST_START FAILOVER CONDITION <span class="italic">value</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref939"></a>Command Parameters</p>
<dl>
<dt>value</dt>
<dd>
<p>Possible values are those described in the <code dir="ltr">SHOW FAST_START FAILOVER</code> command as Health Conditions or Oracle error numbers.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref940"></a>Usage Notes</p>
<ul>
<li>
<p>Possible values are the set maintained by the database health-check facility or a number corresponding to any ORA-xxxx error.</p>
</li>
<li>
<p>While the conditions maintained by the health-check facility are subject to change in the future, some common examples are shown in <a href="#BJEIGFJI">Table 7-2</a>:</p>
<div id="DGBKR3611" class="tblformal">
<p class="titleintable"><a id="sthref941"></a><a id="BJEIGFJI"></a>Table 7-2 Examples of Health Conditions</p>
<table class="cellalignment1491" title="Examples of Health Conditions" summary="Common Health Conditions that can result in a fast-start failover." dir="ltr">
<thead>
<tr class="cellalignment1478">
<th class="cellalignment1490" id="r1c1-t17">Health Condition</th>
<th class="cellalignment1490" id="r1c2-t17">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r2c1-t17" headers="r1c1-t17">
<p>"Datafile Offline"</p>
</td>
<td class="cellalignment1484" headers="r2c1-t17 r1c2-t17">
<p>Data file offline due to a write error.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r3c1-t17" headers="r1c1-t17">
<p>"Corrupted Controlfile"</p>
</td>
<td class="cellalignment1484" headers="r3c1-t17 r1c2-t17">
<p>Corrupted controlfile.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r4c1-t17" headers="r1c1-t17">
<p>"Corrupted Dictionary"</p>
</td>
<td class="cellalignment1484" headers="r4c1-t17 r1c2-t17">
<p>Dictionary corruption of a critical database object.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r5c1-t17" headers="r1c1-t17">
<p>"Inaccessible Logfile"</p>
</td>
<td class="cellalignment1484" headers="r5c1-t17 r1c2-t17">
<p>LGWR is unable to write to any member of a log group due to an I/O error.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r6c1-t17" headers="r1c1-t17">
<p>"Stuck Archiver"</p>
</td>
<td class="cellalignment1484" headers="r6c1-t17 r1c2-t17">
<p>Archiver is unable to archive a redo log because device is full or unavailable.</p>
</td>
</tr>
<tr class="cellalignment1478">
<td class="cellalignment1484" id="r7c1-t17" headers="r1c1-t17">
<p>Oracle error number (for example, 27102)</p>
</td>
<td class="cellalignment1484" headers="r7c1-t17 r1c2-t17">
<p>If the error number is encountered, a fast-start failover is performed.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<p>The following are enabled by default: "Datafile Offline," "Corrupted Controlfile," and "Corrupted Dictionary."</p>
</li>
<li>
<p>You can display these configurable conditions with the <code dir="ltr">SHOW FAST_START FAILOVER</code> command.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref942"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3739"></a><a id="sthref943"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<pre dir="ltr">
ENABLE FAST_START FAILOVER CONDITION "Corrupted Controlfile";
</pre>
<p>This specifies that a fast-start failover should be done if a corrupted controlfile is detected.</p>
</dd>
<dd><a id="DGBKR3740"></a><a id="sthref944"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<pre dir="ltr">
ENABLE FAST_START FAILOVER CONDITION 27102;
</pre>
<p>This specifies that a fast-start failover should be done if an <code dir="ltr">ORA-27102</code> error is raised.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i78208"></a>
<div id="DGBKR680" class="refsect1">
<h2 class="refsect1">EXIT</h2>
<p>Ex<a id="sthref945"></a><a id="sthref946"></a>its (quits) the command-line interface.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref947"></a>Format</p>
<p class="synopsis">EXIT;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref948"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref949"></a>Usage Notes</p>
<ul>
<li>
<p>This command has the same effect as the <a href="#i78321">QUIT</a> command.</p>
</li>
<li>
<p>A database connection is not required to execute this command. However, if you are connected, this command breaks the connection.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref950"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3741"></a><a id="sthref951"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example demonstrates how to exit (quit) the command-line interface.</p>
<pre dir="ltr">
DGMGRL&gt; EXIT;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i92589"></a>
<div id="DGBKR685" class="refsect1">
<h2 class="refsect1">FAILOVER</h2>
<p>Invokes a failover that transitions the named (target) standby database into the role of a primary database.<a id="sthref952"></a><a id="sthref953"></a><a id="sthref954"></a><a id="sthref955"></a><a id="sthref956"></a><a id="sthref957"></a><a id="sthref958"></a> This type of failover is referred to as <span class="italic">manual failover</span>. See <a href="sofo.htm#BCGBFFIH">Section 5.4, "Manual Failover"</a> for more information.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Because a failover results in a transition of a standby database to the primary role, it should be performed when the primary database has failed or is unreachable and cannot be recovered in a timely manner. Failover may or may not result in data loss depending on the protection mode in effect at the time of the failover and whether the target standby database was synchronized with the primary database.
<p>Use the <code dir="ltr">SWITCHOVER</code> command if the primary database has not failed and you want the current primary database and a standby database to switch roles with no data loss.</p>
</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref959"></a>Format</p>
<p class="synopsis">FAILOVER TO <span class="syntaxinlineitalic">database-name</span></p>
<p class="synopsis">[ IMMEDIATE ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref960"></a>Command Parameters</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of a physical, logical, or snapshot standby database that you want to fail over to the primary database role.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref961"></a>Usage Notes</p>
<ul>
<li>
<p>Always try to perform a complete failover first unless Redo Apply has stopped at the failover target due to an <code dir="ltr">ORA-752</code> or <code dir="ltr">ORA-600</code> <code dir="ltr">[3020]</code> error. If one of these errors has occurred, then before proceeding follow the guidelines in "Resolving ORA-752 or ORA-600 [3020] During Standby Recovery" in My Oracle Support Note 1265884.1 at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code>. An immediate failover should only be performed when a complete failover is unsuccessful or in the error case just noted.</p>
</li>
<li>
<p>The specified standby database must be enabled before the primary database fails. However, an enabled standby database that was shut down can be a candidate for the failover operation. In this case, restart the standby database using DGMGRL <code dir="ltr">STARTUP</code> command, then issue the <code dir="ltr">FAILOVER</code> command.</p>
</li>
<li>
<p>The failover operates on the specified standby database and changes its role to a primary database. Bystander standby databases (those not involved in the failover) remain in the standby role.</p>
</li>
<li>
<p>Before you issue the <code dir="ltr">FAILOVER</code> command, verify that you are connected to the standby database that will become the new primary database. If necessary, issue a <a href="#i77586">CONNECT</a> command to connect to the standby database to which you want to failover.</p>
</li>
<li>
<p>If the <code dir="ltr">FAILOVER</code> command is issued without any options, the standby database chosen as the failover target applies all unapplied redo it has received before changing to the primary role. This is referred to as a complete failover.</p>
</li>
<li>
<p>If the broker configuration is operating in maximum protection mode, a manual failover operation will force the protection mode to be maximum performance. The redo transport service settings are unaffected. You need to restore the desired protection mode for the resulting configuration after the failover operation.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
With fast-start failover, the broker preserves the protection mode that was in effect prior to the failover. The broker configuration cannot be in maximum protection mode while fast-start failover is enabled.</div>
</li>
<li>
<p>If the <code dir="ltr">FAILOVER</code> command is issued with the <code dir="ltr">IMMEDIATE</code> option, no attempt is made to apply any unapplied redo that has been received. This option more likely results in lost application data even when standby redo log files are configured on the standby database. Additionally, any remaining standby databases in the configuration cannot function as such until they are reinstated or re-created. See <a href="sofo.htm#CHDEHEEF">Section 5.4.3</a> for more information.</p>
</li>
<li>
<p>You can perform a manual failover or set up the broker to perform a fast-start failover. See the <a href="#BABDFHEE">ENABLE FAST_START FAILOVER</a> command for information about allowing the broker to automatically invoke failover, when conditions warrant a failover.</p>
</li>
<li>
<p>If fast-start failover is enabled, you can perform a <span class="italic">complete</span> manual failover only to the fast-start failover target standby database and only if the fast-start failover target standby database is synchronized with, or within the lag limit of, the primary database, and only when the observer is started. You cannot perform an <span class="italic">immediate</span> manual failover when fast-start failover is enabled.</p>
</li>
<li>
<p>If Flashback Database was enabled on the former (failed) primary database prior to the failover, the former primary database can be reinstated using the broker's <code dir="ltr">REINSTATE</code> command (see the <a href="#BABDACIF">REINSTATE DATABASE</a> command).</p>
<p>If failover was performed to a physical standby database, any other physical standby databases that were disabled by the failover can be reinstated if Flashback Database was enabled on the standby database and there are sufficient flashback logs available. See <a href="sofo.htm#CHDEHEEF">Section 5.4.3, "Reenabling Disabled Databases After a Role Change"</a> for step-by-step instructions.</p>
</li>
<li>
<p>The original primary database can only participate in the configuration as a standby database after it is reinstated or re-created.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
You should shut down the original primary database if it still has any active instances running prior to failing over.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="sofo.htm#CHDEHEEF">Section 5.4.3</a> about reenabling the original primary database so that it could serve as a standby database to the primary database</div>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref962"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3742"></a><a id="sthref963"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example performs a failover in which the standby database, <code dir="ltr">South_Sales</code>, transitions to the primary role:</p>
<pre dir="ltr">
DGMGRL&gt; FAILOVER TO 'South_Sales';
Performing failover NOW, please wait...
Failover succeeded, new primary is "South_Sales"

DGMGRL&gt; SHOW CONFIGURATION;
Configuration - DRSolution
 
  Protection Mode: MaxPerformance
  Databases:
    South_Sales - Primary database
    North_Sales - Physical standby database (disabled)
      ORA-16661: the standby database needs to be reinstated
 
Fast-Start Failover: DISABLED
 
Configuration Status:
WARNING
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i78276"></a>
<div id="DGBKR690" class="refsect1">
<h2 class="refsect1">HELP</h2>
<p>Displ<a id="sthref964"></a><a id="sthref965"></a><a id="sthref966"></a>ays online help for the Data Guard command-line interface.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref967"></a>Format</p>
<p class="synopsis">HELP [<span class="italic">topic</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref968"></a>Command Parameter</p>
<dl>
<dt>topic</dt>
<dd>
<p>The topic for which you want to display help information. If you do not specify a topic, the command lists all of the topics and the format. Valid topics are:</p>
<br />
<code dir="ltr">ADD</code><br />
<code dir="ltr">CONNECT</code><br />
<code dir="ltr">CONVERT</code><br />
<code dir="ltr">CREATE</code><br />
<code dir="ltr">DISABLE</code><br />
<code dir="ltr">EDIT</code><br />
<code dir="ltr">ENABLE</code><br />
<code dir="ltr">EXIT</code><br />
<code dir="ltr">FAILOVER</code><br />
<code dir="ltr">HELP</code><br />
<code dir="ltr">QUIT</code><br />
<code dir="ltr">REINSTATE</code><br />
<code dir="ltr">REM</code><br />
<code dir="ltr">REMOVE</code><br />
<code dir="ltr">SHOW</code><br />
<code dir="ltr">SHUTDOWN</code><br />
<code dir="ltr">START</code><br />
<code dir="ltr">STARTUP</code><br />
<code dir="ltr">STOP</code><br />
<code dir="ltr">SWITCHOVER</code></dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref969"></a>Usage Notes</p>
<ul>
<li>
<p>A database connection is not required to execute this command.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref970"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3743"></a><a id="sthref971"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example gets help on the <code dir="ltr">EDIT</code> commands.</p>
<pre dir="ltr">
DGMGRL&gt; HELP EDIT;
 
Edits a configuration, database, or instance
 
Syntax:
 
  EDIT CONFIGURATION SET PROTECTION MODE AS
    {MaxProtection|MaxAvailability|MaxPerformance};
 
  EDIT CONFIGURATION SET PROPERTY &lt;property name&gt; = &lt;value&gt;;
 
  EDIT DATABASE &lt;database name&gt; SET PROPERTY &lt;property name&gt; = &lt;value&gt;;
 
  EDIT DATABASE &lt;database name&gt; RENAME TO &lt;new database name&gt;;
 
  EDIT DATABASE &lt;database name&gt; SET STATE = &lt;state&gt;
    [WITH APPLY INSTANCE = &lt;instance name&gt;];
 
  EDIT INSTANCE &lt;instance name&gt; [ON DATABASE &lt;database name&gt;]
    SET AUTO PFILE [ = {&lt;initialization file path&gt;|OFF} ];
 
  EDIT INSTANCE &lt;instance name&gt; [ON DATABASE &lt;database name&gt;]
    SET PROPERTY &lt;property name&gt; = &lt;value&gt;;
 
  EDIT INSTANCE * ON DATABASE &lt;database name&gt;
    SET PROPERTY &lt;property name&gt; = &lt;value&gt;;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i78321"></a>
<div id="DGBKR695" class="refsect1">
<h2 class="refsect1">QUIT</h2>
<p>Qui<a id="sthref972"></a><a id="sthref973"></a>ts (exits) the Data Guard command-line interface.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref974"></a>Format</p>
<p class="synopsis">QUIT;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref975"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref976"></a>Usage Notes</p>
<ul>
<li>
<p>This command has the same effect as the <a href="#i78208">EXIT</a> command.</p>
</li>
<li>
<p>A database connection is not required to execute this command. However, if you are connected, this command breaks the connection.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref977"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3744"></a><a id="sthref978"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to quit (exit) the command-line interface.</p>
<pre dir="ltr">
DGMGRL&gt; QUIT;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABDACIF"></a>
<div id="DGBKR697" class="refsect1">
<h2 class="refsect1">REINSTATE DATABASE</h2>
<p>Reinstates a database as a new standby database in the broker configuration for the current primary database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref979"></a>Format</p>
<p class="synopsis">REINSTATE DATABASE <span class="italic">database-name</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref980"></a>Command Parameter</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the database that is to be reinstated in the broker configuration.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref981"></a>Usage Notes</p>
<ul>
<li>
<p>If the conditions for reinstatement described in <a href="sofo.htm#CHDIBEBC">Section 5.5.8</a> are not satisfied, the reinstatement will fail with an appropriate error status and the specified database will remain disabled.</p>
</li>
<li>
<p>If the <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> specified is that of the old primary and fast-start failover is enabled, the old primary database will be reinstated as a standby to the new primary, and the fast-start failover environment will be updated to reflect the availability of the new standby database. It will accept redo data from the new primary database and be the target of a fast-start failover should the new primary database fail. Reinstatement occurs automatically if the observer is running unless the <code dir="ltr">FastStartFailoverAutoReinstate</code> configuration property is set to <code dir="ltr">FALSE</code>.</p>
</li>
<li>
<p>This command does not require that fast-start failover be enabled. It can be used to reinstate an old primary database after a complete manual failover has been performed. It can also be used to reinstate a bystander standby database that had been disabled after either a complete or immediate failover.</p>
</li>
<li>
<p>Issue this command while connected to any database in the broker configuration, except the database that is to be reinstated.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref982"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3745"></a><a id="sthref983"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example reinstates the <code dir="ltr">South_Sales</code> database as a standby database in the broker configuration.</p>
<pre dir="ltr">
DGMGRL&gt; REINSTATE DATABASE 'North_Sales';
Reinstating database "North_Sales", please wait...
Operation requires shutdown of instance "north_sales1" on database "North_Sales"
Shutting down instance "north_sales1"...
ORA-01109: database not open
 
Database dismounted.
ORACLE instance shut down.
Operation requires startup of instance "north_sales1" on database "North_Sales"
Starting instance "north_sales1"...
ORACLE instance started.
Database mounted.
Continuing to reinstate database "North_Sales" ...
Reinstatement of database "North_Sales" succeeded
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i78344"></a>
<div id="DGBKR700" class="refsect1">
<h2 class="refsect1">REMOVE CONFIGURATION</h2>
<p>Rem<a id="sthref984"></a><a id="sthref985"></a>oves all of the broker configuration information, including all database profiles, from the Data Guard broker configuration file, and terminates broker management of all of the databases associated with the broker configuration.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you use the <code dir="ltr">REMOVE CONFIGURATION</code> command, all profile information is deleted from the Data Guard broker configuration file and cannot be recovered.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref986"></a>Format</p>
<p class="synopsis">REMOVE CONFIGURATION [ PRESERVE DESTINATIONS ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref987"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref988"></a>Usage Notes</p>
<ul>
<li>
<p>When you rem<a id="sthref989"></a>ove a broker configuration, management of all of the databases associated with that configuration is disabled.</p>
</li>
<li>
<p>By default, the command removes the corresponding broker settings of the <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameter on the primary database and the <code dir="ltr">LOG_ARCHIVE_CONFIG</code> initialization parameters on all databases in the configuration. To preserve these settings, use the <code dir="ltr">PRESERVE DESTINATIONS</code> option.</p>
</li>
<li>
<p>This command does not remove or affect the actual primary or standby database instances, databases, datafiles, control files, initialization parameter files, server parameter files, or log files of the underlying Data Guard configuration.</p>
</li>
<li>
<p>You cannot remove the configuration when fast-start failover is enabled.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref990"></a>Command Example</p>
<p>The following examples show a successful and an unsuccessful <code dir="ltr">REMOVE CONFIGURATION</code> command.</p>
<dl>
<dd><a id="DGBKR3746"></a><a id="sthref991"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;Successful REMOVE CONFIGURATION Command</dt>
<dd>
<p>The following command shows how to remove configuration information from the configuration file.</p>
<pre dir="ltr">
DGMGRL&gt; REMOVE CONFIGURATION;
Removed configuration
DGMGRL&gt; SHOW CONFIGURATION;
Error: ORA-16532: Data Guard broker configuration does not exist
 
Configuration details cannot be determined by DGMGRL
</pre></dd>
<dd><a id="DGBKR3747"></a><a id="sthref992"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;Unsuccessful REMOVE CONFIGURATION Command</dt>
<dd>
<p>The following command is unsuccessful because fast-start failover is enabled.</p>
<pre dir="ltr">
DGMGRL&gt; REMOVE CONFIGURATION;
Error: ORA-16654: fast-start failover is enabled
 
Failed.

 
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - The SUPER cluster
 
  Protection Mode: MaxAvailability
  Databases:
    North_Sales  - Primary database
    South_Sales  - (*) Physical standby database
 
Fast-Start Failover: ENABLED
 
Configuration status:
SUCCESS
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101921"></a>
<div id="DGBKR705" class="refsect1">
<h2 class="refsect1">REMOVE DATABASE</h2>
<p>Removes <a id="sthref993"></a><a id="sthref994"></a><a id="sthref995"></a>the specified standby database's profile from the broker configuration and terminates broker management of the standby database.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
When you use the <code dir="ltr">REMOVE DATABASE</code> command, the database's profile information is deleted from the broker configuration file and cannot be recovered.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref996"></a>Format</p>
<p class="synopsis">REMOVE DATABASE <span class="syntaxinlineitalic">database-name</span> [ PRESERVE DESTINATIONS ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref997"></a>Command Parameter</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the standby database whose profile you want to remove from the broker configuration.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref998"></a>Usage Notes</p>
<ul>
<li>
<p>An error is returned if you specify the name of the primary database in the broker configuration.</p>
</li>
<li>
<p>By default, the command removes the corresponding broker settings of the <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameter on the primary database and the <code dir="ltr">LOG_ARCHIVE_CONFIG</code> initialization parameter on all databases in the configuration. To preserve these settings, use the <code dir="ltr">PRESERVE DESTINATIONS</code> option.</p>
</li>
<li>
<p>This command cannot be executed if fast-start failover is enabled and <span class="variable">database-name</span> specifies the name of the target standby database.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref999"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3748"></a><a id="sthref1000"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to remove a database from the Data Guard broker configuration.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - The SUPER cluster
 
  Protection Mode: MaxPerformance
  Databases:
    North_Sales  - Primary database
    South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration status:
SUCCESS
 
DGMGRL&gt; REMOVE DATABASE 'South_Sales';
Removed database "South_Sales" from the configuration.
 
 
Configuration - The SUPER cluster
 
  Protection Mode: MaxPerformance
  Databases:
    North_Sales  - Primary database
 
Fast-Start Failover: DISABLED
 
Configuration status:
SUCCESS
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101925"></a>
<div id="DGBKR710" class="refsect1">
<h2 class="refsect1">REMOVE INSTANCE</h2>
<p>Removes <a id="sthref1001"></a><a id="sthref1002"></a><a id="sthref1003"></a>an instance from an existing database profile in the broker configuration.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1004"></a>Format</p>
<p class="synopsis">REMOVE INSTANCE <span class="syntaxinlineitalic">instance-name</span></p>
<p class="synopsis">[ON DATABASE <span class="syntaxinlineitalic">database-name</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1005"></a>Command Parameters</p>
<dl>
<dt>instance-name</dt>
<dd>
<p>The name of the instance (SID) that you want to remove from the broker configuration.</p>
</dd>
<dt>database-name</dt>
<dd>
<p>The name of the database to which the <code dir="ltr">instance-name</code> is associated.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1006"></a>Usage Notes</p>
<ul>
<li>
<p>In an Oracle RAC database, the broker automatically adds started instances into the corresponding database profile. However, the broker may not automatically remove instances from the database profile. The <code dir="ltr">REMOVE INSTANCE</code> command can be used to manually remove any instance that no longer exists from the database profile.</p>
</li>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> can be unique across the configuration. If <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> is not unique, you must specify both the <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> and the <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> to fully identify the instance.</p>
</li>
<li>
<p>This command is rejected for an instance that is currently active in the broker configuration.</p>
</li>
<li>
<p>This command is rejected if this is the only instance currently associated with a database profile.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1007"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3749"></a><a id="sthref1008"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to remove an instance of the database.</p>
<pre dir="ltr">
DGMGRL&gt; REMOVE INSTANCE 'south_sales3' ON DATABASE 'South_Sales';
Removed instance "south_sales3" from the database "South_Sales"
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i89795"></a>
<div id="DGBKR715" class="refsect1">
<h2 class="refsect1">SHOW CONFIGURATION</h2>
<p>Displa<a id="sthref1009"></a><a id="sthref1010"></a>ys a summary and status <a id="sthref1011"></a>of the broker configuration. The summary lists all databases included in the broker configuration and other information pertaining to the broker configuration itself, including the fast-start failover status.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1012"></a>Format</p>
<p class="synopsis">SHOW CONFIGURATION [VERBOSE | <span class="syntaxinlineitalic">property-name</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1013"></a>Command Parameters</p>
<dl>
<dt>property-name</dt>
<dd>
<p>The name of the property for which you want to display summary information.</p>
<p>See <a href="dbpropref.htm#g1012962">Chapter 8, "Data Guard Broker Properties"</a> for complete information about properties.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1014"></a>Usage Notes</p>
<ul>
<li>
<p>Use the <code dir="ltr">SHOW CONFIGURATION VERBOSE</code> command (or the <code dir="ltr">SHOW FAST_START FAILOVER</code> command) to show the properties related to fast-start failover.</p>
</li>
<li>
<p>You can optionally specify either <code dir="ltr">VERBOSE</code> or <code dir="ltr">property-name</code>, but not both.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1015"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3750"></a><a id="sthref1016"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;Showing a Summary of the DRSolution Configuration</dt>
<dd>
<p>The following example provides a summary of the <code dir="ltr">DRSolution</code> configuration for which fast-start failover is disabled.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW CONFIGURATION;
 
Configuration - The SUPER cluster
 
  Protection Mode: MaxPerformance
  Databases:
    North_Sales  - Primary database
    South_Sales  - Physical standby database
 
Fast-Start Failover: DISABLED
 
Configuration status:
SUCCESS
</pre></dd>
<dd><a id="DGBKR3751"></a><a id="sthref1017"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;Showing Detailed Description of the DRSolution Configuration</dt>
<dd>
<p>The following example provides detailed information about the DRSolution configuration, including configuration properties, and fast-start failover-related information:</p>
<pre dir="ltr">
DGMGRL&gt; SHOW CONFIGURATION VERBOSE;
 
Configuration - DRSolution
 
  Protection Mode: MaxAvailability
  Databases:
    North_Sales  - Primary database
    South_Sales  - (*) Physical standby database
 
  (*) Fast-Start Failover target
 
  Properties:
    FastStartFailoverThreshold      = '60'
    OperationTimeout                = '30'
    FastStartFailoverLagLimit       = '30'
    CommunicationTimeout            = '180'
    FastStartFailoverAutoReinstate  = 'TRUE'
    FastStartFailoverPmyShutdown    = 'TRUE'
    BystandersFollowRoleChange      = 'ALL'
 
Fast-Start Failover: ENABLED
 
  Threshold:        180 seconds
  Target:           South_Sales
  Observer:         observer.example.com
  Lag Limit:        30 seconds (not in use)
  Shutdown Primary: TRUE
  Auto-reinstate:   TRUE
 
Configuration Status:
SUCCESS
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101937"></a>
<div id="DGBKR720" class="refsect1">
<h2 class="refsect1">SHOW DATABASE</h2>
<p>Displays <a id="sthref1018"></a><a id="sthref1019"></a>information or property values of the specified database and its instances.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1020"></a>Format</p>
<p class="synopsis">SHOW DATABASE [VERBOSE] <span class="syntaxinlineitalic">database-name</span> [<span class="syntaxinlineitalic">property-name</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1021"></a>Command Parameters</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the database for which you want to display information. The <code dir="ltr">VERBOSE</code> keyword, if used, must come before the <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> or an error is returned.</p>
</dd>
<dt>property-name</dt>
<dd>
<p>The name of the property for which you want to display a value. If a property name is specified, the output shows only the specified property (not all properties of the database), regardless of whether or not the <code dir="ltr">VERBOSE</code> keyword is specified.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#g1044508">Chapter 4</a> and <a href="dbpropref.htm#g1012962">Chapter 8</a> for information about properties.</div>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1022"></a>Usage Notes</p>
<ul>
<li>
<p>The <code dir="ltr">SHOW DATABASE</code> command shows a brief summary of the database. <code dir="ltr">SHOW DATABASE VERBOSE</code> shows properties of the database in addition to the brief summary. They both show the status of the database.</p>
</li>
<li>
<p>The <code dir="ltr">SHOW DATABASE VERBOSE</code> command shows database-specific properties and instance-specific properties. For a non-Oracle RAC database, the values of the instance-specific properties are those of the only instance of the database. For an Oracle RAC database, the values of the instance-specific properties will not be shown, although the property names are still listed. To see the instance-specific values of these properties, use the <code dir="ltr">SHOW INSTANCE</code> command.</p>
</li>
<li>
<p>The properties that the <code dir="ltr">SHOW DATABASE VERBOSE</code> command shows depend on the database role and the configuration composition:</p>
<ul>
<li>
<p>For the primary database, properties specific to physical or snapshot standby databases are shown only if there is at least one physical or snapshot standby database in the configuration. The properties specific to logical standby databases are shown only if there is at least one logical standby database in the configuration.</p>
</li>
<li>
<p>For physical and snapshot standby databases, properties specific to logical standby databases are not shown.</p>
</li>
<li>
<p>For logical standby databases, properties specific to physical and snapshot standby databases are not shown.</p>
</li>
</ul>
</li>
<li>
<p>This command is rejected if you use the <code dir="ltr">SHOW DATABASE</code> <code dir="ltr"><span class="codeinlineitalic">database-name property-name</span></code> command to show an instance-specific property in an Oracle RAC database.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1023"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3752"></a><a id="sthref1024"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Shows database information in an abbreviated format.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE 'South_Sales';
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  APPLY-ON
  Transport Lag:   0 seconds
  Apply Lag:       0 seconds
  Real Time Query: OFF
  Instance(s):
    south_sales1
 
Database Status:
SUCCESS
</pre></dd>
<dd><a id="DGBKR3753"></a><a id="sthref1025"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Shows database information in an extended format.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW DATABASE VERBOSE 'South_Sales';
 
Database - South_Sales
 
  Role:            PHYSICAL STANDBY
  Intended State:  OFFLINE
  Transport Lag:   0
  Apply Lag:       0
  Real Time Query: OFF
  Instance(s):
    south_sales1
 
  Properties:
    DGConnectIdentifier             = 'South_Sales.example.com'
    ObserverConnectIdentifier       = ''
    LogXptMode                      = 'SYNC'
    DelayMins                       = '0'
    Binding                         = 'optional'
    MaxFailure                      = '0'
    MaxConnections                  = '1'
    ReopenSecs                      = '300'
    NetTimeout                      = '30'
    RedoCompression                 = 'DISABLE'
    LogShipping                     = 'ON'
    PreferredApplyInstance          = ''
    ApplyInstanceTimeout            = '0'
    ApplyParallel                   = 'AUTO'
    StandbyFileManagement           = 'AUTO'
    ArchiveLagTarget                = '0'
    LogArchiveMaxProcesses          = '5'
    LogArchiveMinSucceedDest        = '1'
    DbFileNameConvert               = 'dbs/t, dbs/bt'
    LogFileNameConvert              = 'dbs/t, dbs/bt'
    FastStartFailoverTarget         = 'North_Sales'
    InconsistentProperties          = '(monitor)'
    InconsistentLogXptProps         = '(monitor)'
    SendQEntries                    = '(monitor)'
    LogXptStatus                    = '(monitor)'
    RecvQEntries                    = '(monitor)'
    SidName                         = 'south_sales1'
    StaticConnectIdentifier         = '(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)
(HOST=south_sales1.example.com)(PORT=2840))
(CONNECT_DATA=(SERVICE_NAME=South_Sales_DGMGRL.example.com)
(INSTANCE_NAME=south_sales1)(SERVER=DEDICATED)))'
    StandbyArchiveLocation          = 'USE_DB_RECOVERY_FILE_DEST'
    AlternateLocation               = ''
    LogArchiveTrace                 = '255'
    LogArchiveFormat                = 'db2r_%d_%t_%s_%R.arc'
    LatestLog                       = '(monitor)'
    TopWaitEvents                   = '(monitor)'
 
Database Status:
SUCCESS
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BJEDCCFH"></a>
<div id="DGBKR3435" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">SHOW FAST_START FAILOVER<a id="sthref1026"></a><a id="sthref1027"></a></h2>
<p>Displays all fast-start failover related information.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1028"></a>Format</p>
<p class="synopsis">SHOW FAST_START FAILOVER;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1029"></a>COMMAND PARAMETERS</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1030"></a>Usage Notes</p>
<p>The <code dir="ltr">SHOW FAST_START FAILOVER</code> command shows a summary of the fast-start failover configuration.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1031"></a>Command Example</p>
<pre dir="ltr">
DGMGRL&gt; SHOW FAST_START FAILOVER;
 
Fast-Start Failover: DISABLED
 Threshold:           30 seconds
 Target:              (none)
 Observer:            (none)
 Lag Limit:           30 seconds
 Shutdown Primary:    TRUE
 Auto-reinstate:      TRUE
 
Configurable Failover Conditions
 Health Conditions:
   Corrupted Controlfile          YES
   Corrupted Dictionary           YES
   Inaccessible Logfile            NO
   Stuck Archiver                  NO
   Datafile Offline               YES
 
 Oracle Error Conditions:
   ORA-27102: out of memory
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i101941"></a>
<div id="DGBKR725" class="refsect1">
<h2 class="refsect1">SHOW INSTANCE</h2>
<p>Displays <a id="sthref1032"></a><a id="sthref1033"></a>information or property values for the specified instance.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1034"></a>Format</p>
<p class="synopsis">SHOW INSTANCE [VERBOSE] <span class="syntaxinlineitalic">instance-name</span> [<span class="syntaxinlineitalic">property-name</span>] [ON DATABASE <span class="syntaxinlineitalic">database-name</span>];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1035"></a>Command Parameters</p>
<dl>
<dt>instance-name</dt>
<dd>
<p>The name of the instance for which you want to display information. The <code dir="ltr">VERBOSE</code> keyword, if used, must come before the instance name.</p>
</dd>
<dt>property-name</dt>
<dd>
<p>The name of the property for which you want to display a value. If a property name is specified, the output shows only the specified property (not all properties), regardless of whether or not the <code dir="ltr">VERBOSE</code> keyword is specified.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="dbresource.htm#g1044508">Chapter 4</a> and <a href="dbpropref.htm#g1012962">Chapter 8</a> for information about properties.</div>
</dd>
<dt>database-name</dt>
<dd>
<p>The name of the database to which is associated the instance for which you want to show information.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1036"></a>Usage Notes</p>
<ul>
<li>
<p>The <code dir="ltr">SHOW INSTANCE</code> command shows a brief summary of the instance. <code dir="ltr">SHOW INSTANCE VERBOSE</code> shows properties of the instance in addition to the brief summary. They both show the status of the instance.</p>
</li>
<li>
<p>The <code dir="ltr">SHOW INSTANCE VERBOSE</code> command only shows instance-specific properties.</p>
</li>
<li>
<p>The properties that the <code dir="ltr">SHOW INSTANCE VERBOSE</code> command shows depend on the database role and the configuration composition:</p>
<ul>
<li>
<p>For instances of the primary database, properties specific to physical or snapshot standby instances are shown only if there is at least one physical or snapshot standby database in the configuration. The properties specific to logical standby instances are shown only if there is at least one logical standby database in the configuration.</p>
</li>
<li>
<p>For instances of physical or snapshot standby databases, properties specific to logical standby instances are not shown.</p>
</li>
<li>
<p>For instances of logical standby databases, properties specific to physical and snapshot standby instances are not shown.</p>
</li>
</ul>
</li>
<li>
<p>The <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> can be unique across the configuration. If <code dir="ltr"><span class="codeinlineitalic">instance-name</span></code> is not unique, you must specify both the <code dir="ltr"><span class="codeinlineitalic">database-name</span></code> and the <code dir="ltr">instance-name</code> to fully identify the instance.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1037"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3754"></a><a id="sthref1038"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows information about a specific instance of a database.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW INSTANCE 'north_sales1';
 
Instance 'north_sales1' of database 'North_Sales'
 
Instance Status:
SUCCESS
</pre></dd>
<dd><a id="DGBKR3755"></a><a id="sthref1039"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>Shows instance information in an extended format.</p>
<pre dir="ltr">
DGMGRL&gt; SHOW INSTANCE VERBOSE 'north_sales1';
 
Instance 'north_sales1' of database 'North_Sales'
 
  Host Name: north.example.com
  PFILE:
  Properties:
    SidName                         = 'north_sales1'
    StaticConnectIdentifier         = '(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)
(HOST=north.example.com)(PORT=2094))
(CONNECT_DATA=(SERVICE_NAME=North_Sales_DGMGRL.example.com)
(INSTANCE_NAME=north_sales1)(SERVER=DEDICATED)))'
    StandbyArchiveLocation          = 'USE_DB_RECOVERY_FILE_DEST'
    AlternateLocation               = ''
    LogArchiveTrace                 = '255'
    LogArchiveFormat                = 'r_%d_%t_%s_%R.arc'
    LatestLog                       = '(monitor)'
    TopWaitEvents                   = '(monitor)'
 
Instance Status:
SUCCESS
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i79232"></a>
<div id="DGBKR730" class="refsect1">
<h2 class="refsect1">SHUTDOWN</h2>
<p>Shuts <a id="sthref1040"></a><a id="sthref1041"></a><a id="sthref1042"></a><a id="sthref1043"></a>down a currently running Oracle instance.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1044"></a>Format</p>
<p class="synopsis">SHUTDOWN [ ABORT | IMMEDIATE | NORMAL ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1045"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1046"></a>Usage Notes</p>
<ul>
<li>
<p>Using the <code dir="ltr">SHUTDOWN</code> command with no arguments is equivalent to using the <code dir="ltr">SHUTDOWN NORMAL</code> command.</p>
</li>
<li>
<p>The following list describes the options to the <code dir="ltr">SHUTDOWN</code> command:</p>
<ul>
<li>
<p><code dir="ltr">ABORT</code></p>
<p>Proceeds with the fastest possible shutdown of the database without waiting for calls to complete or for users to disconnect from the database. Uncommitted transactions are not rolled back. Client SQL statements being processed are terminated. All users connected to the database are implicitly disconnected, and the next database startup will require instance recovery. You must use this option if a background process terminates abnormally.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
If you use the <code dir="ltr">ABORT</code> option on the primary database when fast-start failover is enabled and the observer is running, a fast-start failover may ensue. Use the <code dir="ltr">IMMEDIATE</code> or <code dir="ltr">NORMAL</code> option to prevent an unexpected fast-start failover from occurring.</div>
</li>
<li>
<p><code dir="ltr">IMMEDIATE</code></p>
<p>Does not wait for current calls to complete or users to disconnect from the database. Further connections are prohibited. The database is closed and dismounted. The instance is shut down, and no instance recovery is required on the next database startup.</p>
</li>
<li>
<p><code dir="ltr">NORMAL</code></p>
<p>This is the default option. The process waits for users to disconnect from the database. Further connections are prohibited. The database is closed and dismounted. The instance is shut down, and no instance recovery is required on the next database startup.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1047"></a>Command Example</p>
<dl>
<dd><a id="DGBKR3756"></a><a id="sthref1048"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following command shuts down the primary database in normal mode.</p>
<pre dir="ltr">
DGMGRL &gt; SHUTDOWN;

Database closed. 
Database dismounted. 
Oracle instance shut down.
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABJECGA"></a>
<div id="DGBKR732" class="refsect1">
<h2 class="refsect1">START OBSERVER</h2>
<p>Starts the fast-start failover observer.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1049"></a>Format</p>
<p class="synopsis">START OBSERVER [ FILE=<span class="italic">observer_configuration_filename</span> ];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1050"></a>Command Parameters</p>
<dl>
<dt>observer_configuration_filename</dt>
<dd>
<p>Specifies an explicit directory path and file name on the observer computer.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1051"></a>Usage Notes</p>
<ul>
<li>
<p>The <a id="sthref1052"></a><a id="sthref1053"></a><a id="sthref1054"></a><a id="sthref1055"></a>Oracle Client Administrator kit, or the full Oracle Database Enterprise Edition or Oracle Personal Edition kit must be installed on the observer computer to monitor a broker configuration for which fast-start failover is to be enabled. See <a href="sofo.htm#BCGFFFBG">Section 5.5.1</a> for more information.</p>
</li>
<li>
<p>The <code dir="ltr">START OBSERVER</code> command must be issued on the observer computer. Once the observer is successfully started, control is not returned to the user until the observer is stopped (for example, by issuing the <a href="#BABIAHGE">STOP OBSERVER</a> command from a different client connection). If you want to perform further interaction with the broker configuration, you must connect through another client.</p>
</li>
<li>
<p>The observer runs autonomously once it has been successfully started. For this reason, it is recommended that when invoking DGMGRL for the purpose of issuing the <code dir="ltr">START OBSERVER</code> command, specify the <code dir="ltr">-logfile</code> optional parameter on the command line so that output generated while acting as the observer is not lost. See <a href="#i112260">Section 7.1.1</a> for more information about this parameter and see <a href="troubleshooting.htm#BABHDHCH">Section 9.5.3</a> for an example use of the <code dir="ltr">-logfile</code> option.</p>
</li>
<li>
<p>If a directory path is not specified with the <code dir="ltr">FILE</code> parameter, the observer searches the current working directory for the <code dir="ltr"><a id="sthref1056"></a><a id="sthref1057"></a><a id="sthref1058"></a>fsfo.dat</code> file. If an <code dir="ltr">fsfo.dat</code> file is not found and this is the first time the <code dir="ltr">START OBSERVER</code> command is issued, the observer creates a <code dir="ltr">fsfo.dat</code> file.</p>
</li>
<li>
<p>The primary and target standby database <code dir="ltr">DB_UNIQUE_NAME</code> initialization parameter and connect identifiers are stored in the <code dir="ltr">fsfo.dat</code> configuration file. Oracle recommends you ensure this file is protected from unauthorized access.</p>
</li>
<li>
<p>Fast-start failover does not need to be enabled before you issue this command.</p>
<ul>
<li>
<p>If fast-start failover is enabled, the observer will retrieve primary and target standby connect identifiers from the broker configuration and begin monitoring the configuration.</p>
</li>
<li>
<p>If fast-start failover is not enabled, the observer continually monitors for when fast-start failover is enabled.</p>
</li>
</ul>
</li>
<li>
<p>Only the primary database needs to be running when you issue this command; the standby database that will be the target of a fast-start failover does not need to be running in order for this command to complete successfully.</p>
</li>
<li>
<p>Use the <code dir="ltr">SHOW FAST_START FAILOVER</code> command, the <code dir="ltr">SHOW CONFIGURATION VERBOSE</code> command, or query the <code dir="ltr">FS_FAILOVER_*</code> columns in the <code dir="ltr">V$DATABASE</code> view on the primary database to see the status of the observer and its host computer.</p>
</li>
<li>
<p>The <code dir="ltr">SHOW FAST_START FAILOVER</code> command indicates whether the broker configuration believes that an observer has already been started. If the command displays the following, then you can issue the <code dir="ltr">START OBSERVER</code> command on any computer to start the observer:</p>
<pre dir="ltr">
Observer:       (none)
</pre>
<p>If the <code dir="ltr">SHOW FAST_START FAILOVER</code> command shows a value for "Observer:", but the observer at that observer location is no longer running for some reason, you can do either of the following:</p>
<ul>
<li>
<p>issue the <code dir="ltr">START OBSERVER</code> command on the same observer computer where it was started originally, with the observer configuration file used when the observer was first started</p>
</li>
<li>
<p>issue the <code dir="ltr">STOP OBSERVER</code> command and then the <code dir="ltr">START OBSERVER</code> command on any computer to start the observer</p>
</li>
</ul>
<p>If the <code dir="ltr">SHOW FAST_START FAILOVER</code> command shows a value for "Observer:" and the observer is already running at that location, an attempt to start an observer at that location again will fail with the following error:</p>
<pre dir="ltr">
DGM-16954: Unable to open and lock the Observer configuration file
</pre>
<p>If the <code dir="ltr">SHOW FAST_START FAILOVER</code> command shows a value for "Observer:" and you attempt to start an observer at a different location, the command will fail with the following error:</p>
<pre dir="ltr">
ORA-16647: could not start more than one observer
</pre></li>
<li>
<p>If the primary and target standby databases stay connected but they lose the connection to the observer, then the primary database goes into an unobserved state. This state is reported by the broker's health check capability.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1059"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3757"></a><a id="sthref1060"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to start the observer.</p>
<pre dir="ltr">
DGMGRL&gt; CONNECT sys@North_Sales.example.com;
Password: <span class="italic">password</span>
Connected.
DGMGRL&gt; START OBSERVER;
Observer started
</pre></dd>
<dd><a id="DGBKR3758"></a><a id="sthref1061"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows how to start the observer using <code dir="ltr">CONNECT '/'</code> so that connection credentials are not visible on the command line:</p>
<pre dir="ltr">
DGMGRL&gt; CONNECT /@North_Sales.example.com;
DGMGRL&gt; START OBSERVER;
Observer started.
</pre>
<p>You must set up Oracle Wallet or SSL to use <code dir="ltr">CONNECT '/'</code>. By setting up Oracle Wallet or SSL, you can write a script to securely start and run the observer as a background job without specifying database credentials in the script. When using Oracle Wallet as a secure external password store, be sure to add credentials for both the primary and fast-start failover target standby databases. The database connect string that you specify when adding the credentials for each database must match the <code dir="ltr">ObserverConnectIdentifer</code> or <code dir="ltr">DGConnectIdentifier</code> database property.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG" href="../../network.112/e40393/toc.htm"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for more information about Oracle Wallet</div>
</dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i79261"></a>
<div id="DGBKR735" class="refsect1">
<h2 class="refsect1">STARTUP</h2>
<p>Starts an <a id="sthref1062"></a><a id="sthref1063"></a><a id="sthref1064"></a><a id="sthref1065"></a>Oracle database instance with any of the following options:</p>
<ul>
<li>
<p><code dir="ltr">FORCE</code>: shuts down the current Oracle instance in the <code dir="ltr">SHUTDOWN</code> <code dir="ltr">ABORT</code> mode before restarting it.</p>
</li>
<li>
<p><code dir="ltr">RESTRICT</code>: allows only Oracle users with the <code dir="ltr">RESTRICTED SESSION</code> system privilege to connect to the instance.</p>
</li>
<li>
<p><code dir="ltr">PFILE</code>: specifies the <code dir="ltr">PFILE</code> initialization parameter file to be used when the database instance is started.</p>
</li>
<li>
<p><code dir="ltr">MOUNT</code>: mounts the specified database without opening it.</p>
</li>
<li>
<p><code dir="ltr">OPEN</code>: mounts and opens the specified database.</p>
</li>
<li>
<p><code dir="ltr">NOMOUNT</code>: starts the specified database instance without mounting the database.</p>
</li>
</ul>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1066"></a>Format</p>
<p class="synopsis">STARTUP</p>
<p class="synopsis">[FORCE]</p>
<p class="synopsis">[RESTRICT]</p>
<p class="synopsis">[PFILE=<span class="syntaxinlineitalic">filename</span>]</p>
<p class="synopsis">[MOUNT | OPEN [<span class="syntaxinlineitalic">open-options</span>] | NOMOUNT];</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1067"></a>Command Parameters</p>
<dl>
<dt>filename</dt>
<dd>
<p>The name of the initialization parameter file to be used when starting the database instance. If you do not specify the <code dir="ltr">PFILE</code> parameter option, then the default server parameter file (specific to your operating system) is used.</p>
</dd>
<dt>open-options</dt>
<dd>
<p>The mode of access in which you want the specified database to start. The possible modes are:</p>
<br />
<code dir="ltr">READ ONLY</code><br />
<code dir="ltr">READ WRITE</code></dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1068"></a>Usage Notes</p>
<ul>
<li>
<p>Using the <code dir="ltr">STARTUP</code> command with no arguments is equivalent to using the <code dir="ltr">STARTUP OPEN</code> command.</p>
</li>
<li>
<p>If you do not use the <code dir="ltr">FORCE</code> clause when you use the <code dir="ltr">STARTUP</code> command and the current database instance is running, an error results. The <code dir="ltr">FORCE</code> clause is useful when you are debugging or when error conditions are occurring. Otherwise, it should not be used.</p>
</li>
<li>
<p>Use the <code dir="ltr">RESTRICT</code> clause to allow only Oracle users with the <code dir="ltr">RESTRICTED SESSION</code> system privilege to connect to the instance. Later, you can use the <code dir="ltr">ALTER SYSTEM</code> command through SQL*Plus to disable the restricted session feature.</p>
</li>
<li>
<p>If you do not use the <code dir="ltr">PFILE</code> clause to specify the initialization parameter file, the <code dir="ltr">STARTUP</code> command uses the default server parameter file, if it exists. Otherwise, the <code dir="ltr">STARTUP</code> command uses the default initialization parameter file. The default files are platform specific.</p>
<p>See your operating system-specific documentation for more information about the default parameter files.</p>
</li>
<li>
<p>Use the <code dir="ltr">OPEN</code> clause to mount and open the specified database.</p>
</li>
<li>
<p>The <code dir="ltr">NOMOUNT</code> clause starts the database instance without mounting the database. You cannot use the <code dir="ltr">NOMOUNT</code> clause with the <code dir="ltr">MOUNT</code> or <code dir="ltr">OPEN</code> options.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1069"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3759"></a><a id="sthref1070"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following examples show two different methods for starting a database instance. Each command starts a database instance using the standard parameter file, mounts the default database in exclusive mode, and opens the database.</p>
<pre dir="ltr">
DGMGRL&gt; STARTUP;
DGMGRL&gt; STARTUP OPEN;
</pre></dd>
<dd><a id="DGBKR3760"></a><a id="sthref1071"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following command shuts down the current instance, immediately restarts it without mounting or opening the database, and allows only users with restricted session privileges to connect to it.</p>
<pre dir="ltr">
DGMGRL &gt; STARTUP FORCE RESTRICT NOMOUNT;
</pre></dd>
<dd><a id="DGBKR3761"></a><a id="sthref1072"></a></dd>
<dt class="seghead">Example 3&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following command starts an instance using the parameter file <code dir="ltr">testparm</code> without mounting the database.</p>
<pre dir="ltr">
DGMGRL &gt; STARTUP PFILE=testparm NOMOUNT;
</pre></dd>
<dd><a id="DGBKR3762"></a><a id="sthref1073"></a></dd>
<dt class="seghead">Example 4&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example starts and mounts a database instance, but does not open it.</p>
<pre dir="ltr">
DGMGRL&gt; STARTUP MOUNT;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BABIAHGE"></a>
<div id="DGBKR737" class="refsect1">
<h2 class="refsect1">STOP OBSERVER</h2>
<p>Stops the fast-start failover observer.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1074"></a>Format</p>
<p class="synopsis">STOP OBSERVER;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1075"></a>Command Parameters</p>
<p>None.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1076"></a>Usage Notes</p>
<ul>
<li>
<p>You can issue this command while connected to any database in the broker configuration.</p>
</li>
<li>
<p>This command does not disable fast-start failover, but a fast-start failover cannot be initiated in the absence of an observer.</p>
</li>
<li>
<p>Fast-start failover does not need to be enabled when you issue this command.</p>
</li>
<li>
<p>If fast-start failover <span class="italic">is enabled</span> when you issue the <code dir="ltr">STOP OBSERVER</code> command, then the primary and standby databases must be connected and communicating with each other. Otherwise the following error is returned:</p>
<pre dir="ltr">
ORA-16636 fast-start failover target standby in error state, cannot stop observer
</pre>
<p>If connectivity does not exist between the primary and standby databases, you can issue the <code dir="ltr">DISABLE FAST_START FAILOVER FORCE</code> command on the primary database and then issue the <code dir="ltr">STOP OBSERVER</code> command. Note that disabling fast-start failover with the <code dir="ltr">FORCE</code> option on a primary database that is disconnected from the observer and the target standby database does not prevent the observer from initiating a fast-start failover to the target standby database.</p>
</li>
<li>
<p>If fast-start failover <span class="italic">is not enabled</span> when you issue the <code dir="ltr">STOP OBSERVER</code> command, then only the primary database must be running when you stop the observer.</p>
</li>
<li>
<p>The observer does not stop immediately when the <code dir="ltr">STOP OBSERVER</code> command is issued. The observer does not discover it has been stopped until the next time the observer contacts the broker.</p>
<p>As soon as you have issued the <code dir="ltr">STOP OBSERVER</code> command, you may enter the <code dir="ltr">START OBSERVER</code> command again on any computer. You can start a new observer right away, even if the old observer has not yet discovered it was stopped. Any attempt to restart the old observer will fail, because a new observer has been started for the broker configuration.</p>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1077"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3763"></a><a id="sthref1078"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example stops the observer.</p>
<pre dir="ltr">
DGMGRL&gt; STOP OBSERVER;
</pre></dd>
</dl>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i86423"></a>
<div id="DGBKR740" class="refsect1">
<h2 class="refsect1">S<a id="sthref1079"></a><a id="sthref1080"></a>WITCHOVER</h2>
<p>A <a id="sthref1081"></a>switchover<a id="sthref1082"></a><a id="sthref1083"></a><a id="sthref1084"></a> operation is a planned transition in which the primary database exchanges roles with one of the standby databases. When you issue the <code dir="ltr">SWITCHOVER</code> command, the current primary database becomes a standby database, and the specified standby database becomes the primary database.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1085"></a>Format</p>
<p class="synopsis">SWITCHOVER TO <span class="syntaxinlineitalic">database-name</span>;</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1086"></a>Command Parameter</p>
<dl>
<dt>database-name</dt>
<dd>
<p>The name of the standby database you want to change to the primary database role.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1087"></a>Usage Notes</p>
<ul>
<li>
<p>If fast-start failover is enabled, you may switch over only to the fast-start failover target standby database.</p>
</li>
<li>
<p>The broker verifies that the primary and standby databases are in the following states before starting the switchover:</p>
<ul>
<li>
<p>The primary database must be enabled and in the <code dir="ltr">TRANSPORT-ON</code> state so redo transport services are started.</p>
</li>
<li>
<p>The standby database must be enabled and in the <code dir="ltr">APPLY-ON</code> state, with log apply services started.</p>
</li>
</ul>
</li>
<li>
<p>The broker allows the switchover to proceed as long as there are no redo transport services errors for the standby database that you selected to participate in the switchover. However, errors occurring for any other bystander standby database will not prevent the switchover from proceeding.</p>
</li>
<li>
<p>Switchover to a logical standby database is not allowed when the configuration is operating in maximum protection mode.</p>
</li>
<li>
<p>If the broker configuration is operating in either maximum protection mode or maximum availability mode, the switchover maintains the protection mode even after the operation (described in <a href="sofo.htm#i1013063">Section 5.3.1</a>). The switchover will not be allowed if the mode cannot be maintained because the target standby database of the switchover was the only standby that satisfied the protection mode requirement.</p>
</li>
<li>
<p>If the standby database that is assuming the primary role is a physical standby database, then the old primary database will be restart<a id="sthref1088"></a>ed after the switchover completes. If the standby database is a logical standby database, then neither the primary database nor the logical standby database is restarted.</p>
</li>
<li>
<p>If the standby database that is assuming the primary role is a physical standby database, then the original primary becomes a physical standby database.</p>
</li>
<li>
<p>If the standby database that is assuming the primary role is a logical standby database, then the original primary becomes a logical standby database.</p>
</li>
<li>
<p>If an Oracle RAC primary database is becoming a physical standby database, all but one instance of the primary database will be shut down before performing the switchover. See <a href="sofo.htm#BCGFBHJI">Section 5.3</a> for details.</p>
</li>
<li>
<p>You cannot switchover to a snapshot standby database.</p>
</li>
<li>
<p>If the standby database that is assuming the primary role is a logical standby database and there are physical standby databases in the configuration, after the switchover, the physical standby databases will be disabled.</p>
<div class="infobox-note">
<p class="notep1">Caution:</p>
For this reason, Oracle generally recommends that you specify your physical standby database for switchover instead of your logical standby database. If you must switch over to your logical standby database, see <a href="sofo.htm#CHDEHEEF">Section 5.4.3</a> to re-create your physical standby database.
<p>If you intend to switch back to the original primary database relatively soon, you may allow the physical and snapshot standbys to remain disabled. Once you have completed the switchover back to the original primary, you may then reenable the physical and snapshot standby databases since they are still viable standbys for the original primary database.</p>
</div>
</li>
</ul>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1089"></a>Command Examples</p>
<dl>
<dd><a id="DGBKR3764"></a><a id="sthref1090"></a></dd>
<dt class="seghead">Example 1&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>The following example shows a successful switchover in which the physical standby database, <code dir="ltr">South_Sales</code>, transitions into the primary role.</p>
<pre dir="ltr">
DGMGRL&gt; switchover to 'South_Sales';
Performing switchover NOW, please wait...
New primary database "South_Sales" is opening...
Operation requires shutdown of instance "north_sales1" on database "North_Sales"
Shutting down instance "north_sales1"...
ORA-01109: database not open
 
Database dismounted.
ORACLE instance shut down.
Operation requires startup of instance "north_sales1" on database "North_Sales"
Starting instance "north_sales1"...
ORACLE instance started.
Database mounted.
Switchover succeeded, new primary is "South_Sales"
</pre></dd>
<dd><a id="DGBKR3765"></a><a id="sthref1091"></a></dd>
<dt class="seghead">Example 2&nbsp;&nbsp;&nbsp;</dt>
<dd>
<p>If you connect to the database using operating system authentication, you can use any username and password to connect. However, DGMGRL may not be able to shut down and start up the primary and standby database automatically because it cannot remotely authenticate itself.</p>
<p>The following example shows a switchover that succeeded but returns an error because DGMGRL cannot shut down and start up the primary and standby databases.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<pre dir="ltr">
DGMGRL&gt; SWITCHOVER TO 'South_Sales';
Performing switchover NOW, please wait...
New primary database "South_Sales" is opening...
Operation requires shutdown of instance "north_sales1" on database "North_Sales"
Shutting down instance "north_sales1"...
ORA-01031: insufficient privileges
 
Warning: You are no longer connected to ORACLE.
 
Please complete the following steps to finish switchover:
        shut down instance "north_sales1" of database "North_Sales"
        start up and mount instance "north_sales1" of database "North_Sales"
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
For DGMGRL to restart instances automatically, you must connect to the database using the same credentials given in the last <code dir="ltr">CONNECT</code> command, even if the last <code dir="ltr">CONNECT</code> command was used to connect to another database.</div>
<p>You must manually issue the <a href="#i79232">SHUTDOWN</a> and <a href="#i79261">STARTUP</a> commands to restart the new primary and any standby instances that may have been shut down.</p>
</div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1477">
<tr>
<td class="cellalignment1484">
<table class="cellalignment1482">
<tr>
<td class="cellalignment1481"><a href="cli.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1481"><a href="dbpropref.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1486">
<table class="cellalignment1480">
<tr>
<td class="cellalignment1481"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1481"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1481"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1481"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1481"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1481"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
