<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Oracle Data Guard Installation</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="dcterms.created" content="2015-11-24T12:57:37Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Guard Broker" />
<meta name="dcterms.identifier" content="E40771-07" />
<meta name="dcterms.isVersionOf" content="DGBKR" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="concepts.htm" title="Previous" type="text/html" />
<link rel="Next" href="configure.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40771.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">9/20</span> <!-- End Header -->
<div id="DGBKR1300" class="chapter"><a id="BABFHFEI"></a>
<h1 class="chapter"><span class="secnum">2</span> Oracle Data Guard Installation</h1>
<p>This chapter includes the following topics:</p>
<ul>
<li>
<p><a href="#BABFFICD">Oracle Data Guard Installation</a></p>
</li>
<li>
<p><a href="#BABECEJC">Prerequisites</a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="upgrade_appx.htm#CHDCJAAJ">Appendix B</a> for help with upgrading to a new release in a Data Guard broker configuration</div>
</li>
</ul>
<a id="BABFFICD"></a>
<div id="DGBKR070" class="sect1">
<h2 class="sect1"><span class="secnum">2.1</span> Oracle Data Guard Installation<a id="sthref148"></a></h2>
<p>Oracle Data Guard is included with the E<a id="sthref149"></a>nterprise Edition and Personal Edition of the Oracle database software. You can manage a Data Guard configuration by using either SQL*Plus, the Data Guard broker's command-line interface (DGMGRL), or a compatible version of Oracle Enterprise Manager Grid Control.</p>
<p>To use DGMGRL, the best practice is to install the Oracle Enterprise Edition or Personal Edition database software on each location you expect to include in broker configurations. You must i<a id="sthref150"></a>nstall a compatible version of Oracle Enterprise Manager Grid Control to use the Enterprise Manager Web-based user interface for Data Guard.</p>
<p>In addition, to use fast-start failover you must install DGMGRL and run the observer software. Oracle recommends running the observer on a computer system that is separate from the primary and standby systems. To install DGMGRL on the observer computer, use one of the methods described in the following list:</p>
<ul>
<li>
<p>Install the complete <a id="sthref151"></a><a id="sthref152"></a><a id="sthref153"></a><a id="sthref154"></a>Oracle Client Administrator by choosing the <code dir="ltr">Administrator</code> option from Oracle Universal Installer.</p>
<p>This installation includes DGMGRL but it does not include the Oracle Enterprise Manager agent. This allows you to manage the observer using DGMGRL commands but not Oracle Enterprise Manager. (The Oracle Enterprise Manager agent can be installed separately.)</p>
</li>
<li>
<p>Install the full Oracle Database 11<span class="italic">g</span> software kit.</p>
<p>This installation includes DGMGRL and the Oracle Enterprise Manager agent, allowing you to manage the observer using Oracle Enterprise Manager or DGMGRL commands.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The observer can be run from any platform that supports it, and that platform can be different from the platform of the primary or target standby database.</div>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="BABECEJC"></a>
<div id="DGBKR090" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">2.2</span> Prerequisites<a id="sthref155"></a><a id="sthref156"></a></h2>
<p>The following <a id="sthref157"></a>c<a id="sthref158"></a>onditions must be met before you can use the broker:</p>
<ul>
<li>
<p>The primary and standby <a id="sthref159"></a>databases must be using the same version of Oracle Database 11<span class="italic">g</span> and each can be installed in either a single-instance or multi-instance environment. The database must be licensed for Oracle Enterprise Edition or Personal Edition.</p>
</li>
<li>
<p>You must use a <a id="sthref160"></a><a id="sthref161"></a>server parameter file (SPFILE)<a id="sthref162"></a> to ensure the broker can persistently reconcile values between broker properties and any related initialization parameter values. See <a href="dbresource.htm#i1006133">Section 4.3.2</a> for more information.</p>
<p>If any of the databases in the configuration is an Oracle RAC database, you must configure the server parameter file (SPFILE) appropriately for use in an Oracle RAC environment.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink RACAD020" href="../../rac.112/e41960/admin.htm#RACAD020"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about initialization files in an Oracle RAC</div>
</li>
<li>
<p>The value of the <a id="sthref163"></a><a id="sthref164"></a><a id="sthref165"></a><code dir="ltr">DG_BROKER_START</code> initialization parameter must be set to <code dir="ltr">TRUE</code>. See <a href="configure.htm#i1005744">Section 3.3</a> for more information. (Enterprise Manager sets this parameter automatically.)</p>
</li>
<li>
<p>If any of the databases in the configuration is an Oracle RAC database, you must set up the <code dir="ltr">DG_BROKER_CONFIG_FILE</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameters for that database such that they point to the same shared files for all instances of that database. The shared files could be files on a cluster file system, if available, on raw devices, or stored using Oracle A<a id="sthref166"></a><a id="sthref167"></a><a id="sthref168"></a>utomatic Storage Management (Oracle ASM).</p>
<div class="infobox-note">
<p class="notep1">See Also:</p>
Configuration file information in <a href="concepts.htm#i1013995">Section 1.6.2</a>. Also, see <a href="configure.htm#i1021661">Section 3.2</a> for details about setting up the broker configuration file, and <a href="configure.htm#CFHDEBDC">Section 3.2.2.3</a> for details about sizing the raw devices.</div>
</li>
<li>
<p><a id="sthref169"></a>Oracle Net Services <a id="sthref170"></a>network files must be set up on the primary database and on the standby <a id="sthref171"></a>database if you configure an existing standby database into the broker configuration. Enterprise Manager can assist you in creating the network files when creating a standby database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></div>
</li>
<li>
<p>In a broker configuration, you use the <code dir="ltr">DGConnectIdentifer</code> property to specify a connect identifier for each database. The connect identifier for a database must:</p>
<ul>
<li>
<p>Allow all other databases in the configuration to reach it.</p>
</li>
<li>
<p>Allow the database to reach itself.</p>
</li>
<li>
<p>Allow all instances of an Oracle RAC database to be reached.</p>
</li>
<li>
<p>Specify a service that all instances dynamically register with the listeners so that connect-time failover on an Oracle RAC database is possible.</p>
</li>
<li>
<p>Have failover attributes set to allow the primary database's Redo Transport Services to continue shipping redo data to an Oracle RAC standby database, even if the receiving instance of that standby database has failed.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about connect identifiers</div>
</li>
<li>
<p>To enable DGMGRL to restart instances during the course of broker operations, a static service must be registered with the local listener of each instance. A static service registration is also required to enable the observer to restart instances as part of automatic reinstatement of the old primary database after a fast-start failover has occurred. By default, the broker assumes a static service name of <code dir="ltr">db_unique_name_DGMGRL.db_domain</code> and expects the listener has been started with the following content in the <code dir="ltr">listener.ora</code> file:</p>
<pre dir="ltr">
LISTENER = (DESCRIPTION =
     (ADDRESS_LIST=(ADDRESS=(PROTOCOL=tcp)(HOST=host_name)
     (PORT=port_num))))
SID_LIST_LISTENER=(SID_LIST=(SID_DESC=(SID_NAME=sid_name)
     (GLOBAL_DBNAME=db_unique_name_DGMGRL.db_domain)
     (ORACLE_HOME=oracle_home)
     (ENVS="TNS_ADMIN=oracle_home/network/admin")))
</pre>
<p>Alternatively, you can use a different static service name. If you do, be sure to modify the <code dir="ltr">StaticConnectIdentifier</code> instance-specific property to reflect the static service that has been registered.</p>
<p>You should also be aware of the following additional considerations in an Oracle Clusterware environment:</p>
<ul>
<li>
<p>The static service must be set in the <code dir="ltr">listener.ora</code> file in the GRID_HOME of all the nodes.</p>
</li>
<li>
<p>The ORACLE_HOME <code dir="ltr">listener.ora</code> parameter in the static service definition must be set to the ORACLE_HOME of the instance, not the GRID_HOME.</p>
</li>
<li>
<p>The ENVS <code dir="ltr">listener.ora</code> parameter must be used in the static service definition to explicitly set the TNS_ADMIN environment variable to the appropriate network admin directory, which is usually the network admin directory of the Oracle Home for the Oracle database.</p>
</li>
<li>
<p>In an Oracle RAC One Node or Policy Managed Oracle RAC environment, the <code dir="ltr">SID_NAME</code> of each possible instance must be specified in the <code dir="ltr">SID_LIST</code>. The <code dir="ltr">SID_NAME</code> of each instance must match the <code dir="ltr">INSTANCE_NAME</code> database initialization parameter of that instance. In an Oracle RAC One Node or Policy Managed Oracle RAC environment, the default value of the <code dir="ltr">INSTANCE_NAME</code> parameter is <code dir="ltr">db_unique_name_instance_number</code>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>See <a class="olink NETAG297" href="../../network.112/e41945/listenercfg.htm#NETAG297"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about configuring static services</p>
</li>
<li>
<p>See the My Oracle Support Note 1387859.1 at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code> for additional information about using static services and the <code dir="ltr">StaticConnectIdentifier</code> configurable property</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <a id="sthref172"></a>primary database must be opened in <a id="sthref173"></a><a id="sthref174"></a><code dir="ltr">ARCHIVELOG</code> mode.</p>
</li>
<li>
<p>You must set the <code dir="ltr"><a id="sthref175"></a><a id="sthref176"></a>COMPATIBLE</code> initialization parameter to 10.2.0.1.0 or higher for both the primary and standby databases. However, if you want to take advantage of new Oracle Database 11.2 features, set the <code dir="ltr">COMPATIBLE</code> parameter to 11.2.0 on all databases within the Data Guard configuration.</p>
<p>Ensure the <code dir="ltr">COMPATIBLE</code> initialization parameter is set to the same value on both the primary and standby databases. If the values differ, redo transport services may be unable to transmit redo data from the primary database to the standby databases.</p>
</li>
<li>
<p>Select and configure a redo transport authentication method, as described in <a class="olink SBYDB00424" href="../../server.112/e41134/create_ps.htm#SBYDB00424"><span class="italic">Oracle Data Guard Concepts and Administration</span></a>.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="configure.htm#i1005744">Section 3.3</a> for more information about preparing and starting Oracle Data Guard broker</p>
</li>
<li>
<p><a class="olink SBYDB" href="../e41134/toc.htm"><span class="italic">Oracle Data Guard Concepts and Administration</span></a> for more information about setting up network files</p>
</li>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1477">
<tr>
<td class="cellalignment1484">
<table class="cellalignment1482">
<tr>
<td class="cellalignment1481"><a href="concepts.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1481"><a href="configure.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1486">
<table class="cellalignment1480">
<tr>
<td class="cellalignment1481"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1481"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1481"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1481"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1481"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1481"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
