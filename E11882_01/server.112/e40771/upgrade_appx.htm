<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Data Guard Broker Upgrading and Downgrading</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="dcterms.created" content="2015-11-24T12:57:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Guard Broker" />
<meta name="dcterms.identifier" content="E40771-07" />
<meta name="dcterms.isVersionOf" content="DGBKR" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="deprecated_appx.htm" title="Previous" type="text/html" />
<link rel="Next" href="glossary.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e40771.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">18/20</span> <!-- End Header -->
<div id="DGBKR1200" class="appendix"><a id="CHDCJAAJ"></a>
<h1 class="appendix"><span class="secnum">B</span> Data Guard Broker Upgrading and Downgrading</h1>
<p>This appendix guides you through the process of upgrading or downgrading the Oracle databases and Oracle Enterprise Manager in a broker configuration. It contains the following topics:</p>
<ul>
<li>
<p><a href="#CHDGAGGE">Upgrading from Release 9.2.0 to Release 11.2</a></p>
</li>
<li>
<p><a href="#BCEDCCAC">Upgrading from Release 10.<span class="italic">n</span> and 11.1 to Release 11.2</a></p>
</li>
<li>
<p><a href="#CEGIABCH">Upgrading from Release 11.2.0.1 to 11.2.0.2 and other Patch Releases</a></p>
</li>
<li>
<p><a href="#BCEFIHHC">Downgrading from Release 11.2</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="install.htm#BABFHFEI">Chapter 2, "Oracle Data Guard Installation"</a></div>
<a id="CHDGAGGE"></a>
<div id="DGBKR1210" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.1</span> Upgrading from Release 9.2.0 to Release 11.2</h2>
<p>If you are currently running an Oracle Data Guard release 9.2.0 configuration, you must u<a id="sthref1313"></a>pgrade to Oracle Database release 11.2, and re-create the broker configuration, as follows:</p>
<ol>
<li>
<p>Delete (remove) the release 9.2.0 broker configuration using Data Guard Manager or DGMGRL release 9.2.0. For example, the DGMGRL <code dir="ltr">REMOVE CONFIGURATION</code> command can be used.</p>
</li>
<li>
<p>If using DGMGRL, clear the <code dir="ltr">LOG_ARCHIVE_DEST_</code><code dir="ltr"><span class="codeinlineitalic">n</span></code> initialization parameter settings by using the <code dir="ltr">ALTER SYSTEM SET LOG_ARCHIVE_DEST_</code><span class="variable">n</span><code dir="ltr">=" "</code> SQL*Plus command.</p>
</li>
<li>
<p>Upgrade the database software to Oracle release 11.2. See the Oracle Database installation documentation that is appropriate for your operating system.</p>
</li>
<li>
<p>Oracle Enterprise Manager and Data Guard Manager release 9.2.0 cannot manage a broker configuration running Oracle Data Guard release 11.2.<a id="sthref1314"></a><a id="sthref1315"></a></p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
My Oracle Support note 787461.1 at <code dir="ltr"><a href="http://support.oracle.com">http://support.oracle.com</a></code> for information about which versions of Enterprise Manager Grid Control are required to manage the full set of Data Guard features in various Oracle Database releases</div>
</li>
<li>
<p>If you are using DGMGRL release 9.2.0, you must upgrade to Data Guard command-line interface release 11.2:</p>
<ul>
<li>
<p>DGMGRL release 9.2.0 is not compatible with Oracle Data Guard release 11.2.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Existing Oracle9<span class="italic">i</span> command-line scripts are supported in Oracle Database 11.2 for non-Oracle RAC databases. See <a href="deprecated_appx.htm#g640620">Appendix A</a> for information about deprecated commands.</div>
</li>
<li>
<p>DGMGRL release 11.2 is not compatible with Oracle Data Guard release 9.2.0.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Oracle Database 11.2 command-line scripts are not supported in Oracle9<span class="italic">i</span>.</div>
</li>
</ul>
</li>
<li>
<p>Invoke Enterprise Manager or the DGMGRL command-line interface, and re-create the broker configuration.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="BCEDCCAC"></a>
<div id="DGBKR1212" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.2</span> Upgrading from Release 10.<span class="italic">n</span> and 11.1 to Release 11.2</h2>
<p>If you are currently running an Oracle Data Guard release 10.<span class="italic">n</span> or 11.1 configuration, you can u<a id="sthref1316"></a>pgrade the database software to Oracle release 11.2 using the Oracle Database installation documentation that is appropriate for your operating system.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Prior to Release 11.2, the configuration file was restricted to reside only on disks having the same sector size (physical block size) as that upon which the file was initially created. This was not a problem because there was typically a single sector size in use within a given broker configuration. In anticipation of having mixed sector sizes somewhere within a given broker configuration, the 11.2 broker configuration file is now completely insensitive to the underlying sector size, so long as the sector size is 4KB or less.
<p>Conversion of the configuration file to be insensitive to the underlying sector size occurs during the upgrade processing in Step 5 below.</p>
</div>
<dl>
<dd><a id="DGBKR3766"></a><a id="sthref1317"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Disable fast-start failover if it is enabled.</dt>
<dd>
<p>Issue the following DGMGRL command to disable fast-start failover:</p>
<pre dir="ltr">
DGMGRL&gt; DISABLE FAST_START FAILOVER;
</pre></dd>
<dd><a id="DGBKR3767"></a><a id="sthref1318"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Shut down the 10.<span class="italic">n</span> or 11.1 Data Guard broker, whichever version you are running.</dt>
<dd>
<p>Disable the broker's management of the configuration and then stop the broker. For example:</p>
<ol>
<li>
<p>Issue the following DGMGRL command to disable the broker's active management of the databases in the Data Guard configuration:</p>
<pre dir="ltr">
DGMGRL&gt; DISABLE CONFIGURATION;
</pre></li>
<li>
<p>Issue the following SQL*Plus statement to stop the broker:</p>
<pre dir="ltr">
SQL&gt; ALTER SYSTEM SET DG_BROKER_START=FALSE;
</pre></li>
</ol>
</dd>
<dd><a id="DGBKR3768"></a><a id="sthref1319"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Make a copy of the current broker configuration files.</dt>
<dd>
<p>Make a copy of the current broker configuration files, as indicated by the following initialization parameters: <code dir="ltr">DG_BROKER_CONFIG_FILE1</code> and <code dir="ltr">DG_BROKER_CONFIG_FILE2</code>.</p>
</dd>
<dd><a id="DGBKR3769"></a><a id="sthref1320"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;Upgrade the Oracle Database software to release 11.2.</dt>
<dd>
<p>For step-by-step upgrade instructions, see the Oracle Database installation documentation that is appropriate for your operating system.</p>
<p>The DGMGRL command-line interface must also be upgraded to release 11.2 in order to manage and monitor a broker configuration running Oracle Data Guard release 11.2. DGMGRL release 11.2 cannot be used to manage Data Guard releases 10.n or 11.1.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Existing release 10.<span class="italic">n</span> or 11.1 DGMGRL command-line scripts are supported by the DGMGRL command-line interface available in release 11.2.
<p>Release 11.<span class="italic">n</span> DGMGRL command-line scripts are not guaranteed to be supported by Oracle Database release 10.<span class="italic">n</span>.</p>
</div>
</dd>
<dd><a id="DGBKR3770"></a><a id="sthref1321"></a></dd>
<dt class="seghead">Step 5&nbsp;&nbsp;&nbsp;Start the broker.</dt>
<dd>
<p>After the upgrade, start the release 11.2 Data Guard Broker. For example:</p>
<ol>
<li>
<p>Issue the following SQL*Plus statements to start the broker:</p>
<pre dir="ltr">
SQL&gt; ALTER SYSTEM SET DG_BROKER_START=TRUE;
</pre></li>
<li>
<p>Issue the following DGMGRL command to enable the broker's active management of the databases in the Data Guard configuration:</p>
<pre dir="ltr">
DGMGRL&gt; ENABLE CONFIGURATION
</pre></li>
</ol>
<p>The first time the release 11.2 broker starts, it will detect the existence of the release 10.<span class="italic">n</span> and 11.1 broker configuration files and automatically upgrade them to include any new properties that were introduced in release 11.2 (for example, the fast-start failover properties). This automatic conversion is transparent, permanent, and occurs only once.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
As of this automatic upgrade that occurs in Step 5, the configuration file may henceforth reside on a disk having any supported disk sector size (physical block size) up to and including 4KB sectors.</div>
</dd>
</dl>
<div class="infobox-note">
<p class="notep1">Note:</p>
The observer that was started prior to the upgrade will automatically be stopped and unable to observe the configuration once the upgrade is complete. You must use an 11.2 version of the Oracle Observer software to observe Oracle databases running version 11.2 or higher.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="deprecated_appx.htm#g640620">Appendix A, "Changed and Deprecated Features"</a></div>
</div>
<!-- class="sect1" -->
<a id="CEGIABCH"></a>
<div id="DGBKR3648" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.3</span> Upgrading from Release 11.2.0.1 to 11.2.0.2 and other Patch Releases</h2>
<p>In a Data Guard broker configuration, the process for upgrading from one patch release to the next (for example, from 11.2.0.1 to 11.2.0.2 or from 11.2.0.2 to 11.2.0.3) is the same process as described in <a href="#BCEDCCAC">"Upgrading from Release 10.<span class="italic">n</span> and 11.1 to Release 11.2"</a>. The broker must be disabled before the upgrade and re-enabled after the upgrade is complete.</p>
</div>
<!-- class="sect1" -->
<a id="BCEFIHHC"></a>
<div id="DGBKR1215" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">B.4</span> Downgrading from Release 11.2</h2>
<p>If you have upgraded to release 11.2 and want to <a id="sthref1322"></a><a id="sthref1323"></a><a id="sthref1324"></a>downgrade to your prior release, you must downgrade the database release and re-create the broker configuration as follows:</p>
<ol>
<li>
<p>Delete (remove) the release 11.2 broker configuration using Enterprise Manager or DGMGRL release 11.2. For example, the DGMGRL <code dir="ltr">REMOVE CONFIGURATION</code> command can be used.</p>
</li>
<li>
<p>Downgrade the Oracle Database software to the prior Oracle release. See the Oracle Database documentation that is appropriate for your operating system.</p>
</li>
<li>
<p>You can downgrade the Data Guard broker to release 10.<span class="italic">n</span> or 11.1 as follows:</p>
<ul>
<li>
<p>If you are confident that you made no changes to your broker configuration after upgrading to release 11.2, you can copy the broker configuration files that you created during the upgrade procedure (described in <a href="#BCEDCCAC">Section B.2</a>). Then, invoke Enterprise Manager or the DGMGRL command-line interface and reenable the broker configuration as it existed at the time you made that copy.</p>
</li>
<li>
<p>Alternatively, you can invoke Enterprise Manager or the DGMGRL command-line interface to re-create the broker configuration.</p>
</li>
</ul>
</li>
<li>
<p>You can downgrade the Data Guard broker to Oracle release 9.2.0, as follows:</p>
<ul>
<li>
<p>If you were using Enterprise Manager, you can continue to use the Oracle Enterprise Manager release 10.2 to manage your 9.2.0 broker configuration. You can also downgrade to the Data Guard Manager by re-installing Oracle Enterprise Manager release 9.2.0.</p>
</li>
<li>
<p>Invoke Enterprise Manager, the Data Guard Manager, or the DGMGRL command-line interface and re-create the broker configuration.</p>
</li>
</ul>
</li>
</ol>
</div>
<!-- class="sect1" --></div>
<!-- class="appendix" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1477">
<tr>
<td class="cellalignment1484">
<table class="cellalignment1482">
<tr>
<td class="cellalignment1481"><a href="deprecated_appx.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1481"><a href="glossary.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1486">
<table class="cellalignment1480">
<tr>
<td class="cellalignment1481"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1481"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1481"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1481"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1481"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1481"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
