<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>FIRST_VALUE</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1075" />
<meta name="dcterms.created" content="2016-01-05T5:45:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database SQL Language Reference" />
<meta name="dcterms.identifier" content="E41084-04" />
<meta name="dcterms.isVersionOf" content="SQLRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="functions065.htm" title="Previous" type="text/html" />
<link rel="Next" href="functions067.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41084.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">106/522</span> <!-- End Header --><a id="i83212"></a>
<div id="SQLRF00642" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">FIRST_VALUE <a id="sthref1131"></a><a id="sthref1132"></a></h1>
<p class="subhead1"><a id="SQLRF51414"></a>Syntax</p>
<img width="702" height="162" src="img/first_value.gif" alt="Description of first_value.gif follows" /><br />
<a id="sthref1133" href="img_text/first_value.htm">Description of the illustration ''first_value.gif''</a><br />
<br />
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="functions004.htm#i81407">"Analytic Functions"</a> for information on syntax, semantics, and restrictions, including valid forms of <code dir="ltr"><span class="codeinlineitalic">expr</span></code></div>
<p class="subhead1"><a id="SQLRF51415"></a>Purpose</p>
<p><code dir="ltr">FIRST_VALUE</code> is an analytic function. It returns the first value in an ordered set of values. If the first value in the set is null, then the function returns <code dir="ltr">NULL</code> unless you specify <code dir="ltr">IGNORE NULLS</code>. This setting is useful for data densification.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The two forms of this syntax have the same behavior. The top branch is the ANSI format, which Oracle recommends. The bottom branch is deprecated but is supported for backward compatibility.</div>
<p>{<code dir="ltr">RESPECT</code> | <code dir="ltr">IGNORE</code>} <code dir="ltr">NULLS</code> determines whether null values of <code dir="ltr"><span class="codeinlineitalic">expr</span></code> are included in or eliminated from the calculation. The default is <code dir="ltr">RESPECT</code> <code dir="ltr">NULLS</code>. If you specify <code dir="ltr">IGNORE NULLS</code>, then <code dir="ltr">FIRST_VALUE</code> returns the first non-null value in the set, or <code dir="ltr">NULL</code> if all values are null. Refer to <a href="statements_10002.htm#i2177515">"Using Partitioned Outer Joins: Examples"</a> for an example of data densification.</p>
<p>You cannot nest analytic functions by using <code dir="ltr">FIRST_VALUE</code> or any other analytic function for <code dir="ltr"><span class="codeinlineitalic">expr</span></code>. However, you can use other built-in function expressions for <code dir="ltr"><span class="codeinlineitalic">expr</span></code>. Refer to <a href="expressions001.htm#i1002626">"About SQL Expressions"</a> for information on valid forms of <code dir="ltr"><span class="codeinlineitalic">expr</span></code>.</p>
<p class="subhead1"><a id="SQLRF51416"></a>Examples</p>
<p>The following example selects, for each employee in Department 90, the name of the employee with the lowest salary.</p>
<pre dir="ltr">
SELECT department_id, last_name, salary,
       FIRST_VALUE(last_name)
         OVER (ORDER BY salary ASC ROWS UNBOUNDED PRECEDING) AS lowest_sal
  FROM (SELECT * FROM employees
          WHERE department_id = 90
          ORDER BY employee_id)
  ORDER BY last_name;

DEPARTMENT_ID LAST_NAME                     SALARY LOWEST_SAL
------------- ------------------------- ---------- -------------------------
           90 De Haan                        17000 Kochhar
           90 King                           24000 Kochhar
           90 Kochhar                        17000 Kochhar
</pre>
<p>The example illustrates the nondeterministic nature of the <code dir="ltr">FIRST_VALUE</code> function. Kochhar and DeHaan have the same salary, so are in adjacent rows. Kochhar appears first because the rows returned by the subquery are ordered by <code dir="ltr">employee_id</code>. However, if the rows returned by the subquery are ordered by <code dir="ltr">employee_id</code> in descending order, as in the next example, then the function returns a different value:</p>
<pre dir="ltr">
SELECT department_id, last_name, salary,
       FIRST_VALUE(last_name)
         OVER (ORDER BY salary ASC ROWS UNBOUNDED PRECEDING) AS fv
  FROM (SELECT * FROM employees
          WHERE department_id = 90
          ORDER by employee_id DESC)
  ORDER BY last_name;

DEPARTMENT_ID LAST_NAME                     SALARY FV
------------- ------------------------- ---------- -------------------------
           90 De Haan                        17000 De Haan
           90 King                           24000 De Haan
           90 Kochhar                        17000 De Haan
</pre>
<p>The following example shows how to make the <code dir="ltr">FIRST_VALUE</code> function deterministic by ordering on a unique key.</p>
<pre dir="ltr">
SELECT department_id, last_name, salary, hire_date,
       FIRST_VALUE(last_name)
         OVER (ORDER BY salary ASC, hire_date ROWS UNBOUNDED PRECEDING) AS fv
  FROM (SELECT * FROM employees 
          WHERE department_id = 90
          ORDER BY employee_id DESC)
  ORDER BY last_name;

DEPARTMENT_ID LAST_NAME           SALARY HIRE_DATE FV
------------- --------------- ---------- --------- -------------------------
           90 De Haan              17000 13-JAN-01 De Haan
           90 King                 24000 17-JUN-03 De Haan
           90 Kochhar              17000 21-SEP-05 De Haan
</pre>
<p>When you use a logical offset (<code dir="ltr">RANGE</code> instead of <code dir="ltr">ROWS</code>), the function is deterministic. When duplicates are found for the <code dir="ltr">ORDER</code> <code dir="ltr">BY</code> expression, the <code dir="ltr">FIRST_VALUE</code> is the lowest value of <code dir="ltr"><span class="codeinlineitalic">expr</span></code>:</p>
<pre dir="ltr">
SELECT department_id, last_name, salary,
       FIRST_VALUE(last_name)
         OVER (ORDER BY salary ASC RANGE UNBOUNDED PRECEDING) AS lowest_sal
  FROM (SELECT * FROM employees
          WHERE department_id = 90
          ORDER BY employee_id);
 
DEPARTMENT_ID LAST_NAME                     SALARY LOWEST_SAL
------------- ------------------------- ---------- -------------------------
           90 De Haan                        17000 De Haan
           90 Kochhar                        17000 De Haan
           90 King                           24000 De Haan
</pre></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1858">
<tr>
<td class="cellalignment1865">
<table class="cellalignment1863">
<tr>
<td class="cellalignment1862"><a href="functions065.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1862"><a href="functions067.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1867">
<table class="cellalignment1861">
<tr>
<td class="cellalignment1862"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1862"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1862"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1862"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1862"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1862"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
