<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>PREDICTION_SET</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1075" />
<meta name="dcterms.created" content="2016-01-05T5:45:39Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database SQL Language Reference" />
<meta name="dcterms.identifier" content="E41084-04" />
<meta name="dcterms.isVersionOf" content="SQLRF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="functions136.htm" title="Previous" type="text/html" />
<link rel="Next" href="functions138.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41084.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">177/522</span> <!-- End Header --><a id="CJAJGHAI"></a>
<div id="SQLRF06233" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h1 class="refsect1">PREDICTION_SET <a id="sthref1382"></a><a id="sthref1383"></a></h1>
<p class="subhead1"><a id="SQLRF51647"></a>Syntax</p>
<img width="633" height="143" src="img/prediction_set.gif" alt="Description of prediction_set.gif follows" /><br />
<a id="sthref1384" href="img_text/prediction_set.htm">Description of the illustration ''prediction_set.gif''</a><br />
<br />
<p class="subhead2"><a id="SQLRF51648"></a><span class="italic">cost_matrix_clause</span>::=</p>
<img width="617" height="143" src="img/cost_matrix_clause.gif" alt="Description of cost_matrix_clause.gif follows" /><br />
<a id="sthref1385" href="img_text/cost_matrix_clause.htm">Description of the illustration ''cost_matrix_clause.gif''</a><br />
<br />
<p class="subhead2"><a id="SQLRF51649"></a><span class="italic">mining_attribute_clause</span>::=</p>
<img width="426" height="162" src="img/mining_attribute_clause.gif" alt="Description of mining_attribute_clause.gif follows" /><br />
<a id="sthref1386" href="img_text/mining_attribute_clause.htm">Description of the illustration ''mining_attribute_clause.gif''</a><br />
<br />
<p class="subhead1"><a id="SQLRF51650"></a>Purpose</p>
<p>This function is for use with classification models created by the <code dir="ltr">DBMS_DATA_MINING</code> package or with Oracle Data Miner. It is not valid with other types of models. It returns a varray of objects containing all classes in a multiclass classification scenario. The object fields are named <code dir="ltr">PREDICTION</code>, <code dir="ltr">PROBABILITY</code>, and <code dir="ltr">COST</code>. The data type of the <code dir="ltr">PREDICTION</code> field depends on the target value type used during the build of the model. The other two fields are both Oracle <code dir="ltr">NUMBER</code>. The elements are returned in the order of best prediction to worst prediction.</p>
<ul>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">bestN</span></code>, specify a positive integer to restrict the returned target classes to the <code dir="ltr">N</code> having the highest probability, or lowest cost if cost matrix clause is specified. If multiple classes are tied in the Nth value, then the database still returns only <code dir="ltr">N</code> values. If you want to filter only by <code dir="ltr"><span class="codeinlineitalic">cutoff</span></code>, specify <code dir="ltr">NULL</code> for this parameter.</p>
</li>
<li>
<p>For <code dir="ltr"><span class="codeinlineitalic">cutoff</span></code>, specify a <code dir="ltr">NUMBER</code> value to restrict the returned target classes to those with a probability greater than or equal to (or a cost less than or equal to if cost matrix clause is specified) to the specified cutoff value. You can filter solely by <code dir="ltr"><span class="codeinlineitalic">cutoff</span></code> by specifying <code dir="ltr">NULL</code> for <code dir="ltr"><span class="codeinlineitalic">bestN</span></code>.</p>
<p>When you specify values for both <code dir="ltr"><span class="codeinlineitalic">bestN</span></code> and <code dir="ltr"><span class="codeinlineitalic">cutoff</span></code>, you restrict the returned predictions to only those that are the <code dir="ltr"><span class="codeinlineitalic">bestN</span></code> and have a probability (or cost when the <code dir="ltr"><span class="codeinlineitalic">cost_matrix_clause</span></code> is specified) surpassing the threshold.</p>
</li>
</ul>
<p>The <code dir="ltr"><span class="codeinlineitalic">cost_matrix_clause</span></code> clause is relevant for all classification models. When you specify this clause, both <code dir="ltr"><span class="codeinlineitalic">bestN</span></code> and <code dir="ltr"><span class="codeinlineitalic">cutoff</span></code> are treated with respect to the prediction cost, not the prediction probability. The value of <code dir="ltr"><span class="codeinlineitalic">bestN</span></code> restricts the result to the target classes having the <code dir="ltr">N</code> best (lowest) costs, and <code dir="ltr"><span class="codeinlineitalic">cutoff</span></code> restricts the target classes to those with a cost less than or equal to the specified cutoff.</p>
<p>When you specify this clause, each object in the collection is a triplet of scalar values containing the prediction value (the data type of which depends on the target value type used during model build), the prediction probability, and the prediction cost (both Oracle <code dir="ltr">NUMBER</code>).</p>
<p>If you omit this clause, then each object in the varray is a pair of scalars containing the prediction value and prediction probability. The data types returned are as described in the preceding paragraph.</p>
<ul>
<li>
<p>Specify <code dir="ltr">COST</code> <code dir="ltr">MODEL</code> to indicate that the scoring should be performed by taking into account the scoring cost matrix associated with the model. If no such cost matrix exists, then the database returns an error.</p>
</li>
<li>
<p>Specify <code dir="ltr">COST</code> <code dir="ltr">MODEL</code> <code dir="ltr">AUTO</code> if the existence of a cost matrix is unknown. In this case:</p>
<ul>
<li>
<p>If the stored cost matrix exists, then the result is the same as with <code dir="ltr">COST</code> <code dir="ltr">MODEL</code>.</p>
</li>
<li>
<p>If no stored cost matrix exists, then the result is almost the same as without the <code dir="ltr"><span class="codeinlineitalic">cost_matrix_clause</span></code>, except the object in the collection is a triplet and the cost value is computed based on the unit cost matrix (0's on the diagonal and 1's everywhere else). This is equivalent to one minus probability for the given class. The cutoff parameter is ignored if no stored cost matrix exists.</p>
</li>
</ul>
</li>
<li>
<p>Use the <code dir="ltr">VALUES</code> clause (the bottom branch of the <code dir="ltr"><span class="codeinlineitalic">cost_matrix_clause</span></code>) to specify an inline cost matrix. You can use an inline cost matrix regardless of whether the model has an associated scoring cost matrix. Refer to <a class="olink DMPRG243" href="../../datamine.112/e12218/models_deploying.htm#DMPRG243"><span class="italic">Oracle Data Mining Application Developer's Guide</span></a> for an example of an inline cost matrix</p>
</li>
</ul>
<p>The <code dir="ltr"><span class="codeinlineitalic">mining_attribute_clause</span></code> behaves as described for the <code dir="ltr">PREDICTION</code> function. Refer to <a href="functions132.htm#CJAJACJD"><span class="xreftitleitalic"><span class="italic">mining_attribute_clause</span></span></a>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink DMCON" href="../../datamine.112/e16808/toc.htm"><span class="italic">Oracle Data Mining Concepts</span></a> for detailed information about Oracle Data Mining</p>
</li>
<li>
<p><a class="olink DMPRG004" href="../../datamine.112/e12218/models_deploying.htm#DMPRG004"><span class="italic">Oracle Data Mining Application Developer's Guide</span></a> for detailed information about scoring with the Data Mining SQL functions</p>
</li>
</ul>
</div>
<p class="subhead1"><a id="SQLRF51651"></a>Example</p>
<p>The following example lists, for ten customers, the likelihood and cost of using or rejecting an affinity card. This example has a binary target, but such a query is also useful in multiclass classification such as Low, Med, and High.</p>
<p>This example and the prerequisite data mining operations can be found in the demo file <code dir="ltr">$ORACLE_HOME/rdbms/demo/dmdtdemo.sql</code>. General information on data mining demo files is available in <a class="olink DMADM009" href="../../datamine.112/e16807/sampleprogs.htm#DMADM009"><span class="italic">Oracle Data Mining Administrator's Guide</span></a>. The example is presented here to illustrate the syntactic use of the function.</p>
<pre dir="ltr">
SELECT T.cust_id, S.prediction, S.probability, S.cost
  FROM (SELECT cust_id,
               PREDICTION_SET(dt_sh_clas_sample COST MODEL USING *) pset
          FROM mining_data_apply_v
         WHERE cust_id &lt; 100011) T,
       TABLE(T.pset) S
ORDER BY cust_id, S.prediction;

   CUST_ID PREDICTION PROBABILITY  COST
---------- ---------- ----------- -----
    100001          0      .96682   .27
    100001          1      .03318   .97
    100002          0      .74038  2.08
    100002          1      .25962   .74
    100003          0      .90909   .73
    100003          1      .09091   .91
    100004          0      .90909   .73
    100004          1      .09091   .91
    100005          0      .27236  5.82
    100005          1      .72764   .27
    100006          0     1.00000   .00
    100006          1      .00000  1.00
    100007          0      .90909   .73
    100007          1      .09091   .91
    100008          0      .90909   .73
    100008          1      .09091   .91
    100009          0      .27236  5.82
    100009          1      .72764   .27
    100010          0      .80808  1.54
    100010          1      .19192   .81
 
20 rows selected.
</pre></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1858">
<tr>
<td class="cellalignment1865">
<table class="cellalignment1863">
<tr>
<td class="cellalignment1862"><a href="functions136.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1862"><a href="functions138.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1996, 2016,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1867">
<table class="cellalignment1861">
<tr>
<td class="cellalignment1862"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1862"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1862"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1862"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1862"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1862"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
