<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Creating a Physical Standby Database</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 748" />
<meta name="dcterms.created" content="2014-02-25T8:43:0Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Guard Concepts and Administration" />
<meta name="dcterms.identifier" content="E41134-03" />
<meta name="dcterms.isVersionOf" content="SBYDB" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="standby.htm" title="Previous" type="text/html" />
<link rel="Next" href="create_ls.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41134.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">11/34</span> <!-- End Header -->
<div id="SBYDB00200" class="chapter"><a id="g88234"></a> <a id="i63561"></a>
<h1 class="chapter"><span class="secnum">3</span> Creating a Physical Standby Database</h1>
<p>T<a id="sthref223"></a>his chapter steps you through the process of creating a physical standby database. It includes the following main topics:</p>
<ul>
<li>
<p><a href="#i66205">Preparing the Primary Database for Standby Database Creation</a></p>
</li>
<li>
<p><a href="#i67520">Step-by-Step Instructions for Creating a Physical Standby Database</a></p>
</li>
<li>
<p><a href="#i77130">Post-Creation Steps</a></p>
</li>
</ul>
<p>The steps described in this chapter configure the standby database for maximum performance mode, which is the default data protection mode. <a href="protection.htm#CHDEDGIF">Chapter 5</a> provides information about configuring the different data protection modes.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating and using server parameter files</p>
</li>
<li>
<p><a class="olink DGBKR" href="../e40771/toc.htm"><span class="italic">Oracle Data Guard Broker</span></a> and the Enterprise Manager online help system for information about using the graphical user interface to automatically create a physical standby database</p>
</li>
<li>
<p><a href="rcmbackp.htm#g648533">Appendix E</a> for information about creating a standby database with Recovery Manager (RMAN)</p>
</li>
</ul>
</div>
<a id="i66205"></a>
<div id="SBYDB4718" class="sect1">
<h2 class="sect1"><span class="secnum">3.1</span> Preparing the <a id="sthref224"></a>Primary Database for Standby Database Creation</h2>
<p>Before you create a standby database you must first ensure the primary database is properly configured.</p>
<p><a href="#g84099">Table 3-1</a> provides a checklist of the tasks that you perform on the primary database to prepare for physical standby database creation. There is also a reference to the section that describes the task in more detail.</p>
<div id="SBYDB5015" class="tblformal">
<p class="titleintable"><a id="sthref225"></a><a id="g84099"></a>Table 3-1 Preparing the Primary Database for Physical Standby Database Creation</p>
<table class="cellalignment1825" title="Preparing the Primary Database for Physical Standby Database Creation" summary="This table lists the tasks you perform to prepare the primary database for physical standby database creation. Each list item is a hot link to the section providing detailed information about the task." dir="ltr">
<thead>
<tr class="cellalignment1814">
<th class="cellalignment1824" id="r1c1-t3">Reference</th>
<th class="cellalignment1824" id="r1c2-t3">Task</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r2c1-t3" headers="r1c1-t3">
<p><a href="#i70011">Section 3.1.1</a></p>
</td>
<td class="cellalignment1820" headers="r2c1-t3 r1c2-t3">
<p><a href="#i70011">Enable Forced Logging</a></p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r3c1-t3" headers="r1c1-t3">
<p><a href="#i69583">Section 3.1.2</a></p>
</td>
<td class="cellalignment1820" headers="r3c1-t3 r1c2-t3">
<p><a href="#i69583">Configure Redo Transport Authentication</a></p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r4c1-t3" headers="r1c1-t3">
<p><a href="#i1225703">Section 3.1.3</a></p>
</td>
<td class="cellalignment1820" headers="r4c1-t3 r1c2-t3">
<p><a href="#i1225703">Configure the Primary Database to Receive Redo Data</a></p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r5c1-t3" headers="r1c1-t3">
<p><a href="#i68626">Section 3.1.4</a></p>
</td>
<td class="cellalignment1820" headers="r5c1-t3 r1c2-t3">
<p><a href="#i68626">Set Primary Database Initialization Parameters</a></p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r6c1-t3" headers="r1c1-t3">
<p><a href="#BACIFFBC">Section 3.1.5</a></p>
</td>
<td class="cellalignment1820" headers="r6c1-t3 r1c2-t3">
<p><a href="#BACIFFBC">Enable Archiving</a></p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" -->
<div class="infobox-note">
<p class="notep1">Note:</p>
Perform these preparatory tasks only once. After you complete these steps, the database is prepared to serve as the primary database for one or more standby databases.</div>
<a id="i70011"></a>
<div id="SBYDB4719" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.1</span> Enable Forced Logging</h3>
<p>Place the primary database in <code><a id="sthref226"></a><a id="sthref227"></a>FORCE LOGGING</code> mode. You can do this after database creation using the following SQL statement:</p>
<pre>
SQL&gt; ALTER DATABASE FORCE LOGGING;
</pre>
<p>When you issue this statement, the primary database must at least be mounted (and it can also be open). This statement can take a considerable amount of time to complete, because it waits for all unlogged direct write I/O to finish.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN11096" href="../../server.112/e25494/create.htm#ADMIN11096"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the ramifications of specifying <code>FORCE</code> <code>LOGGING</code> mode</p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i69583"></a>
<div id="SBYDB00424" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.2</span> Configure Redo Transport Authentication</h3>
<p>Data Guard uses Oracle Net sessions to transport redo data and control messages between the members of a Data Guard configuration. These redo transport sessions are authenticated using either the Secure Sockets Layer (SSL) protocol or a remote login password file.</p>
<p>SSL is used to authenticate redo transport sessions between two databases if:</p>
<ul>
<li>
<p>The databases are members of the same Oracle Internet Directory (OID) enterprise domain and it allows the use of current user database links</p>
</li>
<li>
<p>The <code>LOG_ARCHIVE_DEST_</code><code><span class="codeinlineitalic">n</span></code>, and <code>FAL_SERVER</code> database initialization parameters that correspond to the databases use Oracle Net connect descriptors configured for SSL</p>
</li>
<li>
<p>Each database has an Oracle wallet or supported hardware security module that contains a user certificate with a distinguished name (DN) that matches the DN in the OID entry for the database</p>
</li>
</ul>
<p>If the SSL authentication requirements are not met, each member of a Data Guard configuration must be configured to use a remote login password file and every physical standby database in the configuration must have an up-to-date copy of the password file from the primary database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Whenever you grant or revoke the <code>SYSDBA</code> or <code>SYSOPER</code> privileges or change the login password of a user who has these privileges, you must replace the password file at each physical or snapshot standby database in the configuration with a fresh copy of the password file from the primary database.</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about remote login password files</p>
</li>
<li>
<p><a class="olink ASOAG" href="../../network.112/e40393/toc.htm"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a></p>
</li>
<li>
<p><a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a></p>
</li>
</ul>
</div>
</div>
<!-- class="sect2" -->
<a id="i1225703"></a>
<div id="SBYDB00426" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.3</span> Configure the Primary Database to Receive Redo Data</h3>
<p>Although this task is optional, Oracle recommends that a primary database be configured to receive redo data when a Data Guard configuration is created. By following this best practice, your primary database will be ready to quickly transition to the standby role and begin receiving redo data.</p>
<p>See <a href="log_transport.htm#BABHIDDA">Section 6.2.3</a> for a complete discussion of how to configure a database to receive redo data.</p>
</div>
<!-- class="sect2" -->
<a id="i68626"></a>
<div id="SBYDB4720" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.4</span> Set Primary Database Initialization Parameters</h3>
<p>On the primary database, you define initialization parameters that control redo transport services while the database is in the primary role. There are additional parameters you need to add that control the receipt of the redo data and apply services when the primary database is transitioned to the standby role.</p>
<p><a href="#i76119">Example 3-1</a> shows the primary role initialization parameters that you maintain on the primary database. This example represents a Data Guard configuration with a primary database located in Chicago and one physical standby database located in Boston. The parameters shown in <a href="#i76119">Example 3-1</a> are valid for the Chicago database when it is running in either the primary or the standby database role. The configuration examples use the names shown in the following table:</p>
<div class="inftblinformal">
<table class="cellalignment1823" title="Naming Conventions for the Chicago and Boston databases." summary="Shows the DB_UNIQUE_NAME and Oracle Net service names that are used in this chapters examples." dir="ltr">
<thead>
<tr class="cellalignment1814">
<th class="cellalignment1824" id="r1c1-t8">Database</th>
<th class="cellalignment1824" id="r1c2-t8"><a id="sthref228"></a><a id="sthref229"></a>DB_UNIQUE_NAME</th>
<th class="cellalignment1824" id="r1c3-t8">Oracle Net Service Name</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r2c1-t8" headers="r1c1-t8">Primary</td>
<td class="cellalignment1820" headers="r2c1-t8 r1c2-t8">chicago</td>
<td class="cellalignment1820" headers="r2c1-t8 r1c3-t8">chicago</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r3c1-t8" headers="r1c1-t8">Physical standby</td>
<td class="cellalignment1820" headers="r3c1-t8 r1c2-t8">boston</td>
<td class="cellalignment1820" headers="r3c1-t8 r1c3-t8">boston</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div id="SBYDB5016" class="example">
<p class="titleinexample"><a id="i76119"></a>Example 3-1 Primary Database: Primary Role Initialization Parameters</p>
<pre>
DB_NAME=chicago
DB_UNIQUE_NAME=chicago
<a id="sthref230"></a>LOG_ARCHIVE_CONFIG='DG_CONFIG=(chicago,boston)'
CONTROL_FILES='/arch1/chicago/control1.ctl', '/arch2/chicago/control2.ctl'
LOG_ARCHIVE_DEST_1=
 'LOCATION=/arch1/chicago/ 
  VALID_FOR=(ALL_LOGFILES,ALL_ROLES)
  DB_UNIQUE_NAME=chicago'
LOG_ARCHIVE_DEST_2=
 'SERVICE=boston ASYNC
  VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) 
  DB_UNIQUE_NAME=boston'
LOG_ARCHIVE_DEST_STATE_1=ENABLE
LOG_ARCHIVE_DEST_STATE_2=ENABLE
REMOTE_LOGIN_PASSWORDFILE=EXCLUSIVE
LOG_ARCHIVE_FORMAT=%t_%s_%r.arc
</pre></div>
<!-- class="example" -->
<p>These parameters control how redo transport services transmit redo data to the standby system and the archiving of redo data on the local file system. Note that the example specifies asynchronous (<code>ASYNC</code>) network transmission to transmit redo data on the <code>LOG_ARCHIVE_DEST_2</code> initialization parameter. These are the recommended settings and require standby redo log files (see <a href="#i1225703">Section 3.1.3, "Configure the Primary Database to Receive Redo Data"</a>).</p>
<p><a href="#i68648">Example 3-2</a> shows the additional standby role initialization parameters on the primary database. These parameters take effect when the primary database is transitioned to the standby role.</p>
<div id="SBYDB5017" class="example">
<p class="titleinexample"><a id="i68648"></a>Example 3-2 Primary Database: Standby Role Initialization Parameters</p>
<pre>
FAL_SERVER=boston
DB_FILE_NAME_CONVERT='boston','chicago'
LOG_FILE_NAME_CONVERT=
 '/arch1/boston/','/arch1/chicago/','/arch2/boston/','/arch2/chicago/' 
STANDBY_FILE_MANAGEMENT=AUTO
</pre></div>
<!-- class="example" -->
<p>Specifying the initialization parameters shown in <a href="#i68648">Example 3-2</a> sets up the primary database to resolve gaps, converts new datafile and log file path names from a new primary database, and archives the incoming redo data when this database is in the standby role. With the initialization parameters for both the primary and standby roles set as described, none of the parameters need to change after a role transition.</p>
<p>The following table provides a brief explanation about each parameter setting shown in <a href="#i76119">Example 3-1</a> and <a href="#i68648">Example 3-2</a>.</p>
<div class="inftblinformalwide">
<table class="cellalignment1823" title="Parameter Settings for the Boston (Primary) Database" summary="Briefly explains each initialization parameter that was set in Examples 3-1 and 3-2." dir="ltr">
<thead>
<tr class="cellalignment1814">
<th class="cellalignment1824" id="r1c1-t9">Parameter</th>
<th class="cellalignment1824" id="r1c2-t9">Recommended Setting</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r2c1-t9" headers="r1c1-t9"><a class="olink REFRN10041" href="../../server.112/e40402/initparams064.htm#REFRN10041"><code>DB_NAME</code></a><a id="sthref231"></a></td>
<td class="cellalignment1820" headers="r2c1-t9 r1c2-t9">On a primary database, specify the name used when the database was created. On a physical standby database, use the <code>DB_NAME</code> of the primary database.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r3c1-t9" headers="r1c1-t9"><a class="olink REFRN10242" href="../../server.112/e40402/initparams070.htm#REFRN10242"><code>DB_UNIQUE_NAME</code></a></td>
<td class="cellalignment1820" headers="r3c1-t9 r1c2-t9">Specify a unique name for each database. This name stays with the database and does not change, even if the primary and standby databases reverse roles.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r4c1-t9" headers="r1c1-t9"><a class="olink REFRN10237" href="../../server.112/e40402/initparams123.htm#REFRN10237"><code>LOG_ARCHIVE_CONFIG</code></a><a id="sthref232"></a></td>
<td class="cellalignment1820" headers="r4c1-t9 r1c2-t9">The <code>DG_CONFIG</code> attribute of this parameter must be explicitly set on each database in a Data Guard configuration to enable full Data Guard functionality. Set <code>DG_CONFIG</code> to a text string that contains the <code>DB_UNIQUE_NAME</code> of each database in the configuration, with each name in this list separated by a comma.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r5c1-t9" headers="r1c1-t9"><a class="olink REFRN10021" href="../../server.112/e40402/initparams037.htm#REFRN10021"><code>CONTROL_FILES</code></a></td>
<td class="cellalignment1820" headers="r5c1-t9 r1c2-t9">Specify the path name for the control files on the primary database. <a href="#i76119">Example 3-1</a> shows how to do this for two control files. It is recommended that a second copy of the control file is available so an instance can be easily restarted after copying the good control file to the location of the bad control file.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r6c1-t9" headers="r1c1-t9"><a class="olink REFRN10087" href="../../server.112/e40402/initparams126.htm#REFRN10087"><code>LOG_ARCHIVE_DEST_n</code></a></td>
<td class="cellalignment1820" headers="r6c1-t9 r1c2-t9">Specify where the redo data is to be archived on the primary and standby systems. In <a href="#i76119">Example 3-1</a>:
<ul>
<li>
<p><code>LOG_ARCHIVE_DEST_1</code> archives redo data generated by the primary database from the local online redo log files to the local archived redo log files in /arch1/chicago/.</p>
</li>
<li>
<p><code>LOG_ARCHIVE_DEST_2</code> is valid only for the primary role. This destination transmits redo data to the remote physical standby destination <code>boston</code>.</p>
</li>
</ul>
<p><span class="bold">Note:</span> If a fast recovery area was configured (with the <code>DB_RECOVERY_FILE_DEST</code> initialization parameter) and you have not explicitly configured a local archiving destination with the <code>LOCATION</code> attribute, Data Guard automatically uses the <code>LOG_ARCHIVE_DEST_1</code> initialization parameter (if it has not already been set) as the default destination for local archiving. Also, see <a href="log_arch_dest_param.htm#g1017491">Chapter 15</a> for complete <code>LOG_ARCHIVE_DEST_</code><code><span class="codeinlineitalic">n</span></code> information.</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r7c1-t9" headers="r1c1-t9"><a class="olink REFRN10087" href="../../server.112/e40402/initparams126.htm#REFRN10087"><code>LOG_ARCHIVE_DEST_STATE_n</code></a></td>
<td class="cellalignment1820" headers="r7c1-t9 r1c2-t9">Specify <code>ENABLE</code> to allow redo transport services to transmit redo data to the specified destination.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r8c1-t9" headers="r1c1-t9"><a class="olink REFRN10184" href="../../server.112/e40402/initparams212.htm#REFRN10184"><code>REMOTE_LOGIN_PASSWORDFILE</code></a></td>
<td class="cellalignment1820" headers="r8c1-t9 r1c2-t9">This parameter must be set to <code>EXCLUSIVE</code> or <code>SHARED</code> if a remote login password file is used to authenticate administrative users or redo transport sessions.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r9c1-t9" headers="r1c1-t9"><a class="olink REFRN10089" href="../../server.112/e40402/initparams128.htm#REFRN10089"><code>LOG_ARCHIVE_FORMAT</code></a></td>
<td class="cellalignment1820" headers="r9c1-t9 r1c2-t9">Specify the format for the archived redo log files using a thread (%t), sequence number (%s), and resetlogs ID (%r).</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r10c1-t9" headers="r1c1-t9"><a class="olink REFRN10056" href="../../server.112/e40402/initparams089.htm#REFRN10056"><code>FAL_SERVER</code></a></td>
<td class="cellalignment1820" headers="r10c1-t9 r1c2-t9">Specify the Oracle Net service name of the FAL server (typically this is the database running in the primary role). When the Chicago database is running in the standby role, it uses the Boston database as the FAL server from which to fetch (request) missing archived redo log files if Boston is unable to automatically send the missing log files.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r11c1-t9" headers="r1c1-t9"><a class="olink REFRN10038" href="../../server.112/e40402/initparams057.htm#REFRN10038"><code>DB_FILE_NAME_CONVERT</code></a></td>
<td class="cellalignment1820" headers="r11c1-t9 r1c2-t9">Specify the path name and filename location of the standby database datafiles followed by the primary location. This parameter converts the path names of the primary database datafiles to the standby datafile path names. If the standby database is on the same system as the primary database or if the directory structure where the datafiles are located on the standby site is different from the primary site, then this parameter is required. Note that this parameter is used only to convert path names for physical standby databases. Multiple pairs of paths may be specified by this parameter.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r12c1-t9" headers="r1c1-t9"><a class="olink REFRN10098" href="../../server.112/e40402/initparams137.htm#REFRN10098"><code>LOG_FILE_NAME_CONVERT</code></a></td>
<td class="cellalignment1820" headers="r12c1-t9 r1c2-t9">Specify the location of the standby database online redo log files followed by the primary location. This parameter converts the path names of the primary database log files to the path names on the standby database. If the standby database is on the same system as the primary database or if the directory structure where the log files are located on the standby system is different from the primary system, then this parameter is required. Multiple pairs of paths may be specified by this parameter.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r13c1-t9" headers="r1c1-t9"><a class="olink REFRN10212" href="../../server.112/e40402/initparams252.htm#REFRN10212"><code>STANDBY_FILE_MANAGEMENT</code></a></td>
<td class="cellalignment1820" headers="r13c1-t9 r1c2-t9">Set to <code>AUTO</code> so when datafiles are added to or dropped from the primary database, corresponding changes are made automatically to the standby database.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<div class="infobox-note">
<p class="notep1">Caution:</p>
Review the initialization parameter file for additional parameters that may need to be modified. For example, you may need to modify the dump destination parameters if the directory location on the standby database is different from those specified on the primary database.</div>
</div>
<!-- class="sect2" -->
<a id="BACIFFBC"></a>
<div id="SBYDB4721" class="sect2">
<h3 class="sect2"><span class="secnum">3.1.5</span> Enable Archiving</h3>
<p>If archiving is not enabled, issue the following statements to put the primary database in <code>ARCHIVELOG</code> mode and enable automatic archiving:</p>
<pre>
SQL&gt; SHUTDOWN IMMEDIATE;
SQL&gt; STARTUP MOUNT;
SQL&gt; ALTER DATABASE ARCHIVELOG;
SQL&gt; ALTER DATABASE OPEN;
</pre>
<p>See <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about archiving.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i67520"></a>
<div id="SBYDB00210" class="sect1">
<h2 class="sect1"><span class="secnum">3.2</span> Step-by-Step Instructions for Cre<a id="sthref233"></a><a id="sthref234"></a>ati<a id="sthref235"></a>ng a Physical Standby Database</h2>
<p>This section describes the tasks you perform to create a physical standby database. It is written at a level of detail that requires you to already have a thorough understanding of the following topics, which are described in the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a>, <a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a>, and <a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a>:</p>
<ul>
<li>
<p>Database administrator authentication</p>
</li>
<li>
<p>Database initialization parameters</p>
</li>
<li>
<p>Managing redo logs, data files, and control files</p>
</li>
<li>
<p>Managing archived redo logs</p>
</li>
<li>
<p>Fast recovery areas</p>
</li>
<li>
<p>Oracle Net Configuration</p>
</li>
</ul>
<p><a href="#BACHCEHE">Table 3-2</a> provides a checklist of the tasks that you perform to create a physical standby database and the database or databases on which you perform each task. There is also a reference to the section that describes the task in more detail.</p>
<div id="SBYDB5018" class="tblformalwide">
<p class="titleintable"><a id="sthref236"></a><a id="BACHCEHE"></a>Table 3-2 Creating a Physical Standby Database</p>
<table class="cellalignment1823" title="Creating a Physical Standby Database" summary="This is a task-oriented table that provides a link to sections in the chapter that describe how to create a physical standby database." dir="ltr">
<thead>
<tr class="cellalignment1814">
<th class="cellalignment1824" id="r1c1-t11">Reference</th>
<th class="cellalignment1824" id="r1c2-t11">Task</th>
<th class="cellalignment1824" id="r1c3-t11">Database</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r2c1-t11" headers="r1c1-t11">
<p><a href="#i70835">Section 3.2.1</a></p>
</td>
<td class="cellalignment1820" headers="r2c1-t11 r1c2-t11">
<p><a href="#i70835">Create a Backup Copy of the Primary Database Datafiles</a></p>
</td>
<td class="cellalignment1820" headers="r2c1-t11 r1c3-t11">
<p>Primary</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r3c1-t11" headers="r1c1-t11">
<p><a href="#i68937">Section 3.2.2</a></p>
</td>
<td class="cellalignment1820" headers="r3c1-t11 r1c2-t11">
<p><a href="#i68937">Create a Control File for the Standby Database</a></p>
</td>
<td class="cellalignment1820" headers="r3c1-t11 r1c3-t11">
<p>Primary</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r4c1-t11" headers="r1c1-t11">
<p><a href="#i70517">Section 3.2.3</a></p>
</td>
<td class="cellalignment1820" headers="r4c1-t11 r1c2-t11">
<p><a href="#i70517">Create a Parameter File for the Standby Database</a></p>
</td>
<td class="cellalignment1820" headers="r4c1-t11 r1c3-t11">
<p>Primary</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r5c1-t11" headers="r1c1-t11">
<p><a href="#i58318">Section 3.2.4</a></p>
</td>
<td class="cellalignment1820" headers="r5c1-t11 r1c2-t11">
<p><a href="#i58318">Copy Files from the Primary System to the Standby System</a></p>
</td>
<td class="cellalignment1820" headers="r5c1-t11 r1c3-t11">
<p>Primary</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r6c1-t11" headers="r1c1-t11">
<p><a href="#i72105">Section 3.2.5</a></p>
</td>
<td class="cellalignment1820" headers="r6c1-t11 r1c2-t11">
<p><a href="#i72105">Set Up the Environment to Support the Standby Database</a></p>
</td>
<td class="cellalignment1820" headers="r6c1-t11 r1c3-t11">
<p>Standby</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r7c1-t11" headers="r1c1-t11">
<p><a href="#i57454">Section 3.2.6</a></p>
</td>
<td class="cellalignment1820" headers="r7c1-t11 r1c2-t11">
<p><a href="#i57454">Start the Physical Standby Database</a></p>
</td>
<td class="cellalignment1820" headers="r7c1-t11 r1c3-t11">
<p>Standby</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r8c1-t11" headers="r1c1-t11">
<p><a href="#i77231">Section 3.2.7</a></p>
</td>
<td class="cellalignment1820" headers="r8c1-t11 r1c2-t11">
<p><a href="#i77231">Verify the Physical Standby Database Is Performing Properly</a></p>
</td>
<td class="cellalignment1820" headers="r8c1-t11 r1c3-t11">
<p>Standby</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformalwide" -->
<a id="i70835"></a>
<div id="SBYDB4722" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.1</span> Create a Backup Copy of the Primary Database Datafiles</h3>
<p>You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database. Oracle recommends that you use the Recovery Manager utility (RMAN).</p>
<p>See <a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for information about how to perform a database backup operation.</p>
</div>
<!-- class="sect2" -->
<a id="i68937"></a>
<div id="SBYDB4723" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.2</span> Create<a id="sthref237"></a> a Control File for the Standby Database</h3>
<p>If the backup procedure required you to shut down the primary database, issue the following SQL*Plus statement to start the primary database:</p>
<pre>
SQL&gt; STARTUP MOUNT;
</pre>
<p>Then, create the control file for the standby database, and open the primary database to user access, as shown in the following example:</p>
<pre>
SQL&gt;<a id="sthref238"></a><a id="sthref239"></a> ALTER DATABASE CREATE STANDBY CONTROLFILE AS '/tmp/boston.ctl';
SQL&gt; <a id="sthref240"></a><a id="sthref241"></a>ALTER DATABASE OPEN;
</pre>
<div class="infobox-note">
<p class="notep1">Note:</p>
You cannot use a single control file for both the primary and standby databases.</div>
</div>
<!-- class="sect2" -->
<a id="i70517"></a>
<div id="SBYDB4724" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.3</span> Create a Parameter File for the Standby Database</h3>
<p>Perform the following steps to create a parameter file for the standby database.</p>
<dl>
<dd><a id="SBYDB5141"></a><a id="sthref242"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Create a parameter file (PFILE) from the server parameter file (SPFILE) used by the primary database.</dt>
<dd>
<p>For example:</p>
<pre>
SQL&gt; CREATE PFILE='/tmp/initboston.ora' FROM SPFILE;
</pre>
<p>In <a href="#i72105">Section 3.2.5</a>, you will create a server parameter file from this parameter file, after it has been modified to contain parameter values appropriate for use at the physical standby database.</p>
</dd>
<dd><a id="SBYDB5142"></a><a id="BACDHFGF"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;<a id="sthref243"></a>Modify the parameter values in the parameter file created in the previous step<a id="sthref244"></a><a id="sthref245"></a><a id="sthref246"></a>.</dt>
<dd>
<p>Although most of the initialization parameter settings in the parameter file are also appropriate for the physical standby database, some modifications must be made.</p>
<p><a href="#i70559">Example 3-3</a> shows, in bold typeface, the parameters from <a href="#i76119">Example 3-1</a> and <a href="#i68648">Example 3-2</a> that must be changed.</p>
</dd>
</dl>
<div id="SBYDB5019" class="example">
<p class="titleinexample"><a id="i70559"></a>Example 3-3 Modifying Initialization Parameters for a Physical Standby Database</p>
<pre>
.
.
.
DB_NAME=chicago
<span class="bold">DB_UNIQUE_NAME=boston</span>
LOG_ARCHIVE_CONFIG<a id="sthref247"></a>='DG_CONFIG=(chicago,boston)'
<span class="bold">CONTROL_FILES='/arch1/boston/control1.ctl</span>', '<span class="bold">/arch2/boston/control2.ctl</span>'
<span class="bold">DB_FILE_NAME_CONVERT='chicago','boston'</span>
<span class="bold">LOG_FILE_NAME_CONVERT=</span>
 '<span class="bold">/arch1/chicago/</span>','<span class="bold">/arch1/boston/</span>'<span class="bold">,'/arch2/chicago/','/arch2/boston/'</span>
LOG_ARCHIVE_FORMAT=log%t_%s_%r.arc
<span class="bold">LOG_ARCHIVE_DEST_1=</span>
<span class="bold"> 'LOCATION=/arch1/boston/</span>
<span class="bold">  VALID_FOR=(ALL_LOGFILES,ALL_ROLES) </span>
<span class="bold">  DB_UNIQUE_NAME=boston'</span>
<span class="bold">LOG_ARCHIVE_DEST_2=</span>
<span class="bold"> 'SERVICE=chicago </span><span class="bold">ASYNC</span>
<span class="bold">  VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) </span>
<span class="bold">  DB_UNIQUE_NAME=chicago'</span>
LOG_ARCHIVE_DEST_STATE_1=ENABLE
LOG_ARCHIVE_DEST_STATE_2=ENABLE
REMOTE_LOGIN_PASSWORDFILE=EXCLUSIVE
STANDBY_FILE_MANAGEMENT=AUTO
<span class="bold">FAL_SERVER=chicago</span>
.
.
.
</pre></div>
<!-- class="example" -->
<p>Ensure the <code>COMPATIBLE</code> initialization parameter is set to the same value on both the primary and standby databases. If the values differ, redo transport services may be unable to transmit redo data from the primary database to the standby databases.</p>
<p>It is always a good practice to use the <code>SHOW PARAMETERS</code> command to verify no other parameters need to be changed.</p>
<p>The following table provides a brief explanation about the parameter settings shown in <a href="#i70559">Example 3-3</a> that have different settings from the primary database.</p>
<div class="inftblinformalwide">
<table class="cellalignment1823" title="Initialization Parameter Settings for Example 3-3" summary="Describes each initialization parameter that was set in Example 3-3." dir="ltr">
<thead>
<tr class="cellalignment1814">
<th class="cellalignment1824" id="r1c1-t13">Parameter</th>
<th class="cellalignment1824" id="r1c2-t13">Recommended Setting</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r2c1-t13" headers="r1c1-t13"><a class="olink REFRN10242" href="../../server.112/e40402/initparams070.htm#REFRN10242"><code>DB_UNIQUE_NAME</code></a></td>
<td class="cellalignment1820" headers="r2c1-t13 r1c2-t13">Specify a unique name for this database. This name stays with the database and does not change even if the primary and standby databases reverse roles.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r3c1-t13" headers="r1c1-t13"><a class="olink REFRN10021" href="../../server.112/e40402/initparams037.htm#REFRN10021"><code>CONTROL_FILES</code></a></td>
<td class="cellalignment1820" headers="r3c1-t13 r1c2-t13">Specify the path name for the control files on the standby database. <a href="#i70559">Example 3-3</a> shows how to do this for two control files. It is recommended that a second copy of the control file is available so an instance can be easily restarted after copying the good control file to the location of the bad control file.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r4c1-t13" headers="r1c1-t13"><a class="olink REFRN10038" href="../../server.112/e40402/initparams057.htm#REFRN10038"><code>DB_FILE_NAME_CONVERT</code></a><a id="sthref248"></a><a id="sthref249"></a></td>
<td class="cellalignment1820" headers="r4c1-t13 r1c2-t13">Specify the path name and filename location of the primary database datafiles followed by the standby location. This parameter converts the path names of the primary database datafiles to the standby datafile path names. If the standby database is on the same system as the primary database or if the directory structure where the datafiles are located on the standby site is different from the primary site, then this parameter is required.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r5c1-t13" headers="r1c1-t13"><a class="olink REFRN10098" href="../../server.112/e40402/initparams137.htm#REFRN10098"><code>LOG_FILE_NAME_CONVERT</code></a><a id="sthref250"></a><a id="sthref251"></a></td>
<td class="cellalignment1820" headers="r5c1-t13 r1c2-t13">Specify the location of the primary database online redo log files followed by the standby location. This parameter converts the path names of the primary database log files to the path names on the standby database. If the standby database is on the same system as the primary database or if the directory structure where the log files are located on the standby system is different from the primary system, then this parameter is required.</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r6c1-t13" headers="r1c1-t13"><a class="olink REFRN10086" href="../../server.112/e40402/initparams125.htm#REFRN10086"><code>LOG_ARCHIVE_DEST_</code><code><span class="codeinlineitalic">n</span></code></a></td>
<td class="cellalignment1820" headers="r6c1-t13 r1c2-t13">Specify where the redo data is to be archived. In <a href="#i70559">Example 3-3</a>:
<ul>
<li>
<p><code>LOG_ARCHIVE_DEST_1</code> archives redo data received from the primary database to archived redo log files in /arch1/boston/.</p>
</li>
<li>
<p><code>LOG_ARCHIVE_DEST_2</code> is currently ignored because this destination is valid only for the primary role. If a switchover occurs and this instance becomes the primary database, then it will transmit redo data to the remote Chicago destination.</p>
</li>
</ul>
<p><span class="bold">Note:</span> If a fast recovery area was configured (with the <code>DB_RECOVERY_FILE_DEST</code> initialization parameter) and you have not explicitly configured a local archiving destination with the <code>LOCATION</code> attribute, Data Guard automatically uses the <code>LOG_ARCHIVE_DEST_1</code> initialization parameter (if it has not already been set) as the default destination for local archiving. Also, see <a href="log_arch_dest_param.htm#g1017491">Chapter 15</a> for complete information about <code>LOG_ARCHIVE_DEST_</code><code><span class="codeinlineitalic">n</span></code>.</p>
</td>
</tr>
<tr class="cellalignment1814">
<td class="cellalignment1820" id="r7c1-t13" headers="r1c1-t13"><a class="olink REFRN10056" href="../../server.112/e40402/initparams089.htm#REFRN10056"><code>FAL_SERVER</code></a></td>
<td class="cellalignment1820" headers="r7c1-t13 r1c2-t13">Specify the Oracle Net service name of the FAL server (typically this is the database running in the primary role). When the Boston database is running in the standby role, it uses the Chicago database as the FAL server from which to fetch (request) missing archived redo log files if Chicago is unable to automatically send the missing log files.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformalwide" -->
<div class="infobox-note">
<p class="notep1">Caution:</p>
Review the initialization parameter file for additional parameters that may need to be modified. For example, you may need to modify the dump destination parameters if the directory location on the standby database is different from those specified on the primary database.</div>
</div>
<!-- class="sect2" -->
<a id="i58318"></a>
<div id="SBYDB4725" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.4</span> Copy Files from the Primary System to the Standby System</h3>
<p>Use an operating system copy utility to copy the following binary files from the primary system to the standby system:</p>
<ul>
<li>
<p>Backup datafiles created in <a href="#i70835">Section 3.2.1</a></p>
</li>
<li>
<p>Stan<a id="sthref252"></a><a id="sthref253"></a>dby control file created in <a href="#i68937">Section 3.2.2</a></p>
</li>
<li>
<p>Initialization parameter file created in <a href="#i70517">Section 3.2.3</a></p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="i72105"></a>
<div id="SBYDB4726" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.5</span> Set Up the Environment to Support the Standby Database</h3>
<p>Perform the following steps to create a Windows-based service, create a password file, set up the Oracle Net environment, and create a SPFILE.</p>
<a id="i72107"></a>
<dl>
<dd><a id="SBYDB5143"></a><a id="sthref254"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Create a Windows-based service.</dt>
<dd>
<p>If the standby database will be hosted on a Windows system, use the ORADIM utility to create a Windows service. For example:</p>
<pre>
WINNT&gt; oradim &ndash;NEW &ndash;SID boston &ndash;STARTMODE manual
</pre>
<p>See <a class="olink NTQRF" href="../../win.112/e10845/toc.htm"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for more information about using the ORADIM utility.</p>
</dd>
<dd><a id="SBYDB5144"></a><a id="sthref255"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Copy the remote login password file from the primary database system to the standby database system</dt>
<dd>
<p>If the primary database has a remote login password file, copy it to the appropriate directory on the physical standby database system. Note that the password file must be re-copied each time the <code>SYSDBA</code> or <code>SYSOPER</code> privilege is granted or revoked and whenever the login password of a user with these privileges is changed.</p>
<p>This step is optional if operating system authentication is used for administrative users and if SSL is used for redo transport authentication</p>
</dd>
<dd><a id="SBYDB5145"></a><a id="sthref256"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Configure <a id="sthref257"></a>listeners for the primary and standby databases.</dt>
<dd>
<p>On both the primary and standby sites, use Oracle Net Manager to <a id="sthref258"></a><a id="sthref259"></a>configure a listener for the respective databases.</p>
<p>To restart the listeners (to pick up the new definitions), enter the following LSNRCTL utility commands on both the primary and standby systems:</p>
<pre>
% lsnrctl stop
% lsnrctl start
</pre>
<p>See <a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide.</span></a></p>
</dd>
<dd><a id="SBYDB5146"></a><a id="sthref260"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;Create Oracle Net service names.</dt>
<dd>
<p>On both the primary and standby systems, use Oracle Net Manager to create a network service name for the primary and standby databases that will be used by redo transport services.</p>
<p>The Oracle Net service name must resolve to a connect descriptor that uses the same protocol, host address, port, and service that you specified when you configured the listeners for the primary and standby databases. The connect descriptor must also specify that a dedicated server be used.</p>
<p>See the <a class="olink NETAG" href="../../network.112/e41945/toc.htm"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> and the <a class="olink ADMIN" href="../e25494/toc.htm"><span class="italic">Oracle Database Administrator's Guide.</span></a></p>
</dd>
<dd><a id="SBYDB5147"></a><a id="sthref261"></a></dd>
<dt class="seghead">Step 5&nbsp;&nbsp;&nbsp;Create a server parameter file for the standby database.</dt>
<dd>
<p>On an idle standby database, use the SQL <code>CREATE</code> statement to create a server parameter file for the standby database from the text initialization parameter file that was edited in Step <a href="#BACDHFGF">2</a>. For example:</p>
<pre>
SQL&gt; CREATE SPFILE FROM PFILE='initboston.ora';
</pre></dd>
<dd><a id="SBYDB5148"></a><a id="sthref262"></a></dd>
<dt class="seghead">Step 6&nbsp;&nbsp;&nbsp;Copy the primary database encryption wallet to the standby database system</dt>
<dd>
<p>If the primary database has a database encryption wallet, copy it to the standby database system and configure the standby database to use this wallet.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The database encryption wallet must be copied from the primary database system to each standby database system whenever the master encryption key is updated.
<p>Encrypted data in a standby database cannot be accessed unless the standby database is configured to point to a database encryption wallet or hardware security module that contains the current master encryption key from the primary database.</p>
</div>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a class="olink ASOAG600" href="../../network.112/e40393/asotrans.htm#ASOAG600"><span class="italic">Oracle Database Advanced Security Administrator's Guide</span></a> for more information about transparent database encryption</div>
</dd>
</dl>
</div>
<!-- class="sect2" -->
<a id="i57454"></a>
<div id="SBYDB4727" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.6</span> S<a id="sthref263"></a>tart the Physical Standby Database</h3>
<p>Perform the following steps to start the physical standby database and Redo Apply.</p>
<dl>
<dd><a id="SBYDB5149"></a><a id="sthref264"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Start the physical standby database.</dt>
<dd>
<p>On the standby database, issue the following SQL statement to start and mount the database:</p>
<pre>
SQL&gt; STARTUP MOUNT;
</pre></dd>
<dd><a id="SBYDB5150"></a><a id="sthref265"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Prepare the Standby Database to Receive Redo Data</dt>
<dd>
<p>Prepare the standby database to receive and archive redo data from the primary database, by performing the steps described in <a href="log_transport.htm#BABHIDDA">Section 6.2.3</a>.</p>
</dd>
<dd><a id="SBYDB5151"></a><a id="sthref266"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Create an Online Redo Log on the Standby Database</dt>
<dd>
<p>Although this step is optional, Oracle recommends that an online redo log be created when a standby database is created. By following this best practice, a standby database will be ready to quickly transition to the primary database role.</p>
<p>The size and number of redo log groups in the online redo log of a standby database should be chosen so that the standby database performs well if it transitions to the primary role.</p>
</dd>
<dd><a id="SBYDB5152"></a><a id="BACIJEHD"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;S<a id="sthref267"></a>tart Redo Apply.</dt>
<dd>
<p>On the standby database, issue the following command to start <a id="sthref268"></a>Redo Apply:</p>
<pre>
SQL&gt; <a id="sthref269"></a><a id="sthref270"></a>ALTER DATABASE RECOVER MANAGED STANDBY DATABASE USING CURRENT LOGFILE - 
&gt; DISCONNECT FROM SESSION;
</pre>
<p>The statement includes the <code>DISCONNECT FROM SESSION</code> option so that Redo Apply runs in a background session. See <a href="log_apply.htm#i1020855">Section 7.3, "Applying Redo Data to Physical Standby Databases"</a> for more information.</p>
<p>The statement also includes the <code>USING CURRENT LOGFILE</code> clause so that redo can be applied as soon as it has been received. See <a href="log_apply.htm#i1034632">Section 7.3.1, "Starting Redo Apply"</a> for more information.</p>
</dd>
</dl>
</div>
<!-- class="sect2" -->
<a id="i77231"></a>
<div id="SBYDB4728" class="sect2">
<h3 class="sect2"><span class="secnum">3.2.7</span> V<a id="sthref271"></a>erify the Physical Standby Database Is Performing Properly</h3>
<p>Once you create the physical standby database and set up redo transport services, you may want to verify database modifications are being successfully transmitted from the primary database to the standby database.</p>
<p>To see that redo data is being received on the standby database, you should first identify the existing archived redo log files on the standby database, force a log switch and archive a few online redo log files on the primary database, and then check the standby database again. The following steps show how to perform these tasks.</p>
<dl>
<dd><a id="SBYDB5153"></a><a id="sthref272"></a></dd>
<dt class="seghead">Step 1&nbsp;&nbsp;&nbsp;Identify the existing archived redo log files.</dt>
<dd>
<p>On the standby database, query the <code>V$ARCHIVED_LOG</code> view to identify existing files in the archived redo log. For example:</p>
<pre>
SQL&gt; SELECT SEQUENCE#, FIRST_TIME, NEXT_TIME -
&gt;  FROM V$ARCHIVED_LOG ORDER BY SEQUENCE#;

 SEQUENCE# FIRST_TIME         NEXT_TIME
---------- ------------------ ------------------
         8 11-JUL-07 17:50:45 11-JUL-07 17:50:53
         9 11-JUL-07 17:50:53 11-JUL-07 17:50:58
        10 11-JUL-07 17:50:58 11-JUL-07 17:51:03

3 rows selected.
</pre></dd>
<dd><a id="SBYDB5154"></a><a id="sthref273"></a></dd>
<dt class="seghead">Step 2&nbsp;&nbsp;&nbsp;Force a log switch to archive the current online redo log file.</dt>
<dd>
<p>On the primary database, issue the <code>ALTER SYSTEM SWITCH LOGFILE</code> statement to force a log switch and archive the current online redo log file group:</p>
<pre>
SQL&gt; A<a id="sthref274"></a><a id="sthref275"></a>LTER SYSTEM SWITCH LOGFILE;
</pre></dd>
<dd><a id="SBYDB5155"></a><a id="sthref276"></a></dd>
<dt class="seghead">Step 3&nbsp;&nbsp;&nbsp;Verify the new redo data was archived on the standby database.</dt>
<dd>
<p>On the standby database, query the <code>V$ARCHIVED_LOG</code> view to verify the redo data was received and archived on the standby database:</p>
<pre>
SQL&gt; SELECT SEQUENCE#, FIRST_TIME, NEXT_TIME -
&gt; FROM V$ARCHIVED_LOG ORDER BY SEQUENCE#;

 SEQUENCE# FIRST_TIME         NEXT_TIME
---------- ------------------ ------------------
         8 11-JUL-07 17:50:45 11-JUL-07 17:50:53
         9 11-JUL-07 17:50:53 11-JUL-07 17:50:58
        10 11-JUL-07 17:50:58 11-JUL-07 17:51:03
        11 11-JUL-07 17:51:03 11-JUL-07 18:34:11
4 rows selected.
</pre>
<p>The archived redo log files are now available to be applied to the physical standby database.</p>
</dd>
<dd><a id="SBYDB5156"></a><a id="sthref277"></a></dd>
<dt class="seghead">Step 4&nbsp;&nbsp;&nbsp;Verify that received redo has been applied.</dt>
<dd>
<p>On the standby database, query the <code>V$ARCHIVED_LOG</code> view to verify that received redo has been applied:</p>
<pre>
SQL&gt; SELECT SEQUENCE#,APPLIED FROM V$ARCHIVED_LOG -
&gt; ORDER BY SEQUENCE#;

SEQUENCE# APP
--------- ---
        8 YES
        9 YES
       10 YES
       11 IN-MEMORY
</pre>
<p>4 rows selected.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
The value of the <code>APPLIED</code> column for the most recently received log file will be either <code>IN-MEMORY</code> or <code>YES</code> if that log file has been applied.</div>
</dd>
</dl>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="i77130"></a>
<div id="SBYDB4729" class="sect1">
<h2 class="sect1"><span class="secnum">3.3</span> Post-Creation Steps</h2>
<p>At this point, the physical standby database is running and can provide the maximum performance level of data protection. The following list describes additional actions you can take on the physical standby database:</p>
<ul>
<li>
<p>Upgrade the data protection mode</p>
<p>The Data Guard configuration is initially set up in the maximum performance mode (the default).</p>
</li>
<li>
<p>Enable Flashback Database</p>
<p>Flashback Database removes the need to re-create the primary database after a failover. Flashback Database enables you to return a database to its state at a time in the recent past much faster than traditional point-in-time recovery, because it does not require restoring datafiles from backup nor the extensive application of redo data. You can enable Flashback Database on the primary database, the standby database, or both. See <a href="scenarios.htm#i1049997">Section 13.2</a> and <a href="scenarios.htm#i1049616">Section 13.3</a> for scenarios showing how to use Flashback Database in a Data Guard environment. Also, see <a class="olink BRADV" href="../../backup.112/e10642/toc.htm"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about Flashback Database.</p>
</li>
</ul>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1813">
<tr>
<td class="cellalignment1820">
<table class="cellalignment1818">
<tr>
<td class="cellalignment1817"><a href="standby.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1817"><a href="create_ls.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1999, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1822">
<table class="cellalignment1816">
<tr>
<td class="cellalignment1817"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1817"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1817"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1817"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1817"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1817"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
