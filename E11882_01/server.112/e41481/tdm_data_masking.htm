<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Masking Sensitive Data</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 740" />
<meta name="dcterms.created" content="2014-06-16T16:24:52Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Database Real Application Testing User's Guide" />
<meta name="dcterms.identifier" content="E41481-03" />
<meta name="dcterms.isVersionOf" content="RATUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2008, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="tdm_subsetting.htm" title="Previous" type="text/html" />
<link rel="Next" href="index.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e41481.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">22/23</span> <!-- End Header -->
<div id="RATUG04000" class="chapter"><a id="DAFJDJAA"></a>
<h1 class="chapter"><span class="secnum">16</span> Masking Sensitive Data</h1>
<p>This chapter provides conceptual information about the components that comprise Oracle Data Masking, and procedural information about performing the task sequence, such as creating masking formats and masking definitions. Topics discussed include:</p>
<ul>
<li>
<p><a href="#DAFGJEIF">Overview of Oracle Data Masking</a></p>
</li>
<li>
<p><a href="#CEGEAFJD">Format Libraries and Masking Definitions</a></p>
</li>
<li>
<p><a href="#CEGDIHAA">Recommended Data Masking Workflow</a></p>
</li>
<li>
<p><a href="#CEGJJCHD">Data Masking Task Sequence</a></p>
</li>
<li>
<p><a href="#CEGBBHED">Defining Masking Formats</a></p>
</li>
<li>
<p><a href="#CEGHHDEI">Masking with an Application Data Model and Workloads</a></p>
</li>
<li>
<p><a href="#CEGEBJGH">Masking a Test System to Evaluate Performance</a></p>
</li>
<li>
<p><a href="#CEGEDIAA">Upgrade Considerations</a></p>
</li>
<li>
<p><a href="#CEGEHAFE">Using the Shuffle Format</a></p>
</li>
<li>
<p><a href="#CEGHJJDJ">Using Data Masking with LONG Columns</a></p>
</li>
</ul>
<p>The procedures in this chapter are applicable to Oracle Enterprise Manager 12.1 and higher Cloud Control only. You must have the <a id="sthref431"></a>Oracle Data Masking and Subsetting Pack license to use data masking features.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Performing masking on an 11.2.0.3 database that uses Database Plug-in 12.1.0.3 or higher requires that database patch # 16922826 be applied for masking to run successfully.</div>
<a id="DAFGJEIF"></a>
<div id="RATUG4003" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.1</span> Overview of Oracle Data Masking</h2>
<p>Enterprises run the risk of breaching sensitive information when copying production data into non-production environments for the purposes of application development, testing, or data analysis. Oracle Data Masking helps reduce this risk by irreversibly replacing the original sensitive data with fictitious data so that production data can be shared safely with non-production users. Accessible through Oracle Enterprise Manager, Oracle Data Masking provides end-to-end secure automation for provisioning test databases from production in compliance with regulations.</p>
<div id="RATUG4004" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref432"></a>
<h3 class="sect2"><span class="secnum">16.1.1</span> Data Masking Concepts</h3>
<p><a id="sthref433"></a><a id="sthref434"></a><a id="sthref435"></a><a id="sthref436"></a>Data masking (also known as data scrambling and data anonymization) is the process of replacing sensitive information copied from production databases to test non-production databases with realistic, but scrubbed, data based on masking rules. Data masking is ideal for virtually any situation when confidential or regulated data needs to be shared with non-production users. These users may include internal users such as application developers, or external business partners such as offshore testing companies, suppliers and customers. These non-production users need to access some of the original data, but do not need to see every column of every table, especially when the information is protected by government regulations.</p>
<p>Data masking enables organizations to generate realistic and fully functional data with similar characteristics as the original data to replace sensitive or confidential information. This contrasts with encryption or Virtual Private Database, which simply hides data, and the original data can be retrieved with the appropriate access or key. With data masking, the original sensitive data cannot be retrieved or accessed.</p>
<p>Names, addresses, phone numbers, and credit card details are examples of data that require protection of the information content from inappropriate visibility. Live production database environments contain valuable and confidential data&mdash;access to this information is tightly controlled. However, each production system usually has replicated development copies, and the controls on such test environments are less stringent. This greatly increases the risks that the data might be used inappropriately. Data masking can modify sensitive database records so that they remain usable, but do not contain confidential or personally identifiable information. Yet, the masked test data resembles the original in appearance to ensure the integrity of the application.</p>
</div>
<!-- class="sect2" -->
<div id="RATUG4005" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref437"></a>
<h3 class="sect2"><span class="secnum">16.1.2</span> Security and Regulatory Compliance</h3>
<p><a id="sthref438"></a><a id="sthref439"></a>Masked data is a sensible precaution from a business security standpoint, because masked test information can help prevent accidental data escapes. In many cases, masked data is a legal obligation. The Enterprise Manager Data Masking Pack can help organizations fulfill legal obligations and comply with global regulatory requirements, such as <a id="sthref440"></a>Sarbanes-Oxley, the California Database Security Breach Notification Act (CA Senate Bill 1386), and the European Union Data Protection Directive.</p>
<p>The legal requirements vary from country to country, but most countries now have regulations of some form to protect the confidentiality and integrity of personal consumer information. For example, in the United States, The <a id="sthref441"></a>Right to Financial Privacy Act of 1978 creates statutory Fourth Amendment protection for financial records, and a host of individual state laws require this. Similarly, the U.S. Health Insurance Portability and Accountability Act (HIPAA) created protection of personal medical information.</p>
</div>
<!-- class="sect2" -->
<div id="RATUG4006" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref442"></a>
<h3 class="sect2"><span class="secnum">16.1.3</span> Roles of Data Masking Users</h3>
<p>The following types of users participate in the data masking process for a typical enterprise:</p>
<ul>
<li>
<p><a id="sthref443"></a><a id="sthref444"></a>Application database administrator or application developer</p>
<p>This user is knowledgeable about the application and database objects. This user may add additional custom database objects or extensions to packaged applications, such as the Oracle E-Business suite.</p>
</li>
<li>
<p><a id="sthref445"></a><a id="sthref446"></a>Information security administrator</p>
<p>This user defines information security policies, enforces security best practices, and also recommends the data to be hidden and protected.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="RATUG4007" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref447"></a>
<h3 class="sect2"><span class="secnum">16.1.4</span> <a id="sthref448"></a><a id="sthref449"></a>Related Oracle Security Offerings</h3>
<p>Besides data masking, Oracle offers the following security products:</p>
<ul>
<li>
<p>Virtual Private Database or Oracle Label Security &mdash; Hides rows and data depending on user access grants.</p>
</li>
<li>
<p>Transparent Data Encryption &mdash; Hides information stored on disk using encryption. Clients see unencrypted information.</p>
</li>
<li>
<p><code>DBMS_CRYPTO</code> &mdash; Provides server packages that enable you to encrypt user data.</p>
</li>
<li>
<p>Database Vault &mdash; Provides greater access controls on data.</p>
</li>
</ul>
</div>
<!-- class="sect2" -->
<div id="RATUG4008" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref450"></a>
<h3 class="sect2"><span class="secnum">16.1.5</span> Agent Compatibility for Data Masking</h3>
<p>Data Masking supports Oracle Database 9<span class="italic">i</span> and newer releases. If you have a version prior to 11.1, you can use it by implementing the following work-around.</p>
<p>Replace the following file...</p>
<pre>
AGENT_HOME/sysman/admin/scripts/db/reorg/reorganize.pl
</pre>
<p>... with this file:</p>
<pre>
OMS_HOME/sysman/admin/scripts/db/reorg/reorganize.pl
</pre></div>
<!-- class="sect2" -->
<a id="CEGHIEAA"></a>
<div id="RATUG4009" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.1.6</span> Supported Data Types</h3>
<p><a id="sthref451"></a><a id="sthref452"></a>The list of supported data types varies by release.</p>
<ul>
<li>
<p>Grid Control 10g Release 5 (10.2.0.5), Database 11g Release 2 (11.2), and Cloud Control 12c Release 1 (10.2.0.1)</p>
<ul>
<li>
<p>Numeric Types</p>
<p>The following Numeric Types can use Array List, Delete, Fixed Number, Null Value, Post Processing Function, Preserve Original Data, Random Decimal Numbers, Random Numbers, Shuffle, SQL Expression, Substitute, Table Column, Truncate, Encrypt, and User Defined Function formats:</p>
<ul>
<li>
<p><code>NUMBER</code></p>
</li>
<li>
<p><code>FLOAT</code></p>
</li>
<li>
<p><code>RAW</code></p>
</li>
<li>
<p><code>BINARY_FLOAT</code></p>
</li>
<li>
<p><code>BINARY_DOUBLE</code></p>
</li>
</ul>
</li>
<li>
<p>String Types</p>
<p>The following String Types can use Array List, Delete, Fixed Number, Fixed String, Null Value, Post Processing Function, Preserve Original Data, Random Decimal Numbers, Random Digits, Random Numbers, Random Strings, Shuffle, SQL Expression, Substitute, Substring, Table Column, Truncate, Encrypt, and User Defined Function formats:</p>
<ul>
<li>
<p><code>CHAR</code></p>
</li>
<li>
<p><code>NCHAR</code></p>
</li>
<li>
<p><code>VARCHAR2</code></p>
</li>
<li>
<p><code>NVARCHAR2</code></p>
</li>
</ul>
</li>
<li>
<p>Date Types</p>
<p>The following Date Types can use Array List, Delete, Null Value, Post Processing Function, Preserve Original Data, Random Dates, Shuffle, SQL Expression, Substitute, Table Column, Truncate, Encrypt, and User Defined Function formats:</p>
<ul>
<li>
<p><code>DATE</code></p>
</li>
<li>
<p><code>TIMESTAMP</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Grid Control 11g Release 1 (11.1) and Cloud Control 12c Release 1 (10.2.0.1)</p>
<ul>
<li>
<p>Large Object (LOB) Data Types</p>
<p>The following Data Types can use Fixed Number, Fixed String, and Null Value formats:</p>
<ul>
<li>
<p>BLOB</p>
</li>
<li>
<p>CLOB</p>
</li>
<li>
<p>NCLOB</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGEAFJD"></a>
<div id="RATUG4010" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.2</span> Format Libraries and Masking Definitions</h2>
<p>To mask data, the Data Masking Pack provides two main features:</p>
<ul>
<li>
<p><a id="sthref453"></a><a id="sthref454"></a><a id="sthref455"></a>Masking format library</p>
<p>The format library contains a collection of ready-to-use masking formats. The library consists of format routines that you can use for masking. A masking format can either be one that you create, or one from the list of Oracle-supplied default masking formats.</p>
<p>As a matter of best practice, organizations should create masking formats for all commonly regulated information so that the formats can be applied to the sensitive data regardless of which database the sensitive data resides in. This ensures that all sensitive data is consistently masked across the entire organization.</p>
</li>
<li>
<p><a id="sthref456"></a><a id="sthref457"></a><a id="sthref458"></a>Masking definitions</p>
<p>A masking definition defines a data masking operation to be implemented on one or more tables in a database. Masking definitions associate table columns with formats to use for masking the data. They also maintain the relationship between columns that are not formally declared in the database using related columns.</p>
<p>You can create a new masking definition or use an existing definition for a masking operation. To create a <a id="sthref459"></a><a id="sthref460"></a>masking definition, you specify the column of the table for which the data should be masked and the format of masked data. If the columns being masked are involved in unique, <a id="sthref461"></a><a id="sthref462"></a>primary key, or foreign key constraints, data masking generates the values so that the constraints are not violated. Masking ensures uniqueness per character using decimal arithmetic. For example, a 5-character string generates a maximum of only 99999 unique values. Similarly, a 1-character string generates a maximum of only 9 unique values.</p>
<p>You would typically export masking definitions to files and import them on other systems. This is important when the test and production sites reside on different Oracle Management Systems or on entirely different sites.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p>"Creating a Data Masking Definition" in the Enterprise Manager online help as well as the help for each Data Masking page</p>
</li>
</ul>
</div>
</div>
<!-- class="sect1" -->
<a id="CEGDIHAA"></a>
<div id="RATUG4011" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.3</span> Recommended Data Masking Workflow</h2>
<p><a href="#CHDDBIAH">Figure 16-1</a> shows that the production database is cloned to a <a id="sthref463"></a><a id="sthref464"></a>staging region and then masked there. During the masking process, the staging and test areas are tightly controlled like a production site.</p>
<div id="RATUG4012" class="figure">
<p class="titleinfigure"><a id="CHDDBIAH"></a>Figure 16-1 Data Masking Workflow</p>
<img width="640" height="397" src="img/data_masking_workflow.gif" alt="Description of Figure 16-1 follows" /><br />
<a id="sthref465" href="img_text/data_masking_workflow.htm">Description of "Figure 16-1 Data Masking Workflow"</a><br />
<br /></div>
<!-- class="figure" -->
<p>Data masking is an iterative and evolving process handled by the <a id="sthref466"></a><a id="sthref467"></a>security administrator and implemented by the database administrator. When you first configure data masking, try out the masking definition on a test system, then add a greater number of columns to the masking definition and test it to make sure it functions correctly and does not break any application constraints. During this process, you should exercise care when removing all imbedded references to the real data while maintaining referential integrity.</p>
<p>After data masking is configured to your satisfaction, you can use the existing definition to repeatedly mask after cloning. The masking definition, however, would need to evolve as new schema changes require new data and columns to be masked.</p>
<p>After the masking process is complete, you can distribute the database for wide availability. If you need to ship the database to another third-party site, you are required to use the Data Pump Export utility, and then ship the dump file to the remote site. However, if you are retaining the masked data in-house, see <a id="sthref468"></a><a href="#CEGJJCHD">"Data Masking Task Sequence"</a>.</p>
</div>
<!-- class="sect1" -->
<a id="CEGJJCHD"></a>
<div id="RATUG4013" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.4</span> Data Masking Task Sequence</h2>
<p><a id="sthref469"></a>The task sequence in this section demonstrates the data masking workflow and refers you to additional information about some of the tasks in the sequence. Before reviewing this sequence, note that there are two options for completing this process:</p>
<ul>
<li>
<p>Exporting/importing to another database</p>
<p>You can <a id="sthref470"></a><a id="sthref471"></a>clone the production database to a staging area, mask it, then export/ import it to another database before delivering it to in-house testers or external customers. This is the most secure approach.</p>
</li>
<li>
<p>Making the staging area the new test region</p>
<p>You can clone the production database to a mask staging area, then make the staging area the new test region. In this case, you should not grant testers <code>SYSDBA</code> access or access to the database files. Doing so would compromise security. The masked database contains the original data in unused blocks and in the free list. You can only purge this information by exporting/importing the data to another database.</p>
</li>
</ul>
<p>The following basic steps guide you through the data masking process, with references to other sections for supporting information.</p>
<ol>
<li>
<p>Review the application database and identify the sources of sensitive information.</p>
</li>
<li>
<p>Define mask formats for the sensitive data. The mask formats may be simple or complex depending on the information security needs of the organization.</p>
<p>For more information, see <a href="#CEGJFFBD">"Creating New Masking Formats"</a> and <a href="#CEGIJDEG">"Using Oracle-supplied Predefined Masking Formats"</a>.</p>
</li>
<li>
<p>Create a masking definition to associate table columns to these mask formats. Data masking determines the database foreign key relationships and adds foreign key columns to the mask.</p>
<p>For more information, see <a href="#CEGHHDEI">"Masking with an Application Data Model and Workloads"</a> .</p>
</li>
<li>
<p>Save the masking definition and generate the masking script.</p>
</li>
<li>
<p>Verify if the masked data meets the information security requirements. Otherwise, refine the masking definition, restore the altered tables, and reapply the masking definition until the optimal set of masking definitions has been identified.</p>
</li>
<li>
<p>Clone the production database to a staging area, selecting the masking definition to be used after cloning. Note that you can clone using Enterprise Manager, which enables you to add masking to the Enterprise Manager clone workflow. However, if you clone outside of Enterprise Manager, you must initiate masking from Enterprise Manager after cloning is complete. The cloned database should be controlled with the same privileges as the production system, because it still contains sensitive production data.</p>
<p>After cloning, be sure to change the passwords as well as update or disable any database links, streams, or references to external data sources. Back up the cloned database, or minimally the tables that contain masked data. This can help you restore the original data if the masking definition needs to be refined further.</p>
<p>For more information, see <a href="#CEGBFFDJ">"Cloning the Production Database"</a> .</p>
</li>
<li>
<p>After masking, test all of your applications, reports, and business processes to ensure they are functional. If everything is working, you can export the masking definition to keep it as a back-up.</p>
</li>
<li>
<p>After masking the staging site, make sure to drop any tables named <code>MGMT_DM_TT</code> before cloning to a test region. These temporary tables contain a mapping between the original sensitive column value and the mask values, and are therefore sensitive in nature.</p>
<p>During masking, Enterprise Manager automatically drops these temporary tables for you with the default "Drop temporary tables created during masking" option. However, you can preserve these temporary tables by deselecting this option. In this case, you are responsible for deleting the temporary tables before cloning to the test region.</p>
</li>
<li>
<p>After masking is complete, ensure that all tables loaded for use by the substitute column format or table column format are going to be dropped. These tables contain the mask values that table column or substitute formats will use. It is recommended that you purge this information for security reasons.</p>
<p>For more information, see <a href="#CEGEEEIE">"Deterministic Masking Using the Substitute Format"</a> .</p>
</li>
<li>
<p>Clone the database to a test region, or use it as the new test region. When cloning the database to an external or unsecured site, you should use Export or Import. Only supply the data in the database, rather than the database files themselves.</p>
</li>
<li>
<p>As part of cloning production for testing, provide the masking definition to the application database administrator to use in masking the database.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CEGBBHED"></a>
<div id="RATUG4014" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.5</span> Defining Masking Formats</h2>
<p><a id="sthref472"></a>A masking definition requires one or more masking formats for any columns included in the masking definition. When <a id="sthref473"></a>adding columns to a masking definition, you can either create masking formats manually or import them from the format library. It is often more efficient to work with masking formats from the format library.</p>
<a id="CEGJFFBD"></a>
<div id="RATUG4015" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.5.1</span> Creating New Masking Formats</h3>
<p>This section describes how to create new masking formats using Enterprise Manager.</p>
<p class="orderedlisttitle"><a id="sthref475"></a><a id="sthref476"></a>To create a masking format in the format library:&nbsp;</p>
<ol>
<li>
<p>From the Enterprise menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Masking Formats</span>. Alternatively, if you are in the Database home page, select <span class="bold">Data Masking Format Library</span> from the Schema menu.</p>
<p>The Format Library appears with predefined formats that Oracle Enterprise Manager provides.</p>
</li>
<li>
<p>Click <span class="bold">Create</span>.</p>
<p>The Create Format page appears, where you can define a masking format.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for the Format page.</div>
</li>
<li>
<p>Provide a required name for the new format, select a format entry type from the <span class="bold">Add</span> list, then click <span class="bold">Go</span>.</p>
<p>A page appears that enables you to provide input for the format entry you have selected. For instance, if you select Array List, the subsequent page enables you to enter a list of values, such as New York, New Jersey, and New Hampshire.</p>
</li>
<li>
<p>Continue adding additional format entries as needed.</p>
</li>
<li>
<p>When done, provide an optional user-defined or post-processing function (see <a href="#CEGBBHDH">"Providing User-defined and Post-processing Functions"</a>), then click <span class="bold">OK</span> to save the masking format.</p>
<p>The Format Library page reappears with your newly created format displayed in the Format Library table. You can use this format later to mask a column of the same sensitive type.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for the Format Library and Create Format pages.</div>
</li>
</ol>
<a id="CEGBBHDH"></a>
<div id="RATUG4016" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.5.1.1</span> Providing User-defined and Post-processing Functions</h4>
<p>If desired, you can provide user-defined and post-processing functions on the Create Format page. A user-defined choice is available in the Add list, and a post-processing function field is available at the bottom of the page.</p>
<ul>
<li>
<p><a id="sthref477"></a><a id="sthref478"></a>User-defined functions</p>
<p>To provide a user-defined function, select <span class="bold">User Defined Function</span> from the Add list, then click <span class="bold">Go</span> to access the input fields.</p>
<p>A user-defined function passes in the original value as input, and returns a mask value. The data type and uniqueness of the output values must be compatible with the original output values. Otherwise, a failure occurs when the job runs. Combinable, a user-defined function is a PL/SQL function that can be invoked in a <code>SELECT</code> statement. Its signature is returned as:</p>
<pre>
Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) returns varchar2;
</pre>
<ul>
<li>
<p><code>rowid</code> is the min (rowid) of the rows that contain the value <code>original_value</code> 3rd argument.</p>
</li>
<li>
<p><code>column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code>original_value</code> is the value being masked.</p>
</li>
</ul>
<p>That is, it accepts the original value as an input string, and returns the mask value.</p>
<p>Both input and output values are varchar2. For instance, a user-defined function to mask a number could receive 100 as input, the string representation of the number 100, and return 99, the string representation of the number 99. Values are cast appropriately when inserting to the table. If the value is not castable, masking fails.</p>
</li>
<li>
<p><a id="sthref479"></a><a id="sthref480"></a>Post-processing functions</p>
<p>To provide a post-processing function, enter it in the <span class="bold">Post Processing Function</span> field.</p>
<p>A post-processing function has the same signature as a user-defined function, but passes in the mask value the masking engine generates, and returns the mask value that should be used for masking, as shown in the following example:</p>
<pre>
Function post_proc_udf_func (rowid varchar2, column_name varchar2, mask_value varchar2) returns varchar2;
</pre>
<ul>
<li>
<p><code>rowid</code> is the min (rowid) of the rows that contain the value <code>mask_value</code>.</p>
</li>
<li>
<p><code>column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code>mask_value</code> is the value being masked.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect3" -->
<div id="RATUG4017" class="sect3"><!-- infolevel="all" infotype="General" --><a id="sthref481"></a>
<h4 class="sect3"><span class="secnum">16.5.1.2</span> Using Masking Format Templates</h4>
<p><a id="sthref482"></a>After you have created at least one format, you can use the format definition as a template in the Create Format page, where you can implement most of the format using a different name and changing the entries as needed, rather than needing to create a new format from scratch.</p>
<p>To create a new format similar to an existing format, select a format on the Format Library page and click <span class="bold">Create Like</span>. The masking format you select can either be one you have previously defined yourself, or one from the list of out-of-box masking formats. You can use these generic masking format definitions for different applications.</p>
<p>For instructional details about the various Oracle-supplied predefined masking format definitions and how to modify them to suit your needs, see <a href="#CEGIJDEG">"Using Oracle-supplied Predefined Masking Formats"</a>.</p>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CEGIJDEG"></a>
<div id="RATUG4018" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.5.2</span> Using Oracle-supplied Predefined Masking Formats</h3>
<p><a id="sthref483"></a><a id="sthref484"></a>Enterprise Manager provides several out-of-box predefined formats. All predefined formats and built-in formats are random. The following sections discuss the various Oracle-supplied format definitions and how to modify them to suit your needs:</p>
<ul>
<li>
<p><a href="#CEGCFBFH">Patterns of Format Definitions</a></p>
</li>
<li>
<p><a href="#CEGBHGAG">Category Definitions</a></p>
</li>
<li>
<p><a href="#CEGBDHED">Installing the DM_FMTLIB Package</a></p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on installing the DM_FMTLIB package so that you can use the predefined masking formats, see <a href="#CEGBDHED">"Installing the DM_FMTLIB Package"</a>.</div>
<a id="CEGCFBFH"></a>
<div id="RATUG4019" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.5.2.1</span> Patterns of Format Definitions</h4>
<p><a id="sthref485"></a>All of the format definitions adhere to these typical patterns:</p>
<ul>
<li>
<p>Generate a random number or random digits.</p>
</li>
<li>
<p>Perform post-processing on the above-generated value to ensure that the final result is a valid, realistic value.</p>
</li>
</ul>
<p>For example, a valid credit card number must pass Luhn's check. That is, the last digit of any credit card number is a checksum digit, which is always computed. Also, the first few digits indicate the card type (MasterCard, Amex, Visa, and so forth). Consequently, the format definition of a credit card would be as follows:</p>
<ul>
<li>
<p>Generate random and unique 10-digit numbers.</p>
</li>
<li>
<p>Using a post-processing function, transform the values above to a proper credit card number by adding well known card type prefixes and computing the last digit.</p>
</li>
</ul>
<p>This format is capable of generating 10 billion unique credit card numbers.</p>
</div>
<!-- class="sect3" -->
<a id="CEGBHGAG"></a>
<div id="RATUG4020" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.5.2.2</span> Category Definitions</h4>
<p>The following sections discuss different categories of these definitions:</p>
<ul>
<li>
<p><a href="#CEGEADFD">Credit Card Numbers</a></p>
</li>
<li>
<p><a href="#CEGDJDEH">United States Social Security Numbers</a></p>
</li>
<li>
<p><a href="#CEGFBJIF">ISBN Numbers</a></p>
</li>
<li>
<p><a href="#CEGIABJB">UPC Numbers</a></p>
</li>
<li>
<p><a href="#CEGBEBDC">Canadian Social Insurance Numbers</a></p>
</li>
<li>
<p><a href="#CEGJAJEF">North American Phone Numbers</a></p>
</li>
</ul>
<p>By default, these mask formats are also available in different format styles, such as a hyphen ( - ) format. If needed, you can modify the format style.</p>
<a id="CEGEADFD"></a>
<div id="RATUG4021" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">16.5.2.2.1</span> Credit Card Numbers</h5>
<p><a id="sthref486"></a>Out of the box, the format library provides many different formats for credit cards. The credit card numbers generated by these formats pass the standard credit card validation tests by the applications, thereby making them appear like valid credit card numbers.</p>
<p>Some of the credit card formats you can use include:</p>
<ul>
<li>
<p>MasterCard numbers</p>
</li>
<li>
<p>Visa card numbers</p>
</li>
<li>
<p>American Express card numbers</p>
</li>
<li>
<p>Discover Card numbers</p>
</li>
<li>
<p>Any credit card number (credit card numbers belong to all types of cards)</p>
</li>
</ul>
<p>You may want to use different styles for storing credit card numbers, such as:</p>
<ul>
<li>
<p>Pure numbers</p>
</li>
<li>
<p>'Space' for every four digits</p>
</li>
<li>
<p>'Hyphen' ( - ) for every four digits, and so forth</p>
</li>
</ul>
<p>To implement the masked values in a certain format style, you can set the <code>DM_CC_FORMAT</code> variable of the <code>DM_FMTLIB</code> package. To install the package, see <a href="#CEGBDHED">"Installing the DM_FMTLIB Package"</a> .</p>
<a id="CEGDJDEH"></a>
<div id="RATUG4022" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">16.5.2.2.2</span> United States Social Security Numbers</h5>
<p><a id="sthref487"></a>Out of the box, you can generate valid U.S. Social Security (SSN) numbers. These SSNs pass the normal application tests of a valid SSN.</p>
<p>You can affect the format style by setting the <code>DM_SSN_FORMAT</code> variable of the <code>DM_FMTLIB</code> package. For example, if you set this variable to &amp;rsquor;-', the typical social security number would appear as &amp;rsquor;123-45-6789'.</p>
</div>
<!-- class="sect4" -->
<a id="CEGFBJIF"></a>
<div id="RATUG4023" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">16.5.2.2.3</span> ISBN Numbers</h5>
<p><a id="sthref488"></a>Using the format library, you can generate either 10-digit or 13-digit ISBN numbers. These numbers adhere to standard ISBN number validation tests. All of these ISBN numbers are random in nature. Similar to other format definitions, you can affect the "style" of the ISBN format by setting values to <code>DM_ISBN_FORMAT</code>.</p>
</div>
<!-- class="sect4" -->
<a id="CEGIABJB"></a>
<div id="RATUG4024" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">16.5.2.2.4</span> UPC Numbers</h5>
<p><a id="sthref489"></a>Using the format library, you can generate valid UPC numbers. They adhere to standard tests for valid UPC numbers. You can affect the formatting style by setting the <code>DM_UPC_FORMAT</code> value of the <code>DM_FMTLIB</code> package.</p>
</div>
<!-- class="sect4" -->
<a id="CEGBEBDC"></a>
<div id="RATUG4025" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">16.5.2.2.5</span> Canadian Social Insurance Numbers</h5>
<p><a id="sthref490"></a>Using the format library, you can generate valid Canadian Social Insurance Numbers (SINs). These numbers adhere to standard tests of Canadian SINs. You can affect the formatting style by setting the <code>DM_CN_SIN_FORMAT</code> value of the <code>DM_FMTLIB</code> package.</p>
</div>
<!-- class="sect4" -->
<a id="CEGJAJEF"></a>
<div id="RATUG4026" class="sect4"><!-- infolevel="all" infotype="General" -->
<h5 class="sect4"><span class="secnum">16.5.2.2.6</span> North American Phone Numbers</h5>
<p><a id="sthref491"></a>Out of the box, the format library provides various possible U.S. and Canadian phone numbers. These are valid, realistic looking numbers that can pass standard phone number validation tests employed by applications. You can generate the following types of numbers:</p>
<ul>
<li>
<p>Any North American phone numbers</p>
</li>
<li>
<p>Any Canadian phone number</p>
</li>
<li>
<p>Any U.S.A. phone number</p>
</li>
</ul>
</div>
<!-- class="sect4" --></div>
<!-- class="sect4" --></div>
<!-- class="sect3" -->
<a id="CEGBDHED"></a>
<div id="RATUG4027" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.5.2.3</span> Installing the DM_FMTLIB Package</h4>
<p><a id="sthref492"></a>The predefined masking formats use functions defined in the <code>DM_FMTLIB</code> package. This package is automatically installed in the <code>DBSNMP</code> schema of your Enterprise Manager repository database. To use the predefined masking formats on a target database (other than the repository database), you must manually install the <code>DM_FMTLIB</code> package on that database.</p>
<p class="orderedlisttitle">To install the DM_FMTLIB package:&nbsp;</p>
<ol>
<li>
<p>Locate the following scripts in your Enterprise Manager installation:</p>
<pre>
$PLUGIN_HOME/sql/db/latest/masking/dm_fmtlib_pkgdef.sql
$PLUGIN_HOME/sql/db/latest/masking/dm_fmtlib_pkgbody.sql
</pre>
<p>Where PLUGIN_HOME can be any of the locations returned by the following SQL SELECT statement, executed as SYSMAN:</p>
<pre>
select PLUGIN_HOME from gc_current_deployed_plugin where plugin_id='oracle.sysman.db' and destination_type='OMS'; 
</pre></li>
<li>
<p>Copy these scripts to a directory in your target database installation and execute them using SQL*Plus, connected as a user that can create packages in the DBSNMP schema.</p>
<p>You can now use the predefined masking formats in your masking definitions.</p>
</li>
<li>
<p>Select and import any predefined masking format into a masking definition by clicking the <span class="bold">Import Format</span> button on the Define Column Mask page.</p>
</li>
</ol>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CEGDACDH"></a>
<div id="RATUG4028" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.5.3</span> Providing a Masking Format to Define a Column</h3>
<p>When you create a masking definition (<a href="#CEGHHDEI">"Masking with an Application Data Model and Workloads"</a>), you will be either importing a format or selecting one from the available types in the Define Column Mask page. <a id="sthref494"></a><a id="sthref495"></a>Format entry options are as follows:</p>
<ul>
<li>
<p>Array List</p>
<p>The data type of each value in the list must be compatible with that of the masked column. Uniqueness must be guaranteed if needed. For example, for a unique key column that already has 10 distinct values, the array list should also contain at least 10 distinct values.</p>
</li>
<li>
<p>Delete</p>
<p>Deletes the specified rows as identified by the condition clauses. If a column includes a delete format for one of its conditions, a foreign key constraint or a dependent column cannot refer to the table.</p>
</li>
<li>
<p>Encrypt</p>
<p>Encrypts column data by specifying a regular expression. The column values in all the rows must match the regular expression. This format can be used to mask data consistently across databases. That is, for a given value it always generates the same masked value.</p>
<p>For example, the regular expression [(][1-9][0-9]{2}[)][_][0-9]{3}[-][0-9]{4} generates U.S. phone numbers such as (123) 456-7890.</p>
<p>This format supports a subset of the regular expression language. It supports encrypting strings of fixed widths. However, it does not support * or + syntax of regular expressions.</p>
<p>If a value does not match the format specified, the encrypted value may no longer produce one-to-one mappings. All non-confirming values are mapped to a single encrypted value, thereby producing a many-to-one mapping.</p>
</li>
<li>
<p>Fixed Number</p>
<p>The type of column applicable to this entry is a <code>NUMBER</code> column or a <code>STRING</code> column. For example, if you mask a column that has a social security number, one of the entries can be Fixed Number 900. This format is combinable.</p>
</li>
<li>
<p>Fixed String</p>
<p>The type of column applicable to this entry is a <code>STRING</code> column. For example, if you mask a column that has a License Plate Number, one of the entries can be Fixed String CA. This format is combinable.</p>
</li>
<li>
<p>Null Value</p>
<p>Masks the column using a value of <code>NULL</code>. The column must be nullable.</p>
</li>
<li>
<p>Post-Processing Function</p>
<p>This is a special function that you can apply to the mask value that the masking engine generates. This function takes the mask value as input and returns the actual mask value to be used for masking.</p>
<p>The post-processing function is called after the mask value is generated. You can use it, for instance, to add commas or dollar signs to a value. For example, if a mask value is a number such as 12000, the post processing function can modify this to $12,000. Another use is for adding checksums or special encodings for the mask value that is produced.</p>
<p>In the following statement:</p>
<pre>
Function post_proc_udf_func (rowid varchar2, column_name varchar2, mask_value varchar2) returns varchar2;
</pre>
<ul>
<li>
<p><code>rowid</code> is the min (rowid) of the rows that contains the value <code>mask_value</code> 3rd argument.</p>
</li>
<li>
<p><code>column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code>mask_value</code> is the value being masked.</p>
</li>
</ul>
</li>
<li>
<p>Preserve Original Data</p>
<p>Retains the original values for rows that match the specified condition clause. This is used in cases where some rows that match a condition do not need to be masked.</p>
</li>
<li>
<p>Random Dates</p>
<p>The uniqueness of the Date column is not maintained after masking. This format is combinable.</p>
</li>
<li>
<p>Random Digits</p>
<p>This format generates unique values within the specified range. For example, for a random digit with a length of [5,5], an integer between [0, 99999] is randomly generated, left padded with '0's to satisfy the length and uniqueness requirement. This is a complementary type of random number, which will not be padded. When using random digits, the random digit pads to the appropriate length in a string. It does not pad when used for a number column. This format is combinable.</p>
<p>Data masking ensures that the generated values are unique, but if you do not specify enough digits, you could run out of unique values in that range.</p>
</li>
<li>
<p>Random Numbers</p>
<p>If used as part of a mixed random string, these have limited usage for generating unique values. This format generates unique values within the specified range. For example, a starting value of 100 and ending value of 200 generates an integer number ranging from 100 to 200, both inclusive. Note that Oracle Enterprise Manager release 10.2.0.4.0 does not support float numbers. This format is combinable.</p>
</li>
<li>
<p>Random Strings</p>
<p>This format generates unique values within the specified range. For example, a starting length of 2 and ending length of 6 generates a random string of 2 - 6 characters in length. This format is combinable.</p>
</li>
<li>
<p>Shuffle</p>
<p>This format randomly shuffles the original column data. It maintains data distribution except when a column is conditionally masked and its values are not unique.</p>
<p>For more information, see <a href="#CEGEHAFE">"Using the Shuffle Format"</a>.</p>
</li>
<li>
<p>Substitute</p>
<p>This format uses a hash-based substitution for the original value and always yields the same mask value for any given input value. Specify the substitution masking table and column. This format has the following properties:</p>
<ul>
<li>
<p>The masked data is not reversible. That is, this format is not vulnerable to external security breaches because the original value is replaced, so it is not possible to retrieve the original value from the mask value.</p>
</li>
<li>
<p>Masking multiple times with a hash substitute across different databases yields the same mask value. This characteristic is valid across multiple databases or multiple runs assuming that the same substitution values are used in the two runs. That is, the actual rows and values in the substitution table do not change. For example, suppose the two values Joe and Tom were masked to Henry and Peter. When you repeat the same mask on another database using the same substitution table, if there were Bob and Tom, they might be replaced with Louise and Peter. Notice that even though the two runs have different data, Tom is always replaced with Peter.</p>
</li>
<li>
<p>This format does not generate uniqueness.</p>
</li>
</ul>
</li>
<li>
<p>Substring</p>
<p>Substring is similar to the database <code>substr</code> function. The start position can be either a positive or a negative integer. For example, if the original string is <code>abcd</code>, a substring with a start position of 2 and length of 3 generates a masked string of bcd. A substring with start position of -2 and length of 3 generates a masked string of cd. This format is combinable.</p>
</li>
<li>
<p>Table Column</p>
<p>A table column enables you to select values from the chosen column as the replacement value or part thereof. The data type and uniqueness must be compatible. Otherwise, a failure occurs when the job runs. This format is combinable.</p>
</li>
<li>
<p>Truncate</p>
<p>Truncates all rows in a table. If one of the columns in a table is marked as truncated, the entire table is truncated, so no other mask formats can be specified for any of the other columns. If a table is being truncated, it cannot be referred to by a foreign key constraint or a dependent column.</p>
</li>
<li>
<p>User Defined Function</p>
<p>The data type and uniqueness of the output values must be compatible with the original output values. Otherwise, a failure occurs when the job runs.</p>
<p>In the following statement:</p>
<pre>
Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) returns varchar2;
</pre>
<ul>
<li>
<p><code>rowid</code> is the min (rowid) of the rows that contain the value <code>original_value</code> 3rd argument.</p>
</li>
<li>
<p><code>column_name</code> is the name of the column being masked.</p>
</li>
<li>
<p><code>original_value</code> is the value being masked.</p>
</li>
</ul>
</li>
</ul>
</div>
<!-- class="sect2" -->
<a id="CEGEEEIE"></a>
<div id="RATUG4029" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.5.4</span> Deterministic Masking Using the Substitute Format</h3>
<p><a id="sthref496"></a><a id="sthref497"></a><a id="sthref498"></a><a id="sthref499"></a>You may occasionally need to consistently mask multiple, distinct databases. For instance, if you run HR, payroll, and benefits that have an employee ID concept on three separate databases, the concept may be consistent for all of these databases, in that an employee's ID can be selected to retrieve the employee's HR, payroll, or benefits information. Based on this premise, if you were to mask the employee's ID because it actually contains his/her social security number, you would have to mask this consistently across all three databases.</p>
<p>Deterministic masking provides a solution for this problem. You can use the Substitute format to mask employee ID column(s) in all three databases. The Substitute format uses a table of values from which to substitute the original value with a mask value. As long as this table of values does not change, the mask is deterministic or consistent across the three databases.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For more information on the Substitute format, see the online help for the <a id="sthref500"></a>Define Column Mask page.</div>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGHHDEI"></a>
<div id="RATUG4030" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.6</span> Masking with an Application Data Model and Workloads</h2>
<p>Before creating a masking definition, note the following prerequisites and advisory information:</p>
<ul>
<li>
<p><a id="sthref501"></a><a id="sthref502"></a>Ensure that you have the following minimum privileges for data masking:</p>
<ul>
<li>
<p>EM_ALL_OPERATOR for Enterprise Manager Cloud Control users</p>
</li>
<li>
<p>SELECT_CATALOG_ROLE for database users</p>
</li>
<li>
<p>Select Any Dictionary privilege for database users</p>
</li>
<li>
<p>Execute privileges for the DBMS_CRYPTO package</p>
</li>
</ul>
</li>
<li>
<p>Ensure the format you select does not violate check constraints and does not break any applications that use the data.</p>
</li>
<li>
<p>For triggers and PL/SQL packages, data masking recompiles the object.</p>
</li>
<li>
<p>Exercise caution when masking partitioned tables, especially if you are masking the partition key. In this circumstance, the row may move to another partition.</p>
</li>
<li>
<p>Data Masking does not support clustered tables, masking information in object tables, XML tables, and virtual columns. Relational tables are supported for masking.</p>
</li>
<li>
<p>If objects are layered on top of a table such as views, materialized views, and PL/SQL packages, they are recompiled to be valid.</p>
</li>
</ul>
<p>If you plan to mask a test system intended for evaluating performance, the following practices are recommended:</p>
<ul>
<li>
<p>Try to preserve the production statistics and SQL profiles after masking by adding a pre-masking script to export the SQL profiles and statistics to a temporary table, then restoring after masking completes.</p>
</li>
<li>
<p>Run a SQL Performance Analyzer evaluation to understand the masking impact on performance. Any performance changes other than what appears in the evaluation report are usually related to application-specific changes on the masked database.</p>
</li>
</ul>
<p class="orderedlisttitle"><a id="sthref504"></a><a id="sthref505"></a>To create a masking definition:&nbsp;</p>
<ol>
<li>
<p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Masking Definitions</span>.</p>
<p>The Data Masking Definitions page appears, where you can create and schedule new masking definitions and manage existing masking definitions.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for the <a id="sthref506"></a>Data Masking Definitions page.</div>
</li>
<li>
<p>Click <span class="bold">Create</span> to go to the Create Masking Definition page.</p>
<p>A masking definition includes information regarding table columns and the format for each column. You can choose which columns to mask, leaving the remaining columns intact.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for the <a id="sthref507"></a>Create Masking Definition page.</div>
</li>
<li>
<p>Provide a required <span class="bold">Name</span>, <span class="bold">Application Data Model</span>, and <span class="bold">Reference Database</span>.</p>
<p>When you click the search icon and select an Application Data Model (ADM) name from the list, the system automatically populates the Reference Database field.</p>
<ul>
<li>
<p>Optional: Check Ensure Workload Masking Compatibility if you want to mask Capture files and SQL Tuning Sets.</p>
<p>When you enable this check box, the masking definition is evaluated to determine if the SQL Expression format or conditional masking is being used. If either is in use when you click OK, the option becomes unchecked and an error message appears asking you to remove these items before selecting this option.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Before proceeding to the next step, one or more sensitive columns must already be defined in the Application Data Model. See <a href="tdm_data_disc_modeling.htm#BABCEGAJ">"Managing Sensitive Column Types"</a> for more information.</div>
</li>
</ul>
</li>
<li>
<p>Click <span class="bold">Add</span> to go to the Add Columns page, where you can choose which sensitive columns in the ADM you want to mask.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for the <a id="sthref508"></a>Add Columns page.</div>
</li>
<li>
<p>Enter search criteria, then click <span class="bold">Search</span>.</p>
<p>The sensitive columns you defined in the ADM appear in the table below.</p>
</li>
<li>
<p>Either select one or more columns for later formatting on the Create Masking Definition page, or formatting now if the data types of the columns you have selected are identical.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on data types, see <a href="#CEGHIEAA">"Supported Data Types"</a>.</div>
</li>
<li>
<p><span class="italic">Optional</span>: if you want to <a id="sthref509"></a>mask selected columns as a group, enable Mask selected columns as a group. The columns that you want to mask as a group must all be from the same table.</p>
<p>Enable this check box if you want to mask more than one column together, rather than separately. When you select two or more columns and then later define the format on the Define Group Mask page, the columns appear together, and any choices you make for format type or masking table apply collectively to all of the columns.</p>
<p>After you define the group and return to this page, the Column Group column in the table shows an identical number for each entry row in the table for all members of the group. For example, if you have defined your first group containing four columns, each of the four entries in this page will show a number 1 in the Column Group column. If you define another group, the entries in the page will show the number 2, and so forth. This helps you to distinguish which columns belong to which column groups.</p>
</li>
<li>
<p>Either click <span class="bold">Add</span> to add the column to the masking definition, return to the Create Masking Definition page and define the format of the column later, or click <span class="bold">Define Format and Add</span> to define the format for the column now.</p>
<p>The Define Format and Add feature can save you significant time. When you select multiple columns to add that have the same data type, you do not need to define the format for each column as you would when you click Add. For instance, if you search for Social Security numbers (SSN) and the search yields 100 SSN columns, you could select them all, then click <span class="bold">Define Format and Add</span> to import the SSN format for all of them.</p>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>If you clicked <span class="bold">Add</span> in the previous step:</p>
<p>You will eventually need to define the format of the column in the Create Masking Definition page before you can continue. When you are ready to do so, click the icon in the page Format column for the column you want to format. Depending on whether you decided to mask selected columns as a group on the Add Columns page, either the Define Column mask or Define Group mask appears. Read further in this step for instructions for both cases.</p>
</li>
<li>
<p>If you clicked <span class="bold">Define Format and Add</span> in the previous step and did not check <span class="bold">Mask selected columns as a group</span>:</p>
<p>The Define Column Mask page appears, where you can define the format for the column before adding the column to the Create Masking Definition page, as explained below:</p>
<ul>
<li>
<p>Provide a format entry for the required Default condition by either selecting a format entry from the list and clicking <span class="bold">Add</span>, or clicking <span class="bold">Import Format</span>, selecting a predefined format on the Import Format page, then clicking <span class="bold">Import</span>.</p>
<p>The Import Format page displays the formats that are marked with the same sensitive type as the masked column.</p>
<p>For information about Oracle-supplied predefined masking format definitions, see <a href="#CEGIJDEG">"Using Oracle-supplied Predefined Masking Formats"</a>.</p>
<p>For descriptions of the choices available in the Format Entry list, see <a href="#CEGDACDH">"Providing a Masking Format to Define a Column"</a>.</p>
</li>
<li>
<p>Add another condition by clicking <span class="bold">Add Condition</span> to add a new condition row, then provide one or more format entries as described in the previous step.</p>
</li>
<li>
<p>When you have finished formatting the column, click <span class="bold">OK</span> to return to the Create Masking Definition page.</p>
</li>
</ul>
</li>
<li>
<p>If you clicked <span class="bold">Define Format and Add</span> in the previous step and checked <span class="bold">Mask selected columns as a group</span>:</p>
<p>The Define Group Mask page appears, where you can add format entries for group columns that appear in the Create Masking Definition page, as explained below:</p>
<ul>
<li>
<p>Select one of the available format types. For complete information on the format types, see the online help for the Defining the Group Masking Format topic.</p>
<p>For descriptions of the choices available in the Format Entry list, see <a href="#CEGDACDH">"Providing a Masking Format to Define a Column"</a>.</p>
</li>
<li>
<p>Optionally add a column to the group.</p>
</li>
<li>
<p>When you have finished formatting the group, click <span class="bold">OK</span> to return to the Create Masking Definition page.</p>
<p>Your configuration appears in the Columns table. The sensitive columns you selected earlier now appear on this page. The selected columns are the primary key, and the foreign key columns are listed below. These columns are masked as well.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Expand <span class="bold">Show Advanced Options</span> and decide whether the selected default data masking options are satisfactory.</p>
<p>For more information, see <a href="#CEGHIBDC">"Selecting Data Masking Advanced Options"</a>.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to save your definition and return to the Data Masking Definitions page.</p>
<p>At this point, super administrators can see each other's masking definitions.</p>
</li>
<li>
<p>Select the definition and click <span class="bold">Generate Script</span> to view the script for the list of database commands used to mask the columns you selected earlier.</p>
<p>This process checks whether sufficient disk space is available for the operation, and also determines the impact on other destination objects, such as users, after masking. After the process completes, the Script Generation Results page appears, enabling you to do the following:</p>
<ul>
<li>
<p>Save the entire PL/SQL script to your desktop, if desired.</p>
</li>
<li>
<p>Clone and mask the database using the Clone Database wizard (this requires a <a id="sthref510"></a>Database Lifecycle Management Pack license).</p>
</li>
<li>
<p>Schedule the data masking job without cloning.</p>
</li>
<li>
<p>View errors and warnings, if any, in the impact report.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for the <a id="sthref511"></a>Script Generation Results page.</div>
<div class="infobox-note">
<p class="notep1">Note:</p>
If any tables included in the masking definition have columns of data type <code>LONG</code>, a warning message may appear. For more information, see <a href="#CEGHJJDJ">"Using Data Masking with LONG Columns"</a>.</div>
</li>
<li>
<p>Do one of the following:</p>
<ul>
<li>
<p>If you are working with a production database, click <span class="bold">Clone and Mask</span> to clone and mask the database you are currently working with to ensure that you do not mask your production database.</p>
<p>The Clone and Mask feature requires a Database Lifecycle Management Pack license.</p>
<p>For more information, see <a href="#CEGBFFDJ">"Cloning the Production Database"</a>.</p>
</li>
<li>
<p>If you are already working with a test database and want to directly mask the data in this database, click <span class="bold">Schedule Job</span>.</p>
<ul>
<li>
<p>Provide the requisite information and desired options. You can specify the database at execution time to any database. The system assumes that the database you select is a clone of the source database. By default, the source database from the ADM is selected.</p>
</li>
<li>
<p>Click <span class="bold">Submit</span>.</p>
<p>The Data Masking Definitions page appears. The job has been submitted to Enterprise Manager and the masking process appears. The Status column on this page indicates the current stage of the process.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on page user controls, see the online help for Scheduling a Data Masking Job.</div>
</li>
</ul>
</li>
</ol>
<div class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref512"></a>
<h3 class="sect2"><span class="secnum">16.6.1</span> Estimating Space Requirements for Masking Operations</h3>
<p>Here are some guidelines for estimating space requirements for masking operations. These estimates are based on a projected largest table size of 500GB. In making masking space estimates, assume a "worst-case scenario."</p>
<ul>
<li>
<p>For in-place masking:</p>
<ul>
<li>
<p>2 * 500GB for the mapping table (the mapping table stores both the original and the masked columns. Worse case is every column is to be masked).</p>
</li>
<li>
<p>2 * 500GB to accommodate both the original and the masked tables (both exist in the database at some point during the masking process).</p>
</li>
<li>
<p>2 * 500GB for temporary tablespace (needed for hash joins, sorts, and so forth).</p>
</li>
</ul>
<p>Total space required for the worst case: 3TB.</p>
</li>
<li>
<p>For at-source masking:</p>
<ul>
<li>
<p>2 * 500GB for the mapping table (as for in-place masking).</p>
</li>
<li>
<p>2 * 500GB for temporary tablespace (as for in-place masking).</p>
</li>
<li>
<p>Sufficient file system space to accommodate the dump file.</p>
</li>
</ul>
<p>Total space required for the worst case: 2TB plus the necessary file system space.</p>
</li>
</ul>
<p>In either case, Oracle recommends that you set the temp and undo tablespaces to auto extend.</p>
<p>You can specify a tablespace for mapping tables during script generation. If you do not specify a tablespace, the tables are created in the tablespace of the executing user. There are some situations, for example when using the shuffle format, that do not require a mapping table. In these cases, updates to the original table happen in-line.</p>
</div>
<!-- class="sect2" -->
<a id="CEGIEDCA"></a>
<div id="RATUG4036" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.6.2</span> Adding Dependent Columns</h3>
<p><a id="sthref513"></a>Dependent columns are defined by adding them to the Application Data Model. The following prerequisites apply for the column to be defined as dependent:</p>
<ul>
<li>
<p>A valid dependent column should not already be included for masking.</p>
</li>
<li>
<p>The column should not be a foreign key column or referenced by a foreign key column.</p>
</li>
<li>
<p>The column data should conform to the data in the parent column.</p>
</li>
</ul>
<p>If the column does not meet these criteria, an "Invalid Dependent Columns" message appears when you attempt to add the dependent column.</p>
</div>
<!-- class="sect2" -->
<a id="CEGBFBHJ"></a>
<div id="RATUG4059" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.6.3</span> Masking Dependent Columns for Packaged Applications</h3>
<p>The following procedure explains how to mask data across columns for packaged applications in which the relationships are not defined in the data dictionary.</p>
<p class="orderedlisttitle"><a id="sthref515"></a>To mask dependent columns for packaged applications:&nbsp;</p>
<ol>
<li>
<p>Go to Data Discovery and Modeling and create a new Application Data Model (ADM) using metadata collection for your packaged application suite.</p>
<p>When metadata collection is complete, edit the newly created ADM.</p>
</li>
<li>
<p><a id="sthref516"></a><a id="sthref517"></a><a id="sthref518"></a><a id="sthref519"></a><a id="sthref520"></a>Manually add a referential relationship:</p>
<ol>
<li>
<p>From the Referential Relationships tab, open the <span class="bold">Actions</span> menu, then select <span class="bold">Add Referential Relationship</span>.</p>
<p>The Add Referential Relationship pop-up window appears.</p>
</li>
<li>
<p>Select the requisite Parent Key and Dependent Key information.</p>
</li>
<li>
<p>In the Columns Name list, select a dependent key column to associate with a parent key column.</p>
</li>
<li>
<p>Click <span class="bold">OK</span> to add the referential relationship to the ADM.</p>
<p>The new dependent column now appears in the referential relationships list.</p>
</li>
</ol>
</li>
<li>
<p><a id="sthref521"></a><a id="sthref522"></a>Perform sensitive column discovery.</p>
<p>When sensitive column discovery is complete, review the columns found by the discovery job and mark them sensitive or not sensitive as needed.</p>
<p>When marked as sensitive, any discovery sensitive column also marks its parent and the other child columns of the parent as sensitive. Consequently, it is advisable to first create the ADM with all relationships. ADM by default, or after running drivers, may not contain denormalized relationships. You need to manually add these.</p>
<p>For more information about sensitive column discovery, see step <a href="tdm_data_disc_modeling.htm#BABGFFHG">6</a>.</p>
</li>
<li>
<p>Go to Data Masking and create a new masking definition.</p>
</li>
<li>
<p>Select the newly created ADM and click <span class="bold">Add</span>, then <span class="bold">Search</span> to view this ADM's sensitive columns.</p>
</li>
<li>
<p>Select columns based on your search results, then import formats for the selected columns.</p>
<p>Enterprise Manager displays formats that conform to the privacy attributes.</p>
</li>
<li>
<p>Select the format and generate the script.</p>
</li>
<li>
<p>Execute the masking script.</p>
<p>Enterprise Manager executes the generated script on the target database and masks all of your specified columns.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CEGHIBDC"></a>
<div id="RATUG4031" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.6.4</span> Selecting Data Masking Advanced Options</h3>
<p>The following options on the Masking Definitions page are all checked by default, so you need to uncheck the options that you do not want to enable:</p>
<ul>
<li>
<p><a href="#CHDGCAJE">Data Masking Options</a></p>
</li>
<li>
<p><a href="#CHDHIHBG">Random Number Generation</a></p>
</li>
<li>
<p><a href="#CEGJIEBD">Pre- and Post-mask Scripts</a></p>
</li>
</ul>
<a id="CHDGCAJE"></a>
<div id="RATUG4032" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.6.4.1</span> Data Masking Options</h4>
<p><a id="sthref523"></a>The data masking options include:</p>
<ul>
<li>
<p>Disable redo log generation during masking</p>
<p>Masking disables redo logging and flashback logging to purge any original unmasked data from logs. However, in certain circumstances when you only want to test masking, roll back changes, and retry with more mask columns, it is easier to uncheck this box and use a flashback database to retrieve the old unmasked data after it has been masked. You can use Enterprise Manager to flashback a database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Disabling this option compromises security. You must ensure this option is enabled in the final mask performed on the copy of the production database.</div>
</li>
<li>
<p>Refresh statistics after masking</p>
<p>If you have already enabled statistics collection and would like to use special options when collecting statistics, such as histograms or different sampling percentages, it is beneficial to turn off this option to disable default statistics collection and run your own statistics collection jobs.</p>
</li>
<li>
<p>Drop temporary tables created during masking</p>
<p>Masking creates temporary tables that map the original sensitive data values to mask values. In some cases, you may want to preserve this information to track how masking changed your data. Note that doing so compromises security. These tables must be dropped before the database is available for unprivileged users.</p>
</li>
<li>
<p>Decrypt encrypted columns</p>
<p>This option decrypts columns that were previously masked using Encrypt format. To decrypt a previously encrypted column, the seed value must be the same as the value used to encrypt.</p>
<p>Decrypt only recovers the original value if the original format used for the encryption matches the original value. If the originally encrypted value did not conform to the specified regular expression, when decrypted, the encrypted value cannot reproduce the original value.</p>
</li>
<li>
<p>Use parallel execution when possible</p>
<p>Oracle Database can make parallel various SQL operations that can significantly improve their performance. Data Masking uses this feature when you select this option. You can enable Oracle Database to automatically determine the degree of parallelism, or you can specify a value. For more information about using parallel execution and the degree of parallelism, see <a class="olink DWHSG" href="../e25554/toc.htm"><span class="italic">Oracle Database Data Warehousing Guide</span></a>.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CHDHIHBG"></a>
<div id="RATUG4033" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.6.4.2</span> Random Number Generation</h4>
<p><a id="sthref524"></a>The random number generation options include:</p>
<ul>
<li>
<p>Favor Speed</p>
<p>The <code>DBMS_RANDOM</code> package is used for random number generation.</p>
</li>
<li>
<p>Favor Security</p>
<p>The <code>DBMS_CRYPTO</code> package is used for random number generation. Additionally, if you use the Substitute format, a seed value is required when you schedule the masking job or database clone job.</p>
</li>
</ul>
</div>
<!-- class="sect3" -->
<a id="CEGJIEBD"></a>
<div id="RATUG4060" class="sect3"><!-- infolevel="all" infotype="General" -->
<h4 class="sect3"><span class="secnum">16.6.4.3</span> Pre- and Post-mask Scripts</h4>
<p><a id="sthref525"></a>When masking a test system to evaluate performance, it is beneficial to preserve the object statistics after masking. You can accomplish this by adding a pre-masking script to export the statistics to a temporary table, then restoring them with a post-masking script after masking concludes.</p>
<p>Use the Pre Mask Script text box to specify any user-specified SQL script that must run before masking starts.</p>
<p>Use the Post Mask Script text box to specify any user-specified SQL script that must run after masking completes. Since masking modifies data, you can also perform tasks, such as rebalancing books or calling roll-up or aggregation modules, to ensure that related or aggregate information is consistent.</p>
<p>The following examples show pre- and post-masking scripts for preserving statistics.</p>
<div id="RATUG4061" class="example">
<p class="titleinexample"><a id="sthref526"></a>Example 16-1 Pre-masking Script for Preserving Statistics</p>
<pre>
variable sts_task  VARCHAR2(64);

/*Step :1 Create the staging table for statistics*/

exec dbms_stats.create_stat_table(ownname=&gt;'SCOTT',stattab=&gt;'STATS');
 
/* Step 2: Export the table statistics into the staging table. Cascade results in
all index and column statistics associated with the specified table being exported
as well. */
 
exec
dbms_stats.export_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'EMP',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');
exec
dbms_stats.export_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'DEPT',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');

/* Step 3: Create analysis task */
3. exec :sts_task := DBMS_SQLPA.create_analysis_task(sqlset_name=&gt;
'scott_test_sts',task_name=&gt;'SPA_TASK', sqlset_owner=&gt;'SCOTT');
 
/*Step 4: Execute the analysis task before masking */
exec DBMS_SQLPA.execute_analysis_task(task_name =&gt; 'SPA_TASK', 
execution_type=&gt; 'explain plan', execution_name  =&gt; 'pre-mask_SPA_TASK'); 
</pre></div>
<!-- class="example" -->
<div id="RATUG4062" class="example">
<p class="titleinexample"><a id="sthref527"></a>Example 16-2 Post-masking Script for Preserving Statistics</p>
<pre>
*Step 1: Import the statistics from the staging table to the dictionary tables*/
 
exec
dbms_stats.import_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'EMP',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');
exec
dbms_stats.import_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'DEPT',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');
 
/* Step 2: Drop the staging table */
 
exec dbms_stats.drop_stat_table(ownname=&gt;'SCOTT',stattab=&gt;'STATS');

/*Step 3: Execute the analysis task before masking */
exec DBMS_SQLPA.execute_analysis_task(task_name=&gt;'SPA_TASK', 
execution_type=&gt;'explain plan', execution_name=&gt;'post-mask_SPA_TASK');
 
/*Step 4: Execute the comparison task */
exec DBMS_SQLPA.execute_analysis_task(task_name =&gt;'SPA_TASK', 
execution_type=&gt;'compare', execution_name=&gt;'compare-mask_SPA_TASK'); 
</pre></div>
<!-- class="example" -->
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
See <a href="#CEGEBJGH">"Masking a Test System to Evaluate Performance"</a> for a procedure that explains how to specify the location of these scripts when scheduling a data masking job.</div>
</div>
<!-- class="sect3" --></div>
<!-- class="sect2" -->
<a id="CEGBFFDJ"></a>
<div id="RATUG4037" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.6.5</span> Cloning the Production Database</h3>
<p>When you clone and mask the database, a copy of the masking script is saved in the Enterprise Manager repository and then retrieved and executed after the clone process completes. Therefore, it is important to regenerate the script after any schema changes or modifications to the production database.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Ensure that you have a Database Lifecycle Management Pack license before proceeding. The Clone Database feature requires this license.</div>
<p class="orderedlisttitle"><a id="sthref529"></a>To clone and optionally mask the masking definition's target database:&nbsp;</p>
<ol>
<li>
<p>From the Data Masking Definitions page, select the masking definition you want to clone, select <span class="bold">Clone Database</span> from the Actions list, then click <span class="bold">Go</span>.</p>
<p>The Clone Database: Source Type page appears.</p>
<p>The Clone Database wizard appears, where you can create a test system to run the mask. You can also access this wizard by clicking the <span class="bold">Clone and Mask</span> button from the Script Generation Results page.</p>
</li>
<li>
<p>Specify the type of source database backup to be used for the cloning operation, then click <span class="bold">Continue</span>.</p>
</li>
<li>
<p>Proceed through the wizard steps as you ordinarily would to clone a database. For assistance, refer to the online help for each step.</p>
</li>
<li id="CHDBEDJI">
<p>In the Database Configuration step of the wizard, add a masking definition, then select the Run SQL Performance Analyzer option as well as other options as desired or necessary.</p>
</li>
<li>
<p>Schedule and then run the clone job.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<div id="RATUG4038" class="sect2"><!-- infolevel="all" infotype="General" --><a id="sthref530"></a>
<h3 class="sect2"><span class="secnum">16.6.6</span> Importing a Data Masking Template</h3>
<p>You can import and re-use a previously exported data masking definition template, including templates for Fusion Applications, saved as an XML file to the current Enterprise Manager repository.</p>
<p>Note the following advisory information:</p>
<ul>
<li>
<p>The XML file format must be compliant with the masking definition XML format.</p>
</li>
<li>
<p>Verify that the name of the masking definition to be imported does not already exist in the repository.</p>
</li>
<li>
<p>Verify that the target name identifies a valid Enterprise Manager target.</p>
</li>
</ul>
<p class="orderedlisttitle"><a id="sthref532"></a><a id="sthref533"></a>To import a data masking template:&nbsp;</p>
<ol>
<li>
<p>From the Data Masking Definitions page, click <span class="bold">Import</span>.</p>
<p>The Import Masking Definition page appears.</p>
</li>
<li>
<p>Specify the ADM associated with the template. The Reference Database is automatically provided.</p>
</li>
<li>
<p>Browse for the XML file, or specify the name of the XML file, then click <span class="bold">Continue</span>.</p>
</li>
</ol>
<p>The Data Masking Definitions Page reappears and displays the imported definition in the table list for subsequent viewing and masking.</p>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGEBJGH"></a>
<div id="RATUG4063" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.7</span> Masking a Test System to Evaluate Performance</h2>
<p><a id="sthref534"></a>After you have created a data masking definition, you may want to use it to analyze the performance impact from masking on a test system. The procedures in the following sections explain the process for this task for masking only, or cloning and masking.</p>
<a id="CEGGBBFG"></a>
<div id="RATUG4064" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.7.1</span> Using Only Masking for Evaluation</h3>
<p class="orderedlisttitle">To use only masking to evaluate performance:&nbsp;</p>
<ol>
<li>
<p>From the Data Masking Definitions page, select the masking definition to be analyzed, then click <span class="bold">Schedule Job</span>.</p>
<p>The Schedule Data Masking Job page appears.</p>
</li>
<li id="CHDIAFHI">
<p>At the top of the page, provide the requisite information.</p>
<p>The script file location pertains to the masking script, which also contains the pre- and post-masking scripts you created in <a href="#CEGJIEBD">"Pre- and Post-mask Scripts"</a>.</p>
</li>
<li>
<p>In the Encryption Seed section, provide a text string that you want to use for encryption.</p>
<p><a id="sthref536"></a>This section only appears for masking definitions that use the Substitute or Encrypt formats. The seed is an encryption key used by the encryption/hash-based substitution APIs, and makes masking more deterministic instead of being random.</p>
</li>
<li>
<p>In the Workloads section:</p>
<ol>
<li>
<p>Select the <span class="bold">Mask SQL Tuning Sets</span> option, if desired.</p>
<p>If you use a SQL Tuning Set that has sensitive data to evaluate performance, it is beneficial to mask it for security, consistency of data with the database, and to generate correct evaluation results.</p>
</li>
<li>
<p>Select the <span class="bold">Capture Files</span> option, if desired, then select a capture directory.</p>
<p>When you select this option, the contents of the directory is masked. The capture file masking is executed consistently with the database.</p>
</li>
</ol>
</li>
<li>
<p>In the Detect SQL Plan Changes Due to Masking section, leave the Run SQL Performance Analyzer option unchecked.</p>
<p>You do not need to enable this option because the pre- and post-masking scripts you created, referenced in step <a href="#CHDIAFHI">2</a>, already execute the analyzer.</p>
</li>
<li>
<p>Provide credentials and scheduling information, then click <span class="bold">Submit</span>.</p>
<p>The Data Masking Definitions page reappears, and a message appears stating that the Data Masking job has been submitted successfully.</p>
<p>During masking of any database, the AWR bind variable data is purged to protect sensitive bind variables from leaking to a test system.</p>
</li>
<li>
<p>When the job completes successfully, click the link in the SQL Performance Analyzer Task column to view the executed analysis tasks and Trial Comparison Report, which shows any changes in plans, timing, and so forth.</p>
</li>
</ol>
</div>
<!-- class="sect2" -->
<a id="CEGBGDAJ"></a>
<div id="RATUG4065" class="sect2"><!-- infolevel="all" infotype="General" -->
<h3 class="sect2"><span class="secnum">16.7.2</span> Using Cloning and Masking for Evaluation</h3>
<p><a id="sthref537"></a>Using both cloning and masking to evaluate performance is very similar to the procedure described in the previous section, except that you specify the options from the Clone Database wizard, rather than from the Schedule Data Masking Job page.</p>
<p class="orderedlisttitle">To use both cloning and masking to evaluate performance:&nbsp;</p>
<ol>
<li>
<p>Follow the steps described in <a href="#CEGBFFDJ">"Cloning the Production Database"</a>.</p>
</li>
<li>
<p>At step <a href="#CHDBEDJI">4</a>, the format of the Database Configuration step appears different from the Schedule Data Masking Job page discussed in <a href="#CEGGBBFG">"Using Only Masking for Evaluation"</a>, but select options as you would for the Schedule Data Masking Job page.</p>
</li>
<li>
<p>Continue with the wizard steps to complete and submit the cloning and masking job.</p>
</li>
</ol>
</div>
<!-- class="sect2" --></div>
<!-- class="sect1" -->
<a id="CEGEDIAA"></a>
<div id="RATUG4066" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.8</span> Upgrade Considerations</h2>
<p><a id="sthref539"></a><a id="sthref540"></a>Consider the following points regarding upgrades:</p>
<ul>
<li>
<p>Importing a legacy (11.1 Grid Control) mask definition into 12.1 Cloud Control creates a shell ADM that becomes populated with the sensitive columns and their dependent column information from the legacy mask definition. The Application Data Model (ADM), and hence data masking, then remains in an unverified state, because it is missing the dictionary relationships.</p>
<p>For dictionary-defined relationships, you need to click on the ADM and perform a validation to bring in the referential relationships, whereupon it becomes valid. You can then continue masking with this ADM.</p>
<div class="infoboxnotealso">
<p class="notep1">Tip:</p>
For information on dependent columns, see <a href="#CEGIEDCA">"Adding Dependent Columns"</a>.</div>
</li>
<li>
<p>You can combine multiple upgraded ADMs by exporting an ADM and performing an Import Content into another ADM.</p>
</li>
<li>
<p>An upgraded ADM uses the same semantics as for importing a legacy mask definition (discussed above), in that you would need to perform a validation.</p>
</li>
<li>
<p>An 11.1 Grid Control E-Business Suite (EBS) masking definition based on an EBS masking template shipped from Oracle is treated as a custom application after the upgrade. You can always use the approach discussed in the second bulleted item above to move into a newly created EBS ADM with all of the metadata in place. However, this is not required.</p>
</li>
</ul>
</div>
<!-- class="sect1" -->
<a id="CEGEHAFE"></a>
<div id="RATUG4039" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.9</span> Using the Shuffle Format</h2>
<p><a id="sthref541"></a>A shuffle format is available that does not preserve data distribution when the column values are not unique and also when it is conditionally masked. For example, consider the Original Table (<a href="#DAFHCHJF">Table 16-1</a>) that shows two columns: EmpName and Salary. The Salary column has three distinct values: 10, 90, and 20.</p>
<div id="RATUG4040" class="tblruleformal">
<p class="titleintable"><a id="sthref542"></a><a id="DAFHCHJF"></a>Table 16-1 Original Table (Non-preservation)</p>
<table class="cellalignment1808" title="Original Table (Non-preservation)" summary="Original table - data distribution integrity non-preservation" dir="ltr">
<thead>
<tr class="cellalignment1799">
<th class="cellalignment1809" id="r1c1-t20">EmpName</th>
<th class="cellalignment1809" id="r1c2-t20">Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r2c1-t20" headers="r1c1-t20">
<p>A</p>
</td>
<td class="cellalignment1805" headers="r2c1-t20 r1c2-t20">
<p>10</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r3c1-t20" headers="r1c1-t20">
<p>B</p>
</td>
<td class="cellalignment1805" headers="r3c1-t20 r1c2-t20">
<p>90</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r4c1-t20" headers="r1c1-t20">
<p>C</p>
</td>
<td class="cellalignment1805" headers="r4c1-t20 r1c2-t20">
<p>10</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r5c1-t20" headers="r1c1-t20">
<p>D</p>
</td>
<td class="cellalignment1805" headers="r5c1-t20 r1c2-t20">
<p>10</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r6c1-t20" headers="r1c1-t20">
<p>E</p>
</td>
<td class="cellalignment1805" headers="r6c1-t20 r1c2-t20">
<p>90</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r7c1-t20" headers="r1c1-t20">
<p>F</p>
</td>
<td class="cellalignment1805" headers="r7c1-t20 r1c2-t20">
<p>20</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p>If you mask the Salary column with this format, each of the original values is replaced with one of the values from this set. Assume that the shuffle format replaces 10 with 20, 90 with 10, and 20 with 90 (<a href="#DAFIAGGE">Table 16-2</a>).</p>
<div id="RATUG4041" class="tblruleformal">
<p class="titleintable"><a id="sthref543"></a><a id="DAFIAGGE"></a>Table 16-2 Mapping Table (Non-preservation)</p>
<table class="cellalignment1808" title="Mapping Table (Non-preservation)" summary="Mapping table - data distribution integrity non-preservation" dir="ltr">
<thead>
<tr class="cellalignment1799">
<th class="cellalignment1809" id="r1c1-t21">EmpName</th>
<th class="cellalignment1809" id="r1c2-t21">Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r2c1-t21" headers="r1c1-t21">
<p>10</p>
</td>
<td class="cellalignment1805" headers="r2c1-t21 r1c2-t21">
<p>20</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r3c1-t21" headers="r1c1-t21">
<p>90</p>
</td>
<td class="cellalignment1805" headers="r3c1-t21 r1c2-t21">
<p>10</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r4c1-t21" headers="r1c1-t21">
<p>20</p>
</td>
<td class="cellalignment1805" headers="r4c1-t21 r1c2-t21">
<p>90</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p>The result is a shuffled Salary column as shown in the Masked Table (<a href="#DAFEEIJG">Table 16-3</a>), but the data distribution is changed. While the value 10 occurs three times in the Salary column of the Original Table, it occurs only twice in the Masked Table.</p>
<div id="RATUG4042" class="tblruleformal">
<p class="titleintable"><a id="sthref544"></a><a id="DAFEEIJG"></a>Table 16-3 Masked Table (Non-preservation)</p>
<table class="cellalignment1808" title="Masked Table (Non-preservation)" summary="Masked table - data distribution integrity non-preservation" dir="ltr">
<thead>
<tr class="cellalignment1799">
<th class="cellalignment1809" id="r1c1-t22">EmpName</th>
<th class="cellalignment1809" id="r1c2-t22">Salary</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r2c1-t22" headers="r1c1-t22">
<p>A</p>
</td>
<td class="cellalignment1805" headers="r2c1-t22 r1c2-t22">
<p>20</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r3c1-t22" headers="r1c1-t22">
<p>B</p>
</td>
<td class="cellalignment1805" headers="r3c1-t22 r1c2-t22">
<p>10</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r4c1-t22" headers="r1c1-t22">
<p>C</p>
</td>
<td class="cellalignment1805" headers="r4c1-t22 r1c2-t22">
<p>20</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r5c1-t22" headers="r1c1-t22">
<p>D</p>
</td>
<td class="cellalignment1805" headers="r5c1-t22 r1c2-t22">
<p>20</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r6c1-t22" headers="r1c1-t22">
<p>E</p>
</td>
<td class="cellalignment1805" headers="r6c1-t22 r1c2-t22">
<p>10</p>
</td>
</tr>
<tr class="cellalignment1799">
<td class="cellalignment1805" id="r7c1-t22" headers="r1c1-t22">
<p>F</p>
</td>
<td class="cellalignment1805" headers="r7c1-t22 r1c2-t22">
<p>90</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p>If the salary values had been unique, the format would have maintained data distribution.</p>
</div>
<!-- class="sect1" -->
<a id="CEGHJJDJ"></a>
<div id="RATUG4043" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1"><span class="secnum">16.10</span> Using Data Masking with LONG Columns</h2>
<p><a id="sthref545"></a>When data masking script generation completes, an impact report appears. If the masking definition has tables with columns of data type LONG, the following warning message is displayed in the impact report:</p>
<pre>
The table &lt;table_name&gt; has a LONG column. Data Masking uses "in-place" UPDATE to
mask tables with LONG columns. This will generate undo information and the
original data will be available in the undo tablespaces during the undo retention
period. You should purge undo information after masking the data. Any orphan rows
in this table will not be masked.
</pre></div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1798">
<tr>
<td class="cellalignment1805">
<table class="cellalignment1803">
<tr>
<td class="cellalignment1802"><a href="tdm_subsetting.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment1802"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2008, 2014,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment1807">
<table class="cellalignment1801">
<tr>
<td class="cellalignment1802"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment1802"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment1802"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment1802"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment1802"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment1802"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
