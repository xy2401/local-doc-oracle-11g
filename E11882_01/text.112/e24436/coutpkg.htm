<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>CTX_OUTPUT Package</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1071" />
<meta name="dcterms.created" content="2015-10-23T12:26:36Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Text Reference" />
<meta name="dcterms.identifier" content="E24436-05" />
<meta name="dcterms.isVersionOf" content="CCREF" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1998, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="cdocpkg.htm" title="Previous" type="text/html" />
<link rel="Next" href="cqrypkg.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e24436.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">14/29</span> <!-- End Header -->
<div id="CCREF0800" class="chapter"><a id="g998220"></a> <a id="i997145"></a>
<h1 class="chapter"><span class="secnum">9</span> CTX_OUTPUT Package</h1>
<p><a id="sthref1705"></a>This chapter provides reference information for using the <code dir="ltr">CTX_OUTPUT</code> PL/SQL package.</p>
<p><code dir="ltr">CTX_OUTPUT</code> contains the following stored procedures:</p>
<div class="inftblinformal">
<table class="cellalignment96" title="ctx_output procedures" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment90">
<th class="cellalignment97" id="r1c1-t2"><span class="bold">Name</span></th>
<th class="cellalignment97" id="r1c2-t2">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment90">
<td class="cellalignment98" id="r2c1-t2" headers="r1c1-t2"><a href="#CHDEEFAB">ADD_EVENT</a></td>
<td class="cellalignment98" headers="r2c1-t2 r1c2-t2">Adds an event to the index log.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r3c1-t2" headers="r1c1-t2"><a href="#CHDIHCED">ADD_TRACE</a></td>
<td class="cellalignment98" headers="r3c1-t2 r1c2-t2">Enables tracing.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r4c1-t2" headers="r1c1-t2"><a href="#CEGCDJAF">DISABLE_QUERY_STATS</a></td>
<td class="cellalignment98" headers="r4c1-t2 r1c2-t2">Turns off the gathering of query stats for the index.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r5c1-t2" headers="r1c1-t2"><a href="#CEGGFHDC">ENABLE_QUERY_STATS</a></td>
<td class="cellalignment98" headers="r5c1-t2 r1c2-t2">Enables gathering of query stats for the index.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r6c1-t2" headers="r1c1-t2"><a href="#i996924">END_LOG</a></td>
<td class="cellalignment98" headers="r6c1-t2 r1c2-t2">Halts logging of index and document services requests.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r7c1-t2" headers="r1c1-t2"><a href="#i996966">END_QUERY_LOG</a></td>
<td class="cellalignment98" headers="r7c1-t2 r1c2-t2">Stops logging queries into a logfile.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r8c1-t2" headers="r1c1-t2"><a href="#CHDJEHDI">GET_TRACE_VALUE</a></td>
<td class="cellalignment98" headers="r8c1-t2 r1c2-t2">Returns the value of a trace.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r9c1-t2" headers="r1c1-t2"><a href="#CHDJDEFJ">LOG_TRACES</a></td>
<td class="cellalignment98" headers="r9c1-t2 r1c2-t2">Prints traces to logfile.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r10c1-t2" headers="r1c1-t2"><a href="#BJFBFDFB">LOGFILENAME</a></td>
<td class="cellalignment98" headers="r10c1-t2 r1c2-t2">Returns the name of the current log file.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r11c1-t2" headers="r1c1-t2"><a href="#i996819">REMOVE_EVENT</a></td>
<td class="cellalignment98" headers="r11c1-t2 r1c2-t2">Removes an event from the index log.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r12c1-t2" headers="r1c1-t2"><a href="#CHDFCGGJ">REMOVE_TRACE</a></td>
<td class="cellalignment98" headers="r12c1-t2 r1c2-t2">Disables tracing.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r13c1-t2" headers="r1c1-t2"><a href="#CHDJHBGE">RESET_TRACE</a></td>
<td class="cellalignment98" headers="r13c1-t2 r1c2-t2">Clears a trace.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r14c1-t2" headers="r1c1-t2"><a href="#i996832">START_LOG</a></td>
<td class="cellalignment98" headers="r14c1-t2 r1c2-t2">Starts logging index and document service requests.</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r15c1-t2" headers="r1c1-t2"><a href="#i996990">START_QUERY_LOG</a></td>
<td class="cellalignment98" headers="r15c1-t2 r1c2-t2">Creates a log file of queries.</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<div class="refentry"><a id="CHDEEFAB"></a>
<div id="CCREF2124" class="refsect1">
<h2 class="refsect1">ADD_EVENT<a id="sthref1706"></a><a id="sthref1707"></a><a id="sthref1708"></a><a id="sthref1709"></a></h2>
<p>Use this procedure to add an event to the index log for more detailed log output or to enable error tracing for Oracle Text errors.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1710"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.ADD_EVENT(event in NUMBER, errnum in NUMBER := null);
</pre>
<dl>
<dt>event</dt>
<dd>
<p>Specify the type of index event to log. You can add the following events:</p>
<ul>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_INDEX_PRINT_ROWID</code>, which logs the rowid of each row after it is indexed. This is useful for debugging a failed index operation.</p>
</li>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_OPT_PRINT_TOKEN</code>, which prints each token as it is being optimized.</p>
</li>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_INDEX_PRINT_TOKEN</code>, which prints the each token as it is being indexed.</p>
</li>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_DRG_DUMP_ERRORSTACK</code>, which prints the stack trace for the specified DRG error in the log. An error will be raised if <code dir="ltr">errnum</code> is not specified.</p>
</li>
</ul>
</dd>
<dt>errnum</dt>
<dd>
<p>Specify the DRG error number for a <code dir="ltr">CTX_OUTPUT.EVENT_DRG_DUMP_ERRRORSTACK</code> event.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1711"></a>Example</p>
<pre dir="ltr">
begin
CTX_OUTPUT.ADD_EVENT(CTX_OUTPUT.EVENT_INDEX_PRINT_ROWID);
end;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1712"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#i996819">"REMOVE_EVENT"</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CHDIHCED"></a>
<div id="CCREF2125" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1">ADD_TRACE<a id="sthref1713"></a><a id="sthref1714"></a><a id="sthref1715"></a><a id="sthref1716"></a><a id="sthref1717"></a><a id="sthref1718"></a><a id="sthref1719"></a></h2>
<p>Use this procedure to enable a trace. If the trace has not been enabled, this call adds the trace to the list of active traces and resets its value to 0. If the trace has already been enabled, an error is raised.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1720"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.ADD_TRACE(trace_id BINARY_INTEGER);
</pre>
<dl>
<dt>trace_id</dt>
<dd>
<p>Specify the ID of the trace to enable. See <a href="#CHDCBEFB">Table 9-1</a> for possible trace values.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1721"></a>Notes</p>
<p><a id="sthref1722"></a><a id="sthref1723"></a><a id="sthref1724"></a><a href="#CHDCBEFB">Table 9-1</a> shows the available traces:</p>
<div id="CCREF23929" class="tblformal">
<p class="titleintable"><a id="sthref1725"></a><a id="CHDCBEFB"></a>Table 9-1 Available Traces</p>
<table class="cellalignment103" title="Available Traces" summary="This table is described in the preceding text" dir="ltr">
<thead>
<tr class="cellalignment90">
<th class="cellalignment97" id="r1c1-t4">Symbol</th>
<th class="cellalignment97" id="r1c2-t4">ID</th>
<th class="cellalignment97" id="r1c3-t4">Metric</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment90">
<td class="cellalignment98" id="r2c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_IDX_USER_DATASTORE</code></p>
</td>
<td class="cellalignment98" headers="r2c1-t4 r1c2-t4">
<p>1</p>
</td>
<td class="cellalignment98" headers="r2c1-t4 r1c3-t4">
<p>Time spent executing user datastore</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r3c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_IDX_AUTO_FILTER</code></p>
</td>
<td class="cellalignment98" headers="r3c1-t4 r1c2-t4">
<p>2</p>
</td>
<td class="cellalignment98" headers="r3c1-t4 r1c3-t4">
<p>Time spent invoking the <code dir="ltr">AUTO_FILTER</code> filter. (Replaces the deprecated <code dir="ltr">TRACE_IDX_INSO_FILTER</code> trace)</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r4c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_XX_TIME</code></p>
</td>
<td class="cellalignment98" headers="r4c1-t4 r1c2-t4">
<p>3</p>
</td>
<td class="cellalignment98" headers="r4c1-t4 r1c3-t4">
<p>Time spent executing the <code dir="ltr">$X</code> cursor</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r5c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_XF_TIME</code></p>
</td>
<td class="cellalignment98" headers="r5c1-t4 r1c2-t4">
<p>4</p>
</td>
<td class="cellalignment98" headers="r5c1-t4 r1c3-t4">
<p>Time spent fetching from <code dir="ltr">$X</code></p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r6c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_X_ROWS</code></p>
</td>
<td class="cellalignment98" headers="r6c1-t4 r1c2-t4">
<p>5</p>
</td>
<td class="cellalignment98" headers="r6c1-t4 r1c3-t4">
<p>Total number of rows whose token metadata was fetched from <code dir="ltr">$X</code></p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r7c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_IF_TIME</code></p>
</td>
<td class="cellalignment98" headers="r7c1-t4 r1c2-t4">
<p>6</p>
</td>
<td class="cellalignment98" headers="r7c1-t4 r1c3-t4">
<p>Time spent fetching the <code dir="ltr">LOB</code> locator from <code dir="ltr">$I</code></p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r8c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_IR_TIME</code></p>
</td>
<td class="cellalignment98" headers="r8c1-t4 r1c2-t4">
<p>7</p>
</td>
<td class="cellalignment98" headers="r8c1-t4 r1c3-t4">
<p>Time spent reading <code dir="ltr">$I</code> <code dir="ltr">LOB</code> information</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r9c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_I_ROWS</code></p>
</td>
<td class="cellalignment98" headers="r9c1-t4 r1c2-t4">
<p>8</p>
</td>
<td class="cellalignment98" headers="r9c1-t4 r1c3-t4">
<p>Number of rows whose <code dir="ltr">$I</code> <code dir="ltr">token_info</code> was actually read</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r10c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_I_SIZE</code></p>
</td>
<td class="cellalignment98" headers="r10c1-t4 r1c2-t4">
<p>9</p>
</td>
<td class="cellalignment98" headers="r10c1-t4 r1c3-t4">
<p>Number of bytes read from <code dir="ltr">$I</code> <code dir="ltr">LOB</code>s</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r11c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_R_TIME</code></p>
</td>
<td class="cellalignment98" headers="r11c1-t4 r1c2-t4">
<p>10</p>
</td>
<td class="cellalignment98" headers="r11c1-t4 r1c3-t4">
<p>Time spent fetching and reading <code dir="ltr">$R</code> information</p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r12c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_CON_TIME</code></p>
</td>
<td class="cellalignment98" headers="r12c1-t4 r1c2-t4">
<p>11</p>
</td>
<td class="cellalignment98" headers="r12c1-t4 r1c3-t4">
<p>Time spent in <code dir="ltr">CONTAINS</code> processing (<code dir="ltr">drexrcontains/drexrstart/drexrfetch)</code></p>
</td>
</tr>
<tr class="cellalignment90">
<td class="cellalignment98" id="r13c1-t4" headers="r1c1-t4">
<p><code dir="ltr">TRACE_QRY_S_TIME</code></p>
</td>
<td class="cellalignment98" headers="r13c1-t4 r1c2-t4">
<p>15</p>
</td>
<td class="cellalignment98" headers="r13c1-t4 r1c3-t4">
<p>Time spent fetching and reading <code dir="ltr">$S</code> information</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblformal" --></div>
<!-- class="refsubsect" -->
<p>Tracing is independent of logging. Logging does not have to be on to start tracing, and vice-versa.</p>
<p>Traces are associated with a session&mdash;they can measure operations that take place within a single session, and conversely, cannot make measurements across sessions.</p>
<p>During parallel sync or optimize, the trace profile will be copied to the slave sessions if and only if tracing is currently enabled. Each slave will accumulate its own traces and implicitly write all trace values to the slave logfile before termination.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1726"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFCGGJ">"REMOVE_TRACE"</a>, <a href="#CHDJEHDI">"GET_TRACE_VALUE"</a>, <a href="#CHDJDEFJ">"LOG_TRACES"</a>,and <a href="#CHDJHBGE">"RESET_TRACE"</a>, as well as <a class="olink CCAPP0500" href="../../text.112/e24435/aoptim.htm#CCAPP0500"><span class="italic">Oracle Text Application Developer's Guide</span></a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CEGCDJAF"></a>
<div id="CCREF2126" class="refsect1">
<h2 class="refsect1">DISABLE_QUERY_STATS<a id="sthref1727"></a><a id="sthref1728"></a><a id="sthref1729"></a></h2>
<p>Disables gathering of query stats for the index.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1730"></a>Syntax</p>
<pre dir="ltr">
ctx_output.disable_query_stats(
index_name IN VARCHAR2
);
</pre>
<dl>
<dt>index_name</dt>
<dd>
<p>The name of the index on which query stats collection is to be disabled.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1731"></a>Example</p>
<p>Turn off gathering of query stats for the index <code dir="ltr">myindex</code>.</p>
<pre dir="ltr">
CTX_OUTPUT.DISABLE_QUERY_STATS(myindex);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1732"></a>Notes</p>
<p>Once the query stats is disabled for an index, gathering and storing query-related metadata is stopped for that index. All the entries corresponding to that index are cleared from the dictionary tables. An error is returned if you call this procedure on an index where query stats is not enabled.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1733"></a>Related Topics</p>
<p>CTX_OUTPUT.<a href="#CEGGFHDC">ENABLE_QUERY_STATS</a>, and CTX_REPORT.<a href="crptpkg.htm#i996935">INDEX_STATS</a>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CEGGFHDC"></a>
<div id="CCREF2127" class="refsect1">
<h2 class="refsect1">ENABLE_QUERY_STATS<a id="sthref1734"></a><a id="sthref1735"></a><a id="sthref1736"></a></h2>
<p>Enables gathering of query stats for the index. To have query-related metadata stored for the index, use this procedure to enable collection of statistics on that index. You can only access the gathered metadata when <code dir="ltr">ctx_output.enable_query_stats</code> is turned on for the index.</p>
<div class="infobox-note">
<p class="notep1">Note:</p>
Accessing the query stats metadata only works when <code dir="ltr">ctx_output.enable_query_stats</code> is turned on for the index. Please see CTX_REPORT.<a href="crptpkg.htm#i996935">INDEX_STATS</a> for the list of gathered query stats metadata.</div>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1737"></a>Syntax</p>
<pre dir="ltr">
ctx_output.enable_query_stats(
index_name IN VARCHAR2
);
</pre>
<dl>
<dt>index_name</dt>
<dd>
<p>The name of the index on which query stats collection is to be enabled.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1738"></a>Example</p>
<p>Turn on gathering of query stats for the index <code dir="ltr">myindex</code>.</p>
<pre dir="ltr">
CTX_OUTPUT.ENABLE_QUERY_STATS(myindex);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1739"></a>Notes</p>
<p>The information that shows whether query stats is enabled on an index is available in the views: <code dir="ltr">CTX_INDEXES</code> and <code dir="ltr">CTX_USER_INDEXES</code> under the column <code dir="ltr">idx_query_stats_enabled</code>, which is in both of these views. If <code dir="ltr">query_stats</code> is enabled for an index, then the column displays YES; if not, then the column displays NO.</p>
<p>The data corresponding to the query statistics will be stored in persistent dictionary tables. Once <code dir="ltr">statistics</code> has been enabled for a particular index, query statistics will be collected for that index from all sessions.</p>
<p>If you call this procedure for an index where query stats is already enabled, then an error is thrown.</p>
<p>Statistics collection has a minimal effect on query performance.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1740"></a>Related Topics</p>
<p>CTX_OUTPUT.<a href="#CEGCDJAF">DISABLE_QUERY_STATS</a>, and CTX_REPORT.<a href="crptpkg.htm#i996935">INDEX_STATS</a>.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i996924"></a>
<div id="CCREF2128" class="refsect1">
<h2 class="refsect1">END_LOG<a id="sthref1741"></a><a id="sthref1742"></a><a id="sthref1743"></a><a id="sthref1744"></a></h2>
<p>This procedure halts logging index and document service requests.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1745"></a>Syntax</p>
<pre dir="ltr">
ctx_output.end_log;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1746"></a>Example</p>
<pre dir="ltr">
begin
CTX_OUTPUT.END_LOG;
end;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i996966"></a>
<div id="CCREF2129" class="refsect1">
<h2 class="refsect1">END_QUERY_LOG<a id="sthref1747"></a><a id="sthref1748"></a><a id="sthref1749"></a><a id="sthref1750"></a></h2>
<p>Use this procedure to stop logging queries into a logfile created with CTX_OUTPUT.<a href="#i996990">START_QUERY_LOG</a>.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1751"></a>Syntax</p>
<pre dir="ltr">
ctx_output.end_query_log;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1752"></a>Example</p>
<pre dir="ltr">
begin
</pre>
<pre dir="ltr">
CTX_OUTPUT.START_QUERY_LOG('mylog1');
     &lt; get queries &gt;
CTX_OUTPUT.END_QUERY_LOG;
</pre>
<pre dir="ltr">
end;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CHDJEHDI"></a>
<div id="CCREF2130" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1"><a id="sthref1753"></a><a id="sthref1754"></a><a id="sthref1755"></a><a id="sthref1756"></a><a id="sthref1757"></a>GET_TRACE_VALUE</h2>
<p>Use this procedure to programmatically retrieve the current value of a trace.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1758"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.GET_TRACE_VALUE(trace_id BINARY_INTEGER);
</pre>
<dl>
<dt>trace_id</dt>
<dd>
<p>Specify the trace ID whose value you want. See <a href="#CHDCBEFB">Table 9-1, "Available Traces"</a> for possible values.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1759"></a>Example</p>
<p>This sets the value of the variable <span class="variable">value</span>:</p>
<pre dir="ltr">
value := ctx_output.get_trace_value(trace_id);
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1760"></a>Notes</p>
<p>You can also retrieve trace values through SQL:</p>
<pre dir="ltr">
select * from ctx_trace_values;
</pre>
<p>See <a href="aviews.htm#BABDCEEF">"CTX_TRACE_VALUES"</a> for the entries in the <code dir="ltr">CTX_TRACE_VALUES</code> view.</p>
<p>If the trace has not been enabled, an error is raised.</p>
<p>Traces are not reset to 0 by this call.</p>
<p>Traces are associated with a session&mdash;they can measure operations that take place within a single session, and conversely, cannot make measurements across sessions.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1761"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFCGGJ">"REMOVE_TRACE"</a>, <a href="#CHDIHCED">"ADD_TRACE"</a>, <a href="#CHDJDEFJ">"LOG_TRACES"</a>,and <a href="#CHDJHBGE">"RESET_TRACE"</a>, as well as the <a class="olink CCAPP0500" href="../../text.112/e24435/aoptim.htm#CCAPP0500"><span class="italic">Oracle Text Application Developer's Guide</span></a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CHDJDEFJ"></a>
<div id="CCREF2131" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1"><a id="sthref1762"></a><a id="sthref1763"></a><a id="sthref1764"></a><a id="sthref1765"></a><a id="sthref1766"></a>LOG_TRACES</h2>
<p>Use this procedure to print all active traces to the logfile.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1767"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.LOG_TRACES;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1768"></a>Notes</p>
<p>If logging has not been started, an error is raised.</p>
<p>Traces are not reset to 0 by this call.</p>
<p>This procedure looks for the logfile in the directory specified by the <code dir="ltr">LOG_DIRECTORY</code> system parameter, which is <code dir="ltr">$ORACLE_HOME/ctx/log</code> on UNIX. You can query the <code dir="ltr">CTX_PARAMETERS</code> view to find the current setting.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1769"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFCGGJ">"REMOVE_TRACE"</a>, <a href="#CHDJEHDI">"GET_TRACE_VALUE"</a>, <a href="#CHDIHCED">"ADD_TRACE"</a>, and <a href="#CHDJHBGE">"RESET_TRACE"</a>, as well as the <a class="olink CCAPP0500" href="../../text.112/e24435/aoptim.htm#CCAPP0500"><span class="italic">Oracle Text Application Developer's Guide</span></a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="BJFBFDFB"></a>
<div id="CCREF2132" class="refsect1">
<h2 class="refsect1">LOGFILENAME<a id="sthref1770"></a><a id="sthref1771"></a><a id="sthref1772"></a><a id="sthref1773"></a></h2>
<p>Returns the filename for the current log. This procedure looks for the logfile in the directory specified by the <code dir="ltr">LOG_DIRECTORY</code> system parameter, which is <code dir="ltr">$ORACLE_HOME/ctx/log</code> on UNIX. You can query the <code dir="ltr">CTX_PARAMETERS</code> view to find the current setting.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1774"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.LOGFILENAME RETURN VARCHAR2;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1775"></a>Returns</p>
<p>Log file name.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1776"></a>Example</p>
<pre dir="ltr">
declare
   logname varchar2(100);
begin
   logname := CTX_OUTPUT.LOGFILENAME;
   dbms_output.put_line('The current log file is: '||logname); 
end;
</pre></div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i996819"></a>
<div id="CCREF2133" class="refsect1">
<h2 class="refsect1">REMOVE_EVENT<a id="sthref1777"></a><a id="sthref1778"></a><a id="sthref1779"></a></h2>
<p>Use this procedure to remove an event from the index log.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1780"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.REMOVE_EVENT(event in NUMBER);
</pre>
<dl>
<dt>event</dt>
<dd>
<p>Specify the type of index event to remove from the log. You can remove the following events:</p>
<ul>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_INDEX_PRINT_ROWID</code>, which logs the rowid of each row after it is indexed. This is useful for debugging a failed index operation.</p>
</li>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_OPT_PRINT_TOKEN</code>, which prints each token as it is being optimized.</p>
</li>
<li>
<p><code dir="ltr">CTX_OUTPUT.EVENT_INDEX_PRINT_TOKEN</code>, which prints the each token as it is being indexed.</p>
</li>
</ul>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1781"></a>Example</p>
<pre dir="ltr">
begin
</pre>
<pre dir="ltr">
CTX_OUTPUT.REMOVE_EVENT(CTX_OUTPUT.EVENT_INDEX_PRINT_ROWID);
</pre>
<pre dir="ltr">
end;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1782"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDEEFAB">"ADD_EVENT"</a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CHDFCGGJ"></a>
<div id="CCREF2134" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1"><a id="sthref1783"></a><a id="sthref1784"></a><a id="sthref1785"></a><a id="sthref1786"></a><a id="sthref1787"></a>REMOVE_TRACE</h2>
<p>Use this procedure to disable a trace.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1788"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.REMOVE_TRACE(trace_id BINARY_INTEGER);
</pre>
<dl>
<dt>trace_id</dt>
<dd>
<p>Specify the ID of the trace to disable. See <a href="#CHDCBEFB">Table 9-1, "Available Traces"</a> for possible values.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1789"></a>Notes</p>
<p>If the trace has not been enabled, an error is raised.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1790"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDJEHDI">"GET_TRACE_VALUE"</a>, <a href="#CHDIHCED">"ADD_TRACE"</a>, <a href="#CHDJDEFJ">"LOG_TRACES"</a>,and <a href="#CHDJHBGE">"RESET_TRACE"</a>, as well as the <a class="olink CCAPP0500" href="../../text.112/e24435/aoptim.htm#CCAPP0500"><span class="italic">Oracle Text Application Developer's Guide</span></a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="CHDJHBGE"></a>
<div id="CCREF2135" class="refsect1"><!-- infolevel="all" infotype="General" -->
<h2 class="refsect1"><a id="sthref1791"></a><a id="sthref1792"></a><a id="sthref1793"></a><a id="sthref1794"></a><a id="sthref1795"></a>RESET_TRACE</h2>
<p>Use this procedure to clear a trace (that is, reset it to 0).</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1796"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.RESET_TRACE(trace_id BINARY_INTEGER);
</pre>
<dl>
<dt>trace_id</dt>
<dd>
<p>Specify the ID of the trace to reset. See <a href="#CHDCBEFB">Table 9-1, "Available Traces"</a> for possible values.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1797"></a>Notes</p>
<p>If the trace has not been enabled, an error is raised.</p>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1798"></a>Related Topics</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<a href="#CHDFCGGJ">"REMOVE_TRACE"</a>, <a href="#CHDJEHDI">"GET_TRACE_VALUE"</a>, <a href="#CHDIHCED">"ADD_TRACE"</a>, <a href="#CHDJDEFJ">"LOG_TRACES"</a>, as well as the <a class="olink CCAPP0500" href="../../text.112/e24435/aoptim.htm#CCAPP0500"><span class="italic">Oracle Text Application Developer's Guide</span></a></div>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i996832"></a>
<div id="CCREF2136" class="refsect1">
<h2 class="refsect1">START_LOG<a id="sthref1799"></a><a id="sthref1800"></a><a id="sthref1801"></a><a id="sthref1802"></a><a id="sthref1803"></a></h2>
<p>Begin logging index and document service requests.</p>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1804"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.START_LOG(logfile in varchar2, overwrite in default true);
</pre>
<dl>
<dt>logfile</dt>
<dd>
<p>Specify the name of the log file. The log is stored in the directory specified by the system parameter <code dir="ltr">LOG_DIRECTORY</code>.</p>
</dd>
<dt>overwrite</dt>
<dd>
<p>Specify whether you want to overwrite or append to the original query log file specified by <span class="italic">logfile</span>, if it already exists. The default is to overwrite the original query log file.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1805"></a>Example</p>
<pre dir="ltr">
begin
CTX_OUTPUT.START_LOG('mylog1');
end;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1806"></a>Notes</p>
<p>Logging is independent of tracing. Logging does not have to be on to start tracing, and vice-versa.</p>
<p>Logging is associated with a session&mdash;it can log operations that take place within a single session, and, conversely, cannot make measurements across sessions.</p>
<p>Filenames used in <code dir="ltr">CTX_OUTPUT.START_LOG</code> are restricted to the following characters: alphanumeric, minus, period, space, hash, underscore, single and double quotes. Any other character in the filename will raise an error.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" -->
<a id="i996990"></a>
<div id="CCREF2137" class="refsect1">
<h2 class="refsect1">START_QUERY_LOG</h2>
<p>Begin logging query requests into a query log file.</p>
<p>Use <code dir="ltr">CTX_OUTPUT.END_QUERY_LOG</code> to stop logging queries. Use <code dir="ltr">CTX_REPORT.QUERY_LOG_SUMMARY</code> to obtain reports on logged queries, such as which queries returned successfully the most times.</p>
<p>The query log includes the query string, the index name, and the timestamp of the query, as well as whether or not the query successfully returned a hit. A successful query for the phrase <span class="italic">Blues Guitarists</span> made at 6:46 (local time) on November 11th, 2003, would be entered into the query log in this form:</p>
<pre dir="ltr">
&lt;QuerySet&gt;&lt;TimeStamp&gt;18:46:51 02/04/03&lt;/TimeStamp&gt;&lt;IndexName&gt;
IDX_SEARCH_TABLE&lt;/IndexName&gt;&lt;Query&gt;Blues
Guitarists&lt;/Query&gt;&lt;ReturnHit&gt;Yes&lt;/ReturnHit&gt;&lt;/QuerySet&gt;
</pre>
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1807"></a>Syntax</p>
<pre dir="ltr">
CTX_OUTPUT.START_QUERY_LOG(logfile in varchar2, overwrite in default true);
</pre>
<dl>
<dt>logfile</dt>
<dd>
<p>Specify the name of the query log file. The query log is stored in the directory specified by the system parameter <code dir="ltr">LOG_DIRECTORY</code>.</p>
</dd>
<dt>overwrite</dt>
<dd>
<p>Specify whether you want to overwrite or append to the original query log file specified by <span class="italic">logfile</span>, if it already exists. The default is to overwrite the original query log file.</p>
</dd>
</dl>
</div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1808"></a>Example</p>
<pre dir="ltr">
begin
</pre>
<pre dir="ltr">
CTX_OUTPUT.START_QUERY_LOG('mylog1');
     &lt; get queries &gt;
CTX_OUTPUT.END_QUERY_LOG;
</pre>
<pre dir="ltr">
end;
</pre></div>
<!-- class="refsubsect" -->
<div class="refsubsect">
<p class="titleinrefsubsect"><a id="sthref1809"></a>Notes</p>
<p>Filenames used in <code dir="ltr">CTX_OUTPUT.START_QUERY_LOG</code> are restricted to the following characters: alphanumeric, minus, period, space, hash, underscore, single and double quotes. Any other character in the filename will raise an error.</p>
<p>Logging is associated with a session&mdash;it can log operations that take place within a single session, and, conversely, cannot make measurements across sessions.</p>
</div>
<!-- class="refsubsect" --></div>
<!-- class="refsect1" --></div>
<!-- class="refentry" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment89">
<tr>
<td class="cellalignment98">
<table class="cellalignment94">
<tr>
<td class="cellalignment93"><a href="cdocpkg.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment93"><a href="cqrypkg.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1998, 2015,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment100">
<table class="cellalignment92">
<tr>
<td class="cellalignment93"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment93"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment93"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment93"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment93"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment93"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
