<!DOCTYPE html>
<html lang="en" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>OracleAQQueue Class</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-07-18T19:24:40Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Data Provider for .NET Developer's Guide" />
<meta name="dcterms.identifier" content="E23174-03" />
<meta name="dcterms.isVersionOf" content="ODPNT" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2002, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="OracleAQMessageAvailableEventHandlerDelegate.htm" title="Previous" type="text/html" />
<link rel="Next" href="OracleAQDequeueModeEnumeration.htm" title="Next" type="text/html" />
<link rel="alternate" href="../e23174.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../../dcommon/css/fonts.css">
<link rel="stylesheet" href="../../dcommon/css/foundation.css">
<link rel="stylesheet" href="../../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../../nav/css/html5.css">
<link rel="stylesheet" href="../../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">106/158</span> <!-- End Header --><a id="CHDGCJBB"></a>
<hr />
<div id="ODPNT3510" class="refsect1">
<h1 class="refsect1">OracleAQQue<a id="sthref1192"></a>ue Class</h1>
<p>An <code>OracleAQQueue</code> object represents a queue.</p>
<p class="subhead2"><a id="ODPNT3511"></a>Class Inheritance</p>
<p><code>System.Object</code></p>
<p><code>&nbsp;&nbsp;OracleAQQueue</code></p>
<p class="subhead2"><a id="ODPNT3512"></a>Declaration</p>
<pre>
// C#
public class OracleAQQueue : IDisposable
</pre>
<p class="subhead2"><a id="ODPNT3513"></a>Thread Safety</p>
<p>All public static methods are thread-safe, although instance methods do not guarantee thread safety.</p>
<p class="subhead2"><a id="ODPNT3514"></a>Remarks</p>
<p>A queue is a repository of messages and may either be a user queue, or an exception queue. A user queue is for normal message processing. A message is moved from a user queue to an exception queue if it cannot be retrieved and processed for some reason.</p>
<p class="subhead2"><a id="ODPNT3515"></a>Requirements</p>
<p>Namespace: <code>Oracle.DataAccess.Client</code></p>
<p>Assembly: <code>Oracle.DataAccess.dll</code></p>
<p>ODP.NET Version: ODP.NET for .NET Framework 2.0 or ODP.NET for .NET Framework 4</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
<li>
<p><a href="#CHDHBJJC">OracleAQQueue Constructors</a></p>
</li>
<li>
<p><a href="#CHDFAJJA">OracleAQQueue Static Methods</a></p>
</li>
<li>
<p><a href="#CHDHAIBB">OracleAQQueue Properties</a></p>
</li>
<li>
<p><a href="#CHDJIIJB">OracleAQQueue Public Methods</a></p>
</li>
<li>
<p><a href="#CHDDJBGC">OracleAQQueue Events</a></p>
</li>
</ul>
</div>
<div id="ODPNT3516" class="refsect2"><a id="CHDHIJGD"></a>
<hr />
<h2 class="refsect2">OracleAQQueue <a id="sthref1193"></a>Members</h2>
<p><code>OracleAQQueue</code> members are listed in the following tables.</p>
<p class="subhead1"><a id="ODPNT3517"></a>OracleAQQueue Constructors</p>
<p><code>OracleAQQueue</code> constructors are listed in <a href="#CHDCHGEB">Table 12-19</a>.</p>
<div id="ODPNT3518" class="tblruleformal">
<p class="titleintable"><a id="sthref1194"></a><a id="CHDCHGEB"></a>Table 12-19 OracleAQQueue Constructors</p>
<table class="cellalignment2342" title="OracleAQQueue Constructors" summary="Rows are constructors, first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t92">Constructor</th>
<th class="cellalignment2343" id="r1c2-t92">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t92" headers="r1c1-t92">
<p><a href="#CHDHBJJC">OracleAQQueue Constructors</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t92 r1c2-t92">
<p>Instantiate a new instance of the <code>OracleAQQueue</code> class (Overloaded).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p class="subhead1"><a id="ODPNT3519"></a>OracleAQQueue Static Methods</p>
<p>The <code>OracleAQQueue</code> static method is listed in <a href="#CHDIAIBI">Table 12-20</a>.</p>
<div id="ODPNT3520" class="tblruleformal">
<p class="titleintable"><a id="sthref1195"></a><a id="CHDIAIBI"></a>Table 12-20 OracleAQQueue Static Methods</p>
<table class="cellalignment2342" title="OracleAQQueue Static Methods " summary="Rows are public methods. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t93">Static Method</th>
<th class="cellalignment2343" id="r1c2-t93">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t93" headers="r1c1-t93">
<p><a href="#CHDJHFID">Listen</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t93 r1c2-t93">
<p>Listens for messages on one or more queues for one or more consumers, as specified in the array of <code>OracleAQAgent</code> objects (Overloaded).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p class="subhead1"><a id="ODPNT3521"></a>OracleAQQueue Properties</p>
<p><code>OracleAQQueue</code> properties are listed in <a href="#CHDIHBBI">Table 12-21</a>.</p>
<div id="ODPNT3522" class="tblruleformal">
<p class="titleintable"><a id="sthref1196"></a><a id="CHDIHBBI"></a>Table 12-21 OracleAQQueue Properties</p>
<table class="cellalignment2342" title="OracleAQQueue Properties " summary="Rows are properties. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t94">Property</th>
<th class="cellalignment2343" id="r1c2-t94">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t94" headers="r1c1-t94">
<p><a href="#CHDCIHEJ">Connection</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t94 r1c2-t94">
<p>Specifies the <code>OracleConnection</code> object associated with the queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r3c1-t94" headers="r1c1-t94">
<p><a href="#CHDDDCJD">DequeueOptions</a></p>
</td>
<td class="cellalignment2339" headers="r3c1-t94 r1c2-t94">
<p>Specifies the dequeueing options to use when dequeuing a message from a queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r4c1-t94" headers="r1c1-t94">
<p><a href="#CHDIEJAG">EnqueueOptions</a></p>
</td>
<td class="cellalignment2339" headers="r4c1-t94 r1c2-t94">
<p>Specifies the enqueueing options used to enqueue a message to a queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r5c1-t94" headers="r1c1-t94">
<p><a href="#CHDDBFBB">MessageType</a></p>
</td>
<td class="cellalignment2339" headers="r5c1-t94 r1c2-t94">
<p>Specifies the type of queue table associated with this queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r6c1-t94" headers="r1c1-t94">
<p><a href="#CHDDGDHH">Name</a></p>
</td>
<td class="cellalignment2339" headers="r6c1-t94 r1c2-t94">
<p>Returns the name of the queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r7c1-t94" headers="r1c1-t94">
<p><a href="#CHDHBDDJ">Notification</a></p>
</td>
<td class="cellalignment2339" headers="r7c1-t94 r1c2-t94">
<p>Specifies the various notification options for notifications that are registered using the <code>MessageAvailable</code> event.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r8c1-t94" headers="r1c1-t94">
<p><a href="#CHDDFBFB">NotificationConsumers</a></p>
</td>
<td class="cellalignment2339" headers="r8c1-t94 r1c2-t94">
<p>Specifies the array of consumers, for a multiconsumer queue, that are to be notified asynchronously for any incoming messages on the queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r9c1-t94" headers="r1c1-t94">
<p><a href="#CHDJDCBJ">UdtTypeName</a></p>
</td>
<td class="cellalignment2339" headers="r9c1-t94 r1c2-t94">
<p>Specifies the type name on which the queue and the corresponding queue table is based if the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p class="subhead1"><a id="ODPNT3523"></a>OracleAQQueue Public Methods</p>
<p>The <code>OracleAQQueue</code> public methods are listed in <a href="#CHDBGEGI">Table 12-22</a>.</p>
<div id="ODPNT3524" class="tblruleformal">
<p class="titleintable"><a id="sthref1197"></a><a id="CHDBGEGI"></a>Table 12-22 OracleAQQueue Public Methods</p>
<table class="cellalignment2342" title="OracleAQQueue Public Methods " summary="Rows are public methods. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t95">Public Method</th>
<th class="cellalignment2343" id="r1c2-t95">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t95" headers="r1c1-t95">
<p><a href="#CHDHIHHD">Dequeue</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t95 r1c2-t95">
<p>Dequeues messages from queues (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r3c1-t95" headers="r1c1-t95">
<p><a href="#CHDBIBBF">DequeueArray</a></p>
</td>
<td class="cellalignment2339" headers="r3c1-t95 r1c2-t95">
<p>Dequeues multiple messages from queues (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r4c1-t95" headers="r1c1-t95">
<p><a href="#CHDIFJEE">Dispose</a></p>
</td>
<td class="cellalignment2339" headers="r4c1-t95 r1c2-t95">
<p>Releases any resources or memory allocated by the object</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r5c1-t95" headers="r1c1-t95">
<p><a href="#CHDJEAEA">Enqueue</a></p>
</td>
<td class="cellalignment2339" headers="r5c1-t95 r1c2-t95">
<p>Enqueues messages to queues (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r6c1-t95" headers="r1c1-t95">
<p><a href="#CHDJAGIH">EnqueueArray</a></p>
</td>
<td class="cellalignment2339" headers="r6c1-t95 r1c2-t95">
<p>Enqueues multiple messages to a queue (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r7c1-t95" headers="r1c1-t95">
<p><a href="#CHDBFFIG">Listen</a></p>
</td>
<td class="cellalignment2339" headers="r7c1-t95 r1c2-t95">
<p>Listens for messages on the queue on behalf of <code>listenConsumers</code> (Overloaded).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p class="subhead1"><a id="ODPNT3525"></a>OracleAQQueue Events</p>
<p>The <code>OracleAQQueue</code> event is listed in <a href="#CHDIADFI">Table 12-23</a>.</p>
<div id="ODPNT3526" class="tblruleformal">
<p class="titleintable"><a id="sthref1198"></a><a id="CHDIADFI"></a>Table 12-23 OracleAQQueue Events</p>
<table class="cellalignment2342" title="OracleAQQueue Events " summary="Rows are properties. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t96">Event Name</th>
<th class="cellalignment2343" id="r1c2-t96">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t96" headers="r1c1-t96">
<p><a href="#CHDFICAF">MessageAvailable Event</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t96 r1c2-t96">
<p>Notifies when a message is available in the queue for <code>NotificationConsumers</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect2" -->
<div id="ODPNT3527" class="refsect2"><a id="CHDHBJJC"></a>
<hr />
<h2 class="refsect2">OracleAQQueue Con<a id="sthref1199"></a><a id="sthref1200"></a>structors</h2>
<p><code>OracleAQQueue</code> constructors create new instances of the <code>OracleAQQueue</code> class.</p>
<p class="subhead2"><a id="ODPNT3528"></a>Overload List:</p>
<ul>
<li>
<p><a href="#CHDJCIAJ">OracleAQQueue(string)</a></p>
<p>This constructor takes a queue name to initialize a queue object.</p>
</li>
<li>
<p><a href="#CHDIJCBC">OracleAQQueue(string, OracleConnection)</a></p>
<p>This constructor takes a queue name and connection to initialize a queue object. The connection does not need be open during the queue object construction.</p>
</li>
<li>
<p><a href="#CHDFBDAE">OracleAQQueue(string, OracleConnection, OracleAQMessageType)</a></p>
<p>This constructor takes a queue name, connection, and message type enumeration to initialize a queue object.</p>
</li>
<li>
<p><a href="#CHDHEHAI">OracleAQQueue(string, OracleConnection, OracleAQMessageType, string)</a></p>
<p>This constructor takes a queue name, connection, message type enumeration, and UDT type name to initialize a queue object.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
<div id="ODPNT3529" class="refsect3"><a id="CHDJCIAJ"></a><a id="Toc201568252"></a>
<h3 class="refsect3">OracleAQQueue(string)</h3>
<p>This constructor takes a queue name to initialize a queue object.</p>
<p class="subhead2"><a id="ODPNT3530"></a>Declaration</p>
<pre>
// C#
public OracleAQQueue(string <span class="italic">name</span>);
</pre>
<p class="subhead2"><a id="ODPNT3531"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">name</span></code></p>
<p>The name of the queue as specified in the database.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3532"></a>Exceptions</p>
<p><code>ArgumentNullException</code> - The queue name is <code>null</code>.</p>
<p><code>ArgumentException</code> - The queue name is empty.</p>
<p class="subhead2"><a id="ODPNT3533"></a>Remarks</p>
<p>The operation of creating an <code>OracleAQQueue</code> object does not involve checking for the existence of the queue in the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3534" class="refsect3"><a id="CHDIJCBC"></a><a id="Toc201568253"></a>
<h3 class="refsect3">OracleAQQueue(string, OracleConnection)</h3>
<p>This constructor takes a queue name and connection to initialize a queue object. The connection does not need to be open during the queue object construction.</p>
<p class="subhead2"><a id="ODPNT3535"></a>Declaration</p>
<pre>
// C#
public OracleAQQueue(string <span class="italic">name</span>, OracleConnection <span class="italic">con</span>);
</pre>
<p class="subhead2"><a id="ODPNT3536"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">name</span></code></p>
<p>Name of the queue as specified in the database.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">con</span></code></p>
<p>An <code>OracleConnection</code> object that connects to the queue.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3537"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentNullException</code> - Either the connection is null or queue name is <code>null</code>.</p>
<p><code>ArgumentException</code> - Queue name is empty.</p>
<p class="subhead2"><a id="ODPNT3538"></a>Remarks</p>
<p>The connection can be accessed using the <code>Connection</code> property, and it must be opened before calling any operational APIs such as <code>Enqueue</code> and <code>Dequeue</code>.</p>
<p>Creating an <code>OracleAQQueue</code> object does not check for the existence of the queue in the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3539" class="refsect3"><a id="CHDFBDAE"></a><a id="Toc202173856"></a>
<h3 class="refsect3">OracleAQQueue(string, OracleConnection, OracleAQMessageType)</h3>
<p>This constructor takes a queue name, connection and message type enumeration to initialize a queue object. The connection does not need to be open during the queue object construction.</p>
<p class="subhead2"><a id="ODPNT3540"></a>Declaration</p>
<pre>
// C#
public OracleAQQueue(string <span class="italic">name</span>, OracleConnection <span class="italic">con</span>, OracleAQMessageType
  <span class="italic">messageType</span>);
</pre>
<p class="subhead2"><a id="ODPNT3541"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">name</span></code></p>
<p>The name of the queue as specified in the database.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">con</span></code></p>
<p>An <code>OracleConnection</code> object that is used to connect to the queue.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">messageType</span></code></p>
<p>An <code><span class="codeinlineitalic">OracleAQMessageType</span></code> enumeration specifying the type of the message that is enqueued or dequeued from this queue.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3542"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentNullException</code> - Either the connection is <code>null</code> or queue name is <code>null</code>.</p>
<p><code>ArgumentException</code> - Queue name is empty or the specified message type is not valid.</p>
<p class="subhead2"><a id="ODPNT3543"></a>Remarks</p>
<p>Creating an <code>OracleAQQueue</code> object does not check for the existence of the queue in the database.</p>
<p>You need to set the <code>UdtTypeName</code> property before using the queue object if the <code>messageType</code> is a UDT. Another approach is to create a queue using the other constructor overload by supplying the <code>udtTypeName</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3544" class="refsect3"><a id="CHDHEHAI"></a><a id="Toc202173857"></a>
<h3 class="refsect3">OracleAQQueue(string, OracleConnection, OracleAQMessageType, string)</h3>
<p>This constructor takes a queue name, connection, message type enumeration, and UDT type name to initialize a queue object. The connection does not need to be open during the queue object construction.</p>
<p class="subhead2"><a id="ODPNT3545"></a>Declaration</p>
<pre>
// C#
public OracleAQQueue(string <span class="italic">name</span>, OracleConnection <span class="italic">con</span>, OracleAQMessageType
  <span class="italic">messageType</span>, string <span class="italic">udtTypeName</span>);
</pre>
<p class="subhead2"><a id="ODPNT3546"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">name</span></code></p>
<p>The name of the queue as specified in the database.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">con</span></code></p>
<p>An <code>OracleConnection</code> object that is used to connect to the queue.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">messageType</span></code></p>
<p>An <code>OracleAQMessageType</code> enumeration specifying the type of the message that is enqueued or dequeued from this queue.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">udtTypeName</span></code></p>
<p>The name of the database object type used if the <code>messageType</code> is UDT. The <code><span class="codeinlineitalic">udtTypeName</span></code> parameter represents the type on which the queue is based.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3547"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentNullException</code> - The connection is <code>null</code> or the queue name is <code>null</code>.</p>
<p><code>ArgumentException</code> - The queue name is empty or the specified <code>messageType</code> is not valid.</p>
<p class="subhead2"><a id="ODPNT3548"></a>Remarks</p>
<p>Creating an <code>OracleAQQueue</code> object does not check for the existence of the queue in the database.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ODPNT3549" class="refsect2"><a id="CHDFAJJA"></a>
<hr />
<h2 class="refsect2">OracleAQQueue Static Methods</h2>
<p><code>OracleAQQueue</code> static methods are listed in <a href="#CHDBIFDB">Table 12-24</a>.</p>
<div id="ODPNT3550" class="tblruleformal">
<p class="titleintable"><a id="sthref1201"></a><a id="CHDBIFDB"></a>Table 12-24 OracleAQQueue Static Methods</p>
<table class="cellalignment2342" title="OracleAQQueue Static Methods " summary="Rows are public methods. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t103">Static Method</th>
<th class="cellalignment2343" id="r1c2-t103">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t103" headers="r1c1-t103">
<p><a href="#CHDJHFID">Listen</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t103 r1c2-t103">
<p>Listens for messages on one or more queues for one or more consumers, as specified in the array of <code>OracleAQAgent</code> objects (Overloaded).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
<div id="ODPNT3551" class="refsect3"><a id="CHDJHFID"></a>
<h3 class="refsect3">Listen</h3>
<p><code>Listen</code> methods listen for messages on one or more queues for one or more consumers as specified in the array of <code>OracleAQAgent</code> objects.</p>
<p class="subhead2"><a id="ODPNT3552"></a>Overload list</p>
<ul>
<li>
<p><a href="#CHDBCFCF">Listen(OracleConnection, OracleAQAgent[ ])</a></p>
<p>This static method listens for messages on one or more queues for one or more consumers as specified in the array of <code>OracleAQAgent</code> objects.</p>
</li>
<li>
<p><a href="#CHDBFIGF">Listen(OracleConnection, OracleAQAgent[ ], int)</a></p>
<p>This static method listens for messages on one or more queues for one or more consumers as specified in the array of <code>OracleAQAgent</code> objects. It also specifies a wait time.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3553" class="refsect3"><a id="CHDBCFCF"></a><a id="Toc201568273"></a>
<h3 class="refsect3">Listen(OracleConnection, OracleAQAgent[ ])</h3>
<p>This static method listens for messages on one or more queues for one or more consumers as specified in the array of <code>OracleAQAgent</code> objects.</p>
<p class="subhead2"><a id="ODPNT3554"></a>Declaration</p>
<pre>
// C#
public static OracleAQAgent Listen(OracleConnection <span class="italic">con</span>, OracleAQAgent[]
  <span class="italic">listenConsumers</span>);
</pre>
<p class="subhead2"><a id="ODPNT3555"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">con</span></code></p>
<p>An <code>OracleConnection</code> instance.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">listenConsumers</span></code></p>
<p>The array of consumers being listened for. The name of the <code>OracleAQAgent</code> object must be <code>null</code> or empty for single consumer queues.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3556"></a>Return Value</p>
<p>An <code>OracleAQAgent</code> object.</p>
<p class="subhead2"><a id="ODPNT3557"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentNullException</code> - The <code><span class="codeinlineitalic">con</span></code> or <code><span class="codeinlineitalic">listenConsumers</span></code> parameter is null.</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p class="subhead2"><a id="ODPNT3558"></a>Remarks</p>
<p><code>Listen</code> is useful in situations where one needs to monitor multiple queues until a message is available for a consumer in one of the queues. The <code>Name</code> property of the <code>OracleAQAgent</code> object represents the name of the consumer and the <code>Address</code> property represents the name of the queue.</p>
<p>This call blocks the calling thread until there is a message ready for consumption for a consumer in the list. It returns an <code>OracleAQAgent</code> object which specifies the consumer and queue for which a message is ready to be dequeued.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3559" class="refsect3"><a id="CHDBFIGF"></a><a id="Toc201568274"></a>
<h3 class="refsect3">Listen(OracleConnection, OracleAQAgent[ ], int)</h3>
<p>This static method listens for messages on one or more queues for one or more consumers as specified in the array of <code>OracleAQAgent</code> objects. The <code>Name</code> property of the <code>OracleAQAgent</code> object represents the name of the consumer and the <code>Address</code> property of the <code>OracleAQAgent</code> object represents the name of the queue.</p>
<p>In case of timeout, this method returns <code>null</code>.</p>
<p class="subhead2"><a id="ODPNT3560"></a>Declaration</p>
<pre>
// C#
public static OracleAQAgent Listen(OracleConnection <span class="italic">con</span>, OracleAQAgent[]
  <span class="italic">listenConsumers</span>, int <span class="italic">waitTime</span>);
</pre>
<p class="subhead2"><a id="ODPNT3561"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">con</span></code></p>
<p>An <code>OracleConnection</code> instance.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">listenConsumers</span></code></p>
<p>The array of consumers being listened for. The name of the <code>OracleAQAgent</code> object must be <code>null</code> or empty for single consumer queues.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">waitTime</span></code></p>
<p>Wait time in seconds.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3562"></a>Return Value</p>
<p>An <code>OracleAQAgent</code> object.</p>
<p class="subhead2"><a id="ODPNT3563"></a>Exceptions</p>
<p><code>ArgumentNullException</code> - The <code><span class="codeinlineitalic">con</span></code> or <code><span class="codeinlineitalic">listenConsumers</span></code> parameter is null.</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ArgumentException</code> - <code>waitTime</code> is less than -1.</p>
<p class="subhead2"><a id="ODPNT3564"></a>Remarks</p>
<p><code>Listen</code> is useful in situations where one needs to monitor multiple queues until a message is available for a consumer in one of the queues. The <code>Name</code> property of the <code>OracleAQAgent</code> object represents the name of the consumer and the <code>Address</code> property of the <code>OracleAQAgent</code> object represents the name of the queue.</p>
<p>A <code><span class="codeinlineitalic">waitTime</span></code> of <code>-1</code> implies an infinite wait time.</p>
<p>This call blocks the calling thread until there is a message ready for consumption for a consumer in the list. It returns an <code>OracleAQAgent</code> object which specifies the consumer and queue for which a message is ready to be dequeued.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ODPNT3565" class="refsect2"><a id="CHDHAIBB"></a>
<hr />
<h2 class="refsect2">OracleAQQueue Pr<a id="sthref1202"></a>operties</h2>
<p><code>OracleAQQueue</code> properties are listed in <a href="#CHDBAEFJ">Table 12-25</a>.</p>
<div id="ODPNT3566" class="tblruleformal">
<p class="titleintable"><a id="sthref1203"></a><a id="CHDBAEFJ"></a>Table 12-25 OracleAQQueue Properties</p>
<table class="cellalignment2342" title="OracleAQQueue Properties " summary="Rows are properties. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t108">Property</th>
<th class="cellalignment2343" id="r1c2-t108">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t108" headers="r1c1-t108">
<p><a href="#CHDCIHEJ">Connection</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t108 r1c2-t108">
<p>Specifies the <code>OracleConnection</code> object associated with the queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r3c1-t108" headers="r1c1-t108">
<p><a href="#CHDDDCJD">DequeueOptions</a></p>
</td>
<td class="cellalignment2339" headers="r3c1-t108 r1c2-t108">
<p>Specifies the dequeueing options to use when dequeuing a message from a queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r4c1-t108" headers="r1c1-t108">
<p><a href="#CHDIEJAG">EnqueueOptions</a></p>
</td>
<td class="cellalignment2339" headers="r4c1-t108 r1c2-t108">
<p>Specifies the enqueueing options used to enqueue a message to a queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r5c1-t108" headers="r1c1-t108">
<p><a href="#CHDDBFBB">MessageType</a></p>
</td>
<td class="cellalignment2339" headers="r5c1-t108 r1c2-t108">
<p>Specifies the type of queue table associated with this queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r6c1-t108" headers="r1c1-t108">
<p><a href="#CHDDGDHH">Name</a></p>
</td>
<td class="cellalignment2339" headers="r6c1-t108 r1c2-t108">
<p>Returns the name of the queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r7c1-t108" headers="r1c1-t108">
<p><a href="#CHDHBDDJ">Notification</a></p>
</td>
<td class="cellalignment2339" headers="r7c1-t108 r1c2-t108">
<p>Specifies the various notification options for notifications that are registered using the <code>MessageAvailable</code> event.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r8c1-t108" headers="r1c1-t108">
<p><a href="#CHDDFBFB">NotificationConsumers</a></p>
</td>
<td class="cellalignment2339" headers="r8c1-t108 r1c2-t108">
<p>Specifies the array of consumers, for a multiconsumer queue, that are to be notified asynchronously for any incoming messages on the queue.</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r9c1-t108" headers="r1c1-t108">
<p><a href="#CHDJDCBJ">UdtTypeName</a></p>
</td>
<td class="cellalignment2339" headers="r9c1-t108 r1c2-t108">
<p>Specifies the type name on which the queue and the corresponding queue table is based if the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
<div id="ODPNT3567" class="refsect3"><a id="CHDCIHEJ"></a><a id="Toc201568254"></a>
<h3 class="refsect3">Connection</h3>
<p>This property specifies the <code>OracleConnection</code> object associated with the queue.</p>
<p class="subhead2"><a id="ODPNT3568"></a>Declaration</p>
<pre>
// C#
public OracleConnection Connection {get; set;}
</pre>
<p class="subhead2"><a id="ODPNT3569"></a>Property Value</p>
<p>An <code>OracleConnection</code> object that indicates the connection associated with the queue.</p>
<p class="subhead2"><a id="ODPNT3570"></a>Exceptions</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3571"></a>Remarks</p>
<p>This connection must be opened before calling methods like <code>Enqueue</code> and <code>Dequeue</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3572" class="refsect3"><a id="CHDDDCJD"></a><a id="Toc201568256"></a>
<h3 class="refsect3">DequeueOptions</h3>
<p>This instance property specifies the dequeueing options to use when dequeuing a message from a queue.</p>
<p class="subhead2"><a id="ODPNT3573"></a>Declaration</p>
<pre>
// C#
public OracleAQDequeueOptions DequeueOptions {get; set}
</pre>
<p class="subhead2"><a id="ODPNT3574"></a>Property Value</p>
<p>An <code>OracleAQDequeueOptions</code> object.</p>
<p class="subhead2"><a id="ODPNT3575"></a>Exceptions</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3576"></a>Remarks</p>
<p>The default value is an <code>OracleAQDequeueOptions</code> object with default property values. Setting this property to <code>null</code> resets all dequeue options to their default values.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3577" class="refsect3"><a id="CHDIEJAG"></a><a id="Toc201568257"></a>
<h3 class="refsect3">EnqueueOptions</h3>
<p>This instance property specifies the enqueueing options used to enqueue a message to a queue.</p>
<p class="subhead2"><a id="ODPNT3578"></a>Declaration</p>
<pre>
// C#
public OracleAQEnqueueOptions EnqueueOptions {get; set}
</pre>
<p class="subhead2"><a id="ODPNT3579"></a>Property Value</p>
<p>An <code>OracleAQEnqueueOptions</code> object.</p>
<p class="subhead2"><a id="ODPNT3580"></a>Exceptions</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3581"></a>Remarks</p>
<p>The default value is an <code>OracleAQEnqueueOptions</code> object with default property values. Setting this property to <code>null</code> resets all enqueue options to their default values.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3582" class="refsect3"><a id="CHDDBFBB"></a><a id="Toc201568258"></a>
<h3 class="refsect3">MessageType</h3>
<p>This instance property specifies the type of queue table associated with this queue.</p>
<p class="subhead2"><a id="ODPNT3583"></a>Declaration</p>
<pre>
// C#
public OracleAQMessageType MessageType {get; set;}
</pre>
<p class="subhead2"><a id="ODPNT3584"></a>Property Value</p>
<p>An <code>OracleAQMessageType</code> enumerated value.</p>
<p class="subhead2"><a id="ODPNT3585"></a>Exceptions</p>
<p><code>ArgumentOutOfRangeException</code> - The type value specified is invalid.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3586"></a>Remarks</p>
<p>The <code>MessageType</code> property also dictates the type of message payloads that are enqueued or dequeued from the queue. It is possible to enqueue a variety of payloads depending on the <code>MessageType</code>.</p>
<p><a href="#CHDIICEE">Table 12-26</a> lists the allowed payload types for various message types.</p>
<div id="ODPNT3587" class="tblruleformal">
<p class="titleintable"><a id="sthref1204"></a><a id="CHDIICEE"></a>Table 12-26 Message Types and Payloads</p>
<table class="cellalignment2342" title="Message Types and Payloads" summary="Message Types and Payloads" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t113">OracleAQQueue.MessageType</th>
<th class="cellalignment2343" id="r1c2-t113">Allowed OracleAQMessage.Payload type to Enqueue</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t113" headers="r1c1-t113">
<p><code>OracleAQMessageType.Raw</code></p>
</td>
<td class="cellalignment2339" headers="r2c1-t113 r1c2-t113">
<p><code>OracleBinary</code>, <code>byte[]</code></p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r3c1-t113" headers="r1c1-t113">
<p><code>OracleAQMessageType.Xml</code></p>
</td>
<td class="cellalignment2339" headers="r3c1-t113 r1c2-t113">
<p><code>OracleXmlType</code>, <code>XmlReader</code>, <code>String</code> (well-formed XML, else exception is raised)</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r4c1-t113" headers="r1c1-t113">
<p><code>OracleAQMessageType.UDT</code></p>
</td>
<td class="cellalignment2339" headers="r4c1-t113 r1c2-t113">
<p><code>UDT</code> Custom Object</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<p><a href="#CHDBGIIJ">Table 12-27</a> lists the payload types for dequeued messages.</p>
<div id="ODPNT3588" class="tblruleformal">
<p class="titleintable"><a id="sthref1205"></a><a id="CHDBGIIJ"></a>Table 12-27 Payload Types for Dequeued Messages</p>
<table class="cellalignment2342" title="Payload Types for Dequeued Messages" summary="Dequeued messages and payload types" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t114">OracleAQQueue.MessageType</th>
<th class="cellalignment2343" id="r1c2-t114">DequeueOptions.ProviderSpecificType</th>
<th class="cellalignment2343" id="r1c3-t114">OracleAQMessage.Payload of dequeued message</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t114" headers="r1c1-t114">
<p><code>OracleAQMessageType.Xml</code></p>
</td>
<td class="cellalignment2339" headers="r2c1-t114 r1c2-t114">
<p><code>true</code></p>
</td>
<td class="cellalignment2339" headers="r2c1-t114 r1c3-t114">
<p><code>OracleXmlType</code></p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r3c1-t114" headers="r1c1-t114">
<p><code>OracleAQMessageType.Xml</code></p>
</td>
<td class="cellalignment2339" headers="r3c1-t114 r1c2-t114">
<p><code>false</code></p>
</td>
<td class="cellalignment2339" headers="r3c1-t114 r1c3-t114">
<p><code>XmlReader</code></p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r4c1-t114" headers="r1c1-t114">
<p><code>OracleAQMessageType.Raw</code></p>
</td>
<td class="cellalignment2339" headers="r4c1-t114 r1c2-t114">
<p><code>true</code></p>
</td>
<td class="cellalignment2339" headers="r4c1-t114 r1c3-t114">
<p><code>OracleBinary</code></p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r5c1-t114" headers="r1c1-t114">
<p><code>OracleAQMessageType.Raw</code></p>
</td>
<td class="cellalignment2339" headers="r5c1-t114 r1c2-t114">
<p><code>false</code></p>
</td>
<td class="cellalignment2339" headers="r5c1-t114 r1c3-t114">
<p><code>Byte[]</code></p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r6c1-t114" headers="r1c1-t114">
<p><code>OracleAQMessageType.UDT</code></p>
</td>
<td class="cellalignment2339" headers="r6c1-t114 r1c2-t114">
<p>N.A.</p>
</td>
<td class="cellalignment2339" headers="r6c1-t114 r1c3-t114">
<p><code>UDT</code> Custom Object</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3589" class="refsect3"><a id="CHDDGDHH"></a><a id="Toc201568255"></a>
<h3 class="refsect3">Name</h3>
<p>This instance property returns the name of the queue.</p>
<p class="subhead2"><a id="ODPNT3590"></a>Declaration</p>
<pre>
// C#
public string Name {get;}
</pre>
<p class="subhead2"><a id="ODPNT3591"></a>Property Value</p>
<p>A <code>string</code> that indicates the name of the queue.</p>
<p class="subhead2"><a id="ODPNT3592"></a>Exceptions</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3593" class="refsect3"><a id="CHDHBDDJ"></a>
<h3 class="refsect3">Notification</h3>
<p>This instance property specifies the various notification options for notifications that are registered using the <code>MessageAvailable</code> event.</p>
<p class="subhead2"><a id="ODPNT3594"></a>Declaration</p>
<pre>
// C#
public OracleNotificationRequest Notification {get;}
</pre>
<p class="subhead2"><a id="ODPNT3595"></a>Property Value</p>
<p>Specifies an <code>OracleNotificationRequest</code> object whose properties can be changed to alter the notification behavior.</p>
<p class="subhead2"><a id="ODPNT3596"></a>Remarks</p>
<p>This property can be used to change various notification options. The notification options must be changed before registering with the <code>MessageAvailable</code> event. This property can be modified again only after unregistering from the <code>MessageAvailable</code> event.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3597" class="refsect3"><a id="CHDDFBFB"></a><a id="Toc201568261"></a>
<h3 class="refsect3">NotificationConsumers</h3>
<p>This instance property specifies the array of consumers, for a multiconsumer queue, that are to be notified asynchronously for any incoming messages on the queue.</p>
<p class="subhead2"><a id="ODPNT3598"></a>Declaration</p>
<pre>
// C#
public string[] NotificationConsumers {get; set;}
</pre>
<p class="subhead2"><a id="ODPNT3599"></a>Property Value</p>
<p>Specifies an array of consumer name strings for which the notifications are delivered.</p>
<p class="subhead2"><a id="ODPNT3600"></a>Exceptions</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p><code>InvalidOperationException</code> - <code>MessageAvailable</code> registration is active.</p>
<p class="subhead2"><a id="ODPNT3601"></a>Remarks</p>
<p>The consumer names must be in uppercase. This functionality only supports queues with uppercase names.</p>
<p>The list of consumers is used in the <code>MessageAvailable</code> event. The list must be set before registering for the event. This property cannot be modified after registering for the <code>MessageAvailable</code> event. This property can be modified again only after unregistering from <code>MessageAvailable</code> event.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3602" class="refsect3"><a id="CHDJDCBJ"></a><a id="Toc201568259"></a>
<h3 class="refsect3">UdtTypeName</h3>
<p>This instance property specifies the type name on which the queue and the corresponding queue table is based if the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>.</p>
<p class="subhead2"><a id="ODPNT3603"></a>Declaration</p>
<pre>
// C#
public string UdtTypeName {get; set;}
</pre>
<p class="subhead2"><a id="ODPNT3604"></a>Property Value</p>
<p>Specifies the Oracle user-defined type name if the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>.</p>
<p class="subhead2"><a id="ODPNT3605"></a>Exceptions</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3606"></a>Remarks</p>
<p>The <code>UdtTypeName</code> property corresponds to the user-defined type name of the payload. This property must always be specified if the payload is a user-defined type. This property need not be set for other payload types.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ODPNT3607" class="refsect2"><a id="CHDJIIJB"></a>
<hr />
<h2 class="refsect2">OracleAQQueue Public Metho<a id="sthref1206"></a>ds</h2>
<p><code>OracleAQQueue</code> public methods are listed in <a href="#CHDCIECE">Table 12-28</a>.</p>
<div id="ODPNT3608" class="tblruleformal">
<p class="titleintable"><a id="sthref1207"></a><a id="CHDCIECE"></a>Table 12-28 OracleAQQueue Public Methods</p>
<table class="cellalignment2342" title="OracleAQQueue Public Methods " summary="Rows are public methods. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t120">Public Method</th>
<th class="cellalignment2343" id="r1c2-t120">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t120" headers="r1c1-t120">
<p><a href="#CHDHIHHD">Dequeue</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t120 r1c2-t120">
<p>Dequeues messages from queues (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r3c1-t120" headers="r1c1-t120">
<p><a href="#CHDBIBBF">DequeueArray</a></p>
</td>
<td class="cellalignment2339" headers="r3c1-t120 r1c2-t120">
<p>Dequeues multiple messages from queues (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r4c1-t120" headers="r1c1-t120">
<p><a href="#CHDIFJEE">Dispose</a></p>
</td>
<td class="cellalignment2339" headers="r4c1-t120 r1c2-t120">
<p>Releases any resources or memory allocated by the object</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r5c1-t120" headers="r1c1-t120">
<p><a href="#CHDJEAEA">Enqueue</a></p>
</td>
<td class="cellalignment2339" headers="r5c1-t120 r1c2-t120">
<p>Enqueues messages to queues (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r6c1-t120" headers="r1c1-t120">
<p><a href="#CHDJAGIH">EnqueueArray</a></p>
</td>
<td class="cellalignment2339" headers="r6c1-t120 r1c2-t120">
<p>Enqueues multiple messages to a queue (Overloaded).</p>
</td>
</tr>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r7c1-t120" headers="r1c1-t120">
<p><a href="#CHDBFFIG">Listen</a></p>
</td>
<td class="cellalignment2339" headers="r7c1-t120 r1c2-t120">
<p>Listens for messages on the queue on behalf of <code>listenConsumers</code> (Overloaded).</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
<div id="ODPNT3609" class="refsect3"><a id="CHDHIHHD"></a>
<h3 class="refsect3">Dequeue</h3>
<p>Dequeue methods dequeue messages from queues.</p>
<p class="subhead2"><a id="ODPNT3610"></a>Overload List</p>
<ul>
<li>
<p><a href="#CHDGHCIJ">Dequeue()</a></p>
<p>This instance method dequeues messages from a queue using the <code>DequeueOptions</code> for the instance.</p>
</li>
<li>
<p><a href="#CHDCEGDD">Dequeue(OracleAQDequeueOptions)</a></p>
<p>This instance method dequeues messages from a queue using the supplied dequeue options.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3611" class="refsect3"><a id="CHDGHCIJ"></a><a id="Toc201568267"></a>
<h3 class="refsect3">Dequeue()</h3>
<p>This instance method is used to dequeue a message from a queue using the <code>DequeueOptions</code> for the instance.</p>
<p class="subhead2"><a id="ODPNT3612"></a>Declaration</p>
<pre>
// C#
public OracleAQMessage Dequeue();
</pre>
<p class="subhead2"><a id="ODPNT3613"></a><span class="bold">Return Value</span></p>
<p>An <code>OracleAQMessage</code> instance representing the dequeued message.</p>
<p class="subhead2"><a id="ODPNT3614"></a>Exceptions</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p><code>OracleException</code> - In case of timeout, an exception is thrown with the message, <code>ORA-25228: timeout or end-of-fetch during message dequeue from queue_name.</code>Timeout may happen if <code>DequeueOptions.Wait</code> is set to a value other than <code>-1</code>.</p>
<p class="subhead2"><a id="ODPNT3615"></a>Remarks</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must also be set.</p>
<p>Dequeued buffered messages always have <code>null</code> <code>MessageId</code> values.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3616" class="refsect3"><a id="CHDCEGDD"></a><a id="Toc201568268"></a>
<h3 class="refsect3">Dequeue(OracleAQDequeueOptions)</h3>
<p>This instance method dequeues messages from a queue using the supplied dequeue options.</p>
<p class="subhead2"><a id="ODPNT3617"></a>Declaration</p>
<pre>
// C#
public OracleAQMessage Dequeue(OracleAQDequeueOptions <span class="italic">dequeueOptions</span>);
</pre>
<p class="subhead2"><a id="ODPNT3618"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">dequeueOptions</span></code></p>
<p>An <code>OracleAQDequeueOptions</code> object.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3619"></a><span class="bold">Return Value</span></p>
<p>An <code>OracleAQMessage</code> instance representing the dequeued message.</p>
<p class="subhead2"><a id="ODPNT3620"></a>Exceptions</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p><code>OracleException</code> - In case of timeout, an exception is thrown with the message, <code>ORA-25228: timeout or end-of-fetch during message dequeue from queue_name.</code> Timeout may happen if <code>DequeueOptions.Wait</code> is set to a value other than <code>-1</code>.</p>
<p class="subhead2"><a id="ODPNT3621"></a>Remarks</p>
<p>If the supplied <code>dequeueOptions</code> object is <code>null,</code> then the dequeue options default values are used. The queue object's <code>DequeueOptions</code> property is ignored for this operation.</p>
<p>Calling this method does not change the <code>DequeueOptions</code> property of the queue.</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must also be set.</p>
<p>Dequeued buffered messages always have <code>null</code> <code>MessageId</code> values.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3622" class="refsect3"><a id="CHDBIBBF"></a>
<h3 class="refsect3">DequeueArray</h3>
<p><code>DequeueArray</code> methods dequeue multiple messages from queues.</p>
<p class="subhead2"><a id="ODPNT3623"></a>Overload List</p>
<ul>
<li>
<p><a href="#CHDJFICD">DequeueArray(int)</a></p>
<p>This instance method dequeues multiple messages from a queue using the <code>DequeueOptions</code> of the instance.</p>
</li>
<li>
<p><a href="#CHDCBBAJ">DequeueArray(int, OracleAQDequeueOptions)</a></p>
<p>This instance method dequeues multiple messages from a queue using the supplied dequeue options.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3624" class="refsect3"><a id="CHDJFICD"></a><a id="Toc201568269"></a>
<h3 class="refsect3">DequeueArray(int)</h3>
<p>This instance method dequeues multiple messages from a queue using the <code>DequeueOptions</code> of the instance.</p>
<p class="subhead2"><a id="ODPNT3625"></a>Declaration</p>
<pre>
// C#
public OracleAQMessage[] DequeueArray(int <span class="italic">dequeueCount</span>);
</pre>
<p class="subhead2"><a id="ODPNT3626"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">dequeueCount</span></code></p>
<p>An <code>integer</code> specifying the numbers of messages to dequeue.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3627"></a><span class="bold">Return Value</span></p>
<p>An array of <code>OracleAQMessage</code> instances representing the dequeued messages.</p>
<p class="subhead2"><a id="ODPNT3628"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentOutOfRangeException</code> - <code>dequeueCount</code> is less than or equal to 0.</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p>OracleException - In case of timeout, an exception is thrown with the message, <code>ORA-25228: timeout or end-of-fetch during message dequeue from queue_name.</code> Timeout may happen if <code>DequeueOptions.Wait</code> is set to a value other than <code>-1</code>.</p>
<p class="subhead2"><a id="ODPNT3629"></a>Remarks</p>
<p>This method is supported for Oracle Database 10<span class="italic">g</span> and higher releases.</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must be set as well.</p>
<p>The size of the returned array may be less than the <code>dequeueCount</code>. It depends on the actual number of messages present in the queue.</p>
<p>For database versions earlier than Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.4), the <code>MessageId</code> property of persistent <code>OracleAQMessage</code> objects retrieved using <code>DequeueArray</code> is always <code>null</code>.</p>
<p>Dequeued buffered messages always have <code>null</code> <code>MessageId</code> values irrespective of the database version.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3630" class="refsect3"><a id="CHDCBBAJ"></a><a id="Toc201568270"></a>
<h3 class="refsect3">DequeueArray(int, OracleAQDequeueOptions)</h3>
<p>This instance method dequeues multiple messages from a queue using the supplied dequeue options.</p>
<p class="subhead2"><a id="ODPNT3631"></a>Declaration</p>
<pre>
// C#
public OracleAQMessage[] DequeueArray(int <span class="italic">dequeueCount</span>, OracleAQDequeueOptions <span class="italic">dequeueOptions</span>);
</pre>
<p class="subhead2"><a id="ODPNT3632"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">dequeueCount</span></code></p>
<p>An <code>integer</code> specifying the numbers of messages to dequeue.</p>
</li>
<li>
<p><code>dequeueOptions</code></p>
<p>An <code>OracleAQDequeueOptions</code> object.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3633"></a><span class="bold">Return Value</span></p>
<p>An array of <code>OracleAQMessage</code> instances representing the dequeued messages.</p>
<p class="subhead2"><a id="ODPNT3634"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentOutOfRangeException</code> - <code>dequeueCount</code> is less than or equal to 0.</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p><code>OracleException</code> - In case of timeout, an exception is thrown with the message, <code>ORA-25228: timeout or end-of-fetch during message dequeue from queue_name.</code> Timeout may happen if <code>DequeueOptions.Wait</code> is set to a value other than <code>-1</code>.</p>
<p class="subhead2"><a id="ODPNT3635"></a>Remarks</p>
<p>This method is supported for Oracle Database 10<span class="italic">g</span> Release 1 (10.1) and higher releases. Calling this method does not change the <code>DequeueOptions</code> property of the queue.</p>
<p>If the supplied <code>dequeueOptions</code> object is <code>null</code>, then the dequeue options default values are used. The <code>DequeueOptions</code> property of the queue object is ignored in this operation.</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must be set as well.</p>
<p>The size of the returned array may be less than the <code>dequeueCount</code>. It dependes on the actual number of messages present in the queue.</p>
<p>For database versions earlier than Oracle Database 11<span class="italic">g</span> Release 2 (11.2.0.4), the <code>MessageId</code> property of persistent <code>OracleAQMessage</code> objects retrieved using <code>DequeueArray</code> is always <code>null</code>.</p>
<p>Dequeued buffered messages always have <code>null</code> <code>MessageId</code> values irrespective of the database version.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3636" class="refsect3"><a id="CHDIFJEE"></a>
<h3 class="refsect3">Dispose</h3>
<p>This method releases any resources or memory allocated by the object.</p>
<p class="subhead2"><a id="ODPNT3637"></a>Declaration</p>
<pre>
// C#
public void Dispose();
</pre>
<p class="subhead2"><a id="ODPNT3638"></a>Implements</p>
<p><code>IDisposable</code>.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3639" class="refsect3"><a id="CHDJEAEA"></a><a id="Toc201568263"></a>
<h3 class="refsect3">Enqueue</h3>
<p><code>Enqueue</code> instance methods enqueue messages to queues.</p>
<p class="subhead2"><a id="ODPNT3640"></a>Overload List</p>
<ul>
<li>
<p><a href="#CHDDICCI">Enqueue(OracleAQMessage)</a></p>
<p>This instance method enqueues messages to a queue using the <code>EnqueueOptions</code> of the instance.</p>
</li>
<li>
<p><a href="#CHDGHBHE">Enqueue(OracleAQMessage, OracleAQEnqueueOptions)</a></p>
<p>This instance method enqueues messages to a queue using the supplied enqueue options.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3641" class="refsect3"><a id="CHDDICCI"></a>
<h3 class="refsect3">Enqueue(OracleAQMessage)</h3>
<p>This instance method enqueues messages to a queue using the <code>EnqueueOptions</code> of the instance.</p>
<p class="subhead2"><a id="ODPNT3642"></a>Declaration</p>
<pre>
// C#
public void Enqueue(OracleAQMessage <span class="italic">message</span>);
</pre>
<p class="subhead2"><a id="ODPNT3643"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">message</span></code></p>
<p>An <code>OracleAQMessage</code> object.</p>
</li>
</ul>
<p><span class="bold">Exceptions</span></p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ArgumentNullException</code> - The message parameter is <code>null</code>.</p>
<p><code>ArgumentException</code> - The message payload is <code>OracleXmlType</code> and the connection used to create <code>OracleXmlType</code> is different from the queue's connection.</p>
<p class="subhead2"><a id="ODPNT3644"></a><span class="bold">Remarks</span></p>
<p><code>MessageId</code> of the enqueued message is populated after the call to <code>Enqueue</code> completes. Enqueued buffered messages always have <code>null MessageId</code> values.</p>
<p>The <code>MessageType</code> property needs to be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must be set as well.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3645" class="refsect3"><a id="CHDGHBHE"></a><a id="Toc201568264"></a>
<h3 class="refsect3">Enqueue(OracleAQMessage, OracleAQEnqueueOptions)</h3>
<p>This instance method enqueues messages to a queue using the supplied enqueue options.</p>
<p class="subhead2"><a id="ODPNT3646"></a>Declaration</p>
<pre>
// C#
public void Enqueue(OracleAQMessage <span class="italic">message</span>, OracleAQEnqueueOptions <span class="italic">enqueueOptions</span>);
</pre>
<p class="subhead2"><a id="ODPNT3647"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">message</span></code></p>
<p>An <code>OracleAQMessage</code> object.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">enqueueOptions</span></code></p>
<p>An <code>OracleAQEnqueueOptions</code> object.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3648"></a><span class="bold">Exceptions</span></p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ArgumentNullException</code> - The message parameter is <code>null</code>.</p>
<p><code>ArgumentException</code> - The message payload is <code>OracleXmlType</code> and the connection used to create <code>OracleXmlType</code> is different from the queue's connection.</p>
<p class="subhead2"><a id="ODPNT3649"></a><span class="bold">Remarks</span></p>
<p>If the supplied <code>enqueueOptions</code> object is <code>null</code>, then the enqueue options default values are used. The <code>EnqueueOptions</code> property of the queue object is ignored in this operation.</p>
<p>The <code>MessageId</code> of the enqueued message is populated after the call to <code>Enqueue</code> completes. Enqueued buffered messages always have <code>null MessageId</code> values. Calling this method does not change the <code>EnqueueOptions</code> property of the queue.</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must also be set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3650" class="refsect3"><a id="CHDJAGIH"></a>
<h3 class="refsect3">EnqueueArray</h3>
<p><code>EnqueueArray</code> instance methods enqueue multiple messages to a queue.</p>
<p class="subhead2"><a id="ODPNT3651"></a>Overload List</p>
<ul>
<li>
<p><a href="#CHDHFIBH">EnqueueArray(OracleAQMessage[ ])</a></p>
<p>This instance method enqueues multiple messages to a queue using the <code>EnqueueOptions</code> of the instance.</p>
</li>
<li>
<p><a href="#CHDJECHJ">EnqueueArray(OracleAQMessage[ ], OracleAQEnqueueOptions)</a></p>
<p>This instance method enqueues multiple messages to a queue using the supplied enqueue options.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3652" class="refsect3"><a id="CHDHFIBH"></a><a id="Toc201568265"></a>
<h3 class="refsect3">EnqueueArray(OracleAQMessage[ ])</h3>
<p>This instance method enqueues multiple messages to a queue using the <code>EnqueueOptions</code> of the instance.</p>
<p class="subhead2"><a id="ODPNT3653"></a>Declaration</p>
<pre>
// C#
public int EnqueueArray(OracleAQMessage[] <span class="italic">messages</span>);
</pre>
<p class="subhead2"><a id="ODPNT3654"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">messages</span></code></p>
<p>An array of <code>OracleAQMessage</code> objects.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3655"></a>Return Value</p>
<p>An <code>integer</code> representing the number of messages actually enqueued.</p>
<p class="subhead2"><a id="ODPNT3656"></a><span class="bold">Exceptions</span></p>
<p><code>ArgumentNullException</code> - The message parameter is <code>null</code>.</p>
<p><code>ArgumentException</code> - At least one of the <code>OracleAQMessage[]</code> elements is <code>null,</code> or at least one of the <code>OracleAQMessage[]</code> elements has a payload of <code>OracleXmlType</code>, which is created using a connection that is different from the queue's connection.</p>
<p><code>InvalidOperationException</code> - The <code>OracleAQMessage</code> array is empty or the connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3657"></a><span class="bold">Remarks</span></p>
<p>This method is supported by Oracle Database 10<span class="italic">g</span> and higher releases. The <code>MessageId</code> properties of the enqueued messages are populated after the call to <code>Enqueue</code> completes. Enqueued buffered messages always have <code>null MessageId</code> values.</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must also be set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3658" class="refsect3"><a id="CHDJECHJ"></a><a id="Toc201568266"></a>
<h3 class="refsect3">EnqueueArray(OracleAQMessage[ ], OracleAQEnqueueOptions)</h3>
<p>This instance method enqueues multiple messages to a queue using the supplied enqueue options.</p>
<p class="subhead2"><a id="ODPNT3659"></a>Declaration</p>
<pre>
// C#
public int EnqueueArray(OracleAQMessage[] <span class="italic">messages</span>, OracleAQEnqueueOptions
  <span class="italic">enqueueOptions</span>);
</pre>
<p class="subhead2"><a id="ODPNT3660"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">messages</span></code></p>
<p>An array of <code>OracleAQMessage</code> objects.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">enqueueOptions</span></code></p>
<p>An <code>OracleAQEnqueueOptions</code> object.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3661"></a>Return Value</p>
<p>An <code>integer</code> representing the number of messages actually enqueued.</p>
<p class="subhead2"><a id="ODPNT3662"></a>Exceptions</p>
<p><code>ArgumentNullException</code> - The message parameter is <code>null</code>.</p>
<p><code>ArgumentException</code> - At least one of the <code>OracleAQMessage[]</code> elements is <code>null,</code> or at least one of the <code>OracleAQMessage[]</code> elements has a payload of <code>OracleXmlType</code>, which is created using a connection that is different from the queue's connection.</p>
<p><code>InvalidOperationException</code> - The <code>OracleAQMessage</code> array is empty or the connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3663"></a>Remarks</p>
<p>This method is supported by Oracle Database 10<span class="italic">g</span> and higher releases. <code>MessageId</code> properties of the enqueued messages are populated after the call to <code>Enqueue</code> completes. Enqueued buffered messages always have <code>null MessageId</code> values. Calling this method does not change the <code>EnqueueOptions</code> property of the queue.</p>
<p>If the supplied <code>enqueueOptions</code> object is <code>null</code>, then the enqueue options default values are used. The <code>EnqueueOptions</code> property of the queue object is ignored in this operation.</p>
<p>The <code>MessageType</code> property must be set appropriately before calling this function. If the <code>MessageType</code> is <code>OracleAQMessageType.UDT</code>, then the <code>UdtTypeName</code> property must also be set.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3664" class="refsect3"><a id="CHDBFFIG"></a>
<h3 class="refsect3">Listen</h3>
<p>Listen methods listen for messages on the queue on behalf of <code>listenConsumers</code>.</p>
<p class="subhead2"><a id="ODPNT3665"></a>Overload List</p>
<ul>
<li>
<p><a href="#CHDJGCJD">Listen(string[])</a></p>
<p>This method listens for messages on the queue on behalf of <code>listenConsumers</code>.</p>
</li>
<li>
<p><a href="#CHDFEAJC">Listen (string[], int)</a></p>
<p>This method listens for messages on behalf of <code>listenConsumers</code> for a specified time.</p>
</li>
</ul>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3666" class="refsect3"><a id="CHDJGCJD"></a><a id="Toc201568271"></a>
<h3 class="refsect3">Listen(string[])</h3>
<p>This method listens for messages on the queue on behalf of <code>listenConsumers</code>.</p>
<p class="subhead2"><a id="ODPNT3667"></a>Declaration</p>
<pre>
// C#
public string Listen(string[] <span class="italic">listenConsumers</span>);
</pre>
<p class="subhead2"><a id="ODPNT3668"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">listenConsumers</span></code></p>
<p>An array of consumers to listen for on this queue. This parameter should be <code>null</code> in case of single consumer queues.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3669"></a>Return Value</p>
<p>A <code>string</code>.</p>
<p class="subhead2"><a id="ODPNT3670"></a><span class="bold">Exceptions</span></p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3671"></a>Remarks</p>
<p>This call blocks the calling thread until there is a message ready for consumption for a consumer in the <code>listenConsumers</code> array. It returns a <code>string</code> representing the consumer name for which the message is ready.</p>
<p><code>Listen</code> is useful in situations that require waiting until a message is available in the queue for consumers whose names are specified in <code>listenConsumers</code>.</p>
<p class="subhead2"><a id="ODPNT3672"></a>Example</p>
<p>The following example demonstrates using the <code>Listen</code> method. The first part of the example performs the requisite database setup for the database user, <code>SCOTT</code>. The second part of the example demonstrates how a thread can listen and wait until a message is enqueued.</p>
<pre>
-- Part I: Database setup required for this demo
 
------------------------------------------------------------------
-- SQL to grant appropriate privilege to database user, SCOTT
------------------------------------------------------------------
SQL&gt; ALTER USER SCOTT ACCOUNT UNLOCK IDENTIFIED BY Pwd4Sct;
User altered.
GRANT ALL ON DBMS_AQADM TO scott;
 
------------------------------------------------------------------
-- PLSQL to create queue-table and queue and start queue for SCOTT
------------------------------------------------------------------
BEGIN
  DBMS_AQADM.CREATE_QUEUE_TABLE(
    queue_table=&gt;'scott.test_q_tab', 
    queue_payload_type=&gt;'RAW', 
    multiple_consumers=&gt;FALSE);
 
  DBMS_AQADM.CREATE_QUEUE(
    queue_name=&gt;'scott.test_q', 
    queue_table=&gt;'scott.test_q_tab');
 
  DBMS_AQADM.START_QUEUE(queue_name=&gt;'scott.test_q');
END;
/
 
------------------------------------------------------------------
-- PLSQL to stop queue and drop queue &amp; queue-table from SCOTT
------------------------------------------------------------------
BEGIN
  DBMS_AQADM.STOP_QUEUE('scott.test_q');
 
  DBMS_AQADM.DROP_QUEUE(
    queue_name =&gt; 'scott.test_q', 
    auto_commit =&gt; TRUE);
 
  DBMS_AQADM.DROP_QUEUE_TABLE(
    queue_table =&gt; 'scott.test_q_tab',
    force =&gt; FALSE, 
    auto_commit =&gt; TRUE);
END;
/
-- End of Part I, database setup.

//Part II: Demonstrates using the Listen method
//C#
using System;
using System.Text;
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;
using System.Threading;
 
namespace ODPSample
{
  /// &lt;summary&gt;
  /// Demonstrates how a thread can listen and wait until a message is enqueued.
  /// Once a message is enqueued, the listening thread returns from the 
  /// blocked Listen() method invocation and dequeues the message.
  /// &lt;/summary&gt;
  class EnqueueDequeue
  {
    static bool s_bListenReturned = false;
 
    static void Main(string[] args)
    {
      // Create connection
      string constr = "user id=scott;password=Pwd4Sct;data source=oracle";
      OracleConnection con = new OracleConnection(constr);
 
      // Create queue
      OracleAQQueue queue = new OracleAQQueue("scott.test_q", con);
 
      try
      {
        // Open connection
        con.Open();
 
        // Set message type for the queue
        queue.MessageType = OracleAQMessageType.Raw;
 
        // Spawning a thread which will listen for a message
        ThreadStart ts = new ThreadStart(TestListen);
        Thread t = new Thread(ts);
        t.Start();
 
        System.Threading.Thread.Sleep(2000);
 
        // Begin transaction for enqueue
        OracleTransaction txn = con.BeginTransaction();
 
        // Prepare message and RAW payload
        OracleAQMessage enqMsg = new OracleAQMessage();
        byte[] bytePayload = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
        enqMsg.Payload = bytePayload;
 
        // Prepare to Enqueue
        queue.EnqueueOptions.Visibility = OracleAQVisibilityMode.OnCommit;
 
        Console.WriteLine("[Main Thread]   Enqueuing a message...");
        Console.WriteLine("[Main Thread]   Enqueued Message Payload      : "
          + ByteArrayToString(enqMsg.Payload as byte[]));
        Console.WriteLine();
 
        // Enqueue message
        queue.Enqueue(enqMsg);
 
        // Enqueue transaction commit
        txn.Commit();
 
        // Loop till Listen returns
        while (!s_bListenReturned)
          System.Threading.Thread.Sleep(1000);
      }
      catch (Exception e)
      {
        Console.WriteLine("Error: {0}", e.Message);
      }
      finally
      {
        // Close/Dispose objects
        queue.Dispose();
        con.Close();
        con.Dispose();
      }
    }
 
    static void TestListen()
    {
      // Create connection
      string constr = "user id=scott;password=Pwd4Sct;data source=oracle";
      OracleConnection conListen = new OracleConnection(constr);
 
      // Create queue
      OracleAQQueue queueListen = new OracleAQQueue("scott.test_q", conListen);
 
      try
      {
          // Open the connection for Listen thread.
          // Connection blocked on Listen thread can not be used for other DB 
          // operations
          conListen.Open();
 
          // Set message type for the queue
          queueListen.MessageType = OracleAQMessageType.Raw;
 
        // Listen
        queueListen.Listen(null);
 
        Console.WriteLine("[Listen Thread] Listen returned... Dequeuing...");
 
        // Begin txn for Dequeue
        OracleTransaction txn = conListen.BeginTransaction();
 
        // Prepare to Dequeue
        queueListen.DequeueOptions.Visibility = OracleAQVisibilityMode.OnCommit;
        queueListen.DequeueOptions.Wait = 10;
 
        // Dequeue message
        OracleAQMessage deqMsg = queueListen.Dequeue();
        Console.WriteLine("[Listen Thread] Dequeued Message Payload      : "
          + ByteArrayToString(deqMsg.Payload as byte[]));
 
        // Dequeue txn commit
        txn.Commit();
 
        // Allow the main thread to exit
        s_bListenReturned = true;
      }
      catch (Exception e)
      {
        Console.WriteLine("Error: {0}", e.Message);
      }
      finally
      {
        // Close/Dispose objects
        queueListen.Dispose();
        conListen.Close();
        conListen.Dispose();
      }
    }
 
    // Function to convert byte[] to string
    static private string ByteArrayToString(byte[] byteArray)
    {
      StringBuilder sb = new StringBuilder();
      for (int n = 0; n &lt; byteArray.Length; n++)
      {
        sb.Append((int.Parse(byteArray[n].ToString())).ToString("X"));
      }
      return sb.ToString();
    }
  }
}
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" -->
<div id="ODPNT3673" class="refsect3"><a id="CHDFEAJC"></a><a id="Toc201568272"></a>
<h3 class="refsect3">Listen (string[], int)</h3>
<p>This method listens for messages on behalf of <code>listenConsumers</code> for a specified time.</p>
<p class="subhead2"><a id="ODPNT3674"></a>Declaration</p>
<pre>
// C#
public string Listen(string[] <span class="italic">listenConsumers</span>, int <span class="italic">waitTime</span>);
</pre>
<p class="subhead2"><a id="ODPNT3675"></a>Parameters</p>
<ul>
<li>
<p><code><span class="codeinlineitalic">listenConsumers</span></code></p>
<p>Array of consumers for which to listen on this queue.</p>
</li>
<li>
<p><code><span class="codeinlineitalic">waitTime</span></code></p>
<p>Wait time in seconds.</p>
</li>
</ul>
<p class="subhead2"><a id="ODPNT3676"></a>Return Value</p>
<p>A <code>string</code></p>
<p class="subhead2"><a id="ODPNT3677"></a><span class="bold">Exceptions</span></p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p>ArgumentException - <code>waitTime</code> is less than <code>-1</code>.</p>
<p><code>ObjectDisposedException</code> - The object is already disposed.</p>
<p class="subhead2"><a id="ODPNT3678"></a>Remarks</p>
<p><code>Listen</code> is useful in situations that require waiting until a message is available in the queue for consumers whose names are specified in <code>listenConsumers</code>.</p>
<p>This call blocks the calling thread until there is a message ready for consumption for a consumer in the <code>listenConsumers</code> array. It returns a <code>string</code> representing the consumer name for which the message is ready.The method returns <code>null</code> if a timeout occurs.</p>
<p>The <code>listenConsumers</code> parameter should be <code>null</code> for single consumer queues. An empty string is returned in such cases.</p>
<p>A <code>waitTime</code> of <code>-1</code> implies infinite wait time.</p>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" -->
<div id="ODPNT3679" class="refsect2"><a id="CHDDJBGC"></a>
<hr />
<h2 class="refsect2">OracleAQQu<a id="sthref1208"></a>eue Events</h2>
<p>The <code>OracleAQQueue</code> event is listed in <a href="#CHDGHBIF">Table 12-29</a>.</p>
<div id="ODPNT3680" class="tblruleformal">
<p class="titleintable"><a id="sthref1209"></a><a id="CHDGHBIF"></a>Table 12-29 OracleAQQueue Events</p>
<table class="cellalignment2342" title="OracleAQQueue Events " summary="Rows are properties. first column is name, second column is description" dir="ltr">
<thead>
<tr class="cellalignment2333">
<th class="cellalignment2343" id="r1c1-t138">Event Name</th>
<th class="cellalignment2343" id="r1c2-t138">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2333">
<td class="cellalignment2339" id="r2c1-t138" headers="r1c1-t138">
<p><a href="#CHDFICAF">MessageAvailable Event</a></p>
</td>
<td class="cellalignment2339" headers="r2c1-t138 r1c2-t138">
<p>Notifies when a message is available in the queue for <code>NotificationConsumers</code>.</p>
</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="tblruleformal" -->
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
<div id="ODPNT3681" class="refsect3"><a id="CHDFICAF"></a><a id="Toc201568275"></a>
<h3 class="refsect3">MessageAvailable Event</h3>
<p>This event is notified when a message is available in the queue for <code>NotificationConsumers</code>.</p>
<p class="subhead2"><a id="ODPNT3682"></a>Declaration</p>
<pre>
// C#
public event OracleAQMessageAvailableEventHandler MessageAvailable;
</pre>
<p class="subhead2"><a id="ODPNT3683"></a>Event Data</p>
<p>The event handler receives an <code>OracleAQMessageAvailableEventArgs</code> object.</p>
<p class="subhead2"><a id="ODPNT3684"></a><span class="bold">Exceptions</span></p>
<p><code>InvalidOperationException</code> - The connection is not open.</p>
<p class="subhead2"><a id="ODPNT3685"></a><span class="bold">Remarks</span></p>
<p>Asynchronous notification is supported in all queue tables created with a database compatibility level of 8.1 or higher.</p>
<p>In order to receive the notification about message availability, the client must create an <code>OracleAQMessageAvailableEventHandler</code> delegate to listen to this event. The delegate should be added to this event only after setting the <a href="#CHDDFBFB">NotificationConsumers</a> and <a href="#CHDHBDDJ">Notification</a> properties.</p>
<p>The notification registration takes place after the first delegate is added to the event. The notification is unregistered when the last delegate is removed from the event. Notifications set on an <code>OracleAQQueue</code> object get cancelled automatically when the object gets disposed.</p>
<p>Oracle Data Provider for .NET opens a port to listen for notifications. HA events, load balancing, and database change notification features also share the same port. This port can be configured centrally by setting the database notification port in an application or Web configuration file. The following example code specifies a port number of 1200:</p>
<pre>
&lt;configuration&gt;
  &lt;oracle.dataaccess.client&gt;
    &lt;settings&gt;
      &lt;add name="DbNotificationPort" value="1200"/&gt;
    &lt;/settings&gt;
  &lt;/oracle.dataaccess.client&gt;
&lt;/configuration&gt;
</pre>
<p>If the configuration file does not exist or the db notification port is not specified, then ODP.NET uses a valid and random port number. The configuration file may also request for a random port number by specifying a db notification port value of -1.</p>
<p>The notification listener, which runs in the same application domain as ODP.NET, uses the specified port number to listen to notifications from the database. A notification listener gets created when the application registers with <code>OracleAQQueue.MessageAvailable</code> event. One notification listener can listen to all notification types. Only one notification listener is created for each application domain.</p>
<p class="subhead2"><a id="ODPNT3686"></a>Example</p>
<p>The following example demonstrates application notification. The first part of the example performs the requisite database setup for the database user, <code>SCOTT</code>. The second part of the example demonstrates how an application is notified when a message is available in the queue.</p>
<pre>
-- Part I: Database setup required for this demo
 
------------------------------------------------------------------
-- SQL to grant appropriate privilege to database user, SCOTT
------------------------------------------------------------------
SQL&gt; ALTER USER SCOTT ACCOUNT UNLOCK IDENTIFIED BY Pwd4Sct;
User altered.
SQL&gt; GRANT ALL ON DBMS_AQADM TO scott;
 
------------------------------------------------------------------
-- PLSQL to create queue-table and queue and start queue for SCOTT
------------------------------------------------------------------
BEGIN
  DBMS_AQADM.CREATE_QUEUE_TABLE(
    queue_table=&gt;'scott.test_q_tab', 
    queue_payload_type=&gt;'RAW', 
    multiple_consumers=&gt;FALSE);
 
  DBMS_AQADM.CREATE_QUEUE(
    queue_name=&gt;'scott.test_q', 
    queue_table=&gt;'scott.test_q_tab');
 
  DBMS_AQADM.START_QUEUE(queue_name=&gt;'scott.test_q');
END;
/
 
------------------------------------------------------------------
-- PLSQL to stop queue and drop queue &amp; queue-table from SCOTT
------------------------------------------------------------------
BEGIN
  DBMS_AQADM.STOP_QUEUE('scott.test_q');
 
  DBMS_AQADM.DROP_QUEUE(
    queue_name =&gt; 'scott.test_q', 
    auto_commit =&gt; TRUE);
 
  DBMS_AQADM.DROP_QUEUE_TABLE(
    queue_table =&gt; 'scott.test_q_tab',
    force =&gt; FALSE, 
    auto_commit =&gt; TRUE);
END;
/
-- End of Part I, database setup.

//Part II: Demonstrates application notification
//C#
using System;
using System.Text;
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;
 
namespace ODPSample
{
  /// &lt;summary&gt;
  /// Demonstrates how the application can be notified when a message is 
  /// available in a queue.
  /// &lt;/summary&gt;
  class Notification
  {
    static bool isNotified = false;
 
    static void Main(string[] args)
    {
      // Create connection
      string constr = "user id=scott;password=Pwd4Sct;data source=oracle";
      OracleConnection con = new OracleConnection(constr);
 
      // Create queue
      OracleAQQueue queue = new OracleAQQueue("scott.test_q", con);
 
      try
      {
        // Open connection
        con.Open();
 
        // Set message type for the queue
        queue.MessageType = OracleAQMessageType.Raw;
 
        // Add the event handler to handle the notification. The 
        // MsgReceived method will be invoked when a message is enqueued
        queue.MessageAvailable +=
          new OracleAQMessageAvailableEventHandler(Notification.MsgReceived);
 
        Console.WriteLine("Notification registered...");
 
        // Begin txn for enqueue
        OracleTransaction txn = con.BeginTransaction();
 
        Console.WriteLine("Now enqueuing message...");
 
        // Prepare message and RAW payload
        OracleAQMessage enqMsg = new OracleAQMessage();
        byte[] bytePayload = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
        enqMsg.Payload = bytePayload;
 
        // Prepare to Enqueue
        queue.EnqueueOptions.Visibility = OracleAQVisibilityMode.OnCommit;
 
        // Enqueue message
        queue.Enqueue(enqMsg);
 
        Console.WriteLine("Enqueued Message Payload      : "
          + ByteArrayToString(enqMsg.Payload as byte[]));
        Console.WriteLine("MessageId of Enqueued Message : "
          + ByteArrayToString(enqMsg.MessageId));
        Console.WriteLine();
 
        // Enqueue txn commit
        txn.Commit();
 
        // Loop while waiting for notification
        while (isNotified == false)
        {
          System.Threading.Thread.Sleep(2000);
        }
      }
      catch (Exception e)
      {
        Console.WriteLine("Error: {0}", e.Message);
      }
      finally
      {
        // Close/Dispose objects
        queue.Dispose();
        con.Close();
        con.Dispose();
      }
    }
 
    static void MsgReceived(object src, OracleAQMessageAvailableEventArgs arg)
    {
      try
      {
        Console.WriteLine("Notification Received...");
        Console.WriteLine("QueueName : {0}", arg.QueueName);
        Console.WriteLine("Notification Type : {0}", arg.NotificationType);
                
                //following type-cast to "byte[]" is required only for .NET 1.x
        byte[] notifiedMsgId = (byte[]) arg.MessageId[0];
        Console.WriteLine("MessageId of Notified Message : "
          + ByteArrayToString(notifiedMsgId));
        isNotified = true;
      }
      catch (Exception e)
      {
        Console.WriteLine("Error: {0}", e.Message);
      }
    }
        
        // Function to convert byte[] to string
    static private string ByteArrayToString(byte[] byteArray)
    {
      StringBuilder sb = new StringBuilder();
      for (int n = 0; n &lt; byteArray.Length; n++)
      {
        sb.Append((int.Parse(byteArray[n].ToString())).ToString("X"));
      }
      return sb.ToString();
    }
  }
}
</pre>
<div class="infoboxnotealso">
<p class="notep1">See Also:</p>
<ul>
<li>
<p><a href="intro003.htm#BHCJFIAJ">"Oracle.DataAccess.Client Namespace"</a></p>
</li>
<li>
<p><a href="#CHDGCJBB">OracleAQQueue Class</a></p>
</li>
<li>
<p><a href="#CHDHIJGD">OracleAQQueue Members</a></p>
</li>
</ul>
</div>
</div>
<!-- class="refsect3" --></div>
<!-- class="refsect2" --></div>
<!-- class="refsect1" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment2332">
<tr>
<td class="cellalignment2339">
<table class="cellalignment2337">
<tr>
<td class="cellalignment2336"><a href="OracleAQMessageAvailableEventHandlerDelegate.htm"><img width="24" height="24" src="../../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment2336"><a href="OracleAQDequeueModeEnumeration.htm"><img width="24" height="24" src="../../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2002, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment2341">
<table class="cellalignment2335">
<tr>
<td class="cellalignment2336"><a href="../../index.htm"><img width="24" height="24" src="../../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment2336"><a href="../../nav/portal_booklist.htm"><img width="24" height="24" src="../../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment2336"><a href="toc.htm"><img width="24" height="24" src="../../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment2336"><a href="index.htm"><img width="24" height="24" src="../../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment2336"><a href="../../nav/mindx.htm"><img width="24" height="24" src="../../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment2336"><a href="../../dcommon/html/feedback.htm"><img width="24" height="24" src="../../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
